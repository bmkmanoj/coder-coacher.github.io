<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CodeMesh 2014 -  Peer Stritzinger - Programming a Massively Scalable Garage Door Opener in Erlang | Coder Coacher - Coaching Coders</title><meta content="CodeMesh 2014 -  Peer Stritzinger - Programming a Massively Scalable Garage Door Opener in Erlang - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CodeMesh 2014 -  Peer Stritzinger - Programming a Massively Scalable Garage Door Opener in Erlang</b></h2><h5 class="post__date">2014-11-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Rm9-c7wkb3Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody so yeah I should
disappoint you I didn't bring a garage
opener but the top is remotely related
to garage door opens because the garage
open is one of the simplest machines to
this controlled by I feel see who knows
appeals auto plc is okay at least a few
who helped program that you'll see oh
okay Oh even one so yeah so let me start
by how I got there I am using mainly
island nowadays element seemingly I use
it in embedded system settings and I
started doing this while i do pretty
sensitive this device which is a
flashing device for the car industry for
most reflashing of his years so i needed
to implement a lot of protocols and in
this device and the allen was still
running previously on a separate
motherboard and on the cake lady was
operating system running or kind of
operating system actually executed
because it's not it's running lets you
link everything to the operating system
octaves runs on the gateways which
translate the USB signals that go from
the main work from ellen to the actual
is used to can browse most parts and
whatever on interfaces you need any
chemistry but the actual protocols or
the Gators are you stupid it's only
queuing coming through only back some
optimizations if he'll even prick
reaction like stuff that needs really to
be real time or in the gateways and
other automotive protocols and put it in
there so but I I thought it was like
having an ax handle in a deeply embedded
operating system so separate is kind of
limiting the stuff we could do with it
so i parted alain delon virtual machine
to the entrance of proteins
which is a hard-working operating system
and this is called the wrist project and
there's a website which is not very
active which hopefully will get more
active once I release the stuff because
this would be a department very spot
currently it's still entangled with some
customer code and I need to disentangle
a little bit thinking it up in there but
I'm sure if I promised it the same thing
the last year ago everybody's it until
the end of the year I didn't say which
year so a short overview of the author's
operating system so I already told
everything is linked together it can run
a very small hardware of course then you
can't forget about it anymore so we heat
like a medium-sized hardware tool
running on it has hard real-time
behavior so with the current system we
can implement the article time staff in
C and on top of it everything that's
more dynamic you can implement an l a--
which sexually good thing to have
because especially I mean the relativity
in a functional language like Ellen is
much higher than in like traditional
programming language imperative
languages the difference and shows you
even more if you're doing embedded stuff
because in a very stuffy a normal
compiled link cyclists quite tedious
because you often have you have to load
overtaking interface and it's very slow
and after at the port and I even
implemented the they are in distribution
so I can have a remote shell into the
note what I was well I was like in some
kind of driving and at one time and I
noticed that I didn't we go to system
for three days okay so long ago would
like reboot it every five minutes cause
normally right she called you those
debug I crashes try to find out why and
repeat fiber so let's move to the
application
these sports are that I'm showing today
are a form this is not directly for the
automotive system but for manufacturing
it's basically there the previous s of
this system was a rfid system that was
also good this bizarre temps that's how
we like thought me check items again
initially we wanted to like extend this
a little bit but work out differently
reboot the whole system and so this is a
proprietary rfid system for transport
systems in industry show you some
pictures all these stuff looks yes if
pilots moving around there are sensors
and this is a thing that goes up like
mechanically and stop staring and their
weapons here and they move continually
so can if multiple pallets on it and
with these things you can separate them
and stop them and fix them and that's
it's the whole area of application like
transporting stuff in the factory from
one closest to the next this is
currently running in a research project
it's providing some of funds for this
and one of the things that you wanted to
have that these transport systems are
very literature usually sometimes you
have like modules layer where we have
like say a corner stuff like this but
often you're like Bill it costs only for
the customer and then you have to adopt
your mechanical control stuff like how
long does doing it by weight from the
sensor to the stopper and whatever all
this stuff needs to be adopted in
practice and I don't want to do it
because otherwise i'm sitting in an
factory floors and fiddling with system
I don't have time for this so we want to
to do to enable the people who
traditionally do this plz programmers to
program our system so what this talk is
actually about is a soft plc which runs
on top of the Ellen Yin on these small
boards so let's go pick a little pale
sees and hears these programmable logic
controllers for those who don't know
what it is it's a kind of computer that
is used in mainly in industry but also
like for garage door openers went very
small one which usually control
real-time stuff or more or less in real
time stuff but stuff that needs where
you need a lot of like howard i also a
move stop electrically like the whole
basically the whole factor is 1 plcs
it's the pc of the factory and there's a
whole there's a whole roll of programs
programs PLC's which are very busy
program these plcs which use completely
different of programming languages from
us and where there's almost no or that
this was like let's call us normals of
the developers from they would disagree
so i finally kind of interesting to have
peace in that there there there are not
like their own programmers and Clojure
programmers and C++ programmers but
they're totally totally separate set of
programs which don't get me actually
them talk usually I talk to them because
I like need the input so these plcs and
I kind of standardized and a bunch of
summits so you can like run the code
from one plc on from the manufacturer
one plc kind on the others which kind of
works because some big company is not
saying in names usually there there is
one big one that the term
it's a European market and there's
another big one that dominates the
American market and they have their own
standards so they on all the smaller
ones that that also in the market they
are behind these and standards I see six
eleven thirty one that's for the
classical PLC's basically everything and
it's a new standard well of a pitcher
will hear more for distributive in seas
so how do you program these you see they
come in all kinds of sizes you usually
have lots of i/o sometimes they don't
invisible I oh they'll never like a
panel in some push buttons sometimes you
only see that I oh and see nothing else
so all the programs yeah well that's how
we started basically this kind of hard
because the phc was invented I think it
was invented for four because in their
first factories and in the 1950s they
had a problem that every time they had
to change something in process
everything was controlled by basically
relays time time delay relays and you're
licking their to bring the electrician
to rewire everything and so they wanted
to have a more flexible way to like
rewire their process and that's how
their their first language they think
they are very fond of graphic languages
so the first language is basically
they're derived from the diagram so the
expressions draws when he bills bills
relates so we have like this is a coil
of the relay and then let's switch and
basically this coil skips current the
switch clothes the current runs from
left to right so this is basically view
if you push the swim if this is sensor
or switch if you push this it's
energized then this gets closed and it
keeps on industrial
so and then next thing I assembler like
language and eat by the way this is
still in this in the standard even their
relay stuff and it's still used because
some people like this for certain
applications it's nice way to program
the stuff in the same sign up there is
also a pasta like language for structure
text as a positive ID centers where you
have like you can see it's possible life
and there's other similarities and
there's also a graphical version of this
you can basically write the function
block CM or basically this is the
graphically code for this in in this
case and usually have a mix you have
more complicated stuff it's more more
feasible for writing like an actual
program because it's complicated they
get program and then we put it in a
block like this and and then you arrange
the high level blocks you just rewire
for configuration there's also
sequential function card chocolates a
direct from internets that's basically
those transitions and it's a kind of
state machine so it will stay active and
this condition gets actuated then it
goes to the next state and you can have
like diverging and converging
transitions or both sides and yeah we
that's mainly they the highest level in
IEC 611 31 so for the month is to get a
few things but not a security plc is our
kind boring and the costly we are using
Eleanor half f ways to do / distribution
we were more interested in the
distillate pcs with which actually fit
better they compute model of those fits
better for bringing it on on on an
errand machine in a disability LC these
blocks you saw before augmented and
forehead now so what we have now is like
iOS that'sthat's input variables it's
basically parameters let's output
they're off the block and we have
connect multiple input multiple output
it's quite usual here we are if only one
heart one and in addition we also have
events and the events of the stuff
because in the inherited events to
normal stuff because Norman acted I
forgot to mention it the normal kid sees
the way the code runs is the code is
running a cycle there's an implicit loop
over the whole code and if you focus to
complicate the cyclic slower so it
doesn't get it doesn't react fast enough
and they need to buy a bigger area let's
fold it it's only cycles global variable
cyclists are we missing and for
distribution this won't work anymore
because you can't like translate his
circles very well two on the wire and
the global variables so they aired
events and now the blocks don't run in
cycles anymore they don't run at all
they only around when event comes so if
if an input event triggers then the code
he runs and output event is triggered
after the call this one or why the
closest one and these events are
connected to the inputs and outputs
which means that these inputs are only
valid if this event comes that's an
important thing to do because otherwise
you would have liked to to still pull
the date the data value so the data is
connected to an event and this is only
valid when the event actually triggers
which makes it quite feasible to map
this on messages which is validated of
course basically event plus associated
data is a message let's look how this
actually looks on shortly we have the
coastal there he had like
blog it's called o-tar this it's going
to be cold for this for this block you
have some input events and get the
second input event about event you can
see as a respect man that's basically
the connection to the data and then you
have output events also the statements
making sure that input and output data
and let me get some coach there's an
implicit state machine in this blocks so
we have to specify our state's there any
inverted state associated the stages is
a piece of program a piece of algorithm
called by Rodin which runs then the
state is entered so every time you go
into a ready state we settle in the
center and the thing after their own and
that's that's what happens when a result
i will run then they're ready output
event is triggered so here we specify
which input event not just when they
produce its anything especially trust
the states and what ransom with me into
the states the transition sir may I have
the implements basic if you have
transition state transitions it's
basically a textural state transition
game time so if this day goes to that
state and the on the right hand and it's
a good event which triggered this we on
the right hand you have can have come
complete God expressions you can ever as
basically add I event combined with this
with some boolean expression on the
variables and you can even heat off the
event and this doesn't trigger by itself
but it it's not that it's triggered loud
event can be triggered by a different
event because these are like triggered
by a search by priority like the topmost
is searched rest and also after a
transition is gone in a state machine
and then we again go to the through the
transition
so I'm going to be done with this
mistake because really transition and
then we don't if I event because you're
already consumed our event and then
everything that has gessner event can
also trigger so then here we have
algorithms that Walter is basically a
majority vote that's a block that's it
it's in all the beginners books of these
jerseys stuff so I just took it people
seem to need this stuff in in PSD
applications so before we dive deeper in
how I actually bring this on the other
machine I show you the application and
that's actually you see over there you
see there the red loop see the red
lupien so it's the same voice and they
actually this is a transport system and
it's it's only this corner that's how we
started like this summer we had this
corner and it's the first actual demo to
the to the management and where we show
this and so this palette goes here it's
a very simple program we go it stops
here and they take it by the sensor and
after five seconds I think it opens the
thing is it goes on and it actually
stops the motor so it doesn't fall off
here and there you see the boss that we
have here furthermore it so in the
meantime
they have our
they didn't look well they run in
circles and try stuff out with Pippa
nuttin but a mullet is shown so this is
this is going on right down there this
is going on 24 hours at the moment
that's like we call them all these
machines then very tryouts them so the
next slide is the same skip alright so
how did I bring this on there on the
aramean over time if you install a have
an OTP what you get with this is
basically all almost all you need you
get a lexical analysis thing the legs
were stably which is basically looking
like if he know X and yet you can use
the am inversions we have basically the
same syntax there are only difference to
the sea versions of Nexen Jacob maybe
does everybody know what legs in the air
kiss yes so the exits lexical analysis
and Yankees is a positive generator and
in the oven versions you you you can
make sure if just write an encode in
their attributes which is quite
convenient because if you if you build a
compiler and see then you have to write
a lot of management code like symbol
tables and stuff like this and if you're
on a language like Ellen function
language was high or a function stuff
like this it's much easier throughout
the compiler because you don't have for
this manager and cold and you can have
like higher-order functions that
traverse yer your abstract syntax tree
and what if i stop any connect very very
tiny passes over there in the in the
compilers it's very convenient and what
I often is possible to actually generate
because I want the code that I hear that
written by the kids see programmers
actually run on there and we em together
with the rest of the stuff that we
develop because there's lots of other
stuff going on there serif rfid reader
going on and we have a disability cache
of the RFID contents in internet work we
have we are planning to land to online
playing AI optimization of the factory
stuff this is all that Jana I mean the
whole rocking surface is normally done
by PLC programs they actually write for
outing I persons in PTV it's crazy it's
very crazy so what we know is it you do
only simple things in the PLC stuff just
like move the parts and all the higher
level stuff in completely keeping Anna
and so since you want to have to we want
to run it on the air nvm we somehow want
to produce an encode so we could like
General Gavin code but there's actually
something much much nicer inside they
are a compiler because inside the other
competitors are hidden in internal
language which is called koyama which is
a much simpler function language and
which very simple scoping rules where
you have left basically have left this
in depth and in that and there so you're
very clear scoping goes is coping in
Evans kind of once a tree is complex I
happen it's like yeah through it okay so
it's much easier to generate this code
but so there are some challenges and
generating like cold for imperative
language in into a function language
because for example if at the if
statement and you have like two branches
in a neckline let's say is if a variable
for the if statement so it is a very own
really ended in live statement only one
branch I change the bedding and
afterwards I still use the value so if
you want to like transform this in a
functional language it doesn't work it
it's like you have to think about what
what what you so you could basically
have to everything is after day of
statement you have to put into an old
function basically in past and stuff as
parameters but what I can't decide I
everything what's after the if is in its
own net and they need to find out which
which path through the fluid if
statement modifies which variables and
please get parameters to this leg so I I
can transform the imperative and then
end this stuff to the functional stuff
this loops is similar basically you
generate the loop and generator function
for the loop and then you make the tail
recursion take Taylor recursive call
quite similar I can this comprehension
czar compiled also compared to an
internal function so let's look a little
bit like the compiler I'll be minus is
split up it's a little bit simplified
based on the left pointer now so over
here no I'm not painting over here I'm
already lets you compile a dragon these
are the pastor's first you scan and we
pass that generated stuff by the
positive generator and skinny generator
then we have a bunch of small passes
over there abstract sometimes three from
swami stuff a little bit and then i
produced going on and at the end all I
call is basically from the compiler
Indiana compiler compiler I compiled
from core and so you can eat the coil
and stuff you can normally you produce
just a simple story of quiana but it has
actually assert that you can pretty
print it and you can look at it all
right if I have time I'll show you some
coil so then we need a runtime and so I
have to talk a little bit up there's T
files are the actual source files and
the volta st5 is the 1i already
show you and it's like a different color
st fun there's another kind of centers
for the st file way too deep connections
so basically they're connecting the
inputs and outputs of different function
blocks there's also syntax for this but
usually you can write it as a sometimes
and I did because I don't have a
graphical tool yet but normally this you
doing a graphical separate thing and we
will end this everything ever been an
IDE which will be better than the
current Ides of plc programming stuff
which is not hard to do because the
current is very sad sorry about if
somebody who probably not only see a
little pissed these tools so there the
application basically where everything
is wired together is and compiles like a
different and has a different one time
then the normal docks so the normal box
it's basically these are data air and
behavior module where where the the
actual actions have a loop that goes on
so every function block is natural and
process since the arm processors a
lightweight it just don't care don't
have to just run my synchronously which
has some extra challenges because you
really notice that people who wrote the
specification for these languages they
they are a sickness you can sleep they
are still taking loops they still
thinking how do we translate this on our
loops forever running synchronous loops
so it's interesting but I think they
they won't like wherever anyway way gets
them so this is actually the server loop
and this is the Coburg module that's
generated by there but a fatty compiled
and the the application thing is a
little bit different there's a there's a
different behavior they cause into this
and also the supervisor and cause them
to their to the application module to
find out which function
actually needs to start because all
these processes are of course spa waste
so talking about supervisors that's how
it looks when runs we have the green
stuff basically is pre written a note
that that's called it's in the runtime
system and reddish brown stuff are there
there's T source files and foreknowledge
function blocks and the slider brown one
is the application much look actually
this is the bean file generated like
this I just wrote it yes what is this
easier the name of the language of
structure takes a shortcut st and so I
there is this and standard file
extensions or just kept it so what
happens is basically when they're dead
when they're wiser usually here is also
that they caught that this is also the
corporate module for the iron on
occasion for people who know LM
vacations and applications of piece of
code that has some service associated to
it and which you can start and stop and
starting and something is going also
over this generated code here which then
calls there a generic one time
supervisor which called spec and like us
to them so what what are you two but I
mean what kind of function what's going
to start and then it starts all the
function blocks the actual comic modules
which then call back into their the
blocks and there's also a special case
on the left because sometimes you can't
write you can't or don't although I
don't want to write the actual
implementation function plug in st
because it's not possible quite
wonderful the delay is impossible
actually because i can't have a delay in
st I need a delay block and external and
this is actually the this is the
standard runtime you later up here very
using and so there's a different way to
specify its own st files to specify the
interface so everybody can look at
St file in still knows what's inputs and
outputs and then there instead of how I
Muslims Westchester a statement which
says this is implemented in Ellen and
mpeg-4 bag module is this one that's the
animal which needs to observe a
different behavior from the other thing
and all the function blocks and the
application are special processes so
they are confirming to all OTP rules so
they can be put into supervisor trees as
you want oops it's not what I wanted
there's one slightly problem we we have
the event at the data collected and
remove it as messages and when you do
give me the a situation like this we
have their event output in the data
output oops sorry when they might output
in the data output goes to the same
target function look then I just send a
message from here to there but it is
allowed to lift stuff like this so the
day then goes through another block and
then goes back into this blog and the
data goes directly so then I need to
make sure that this event never arrives
before the data i mean if i look at
aaron semantics if i am on the same
machine and that actually can't never
happen because if they 11 everyone the
one message goes through another process
and this one is all there always arrive
synchronously but we are talking about
distributed pcs so we don't know which
machines these function books are so we
need to make sure that always the data
is there first before this event
differently there's a simple solution to
it basically what what I do is I send
the data first and they said it
synchronously so I awake until you get
down the answer the data right and then
sent the event this is not too efficient
sometimes you need to do this because
it's the past the event goes is to
complicate it and it just need a forward
with always works there's a different
way if you analyze the connection graph
the thing then you can find out that if
we will just move the data through here
then we can just part then everything's
together again they have anything they
turn to get together again and four
cases are simple enough where the cost
is simple enough which are very often
most of the cases are simple enough that
you can actually find out okay and move
the data along and then I basically add
a virtual input and output because just
two and then I can just use simple
messages so I mentioned distributed plc
if you want a the distribution we need
to make sure some other stuff because
when we distribute over the network we
have these things called next blitz and
no towns and all kinds of fun that
happens which goes in the way of the
soft just working and so we have
basically the two notes left the right
and we have posted we have this super as
a tree and you see these blue box
there's an additional process added to
their to their supervisor as last plan
as last chart child so every every
function of the started first and then
then monitor block the fields demonic
o'clock and the supervisors actually
currently it's a 14 or so which means if
any of these processes crashes the
supervisor terminates all other
processes and then starts everything
from start because with this message
passing free-flowing message passing
actually they might be a more optimized
way but I didn't find it yet you can
have nested application so you can nest
applications and application then you
came like transform into I suppose
to you maybe but currently it's like if
anything goes wrong here or the monitor
crashes for example and for recent we
will soon see then everything is
restarted so we have a lot of colorful
era cm so the violet arrows are
interested Commission tree and let's
start with the red ones so what happens
here i am only drew half the stuff you
have to think it's symmetric so the
other side does the same but then it
would be even more confusing so let's
look at this but what will happens when
they start up they register their
function looks because functional sit
names the functional set instances you
can add voice this is one punch book so
they are named and currently i'm just
using an explorer registry this will not
stay this like this because the global
FST has issues especially if you have
liked more than 100 notes and you don't
have that much computation power so
we're I'm maybe I'm talking a little bit
later in when there's still time this
there's other ways to do distribution
reserve and another registry we
purchases resources but for the first
version we just use the global registry
global registry means then on every node
4 runs a global module and they change
the name and if you're registering its
globally registered in the whole tree
and there's basically a collision
detection if evolution happens then you
can either shoots one or you can like a
pass a function that it's called and
then you can decide which one has to go
away in our use case in carbon this
can't happen because we actually
actually generate all these tables and
we know exactly which processes on which
node and we know exactly which names
exist so we know there is no duplicate
constable name so it's just one first
thing so when they start up they
actually don't start fuel they only
start halfway and register their name
and then the wait for a start signal so
actually now let's start and that's
where they monitor comes in
so next let's look at the yellow things
and orange ones you have red to orange
the monitor actually weights if
everything is registered it waits for
its own processes to be registered
because some some process could be slow
and it also waits for those processes
for the other nodes if you registered
the global so when the money plus sees
all the den HD expects they need send
stop messages to all the function blocks
and then the actual action starts so
this is the start up so with this we can
handle like if you start up one Road in
the other load isn't there and we can't
run what happens if you slip the net or
100 * then the money club is called
monitor for a reason because it money to
us all the function looks and all other
nodes not the local ones because of my
are also positives careless but it
monitors all the other that their robes
nose and then they will function box and
if any one of those ghosts which we will
find out after a wine not very hard it's
very slow actually but this is tunable
then the monitor crashes itself because
half of the applications are eternal
anymore so it pushes itself and what i
put in addition there that you can have
multiple pills and multiple plc
applications per node and you can have a
fallback application so you can have
mobile applications all users load
layout because the main thing why we
want to distribute to this we want to
use the IM of the other nodes soaking we
conserve I all sensors and actuators and
everything so the whole thing gets
cheaper that's all don't save money and
so you can have a four-bit up make your
application which which then does sound
like emergency program so this looks
like a no time that's what I have on the
table funds also concede so we have two
nodes here these are embedded horse
running or tents and
they are connected with Edith this is
industrial isn't it see it's like a
little bit like that the tail wagging
with the dog this little boys are
normally it's like yeah it's very robust
and wire to these eSports are some
actual actuators let's and actually we
also have a sensor this is one of those
inductive method at a consensus so when
metal post comes close it the signal
goes to one and and you see everyone has
its own actuators and sensors and then
it work together so let's start them up
so normally this this are the clothes in
like three seconds but any five not
going to six seconds but we look a lot
and currently the serial console is too
long and it's synchronous because it's
only used for debugging and so we need
to wait until all they're all the log
messages are output overland not connect
the serial console yeah so it's not
something red let's be safe five seconds
and then one of the traffic lights get
screen so that's actually traffic lights
by doing and so since we have traffic
lights on you cause so this one has
screens all this one hand goes room
nothing changes but if you if no traffic
is over there and somebody comes here to
the sensor and step in the red light to
trigger it right then you get screening
can go and you have traffic eight both
sides
but it was like interchange everybody
can go a little bit so that classic
sensor traffic light so what happens if
network goes on let's make it go down
that's it so the first thing you see we
go to read both get read this is
actually in the application so in the in
the traffic light application identify
itself so it needs a signal from the
other side to go from red to green and
so it always gets stuck at red and if
the other side just disappears so this
this now takes a while because the abuse
abuse intends if you don't unit it sends
every I think every 15 seconds it sends
a message to their our penises out of
milk and if it misses for ping messages
at least four or five pin messages I
don't know then it takes out on this gun
and so this is the time it takes until
the fall by complication then then then
our main application crashes now we are
still in the main application they made
application crashes in the public comes
on mint it's about two it worked before
so yeah after a time zone we wait for it
yeah it crashed so this is the phobic
applications that use a different plc
application which doesn't use
sensitization that the thing that does
the track yet will do like yellow
blinking be careful and so what actually
happens now is that the main application
crashed and gets restarted again and we
starts all the blocks and then waits in
the monitor onto the other side appears
again so the appearance goes much faster
in the disappearance the disappearance
can be sped up if you if you can have to
take time increase the
tribution but then you get into a mess
when you have lots of notes because then
you get lots of traffic just for pinging
and but there are ways around this this
I just kept it simple at the moment so
let's plug it again and see what happens
so it starts in wrestling what
everybody's dr singh if the first
question that works again and yeah I've
run it for like quite enough actually
before I talk about Hardware time I
actually would like to show you some
code since there's enough time so this
sexual nature coded this away let's
actually hope that implements the
traffic light can you read it is it read
a loop or should increase the font time
so we have similar to de volta we have
some event inputs and outputs and we
have like outputs for for the for the
finish actuators for the colors for the
lights there's also a delay output which
goes into a delay these delayed rock we
saw which we can't have him in here
there's no delay in this state machine
you need an external delayed on looking
back to the input length there they wait
the wait event basically triggers to
delay sets the amount of delay you want
to wait so we only need one delay book
because we can change the actual time we
want to wait and then you get to take
effect the labor market vectors with the
next event so you get through the
state's automatically then we have the
input variables which is the time the
inner light stays on and time the green
light stays on that's actually
configurable or that can be adopted to
the traffic amount if you have lots of
traffic at short intervals and if less
traffic your nightclothes would actually
work and then there's a yield signal
which is basically the sensor from the
other from the other side that the other
side's say hey I also go to heaven
crossroads and salads for this up a
little bit they are the stakes you see
you can have this is more complex now
you can have multiple excellent output
events
every time we change something we send a
set event which actually sets the lights
in the aisles cuz we need an event to
actually set the value the great event
is triggered when whenever we want to
wait they are by event goes the other
one goes over the network to the other
side and tells the other side yeah you
can go green I'm rent this is only
triggered by the red state so that's why
if he if we interrupt the thing it just
stops because the other leg doesn't go
through any more until the following
application comes running so then we
have the transitions yes you can see
here here in PDF basically a boolean
transition is also boolean transition
for utilization it has always in the
beginning this is these islands trigger
parents and they the actual algorithms
are very simple because you just did the
set then the lights and then they delay
for favorite eventual wait so that's the
whole software of the traffic light by
the way up to the german word for
traffic light what's wrong normally I
only called in English but yeah traffic
light kind of suck it's like this is to
show you the other I think this reaction
the connection goes the function blocks
initially that's all the functional
blocks we have so we have we have
initialized the function block that gets
us the first event in to get things
started basically after switch on you
get one event to get stopped running and
then you have initial i dinnae delay for
the initialize so we wait a little bit
until we go from red to changing so we
are 56 seconds right when we switched on
so we start from a safe site steak and
then they my out my inlets the actual
actuators that are those are hunched
blocks who actually map to the iOS on
the boards and the sensor is the input
in front you see the names and then we
have the function block basically each
other lets the code is just saw that
sound and so we have two of those and
each each one has one lily which then
look back and then you just have the
connections that's kind of boring and
any connections you can have not it's a
veg connection that's how the events are
connected and the data collections can
it also have constant values let's all
appreciate this stuff for example so a
little bit of code i want to show you
that's actually an unpowered coke ready
prevented so the texts the Code of the
ample after I compounded so this is
actually algorithm so it's a case
similar they're still FM edging with
this this is Heather matched and then
you have all kind of a rope less than of
nested let's and yeah just I don't watch
going to detergents just solely saw it
once so let me talk a little bit about
hard with amazon as i have time with
much i know where so this is actually
running on the honor system so we have
soft real time they actually love I all
bound and embedded applications where
software x solutions wait sufficient
that the most time in time and the
actual definition of hardware time is
also very interesting posits that's one
of the definitions it's it's
sufficiently quickly so not very hard to
find so algorithm is mostly if if you
miss the deadline that is an error but
you only can like promise to have
ninety-nine percent error or ninety
ninety nine percent lon I mean I on
every different one percenter
person you basically always a
probability that it takes because the
aggregate it so how do i times not
always you will ever ever get the
deadline so soft real time is the new
hardware time not be dominant you
actually plan to get hardware time into
the airline system so I thought that I
could like compile to see in running and
see and it's actually faster harder time
but that's outpouring that's that's the
way the Aaron system admin autumns is
looking right now at the ellen code if
they'll run time this is the there are
times executive and Kane smc application
and in the end holds two myths and
LinkedIn drivers or pot drivers you can
actually talk directly to the order
usually you just talk to the registers
because there's no memory protection you
just access everything so when we did
this processes in the air and host that
they are now software time so when you
want to have hard real-time we have
already a hot item operating system so
we can actually basics that don't need
but any other second level basically so
you see that sought to be moved over
there and be a runtime the normally a
long cold on the top and intermediate
running on a higher priority you're
planning to retaining its all plans not
done yet we're planning to do to run a
special scheduler for having processes
which knows about our words I'm which in
which runs at a higher priority than all
the other processes so they preempted
toes and usually it probably only the
algorithm stuff then talks to her
anymore so how could this work I mean
our dynamic garbage collected language
it's kind of doesn't fit really if you
think about it so let's look at a time
I'm gonna add a process runs yeah for
time t0 when
and their arrows are messages you get a
message and then you have one deadline
or we will live one day line which is
basically that I've only had have to do
all the actions then we need to have all
that I Oh actions and send all the
messages outgoing and everything and
then if they're blue hair give the
recovery time it's a second deadline
that's the deadline until when we are
ready to get the next message and that's
how we show the gorge bridge and then we
need to like show that subculture if you
have the whole communication network you
can possibly some limitations of you you
can use forever but you have to limit
yourself a little bit like memory bus
and stuff like this and then you can
think there you see two processes and
it's a early instead i first came you
know so the grave and next deadline is
highest priority so the green action on
of the office deadline runs first and
then the garbage collection can happen
actually there then recovery time that's
actually translated will ever ever
relatively easily 20 something the user
understands that's actually a message
right the maximum message right the
system can take so how do we want to do
this we have fixed two-part hips so we
ought ok maybe he auto paid the hips in
the beginning we don't increase them
let's memory gate and you have to sign
two parts of tape two copies of thieves
so we can we use the normal copying
garbage collector Aaron which copies
between these two Eve's the message
mailbox needs also to be fixed size of
course because growing message mailbox
is not real time it makes it slower and
if you have lots of messages to match
and you crashing what kinds of errors
you missed the deadline you crash you
you're out of memory you crash and you
can have a very quick restart because
you can't just jump to the beginning and
you don't just reduce your whole team
you just throw away your stay and jump
to the beginning and you can do this
several times and have
counter for this in an intimate this
doesn't work that you really crash and
then your supervisor concert so yeah
it's the last time you can you need
different message behavior because of
the limited size networks and I'm
actually in favor of implementing all
four combinations because at least 43
again I have an immediate application
and oneness yeah it's less political
symmetry so you can either care center
it's very simple phenomenon across the
sentence center stuff too fast and it's
his fault subscription don't set me so
much crash you can crash the receiver
because they were seen a mistake in the
receiver might be corrupt and which
makes it slow and so it contact less
afraid anymore so we kept fresh the
receiver and then we can not crush
anybody but drop messages and you can
keep their word messages or keep the new
messages for example temperature sensor
you keep the new messages because if you
have a new new temperature they will
temperatures you don't have on it any
more fun like a control loop and then
sisson and now we don't have time for
questions anyone probably only short
questions or talk to me on the roads
gosh</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>