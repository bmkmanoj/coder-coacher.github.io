<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Peer Stritzinger &amp; Claudia Doppioslash - Elmrang Connect (Lambda Days 2016) | Coder Coacher - Coaching Coders</title><meta content="Peer Stritzinger &amp; Claudia Doppioslash - Elmrang Connect (Lambda Days 2016) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Peer Stritzinger &amp; Claudia Doppioslash - Elmrang Connect (Lambda Days 2016)</b></h2><h5 class="post__date">2016-03-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/s9evfyR1gL4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">ok
I'm
on the on the menu on the Erlang parts
at the moment on the on the embedded
parts and these these demo things and
this is employed as a boo / and then
working mainly on the album parts yeah
let's start so Ellen Ellen so first I
want to talk a little bit about where
we're basically come from or how I got
to Ellen that's a also a very device
it's a little bit larger it's a flashing
tool for the automotive industry all the
automotive stakes are written in the air
long I for the third version i switch to
along because i was bored doing it again
in c and liked a lot the productivity
gains of a long and this was the product
was and back then it was like a little
bit more traditional there was a
mainboard running freebsd where the
island stuff ran and it was connected
over USB to some automotive gateways
which did all the low-level automotive
stuff so i basically had some like just
queuing gate wakes with doing the low
level stuff and ellen was only talking
to the u.s. be there for the further
more embedded applications in us
industrial control systems we needed
some more compact hardware and also we
need more control of our timing and
real-time ness and so basically what i
did is i ported element to a smaller
hardware and a hard real-time operating
system and out of this came basically
the need that the users we actually
build this industrial control systems
also want to program them but they are
not used to program an airline they
won't touch yellow they won't even touch
see or whatever they they are in their
own world they're different separate
kind of software developers and that's
why i have to introduce the field a
little bit so because you probably have
no connection to those people i did
anybody in the room ever programa plc ah
you not count Oh another one two three
yeah top
so I hope I have something new for you
too because it's actually a new kind of
pcs so what is the PLC programmable
logic controller these are have like 30
years of history or even more where they
invented basically to replace having to
rewire the whole control station by
electrician every time when you want to
change the process so they wanted to
have some some kind of programmable
wiring and that's basically the first
standard that came out was like looking
like the diagrams which the electricians
draw how to do the writing you had relay
and delays and all kinds of this stuff
and this evolved for 30 years and now
there's a plethora of different ways to
program these and most times they're
just boxes with lots of i/o and
currently there is a normal computer in
them sometimes even a rather large
computer if you need a huge plc that
does lots of stuff because the way they
actually work out is kind of inefficient
because a normal PUC you write a program
and it runs in circles and let's say a
cycle time that's your real timeless
basically your program runs in circles
and if you're certain time gets too slow
because your program gets too large you
need a larger plc but it always runs and
so nowadays we want to like have stuff
more distributed and my network and also
like have computers led to other stuff
then the PLC so there is a new standard
for POC that's IEC 649 9 so quite new
standard by these things it's like a
post two thousand and and what they
added there is it doesn't run in cycles
anymore but it also has a data type for
events and i just put picked out the
block it's basically we don't have time
to introduce it all so lots of the plc
languages are graphical so you have
basically blocks and you wire them
together the modern ones and you have
ios so links on the left side there are
the inputs on the right side that are
the outputs and the new standard edit
basically the thing on the top that it
has a little head on the top and the
other thing on the top they are actually
events so real events not like being
switched on for 10 milliseconds and then
switched off
and trigger for this but a real event
like point in time and I also basically
connected to the events and only valid
and sample when defenses so for the
embedded system I I parted for this
control system i parted them along to
autumns autumns is a open-source hard
real-time operating system it's actually
saying operating systems a little bit
much because it's actually executed so
you link your whole operating system to
your application you have one image and
you run this and you run on the hardware
you can access every bit in the hardware
there's no memory protection there only
threats no processes nothing and
basically the application here is the L
nvm linked together with the operating
system and some drivers to actually
access the hardware basically link to
the whole thing and you can access them
from Ellen so with this I get basically
advantages to have all the things along
i don't know i probably don't have to
introduce allen first along is a mostly
function language which has also a kind
of process model which is the chairs
nothing with the other processes so
that's actually a much much improvement
over the threats we have embedded
systems we we do message passing between
those processes and they are very
lightweight and we can have many of them
and it's also very tolerant and you can
do a hot code upgrade and that's
actually features very very interesting
industrial control systems because don't
have to stop the conveyor belt to
upgrade your system and very tolerant is
also very important for the customers
because yeah when the thing stops
manufacturing stops and then you get
angry calls yeah okay this this project
is like I'm going for a while it's
called crisp it's in theory open source
actually it will be like committed back
to the along OTP you and I'm in the
process of actually finally finalizing
it because having a budget now actually
helps so I want to show a little bit
like how these modern languages for
plc's look there's this this is one of
the highest level languages there are
like assembler like languages there's a
whole set of languages all solid eyes
and this is the language for for writing
a function block
forum for one of the modern distributed
PLC's so you have you start a function
block that's basically then one of the
blocks that basically the technicians
can just write together and apply
something this is actually the source
code of the block that runs on this
traffic light we will show afterwards so
you basically you declare your event
inputs your do a clear the worst thing
is connects the data then you have your
data inputs and your data outputs and on
the next slide there's basically a
built-in oh actually this is cut off a
little bit yeah too late to turn to
adjust so there's a there's a first line
that you don't see which just says it's
easy States so you have a state machine
built into the thing it's basically a
hardwired quite complex trait machine
where you have states the state's
basically run algorithms that's the
thing with I've this arc so if you enter
the state you run some piece of code and
you can trigger output events that's the
thing after the arrow it's details then
you have transitions between those
events basically triggered either I
basically always triggered by an event
you know if you don't receive an event
you just sleep you do nothing so it's
not running in circles anymore very
efficient no just waiting sitting there
waiting actually that's what Ellen
process can do very well and there's if
an event comes in there's basically the
transitions go this is basically an
event here so you can basically the
trigger on an event or you can have an
event and a condition or only a
condition but the condition is also only
checked when any event comes in it's
just not dependent on any special
specific event so yeah also details and
then finally you have the algorithms
that in this case we just set the output
lines basically to have the right
traffic light patterns and the
transition machine actually triggers
output event which actually makes it
happen in the hardware so in in practice
this is only via to some delay blocks
and to the iOS that's all we have at the
moment
so why did we actually build this the
application is a research project
currently so we all we have a little bit
more freedom of what word you implement
and be a little bit more progressive
what we want to do because it's not not
only half half wave customer budget this
is basically a smart fit project it's
german research project and my customers
bosch rexroth who is actually partner in
this research project and they are
building basically we're trying to build
the next generation of manufacturing
control systems with all kinds of yeah
it's called industry 40 whatever it
might mean I don't know what industry 20
30 actually there's a definition but I
can never remember it it's 40 now that's
what we do if you want to be brick but
on the front edge you do 40 whatever and
yeah we wanted to have programmability
by POC programmers because we didn't vln
programmers didn't want to do all the
like the machinery set up by ourselves I
mean there's lots of machineries and
there's only two of us so yeah that
doesn't work and i have i've brought a
few pictures let's basically these
sports in a inner actually large box it
could be smaller but it was for the for
a research demonstrated we put a little
bit larger box on it because they had
put lots of eyes in it it was shown and
see bit that's a up there you see a
transport system the demonstrator that's
a box around these sports so these are
the actual boards actually they are all
ports I also brought the video so that's
what the thing does you have little
pellets where the product is on and and
it gets moved around and the lifts go up
and down and you have kind of sensors
all everywhere which detective there's
something coming and you have all kinds
of actuators and this is actually
controlled by the POC language by these
function blocks which are I wrote the
compiler for which compiles 2ln
processors so on the knees we have a
long process is basically its beam files
it comes out of it and yeah you need to
like have RFID reader this thing also
has RFID reader connect that that's
actually how we start it and you need to
like fix the product and that's about it
I think it's done yet next slide so this
is how it looked and submit it was like
shown on C bit last year initially it
was planned to go over and over trade
fair this year but I don't think we have
funding for this and with a slide oh let
me let me a little a little intro so why
do we need elm for this the PLC
programmers they they used to a
graphical IDE basically they want blocks
and they occasionally right source code
like what's in the block but on the high
level stuff you wire blocks like like an
electric eel like MATLAB or something
like this it's very similar so they
won't touch if you say yeah use amex and
here's your source code and there's the
compiler build your stuff they won't
touch it and if you make them touch it
they will hate you so we need an IDE and
the idea was basically to put the IDE
not on a Windows computer where it
normally runs you have to install a
launch ID and the windows computer but
to actually put the ID in the embedded
system since the compile is already
written an airline and actually quite
compact because it's a long it's just
quite compact code it actually fits
easily in embedded system so the
compiler runs on the embedded system
also and what we need is an IDE to
actually sauce show stuff and what do
you do if you want to have a portable
idd nowadays you do web ID and for this
web ID we will also want you to do
something innovative and that's where
home comes in and now I hand over so I'm
gonna give you a very short overview Val
yes already done Elmore played with it
so it's familiar with it so keep it
short so I'm is a purely functional
language so immutable basically and it's
based on functional reactive programming
if you familiar we might be familiar
with the reactive but it's basically how
spreadsheet words so if you have a value
be that depends on a value way whenever
the value a is updated the value of is
also updated which is very good I think
for you is for example which is what
we're using it for and then it's another
language so if if you have a lazy
language then your value is only
evaluated available is only valuated
when you actually need it but that's a
bit unpredictable you can have space and
time leaks which are not good for
embedded real-time devices or games so
any your language is better for this
this type system is static and it's
quite expressive we got you since it's
purely functional you have to model the
affected side effects so it really keeps
you in track and makes you think about
where you use in side effects on you how
to do it properly it compiles to
JavaScript HTML and CSS mostly
JavaScript really and it's very good
performance for rendering especially
HTML because it uses virtual Dom which
is a very fast library and if you look
at line there
that's where it shows it's quite a
faster than amber ogia yes and other
stuff it interoperates with javascript
while still being type sized so he
manages to keep javascript in its own
box and make it not do too much damage
also since the the type system is very
good a you rarely encounter runtime
exceptions which is the main advantage
so your work is all up front basically
once you compile much like a skill eight
grams it still a small language so you
you are you will be able to put it all
in your head is not like C++ when all
every one ever does is no one there own
bit and they never know the other bits
so it's small it's good it was invented
by Evans applique for his thesis just in
2012 so it's pretty recent it's meant to
be approachable and practical so the
community is very focused on making it
useful for people and it's already used
in production in various companies as a
testament to that also it's very careful
about what terms in introduce so I won't
tell you it won't have things like more
nuts it will do everything quite slowly
so it's like please don't adopt me
because I won't scare you off with terms
of my disk I it's in production at these
companies and I a couple more ever this
company's well and like a puma as well
so there's quite a thriving community
then I should give you the one again yep
okay so we basically introduced the
technology want to use on the front end
for the IDE the idea needs to talk to
the back end basically and what we
actually want to have if you if you want
to debug a real-time machinery you
actually want to have real-time display
of the values in the machine like in
your function blocks so normally use
shall function blocks and you have
little numbers what's current number
what's the state machine doing inside
the function block have a little die
the state changing life basically and
you also want to have like kind of like
having like little scopes where you
could use it to look at the timeline
what which are sapping but also this
should update immediately because
normally you would stand at the
machinery and something happens and you
said what's happening there oh oh yeah
this value is wrong so it's you need to
be basically you need to sync the
physical world while debugging with your
because usually debugging the physics so
the mechanics is too slow or too fast or
whatever and the jumps of the rail
because you move the lift too fast and
you need to live fiddle with the
milliseconds a little bit and so that's
why it's very important that you can
actually see which state or sometimes it
just locked it just doesn't move anymore
why doesn't move anymore what's the
state so any fast uptight of state and
so I need to some way of bi-directional
connection and we have a web interface
now and we want a lightweight because
it's an embedded system and low latency
communication between the things because
you might have to update lots of values
if you look at the big diagram lots of
stuffs changing all the time so there's
actually some cause for efficiency
traditional there was like we there were
several ways to abuse HTTP to get
actually get live updates from the
server it's long polling probably heard
about it you basically make an HTTP
request and the server doesn't answer it
right away but it like keeps waiting
waiting waiting waiting waiting until
ian has an update and then it suddenly
answers here and it lets a connection
timeout and the client doesn't annex
connection and so this this is kind of
only half of solution because you
basically if you are having one
connection waiting and the client
actually wants to tell the server
urgently something it has already the
one connector waiting so you usually
have their multiple connections
basically to like one for pushing to the
server and one from getting fast updates
from the client and then you have the
mess that you basically you have a
request on there's one thing and you
have to match up your your answers on
the other thing and it's a big mess so
and then you have to implement normally
all everything in JavaScript it makes a
mess not smaller but larger and so yeah
it was not fun so there was some new
solution which is called web sockets
which ought to bill introduced I not i'm
not sure if everybody heard of it is the
RFC for it so there's actually ietf
standards it's a protocol standard not
only are we 3c standards so this is more
usually more more solidly specified also
it mainly works that you have if you if
you have a WebSocket connection it's a
normal HTTP connection so it starts
normally and then you have a special
hair they're going on which I will show
up the show which then upgrades you
connected to your web socket and then
the server answers with a similar header
and then from then on you have a TCP
connection between the client and the
server and there is only some minimum
framing going on you have frames on the
only TV so you don't have to like look
at the packets you have your own frames
and these frames are automatically
assembled by whatever library or the
browser to messages so you have
basically message passing you can show
if in messages the post time in both
sides you have a bi-directional
connection it's only one tcp connection
it doesn't need to reconnect all the
time and especially it it doesn't need
to send an HTTP header on every every
long pole and which is quite inefficient
I mean for example if you want to show
values we actually only a few bites to
actually transfer value it's like and
that's like a fact of thousand larger if
you have a large hcp head every time and
you have you might have a new TCP
connection and whatever so that this is
much better it goes over port 80 so it
normally proxies can't mess with it as
well as they or the fact that it goes
through the firewall basically it's not
an issue for us because normally all
this stuff should be behind a firewall
and not be accessible from the outside
hopefully because you can actually
reprogram the PLC with over the IDE so
you you might not want to have somebody
from outside the remotely programming it
accept it if it's a technician and
that's probably one of the interesting
things to secure them
so I showed shortly how this looks
that's an HTTP error and it's the client
handshake decline does it get requests
on some URL it it has the host field
that every it's basically if you have
virtual hosting the house field you want
to connect to and then you have
basically two things upgrade web socket
and connection upgrade so connections a
standard header field and the upgrade
web socket is basically the upgrade had
a special thing so basically what with
the one you tell it you want to operate
the connection and the other tells it to
what so we won't make the web sockets
and then you have some kind of random
thing going on here this isn't actually
security let's just a feature to
basically get around proxies messing
with your connection because a proxy
might think is smart if you reconnect to
your to your web socket again and said
oh yeah I saw this all I have it cashed
I send you what what you had what you
got last time and then you get a replay
of your last connection you want on want
this you want a new connection of course
and therefore you send basically a
random string to the server and what but
the server does with it we see in the
next slide and you have origin and then
you can basically have like internal
stuff let's say watsup protocols they
can be sub protocols websockets so
there's already complexity being slept
on as usual so you can have basically
it's an extensible framing protocol
where you can do all kinds of extensions
with it and of course it is version
field and the server answers with this
it says yeah fine let's switch protocols
let's operate the WebSocket I agree and
it also sends back a random thing which
is basically made from the other random
singer the client sent attaches unknown
kind of unique thing it's a UID which is
basically in the standard it should not
be like by random in any proxy so it
attaches to it and it does as SH a
digest and sends this back so this not
this is not security nothing to do with
security it's just like prevent stupid
all proxies fooling with it because a
new proxy basically should say oh yeah a
WebSocket I stay away
but the old proxy who tons of all
proxies are around and they would mess
with it and with this you wait at least
detected that this is wrong something's
wrong I could I didn't get my
connections then you dropped the
connection and then you can have a
fallback or whatever so with the
WebSocket we go to the island side on
the island side there are several
choices web servers and one of the web
services cowboy which is kind of widely
used and the advantage of cowboy that it
has built-in web socket support that
kind of we need so the choice was easy
because i think the other web servers
were either large or I didn't have web
sockets and there's also by the same
author by like a library called bullet
which basically gives you gives you the
both ends of the WebSocket the
JavaScript end like a basic library for
actually opening web sockets and in an
hour long end which which is actually
compatible with each other so they
immediately talk to each other which is
kind of convenient and the JavaScript
side also has or both sides also have a
degrade of connection basically if you
can't have a WebSocket it also can
support event source which was kind of
the predecessor of web sockets and
didn't take off well so it's actually
kind of dead dadash so probably I
wouldn't recommend using this anymore so
rather use web sorry but if you have an
also a server actually bullet can altima
automatically downgrade to event source
for you transparently and it can also do
long polling if nothing else works it's
just long poles for you this gives you a
limitation because your your transport
needs to be text then so you could
basically do binary only web sockets
because Webster can support this which
is kind of neat but if you want to be
able to take have had the use of the of
the long polling order or the downgrade
which is also kind of nice you probably
stick to text and have some kind of
efficient text encoding so if he if it
finally arrives on the island side what
you basically need to provide to the
to the tournament to cowboy basically
it's a well to pull it actually into you
plug in bullet as a general connection
handle on your pass and then you need to
have a module which actually handles the
the bullet connection and this is a kind
of simple korvac module if if you've a
very well along it's like looks like
similar kind of like gender or whatever
that's a way of airline encapsulating
the complicated process stuff and the
state stuff and you only have to provide
a callback module which is functional
and then you can test it functionally
for example because you only testing the
state is hidden away in a different
module and that's what paletas you have
an in it which is basically every time
called when there's a new connection and
you need to be aware that you always can
get a new connection any time because
your connection might drop all the all
the time or if it has to fall back to
long polling you will be getting a
connection every time there won't be
anything staying and for this is
actually the active field there it
actually tells you that you are active
once that it's not that sir only sent me
one man's that message because I can't
deal with more I have to close the
connection after the message because i'm
actually long polling and but if this is
not active normally there's a process
staying in the web server being active
as long as the the connection is there
and this this process basically sends
you if something's are arriving on this
on the stream like the message input you
get a stream call back where you have
basically your data and then you can do
in the dots you can do whatever in the
energy you set up your site basically
usually you connect to a session process
or something you have some kind of other
process that you control which always
runs which keeps like your session state
encapsulated and in the init you
basically like look that look the
session process up by a session ID for
example or just by a fixed name if you
only have one and and you basically like
tell your session process are we have a
new connection and I'm the new
connection process talk to me from now
on for example and in the stream you
basically get your data you can do some
processing
and the request is basically a thing
that cowboy has in every call it's
basically the HTTP request so you have
to pass it around all the time it's kind
of annoying and I think like is working
to get rid of this in the next version
but it basically handles the connection
state rep server state and the state is
actually US state you get back to get
passed back you state which you
basically created in the image and you
can you also reply with it if you got
something you say okay you get the
request and you can update your state
and pass it back the updated state so
you can keep your site updated and
there's another club back that's called
info which is basically whenever the
bullet process the connection process
gets some error message from outside
this korba gets cold and you get the
message that's basically actually I kept
this is wrong I kept the message in now
it's a refresh message but there's
actually some data it's a message your
message you sent it to it your session
process probably sent it so you get the
info you get also your state and the OB
creatures request object or objects or
it request data we don't have objects in
the airline and you reply BK f several
replies you can also reply this okay
which which space is saying yeah okay I
I take care of it but I'm not sending
anything now or you do reply which
basically sends our message on the web
socket so this is basically a way the
messages go back to the client and
there's also terminate a callback which
makes you make you get the day I can
tell you accession process well I'm no
longer live we are tearing down the
connection we're rolling it up and let's
let's not long please don't is no longer
talk to me wait for the next connection
process and it's actually kind of neat
they actually didn't forget in web
sockets that there's actually in band a
message that you're about to close civil
TCP connection so the client basically
or one each so I can say oh let's close
it like invent so the TCP connections
still there and only if both sigh close
then you normally closed I mean you can
always pull the plug
and then it just goes away that I mean
distributed system network is not
reliable but if everything works well it
actually they talk to each other because
there is a problem if you just close the
TCP connection you have stuff buffered
in the inner TCP chain and if the the
other side closest to early it basically
lose data and and the clothes message is
basically a kind of tag behind your data
which basically tells the other side if
you see in this close message I've sent
you everything I wanted to send you and
that's when you terminate gets cold and
also when the connection goes just away
Oh demo yeah already demo time okay so
you can probably see the demo well or do
that well yeah I think you can see so
what you have here is two of them better
parts it's actually the same boards they
control the the industrial transport
systems just a little bit of old version
they are connected by ethernet so we
have a distributed system because it's a
distributed plc language we need a
distributed system so we need at least
two boards and it's also also one there
are little switches on the boards
there's also one connection going to
this laptop which we probably should
connect now let's switch screens and
hope everything works
hello we're to give some time
probably confused because I just
switched oh it's loose thank you much
better so you're supposed to see
something soon yeah so let's move the
window a little bit in the middle so
what were heavier we have the two
embedded systems and the application we
do is traffic lights and since normal
traffic lights would be kind of boring
we also have a sensor so it's a sense of
traffic light like one of those who
basically are red and as soon as you
drive with your card so the traffic
light it basically detects you your car
is a magnetic sensor in the in the floor
and then it switches to green so
everybody like the main the main street
can keep Queen it keep keeping green I
just kept it symmetric so every street
is the main street kind of basically the
street the head of car passing basically
stays screen until the other side come
there's a car and there's traffic on
both sides we just have a normal traffic
light okay so we have the sensors here
and these are inductive metal metal
sensors that's actually investors end
zones they are so big creatures in
industrial control there they are just
called sensors so if anybody says sensor
this and they're everywhere and
basically you put a piece of metal close
to it it triggers a 24 volt signal very
standardized there and you can't just
buy them in big boxes from anywhere and
use them so I abuse these sensors
normally I'm bringing like a small toy
cars but I forgot them this time so
these batteries are the cause so these
cars yeah I mean the kind of also roll
and yeah and here's the traffic light
and this one is showing green and this
one is red and basically half of the
application is running on one board
controlling this traffic light so you
see these iOS are only connected to this
and these I also only connected to this
sport and the tooth that's basically on
each board runs a function block like
the one I showed you and they talk to
each other so there is also a fallback
mechanism if I pull the plug I actually
as an old coat much talk with them with
this then it's a four-bit application
and both supposed to get yellow blinking
so it's actually phage torrent network
but I'm not showing this because i think
it breaks
demo if I do this so let's keep it
simple so what we now want is basically
we want to show this state in the POC so
normally we would show the POC blocks
here but in order to be so you can
actually see that there is something
physical happening and there's something
mirroring the physical thing and it's
going at the same time we're actually
showing the traffic light so you have
the traffic light state on the top and
the sensor state on the bottom so
currently both senses are not active the
batteries are elsewhere so let's this
one has green this one is red let's say
on the right side a car is approaching
and you see the sensor triggers and we
get screen and let's say on the other
side also there's traffic so traffic on
both sides actually the sensors are not
showing anything it's not doing anything
I think we need to reload it yeah much
better thank you for noticing i probably
would have liked rambled on and milton
yeah and you see it's moving oh it's not
so yeah you see it's moving basically
you don't see the sensor updates because
we actually didn't have a session
process with the state so i basically
need to go away and put it there and
then you actually see the sensors going
on so we kept it yeah it was like last
minute I we finished late yesterday so I
headed up set up in my room and be like
last-minute hacking getting the traffic
light right and so yeah you see it's
pretty responsive as soon as the light
goes on here it happens on the screen so
probably every delay you see it's
basically the Bema at least idea I just
I just say so
so yeah that's the demo thank you yeah
it worked so let's switch back to the
slides oh you're playing and now back to
Claudia yeah i'm just gonna overview
very shortly a smile fundamentals so
what was going on back there it was that
so the cowboy server it was committed
was communicating with bullets to the
other side and young side is updating
the real time as you see with some SVG
in EM so al fundamentals we have a few
concept which are not really that common
in languages like signals I mean you
have reactive extensions but in other
languages but you rarely have a language
that totally based on functional
reactive then you have the fault p which
is a fall from the past which is where
elm keeps the state where I'm supposed
to be very descriptive now but if you
hear about it the fault p is the key
part of them and mailboxes are the way
in which data gets around to various
components tasks and the facts are
dealing with side effects so if you have
a task keep and yet if javis it for
example to do something for you or and
if you have an effect you can describe
that the type system so let's talk about
add the fundamental piece valve which is
signals signals are a way to a different
way to think about variable so basically
there are streams of values I feel if
you think about how we think about
variables not in functional programming
but in normal programming
object-oriented say there's a lack of
thought about it we don't model it in
any way where if you go to functional
then a state can be mutable and there's
some more thought about it but there is
also a first up to the closure way the
SDM
so of modeling variables so you will
imitate them when you when you
explicitly want to and you but the Ellen
way is a bit different so you have the
stream of values and I can show them the
a picture yourself as basically a mouse
changing position and the keyboard
pressing various buttons and if you look
at online at that address that's a very
new visualization that really is better
so it will show if you click the mouse
it will show you the actual signals so
if you can do that then we'll be good
and so we said there are different ways
of thinking about values so they are an
explicit model for values so you you're
actually when went so we have you when
you are when you when a valuable is
mutating also the variables that rely on
it the defender is a mutating but
they're not real immitating much
changing and so the melody very what the
values get around and they're always
current and then you're also a
non-awkward where your structure in
colfax if you use note before you must
have seen the callback pyramid so that's
never going to happen in hell and they
are basically a Wilding signal graph I
directed a cyclic graph like this that's
an image of it and about the practical
aspects of doing that demo there are in
album there is no current way of
directly connected with the sockets it's
gonna come probably in zero point 17 but
now we are in a zero point 16 so it's
not there yet but you could do it
through native which is not really they
approved way or you can do it through
ports and a javascript wrapper on the
other side which is what we did and also
the code in Jason if you have simple
Jason you will be fine using a port
automatic recording which we work for
most types but
dicey would work with like dictionaries
so you couldn't have that or if you have
more complicated choice on with types
that are not really supported you can do
your own custom JSON decoder but you
have to watch out for like a
documentation for now and Simon's who is
he a program online was really helpful
and now back to back yeah it doesn't
leave you much time didn't I well yeah
basically when we like asked about what
what like encoding should we use on the
web socket it was basically suggested by
what I could do that yeah let's go chase
because there's Jason decoding but
actually it's kind of a little bit messy
especially if you have complicated
nested chase like describing a whole PLC
graph then it's actually kind of looking
that it's not as convenient so you need
to do lots of programming to get the
nested chase and decode it so currently
we are thinking about actually since we
actually need to do some work for
recording we could actually do some
something more convenient for us than
Jason and yeah well there's always that
would always be XML which would be
actually more type checked already if
you have a DTD and basically we had
everything in in XML which some people
are already now adding to Jason but yeah
it comes to the smiley not really and
but there's oh oh that was actually it's
it's called Ellen external type format
term from it and that was actually
terminal to correct getting in my way
sorry about that i will change it in the
published slide and so it's airlink
external temp format so basically Alan
Hayes today the highest complex data
structures with lists and tuples and and
also binary switch are very convenient
for protocols and there's an external
term format basically encoding these
these complex data structures in the
binary stream and Alan uses this for
example if you want to storm binary
values in a file or if you want to send
messages between our unknowns so along
its leg extended external term format is
already going through this loop here
from between
oats and the other side can't decode it
and so this would be a convenient thing
for the allen side because yeah well
it's it's one function call and it's
built in and it's written in c basically
it's very fast and yeah that the week
the week embedded system would actually
profit from it and we what we could do
more work on the on the client side so
we would look at how to decode external
time format there's something else which
is very similar to external time format
it's called eert which is basically
external term format but a little bit
reduced so there's a reduced thing
because for example it's no use that you
actually encode a process ID when you
send it to JS it's a JavaScript what
would you do with a long process ID or
there's there are several airline
internals and also have been to encode
it which are left off and at the same
time back then when it was basically the
first time specified since back then
Alan didn't have a map type there's also
a special kind of tuple list which gets
encoded into something that comes out
for example if you decode it with the
JavaScript side as a map or as an object
so that might be probably the way we go
or something in between we actually
quite free to choose whatever we want
because we control both sides and that's
the next thing so i hope i don't have a
type on this URL so this replicato Piett
i just typed it in before that's i know
my big name and I there will be a rapper
they're like shortly after the talk and
the rapper will be empty but you can
watch it and because currently we just
finished the demo yeah and we need to
clean this up and actually separate the
demo parts which is entangled everything
into a into the repository which is then
called em rang like a kind of muddled
version of m and l on and which
basically should provide you the minimal
thing you need to basically get elm your
arm code talk over WebSocket to your lr
node and then we might build an
infrastructure around this it's actually
probably would be i think we wanted to
call it m
act or amber and con yeah i forgot this
there will be something on this on this
URL probably a little website we
actually would point you to the eventual
repository whatever i need to put some
yacht up and I I put it in I put the
slide in like five minutes before the
talk</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>