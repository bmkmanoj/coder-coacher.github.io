<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Mesh 2014 - Anil Madhavapeddy - Nymote: Git Your Own Cloud Here | Coder Coacher - Coaching Coders</title><meta content="Code Mesh 2014 - Anil Madhavapeddy - Nymote: Git Your Own Cloud Here - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Mesh 2014 - Anil Madhavapeddy - Nymote: Git Your Own Cloud Here</b></h2><h5 class="post__date">2014-12-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hAZhm66pwhc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I actually are presenting yourself a
sunny experimental device here so this
crash is a little to talk and you know
you know exactly what sticks this
projects in but if perfectly stable so
far so I just going to give you a quick
bit of flavor as to why our ability
offerings we've seen that a lot of
operating systems anyway and then one
observation that my friend mark starts
to rain which is it we know what we do
for programming and pop story
programming and all the things we use
then it is considered good programming
practice focusing compositionality we
want to build small world 5 modules put
them together end up with larger systems
with no surprise behavior but it's still
incredibly difficult to do right so the
affiliate system still requires a little
care and attention to exactly you put
the architecture together so one of the
things are going to investigate in in
Cambridge where is the university is is
how can build or composable multirow
systems and the real enemy here is a lot
operating system tiger I've been working
on for existence for over 20 years and
the enemies complexity because we're
always heard of focus and backwards
compatibility with code what is it
happen is in applications in the quest
for performance for for me here the last
bit of last bit of resources which are
deeply intertwined persistence API is if
you are using for example and use
politics and no trivial way you'll enter
the very operating system specific
extensions and you have been in all
kinds of hell with the front figure
exactly make these things portable and
fast and also what are our it systems
just try to do everything for everyone
seagate linux is running on everything
from your smartphone to 2004 HPT systems
and provides support for multiple users
multiple applications so on and so forth
and if you just look at this from a
different perspective there's this
incredible scope for unintended interact
because we just shoveled everything into
the outside world and they may it's been
girl just to work together in a
beautiful way but if you just look at
the number of choices you have to make
money do any kind of water DevOps
deployment is you have to choose
distribution if these versions you
figure out what all these ad for
configuration files are and also just
figure attacks on the interaction of
these configurations are all fits
together and this is why it just takes
much experience build a lot of
assistance because hold of all the
layers involved so this is the oil in
version is that there's been a
programming community that has been
preaching that applications to be built
an insane compositional style using
commercial programming but the same
community then surrounds that that code
hassle code in 15 million lines of just
random C code that is that if linux it
is hypervisor virtualization and then
expect that to continue to be safe if
this doesn't make any sense right
because you can't really hungry it's the
wrong order you can't really cook une
safety inside an unsafe world you really
want to start with my state political
world and then and then in your own
safety but that's noble reading and the
real question is if functional
programming so awesome then why hasn't
the open system just disappeared from
the stack right why do we still have
these 15 unit lots of code and what I'm
just for programming rule the rest of
the infrastructures as it should so this
is the background project started
letting meanwhile some this
jaw-droppingly fast adoption of my keys
also take place where you don't tweet
your way to take a little printer in a
thermostat and all of these systems run
unsafe operation as well to the run and
then they run linux in many cases and
the security story is just unbelievably
bad so Jenny just the last few months if
you just look it must be going on a
seventy percent of all internet server's
a bundle to a single bug she'll show
it's less the world shell-shocked and in
fact there is aftershocks coming in from
be unable to figure out exactly what
embedded devices are affected by these
books so it's just unbelievable that is
a community groups we've we've got so
much on safety creek with our day to day
lives and at fixing this in a
comprehensive way is worth one of the
biggest challenges that the interval
face in the next well right now it's not
a matter of waiting for cabinet it
already has happened and if you just
sample but this is just from a very
shallow said searches jpmorgan the
typical data breaches nautical hundreds
of millions of people not just one or
two people so because i think is so
lightly the points of Longinus that the
animals no no chance to try to get this
stuff to bed to work so we've been
working this now for a few years for
about four or five years and we've
actually been building an operating
system at the transmitted bodies of
these principles so we've been operating
system completely from the ground up
that tries to make everything as tight
as possible and also uses maybe the
principles banned commercial programming
and so what I wanted what if you go
through this talk was to just enjoy easy
to some of these principles and and have
to change the way we think about how
operating system should be should be
constructed and structured so this is
all hosted in a kernel of lesson of
megabyte in size it's for lunch or camel
how many people are user account in the
past and how many people use social
programming in general so hastens long
break so yep contents grounded but this
way we've not to stop it uses basic
build everything from device drivers
tcp/ip SSL and so on and everything is a
season is the RPMs logging is just a
cool of high-level source files and is
running at this border right here so
this is actually served from a little
bubble setup that that is that is just
wrong medical system is no Club required
this is actually for exam and
interesting enough the binaries that we
were building
through these applications are so small
that it doesn't take a gigabyte of
storage it just a very light and so we
can actually track our deployment as
well it gets so i'll talk about how
that's really affected the way that we
we do down there is no longer a big
heavy chunky thing we can fling these
you girls around and also fit them into
es package for example there they're
insane and this box is a little picture
just to show you what we look like very
just at our board because 30 quid it's
called cube or two we swarming at our
words if I could cling on to our
lighting systems in Cambridge as well so
anywhere you run a modern arm CPU you
can pretty much one or in system and
what what are they what are the other
who takes an associated with this is n
project and in Zen poetry slams since
2002 but we started working on it we
spent a long time building these massive
data centers isolation and honestly
after after a few years I'm kind of
regretting it because what's happened is
it being added another layer of
abstraction into a very complicated
software stack and what's happening is
that the number of layers seem to
increase out of one every ten years so
when we introduce a hypervisor favor of
there before sands anything along that
added another ever did we remove
anything as well and there's a huge
wonder if you can get a functionality in
these layers we're definitely were
responsible for each layer and it needs
to very concrete thing what is that your
resource usage is massively increased by
I believe there's even though you'll
need the bed wrong time and also did a
huge attack surface so it's very hard to
defend yourself against the next bar
because you don't even know where you're
using a lot of these unsafe components
so doctor is the big home is invoked and
here is a been around for a long time I
make I'm going to hear and you talkin
and then using it for their ecological
so the other I use my cell 44
dead lots of buildings on other usually
think what daughter is that if you
consider it up on the left here web are
number of typical layers and our racism
and if you consider what dr. helps helps
you do it how do you take one of these
little dated layers and then put into it
into a virtual container and then treat
that as a single unit of abstraction for
see what it doesn't do it doesn't get
rid of the layers so we're shoving
everything even massive shipping
container and then your rudder we
shipping there around but the actual
thing we deployed again it's just
massive so typically ting it security
between containers you still need a
hypervisor because i budgeted strong
actuation computer is going to be these
full route localization although it's
being worked on very hard important in
cbse but these days you premium on these
things so in contrast what we want to do
is to be quite different we want to
reduce the things we put on it's a
horrible the Dells are also sort of bad
guys and I just doing this by
disentangling applications with the
operator so the first thing to do is to
take a gigantic pickaxe and x-pac that's
fifty nine months of code and try to
figure out what is it about it makes it
so fun with it what is the goat linux
that requires it to be this using is it
just an interfacer just behind the
scenes other other chunks that can slice
away and trees different emotional
readers example why is the network stack
why does it have to be attached to a
block storage sack or or to my news
feeds back maybe they're really quite a
multi-tier different things and the
second eat it in your current system is
it will be build an application we
should treat the operating system like a
library so instead of trying to make the
whole thing in a shelter for shipping
container we can only grab the between
me link ruthless libraries and then only
deploy the the minimal section of you
need afterwards and the other is you
think is happening the last ten
is it opener whenever I write my web
server object ah I no longer the where's
going to deploy linux is one mode I
might want to target dr. Greg difficulty
chorus I might work on to JavaScript I
want to target a JDM platform there's
just tons of platforms and we run on a
target so we're also trying to figure
out I can be also this abstract way the
notion of the platform that were running
on and I'll show you some examples of
some very different platforms such as
every for JavaScript as a talk with
awful same core base and when we do this
by circle of duty kernels so the notion
of what your existence is going to run
for decades for against another
Cambridge of the 90s and MIT as well
they are very Cambridge and there were
those XO kernels in any of their is it
instead of having a big monolithic
kernel you can treat everything that it
provides the library just like a normal
lipsy that you use and and what you do
is if you take your application you link
it directly to device rockers you
related directly to network sacks and
you give up isolation between processes
in return for during hug arises so
unique URLs take this one step further
they say that X approach work great for
building you're very dedicated
specialized appliances so if you in the
oldest cisco iOS boxes the netapp finals
run walked out there examples of EXO
kernels whether they're only doing one
thing and their crew like an appliance
so we were going to take it on to this a
couple of a thin hypervisor air so he's
an external never took off never became
a general-purpose opera existed is
because you have to then we run toward
your hardware drivers but luckily our
hypervisor stack provides us with
virtual network drivers go to this
drivers and so we can use this as a
basement which target a new operating
system at directions we don't have to
worry so much fun about probability is
unique URLs are there for specialized
virtual machine images that only want
one application and they consist of the
full stack of application code system
libraries and also configuration and in
return to legit return for just shoving
everything into into the building
structure there means everything
self-contained they're extremely compact
so unlike a full operating system you
have importance of magnitude less of an
attack service and they're incredibly
efficient so if you're running it up on
and on as n host would say forty eight
cores you might be able to get away with
about a hundred 450 virtual machines for
any minutes but we've we squeeze
hundreds of thousands we have experiment
millions of unique URLs on the single
day keeping our host and even though the
small articles like this between squeeze
in which is really quite a few students
with hundreds there's quite nice in
terms of intensity of services with us
they give up any isolation between
between tenants as well so you get some
very very concretely that concrete
benefits and so how this is all work
well it's all function in the way that
we do things because one of the key
aspects of our programming is just good
control over you because you know
exactly what you did anyone and what
you're pulling in so we're going to do
it is I just want to use my normal back
to pile code I i I'm not a common
program humming her programs we have
who's right we all have a new function
pointer in other languages current
programming that's fun I started going
to be red and silver so what a real
friend a programmer but with garage I
want to be able to hug good kernels know
all the details about it so what we do
here is that we take or not watering
system and we we run a test our code
directly using Russian Potter and we
want about put this unicorn all as a
result of our development process but we
don't want to have to only work in that
United States and Italy this works is
that we started up again in UNIX so in
this case I will take garage double
bubble use my Mac and I will build a
unicorn of the runs under unix it maps
to the familiar unix abstractions like
UNIX sockets and so on and there's also
a great places to debug get some use
your normal I knees then later on I
mentioned we want to take a pick axe to
the other Institute and just get rid of
lots players and enteral if you
exactly allows you to turn that into a
little holder set so we did then catch
the unicorn all by swapping out bits of
lyrics by grabbing specific layers of
functionality and turning them into your
Puritan libraries so for example a good
target to this is a networks day so I
can start they're using sockets and then
we find this officially altar and right
around my code I can say Oh give me a
ton have interface may be directly third
franklin in linux or mac OS and then let
me start carving they're working through
this this alternative to other libraries
and so we can slowly start disengaging
their cell for linux while still testing
the high level of a pinball table we're
still writing gigs and finally when
you're all done and you're that you're
very happy of your website you just have
to be targeted just by targeting just
like an iOS or android be target home
and you can put it to this highly
specialized evening colonel that is a
standalone custom kernel you've built
purely by writing a novel code so you
never have to be a colonel programmer
you're just all the bread crumbs for
every code but then noticeably running
drugs and what my back garden and the
reason this works is specialization
where where it comes from is the fact
that we have a highly specialized
operating system is the output because
we know that there's only one thing you
want to do equals one is high level in
front I'm and to do this it doesn't need
processes and many of the abstractions
of the link provides in fact way it
works is it has a single address base
and address place so simple things
political slow here and what it does is
that it becomes one process and it never
forget when ships within a person that
process so this is a 64 bit interesting
it's example it all see also works
appreciated this is also for x86 or harm
but the basic idea is straightforward we
reserve a portion of the personal memory
for temple garbage collection and this
virtual memory is optimized using
various tricks because it never has to
run anything other than our option later
so the memory manager for example those
it's always extending and translating
and so there's
tricks that are on the website of garage
that made the coefficient and then at
the other a good memory we have things
like foreign pages inning and that is
navigating in block device of the
outside world and is it have very
separate you from your account code so
we can always just fingers just like a
punter look up whether of you you're
killing the solution outside world or
giving something that came in from the
camel world and everything comes in in a
0 cooking style so pages has come in
they're about to go camel and they're
not copying excessively so we actually
build very efficient under week's taxes
old from us and the same applies for
heroes anything again such a long
information for example this content as
matches in pages so never imagined it's
so simple that it's literally just
wanted to see source files that are that
are variation the Sullivan microgram and
so what's the end result focus so I
mentioned these are really small border
megawatt so whenever you take the the
most optimal the optimal version of one
of these gaming kernels the first thing
we needed about 2012 to make this
selfish thing so the only real way to
figure out a caucus with useful feature
of you actually build stuff in it see
what happens which would explode fix it
is your machine or so and so the first
thing we do is futsal PS over and a
eunuch Colonel just built these in
normal people till chambers about half a
great exercise and this is sufficient
run a top-level domain on over Persia or
weekend in a bit of depth early
elimination so it just by optimizing
putter so nothing much just because we
know we never need to do any type in
code looking you just get rid of even
more code because he never need to
potentially make in the future and we go
down hundred kilobytes it's like one of
one of one of my group members also
works on a pick ax where if you manage
to get a camel beauty
so 16 kilobytes of RAM so it all depends
in how much pain you're not undertake to
Union optimizations but we're talking
about kilobytes here nothing right just
give you a census sense of scale and web
servers with TCP stats all of those
switches and so on are also very very
small now due to buy new size is also
just good time and we retook linux and
in this case this is showing the time to
boot from from a cold boot and just the
amount of memory involved then exactly
enough doesn't really support anything
that's 120 megabytes of water
descriptions you can squeeze it in 64
megabytes but it things in people we can
take runs all the way down to 44 Mike
less repetitive it doesn't really have a
lower bottom entry beyond beyond a few
hundred kilobytes and then whatever you
whenever you move things a boot in at 10
to 20 milliseconds so all the difference
between 400 and seconds and 10
milliseconds well it's one of time at
TCP time on turns so in fact we get so
grinder with its mystical gypsy which is
a DNS proxy that spins of beauty girls
in response to TCP connections so you
think that sound is elastic eunuch girls
are pretty darn our ordinary smaller
because a TP connection comes in and
universe is spun up in 10 milliseconds
responding the traffic dumervil eastview
such as hand heaven you know spinning
down again
in a hundred milliseconds so this is
true elasticity just all the way all the
way down two down two down to the
hypervisor there and we've got tons of
changes like in the Xen hypervisor
itself to make it more vehicles using
colonel so the first can be booted
garage in amazon it was registered as a
bug because they felt that the car that
crashed because you just move it up so
fast right it wasn't worth usual through
the process of the hide race conditions
in there they're cool shacks and we have
to convince until this really is this
dude stuffing in 10 millisecond road and
it's actually fine so it is actually has
are multiples in linux exam and so on
described by exercising assumptions that
were proof see very hard big so is it
really easy as it squad but here I'm
just going to give you a flavor for how
simple this hold the soul of errors so
here I have taken a colonel and this is
just hello world unico and your village
which camera would be essentially were
just pretty much fuller world a few
times and the first thing we have to do
is just do garage configure and this
will build me a normal unix binary and
just so you see jamaica the Biggers we
will see just so i should we are we
running on an hour processor it's got a
few gonna gate about a memory and i can
just run my phone soul as a normal unix
battery right this is what you expect
it's kind of boring so um but this is
good enough for me to experiment with
with your multi need cartilage is
getting familiar with what is doing
hello code match world and so if you're
just what i'm going to do the main i can
make a trade or bad logic using a
familiar in each department yeah I so on
and then I can of course if you might
expect to see see see what it just done
now the next stage is after that
additional compile the Builder to just
do the normal dependency build but then
all you have to do to build
is by just padding minus one is M and
retargeting the unicorn old to the Zen
world so this one up said we'll take the
stand object I've just built the world
were logic and just do a colonel instead
so this one is just donate again it's
just a normal new population but instead
of all how many unix boundaries I put
sorry exactly let me show you the actual
actual directory and we have couch and
we're okay never grows consoles am so
does hanukkah's here and this is lesson
to make a run inside so this is this
might be bugging versions it's got tons
of symbols debugging stuff but the lower
world is still the cover be less than
Omega by and I can just I can just
construct that by by launching a puzzle
disagree that you normally launch
something exam and people have hopefully
if it oops okay type the wrong thing
maybe just holding cell and at this
point hope I must already be running one
yet so i will just edit this thing too
oh it's a tune if you said no memory
when I just drop it when I dropped my
purse huh let's see if that works at
this point yeah it just it's good of an
open system and it is bring a plural in
that expect so it is as simple as that
you also you have to be familiar foods
and kernels but there's various
utilities to make that possible so all
the magic here this is a little world
but it encapsulates a lot of things that
view social programming make it possible
and so the way this works is that
there's something unique lyrical this is
why we pick a camel and ogre it's other
language head whore engine
features have yourselves what traits and
mixes and so on as well as my classes
protect our lives beautiful actor
library another just one thing it's what
a syntax
lights except there are no hackers and
stuff but it's not this incredible
locking system and the module system is
one of the simplest and most powerful
ways to abstract large databases and
this is something that has never really
taken off in me in the comments I key
because its impact really quite heavy
but it's extremely simple so you have to
do just a few things to define it in
Coral Princess min ml first of all you
get some called module types and these
are structural types that just describe
the shape of the various features such
as device drivers and networks tax and
so on I'll true example of those and
then once you're done with that we also
need something that fills in the shapes
so we need two libraries that for
example take a high-level Network stack
and say I'm going to bind your socket or
give you a tree of implementations that
fill in the blanks with big white shorts
and so on and once you have those we
just need some way to model dependencies
between these shapes and he sings it
into shapes and is gross functors and
bunkers are much I collapse in Haskell
their word that sounds scary they're
actually extremely simple so
before before for any hostile people in
room I just wanted to take a bit of a
misconception so in a hustle of Hunter
is a type class that lets you pirate
rice things across the type of the hug
that represents it'll camel they're
actually very simple there there nothing
to do with classes and sessions what
they are is that I'm going to find a
module that I calculate some
functionality and I might need another
module that it depends on for example if
I'm building some data structure I need
some notion of an ordered set or I just
need some ocean of a comparable data
structure I mean to see their existing
module that implement some comparable
functionality it just I just depend on
that instead so at a couple function is
just a module that depends another
module so you can think of MLS q
languages its core language which is a
very simple kind of lambda calculus file
our language and then you have this
module system it's very explicit it just
tells you how to put these blocks
together and there's a room we have
available online calculators have a
general introduction to what the kernel
functions are but as we go through this
all this I'll just show you my example
so the simplest form of a module type is
the thing that we have many many
hundreds of MIT incorporate system this
advice and all we do is say well either
noise level we need some closure device
will define the signature and we'll say
that will the capacity some form of I
also you need some ability to block
summer and this author is actually means
that any block your operation you have
an arbitrary type of this great interest
rate listening in the future and you
guys will have some stage that's
abstracted just be disqualified
it has the notion of hiding for example
string added fire or a pci device ID or
something and then we just define
various functions that operate across
these after our clients we can find for
example I be here just as in the
function that except some some state and
returns sun lighting and we have to lose
your connection where you just give it
an ID and it will either error out with
an exception or it will give you back a
concrete concrete realized and this
whole thing might block for some amount
of time it's a learning to disconnect I
give it a complete device then we just
unit is nothing and it will it will just
return after a while it is a very
generic price burger the cool thing
about multiple types is that you can
then get more complicated so i can
define for example slows define anything
like tcp or shared memory so in this
case we also have similar emotions I
know but we're not starting to get into
memory buffers and so I could say you
can read another game and the files you
can see how you have quite a British
semantic information though minus ones
and figure out of our service and so on
we just say you can either get an eof
you can get a buffer or you get an error
back and the whole people block and and
you can go quite efficient face which is
a list of buffers for rugby and so on so
these are these are standalone the
devices of slow dough really talk to
each other but we're still selling the
shapes of these systems right so what if
you're the TC step well the TCP sadness
we initialize will be given IP address
and so on it also implements the phone
so one more time can include other one
who perhaps we can compose this is kind
of large shape just by including
different module types so PCP in Mirage
we say we still need a notion of offer
we need a notion of IP static IP
addresses and flow but what i'll do is i
will ensure this implements the device
type by including parts and then i'll
also include flow and just fuse together
some of those after i pay pensions so
here I'm saying the notion of io in the
flow has got to be the same notion of
IOT device so we're just assuming these
occurrences it's somewhere else right
but we're saying that well we have a
high level things the composer lacings
and we'll just make sure
each have the same whatever they are and
also the offering the devices within the
buffering me in the in the the device
staff as well thank you for their with
hostile southern others on this is a
voice very simple abstraction problems
because we only do the shapes of our
networks next one what amazing thing is
that these these stacks can get really
quite sophisticated so if you are
building an SSL factory just so they
trip this dish would go before security
facts are incredibly subtle if you've
ever used the Linux run a number
generator for example it's very very
small what it's doing so we can actually
build high order functions to describe
precisely what the semantics of a very
sanctuary collection devices and sold
are very the full power of a cattle and
abstraction to do math to quite messy or
pre-existing instructions and
tribulations and of course we're
building or obscene set operators to
give you all this on a map on to the
real world is all we never quite know
running Linux or running on something
else so we don't run with details of
this but it is nice for example in the
full SS lsat module types of scale to
describe a very solid shapes of local
systems and then finally we're all done
be able to reclaim them so I can say for
example I'm going to use a corporate
very glad we call net WT i'm going to
use opening system structures a secret
and you can take these abstracts back to
make the progress city that's abstract
so i can see that the page line buffers
into but library called my own page so
what we've done here is that we've
authorized the way to be described it
over existing with some shapes of
various tax and then we can
progressively make it more more refined
so if you're coming to it as a newcomer
you can you can speak it separately
concerns all of the details of things
understand so this is the shape of
things and hopefully this is very
readable so do people as a stroke old
you find for example this this notion of
this notion of snapper degradable so if
you have to see this for example is that
something you can naturally kind of
figure out this represents of teasing
step because yep things like noodles
along so I see some sometimes nothing
there as well fishing in foreign
language but it's not it's all to you
better now if she thing is that we have
module types for hundreds of things in
garage so we would find this across the
spectrum and so give anything to network
static block tracks and so on and the
good anything thing is it is a really
flexible approach for customizing
contacts because let's see for example I
have some solo speakers and the solar
speaker is included HTTP / upnp or UDP
some weird non-standard thing but I
actually got my speakers at home working
by applying various Funkers to say that
I nominate hydro accent custom seekers
and employers but I can just repurpose
old exactly exactly if I figured that
music for example to explain ice it's
got a nice flexible approach is proving
quite live in the real world but we are
also concerned about the implementation
so I mentioned we want to compile this
and lots of all sit back n so in this
case we have unique lives and we also
have JavaScript to kernel modules and so
on so we also animation implementations
Jonathan so rush component is really
simple and we just want to describe the
implementation something in a very
isolated way and make sure that anything
it depends on the outside world you just
define a module platform so you say that
you just make sure you supply me with a
network stack when you put it like this
it seems really simple right because
instead of doing hash includes and so on
you just use the ML module system as
your dependency injection you just say
that I need something from the outside
world I don't know what it is therefore
all just describe its signature and
depend on it it really is very very
simple and that's not the whole point
and this is what our website looks like
so i know it works at emma is usually go
to top line would just be a start
function
according to get to console of us
donation each tag we define some
callbacks that receive the request a
part of it they get the URI ugh instead
of your dispatcher this is already
standards or ruby rails type stuff
except written in ml the difference here
is that any time you wanted append
something we just it Claire dependencies
up here so we get depend on any console
way we provided any positive that's a
key value store an HTTP server so it
really is just adding this kind of
upside dependency to to to the website
and this is a blog website and then
works with modules and Sumter's it's
very simple so let's say I have a module
called app that my homepage it and this
app is an HTTP server so the only real
difference if it does mean all places
but we just need to know that I will
supply with an HTTP interface and then
we in other units from running it for
development we will just apply with a
normal HDD Sacre for Croatian feeder
cattle and then this will find unique
sockets the double become abnormal unix
binary but then evidence i can say that
for i will give you a different notion
of pcp that actually will do ethernet
cords incorrectly and pepper poor thing
and then we'll go through some coke
contact on unix which gives you peace
oriented correctly so we're still using
unix but we've eliminated about you
seven milligrams of go-ahead run exploit
by bypassing the networking subsystem
and then i can say well i really want to
get rid of anything that depends in unix
and then you can be targeted and all the
Zen device works and so on will be will
be abusive so it really is very a very
structure layer of dependency attention
all the way through your your network
stack and because we're actually using
this ins n because n itself Ivy Leaguers
shouldn't have a foreign student manager
because it's a little hyper visor this
may be the really nice way to just
describe doing specific components for
for Zen itself so if your conscience is
the hypervisor project is building
operations like this because we don't
want to depend on on for princesses so
this is summarizes the whole point of
this is that the these punctures
separated
today they break down the monolithic
into these modules that are just
standard in the modules and they'll give
you a final grade notion of pocket
penalties we're all possible so it isn't
what it looks like whenever I'm
compiling for example eunuch socket you
can actually read the ocular garage to
see exactly what's going on so I can see
here for example my network stack is it
keeps me out of socket set and I'm
making it from a consult then all the
bitdefender network conduit which is TCP
thing and double it will take the
network stack parameter then I'll define
the HTTP server by a TA prohm conduit
and then my entire application is
basically all of these things boot camp
so this is this is something that's
under for garage but then whenever I
rebuild it to the Zen one Deacon start
seeing the beautiful structure coming
out of the operating system so we
replaced all linux now with exam and now
the network stack is a bit more
complicated so here the number of
seconds just keeps getting socket and
here it becomes awarded that word scheme
where I will define a feature insulted
for that replays of the client IP
Stephanie drink which I'm you TB from IP
I will notify PCV for my pee but also
added a notion time clock and attribute
is tease me more complicated so you can
actually follow exactly what you
depended on just by looking at other
than the rest of it is exactly the same
so they're not 10 we just applied in a
coordinated style to commit to make all
this possible now the book is that these
these functors the reason that NL can
take over the world apart from that rock
there's nothing really wrong with it is
is that these functions are brother
heavyweight constructs so it's a huge
hammer to throw any kind of abstraction
problem and this by multivariate
programming and soleus attacked me more
lightweight way of doing things and what
roles would require you to to define an
entire focus back over and so what we
did garage was we just defined this very
simple dsl lets you generate these
things from from scratch now i only go
to be talkin so thirds of shad if
anything demonstrates this morning but
essentially what we do the approach
Raj is it anytime we want to define our
logic program server then we define a
configuration file that describes all
the possible ways that it could be
compiled from unix kernels to is my
paternal JavaScript and so on and then
so what happens we had run this
configuration file of all the hosts QR
code generator the old one you'll see
you need and so this this means that we
don't need to worry about all the module
sets you just defined for example I need
promotion council Akiva authority should
be server and it should result in a job
which is something you can actually
wrong and then the garage utility will
take care about you like that for you so
I try to you a concrete example for
example in this case we have any ways in
figuring out working on you sockets tax
I can use the kernel stack I can use
dhcp I can then so what the
configuration fragments do is that they
will say I need an amateur I will supply
the buggy console and then depending on
the configuration parameters I will
output a particular specialized networks
are free so if you're in a data center
you needed a stack customized for one
thing the configuration file for every
let's disassemble a custom operates the
reporter need this is very common for
example if you're doing congestion
control or some other kind of problem
specific appropriate employment where
you can express that emerged very easily
and also the complexities becomes a
functioning says given an implementation
will console giving up on snacks so this
is all abstractly way very very simply
and then they roll in you can go through
quite elaborate examples for
configuration of works of this website
for example bringing all kinds of all
kinds of crowd registrations I just
wanted to highlight a little a little
correspondence is quite useful so what
do we define these hl3 camel we're
defining here for example our website is
a console that takes use device drivers
nobody sees demand curves around
low-level device road since if /
recently on HTTP and we actually have
big things like attractions to react
databases for example so the notion of
the match our group is very fuzzy in the
world because anything that matches
these 12
just becomes a treasure so a lot of the
old attractions don't matter anymore you
don't see things I know that everybody
faces on there and then the
correspondence is very simple this thing
you define here it comes the modules in
your partner tribes over this exploit
useful you just read console will
console key value go to a value and so
on and that results in the module they
have already shown you so all of this
festival later any point in doing all
this well the result is that we built
this elaborate logic and this this slide
bag can be commanded to as any Colonels
running with no dependencies all homes
and so this is how we get a magical kind
of tiny interface we can also in the
case of having the vibes I bring an
extra or garage i order you really done
it from this and you can get all these
versions and you also i want to show you
a little trick i bought a whole thing to
a javascript book is one this is how
portable moves from the same logic so
let me just take it with 10 ozs perfect
so i'm going to show you a little trick
involving h.261 decoding this is this is
from one of our collaborative anyway and
he's working on hardware description
it's a use of the mirage alot raised to
used a single app icon what this does is
it compiles the whole of your panel
compiler and brush tool chain into an
interactive notebook is purely hosted in
javascript and so i'm not going to the
details here but essentially you see if
Cal Poly evaluated as i click play you
can just go to this website and and
relegated i apologize i'll show you are
el at the top oh he's going to raise if
he's going to a building this an
abstract logic that you subscribe for
you charge your canvases decoding h.261
and so on so forth and this is something
eventually run in fpga or in internet
poker but i needed something quite music
into the
HTTP snack and he said well if you come
on a jumper we can just mapping to
xmlhttprequest so if you just wrote a
simple JavaScript there that instead of
going folder this Saul kids network
stack to it off to a very high level do
you actually should be recorded and he
added in abundance any closet on what
kind of game are climbing in JavaScript
and the result is a bit fun a run
function that just goes and fetches all
of that money and is interactively in
for example to be corrupted so no maybe
350 so it should get corrupted this is
just interactive JavaScript compilation
of videos including elements they can
also be moving out into a eunuch Colonel
so it's kind of insane it's how flexible
you can make these things if you want to
and other people are working kernel
modules and your pic controllers and so
on as well so a lot of the pains of
authorizations been taken care of a
mirage and now it's just a matter of
plugging you tons of tons of these these
these bags would make it make it
possible and so what are the
implications is I started off we well
it's really fun hiking operating systems
we actually a bigger agenda in line and
the intent is trying to figure out how
do you how do we change the way that we
do 10 ops because right now that helps
our big shipping containers and it's
just a very heavy way with you mr.
Corliss is a good example with a script
that limits the absolute minimal
stacking still 15 min and run support
we're closed conquer you haven't really
super fun in that much with burial in
garage and we we have normal source
codes we have a unique kernel that is
running your normal bit of NL code and
so on it's a bunch of markdown entries
as you might expect you know who did
with the contents of of the of the
website so here for example this is this
normal get up stuff in anything we pull
it reasonable Travis how many people
here use travesty intermission it's also
prime as well we do it travis is it we
just rebuild the unique hurdle from
there and Travis deploys back to another
paper repository the actual wineries
that represent a complete stand lower
website so we have the ability to track
and get this is this to my right
because it includes all the images in
the colonel it just crunches it all then
it's one of the storage options garage
and so this means that we have the
southern carbon good anywhere that can
run them through amazon or rack space or
or whatever and and then our putnam sec
response here and basic pushes so our
entire deployment to the history of the
project is version control from the
source program and this means that now
they get up folks out a little bit at 02
you're getting 100 megabytes repulse
truth they're very kind but when what's
expected of you and and we have
introduced it too much even though if
every push the repositories I've got a
big one which is your upholstery may not
mean the big issues gets tagged to to
track where things are I can keep track
of my changelogs whispering get log and
I can follow that through a few shell
scripts to show me the source code
changes resulting these boundaries just
there's nothing in there that that I
know version control it's getting pulled
to the buggy version git checkout and
also nate you've got bisect to just
figure out was there a bug into you
somewhere my deployment well this
runagate my sections with a resourceful
wigglebottom kernels with a bit more
debugging and off you go so it's it that
possibilities are really endless and one
of the subjects were exploring is i
mentioned we do these things in
milliseconds so we're also doing pre
compilation inside the seconds and so by
watching 800 prostitutes directly we can
keep track of security branches and
recompile ourselves without any
middleware for like no waiting for go to
do it on paper waiting for apple to
eventually get around to a shell-shocked
patch of these internals are facing the
unsub world to 300 seconds and if you go
to our website will add VoIP abilities
aren't that one of my colleagues cells
it's just unbelievable how bad this year
the world is right now if you're running
an android phone this is from several
years or 100 million records prices most
super comfortable all the time and it
just is just unbelievable how this has
become they say they are so we want to
to make the the unicorn Island just work
in second for you source before we just
close the loop and all this stuff and of
course you need a good
is everything through the camel so it's
very possible to have security rules we
can walk through be possible but we
eliminate one class which is abstraction
violations from every memory errors and
and value types and so on and finally
the judge food corporation is turning
out to be awesome because ok i will
compile going activate your javascript
so so we're entering the world working
right what if I get help I dings and
rescate guys and so on and target those
four three kernels and JavaScript and
kernel modules and working and working
at necessarily a unified apartment what
if anyone busily get started on a few
questions bug how to get started the
library allows me to package management
an actual global pass just a little
pattern of a Commodore and everything
mirage is confidence are there and we've
had a really healthy community so the
number of packages contributors or
hundreds of people that and score you
every day there's still a learning curve
example but it's getting there and we
have over to 9000 packages in the packet
innovation so the american chemical is
growing and certainly no no John matter
no go but it's a small the great hopeful
community for getting started so we just
we just need you healthy people provide
my brief and just kind of example the
systems of libraries open it up and the
Roger organizations things like you know
I share with your rings and how to write
assistance program now the basic message
I want to get across was his local on
such information online so i won't even
touch the to their wee Britain tienes
back from scratch I lost with integrated
foreign culture librarians there's an
incredible profiling system that's a
interactive profiler and garage but my
home is Leonard that you find Fleming's
here visit I get databases abstraction
only the low-budget I told you about the
narrow blah blah Roger or beginning
evolved so current programming by I
think they're scary but beautiful are
just incredibly rare items they're not
redeployment ready but they're getting
their very very fast and he couldn't
into me to learn
so my students in Cambridge for example
are experimenting with also lots of
different layers in the oil stack but
it's very rare they can fit your head a
bunch of libraries the basic it
completes as a functionality and giving
a high-low climbers don't need to worry
about money finder Adrian's see and so
on you just use ml with its nice
semantics do to build a very very
specialized things and when language
work in a bowl so my friend and equip is
your third Javier beltline hassle we
don't hire have fractions we just match
mark each other's languages because
there's old operating system in between
okay if i work at haskell slope is the
basis and he reckons these computers are
includes what the jobs 10 meters
benchmark or TC stats this your app so
it's really nice to be able to be a half
this program like the attractions meet
real systems contributions make sure it
can happen and what we really need our
people included protocols so this is we
have some amazing computers voluminous
and so on but that's that's where the
bulk of the contribution is happy and
then was actually in height of the story
about my go-to or open-source platform
that essentially bills personal class
for people on from exam using any girls
but when safe discrete in structured so
the imap server is coming out TLS and
all kinds of personal data that you
could post in your own house without
having to I depend on chat services so
that was a bigger world in through the
garage and I just wanted to be given URL
you go to Dexter over brush with his
blog post and this comes as fashionable
as well so documentation is built into
the ground with any research project but
I really is growing and questions are
extremely welcome at our though maybe
the soaring person for overview</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>