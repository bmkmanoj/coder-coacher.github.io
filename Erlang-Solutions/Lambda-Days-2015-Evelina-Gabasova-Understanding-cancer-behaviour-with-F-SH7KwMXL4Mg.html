<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lambda Days 2015 - Evelina Gabasova -  Understanding cancer behaviour with F# | Coder Coacher - Coaching Coders</title><meta content="Lambda Days 2015 - Evelina Gabasova -  Understanding cancer behaviour with F# - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lambda Days 2015 - Evelina Gabasova -  Understanding cancer behaviour with F#</b></h2><h5 class="post__date">2015-05-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SH7KwMXL4Mg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you for the introduction so i'm
evelina and i work in cancer research
but first i have to say that i am not a
biologist I don't have any medical
training I am a computer scientist /
mathematician statistician so my point
of view will be purely from the systems
perspective from the statistics and
mechanics of the system so I'm doing my
PhD at Cambridge University and the work
i will be talking about is basically
part of my thesis and first i will give
you some background into what I'm
working on I'm working in area that's
called precision medicine another term
for that is also the personalized
medicine so this is something like
standard medicine work or works still in
some areas you have a lot of patients
and they all get diagnosed with the same
disease let's say cancer and the doctors
apply one standard approach that's the
same for all the patients which
obviously doesn't work very well because
not only there are different types of
people and different drugs work
differently for different people but
also there are different types of the
disease that don't behave in the same
way so ideally we would like to have a
situation like this we get a cohort of
patients and then they get tested and
based on the result of the test they get
completely different approach completely
different medicines so for some parts of
the cohort for some types of patients
they might get a surgery and then
chemotherapy that's a standard approach
some might get something completely
different and i'm working on part of
this research that means how to from a
sample of a cancer cancer tissue how to
see a so how we can find out what type
of cancer patient
based on the sample from a tissue so now
I will take you through this diagram I'm
just joking this is just to show you how
complex the problem is this is part of
our understanding of cancer pathways and
biochemical and signaling pathways in
cells and yeah this is a very high level
view of our understanding of how cancer
react and both types of genes behave in
what way and most of current research
take this approach that they study one
part of the system from one point of
view using one type of data for example
they look at what genes are doing in the
cell and that gives you just one level
view of this very complex process so
part of my research is how to actually
get more data into this kind of get more
viewpoints on to this process so this is
what I'm working on and I call it
integrative clustering and it's about
identifying sub types of cancer from
multiple different data types so this is
just an example of four different data
types that I'm working on right now you
don't have to understand them actually
so I'll just change them into data but
those different data types describe what
genes are doing in cells what genes are
being active during some process or what
genes are being silenced and that gives
us quite a lot of information about how
the cancer behaves in the tissue and
most of the current work was done by
just looking at groups of types of
cancer within one data set or within
another data set separately and I'm
working on how to integrate these
different viewpoints together and that
should give us much better view on the
big process but I won't go into too much
detail because this is a talk at the
functional programming conference so
i'll be talking about how i approach
this from point of programming when you
ask anyone working in my area what
languages they use they usually say they
use our or Python or math club and
that's just because most of people are
researchers they want to get the work
done as quickly as possible they are not
interested in the programming itself so
when they start programming at school
the university they usually pick up
something that's very easy to use where
they don't have to take care of any
construct and classes and tight so these
kind of languages give you very fast
prototyping they are not very fast in
terms of running it on large data sets
and I actually have some background in
computer science that's why I export a
bit further and I use a sharp as the
title of my suggests so this is
just an example why I chose F sharp this
is an example of our code that i was
using for something that was comparing
with my methods and it had a bug in it
I'm sure you can imagine how painful it
is to debug the code like this because
almost all the variables have one letter
names and because this is in our I'm not
sure how many people are familiar with
our but there are different types of
data this can be saved as a vector
matrix a late an array or data frame and
all of these are accessed in almost
exactly the same way so when you look at
a variable let's accept through square
brackets you have no idea what it is and
what functions can you actually apply to
that
and yeah well that's a good question now
this is r and r is programming language
that was written for statisticians by
statisticians I heard one joke where
they said well try to compare it with
something like a football stadium built
for footballers by footballers that
doesn't really work very well so r is
truly awful but whenever there is some
algorithm that is interesting for
statisticians it is written in our so
sometimes you just have to use it but
when i switch to F sharp suddenly I get
all these tooltips so every function i
call and suddenly i don't have to go
through the whole code to find out what
kind of variable i'm accepting or what
kind of function i'm calling and that's
major improvement and once i tried a
sharp it was very very hard to go back
and write anything in our or matlab
anything like that yes i will get to
that there with me so another example i
was trying to find some implementation
of a numerical algorithm that does sound
playing from probabilistic distributions
it's called adaptive rejection sampling
which is not very important and in that
algorithm you have to deal with convex
hulls so here i have some kind of
function and i have lower convex how
underneath the function so far so easy
the problem was that i couldn't find an
implementation on the internet that
didn't have bugs in it this might have
something to do with languages
used for that but there is one
implementation in our that everyone uses
that was rewritten from fort ran into c
and then into our it's just not a very
good way to use it to do that so i found
one quite nice implementation in matlab
and yeah this is like a standard
procedural code in matlab and what this
piece of code is doing it's looking at
this function and it's for every value
of x its tries to determine if it's
within some internal here between the
points or if it's outside on the right
or outside on the left and depending on
that the assign can function or some
value the lower house that's very
straightforward and when I rewrote it
into F sharp suddenly I use something
called active patterns which make the
code much more readable right now I
don't have to deal with this so if if X
is larger than something or smaller than
something else but I can just write a
pattern matching that will tell me where
the ex exactly ace if I actually switch
into the code
the same complexity is still in there
this is basically almost the same as as
it was in MATLAB but when I actually do
pattern match on the exact value of x
it's much more readable so I know what's
happening there and if I go back to it
but the year later it will be very clear
what's happening and this is something
called the active pattern because it
basically calls a function that
determines which type of result it is
when i'm back in presentation also the
one type of bug that oh i forgot to
mention that when i was rewriting the
matlab implementation i found several
bugs in it as well and one type of bug
was that they were assigning values to
something based on few conditions and
sometimes they forgot to assign the
value so in f-sharp this type of coat
looks very different I don't have to
assign the value to its inside some if
and else condition I can just assign one
single value and then all the complexity
is within that so if I forget to do
something I can immediately see it so
that helps tremendously and that allowed
me to actually fix the function and I
actually went back to matlab fix it for
them as well and there is actually one
other implementation on the internet
that's correct of this algorithm now
okay so as I said the code in f-sharp is
much more legible it's much more easy to
understand for example this is just one
function that I have to implement quite
often that allows me to basically
perform one operation in a numerically
stable way and in mathematics here you
basically have some values X I that you
subtract a value from then you
exponentiate it then you some it then
you apply a logarithm so when you look
at the equation written in correct
mathematical way it's actually quite
difficult to find out what's happening
but in f-sharp thanks to the pipe
operator I immediately know that I can
have some values of x then i apply
function then I
it then I apply a logarithm and then I
add a value so it follows the natural
way of thinking about what you are
trying to do and that's actually
something that's even people in are now
recognized because they implemented the
pipe into our as well well back to my
general research when I do some kind of
research I usually start with a problem
in my case it's the clustering of the
cancer data and then I come up with some
probabilistic model usually and then I
try to evaluate it and to evaluate a
model that seems fairly straightforward
right I have to use some external data
and let's still seems quite innocent but
this part of the process is usually one
of the worst because it's not very
interesting and it takes much more time
than it should so and it's not a problem
only intensive research ya know this is
just one tweet says thats students in a
class when they have a project they
usually propose something we will solve
computer vision and when it's time to do
some presentation they will say oh you
got stuck through processing data and
that's another area where F sharp is
actually very very useful f sharp has a
library called F sharp data that you can
use to access all kinds of external data
types typically CSV files or JSON XML
files and i will show you some examples
i'm not sure how to do it with a
microphone now can you hear me in the
back
I will try to speak out okay so this is
summer in studio and I'm running a sharp
on Mike in case anyone still think that
f-sharp is just a Microsoft language so
i'll just show you this is type of data
that i usually get when i'm analyzing
anything and this is an example of
clinical data about patients with breast
cancer and what i can do with a sharp
data I can create a CSV type provider
yeah whenever I in summary studio I
highlight a line and I click ctrl enter
it will get evaluated that means it
gives me the same advantages as normal
scripting languages it means immediate
feedback but I still get the type
information and all the help that I can
get from the compiler without actually
even running the code and now I will
load the table I was showing you before
and I can look at information in the
table see I didn't write any parser this
is just a very generic function that I
can call so i type clinical information
I can now access the rows in the table
and now if I do Rho dot I will get all
the information these are actually names
of columns in the table so I get the
information about age of the patients
when they were first diagnosed I get
days to date of death days to date of
last contact and all the information
that is in the table without actually
writing anything and if I look at for
example how many people died I think I
have the vital status in the table
another thing is that when the columns
have some kind of character that you
can't use in a method name you will get
these back takes and then you get the
full strength that is there as a column
name so it doesn't transform it into
something that would be suitable for a
programming language you can actually
read normal normal human language in
there so now i can evaluate it and you
can see that the result is sequence
disease disease disease so it seems that
some patients patients died you can have
a look how many actually
and now we can take the length of the
sequence so 93 patients in the whole
table diet and how many there are in
total 825 so it is not that bad means
that basically slightly less than ten
percent of patients die another thing is
I see that there are mostly men in the
audience so let's have a look if there
are any man with breast cancer so do you
think that men get breast cancer quite a
lot of people so let's check so I will
again look at rows in the table and
I will try to find out let's make the
rose on to the gender and again I can
filter the results so if the person is
male I will keep it and then i can again
take the number of people so there are
eight men with breast cancer in this
data set that means basically one
percent of the people in this quite of
small data set are men with breast
cancer so you are not immune either
another type of data I have to access
quite frequently is genomic data and
this is an example and this is an
outcome out of slightly bigger
experiment I think they had 2,000 people
in this cohort and they were looking at
jeans which have very cryptic names code
names and how do they basically behave
drink or if they exhibit some kind of
enrichment or not in some process so i
will go through this a bit faster again
it's a csv file so i can just create CSV
type provider and then I can access the
data i will show you how many data
points are there and actually now there
are 30,000 genes which is quite a big
table and i don't want to go and
for some information in something like
that and I will just show you again what
type of information I can get so for
example in a row I can look at jeans I
can look at gene description and I can
also look at things like let's say
genomic location and the thing is what I
get from the type provider why is it
actually called a type provider well
when I hover the mouse over any variable
it will tell me that this is a string
and maybe it shouldn't be because it's a
location but it probably tells me which
chromosome it is on I can have a look at
let's say gay and now the type provider
knows that it's an integer and this say
it's a lot of time as well when you are
doing anything practical so let's look
at some example from the actual table so
these are names of jeans and identifiers
and the identifier is actually lead to
one quite big database of all jeans and
I didn't want to do that
and this is the ensemble website that
whenever I need some information about
the gene I can go there I can look it up
and it will tell me the coordinate and
how the gene actually looks but I don't
want to do that actually I want to have
everything in my F sharp code right if I
want to see if I have identified for a
gene I want to look it up what the gene
does actually from the database and it's
very easy because this database gives me
an API access and when you look at
documentation of some rest service like
this they will usually give you example
requests and they provide example
documents so this is an example document
and what I can do I can just take this
address and pass it into a tight
provider and it will give me a tight
access to any Jason document with this
structure so here on this line I'm
actually creating a type provider to the
database and I really just passed in the
website with the example document and if
I want to look at information about a
gene I can just create a query and send
it to the website and it will return the
document here I decided to look at one
gene that's quite strongly associated
with cancer actually Angelina Jolie
maybe you have heard about it had a
double mastectomy because she had
mutations in this gene and one other
gene as well and that it increases the
probability of getting breast cancer
very very much and also if men have a
mutation in this gene they are much
more likely to get breast cancer and
prostate cancer as well so this is a
very very dangerous mutation to have
luckily not that many people have this
mutation I can have a look what type of
information is in my table that i got
from biologists and here you can see i
get the name i get some ID codes i get a
location which is on chromosome 13
between these base pairs and it's on the
positive side of the strand just not
very useful right now but i can have a
look into the database i will create
query and then I send it and what I got
back is a valid JSON document and you
can see these are lists of exams in the
genes and yeah I get a lot of
information from that and I don't have
to parse the JSON document in any way I
can just again I have this variable BCRA
too and i just press dot 0 declaration
place not yet available let's try again
oh now it's available it's dude some
time to parse it and now I can access
all the information that is in the
database in the JSON document so i can
look at display name i can look at the
species let's look at speeches and yes
if Homo sapiens that's encouraging yeah
what other type of information can i get
the measure of the
okay not only the women should be no
Joey so I can also look at description
and it says that its breast cancer early
onset gene which it is but I just wanted
to tell you that well there are
libraries to access this database in
almost and language especially in our or
Python but I don't have to actually go
and look up documentation for any
package all I did was that i downloaded
or i just copied the example document
and then i called a query and i got all
the information and have to probably
parse and a lot of different documents
or for this kind of work are the formats
of the documents you receive change are
they changing as you receive more data
for example you get better data from
another research facility which has
completely different format how do you
handle this type of because it seems
like a nice thing very very useful as
long as the format of the day that
doesn't actually change because then the
whole problem is to be rewritten the
question is what if the format changes
well well the way you create or use a
typed provider is that first you create
a type with some example document and
here and you can use the document that
you get every time as your example
document and then you get that access to
that so you don't have to actually do
any parsers you can just know you assume
that your example document has all the
information but if it doesn't you can
just use the document we are parsing as
the example
and actually when I was criticizing our
earlier I was criticizing our earlier
but it's a bit unfair because there is
so much implemented in our already for
example for bioinformatics there is
bioconductor which is probably the
biggest library of various tools for
bioinformatics so sometimes I have to
use it luckily in f-sharp the type
providers don't work only on documents
and type document they work on languages
as well so there is something called our
provider which gives me access to all
our functions within the f-sharp
environment so typically I want to get
some data preprocessing and then call a
function from R and then continue with
some processing of the data and I don't
have to save the data into some external
document and load it in our and then
roll it back into F sharp I can stay in
my favorite environment and just call
the external our library
so for example plotting I there are not
many functions in.net that would do
decent plots so I use our which has some
quite good functions that answers your
earlier question so for example here I
will look at I would be looking at age
distribution that I find out by looking
at my earlier example with the clinical
data and i will look at when do people
actually get diagnosed with breast
cancer most frequently so i will look
back into my data and from every row i
will get hopefully the age at initial
pathologic diagnosis so when I evaluated
I just get a sequence of numbers and all
I have to do is pass it into our I just
type r dot and here I have all the
functions that I have available in our
that I can call so i will just call our
cube plot
and now hopefully it created a histogram
yay oh no this screen is bit too small
so sorry you can't really see the whole
histogram I but basically the ages play
vary between 25 to 95 in the small data
set I can create different types of
plots as well for example I can create a
box plot which I'm not sure oh no this
didn't work yeah sorry I wasn't sure
which box plot should I call or I can
even call I think I don't have the right
space is open and also when I was
mentioning calling any functions in our
I quite often have to do survival
analysis when I look at people from the
AU from the date of diagnosis to the
current situation if they are diseased
or not and in our they're quite a lot of
nice libraries for doing survival
analysis so I'll try to just show you
nice plot
can actually see everything here I think
I might have to restart it because I
mess something up so like again I will
load all my data that I need and now I
can actually probably hopefully look at
the survival here if you are familiar
with our what i'm doing here is that I'm
creating a data frame this is a data
frame from all my data that I extracted
from the table and it contains data on
time of the last contact or time of
death and the status if the person died
or not and now here I floated the
survival curve if you have never seen a
survival curve the liquid on this axis
we have the probability that the
patients in this cohort are alive at a
certain time on this axis there's time
so here can actually see the time axis
but about after five years about half of
the patients died usually in breast
cancer which is not very encouraging I
will go back to my go back to my
presentation
so this is the thought plot I was
showing you earlier here you can
actually see the time and yeah I was
mistaken after 10 years about half of
the patients died but when I was talking
earlier about different types of
patients and different types of diseases
clay this is an example of my research
when i run my methods on the data i was
showing you before just from the
information on what genes are active or
what proteins are being produced in
cells I can distinct basically split
this one survival curve into several
different ones that have completely
different outcomes for example here up
there there are some types of patients
were almost no one dies in 15 years but
there are some other groups of the
patients that have more aggressive para
sentir for them the outcome is much
worse because the probability very stay
alive drops quite significantly very
early on and when I do research like
this and when I run my algorithms there
is another thing that I want to keep
track about that so for example how I
set my our parameters or both types of
functions do I call so that's another
area where F sharp actually helps me and
this is an example of a report that I
can actually produce from F sharp here I
have something called journal and you
can see it's exactly the same code I was
showing you earlier only now I have some
comments in there and the comments are
in markdown and when I run script it
will produce HTML document I can also
compile it into a light egg and then
into PDF but now here I have all the
code that like I was showing you and
also I get all the tooltips hopefully
yeah you can see this is a row this is
an integer things like that so even if
i'm unsure about something i can look
and I see what type what types variables
have and also whenever my pro code
produces something it will include it in
the report these types of tools are
available in our as well or maybe in
Python you use ipython notebook but this
is I think very useful when you can see
what types things have and it will
include plots as well so here is the
survival analysis etc and here are my
genomic data so to conclude thank you
for listening to part of my research and
you can follow me on twitter as ever FL
g.i.b and i have a website where i blog
sometimes a very edgy calm and this is
my email and also a bit of advertising
if you are interested in X sharp there
will be F sharp only conference in
london in 17 april thank you
click to the national bison starting
don't have any questions questions all
the volumes of paper you usually other
licensed do you in Carter encounter any
through problems like the amount of data
might be too much for a quarter of our
mentor for the portion well the volumes
are I wouldn't call them big data but
it's reasonably bigger like when I was
showing you the table with 30,000 rose I
might get information for 30,000 genes
for 2,000 patients so it's one big table
it still fits into the memory so I don't
have many problems with that and the
type providers that I was showing you
you can actually use the conversion of
the type provider that doesn't load the
entire document that actually loads the
data when you need them so it's much
more a memory efficient okay can you
hear me so we have a data system where I
work and they also use one or two letter
Paliwal knives but they write stuff in
Objective C so do you maybe have any
tips I can give to them I write F sharp
their strength is has watching other
expressiveness but objective-c I think
not so much so maybe it's not worth the
effort to change the names because they
say that when they come back to that cub
few weeks and can you look at the math
formula and
variable names from the horrible image
yeah I think that's the reason why
people who have a background in
mathematics actually use one letter
variable names because it's somehow
corresponds to what you have in your
equations the problem is when you change
the equation then it no longer matches
and suddenly you have completely cryptic
variable names I find the situation
quite often of in the our code that I
was showing you earlier actually the
names didn't correspond to letters that
were using in the paper which made it
really hard to understand so maybe I
think I don't have any good advice maybe
change all their variable names in their
equations and then let them figure that
out that it's may be useful to use more
informative names I think you learn this
sort of thing to practice and the
numerical statistical library for a
shock apart from the air yeah i'm
using.net which is an open source c
sharp library and it cooperates with F
sharp very well and it has a lot of
things for matrix and vector operations
and it has decent support for statistics
as well I just wonder what did you use
for you use for taking just some cans
geez causing the breast cancer is that
the testing hypothesis or or you are
classifying them nah probably
I am running probabilistic clustering
algorithms that means I'm trying to
identify subgroups of cancer that
expressed the same behavior across
multiple different data types I'm not
doing any hypothesis testing and the
problem is that usually when you do this
type of research there is no ground
truth so you can test it against that
you can only test if your results have
good predictive outcomes free access to
ensembl database could I get data from
it yes yes you can just look it up on
the Internet there is free access I
would like to ask you because you use to
learn studio on the mac and i'm not sure
if there are any alternatives as the
dotnet is becoming open source but it's
coming slowly and I don't think follow
support at shop so is there anything
else you would recommend rather than
sorry or some aren't the only option you
can see now well first of all I don't
see why Mona wouldn't support f sharp
this is running on 10 actually Sam oeun
studio and it has very good support for
F sharp and even for example this the
formatting of the tooltips is much
better in mono than it is on Windows
actually I know there are some packages
for emacs for F sharp and yeah so far
i've been using summer in studio on a
mac so i can't really tell you much but
I know
yeah I know there are many people
working on support in different editors
in order some support in vain as well I
not sorry I can't hear you this is the
most question so we are writing your
time I was furiously there are any
special libraries that allow you to use
F sharp and we heard a shot over
something else are there any tools that
well what F sharp has that other
languages don't are the type providers
because for example in our when you want
to access some CSV file and you get into
some parsing problems you usually spend
half an hour just reading the
documentation for the function that you
want to call to load the document into
your physical space and in f-sharp I
don't have to go through that and it's a
great help to be able to access any sort
of data file very quickly and to get
some information about types in that
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>