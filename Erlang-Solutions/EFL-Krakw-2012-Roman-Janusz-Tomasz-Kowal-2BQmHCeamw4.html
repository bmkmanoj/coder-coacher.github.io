<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>EFL Kraków 2012 - Roman Janusz, Tomasz Kowal | Coder Coacher - Coaching Coders</title><meta content="EFL Kraków 2012 - Roman Janusz, Tomasz Kowal - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>EFL Kraków 2012 - Roman Janusz, Tomasz Kowal</b></h2><h5 class="post__date">2012-05-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2BQmHCeamw4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let us start with introducing ourselves
I am voshkod and this is how young we
were both students at agh university of
science and technology and we are here
to talk about and i'm based software
update passport for remote devices which
was our business projects this year and
let's start here we have cotton firstly
i could strike the device we were
talking about it is big reports so me
something out if you here so i will get
short then i will describe our example
way do we need such a platform that some
requirements and why did we use i like
to do it then we moved deep into the
architecture ok so this is a bigger
words it runs what you got processor it
has 512 megabytes of ram it also has
some USB ports HDMI so we can connect
keyboards and longer to it and use it as
a desktop computer but what is most
important in our case it runs the next
area which is installed on the SD card
ok now this imagine we want to have a
network sensor sensor network so like me
presentation we want to measure for
example traffic ingratitude a million
euros and what do we do we buy 10,000 of
bigger boats we attach some sensors to
them then we build our software as
doesn't carefully of course then we have
to place that in key points in krakow or
eating our cars and those devices can
connect via gsm network which is rather
slow it has low bandwidth and it isn't
reliable we can imagine device in a car
which is awesome front our closest
courage so now we start collecting some
data and then add without a new feature
in our code which we want to fix really
fast and now we have a couple of options
we can change SD cards in our devices
but issues we have internet access we
can remove it right right but not
exactly because firstly those devices
can be behind 1080 so it will be rather
difficult to use for example secure
shell and secondly there's an ultimate
so even if we write some screams we can
have a situation where some devices
aren't connected to internet at this
point in time this is where we developed
our dorm and we wanted needs to perform
mass automatic updates we just
we suffer a lot to update our wish to
reach group of devices and then it
France America and we won't seem to be
reliable because we're using unreliable
network and we want to get the job done
and recover from pure chaos we must find
grained control over a great dresses but
only stop the system upgrade and started
again this is too easy we wanted it to
be easy to install and use and also we
want to send a small amount of data over
the network as possible that's why we
wanted to use Eric it is massively
parallel so it can manage thousands of
processes which makes handing large
amount of requests from devices square
TV it is fault-tolerant using
supervisors described only howick and
other OTP design principles makes it
easy to recover from errors and it gives
us lots of swapping so we can update
software on our devices without stopping
it and without losing its state we also
integrated with with package manager
because it's very easy to use every
software administrator use dpkg or some
other package later before and it also
helped us save some bandwidth which
we'll talk in detail in oil now I want
to be sure that all of you know
like what is thought to be application
or an angry nice is there some people
who don't know the steps or who knows it
okay I think we can skip this part
because it is really key to understand
the rest of the presentation but most of
you go of the stairs okay so now I us
microphone mic ok so i will get more
into some design condition and here's a
summary of what i'm going to talk about
first i'm going to talk about with a
remote software development mobile
because we have assumed some more how
the server of our prayer life the
application stuff on device like this is
done and so i will talk about this more
later and then i'm going to talk about
package manager integration that we have
incorporated into our performance is
very important part of our platform and
these two points actually relates to the
device and then next two points
considered a the class honours hall and
get into more things about server so
okay let's stop it so first we did de la
ville we have a few important
assumptions here about how the developer
writes the application and the software
installed
so first of all the application and
software that is installed on the good
work the single Aaron 3ds in a narrow
lab to get married so we must assume
that the developer maintains an error
code Pyrenees and the next thing is that
made to for building and compiling this
and released about this is quite
standard right now for building around
applications you can compare to you for
example maven for java something like
this and purpose is pretty much the same
completion of the release builder
packages and so on and these are all
standard error ways of developing be now
you have a new list we added some some
our own streets into it because we ought
to make it more integrated platform
first there's general script with which
is used to join so-called well up
scripts and rob is script that finds the
way mrs. release is separated from one
person to another or downgraded and
rubber can do that but we some more
fine-grained control recipient are all
script for this and finally we have
three additional scripts which we use to
generate data packages for our Lord and
because of course this would be very
very tedious if we do this in mind okay
so this is about the volume level and I
mentioned that they the integration with
a diamond pattern manager so i will talk
about it in ticular right now okay so
what we mean by integration with linux
package manager the expected value
package manager in our path not from
Slayer or standard standard parent
Magnus's they used for software
installation and upland and like this so
it is done in a way that denim package
making your scripts invoke standard air
like things that have all those cool
features like swapping and stuff so
as I said we reserve quizzer ability to
gain from subsonic and thanks that we
have very fine control very very fine
grained control over the ugly process
because of course that the developer can
can find much detail how each
application is upgraded from one
and benefits general benefits from
useful package manager as as follows
first of all this is very little it
allows us for very busy ratings of
devices no not installed on it because
the installation is just writing install
and we don't even need to install error
on our device because the aren't note is
self-contained it contains an American
contact and everything in it strand and
one more important important thing for
for our four pack challenger integration
is one more benefit is that when thanks
to thanks to automatic dependence
resolution provided by package manager
and join upgrades less data is download
it and thus we same campus of our very
slow connection gsm as we recall terrain
ok let me talk your host Graeme mention
also that wrapper is able to generate
have been packaged pads the way it does
it also includes all the applications of
the release into the due to the package
so even if only one of you should change
in our new version of
this will be told every application in
package so that's why that's where the
package really really comes to health
okay so okay I think okay i will now get
into some more details about how they
are not notice he composed into several
different packages actually we
implemented integration with Debian
packages but we have the thoughts that
this may be any actual sure front looks
like young or pacman so this is
something for future development okay
and the details about the composition
packages so I don't know and decompose
into several packages the first one is
the main package this main package on
the top represents a degrees and this
one is very important although it does
not convey in encode actually because it
contains only some configuration files
and the diffusion of the race itself so
this is the own package that killed our
system administrator should directly
operate on because our assumption is
that Aaron not always must be restored
and updated as whole and the only the
only reason for
well packages this is the automatically
dependency resolution that the
punishment gives us and takes that we
have glass domes okay so this was my
package this new package is dependent
strictly that means by a concrete
version on application packages we have
one package for each parent application
and these are three group of there are
three groups of the disparities the
first group contains some standard
applications including pretty much
everybody's like Colonel asleep like
like islands like I say so and these are
likely to not change okay the second one
second application package is the
software hundred thousand fine package
contains software update tough from
client application of course the
application that is responsible for
contacting the server and ends of course
it is needed for a power walk and
finally we have several packages that
are usually find and contain the actual
core values of the of the katherine rice
and finally all those packages are
depended on the base package which
combines which contains
so being streets veronika note that are
generated by rod okay so if my
explaining allows it i will shortly so
right now all pages that i explain later
the default i'm being installed and with
base package of your vacation packages
and and we package sorry for this with
you so godless and i'm going to go back
in presentation so random I will talk to
learn more about the architecture for as
long as all so this of course sir client
architecture and unless I you have a
remote device and this of course this
one there's a revolt or the applications
that i played software update doesn't
kind everything right on the radical
linux and angie having installation
process so and on the right side there
is more interesting ping the server the
first component the observer is the HTTP
server serves two purposes the first one
is / and sycamore is the devil pension
posturing and next pack next come
imagine server this one of course is for
national crisis and special upgrades and
racial and final component is the way
they face which right now is neisha this
one this wasn't much focus focus for us
if there is someone for scarlet can be
changed for example for casually and the
ways the database officers as some kind
of communication channel between those
two servers is preserved in diameter and
because they party they should not
communicate the earth ok so i will now
talk more about middle part is the
communication platform ok so education
link between devices and the server
happens in sessions matter so
confirmation sessions and it is our
assumption that that this session is
always cheat by client by advice because
of course can be bothering hang on any
clear something like this away and we
cannot assume that we can initiate a
communication from the server but we of
course we of course assume that there
may be some way to trigger device the
force it to start such a session and
that's why we
really of connection because but of
course how that connection request
happens a bets on what our network
dollars okay so about the protocol
itself it is very simple because it's
just over to speed and we can send
pretty much everything that we find
Larry in turn is your life with peyote
minor difference and very sweet and
because general simple and accessible we
can think of expanding our platform into
a more general management platform only
for upgrades okay so these are some
needles about medical session I'm you
not get into it ok i will try to perform
a great anniversary that mail work
because of some very silly mistakes that
we've done probably i will just now show
the UI of the platform we have the
device here did register itself to the
server when we started not officer of
the advice we see some magic bunch of
information
here ovation all versions of
applications and there is release itself
and we also have some UI for postural
story okay I can see them that now I
know why my presentation went wrong
because i forgot to delete in versions
of our packages very sorry for disney
space right now i should be able to
perform it in how it should be done and
so okay let me just one more thing
unless we go on a time right we do that
no okay okay so just to make it i just
packages
okay so no stuff
right down the right conditions of
packages and installation
and now for the faster
okay so that's the first version of the
sound and right now I'm going to perform
upgrades to to change the sound to the
to this Swan Africa yeah
so this is very easy dr. Phil dy ok
first ok I forgot to put you the whole
story
right now we schedule the upgrade we can
see some progress about it if we take
some time because device three other
click contact contacts the survey
results for the pencil means this first
integral
one more time
we have to change is reflected why you
can't aversion to and repression of the
application to serve our technical
problems and they won't be now getting
back to the presentation and we have
just some summer here and so what did we
actually do so first we have something
critical all they were given the
application on now except we need you
forever we have mass management of
devices and scheduled domestic wakes we
can schedule over an outfit on global
device wafer there and so we have these
amazing on the device pinched package
manager and we also of course a benefit
from use of hot swapping we also
optimized the size of downloads to
operate it eventually the usage of
package manager and it's automatic dns
resolution just and of course we do have
hot throbbing and fine-grained
control over upgrades so just a little
words about future developments so i
said you can expand it into more general
management platform because of the very
things go prologue we are similar then
of course we the obvious way we can
extend our platform
to integrate more package managers can
do it and finally a final thought and
make a little more difficult was to
implement support for distributed
Ferrand applications running on Castle
using nature and who I think her a key
for for connecting into a classroom and
here simple story with our fault
something comes thank you very much in
questions he has some support for images
can be further to optimize the sizes can
work you mean the official have not only
dogs the packages that change but even
going it going more into it right here
there is some excremental support it is
very definitely we make it about it
thank you for this for this advice if
there is a know how to call it frame a
piece of black / it's called frame back
and it's dealing with using they can
finish
to upgrade climb applications all
together is really sending us a fitness
did you hear the companies or you pump
this family's okay we were looking for
such software which will help us
integrate teaching and negative bernanke
mechanisms we didn't find this one we
found one depth was able to be up to
update on separate applications
independently but we need some anymore
and I needed needed a bit of a phone on
the whole movies and actually what are
the heart do with PG because most happy
movers defining moment in the upgrade
process by PG in which we have all the
old versions of applications and all the
new version is a very presence still
both on the file system I don't know
with this district yes
application yes that's exactly what
happens real time so it's possible
together package manager and yes yes
exactly because package packages Debian
packages contain meeting strips which
are involved different in different
phases of the upgrade download package
manager and we made we created 10 points
for subscripts invoke actual operations
on the no training so they evoke some
febreeze handler of the of T of year of
error and thanks to that we are able to
direct from oh sorry they do some tests
with a large amount of clients see how
it scales and we need to test but you
may suspect the initial requirement how
invited Chicago was about ten thousand
and then again this is not much actually
but of course we hope that Eric solve
this problem and that's why we chose it
because we have all those lightweight
processes they can be they can run
concurrently and they can be there can
be very much very large number of them
in Java were only some certain amount of
threads and then stopped skating and
right now the implementation right now
is that every session is is handled in
such one lighted process so we think
that we hopefully have to assume the
module problem long heat are those
sessions do you are the very short or
Oregon pushing and session starts with
an infant message from device and then
server process especially this in from
the interim management advisor love some
data from database and then decide what
to do it sends some jobs to the device
then job then device does this job get
the sensor is due back then then the
server decide what to do then what you
do next and it may be some other job but
also maybe termination of decision so
this pretty much simple right the info
on request response Lucas Christmas can
you mention the increment relationship
ten seconds ten seconds and then
this is the problem with calling is
always either UK phone Oh too long
intervals or your salaries non-stop
overloaded because there are very much
money connections happy fourth time hey
well of course the internal that defines
how often does the device contacts in
service of course configurable out right
now this example value 10 seconds wait
wait small as we came and it is
configurable so this can be comfortable
by the server itself we may consider
adding it by so we might implement some
kind of awkward with rich widower for
example if you see that advice contacts
server too frequently we might change
the value and it should be it should be
better and still we have the paucity of
connection request so so this this
entire can do long when we have the
possibility of connection facebook
because then we can trigger the device
contact server from services i would
like to also add one more thing when we
trigger update the recession the TCP
session like
and our session is very short we just
the device pose these are something for
me and then the DCP connection the
political connection is yes it is and
then we run the PKG so typical gee
sounds all the rest so TCP sessions are
very very short thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>