<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lambda Days 2015 - Tomasz Jaskula - Improve the signal, reduce the noise: bring F# to the table | Coder Coacher - Coaching Coders</title><meta content="Lambda Days 2015 - Tomasz Jaskula - Improve the signal, reduce the noise: bring F# to the table - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Lambda Days 2015 - Tomasz Jaskula - Improve the signal, reduce the noise: bring F# to the table</b></h2><h5 class="post__date">2015-04-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zGkiWJ-0q7Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so ginger brave attempt to skip welcome
everybody to my talk I will be talking
how improperly signal release denies
this is my twitter handle and the
internet and what identifies yesterday's
my company's logo could be flayed 90
degrees back from the lambda no but i
will suggest this after after this talk
so during the day i'm a software
developer in finance I don't use
architect very much because it's very
pejorative name and friends and during
the night working my startup project
forgets avidat pair but this is just the
draft online and it's not the final
application that we want to deliver and
the rest of the time are to user
communities in Paris f sharp user growth
and domain driven design user group I've
been first involved in the domain driven
design user group and when I discover
functional product I found that it fits
very well with the main driven design
user group and also the rest of the time
I'm trying to to block it and play with
our but there is no much time left so
this is very personally so this talk is
about the benefits of moving from
object-oriented programming to
functional programming for a startup
project so today many startups what they
want to write their application they
choose rather a dynamic languages like
will be because maybe there is less
constraints and they think there's
easier and faster to build a startup
project but what I found out that using
a sharp word for startup project is very
very powerful thing to do and you can
deliver very fast I've always been an
Opie developer a it's been maybe 15
years
since the very first bit of dotnet I'm
started to develop in c-sharp but this
is what we can say I've changed my mind
and this is the ditch situation the
snake which cannot cast its skin has to
die as well as mines which are prevented
from changing their opinions they cease
to be mine so this is the motto for this
talk and building a startup is not just
about writing the code there is many
task like that are spent on non
technical things like business plan
market surveys the verdi zinc legal
stuff like privacy policy terms of use
this is very important if we can just go
into the wild and be happy to collect or
the information from user so after some
organism like do do you think it's in
Poland they will catch up the catch you
in you have to be responsible for what
are you doing online there are some
other technical tasks that are not
involved directly with coding like you
have to choose your hosting platform
definable build and deploy processes and
integrate Lee external way API services
right so we've integrated with Vera
laiki eyes like stackoverflow get happen
and so so so so on so there is you know
much time you have to spend studying all
these api's and the time spent for
coding must deliver a real business
value but can we measure the part of
business value inside our code this is
very hard and I don't know an automatic
tool or metric that can be used to the
DA the attempts were made as a seaman
cousins compared the same application
written in C sharp and in a frock the
blue one is C C sharp and the
green one is f sharp the same
application and this is the lines of
code so this is the braces new blanks
Neil checks command useful call so
there's a very big difference and
there's some statistics from his website
you can find it here so for example new
checks 3,000 new checks for shisha and
only 15 for fr and I think 15 is because
they integrate with some c-sharp code so
they have to check for news so we can
for example yes yes for me comment it's
at xn ilysm you have to name your
classes your metals in c-sharp not use
comments if you put a comment it has to
be gold like Kevin Henry said it has to
have has a value you don't join you in
fact you shouldn't use comment just for
now instead of using yes and also
because you can express maybe in more
conscious way now rubbed ending the
ninja shop your ideas so in electronics
they use a signal to noise ratio it's a
measure the Talos for example if you buy
an amplifier or a DVD player to know how
much how good is signal compared to the
background noise this is the simplest
formula so this is a mean of all the
signals divided by the standard
deviation which is the you know the
background noises and the result the
biggest the result is the
there it is so can we adapt this to the
code I think it's it's possible but we
have to define what the signal is in our
code and signal it's an information that
produces a business value and everything
else impeding the transfer of this
information is just a noisy so we will
discover the different kind of noises we
can find in our code and what important
also is that information conveys
knowledge and acknowledged is derived
from fact and fact it's every its
produced by business use case and this
is the business value that we look into
power cord so up some of the signal
properties fact that happened is
incorporated in a time and should be
immutable valium let me give you an
example for example if you have a friend
and he comes to you and says I've moved
from this address the other address do
you automatically clear the old address
in your head and put a new address in
your head no I don't think so of you you
know that he has now a new address you
will remember this new information as
new address and you will keep for some
time the old address you will make you
set your feet or not these are the facts
that can be discarded but there I they
are no mutated in object-oriented
programming we mutate we take the old
fact we may take it with any value and
we we we saved and this is a very
important distinction because all the
decisions are made on facts on our past
experience so if you build an
informational system you have to have
all these facts that happened before to
compare them and to make decision this
invasion them and nice in first with may
signal and don't contribute to
acknowledge and and everything between
Pharisee signal yeah let's say so for
example elemental force data fact
mutation and riffing that hinders the
readability of fact given your language
structure and codon and there is several
categories of cognizes that IV notified
there's organizational one for example
if you have many assemblies it's hard to
reason about the dependencies between
the season leaf so we have to use a
static analysis tool to discover this
readability how it is easy to read your
code because most of the time eighty
percent of the time we are reading the
code and twenty percent may or maybe
even less we are writing the code so
it's very important that the code should
be read able to move faster in the
development and correctness it for
example it does your type system in your
language allows you to to write a robust
code or will have to do no no Czechs
everywhere and try catch exception
everywhere and correctness
expressiveness it's how much plan being
code do you need to glue all the use
cases together and contours of
frameworks or refuse dependency
injection and mocking frameworks for
testability or or our arms and the stuff
like that and they afford just a
subjective and complexity you can
measure video static analysis tool so to
be simple we can make a terrific third
girl metric we are interested of the
percentage of the line of code for
domain is case divided by the total
lines of code x 100 this will be the
percentage that we
are interesting so that I said there is
no automatic tool to measure it when I
written several business cases in my
startup project i started to count all
the lines because for example if you
take a static analysis tool it doesn't
include for example braces and the in
c-sharp and the end those is a flight
plateau for example when you have a type
variables the type declaration doesn't
count also like the cliq a line of code
so this can be measured and the
categories are just a subjective
estimation a for credibility
organization and let's try to look at
three different implementations of the
same use case and the use case is very
simple let's create a rest service which
is a registration process business
results very simple all fields for a
registration must be required a squat
email privacy selection password should
match the password policy email address
should be unique and if user is from
trusted provider then email is automatic
confirmed for example if you come from
off like Google or Facebook you don't
you want to confirm the email once again
for the user you can trust and if not
you have to send an activation code to
the user and after this estate so i used
a speed web api to and we have free
implementations a short name
implementation o P and the Frog dep at
the end if you were to draw this
business case is very simple have just
an input validation business rules
business logic and at the end there is a
fact we then save this fact or send a
notification or return it back to doubt
there is some error cases that you want
to break every time you iran to
into an arrow so this is the myself with
my rest service action for registration
that there is one parameter which is the
resource representation of registration
we post that free source so after we
check the dc's Valley which I give
password match the policy this is very
simple if not you say send a bad request
if not we'll go go on we open a database
connection we check if there is already
account that exists we encrypt the
password we produce a domain account and
then there is a state mutation we don't
know we have to go to confirm email
method to be sure but we suppose there
is some state mutation and at the end
page 3 if there is email confirmed so
account can have an email that is
confirmed or not we make the decision by
based on Liam flag we will send an
activation code or we just return on a
response so this is very easy this is
how it look like a maybe feedback so
there is an input the information sought
through this is the green line for the
decision cases decision is made in the
blue boxes and the fact is produced at
the end which is the account domain
account which is mutated three times
before it's saved to the database and
return day to the user some observation
this is a procedure alcohol there is a
state mutation every time so we can say
that my account at the time T was like
that or I that because we've lost track
of every changes in my in my business so
this is very hard to read what happens
in my
goal and decision are made by
intermediate state to step everything
orchestrated by a client and you cannot
pass it very easily you have to do an
integration test of the whole but not
different steps one by one and this is
some statistic from this very simple use
case we have something like for hundreds
of of God and there is only set set
percent of useful code of business use
case the rest it's not very important
darkness there are some nil checks the
try catch exception braces there is a
use of frameworks there's re RM
frameworks and dependency injection
framework so this code for me it's not
very important for the use case it just
there to support your use case but we
can be better in object-oriented
programming we have to use abstractions
and the code should not be procedural
can we do better nor factor in with some
abstractions so we can find out this
abstraction in general would people do
it we need to test so we need
abstractions around some of the features
of our example for example your
presentation validator I registration
service I notifier a ir can't repository
for saving to the data database this is
very standard the refactored Opie
implementation it's quite similar but
not you know now instead of using just
god we will use apps implementation of
abstractions of interfaces for example
validator or validate this will response
and after we can use registration
service implementation check if user can
register or not and registration service
is also responsible for giving back a
domain account but what if this is
noodle you have to check all the time
this is new because if someone will
change the implementation of register
method they they may send new or you
know whatever so we have to protect
yourself from that and after there is a
thunder jack if we should confirm
subscription and if if we should confirm
we will send an activation code and save
to the database so now this is quite
different from what we saw before what's
important that we've introduced its in
abstractions and now this is the
relationship between the abstractions of
the composition of our application is
based on abstraction that weed is
positive and the early relationship be
in them so this is not very easy to
follow when you follow the green lines
you have to have in mind all the
relationship and understanding code and
what happens in your mind when you read
your code you try to follow all these
lines to make a mental model that will
be easy to write for you and to
understand so now we've used
abstractions for composition there is
also a state mutation and but now this
is testable and if we look at some
statistic we have twice as twice code
than before for the simple case and the
useful code for my domain use case it's
only on five percent which is lower than
with the simple code that we had before
and it's normal because we have much
more line code for the abstractions for
the framework that support support
dependency injection and the salt now so
for example this is a c-sharp class
constructor for me this is a noisy this
is not a direct support for your
business use case is
here to glue all the abstractions get
together so this is a language
construction so we can do we can do
differently but people generally do this
do this construction injection thing so
when you introduce some iron frameworks
theyíve frameworks and mappers between
different layers all this stuff is noise
and when you look at the simple so a
solution Explorer the visual studio you
will see all these classes in interfaces
that are very very big just support a
simple use case and what's important
that we introduced one abstraction /
implementation just for testing purpose
and this is the village reused
abstraction principle which says that we
should have several implementation
before introducing an abstraction and
what what is interesting that in
object-oriented programming abstraction
can be set up front the abstraction
should be discovered after some use
cases that you find that there is a need
for instruction so if for example you
have three different implementation you
can go for it abstraction so I think the
destruction that we've introduced it are
not good anyway but it means that it's
very hard to find a very good
abstraction in orbital or object
oriented programming can we do better
with a frog but we try to improve s in
almeida from and HTTP is just a function
HTTP request response is very simple so
we can define also a business use case
as a function we have an input and a
fact that is produced at the end so if
we use it with HTTP it can be like that
request then we invoke our business
function this case and then we produce a
response but what if for example there
is a happy path but if we wanted to
handle all the errors along the way
there is a support for that in a frog we
can use a typed that I record this
tremendous cumulative unions and this is
taken from railway programming so forth
from schedule so we can handle a success
and a failure and then you can pass the
result along the way in your business
use case and each time you have to
handle both cases so there is no you
have to handle them both and you can
just say i would like to handle just
success or failure who all the time you
have to handle both and you can also a
model error like a categories of the
choices of different errors validation I
can't exist database error this is very
readable and you can see what can happen
in my application so if i rewrite the
function i can say that this is HTTP
request we have an input at every time
we are a result which might be a success
of error and we produce a response so
let's try business escape holiday inn
put in work the main persistent greater
risotto ever so step one input
validation we have a password policy
function that takes as input a
registration representation of the
resource and then we match on the red X
pattern to say whatever this is a
success we return a success or if it's a
validation error we produce a validation
error so matching pattern in a shop you
have to match all the use cases if you
don't
match you will get a worn by a compile a
compiler and that will tell you that you
didn't match all the cases so there this
is less error-prone and at the end you
have a signature of the function which
will take an input and predict a result
of registration or error active active
patterns an able able you to define
named partition let's divide input data
so we can use these names in in a
pattern matching so we define here much
label and we can use it in the matching
pattern like this criminal King and type
but this is in the screen so the code
can be very generic if you want and then
you can compose all the validation
together and you have a valid at all and
inside of that function you can compose
all the functions so this is the
signature the function it's the same as
before you can define your operators for
composing a function so this is an
operator that will depending on
successes and failures will cook and
concatenate errors so we can have them
all at the end and and we'll also invoke
successes to pass the next function so
this is all the time we have the same
function signature this is a generic
because we don't have at the point where
if it's a registration input or
something else so this is a generate
code and after the use case we can
define like that for now we have just
only validation so we validate all and
all the time the same function signature
so not notice that we don't provide any
input
for the function we should have a
registration representation input but we
don't provide so what is so the output
is the function don't wait for the
register representation input and this
is what's called partial application in
a frog so if you don't provide all the
parameters to the function it will
produce intermediate function that will
wait for the parameters that you can
provide at the later time so this is a
very powerful a design tool and we see
after how it compose all together and
the next step is to design with domain
types it's very important to to express
what your domain is capable off before
in our implementation we had this flag
is confirmed now and now we can stake
that email up on like five can be
unverified or verified this is very
important because when it make decision
you have all the time to handle these
two cases what we do if the email is
unverified what we do if the matter is
verified and if you take an address
email in the other function on like a
parameter you have to match all these
cases so there is less chance that we
will make an error and if you add some
more choices to this type compiler we
warn you that you have to handle these
new cases that you had and this is data
oriented but it's it's normal and fine
for data to be exposed and no
encapsulated because the data is Seema
table so we can have a function that's
misbehaving that will you take this this
data and it's like unpaired set it's
better to have 100
that'll break on when data structure the
ten functions and ten data structures
and the next function we just map the
register representation to work nine so
we produce a fact which is which email
address unverified because we didn't do
any verification yet and we returned
back to our use case then we can compose
with the validation so you know this is
like a chain validation valued at all
and after validation normalize email and
we have similar signature at the end
this is just the same function we have a
map function but because some types for
example one function can be done at
register implementation and another one
an account which is at the main object
so we can map on the input into to apply
the new function to the success or
return a failure just just the function
that serves for composing that you will
know in what point and one point in time
so if we try to confirm email you see
that I have to handle all the cases and
verify then verified and if account
provider is off i can say that i will
produce any fact i want me taken a fact
that was produced before but this is a
new with verified email so the fact
before i can discard or i can use for
example for later use but this is very
important and if not i just written the
accomplice like it was before and in the
case it's verified it's not tomorrow
because we were producing unverified
email before so we can be verified at
that point and then we return to your
our use case it's you know very simple
to read what happens in our up the
we have all this registration service
try confirm email and set activation
code and bind function just allows us to
to apply the result the function in when
its success and when it's a failure
we're at on a failure so this is all the
time we handle to two types and at the
end we can persist this this is a versus
registration and the particularity of
this function is when you persist there
is no output so we can apply just a
function T which is here before saving
up before saving to just return the
output so we can keep our functional
signature at the end and the try-catch
also very easy to produce a success or a
failure we are if there is an exception
and there is the only would one try
catch try catch exception in any case
when you're talking to database and
after there's just persistence mapping
with type providers and type providers
is a adapter component that rich schema
ties data service and transform them in
types in the target programming language
so for example there is the type
provider for the database so we have a
strongly typed in your record with all
the properties within the reasons but
there is some other type riders for CSV
for reason so it's very simple to work
with with them and the final business
use case composition is just a function
of all the steps we have the validation
registration and that database
notification we can do even we can go
even further we can get rid of map bind
function we can define our own operate
so this is one of the operators then we
can define operator is does you know
composing one function to another and
applying a bind function so the code is
more even more readable similarly for
the map function we can do this a.m map
function is also an operator map we
apply one function compose with yet
another and return the result and the
last piece of application we have our
registration controller of web api and
we pass to the constructor does our
business use case which is here yusuke
this registration stock and in the
action we just match on the use case
which is a stub process it's called star
process we pass her presentation that
comes to our action handler and we match
on the success and on the failure and
depending what depending on what the
failure is if it's validation error we
can return a bad request if it's a
account exists we can return a conflict
which if its database error we can
return a internal server server error to
the user and in the success case we can
we can return a created option with
activation code so that this decision is
made at the end of the business use case
function it's very simple you have this
all stuff in one place and it's very
reliable we can do even better because
when you see there is some matches that
are included one into another that this
is not very you know beautiful so we can
introduce a maybe rest which is a
computation expression
that will handle of this state passing
behind the same computation expression
you know you can you can then define
very simple like that this is what I've
made for this we will just bind the
function if it there is a value there is
no value we will written none if this is
if there is a value return sum which is
like an allowable csharp to say there is
a value or there is not a value there is
a value you talk return some of the
value if there is no value will return
on it and we have to handle some and
none all the time in all the cases like
a regular rescue meditating and the
testing is very easy at the end so this
is the case for post-retinal Sakai on a
valid data and trusted provider so this
is my start business use case I can just
this is a function so i can say whatever
the input rate on this result then I
pass it to the constant to the
controller all right when I invoke my
action when I will post to detection I
will check on the result of the test and
if i rewrite all these use cases you can
see that it's very similar to that
theoretical use case that we have drawn
the very beginning so we have an input
validation registration everything is
composed very easily and then we return
a result and we match on success and
failure some observations there is a
composition for functions functions are
also values because we can pass
functions to other functions no state
mutation and there is a big business
case function very easy to spot in
and to hang too if you want another
business use case function for testing
you can easily replace it whatever you
want and what's interesting that the
lines of code is like a simple
implementation issue char but this is
fully testable there is readable and the
code for business use cases as twenty
three percent which is big percentage
and for example frameworks took twenty
twenty eight percent be because the code
that is involved with web api took much
place here but if we were to use another
framework maybe there's would be
different and if you compared to
selection together she's the same test
like we use case in a frap and the other
one is a sharp this is this is very easy
to read and in a up there is no folder
because the when you are new comment f
sharp you start with the bottom layer
and the bottom layer is the entry to
your application and you go up through
different layers so we've improved the
signal because there is no need for
framework for dependency injection we
use partial application and only for a
opie frameworks you have you can use
higher level functions for composing the
other functions together you can use
computation expression also for this
knowledge 4rm framework with simple type
providers who can you can do most of the
things that you need to do and you don't
need to know 23 object-oriented
programming design patterns and what
even knowing just the map and bind
function you can compose very easily
natura 22
produce an application which is very
nice to read and a stable and I heard
this rich he kept a promise reviews it's
it's a big lie in fact because it's very
hard to find the proper abstractions and
to compose them together so that's why
we have so many 121 in between
implementation in interface so the
values shirt clearly nobody can can mess
up and so for example red crate sir rest
service Canton very bad if you use a bad
tool or if not notice carefully used but
everything in the life can end very
badly after all for example let's all
this ball this can let's install this I
conditioner it's very easy or maybe
let's get this party started with the
fly electrical plug in the middle and
then DM let's get some double shot be
careful of what you are using an effort
is the language that helps you to avoid
all these problems and Murphy's Law
anything that can row can give can go
wrong will go wrong so some references
efshar orb F sharp hashtag in the effort
fun fun and profit and at the end there
is a conference in Paris in in mind and
we have a full track with people from a
trap works so thank
thank you so this is the second time in
two weeks where I see the regular
programming from the shark for fun and
profit use do you know if it's the sound
like very hard you keep you know copy
and paste from the page or blog after
right web programming is very simple
idea so there's I know maybe 10
functions guys yesterday just dislocated
github project on FS projects which
contains all these functions Stefan for
money it's like brand-new yesterday for
easy yeah yeah 108 lives yes I used for
my project only two functions bind bind
and map and I used also a type which is
not which is the very simple tight
because Scott has much complicated time
yeah yeah that and for example this is
actually the business use case that I
made in that way there are actually in
my project and measure and there is no
problem with that all the time so
holidays if you build this version a
naive easily easily I can say seventy
percent less time to work with Asha
because it's it's you know you have your
starting point which is the function and
then I compose all the functional along
the way and I don't care about all the
frameworks everything I just if I you
need the function I what into the
business use case and he and in fact you
know what I want
is just to take input and then to saved
to the database and when I first came to
a frappe I started to do some research
on different different API and it worked
very easily and I was the price of how I
was started just using ketchup and it
worked right the way so that's why after
I moved everything capture data Austin
is the outer really free now you have to
handle it you just have to you know the
controller and the action which is
provided by the framework but after you
have to code every everything you want
to do it with your API there is no
automatic code I'm not aware of or maybe
if you are using some scaffolding with
aunty ki frameworks and stuff like that
but this is very brittle code and I
don't find it very testable
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>