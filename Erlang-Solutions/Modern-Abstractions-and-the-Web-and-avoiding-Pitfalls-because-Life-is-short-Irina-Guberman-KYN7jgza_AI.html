<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Modern Abstractions and the Web, and avoiding Pitfalls because Life is short - Irina Guberman | Coder Coacher - Coaching Coders</title><meta content="Modern Abstractions and the Web, and avoiding Pitfalls because Life is short - Irina Guberman - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Modern Abstractions and the Web, and avoiding Pitfalls because Life is short - Irina Guberman</b></h2><h5 class="post__date">2015-11-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KYN7jgza_AI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">sexual will be a fairy tale so take it
with a grain of salt long long ago in a
galaxy far far away a lowly software
engineer named arena came up with a
social networking website idea she
thought was really cute and sweet and
cool compliments as a service then she
called her imaginary social networking
website kudos she imagined millions and
millions of users welcome to her amazing
website who wouldn't want to give our to
our give compliments that everyone know
i think i can make myself a little
louder who would want to give one to
give compliments that everyone can see
online and who want to receive receive
compliments that everyone can see online
cod can't collect compliments and
compliments as birthday gifts yes
millions and millions of users but back
to reality kudos the website was yet to
be created arena a beckoned java
engineer at the time was already working
at a company serving hundreds of
millions of online users to her a
back-end java java engineer that's what
kudos really looked like her very own
java web server so scary she knew what
it takes to create and support a busy
web server returned in java one of the
most popular languages of our time a
java server is a monolith and by the end
of this presentation you will see what i
mean something unpredicted happens and
the whole thing collapses and you have
to be very careful dealing with
exceptions and errors in your code or
before you note server goes down on you
lose clients in mind of course in the
core in the course of a couple of years
most of the bugs and pitfalls and
whatnot were more or less sorted out but
it was a long anthoney of journey and
very actually very costly journey
look let's not jump too far ahead of
ourselves luckily the place where I Tina
worked at the time already had a well
established business model steady cash
flow and a solid client base so they
could lose you know if you thought a few
thousand dollars here and there it was
not a problem but for her and but for
her it was a completely different story
and also in her company they could
afford to hire very experienced
developers that could actually deal with
all the complications that Java present
in the context of a busy web server so
back to Audrina Audrina was trying to
start a website while already working
for a startup company phase two serious
limitations as old as money time she
needed time to develop the Kudus
software and money she needed money to
have to buy the hardware or get the
hardware she would run the software on
so let's talk about money first I know
time equals money kind of like a equals
MC squared anyone try turning mass into
energy here it's not trivial similarly
turning time into your personal time
into money is really not trivial so to
start a company you actually need money
before you turn time into money so very
simply put the host the website you need
a hardware you need CPU and memory the
process and some of the web requests and
a database to save your data and the
more efficiently your web server uses
these resources the cheaper it will be
for you well modern-day startup actually
have a great advantage the we can run
our we can run our server in the cloud
so you don't have to buy that Hardware
up front but anyone here tried
registering for Amazon prettier to do
that you have to take out your own
credit card out of your own pocket
is think about it for a second it's
nothing like your infinite corporate
credit so so basically you want our
server to be very cost efficient for us
right so also the other consideration as
our web server grows in popularity
you'll have to be throwing more hardware
at it and we really want to have like
you want to be we want to have choices
we want to be able to play with what's
the most cost efficient what's what's
the best for us and to do that we need
really scalable software we don't we
don't want to wait for our web server to
actually grow before we start up before
we start thinking about it won't
scalability to be baked in in two hours
as a server from day one so basically
like I said that way you could make the
most efficient choice for your software
hardware architecture and another a
great benefit of scalable efficient
software is performance when you talk
about performance actually it's novices
they are premature optimization
discussion always comes up but when it
comes to observer performance I don't
even think it's a worthy discussion like
anyone here enjoys waiting for a web
page to load no nobody I actually my
favorite examples like all these shoes I
haven't bought because the checkout page
took forever to load I actually remember
that hey I don't have room for shoes of
my housing so but if this is not very
it's not very convincing I'm sure that
so if you want some real statistics and
science behind this statement you can
just google this and you'll get a lot of
statistics about how page loading time
effects some how page loading time
effects users of sustainability on your
website that's the right way to say it
so now let's talk about time
not space time and not CPU time Irina's
personal time she needed time to write
her server software not only perfectly
fast efficient robust back on but also
fast and good looking opponent and she
really needed at least on the kudos
website prototype to even get the angel
investors or her programming friends
interested in helping her out so I did I
knew that this kudos business will be
very hard but seriously everything is
hard making a lasagna is hard but one
goes to a grocery store advise this and
this and making the lasagna becomes
reality even a four-state work mom
modern day cooks have a lots and lots of
great abstraction sold to them at the
grocery store buying this you buy time
and knowledge and experience in a jar
but today I don't think the software
abstractions and I'm talking about all
sorts of abstractions of frameworks
high-level languages even design
patterns are as far ahead as cooking
abstractions they exist but the software
jar is so much more likely to explore at
your face besides our software
abstraction sometimes are so hard to
learn and figure out how to use for your
specific case then in the end you think
I would have been it would have been
easier and more beneficial if I just
throw the whole thing in see our cooking
equivalent of from scratch so a lot of
developers get so frustrated was
framework on third-party libraries and
was new arguably better languages that
sometimes they get and they get
themselves into so much trouble using
them that they decide to never use one
again not to us striving for
abstractions is in the nature of all
intelligent progress we can't be
constantly reinventing the same stuff we
have to move on and so the new software
obstructions get created all the time
some very powerful useful and reliable
some are very easy to learn and salad
dressed very specific problem domain
some are born and such favorable
conditions were no better alternative
existed
that they are gained popularity
completely arm completely
disproportional to their actual value
may be due to some sort of a snowball
effect so some obstructions take us two
steps forward some take us one step back
unfortunately survival is not always
determined by the software engineers
very often a high level of managers and
people with power and recruiters
basically people who don't know much
about software make this make this very
important software decisions and they
get this snowball rolling and helping
out mediocre or downright useless
abstractions gain popularity and
software engineers just follow along and
I wish they didn't on the other hand we
can't expect also for professionals to
start themselves out of a principal so
maybe it can help out recruiters out and
when they send us an email something
like but where's the description like
this just think about it for a second
maybe instead of just that's that's the
kind of stuff I get it Oh like I get
spammed this is like very typical of
what I get in the email works spam
emails from recruiters so instead of
sending this straight of the trash can
maybe you should call them back and say
hey you know it's 2015 and it's very
very hard to find total engineers who
are passionate about Java and passionate
about concurrent programming in fact you
shouldn't be able to find too many
developers passionate about concurrent
programming this day and you will see
what I mean in just a second well so
trying to be to stay positive here I'm
really curious what abstractions will be
in about 10 20 years maybe even was
maybe we'll have them so powerful kids
will be able to build our complex
distributed architectures with some cute
visual app on their iphone 26s or
whatever they an imaginable holographic
display gadget they'll be playing was
are actually let's dream bigger maybe
we'll be live in a world with a strong
divided between
for companies and companies that need to
use software to build our business the
former will focus on solving our the
software challenges and the weather will
be creating elegant business solutions
using software tools out of the box
right now you pretty much live in the
universe of Jack's of all trades have
baked software solutions and half baked
this business solutions and if you
disagree with me and you can actually
present me with some examples where it's
actually not true and I'll say sure I
agreed this your example belongs to
maybe the fifteen percent of our
universe that's not that horrible but
the other eighty-five percent are still
there so for me this was just wish like
basically wishful thinking but then very
recently I ran into this really
mind-blowing I'll talk by Peter Alvaro I
see what you mean and he had I don't
know if anyone want to strange group and
he actually doesn't this is not this is
not wishful thinking he actually there
was actually research and real ideas
behind this behind this sort of like a
dream that i had so i was really mind
blown and i strongly recommend that you
are which the his presentation if you
have a couple free half an hour so
anyway so they are software engineers if
we want great future for our industry
let's be picky and choosy and stop
following buzzwords so easily and now
let's look at elena's example again
obviously she was picky and choose it
because she had no choice and still I
think a good example so she didn't
consider job it was the language that
fed her and her family for many years
but when it came to using it in her own
for her own web server thanks but no
thanks even though she knew it pretty
well so as I mentioned earlier we needed
highly scalable paralyzed web server so
what what about Java concurrency package
why not use Java concurrency package
well because it does not protect the
developer from the perils of concurrent
programming if anything it makes
concurrency look deceptively easy and
more appealing but not any less
dangerous so for anyone here who
actually haven't done concurrent
programming in a while or haven't done
it ever at all I strongly recommend you
play with it like you C or C++
definitely try Java concurrency package
and play was it long enough to realize
you don't want to be doing this alone in
the wild human brain is not designed to
operate concurrently so that's why I
experienced programmers who actually
done a lot of concurrent programming
want to avoid it altogether you don't
want tools that will help us do
concurrent programming we just don't
want to do it at all and there are quite
a few programming languages out there
that really take the concurrent
programming are and away from the
developers plate they'll look at a few
of them in just a moment but before we
do let's take a look at some very
important considerations which will help
us make our choice so mutability and
shared states are really big enemy of
concurrency we'll just trust me for on
that for now and I strongly recommend
that you google it later and I'm
actually surprised that the Google
developers didn't do it before declaring
go to be a great concurrency abstraction
a program written in a language that
allows mutable variables will inevitably
end up with a deep down broken
concurrency model and the dangerous part
is this problems might manifest
themselves in a very obscure way and you
may not realize it was your concurrency
model that's broken but that would
really cost you in the end and remember
it's your building our own web server
with our own resources so um you can of
course the one of the arguments that
here is that you can always enforce
immutability in your program and even if
you're using an immutable language well
it's just no matter how hard you try
like one
there you go out drinking on Friday
night and then come back holding and you
end up with you know you order like you
use or maybe use some third-party
library you'll end up with mutable state
the shared state and your program
somewhere if it's not inherently
immutable and even if you do it's still
very very hard work and in case you
haven't gotten the gist of this
presentation yeah it's all about it so
it's something we try to avoid and next
very very important thing to consider is
full tolerance we want our server to be
up and running in all sorts of
circumstances we didn't account for we
can't think about everything upfront and
you don't want to lose money if you
don't either so you want our server up
and up and running despite bugs and
unexpected types of requests so we don't
ever want it to be down and we wanted to
be handling the request we don't lose
clients and money and I in my mind the
biggest enemy of full tolerance is a
monolithic structure of any kind and we
will actually be looking at a very
specific monolithic structure it's
called Java Virtual Machine so JVM has a
monolithic heap that shared between all
the threads and because it because of
that you can't kill a bad threat or any
thread in them running on the JVM it is
not allowed there actually was the
matter to do that and aren't very early
java versions but they realize that it's
a very dangerous mad at it can corrupt
your heap so you just cannot do that and
as a result a bad threat it has a
serious potential of taking your entire
server down basically it was all the
good threads and handling all the good
requests with it another side effect of
it is a monolithic garbage collector so
naturally the end up was monolithic
garbage collector claw
acting them garbage in the monolithic
jvm heap so with this guy around they
can experience long garbage collection
poses during which you'll be losing
thousands of dollars in client and yes
Java a garbage collection can be garbage
collector can be fine tuned to the US so
it's not going to be causing garbage
collection poses but it's again very
hard work you'll have to hire very good
smart experienced engineers to do this
properly and I leave was our little
startup cannot afford so what can I say
unfortunately JDM was not created with
multi-core CPU in mind so he wants our
server to look maybe something like this
small isolated processes with their own
heaps and if one of them goes nuts we
can just kill it and the rest of them
are you know running happily alone so
now let's now that the fun part let's
look at the concurrency abstractions and
see how and choose to choose one good
one among them so there's before we talk
about languages there are actual
concurrency models that were they
actually are pretty pretty surprisingly
old the actor model was joined by carl
healed in 1973 and communication in
communicating sequential processes by 20
horn and invented 1978 so here are some
languages that implement these models so
google language go and there's closure
hands caressing package that implements
CSP and i just discovered java has a
library the CSTO library actually
haven't seen it before think it's pretty
new then we have a Kai and Scala Scala
is an immutable language and alcohol
actually are very much a very similar to
airline but they were done to like play
nicely with Java ecosystem
so let's uh let's take a look at one of
each one of these languages so goal is a
mutable language does it fit our
requirements for web server which we
discussed they want immutable language
and we want we want full tolerance
immutability so goal is immutable
language so go is no go closure it's an
awesome functional language I heard a
lot of great stuff about it but it's a
language for JVM so JVM it just
discussed doesn't work for us java CSP
also obviously JVM acha and scala so us
also jelly i'm also note about Scarlett
it's an immutable language but it's
actually designed to work together with
gel so like here's there like what would
happen the point because you you'll be
integrating it with Java and it has all
this mutable variables so doesn't work
for us airline back in 2011 Irina became
aware of a rare treasure that had actor
model implemented and concurrency
beautifully abstracted away from the
developer its variables 100pc person
mutable and hence 100 set percent set
for concurrency it offers complete
process isolation with each process
holding its own heap enhance ability to
kill a bad process or programmatically
was it came another great abstraction
are open telecom platform offering
common behaviors like server out of the
box the treasure was battle proof in
many a production environment
demonstrating nine lines of uptime and
in some cases years of uptime for arena
it was very good news because it man who
kudos background could be created
without investing into expensive
developer resources and it can be cpu
and ficient and it can be run was
minimal human support because airline
has built and supervisors and they have
the power to kill and restart
misbehaving processes in a fully
programmable way for irina who i have to
mention was a very lazy person and like
to sleep at night
it it was purely priceless powerhouse of
really useful abstractions created by 50
or so and brilliant aleckson employees
in the over the course of five years
perfectly suitable for her busy web
server and just like the stars in the
sky absolutely free and unlike the stars
in the sky readily available for
download one more important bit of
airline awesomeness is that it that it
also contributes to airline food
tolerance its pre-emptive scheduling I
believe it's like actually I think it's
the only language but I might be very
wrong here that actually has it at least
among well-established languages it's
pretty priceless i think especially in
the context of our web server so let's
say if there is an example let's say we
have a nasty infinite loop hidden in our
code somewhere and it we somehow missed
during our normal course of testing
granted we have numerous processes
running in our servers would say they
have one process / web request and they
actually did perform our testing most
likely this infinite loop happens under
very rare circumstances so only very few
requests types will actually end up with
that unfortunate situation if this was
if this happen in Java as soon as we as
soon as as many requests of this type
happen as there are cpu cores our server
degrades extremely fast and goes down if
you're if this is written in our line
what happens is that every every process
that even if it runs in arm an infinite
loop will be preempted after two hundred
two thousand one thousand reduction
actually forgot I don't remember exactly
but well it's actually being placed at
the end of the schedule queue so that
way the infinite loop will not ever eat
our entire cpu core like it would in
most other languages with this scenario
there
definitely plenty of time for developers
to wake up take a look at their
monitoring tools notice that hey some of
the requests are actual not making it
and fix the code and basically gradually
restart all the servers or maybe even
take advantage of airline cut code
swapping so you're basically your server
goes down very very gracefully if at all
actually might your say just think about
it's amazing your airline server can run
with an infinite loop in the code
somewhere provided it's a very obscure
we're kind of situation and it's hard to
get into but with that condition your
airline web server can actually run for
months or for a while without degrading
however to be fair I have to warn you
that airline has its own monolith
they're not as bad and so fundamental
like JDM heap there are ways around them
but you have to be aware of them so they
are two you won't be unpleasantly
surprised so airline monolith number one
is a binary space it's actually a good
thing but it could be a problem for it
could be a bit of a problem if you don't
if you're not aware of it so any binary
is larger than 64 bytes get a located
outside the process hip and only a
pointer to that memory space is kept in
the process but unfortunately the binary
space only gets garbage collected unlike
memory pressure kicks in and that's
about like when it's ninety percent fool
so well and once that happens it's not
going to be like it's not going to get
food sweetie it's going to just
progressively collect and it's a good
thing because you won't have a long GC
pause because of that but what would
actually happen sometime is that it
happens too late and the entire like it
can actually take your entire know down
so there are ways around it like placing
a call to airline garbage collect in a
proper place at the proper time like
when binary memory is a at a certain
size but you have to be aware of that
you have to be aware of that airline has
its monoliths and another one is Adam
table that thing never gets garbage
collected and about million atoms in
size and so you have to be careful not
to create atoms dynamically by calling
like this to Adam or some point that use
this to existing Adam instead but let's
back to the positive things about
airline airline is a functional language
that's great and in case some of use
software engineers out there haven't
noticed our world is slowly but surely
is gravitating towards functional
languages finally well since the time of
self Democritus the scientists and
philosophers have been discovering
smaller and smaller basic particles that
the vast diversity of our world is made
of yet they keep looking for part 2
possibly discover the one and only and
today's quantum physicists are striving
to describe all fundamental forces and
the relationships between them
elementary particles in terms of a
single theoretical framework it's known
as unified field theory so best of luck
to you quantum physicists software
scientist however already discover their
unified field theory a long time ago
functions are our fundamental forces
then here is a brilliant proof I found
it on Twitter and for a while I just
thought it was that Twitter folklore but
then I decided it's not fair maybe I
should find the source and they did it
this is a slide from Scott flashings
wonderful presentation of functional
programming design and we will be
comparing some object oriented pattern
principles to functional programming
patterns and principles so here we go
single responsibility principle
functional equivalent function
open closed principle functions
interface segregation principle
functions factory pattern yes functions
dependency inversion principle functions
also strategy pattern all my functions
again let's cut portions invention and
he actually meant it as a joke but to be
honest with you to me a person who
developed an object-oriented language
for many many years it's no joke it's
actually kind of sad that we are just
kind of coming out of the dark ages even
though functional programming functional
programming was invented a long long
time ago so I really hope we all come
out of the dark ages soon a little
historical historical perspective
functional languages were too slow back
in the days when hardware was only a
fraction of modern hardware power so
imperative languages naturally took over
at that time just because they were
faster but imperative languages
proliferation was really just a bitch
happy early a historical visa so that no
longer hold true so if anyone doubts
that the future of programming is
functional let's look at Java 8 this
very popular object-oriented dude is now
wearing a functional hat with the it's a
latest lambda expressions so I guess it
knows that it's the only way to survive
in the modern jungle so back to airline
so in an to airline and kudos so was a
lying in mind kudos idea started looking
much much more approachable something
like this probably and but if you look
closer to someone who never created an
entire website before it would have to
begin with smaller parts was something
like that and that's him just a little
trickier to edina like I said she was
she just wanted to implement her idea
without putting all
a whole lot of time and resources and so
she realized she needed a powerful web
framework and she needed a lot of common
web functionality out of the box in her
particular situation so kudos would be
possible if she had a powerful language
and a powerful framework so it would
look something like this the she
definitely had resources to build
something like that so off to a search
for a proper web framework back in the
day we had to back in like 2011 if you
ask around about good web framework you
here Ruby on Rails so she heard that
Ruby on Rails would get the web server
up and running in a matter of weeks and
Ruby developers were actually very happy
with it they were they really loved it
was a powerful extendable it had built
in meta programming maintainable very
very pleasant language one caveat it's
very very slow well Irina was expecting
her website to become very popular and
she couldn't tolerate a very small world
she couldn't tolerate a language that
was very slow so eventually when with
Ruby upon your web server gets very
popular you rewrite those slow bits and
like C or Java or C++ or maybe are lying
but the idea of revising the bits of her
web server one when it becomes popular
was just not horrible schedules aren't
quite ridiculous my sellers becoming
popular and now I have to instead of
enjoying it I actually have to rewrite
half of my software well thank you both
thank you but thank you next choice was
PHP that guy was supposedly a little
faster than a ruby on rails and it had a
lot of upfront functionality out of the
box but it so it wasn't slow compared to
ruby on rails but it's from what she
heard it could be a man
nightmare that's probably the most
likely reason why a lot of PHP
developers switch to Ruby on Rails and
are loving it so maintenance nightmare
thanks but no thanks if you expect your
website to fail who cares if it's
maintainable Irina really expected kudos
to succeed why else would she bother was
it to begin with so anyway this kind of
decision making was happening long long
ago back in 2011 it was a very imperfect
world back then and guess what happened
to kudos well kind of nothing trying to
choose trying to choose a perfect
language and web framework combo was
like sleeping with a short blanket when
you cover your head your feet get cold
and when you cover your feet that's
actually I'm quoting a juicer volume on
CSS and I found this quote on Twitter
that's why I find most of my information
well now it is 2015 and we live in a
much better world at just a valium
didn't just come up with this awesome
quote he actually also created elixir
programming language and built on top of
airline a.m. and their language EP it
has beautiful hybrid Ruby like Ruby our
lying like syntax and just appeals to a
number of Ruby and airline developers
and has naturally all the benefits of
airline that we discussed including
complete interoperability was a line
coding libraries and on to the cherry on
top Chris McCord build a fully featured
web framework in elixir it doesn't
sacrifice speed like ruby on rails or
maintainability like PHP and Stan
ultimately standing on the shoulders of
giants they are long via monologue OTP
it offers amazing scalability and full
tolerance for our web server so the name
of the
the name of the framework is Phoenix and
this time around we got it all call it
the best of both worlds or call it a
perfectly sized blanket and this time
around kudos has a chance this concludes
my presentation is let me know if you
have any questions any questions don't
be this many people also also like
criticism and arguments and stuff that
Sue is not the end of the story or his
kudos even did your story earlier early
is kudos succeeding oh no actually it
only has a chance now that I found the
perfect web framework and so we have all
the fun season two yeah barmy look up
with season t does the story continues
possibly though so far I did create some
rust the services was Phoenix and elixir
it was a very pleasant experience</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>