<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lambda Days 2015 - Iurii Petrov - Implementing graph representation model (...) | Coder Coacher - Coaching Coders</title><meta content="Lambda Days 2015 - Iurii Petrov - Implementing graph representation model (...) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lambda Days 2015 - Iurii Petrov - Implementing graph representation model (...)</b></h2><h5 class="post__date">2015-05-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EDY6uEeM494" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and thank you for coming
I didn't expect so many people would
want to listen to me to such probably a
boring pure science and engineering
topic but I care to the to poems because
there is one idea the kind best
presentation and if you could be a race
if you could withstand this presentation
I'll tell me in the end but let's move
to talk just a little bit about myself
I'm a student and master to student from
bombing moscow state technical
university BMS to russian oldest and
leading technical university our
department computer systems and networks
is possible about software and hardware
that means that this dream is very close
to us because you know that electric
change that boss can be represented as
grass so let's move the problem for
example where can we use graphs for
example in science is bioinformatics in
industry I imagine it it's are some more
and also networks because you know that
above discovering in network is a graph
model ok but graphs are different in
bioinformatics values deploying graphs
are in electricity they use Hyper graphs
etc different types of graphs for
different things and also please note
that graph can be directed or non
directed etc ah but when the problem
began are probably in ages because first
not really multiple but probably first
kinds of clusters first kinds of
programming and it's a real problem
because the model of representation it's
basic art really old probably since 1978
I suppose and the basic model you know
is adjacency matrix and you have some
techniques like the gas but it's really
hard to distribute such model and
computer systems have changed
dramatically for 30 years and that's why
I think that current models based on
that model on basic data structure are
not very efficient very inefficient for
now yes in officially an efficient and
effective research village so what's
next a lot of balancing as i mentioned
especially dynamic load balancing is a
big problem because sometimes you have
statical graph if you don't have to
balance it but just think about some
electric scheme or for example about
network you can add some our course you
can add some rotors and probably some
times on one note on one computing note
you have too many nodes I need too many
vertices and you have to rebels but it's
very difficult if you have basic data
structures representing graphs in
heterogeneous systems it's also a big
problem if you use native languages
because you know different CPUs
different operating systems etc
multi-user problem sometimes I want to
read data I don't want to change it and
somebody else but most mortals are
synchronous and I can't run to ticed in
a time and it's really a problem it's an
effective resource usage because for
example I can vertices I meet on load
number one
and our person or node number free but
we have only one interface and unless I
get my information about our editors of
the other person can't get to note 3 so
1 node is working and other nodes are
not a little bit about traditional
models I know that planting drugs
representations models and some of them
are really you based on MapReduce and
Hadoop I am a little bit familiar with
them but I try to explain that they
share a vessel in a basic idea and I
really don't like it so you various
basic data structures I imagine a ver
method says some records sometimes they
are files etc but very basic they can't
do something by themselves it's a
reference to mooch he is active and
passive object that's why I call is
basic data structures yes and they can't
be bottlenecks because as I said they
can't do anything by themselves they're
plenty of entities plenty of vertices
and I have to manually handle with them
that's pretty bad vesa kronos are that's
a problem I also described I want one
operation and I can't do something else
before I got results that's really bad
also sometimes you need a synchronous
operations for example my model is
static no changes and I want few results
for different operations ah I don't
really care where and have a result I
don't care the order of results I just
want them
and I need a synchronous model I can do
synchronous model from SN traumas but
vice versa is not true so possible
solutions because as I said our
computers have changed dramatically and
we have new techniques so virtualization
it's a model trend and our hardware is
really ready for it then you can run
multiple are more than horse model
number of course treads or lightweight
processes in our case for example you
can only have two course but you can
have thousands of protesters and it also
can solve such problems as heterogeneous
representation model representation for
heterogeneous systems I mean in a
synchronous motor I described it already
let's move using collide rate processes
instead of basic data structure I think
it's a this is really a solution for
load balancing because in one case for
example I care two baskets with X and if
I have faced if data structure I get to
say ok i just take this egg race at and
move to another basket but if i have a
tip data structures they can move by
themselves that's ok and our performance
is increasing that's good and here are
key for horizontal scalability because
you know some modern models like you the
based model a ver crisanto stability is
pretty bad are some models like metric
used model hadoo cuales yes they can be
good scalability box not as well so
language I suppose you know already of
course a line why because first of all
lightweight processes it's really easy
to migrate
your creditors to perform load balancing
using a like next it's scalable and I
shouldn't you prove in the end in the
experimental part and as a good side
effect a positive side effort its fault
dollar and its really good for the whole
clusters and for grid computing somewhat
anxious you probably know some of them
first of all it's supervisor it's a
process who is responsible for fault
tolerant of each child processes the
second rotation is Walker process are
they're just simple plain worker
processes nothing else the clean line is
connection between two nodes and if
somebody is a parent of an hour protest
will use such type of line oh and a ver
second type of flame and probably won't
use it it's a connection between
protesters if no one is a parent or
supervisor for another one and it's
connection between between resource and
its owner and the third will use it it's
dotted line it's a connection between
remote nodes between remote vertices
also please note that we will use our
arrows for a direction of message
passing so I've taught already about
this model is hierarchical but if we
have here key we need the root and we
have three levels first of all is global
management level on global magnetic
level you know such thing as a structure
of the group
our how many vertices which vertices you
have but you don't know pits of
processes so you know only general
information you'll see later second is
local management level local management
level it's about computing nodes we have
a different type of nodes are there are
computing nodes are very nodes on which
vertices are allocated and they're
managing nodes are there nodes are with
interfaces with user and workers level
it's our vertices so this is a simple
example it's not full I here you can see
one managing node called master node and
one computing node with two vertices
please note of that vertices can send
messages talk to communicate a part but
don't show arrows from virtus to
communicate because sometimes we are
thousands of them and I think that
thousands of arrows from vertices tour
via communicator is not good so it's an
explosion so master process it's
responsible for everything it's
responsible for fault tolerance of most
required processes I said most but not
all we'll see and it's also interface
for interacting web user it was at least
two ETS and one dead stables a first
date stable is graph because we have to
store somewhere our model so we use
these graph DB usually only for graph
allocation and usually we can we use it
only one type and probably two times to
write some changes in structure the
second one
versus ads and typeset it contains
association between vertices and nodes I
mean computing nodes their vertices are
allocated and knows this is info about
our computing nodes typeset and
countries a cessation vivid notes
symbolic names are visually they are
items and bits of the communicator
because communicator is value of
computing note so communicator as I have
already said it's the root process of
computing know by default by on a by
default III oath only one name at stable
local vertices type of table is set and
we have fallen cons VI d is vertex
unique ID p ID let's process ID on this
node local that's very interesting
column because we have to count for load
balancing how many connections do we
have on this note of and how many
connections we have with our notes
because it's a default condition for
load balancing if virtus hairs are much
more connections with another note sure
it'd have to be great and n minus 1
collins entitled like node em where n is
a total number of nodes m is a name of
an hour note for example if you have
three nodes are in a note number two you
will have columns of course eid eid
local and then node 1 and node tree ave
if number of connections are two base
notes
vertex it's very simple it's a worker
process maybe form this it's okay it's a
simple it's a plane Walker process it
doesn't own any resources but it has its
state which can be described by V ID I
already mention it city it it's PID of
parent communicator list of current asks
contain task ID so i'll tell you about
transaction server and how tasks are
executed in this model but it's just a
list of integers list of connections its
list containing tuples like seaweed for
connection VI ed is the ID of for vertex
are connected by outgoing connections a
PID its ways vertex speed eid its edge
unique ID it's adam and weight of age
last two cones are not necessary and by
default eid is u1 and weight is one so
if you don't want to probably you don't
have a directed graph so never mind
about it it's ok and I can describe this
list of neighbors is the same but for
incoming connections and it's empty of
for all types of graphs except are
directed graph so transaction server
because you know we have to track our
tasks transaction server is a required
process on master node it owns by
different
one its name table tosses record in this
table looks like TI d stands for task ID
operands tasks and status where t ID is
a unique task ID it's an integer or
plants it's a list of communicators
feeds of nodes their options are
allocated but we have one etc is for
cause great or tasks but you can address
to exact vertices not only two nodes
task it's just short description you'll
see as example healing marks weight and
start off by default its list and then
does have just started it's empty but if
one node executed its task in sent a
message to transaction server that ok
here is the result I have performed it
and transactions ever adds this node
name it's symbolic node name to status
and it can be Adam ok than all nodes
completed their task it should be ok
that means that very start in as if you
turd later I'll show you why do we need
it also please note that transaction
transaction server is not necessary for
some operations it's a very flexible
component and please note that most
components in this model can be changed
where logic is extremely flexible and I
will show it well I'll tell you about
support processes but by default some
are kind of tasks are they called direct
tasks we're not recorded on transaction
server alike if you add an edge or if
you want to remove some vertex it won't
be recorded by you can change it if you
need a full changelog
so they they were required processes and
now let's talk support processes that's
why my model is extremely scalable
support master it's just a special type
of support for test for solving
multi-user problem and for reservation
why because it owns copies of master
node stables but only all required so
I'll tell you why on the old required
tables so by default only three tables I
can describe earlier it can do most of
master processes functions but it's not
responsible for for torrents of our
notes also by default because master
process can die and one of support
masters just can't replace it support
transaction server yes because
transaction server is necessary and if
you spoil a support master your Africa
meticulous form as support transaction
server how do it for do it works because
when you spoil and support master there
are two ways you can just spoil it on
different note by yourself or master
node can spell it and be a guarantor
fault tolerance for your support master
and support transaction server is a
reservation for transaction server it
owns the copy of transaction service all
tables and it's a name processes they
are transaction server and support
transaction server are named processes
very useful for you don't need to know
their feeds it's connected to
transaction server directly
and it's automatically created after
creation of support master and
connection between support master and
master is similar to transaction server
and support transaction server because
their tables have to be synchronous
before the new to GSP just a one example
because TSS is a flexible component how
does it work for example I want to
perform some action through support
master i sent i involve some interface
function it sends a message to support
transaction server and then support
transaction server looks at it stable
both tasks and decides which task ID
should i use by default its next then he
asks its master transaction server can I
use this tid am transaction server can
reply oh no it's already r cubed okay
when I try to use another and so on and
so on but logic is flexible you can just
have some range of T of test IDs for
nodes you can change it so the other
group of support notices our service
processes or global support processes
and lot of support processes let's start
from global support protest ah yes jeez
distance for global support service
process any support process created on
global managing level its support
Francis its GSP it can be for example a
process which provides some a vet
command-line interface for sending
comments and also if you want to
visualize your results your OpenGL
server will be also GSP I think it's
clear so the same
LSP its support or a service process on
a local managing clever so they don't
have us any access to global data but
they have access to local data such as
PA DS of vertices that's why gsps are
not enough for our model and we need to
craft LSPs also gps and LSPs together
are a powerful tool for data reduction
and I'll show you this later on an
example yes they're flexible companies
and we have only two restrictions just
please note that your support processes
shouldn't decrease fault tolerance of a
whole system let it crash but don't let
it crash the whole system also please
note that support processes should be
all their places for example when you
spawn websphere light or global
management level it's okay it's normal
but spawning vez a process on local
managing level is not so just an hour
simple demonstration of model but you
can see transaction oh no transaction
server is on its place there are two
nodes and one a remote connection from
vertex number 22 vertex number three I
think it clear so about fault tolerance
this model is good for clustering and I
suppose it's also good for great systems
why I'll show you first of all I cannot
imagine it ah let it crash isolation
okay all vertices on one node can crash
communicator will respond it
communicator can crash must a note will
respond it it's okay second is task
fault tolerance for example you have
night no
and you want to execute some tests are
three nodes have finished their task a
one-note probably let on 16 notes have
failed ok we have message that six nodes
have failed and master process just our
sin transactions ever very symbolic
names and then transaction server will
find their names in it starts stable and
it will just resend them a task and we
will try to execute it again but you
still own results of previous third
nodes it's ok you don't have to restore
to re-execute these tasks for all nodes
just for fallen nose just for failed
nodes and its reservation because a
support master can become a master for
example if must have failed you can just
say on one support nerve master ok now
i'm in hulme our staff and that's ok the
model is the same and tss on this note
will become a most transaction shell i'm
a transaction server about balancing
others as simple algorithm of course
it's just a basic first of all we have a
communicator or LSP which tracks are how
many a remote connections do we care for
each of our vertices that's why we have
our combs entitled like local etc if it
finds that some vertex has more
connections with any other nodes
communicator sense and message to this
node remote communicator receives this
message and it decides can its paws and
Hugh process or it can't
so if it can it sends back a reply that
okay I have sparked a process it's new
PID or you can start migration if
communicator receives approval it passes
the message of relocation to this vertex
to be reallocated next the works the
process enter the state of migration
it's the special state the vertex won't
execute any comments it's just I will
pass it to mailbox of new vertex and it
will send all processes from a list of
neighbors and list of connections it's
you p ad on remote node and
communicative of clinical processes
update their vs. table on this step the
vertex processor sends it stayed VI d
list of tasks a list of connection and a
list of neighbors to win your process
after that then you process registers in
the remote nodes local editor stable and
we have two cents messages top
communicators and to master nodes and of
course the support masters that
allocation of our vertex has changed
let's move and we have initial
allocation task that's what why we need
gravity be we need to allocate our graph
our vertices we have a special type
called our search agent I didn't mention
it because its temporal and it's
flexible first of all master process
creates s a and sams to note its PID and
task of initial allocation their notes
and messages to sa to get a portion so
Sun bunch of vertices to Alec
and they say a tries to find this
portion of vertices and it tries to find
our vertices which have minimum
connections with other nodes for example
if node one asked for a portion support
agents will try to find as many nodes
connected to node 1 as it can but no to
note free know to not fight etc so some
performance tests I can field two nodes
first of all was its desktop computer
with cpu intel kodwa conclude co 2 quad
at 267 hit again did here to a GBS of
ram and Widow self home extended and an
hour a note was the laptop computer
respond so it's not interesting let's
move first example you can see some
model of electric chain and i wanted to
find a max weight of some edge i want to
know which edge is the heaviest so what
should i do for it first of all I should
create a GSP for data reduction then
I'll pass a it speed to all
communicators and I pass van task of max
weight all communicators will spawn LSPs
save for data reduction and sell its PID
and task to all vertices virtus try to
find a the heaviest edge in its list of
connections and list of neighbors Alice
of connections only and then pass it to
LS
LSP knows how many vertices do we have
and it will wait while all vertices will
send a ver max waves okay and the same
story for GSP it will wait when every
node will send results LSP reduces a
data on local level with we need to find
first of all our local maximum and GSP
van finds a global maximum and pass it
pass it to master and we got the result
let's have a look I have few tests as i
said the crevice LG is unoptimized why
because for example we can pass a
message directly to GSP first of all and
also you can see there is a bottleneck
because I push by default only one
vertex unknown but I can push more than
one because I as you can see what
vertices 1 and 6 are really bottlenecks
so optimized algorithm fixed base small
legs and another implementation is
unoptimized algorithm on a lark our 17.3
so you can see that model is scalable
it's only for one node experiment but
growth is slower than linear we'll see
here we go you can see for example when
are 15 vertices and a five-county
protesters not hmm let's say it's all
convenient that's all also I
here some experiments with remote notes
but then they're both to local notes we
have similar results for example look at
500 notes on two local air 15 bo3 notes
the similar time and if we use Wi-Fi
connection we can elect the cave latency
let's move to the next this is really an
important example it's inspired one of
my mates from Uppsala University and
this is a real example of searching
debris of searching a path endeavoring
graph it's a task from bioinformatics
this is about genome assembly for
example I want to find a chain from gene
a to gene be a ver whom some
restrictions are used only our binary
alphabet and no more when box 1024
vertices about such genome it's
applicable for some simple and also some
simple plants so it's okay it could be a
real performance you can see every time
of searching path it's also slower than
linear probably will see average time of
protesting vectors that's why model is
scalable you can see it's constant it
doesn't matter how many vertices you
will have no overhead for scalability Oh
usually we care very little but it
doesn't matter it's very little it's
very tiny if you see it's look like
constant because it's in microseconds
and average time of searching one vertex
in part it's very complicated parameter
because it's
looks like average time of searching
path divided by average time of
processing vertices so before it's
completed I like say a little after what
I promised you a little secret so I care
one idea about I really like functional
community guys I can see that you are
open minded way that you are brilliant
and you're curious because you know
functional programming is not a
mainstream so you're trying to discover
something you and it's good big furious
I was curious and I looked through many
books and I saw that synchronous model
and I said no guys it's wrong it's awful
and you saw experiments and I see that
my model at least this time it's better
and I just was curious and it that's why
it was possible to invent to design
something you so big heroes ask
questions and if you don't trust some
science problems find a way and check it
so feel free to ask questions and send
your feedbacks probably not now but I
will be very happy to have your
feedbacks your questions your ideas etc
so my mail and my Twitter you can see it
so thank you
okay so selfish so I don't figure your
craft searches were constant time and I
know that's a case if you're searching
for a path that contains a to c and b it
along with that oh you mean a which
human of that constant of the red wine
yes so if you're doing searches that are
more crappy analytics where you have to
say give me all the people who have blue
eyes who who have watched this movie and
reading it highly graph analytics
overall graph processing take stuff is
its do you still have the ski even as
distributed yes it it groups back it's
scalable why because this red line is
its average time of searching part of
executive desk / x number of vertices so
for example i can divide it it's just an
example we're not exactly so i can
execute this task on 30 or nodes on 30
vertices for 10 seconds and i can
execute it on 304 102nd and yes it's
linear scalable it's constant for one
vertex that's the idea that's why i
wanted to show it to you so no other hat
for grow did I answer your question okay
the KP okay some more questions
okay so let's thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>