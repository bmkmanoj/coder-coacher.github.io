<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lambda Days 2015 - Kuba Waliński -  Fun with Functional JavaScript | Coder Coacher - Coaching Coders</title><meta content="Lambda Days 2015 - Kuba Waliński -  Fun with Functional JavaScript - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Lambda Days 2015 - Kuba Waliński -  Fun with Functional JavaScript</b></h2><h5 class="post__date">2015-05-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WY3q6Np7PwM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so fun with functional JavaScript but
first a bit about me my name is kuba and
I am a developer which is out of this
conference I realize but please don't
kill me yet because you shouldn't give
me because I'm intrigued by a sharp and
actually buy the whole functional
programming movement that the developing
quite quite fast lately and I'm also a
Java skippin to the other tents in this
dogs functional programming in
JavaScript merge together I'm also quite
the conference junkie lightly on a bit
of the streak so I've been to a few and
i really like this so I'm really happy
that I can be here and talk to you today
and really happy also to be able to take
part in that in the conference because
I'm expecting to learn a lot from the
other speakers so far so far it's been
great here and we're still not even
halfway through the conference so so I
think it's going to be even better I'm
working at a DB route sanda in the very
center of our of useful country and if
you want to contact me later on you can
find me on Twitter let's go Baba in ski
you can email me and you can also get a
look at my blog if you want to eat
something more so the topic for today
fun with functional JavaScript can you
give me at the back am I love enough
yeah more or less can I trial under so
I'm the functional JavaScript look at
these two the kick-out
seriously guys no more slapping I've
been slapped a few times it's not time
it's not nice just first hear me out I
will I will lay my case you can judge
and if you cannot convince that
javascript is going to tiny bit
functional then you can slap me but
that's on the end of the talk okay and
in general a short introduction to this
this actual dog show it was the initial
concept was to introduce functional
programming to JavaScript developers but
here we obviously working the other way
around so we have functional programmers
who probably are not that much interest
in JavaScript maybe I'm mistaken who's
using javascript here okay so it's like
more than half but for those who are not
so I'm trying to shift the emphasis of
this talk a bit we have functional
programmers in mind and try to convince
them that JavaScript I'm not that bad so
that's why I'm gonna I'm gonna go quite
fast for this life because I think you
should you should know all those all
those ideas and functional programming
function respect our citizens pure
functions mutability why you Carson is
important those are just a few items
from the functional programming paradigm
that I want to highlight because i will
now contrast them with javascript and i
will explain how those ideas are
interested in javascript and how you can
make use of that so javascript is a bit
functional because it has first-class
functions so you can you can have a
function that is returning other
function you can
function is a parameter and store it in
a variable it's a FERPA first class
citizen in the language functions can
also have closures so they can remember
the state of the environment and use it
later on even after they after they have
returned and you can also use anonymous
functions or lambdas and that's where
the happy part for the ends of
JavaScript then you have a bit of a time
because if you want to have pure
functions and immutability like you
would expect in a functional programming
language then you have to take care of
it yourself because the language will
not help you does what you see by
default although all the variables of
mutable and the functions are not there
is no any specific safeguards to ensure
that your functions are pure and also
when when it comes to table table
optimization if you want to do some
reduction there is not supported at all
and the language and not much you can do
any about this but the good news is that
the support is coming and ugly I'll be
talking more about this towards the end
of the presentation okay so that's
that's a brief introduction and now it's
time to see some code so we'll start
obviously with hello world and so in
this case it's a bit twisted bit of a
twisted hello world so I call it works
hello because I wanted to demonstrate
some of the functional properties of
JavaScript so I just defined a function
that is concatenated into strings I
could have done is simply like this can
you see the code at the back is it ok ok
just give me a second increase
sighs that's better or any more excuse
me can you turn out the lights turn off
lights can we I don't know okay and
size-wise i assume is ok not protest so
it is hard to see we leave the
reservation about its eyes i need to use
that i renounce
hello hello Oh turn it off and on again
apparently okay how does that look like
guys vigor okay one last one last
increase yeah i know i know i just i can
zoom in but that BB okay so decrease the
font size a little bit and then i'll be
zooming good good okay sorry about that
so you could concatenate two strings
like a normal person with just the plus
operator or you could use a joint
function on an array if you're cool and
functional so that's what I'm gonna do
and then also you can pass the arguments
to a function in the order that you want
them like here first the function and
then a and then be but you can also flip
them because you're cool so you can just
take a function and two arguments and
pass those arguments in reverse order
and that's how you create a Hello lambda
base function well by composing those
two those little functions that I
created okay
and prove that it's working as you can
see hello lambda days so hello so now to
the to the main premise of this of this
demo I've created a little function that
is pretty simple and ideally you should
we should be able to tell what it's
doing instantly but my experience shows
that that rarely happens because that's
just a for loop some variables that are
created in place then an if statement
you have to really figure out what's
going on and what actually happens here
is we take an array and we just make
sure that all of the elements in this
array are either 0 or negative so so a
pretty simple task and the
implementation I think should be also a
bit simpler than this and we can
obviously do make it make it much
simpler if we use some functional
programming tricks so i'm importing this
function do something because i'll be
using it to compare if my result is the
same with this with this initial
implementation but on now i'll try to
implement the exact same functionality
with with with some functional
programming magic so first i need
obviously i need the function map
they'll just go through an array and
apply a function to each element of the
of the array and there is a function map
in JavaScript but it's attached to to
the RI and so I somehow I had to make it
more generic so I'm just creating the
function map for for my own use which is
taking an array and a function that is
supposed to be applied to each element
and then it's just calling map on this
array with this function that was passed
so pretty simple stuff and and then hmm
yeah so one more thing about map so this
the order of arguments obviously is
pretty important
because my ambitious goal is to have
this function we be able to implement
this function does something in one line
so the order of arguments will be
important because I would need to use
currying so I would like to you know
pass arguments one at a time to
dysfunction that I could to this map
function so that's why this is the
default order that I passed the RFS to
the mob and then I pass the function but
that might not might not work for me
because I first would like to pass a
function and then have the have demamp
function ready to accept an erect so
that's why I need a flip a flip function
that will just take function it will
take two parameters a and B and it will
call the function that was initially
passed with the same parameters but in a
reverse order so by combining those two
functions i will have a map function
that first will accept the function that
will run on all the elements of the
array and then it will wait to receive
the actual array that will operate on
and take here are some examples how the
flip function will will actually work so
as you expect and I think nothing really
that interesting here and then as i
mentioned i will need a curry function
to partially apply the the map function
and so the curry function also quite
simple takes a function then takes the
first argument then takes the second
argument and one once all those elements
are passed we run the function angel
function with with those two arguments
and again examples pretty are pretty
easy I hope pretty easy to follow so i
won't i guess you can read all of you
can read so i think it's easy to graph
unless it's not so please ask your
questions if you have any during the
talk
so yeah so with that we've got the
building blocks ready almost all of them
so we have a map function we are able to
flip the orders order of arguments in
the map function we have the curry
function which will allow us to
partially apply the map function now we
need some mathematical functions that
will actually do the negation of of our
elements so we've gotten a gate function
that will just return minus 1 times the
argument and we've got the absolute
value because obviously if you want to
make sure that it's in it's a negative
number at the end we first do absolute
value and then negate it and finally one
last trick that we need is to be able to
compose functions so I created a simple
compose function that takes two
functions F and G and it done waits for
the argument and when the argument is
passed it returns the result of invoking
the function G and then invoking the
function f on the result so it's pretty
clear also i really like the bug that
it's it's a really nice like
mathematical notation notation of the
type that we're all familiar from from
primary school and secondary school so
it's all pretty easy to follow I guess
or at least that's what I hope I don't
see any questions yet so I assume that
you follow some again some examples how
you can use the compose function and
finally we've got all those building
blocks and now this is how I how I
suggest that we could implement
implement this function that negates
they were not not renegades but make
sure that the resulting our area is all
negative or or zero so what we have as I
told you we have a map function because
that's the by obviously the basis
because we want to do some operation on
each element of the array but it's not
the order of arguments is not correct
for us so we've the flip on the map so
we can first pass the function
okay so now after flipping the map
function first is taking the function
that will be executed on all the
elements then we use the curry so the
map function will take the function
argument first and actually the action
the function argument is a composed
composed function which first does
absolute value and the negation so
basically we have a function that it has
a map function built in already knows
which function its supposed to execute
on the on on each element of the array
and is waiting for to be passed the
actual array to operate on so this is
the test data that will be using as you
see some numbers are negative so they
shouldn't be changed some are positive
so that they should end up negative and
the result so I'll first log out the
actual test data and then I'll lock the
result of running the initial function
that you saw that was an imperative
style and then I'm going to lock what I
just created here the function that I've
just created here and the result of
running it so and as you can see the
results are the same so
oh that's interesting didn't see that
before okay but mine is zero is still
zero right that that's because yeah
that's because JavaScript it's probably
got confused when which operators to use
okay what I will be interesting to
investigate next time okay so this is
more or less how you could how you could
use functional programming style in
JavaScript if you just use plain vanilla
JavaScript it involves a lot of tedious
work creating those those tiny functions
and flipping arguments and doing a lot
of a lot of repetitive tasks and at
least until to the point where where
you've already got your full library of
tiny functions that you can reuse and
compose them etc etc but if you don't if
you're just starting from scratch a
better idea might be to use to use a
library that provides useful functions
that will be helpful in one of one such
libraries is called lodash it's actually
a part of pretty popular underscore.js
library and the name underscore comes
from the fact that you invoke it by
using the underscore and then dot and
the function that you want to use from
the library and it provides a lot a lot
lots of those of those useful functions
that you can use to manipulate Ras
collections functions and objects and in
the context of the tasks that I the task
that I want to achieve here it's pretty
useful because it supports curry and
partial application so it will be a bit
it should be a bit easier to to code how
to dysfunction that I want to imitate a
bit easier than in in plain vanilla
JavaScript so this is the code
I load the load ash library I love to do
something function obviously I still
gonna need the negate an absolute value
functions because the Czar did this is
deal that they are related to the actual
logic of my application I have to
provide them myself but I don't need to
create a curry function because it's
already already in lodash I also don't
need compose unfortunately I don't have
a flip function so I wouldn't be able to
control the order of argument and when I
want to curry that's why I'm not going
to curry because I have a partial write
function which in this case will do
exactly the same because it will
partially apply the arguments to my map
function from the right so in the
opposite direction so it will do for me
it will do the same as a combination of
Korean flip did in the previous example
so a negating goal in lodash a bit
simpler as you can see because I'm
partially a trying from the right to the
function map I'm passing a composition
of negate an absolute value so that
should look already pretty familiar but
I guess guess what are we that the the
syntax is a bit nicer and easier to
follow but I think we can do even better
but you'll see it into in the next in
the next attempt but for now let's see
this actually works
they minus zero again obviously but
apart from that it seems to be okay so
that'sthat's lodash for you and this
more elegant and more concise way that I
was mentioning the would be achieved
using the using the functional Jas
library functional Jas is actually a
funny story because how i got to know
this library because it's not one of the
most popular ones but i really like the
features that it has so I i I've grown
to like it and so I was as i told you at
the beginning i was interested in
functional programming and then came the
time when i've got really deep into
javascript and one day an idea popped in
my head would it be awesome if there was
a functional programming library for
javascript so i obviously I didn't look
if there is already one because it would
not be exciting we exciting to create
one so I wanted to create one but first
you need a domain name obviously so dr.
GIS is not really an extension that you
can use so I figured out mmm the best
idea probably would be functional JS com
so I'm gonna have a look if it's if it's
available so I typed functional jfcom
and i found this library so i was a bit
bummed because not only did they use my
denied domain name but they already
created the library that I wanted to
create but I had a look at the tutorial
or they know where the outdoor shows all
the features of this library and it
turned out that it's a really nice
library and maybe it's better to just
because it was open source so I figured
out figured out that it's better to
contribute to what we Crossley's been
doing them to start something on my own
so yeah so functional Jas Lee Crossley a
he's constantly developing and using it
on his own projects skirt it's got a
bunch of downloads every day from NPM
and for the purpose of this talk what's
interesting is that carrying in this in
this library is implemented by default
so each function that that you use you
can by default either pass or parameter
so pass them at once or pass the two
first and then another one and then
another one which will be very useful as
you can see in a moment and also what
I've been struggling with is the
parameter order if you've seen I had to
either use partial right to apply them
from the right so in the opposite order
or I had to use the flip function to to
invert the order of parameters and in
functional Jess the map the map function
has the correct order that you want to
use if you're going to partially apply
so the map function first it's the
function and then the array that you
operate on so it's also just a little
thing but it's really really helpful and
you can see that it was well well
thought out so coming back to the code
making sure that you can see I'm again
importing all the stuff that I need I'm
defining my helper functions no probably
is but just for completeness just so
that we can get minus zero to be concise
so I will use this so as I mentioned
we've got a we've got the curry function
that's that's available in functional
Jas and we can have a simple function
that performs addition and we can pass
it to the curry and then the curried
function can obviously accept the
parameters one by one it can even accept
once you carry it it can accept more
parameters that you initially defined so
it's also a pretty nifty feature it's
called already the number of parameters
that you accept and in this case you can
arbitrarily extend the era tissot to
this carry that function I can now ask
10 /
or a thousand and it will it will figure
it out and it will add a lot so that's
pretty cool but as I said the map
function is carried by default so I
don't even need to use the curry
function and I don't need flip because
the order of parameters is exactly how I
need them so the only thing additional
thing that I need is a compose function
just to make sure that I can compose the
absolute and negation so on once I have
all this I just compose the function
that I want to apply to each other man
by composing mega a absolute value and
negation and then just pass it to the
map function and the map function accept
it accept this function discompose
function as the one that is supposed to
be run and then waits for waits to be
passed an array and that's exactly what
I'm doing here again displaying the test
data and then displaying both results
and let's have a look yeah so yeah it's
all pretty correct right ok so that's
that's functional jas yeah it's a
feature come on is JavaScript don't be
so hard on yeah so that's that those are
the two libraries that i really
recommend if you if you need to do
javascript and if you don't really like
it and you would like to make it a bit
more functional so i think that they are
pretty perfect for this task but also
the good news is that the ACMA script
committee so the standards body that
works on the on JavaScript and adds new
features to the language they are also
quite keen to extend the language and
some of the extensions and additions
that are coming in a coma script six are
currently functional in nature like
arrow functions so this is just a
simpler way to define lambdas so
functions that you can define in place
and you finally also have title co op
recursion optimization so the see you
won't reach you won't run into stack
overflows if you if you have too deep
recursion of course if you have tail
cause if the recursion is implemented
correctly and there are also those three
other features that are not maybe not
that functional in nature but they are
pretty cool and simplify functional
programming in JavaScript so I also
wanted to show them to you so now a
little disclaimer for for this to work
obviously acma script 6 is not yet
implemented in browsers or in nodejs did
I music to run the examples so so I'm
using what's called a transpiler that
allows me to write code the necklace
akma script cigs and then it transpires
it to acma script 5 that can be run by
note but it's basically equivalent to
what we will get in browsers once the
standard is approved but it's supposed
to be approved somewhere in the middle
of this year so it's a good it's a good
tool to show what's coming and it's it's
it's pretty accurate because the
standard is already finalized but first
I mentioned recursion and this cannot be
done achieved by translation because
it's a really low level feature of the
JavaScript engine so we have to look for
some workarounds and we can use one
really nice one that I really enjoy
which is called the trampoline and the
trampoline it's a way to deal with
recursion by delaying when the function
is executed so usually if we have a
factorial function obviously when you
present when you present recursion here
instead of returning a function that
calls it's that that performs the
recursive call instead
instead of calling I just returned a
function so then it's my responsibility
if I want to if i want to calculate the
factorial of 3 obviously to pass warm as
the initial value for the accumulator
because then it will be to be multiplied
correctly but then if i want to
calculate the result i have to execute
the function two times because first the
argument is free then the argument is
too and then the arguments finally is
one and will return so this is not
really useful because the number of of
parentheses pairs her here are dependent
on the argument so it's not a really
useful function but there is a
workaround and this is actually the the
trampoline so the trampoline will take
any function and while it's still
returns a function will call it and we
call it again because it's still a
function and again and once it's not a
function at will return once it's final
return the value so I can so there so it
can be arbitrarily complicated the cold
chain but trampling will rock this out
for you and will provide a value at the
apt and we can use this trampoline value
likewise by calling the jumping
factorial with the with the parameter
and it shall all work out and that's
actually see if it does
yeah so you see the first the first call
was this or is it the first call
console.log goes here so it was the
factorial of 3 and I had to execute the
function two times to get the result and
then when i use trampoline I just past
four and I don't care about the function
execution because the trampoline does
that for me and then I get 24 obviously
some more more of those features that I
mentioned so this is those are our own
actions that you can just define in
place that's where is the function that
takes an X and returns x times X so it's
obviously you don't have to do you don't
have to do this so we don't have to do a
function and and then open the body of
the function and and say explicitly what
is returned so it's just a just a little
syntactic sugar but it's going to be
very useful when you program
functionally and then also a useful
feature you can decompose or the
structure arrays and objects so you can
just define variables and the define in
place that the first second and third
argument should be put into those
variables and you can do actually the
same with objects and the missing
element here is going to be undefined
let's actually see that
okay our functions that's not that sorry
yeah so as you can see it's one two
three and one two three undefined
because it correctly decompose door de
structured the the array and the object
and finally a particular dition to the
language as well you have a function
that except some parameters is a sort of
the list just the list list of
parameters that it accepts but you have
those parameters in ra so previously
while concurrently neck maastricht five
you have a way to do this but it's a bit
tedious and people sometimes find it
hard to do and the result of questions
on stack overflow how this works but now
you just use the triple dots here and
the arai is automatically spread and you
can just call the function so also a bit
of syntactic sugar that will make make
our lives much easier and for the final
bit of demo trying to put it all
together and showing one more feature so
the premises that we have a we want me
to write a function that accepts a
variable number of parameters and the
first parameter is the tack that is
going to log and then there are the
messages and each measured message be
logged with the tag that's been passed
in first so a neck must fight if you
want to achieve this we can use we can
pass the tag as the the explicit
parameter but then to get all the other
ones we need to use the arguments object
which holds all the all the arguments
that were passed to the function but we
pass in one at the end to skip the first
one because we already have it and then
for each for each lock that that we have
we we just log it to the console so then
is pretty straightforward and
a neck musket six we can again use the
use the triple dots here so we don't
need to look at the arguments already
like a bath we got to do but in this
case the first argument will be called
stack and all the other arguments that
are passed will be will be pushed into
an array that's called locks thanks to
those to those triple dots and then the
code is the same but finally as you've
seen arrow functions we can also do it
like this do it even shorter so it's
actually a double arrow function
notation so first the lock taxol short
those are the arguments and it returns a
for each and the for each actually has a
function that takes log as an argument
and returns something to the console and
that's it so I don't know if you'd agree
i hope you will but pretty pretty nice
features and and they will they will
make the code simpler and and easier and
nicer to write so that was hopefully at
least for me it was quite fun doing this
functional javascript talk and showing
you the code those are the resources so
in the shortened bit ly you've got a
link to you've got a link to the old
stock the cold and the slides that I put
on github if you're interested and don't
have anything to note it down I also
tweeted after this talk so you can find
it there and you have links to do all
the those libraries that I've shown
lodash and functional Jas and you've got
links to two very interesting books on
the topic one bank by micro focus and
another by rag involved and also the
video from NBC where rock n roll
presented the ideas from his book so in
conclusion
as I as I stated in the title and
repeated throughout the dog to my mind
it's pretty fun to do functional
programming in JavaScript mostly I think
because you wouldn't expect that you
could do this if you don't know
JavaScript that well but turns out it
was it was based on some on some pretty
interesting functional programming
concepts and it shows and you can you
can take advantage of that so it's a
really a new way to look at the language
when you approach it from this from this
side and it's also rapidly developing
because it has new frameworks new
libraries they make see make use of
those features new language features
that come up and then there are more
functional programming features waiting
for okuma script 7 as well so summing up
if you're a functional programmer and
you need to do something in JavaScript
just give it a chance obviously it's
never going to be as good as a strictly
strictly functional programming language
but hopefully for some of the tasks that
that you need to do it will be good
enough so so that's it that was
functional JavaScript so now if anyone
still needs to slap me I'll be available
after the talk and if you have any
questions now is also we have some a few
minutes to discuss this yes I tried I
did some experiments of closure script
but not not enough ready to weigh in I
also i participate in this dog that was
here before I heard of those quite
interesting so for now I'm really i
really like javascript so i prefer to
write in it but yeah but obviously if
you're already familiar with closure or
roofs color and there is an option to
compile to JavaScript it's probably also
a good idea if you need to do something
in JavaScript and let's face it
javascript is becoming more and more
popular so it's more and more likely
that that you will need to do something
with JavaScript some at some point
yeah less likely because you can compile
but then if the compilation is not up to
scratch or something then you have a bug
that you cannot really resolve because
you don't know what's going on just some
magic happens it's compiled you get some
JavaScript that you don't understand and
you cannot debug it so that's why for
those reasons I I for now I'm sticking
to to plain JavaScript does that answer
your question I hope okay any any more
questions
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>