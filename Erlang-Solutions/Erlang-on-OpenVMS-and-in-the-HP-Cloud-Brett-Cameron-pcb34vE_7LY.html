<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Erlang on OpenVMS and in the HP Cloud (...): Brett Cameron | Coder Coacher - Coaching Coders</title><meta content="Erlang on OpenVMS and in the HP Cloud (...): Brett Cameron - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Erlang on OpenVMS and in the HP Cloud (...): Brett Cameron</b></h2><h5 class="post__date">2012-06-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pcb34vE_7LY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so a wonderfully small audience
that's good I'll try and keep it
reasonably reasonably brief I do tend to
go off on tangents so if I start
straying too much i'm sure i'll be
pulled back into line I'm between you
guys and a drink and I want one as well
so I probably won't mess around title of
this talk as I've said here Erlang on
openvms and in the HP Cloud it's kind of
a brief overview of what HP is is
wittingly and to some degree unwittingly
doing with Erlang so first up we're
going to do a whistle-stop tour really
if some work I've been doing deport the
early and vm and OTP and so forth to the
HP openvms operating system it's a
totally alien operating system really as
far as Erlang was previously concerned
talk about how we got that going and
then we'll have a little bit of a look
about how we're using Erlang as I say
somewhat unwittingly within the HP
public cloud which has yet to be
launched but we'll come to that bit of
an abstract hear about what we're going
to discuss I mean I've already mentioned
all of that sort of nonsense probably
you know there's some background here
really i started using computers really
a university back in 1997 1987 the first
computer i used was a neat was back in
those days digital equipment corporation
openvms vax system so i have fond
memories of using vax in the openvms
operating system and over the years I've
made something of a habit of porting any
random piece of open source software i
can find to that operating system almost
as a bit of a hobby some background
about me mostly boring rubbish I've been
doing this sort of thing for well
actually about 20 years now I live down
the bottom of the world in Christchurch
New Zealand hence the strange accent
probably the most important but there is
the stuff down the bottom that in my
spare time I enjoy listening to music
playing the guitar and drinking beer
preferably cheap Australian lager so I'm
hopeful that I'll find some of that
later this evening otherwise I'll have
to settle some of that American rubbish
my introduction to Erlang so first up
remember this face you know if you have
a bump into this man trouble this is my
good friend Chris Brown and my
introduction to LA
really had sort of started a couple of
weeks prior to Chris and I being on a
consulting adventure i call it an
adventure because whenever you go
anywhere with chris there's always
something strange happens and on this
particular situation we got a good slice
of American culture where we bumped into
drug dealers on a train after dark going
between sacramento and folsom on that
same train we also bumped into a pimp
who was trying to ply us with his weird
so to speak we got absolutely hammered
at a nice little bar called Scarlett's
bar in Old Town Folsom bad things happen
when you go out with Chris but anyway at
that time Chris was the director of
openvms strategy for HP for the HP
openvms operating system and I was
talking to him as we were finishing up
that trip in San Francisco British
Airways lounge and I was telling him
about Erlang and things like that and he
thought this sounded pretty cool and he
basically challenged me to get it
working on openvms so it's all his fault
really that I'm here today I guess chris
has since left HP and runs his own
consulting business and and runs a
successful little cafe in Newcastle if
you're ever up that way pop in and say
hello objectives of the talk as I've
said to just talk you through the work
I've done deport Erlang to the openvms
operating system I use the word legacy
there a lot of people don't like the
word legacy well HP people don't like
the word legacy in front of openvms it
hasn't been around quite as long as UNIX
it was the first version came out around
1997 so it has been around for a while
just going to talk you through the
process of porting Erling to a foreign
operating system environment some of the
results obtained and then as I say we'll
talk about the cloud stuff feel free to
ask any questions along the way so
before we can really talk about porting
Erlang to open VMS we sort of have to
talk a little bit about what this this
weird wonderful operating system is as I
say first version of openvms came out in
1997 a few years after the first version
of versions of unix i started work for
digital equipment corporation on febri
the 12th 1992 I'd finished my PhD and I
had no money I needed a job i took a
contract for three months and I've been
there ever since
since that time deck was purchased by
compaq in 1988 I felt a little bit upset
about that you know Digital Equipment
Corporation being purchased by PC
manufacturer but there you go compaq was
subsequently purchased by HP when was
that 2002 and all that time the HP the
openvms operating system has persevered
and new versions have come out and so on
and so forth it's also moved across a
number of architectures in the old
digital days it was on vax and alpha and
and now it runs on the intel attain IAM
64-bit processor as i mentioned before
it's a totally onion exciting system
from a user perspective there have been
some efforts over the years to sort of
create shells and so forth to make it
look a little bit unix-like but they've
never really come to too much and
they're not really all that good in my
opinion as a consequence of this it can
be quite challenging at times to port
open source code to open VMS okay it is
very widely used operating system
strangely strangely so i suppose you
know i'm not sure how many of you here
have heard of the operating system but
there's something like 300,000 odd
systems out there supporting millions of
users across a whole raft of different
industries one that's kind of close to
my heart work I've been doing in recent
years is it's heavily used with in
philly high in financial services
organizations shanghai stock exchange
for example runs on openvms deutsche
bank in terms of all their foreign
currency exchange runs on VMS i could
could list many many more sites in fact
probably the vast majority of large
large stock exchanges around the world
still use the HP openvms operating
system
one thing that I should have mentioned
there as far as doing development and so
forth on openvms you've got you've got
most of the stuff you need in fact it's
very rich in terms of system calls and
and useful library functions things like
that supports most compilers of various
assorted languages 3gl compiler see
basic Pascal Fortran COBOL etc runs java
quite happily all sorts of good stuff
like that so you've got pretty much all
the tools you need really to port open
source software to the platform but
there are some fairly significant
differences that we'll talk about soon
that that need to be addressed one way
or the other my motivations for this
work now I've got two slides on this one
of them is me with my HP corporate hat
on where I say things like I wanted to
porter link to open VMS to make
available to our customers this exciting
product and all sorts of stuff like this
but if you think about it there are a
couple of sort of logical reasons for
wanting to run it something like you're
lying on openvms they're actually a lot
of parallels openvms is known for its
scalability performance incredible
levels of fault tolerance it's a highly
fault tolerant highly available
operating system they're actually quite
a few parallels that sort of make the
combination of early and open VMS a good
well if i actually however sort of
looking it from a personal perspective
the reality is that i wanted to get an
implementation of amqp the advanced
message queuing protocol working on
openvms because there are opportunities
for me personally if i do that to
actually get some cool consulting
assignments and interesting places
around the world reason being that a lot
of our financial services customers who
use technologies like mq series and and
other such older message queuing
technologies are looking at moving
towards amqp as their preferred
messaging message queuing implementation
so I was therefore very keen to get an
advanced message queuing protocol
implementation up and running on openvms
we could then talk to our financial
services customers about replacing their
older or proprietary message queuing
software with some open source and QP
implementation I initially started off
here with a little piece of software
well snot
a little actually called open amq which
is it was actually the very first amqp
implementation written by a company
called o mattox who based in Belgium but
for various reasons which I won't go
into maybe later on over a beer if
anyone's interested I Maddox had pulled
out of the amqp working group and no
longer support that software which is a
bit of a shame it was a nice piece of
work they're focusing their attention
really on zeromq which is a slightly
different messaging technology
subsequent to that I discovered rabbitmq
which is written in Erlang this is an
open-source amqp implementation that i
discovered written in some funny
language called Erlang so getting back
to slide number five when i was talking
about my friend chris brown and i was
telling them all about this basically
with chris is sort of giving me a deer I
bet you can't get early and working on
openvms plus the fact that this stuff
look pretty cool and interesting and had
quite a nice name I thought well let's
give it a go so the challenge had been
set what I'm going to go through now is
the basic approach that I take deporting
the sort of software I mean as I say as
far as as far as open source code goes I
mean openvms is is it's different to
just about any other operating system I
can think of in fact it is different to
any other operating system I can think
of in terms of command line interface
just the way the whole operating system
works is very very different so you can
face quite a number of challenges when
you're reporting open source c code or
whatever to the operating to open VMS
even from things like build tools
differences in c runtime library is
quite often a big one things like that
the way the file system works is very
very different from unix so they're all
these sorts of things that need to be
taken into consideration if you look at
something like Erlang beam you're
dealing with something like four hundred
thousand lines a pretty complex code so
trying to get this volume of code ported
across to open VMS you know is not it's
not an afternoon hack over a few ales
it's it's it's a fairly odd to us
exercise so i was trying to think well
how am I going to approach this I'm not
going to be beaten chris has dared me to
do this I'll sort it out so I tried to
devise a pro and an approach to doing it
use that approach that are commonly
use which I'll talk about in a minute
but generally when you undertake these
sorts of exercises there are a few
things that you need apart from the sort
of knowledge that I've indicated there
around knowledge of the operating
systems like openvms and unix
differences between C runtime libraries
and so on and so forth patience is
useful something I sadly lack alcohol is
incredibly helpful also incredibly
detrimental if you have too much of it
and if at first you don't succeed go and
put some loud music on and sort of get
frustrated for a while and calm down and
come back to it i suppose probably i did
this work over a period of several
months doing a little bit here a little
bit there some day afternoon deputy tap
tap let's just do a little bit more get
a bit further things like that in fact
this is me on holiday with my family in
New Yorker of all places basically in
front of me there my wife is standing
right beside this gorgeous swimming pool
the children were in the swimming pool
and I'm working feverishly on my port of
Erlang to openvms as you can see I've
got the essentials as a couple of ales
they're being consumed or in the process
of being consumed packet of chocolate
biscuits similarly partially consumed or
whatever so I worked really hard on this
for some period of time to get working
basic approach I took was to actually
first of all build build Erlang on the
unit system that just happened to be
Solaris doesn't really matter could have
been something else and I captured the
output of the build process so this is
the configure script and running make
and so forth just directed that output
to it to a file so I could examine it
later at my leisure to keep things
reasonably simple i decided initially to
leave a number of options out when
running the configure i didn't bother
building an ln with with fully simpy
support i've built that back in now
that's that's fine and dandy I left out
things that I knew knew just simply
would not work on openvms without some
additional effort things like the WX
windows bits and pieces or the odbc bits
and pieces things like that I would have
had to have first ported some other
things to vienes before I could get
those components going and like I said
here you can come back and revisit those
things and incorporate them into the
into the doors later on
first thing you've got to do really is
looking at the output of the log from
the UNIX system figuring out how am I
going to convert this into a series of
commands on openvms to build this piece
of software you're starting out you
haven't got things like GCC on openvms
you've got the the HP openvms c compiler
which doesn't work anything really like
GCC in terms of command-line options and
so on and so forth so one of the first
things you've got to do is have a look
at well what what options are being
specified for GCC and the build here on
UNIX how do I have to translate those
sorts of things to something that that
the openvms compiler understands these
include things like specifying names as
is and short and what that means is well
openvms generally doesn't like
functional variable names that exceed 31
characters unless you tell it otherwise
it converts all variable and function
names to uppercase when doing the
compile so you tend want to specify
users to preserve case and when you
specify shortened it does some
jiggery-pokery with crcs and things like
that but it doesn't bleed moan about
long function and variable names so
those sorts of things need to be
addressed basic compiler options sorting
out include paths there specified quite
differently on VMS to unix linka linka
command options so on and so forth how
we deal with archive libraries and and
shared libraries are slightly different
on openvms so just dealing with those
those top-level things first is like the
first step that you would do then you
know like any good open source piece of
software you typically end up the
configure script generates a a doc
config file which contains all sorts of
interesting bits and pieces half-shift
if this hash ifdef that and so on and so
forth depending on whether you have
certain include files whether you have
certain functions and so on and so forth
so it was a case of going through that
and identifying the differences between
the initial unix platform used for the
first build and what openvms does and
does not have so an example that I'll
talk about a little bit further on
openvms doesn't have a unix-like fork
function so you would have to modify the
config file to basically say no we don't
have for things like that obviously you
need a reasonable knowledge of the
openvms c runtime library
to deal with that so on and so forth as
I said before VMS does doesn't really
have it doesn't have make but it does
have some equivalent tools but i tend to
refer to work just basically with a
series of commands to do these bills
because you just tend to have a far
better picture of exactly what's going
on i could flick it back into something
that looked a bit like a make file later
on once you're sort of starting to make
progress figuring you figured out basic
compiler options you're actually
starting to get some of the code to
compile you're getting some compiler
warnings and things like that maybe but
generally speaking your build is
starting to look good the next pass is
to actually look for little quirks in
the code like for example on openvms the
f cntl call c runtime library call
cannot be used to toggle blocking and
unblocking on sockets so you've got to
go and modify the the beam c code to
handle that situation how shift def
openvms then use ioctl instead of if
cntl and so on and so forth i'll talk a
little bit more about fork exec
sequences later but there are a little
bit trickier to handle because as I say
the operating system does not support a
unix-like fork dealing with the file
system was probably the trickiest thing
to do and I had to make some decisions
here basically what I ended up doing
from an erlang or more to the point from
an OTP perspective was basically
convincing OTP that openvms is simply a
variant of UNIX by doing that I
completely negated the need to have to
make wholesale changes throughout all
the OTP code so if you fire up earlier
on openvms and your typo is Colin type
etc it will say UNIX come or openvms it
just thinks that openvms is another
flavor of unix and for the most part it
doesn't OTP doesn't care what flavor of
UNIX you're using except in a small
number of cases so that simplified life
as far as having to make any changes to
the OTP code was concerned I think
probably I had to make maybe three or
four changes to the OTP code in order to
get this all working the vast majority
of the changes were in the bean c code
and things like that
just a summary of technical issues like
I say there's no unix-like fork VMs
supports V fork but that doesn't do some
of the stuff that fork does luckily Fork
is only used in about four or five maybe
three or four places within the Erlang C
code and it's really only used to kick
up auxiliary processes and then you end
up establishing plate based
communication between the parent and the
child and things like that so it wasn't
actually too hard in the end after some
initial degree of panic it wasn't
actually too hard on the end to figure
out how to replace those fork exec
sequences with what's something that
would work on VMS there are some
consequences of consequences of doing
that but they're not significant I
talked about if cntl the other thing is
there I've got pole and select those
those two functions on openvms only work
on sockets some of the code within
within Erling within the VM and so forth
expects to be able to poll things other
than sockets so as a consequence of that
I had to write wrappers around those
functions to address the requirements to
poll other other interfaces and so forth
and that's probably had some performance
implications as it stands poll and
select aren't very efficient on openvms
anyway and I've got an added another
layer of layer of hackery on top of that
which is probably slowed it down even
further file system differences
traditionally openvms has had basically
an 8-3 file system you couldn't have any
special characters you couldn't specify
multiple periods in a file name the
syntax is completely different to unix
you've got square brackets and things
like that instead of slashes and so on
and so forth luckily a few years back we
introduced what's called the ODS 5 file
system which does support unix-like
syntax you can have special characters
you can have mixed case file names of
you know nice long length you can
specify slashes and things like that and
the operating system knows what to do
about it so one one caveat with regards
to the ceiling port to open VMS is that
you must use a new ds5 filesystem and
you know any customer i encounter these
days that's using ODS to probably needs
to be re-educated
you get the same issues obviously with
Java as well you can't use Java on
viennese for 30 years to it just doesn't
work testing the port now obviously I
could have pulled out there's a fairly
good comprehensive test suite provided
with the early distribution but my main
objective if you recall was to get ready
and queued get an A and keep the
implementation up and working on openvms
so I thought blow it to that test suite
let's just see if we can get RabbitMQ up
and running that's a fairly
sophisticated piece of early encode it's
about 35,000 lines of code it uses the
lots and bits and pieces with an OTP
much to my amazement I had to make 11
change to the rebel t + Q code and edit
it in order to get it working on openvms
and that change wasn't essential it was
only a warning when reberty and Q
started up and basically there's a
little bit of code within the rebel tmq
product that tries to figure out uses
you limit to try and figure out how many
sockets and file descriptors and things
like that it can use there's no such
thing as you limit on openvms so I just
had to modify the code to say well look
if you're on the open VMI's platform
then this is how many sockets you've got
kind of thing also did some more testing
with yours and CouchDB and they both
work pretty well actually again no no
change is really required to the early
encode at all in order to get it up and
running on on this this alien platform
once I actually got earlier up and
running but we'll just take a little bit
of a look at reberty and Q for those of
you who don't know Revit mq as I said
before is an erlang based implementation
of the advanced message queuing protocol
it's probably far and away the most
popular implementation of amqp and you
know if I really felt like it I should
have worn my reberty and cute t-shirt
and prostituted myself as being an
advocate for the guys there they're a
good bunch based in London they always
buy me beer whenever I'm in town so so
I'm happy to say nice things about them
they also do have a very good product
essentially RabbitMQ provides an amqp
broker entirely written in Erlang not a
scratch of C code or anything like that
it's one hundred percent Erlang very
very scalable you've got gateways for an
assortment of different protocols and
the guys support client api's for
various languages and the open source
community is has created client
libraries in
numerous other languages the guys were
bought by VMware in 2010 they now have a
very nice salubrious office in in London
they're somewhat better than their
previous previous abode but anyway so
here we are this is what's called a dcl
command procedure the equivalent I
suppose of a UNIX shell script dcl
command procedure to boot up the rabid
mq application ok so at the top we're
defining a few environment variables
under VMs these things are referred to
as symbols the bit there which I've said
you really don't want to know what this
is for I'll tell you basically defining
what's called a logical name which is
again a little bit like an environment
variable dexy dollar FD locking sadly
still to this day there are a number of
calls within the sea runtime library
that are not thread-safe particularly
around i/o defining that logical name
ensures a higher degree of thread safety
so that's kind of why that's it that's
their next up the third yellow blob down
there normally when you run something on
openvms you type run followed by the
name of the program you want to run of
course when you're running l you need to
specify a whole pile of command line
options so we need to create what's
called a foreign command and then the
fourth blob down there we go we're
running running Erlang with RabbitMQ
we're specifying a few paths to various
bits and pieces and a whole raft of
other options there's too many double
quotes in there for my liking some of
them aren't necessary but I'm just being
very very careful about preserving case
to be honest because in some situations
depending on how you have your login
environment setup the case of some of
these options might have gotten
converted to to uppercase shall we say
but essentially fairly standard stuff
from an early end perspective and we
boot it up and we get we get these four
processes the the endpoint map of demon
are already started before I before I
did this the show system command as
illustrated up the top is like the
equivalent of ems of a PS command on
UNIX that lists the running
processes on the operating system so you
can see we booted up RabbitMQ we've also
got a pile of sub processes with with my
name in them against the name of those
those particular sub processes you can
probably guess by looking at the amount
of Io that's been done by by process ID
2177 that that's that's the main beam
process and you'd be right this is
running a few a few tests through
RabbitMQ way out the far side there
you'll see little ms so that basically
that in basically means that is a
multi-threaded process so it can run
across multiple cores and all sorts of
fancy stuff like that which is good but
if we have a look at at what those four
processes are not surprisingly we've got
the exact which is basically that what
gets run when you type the L command and
it boots up beam one thing I'll point
out here you'll notice after the beam
dot exe there's a semicolon 300 openvms
has what's called a version in file
system it keeps incrementing the version
number every time you create a new
version you can stop it doing that and
rename things and so on and so forth but
you might take from be mexi version 300
that it obviously took me a while to get
all the stuff sorted out quite a number
of builds before i actually got
something that worked properly it's
probably a slight exaggeration because i
just made refinements over time but it
certainly was at a high number before i
actually got things working and the
other couple of processes there are
standard things that get kicked up when
you when you boot up a substantial early
application we've got the irony get host
process which is used to do name service
lookups and child setup.exe which
managers start up of other child
processes so these all get kicked up on
our operating system and we're all
looking good as far as our laying
environment goes so getting something
like RabbitMQ going is giving me
considerable confidence that the port is
in good shape is it totally bulletproof
is it 100 percent right no there's still
there's still quite a lot of work to be
done one of the main areas there would
be around performance so if for example
we look at the performance of reberty
and cue on VMS versus a comparable linux
system you've probably got a disparity
of a factor of three or something like
that and in terms of performer
now there are multiple messages multiple
reasons for that I talked about poll and
select before and and the layer I put on
top of them obviously this is a
networked application and also being a
trick reads talk before was was quite
insightful and I have to get her slides
because one of the things I've been
thinking is that there's there's
obviously a lot of tuning that can be
done here TCP layer at kernel level and
so on and so forth I mean at the end of
the day you know this is this is
essentially I just get it working port
of erling two VMs I haven't really done
any operating system specific tuning at
this point and I would like to think
that that was a bit of effort there i
could probably reduce that performance
disparity and get pretty close so the
sorts of figures i'd expect on a linux
platform that'll be quite a bit of work
but we can get there I've done testing
around bits and pieces like SSL
clustering and neva and things like that
and they've all worked out of the box no
additional effort required on my part it
just worked out of the box as I expected
one serious limitation I've got at the
moment you know which almost seems
fascicle in this day and age at the
moment beams constrained to around about
a gigabyte of a gigabyte of memory
reason for that is whilst openvms
supports 64 bit and or you can build
applications 32 bit and so on and so
forth there's all sorts of funny stuff
that goes on with the operating system
around process quotas and there are
limited there are restrictions there but
basically what I've got to do to
overcome that one gigabyte heap limit is
to build Erlang using 64-bit pointers
which will basically give me unlimited
to all extents and purposes memory on
the system but a work required to do
that but probably not too bad what I
have found as long as I keep an eye on
that memory restriction things like
yours and RabbitMQ and so forth are very
very stable and and generally work
pretty well so I'm quite happy with that
we've had a bit of interest as I say I
mean this was mostly done from from the
perspective of getting an amqp
implementation working on VMS so we've
achieved that we've had some inquiries
from a couple of chip manufacturers
openvms is quite heavily used within
that space a European rail company and
we're working actively to try and
generate interest in several accounts it
is a large what would you call them I
suppose a large telecommunications
company here in the United States that
where that we're talking to about about
using Erlang and RabbitMQ on openvms a
certain unnamed security agent agency
has exhibited interest in Erlang on
openvms strangely enough they wouldn't
tell me why that's their prerogative i
guess and we've also had interest from a
number of hobbyist is quite a large
hobbyist community out there future
planes well i want to get rid of that
one gigabyte limitation because that's
just silly and that's you know that's a
real handbrake so i need to do a lot
more work on the 64-bit pointer build
there are still some i/o issues
particularly around flushing and things
like that that probably require a few
changes at the OTP layer more than at
the C code layer I would actually like
to do the job I've said properly slash
beta I mean I would say that the port
I've done to date has been a little bit
hacker ish I maybe need to sort of
revisit retrace my steps and do it in a
more structured fashion shall we say
with with early in 15 or whatever
depending on the level of interest
generated I'd also like to see if we
could actually get our engineering guys
involved in this work and you know much
as they did some years ago around
getting java onto the open viewings
platform I'd like them to take the lead
in terms of earlier on on the openvms
platform and good friend John apps who
now lives in the States and I probably
need to actually do a little bit more
promotion John's got a John's got a blog
site there at that URL that sort of
gives you latest developments on what
we've been up to in the space but we
probably need to you know just do a
little bit more marketing I suppose ok
so I'm going pretty quickly because I'm
thirsty a little while back I moved into
I used to work for HP enterprise
services a little while back start of
the year I switched over to working for
HP cloud services
HP cloud services are charged with
basically getting HP's public cloud
presence up and running and at the
moment we're in private beta and we're
not too far away from going public maybe
a month or two I think what's there at
the moment is looking pretty darn good I
mean it's it's really at the moment you
know the focus has been around the
infrastructure as a service type stuff
getting all the turn they're getting in
place teams to sort of feed in water all
that hardware and so forth and making
sure it's stable sorting out the
software around deploying the
infrastructure and managing it and so on
and so forth our key point here is that
strategic decision was taken a little
while back to go with OpenStack and i'll
talk more about that soon it's probably
HP's fastest growing business unit I
mean we're not anticipating cloud
services to be the major money spinner
for HP but if you look at sort of
combining the might of the organization
from you know in terms of all the sales
guys that are out there in terms of all
the different business units and so
forth we'd like to see it becoming a
fairly a fairly substantial part of the
organization and something that might
supplement other other other sales
efforts and so forth across the
enterprise the team that I work for is
spread all around the place there's
there's teams in Bristol and the UK and
in Galway in Ireland doing some pretty
good work I report to folks up in
Seattle and we've got guys in cupertino
Colorado and elsewhere we've got me in
New Zealand and we've got one guy in
Australia as well this is a lot of words
by our leader Barry Singh who is a very
interesting character and he's actually
being very very instrumental I think in
terms of actually really accelerating
the pace of HP's cloud service cloud
offer public cloud offering it was Barry
that made the decision to switch to
OpenStack I mean HP had internally been
beavering away within labs and so forth
developing its own cloud deployment
management software whatever you want to
call it this was really taking a long
time it's looking very very good but in
terms of getting something
out there we really want to do that
quickly I mean we're a little bit behind
the game already I suppose and Barry
wanted to sort of pick up the pace so he
made the big call to go with with
openstack on that you can read the words
up there I mean we're not looking to
take on the world as I say I mean we're
really looking to make this say a
strategic component of HP's overall
sweep of offerings if you look at
OpenStack OpenStack is a piece of
open-source software as I say they're
building public and private clouds it
initially started out as a project
between NASA and Rackspace and they
decided to open source at a while back
since that time its interest in
OpenStack or adoption of OpenStack has
really taken off and at last call there
was something like 155 companies
involved in the OpenStack project or
using the technology in one way or
another HP is now one of those companies
and I think probably where we're at in
terms of our private beta deployment of
our cloud infrastructure we're probably
almost pushing OpenStack further than
just about anyone else I can't say that
categorically but there's some pretty
scary numbers coming out in terms of
numbers of virtual instances and so on
and so forth I won't bore you with all
the all the bits and details of the
components of OpenStack but the key one
to note here is the thing called Nova
which is the bit of OpenStack
responsible for orchestrating and
managing all your virtual machine
environments and so forth the reason
that's important is because that's where
Erlang fits in essentially while we
don't think about it at the end of the
day none of this stuff with an OpenStack
would actually work without earling so
like I say there you know erling is
absolutely critical to the operation of
HP Cloud it's absolutely critical to the
operation of anybody's cloud who are
using OpenStack the reason for that is
when the guys originally put OpenStack
together they made the choice to use our
old friend RabbitMQ that little product
again and the reason I'm now with HP
Cloud Services is because they seem to
think I know something about that
product is that as I say the guys
decided to use RabbitMQ as the means of
communicating between all the various
processes that make up the OpenStack
Nova component
and of course RabbitMQ sits on top of
Erlang so at the end of the day erling
is ultimately responsible for the
success or failure of HP cloud or indeed
any other openstack-based cloud
deployment it's managing you know huge
numbers of the process communications
and and many many links across hundreds
of instantly thousands of servers one of
the guys in Bristol did a calculation a
few weeks ago and I think he was looking
at something like 50,000 connections to
22 RabbitMQ / Erlang for just one
segment of the the private beta cloud
that we've currently got out there we've
actually done a little bit of refinement
and pulled that number down to about
35,000 there was some dodgy connection
pooling going on that you know I mean we
were probably taking out more
connections than we needed to but the
numbers are certainly starting to stack
up and you know I've been fielding
questions from from the guys around
reberty and Q and healings just just how
far can we push this thing and I mean
needless to say I keep going back to
them and saying it's not an issue it's
not an issue but at the end of the day I
think we're probably hitting a point now
where some serious thought needs to be
given to tuning at the OS level tuning
at the airline level and things like
that we've largely been running with
vanilla configurations to date and it's
not going to hold up for much longer I
suspect the interesting thing is that
much like me many of our architects
within the cloud services team seem to
have developed a liking for ebony and Q
and then one of the things we're doing
after we've sorted out all this
infrastructure as a service and got the
basic cloud stuff out there for the
world to use is obviously we want to
create some money spinning applications
provide some software as a service type
stuff running on HP Cloud the customers
can use and pay us money for using and
our architects have actually latched
onto using RabbitMQ and hints Erlang for
all sorts of fancy stuff like that we're
looking at message queuing as a service
for example monitoring as a service bak
which isn't actually a service Bach is
like an add-on that we've created into
OpenStack for block storage and there's
some seriously good IP
but I can't really talk about that
that's going on within that and again
the guys that have created bak the team
in Ireland again are using RabbitMQ and
Erlang for all the under process
communications and so forth so some of
just a couple more slides on some of
these services we're developing really
first up around monitoring you mean to
keep the key thing in terms of setting
up our cloud infrastructures obviously
we want to know what's going on
monitoring our infrastructure monitoring
hardware operating systems things like
that so we're putting in place a
solution that looks a little bit like
this with collect d and amqp plugin all
talking to our friend rabbitmq and
Erlang again and data going off to
various places to be aggregated door for
alerting or whatever and the other one
which is probably more my area of
expertise I suppose as message queuing
as a service I won't go too much into
this really except for the first point
there to say what it is which is
essentially middleware deployed within
your cloud using a software as a service
model and VMware are already doing this
with RabbitMQ and essentially we're
looking at doing something similar with
within our cloud infrastructure
environment that's an incredibly quick
talk for me I must be really thirsty
we've talked about getting a leg up and
running on a totally alien operating
system some of the things that have that
I talked about there i think would be
relevant to porting Erlang to some other
alien like operating system maybe a
mainframe environment or something like
that it'd be similar considerations that
you would have to make and as I
explained sort of almost unwittingly
Erlang is critical to the operation of
not just HPS but a number of other
organizations cloud offerings any
questions
that's all right oh yes yeah yeah yeah
so I mean it's still it's still
developed supported so openvms 8.4 came
out around 2010 and 8.5 is in the
pipeline there's absolutely no issue
there whatsoever yeah ah no we're still
on alpha and there's still limited
support for alpha no you you wouldn't
even be able to build it on vax
unfortunately the sea runtime libraries
are just too old but in terms of you
know where the operating system is out
on Alpha and Itanium they're parallel so
so I have built this quite happily on
Alpha and it will work doesn't work
quite as well as it does on titanium but
essentially you know as I say if you
could open VMS 8.4 if it's alpha itanium
same beast well that the sea the sea
runtime library has gotten a lot better
over the years so you might be surprised
if you went back and had a look now I
mean just in recent times for example
you know there's now semaphores and and
all sorts of other stuff like that that
just just hadn't been in there for a
long long time so you know it's almost
at the point where anything you could
find in the standard UNIX or a standard
Linux c runtime library is is in the
deck C runtime library that doesn't
necessarily mean those functions work
exactly the same way you know you've got
potentially constraints around quotas if
you're sitting up pipes or whole lots of
randoms things like that and sometimes
functions appear in different header
files than they would on the standard
Linux implementation or whatever but in
terms of completeness it's not looking
too bad i know that engineering our work
on the fork carry on but you know they
might have almost bitten off more than
they can chew there because you know if
you know something about the way the
openvms operating system works I mean
you're really getting right down to the
fundamentals there it's just just not
going to work anymore cool thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>