<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Erlang in the Browser | Coder Coacher - Coaching Coders</title><meta content="Erlang in the Browser - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Erlang in the Browser</b></h2><h5 class="post__date">2013-03-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CTyR6JVDNaw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is paradise phone I'm actually
working at Ericsson and with that that's
probably that last time you hear word
arison in this presentation what I'm
going to present here has basically
nothing to do with this company but a
few years I has opted in this company's
mid-90s and being working with large and
price skate program said like the eggs
into your language problem is constant
basis of AST 30 1 i've been working with
Alan and years i have explained so but
this is not a certain company a hobby
project that I do on the side well it
was more for for my learning really so
the outlying what I'm going to talk to
you about today is first I'd like to
kiss a little bit about Allah your
browser what is it so that's why i
thought well everyone could understand
what it is but i really loved it loved
his mouth and valleys maybe you can do a
line in the browser in several in many
ways you can do it through plug-in where
you could do it in as a javascript
virtual machine as i did or
you could do it so you can translate
allan coe to javascript which there is
another project a little bit about why
why did you do this you must be crazy
yes probably but I hope doesn't manifest
itself today and pulls a little bit of
the technical stuff that thing that's
you're probably interested in writing
your own em later how hard can it be I
mean probably most of you can delete
some experience I've had when when I did
this and then a little bit about the
current status and future plastic
mysticism you know every project so what
is that onion in the browser it's a
virtual machine that I've written myself
in JavaScript it's a five thousand lines
of JavaScript which makes it is kind of
smallish program really it's a subset of
the functionality and being it doesn't
aim to be a full virtual machine like
like themes are it's not competing in
any way real implementation it's a
purely based on reverse engineering I
haven't had access to any secret
erickson documentation I haven't
actually asked anyone who knows about
this stuff and does it work for a living
I actually made a point of trying to do
it myself beside i wanted to show that
that basically anyone can do it you with
or without limitations and it
understands the beam file format it
needs to to to the extent that i needed
it executes beam off codes and email
because they are like assembler
instructions they move things turns from
longer
to another register it can do simple
switches you keep its to look for
instance is a list if it's not a new
branch somewhere else to some other lady
there is some astronaut api for for
cooling JavaScript functions like evolve
style think you know JavaScript and you
can also access don't object model
answer so you could set things and you
can change paragraphs and things like
that from a line which is well that's
kind of the api's in set yet but I just
want to make if you can talk to a normal
mode be magma labor and hopefully
without the just distribution is very
rough at the moment and there is
actually a demo page on rooftop all the
code is available under top under the
MIT and GPL license so why did you do
this crazy stuff basic that I wanted to
learn something new I want to turn on
JavaScript I haven't done anything in
JavaScript I haven't written a single
line of code in JavaScript and I would
plunge of JavaScript I also wanted to
learn more about the image-side I'm a
big fan of the beam I at least relieving
her student in her details of the madam
of works internally I'm not the next but
she continued in a way up from the
little things that I did not have to
work basically JavaScript APIs
everywhere it's on my android phone
permits on my wife's I
I've tried to make it possible to run
for mass many processes as possible but
I having for me the painting observation
is that it seemed like a funny challenge
to do this oh if this is a hobby project
after or under maybe someday it will be
product quality but it is it's a
startling so looking at the boring
details the technical details basically
this 5,000 pounds of JavaScript sister
can be dividing for parts of trying to
make separate from a lunatic so there is
this my loader which are responsible to
be power as they are I'm by ivy fowler
and it can unpack to them and sort of
change the data structure survey they
are easier and more efficient to read in
JavaScript it's a very very short off of
the program Thursday em later main loop
which is sort of the heart of the system
where you choose the the opcodes and you
execute them one by one emits continuous
loop there are the built-in functions
and there are many of them I can tell
you talk a little bit more about a faker
and finally there's the distribution
mechanism the beam foul odor that's
really a was slightly tricky to to
reverse-engineer I had lots of problems
beginning and wave come as it is today
come take an individual beam file or it
can take a list of individual dean
thousand of that one by one and like we
grew quickly realize because of the
latency and the network loading a signal
like 30 or 40 a single beam pastor
consecutively that's that takes forever
so I make building a possibility to take
a par-5 of deep files and you love them
all at the same time so that that's
basically what I do with the pricing the
standard internal application it uses a
source inside with a compression library
or four springs part of the impulse it
uses type race which is a family you
constructed in JavaScript another what
you know about JavaScript object doesn't
work in all browsers and the necessary
doesn't work in your browser it doesn't
working internet explorer oh yeah there
are some remarks in some places about
that and I will not talk more about that
but there I had implement that pull back
to two Springs bushes not as efficient
at all so that makes it while loading in
files is quite time consuming browsers
if i look at the throne basically a knee
release of all the throwing or from web
browsers it's it allows a system with a
minimal profile in
less than a second that's basically a
time up to two very have a prompt in the
show in the browser that's so not my
family lousy computer which is one point
three gigahertz intel pentium processor
so this is not well high-end laptop at
all it's quite fast into loading in
program in other browsers it can take up
to a minute but other browsers have
later versions which are are comparable
to throw me on firefox it kind of do
what code loading at the moment it's not
the technical reason it's not it's more
that I I didn't find interesting
question a beautiful loading work is the
sessions in web browsers usually not
sure though the animator may move the
heart of the system is a big huge little
power switch statement and web scripts
which statement and for each cool pro
function Alec won't function you take a
you decrease the number of reductions
that you have and the number of
reductions reaches zero you you take
another process
start executing that in the same room
and it handles some hundred plenty of
coats today more or less I would say
less when it comes to its strings I'd
say more when it comes to life in the
very basic operations the most of those
are three four lines of JavaScript this
was actually I have seen the discussion
on the main just about reverse
engineering on and especially will
constitute rudolph codes and need for
application my feeling is that this ones
are actually very hard to university
near Kentucky to be file format because
well both codes are quite beautiful in
person basically they are very logical
they do a very limited amount of all the
things that they are really there is a
good engineering behind mr. there's a
lot of careful full time off coast so
they are actually almost guessed from
the name of us just to do some of them
are little more tricky acted like
we apply one thing you should know today
what's supposed to do you're laughing
Patrick people how to second really on a
beer later we can also talk about some
posts that seems to be obsolete at least
the cousins and I'm not sure about that
very yeah well the built-in functions
that was the score here is that if
you're going to make this on your own
you have a lot of work to do here and
this is documented things you know you
have the nice presentation Cecily this
function takes this and it sort of
returns this thing here over here on
their list or something but then there
are the undocumented exceptions which
are used everywhere by people who know
about them and also there are
undocumented functions very few of them
actually but it's a big surprise that we
tell you you into it and there's a lot
of code here this is the big part of the
system hiker is this exact TS the other
term storage I don't know if you someone
actually has used old all the
functionality very tiny it's really
really tricky to keep up here or to try
to implement all the things there and I
haven't found out and especially not for
the term storage it's a a lot of work I
think much of the work is it's also
boring but validating the Oregon
arguments to the function also is this a
list does dismissed have the correct or
not and things like that so that's
basically I've tried to program your
script the Allen way so if it doesn't
well let me crash basically and it
doesn't quite work so working JavaScript
see how i can tell you but it at least
if it's a s fast to do that in
javascript as it is integrated in allen
so if you do use the big correctly they
will work i'm going to our old stuff
they will not work and will obviously
never work you to limitation see in the
browsers like Jerry tcp and UDP file
operations for instance if it's I mean
doesn't OS the OS commands doesn't
really work doesn't really matter or
apply in the process so distribution
mechanism it's using a soft j s to
connect to server they climb to the
browser client connects to the server
loosely soft ge'ez and this is again for
code that I source him on the JavaScript
side
alex is readily available and the
messages past our are encoded in the
next Donald turn informant at least to
the extent that I managed to reverse
engineers actually quite well there the
server uses a proxy similar to the ssl
distribution profitez de diversión
activity and this makes it possible for
from the main motivation for me to do
this was a proof of concept I also
wanted to basically run the test master
their common test test mustard in a node
and connect to more several browsers and
on testing several processes at the same
time so all the examples are tested so
basically what I do here is I have a
browser of several browsers several
browsers doesn't really work at the
moment one now so we can do and then it
connects to a proxy which translates
from saab jas to to the format that the
emulator in the C code done here expects
and that the proxies written in allen
and then it sends the signals to two
contests nostril
way around so basically ice form the
test mastery in this normal along note
and it will spawn a test flight here up
in the browser using our pc full side I
i believe i am not sure actually up to
dismiss to work must be half of course
there are limitations here as well so
you can have the national network with
the Queen so one browser can connect
directly to our browser which al I'm
actually exceed as used like globalite I
believe assumes that you're having to
move knows so the experience is the as I
mentioned before I'm actually the fan of
the animator as it is today it's a very
heavily optimized it's extremely
efficient today uses computer go through
so you're basically it's a good one you
don't have the loop that I haven't given
JavaScript
you're execute deep occurs directly one
by one it's it has a lot of
optimizations that translates for
instance the Gulf Coast or Italian to
the evals to internal cuz we're which
are more efficient because you know more
about the sort of date but that you
execute this doesn't scale very well I
tried it in the same building in
JavaScript about the JavaScript against
a patron Aaron casa the piggery make us
which stated this notice which they
think we'll eat so basically that's at
least that's Carl's from I believe that
there are I mean via via JavaScript
Russian and the JavaScript machines are
getting better and better but at the
moment if you have like I will go see in
your sort of language would learn
somewhere then that would be sixteen
times faster than light on forever quick
probably that's something about jumped
but implementing the base setting lot of
work it's actually quite hard to be a
was so poor he work but you might have
different opinions if you want to try
this yourself I'm actually recommended
it very fun error handling is hot much
of the stuff that we need to do when you
run the OTP test server and you're on
the test cases that are supplied with
the ott and there are hundreds hundreds
of them you get a lot for free you you
get a lot of regression testing free
ever handing I haven't breathed on a
per-student that binds problems when you
do everything wrong so that's so I'm not
quite sure that actually body right it's
grace tricky there's no fiddling dare
you can have things of which are not
aligned on the Eiffel armor which the
underlying storage users and JavaScript
engines differ a lot
common test special thanks for four
doctors saved a lot of time all the test
cases there are hundreds of them it's a
huge huge respects bad news it's a
factor 10 to 20 slower than Emma later
in the same hardware and I was actually
expecting a lot more or a lot lot worse
I mean this is basically straight that I
peed into a browser it's not like it's
the normal limits been optimized for 477
20 years now hundred cities by some very
intelligent people something I missed I
think it's quite good to actually 20
times slower than done something that's
being worked but also by so many people
this patch is significantly slower and I
know the reason for this doctor if I
would do something about it it would
make my coat very ugly so I would that
would need to be done in some kind of
optimizer or mini fire or
closure something I've battled and pre
Process Servers I don't really want to
make the code unbreathable in the way
that would be needed if dispatch to be
custom lists use more memory I remember
all the exact figures at the moment
maybe 20 do you remember our discussion
it uses my advice time
I garbage collection is on system level
which is bad news it's been--it's more
finely granular writing its closest
little which makes it a lot faster in
full force tuning process and timers are
i have read likely to be less excited
Brett phrasing probably that they are
less excited and I'm now for instance of
the Graham America of the JavaScript
hopeful for between the time of the aces
in milliseconds Demuth's microseconds
but I still maintain the county for a
longer and now that it's it will
continuously grow for each course you
don't get two consecutive also you get
the same you a second the time and there
are probably other things which you
cannot really do browser
so near future plans this is I'm working
on his friends at the moment the trial
storage is the use on the plating I've
written some kind of stopped hopeful
that episodes on sun life timers I can't
use the title model uses to uses the
term storage that happen to remember
some stuff coat dark to make it before
fully compliant term storage units
believe thousands of our I'd like to
make it fully combined to the ella esta
a la reforma I don't think I can test
farms at the moment over the disputing
photo improving the past right for the
objective test gifts I've been running
the standard test series like sixty
seventy percent of a straight much of
the remaining ones or depending on on
the ETS again I'd like to modern modular
eyes it bit more especially if someone
else is interested in contributing I'd
like to spit out the voters I basically
implement a more efficient loader make
it free for that image of the system
that you're going to
basically no bit and start executing
right away that felt nowadays i need to
the file formatting and the beam files
are is quite abstract so you need to do
a lot of personal space i mean i just
picked out x and the five variables
there is no functionality and maybe it's
not needed in all scenarios as well
probably if you just want to run once in
11 module you don't need a file rather
you don't need EDS quite likely makes
the pork for Mina fire or sometimes like
to give closure compiler that would be
really nice also some kind of processing
funding that employers more efficient
difficult i will be mentioned that and
finally make it more object-oriented and
i actually haven't written much
object-oriented coding in my career some
people even doubt if javascript is
really opieop early today thank you very
much you could improve the encapsulation
you could probably make it possible to
rumble more than one emulator in the
browser and there is code
that just feels that actually depend on
DNA which is status made yes the wild
ideas this is the fun stuff I'd like to
actually try to compile the Allen code
directly to the JavaScript functions and
see how product can pass in terms of
memory on performance using the HTML
local storage this is basically a key
value store which is resized locally on
your browser's you basically what this
you could have a Nisha you could have a
persistence / / safe sessions to store
things locally this was would probably
make it possible for you to use the
compiler in a more standard way
multithreading using html5 web workers
the last two bullets here is I mean it's
not going to work two more browsers
which was my main sort of a doing this
but this was suddenly very interested
into it you don't get the same thing as
with beta P threads but Mr you get more
than one thread of execution in a
browser make a pass through a
distribution proxy i mentioned before
that you can't connect directly between
one browser to Anand Rao sir you could
have a proxy for some time of you space
which I don't know about where you would
proxy communication between two browsers
for fully meshed network by our proxy
and finally some kind of I I put a quick
shake style testing either probably
should have put these little things
around the butcher it's but i'm thinking
of your study well I other note which I
know it is correctly and I've got a I
don't know which I'd like to test I i
can run same thing on those notes may be
randomly
results inside communicate that would
probably be people like testing by an
early so show me the code I won't do
that here okay and there's a demo
available here as well so this part is
is a bit interested interesting so first
I'd like contributions if you don't want
to contribute contribute I think that
very best thing is that you got your
only thing more for you to fork it
because the more people doing stuff the
more people the more we learn has led to
go about person if you want to come
contribute you must make it available
under the MIT or GPL licenses and we
must be good quality code all these
pieces muscle make it slower and
increase the pass rate and I think if
someone knows javascript I think it said
it probably put opportunity people for
my sessions which some people think is
the most coming thing and there is right
so thanks before I picked at us like a
thanks for your time I was actually
flapping on since i'll have some time
left i was actually planning on showing
Oh what it looks like so I have a normal
one shell here which isn't connected to
anything at the moment of me now it's
not and here's google chrome and i
connect to a web server which I
locally and I'm running cowboy here
probably work with or basically any web
server at units or go see whatever and
then I you could see her I i got the
handshake between the nose i could have
written it worked yeah I hoping that
what that's what it says anyway and then
I you see I have a now I'm up here the
list of nose and this is a randomly
generated name which is fascinating in
the handshake and then I can run and my
tester script and this will start the
contest which will connect to all the
nose during this list nose and he will
stop the contest client here up in the
road and then it will stop that the
common tests and we'll start running the
test cases and they will be reported
back to do to the test Moscow so these
are the events going
and it says era normal but it also says
Karen Walton the test cases have passed
and this is the race which was it's
mainly using a couple sound on this
basically Hivers for instance has two
three test cases failures due to using
the term storage so with that I leave it
for group or questions finally spinning
other these questions who will be first
you have in mind how could you promise
to be nice remember but yeah you should
get a higher salary very tricky stuff</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>