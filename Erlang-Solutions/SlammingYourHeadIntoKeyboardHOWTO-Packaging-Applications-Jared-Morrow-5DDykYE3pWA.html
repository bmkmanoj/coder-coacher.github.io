<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Slamming-Your-Head-Into-Keyboard-HOWTO: Packaging Applications - Jared Morrow | Coder Coacher - Coaching Coders</title><meta content="Slamming-Your-Head-Into-Keyboard-HOWTO: Packaging Applications - Jared Morrow - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Slamming-Your-Head-Into-Keyboard-HOWTO: Packaging Applications - Jared Morrow</b></h2><h5 class="post__date">2013-06-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5DDykYE3pWA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">um my name is Jared moro I'll work up a
show
called react and react CS like to thank
our Lang solutions first of all for
having this and letting my paper slip
through the cracks like thanks Sweden
for the wonderful hospitality we've been
here since Monday and walked around
everywhere it's great i also want to
warn you that i'm the worst erlanger at
all a Bosch oh because I care about
packaging and so I do everything in
shell and make and things like that and
terrible other things but don't ask me
too much about hurling okay I since
being here well before I came here I
learned one word Swedish word I'm i know
many others now but the one word I
learned when book trying to book a place
is football cut I don't know if that's
how you pronounce it but I saw it plenty
when trying to book places so we're out
in the middle of rainforest now so by
myself I work a bath show software
engineer those are all my details I
wouldn't recommend following me on
Twitter on winter it's all skiing and
snowboarding stuff um I used to work on
C++ for 10 years and got really tired of
tipo squaws and tired of embedded world
and i found Erlang a red Joe spoke and
loved it look for some Erlang companies
found bash oh but I didn't actually know
how to write Erlang so there's no way
they're going to hire me and so I talked
to dizzy and said I will do anything you
or not you don't want to do or don't
like doing so I do packaging and
releases and it's stuck ever since and I
still don't know Erling that well which
kind of defeated the purpose but that's
ok so this talk is about shipping
packages not just making packages but
shipping them and we wouldn't really
have a business if nobody use react so
this is about shipping Erlang packages
as well so why is packaging important
these are the tops i'm going to go over
all step through them one by one i'll
ask for you to save questions for the
end because i made too many slides so
I'm gonna have to zip through it so why
packets are important why you should use
a tool what is node package which is a
tool we use how no package works and how
to package your app and we use I'm going
to walk through a stanchion which is
part of the xes so first why our
packages are important in the fur
place these are the kind of three that I
came up with most users download
packages over source packages are the
first impressions of user and it makes
install upgrade automation everything
easier so the first one is kind of a
catch-22 if you don't have packages
available how could you possibly know
the packages are downloaded more than
source react enric's yes this is like a
typical release day so here's react one
to one can you yeah you can see it okay
so first of all if you don't log your
downloads and you have something that
gets downloaded you should log them
because it's really useful information
so here's a here's a you know example so
the source for react got downloaded 16
times and just red hat enterprise linux
5 which is kind of scary got downloaded
169 times i don't know why l6 barely got
downloaded that this was this year and
this is open-source react not EE those
are separate packages we log them
separately so even open source world
they download packages packages are the
first impressions users get if they it
in so long a package is like opening a
present if if it's exactly what you want
it's great if it's bad you're really
disappointed so it should be like
opening Christmas being happy being
excited what you have and it should
install and just work and not do
anything evil and shouldn't auto start
and move directories around that our
system directories and tear apart a
system and the biggest thing we found
that if they can't install your package
and you claim that it will work they
might just move on they just won't use
it then you know it doesn't work not
gonna bother it also makes install
upgrade automation easier this kind of
odds just went out a little bit ok so we
package Erlang with application we use
releases it makes the package bigger but
who cares nobody cares about a 30 meg
package anymore because if you don't
package erling with your app your users
now need Erlang okay the bill Erlang
they need GCC and Ben utils and make and
know what configure flags mean
and it might seem obvious they're laying
users but it's not obvious to every user
people won't install Erlang or if they
do they do it with the package manager
and relying on distributions is terrible
so so we deliver a bundled Erlang and
people are fine with it also chef puppet
ansible work pack packages really good
this is the cookbook for I think reacts
yes yeah Rex yes it can read Shaw files
it handles everything so much easier
than source okay so i know that was fast
but if you're convinced that packages
are important i make the point that you
should do the packaging because if you
don't do it somebody else will and so
who owns if your package is terrible on
fedora whose fault is it is it fedoras
if they did it no it's they're going to
blame it on you so it's your it's your
fault so here's a good example what does
what does Erlang look like on a boon to
it looks like that and I don't know how
many people here actually installs or
lying that way but that's a terrible
user experience you know 41 packages to
install Erlang so and then there's the
Erlang solutions which is a nice neat
package der laeng that actually works
from and it makes sense you know that's
a really good way to do things so
example this is the Fedora project
contacted us and I really hope he's not
here a kind kind soul volunteered to
package react for fedora and put it part
of the distribution and so our initial
reaction was yes somebody this is
amazing they know fedora they know their
system it's going to be done perfect but
reality set in so what they did is they
took every single repo that we depend on
a react it made it a separate package in
the distribution which might not seem so
bad except that installs into a common
library director for me so if you build
react with certain tags and we test it
that way we expect the dependencies to
be a single unit so if if you're
installing everything to a common lib
and another package requires a different
version of lager or
has no sense of versioning of modules
and dependencies so don't let other
people package your stuff it's not
you're not gonna get what you want um
let's see and you know the same goes
it's not even just other packages mess
with react we don't want to you know
poison the system with our react isms or
bachelor isms maybe they're terrible i
don't know but you know we ask fedora to
stop doing this and they disagreed so
you can still download react on you know
with yum in fedora and it's not from us
and you shouldn't do it because it's bad
so okay you should do the packaging so
how should you do it so you have two
options you can make it from scratch
hand-tuned for your application you'll
have a lot more customization but it's
going to be a lot more work but you have
lots of control so it's it's a typical
you know making a custom wooden box you
can make it exactly how you want the
other option is to use a tool so you
sacrifice some customization but the
trade-off that you get for the time you
save you know it might be okay maybe it
won't be so there's trade-offs so I'm
going to say here's my pitch for why you
should not do your own packaging because
I do packaging and I had a million
slides but got it down to three so
here's number one so that's the Debian
that's what you have to read for Debian
this is my weakest argument by the way
of the three because this one's that I
actually like this document that's my
suits pages his packing source it's 171
pages if you don't think you care about
this net bsd freebsd if you have any
customer on join cloud they use paga
source for some joint for smart OS so
you need to know and i knew i can count
on RPM 409 pages for maximum RPM it
describes our vm packaging or can build
and i mean their title wraps and the
footer has a changelog or something in
it I mean just right there don't read
that documents terrible so use a tool
readings package best is boring and so I
kind of turned my pain into a tool
someone else started it but kind of
finished it so what is no package this
will use it bash oh and we now use it on
everything
didn't always start that way so first a
history lesson so initially with react
all the packages were in a just a
directory a packaging directory like
right in the Sun their packaging
directory and it was fine we had one
product we ship react and we hardly ever
made changes we saw at supported only
two operating systems and this worked
for a long time and it had bugs but no
one really cared we were so busy making
react the real hard problem the nobody
cared about packaging and then I came on
and they had somebody to care about
packaging so this is kind of where it
went from react 0 14 raise your hand if
anybody has this production no okay
react 0-14 started with like five builds
and the orange is kind of soompi notes
react 14 even though it's the same as
reg 13 we actually draw up 32-bit
support because I wasn't working very
well anyway with two gigs ram and we
added more operating systems so
somewhere between 0 14 10 dizzy who
wrote rebar so you might know him he
wrote no package so he created this tool
to pull out the packaging how to react
but it was it was a lot of work he based
it on the simple note template for rebar
if you're familiar with it and he just
took the templated debian and RPM and
that's it it was for a one-off like
customer a demo app and he just wanted a
app up a real quick and then it wasn't
touched again for eight months so eight
months it just SAT there it wasn't very
good because it was just buggy and it
had bash oh and react all over it was
totally not generic and then all sudden
I started carrying about eight months
later and the reason why was that we had
a reacts yes although it was just open
source it's actually been around a bit a
bit of time so now we have multiple
products I don't even like packaging one
product now i'm at package multiple
products and so I knew that node package
was answered so no package still only
had RPM and debs support so right then
we ship tree xes luckily all the pain
demers only had debian in rpm so is very
convenient fixing bugs but a ket react
from being ported over for a long long
time because react was supporting all
these you know 14 different builds and
this only supported debian RPM and then
shout out to any reacts yes people that
actually watch this later sorry for
leaving the package alone for so long
they got left on the sidelines because
we're busy with react ok so all the way
all while node package is getting
developed react 12 gets more platform
support and it's now a moving target so
no baggage gets further and further away
and it was no there's no time to get it
up to par and then 12 got drawn out 13
cycle already started didn't have time
and finally I got some help Andrew
Thompson who wrote logger started
helping me and so then we hit 14 and
there was another push reacts desk CS
was going to get open sourced and we
need this from the beginning but then we
had a date so it would be really stupid
for us to have reacts that ships on all
these platforms that are tested and all
this and react CS only come out with a
boom to 12 and you know Red Hat 6 i'd be
really not a very good customer
experience so now we're not limited to
paying customers well we don't know
what's going to be stalled so we
actually have to really pay attention so
Andrew and I start tackling adding
things with no package and so I added
these these several things here I went
up up there tomorrow s freebsd us x and
then andrew tackled porting react over
and he did this specifically as a test
can someone besides me and dizzy
understand no package enough to pour a
major project over granted is kind of
cheating because Andrews like a genius
so he of course had no problem with it
even though I wrote most of an I don't
understand it Andrew did just fine so we
couldn't lose any react features so we
had a lot to do we had a lot of work to
do and they're still moving targets but
you notice there was four thousand
deletions so it cleaned up the reactor
ipoh a lot ok so history lesson over
this we're at today react 14 and up
ee 14 and up reacts yes stanchion are
both part of react CS they've been on it
from the get-go and everyone asked us
about bachelor bench packaging somebody
has a branch for that it's kind of an
inside joke everybody has a branch for
everything in bath show but somebody
actually worked on it and hopefully that
comes out soon if anybody wants to
finish it it's all open source okay
requirements how to use node package
here's the requirements first off you
need erling app you care about packaging
so that's kind of a basic one rebar is
the next one this is one giant monster
rebar template thing so you need rebar I
put asterisks next relative and make n
big falls real tool we depend on
relatives directory structure and using
overlays I don't know anything about
relex so imma stay after this talk and
maybe if it can fit the same directory
pattern and if its sovereign wealth well
tool that might work too so these aren't
sent stone and I'm not stubborn enough
to say they're set in stone so I can
change it make files another thing we
call back into like make dep to make
rail it's just an easy way to wrap
things and then behind the scenes you
can do whatever you need to do so those
are required all right features what is
no package actually do for you besides
this generic it packages things so
here's the support of platforms right
now and these are all things i build on
and test on pretty easy ubuntu red hat
solaris 10 like you don't want to even
worry about solaris 10 but if you some
people still use slurs 10 it's a reality
and if you don't want to know how k
shell works on solaris he's no package
because i do unfortunately okay I don't
have any requests outside this list
right now if if anybody's using anything
at in production outside this list
please let me know because I've never
got a request but if you do maybe we can
add it this is a pretty exhaustive list
though of
think I want to say two things about I
want to see something about smart oh
sorry bestie okay these aren't smart OS
doesn't use backup source and free be
icy doesn't build ports and there's a
reason the reason why is I couldn't help
figure out how to get both of those to
work in a generic way they have a lot of
dependencies on knowing exactly what
your packaging and the whole point of
making this tool is make it so generic
you can fill out some templates and all
of a sudden you get packages I couldn't
figure it out we had a smart of s
support I started adding it probably
about 2 a.m. we found out a customer was
going to move to join cloud because they
already filled up their current provider
so all soon we needed smallest packages
so join did the packaging with package
source and that's what they launched
with and it was full of bugs it wasn't
right and that was the very key like
don't let somebody else package for you
it they didn't understand react and it's
not their fault so Andrew and I spent
countless hours trying to change package
source the package tours build that they
had to work and we couldn't get to work
so what i did is i reverse-engineered
what package ad wanted and actually
these a package add source codes it's
not very well documented so reading the
package at source code I can figure out
what files that was looking for and what
parameters in need in each file so if
you look at this code into a package
you're going to wonder you know what
drugs I was on but it really does make
sense it builds a package as expected
and it's been in production for a while
that's another key feature people use
this okay it features a package level
it's in production I'm separating the
features from like packaging and runtime
so right now just use vanilla in it d it
we don't have support for systemd or
anything like that that that can be
added no upstart support either I don't
haven't met anybody that really loves
upstart so I just haven't done it linton
runs on both or lynn tina runs on debian
our panel in runs on RPM but since we
embed erlang there's like a million
warnings because are laying if you
install Erlang into Lib directory Debbie
ins like what the hell are you doing
putting like binaries and lib and you
ping files and it complains a lot so
there's a lot of noise if you want it
perfect you're going to put exceptions
everywhere but it does check your
packages too and it does dependencies
for you on in most on most operating
systems the only thing they would not
work is if you're if you have an if that
has a library dependency that's kind of
outside of the standard load paths that
that might be an issue and last one is I
file file followed all the file system
hierarchy guidelines most operating
system have a guideline put these things
in these directories and so that's one
less thing you have to worry about okay
actually running the software like what
is it what's the experience if you've
ever used react it's basically exactly
like using react on the system it's a
baseline simple load so start/stop
console attached all those commands I
pulled everything into a common library
there's an FSH file so if you have your
own outside scripts like we do like
react react admin you still can pull in
a common library that gives you like
paths and no checks and all these things
that is really annoying to do over and
over again so it's all pulled out into a
common library also add pits fort for
outside tools so now debian has its own
tools you can read pit files and see
check liveliness of things so that got
added and then actually works rising
light and then it creates SMF files for
smart OS service management facility
it's a solaris thing it's like init.d
but on steroids and it works really good
and it restarts things and it was kind
of a pain but it works and it works with
EPMD by the way so shortcomings what
what's the problems with it where is it
lacking honestly the biggest thing is I
don't expose some settings to me to make
it generic I put templates everywhere
but some of my date expose because it
made it too overwhelming to configure so
some things I left defaulted and maybe
they should be exposed so ping me
actually palmas from Clara yeah he
brought one to a my attention with
conflicts and
dependencies and things so we might have
to change some things the biggest the
biggest thing is it's easy to use no
parents really hard to develop for if
you needed to add another operating
system you'd probably be really confused
it takes me a while the readme is
updated though I think yeah and it has
good explanations of what's really
confusing and the other view that I
think it's kind of limited is bachelor's
the only user and I'm pretty much the
only developer so my view is very
limited I know what works for us might
not work for you so just let me know all
those links i put at the beginning like
twitter email or IRC just let me know
i'm very open to somebody looking at
stuff I'm doing because everybody of a
show they're dealing with react reacts
yes okay so there's a how it works and
there's a hell developed for it how to
cover grab I I'm doing the how it works
first and this is going to look really
bad and it's going to be very confusing
but if you just want to convert an
absent Oh package it's much easier than
this and I get to that so if you're
freaking out like don't leave yet it's
cool it'll be fine um it's all templates
okay so we're gonna step through each
one and we'll see how this goes okay so
first thing bring node packaging as
dependency if you to use rebar this is
pretty obvious just throw it up thup
very easy okay your make file then calls
in to note packages make file to do the
packaging step so this is an example
please tell me I showed up yep so this
is how we do it in reacts us or
stanchion so it's just you have a phony
target called package that just calls
package into a package have a package in
your package okay so now we're in no
packages world and this is where it gets
dark and scary and there's cruise and
all sorts of stuff so the first make
file in the package it determines which
operating system you're on and it's
combination of you name and all sorts of
things different operating system
different there's SED and awk and all
sorts of crazy stuff so it figures out
the OS and then it calls into a
subdirectory that's for
OS and you can see that node package it
says like freebsd debian whatever their
sub directories so that's what this call
is doing it's just calling the package a
directory that's set for freebsd to FBS
d and that's so we're going to follow
the kind of FBS the freebsd chain here
so we're still in no package that make
file that it called then loads of
templates as an overlay and this is when
it gets kind of more scary so this
creates a brand new rebar project with
the template that we were looking for
and a file called package floors config
and this is like the main thing you
actually have to do if you're making it
for a nap so yeah it looks confusing but
it's all of them are the same rpms end
up call in right here the make file
that's the actual packaging with a no
package so confusing but it's calling d
build for debian RPM bill for RPM ok
inside each operating system section
there's a template file and it sets
things and this is where I say following
like file system hierarchies all of them
are different for every platform and
these this is kind of how it works on
the inside let's see and then the
package building starts so template gets
overlaid on these files these files then
get called make and they build like if
you made your own packages you would
have like an RPM directory that had a
spec file so they call back in and make
that's rel and that's why I said you
need to make file so it calls your realm
thing and that's some of the nastiness I
alluded to earlier freebsd it's like
actually copying stuff around and it's
it's annoying this is where your package
bar or this is where the VARs config
it's used as well so I drew it I drew
this thing to make it easier to get and
then when I did the drawing it looked
worse so that's a drawing and I don't
think it helped anything this is all
there to a packaged stuff that's all
your application stuff and it didn't
really help anything so I should have
just deleted it but um look at the
readme if you're confused with the
templating or just don't add any
printing systems you know have to worry
about it so this is where we actually
walk through this is going to be far far
far easier when i ported a stanchion
over noodle package it took me about an
hour reiax es is a little longer react
took a long time but there's a lot of
diff involved trying to figure out if
we're losing any features so here's a
simple app this is a very typical or
lying at first file package of bars
config this is the template we saw
earlier that gets loaded on top of
things let's see here's what stanchion
looks like let's see that's kind of
small it's very basic but some of these
are not needed the reading me tells you
which ones are required on which ones
aren't stuff like package name and how
it's going to be installed so the reason
there's a package name package and
install name we have like react EE as
the package but when it installs on your
system it's just react so there's a lot
of weird package naming things in here
but it's because like we have react CS
which is an underscore it has a repo but
it's it's a hyphen on the package so
there's a couple package name things if
you have a thing like stanchion you just
go Staind stanzie stanchion and you're
fine ship it use your name user group
they runs as a demon so it does vary
demon type things we're just it runs as
that user and it's very safe and then a
lot of just kind of common metadata
you'd put into packages another weird
one is the bachelor patches the package
patch directory this was something we've
done for a while where we actually have
a we add a library path to our load path
so that you can throw patches into it so
right there you can set up you know
Gloriana patches or whatever you know
you can name your package whatever and
you're going to have a you're going to
have a directory that you can throw
beams in and do do load new modules
let's see all right here's here's the
make file that you'd have to have this
part up there is more work you totally
need but this is kind of what we do you
can grab it it's very generic all that
does is go through every dep
get the tag of each dep records it in a
dots where is it version get file and
then it blows away all the directories
so that just makes a clean source
distribution and you need that because
debian and RPM and all these things they
need a source tarball to look at because
then they check to see if there's
anything in it that you're not packaging
and you know so you need that section
kind of you don't need to do all the
good stuff you can just say blow away
every gate directing you're probably
fine so that looks scarier and then I
already alluded to this earlier then use
call the node package make file and the
other key point up here is the exports
because we're not quite into the Erlang
world it still kind of make files it
needs things like the package name
because it doesn't know what operating
system you're on it doesn't know what
your packages yet so there's some
repetition to package VARs config and
your make file exports but it's it's
because we haven't gotten so the package
bars could figure yet you know and in
that chain you know it's only make files
and they need some information to I've
tried to pull it into one file but it's
like how do you bootstrap the bootstrap
the bootstraps it's impossible I don't
know maybe somebody waste water and make
it figure it out but I don't know this
works bars config most people have one
of these already if you have a demon
that you make like a rel release with or
dev rel like weed with react you can
make a five node cluster enter computer
this is where we have this is not needed
if you're just doing packages all these
get over like all these get removed and
replaced with the packaging ones but I'm
just doing a full here's everything you
could possibly know just to not hide
anything so this is where we do
deverell's so on say dev one depth to
dip three these all get changed that's
just a full disclosure what I had to
change it's not that important well tool
config it's not very scary despite it
being in relative calm big so this is
where you copy over the files from node
package that are the runner so if you've
ever use react and you have a react
script and you can say react start next
stop that is actually a generic script
now called the runner and
it is the third line there and it copies
the runner to be stanchion and the
runner is filled because you gave it the
package name and all these things it's
filled with that knowledge so but in
your relative to still move that stuff
over and become those things so there's
an earl file which is a rapper like the
simple mode one there's no tool which
talks to the node most of these are
familiar if you're familiar with a
simple node and there's that umbra SH I
was alluding to so we have a react admin
command and it probably is a fifth as
long as it used to be because it just
uses them SH to do node pinging and all
that stuff and dist oral and you know
checking the cookies and the pit files
so only for files change for stanchion
and this is all you need for a nap so
all that node package nonsense in the
middle there wasn't really needed if
you're just packaging you only really
need to change for files so what did
this by us okay um make real still works
make Deverell still works so you didn't
lose any functionality by going to this
generic way all the packages override
your virus config settings so you don't
have to know like you don't have to know
the intricacies of different operating
systems and it will choose based on the
name you know it knows that freebsd
expects your data to be in fault VAR DB
react data or VAR DB app name data and
it does it does this for you and in the
big thing is if you don't need packages
for an operating system you still get it
so yes it's easier to probably package
your app for ubuntu you could probably
do it in a half a day but then you're
just still on a boot so you still have
to do it all over again for RPM and you
in who really wants to know how spec
files work I don't but I do
unfortunately so if you use known
package you get all the rest for free
you just need to make a vm and that
thing and hit make package you know and
whatever you need for packaging so r pn
needs our PM builds installed debian
needs d build and dch installed
the depth scripts but you get all free
so just do the work once and be done
don't keep doing it and you know I'm
never going to stop developed well you
know as long as none of that bass show
no one's going to stop developing the
package we use it for react we ship it
to everybody so we act we do care about
it it's not a tool that's just going to
be left aside it's already being used so
I hope somebody uses it if nobody else
uses it's still going to exist so
there's no worries that you know we're
not going to fix things if there's bugs
so yeah you get a lot so okay I'm too
scared to live demo so I was going to do
builds on a couple a burner system to
show that it actually made packages and
they actually work but I didn't think
that was ever going to work so I'm glad
it didn't cause Internet's not working
very well so I did this the day this is
like the master of react and I was just
showing you so here's the metadata that
comes out of a deep package a Debian
package and that metadata is all just
familiar it's all this stuff filled in
from the package barska pick and the
same thing you'd see on an RPM or
package package info on on smart OS or
for bsd all that stuff is all filled out
and the dependencies are up there and
those are scanned and so here's
installing it something's got to work
and you have to be sensible about it no
auto starting don't let me don't be
you're not Apache don't be a patchy
patchy auto starts but they're about you
so it's fine man pages get installed I
meant to point out the package bars
config there's one setting that's kind
of weird it's a mustache list and we
actually had to add that feature to
rebar doing my specialist it you can
list out your packages you install so if
it's Stan she and only a stanchion but
react has react admin really react
search command and all these things have
man pages you'd be surprised but they do
a CS he wrote them so it on my food
stalls man pages based on the list and
if you don't have them it's not going to
fail I used to but not doesn't so here's
the common options so this like simple
simple note but this is options you get
so that reacts script is just a runner
script
so start stop restart get paid is the
new one so return to the pit file which
is we added because we should just use P
graph like everybody else does P grab
being blah blah blah but when you're
running react CS react stanchion there's
no telling what you're going to get back
sometimes it works on fedora but it
doesn't work on for freebsd because it
just makes everything bracket beam it's
impossible to figure out what you're
doing so get paid is very useful react
version automatically fills out the
version for you that's not something you
set up it reads it from the from get um
and standard things ping pong there's a
separation of privilege now so before
you kind of had to be route to do
everything and didn't really make any
sense so now things will air out if
you're not the runner user so we set
that up in package far as a config this
case it's react so you need to be either
run or route to do stuff like starting
stopping attaching to the console I mean
this is all kind of common things you
don't want people anybody just being
able to shut your stuff down but ping
and status and those things still work
which also makes sense so it's it used
to just fail in a weird way but now it
actually if you are you simple node it
doesn't handle this well but this is a
lot better now here's just the top of
the hem that Sh i mentioned earlier it's
going to show what i mean this gets
filled out these are the debian settings
so you know bachelor pad jizz got filled
out as a patch directory all these
things are available to use and this
might seem simple but finding where
things are are on your system is kind of
annoying like where's the app.config oil
should be nazi well maybe it's not maybe
it's an oft etsy etsy like smart OS does
this ridiculous up local really for etsy
um so you can add specific scripts
really easy like like i said a couple
times react admin just uses an SH and
adds all these other commands and those
are very like react specific so that's
what we do you know if you have an app
has very like commands that are very not
generic throw them in a different
command and people are okay with it just
document it react react admin it's
really easy and so uses msh like i said
to shortcut everything and these are all
added to the package command
um thing in package bars config okay so
uninstall God uninstall it's such a pain
so there's two different uninstalls on
most operating systems the first I
missed all the regular just remove
shouldn't remove data it shouldn't
removes logs it shouldn't remove
configuration like if somebody has react
installed and you do a remove on that
package and it blows away three
terabytes of data they're going to be
really really really upset so regular
move should act like that if it doesn't
if you find that I messed it up
somewhere please tell me immediately but
a purge should do it so that's this is
kind of I should have put more white
space but ran out of room so log data
etsy is all fine but then up here on a
purge it actually blows everything away
remove the users that's kind of what I'm
showing so install works uninstall works
and that was 35 minutes and 20 seconds
thanks for listening to packaging which
is such a boring topic does anybody have
any questions I kind of blew through
that yes yes I'll repeat that one how do
I look for fpm fpm stands for effing
package management which I appreciate
the name it's a generic one and they
basically read the tarball and creates
packages from it I looked at it but it
didn't have all the Erlang isms that I
need you know just doing the tarball
wasn't enough for me I kind of wanted
done it to know templating I wanted it a
Norrell tool I tried using fpm and it it
maybe it was a little bit not even here
but it just didn't really seem to work
very well for the Erlang it does really
well which kind of generic see you know
knows configure knows make make install
it does all that stuff but fpm didn't
work as well for Erlang if there's any
fpm lovers that want to tell me all
wrong that's fine too I looked at it for
a while and I just couldn't get it to
work exactly how I wanted it anyway else
are you the developer fpm no you're not
my job but I use that p.m. extensively
to build our pm's in it for purling and
it's a one-liner yeah just works on yeah
I think we do gotta hit it earlier
whenever we talk afterwards okay that
works say there you go something else
round in the corners now I'm I'm totally
fine being told I'm wrong which is great
I'm told I'm wrong every day at work but
I think one reason is there's note
packet is actually doing two things
right it's doing the packaging but it
also seems like it's the source for like
the start script and yeah yeah I mean
it's not just packaging it's I mean that
the runner scripts and all the noise
stuff I mean it's really easy to write a
start script they calls in to run Earl I
mean that's really easy but not to port
that too smart os or to freebsd or
solaris 10 like go ahead try running
bash on solaris 10 good luck it doesn't
work and said a knock and tar don't even
work right and GCC doesn't work the same
so I mean all these things gets taken
care of so yeah that's the key is it
does the runner scripts it basically
takes simple node as a template and and
throws packaging on top and I've pointed
a lot of changes back to simple notes so
if you just use a rebar template you're
getting a lot of these things for free
too so yeah actually more yeah um so you
know about rebar escript eyes where okay
so is there any way to use something
like node package to these so that the
problem with these escript eyes binaries
is you still need an urge somewhere on
the cyst yes and is there any way to use
something like node package to actually
you have to just use it as an yet to
have it bring it in it's hurts like
react ships with the nerds but it's kind
of want this in my escript eyes binary
somehow ok so the east script eyes yes
so bachelor bench is in a script eyes
and the way to do it is you have to use
it as an app like there's as far as I
know there's no good way to not to avoid
relative alyna case look if you want it
installed as a package and and to exist
to not require Erlang that's part of it
you you you need to package it and so
you need a relatively new releases
so with bash of bench i just added a
real tool config and you can still have
it be any script you know it's still
call rebar a script or making script or
whatever it is because all you do for a
package is just calling the main just
like you would with a script so it still
works but so you've got an example of
how you did this in the bachelor mansion
or so sorry I'm gonna call bachelor
bench there's a branch for it so while
to load to get it done so that's a good
example because I know that's going to
be a problem for people anybody but
anybody else Oh once going twice well
you got out five minutes early so thanks
for coming thanks Janet Jerrod listening
yep thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>