<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Soundrop, Building a Real-Time Music Service - Ali Sabil | Coder Coacher - Coaching Coders</title><meta content="Soundrop, Building a Real-Time Music Service - Ali Sabil - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Soundrop, Building a Real-Time Music Service - Ali Sabil</b></h2><h5 class="post__date">2013-07-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3RuD7bqOT2k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and thank you very much
for coming my name is ELISA veal and
found in sitio at sunup so I'm here
today basically to tell you about how we
used our line to build a real-time music
service and but before I do that I would
like to tell you the story about how all
of this happened my personal first
contact with Erlang was in 2004 i
believe i was still student in
engineering school and this friend of
mine came is like ali you really totally
should check this dis language he
borrowed the book from the from the from
the school library and he's like yeah
you need to check this language is
really totally awesome so I brought the
book and start reading i think i read
the first chapter the second one and
maybe the third one then I just like you
know yeah I gave up so I returned the
book and next time I met him I told him
like you know this erlang stuff looks
neat but seriously I don't see what I
can do with it just I can't do in PHP so
that's really was it that was it for me
without with airline later I got
involved with with iron protocols and
especially reverse engineer of the of
the MSM protocol including the webcam
and all these features like not gene
windows and whatnot and which led me to
start working for a video conferencing
company that later got acquired by Cisco
while working there I worked on a
building i watch what they call like a
unified communication solution that was
based on XMPP so it was more like a
research project and at some point we
had to pick an xmpp server given that
was a unified communications solution
button xmpp right so we looked around
there was like those open fire Chi gays
and a jeopardy I didn't know much about
Erlang so my own my experience with this
was pretty limited so end up picking at
you guys we worked with it a bitch
started like modifying its integrating
with our system then it's got a bit
complicated because I think at least
back then tj's was like a Java server
written in C style
and so at some point I just like went on
holidays backpacking somewhere in
Southeast Asia and then when I came back
the guy with whom I was working who
happened to be my friend from the
University replaced the XMPP server with
that we eat jeopardy so now I really had
to learn or like that project continued
and I moved to another project that was
about building a cloud kind of because
back then cloud was hit and we need to
build a cloud directory and this was my
second encounter with Erlang where we
were looking at react back then as as a
storage backend for this I left Cisco at
the end of 2010 and then I started
working on I mean few months down the
road Sandra was born so let's talk a bit
about sunup I don't know how many of you
have used it but it's essentially our
social music discovery service that that
helps people sharing music and
discovering it in real time so it works
in such a way that when you go into
Sundrop you are presented with a set of
live rooms that you are able to enter
and then you start listening to music
and sync with our people sounds like
radio so far except that you are able to
also add tracks to these rooms and
people can vote for tracks and tracks
with most votes get paid first they can
also chat with each number you can see
where people are connected from and it
also happens to be a multi multi device
multi-target experience where today we
have an application within Spotify but
you also have a web version of it and an
iOS version of it and also some
something inside Facebook so maybe I
should show you all of this so how does
it work yes here okay so this is
basically like if you go inside the app
finder here in Spotify it's not you can
go sourabh is today is the fourth app
for some reason
hopefully it will load yep so here you
see like a set of rooms that we have
there is like tens of thousands of these
rooms actually and there is like rooms
for Jones rooms for different artists
and for example if you look at the
chill-out room here there is like 762
people listening right or 763 people
listening right there right now so I'm
able to enter that room and the music is
playing biscay so there's like these
people are here as possible this is
basically the playlist it's possible to
vote for tracks like for example if I
vote for this one it's going to move up
it's possible to chat with other people
and it's essentially like a it's
essentially like a community thing oops
ugliest music so we also happen to have
the same thing on the oops hey does
honor with them we have the same thing
on the web as well same story 763 people
there except at this time we actually
use YouTube for the playback so we match
the whole thing and if when you're
inside Spotify or on the web you
actually are able to listen to the same
thing we are trying to basically build
as many music providers as possible and
we're still working on this there's an
iOS app in the work and there is also a
facebook app where we got like I guess
there is quite a few Swedish people here
we got a bar basically to put sign up in
their Facebook page yep time to get back
to the presentation I guess where is it
there we go so this is actually a very
simplified overview of how Sundrop is
built so we have like all these clients
at the top we have like some web one
some web clients and some native clients
we are our web client I mean even the
one run inside spotty of is actually
entirely built in javascript is a very
heavy JavaScript application before
starting this I didn't really know
JavaScript it was a good it's a good
language after all I think then we have
Sonia jus called walk it because back
then when we started working on this
there was a socket i/o which I think
it's not really great there was no sock
J's back then so we end up building our
own kind of transport system we're
actually we're able to shuffle send
messages back and forth for the web so
its support like things like web sockets
and that's actually we will probably
learned a lot in the sense that there's
all sorts of like nasty things in a
network that's you're able you would
establish like a WebSocket connection
but then the message will only flow in
one direction so we have this dis server
there that actually implement its own
kind of protocol just to make sure that
the network works then we have we have
sessions that that's basically where the
the green part is the Erlang port we
have sessions that represent people
connecting especially if they use like a
transport that's not always connected
then there is like a store and forward
kind of logic there and we also have
like user processes that represent a
unique user so for example user can be
connected from multiple devices and we'd
like to make sure that all these
sessions are in sync so we have a
feature there say like called recent
rooms that allows you to if you visit a
room on your mobile phone is immediately
pops on all your devices and everything
in sync if you receive a notification
here everything is really synchronized
and we do that through an erlang process
per user and then we have what we call
spaces which is our our technical name
for rooms and inside display a space is
like an erlang process today as well and
inside these spaces we have our sub
processes
manage the application the chat and the
membership so from a from a from a
supervision tree this is this is a
really simplified version because there
is lots of like third-party integration
services in our tree like integration
with Spotify integrating with Facebook
and Twitter all these things that are
there does i didn't put in this slide
this is just like the decor of it we
also make use I don't know how many of
you attended previous talk but we make
use of quite a few special processes in
the case of session the session process
is not a gin server it's not a plane
formed process is really like an OTP it
fits into the OTP 3 but it's a custom
gen server that actually or a custom
state machine that actually switches
between weather is supposed to store the
messages or to forward them to the
connected socket and the same is true
for the space which is sort of a
supervisor to these three applications
as already inside one of the challenges
that we have seen and that we will
continue to see is that something like
this is really really difficult to scale
why because we have like a shared state
where these people connected from all
over the world we're trying to
synchronize the playback which we're
also allowing every single person
connected to modify the state they can
vote they can add tracks at any point in
time and we need to make sure that
everything really makes sense there so
eventual consistency is something that
we can use we need something really much
stronger than that so now that i present
it a bit like just a brief overview of
of some grub maybe i can talk a bit
about or lang i assume everybody here is
a bit like its familiar with Erlang so i
don't really need to present that but
how did we end up breathe air I mean my
experience personally and the experience
of everybody involved in so drop was
pretty limited when we started on syrup
but we have this culture where we like
to explore things
we like to try to find what was the best
tool for the job so while developing
Sundrop we did a lot of products
exploration so the story is we were not
always this where something else before
and while doing that we're also liked
exploring the technology side of things
yeah so this has been our journey to
sign up Sundrop started as a as a
project we wanted the product where
we'll be putting jukeboxes back into
venues so wanted to put jukeboxes into
different venues and allow you to
control them through your mobile phone
so we built this thing we build the
initial prototypes in fighting so there
was a it worked we even actually managed
to deploy it in a venue in Oslo where
web-based and people were able to add
tracks and votes and all these things
but there was a challenge in the sense
that given the product we're trying to
build which was sort of enough to have a
server this was just relaying messages
so we have like a master player running
in the venue and then all the clients
they just need to connect to that
somehow and get the stage what is queued
right now what's playing right now what
can I add so building a ton on Erlang
sir sorry a python server was I mean it
worked so but it was based on polling so
what's happened is that the the mobile
phone will connect to the server and
then we'll ask what's the status of that
specific place or that's physically so
it will receive that and it will just
like Paul every I don't remember but
every 30 seconds to see what's the new
state what's happening less from I mean
it's far less than ideal we'd like to
have something much more alive and also
I mean it work for what we were trying
to do but we try to improve it so I
remember nodejs was starting to be
really hip back then so I was like okay
this sounds I mean this sounds like the
technology that maybe would be able to
use especially I mean we're going to
building the the front end anyway in
some sort of JavaScript because we're
using like mobile web so it makes sense
to use like javascript in both ends and
see if it's going to work that was no
0.3 back then I have no idea what's the
state of things these days we tried we
built a prototype I just have to say I
run away literally because I couldn't
believe that a key is such something
like like like no GS would be like solid
enough for building any kind of servers
I had some of course it was a prototype
but it was really disturbing to see that
if this client sends the wrong kind of
message it might call an exception in in
the end server which will just bring the
whole server down I was not really happy
with that I wanted something much more
solid so I started it's like back to you
back to the roots went back to piden bit
something using I don't know how many of
you are familiar with patent but use
like G event and and read this aren't
you to basically like work as a pub sub
system it works pretty well except that
one day I I mean there was a mistake and
we started leaking memory how did that
happen we had like a list somewhere and
then we're just modifying it appending
things thinking that is going to return
a new list but it did not it just like
updated the list so we end up like
accumulating more and more it was really
really hard to track what was happening
so we decided there was like Easter
holidays and we decided to give erlanger
try and to try how that would work for
what we're trying to do so we still had
this jukebox idea so we just put we just
built the same thing again or lang I
should i would say it worked pretty well
I I struggle a bit in the beginning but
it works really well it's had like all
the the characteristics that we needed
and even more
work because it's actually the fact that
we chose Erlang back then when we were
building a jukebox this actually allowed
us to build some of that we have today
so why are like what what makes Erlang
so much better for us compared to a DRS
the first thing is concurrency so over
time we start with this jukebox thing
where the master was the was the venue
we had like a software around venue and
that's what's dictating everything into
moving that logic into the server so the
server became the master which means
that the clients could get disconnected
or there will be in the server itself in
the master and we need I mean we need
concurrency of simply because we manage
a lot of rooms at the same time I'm
imagine a lot of sessions so sorry op is
still a pretty small service but at peak
time on one single server we had more
than 22,000 concurrent people connection
on that it doesn't sound like a huge but
when you think about like what's
happening behind and all the coronations
happen is actually quite massive and at
any point in time of the day we have
more than a thousand active rooms that's
actually are playing music synchronizing
the playback and doing all that work we
also had this this this event where
there's this new and upcoming artist
called Kendrick Lamar I don't know how
many of you know about him but he has
some pretty dedicated fan base and he
happened to tweet I am on Sandra so
what's happened is that the following 15
minutes we had something like 2,500
people just pouring in we also had
another event that was much bigger this
one was a bit more advertised where we
had something like more than 6,000
people in one single room and we managed
to synchronize the playback of all these
6,000 people connected from across the
globe that brings me basically to the
next point that we really I mean why why
does Erlang work for us it's fault
tolerance
the thing is that we have these rooms
and we have these sessions and it and we
control the playback for different
computers that are connected essentially
in sound up as we know it today the
server can send us any point in time
play this track at this position from or
with this number of milliseconds from
the start and all the clients will
actually try to which will do that
immediately and they will try to
compensate for all the buffer and they
would they really start paying in sync
of course is like always the network
latency but we always try to compensate
for that the and it's really annoying if
it's really i think i personally hate it
if my music just gets interrupted that's
probably why i'm paying for spot you're
fine i just don't like to have my music
in syrup so i assume is the same for
most of us reading so it should be
really disastrous if we trigger a bug
somewhere in our room logic where we are
synchronizing this day back that would
cause all all the playback across sound
up to just stop that's not that's not
idea that's far from idea for us so we
had actually events were especially
after rolling new releases a new version
of the server were some very specific
scenarios triggered a crash in them in
the room and that only that room just
went down and just restarted and people
rejoin that room and just continued
whereas the DL rooms in the in da in San
Rob just stayed an effect in it just it
just worked the we also sometimes have
we have had some people having fun with
our servers we track them down they were
like some students in some high school
trying to flood our servers with
messages and yeah d what happened
essentially did you just get
disconnected because there's session
just detectives being flooded and then
we just kill the session and that's it
it just continues and the worst kind of
thing is sometimes I mean we we rely on
external services we rely on facebook we
rely on Twitter on Spotify and sometimes
their services are down or not really
working properly because we didn't I
mean when you write us when you are
developing a product and startup we're
just trying to make it to ship as fast
as possible so sometimes we didn't
really check properly sometimes we
didn't validate things and what's
happened in those cases is essentially
the room that triggered that scenario
would just crash and get restarted and
everything else will just continue all
the earth services just all the other
rooms will just be there we don't really
do hot code upgrades like as in OTP
style hot code upgrades yet I wish will
be able to do that that's actually be
really awesome for us but we don't
really need it because we can restart
the server within five minutes we just
look at the downtime when we have the
least amount of users and we deploy them
but sometimes we need to patch a module
to fix critical bugs and there is 0 work
continues like improving the software
and that's like just totally important
for us because if we had to restart the
server every single time we fix a
critical bug it should be disastrous
because everybody will get disconnected
everybody's playback we get interrupted
there was also this funny or I think
it's funny for me at least a story where
we had we had an event scheduled we
actually organized helped like a what's
his name already adesso from swedish
house mafia to organize an event in San
drop it was universal music if I recall
correctly and 15 minutes before the
event there was one of these third-party
services that we relied on and that's
actually change their API they actually
deploy the new version that didn't have
the API that we were using so you can
imagine the level of stress when we're
trying things and just like Oh 15
minutes it starts we have to have to fix
this we have to change it we didn't want
to restart the server because there has
been a lot of marketing efforts into
bringing people into that room and you
just don't want them to just get
connected right so what we did was
actually to quickly implement a new
version of the module and as a session
to the Machine and it was like a
multi-node back dance i think we had
like two machines we just like load is
than NL and then it just got updated in
all the notes and this was pretty pretty
awesome for us your story it dates back
to I think it was three months after we
launched the initial the initial product
we didn't Spotify there was this funny
guys I think they were like seven
friends or so and they just decided that
hakuna matata was a really awesome song
so they went to all the rooms and
started like adding hakuna matata and
then just voting it and because they
told it was like a relaxed song and they
really loved it so I mean we didn't have
any mechanism back then for fighting
trolls or for blocking these people so
we try to figure out a way to deal with
which we did essentially was to
hard-code their user IDs into a by an
chua into your module and just like hot
patch the module so that they are not
able to add any track that's basically
wisdom so this hot code patching is
pretty useful it's more than just for
upgrading sometimes you can you can stop
like trolls in our case the last one or
not the last one actually have another
one after that is the fact that Erlang
is soft real-time what does that mean
for us we're trying to synchronize
playback across the globe we're trying
to never be late we're trying to have a
very predictable predictable timers so
if we're running inside the system where
garbage collection or something can
cause them can cause delays random
delays where sometimes you're like you
know 200 milliseconds here 500
milliseconds here because something that
happens as well it wouldn't really be a
good playback experience people will
just be will be skipping things because
we try the reason why we do synchronize
the playback is to avoid clipping tracks
at the at the beginning at the end so
it's actually you avoid this clipping
where we just cut to resync to the next
track we just we really don't want that
to happen so we have like a lot of
timers and especially inside the
playlist application as I explained
earlier so the place has timers to know
when to move to next track and the fact
that we're soft real-time is what allows
us to just if we continued using like
nodejs or patent I don't think we'll be
able to have 6,000 people large rooms
that actually are not going to affect
the playback of the 20 people rooms
because those things are totally
isolated and the whole thing is like
soft real time so we can we can at least
make we can at least expect the system
to run in a predictable way and well to
be honest I think we just love it
nowadays in its I am our background is
most like c programming Titan a bit of
Java but then when you start discovering
Erlang an OTP you just like it it feels
like a something new something
refreshing something that just it's what
you have been looking for but didn't
really hear about it before so as I said
we just like really love Erlang and it
will find amazing so but the next slides
are going to be a bit negative so I'm
going to talk about like our mistakes
that that's made it much more difficult
for us so when you hear when you read
about Erlang ganda on the internet it
say you just like mix yourself scale
that's not really true I mean it helps
you build scalable stuff it doesn't
really make me it doesn't automatically
make your stuff scale and this was
really hard for us to to to understand
because we didn't really knew we didn't
really know the the language or the
runtime that well and in the case of San
Rob as i said earlier because of our
system it's pretty difficult to scale
and that's something I'm sort of like
missing or wishing that that Erlang had
which is some sort of framework of
foundation for building distributed
systems I know like react core supports
a subset of the distribution systems
Browns but
that doesn't work for us we need
something that's like that's consistent
so the second thing that actually was a
bit surprising for us is the fact that
the vm can crash we assume that if we
run out of memory the the process that
tried to allocate that memory we get
killed wishful thinking that really
didn't that really wasn't case for us
especially in the early prototypes were
all the early products that we deployed
we had the vm crashing sometimes when
we're running on 32-bit system also like
Erlang i think is or OTP Erlang OTP the
distribution we have today doesn't
really fit that well into a unix / linux
environment when you try to use things
like like run Earl and to Earl you get
bitten by by some quirks it doesn't
handle like signals out of the box like
sig hub and sig sig term and it doesn't
really do creation of the pit files
essentially things that you'd expect
from a server those are difficult to do
today in Erlang or in Erlang OTP that
one is basically related to the Erlang
run Earl and to Earl somehow back in
last year I think we're still using
around Earl and to Earl and when you
combine these with ssh the shell hanks i
just recently saw some males in the mail
is about it but back then we really
didn't know it was happening so just
like we just the shell just hang stops
responding it happens if you did if you
disconnect from one of them and you have
an unfinished expression in the previous
shell will also have issues with with IO
been blocked when using sent files on
our 15 in the early ar-15s and we still
see sometimes HTTP see Hank forever
because it's waiting for something to
receive that just never happens
yeah this one links back a bit to the to
the erlang doesn't automatically scale
for you story so wanted to have support
for this clustering and we just didn't
want to think we'd entry we assume that
maybe it should just do multicast for us
or it could do something magical to make
sure that the network is is not
congested so we just put a bunch of we
used jeep rock and distributed with that
with Jen leader and what happened is
that we had a lot of internode traffic
because clients will end up connection
on this node like for example 100
clients can actually download one where
the room is running on no 2 so then the
older messages sent from the note to to
this hundred clients we have to be sent
hundred times across the network so we
end up like congesting the network and
chosen basically like the heartbeat time
out which goes like net splits or split
brains for and gyprock was not
recovering from these and we had no idea
what was happening I mean we're total
noobs in that area the last I mean the
last I mean this is like a summary of
all things I I'm just trying to remember
all the issues we had our issues we saw
but some third-party libraries were
pretty much unreliable historically we
decided to use MongoDB I'm very sorry
about that but because we're venue based
the original code for the jukebox need
to do geolocation search search nearby
all these things which database did
that's easily back then that was just
easy to get start with well MongoDB did
does so we picked MongoDB and we have
been running with since done we only use
the database really for persistent the
metadata about a room and also for
flushing the state of every room every
now and then to be able to restart the
server and continue from it from an on
state so the MongoDB into so MongoDB is
not really great but the MongoDB driver
was worse so it was not really working
so and it was causing like also of weird
behaviors because apparently
person who wrote it came from Haskell
and it was designed so that you have
this monadic variables that are
implemented in gen servers and whatnot
the other issue that we had is wanted to
integrate with like Twitter we want to
integrate with Spotify so we had to roll
these things on our own basically
especially the Spotify one where we had
to use lip spotify and c and then
integrate all of that with with the with
Lana I was also surprised to see that
there is a lack of web-based monitoring
tool correct me if I'm wrong but I
cannot really find some ladies are
really happy with I'm still like for
example Observer has been rewritten
recently but i really wonder why is it
written in WX for Sunday's meant to be
run for servers why is it not an HTTP
based or web-based solution and
obviously I said earlier it's not always
easy to think in Erlang when you're when
you're new to it so that was it so if
you have any questions when your remarks
or anything I was wrong about that you'd
like for like that you guys would like
to correct me about yeah
teaching our language once you have
actually uh once you have a system in
place that has a des has an architecture
it's pretty easy to get people up to
speed that has been my experience so far
we didn't hard that many people on the
backhand side we're hiring more on the
front and side because writing
JavaScript is much more tedious than
writing Erlang but on the backhand side
we luckily we managed when we have been
looking around we managed to get a lot
of applications from people who actually
knew Erlang I think it comes from fact
that we are probably the only music
starts up doing erlang stuff yeah it was
random it just worked well then we just
rewrote the whole server back in back in
the summer there's also another there's
an entire chapter I didn't talk about
which is the design of the protocol
because that's not really relevant here
but essentially like while doing that we
not only had to design the server and
the architectural server but also design
a protocol that made sense and we didn't
do that and begin we just had random
messages I think it's for what we're
trying to do it's it's pretty good we
wrote the whole thing in over Easter
holidays IH was working so of course it
didn't have all the features that we
wish we wanted but it worked I mean I
had much more trouble working with
nodejs than working with our time I
don't want to be a troll or if there is
any node.js people who like here I'm
sorry yeah
yeah so the initial version was really
really simple so we don't try to we only
have one process and the process is
randomly located on the note and then p
clients connecting to one of the nodes
will just contact that one and we did
every single space is is a process
obviously there is a problem with that
which is like duplicating the message we
don't have a multicast mechanism in
Erlang so you end up publication all the
messages across the network just sent to
all these clients are remotely so we
started or we have the current version
actually is just the same thing but
smarter so every single space has a
repeater or a broadcaster on all the
remote nodes I'm still looking basically
for something to work with for this but
the idea that we're thinking of is
looking at things like raft which is a
consensus protocol that just is a new
consensus protocol simpler than pack
sauce we're actually every single one of
the nodes keeps a log of the events that
have happened recently it also has a
state so it received the events put them
in the log and then replay the log on
the same state machine and then doing
why doing that they also elect a leader
and all the modification operations go
through the leaders is going to
duplicate the log so we're thinking
about doing that to be able to rep to
run the rooms across multiple servers
but so far we really didn't need to do
that because as I said the largest event
we had was about 6,000 people 6504
remember correctly concurrent people in
that same room and it worked very well
it's sort of like was pretty high up
like it was it still was usable we
didn't have any delays everything worked
pretty well really so as long as we
don't have these really large rooms
we're able to scale pretty easily across
notes it's the only the problem only
starts when you have large rooms does it
answer your question
yes exactly as I think so we synchronize
the stage by your application by by
broadcasting modification or transforms
basically to all the clients and
everyone to actually update their state
yeah
the team is our when we started we're
pretty we're all founders in that or
most of us founders and Sangha and when
we started we were all like polyglots
regarding languages we didn't know the
same languages so one of the guys with
us new Erlang and oak camo play well and
so I learned from him and the ariga was
much more like a hardcore see programmer
and assembler level stuff so we're we
used to I mean the team we're really
used to switch in between languages for
things that we need really so an airline
just worked for the reasons that I
explained so let us answer your question
yeah yes no that's basically what we
would like to go so right now the state
is only on one single server and the
other dealer the other notes are just so
the space process gets brutal random or
is the hash actually to decide which no
to bhutan and then every single time
there's a client that connects that
joins that space and we figure out that
their remote we broadcast we spawn a
process on the remote node there's going
to be a repeater and then we send the
messages to that remote process that's
going to replicate so we sort of like
build our own multicast I want single
level multicast the goal is to move to a
replicated state so every now and then
every 10 minutes randomly between 0 and
10 minutes the server will actually
flush it state to a database and so when
it restarts it will reload that state
yes sorry
yeah it works it really works for our
needs we don't have that many
transactional requests per second we
just like use it as a as a storage area
we could have used the file system or
anything really would none of us really
had experience with media from before
that's all our questions nope okay well
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>