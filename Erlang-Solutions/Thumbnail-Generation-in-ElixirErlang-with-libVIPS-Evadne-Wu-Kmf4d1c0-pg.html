<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Thumbnail Generation in Elixir/Erlang with libVIPS - Evadne Wu | Coder Coacher - Coaching Coders</title><meta content="Thumbnail Generation in Elixir/Erlang with libVIPS - Evadne Wu - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Thumbnail Generation in Elixir/Erlang with libVIPS - Evadne Wu</b></h2><h5 class="post__date">2016-09-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Kmf4d1c0-pg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today I'm just going to talk about one
make some nails using a C program from
your Alex
occasionally Phoenix application and I'm
going to try to prove to you that is
solution I'm going to provide to you is
actually the best solution outside in
the entire ecosystem so so these are
takeaways first I'll show you how to
actually call this the library and
secondly it will be open source at the
end of this talk so problem is very
simple you have a huge image and you
want to make a smaller one and some
hazard images are so huge that it may be
six thousand by six thousand pixels or
even larger and sometimes it takes a
long time to actually generate some nail
and sometimes you have to fork out so
with the solution what you get is that
you are build a file and you click
Submit and and yours dissolution on the
left or take less than one second to
generate a thumbnail while the
conventional one are on the right which
you can find on github or take up more
than four seconds okay
so the requirements are pretty clear
just make uh something and make sure
that it makes it something properly so
what you want to do now you have several
possible solution the first one of
course is your Frogger process and you
give it some arguments and wait for it
to finish but this may be slow because
you have to load the code and you have
to wait for the code finish and then
some cleanup may have may have to happen
so we have to pay for all of this
overhead you can somehow create a pool
of processes and just use one and then
pre-warm another one and on and on but
still that solution gives you higher
latency then it should be same solution
of course as you run a custom daemon but
in this case you will have two trees
which is bad and the solution is to use
nips and nips are actually probably not
a best solution for image sampling
generation because if my memory is
correct one of the previous iPhone jo-jo
break up a power drill break solutions
involve a tiff library vulnerability in
iOS and actually use a vulnerability to
gain root access so you're probably
don't want it in your NIF the first
solution of course you can still operate
on binaries like you always do just a
burnin binaries but this will require a
deep understanding of how how these
the image files are specified and of
course you have to probably debug it
because it may be slow and you know 50
ml you have to understand being so the
one last solution really it's not your
right as the server and you somehow make
it supervised and you put it in a
supervisor and you just tell to see
server generate the file and it will
generate file and pass through bags of
half and everything is good because it
is a server somehow segmentation faults
then the supervisor will start a new one
okay so I'm not going to go into details
of each solution because we may be short
on time and one more thing which is
there are many many image summoning
generation solutions aldea this images
taken from the lib fist home page where
they also has compared multiple image
generation star parent generation in
libraries motiva so many generation
solutions and found a certain libraries
are much much faster so when you have a
lot of choices you probably naturally
want to go was the best one so live this
the lips is actually hidden around the
bottom left corner if you zoom in you'll
find a finally there that's live this
and it's it's there so so that's why you
should go with the best one really and
I'm not going to go into a why custom
theme may be a good idea sometimes
because in some no generation you don't
have to load a lot of definitions so
there is no upside in running a custom
demon okay so in her solution so the
solution here basically is that you use
a lip lip verbs and then you use his see
binding provided by the verbs and then
you your ADC program which listens for a
scenario in a center and stores
information interesting area out in
sanur error and then you write a module
supervised by pool boy and in that
module will then use our exec to
supervise an OS process and then there
will be links between the early exact
destination and you will worker so if
something dies everything doesn't get
restarted properly so it looks roughly
like that and so if you're see Sarah
dies basically if somebody tries to feed
you a bad image then this will die
this would out you but and the next time
you want to make a new one or well the
poor generating you and one for you so
this gets created again in this case
great again
so you isolate your solution from
malicious input that way so this these
are basic works like that so if you were
to simply run the binary from the
command line from the front PTY you give
it the width and the height of the
desired desired image and then tell it
where the path is and either spit into
Center error saying now there's there's
no file at the farallon's pad or a
little bit file or it would just
allocate a temporary file and tell you
hey the files there and of course it
would be real responsibility to actually
clean up these temporary files and to
prove it and you can see that you use
identify to check that file and you you
will see that the file actually is of
the proper prep aspect ratio was in the
proper bounding box okay so that's how
you using Phoenix this one line and
there is no time for you live demo
there's no time for a conclusion there's
no time for a conclusion but there's
some time for follow-up work I think so
so I actually found in a Multi multi
Road Earle exact issue open about a user
PD was internal conflicts so that
probably needs should be addressed
because right now I'm using a hack for
more information you can go and check
that project out it Savannah supervised
scale there
once I get Wi-Fi back I'll open sores it
and if you can download it thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>