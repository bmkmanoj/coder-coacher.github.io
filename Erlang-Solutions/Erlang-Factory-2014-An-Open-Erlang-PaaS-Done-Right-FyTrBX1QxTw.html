<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Erlang Factory 2014 -- An Open Erlang PaaS Done Right | Coder Coacher - Coaching Coders</title><meta content="Erlang Factory 2014 -- An Open Erlang PaaS Done Right - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Erlang Factory 2014 -- An Open Erlang PaaS Done Right</b></h2><h5 class="post__date">2014-03-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FyTrBX1QxTw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you hi everyone I'm glad and I'm
building a platform called boxes and the
main point of all of this is that I try
to concentrate on the problems that
arise with Erlang and operations because
operations is mainly the place where
stuff breaks no matter how smart your
program is and well you're prototyping
you don't care very much about ops you
just run an earl on your macbook and and
it's okay to prototype program and once
you have to deploy your software you
have to think about some configurations
infrastructure with layouts and stuff
like that and and once your system is
big enough it's always the case when the
configuration of the infrastructure is
like a part of your system and if some
problem happens you can just take
something in particular from your
writing system into testing environment
and just try to replicate the bug so in
this platform I try to concentrate on
this kind of problems for the
development and production has to be
home our iconic like and like there
should be no disparities between the
development production environment and
anyway I concentrate in clouds meaning
that you don't always think that you
have machines you have some instances
that compute some some things and they
when you write a program for the cult
well you have always take it into
account that these are not the same
environments you can have you can run
one instance of your application on a
zero or in a million machines at the
same time or you can run two instances
of your application on the same host and
you should be aware of that and to
facilitate that we use docker well for
some things and we are early adopting
erlangen zone which is currently in
heavy development so as you already know
there are too many existing platforms
that do
their job very well and there's no need
to call the existing ones because well
there's a lot of room for research and
you can always just try to pursue new
things and see how it works and the most
problem with current platforms that you
can use it that they try to make you
your application seem to look like is
the only one application running on the
whole system and this is like the
fallacy that enforced by the virtual
memory pattern in Korean operating
system and computing it makes the
process thing that it is the only
process in the system and has like a
system call interface well I'm trying to
overcome that so given all that i'll try
to reimagine the way how will the
platform of my chart would look like so
currently I'm trying to concentrate on
rapidly prototype in new apps or just
pull an existing apps and just make them
run into some infrastructure as quickly
as possible over eight being agile like
your managers like to call it so
basically you have to do hacking
deploying in advance scaling and life is
too short to think about writing Unix
commands that try to copy files into the
right position and there are a lot more
interesting stuff like algorithms and
distributed system that you have to care
about so I one of the relapse not just
building infrastructures and when i hack
i went ahead quickly i want to hack
reproducibly meaning i have to be able
to wrap up my whole application and just
give it to some other person and he
would be able to run it the same in the
same environment that you anticipated it
to run in for example my colleague max
posted an announcement of a skyline
application to Ireland questions mailing
list and it it's a simple available
application that uses him 20 and
features authentication with different
providers like Facebook github and
another's and it was and Joe Armstrong
actually took interested in and he
downloaded the dead up
and the problem was is that a pues no GS
and use some loggia scripts to compile
CSS stuff and we spent like two days
explaining how to install node and what
version of bash to use to run this app
and this is a stupid thing to do you can
suggest given and as a single banner
you're a single file system image to
some some developer and you will be sure
that the app will run this is like it
was done 20 years ago when you would
register pute a single application image
as a single executable file it will just
run this is like you get an application
on your mobile device you just download
it from app store and it runs you don't
have to care about installing database
or ready in configuration file stuff
like that and when you hack you don't
want to have no frictions for example
the main problem is that you don't write
CGI scripts but you write cleverer line
code that runs in a virtual machine and
it's compelling to bytecode and you
basically this came down to a problem
where you have to dynamically recompile
you're curled and then plug it into your
vm and then you hack and then wrap up
your code you have these excuses that it
works on my machine and then you base
people's time trying to fix things when
your work in a production environment
and that's why you have to have your
environment as close to production as
possible well for example most of you
develop applications your MacBooks and
when you write for its or neffs you use
equal and lenox and use KQ and you have
mismatches between these two
environments when you write applications
that rely on file system events you have
identified on linux or fa notify and
those they both are very poor interfaces
and you can use FS events in the mac and
again you have these disparities or when
you try to deploy to send to us you have
our 14 and this is like my mum
mmmm of crap and you just don't you have
to rewrite the whole application or you
just can't compile the port have to pour
it up from a mac OS 10 because the Metro
binary doesn't use the same interfaces
and Linux and just copy it so then you
have to deploy and if you have more than
one command to deploy you're busted
because you will waste a lot of time
trying to deploy stuff and if you're
working with production you have a whole
set of commands that you have to ensure
that the deploy is fast you will take
shortcuts if you can take shortcuts you
result on the wheel meaning for example
if you have a single beam module and
it's faster to just replace the beam
module in place and then reload it you
will do that no matter how your
versioning scheme works how your
deployment is handled by the operations
and so on so and if you forget to
something you will break production if
you just replace single beam module so
we don't have to help moving parts and
by moving parts i firstly any
third-party software like an operating
system you always have to take care of
an operating system you have to take
care of a runtime you have always to
figure out that you run the current
correct a parallel version you have to
have all those libraries and when you
adopt some library and for some
application like Redis which is a key
value store to to your environment it
means that you became a maintainer it
means like you adopt it's like your own
child because now you inherit all its
bugs and you have to take care of it and
meaning if you have to adopt them you
have to isolate their breakage as much
as possible because radius breaking
doesn't mean you have to have your
Erlang vm broken and probably
and also you have state meaning some
configuration files and resource files
like images or whatever and basically
this configuration disrupts your
productivity because you have to take
care about it and operations is like
about side effects in functional
programming because all you care about
your functions and and operated just
take care of anything else and you have
to anticipate it and basically deploying
infinity in state if the state of your
whole system is just like a variable you
change it by by issuing a deployed
command and when you use Linux you have
too many abstractions until on top not
on top of the probably beyond that like
users access control lists selinux I I'm
sure anyone who uses ceilings just turns
it off well who doesn't use just turned
it off once he gets into his system a
networking stack package managers I
guess most of people just try to avoid
using package managers and just copy
files into the file system and and even
file systems many of you don't need file
systems at all but you all use it as
given because they just exist and
perhaps you just need a simple level
devidas let's played out on your disk
and so basically this is a list of
features that nobody needs when they
write an application and for some reason
a lot of development time you spend how
to spend on overcoming the problems that
are arising because of you have these
implicit features in your environment
and I guess this is an example like
you've always seen a lot of times and
your sandwich machines and this is
probably something you would like to
avoid
I'm going to use package managers for
example you have this problem of half
deploys for example if you write a post
install script that updates your
environment and and you screw it up
during an upgrade when you have multiple
packages like that you have a broken
system if one of these creeps fails
because your system isn't in any of
these states that you anticipated it to
be for example you can just roll back to
a previous breaking release because your
system doesn't support it and even Keef
and puppet is basically a thing that is
prone to the same errors because there's
simply frameworks that let you mutilate
some state and this is like an example
of app get failing to install a kernel
and this means that you will have a
broken colonel once you reboot so some
helpers try to break obstructions by
moving some implementations of some
systems into user space so like net map
like accessing disks through a block
block block device interface bypassing
the file system altogether /
virtualization drivers thats lets you
not boofer stuff multiple times and you
which you don't need to do and when you
scale the most platforms to display that
you have a like a worker style of
scaling that you can spawn multiple
instances of something but it doesn't
always work depending on the way how
your application is laid out or written
and probably you want to be distributed
by default mean you want to use react or
and make sure that your deployment law
firm is aware of that or use raft or or
even have an OTP for clouds well you
have OTP that lets you manage processes
in the virtual machine but why don't you
still have an OTP that lets you manage
instances in your cloud environment
because there's pretty much the same
it's just a lonely one higher level of
overalls and the one thing that I trying
to work is that it to have an OTP for
clouds basically instances well I turn
out to call the notes because notes in
like in the air long abstraction they're
just called them instances so they're
pretty much like processes and you can
have a supervisor so except that i want
to have topology awareness meaning our
extended later I wouldn't like to have
hot migration and i would like to scale
automatically and have it at a cheap
cost meaning that you don't have to
offer provision so when I speak about
topology awareness is that I don't
always know that the application that i
run if it runs on the same disk or in
two different disks for example if I run
react and I have to know the right well
you said to me I have two copies always
reading to a disk and if my closed
environment doesn't know if doesn't let
me know too if I'm riding on two discs
or one meaning that if the disk fails I
will lose my data all together and my
algorithm didn't anticipate that and if
I have to note that do similar
computations and they get preempted by
the same scheduler on the same cpu core
I would have tea leaf shoot downs and I
will have to restore the cash flow again
and again and this is something I would
like to avoid and I would like to have
hot migration meaning that if I this is
actually an older technique which is
called double buffering it was invented
in quake and this is AG and the
reimagine a shin of this technique is
called RCU which is used in links kernel
and patented by ABM
which basically means that if you want
to update some up well you you create a
new instance of that value and then just
automatically ethnically but swirl
pointers and this is patented and I
would like to have the same in my calm
environment I would just like to spawn a
second instance of something that works
make it necessary migrations and if it
just works I will just swap it and make
all older instances teardown instant
version bursting means that once you
have to over once you have need to have
newer instances of something you can
just create them and and spend not ten
minutes but like a second for that
because 10 minutes because you know that
you have to wait 10 minutes until the
node provisions you have to you will
waste precious customers and deny
service to them and to avoid that you
have to over provision meaning that you
have to overspend money and probably if
you're an early stage startup you don't
want to do that and also getting back to
this problem of too many abstractions
you have that thing that if you have a
database you have your usual database
consists of a query cache a database be
three which basically works to layout
stuff on disk to have fast access time
to it and I have a virtual machine that
this all guns in and then you have a VFS
cash that's real ID into your kernel
that does the same thing pretty much
like a queer cash but in another level a
file system between again and then you
have a block cash which I'll do in two
players application that you don't need
to have because you have a query cache
and as I those these three layers are
inside the OS kernel and you can just
remove them and have all of this running
very hard work and that's for arrogance
and shines so free zone for those don't
know who what this is a long guns n is
well it's a pretty cool technology it
doesn't have an operating system
underline it
it's a bear virtual machine it doesn't
have any SP because pretty much as
simply just a rural problem so you only
always have to think about schedulers
and scheduled block in each other and
here you don't have it at all it boots
in only 30 milliseconds meaning that you
don't have to have to over provision and
you can create nodes interest instantly
it's fast it beats being on some
benchmarks well not just some benchmarks
by the beam test suite and it pretty
much that enables you to have an elastic
cloud so comparing to a measurement of
how long it takes to start a process on
my on this macbook it's just one one
millisecond and it's only 30 times
faster than creating a node in the cloud
which is not something that you can
afford for example if you run stuff on
Amazon and you have to wait 10 minutes
to provision large instance of some cool
 right and so Alan Guns N is
also here is a demo tape was presented
by a longer than daughter on the eve of
Prague a I'm from Kiev and we have a
functional programming community so we
have a message of Gerald the reading of
almost 8 million processes in 6 630 in
seconds and and those not
on 1000 notes and meaning that those
notes do you have to exist old ones
because you can just have ephemeral
services meaning that once you need
something it will spawn up and
ridiculously small amount of time which
is pretty cool so elegans em has is
basically a project around a virtual
machine called link link meaning 0 in
Chinese it has a free build service
nothing has have an open sore it doesn't
have a source that's available to
everyone yet the build service just does
what it does is just translates boom
beam files link and optimizing them and
it gives you a simple kernel image that
you can run on your Xen hypervisor or on
Amazon if you wish it's mostly are 16
well mostly because there are too many
hacks like trying to fake that actually
laying is unix because pretty much beam
is used mostly on unix machines exactly
with development if you find a bug out
there it has a lot of goodies and has a
lot of different decisions that you've
been finding operating systems like it
has uses plan9 file system this is for
accessing external stuff like other file
systems in Linux or accessing word
providing interfaces like broker fast or
sisyphus on Linux it has google fess for
persistence meaning it's not a real file
system because it has a tree like gr key
but it makes you Alec I disks in for
megabit chat for megabyte chunks meaning
that this is everything that you need to
provision your level DBS or annoyed
youjizz or whatever on your disks it
doesn't support nips because nips kill
the scheduler and you all know it but
still try to bite the cacti it doesn't
have a net colonel yet well it's working
fabulous basically perhaps the OTP like
for cloud will be embedded into
interlink it doesn't have a cell working
pretty much because is n dot one is
implement Bert Bert decoder is
implemented isn't if but I have it by
spending so it will be result soon and
it doesn't have a colorant tracing it
has its own way of tracing called ink
trace it's not so mature their lungs one
because it doesn't love you too much
stuff as nice as you can do it in beam
it has its own profiler and if you need
to build debug versions that you can
inspect with gdb you can use this
configure option with the rebar plug in
the build images so it doesn't have much
documentation yet pretty much all of the
things that I told you we're using
either read from elegans and website or
verbally given to me by the author of it
who by their actually you can talk to
later maybe tomorrow I think so I think
this most of this can be found on
Twitter of the project or probably will
be documented better soon alexia works
there a jeopardy works link the open
flow switch works as well I've seen it
beating the crap out of beams
implementation well beams image but I
guess you can hear about that not here
I've poured it react pipe 1 dot for
basically I if you done just on the
single all because there is no net
cranial and react needs that Carol and
end to all the web framework works there
as well actually the n 20 samples
include then configurations that you can
just type read link building imagine
just have the image running on your on
your local hypervisors we're just
renders hello ward pages and chats and
whatever we use a lot of shell scripts
and AC program to use its live Excel
just to avoid operating system overhead
again
to avoid the overhead of linux on
spawning instances because you can spawn
instances in 30 milliseconds you use in
label excel and if you x api you have to
waste another 10 milliseconds for that
so this is like working progress that
should be on github soon if you just
can't use planar long guns n or your
miss port in the traditional sense you
can just spawn and o camel instance from
the protocol open marriage you can do i
see with unix using the plan 9 protocol
9p where you can use rump rump is a
pretty cool projects project allowing
you to have some components of a net bsd
colonel wrapped up into a single binary
some application like beam or MongoDB
good for a bit so and wrap it up in a
single image and run it in ring 0 on
your hypervisor which is a pretty cool
research project dumping it easy guys
and now containers containers is
something that a proxy my approximate
the vision of having a single image
deploys like you have in their own guns
n you can have them on linux machines
and you can write prototypes with that
and using containers we tried it
prototype link link features on top of
beam and make sure they work with each
other so for containers we use docker
docker is pretty cool and pretty hipster
and it's like everywhere and by the way
dr. is written and go and probably the
key feature of go is that it you can
deploy go application as a single binary
because it statically compiled into a
single file and it's pretty cool and
this is pretty much the reason why some
systems guys you choose go because they
just can give you a file and it will run
but on the other hand haskell can also
produce a single static binary but it's
not popular ligo probably for some other
reasons not just static confirmation
right so we also tried using Jones owns
and jails but zones are pretty cool they
actually the first container technology
ever available if i'm not mistaken jails
well jails are on top of freebsd and
freebsd was used by whatsapp and they
got bought for 19 billion so i guess i
should check it out and Nick's OS links
OS is actually a pretty cool technology
that allows you to express the system
using a functional language well a
declarative function language and just
have some interpreter solve your
description of the system and figure out
all the deployments and you can have
almost as many deep atomic roll bags
have to make deploys and whatnot so
we're not using next OS but I guess it's
pretty fun and it shares a lot of value
Swiss boxes so can they allow you to
separate code and data basically you
have a single image and it just
brilliant employees of the other one and
it use it the same data it's pretty cool
you can have instant deploys and you can
have no configuration as all you can
just have some arguments or make your
application pool need required context
on demand and to facilitate like
functional data we use DFS which the
copyright file system it has snapshots
and pretty much snapshots is the reason
why we use gfs and it has also cheap
house cube volumes you can have
isolation on the filesystem layer and
you don't need to have a huge ugly
volume manager like AV lvm and and we
don't use btrfs because it doesn't work
for us and so all this comes to a fair
time of lambda ops is electrically I
always love to use the half-life logo to
explain that because there is a lambda
me and none of us function and instantly
circle meaning to closure and
it has a two meanings like a
higher-order function so it kind of
pretty much useful to explain how
functional things on this logo so lambda
ops functional deploys meaning it's
easier to kill something and create
something from scratch because it's
understandable and it's and it should be
repeatable than to just mutate some
values and make sure a deploy succeeds
so it means you have single image
deploys it means you're AB defined
resources it needs to like CPU disks and
it always know if it runs on different
discolor if it's an SSD and this is what
you need in a cold environment basically
have that copy updates which are see you
thing or double buffering reckon you
could just create a new one because it's
so cheap so you can just have ten tens
of thousands of them them in theory well
basically having things cheap makes you
have makes you over provision stuff
without any regrets and financial losses
I guess and where you crow this
configuration basically you can specify
the same context in the same language
that you ripe you're a pen and it's
distributed by default because you run
an aerial clouds and use libraries that
facilitate that like react or and it's
instrument by default but this is I
guess this is a whole other topic for
discussion meaning that you can just
have a profiling version of your code in
production but your instrumentation tech
technology should facilitate that I've
d'être stuff for solaris and it's a
whole other from the work to discuss and
to do that we use a lot of different
tools that we roll or that we replaced
or that we use from other suppliers and
basically we're making new tools by
deleting called for music existing tools
which is pretty fun and like having our
own continues building system which is
pretty stupid like this robot from the
moving from the cartoon most of the call
will be available and get happen so some
tools are variable there on my own on my
own private get help this these are
tools like active which is a replacement
first thing that doesn't hug your CPU a
singular is the module that reload with
other modules in runtime
filesystemwatcher buildings for dokur a
flame graph profiler that you uses
Erlang trace and other libraries that I
will be expressed and in that we talked
about in 20 so that's pretty much it
stay tuned and other interesting stuff
will be released on my github and thanks
all for tensions and now ask your
questions yes
well basically the vm is the u.s. yeah i
just wanted to user length right so well
I guess Erlin doesn't give you
everything that you want like static
typing that you have to have to use
during leisure because you just want to
and there's open marriage that does that
it's pretty cool and I guess there's
hell vm for high-skilled but it's rather
dead than in life unfortunately but i
guess the approach of having like ramp
kernels and integrating them with
existing apps or the app the this new
technological osv right that builds has
a linux compatible interface lets you
like in bed MongoDB into it so this
should be pretty useful to any other
questions yeah can you talk about some
of your experience specifically with
Rowand
well I am basically just boarding stuff
now so I'd only run anything production
because well I just can't see the source
code I've only seen it through the
shoulder of Maxim who's developing it so
this is pretty much research you know it
has he arrives right yeah he told me
he's coming tomorrow I think ok cool ok
so i guess there are no more questions
thank you all for attention and thank
you for grammar and stay tuned
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>