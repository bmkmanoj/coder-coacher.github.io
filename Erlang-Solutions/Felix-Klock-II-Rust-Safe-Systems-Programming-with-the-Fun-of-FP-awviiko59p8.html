<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Felix Klock II - Rust: Safe Systems Programming with the Fun of FP | Coder Coacher - Coaching Coders</title><meta content="Felix Klock II - Rust: Safe Systems Programming with the Fun of FP - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Felix Klock II - Rust: Safe Systems Programming with the Fun of FP</b></h2><h5 class="post__date">2014-01-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/awviiko59p8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Oh in very tiny phone here I have a
haiku courtesy of Lindsey goober and in
turn work for us for Mozilla it's
somewhat beautiful and describes
Brussels succinctly in a way assistant
language pursuing the trifecta safe
concurrent fast it's a very elegant way
of putting things here's another way of
putting this not quite so well good but
I think gets the point even more so
Russell's like C++ grew up and went to
grad school cheers now the sewer line is
dating SML so that summarizes in a lot
of ways the features that we're looking
at here breasts the language that offers
to Zack allocation precise control of
your memory layout it has a generic
system but it uses my own organization
to get efficient execution miss them
from her lying and inherits safety task
the currency or whether it's inspired by
relying to have safe task basement
currency and I know some notion of task
failure and from SNL it has type safety
and my classes sort of come from Haskell
I was tempted to quit Haskell
parentheses there but I said it stay
true to the original closure and the
destruction behind everybody has seen
structure of mine nowadays right why
wouldn't you how about even es6 so
havent give you the overview of the sort
of big picture of what rust offers a lot
of people say what the heck is Mozilla
doing while are you spending time on our
new programming language it's a really
great question it make any sense to me
either when I was first talking to
Mozilla but coming working for them and
it's actually really simple answer the
end web browsers are really complex they
are effectively operating systems in
their own little sandbox and they have
to deal with this crazy security model
they have to deal with the network they
have to have
performance nowadays for the kinds of
apps you see so they're really complex
and meanwhile Mozilla has two for its
mission continue having a user base
hence that means that we have to be
competitive in the marketplace but the
same time we want to innovate we want to
provide better experiences for our users
and so God competitive performance which
got a debate as well and it's really
hard to do both atop the standard
systems languages that are out there c
and c++ so mozilla research to implement
their next-gen web browser called servo
which the source code is out there on
the web for you can see it yourself
mozilla is using and implementing the
language bruston this works let's see
together so that's the motivation for
what's going on here now I want to dive
in and show you good across the fastest
madness i have to admit I've seen the
talks yesterday today I realized most of
you this will be bog standard for most
of you so I'm going to go clear these
slides and just you know try to get to
the funny stuff at the end earlier on so
our goal here is the original
performance gap between Satan unsafe
languages and the designs us we made
ours they fell out with that
requirements there's some things that
don't quite match up with typical have p
style things but you know there's
usually a good reason for it the
compiler and also to know that Tyler
standard library tools or all my sins
that are Apache duels dual licensing or
it might eat Apache so the language
assistance program in c and c++ dominate
this space and the systems programmer
smile when i was in undergrad the
teachers all said i don't care about you
know the five and ten percent
performance you know change your
algorithm getting to XP of important
context or better speed up GT your
algorithm but serious informers they
want possible you want to have the right
on with them and get that last 10 15
performance that they have lately tight
controls so they you see to get that
kind of thing c and c++ butters last not
safe ask us c and c++ um asleep involved
have these horror stories and we want to
attack these things so over this is
south h i think there's a great quote
from robin miller well type programs
can't go wrong but i don't think that
quote really properly conveys what was
really going on rather builder as he
really says had you know capital w raw
it was a formal notion of a certain
class of air all going on there are
other errors that might happen just work
going on so the pointer is that at asus
intel who identifies sort of class of
errors isolate them and that's good it
helps a lot it helps you reach me by
your program helps you have more
confidence that actually might do you
think it does and so during my graduate
studies i came to realize that there's a
preps more appropriate phrase here this
isn't the exact phrase that father point
but well tie programs help you assign
blame there's going to be unsafe
components name real system and the idea
of type system is to help you figure out
who actually is at fault they're
completely typesafe language if
something goes wrong see a crash well
maybe you're a pilot or maybe your
runtime library problem or there's
nefesh really do help you isolate what
might have been the issue um the other
thing is that you know there's this
notion of going wrong in terms of crazy
system crashes there's also other kinds
of errors and seen code can have those
kinds of errors what we want you there
is to have them fail old-fashioned this
is nothing new to the ER bank vault in
terms of you know having a sensible
response to failure dishes and just
isolated
to a task and then having some sort of
semantics for how it affects other tasks
okay another detail is that C is very
popular because there is a pretty easy
it's correspondence between the code
that you write and what machine actually
does the actual layout of memory the
actual instructions you get you
disassemble a see routine and then you
look at the original source could be
like oh yeah okay there's a lot of times
of course one that makes things easier
to work with when you're trying to deal
with that low level stuff and burgers
let people control us the little details
and we want to preserve that
relationship ourselves or we retain
memory safety so we want to sure that
the type system can actually make
reasonable inferences about what the
program is doing and we also don't want
runtime costs that's the big one that's
really tough oh there's a quote here is
a great blog post by Robert o'callaghan
and ecoins of race in it or uses of
raising the zero crossings trash talks
about for example abstraction of
factoring out of function in your system
into a subroutine and there's a constant
doing that if you actually do that and
you your assistant doesn't re in line it
then you know there's a function call
overhead or cement color analysis that
you might have lost out on the other
hand if your code is smaller because you
factored that it's a trade-off involved
and in any case is a good idea an
assistance foreign language to provide
some attractions where you can say this
abstraction provides no cost at one time
over what you would have written
color-wise so inline functions are
example of that something where you
disable it's going to go back to people
you have
stupid better modularity mattress for
structure code also in it programs know
when I talk about 0 plus abstractions
I'm talking about the pen time cost but
the attractions that we haven't lost all
the time you're huge cognitive overhead
how you have to think about mix and
that's just life you can exist as
programming you know you have to think
about new data recitation in their
choices about how you're no lay out your
memory where there's no stack allocated
or heap allocated whether you're not
objects in line at other objects that
sort of thing but at least in the safe
parts of your code probably check all
your assumptions and really ensure that
you do not violate the decisions that
you've actually made that everything
actually makes sense with the same flaws
okay so let's dive in and see some rust
so I'm going to you know jump right in
here this crowd great expression
oriented that makes a heck a lot of
sense for functional programmers so you
know you add babies and compare them and
barring this is a bargaining let
expression that returns the result of X
30 to 50 you have more complicated
things we've got if expressions that's
just another let expression there and
then you've got function definition
invocation huh this is a slight like
this FN add 3 that's not expression
that's actually a motion definition is a
scale item monotone but you will get a
closure sweet God the real point here is
that you want to show you know invoking
functions in a context here you go find
results but the thing is that we want to
appeal a C++ programmers hence you know
I love expression arrays and stuff but
not everyone does so if you want to be
state and rented you can be we've got
structure for things we're basically the
same code that I go up there or ya there
this is the corresponding code using
return status so if people see this more
verbose other people see you see this
beak we're actually going on okay so
um we've got that gross I'm not missing
too much time on this except this point
out that our convention inform a
provocation in rust is to write them
with slightly mention this rule oh they
have ! your name and their stuff in the
parentheses on that began the details as
a parser and how it works to actually
make these things work out except to say
that one is that Bruce ! yet and that
eases lexical analysis forcible I did
will say for any tools oh so the point
here is that there's a couple APRA's
that i'm using the talk and the
interesting one relates print line where
unlike the seed printf statements we
actually have a static checking of your
templates trying to make sure
corresponds to the artist you provide
and I don't mean just in terms of the
number of artists I mean that the types
that already specify are you used all of
it is a this curly Coleman dese attacks
struck knees little weird when I first
saw it but reason for it is that it's
it's better internationalisation that
produce l % stuff in terms of being more
flexible how you actually makes about
your arguments for different languages
deploy line and you don't want to
mention the clone ? down here to fail
that's a very special thing in rust in
that the other styles and contestants
will dislike inside a decimal that it
gets out both the quality they put the
kuwan ? there's basically a young enough
metadata that we admitted in our crowd
code that will get nice and pronounced
of the layout of your structures wish
you know for someone coming from list
it's like Porsche you want that why
wouldn't you want data to be prettied up
nicely but when I was we're going to see
it plus I
this kind of thing so joy how is contest
and I'm not if I'm going to plant
hangers we have them next seventh
they're not barely poisonings that
feature that may change after we do I
point out and so they're not something
that scares me back to release right now
we haven't really spoken of the others
um so your ability closes you don't want
to bet vault be almost he's a great idea
waiver that CM the opposite actually lot
like see notes except we use a match
statement to do dispatch and also that
just because we call me noms oh ok our
match date we have all kinds of things
here you have to have a connection a
sense and you have to make sure that the
cases are exhausting your mash typical
stuff but the other thing is that we're
using the working on but we really need
algebraic data you can attach values to
these next the cases involved so which
there's even rumors into like getting
into doing housebreak data or into
programming by first writing you notes
without this stuff my dad about this oh
so we have these Russian vine it's the
same match ball that I showed you here
we're fighting n for the one case x and
y for the two case and then doing some
foundation on me start your data so we
have something simple or discuss and see
plays up and down with the fields in
memory in order declaration and
according what size they have you know
okay whatever why I'm against ranch
cheated okay and a lot of analysis
ensures that you actually visualize your
fields before using them so you're not
making an initial Isaac data off your
stack because the positive force you to
actually provide visualization so here's
just the syntax for this but this is all
pretty straightforward struct pair
having two integer fields the
initialization syntax here we create a
pair is a nice nap allocated with
bindings for with the you know a skills
and filled in that I three and wife took
any value for and then here's our record
extension
passage we want to create a different
copy or record or stuck with just one
pill change this is apps for that it's
well as things were hopeful probing
person I think the only grooves on this
but I suspect other people might not
even know it's there and writing out
what it feels a little time because they
don't know which would make me a little
sad but it's like we have closures so
first of all we have C cell function
pointers you know just a word pointing
to some function either a rust function
or c function but also we have closures
passive now so you measure capture
possibly requirements this attack for
them is inspired by woody blocks so
here's some code i'll create a
structured pair here at p34 equal to
pair 3 for our closure syntax we've got
um those purple bars for us and then
we've got in creating a new pair from
t-34s and see the p34 is part of our
environment and then we're just closing
operation and so if you are upgrading to
do next adjusters one that inserts one
for the value for the isolation one
insert stupid value vs and if your I've
example use of that print line that i
was talking about with the fun going ?
so you actually want this you get
printouts of mix of this format and like
I said you don't have to write that all
the routines for one ? metadata it's
just there for you already but if you
want to write your own for everything's
for other formats the suppliers go to it
okay so what about all droid programming
is important right and it's true this
important important paradigm and russ
does have
test methods interfaces but more to
explain them I have to first explain
pointers in rust so a rust pointer on
the type of it is for judgment there's a
bunch of different kinds of pointers in
rust and one of them talking about for
the most part during this early brother
talk is what's called a bar owner it's
meant to be represent a pointer to some
own portion memory and the syntax for it
is ampersand the type of the memory that
your borrowing so here we're borrowing a
reference to be value to the field
excellent staff we're buying that's why
and then be reference to the star writer
too sexy and you try to actually do
things like the pair pointers to
integers it doesn't make any sense so
high traffic pointers you're going to
actually you Tate stay tuned yeah winter
well there's two places we have two
fairly beautifully explicitly recently
do this because people misunderstanding
what's these goals and concerts of bugs
were forcing them to actually write that
acts as a beautiful field and also right
at the point of they borrow it that
they're taking it beautifully this also
ties it to our borrowing analysis that
only talking a little bit about later or
a salute to it so here this code here we
have movement function that takes in the
pointer and says I taken something
that's clear of you open it and the
static type system is going to borrow
checkers and ensure that there are no
cases of this pointer terms there's only
one reference to that piece of memory
within this task and thus you got
guarantees of noises that are pretty
useful for a presale code okay so like I
said there's different kinds of pointers
in memory and rusts the three big cases
that are sort of built into the design
of the language at least my head their
staff allocated local memory
borna scene and they can take references
to that via the anchor standpoint
there's an exchange heat where you also
have a look memory so that notion gears
that ass though the memory nightstand it
also owns memory that is allocated on
exchange heat and but the idea of dying
remember is that there is one owning
pointer of the memory of baggage gene
chief this task can have more than one
going pointer of ism and there are
borrow pointers into it they all have
lifetimes that are better bounded by the
lifetime of the only planner so that's
restriction on memory has that one
single only pointer also that's also ISM
kind of linear type cell system
contacting one of you this case so some
programs are harder right that way we
acknowledge that and so if you need to
have more than one point early to data
then you have to use some sort of
automatic memory managed memory and
that's the managed heap but the
important thing here and this is a very
well girl I'm style or design decisions
is that the managed heap of the GCE or
reference county car is managed it's
only for that one task and we force that
those references cannot leak out of
their tasks and grab our own memory from
the GCE those can't leak out to other
tasks either okay so that's sort of
interesting and in case you didn't fur
is the reason why own memory is
interesting and different from intra
task memories the fact that there's an
entire task list remember you have to
transfer own memory from one task to
another we'll talk about that a little
later so like I said you can borrow
references and we have various
meta-analyses for ensuring safety here
oh and one detail about this you can
borrow this is the GCE anything I borrow
you deal with a staff memory or of own
you get static insurances that borrows
won't go wrong if you actually convince
the arch after that your code makes
sense it says thumbs up then at least in
principle it means that you're okay long
scenes failures but the gcp we can't
meet us there were attempts to make
static rules that would work in many
cases but we founded they were too
difficult to use and they did cover all
in case you care about so for the gcp we
just have dynamic enforcement of
borrowing will so if you borrow a
reference of tcd there's going to be
some dynamic checks basically a little
red barriers to ensure that you don't do
anything too bad to yourself there's a
lot of rules there so let's get back the
method to that's what I promised to talk
about at some point so here's that
struck that we had before and here's
another night across so wait clear
methods in rust is you know many more
years drop definition itself instead you
have an in after the bats several people
areas or items and so this is a thing
that finds two methods prepare one that
takes that called 0s papi 0 and s copy
that's going to take in a pair of your
turn impair the self you were here is a
special thing signified this is a method
declarations must be the first argument
for the method definition and i can
replace X you're taking understanding
yourself so the important detail here is
that since there's no ampersand in the
self in the first case 40 X copy it's
going to make a copy of the thing you're
calling on and the copies medics apply
there versus the replace X method is
meant to borrow the memory that is being
called on and thus be able to mutate it
in place so by here by creative hair
with the valleys 56 I can make a copy of
it with a 0 x value and t 06 there
and I replace X on the P tab and then
one actually do my standard print line I
end up getting as you might expect p
temp has now 17 for his next field in
physics modified place but these 06 are
happy this is all pretty straightforward
we have generics to this is you know the
bread butter or functional core members
so nothing to do here in fact I think
some oils in a talk yesterday was
showing off the option tightly you know
the standard sort of thing in terms of
how to get on it but passing a default
value I'll just point out the syntax
here is that the parametric safe get
function is prioritized over tea and
that binding is expressed via being
first set of angle brackets after safety
yet and the uses of tea up here at a
signature here ok so that's nice so
here's actually a concrete example
interesting a little bit of a nursing
program so i made this structure here
two straws of dollars and euros for
representing different kinds of money
and then i made a trade admission trade
before so a trait in rust is a way to
basically is my interface it's not
really well I don't know Scala want to
say what it is or is not great lakes
college I suspect it's not it's it's
much light interface with some caveats
and the point here is that this gives
you founded on more piece of
mathematical I morphism because the
trade tells you what methods this type
has to support whatever imitation of
currency go yeah it has to have a render
a treat to euros method or render his
back string and two euros gives back a
fresh set of euros and so add as euros
is going to take in two instances of
some type C and that type C has to
currency trade and then it's going to
first convert each of them to euros and
then use their a mouse and add amounts
together
give told some so I'm just going to you
know make sure that this is totally
clear you meant rates for structures of
your page four dollars so just formats
the the data five hundred dollar sign in
front of it that dollar sense not
meditation and he literally a dollar
sign great question yeah I remember
those CDs so I said there were three
classes of pointers earlier the tilde is
that we didn't obey up a cut a class
that's allocated on the exchange heat so
you can think of the tildes trick is
being an own strengths as an allocated
on these change heated to be sent other
tasks there's subtle details about the
rotation here that I don't wanna get to
plenty of that's the most important
things that's a piece of Owens data but
since this heap allocated on the
exchange heat you don't need to help
margins because if it weren't a passing
a string along and you did if you didn't
use the key because until hot new memory
off before on your staff to pass along I
think Pascal fights right Oh terms of
how explicit blanks for all this
character arrays I had in former
lifetimes work in a Pascal compiler and
I had to deal with that so the point is
that yeah that's what that means there
it's just that some strings and jalapeno
the exchange heat good question so the
exchange rate at least support of google
this morning was a zero point seven
three dollars per euro so to convert
dollars a year over to take the amount
of dollars and then multiply pleasure of
my 73 and then turn that back an integer
the as keywords the cast its pays for
this I yeah not a lot of claims scooter
that euros most of our invitation
because it's already in your us and use
the euro simple in front of
so oh let's look at a couple examples in
the stuff i have a function that
actually is this the same function i
showed you earlier that's gonna taken 2
is currency and add them together so if
i apply this to is the heroes then you
guess what's Bruce's for 100 200 I think
100 is 200 we're looking for here and so
300 what I'm hoping to see and when I
ran it I got three good okay so this
little harder dollars was 200 oh if the
exchange rate 173 so there's something
there about two times 73 and stuff but
it's just my house is 219 I believe it
um and here's a the next one if i ad
dollars and euros so what's this one's
supposed to be any guesses 270's let's
see what happens you actually get a type
error because this is generics and i
said this thing has some type seed as
opposed to the same seed in both the
arguments and you can't do that the
dollars euros or different types that
brings us all the way back when i said
originally hoping but I for a
programming so we do have this is not
under my programming this is more like
ml which is great when it works but if
you need objects you have them as well
so to make the way we do objects and
rust right now at least that I think
it's going to stay that way is a trait
normally is used as a pound a tight but
if you put the trait behind a pointer
type late winter schedule like ampersand
what that effectively means is this is
ashlyn alpha Pat pointer it has a
pointer to the data to be passed as one
word but it has a fat one or two words
because in seven words of the table for
handling instances of that concrete idea
being passed this gives you often more
invasion at least in terms of dynamic
dispatch with
so now now we can actually add two
different kinds of currency together
using a few euros which you can see the
body is the same as addison rose
important thing is that a lot of kind of
pace teachers slightly to reflect the
fact that we're talking about then
heavily dispatched objects the second
piece this actually wants corrected it
okay so oh that's like a quick move
faster were you impressed itself I want
to try to jump in to examine C++ it's
actually really sort of terrible example
in some ways but you gotta know
sacrifice sacrifice things when you're
hot like this terms if so if you all see
the long as we go he'll be
understandable this would be some sort
of C++ code where you've got case and
you can eat cakes there's flavors in
case chocolate vanilla cake you know we
make it's got a flavor its customers
twice in line and people eat slices of
cake so I might have ended my birthday
cake is all C++ code be sure your I'm
not exceeding right house not this is
not rest um so you can make birthday
cake we can print a status number big
day because I need two people see you as
that as this in terms of s people yes we
all have some methods that Watson on the
entire cake and then for some reason
somebody at some point matter another
eat at least that says look at the turn
of this method or this function the cake
will have at least count pieces within
it or the kv because it is tired we go
on for some reason the first reviews c++
cow carcasses i'm not sure why yeah
because it's hard to exact my so saying
that this is before i just want to do
this thing yourself up as I work through
this code view each slice really simple
right just ms become you just give us if
not eat at least a little bit more
difficult they've got a few later here
with a trap how much good eatin they
make sure their cake you know actually
has more than zero slices and they up
they check another power speed so far
and then they eat slice slice
life slice until they finally eat enough
okay so that's that's all okay and then
we'll eat tire you know entered I and
repented I and now he wants to use it so
well I figure out got at least method
and I've got my first license right
there I'm done hot oh let's see test
this out now I've got my pic of her big
maybe 15 slices and I can you know make
sure it's got 16 slices at the outset e
2 slices slices were there that you'd
entire things you know thanks Esther
there that now who knows the joke about
tell this Coast puppy oh it did indeed
have some tea slices and then 14 slices
but then it ended up a sense Isis
pendulum the problem is a force that it
was a total mistake that met eated
higher in terms of it at least or at
least it was mistake do it this way
because we have the AC plug because I'm
passing in the number of slices as a
constant reference in that argument
there and so every time it's checking to
see how many slices it has and it
prepares a medal to the freshman 12
professional assault is changing and so
it's it's notion of how much less needy
is going down as eating even though you
didn't keep that threshold at the
original amount it's a classic boston
logan reality here is that no that was a
stupid example but closing clucks are
all too real hence there are source of
major Hayes so we want to make it harder
to make these kind of slave states rust
it's not impossible thing you can still
make me to stay for us so express all
the great old systems programming
actually did before it and bite yourself
in the foot or shears on foot as you
like but you know which my garden in
particular you have to opt in
see a code that will lie awake the
static type of guarantees there's
actually a keyword us unsafe doing so
okay so what does the cake look like in
Roscoe's morning sir you know make sure
people double-check their thinking about
this is it's actually quite similar
there's a flavor with chocolate vanilla
I've got my number of slices there for
the cake that I've created in structure
the cave I've got no very similar
methods for it they dig the status you
know the entire page same thing here
I've changed this with the unconscious
reference to being a ampersand int it
may look the same as what you thought of
C++ but this now is actually more like a
seed pointer type of point or two
against that recognition connect the
referenced out explicitly but it still
kind of the flavor of the earlier code
for most part it's not quite sick
constancy both bosses have the same
status as immutable pointer in rust but
still this was a foot this is this is
this you know very much similar before
decremented over slices or C++ and this
actually is quite similar to it I eat so
far accumulator and the you know st.
logic pretty most part when cheese i
made this coast guys gonna slide put
these statements the same lines get fit
but it's really the same logic for us it
here so that we just go to mention this
ok this logic the same and the main
functions the same so if i sold you know
crazy little goods that doesn't actually
work you know where were I thought was a
fix this problem but i was able rants
code and the answer is no of course can
write this code to compare can complain
to you it's going to tell you you can't
do this borrow here of the number of
slices the cake because it's also being
borrowed elsewhere and a particular they
borrowed as a beautiful thing you do all
the bars in the middle it's tens but uh
you can't do a google our enemy will
borrow bet that there's Alex a comment
so this is the bottom eight pointed us
to development and you actually can
easily fix the
copy of that I'm slices a headline that
he works that this allows fine and runs
fine and of course that fixes clipless
c++ as well but that's the point the
point is that these rules to help catch
nutrition problem okay let me go through
the concurrency oh so like I said
there's something somewhere early model
is here so we have a staff and there's a
GC eat here or some sort of all part of
the United equal share references and
there might be multiple tasks going
around we're going through some
discussions right now we have data in
style credit where the pastor have to be
lightweight and a multi-class on to the
assistant processors but we also once
work one to one style deployment if
possible with same service their
libraries released as common sense and
flowers as possible so we're on that but
pointed ears is that you have set their
tasks with separate piece and then
you've got these change he finished
earlier so if you do an allocation with
that till design language before it's on
the exchange heat and then if you want
to send it to a difference task you have
some channel you set it on and then it
gets evaluated on the left hand the
let's get task and belongs is owned by
right to task okay oh I'm going to the
top of the most because it was kind of
fun but I don't too much knife work so
the main thing I want to sort of moving
out here is that I was going to get the
code for I was Lucas in the examples
Berlin cope with with buffers and things
ruins of the tasks off meeting each
other and maybe start thinking about you
know other interesting kinds of programs
it's a good one that where the message
to pass along is the 99 bottles of beer
song and so I just want to show you an
example amount of that program I'm sorry
this kind of alternate tiredness code
but so like piles in my program here and
I want it our proposal slow we're gonna
sue so the transcripts here they're
actually work tasks and there
theater leading isn't know there's
something there leading up to messages
that you see um it's counting down
nicely and the funny thing i want to
show you as I've seeing myself well know
when some people when they're seeing
this song they just singing but other
people they sing it and they they drink
from the wild same time and so when you
do that that might get a decent mess
with you into the system to clear the
after drinking here at model as in
recent some crushed your bike's room and
just changing one of the bikes either
adding ten or Stephanie 10 depending on
a coin flip essentially I want to show
you what that looks like um because i
think it's illustrative admission
asker's rust so if i compile this the
entropy the eurasian reason why i'm
saying anything cheap languish
philanthropy that you should look up the
horse is integrate that I appreciate you
it's interesting sorta same thing so
that wasn't my expected which I good I
mean okay so first of all this is doing
something interesting you can see that
it's actually degrading the test of the
bottles of beer song as it goes but I
meant to see a sailboat know what that
is my terminals resolution things
getting ok so there was a failure in
particular this failure there was no
unsafe code there were no unsafe loss
like whoever does to occur point is
controlled in particular here the filler
was that when you prepped it a bite you
actually ended up with a string that
wasn't utf-8 so I'm going to convert the
byte array back go straight it wasn't
properly formatted and solar system
failure teen and made the task shut
itself down in terms of writing
instructors the staff in a sensible
fashion and then sitting all the tales
that others mastered feeding on not
communicating on so that they receive
all those channels percent of them baby
will have failures so you can see tell
your computation happy there I need to
talk more with your link folks here to
learn more about some the details about
model there but because I think we have
a lot of learn from some of the lessons
of your line groups have come across so
there's a lot of stuff that I didn't
answer the covered his talk um there's a
really interesting I didn't talk at all
about lifetimes there's actually some
syntax we have explicitly saying the
lifetime is for a particular pointers
scope and that's the only current source
of subtyping in rest replying that ties
in tomorrow tech rules we have and also
when you have data structures you've
actually dynamically freeze them
depending on what their bar of state is
then unfreeze them depending to make
sure that basically nobody modifies them
to catch that and finally initially i
posted before we do have filters but the
ones I showed you only work on task
locally you wanna name closure to send
it to another task we have a different
form for that one shot closures where
the keywords rock that there's a sadness
attacks words anyway alright so our i
just want to point out that there's a
small group of us at Mozilla research
work memorize this Brian Anderson Alex
pregnant I sell equal Matt south east
walton there's a whole bunch of pasty
deterrence who have worked on this
another alumni great awards or special
mention because he's the person who
first invented rust and this work quite
heavily boosts the team for quite a
while um and then we have much larger
brussels community that you know i can't
possibly more members back so come and
join us this is fun stuff and it's
who makes that sufficient all right you
mentioned you mentioned the likely
processes like that again of many
nursing home in the rap so you do user
space scheduling something like that oh
we are trying to reinvest the end-to-end
versus one to one thing we do have a
user space scheduler or at least a
library it's going wide way to meet
other standard library that's implanted
to switch between stacks of a task but
there's members of our community who
rightfully are saying that there's cases
were no want to use a lesson style OS
the OS the schedule you or have more
direct control entirely just you know
not be stationed at all I think what
they want most to be able to have better
control over scheduling stuff so the
answer is there is a user space good
where I think least one point of view
but I don't forget the only long-term
task force everyone using it but buggy
fingers into them and then to them m2n
work well the goal we hope is to be able
to support both 121 and at the end but
this is not an area of an extra rocket
are they do it i'm not sure what other
assistance I even booked you to see how
it's done my question really is how do
you do preemptive I there if you do then
how do you print it because it's really
difficult that's why I o camel person
doesn't do that
the preemption those wells biasa t we
use the loop UVU library that helps or
not I'm not an expert the i/o subsystem
my impression was that by using with you
via help little beasts on these kinds of
things is that true okay thank you be as
helpful it's all events so you have to
simulate blocking things if you want
them so you might have a co routines
that are actually doing yeah yeah so are
in standard libraries you see movie be
everywhere but again there's certain
numbers of unity wanna see a version of
rust or version of our libraries that
use the system quiet io libraries they
want to bypass with UV but we'll see i
think for our purposes i think with UV
serves as well for over there right now
so in this truck exactly showed that you
justify the parts mark a son he said Oh
util extra parts truck now as other
potatoes see fetus is a structure so
this is is like so finding this musical
the same thing as subscribe ponds to is
beautiful yeah yeah I've never seen your
question so I think the question is um I
didn't say on the field instructor may
feels beautiful so how's that be skating
eels struts and the answer is that at
least in ruston stands right now
mutability does not come from their
declarations on the field rather is
inherited from whoever owns the data at
the roof of the data structure so do
piercings beautiful in the web finding
that you make it searchable whole way
down and likewise the references to take
a reference is vehicle at your most
trickles down through the data at least
the only portion of that data it when it
happened I start something about the
other day and obviously doesn't
that before the partial memory it's
actually represented by so you call this
up data structures possibly you totally
immune we used to have that we used to
have a way to do ability declarations on
fields but it was removed in part
because it wasn't clear whether it was
buying stuff versus the plastic bag
Teresa I in both in our own type checker
and also explains users so right now we
inherit me going from declarations but I
think there's been some wrong length of
maybe bring you to go in conversions on
fields because there's sometimes we
really want you to say no no that's
that's really must be a beautiful even
in a beautiful contacts that feel to be
a beautiful the political question about
Firefox is this game to land in Firefox
oh no the goal or well boys the negative
web browser so there is some people
working so you Albion's are back up and
reason why mention that because now is
ajs thing where you can use LEM retarded
as in touch is there has been talk about
some people trying to make rust a new
language for programming the JavaScript
parts of things by targeting as a Dutch
asda llvm but that's the only way that I
can see it being part of Firefox any
sense right now I don't think that code
base this is that because the goal is
not to take the existing firefox code on
us and just try to you know port it bit
by bit too rusty innovate make you
algorithms for life company parallel CSS
selector
like that I won't know we're out of the
music's imitation my pressure is not the
mobile version is it means that freezing
describe Xfinity as you across or you
keep continued this kind of innovation
daily basis I think the thing right as
you're there is that for one point out
the goal is not to stop innovating the
goal is to fix a subset of language that
we are willing to say our users you can
program through this subset and we will
either particular for dance or we will
graduate to over for boarding the way I
go for matters let that we have some
cool reporting to be versions ago but
certainly we do not want to stop
innovate there's plenty of things that
we need to improve on and so our current
strategy that is every piece of
assistant that's at all questionable
right now we have in a movie call
feature doors so if you want to opt into
using anything like that you can find
macros whose semantics or syntax might
change post one point out where is
putting feature guards and all these
things about he was the user how to
understand you're using something that
you might have to do something to fix
later on we can't promise you more have
to think about later which i think is
pretty nice sweet spot to hit in terms
of getting us still</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>