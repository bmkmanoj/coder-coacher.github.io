<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lambda Lounge - Reliability Features of Erlang - Garrett Smith | Coder Coacher - Coaching Coders</title><meta content="Lambda Lounge - Reliability Features of Erlang - Garrett Smith - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lambda Lounge - Reliability Features of Erlang - Garrett Smith</b></h2><h5 class="post__date">2013-08-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FnhvxnlF2xE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">on behalf of our chance to come over
because solutions I'm very topical
guards and Sega's real hard choice on
ponies are by me how when you contacted
us so we come when you choose thank you
i will be honest you deserve you are now
thank you very much here and we're proud
hopefully the Underland foot percent and
grand well known in the community but
actually purpose of this meeting another
starting to send a message out community
so this is equal to e and it's great to
be here so the real purpose is a shake
afterwards so that you all are hardly
learning communities ok go for it this
is you're gonna find you slice shortly
into the service I'm a religious fanatic
just like your life stop touching I
don't think it's more general but it's
absolutely delicious bass okay so first
of all thank you Mary this is great i
mean i might have a keener just the hall
we kind of holds it after you sent to
the functional
remember group and turning to look at
bigger event not modern so the fibers
I'm pulling fact they asked me what I
knew about bowling am i okay point taken
so I bought some books on reading
history not some history telephone and
it's like okay not only did I not know
that I now know that I like this
absolutely fantastic story and history
and I'm steaming through because i want
to get through quickly i'm going to go
back and Mike Witt take is not matter
just alike or smoke but this is like the
most amazing he restored the nation
homes unbelievable so I'm really excited
to try to correct my embarrassing
ignorance as a great pleasure to help
ease your fault so I'm going to be
talking about a few severe leg and as I
lose you this is a little bit more
religious topic I use I've been traced
for like coming up with titles that are
politically acceptable and then changing
everything like I brought up a bait
switch so it's like oh yeah levels and
reliability features early that sounds
good and it's gonna be on something
completely different it will be okay so
let me start out by saying like as I'm
presenting to group
of Louie functional programs to serve
you well let's uh presume who would
consider themselves a tool of choice
weapon of choice from a programming
language a functional language would say
an imperative language but Hector mentor
or a little really what's a sudden we
need to get everyone voting this out
what's what Sonny HTML CSS ever learns
out there both looks at that so I don't
want to pretend like I'm so hard for
functional person so my confession is i
spent some time in tub university of
edinburgh university and i was in the a
iphone and the AI department of two
weeks and the reason I left was any help
or it was posted at university Ventura
these ml India department and I was
competing with students who really
should have a social thing figure it out
so you get my three lines of rehearsal
code that nap like navigators maze and
just like what I'm actually meeting like
just a binary okay or some really 50
singles if there's no way I'd it also
you to get ID to get so like I'm not
going to get a cat food so I quit and
moved to the cs department where you see
pascal things like I sort of understand
so I didn't have to like look at three
lines of code and go why like so
base essentials you're going to say next
equals 14 like it just acts tough and
like their little step was made sense so
I'm kind of an imperative guy and my
career is that in languages like seeing
as he was bus job I thought perhaps I
mean just lazy just half a living crap
out of things and get things to work and
that seemed fine to me so really that's
kind of my disposition now truth is I've
changed I haven't changed but I don't
want you to think that I'm some quarters
so my experience was really primarily
primarily a comparative a lot of lucks
10 years ago did a lot of appliance of
warfare installshield reproduction
socially multi-platform installation so
like you know complex client-side code
and I've got about five years ago
sisterly recent into service on stone in
black desert so I work for a company
called stacks it was first started and
now this has been bundled up and zuko
piloting system in a group and we set
out in sacks to build a platform of
service and so thought was a service is
basically you take code programming give
it to us with a blonde and a nice
operational scale environment you go
it's my job your job it over give us a
Java code will take it pushed cloud and
rifle scale fill it up scale it down
database come to the monitor
everything's great fix it so basically
no operational requirements just go
scope so in my purview as a software
programmer and I feel like Lily software
so here's what program I'm going to code
base compile artifact program to a
system we start originally started to
try to
the system of program only we just say
here's my program here so here's a cloud
it's my program in fact some people do
it like chef and other things and got to
the point where I realized that this is
impossible to keep up this is starting
to evolve my life naive up completely in
the idea of being a programmer writing a
single program here's my programmable ah
 to like a systems person thinking
this does this this does this this does
this does this and that's kind of this
area of DevOps is that also fairly
common turn out better but I don't mean
I uh 17 asked um prefer a delight will
rip the hawks and it's just like I will
invent the new work like system
administration is don't directly or
smartly so this is an area so the
programmer mindset highly leveraged code
bases to apply to operating system so
this is sort of my my my rent on my
friend is a pin DevOps so it is in this
whole paradigm its environment cloud
servers operations the topical
reliability started to become central so
we had two people literally two people
and the theory was that two people can
just run company and we get a thousands
or tens of thousands of customers so to
do that you have to have systems that
aren't breaking the breaking on time to
be law was fixing this should just work
so if you put something out there should
just forfeit should be zero two very
very low maintenance otherwise you can't
do
you can't have a very small company and
a large lot of customers so this was a
problem this continual problem and I
experimented with all sorts of different
things and really at the time Python was
my weapon trucks that was my sort of
preferential language python just like
ruthlessly pragmatic direct like just I
want it is done I don't want to think
about language design because if you
know python that's an option is
available but other things it's like
utilitarian and is like beautiful than
you love the beauty of Python so we did
this and I had Python multiplex we're
using amqp for message passing RabbitMQ
action which you get originally and the
rabbinic you doing it in this really
nice tribute system and ran into this
particular problem I calls to monitor
all such a sax man so in this in this
environment the goal was to run the
equal socket so you give me yourself are
prepared to run that back of any monitor
so I need to know when it's huge memory
or to try Oh what thousands of the
commenter's good took it we wanted to
create a feature set around this problem
monitor so if you the developer the
ability to react to different situations
different metrics different changes etc
so this becomes a really challenging
interesting
when you have thousands or 7,000
applications because if you have
thousands of applications you have tens
or hundreds of thousands of data points
landing operating millions of eight
points landing within your collection or
monitoring scheme so I put this on and I
used python python script so i just did
and put in production and would run for
about six or seven hours and it was
completely fruits so is anyone ever run
software that just sort of mysteriously
locks up just stops so in few thousand
hits nine so interference systems or an
operational environment basically you're
dealing with me Finn feeling a fight if
if something can possibly happen it will
absolutely happen just a matter of time
so this one gave us about six hours of
peace six hours and function of
operation and hit around 300 megabytes
of presidential and my name is 600 and
then boom dead the process lived but
there was no cpu activity there was no i
have activity that was basically it was
basically coming to us and of course
this is symptomatic of deadlock a threat
environment yet things of contending
guilt and the python is notorious for
having skill which is a global trigger
lock which is sensitive to 22 threading
and locking issues I know is running
into a really little problem and so
we're using mqp npp is a multi is a
multiplexing protocol to get mobile
connection
on a single fraction form of singletrack
really look on complicated protocol and
all the fine libraries are really really
complicated I went through literally
every single plot python library try to
figure out how on earth we can get this
thing to stop devil that was one that
was one mad that other cat was going up
try to fix it let's go see like where is
the deadlock happening and where sounds
like okay here's a problem you're like
fix the problem by generating and other
problems or that I prefer problems
become utterly eclipsed by the others as
we're dealing with like threading
difficulties from giving I do a
threading problem who is having who is
dealt with smoke threading problems that
slot or just writing published it is
anyone found a really good as everyone
happy like then when I was saving this
room feeling joyful as a result you know
oh yeah I figured it out I did to the
broke through the bear it's just a
barrier push through it anyone really
don't you don't they're dead you hit
that all of your dead so I try to fix
that directly the other the other
solution is just like select all they
control a slight complete so the change
change change everything so I knew that
there was a plot out of the technology
out there that to the finally different
approach to concurrency there was there
were no threats there was no shared
memory so threading calm there's no
locking problem there's no new Texas
there's no dealing with this because
fairlane pays a huge price and performed
by copying things all over the place so
that the performance penalty is made up
for the factors not share down to the
notice of the shared memory problems so
blocky fellows attention problem and
either Lisa
shooter I also suspect that erlang as a
concurrency arrangement language that
the community would it right terrible
terrible terrible like confirm the way I
was running within sudin it turns out
the fast four turns out that's actual
general true they are only a general
pretty pretty darn good at healing to
dealing with concurrency problems but
but that was more than yesterday so I
didn't know as I did this thing and
script it all select all the lead
rewrote it we wrote in a very focused
way and solvable so you got a monitoring
to God you know really extremely fine
Drake monitoring we do monitoring tens
of thousands even hundreds of thousands
of things concurrently pretty
sophisticated even even things as five
years ago so pretty pretty pretty please
with that but the process there showed
me what I thought was a better way to
build software build systems that we had
to run a long long time this con is
topic reliability sort of sort of hit me
full force like this isn't just a matter
of getting something for work this is
the matter like having a concerted
strategy like succeeding but the monitor
required in this was a fake pound fail
Twitter equipment monitor fail fail to
fail keep on selling for six hours than
ever stop is this is basically a window
visually am a rolling window problem so
you have like megabytes rather gigabyte
senior person for Anna if that means
reason you have to kill
absolute lose all the state this terror
is a disaster so early solve this and
then informed me of different ways
different topics and different concepts
and things that I've been following
that's what we're going to be talking
about so before I get into the details
of rolling and level features something
interesting here Lisa we got acquired or
rolled up into cloud and when found
these did their due diligence they look
at this cover I said abuses you seem to
use a lot of our life say yeah this
works pretty well and looks pretty well
and that's great it's kind of a weird
language you know and I got started the
impression that possibly there was a
desire to baby refactor this in a move
fairly I was teaching platform very
strategic in our environment so that's
that's nice you know I can appreciate
the golden company and try to avoid
technically risky or risky kannapolis so
you take a technology on and if you
can't find developers to support it then
becomes risk if you can't fix bugs
because you know but one died of the two
dollars three eyes are you know there's
those those individuals are not no
longer available you're kind of day so
there is a very legitimate strategic
back on technology
all the time early starts smells funny
and looks funny to most companies you
have to sort of be committed to the
mirror of solution and a lot of time
somebody's our cloud this is very
committed to the marriage so it turns
out this software stay up why is the
world we're very very well there's no
maintenance no one's going in there
fixing things and it's like one of those
adages and it's not broke don't fix it
it goes a little bit beyond that so I
mrs. slide sorry reordering problem here
how about redefined reliability from
knowing I don't know what I read his
mind but I want to hear just another
concept so reliability is one of these
terms that survivors mean it's like
performance you see the videos like
performance something goes fast it's
good little slow and please reliable is
good please hi Paul as I said
something's great that's great yes you
want reliable software we want fast off
what we want in performance 06 thing
with things that are we good at
completely agree we all want things to
be good and happy but as engineers we
like to be more precise about our
thinking it's difficult when if I co
reliability quality or any of this thing
to be country everyone wants it but it's
difficult to talk about it so I'd like
to have something in between I like to
have a kind of fuzzy concept that we can
we can actually measure and Reese
were specifically or pointedly that
reliability and that's for me survival
so I like to think of successful
software a software that is money right
and i use evolutionism are so successful
organisms are wooden is and that exists
with a sealant you see the cancer 250
million year old design it's not a very
attractive fish basically truly a living
fossil we usually find these things
fossilized but they're actually living
so we can say well this is kind of
travel design but it is brilliant design
please funny it survived it's it exists
so to me the measurement of great
software that exists is running some
place and it's very closely related to
liability the software that brakes fails
is select it out of the gene pool we
gradually removed but you don't hear me
talk about survivability a lot so I'm
going to throw that in here because the
thing is a slightly more precise turn
turn even though is that videos even
though it's lovely like abstract it's
like if you can get something to live
and be in live in the face of
competition you're doing well because
there's other stuff out there that will
keep your software and I think of it as
like myself was running that sort of
currency / none of my software running
in the world it's kind of like I have
less currency as a depression as a
peasant program so is that that
survivability alright so with that
context let's talk about the one thing i
overlay talk about this whole top of
liability centers on process I solution
that's it x not a drop of my badass MC
stage process isolation everyone like
this assassination so will you actually
explain what this means don't worry who
here has ever used like windows 31 all
right great i thought i was going to be
like the guy but yeah it's a full-timer
we use windows 3.1 i went so mr.
equipped one that maybe belong pretty
sure might about this so this is like
three pre-emptive multitasking this is
cooperative multitasking so windows want
the particular point of time which is a
program that way on top adults it's a
graphical program to look one program
and then do it hosts other programs so
you're one of the programs and then
those programs would have to cooperate
and yield time so there's no Cranton
ball ti so don't prefer Nolan's no user
space there's no separation so what you
had is like this happy environment where
everyone that one until somebody decided
to not get along this can happen and
obviously and instantly you just go
buggin innocent code these are rough
soft who knows what happened there it's
some unexpected state something has
changed some bad things happen the
universe knows that you don't know but
at some point negatively we go for two
to the time to reboot stage now if you
open is today's you know about rebooting
this is like a removing every few hours
like today a few days without redoing
windows that's awesome the second epochs
of time but at a time when one is much
much much worse that's like an old
operating system it's a negative numbers
is a disk top
we're still like what I'm environment
pounds that's not in the West the days
bothering I left Oh sleepies know what
to say it's not even modern this is like
the way you think Witt is just skip it
is like minus other somebody says when I
can get out right so we're just going to
be opportunistic turtle it pretty well
for themselves and some people but
operating systems look like this though
it has Colonel and it has isolation to
every processes in its own space there's
no shared memory crossed processes so
every smiley face they're perfectly
happy running kernel services girls are
is to provide never management and
access to harbor letters interrupts
other coursers the idea colonel is is
that a small focused reliable shouldn't
fail the paternal fails is able to the
junction revival which can be no
ballistic to do very very few things but
is an extremely well user space is where
you can do fancy things to an interspace
this one it goes wrong it's all so happy
there really is no bad state in a well
as I'm not racist in fact a
well-designed operating system as soon
as it's going to be a fail of course
that we're dealing with infinity at some
point if it can't have that boy so this
is the operating system and this type of
system environment this is perfectly
acceptable so good please is chromium
chromium
it's great because every tab own OS
process so if you get into an unhappy
stick like this whereas like in another
program your pull your header browser
would have to shut down you can just go
kill 9 the one tab that's bad and so
it's negative i should say also have you
stay it's like fine whatever this is far
this is what we run everyone today is
completely accustomed to these to this
type of environment every single laptop
frankly every single phone probably
running android or iOS has this notice i
almost have a kernel of them yeah so
android is running linux oh so i know
that is we're so used to that all right
if you name a single environment so
that's the operating system so i'm going
to apply this to program name a single
program a single application environment
that does this that does Colonel and
user space separation name one you name
on their old windows 31 but all running
the same keeps they're all running this
right this deck on here girl running
this get a little corruption one of my
threads or one that process and all
those to help and your full process goes
that of course the one that does this
drilling the designers Erlang came out
of this environment where concurrency
was a extreme drought dealing with a
telecom squish dealing with tens of
thousands turn connections if one can
actually go
and can't bring the whole thing this was
back in 60s so there's ever a question
of the how to design language that were
wrong on telecon switches communications
wishes it was always going to be
something that had a kernel of focus
shared services and then isolated
processes so the first thing the first
and most important thing is we look at
her like is process isolation it's
consistent with every operating system
that you touch today probably from most
matter I like these experiences religion
99.1 39 so it is particularly like in my
hands would be a while the sort of
students label to go on same thing the
designs of this application wanted that
this technology wanted it to resemble
the feature set of an operation so one
of the things you can look at it
airlines operating system or your code
that's been sitting some dirty your skin
things so if you get isolation 40 on
isolation you automatically have a
system so here we have black boxes so we
don't know what they do go care don't
care how we can where they do it on
their hold it we don't care what's
inside but we have we have exchanges
between the black boxes so these are
processes are isolated they don't share
memory but they have communicated over
message pressing if you have isolation
the only way to build anything is by way
of a system so this is like an automatic
next conclusion state isolation you're
talking about a system now when you have
a system of isolated components that are
talking by the way a message
exchange you can deal with a failure in
isolation it's isolated right so the
failure is isolated you run over this
thing so isolated it doesn't affect the
other things now there's aliens here
what we can no longer communicate but
the other systems are running fine these
other components of the system or
running the farm they don't have the
service available but that's common
imagine for example a let's let's let's
end this one engine X this is an app
server this is memcache and this is the
nativist your database like give an
administrative capacity should build a
firm database off for a second or two to
have your application money so your
application is not fun there's all sorts
of other things that can go on and
services that can be provided while the
database is out that's the system so now
we're starting to talk about system and
bring it into the area your coat not a
DevOps not a sysadmin with the code that
you want to kneel you up to I'll show
you get a very very precise example of
this so it made us but it work it's not
moral religious dogma what's up we have
failure in NY once you have failure you
can have a restart so this is recovery
this is how we get back to our state
every system any complex is the manner
that you deal with today does this so
it's not like this is like an invention
of some new bold vision it all works
this way so we use an example of the
database no think about another example
I'll use a public use a bit
and profane revilla an emotional example
friend of mine was born with a heart
condition and Klaus is hard to grow
faster than than more Caitlin expected
life expelled mix and a life expectancy
about 35 years when you hit that this
literally happened in a heart transplant
right so we hit that point then is
horribly not to bidding it will be truly
took his heart out we just I know this
happens all the time which is like
incredible to me his heart out of his
body and put another one in and it
connected it gave him a bunch of drugs
and and then poof it speech started but
you can't do that like the brain stem
yet awesome is people here now right but
the heart is one of those units that's
isolated enough so that this can
actually happen so let's take another
lesson about that it just occurred to me
so I religious and science and goings of
his artist let's let's bring it back to
technology we are also intended to
network this is connected to network was
a phone here she's connected to a
network so there's a wireless access
point some folks who has had a wireless
access point foot wireless access point
problems in their life then I something
can go to a counselor for you go to a
therapist because you have wireless
access point problems she didn't happen
for that right so that's a network
that's an independent you know isolated
systems laptop laptop laptop wireless
access to one it was a cure
network what access point goes gose
movie what do you do what's the known
solution importance of us Southpark
solutions is only here in merced yes
something you pull up plug your way
three seconds we'll pull back in you got
to get the networker story right so I
just want i'm trying to make the point
that this is not correct this is not
crazy or or generator or we get
interested this should be so fundamental
for thinking about reality that it's
just the way we do things everywhere at
everyone the sad thing from my quantity
is at most application environments
don't act like this they don't give you
the tools they don't give you the
semantics they don't give you the
runtime characteristics to do any of
this stuff are you have to do this at
the operating system level which is fine
or about my relative ok so this is
really mean this is like I do just do I
should like pick 10 more example just go
to bed na sila you get it really this is
the centerpiece of everything alright so
once you have something that can do a
cover it introduces a completely
different way of dealing with problems
so most code deals with problems through
i should say most a lot of deals with
problems through what are called
offensive magnets so you try to guarding
additions that you don't want and you
try to deal with conditions that you
don't inner line in front of the good
systems design you don't want you to
think that way it was a condition that
you you're not interested in explicitly
and you don't know exactly correctly
what you can do is allow yourself to
fail let's say I play God in this
situation
a system and I have a question about
this process here this guide about
something happy this state might be
corrupt remember that Windows 3.1
scenario or one guy throw off the whole
leap through well this is the one but
we're not really sure what we can do
this system like that because we can
fail and recover is where you just
killed him off right away right so we
get to this point dead restore and so it
changes our entire approach to quality
and reliability or error all right
here's some government it only running
circles are filter this term letter
crash this is some congee a concrete
example of language syntax that gives
you fail fast behavior those goals so
the first first case is I'm going to
stop a bubble so I want to actually get
some real angst index in here because
religious dog is interesting and all
that code is also interesting so okay EB
is a tumble okay that is a is a as a an
atom it's used by convention to tag
thing so Adams like a number like it's
unique so okay okay two are different
figure out as one and two doesn't matter
it's enumeration the symbol toilets by
convention or like okay means that
something is example
it's shorter than good I would like to
change the language and just used it
professional awesome terribly sad soul
okay so if for example connect return
something that we don't want something
that's bad the connection is to return
the total error and the error message so
you'll see this very often basically
this is saying I'm asserting that this
should always succeed it's like an
assertion in any other language but it's
built into the to the wedding call this
pattern matching or true seeking
operation of sequels suck the these
operations will buy so if this if the
shape of this matches this it can match
this overturn Spokane comma something DB
will be bound to that value right so if
it isn't bound it will fail so what I'm
saying as a programmer ears I always
expect this to succeed so the reason
that you see this all the time interline
is that whole idea of hey everything's
isolated so everything is isolated of a
system of a system I can monitor our
component for a failure if at bluebonnet
fails I'll be started but then the magic
of Lego restart is that cool magic of
pulling on the plug of your wireless
access point what happens there I mean
what does why this house work I have
probably my car a little while ago but
there's a break like I like your if I
just go to pull over and turn it off and
turn it on it will fix this life sure
enough fix it how is it work it's
restarting things of magic every move is
going to hear a blessing beer
well how the heck does that work any
thoughts magic all these words always
works it's really important how does it
begin somehow getting things are worried
about electric rebooting do the same
that's exactly right something's screwed
up so you reset state to a known
quantity and every every device is ever
manufactured is that top of
survivability as a extremely
well-defined well tested initialization
sequence so when you plug that thing off
thing that in that in it comes to up
into a nonstick it did it you wouldn't
fight would you Lutha you know if your
if your router didn't have a repeatable
predictable initialization sequence with
your company exists the buttons we try
to front everyone who is this so in
early in the world the mindset is if
something smells long blow up so it's
really a matter of it's it's it's a bit
surprising that in order to build a
lotta systems reliable software you
actually have a degree of unreliable
they are full intolerance here's an
example of a case expression where I'm
going to match this result if it's if I
is an integer I'm going to convert it to
a float if it's already a float it was
already too slow I'm just gonna return
it if I commit any other condition this
will crash so it's a perk there's
another
of assertion you're basically asserting
to the program that logically these the
only two logical possibilities of a
result if it's not crash tempting down
here is another type of fail fast so
this is a very convenient and
interesting semantic with the airline
which is I'm going to pattern match on
the first three items and then I'm going
to bind to whatever the rest is that's
the rest will be whatever the sequence
is past due is there one if this
sequence that returned by reading is
this town 27001 this will be a bad match
and it will crash but I say it will
crash I mean the process that is
executing this code this run scope will
crash we go back to that system v if
that black box is that one thing right
that building down imagine you're one
network you're reading something you're
reading something off of that and you
get something that doesn't smell better
crash rather than dealing with a problem
because you know you're isolated no one
else is going to be affected you're
going to crash get me started we're
going to be established a network
connection at some point way that next
connection will be okay we're going to
go up but maybe it was just an anomaly
so you have this magical recovery
capability it's like somehow imaginably
sensing the network access point is
completely screwed and having when the
known that they're going if it's
automatically restarting but is it
sprung off your entire program
completely utterly changes your approach
program alright so I'm so I'm going to
summarize in a really awesome build out
like arrows and stuff you guys ready for
this this is all other ways is all HTML
Javascript and pain I know those are
super fancy well as rain super happy
weeks but i'm not using keynote process
isolation I'm elaborating a little bit
here
can actually make some of these things
somebody's messing with me probably work
alright so process isolation means no
shared memory in this case but you guys
live isolated other resources but for
the most part we're talking about
poverty level okay so if you don't share
memory the only winning possibly
community it's like passing are just
messaged back I think thing i thought of
logically true so once you have this
sort of message passing design you have
this mechanism for cleaning extreme
independence now i have associated a
stands for separation concerns but one
of the most useful and informative
principles in engineering separating
concerned so you say this thing does
this does it i'm going to focus on hey
i'm going to think about a i'm going to
really understand it this thing is only
up in a new a because i don't want to do
that handy that's not separation from
your high level we very low level but if
always ever a separation sir when you
have a system of independent components
it allows you to encourage you to begs
you it insists think about every little
process of your little blacked out on
that screen as a separate concern now
you think about that as a service what
am i doing what's life cycle what is its
api all these different things get
focused and wanted to go
ngo separation of concerns you have a
very elegant system to recover from
problems because what you're dealing
with a separation concern is Allah is a
logical isolation in your program so you
have this smaller the area of concern
the less impact will have and an outage
if you would database again ginormous
thing the database goes down you can
keep your classification down but what
if you just have a small area which is
focused on you know you know high
performance key value store for this
particular thing you've taken this big
thing and you focus it in a good area
now when that thing goes down you're
affecting less so separation of concerns
is narrow a nice group increasing
isolation makes your programs with much
more resilient to failure ready to go
home there's math as a result of people
recoverable you don't have to think as
much about Aero cover their they are
handled you can sort of abandon this
idea of even handle you nervous you can
just crash if something doesn't feel
right or look driving crash that's not
always the right solution but it often
is the right solution and as a default
ones a good solution because if you can
automatically recover from something
great you can't you identify that be
code around it so you move toward the
sort of the systematic improvement of
the ball there yourself so this is
really energy so if you tweak that
somehow
something the arrows and stuff how to do
it at a ski hard so this is really kind
so I'm gonna salt may take some period
questions that I actually get some code
code rocks much better than like
preaching HTS cooker liability features
that's a top title reliability features
of grilling so I hadn't had a slide in
here that action and this is I can't be
criticized you're not talking about it
so process isolation right that is
physically implemented physically
personally physically in the am in the
erlang p.m. so the VA itself is actually
built around by since escalation there
are guarantees their designs and it's
not just like a file library there are
some there's some code out there that
will take a large heat and management
for you you literally cannot get to the
memory no pointers would you also cannot
get to the memory of another process in
earlier you can get to it state by the
way of message vaccine which you can't
get to its memory so it is true that
isolate there are guarantees around
corruption beyond a particular process
so if you have as a result this is sort
of fearlessness about Arabs you can be
very assertive in the way
sure code pasta supervision allows you
to detect a fault detective crash and
then we start but really the core
features i would get some other things
but i think actually no don't know if it
up other things I think that's pretty
much so much as wipe in the heart of
what we've been talking about so all
these principles of reliability what I
might call survivability a software the
things that help itself or to run and do
what we wanted to do help it gets
selected in favor of your opponent's
you're always contain opponents and we
want to go being selected kind of talk
about that's true we want to go to live
but all these things are explicitly
supported in your lane so so I think
it's unique language in that respect
it's a very architectural or very
systems oriented think I'm gonna demo
tea though I do so let me stop and just
like just get are there any questions or
or rants the projections do notice
like unless these people actually
program it will wait for instructions on
19 goes back so for example
if I should buy some office that you'll
pass terrible error don't rush but if
you wouldn't want the construction
because you want them to actually you
can use another critical case you'd go
to specifically for for that you can
handle that explicitly stated view you
would take an error condition here so
air conditioned air come whatever and
you deal with however you are you socket
so that we're gaining ought ematic or
non explicitly with just a lil encoder
that you would write to handle it
there's no language teacher testing that
would kick in at that point your if your
process dies it'll get an exit code
which can be trapped just like at a West
process that's it that's the only
mechanism is out there so your your
supervisor the supervisor mechanism in
Erlang is very simple is it detects a
process trash and then makes a decision
should i restart it or not and there's
some rules that it uses to decide
whether to restarting it decides to not
be started it will in turn trash make
insurance crash and we should then be
played out on the chain Sinclair pieces
or logic around be starting that's I
think over approach or you just do some
of it there's probably some very new
code some intelligent ways of healing it
so an air conditioned that case my
neighbor the gym result you explicitly
Hamlet wherever there are exceptions in
her life yeah so you can ask you produce
that's on a caption exception you can
also of course match against a pattern
character used by convention to similar
to those are the two ways but at the end
of the day that is that process that's
running or not so that part of the
process so if there's an unhandled
exception will propagate over-the-top
exceptional crash will be cinema back
here error and then that can be handled
by somebody else and he also came up
here that this is resonate with any
longer is it my guess that people who
run systems probably cancer she ate some
of this if you've written like iOS
programs with little probably don't have
to have this this is this is the
wheelhouse barreling in this case I
think the server-side software it means
the wheel have to apply this elsewhere
but if you're running long you're right
love running processes on the server you
have a discretion about your platform I
think really it's a really good choice
for these reasons I want a hot something
about
the process that and this time different
than other languages never because the
hospital six harm in error doesn't have
any close to using your phone so you can
use the service and someone else going
on there odlo and whatever is a classic
is if you are expecting to us to give a
feedback you will have to send in your
address so anyone who's come in our
process and restart moved rotors and
smooth others can give you the feedback
so what's this most languages understand
but then when you supervisor spice has
realized video so supervisors can be
supervised and then there's a top level
service which is part of the colonel and
depending on the type of application you
start your have your application will
stop so if early applications are really
sick relaying this frontal systems of
application so sort of the unit of
packaging is the apostolic application
in other language do would probably call
it module but the recent application is
called application in their length
because you can start it and started and
stopped and you start an application of
all sorts of things pop up and start to
run including that top-level super bowl
if the the application is a permanent
application it'll it'll get me started
just rammed in its temporary it'll stop
bill just out so that the application
will just stop so at some point you need
to start to monitor your application
you're interested and then of course you
know monitor your earlier in the process
also really doesn't doesn't bother
dealing with other memory conditions two
crashes process the OS process
conditions so it's a common way to lose
that early process is better running out
of memory it's easy to run just using it
use it and then your dot and a half
supervise your lightboxes similarly or
no assert itself lot easier so you ought
to have something monitoring you have
parking is coming out of the server and
you will also have an external monitor
citty gentlemen have two ways of
monitoring things so you just start to
cascade back up its up when you leave
your language to put all the principles
of reliability and fault tolerance and
recovery apply even outside of the other
life okay so I'm going to I'm going to
get into an example here so the solution
look very similar I basis with coffee
and pitching
around but this is going to be a system
and one of the questions that comes up a
lot either you used to writing software
can most languages deal with software
through i would say stateful not MVC
like not this model here and then you've
got views goodbye to it and you've got
control over supplies logic to it for
that models come front and center
there's like how do you feel over with
Ruby on Rails application let me talk to
you about MVC well how do you build an
early application well let me talk to
you about service orientation process
orientation or systems design the things
that we're talking about you so this is
an example of a third of German piece of
software this in the form of a system so
we're not there's no Molitor don't care
the state at all oh kudi care less of
the state there's not wholly services
we're talking about attachment protocols
and community meeting the services so if
you are dealing with enterprise
architecture jargon anyone here like any
big enterprise space where we hear of
enterprise or a service right there I
detector so anyone she's a big deal and
it was a big deal like 15 years ago and
still a big deal and it's a big deal
because the freaking works service brand
architecture works like successful
projects do them it's all suppression
concerns isolation big keep things small
focused and a direct services and the
services interact within an enterprise
environment all we're doing is taking
that same idea applying them to a little
time
here as it then so here we have a client
the client is going to get a valley he's
going to talk to a router the routers
job is to federer 842 to coordinate
requested value across multiple servers
and this particular delaware two stores
I have injected so okay so I just
started so basically say computers so I
have a jet headed Jack did injected in
the server something called the sickness
it's like a zombie so it will get a lot
of some type of sickness and misbehave
so that's like a puppet and we'll see
how this thing works so I'm actually
getting some code here how many people
are familiar with javis and come out and
even down I skip the demon voice comes
up through my history early syntax
familiar with oh great so I don't
explain this I get letting off because
like those before a three hour tutorial
on how to let quite early evolution to
people are insensitive or not going with
syntax well come on now pretty simple or
as I'm glad for that so I'm not going to
get into a lot of the stuff so so if
you're having trouble parsing this i'm
going to describe it just stay high
level with don't get going down on an
every detail this is high level stuff
just think high level if I understand
swivel the clients the thing is going to
make the request startling there's this
idea of starting a process but you're
not moving up you're not like new mania
not like allocated memory school is your
starting across it so when you trace
aleinu is a process there's a start
language so I'm going to start this
don't worry about lane anal passage is
something that's that's a that basically
the signal in this case
you want to do so in the case of client
is I'm going to get a value we'll look
at that means and then I'm going to
valuate result this sensitive a pad
around like to use in functional
programming also just really chirps and
functions do you know just to make
people are dirty things and you get lots
of small functions so again separation
concern get values is going to pull out
to router get value in this case so back
back to this model right flying all he's
going to do is go back to this this
incidentally is going to be a rapper
this call here is a rapper for a message
passing and receive we actually never
explicitly send and receive a message
it's just a rapper poster function that
happens under the covers but we're
dealing with an API I saw this case okay
so i get the value and then i've started
with the gravity here evaluate the
result of its good i say this is greatly
out of this valley it means error i said
i'm unhappy i got this crap swears care
of a client and principal so it's very
simple he's going to run every repeat
interval which i think is two seconds
questions out super simple this is
simple hi the router is slightly more
complicated i have two two slides for
this again startling is going to start
the process and there's a state
initialization here because I'm
maintaining stake of servers I'm
interested in talking to so the router
in this case has two servers so on
configuration he's going to get the
server list past and initialize state so
that that's that whole thing when you
start your access point yoga well
defined initialization startup same
thing as a bucket here reflected exactly
the API start and it so when you think
about this shows a I want to start this
thing on
she lies to the crashes and because we
started what happens you initialize
known stadium so initialization is an
important part of this here it's getting
the router is going to go this is this
is a dispatch to the back end I must get
that just create a second this is the
this is the workhorse of the get he's
going to try some servers given the
state so the state contains the list of
service he's going to try the servers
and is going to get this result here's
the reply and here's the back seat so we
don't exactly know it's a little bit mr.
mysterious but we know that it's going
to try some servers going to get a
result he's going to have its next state
and then it replies with reply and then
the next state their length processes
are single threaded so there's no below
there's no global members know you don't
go poking things in Goldman so it's just
a function so here's my initial state
and here's my next state everything is
up is explicitly right so this should
make every functional programming you're
getting with the light fact that you get
a call here that's my state that's my
next state and there's no other like
your this code is equally of this ever
running in that process there's no like
multiple things running so you're single
threaded right here and there's no local
member you're getting passed in your
state by the top level things is
managing that for you mutated some white
castle very secure
alright this is kind of I believe but
basically the stabilization of the tri
servers algorithm so basically i'm going
to try a server right your get value so
this is the module function argument so
i'm going to keep trying to value if i
get the response that's great i'm going
to return it and then I'm going to own a
mood tonight sir Rooney's around robbing
the router goes to red robin servers
very simple this server potentially
server one server to server one server
to if he gets a value it's great if it
gets an air i don't they care about the
error I just want to go on to the next
server this is very common so engine X
behaves this way imaginext is a is a
reverse proxy system absurd Apache can
configure this way with different
modules so basically tries a bunch of
stream servers so if one of those
shooting service goes away those go to
the next one that's how you get
availability in a level which you
haven't you have a very simple device
that's fronting complex app servers
those app servers can go away and the
router will handle logic failing over on
those away that's all that's going on
here so this is the implementation of
next server the neck so this code if
you're interested I can name this is
greatly appreciated I have this crystal
finest or start link again start it up
ignore that that's the front end Paul
this is the workhorse here this could
get so it's going to generate some value
don't know what that is as you reply and
here's a little thing apply the sickness
so the sickness occurs that something
Bad's your name so in typically we just
apply the value we want to inject some
sort of like a bug private in a
simulated fail that's the whole point
exercise so we have to router he's going
to dis
servers sometimes the server's going to
have the sickness we'll see what
terrible things yourself okay so here's
the sickness if it has the sickness
that's true exit I the sickness sample
photo big hook upset doesn't actually
have fun so here we go so I'm just going
on this so this is this is the app code
so here we see it's this is to second
nervous this slide was not it's actually
happening go exciting so it's going back
one and two and it's a one in five
chance of having the sickness the air
sickness so he fairly replied from one
and he went back to 10 look two of them
fail at the same time now he says I'm
unhappy i got this crap no servers but
see there's a supervisory thing going on
here so when something is a sickness is
fine because restart regeneration
rebirth no more sickness so this is a
really simple molecule on this site will
run this i'm going to leave this when my
commitments you i'm going to let this
thing one on my laptop for my the entire
I will not so I'll close it they'll
suspend it will stop for a while I open
and it will resume we'll see if this
ever behaves differently from this
interesting right this is a very stable
survivable system like some things get
the sickness you don't even have to be a
coding here could be some sort of
external variable you didn't anticipate
but this is why this thing that stuff is
running in cloud means because there are
all sorts of errors that occur in
production but because of this full
system reliability is survived with sup
I've been talking about and I don't get
page it just restarts recovers and so we
can keep up with this this is this
models and very realistic type of
application for you got unroll alla de
estar stood in the back end you've got
something that makes intelligent
decisions about how to handle failure
maybe everything fails and so it
probably needs backup to clump ever yeah
this is the way that I tend to build
systems because I like I'd like it idea
of booking software others runs and
survived I like the idea of having my
code always trying how their surface
because I'm program to do that by the
program to exist always so part of
evolutionary process that was a demo to
talk about that I think this is more
this is more summery stuff
this is supposed to be online so people
with that but we make a point here and I
talked about earlier Bob because it
really is the only out the only event
that i know that takes the operating
system you this there's no reason you
can't take an operation like pagan
operations and go one very small focused
protests written Stephen plasma bandra
week good job maybe it didn't know when
you have to start something on us 70
megawatt the president ramp is to start
the program yeah it's a little bit soft
but it's up a young whatever i'm i'm
bigoted in terrible your job a shop so i
should be really nice but father's need
that job programs take up so much every
time let's say you read a really
efficient job then you start it up run
it let all exceptions screw it i was
great you shop job and it doesn't matter
how much memory doesn't matter okay 24
bill centers 20 more milliseconds to
start up with something else it's not
that big it's not use that so let all
exceptions probably don't do the area
just let me pause a scratch and then use
something like in electronic or launch d
or system leaders all sorts of
monitoring supervisory framework that
you can run on the operating system that
will should we start with it then you
communicate with other things over
messaging so sockets would be you can
wallow TCP sockets or HTTP 0w cubes are
really really here engines and the 0 mq
community really know
small of trading single-threaded focused
processes that are run in isolation
don't share anything that go through
messages and 0 TT becomes the transport
letter to profoundly powerful model if
you're not interested just going home
sale 22 or lying frankly in some cases
just can't go so its up that's my full
disclosure that I'm not completing all
relating the time so this will again be
online but I'm not pimping a couple of
things here the reason I have EG
questionable bit the front is this
really the only kind of sub
documentation that takes this message
and mirrors of the Apple code we go
right so I think I wanna get started
with her language it earlier that
actually walks you through writing a
soccerbase key value store that's very
incremental Gary for iterative or
evolutionary takes a small of Australian
tation of service orientation so if
you're interested in actually thinking
is a very concretely with language I was
just going to the PG project site i have
written some things about this i have
that and honestly you're like that what
is your vessel that does source it'll
get you everything you need and it's not
there a point of things so there's lots
of good resources on so with that I'm
done and we can have questions and if
you don't have questions
I have let it go i'm not try again
actually it's very much kind of Judy but
yeah I mean until you have like
guarantees across processes that one
buses came from another I'm not that
interested is really that bus escalation
starts at all the event process
isolation undthis is klaus it's gone
forget about you have that and to me
made it to feel good thing but I how
people talk about their some there are
some frameworks that provide this sort
of virtual unity well so do with us 31
it that as well as the whole design
around it was to provide sort of a
framework for you if you if you used it
correctly I don't care about using
things truck I want guarantees and this
is the way don't want to look with 31
witness we've got one into a server
production nobody why why would you do
that in the insane but yet we are
willing to go put a java program into
production which has unbounded heat
anyone can access anything they want
there's no there's no relation
whatsoever that's fine with that the
production specialist make any sense I
want to guarantee
Michael when you learn you try to hold
up the isolation just very I was planted
that question that could have been a
better plan so I have adopted a pattern
of there's a program called or old port
of the library that basically exposes
Python explicitly as single-threaded
external processes that early can talk
to and treat as a separate server so one
of those black light boxes in the
diagram and it basically spins up within
its a separate process but girl Berlin
communicates with it over standard i/o
and so you can have access to all of the
Python libraries which are fantastic and
all the roughly the rebel stuff and they
also it's good of a Python you have
access to but you coordinated through
early if there's a problem with that
it's a separate Louis process that gets
killed off and then you can have that
sort of pattern of just letting crash so
you'll see system.exit you know for a
little bit actually OS under exit the
mor-drett exit really aggressive process
death and with a slightest problem or
assertions or whatever else so you can
do that the pro for works with ruby and
and python and i'd like to do something
for Julia
huge future you shall decide on around
kill but early lunch the grommet why
didn't stay in from so rabid you're a
few is basically like sockets but for
messages so rather than sending a white
string we send hope a message you send
messages that are delivered sort of it
you know whether they're however they
get there they get there in one chunk
their consumer the written in one chunk
of a continual shop so your unit of send
and receive is the message so it gives
you a lot of it gives you basically the
exact same semantics of the Saadat but
four messages so it's very different
from gravity qmq is basically a full
messaging server running a fairly
complex protocol ntp so it as a hub and
spoke model suit broker and you have
clients i think about is very very
functional there's a lot of things the
problem with it is that it's difficult
to a folder then i say about zeromq very
different approach very different
technology they're not interchangeable
they work they work together but your IQ
will allow you to take off a much
smaller chunk solve a little problem
first and then of all their rabbit wants
you to live in a particular architecture
and the problem we have is once that
surveyed sash refers two problems one
thing etc it's difficult to deal with
second of all it's a huge point of
failure support federating so if you
want again more isolation separation in
your in your higher level and routers
rabbit
yeah we have we have a legacy tripp
trapp thank you but your keys are in the
future but the legacies probably going
to run forever or so so so as we add new
things that's added through sir archy
because your own people let you do like
really specific things and it just
follows that so as I go I got a big load
over here a big hot spot I'm just going
to take this traffic and formal down
here and provide a little point solution
for that with my legs don't give you
that it's just Peter and that community
understand this very well they're
focused on that there's no great job
solving this problem
is it really page so out an hour well
that makes sense i mean usually have a
44 power so we have we have time for
something so i would say this i would
say what I took 10 new in this case is
so I appoint as an earlier line user
group in Chicago so sometimes this isn't
selling a huge only we need to have half
half this anyone who wants the order
needs to go please feel free because
what I think we do all this done but I'd
like to use the time or something
interesting it can be early with
something else I'm kind of open people
interested in learning more diving into
specifics about billing at all if you
are functional blocks and want to know
something about something there whatever
whatever would you try something like
that
or something else ideas let's do
something so there's no cerveza so we
could do it informal yeah we break down
about what ideas you're a snob spitball
so that's I know there's a we have a
reservation at nine for Peter for Barbie
which is different from this beer but
it's like a different context and 95
instrument he's gonna be mad at me but I
don't want to give up with this idea
like could be maybe maybe like there's
like a fee for lily and then I could be
just one person said something small
like 10 people via then we just have
like this way
okay so striking give its isolation
something dies but it doesn't come off
that's been motion I describe that as
our yeah they have a funnel wrong so
here's a snare a community that fits
into that pattern let's say you're
thinking tomatoes typically in process
to try to connect the database what
happened to you can't connect the dance
but would typically be in error and then
that process would die then you get this
like really fast food let me just say
tell me this de servir quickly early sr
us as it has a release valve unless you
stop that says if he would start so many
family in so many seconds stopped Ron
that's no good either because you wanted
to exit a plus it a visit down 15 mins
who cares catch one minute what I'll do
that case is i will do what do you think
all either pathological i'll start the
process and i'll send the best call sent
a message to itself try to build
fighting back if it fails
self again the best bet process will
basically always live and it'll always
be trying to get at war in a
particularly complex operation all do
that visualization into mental process
so I'll squat another process and
they'll say this process design is
specializes in establishing a connection
so many has an extra special lodging
and so he gets a connection than half
that over this so he can get very
complex but we're like about it is that
leaves you the semantics and the painter
said to sort of think through what we
want to do but it's a very common
scenario to attend restart especially on
external dependency that's unreliable it
up service or you want that process to
be alive but the process could be
fronting that back in say if he's done
we give some sort of meaning correspond
to cash in value Israel I'll say down
from time beam or whatever the sort of
found out how robust and clever you
enter your service service bubbles it's
just that
yeah there's nothing magic about is what
they really hope there's no magic
Shirley's also like you are these
problems like an actual problem and go
to kind of think about how to show an
auto man it just just wait though but
just the best things thunk thunk just
those are good
so if I specialist what's the most
impressive piece of code written
airlines icing I tend to personally oh
that is I like to think of a miserable
anything often translates me to really
really good abstractions oh so solving
the right problem and that's often a
very simple solution I important problem
like so i would say publish a NASA photo
for me is some really simple cover
typified or a beaner for Chima it's a
registry he doesn't know different
things can be inserted I like about it
is that in Erlang processes one black
boxes you want to not have anything
about the less you know is that
dependence of this nation less you know
about something better so you started
and ideally forget about it so doesn't
hide yo system is like something there's
no dependence on I started barfing and
then you can it be incrementally get
more more interested in state or
protocol but a lot of cases you want to
broadcast statistics about like how fast
something going or what's my current
stained or what's so how do you get that
back Montee it's expensive it's an ASA
what you want to do this is the way the
most like my sequel or
they constantly God has stayed out
someplace that we're so rather than
invading the process space my sequel to
give you the staff never touched that
you can we but wrote out sometime it can
think right at in some stretcher I
thought was that for really so it lets
you publish statistics or other status
informations let's say you're dealing
with processes and represent users and
system there's nothing about of
processes there's no quick user process
which is the process and a head of state
you can't see state so you have no idea
what kind of processors let's say you
want to replay all of your user
processes there's no good way of seeing
that in early so it will school's
library g-tron well let me say when I
started this up registered my process as
a user constants and you can send the
user ID is this video other things as
well and then query that so you're
getting into sort of complex system is
very it's so important should we work
for so that's that was very impressive
to me and there's a great need a script
like recording on it the reason about
this term or long contact with there's a
lot of engineering effort there's a lot
of like hardcore I'm like I'm going like
a convert I don't I'm not following I
didn't sort of understand what's going
on and hopefully make the news
there's a lot of amazing thoughts and
engineers that tap into movies all
subgroups money because like I got money
in a system that's one of those simple
civilizations all right oh good my
tradition in the general equation is to
build out until something else happens
that would be matter need to be a all
stopping letter state of all natural
are some of your left store yeah
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>