<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongooseIM 2.0.0: the messaging platform offering the power of XMPP with the simplicity of REST API | Coder Coacher - Coaching Coders</title><meta content="MongooseIM 2.0.0: the messaging platform offering the power of XMPP with the simplicity of REST API - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongooseIM 2.0.0: the messaging platform offering the power of XMPP with the simplicity of REST API</b></h2><h5 class="post__date">2016-11-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/B5tPfRgcRWU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the erlang
solutions webinar my name is Martin
Miletich and I'm the VP for the Amir
region here at erlang solutions today's
webinar represents a continuation of a
series of webinars we have been running
across topics of interest in the world
of Erlang and elixir and dealing with
solutions based on these programming
languages now today we will be hearing
specifically about the latest
incarnation of Mongoose I am more
precisely speaking it's 2.0 version as
many of you will know Mongoose i''m is
of course a full-stack real-time mobile
messaging platform it has earned a
particular reputation as an immensely
scalable XMPP server and its latest 2.0
release brings a very sharp focus on
mobile now a mongoose I am to dato
specifically supports several key
features of the XMPP protocol and with
extended REST API Mach light and pub/sub
functionalities Mongoose I am opens up a
wide new range of possibilities in
real-time application space if we have
any technical issues during what is a
live event then please excuse us and
we'll obviously try and get back on top
of them as quickly as we can but to
start by telling you a bit about erlang
solutions we are a products and services
orientated company devoted entirely to
the Erlang and elixir programming
languages we work with organisations and
individuals using these languages we do
our best to help evolve them and to
support people and businesses using them
our headquarters are in London we have
offices in Stockholm Krakow Budapest San
Francisco and Grannis Aires we run
projects that span industries and the
globe itself we develop Erlang and
elixir based products and some of those
include wombat OEM our monitoring and
management technology mega load our load
testing tool and react which is well
known as the key value and time series
distributed database I'm really pleased
to say our speakers
today our Nicola verite who is the
Mongoose I am product owner and look
with Bukovsky who is a mongoose I am
developer and they together will be
telling us everything you need to know
about 2.0 in particular please allow me
to finish by saying you are most welcome
to post questions throughout the
duration of the webinar by using the
chat facility on the webinars interface
our speakers Nicola and Luke we will do
our best to answer as many questions as
time allows at the end of the webinar
together with me if any questions do go
unanswered then you're most welcome to
raise them by email you can use the
following address for that purpose
webinar at Erlang - solutions calm
that's webinar at allowing - solutions
comm following the webinar if you're
interested in learning a bit more about
long goose I am or would like to
establish whether it could be a solution
for the challenges your own business may
be facing then by all means feel free to
contact me directly my email address
will be displayed in one of the final
slides of today's presentation having
said that I would now like to hand over
to nickel of everything who will be glad
to start us off thank you madam
thank you very much hello everyone good
morning or good afternoon
so here we go this is today's webinar
and we are going to show you how this
messaging platform can offer you the
power of XMPP with a simplicity of a
REST API but much more as well so as not
introduced we are Ludwig and Nicola
first let us introduce you to the plan
of this discussion we will introduce
what Mongoose AME is and then we will
dive into the features offered by the
version 2.0 2.0 REST API mock light
observe and wombat OAM plugins here we
go what is Mongoose I am well first a
mongoose is a little furry animal
Mongoose I am is with I am which means
instant messaging instant messaging or
chat or mobile messaging you call it the
way you want some expressions may sound
of a bit old-school but still the same
thing basically we are offering
one-to-one group chat and everything in
the back end here are some applications
that runs on for example bottom left is
Grindr an application for dating you see
here a list of conversation on the first
Queen shot and second screenshot the
conversation itself with pictures then a
second application that is moving that
is an open source application runs on
the web the first screenshot is a social
content it's a micro blog the second
screenshot is a conversation the third
screenshot is the more the tablet view
sorry or the laptop view it's a much
much wider screen and on the top right
you could see conversations which is
another application another open-source
application available on android
likewise you see the list of
conversations and then the conversation
itself that is a good chat so what is
Mongoose I'm it's also a platform as you
can see it's a platform that is based on
the XMPP protocol and philosophy also we
are offering a REST API the platform is
designed as a whole it's designed
consistently so that you're going to ask
to ask whether feature is implemented in
one component or another when a feature
is delivered it's delivered on all the
components so let's dive into the
components you have the Mongoose I am
server then two interfaces the XMPP
interface and the rest interface so for
the XMPP interface you have two mobile
libraries for iOS and Android and will
detail that a bit later and for the REST
API likewise you have
which are available these are
third-party open-source libraries that
we are contributing to at the bottom you
will see one bateau a.m. which we will
detail later in this discussion as well
and on the right you have a skills which
is an XMPP airline client for functional
testing some gray square maybe some
components in the future icicle the ice
server which enables void and platypus
is a push notification services system
sorry so mangu sign platform is
available on premise are hosted on
premise means you can install that
in-house in your own servers or in your
cloud hosted means that we can handle
the hosting and the management for you
so we deliver that platform for mobile
applications also for web applications
but let's not forget the Internet of
Things because the power of XMPP lies in
the connectivity between humans and
machines so here are more in details the
components let's name them Mongoose I am
the server that's the first component
the central piece then the iOS libraries
on the XMPP front you have XMPP
framework coded in objective-c
and that's used in chat secure Jaime is
coded by Anaka and it's in Swift for
Android libraries you have SMAC it's
made by ignite roll time community and
it's in Java
obviously retrofit is for the REST API
part it's Java as well and made by
squared one bat one bat William is made
by a line solution it's coding in a Lang
and it has wonderful and helpful
Mongoose iron plugins likewise we will
detail them later and Aeschylus easily
allowing XMPP client that allows you to
make functional automated tests so we
are saying that mangu same platform is
massively scalable
deities for example you can install it
from a business card side or payment
card side size machine a very small
machine you can install mangu Zion on a
real powerful server if you want to
scale much much more we encourage you to
install cluster for fault tolerance but
also scalability so you can deploy two
machines three machines five seven and
up to up to a lot and then if you want
to scale even more what you can do is
deploy clusters in multiple data center
all over the world so that a cluster
lives close to your user bases now why
would you add chat and social features
to your existing applications because
because basically these mechanics trees
the value of your network first you can
add chat and then you allow your users
to interconnect between them inside your
application then what you can deliver is
group chats so that you increase their
usage of the app and then what you can
offer is social network on top of
everything so that all your users can
communicate the way they want on your
app for better acquisition because you
have more features that attract them for
better retention because they will use
the app every day and for referral
because of the network effect they will
attract more people so here we go now
let's dive into the more technical
features and that's gonna be the last
line I'm gonna be talking and I will
hand over soon so why a REST API because
well in the XMPP worlds and communities
it's it's not natural to talk about
recipe.i because excellence is connected
in real time and rest is much different
paradigm
it's more polling and simplicity so we
identify the pain point that is
repeating over and over again a lot of
developers seem to find that XML and
XMPP are too complex it's for them too
hard to learn and it's a big gap - it's
a big leap so we found out that XMPP
developers are quite rare but rest API
developers are all about the planets so
we delivered XMPP and rest interfaces to
mangu sign so you just choose what
interface you want to use and now I hand
over to Ludwick so we will detail you
the technical features thank you go so
basically we divided our REST API
feature into two parts back-end and
client back inside is made mostly for
third-party services in order to manage
the server it's usually run in local
network and this is mostly the admin
stuff so all things that admin can do
the server for example lists sessions
common users are locked in sent message
sent message on behavior of other users
create destroy rooms and for example I'd
like to do some load testing I need to
create 1000 am users what I would do is
revalue is logging into a rack shall
type some comments and create them
completely manually not anymore we have
this HTTP API service we can do this
remotely and then we can even automate
this whole process because we can just
write one request in the scripts and
then we can spawn instance of that
traffic client traffic generator and
send request in order to create those
users on the other hand with the client
side those are all scenarios that user
can do when he's locked in it means that
it requires authentication it's done by
HTTP basic out mechanisms it's run over
the internet so it's open for everyone
the purpose was to make easier to manage
the client side for mob
web developers because they know HTTP
better than HTTP the most basic use
cases for client-side is sent one
message I sent group chat get the
history of the room it's simple in
development and maintenance and
additionally the important thing about
this feature is the documentation if you
know guys some other documentations like
OpenSSL it sucks so documentation can be
done cool and can be done wrong our
documentation is cool is beautiful for
example we have implementation notes we
have response status of the request we
can see even the example request example
response and interesting part of this
documentation is that we can even try it
out and then it will generate us the see
URL command unix command it's done in
swagger and our modules for REST API in
Erlang are done with cowboy library and
the important thing is that you can
enable or disable modules for some
features for example we can disable
module responsible for sending message
to the group chat or for the creating of
creating of rooms etc ok the second big
feature that comes with Mongoose am 2.00
is macwrite what is Mac light it's
lighter version of Mac so what is Mac
markets open standard and this is about
multi-user chat if you go to the
extension page you can see that it's
quite a big it has more than six and
half thousands of lines I would call it
even a big Empire in the xep world
anyway it's about cutting in a room so
let's assume that you have created a
room you have invited your friends and
you talk with them for a while if you go
you are subscribed to our room every
time you want to enter it once again you
have to send packet which is called
presence to our room and every time you
want to leave it you have to send
presence with type unavailable terror so
every time you want to enter room cent
pocket every time you leave you have to
send packet scabbing been subscribed
it's not enough you can say okay I can
send as many pockets as you wish because
I have infinity bond wire connection my
home a turret and five rotors etc it's
not problem for my desktop application
it might be problem for your mobile
application because having a mobile we
constantly lose our connection for
example you go for a walk to a tunnel or
you visit your favorite elevator etc fly
you constantly lose connection and then
it means server will send the presence
with type on a table to ever occupant of
the room so that they know that you have
left the room if you want to joint once
again you have to send presence once
again lots of applications don't have
bookmarks and outer joins mechanism so
this is one of the problem this empire
strikes again when we talk about
presence broadcasting you sent presence
to our room when you joined this pocket
will be broadcasted to every member of
the room and in response you will have
presence of every member of the room so
this is quite a big bandwidth
consumption and we call it noise
pollution once I did a quick math
example we have 1000 members in the room
that I measured the size of the
president's presence it's more than 300
bytes and having in mind that every
occupants leaves the room and joined
once per 10 minutes it seems that users
will receive more than five and half
megabytes per hour and this is just
leaving and entering room so it's not
even cutting the first thing about
legacy implementation is its complexity
we have roles so you can be moderator or
visitor there are reserved locked and
anonymous rooms I haven't used up there
are direct and mediated invitations so
you can send invitation directly to
someone or ask the room to invite you
have private messages so you
group chat we'll have private messages
also etc so the conclusion is that we
had to invent something cool so
gentlemen welcome to the mock light the
first rule of the market is you do not
talk about presences the second rule of
the mock light is you do not talk about
presences because we completely got rid
of the presences we don't beat them the
third rule
someone steals bumps disturb and noise
the chat is over you can simply block
him with built-in blocking feature that
fourth rule only two types of
affiliations member and owner the fifth
rule one chat at a time so there are no
private messages six no rules no Nicks
the seventh floor the room will go on as
long as it has to when someone with one
of the nose dies the room will still
exist I will explain in a minute the
eighth and final rule if this is your
first time in the room you have to be
invited
you can't just join it on your own so
here is a little bit practice of air
rank we have all the gas implementation
in MOOC and MOOC light compared our dis
our connections of users are represented
by processes in our rank as everything
around and room are also represented by
processes when someone sent method to
room the user process sent message to
the room and then it's broadcasted to
other connections of users in our MOOC
light implementation we got rid of the
room process and messages are sent in
context of user process so I have two
graphs here one of for a MOOC light and
the second for a tear gas implementation
we store our configuration of users and
participants in mini via its distributed
database over all nodes in old legacy
implementation we stored in terms as a
processes as I explained before and this
whole processes were stored on node so
in the case if one of the nodes dies we
lose their room processes in the gas
implementation step and it's not so easy
to
restore the process and invite the
people to the room this is not problem
for mookaite because when it's dirty in
the database the configuration will be
still existing in the note 1 &amp;amp; 2 also of
course we have support for client side
we contributed to smack library for
Android and iOS example / framework so
we represent you the server and client
site for mark light there one think more
about 2.00 is pops up Nico could you do
some introduction to pops up exactly
thank you thank you music so pops up
maybe you know what it is but why why
it's more importantly why because a lot
of our customer a lot of the people we
are addressing want to innovate to
invent kind of they want to add more
features to their applications to the
chat experience because they want to
increase the attraction and overall
their income I believe so yes the pub
sub is a generic pattern a design
pattern what we are showing now is we
are living with the whole thing but we
are showing a simple use case imagine
that instead of struggling and having
painful journey trying to innovate you
just add a very simple touch of social
to your application we only to post
simple articles and also for friends to
be able to comment on these articles
overall it is quite clear that these
features will increase your application
usage by the users and also in use it in
will increase the network effect here
sample application this is moving once
again so on the Left screenshot there is
a list of publications and on the left
on the right panel there is this
wonderful picture of us that's me kasha
and me how at the past the Paris open
source summit last week so we did that
publication unmoving it's available on
the web and it's on XMPP on the second
screenshot is just the same view but on
the Android application and then the
third screenshot is back to a browser
it's just a different shape and size see
below there are two comments by Timothy
I just ran it a similar gesture is the
creator of moving and so this is a very
simple use case that's in production you
can use it right now and we still have
proof of concepts applications on iOS
and Android that use that mechanism
that's called microblog up to you now
Ludwick okay so more technical view of
pops our pattern in the center we have a
topic sometimes it's called note or
channel on the one hand we have
publishers that sends data to this topic
and on the other side who have
subscribers
there are subscribed on topic and we'll
a synchronously be notified when some
data of course on the note basically
it's quite a big deal there are big
applications like Twitter or YouTube or
WordPress even Facebook that use it for
examples on YouTube are the most simple
example we have implementation of pops
up in mangoes I am 2.00 we of course
provide some tricky configurations for
example you can have cash of last few
events on the note so that when new
subscriber of course will be notified
about past recent notifications
additionally we have extensions of
extension of pops up one
pop sub-collection knows it's accept two
four eight and it works that way you can
have whole tree of nodes and when you
are subscribe of one of the children and
publisher wins will send data to the
parent node the children note also will
pass the data forward so you can we
subscribe on whole branch of nodes the
second extension is personal even
protocol it's one six three XMPP and
it's quite simple you have one note per
user and one publisher of course is
there per user
in your roster when something
interesting happens in life of your
friend you will send this data to its
node and all friends or people in the
roster will be notified about this I
have also compared group chat and pops
up implementations in this table firstly
the trees chapter we have as I explained
before tree structure and pops up we
don't have it in group chat so only flat
namespace of rooms participant list of
course you have it in group chat and you
can't know other subscribers or other
publishers in pubs of implementation as
you missed administration yes for group
chat no for pops up you can't manage
notes from subscriber point of view
interesting thing about the pops up is
that you can be notified about event but
you don't have received a whole payload
you can ask for it later it's quite
interesting from bandwidth point of view
you don't have such a feature in group
chat presence of course this is only for
a legacy implementation group chat you
have to send presence to the room you
don't have this in pops up the last week
regarding monk which I am 2.00 release
our one bot om plugins what is warm at
home but is monitoring tool or any land
based products
it won't is that where it connects
through air and distributed throughout
as a hidden node
and of course you can simply add or
remove notes through cool room but OAM
dartboard it does a simple measurement
of your airlock virtual machine for
example you can measure the size of a
long process excuse or you can run
garbage collection those are just
default functionalities there are some
more specific functionalities that are
provided through plugins there are
plugins for Iook for Phoenix for cowboy
library for ramekin pew of course and
Mongoose I am I'd like to focus on long
as I am plug-in the most important thing
is that you can measure how many users
there are online you can check how many
stanzas are sent per minute you can
check how many authentication failures
there are you can even check how much
time consumes function execution for
example we're taking password on
Mongoose I am site how much time it
takes additionally you have services you
can check hosts that are registered on
the same note and you can check how many
motors are enabled per host additional
you have alarms so you can have an email
in the middle of the night saying hey
don't think it's wrong on Mongoose I am
something crashes so this is also cool
feature thank you once again and this is
a large slide so there is more of course
over the course of the development of
Mongoose iron platform to the zero to
zero we have run a lot of activities and
here are some of the available outcomes
we are doing continuous testing
different kinds of testing of course
functional testing it's available in
Travis continuous deployment we have a
staging server that is deployed and
connected to s 2 s meaning federated
with the worldwide XMPP Network and also
we have continuous load testing it is
still at work in progress and keep
connected because soon we are going to
talk about it so we believe that
these advanced testing brings much much
more quality to the product and first
you can trust even more that platform on
the documentation side as well we have
listened to to you and some of the
things were unclear so we augmented our
documentation we detailed the clustering
how to scale what are the different
architectures what are the different
steps in the scalability journey also we
have little focus on databases because
you have two different types of
databases that one because I'm uses you
have the transient data which can be
stored in Asia or Redis and you have the
consistent data which can be stored in
many more databases such as our DNS
relational databases but also no sequel
database it's mainly we are KDE today
and soon maybe more also we have listed
the contributions that we are making to
the ecosystem obviously the in libraries
on iOS and Android snack 400 an X entity
framework for iOS and also we have
documented a potential roadmap so feel
free to comment on everything we would
really would love to to hear back from
you from what you think about that what
you think is valuable to you and what we
can improve so here it is it is the end
of this presentation I believe that Vlad
and will take over Vlad and up tube
Nicola Nicola and a little bit first of
all thank you for a most inspiring talk
on mangu Shyam I think given that we're
almost out of time we should wrap up
here but I can only promise to everyone
who's asked all the questions we
couldn't answer that they will be
answered in writing so we will send you
emails with the answers to the questions
you've asked and again apologies we
could announce them right now I would
just like to thank everyone for
the webinar in particular Nicola
absolutely for obviously doing a
fantastic job on Mongoose I am oh I
would just briefly like to mention an
Mongoose I am hesitate become a
messaging platform of choice that is now
widely used across social media gaming
health care financial services sectors
where you simply have a need for
something robust something that just
works and it scales reliably
and easily now thank you all again for
attending this particular webinar and do
join us for the next webinar I'll just
point out briefly that we will send you
a short survey to make sure that your
feedback is captured from today's
session the recording of this session
will also be available on the airline
solutions corporate website which is
located at WWE - solutions comm so you
you're welcome sort of take that there
in the next couple of days but above
everything thank you all once again for
joining us and we look forward to seeing
you on our next webinar</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>