<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tech Mesh 2012 - Developing and Integrating WebSharper Applications with Facebook - Adam Granicz | Coder Coacher - Coaching Coders</title><meta content="Tech Mesh 2012 - Developing and Integrating WebSharper Applications with Facebook - Adam Granicz - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tech Mesh 2012 - Developing and Integrating WebSharper Applications with Facebook - Adam Granicz</b></h2><h5 class="post__date">2013-08-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8Bx4PmXvmio" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well thank you very much so today I'm
going to talk about developing and
integrating webshop applications with
Facebook and for those of you who don't
know anything about webshop applications
these are applications written in
f-sharp and trans compiled into
JavaScript using the web shop or
framework so this is one of those
development frameworks or platforms
where you write code in one language and
you basically get full blown web
applications distilled from your f shop
call in this case so let me just
introduce myself in case you don't know
me I'm a three-time F sharp MVP now
since 2010 I co-authored for F sharp
books three of them with Don time who is
the designer of F sharp as you probably
know and actually I founded a company in
2004 called intelli factory this is the
F sharp company as we call it we do
everything in a prop we have over 150
some projects and every single one of
them is it so here are some of the books
and the interesting one is the last one
we just came out about a couple of weeks
ago so anybody interested in mobile
programming in particular that third
edition now has a substantial amount of
mobile material in it in f-sharp alright
so we are a small company we were found
in 2004 we do mostly research and
nowadays some product development like I
said we built up some significant
expertise in f-sharp by complaining over
100 plus projects we like combining
creative ideas and cutting edge research
and typically nowadays that's going into
web and mobile programming
and basically developer productivity
tools okay so let's talk about web
sharper so I actually have a few slides
on web shop or so do you understand the
background of the whole framework here
and then when you start looking at the
application code you will have a sense
of how actually it's working hard to get
high gets translated to f sharp and
javascript for the client side so
webshop risen enterprise-ready framework
it's been a pretty stable and mature for
for several years now we started
releasing the first battles in 2009 so
it's been around for 23 years in a
pretty stable way now basically in a
single line it allows you to write all
your server and your client called in
f-sharp you don't have to worry about
calling javascript you don't have to
worry about including JavaScript
libraries you just write code enough
sharp typically even without caring
about web concepts so it's perfect for
individuals who don't like or know
anything about the web because it's
aimed it's supposed to abstract away all
these details and giving you a web free
environment to programming and then fill
in the web parts as you know the
translation proceeds by the framework
itself basically we don't produce just
JavaScript code we actually produce
complete web and mobile web based mobile
applications which is a major difference
between the other competing frameworks
that just aim to produce you JavaScript
from IL JavaScript from c-sharp
JavaScript from different languages and
then you end up manually lounging in and
and you know massaging the end result
with your own libraries to get it to
work so here we basically give you a
complete web application that you can
just single click deploy and get it
going you can interface with any client
side JavaScript library and this is one
of the points that people typically
misunderstand by this we mean that you
can take any JavaScript library and
address it in web sharper using F sharp
which means you get type zip API you get
basically you can forget about having to
manually check all the different CSS and
all the different image and all the
artifacts associated with those
libraries basically web sharper the
framework itself will take care of
tracking all those for you and that the
fourth first few of these points were
about the translator itself we also have
built powerful functional abstractions
on the top of this compiler and that's
basically most of web sharper now these
functional abstractions so we have
different abstractions to represent the
different web and mobile chores in a
type-safe manner in f-sharp and some of
these include you know as a side effect
things like automated or automatic
resource management safe URLs and so on
and so on actually have a couple slides
on a couple of these abstractions one is
formats the other one is a cyclist's so
that you can familiar familiarize
yourself with those concepts before we
delve into the the main application but
overall in our experience you end of it
a lot less code if you do this sort of a
uniform language development model for
for your applications you typically end
up at least half but many times even as
little as one tenth of the similar or
equivalent code base if Britain in
asp.net with C sharp and JavaScript so
there's a huge amounts of savings to be
had and a lot of the lot of that saving
actually really distills intangible
benefits the maintenance is much easier
because the code base is much smaller
and so on and so on and by that you save
money ok so now that's let's check into
this so basically yeah no no please do
many many years oh I think we put in
vaina I think we we have easily put in
about 25 28 me maybe even 30 men years
so I'm just counting by five six people
a year full time working on this for
four or five years now and the actual
integration with JavaScript can just
pick any client side JavaScript library
and then assume yeah yeah that's that's
right you can pick any JavaScript
library and i will show you because
that's exactly what i'm going to talk
about today how you interface with
facebook in this example so facebook has
a fairly large api it's all JavaScript
and in this case we're going to
demonstrate how you can use that API and
program against it in a shop and
basically erecting that kind of wrapping
around the Facebook API so it's a web
development framework like I've been
explaining it's pretty much the same as
GWT if you know that for Java people but
here the language mismatch is much
larger than Java and JavaScript here F
sharp and JavaScript sometimes from a
few lines of F sharp code you can
actually have hundreds of lines of
JavaScript code that accurate that is
equivalent to the same expressivity so
by raising that kind of abstraction
level and using a different language
well we hope to demonstrate that people
can get really really productive writing
web applications all right we basically
so how do we do this I don't want to
really describe this because this talk
is not about web sharper itself but I
put in a couple slides just so that you
understand that we take the language we
compile we translate what of what you
have written we have we analyzed the
different data values the data types the
functions you call and how you call it
and basically we for most of it we can
actually automatically translate that to
JavaScript but for a lot of it we need
we need to say well this and this dotnet
function that you just called is
equivalent of the following JavaScript
and so we have two different kinds of
mechanisms for extensibility one is
extensibility on the.net front the other
one is extensibility on JavaScript front
and so far we have been saying that yeah
you can pull in any kind of JavaScript
library that's the latter extensibility
but for the translation to actually take
place we also need the other hacks
extensibility which is how you translate
dotnet code into JavaScript and that's
what we call proxying I'm not going to
talk about proxying today so what this
slide says is that we have provided
proxies for most of F sharp and some of
the standard libraries in.net so system
that's training and stuff like that you
know the basics and even regular
expressions and a lot of other things or
proxied they had been proxied and
therefore you can use it in your code
and basically what this means is if you
take pretty much any F sharp code
written against the dotnet framework
we'll just translate to web sharper into
JavaScript without any kind of hassles
in case we have a function that we can
translate we'll let you know and then
you can provide a proxy for the function
or download some extension that actually
is a.net proxy extension so it's a
extensible development model yeah it has
all the basic stuff and all the even
advanced so the F sharp language wise we
have covered everything but reflection
and there are some minor corner cases in
different other areas that probably
nobody will ever use but reflection of
course is a single exception to the rule
that it get can be translated because we
don't have the same kind of meta
information and clients like in
JavaScript execution you don't have
information about the types that you
have on the Sun on on the.net side
yeah yeah you can you get pattern match
you can use active patterns you can use
computation expressions you can use
everything both reflection like I said
you can use the entire language and in
fact we have sharp three you have type
providers so type providers can be used
for lots of things and typically in
short applications we have type
providers in our some of our
applications you typically end end up
using them on the server side to fetch
some data or abstract away that some
parts of the data source and you know
give strongly-typed pneus around this
data source and expose it to some client
and so that exposition or exposing is
taking place using the translator and
the type provider is run on the server
side that would that would be possible
if if you could push through not only
the code for the type provider but you
could if you could also emulate how type
providers are hooked in like you have
visual studio hooks but yeah that would
be tremendously interesting the only
problem with that is that typically the
kind of things that you use a tie
provider for you need the server side
because there's some kind of dat
awareness which typically it is a bit
sensitive data which you don't want to
have on the client so there's a
trade-off but of course nothing really
stops you and like I said there could be
all kinds of Thai providers all right we
have seamless environment and tool
integration so you download web shop
print visual studio will get templates
you get f5 you can you know single click
deploy and so on and so on and we have
legacy support for asp.net and MVC
applications so you can take an existing
asp.net application and from today you
can start expanding it and adding
functionality to it in f-sharp which
then suddenly will make your
productivity curve we believe much more
steep
okay so here's a list of the basic
abstractions in web show preview we have
pagelets these are the basic building
blocks for client site functionality
expressed in f-sharp then you have
seidlitz you have site lets you have 4
minutes for modeling in a composer bond
type safeway web forms and then we have
extensions these are the ones these are
your bridges to different JavaScript
libraries that's the example I'm going
to use today an example for an extension
and then we have something coming up
which you haven't yet released these are
called slide 'let's these can be used in
modern mobile and windows 8 applications
which we believe is it's going to be
really really cool and very productive
so seidlitz like i said just a single
slide on this there are type save
composable first class website web
application values in f-sharp they are
instantiated or abstracted over a action
type which is typically used in other
MVC type frameworks so you have an
action type that in a strongly typed
manner aims to express the different
pieces of functionality the different
entry points into your application so
here's an example this is actually
coming out from the basic template that
we shipped with web shopper there's a
sample application that has homepage a
contact page some page that is protected
and you need logged in and then logging
in and logging out and some echo
functionality for you know pinging a web
resource and getting it back so that's
the type signature for the type and then
the site that you erect around that type
will serve that type and you just need
to say hi it will actually be served so
that's what site let's describe and once
you have described that you can put it
in a DLL you can drop the DLL in a web
sharper aware container and suddenly you
can serve the web site on the web
application from it and these can be
rest services they can be web
applications they can be just static
sites whatever you can encapsulate the
whole thing in a single dealer and of
course you can build extensions
d allows as well that you can ship parts
of functionality that can be reused in
other applications you can ship them as
deals so they are really really nice
building blocks so here's an example
where how you can actually get something
done and something served back to the
user so here we have an XML file and
what we use this is the older model that
we used to have we no longer have or we
no longer advocate using this but just
for the sake of comparison because in
the next slide I have a dynamic version
so this is the static version so what we
do is we basically consume an XML file
at compilation time with this still F
sharp code from it that will have a type
signature you can instantiate that
function but now you get in the
generated file to produce an HTML or
whatever web content and that's how you
do it you basically instantiate the it
would be generated on the templates that
skin skin is coming from the file name
of the xml file this is some xml file
that your designer may give you okay
developers this is your new template for
the new web application please install
it into the application you're working
on this is a web shopper tank okay so
you can't go to a graphic design agency
and say please design your skin no you
can so what I meant by specialization is
that whenever somebody has designed you
a template this is just a plain set of
CSS and HTML files coming from the
designer the programmer then goes into
the template and remove some of the
static content and and puts in a
placeholder and he says well here is
going to be the menu here is going to be
the main content so a typical templating
stuff and the way you do that whole
definition you know like defining and
going from a single a single static HTML
into a template is Webb Harper specific
and the whole compilation that takes
place this whole path is also web shop
or specific so we generate code from
that template but we have found that in
practice this is not very nice because
if we have a web application
and you say well we kind of goofed up we
need to change something in the markup
well then we have to recompile the whole
thing and then redeploy and that's not
very nice so for that addressing that we
have this more dynamic template it's a
different mechanism and here's the code
how you can actually consume it without
any kind of other compilation step
involves you take a main HTML file you
embed holes or placeholders in it the
same way as before but in this case I
mean these are two functions that we we
give you in the templates that you can
start these kind of applications from
web sharper but you can write them
yourself we use some functions from from
the content module that can actually
consume an HTML file or an XML file and
you can look for placeholders and you
can dynamically plug in content into
those placeholders and and bless you and
expose those different placeholders in a
type-safe manner based on a type
definition so yes even though this is
type safe and asp.net is not
yeah yeah yeah you can basically do
everything here that you could do with
asp.net or with the static templating
that I showed you the the main huge
difference between this and asp.net is
that first of all not everything is a
string and not everything is a control
that is the same type as any other
control here you can erect a type-safe
interface onto your page and then you
couple that with a template that is
supposed to supply the same kind of
signature and then as long as they are
in sync your code will always be tight
checked and it will always work but as
soon as you start making changes to the
template that are not in sync with the
typedef above like you add the body
another body whole place holder which
doesn't get instantiated then suddenly
you get a runtime error so you just need
to make sure that these holes and your
typedef are in sync and by the way the
typedef the records can be typed
differently like that one is a body
placeholder typically I can see it it's
for a list of elements so it's meant for
web content inserting web content but
you can have a whole that has a type
string or int whatever it's all up to
how you render that in and those are all
encapsulated in functions like this
that's a nice formalism because with the
function called width template all you
have to do is give a body which is
basically a series of HTML apps
Combinator's representing markup in
f-sharp and it will include it and embed
it into the main dot HTML file and serve
it back to you we had nightmares doing
in saying oh we won't strict HTML will
star Z will check into Jack
the force programmers to do it right and
you know once you have insecurities well
when you don't require it from the start
now you just don't so this is this is
driven by the doctype that is marked on
your HTML file so if you say that your
dog type is just plain HTML 5 then you
get some pretty significant amount of
the dynamism but if you say if you if
you state an older doctype it will
actually insist like an xml doc type for
example it will insist that it has to be
parsed as xml and it will reject things
like you not closing p tags and so on
and so on and those will fail runtime in
this scenario in the other one in the
static one it will fail at compilation
time but but most people don't want to
have to recompile so most of our
applications are using the dynamic
templates nowadays we actually are
experimenting with a third one but I
think it's too early to describe that
but it basically gives you not only this
sort of a type safety erected on the top
of markup but it also gives you type
safety erected dynamically on injected
JavaScript elements as well which i
think is pretty far out there for now
let's just leave that in the back of our
minds so here's how you basically
combine up sides from cyclic
Combinator's there are different
combinations like cited contents like
side let that protects eyes and infer
side let some so you basically have
basic ways of creating side let values
and summing them up to form larger side
that's and these basically will be
served as your whole application the
other abstraction found in web shopper
is formats they give you the same kind
of type safety and compose ability as a
site lots they are a little bit more
refined because we also have taken the
concept but first of all form let's have
a nice theory so you can find academic
papers you know format in
implementations in haskell and clean in
different languages and the first one
for F sharp was our formats library
there's another couple ones I think by
now but none of them have dependent
formats and none of them have floats and
these are coming from the fact that we
actually are rendering formats using our
own interpretation of formats so here's
an example so we know what we're talking
about so here's a function called TB
that takes two arguments and it gives
you a text box with a basic validation
and a label and some message if you fail
the validation so in the general form of
composing formats is that one in the
rectangular box in red so you basically
take n formats you compose them with
that funky operator and the sum or the
composite value coming out of all these
sub formats can be also composed and
returned back as the result of the
combined format and so that's the syntax
and here's an example using the TV
function so as you can see we have two
text boxes with validation both of them
are validating on emptiness so you
cannot submit until you actually put
something in we have more refined
validators but the TV function if you
have looked carefully here it only
insists on the value entered not being
empty I could have said hey I want this
value validated as an email address i
want to have it validated as an integer
and so on and so on so you can have a
lot of different validators but once you
start combining these there's your star
operator and the format yield and then
you get a combined format which you are
now wrapping and adding a submit and
reset button you add it and wrap it in a
legend box and you add the form
container to give some sort of a nicer
layout of CSS so from those five or ten
lines you get that web form that
actually performs client-side validation
doesn't allow you to submit on TV fill
in some values and then it posted back
as a record of string string which
yeah yeah yeah so this is what i meant
so so when you take a format like this
so here's a for math right it's it's in
a box it has buttons and things imagine
that there's another format like this
you want to put two formats next to each
other but you probably don't want to
have to submit two sets of submit
buttons because they go on the end so
you combine without the buttons but you
say combine these two but render it
horizontally relative to each other and
then you get it laid out like this well
that's the implementation that we have
the rendering logic for formats and
indeed we use tables we probably could
have done it using dibs or some other
css3 or whatever if they wanted to
design the form they are likely going to
be using CSS heavily and saying well
this text box has a background this
button has this in this background and
these and these you know XO CSS
properties so what you end up doing but
first thought you can you can provide
your own in interpretation of formats
and the whole rendering it's not bad
it's 200 300 lines of code you can you
can customize for your needs and then
you just provide your own rendering
logic of going from here to actually
HTML or html5 markup that's not
difficult but let's say you stick with
ours so then you observe for example
that here is a formula and the buttons
have some kind of a class called button
and then now your designer has given you
a different design with the CSS class
for buttons you know doing more funky
stuff so what you want to do or you can
either have the designer give you the
right class names or you can in your
form a definition you can this is not
very nice we would
we'll say that that would be an impure
way of specifying this but nothing
really holds you from saying things like
okay here's a button but add an extra
CSS class to it just like with these
other enhance enhance dot something
enhance not something we have a whole
suite of enhanced dot something
functions and some of these functions
have have to do with things like oh add
at the CSS attribute to this and so what
you would do is you would look at the
design of your designer and you would
observe that yeah he's using this and
this in this class on buttons and on a
parent container this and this and this
class then you add those to your formal
definition and suddenly the code that
you get from your formats will look like
the ones that your designer gave you
yeah so I mean this is something that
you pretty often do and have to do
unfortunately but like I said it's kind
of impure because you end up spoiling
this nice functional definition because
this talks about what do I want to get
to and it doesn't talk about how you
want to get to it because right now
that's an instantiation of our logic of
rendering a format like that into actual
rendered form this is something
important and I think on the next slide
yes so we have different JavaScript UI
control sets that we have provided a
rendering logic with so you take the
same code you take this we have an
instantiation for jQuery UI yahoo UI x
GS and jquery mobile and we are always
working on new ones so basically you
take the same code here but you use
jquery mobile format instead of the
standard web sharper formats and
suddenly you have formulas that look
like nice mobile formats so we have
tried to do the work for you but if you
have a designer giving you some very
funky design then you may have to do the
same yourself
yeah that's that's using jquery mobile
formats the this form there i couldn't
find a better screenshot sorry but you
probably see that the buttons look
actually moberly the check box looks
more by lee it doesn't look like an HTML
check box that's because jquery mobile
has a nice way of expressing the check
box so anyway we basically give you
different rendering and and i'm mostly
impressed with the first of all the
jquery UI gives you this fairly standard
look and feel that people like and you
know it can also be customized and
skinned fairly easily but we have for
example the XJS formats which is the
library we haven't released we're using
it heavily internally to build
applications allow you to basically go
from a few lines of code like this to
really professionally looking user
interfaces because we use for example
libraries like xjs or central touch so
that's a massive productivity increase
we believe and just to wrap up on the
extension topic we have I don't know a
few dozen a couple dozen at least
different extensions for GIS for data
visualization for html5 and so on and so
on so all these different JavaScript
libraries that I picked some samples
from you can use them with F sharp code
and address them with a sharp code and
you get charged you get maps with
markers and things like that you can
even have full html5 support like you
have different libraries like WebGL 3d
GM atrix you can write this is actually
an application from google but we had
transcribed it into F sharp using web
shop it's about a thousand lines it's
it's a game where you can actually
rotate the table you can change your
viewport and you can shoot the balls and
they all roll around and they go and
sink and so on and so on so it's a fully
it's a full-fledged snooker game in a
five hundred thirteen hundred lines so
gr matrix which is one of the libraries
inside in this application and o3d which
is Google's own library
uses heavy amounts of mutation but in
this case those are all encapsulated in
the JavaScript library so in the code we
had tried to transcribe it and make it
more functional this is why the cold
went down from about 2,000 some lines to
almost half so we saved about thirty
percent by rewriting we didn't just
transcribe it one by one we actually
transcribed it and look at looked at the
logic and said well we could have
iterated through this array instead of a
for loop and whatever him whatever so we
had nicely restructured the whole thing
the coats has been down a bit and the
application was the same connected users
you mean if I have a lot yeah I'm
thinking historically where windows and
doc that wasn't the best yeah I mean
nowadays the socket handling and and you
know yeah yeah very much so so it so
first of all web shopper doesn't deal
with that kind of level it can so you're
still using a framework sure so you're
dependent on yes and in our case we
typically are only requiring in order to
run web shop applications that have a
server side so first of all you can have
a proper applications that are fully
client so you write them in f-sharp you
get a whole bunch of JavaScript code
even package it into mobile applications
and so on and so on but they won't have
any server side to contact so on these
kind of applications this is not an
issue but for the ones that have a
server side so the only things that we
what this is not something we require
this is this has designed in the first
place we want it to be compatible with
asp.net so in order to run any web
shopper application with the server side
you need an asp.net compatible container
I is or if you are running on Linux you
can have apache with asp.net mod
the module for asp.net there are many
many open-source web containers nowadays
that are falling in this category so
they are asp.net compatible but they
also come up with coming up with some
new stuff so there is this Web API as
they call it this new standard coming up
it's also driven by Microsoft there a
couple open-source initiatives to sort
of unify that what should be the
interface from outside for a web
container so you design applications for
that abstract description of web
containers but you can then port it into
any container you don't have to be stuck
with is I is so all that is coming I
mean it's no no big deal we have at some
point even entertain the idea of writing
our own web server we have even gone
probably implemented more than half of
it but then we said ah and it's still I
mean very very attractive so you take
the surf shop thing and you compile and
you get an executable which serves only
your application and nothing else so
it's more secure because it doesn't have
a whole bunch of other security you know
risky points but then we had realized
that oh well what if the client wants to
actually connect to that server through
https you know and then we had to like
actually building the same kind of
things that other people have long built
into other frameworks like or containers
like I is so why would we have to
duplicate functionality so we sort of
gave up on you know our own web sharper
web server project it's still sitting
there so we could probably pick it up
anytime but I don't have any plans to do
this how are we doing with time because
I have like a zillion slides so there's
another component inside web sharper you
know this is a whole framework and
technology called web sharp or mobile
I'm not going to talk about this it
basically provides packaging
capabilities you can move the target
scale things into the cloud and so on
and so on this is something that if
you're interested I can answer some
questions after the talk and basically
motivation for the web sharp and mobile
component is that almost everything is
becoming
javascript nowadays you have JavaScript
becoming the il of desktop applications
between those eight mobile applications
you know the phonegap style mobile
applications to web application mobile
applications you can write all these now
with web short html5 applications
clearly the future here is a project we
did at the beginning of the year this
was something I presented at CU FP about
this is a bioinformatics application
this is actually this shows the gene
functional breakdown of the bacteria
above which has some really really
interesting medical research
implications so anyway now let's talk
about Facebook because after all we we
want to do facebook today right so
here's an application I grayed out some
components so you don't see who posted
in whose timeline we are viewing but so
what I want to demonstrate is how you
can do an application like this in like
10 minutes so what does this application
do you can run this first of all as a
standalone web application you can run
this in your phone and you can run this
if you want as a facebook app installed
under the facebook platform it's all web
based all three different ones that i
mentioned or web-based so what this is
supposed to do if you can probably maybe
you cannot see but on the top there are
these buttons that give you login and
logout capabilities and then if you're
logged in you get this extra button that
says get my latest wall posts and if you
click that button what it will do is it
will go up to Facebook it will get all
your stuff and it will give it back to
you but it will give it back to you that
would be too easy just to get the show
it to you as is so we have decided that
we're going to give you nice things so
if if a wall post actually has sub items
like comments then you can slide into
those comments by clicking on the actual
light line item so first of all I can
show you the code or we can start with
the slides I think it's better to start
with the slide so what you have to do in
order to set up an application
like this it doesn't matter how small or
large you can write the next I don't
know cloud or whatever the massively
used application or you can write
something small you still need to
configure your facebook application with
Facebook so you go to the developers
facebook com site you get you need to
get an account as a developer first but
that's free you're going to an account
and you can start creating apps and the
only things to do to configure for an
app is it you need to name it and it
will get an app ID which is unique and
then you can start basically configuring
some basic really basic things about the
application and most importantly where
it's located where the server side will
reside on a public URL so here there is
a Heroku domain you get that integrated
with facebook automatically so you don't
need to have your own hosting you can go
on facebook have have an app that i was
just showing you you can just shove it
up into Heroku and then we'll be hosted
there and exposed on the facebook so
that's basically the configuration now
when you have everything I mean these
two pages are like one minute
configuration but if you observe
carefully at the end you get an app ID
so you grab that app ID and I'm praying
that out so nobody will misuse the one
that I had managed to configure you take
the app ID and you can start coding but
now this is the important piece we're
going to talk about how you can actually
address the Facebook API from F sharp
using web dropper this is what I was
referring to before as an extension to
facebook so here's the extension to
facebook that gives you log in and
getting status updates if you can which
part should I explain so this is the
gist this is from the top down there are
a whole bunch of things inside this
definition and then there's a FB module
which is a class with at least three
different functions or methods log in
again
login status and an API don't get scared
with these these operators are meant to
basically give you the same kind of type
operators that you have in normal f
sharp language but they are expressed as
functions that have a different meaning
so that we can reflect on them
differently and therefore we can provide
the kind of functionality that this
whole binding is supposed to provide so
this basically login is a function that
takes a function that takes a login
response and returns on unit and it also
takes an optional login option typed
value and it will return unit what is
login options was defined someplace else
it's defined in the dot dot dot here and
so on and so on and here you can
actually see that I'm also requiring
some resources we will talk about them
soon when somebody calls any of these
class or any of these methods from that
class and at the very end when you
represent the whole Facebook API you
have an assembly under this particular
namespace and then among many other
things you have FB the class FB which
provides the login logout and status
updates so for our little app we only
need like three or four different
functions and for a simplified rendering
here I'm showing the the basic skeleton
of this and now let's jump into it this
is actually defining a resource it says
I've a resource called Facebook API and
the path to it is this long URL and
remember i have annotated on the FB
class this resource so every time that
you use FB dot log in every dot api you
will inherently pick up a dependency on
that resource so in a page that serves
any kind of dynamic call to these
functions from f sharp you will always
automatically include the facebook api
web sharper will do that for you alright
so here's the resource here's a class
definition I say well I have some kind
of arguments a class which has two
members and they are one of them is a
string the other one is an
and so on and so on here's one that
allows you to define optional members I
have some initialization options class
that has nothing as a requirement
required part but actually has several
parts that are optional with types and
so on and so on so you basically in a
type safe manner this is f sharp cold so
it's strongly typed and statically
checked so if you make a mistake the
compiler will tell you before you can
compile this so when you have a when you
have transcribed your Facebook API into
this format it takes a little bit of
getting used to but not too much you
have a type-safe way of defining what
the Facebook API is in fact let me just
show you that yes when we talk about our
extensions so we have dozens of the
extensions to different things like
Google Maps some funky visualization
library facebook api jquery mobile and
so on and so on and they all look like
this and you can see that this one for
the example is ninety seven lines and
here's the main port and here's the FB
class and happy class like I'm giving
you here has these functions and now in
turn when I'm actually looking at my
application I can use those functions
his FB inked it actually is the key
don't look at that and then here's for
example getting your login and logout
status and checking if you're logged in
or not and things like that so let me
switch back here because it's more
understandable so you have a few of
these basic building blocks of defining
user api's in f-sharp code here's one
for example for defining a closed set of
enumerations for example user status can
be one of three different things but
nothing else it can be connected not
authorized or unknown that's how you
define it and at this point if you go
into your code for example here's there
here's an actual example that's a
property of type user status it's a
strongly typed you can see that the
three different static constructors
inside
and there's only three and there's
nothing else in it so you cannot
construct the status that is incorrect
and underneath this whole API generation
and API defining and definition
mechanism will will map it to the right
string value in the JavaScript API which
happens to be one of those three all
right so I'm supposed to walk through
the code and you probably have observed
that the code itself is not very long
ninety-seven lines for the binding for
the Facebook API yeah so yeah so we I
mean right now we are experimenting with
other means of getting these extensions
and bindings for example this typescript
typescript is this new dynamic language
from Microsoft that is supposed to
improve on JavaScript but typescript has
one of these cool features that you can
define up front kind of like a forward
declaration you can define types that
you will later on use in you in your
JavaScript coding and using those
definitions they have type signatures
Visual Studio the integrated environment
can give you code completion and code
discovery functions because it knows
that yeah although you are calling
JavaScript functions but somebody has
defined an API for them in typescript so
typescript is supposed to be somewhat of
a type safer version of JavaScript and
by using those kind of abstractions like
type definitions and these forward
declarations we can actually also tape
those and produce web shopper extensions
and that's one of our little side
projects it it's a few day project is
not nothing really complicated because
it's a straightforward thing but we now
have not only a way to define the API
bindings in f-sharp code but you can
also define it in typescript and there
are hundreds of JavaScript libraries
defined in typescript already so that
seems to be a more faster-moving world
of bringing javascript functionality in
a type-safe world so by providing that
small extension to actually being able
to parse those type declarations and
producing this same exact extensions web
sharper extensions is a massive massive
help so imagine that either one of these
two cases either from a typescript
declaration or from this is something we
call the web sharper interphase
generator or weak definition this is a
wig definition here i define I used the
F sharp language itself to embed the
binding so once you have it so the this
binding is coming from this f shop
project which happens to be referenced
if you can read this from the consuming
web application project and I think we
can just basically pull this up so
here's the code that's another 140 lines
that's our whole application so we use
the hundred lines of F drop go to bind
the parts of API of Facebook that we
needed and then we Rose another 150
lines to get the application that we
have seen here and then you get this
application it will log you in it will
log you out it will fetch your posts it
will render the posts in a slidable way
so you can slide to view the comments
otherwise you just see the pictures and
so on and so on and just two pieces I
want to pick out from this one is
performing logout and login here's the
is the calls to the FB module and the
members inside to get the status are you
logged in or not if not then logout if
yes then login and then this is hooked
on as a as an event handler to a button
which happens to be represented as an a
hyperlink the other point is getting the
wall post so once again you have a
button which I just represented as a
button get post and on the click event
you basically start showing a loading
message I mean I can probably show you
well I don't think there's internet I
didn't
to connect so there's a loading
animation why we are fetching the status
updates and when we are done we remove
the animation which is down here it says
hi loading message and then in between
we basically fetch and convert to some
markup based from the data that we'd
received and we display it so here's a
jQuery call that basically refreshes
based on the data that we have received
whatever you're seeing so the only
things that you have to do at this point
you need to put it on a public URL this
application that so here here's the
application you compile it nice compiled
if you open it you get a directory with
some some JavaScript and some HTML file
is actually one HTML file index dot HTML
probably you need to copy that into pub
a public Lee hosted URL which is the
same as the one you configured for your
facebook app whose ID you have used in
the application itself and then
everything sort of ties in together you
get a facebook application you can
authenticate you can use the Facebook
infrastructure to authenticate and get
the wall post and so on and so on and
the little app will just show it for you
so the bottom line is boom your
application is running and not only that
you can take the same code base and you
can install this as a facebook
application i will say i was too lazy so
i just picked a random facebook
application this happens to be
tripadvisor so imagine that your
application is running right there so
when we talk about facebook applications
they are just web applications in an
iframe nothing fancy nothing spectacular
so the same code base that you have just
seen could be put into a facebook
application or it could equally be put
into a mobile application in fact the
project i'm using in visual studio to
get this compiled is an HTML site
project so let me just quickly show you
what what kind of projects you can do
with web shop or so here's web shopper
you can do libraries you can do
extensions these are the things we
talked about Facebook the API the 97
whatever lines that you saw in the other
project is of type extension and the
site itself isn't is a project type HTML
site this is a fully offline all dynamic
client-side HTML and JavaScript project
and then if you go in the bottom there's
this android application for example
it's the same kind of project as an HTML
site except it also comes with the
packaging ability for Android so the
side that we distilled is packaged
internet Android application so what you
can do is you can move all that cold I
mean all that called a single file and
put it into an Android application
project compile it and you get a package
that you can now put on your android
phone and it will run happily as long as
you have a matching server side that
authenticates the user and then the the
client side will be running on your
phone alright so with that I think I can
give a summary you can read that so
basically we we believe that with just a
couple hundred lines of code you can
talk to people that use mobile devices
you can talk and address people that are
web people and you can also talk to our
target people on facebook you can
nowadays you probably see a massive
amount of Facebook Applications popping
up everywhere all asking for your
different permissions to use your
friends data and whatever so be careful
when you you know say yeah I want to use
this application but some of them are
malicious but there's a hugely growing
market opportunity and the other parts
of the web shopper framework will give
you the scalability of from the desktop
to the cloud and you know like and
really talk about the cloud aspects here
but because it's a Microsoft Technology
you can ease the skillet to run on as
your and maybe even other things so
using more powerful functional
abstractions we managed to cut
development time and I think that's the
key area here because not just the
development type but also the code base
that you have to then maintain which is
much shorter more maintainable at that
point just to give you a couple extras
we have fished at that this is a
community site that we built in web
sharper that collects a bunch of
different things you guys have probably
been on it if not then go and check its
fishnet the other thing that we are
working on nowadays is this f shrub
cloud ID it looks like doesn't look like
this anymore it looks much more cool now
but this is what it looked like about a
month ago it gives you basically the
same kind of capabilities as a visual
studio online kind of thing you can have
full-blown projects with a whole tree of
projects in your solution corresponding
to different projects that may be
interdependent that each have different
files you can open these files for F
sharp code files we provide on the on
the fly syntax and semantics checking so
as you type you get red squigglies like
the one shown there and you get a
console window where you can interact
just like if you had a line looks
terminal you could say LS my current
directory create a directory and it
creates in your solution so this is like
a little terminal inside the ID and then
you also get an interactive shell which
is like FSI those of you who use F sharp
and F SI f sharp interactive environment
which basically allows you to just type
F sharp code and then click enter and
then you evaluate the codes it's a
ripple environment and in this case we
have equipped it with some client-side
graphing and visualization capabilities
so you can do nice charts and stuff so
this gives you explore tory programming
but on a larger scale than other
competing sites like try short for
example this gives you almost full blown
ID where you can edit whole solutions
and in the
meantime do interactive development in
the terminal or in the interactive so
most of the browsers provide hooks yeah
most of the browsers provide hooks so
that you can hook onto these special
keystrokes you know like control f4
usually closes a tab in almost any
browser you can actually listen to that
character combination and or some of the
browsers even give you functions or
events that you can hook onto and say
well if the if the user wants to close
the session or the page you know I
should be warned and then you pop up
with JavaScript a single pop-up that
says do you really want to leave the
page and then you say cancel and then
you cancel out so you can hook into
these events and sort of you know fix
them up so they don't actually
accidentally close your session actually
I think I'm over time so feel free to
get in touch you see here my Twitter and
my email address so if you're interested
drop me an email or find me on fish
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>