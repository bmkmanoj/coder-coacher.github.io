<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lech Glowiak - Getting Started with Frege (Lambda Days 2016) | Coder Coacher - Coaching Coders</title><meta content="Lech Glowiak - Getting Started with Frege (Lambda Days 2016) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lech Glowiak - Getting Started with Frege (Lambda Days 2016)</b></h2><h5 class="post__date">2016-03-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YxUCZ4DDNmk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">ok so hello my name is lack as I was
announced and
today I'm going to tell you how to get
started with frigga so the the first
most important thing you can learn here
is that's not freed or fret it's free
guy its name of German philosopher and
magnetic mathematician and he was
talking about writing about herder
functions back in the 19th century so
just 30 seconds about me currently I'm a
scholar developer but I was java
developer for few years with functional
inclination so i have used lambda j in
2011 i think always liked it I have some
experience with Erlang also just because
I like this functional programming
especially our like but I had some
problems writing my coat with no help of
compiler then I have seen three gir so
the AVM which is my background was their
functional programming was there and
compiler help built in so I thought it's
a it's a good thing for me to do dig in
so a Frigga programming language
currently is announced as a haskell for
the JDM it's a little bit change of
direction because when I have first seen
it it was Davion language in the spirit
of Haskell that's because there is
ongoing effort to be on par with Haskell
2010 report which we can consider us
some kind of standard at least this
documented standard I don't mean that
let's say some industry standard is
Glasgow Haskell compile
we trust many extra features that are
missing in the report so project is to
check out from github there is a link in
the bottom and for those who don't know
Haskell at all there will be a first
part it will be a introduction to the
language it will be just few minutes and
then I'll try to implement JSON lint web
service using frigga and few other
things so this will be a web service for
validating Jason and this talk is
introductory there there will be only
one part I will go into more details
it's interoperability with the existing
JVM code so the features our language is
purely functional I won't go into this
put what does it mean it supports higher
order functions evaluation like in
Haskell is not strict by default but can
be forced to be strict values are
immutable that is very important feature
because we are in the JVM which has no
such constraint and there are algebraic
data types typing discipline is typing
his strong and track during compile time
a compiler helps with type inference and
syntax stars keywords are short there is
few of them and these two features in in
the red our key features of frega this
language runs on the JVM and it's
interoperable with other JDM languages
so you can use existing code base with
some restrictions it's
not like using Java in groovy or in
scale our maybe collections are
different we need to watch out for some
constraints especially this immutability
and if code is side affecting that are
things that that matter so to get
started with trigger you first download
jar from maven or from web page setup
sub aliases in your shell and you're
ready to compile we won't download it
now we'll go into a ripple project comes
with ripple from the same github
organization believe me if you copy and
paste these lines you will have ripple
running and maybe it's a good time there
will be just few minutes of of coding
how how does this language or Haskell
like language look like so our
functional language will define first
function or I will declare that i have
got function from int to int which maps
to a java int primitive or integer type
if we consider the size the range of
numbers compiler complains that we have
no implementation and that's it that
that's the basic syntax you can make it
even shorter you don't have to provide
parameter if on the right hand side of
equal sign there is a function of one
argument and that's up to function
obviously and language is strongly
statically typed and if I would like to
add
this number compiler complains so
sometimes you need to help get proper
type or a type class in this in this
case
so here I need to convert this 3 to the
number or numeric type class so now this
function at 3 finally supports all all
numeric types and i can add something
other than integer and the last of our
life coding will be a greeting function
so I i think we are within JDM language
so we'll grid Duke and if you look at
the return type it returns I Omo not of
unit and I told you that desktop is
introductory there will be linked to a
book for people who don't know Haskell
this this language is purely functional
so in fact grid function returns unit
nothing interesting and it executes in
wheaton IL context so it is side
affecting with the real world so this
real word is my consulting this in this
case and ripple also comes with a few
handy things commands first one it's to
check type of some function that helps a
lot especially for the beginners we can
check we can see documentation that
comes from the doc strings in in source
code we can see that that's that's the
second most important thing today we can
see a source code generated that's the
frigate sirs that's java source code
that is generated by the frigate
compiler so frigga configure compiles to
java source code and then runs java sea
with discount
so language itself or the the the figure
compiler uses java compiler it does not
create a bytecode by itself so all
optimizations which are within a Java
Sea are ready to use and coat it begins
with annotations because you know that
Java type system is not as powerful as
as Haskell is or or maybe you don't but
that's the fact so code starts with a
load of AD notations which are used only
by a frico compiler and are not relevant
to a to java and that now the part of
code you see cell is a java or free free
grant I'm coat yesterday in the evening
inga vexing the the creator of the
compiler has given me a message that's
new version from github compiles and the
code is more it's better the Java code
is typed better because for example if
you look at up three it returns object
and that's not not not very handy if you
want to use free guy from Java but
there's improvement if if time allows i
will show you difference i have got to
file spree part
just a few seconds with other features
of language here high high higher how
higher-order functions looks like and so
in the in the top line you see that this
higher order function I have given this
name to to show the future it takes
function as first parameter function a
second and can return fact function as
result or you can even supply one more
parameter then it will apply the
resulting function so this is like like
partial application sometimes called
this way we have got list comprehensions
very well known from other languages
almost like in in Erlang like in Haskell
language is lazy by default so i can use
this fine this constant function and for
example printing in red because rapel
needs just first 80 characters or
something like that it the computation
will terminate we want get hanging wrap
pattern matching with many clauses and
algebraic data types by the way guards
helps with shorter syntax were closest
let expressions to make out more
readable or don't duplicate sometimes
some parts of code if you want to have
it in a in a little scope a do notation
for a monadic expressions and finally
there's this not so quick quick sort I
think I I won't keep showing how it
works in the ripple but there is one
more thing r it comes comes with its a
it can load
it can load some file this is this just
this file I was I had open in my idea
few seconds ago so you can also write
your strips and play with them in the
ripple later so we know just the basics
now and we we can attack our problem we
want to make this JSON lien service so
first thing which we need oh sorry i was
quite too quick there is a online rip
also it's a if you are still talking
about tools you can prepare some script
in this upper left-hand side window and
it depends from which side of look like
and you can call this code in in rip
ripple window on the other side and
there is one thing also useful when you
learn this language it's a search engine
for functions which you feed with type
signatures you are looking for I really
like this this tool it's called google
for free guy formerly it was a frugal
and now it's hosted as you can see in
this link on a haskell org very useful
so we we can finally pass our JSON to
make the validation and our first appt
attempt will be a quite like cheating
because we use built-in JSON library
there is a built-in library for this I
just explain this slight a bit I import
this data dot dress on module with
functionality I need I make type aliases
because I would like to see that I use
the string as an error message and
validate is at all type alias which
takes drink containing JSON or malformed
Jason and it returns either type which
by which usually on can have value left
and right so usually use left for a for
signaling some error and right if
everything went okay that's common use
case for the either type the function
parse the value it's it looks quite
dummy because it's just equals another
function but I have Ray fight the return
type because the original part Jason
function is is more powerful it can
parse person string too many different
types that the type just have to be
instance of some type class type class I
don't remember which one but I only need
to parse to json abstract syntax tree so
I know if the parsing if the person is
ok I know that the the syntax of Jason
was was good
so how logic of our validating Jason
this is a parameter is calling this
parse to value function and if our
library return some error i adjust map
it as the same thing identity and if it
parsed to some json AST i would like to
return string representation so shall
function gives me this string
representation but usually when when you
would like to solve some problem with
figure you want have your library in in
your your desired functionality in
standard library so let's assume we we
don't have this JSON library and we
would like to use some existing code
from Java some some other Java library
and in this case we'll use Jackson
Jackson Jason module so to call this JVM
from frigga we need to declare we need
to his native declarations so we need to
specify what classes we would like to
use if instances of these classes are
immutable lie because in friggin we
require that values are immutable if
they are not there is one one feature
which helps us I will get to this and
what's purity level of function so if
the function is really pure function or
if it changes some state or if it have
side effects reaching some network disk
or rather stuff and to there is also
common that the Java functions return
snow or
throws exceptions and we can specify
that also within this native
declarations so there is a compiler
magic which helps us so because my
background is mostly java developer and
not so good at haskell now i will write
a tiny driver upper which allows me to
have a pure function to be easy for use
from Frigga so i create object tree
there are this type object twitter is is
immutable i have tracked it and i
declare function pars which part the
string and if it's ok it returns this
jason out if it's not ok i map two kinds
of exception into illegal argument
exception so the purse function is
almost pure because it returns it turn
it returns JSON note type but it can
throw exception and without using free
grant I'm here I I had no other option
to solve this and that's the frigate
native declarations which allows us to
use this tiny roper in the top there is
a declaration that there exists Jason
note in come faster XML Jackson the data
bind package which is immutable so
there's this pure keyword and it has got
pure function to string which gives me a
string representation of this JSON
abstract syntax tree I declare that
there exists get message function which
is pure by the way on the illegal
argument exception type which returns
string and I declare
that there that there exists this pure
native function come git hub al jello
jackson repair parts which i alius a
sparse I need fully qualified name
because this is static function and that
this function takes string as parameter
and it returns either illegal argument
exception or did Jackson Jason note type
which maps to today some note so is that
clear or okay so having this parse
function declared that it exists in a in
some library compiler will check it for
me I have now my version 2 of validate
Jason which is very very similar to what
we had before I just extract message in
case of exception because I'm preparing
the web service so in the output to the
user i will present string finally and
in case i had this dress on out so the
purse was okay i just used the jaw two
string method from the from the disk
jackson data type so differences are
very very small and this is this part i
told i will go into more details this
native declarations because this is glue
which which is really important
especially in the beginning there is a
easy case when you deal with pure types
which are uncommon in a jvm world if i
have created this rational data type
which has final fields nominator and
denominator and
it just represents rational number so
all functions are pure everything is I
think it's quite readable what's going
on here there is just the division
function I have prepared two versions
first one which throws if if the second
parameter is 0 and the last declaration
is for the method which can return the
know if you if you pass 0 a second
parameter in frigga there is no new you
you are not allowed to let no escape
from Java realm this is one of the iron
rules you cannot break because them then
everything does just can happen so if
you declare you using function which
returns no you rub the return type into
maybe type which is like Java optional
or scarce color option and in case your
coat throws exception you can use either
function there is also second option
with throws declaration you can catch
later but I think this is a cleaner way
so native functions already in fact Java
functions and so they are strict on all
arguments and because Java doesn't know
type classes they cannot have such type
class constraints
okay and I have created another dummy
type it's a be as common States ace
final but B is not final integer so type
object of instance of a B is mutable in
fact something someone can mutate this
this type from another threat if if it
obtains this reference instance and I
lose this possibility to reason about
the value in each point of time it just
makes things harder to to reason about
it's not it doesn't allow me to think
purely functional any longer so the
constructor this native new returns st
is is a state threat monett we denote
that some something something can can
can change some some involve some state
changes and there's a thing that is new
in frig I which does not exist in
Haskell is this mutable type so mutable
types are a compiler defense for frigga
if you know that some some type can
mutate and can be used by functions
which take mutable instances you need to
rub your your type into this mutable so
when you obtain such instance you always
get it into me you have it in this
mutable and functions java functions
which are not pure are only allowed
to take parameters also roped in this
mutable so we cannot mix mutability and
immutability but this is a very strong
constraint and there are methods to
bypass it there is a read-only a
function which allows you to extract
this immutable part of your otherwise
mutable type so we can extract a from
our a b-type because it's fine now and
it's quite safe operation we know we
know it one to mutate under the hood
from by another thread or anything like
that and there is also a freezable type
class which instances are able to create
copies which are immutable in fact and
thao function its takes this immutable
copy and return something some copy that
is again mutable so you use this
dysfunctions if you if you need to deal
with non pure Java Java functions there
is one last thing related to mutable
sometimes sometimes you deal with type
there are let's say hi Lena table they
operate with real world and you'd have
to write this estimate able real world
thing in type signatures everywhere or
on the
on the left-hand side you would need to
write a mutable real world parameter and
so on so if you declare this whole
declaration as mutable it compiles with
the same constraints but you are just
you're not forced to type everything
within this declaration which helps with
readability but you are restricted to IO
monett which is for performing such
unsafe operations ok there is a tool for
a generating big amount of code become
out of native declarations you can feed
it with some java package or one class
or package and it will declare this it
will create the generated is native
declarations for you so workflow is as
follows you need to edit special file
type properties there is a little
excerpt from from from this file so big
integer is I declare it will be a pure
and it will be renamed to integer by the
buffer is a class which is stateful but
it's not performing unsafe operations in
real world but file channel perform such
operations so there is a supporting some
plugins for for using this tool but I
think it's more use one stool if you
have got some library to you we would
like to look to use from Frigga so you
edit this file declare which which
classes are our pure state full or
I oh and run this tool and then happens
you have to rub some return types in
this maybe or eight ER if it functions
returns null or throw fix some other
return type issues they happen mark pure
functions as pure and if then something
does not compile and it's not essential
for you usually delete it and the
example I had before can be made with
this native declaration without any
driver upper now so this whole
presentation and all code is available
on github and you will find sub-module
pure frigga with discount so from this
here we have now driver upper grass turf
riga and things change a little bit this
is that are most in the top there are
most interesting parts of of this
auto-generated and then cleaned by
myself native declarations so there is
this object mapper which is mutable and
object reader which is immutable so it
will be quite easy to use and in when I
would like to use this code to to use
the parser which has got this wreath
three function its its function from
Jackson I just need to prepare instance
of object Twitter that's my critter
function it runs some stateful
computation
and i have written mutable mapper
because this in fact is tainted with
this mutable mutable data type this
label and mute if I obtain reader as you
can see here this function returns
something immutable so there is the
immutable vanished so we are ready to
use it from Frigga and again validate
jason is almost same the difference is
inside this case between case and off I
just use this trigger function instead
of function i have I had in Roper so we
have JSON parsing done and now we would
like to make this web server a web
service so again two options first one
is that we call frigga from Java this is
first up attempt so some free grand time
code is involved this is this tea either
that's that's the three dot twenty-three
version salty either is is not
parametrized by type of left and right
it's improved in next version which I
hope will come soon and so I just use
ready spark javaserver my coat validate
jason which is in a module i I like I
have somewhere else compiled before I
have this validate function which
returns either string with our string
which result some to other functions
this one is especially funny its maps
but either in both cases it maps the
content what is in in case of left value
it applies identity function same with
the right value it's just for extracting
string for for our hdt output status
code will be either four hundred or two
hundred and either takes functions as
parameters so I need to sconce function
instead of value I I think I want to run
this code and there is a better solution
of course the ecosystem is growing we
have got to knock library which is in
fact ready wrapper for spark Java so the
same server i use on the previous slide
and i will present this web service on
three slides first one is our main
application which create some database
table that's some added value i will
store requests and i just use this tree
knock library to to have gut handlers on
two end points with this validate
handler valued 800 itself itself check
if there is a body in the request if
it's missing it returns it returns four
hundred and there is no body responds
otherwise it will try to validate JSON
and return 200 code or four
it caught with an error message or or a
reformatted dress on so this is quite
simple and coat looks less like hello
world it's a coat which in fact does
something and there is a this database
layer where I can create connection to
database it's I oh it's a Highland safe
operation I can log request so you can
you can look at it and see how how can
jdbc inside Haskell look like so that's
it and there is also function which
drops table if it exists and creates one
this is made especially for presentation
when I wanted to have a clear table the
example which I will run in few seconds
in in fact uses h2 jdbc driver so it's
it's clean after restart anyway so just
to prove that this works I will run this
project
I use Gradle plug-in I've got five
minutes maybe three I will take a say
word about plugins it runs and I can I
have prepared to use URLs within valid
JSON and server apparently returned 400
bad request there is also valid input so
we have made it our first web service
with frigga in 45 minutes or less and
I'd like to say just few more things i
have used this Gradle plug-in which
works and there is also as BTW plugin
there's a little difference because
Gradle compiles java first while as BTW
compiler frigga first but i think that
best thing to do is to have separate
modules and depend one on another so you
I think it's clearly there is also line
plug-in and line template for a quick
start I have used it also it works ID
support i have used idea to show you
code but idea plugin is very cool but
you can upvote it I I would like you to
do if you can there's the Eclipse
plug-in which is useful it's used by the
compiler and core libraries developers
so eclipse is eclipse is ready for use
the community of Frigga it's quite small
now but very kind i have got involved in
projects I don't know maybe six months
ago and I think people that are great
you can join us on guitar on IRC which
is connect
together by about you can use mailing
list check on Stack Overflow ask for
help contributors I'll are welcome and I
think because this project is there are
there is there are many things to do on
different levels there are simple things
simple task which are which should be
done like providing some type classes
missing from Haskell report but you can
also dive into another things for
example multi-parameter type classes are
missing so this is something really hard
to do probably and links first one is
about this type annotations you could
see in this Java sources these
annotations if you would like to
understand what's there you should
probably read this practical type
inference for arbitrary ranked types
paper by Simon Payton John's learn you a
haskell for a great good if you are
going just to start with figure I think
it's best to start with some good
haskell resource this learn you a
haskell for great good it's a very good
choice for first book tool to read on
haskell haskell report 2010 I have a
2010 I have mentioned mentioned defined
standard and there's link for a my
github where you can download whole
presentation and there is a more code i
I didn't show because of time of course
do you have any question a time for
question yes two questions if there are
any yes there is the question please I I
did not there was one guy who reported
on a question was about if it's used in
production one person reported on
twitter that he
does and it was few months ago I cannot
do it personally but I I think in some
you could run some your helper services
using it to try and terrace add question
is about performance so I didn't measure
it a question was related compared to
java so friggin is compiled to java so
obviously you can ride and everything at
least at the same performance in java so
you cannot have better performance than
java code there were some examples some
tests conducted with a haskell code and
it turned out that it depends on case
sometimes is faster sometimes it's not
but there was within 2-3 times slower or
faster and but you sometimes you gain if
you compared to java for example this
lazy evaluation can be very helpful and
you you want right this by hand probably
ok thank you like and we know we have no
more time for questions so let's
calculate afterwards</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>