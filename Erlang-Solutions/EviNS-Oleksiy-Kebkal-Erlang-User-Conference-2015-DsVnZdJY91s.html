<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>EviNS (...) - Oleksiy Kebkal - Erlang User Conference 2015 | Coder Coacher - Coaching Coders</title><meta content="EviNS (...) - Oleksiy Kebkal - Erlang User Conference 2015 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>EviNS (...) - Oleksiy Kebkal - Erlang User Conference 2015</b></h2><h5 class="post__date">2015-07-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DsVnZdJY91s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you hi my name is Alexei I'm
working in a logics company we producing
company underwater acoustic equipment
for a communication and positioning and
my talk about the very specific for this
conference problem domain the networking
underwater and yeah the first question I
hear when I tell about it is it is it
something about communication between
all buds now it's not if we will take a
closer look will find much more stuff
they are on the water which is
interesting and not necessarily
connected two militaries and i will
start my talk more about the
applications to have for you to give an
understanding what is the application
filled warped I'm talking about what are
potentially the problems the
restrictions and after that I will come
to the place where air lunk place its
role you know it's our planet for some
reason it's called earth but the earth
self it it's only twenty-nine percent of
the surface and the rest is water and
interesting is that nowadays we know
quite good the we have the maps of of
the moon maps of Mars which is are much
better than the maps of our own planet
at least it's on the water part and and
this field is is great and unexplored
and my talk is about three small aspect
of this problem is how to exchange data
on the water and maybe how to to do
position encounter water it's also not
always obvious are so why we cannot use
radio waves on the water because the
propagation
is very limited there so we can't reach
the radio ways waves only for as a mean
for Neil Hill communication for example
if you have some gadgets on the diver
they can use radio communication to
exchange data between between some some
gadgets mounted only on a body but if
you are talking about communication on
more essential engines it doesn't work
and we don't have GPS underwater so
basically we cannot use radio their
optical waves yes we can use it on a
bigger distance if the water is clean
and practically yeah there are systems
promising that you can always get a
range up to 100 meters but it's also
quite limiting and the rest is only
acoustics with acoustics dependent and
frequency range for a practical
applications you can get up to 10
kilometers for the frequencies more than
10 kilo girls if you go deeper you can
get even larger range but from the
practical point of view 10 kilometers is
just it just fine and we can also use
the acoustic waste not only for data
transmission we can use the same signals
also to estimate the position of the
remote node which is also very
interesting task and important task
sometimes even a communication aspect is
not important but only the position
plays a role for example if you are
talking about a remotely operated
vehicle hanging on cable from the ship
you have a communication link but you
still don't know where the arrow V is
and the way to find or to estimate its
position is to use acoustics
but we have a lot of limitations in
acoustic channel the one of the very
essential limitation is is the sound
speed it's it's five order of magnitude
slower than the radio waves when light
is bit of light and it means that if we
have a remote not only distance of 41.2
km/h get an acknowledgement we need to
wait two seconds so in the case where we
use radio we don't care about these
delays but in the in this case it plays
a big role and the frequency range is
highly limited so we can speak about ten
tens of kilo Hertz available it means
also just in the end we have a few
kilobit per second bitrate available
betrayed maybe tens of a kilobit per
second depending on the frequency range
and application but heaven this rain
just just imagine we are we are
typically using megabits gigabits we
forget about what kilobit is just may be
fine to find you old-fashioned modern
you used maybe in ages or 90s and try to
use it today to connect to the internet
and to find to open the simplest page
you will get this feeling and yeah so
having this frequency range we cannot
also use many approaches which allow
multiple access from several users like
CDMA approach it's it's some supplier
says they use it but with a very limited
number of users may be for maybe eight
best and the efficiency bit per Joule
efficiency in this case would be not
necessarily good and we can also
transmit and receive data at the same
time so this the property is also a fish
we speak about can
occasion with a moving object in the
shallow water is it's a nightmare
because the multipath is changing too
fast and it means that we need to adapt
to this multipass and to find the best
possible betrayed to to send data so all
these factors are plays a big role and
at the end if we go higher if you solve
some of these problems on a physical
layer still still on a data link layer
we have very limiting factors the
propagation delay is not negligible in
the visa coup sticks so it's it does it
that differs from the wireless radio and
in wireless radio we think about Meg
girls or hear girls in acoustics we need
to use what we have just tons of
Kilgore's about positioning so there are
several approaches for positioning so
basically for position we use the same
device acoustic modem where we can
outbox get also a range and having a
range from different points you can use
a multilateration approach to estimated
position so this is so-called long
baseline approach and if you have you
use also so called ultra short baseline
on tender the small one you can also
measure even just a one signal measure
range and the bearing and elevation
angles to estimate the position but I
think is that if you use the channel for
positioning it restricts also you in the
sense of using it for communication so
more interesting is that think about it
protocols that can combine the boss task
for example if you have some formation
of autonomous underwater vehicles moving
underwater you would like to have
control over this formation and you
would like to have positions so there
are
some interesting approaches to combine
this task so called cooperative
localization approaches and what what I
mean under acoustic modems because
different suppliers mean different
things once think well acoustic modem is
just something during modulation and
demodulation detection so it's basically
just a physical layer with a transducer
and another part we treat the acoustic
modem is a more sophisticated device we
have the error the analog parton's user
with receive transmitter amplifier we
have there are three types of processors
it's a DSP and fpga processor for the
physical layer and arm processor for a
data link layer and you can use it so we
have arm linux running there you can run
also your own software which could be
just something integrating the modem
with external sensors or it can be the
networking stack solving some networking
tasks like Evans in this case so we can
run Evans inside the modem on the same
platform you can have also optional
ultra baseline antenna to to estimate
angles if you need it so on the physical
layer we solve more or less classical
tasks the modulation but direction and
demodulation we need also to estimate
the multipath this change in multi pass
structure in a channel in order to adapt
to it and to be do also some estimation
of time differences of arrivals of the
ultra short baseline antenna grid only
only data link layer we have two
approaches we have combined them in one
protocol the first approach is optimized
for data transmission point to point
between two modems where we try to find
the best optimal we trade for data
transmission the short-term media access
algorithm is basically for transmission
of instant messages in which is good for
networking where we
don't need to adapt to the channel we
just choose the parameters which are
well enough in most cases and this is
also good for positioning and how it
looks like so this is one of the type of
the application we have some notes
placed on a sea button with some sensors
like pressure measurement like seismic
sensors like current meter etc and we
would like to get the data online if we
have a surface buoy or just on occasions
if we come with a boat decide we can
download the data so these are more or
less typical approaches for data
transmission we will see bottom
observatories you see this picture of
sorry it's it's too early with this one
it's the modem used for low frequency
modem for high range used for or
developed for tsunami early warning
system for Indonesian system and this
one it's used to run a Baltic Sea in
order to measure the the current profile
and transmit data this is the modem
transmits data from the station to the
buoy and then via satellite link to the
to the shore yeah and this one shows you
how it looks like after you will recover
it this nice picture this is the modem
after three months of use in the
Mediterranean area only relatively small
depths it's still functional yeah but if
you if you keep it longer some point it
will not work properly so the other
picture it's also quite nice it's it's
it's the modem was used to on the
surface of Atlantic Ocean for the data
extraction
from the observatory close to a black
smoker like a strike and it's very
interesting area for for geophysics for
oceanography but you see what happens
here so this is a very aggressive media
they are and it's also a limiting factor
for the duration of the deployment this
is another let's say typical case it's a
positioning of underwater autonomous
vehicle auv during some operation so
typically we have some vessel launching
the vehicle and the vehicle is doing
some operation what you would like also
to to have a control over it and to to
track what happens underwater together
status why acoustic link and to estimate
the position in the more interesting
cases you can have a couple vehicles
doing some something together and in
this case the the networking starting to
play a big role because you would like
not to lose control over each of the
vehicle and to see what happens on all
of them and to avoid possible collisions
it's expensive to have collisions yeah
here and yeah this is a picture just
showing how it looks like this is a
special design of ultracold baseline
antenna optimized for for the vehicle to
have the smaller drag and yeah this is
another case this is a long baseline
positioning so what happens here we play
some notes on the bottom then calibrate
this system in order to define the
geographical position of the lbl nodes
and then you can put some equipment
there you know and run the antenna in
order to you to track most accurately
the positions of the AV or remotely
operated vehicle and yeah just to to
have a feeling what is the size of the
unit
yeah it's nice picture here and this is
the other picture it's it's a divers
owned before so for LVL positioning so
if you would like to to measure some
fixed points on the water you can you
can place the zone and then using the
lbl antenna you can estimate the
position so this is more or less about
ah another very interesting application
yeah yeah so the precision in the case
of ultrashort baseline on 10 a USB l we
measure the precision in angles let's
say so it depends on on the range then
we have like zero point five zero point
two degrees the question was about the
precision and in the case of long
baseline antenna we can say already
thumb's Something About centimeters 10
let's say tens of centimeters it depends
highly only only application on the
variability of the channel itself
because if you calibrate it with some
sound velocity profile it may change
during a day and then it will affect the
result so but you can you can think
about tens of centimeters in this case
as it goes through thermal layers that
would affect the accuracy if the thermal
leaders themselves you can it can
measure you can measure at the sound
velocity profile and use it for the
estimation but the problem is with vari
a liability so if the profile will
change during day which happens the
somewheres it will affect the accuracy
model okay so yeah this is a very
specific case this is a Baikal neutrino
telescope so the problem is the 90
trainers a small particle which is we
are hardly to detection one of the way
to detect it it's a detected through the
Cherenkov radiation but the problem is
that in order to differentiate it from
the other sources of light you need to
exclude all other sources of light so
you need to go very deep underwater you
need to have a good depth and good
perrin see there and in this case you
can say okay if you detect something
it's a challenge off radiation and the
system cell is a huge so the it consists
of a big number of photomultipliers so
it's a huge antenna and the problem is
it's moving so if you even detect the
chunk of radiation you would like also
to find some parameters the direction
and in this case you need also to have
some estimation about the position of
the photomultipliers during the event
happened and yeah so yeah so you need to
you need to use acoustics in this case
as well it's how it looks like so it's
just by its line modem they are and this
is just a standards you are used also
both for photomultipliers all and for
for the rest electronics india it's
basically just housing and yeah so this
is about the application then yeah this
is the knee not the first try to you to
build a framework for networking on the
water there are some existing the first
one is based on the new radio platform
with it tinyos which is hardly we are
connected to the hardware so it's it's
not easy to to reimplement it only other
platform the other to sunset and desert
a well-developed platform based on ns2
simulator so this is quite well-known
networking the simulator they adapted it
to use it in real life the problem with
it is that you feel quite a big
threshold before you start to do
something on based on these frameworks
and units tecates it's a GVM based
framework the this free sunset desert
unitech also compatible you can
basically run it inside our modem but we
decided for our own projects
to develop something different because
yeah it was not really easy to to go in
with this framework this was one of the
reason another reason yeah we're looking
what would be the basis for this new
framework and yeah we have decided to
use a wrong language just to specify
about which layer we are talking about
it it's not a physical layer we have
also these dmac protocol implementing
the the basic data link layer and the
airline plays a role on top of it so
basically if you if you do the
integration the sensors or you build
your own networking protocol we have
started to use air long toes all these
tasks and what are the challenges on the
water so equipment is expensive even
more expensive is to test it because in
order to test it in the real under
realistic condition you need a vessel to
transport it somewhere and the vessel
cost per day it's it's about it tens of
thousand euro a day so you think that
developer will ask manager well I need
to test it next week well it doesn't
work and yeah the practical use of the
system is also very expensive so it's
associate just if everything is ready or
you help it's ready you place it on the
water it's a very expensive operation
and if it's already deployed and you
will find out that something went wrong
maybe you will not be able to recover it
till the next year so you need to be
very careful here then of course all
tasks are very specific there are no
standards in sensors the requirements
are very different depending on the task
i have shown you just some of the cases
and
there are there are no typical
applications basically here and
sometimes we need to do development from
scratch when we integrate it with a new
sensor or adapted to to some specific
area so basically developer gets a task
gets a some time limitation no hardware
because hardware maybe is already order
but not yet deliver it after its liver
it even if you have for example the
modems you can try to play with them in
a pool and you can try you protocols
running on top of it with a pool but the
problem is that if you will place it in
a bigger distance the propagation delay
will be much bigger and it will maybe
break your software so basically with a
hardware it's it's a bad story to try it
and see I in the end you have not enough
time to test the system so realistically
as always so yeah we we know we have
some box appear and we still need to
solve our task and it sounds like a
longer mostly problem and it was
designed also to solve the problem that
when we have a box existing but with two
you have some fault tolerant system
still running so I've just have here the
non list from the you Joyce Tessa's and
if you have closer look you'll find that
these these features we've got in red
hair long they are very well related so
they be first free obviously highly
important for fault tolerance if you
speak about the system which should run
a year or two under water soft real time
it's very nice if you need to do to
implement the position in Calgary tins
because yeah we need to define exactly
the time when the signal should be
transmitted and it also yeah has some
restriction on the real time
processes the hardware interaction it's
not so easy in ere long because you
basically need to put the very specific
hardware specific parts in the ports but
from the other side you have just
awesome binary syntax to parse the data
when you get it which is just great and
yeah the the size of the system is it's
growing so we need to think that in
future we will have much more complex
system in the comparison to today and we
can also dream about the possibility to
do some possibly some updates of free
acoustic link have any continuous
operation of the system so it's it's
some way to go but maybe it will work
and air lung basically has it so based
on the solution we can maybe adapted to
the reality here so yeah this is the
basic diagram showing the component so
in order to do the development you need
either the physical modem or you can use
a modem emulator which we provide to our
customers and to the people who would
like to play around with it and then you
can run behalf or testing airlink where
you just before or you can in the in a
real system you can have a lonq running
inside the modem and we have some
components all in the yeah the tasks
like the mac layer protocol
implementation routing protocol
implementation are other parts and we
have a special competent code called
water which is just analyzing the
configuration and preparing the system
and to to run the modules
in the framework and so how much time
yeah so this is the supervision tree
basically the core of the system it's
here yeah so it's a some implementation
of fsm behavior so we define here
explicitly the fina state machine or
push down automata if you prefer it then
you define the handlers for each state
and you were defined the you process the
the messages you get from the outside
and so the core logic should be
implemented here then we have a role
worker role worker can be treated as a
middleman so it's a middleman between
the interface some external interface
and the the core module so we have for
example the middle man called 84
interaction to the acoustic modem then
we have an enemy middleman to parse the
enemy messages used for navigation
purposes and yeah other middle man to
talk to higher or lower layer protocols
and we have fsm worker which is also
configuring the the fsm before starting
it and yeah we can run a number of
modules at the same time then how we
connect the modules to each other so we
have four types for it it can be a
tcp/ip socket as a connection type and
at the end of these errors we have this
middleman
to convert it from the external
interface to the terms which can be
understood or tuples then we have the
middle man's for reports to how to talk
to external applications this is just a
short card to use the standard message
passing mechanism off-air lang and we
have a special type of the middle man's
to integrate it with a cowboy so for the
case if you have an operator using some
system we can embed also a web
application inside the modem and then
the clicks are then converted to the
events for for the module so for for the
case of for example the problem is that
in many cases we need also to use a
serial interface and serial interface is
not supported out of box so we need to
put it outside the airlock as a external
application yeah so in order to if you
would like to create you new module you
need to follow these steps you need to
create the fsm behavioral implementation
you need to create an FSM worker
implementation then you need to define
explicitly the finest state nation or
push down automata and then have a
converter from the middleman tuples to
the events so basically the idea is that
you take you favorite tool to sketch the
state machine my two is pen and piece of
paper just to to think about the
algorithm own level of abstraction you
prefer or you feel is good you define
the events you define the states and
then when you are happy with
the results you can try out you first
implementation so you just convert this
picture to to this list so basically of
course this step can be optimized you
prefer SB send face so sorry um yeah you
can just directly connect a converted to
thee to the representation in the form
of list with states and arrows and then
you need to define for each state you
need to define a handler and yeah then
you create a configuration where you
define which middle men's you would like
to use in this case yeah so what I'm
talking about this is Amy Aloha sorry
this is a the very basic major axis
algorithm carers a bit a modified
version of the well-known Aloha access
protocol this is carrier sense media
access aloha and yeah we do with this
with this module we do the slight lead a
modification of the behavior of standard
mac protocol to the CSM a aloha protocol
so on on one side and down side we have
the connection to the acoustic modem and
for the higher layers we have another
role which is basically used to connect
your high level applications then yeah
this is how it looks like this even
preprocessor so we just need to modify
here the status of the state machine sm
so we can return it modified in this
case we can also generate an event and
ask to run the corresponding handler so
we don't know what the handler should be
run because it depends on the current
state of the state machine so we ask it
through the run event to run the two
reactant on the only event or you can
just in this case we do not handle it
directly we just simply a cast some
message only on a middleman so this is
more or less how it looks like this
procession and then yeah as soon as we
have free handler free states we need to
implement free handlers I have here in
just example of the implementation of
one of the handler which actually the
back of state when we have sound found
that the signal was transmitted VI in
back off and if timeout happens and we
have a request to send data we will just
find out that no it's it's still back
off we need to update timeout so this is
what happens basically here and then
yeah I'm coming to the final notes so if
the the project is yeah released under
do a license bsd and GPL the status of
the project is it's quite early so we
can already start to use it for internal
projects but for the curious developers
yeah if you're brave enough you can try
if it will fail you may ask so you are
very welcome to to join for ya for other
acoustic modem supplier we are also keep
the door open and we also hope to do
some kind of unification of the
protocols we implement so what will be
will make things easier to to to
configure the system and to prepare it
for real life applications
so the the most crucial yeah next step
for us so thank you for your attention
and questions how many of these systems
we have deployed in the ocean currently
and we basically we sell the assistance
we don't deploy them but yeah we have
already hundreds of systems installed so
it's it's quite a change essential knob
number for this problem domain let's say
and yeah Stan sir is there any problem
that you can add competing systems on
the underground on the water I could
imagine that you have other sources of
sound that kind of interact sore or are
you saying okay in this area this this
frequency band is free for these
acoustics you modem sir Wow typically
typically it's not a problem but yes see
the if you have the noise and the same
frequency band it may affect the system
there is a question there when you speak
a little bit about the power power up
for these things and interference with
the wildlife power so for example for
the system placed close to this black
smoker we have a couple of kilometers
depths and I think so minimally you need
to only lowest source level it takes
about three what in transmission I think
they use like 20 watt and transmission
which allows
to use the system a year to transmit
data they require it includes some
pictures and include some data from
sensors about the reaction of at least
dolphins yeah so we have tried the
system next to the oceanarium for
example and the reaction of the mammals
it was not to like a stress it was at
the beginning curiosity and then they
just not ignored the presence of this
activity so the on on the quite
essential distance the source level is
not that high or the the receiving
signal level is not that high so it will
not essentially affect the minerals and
I don't think it's a big issue for
fishes I was just sort of yeah it's also
quite frequent the question yeah but how
many DB you actually putting out the
source levels it's it's about air
depends on model and other parameters
but it can be like 100 to 90 DB one
meter one meter frequency frequency
range are typically yeah for practical
applications we have free ranges 1 is 7
to 17 killer girls so you can hear it
this activity for the eight kilometers
maximum then the middle frequency range
in our case it's 18 to 34 kilohertz so
you can slightly still hear something
but it's for like three kilometers ran
bad channel or complicated channels may
be one kilometer and then high frequency
yeah it can be 40 to 80 kilograms or
even higher but it restricts essentially
the range 2 kilometer or two
full of hundred meters so it depends on
the application is actually and then so
have you spoken a little bit about the
sort of general hardware sort of
footprint you're looking to design
against so memory size power you feel
constrained in that area no also if it
was it was just not a problem to first
to cross compile the air lock itself or
I'll platform I check a couple of hours
to to find out the way to do it and then
yeah the time to run it it takes maybe
two seconds but it's acceptable so if
it's run its run it's right memory
consumption is also so we have the
platform with 64 megabytes ram so it's
fairly enough to solve the tasks we have
so I don't feel restricted to it in this
case okay we have time for one more
question right so thanks for the talk
this morning
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>