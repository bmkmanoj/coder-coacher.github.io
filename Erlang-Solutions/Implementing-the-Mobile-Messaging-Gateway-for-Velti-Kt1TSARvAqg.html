<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Implementing the Mobile Messaging Gateway for Velti | Coder Coacher - Coaching Coders</title><meta content="Implementing the Mobile Messaging Gateway for Velti - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Implementing the Mobile Messaging Gateway for Velti</b></h2><h5 class="post__date">2013-02-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Kt1TSARvAqg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Logan malicious and I'm the
solutions director here at Erlang
solutions the event we are embarking on
today will mark a start of a series of
webinars we're looking to organize
across topics of interest in the world
of airlines and dealing with solutions
based on the airline programming
language we fought long and hard about
the first topic to discuss and decide it
on speaking about an airline based
product but we have applied to great
success with one of our customers
operating within the telecommunications
industry the product I'm referring to is
Buzzard a gateway we have developed for
and applied with velti a leader in
mobile marketing and mobile advertising
with this being the first of the
webinars we're running please excuse any
technical issues we may be encountering
today just to start by telling you a bit
about airline solutions we are a
products and services orientated company
completely devoted to the airline
programming language since our founding
in 1998 we have worked with
organisations and individuals using our
lungs helping evolve the language and
supporting people and organizations
using it today we have about 70 people
across our offices in London Stockholm
krakow and budapest and working on
projects across the globe we fly deter
land flag as you might say an hour keen
on creating value and competitive
advantage for our customers across
industries and through the unique
features and characteristics of our
language the language we're very
ambitious in development of airline
based products and we work to create
lasting partnerships with our customers
I'm particularly pleased to say that
today we have a representative of one of
our long-standing clients in the shape
of Marcus Khan the VP of Technology of
LT who will be telling you about well
T's own experience with Buzzard the
messaging gateway we developed and
deployed with them Marcus has from the
very start takin a pivotal role in
Buzzard implementation ability and will
be in a position to share the
intricacies of the system and its key
features please long is to finish by
saying you're welcome to post questions
throughout the duration of the webinar
by using the chat facility
our speaker Marcus Khan will answer as
many questions as time allows at the end
of the webinar if any questions do go
unanswered then please you're welcome to
raise them via email using the following
address which is webinar at Lang hyphen
solutions com if you're interested in
learning more about buzzards or wish to
establish whether it may be a solution
for the challenges your own business may
be facing then please feel free to use
the same email webinar at a line item
solutions or calm and we will address
your queries the same goes for any other
questions you might have feel free to
contact us I would not like to hand over
to Marcus Kane who will be glad to tell
you a bit more about budget okay so
welcome everybody this is also my first
webcast I have presented about the
system several times before often with
an audience that I can see this is the
first time where there are a lot of
people who I can't see any other cuz he
talked to me so I'm trying to do this
still as a gauging as I can I have a
number of slides here together and put
together for this I want to speak about
my experience as wealthy and previously
is forward active group where was the
CEO of implementing this gateway so I'll
tell you a little bit them over all
about the the rationale behind this why
we develop this and together and what
some of the features are of the Gateway
and why this also could make sense for
you so I do start with a little
boilerplate about belty as well now this
is really small on your screen but well
teaser is a very large companies
announced a listed company and and one
of the functions that it also fulfills
this mobile marketing and also platform
architecture so this particular platform
here fits really very well into into
those three areas there were we do
mobile engagements particularly for
large brands and we provide platforms
and platform technology solutions for
our clients in that way
so um I want to move on and tell you a
little bit about the background what
this project was all about in that sense
so in the previous company mobile
interactive group which was acquired by
VLC in 2011 of which I was the CTO and
is a company that we started in in 2005
and we started as a mobile messaging
aggregation visitor so that means that
we have connectivity to the different
network operators and we effectively
resellers to our clients and also
provide services through it in the same
way we were very successful in the UK we
became market leaders one of the reasons
was that we were very good at in the
high performance and we we were able to
address the overall media and TV market
um we build our success on a on a
licensed platform so this wasn't
actually all our own platform it was run
by a third party at the time um and as
we grew and become bigger and bigger and
we had more more mouths to feed their
own company in 2010 we decided to take
the destiny in our own hands and build a
new mobile messaging gateway from the
ground up and so we had some core
business challenges in the fact that we
have to create a running business we
couldn't just build a new startup and
have new and you kiss and then grow the
traffic under customs on this slowly but
we had live 24-7 services we got TV
shows on their radio services you know a
large number of blue chips and brands
brands and the third party that we had
this platform with became estranged over
time as a business partner so we also
were working on the conditions which
made it difficult for us to be
cooperating with the legacy provider
that gives you a bit of the project
background how we got in terms to that
point and and then I'll tell you a bit
more about what we want to build
effectively so in this slide here I'm
going to keep this really really simple
as a lot more to it but in really simple
terms the the Gateway is all
about protocol conversion the ability to
buffer to the queue messages and the
ability to report on on events
effectively so the protocols that we
were concerned with and this gate with
the ports are smpp very very widely used
UCP used a lot in Holland and Ben looks
and some other other countries and as
different XML variants as these are
things that operators asking us to do
that are not standardized and and then
on the client side we have so the
declines connect to us why HTTP or smpp
also UCP now as well the messaging is
always bi-directional so we send then
receive message to the handset from
there and said assume that you may be
familiar with it but for people who
aren't em o stands for mobile originated
MTS for mobile terminated and DRS or
deliver reports so this is matt just to
and from the handsets and also deliver
reports coming back from the network we
support 19 different message types in
the gateway these are types of your
standard text messages / messages so
that I've got the inbox and replacement
present messages binary messages
ringtone logo messages all those
although those are I guess no longer
really relevant they would the NOC
you're in terms of the early 2000s and
and of course there's lots of business
logic in this game wait as as always as
you grow your business you you you will
implement certain advantages for your
business by putting in certain business
logic in and allowing your clients to do
things slightly differently and we were
also very much focused as we as we knew
this is a growing business and we had
now made significant revenue over the
first four years that we wanted to have
something that is absolutely resilient
so the the ability to have point of
failure without affecting your old
services where
important to us so this was built across
two different data centers and they
could be running hot hearts on both
sides and this is important that it's
highly concurrent so that we can support
television show so when consumers would
all text in all at the same time that we
were able to do that and obviously have
a way of scaling the system so that will
be able to grow with this with atomizers
we go on I'm going to go to the next
slide in this next slide I'll tell you a
little bit about the the core
technologies that we employ for this and
are employed for this gate right now so
its core element runs all honor lines of
the one thing that you would take away
from it I guess from the invitation
anyway is headed plates than there alone
it is the language of choice for us for
a number of reasons that I come to a bit
later and we use for the for the web
server use Jen httpd Earl and itself
comes with a few telco core protocols so
use your GP libraries for that and XML
or XML parsing we used react and bit
cask as the core database strategies
Vertica at the data warehouse engine and
and what's not on this slide but on the
later side is my sequel as our store for
configuration data and we also build
effectively a user interface in Ruby on
Rails so in order to have a net ministry
of interface that people can use to
configure this that's on will be
inverted women else we have to obviously
a number of other sort of adaptations
that I'm not going to go into you know
what different networks are doing and
the usual things that you need on
gateways which is the qlogic logging
alarming and and paloma things so they
all line up right when I look at the
data stores down in a bit more detail
because that's often what
just one gateway from another and you
see that we have decided for different
database technologies or data storage
technologies for different purposes so
we've got the configuration data which
is entered through the user interface
it's stored with the user interface in a
my sequel database but on the actual
airline nodes it's sort in amnesia but
needed to be highly available easy to
use as such the sort of major memory
only table replicated across all nodes
perfect for conflict data config
information we use react as a as a no
sequel no master database to hold state
which is important for for more matching
gateways but not reused to report on so
for reporting which shows Vertica as a
technology to import the data in and the
Gateway itself does not depend on
vertica so if you have your own data
warehouse technology that you'd like to
utilize that's fine the the Gateway cell
produces a lot of log files there's an
ready for an ETL process to get them
into the data warehouse and report from
there important to say is that we we
built the system in such a way that the
data warehouse only two minutes behind
so we want to make sure that you can do
near real-time reporting through the
data warehouse so the overall process of
log file and etl is very crucial to have
a done and well and then there's often
umber of queues in the system and we use
the card for that and there are other
technologies that you may also use of
these things but we found them quite
reliable and functional at SH so we go
into the next slide which is all about
scaling so this is effectively quite
simple visually I want to say here that
we've decided to compartmentalize the
gateway into three different areas the
client area the routing area of the
network area
as you can imagine the client side has
got connectivity to all of our customers
where the network site has got the
connectivity to other mobile networks
and the routing with in the middle that
all the business logic and so on we want
to make sure we can scale this
independently so that when we would see
bottlenecks with let's say client
response times or with mobile network
legacy implementations that we can scale
them independently so therefore they
they themselves have a number of service
attached to them our design requirements
for the Oval gamer were to exceed 10,000
messages per second and although it
really is the connectivity that's always
the largest variant so we wanted to make
sure that the Gateway is fast enough to
cope with whatever networks or clients
can throw at us in that sense so I think
that's probably enough said about
scaling for the moment would come back
to them question maybe later we go to
the top for resilience requirements
there so we wanted to exceed 99.9 we
didn't really go to 59 it was not a
requirement as such but we wanted to
shoot just to certainly be better than
just ninety nine point five percent I'm
generally speaking even planned outages
are extremely undesirable with any other
customers because they themselves are
the businesses on top of connectivity
that's available so it's not really so
much about how much downtime you can
have but you've got to really build a
platform that can live without our time
at all and and that's really where
erling excels so being able to do hot
code fix on a gateway that's running and
serves let's say 99 percent of the
customers well exactly the way they
should and one percent of the customers
are having an issue being able to fix
those one percent and of customers an
issue for them without having
influencing anybody else on the Gateway
it's really key and Alex capability to
do that is it
appreciate it there as I mentioned
before we used react as a masterless a
database that again comes in very handy
for resilience so we can take a number
of nodes down it would not affect the
overall performance of the platform we
have actually decided to spread it over
all of our nodes with react and so that
all works quite well we also wanted to
decouple certain elements and so we have
got the user interface that holds all
the configuration acting entirely
separate from the core of the Gateway
they communicate only by instructions
that are strictly serialize so what
effectively happens is when any
configuration changes on the on the
front end any short code any keyword any
port number that information gets packed
into a instruction and the instructions
then communicated over to amnesia and
the ER landlords for distribution and
then accept it back into as an accepted
and and confirms change back into the
front end so anything happens to the
front end can never ever impact the core
of the gateway we've done the same thing
with the data warehouse and I mentioned
two minutes earlier but effectively no
complicated query to to analyze specific
logic of our past traffic would ever
impact the performance of the oval
gateway so we don't have any so slow
down by somebody running a very
complicated clearly another word maybe
about usability improvements something
that maybe remember up is quite quickly
so the user interface provides full
control over all of the provisioning so
any setup of new clients of new mobile
networks of keywords and so on all done
for the funding from then it's not done
through any such configuration files in
the background and and we have a full
audit trail of all this change so this
means that we know who made what change
and these things can be tracked back
later another thing it was a before and
after picture is that we were as a
business
the market leaders in the UK but
effectively we had to launch a lot of
service request to the for the company
with an SLA of about seventy-two hours
so we were not guaranteed that any of
those changes will actually make it in
and this is what i meant with taking
desk in our own hands we needed to be
sure that we have a capability that we
can make of changes ourselves so now
it's really just a matter of the
administrator to to login and change
some of those parameters or report on
progress so moving on to the to the next
slide is the hardware brush side here we
are I just give you a bit of an insight
as to the way we deployed this
technology so as I mentioned two data
centers both running hot hot they're
less than a milli seconds apart from
each other so they actually can be
treated pretty much logically as a
single site and the n plus 1 redundancy
exists on either side so and each on
each network in a data set aside you've
effectively got it itself and then plus
1 redundant layer in all of those three
categories network climbs and routing
and for that reason we use 12 dl380 s in
each site so there's quite a lot in that
we put into this now this does not need
to be that way but we wanted to be that
way our logic was that we felt it was
important to not cut early investment
money and then having to upgrade the
system later but we decided it would be
a good idea to deploy this directly in a
very large footprint so it's entirely
feasible to use a single data center
it's entirely feasible to have at say
you know two node / layers for six nodes
so I think with something between six
and eight servers you can also build
your gateway and then you can you can
set of evaluate whether that sufficient
throughput for for your business in that
sense we using cisco throughout and for
load balancing actually found a cheap
rocks is a very straightforward
predictable and
reliable mechanism so we we actually
went that well went for that option
because we don't really require any deep
packet inspection or any sorts of that
so um let's see how long is Chuck so
they build itself involve 12 men years
so had 12 staff working on this for 10
months and 10 men use such as a yes 10
linear and that that involves developers
quality engineers and also a product
manager in the process so since we
launched years ago we've we've did
further investment and we put another
six men years of development into that
it was very important for us that we
work in an agile fashion all of our
development that we do in our London
office is based on an agile delivery as
a delivery approach it's all test-driven
and behavior driven developed we use
pair programming for it so it's a very
clean code and yeah I mean although all
the people that understand why nigel is
a good idea or probably now smiles and
that's what's a good idea um going then
over to to the team i'll just put the
slide in here because it shows a bit of
the human side as well as what we're
doing we actually worked across
different territories we had a small
team working in south africa the largest
him in London but also we had some
experts working Paris to Stockholm and
and in Sicily and in Italy and it was
important for us that we didn't regard
any of this to be any form of sort of
outsourcing its offshoring we were able
to benefit from the from from slightly
smaller salary based in South Africa but
fundamentally they were all working with
one team and we found ways of working
together agile that allowed us to still
build a high quality innocence so now
coming to the point of we build it all
and so here's a bit of the challenge of
what we effectively had to engage with
so we had up unto this point of
migration 50 *
over 50 thousands configured unique
keywords so this is basically legacy
implementation throughout the years of
all the things that the people have
configured on the Gateway we had 300
unique short codes and more than
hundreds gateway clients they're
connected directly we work with 10
directly connected mobile operators over
various connections loads of flying
customizations in there of course and
there you see our sub average traffic at
a time about 37 million messages per
month and there was no quiet too quiet
time there so there's no point that you
can just say okay well we'll take a day
off now as I switched it over so really
the way we answer this call was to
develop strategy to say we we look at
the risk of the complexities and so in
the first phase we migrated services
where the original sure cause of the
wreck was irrelevant so that that was a
small amount of traffic but it gave us
certainly there the confidence that the
functions the Gateway was functioning in
a way that we expected the second phase
was more concerned with all of our
in-house applications and also we pick
two partners that we that we want to
launch with and then for the phase 3 and
we effectively cut over all of the
traffic so phase 1 and 2 effectively
required for customers to get involved
and change the configuration where space
3 it was that we didn't have to contact
all the customers but it was we were
able to cut over the traffic in a 30
minute window we wanted to make sure
that we have a significant confidence in
phase 1 and 2 to be able to do to
approach phase 3 and although so we're
coming as well to what's the end of this
and I hope you've got some questions to
ask me I can see is a little ? bubble
coming up on the side and so the Ireland
solutions as a company and you may still
have that as a question marking your
head hard that we work together throwing
solutions and provides a range of
services and products
so we've worked together on the buzzer
product but there's also Mongoose I am
as a brother as a product that they have
been developing and andrea is actually
in the investment group together with
erlend solutions so they're almost as
brothers and sister in it in an overall
process and the services that we utilize
you were consulting and developments and
even training so we were able to work
together and actually learn from the
expertise that LM solution brought in
and to train up our all-stars and and
certification is not something I
mentioned just here but it's something
that Robin can maybe mention in a minute
so where are we now two years on we have
connected to gateway more outside UK
nozzle but two islands to australia to
netherlands to belgium we may do more of
those connections into more territories
worldwide this game where has provided
us a really good foundation to do that
with and to scale with and to provide
the same service into a lot of other
territories all from from here SMS is a
technology that is quite tolerant and
Layton sees when it comes to the
propagation delay that internet
connections have so it's actually
completely feasible to run connectivity
from here to Australia and provide a
good service um over the time as well
we've developed a number of plugins that
allow us to connect and interact with
mobile number portability databases so
that allows us in some countries to find
out which network somebody's on age
verification for services that have to
be barred from from under 18 year olds
and then daily spend limiting services
and direct billing API so that we were
able to work with operators who said
they wanted to separate the the billing
function from the actual message sending
function all of this was all it's all
effectively integrated through plugins
into that technology
and then last year I'm along and LD have
worked together to make this platform
available for licensing through
solutions and that's pretty much the
framework within which you you're
watching this webcast here so as a
summary um we were successfully I'm
pleased some sort of still touching
words everywhere make sure that nothing
was wrong but I'm very pleased with the
deployment and the implementation we've
achieved what we set out to do we
achieved it on time in budget and with
with a very good quality so yeah so this
is I guess as much as I have to say in
this webcast and I hope you enjoyed it
if you face similar challenges get in
touch and you know Alan solution
certainly can help you with either you
know building your own solution or you
know licensing the platform and to to
integrate your business so um I've got
now I'm at the end of my slide work here
the next one is the dynamic bit where
I'm going to look at any questions that
you might have and there are a few here
already so if you have any other ones
please write them up now I'm just going
to take a second now to review some of
those questions here let's see how this
goes and and I think okay again it is
very interesting that I don't have a of
the person asking me the question
directly I'm going to start with the
first one at the top which says my
understanding is FLT is the clients for
whom long solutions has developed
buzzard that that is correct we have we
have developed us in a in a partnership
together just as I mentioned that's just
and they just at the end there and so
the user interface there's a question
here that asks can they buzzards user
interface be modified and develop
further and yes it can be if it's based
on ruby on rails and
and where there are customizations
required that are either specific to a
customer this can be done or also where
there are genuine improvements that
would benefit all customers any of those
could also be rolled out for for
everybody in that same sense um so
there's a question from Highness year
around if whether we develop the smtp
libraries ourselves or we based on
something yes we did base them on
yourself now there were a few elements
that needed to be customized
specifically around mobile operators
they always have to be mobile operators
do invent their own customizations POV
tags that they want to transport
information over so there's been
customization of that but for instance
when it came to the UCP module UCP
doesn't exist or didn't exist in your
cell library as benefits of open source
software we have decided to give our
development of UCP back so we made the
UCP libraries available in the same
fashion it also as open source to the
community as well I'm trying to just go
down a listen pic also that knows a
couple of questions more from Heineken
from Cartagena um I'm going to go for
this one here where can i download this
webinar I was going to look at my
colleague see if anybody know if I can
tell you that the webinar has been
recorded and the slides will become
available on the ESL corporate website
so following this webinar will put them
online and you'll be able to retrieve
them from www.opensubtitles.org and now
we I guess we're we're
together the company ourselves we would
not sup licensed the technology through
our installation itself but the idea of
the licensing for Alan solution is very
much self-hosted environments of
something that would be provided on on
your side or in data centers that you
would acquire and then you become very
much the owners of the platform and
being able to operate the platform so
this is not really the idea of a
software-as-a-service a plan attend
couple more questions one from Heinrich
is whether we would consider an ss7
integration the ss7 stack or more
specific as a map stack that mobile
network operators use to communicate
within the core network would definitely
be something will be various of
integrating the issue really here is
that unless we selling this to a mobile
operative you would require these there
are not many interfaces of well not many
I guess making available those at seven
interfaces to a third party is the key
business challenge so I would encourage
you to get in touch and see whether that
the opportunity is there and your
business contact is there to to look at
that am the what operating systems do
support so these are all based on on
linux systems so we used i think it was
a memorable know we we used ubuntu
widespread but i think we might have
used a different linux implementation
for this it's something again i think we
can we can we can confirm in more detail
so do get in touch with you if that's
important to you and the final questions
just come in have you worked out the
total cost per SMS and does it scale
scale linearly linearly as you increase
the amount you send out
and so the cost of ownership per text
message we have not worked on and the
investment that we made in developers
was significant but I guess your
situation is going to be slightly
different here because you benefit from
ready-made software so in the end I
guess our investment that we make it as
a product originally is not even all
that relevant at this stage so the V the
investment that you would have to make
into buying the equipment's training of
your staff and and effectively acquiring
my license for it it's what you should
work in a business case together with
with love and maybe after this call the
other element was to see whether it
scales linearly and that's again I guess
relating to the cost question it the
idea is very much to be able to be able
to give you again control of your own
destiny so it's a discussion that you
would have to go in with what 11 and all
the time so that's all the questions
that was that that we have time for
today and if there are any more
questions coming in and please send them
in via email I've got a little lass like
you and show you I think there you go so
there is a webinar at Erlang solutions
com email address you can forward any
further queries to and I let blood and
also close it and now something else
well thanks to the Marcus and I'm sure
everyone will be joining me in thanking
you for what was a very inspiring talkin
budget many thanks to all of you as well
who have joined us for the webinar
please join us on March 26 at
three-thirty UK time that's March to fix
for our next webinar which will be
dealing with another topic that Marcus
mentioned in passing and that is
regarding one of our other products
called mongoose IM which is an instant
messaging platform you will have a
chance to hear about the impressive
scalability massive concurrency and
fault tolerance of fungus which
basically makes you the messaging
platform of choice in the world of
social-media gaming healthcare many
other industries on that occasion we
will also have a very good speaker in
the shape of Alexander the director
on director and systems architect at
Google communications joining us to tell
you a bit about Google's experience with
Mongoose now we will be sending you a
very short survey to make sure we
capture your feedback of today's webinar
please also note that as we mentioned
just just a tiny bit earlier that the
presentation has been recorded it will
be available by the ESL corporate
website and you can find that on our
line Python solutions com thank you once
again and we look forward to seeing you
again on our next webinar</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>