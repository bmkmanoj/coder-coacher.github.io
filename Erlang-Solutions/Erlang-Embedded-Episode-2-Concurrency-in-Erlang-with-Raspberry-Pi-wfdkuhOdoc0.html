<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Erlang Embedded - Episode 2 : Concurrency in Erlang with Raspberry Pi | Coder Coacher - Coaching Coders</title><meta content="Erlang Embedded - Episode 2 : Concurrency in Erlang with Raspberry Pi - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Erlang Embedded - Episode 2 : Concurrency in Erlang with Raspberry Pi</b></h2><h5 class="post__date">2012-04-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wfdkuhOdoc0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi welcome to the second episode of
Erlang embedded our member with Erlang
solutions today we're going to look at
concurrency in our line and how this
maps into the embedded domain our line
has support for concurrency in its
runtime it's fully aware of symmetric
multiprocessing you can utilize all the
course you have on your machine and your
embedded systems it has support for
lightweight processes it does not rely
on the operating system threads and the
overhead for each thread is fairly
minimal so you can create hundreds and
thousands or even millions of processes
within the runtime it does not share any
memory so the processes are individually
separated from each other they're
independent communication happens by a
synchronous message passing and each
process has a mailbox and can you use
the receive primitive to selectively act
on those messages today's demo is going
to be a few LEDs connected to the GPIO
pins of the Raspberry Pi board and we're
going to look at how we can individually
control them we're going to spawn a
process / LED so each process each LED
will be running on their individual
process and we will be able to control
them in parallel so let's have a look at
the code example sorry we have two files
in our directory one of them is called
GPIO and the other one is called led the
GPIO module is a very primitive hardware
control module so we're relying on the
GPIO subsystem of the Linux kernel to
interface with these pins the GPIO
module has two functions in it and
release in it takes two parameters the
first is the pin the pin number on the
chipset and the direction of the pin so
one thing to note here is that strings
in Erlang are represented as lists so we
have to cost the pin which is an integer
into a list to be
able to concatenate it other than that
this procedure of opening the GPIO
subsystem and writing to these
individual bits it's pretty much same in
every programming language release
unexplored or releases the pin so it
could be used in other applications
let's have a look at the LED module LED
module builds on top of the GPIO
thorough it has three functions start
stop and loop start initializes the pin
using the GPIO init function and then
spawns a process which runs the loop
function and passes that process ID to
the caller stop sends the stop message
and we'll see what it does in a second
now the loop function uses the receive
primitive and it's depending on the
message sent it acts call it so if for
instance if an own message and on Adam
was received it would write one to the
file descriptor and then call itself
again and if blink was called for
instance we would blink the LED and then
send ourselves the blink message again
so that we would continuously keep
running this and stop closes the file
descriptor sorry and releases the pin so
that it could be used elsewhere okay so
let's have a look and see how this runs
let's start up a no lying one time
compiling load the GPIO module and the
LED module so we have three LEDs
connected to the board the first one is
connected to pin 18 so LED start 18 okay
the second one is connected to 21 then
and the third one is connected to 22 so
we now have three processes that are
managing or LEDs we can send messages to
them to turn them on and off so turn
that one on and that one on oops yep I
don't let me spell that on and they each
packed independently so let's get the
second led to blink seems like there and
well that's running I can turn it turn
the other ones on and off and they're
each independent so this is a little
demo of concurrency on the Raspberry Pi
board in the next episode or the next
video we will look into how we can
connect a few of the raspberry PI's
together to do some distributed
processing and we'll see that processes
running between network nodes
communicate just like they're running on
the same note since the runtime is
Network aware thanks for watching get in
touch with us on Twitter if you're
interested in having a chat with us or
leave a comment on this video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>