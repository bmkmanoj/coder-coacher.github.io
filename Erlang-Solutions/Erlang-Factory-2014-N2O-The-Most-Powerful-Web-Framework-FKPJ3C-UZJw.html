<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Erlang Factory 2014 -- N2O - The Most Powerful Web Framework | Coder Coacher - Coaching Coders</title><meta content="Erlang Factory 2014 -- N2O - The Most Powerful Web Framework - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Erlang Factory 2014 -- N2O - The Most Powerful Web Framework</b></h2><h5 class="post__date">2014-04-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FKPJ3C-UZJw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody I want to introduce our
work that we've done with nitrogen we
have a company we are doing a lot of
full-stack
projects and of course for web we are we
are using air long also and nitrogen was
our choice and this is an evolution of
of the nitrogen and I want to describe
the landscape of the possibilities of
web in Erlang platform so I want to
start about about Erlang web and what
what what we have possibilities to to
create the web application I prepared a
classification of all web frameworks
that exist on the market and I now I
want to describe this landscape let's
start from the very teeny web frameworks
that actually in mustn't
besides the REST API for for the depth
to to the database you know that we have
Python flask Ruby Sinatra PHP Silex and
Schelotto
this is a very small thing so called
micro rest because it provides nothing
to you to develop the webpages it's only
provide you an REST API and you should
plug single page applications on top of
the API to provide the web applications
to the end user
we also have a class of web frameworks
called concurrency in many applications
you know that
it's a problem beyond the Erlang world
that with capacity of even in Ruby and
PHP and these guys took live event
libraries and plug to their frameworks
to to to have an ability for event Inc
for scale scalability this like tricks
and accept Java because Java is more
robust dynamic languages so of course in
Airlink we should not take care about it
because we have everything out of the
box because our lonk is very powerful in
that area so this is a most modern way
to develop the web applications it's
connected with the micro rest frameworks
so you with yellow color you this is a
high level JavaScript web frame because
that provide you not only the rendering
possibilities not only as they pops up
subsystems for your control elements but
also like Chaplin arranges their overall
assembling specification for your
application come to assemble the assets
the JavaScript CSS images etc also if
you want your application to be more
light more lightweight you could use
react.js which is nice Facebook
framework for for view for
it's good even replaced you query you
don't need to use jQuery if you are
using two ranges we have also well known
back bond knocked out and Loic will show
you how to develop today how to develop
the web applications using d3 on top of
web sockets and code boy
so we have these options in JavaScript
and we have a separate I called it class
functional DSL languages web languages
using this approach you you create a web
applications or using your domain
language for example if you are using
Scala scalar you're using clift and you
specify a new application in terms of
control elements of Dom elements and you
create the page in in in Scala and it's
rendered on the server to the HTML and
JavaScript and moves back to the client
all these web frameworks are very
similar
oh c'mon
Oxygen's the same you are specifying the
web page not in HTML not in you not
using templates but using a common
language and this is being rendered on
the server and pushed back to the client
so the web web sharpens F sharp hostel
base HTML long haskell actually you have
a lot of choices to create the web
applications Blaze's team manages just
an example so on and on in air lunk we
have a nitrogen because nitrogen was
masseuse framework that introduced the
dome elements in terms of very long
crackers because using if he are using
Ireland we should develop the pages with
a long crackers because they're long
crackers is the only we have only this
choice to develop some structures around
tuples
so records tapas is the same and I want
to say that the most guys who doing web
think that closure is the best solution
for creating and why why so because
closure web stack is highly composable
and detachable each layers you could you
could easily replace with your favorite
one and construct your framework with
these components for example ring is
something that we that we have in
Ireland called simple bridge connects
requests and obstructs the web servers
infrastructure hiccup closure script and
ohm ohm is binding for the react.js
library that you creating the web page
in in lisp and this page is being
rendered to to Java to readjust he caps
also has a dome marking language and
HTTP GET is the fastest web servers that
that is so fastest convoy I will show
you later the some benchmarks of course
this is
this is wrong on GBM and laser and room
life as this is it completes libraries
so we have this kind of stack and what
my my aim was to bring in that direction
the nitrogen framework and I had a lot
of to do to do that because we need to
the moisture most challenges task was to
create a JavaScript compiler for for the
transformation from Ireland to to
JavaScript to beat for example the
closure script because closure guys has
closure script and they could easily
creates a single page application using
their release so we also want to create
a JavaScript application user long from
the beginning I was I discovered all all
the web servers that exists in
functional languages also I measured
they see like concurrently languages
like Diigo rust so and I discovered that
only Haskell Java HTTP GET and a long
cover provides really really fast and
with high capacity abilities web servers
all other language are not are not
comparable to talk of boy HTTP GET or
you know that actually big gate is built
on top of do which is using very very
old concurrent use of of Gela so so do
for example the f-sharp fastest web
servers built also using that similar
technologies in in dotnet and it was
benchmark was made Fargo
so go didn't show a good performance
these three guys here convoy is still
the king so you could rely on to boil
web server it's really fast so this is
example I want to show about what what
exists before before he starts we had a
lecture weber
web framework which is kind of Ruby on
Rails like web framework in in Erlang
infrastructure using language it has
also a eeks template in Zion you can use
macros alexei democracy to unleash the
power of the language to create your but
it's not very powerful with this
framework is basically the api to the
Koch boy nothing else so do the Chicago
box Chicago's use usage means it has
some additional packs like both DB
access to the databases
it has Boston q mq library and it also
Ruby on Rails like so you you develop
the pages using using the similar to
Ruby on Rails
approach it we we also talked to the
detail and giant John got in place
library from that framework because it's
very known and it's it's good it
compiles and we had a nitrogen so we our
first site was built using nitrogen but
we weren't happy with it because it was
too slow it relies on an approach
registry and this
registry process registry was creating
the processes on the cluster and for
example when you are deducing one
several of the classic cluster you you
feel this divorce on all the clusters so
I remove totally this server I reduces
the number of processes crash created
during the requests now and to all works
in the context only of of the korfball
processes so no other processes are
being spawned and in that way we
increase the capacity also we remove the
simple bridge because simple bridge is
not needed we are we don't have an
option in ilanic world because convoy is
the fastest and I don't think anyone
will choose another web web server it's
you of course you have an ability to
choose which of AB or mistltein or or
write your own
but we built our websites we call voice
so we don't need it we we put a simple
switch to to to redirects to talk of boy
API and so we don't we don't have a
bitch also with that we reduce the time
the latency of the requests so we added
we instead of n proc registry we using
zeros for pops up interconnection
between users and creating the mesh or
some topology of your of your sessions
we also remove all all these operations
that was in nitrogen so all page
construction or intent is using binaries
it also adds some some speed also we
fully relies on web sockets channel
using the ballot library we could fall
back to xml httprequest when WebSocket
is not available on your web browser
also we beyond this topic we also have a
database that is the base libraries that
allows you to have a uniform access to
react to Malaysia to college DB and to
Chi this is japanese amazon dynamo
implementation if you i interesting kill
our database it VI using with entró you
could easily found find it in in github
and over all hours over our cloud stack
and enter belongs to our open and you
could easily
see it and give up with examples we have
a lot of examples so what is Astra what
is the layers of n2o so we have a rodent
layer which deals with requests and
redirects your request to some rank
module or even you could invite your own
way to redirect the requests we have a
Curie hewitt curie parcel which means
how how you understand and how you deal
with with with the string of the
requests we have we switched from the
process dictionaries to the ets tables
which is much much faster and we also
received some we gain some speed from
from it we we are using detailed in
place which is cached and also it's at
some speed we act basically we are fully
remove the nitrogen so no no no we it is
only nitrogen like and nitrogen
compatible so if you have sites it's run
on top of nitrogen you could with little
changes transfer your sites to enter
easily because we have the API is very
similar but you need to change your code
it's not like it's fully compatible is
like compatible we have the same
philosophy of elements and actions so
you would be easy to transfer your
existing client sites to enter all but
this presentation is dedicated to
something more and starting from that
point I will show you how we extend the
nitrogen so this is some benchmark
benchmarks about the layers so in
compared for example for PHP 5 fast guy
with simple stream that draws
there's some variable you have for
example 5000 TCP connections nitrogen
too bad to even busy PHP we of course
Tolkien kebabs and lonk is very very
fast but in reality is this this was
very bad so you see these numbers for
example we enabled DSL rendering of the
pages with applying applying detail
templates you could gain the seven it
means each layers I enabled you could
gain the 7x times faster than nitrogen
but if you if you example not need the
DSLR in their example if you are using
static static HTML and JavaScript single
page applications for connect to web
sockets so you could even gain the
fifteen thousand TCP connections per
where some some configuration in for for
comparing I I shows it on the same
machine or row in geniux Ingenix
performs 60,000 TCP connections and a
raw coke boil on same machine performs
twice twice slower
static ah it was very hard to measure
all these numbers because each tool that
we have it behaves in different way for
example we our work tool doesn't perform
the DNS lookups so it's really stressful
which marking tool to to measure your
sites for example Apache which mark and
helos packet which mark or CH is they
are doesn't perform such big stress so
these numbers are very relative we don't
always understand what what this number
means we could of course we could
measure
the latency we should measure as a roar
roar and how much Rose appeared during
the your bitch mark and of course we
should measure the rate this is another
topic it should be described it
completely it's very deep it's not it's
not like you just a couple of times runs
the pitch mark and receives his numbers
I spent one month to to to find a tool
to to measure that the graphics how when
when it goes slow down so when I
received these numbers I started to to
sink could I put V dropped out something
to make it even more more faster so I
decided to defer the JavaScript
rendering for example when you are
hitting the page you we will draw you a
HTML page and now your web page
establishes a WebSocket connection to
another web endpoint this endpoint
creates in the server socket process
this WebSocket process should should
push to the clients
the JavaScript events binds these events
to the to the Dom elements and we don't
need to to render this in JavaScript
JavaScript functions at the beginning of
the displaying the page so we definitely
slowed ink and we received the numbers
twice bigger than then they were worse
but we also move further and we
completely push the HTML rendering
outside the alphabet for web framework
so from now on you are not you you're
not necessarily need to render your HTML
you basically you need to render your
HTML from the airlin records but only
once so in this way it's this framework
could also behave like a static
rendering engine for example you're
creating your web page but you only need
to render once and push this result of
this rendering to the file to the disk
and serve in futures is filed with
Ingenix so it means we we completely
moved to the HTML rendering outside the
web framework and this whip framework
now only serves the WebSocket
connections and
and this is open ask an ability to
create a real single page application to
use using this air long web framework so
you see that in nitrogen and to the
first version of n2o you needed to to
render the HTML page now you don't need
it you just need to connect to web
sockets so the basic idea how it
influenced in zoo into the architecture
of the framework because you don't now
need to render as a HTML page HTML
elements you should only specify the
elements on the page which has
JavaScript which has some post backs if
it has post back you could specify it
but also you could say that I don't need
to render the HTML I need to render only
JavaScript this is the example of of the
nitrogen rendering results which
consists of the part of the I HTML and
the event JavaScript event the descent
from WebSockets to the client from the
WebSocket process to the client you see
this is a bending on the click for
bottom so this is a result of the rank
of that DSL along this cell so this this
function collect the data from the text
boxes packed it with birth to binary
message and sent we could also you could
easily replace the birth with message
Park or JSON or whatever you want so
it's not it's not necessary as a bird so
the D cell approach is like you creates
the application like you create a
desktop application so you have a set of
control elements this control elements
has some events even handlers this
offenders are presently those are
indirect JavaScript and the elements
itself is encoded with HTML so but you
don't need to
HTML or JavaScript you are using only
Airlink language to create your
applications it's exactly the same how
you use desktop application how we
created this cool publications with
cocoa is we windows API or something
like that even even we could use the air
lonk
language to yourself to create a desktop
application for example we could use air
lock language and create an entrance
there's the Kokua source port but it's
beyond also this topic we have we before
we started a javascript compiler you you
know that when you are creating web
applications you and even with web web
server render it web frameworks you need
to inject the role JavaScript strings to
do your messages to update some elements
and do some tricks that allows you to
to have a dynamic HTML modifying core
something like that and of course no
one's like that everyone comes and say
oh you have you have a JavaScript
injection so this is better so we
decided to completely avoid and remove
all JavaScript injections for that
purposes
we started to implementing javascript
compiler and now I want to tell you some
words about the theory of of compiling
from one language to another language
this is also a kind of a macro or DSL
problem and in Airlink we have a pass
transforms for that purposes so you you
could transform your ilanic AST tree
with some functions to the JavaScript
this this task was very simple
why because both the JavaScript and
Ireland has the same power same same
domain this is untyped lambda and you
could easily transform from one syntax
to another with semantic preservation
what do you mean semantics preservations
it means when you are just warming cure
Europe your your source code program you
preserves the names of the variables the
names the closures the case statements
all language elements it was our it was
our requirements for that compiler if we
we will sink more widely on that problem
so we discovered all existed solution on
the market each languages and will we
want what what we want from that
compiler we want that compiler to be
human readable output it means it
shouldn't produce robotised code base it
should produce the clean and
understandable code to work with in
future for for JavaScript developers to
extend it it should not produce as a
coder which is need some runtimes for
example most of most of JavaScript
compilers produce the code revisions
need to be plug at with some runtime
it's some JavaScript libraries it acts
like
like a small virtual machine of small
runtime we we should consider to use the
strong dynamic typing language which is
Erlang keys so and this language should
be should be compact like air long it
should not have a big description or
language specification our language is
best fit for that its simplest language
I I work with so you see the numbers
which which compiler corresponds to our
requirements and we created a compiler
that corresponds all these requirements
and it most most it has most coverage to
that requirement
among other the JavaScript compilers
only one JavaScript compiler with the
same power is the J's color project you
could also find it on internet with
tetris you the tetris game written in
scala which compiles to JavaScript and
run in the browser why we need such a
sink like compiled hour-long programs to
JavaScript for example if you are using
if you are creating business
applications for example you create and
give forms or after generated forms you
need to block some validation rules or
some business rules and you need to this
rules to be check it twice on the web
forums and on the server so this is a
very good choice for that you also when
you are creating over to typed in some
applications you don't need to hire a
JavaScript developer you could do some
work is yourself ready when you are for
example creating some sketch of the
application some
so one one programmer could do all the
work by himself and don't need to to
hire another person in future you could
easily extend this but for for for time
to market you need to create your
application very fast for that
proposition also could use a long to
create your application fully and one in
one language and of course singular
environment this is technically a
technically perfect solution for for the
single ecosystem and this is an example
this is a program with it renders on the
server and creates HTML elements with
using the react jazz semantics so this
program in Ireland if you turn this to -
using javascript compiler this
transforms to such a clean JavaScript
you see all react hour-long crackers
elements transforms to react create
class functions and all Dom elements we
are not using here j6 transformation we
are using react so this is a minimal
minimal react.js
distribution because of the j6 the Dom
elements of react and this elements is
compatible with nitrogen elements but
this is another approach to render and
to create your views if you are familiar
with react.js you could use this
immediately but you could also use their
long to JavaScript compiler for your own
JavaScript library so this is just just
an example of applying the JavaScript
compiler to the react.js
which is very very very famous and
it the popularity of ramjet grows so
what we basically down here we as soon
as a long to JavaScript compiler is
based on the ilanic ast3 it means that
you could compile all so Alex ear
programs to JavaScript using our long to
JavaScript compiler also we have an
example to to create a JavaScript
program from the jokes a lisp on top of
being language but for that purposes we
need to modify the jokes because jokes
are originally using Allen core for for
producing the code but we need to
producing from top producing because the
Erlang caste from the lisp so we
modified the joke so it calls brace and
we started the project we want to
rewrite the jocks Lisp language which
would be much faster and much cleaner
you could follow us so this compiler is
ready for using with any language with
compile along caste so Alex even is ok
so let's return to to nitrogen model so
this is an example of the page you you
have as a control element so this
control elements have been putted into
the some some complete file for example
detail and here we have a venting system
for for reactions of the actions so this
is an example of using and - Oh from
Alex here you could easily use it you
could easily write your applications
using Alex IDO language with enter so we
have AB endings you could just use some
examples and write your publications
using colleagues here also we have such
such examples in Java language
so you see you maybe you don't see but
you will you will find it in
presentation this is basically the same
things as the records we using the
records in motion in both languages
because it's a long method languages
good quick let's this is another topic
about the rest rest abilities we have
you know that you when you are building
a rest applications and you need in
Erlang to transform the JSON Swink
presentation of the of the message to to
the property list now I predict a lot of
libraries that will transform the string
basses JSON to Maps and because along
now health maps so everyone would use
that instead of property lists but
originally along is is the signal to use
records so in any case we're using
crackers for storing records into
Malaysia onto into databases and is very
easy to use records in matches is it
must eat stores in ETS tables in debt
stable so records a primary format of
storing the data property listen maps is
only a buffer buffer format you see we
have a jobs just on the color from
property list to just one student to see
implementation as you see this onyx is
much faster than Jaffe so if you are
using GPS switch immediately to juice
onyx if you are using for example a long
con exam you should use pure ranking
implementation of that library so we are
using Java because it is much it is the
fastest airline of limitation of JSON
so you could transform the as we are
using the air long crackers as a native
format so you should you should
transform after you transform from
string to property list you should
transform from property list or to a
long record and we have two options here
you could use macros or some functions
or you could use code generation with
whispers transformation of course code
generation will allow you to do it much
faster so we we provides a person's form
for forest transformation it generates
two functions which transformed from
property list to records you just need
to to specify what record in to what
records you want to transform in that
module so it will generate automatically
this function so this is an example of
of the kind of memcache interface rest
interface to the ETS tables you know
that in Erlang we don't use memcache
because our lankan self holds the ETS
data in memory tables very good so we
just we are using ETS for for that
proposes and here's an example of my
mapping arrest request to so this is a
complete implementation so no no other
code is needed there
you could also using our KBS database
and our rest interface provides
something similar to web machine you
know that react has an ability to access
to all tables all buckets with red
machine and you could easily do a link
walking so this is an kind of
implementation of the similar ability
using our our web stack so this covers
you also could
create the same model but with you
instead of its kind of locked to one
tape of record but you also could write
a similar application to any twenty
bucket or to any record and everything
stays the same so you I this is a
WebSocket web framework that allows you
to create a different kind of
application from rest application to
single page application or classic
server-side rendering application using
your favorite complete enzyme
I received some some positive feedbacks
and we have a nice group of people who
are helping us to develop the ento if
you want to draw our team or you want to
help us or you want to to work on it or
use it we have a book written about and
talked we have a lot of documentation we
have a lot of examples we even have a
content management system built on top
of n2o so you could easily plug it to
your sites it's open source you could
just clone on github and start it you
will have a nice site with with posts
with three commands with admin panel
with access control lists of users you
have a modulus for PayPal payments
social logins etc etc etc so this is
kind of very major stuff you could rely
easily
don't worry to use into questions
yes yes sorry not a Jess angular no we
don't have bindings to the angular JS
because ankles yes is is a big the full
full stack web framework we encourage
our users of n2o to use some smaller
JavaScript pecans like a ramjet so we
encourage our users to use rec Jess
compared to one pair per connection
comparing to Kobol
yes it's we totally work inside cover
process in context toka so we don't
spawn anything you could spell
additional processes using the as is
like comet or sync processes to create
your topology of of subscriptions but
this is this usually it's needed only
for group chats like for some lobbies in
games so you have an ability it's
included in it was included in nitrogen
and it's still using enter
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>