<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>London Erlang User Group - RabbitMQ and multi-protocol messaging: Brett Cameron &amp; Eric Newcomer | Coder Coacher - Coaching Coders</title><meta content="London Erlang User Group - RabbitMQ and multi-protocol messaging: Brett Cameron &amp; Eric Newcomer - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>London Erlang User Group - RabbitMQ and multi-protocol messaging: Brett Cameron &amp; Eric Newcomer</b></h2><h5 class="post__date">2015-06-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SSW_4_ZI3Uc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's be on my toes and do everything
right but preferably is the real coke
anyway so basically you know you will
know therefore that rabbitmq supports
the ANPP protocol but more specifically
it supports up to Oh point nine point
one of the NQ can protocol negatively at
sports one point multiplier plugin but I
the the the actual plugin mechanism
gravity in queue support it's also
capable of sustaining a number of other
message queuing protocols so what this
talk is about is just really looking
well will cover a number of aspects will
talk about this rebate and pupae and
remedying do we'll talk about the
multi-protocol nature of rabbit and just
look at some of those protocols that it
supports very very briefly and you know
because we're all sort of geeky people
who like looking at code there are a few
luling examples and there's also some
other evil languages like Python and
cebu be and that's nonsense so we'll
just kind of go through a whole part of
things like that I'm lucky enough to
have a good friend of mine Eric newcomer
with us today Eric was one of the
founding members of the original amqp
committee so he was kind of responsible
for helping to define those initial
standards and so forth so I'll sell off
the presentation I'll get to a point bro
handoff we opened he can kind of talk
about history and keeping the adverse
message queuing protocol and maybe just
say a few words about Miss obscuring in
general and Wyatt's sort of seems to be
going through something of a resurgence
really and then I'll jump back in and
start talking about rabbit and more
and how it supports multiple mr. Chen
protocol but first up is in background
if you read the blurb which is why
you're here and there's you know a
pretty picture of me looking windblown
and husky another wild south of New
Zealand where I come from which is in
strange accent I work for Digital
Equipment Corporation tampere come in
hela pecker so work three companies and
stayed in the same office if you made a
history digital equipment corporation
bought by compaq event in bought by HP i
started my my life of the computer
industry working with operating system
called openvms anyone here familiar with
open viennese okay I was going to say
the old ones but Barry's monkey not
quite welcome you're just unfortunately
so you open VMS was an operating system
developed by digital equipment
corporation originally in 1977 and I
live date to the late last year and to
work with a small start-up company which
is now actually licensed all the IP and
HP to develop new versions of the
opendns operating system we worked out I
can't really say the numbers but we
worked out essentially how much money HD
was making our bacon Venus and it just
was not enough for a corporation size of
HDD viable business but they were very
happy to spin it off and essentially
license it to us to evolve an operating
system going forward so my role with
with the Assizes as we affectionately
known Venus offering my role with them
is to really figure out her open source
strategy and the sorts of technologies
that we're going to
technologies we're going to make
available on the platform and given line
problem over the years with the early
and things like that that's fairly high
on the list of one of the open source
technologies we want to get on to you
being his platform and indeed i have
actually done that port doesn't work or
run things like rabbits and react and
yours and so forth so a lot of work to
do the little picture down here is a
couple of good friends of mine that the
shorter guy is ed who's the guy who who
founded this company BSI and grow ed is
going through a state of culture chakras
he comes from Mississippi nice just had
to move up the Massachusetts he was
finally convince me the word dog
actually contain two vowels or two
syllables I should say and the chap
talking tom was an English gentleman
another good friend one I had dinner
with last night Keane who who who was
involved with open Venus and England
here and King King won't be upset if I
say it's a fairly typical pose of her
holding a wine glass I won't bore you
with the history of the theme is other
than to say that Eric work with it for
many years designing transaction
processing systems and things like that
i don't think you talk too much about
therefore has written books on on those
sorts of subjects which are fairly
closely aligned with message queuing
before moving into my web services
social and end anpp so just to outline
the talk as i say will give a brief
overview of n QP and the history there
of a bit of an overview of rabbit and
then start getting for more interesting
stuff talking about the plug-in
architecture with in Revit in queue and
its ability to support multiple multiple
protocols
Nestle and wrap up questions more pizza
ransom video reviews so at this point
I'll pretty much hand off to to Eric to
talk a little bit about the history of a
in QP but I'll just say a few words in
those of you here who have used for
every in Cuba presumably reasonably
familiar with the advance message
queuing protocol the fact that it's an
open protocol and some of the key
features of the protocol that list of
your own slide one of the key things
really have been many a team seven years
I think to define standards for these
sorts of technologies I'd work that in
the 90s with technologies such as GCE
and Europe with a lot with on owner with
caller and the idea what some of these
standards like DC in Corbin with a any
vendor could go off and develop your own
implementation and say HP's
implementation would learn seamlessly
with IBM's implementation so on and so
forth they've never really succeeded
that kind of partially did but not
really and what they did say in QP was
kind of take a slightly different
approach and really look at the lowly a
nuts-and-bolts level and and really not
out what wire protocol look like more so
than the API is if you look at things
like DC and call that the focusing very
much around designing API although
obviously I had to speak the same
language under the hood the emphasis of
a few POS think the more bottom up
actually you know as long as something
can speak the right protocol in terms of
how the bits and bytes or shape to go
out of the wire we don't really care
what your API looks like as long as it
did seem to messages in my point
so only Eric jump in now and talk for a
few minutes about this tree they MTV and
how he came to be involved in working
group and so forth just going back to
the early days of a provision thousands
alright thanks Brett and thanks for
including me in my talk tonight thanks
everybody for coming and Kewpie I think
best part was getting to was originally
intended to create a wire format
standard off for JMS or for messaging it
eventually became something where it was
trying to define the whole car as they
talked about some of the later meetings
trying to replace all of em q instead of
just being wire format protocol one of
the challenges in the in the messaging
area at the time amqp came out in 2004
we had the JMS effect which is an 80 I
expect we didn't have a wire protocol to
unlike poor boy ECE some of these other
mr. be competing mechanisms that has
both the API and a standard protocol and
if I only did not a standard protocol so
our initial thought was a MTB is going
to fill a very important gap in the
standards community and I was working at
I owned at the time we're very standards
oriented company I often talk about I
own as one
only companies i know it really made a
lot of money on the corpus effect that's
another story when I was a digital I saw
the other side of it where we were
investing in horvath time I was there
and unable to compete with ion which
surprised a lot of people at small Irish
company could really after the corba
market away from the shine computer
companies in digital HP IBM Sun and so
on but but they did have another story
but the Corvette and ECE before it for
distributed computing court calls did
focus on the API and the cortical
Dimitrov ability JMS had only got the
API immediately for being a wire format
for the operability that's why he
promised and that's why we signed up for
JP Morgan approached us very early on we
were one of the first vendors due to
sign on to mqp spec and supported I call
you by name Carl tree law who went off
to read hatton later took the MTP idea
with him and can't remember the name of
the messaging protocol now imagine
Darren Lewis on the c++ toward pauldron
if you take you kidding i knew they'd
get people to thank you so Cupid was
spun out of this by karl was rich me
that i own it and involved in getting of
MPP and reese i mentioned his name is we
were involved in the SCA specification
at the time i don't know how many of you
remember this service component market
IBM positioning as the next java ee at
the time this was going to be kind of
the runtime spec for web services or web
services young with the api's and XML
format but how does that get executed
you know how do you take the abstract
interface and message definitions and
create executable software out of them
that was supposedly sta space and didn't
work out for a lot of reasons but we
took Carla she took the legal paperwork
from SCA and IBM approached us about SCA
at iona because we had started funny
thing is that we have started an SOA
project at Eclipse and IBM came to us
and said we were going to do that but
you did it first so therefore you have
to join a CA as a founding member which
was also kind of funny for another small
company from from Ireland but still
interesting because we did participate
in we did try to fix the STA spec we
weren't able to because idea would
already been down the implementation
path with it too far again another story
but the legal paperwork that we had from
the SD a consortium was actually used to
found amqp assertion under strange
coincidence and it was one of these
binding intellectual property agreements
that later on would tempt would become
significant when for example I
personally talked with people from AT&amp;amp;T
to recruit them into em
and this became a problem because of
their patent portfolio and where we were
unable to overcome down to paperwork
otherwise with 18 keys participation in
QP success for adopting this we could
have been different than it was
yesterday but one of the main challenges
that evolved Indian QP was that the MTP
scope as I mentioned earlier started to
grow from just in a wire format into a
protocol for interoperability and to
let's define an open-source standard for
all of em q-series let's replace mq
series with an open standard and this
was the incongruity or they
incompatibility between point 97.1 spent
which was kind of the hurdle over which
amqp was unable to really jump becomes
liquidus it's had some level of success
but become completing that widely
adopted by IBM Microsoft Oracle of
course we spoke with those countries
many times about it and typically they
would have react to it reacted to it as
it was kind of put to them as you know
we're trying to work you IBM we're
trying to put you out of business here
why don't you sign on to our spec ok
great you know let's do that i'll put
ourselves out of business so i think one
status scope increased a bit more the
adoption level decrease because the
burden of implementation became our
Challenge two incumbents also increased
but there was an interesting working
group and interestingly enough for me i
went from iona and to credit suisse in
part because i own it was a big supplier
to credit suisse ionos acquired by
problem i was out of a job and he
predeceased i said why don't you join us
ignore which is on got into banking and
Citigroup now and I don't know how to
get out of banking without much me
Huff's words but subtle body I'll see
it's very interesting you know where i
am now we do about you know five to
seven trillion dollars a day worldwide
funds transfers and through city kinds
of interesting scale a problem for from
computing but bread sweets was also a
member again because Dianna connection
of amqp at that time so I ended up being
the manager of the participant in a
goofy once i got rekt credits crease and
we did try very hard to bring it in we
were actually very interested in it but
really find that sort of the critical
mass of adoption to partially so that's
a little bit of the background their
plan on it so I you know I kind of would
sum it up is a very good idea for the
initial scope it kind of because the
scope you know got too ambitious or too
broad I'd have failed really to achieve
the level of adoption that it might
happen this Roman maintain now or now
the whole whole standards process is
something another separate conversation
but it's very important to have
something that fits Annie it's a
business purpose somebody's finds it
useful and you will get consensus around
the companies that are going to
implement it and once you get into a
broader scope you have more challenges
in those areas so again some ways amqp
had a good initial foundation of initial
success but then taking the next step
became a bit more challenging this is
kind of a history lesson skewing I don't
know what spend much time on this I'm a
beast a couple of words and turn it back
over to order too bright I could afford
you to work with digital for many years
and those of you who remember the
company may remember this great
technology leader at the time number two
computer company in the world at the
time and a lot of innovation including
message
back message queue is very successful
messaging perfect figure that one not
your best sorry where's in freedom one
wasn't defense please well you know I
was never on the first ave the
transaction processing product i was on
the ecms product which is our pc based
EP monitor was our pc based in 1984 it
has structured three-tier model that
later became popular nap servers at
interface definition model structure
definition language all these things
back in any court later became
popularized and app servers at the time
we were thinking why does anybody need
messaging because all this great stuff
with our pc thinking and research and
academia and engineering was our pc is
the most modern the most advanced way to
be distributed computing and we would
run into the deck Buster guys we'd say
what what are you guys doing with
asynchronous stuff it's broken it's hard
to program it's visible in the code
going to direct everything away with our
pcs a procedure called crazy programming
model but what
oh really you need both of paradigms and
the ground was saying earlier even
though a lot of the initial distributed
computing came out of what I would call
the mainframe concept of everything
being under very tight control I've got
control of my app control my users
control my environment all my resources
if I need to do a connection-oriented
protocol which is what all the early
communications were look at the early
lu6 to communications from IBM which
work started distributing computing
concept implementations I you 62
distributed transactions subio to
basement all of that comes out of there
and certainly a digital in the mini
computer in Thera what we were trying to
do is compete with IBM and get some of
those applications off the main frame
onto the mini computers and to do so we
had to replicate their qualities of
service including the stupid
transactions or liability security you
see us see the same phenomenon through
pce through korva through windows all
these disturbing computing qualities of
service really we're trying to replicate
what they mean
have in the distributed environment to
get the applications alter their or
participate in the application for
system is Titan apartment but on the
other hand we have this other computing
trend coming up from the web which by
you know explicit design excluded
session or EDA protocols only sort of
protocols home so the communication
mechanism back we're talking about a
line on a shared session state between
communicating parties but that's
expensive resource on the web you
couldn't afford and today we're seeing
much more recognition of the value of
stateless communicational stateless
protocol interstate less applications at
enrollment messaging is therefore sign
to increase again asynchronous messages
coming really back into the forest
oxygen body datacenter architectures
all these environments are Eskimo
communications which are really starting
to become much more popular so in the
early days we would have thought of next
generation but halls is the way to go
because a simplified programming allows
you to do updates in place across
distributed environments the cost of
that in modern environments which means
to be much more scalable which or
flexible is just like we're seeing a
resurgence oh thank you thank you
already get Derek to play these notes he
was sitting over there for that two
minutes and scroll down some notes and
the amount of people visiting that sorry
only bit to take one that said something
like this no problem just a little bit
more background on the advanced message
queuing protocol and it in originally
significant part it was kind of born of
frustration so you had John O'Hara who's
the Barbarian TV kinda came up the whole
idea originally in JP Morgan Chase where
you know like every project he did irin
integration project he did that go out
and then apply some new middleware
technology and that wasn't compatible it
didn't speak properly with these other
newer technologies they had and they'd
have to develop some bespoke gateway and
it then have to also pay license fees
they are the middle of your product
there they'd have to have a team that
knew how to support that other product
and also had a support the bespoke
gateways that they develop and it just
became opposed to getting a huge
integration note so the whole concept of
amqp you know John thought there must be
a better way of doing this we must be
able to improve on the situation and he
came up your whole notion of a and QP
engaged some you know did some hard work
to engage some pretty significant
players I owner and elected in Microsoft
and IBM and so forth are now all
involved in one way or another
as Eric said I basically and keep he
started off with you know reasonably
simple sort of notion but the instinct
to take on somewhat larger aspirations
and I think you know a little bit that
I've got down there I mean John I think
always have some feeling big ideas
you're going to say he wanted to go to
indeed indeed so you know from its
inception from John O'Hara's perspective
he had you know a view of world
domination as far as message queuing was
concerned today in QB was going to be it
that you could displace in q series that
you could displace anything q-tip co
whatever else you might have any rent
price you could use amqp and it would
solve all your message queuing and
integration problems something that was
going to be usable from any language any
integration pattern that you might have
in mind instead of data payload you need
to send around any platform that would
be reliable interoperable manageable
performance kind of all those fancy
words so not not a chap that like to
sort of things small about these things
the original notion and I just point out
here that the box over to the to my
right I guess down the bottom near that
what I'm talking about here and indeed
for most of this talk I'm talking about
a.m. to the north point 9.1 as opposed
to a and keep the
but not so as I said before a rabbit
natively supports 91 supports version
one via which is ratified standard
supports version one via play yet most
people that use rabbit probably don't
particularly care what the underlying
protocol is they just like the
programming model they like the fact
that it works well that is flexible
scalable and so forth but it's kind of
useful to understand some of the
background but from an alien cube the
northpoint 9.1 model basically what
you're looking at with with rabbit in
hue and some other such product cupid
for example is the following key
components you've got message layer
which consists of exchanges cues and
bindings so you know exchanges in queues
while qz feel yourself explanatory most
people know the q is the way an exchange
works it's kind of like a software
switch you publish a message to an
exchange you're not publish a message to
us to acute you publish a message to an
exchange the exchange knows how to route
that message in 20 or more q's based on
binding information so the bindings
basically set up how the queues are
connected to the exchanges but you
published on exchange exchanges route
messages into queues and consumers
consume messages from cues we talked
about the wire protocol before and all
of the stuff is broker based okay so
you've got a message broker you're
publishing your messages to a broker
you're consuming messages from that
program
now whilst John O'Hara work from the
banking sector which you know will push
through millions billions of
transactions potentially a day he wanted
something that was going to be usable by
essentially anyone someone developing
that application and the garage after
somebody who's doing the sort of work
that John was doing with market data and
so forth and JPMorgan Chase pushing
through trillions of dollars worth of
transactions dating so he wanted am keep
need to be not only drew lots of
fantastic stuff but also be available to
everybody to use to do that fantastic
stuff what I'm going to talk about next
is just some of the core functionality
that you'll find within these alien keep
the implementations and obviously the
focus on wherever I talked about
exchanges before now exchanges can be of
different types and that depends on the
type of messaging pattern that you are
trying to achieve how you want your
messages to be routed between publisher
and the consumer so the standard
exchange types within within rabbit or
Cupid for example direct exchanges and
fanning out and topic exchanges
so direct exchange is kind of a
point-to-point scenario where publisher
publishes a message and that message is
consumed by one and only one consumer
okay so that message is routed by the
exchange into one queue and that message
is read off the queue by one consumer
you may have multiple consumers hanging
off of that queue and most
implementations will do something like
round-robin to load balance between
those consumers but the bottom line is
it's one messages published in one
consumer will end up consuming that
message of doing some work with it found
out exchange in the case of a found out
exchange with inciting to look at a pub
so publish-subscribe mechanism where you
could have potentially in this case
multiple queues in this case 3 q's bound
to an exchange publisher publishes a
message the exchange will route that
message into the publisher publishes a
message into a fan-out exchange anything
under found to they found out exchange
for beautifully of the message so in
this case all the cubes 1 2 &amp;amp; 3 are
getting all of the messages in one two
and three and you might have one or more
consumers hanging off the end of those
exchanges but there's no filtering going
on there's no filtering to say well cue
number one is only going to give me such
a number two and cue number three is
only going to get nice number one or
something like that it's every cue that
is bound to the fan of exchange will get
a copy of the message more sophisticated
approach is the so-called topic exchange
where there's a regular expression
matching going on via the binding
patterns and so forth so our publisher
is going to publish a message to the top
exchange and depending on information
within that message
the message may be rather than 20 or
more q's based on the binding
information available here okay so
content based real something that I
think is you know it's probably cut and
cotton in the financial sector yeah yeah
okay so it's just a very sort of brief
overview and he wrecks given some
background on the history of device
messaging protocol just a brief overview
of some key aspects of the protocol and
how it all works now just getting on
some more specifics around rabbit and
I'll give thanks to Alexis Richardson
who formerly of Revit in q4 some of
these slides including the cute little
bunny here so rabbit as many of you know
is a 100-percent Erlang implementation
of amqp it's arguably I think well
probably not let arguably almost without
question the most popular aim keep the
implementation very very widely used I
think I mentioned in the abstract for
the talk something like thirty five
thousand plus production implementations
and these things are running you know
business critical systems all around the
globe anywhere from like you know pizza
ordering systems through to the other
example I gave of being the central
nervous system to an OpenStack clouds
okay so rabbit rabbit is very very
widely used very very popular it's a
good piece of open source software but
as I say it is one hundred percent
Erlang i would say probably the only
slight deviations from that or if you go
and have a look through the airline code
you will find some OS command calls
where it's going off and doing d
commands and various things like that to
check on disk space and so on and so
forth I've had discussions with the
development about doing that and a
somewhat more platform-independent way
but tall extension purposes it is
100-percent early so i mq broker but
what we'll talk about soon as its
ability to support other protocols via a
fairly sophisticated plugin mechanism
and in no small part thanks to
capabilities valley there are clients
available for rabbit in you know pick a
language circular language and there's
only a client available for it and if
you think the language for which there
isn't a client did probably by tomorrow
they will be one very brief brief
history of rabbit so rabbit was pretty
much the second implementation of the
evolving amqp standard the first
implementation was done by emetics so
trying to Hera jpmorgan chase engaged a
small Belgian company for romantics the
the founder of which is a very
entertaining champion many of you
probably know he dimensions so Peter
work closely with JPMorgan Chase and
maybe well the first and he
deliberations the guys that rabbit
technologies of excess Richardson and a
few others were very close behind and
they were pretty much to see and cab off
the rank as far as a and keep the
implementation for consent starting off
at around two thousand six in 2010 I
actually had a call with the rabbit guys
that particular morning and there was
much fun and hilarity and it was very
hard to have a conversation with them
because they're just managed to get
themselves acquired by being we're and
we're feeling very happy with themselves
around about april 2013 as some of you
know vmware an EMC spun out a company
pivotal which which included a number of
their cloud based products i suppose in
that seat for things like Rios and
NQ and cloud foundry and things like
that slightly members are separating the
little graphic over the side there is
just a little Google query that it is
probably not a valid comparison between
some of the products there but I don't
think you can kind of question too much
the rise in popularity of rabbit as x
going off I mean it's heavily adopt a
very popular pieces of it you know and
the guys are also good because you can
give hoodies and t-shirts from them I
was talking to Eric earlier today some
of the guys originally created rather
than our doing a thing called weed which
is like a networking technology for
dhaka but one of the things that they've
done consistently well and all of their
entrepreneurial endeavors is they
haven't sort of fallen into neck track
where where a lot of good open source
software you've got a good piece of
open-source software but the
documentation is poor the management
tools of horror and things like that
even if the core is good if you want a
serious business if you want to be
enterprise customer to actually use your
software you need that operational stuff
finding the documentation the monitoring
and management and so on and so forth
one thing the rabbit guys did very very
well is to address those sorts of things
and providing THX so they leveraged
which are also important because you get
a lot of good marks for having
top-quality match with your product but
they also did a really good job of
leveraging the capabilities building so
i think i'll ambition quite an inspired
choice for the creative writers because
if you look at say something like open a
tin cube which was the first version
first implementation of amqp it's
several hundred thousand lines of nasty
evil looking c code and peter pensions
wrote some tool that actually kind of
generated most of it based on an xml
implementation of the amqp spec but
irrespective it's a fairly substantial
codebase if you look at rabbit it's
probably about i think when i last looks
sixty sixty thousand lines verlaine code
or whatever with worth actually quite
substantial commenting in it as well so
what they've done is they've actually
leverage many of the capabilities that
come out of the box cursive Erling
provide a very very very nice concise
piece of software that does all this
good messaging stuff and also leveraging
literally building around things like
clustering and high availability and
indeed to a lesser extent monetary
fairlane can't help the t-shirt but it
does its best so courtesy of early with
rabbit as of i don't know probably about
two thousand twelve time frame they got
the clustering side of things working
fairly well clustering is fairly
seamless within rabbitmq I've probably
had a cluster up to about 30 or 40 nodes
playing around but but arguably there's
no no theoretical limit to how far you
would go if you really want to
clustering doesn't necessarily provide
you with any significant performance
benefits but it does help to some degree
with scalability and fault tolerance
obviously with clustering you end up
with chatter between the nodes which can
incur a time your naughty and so forth
but it can be very good from a
scalability and fault tolerance
perspective and you can add additional
nodes into your cluster at any time will
take them out any time but the key point
to note courtesy of early is it doesn't
matter a publisher publishes a message
in to say no number one consumer can
consume it from any other node it does
have to consume a message from the same
node at which from which it was
published in 2 q's will us are
essentially oh by one mode and will
reside on one node but there is cluster
way visibility of all those cues and
exchanges and other such resources a
little bit later on the guys added into
the mix availability with with Q
replication and originally Q replication
way which is this participations little
crude current implementations of rabbit
allow you to specify replication
policies based on some sort of regular
expression or whatever which is kind of
nice so if your primary if as I said
before and Q nominally lives on just one
node within rabbit cluster you could set
that up so that that Q is replicated to
another node or potentially multiple
other nodes it's up to you how you
design it generally not a good idea to
have your Q being replicated to every
node in your cluster because that will
probably incur significant performance
overhead but the bottom line is if their
primary node goes down then one of those
secondary nodes can actually pick up the
job and will take over the role of being
the primary as far as the ownership of
that humans think I should point out
that those that ques Q's within rabbit
or indeed any other n QP implementation
can be either durable or nondurable you
can store you can still replicate
nondurable cues but there's a you will
be not such a good reason for them doing
that like I said before any good piece
of software that you want to be able to
promote into you know large enterprise
level customers they want good
documentation
they want good tools for monitoring
what's going on managing what's going on
the rabbit guys actually did a really
nice job around developing an API based
approach for doing the monitoring and
management of rabbit in a restful kind
of fashion they developed a web GUI that
can use that API there's also command
line tool rabbitmq admin tool that you
can use which is written in Python or
you can hook into the API any which way
you like anything from simple girl
commands through to writing your own
tools the way you can you can call into
that reasonable API to do management
functions but the actual that we've the
web interface is is generally speaking
pretty down useful for most purposes and
also good where you've got people on
your team who maybe you don't
necessarily want them getting in there
and doing anything too drastic but for
people on your team can fairly quickly
look at what's going on and understand
it and rationalize it and no in bad
stuff is happening you know like these
little boxes like if you're about to run
out of socket descriptors the box and
they're not green they are red so quite
an insured of an easy-to-use interface
and of course it's all willing and in
the case of in the case of in case of
this that's using these and cowboy
what's the other bashe possibly yeah
security is obviously fairly important
so I think this is really part of the
ANPP definition anyway but was then
rabbit or Cupid or other examples other
other such products there are different
layers of security at the top level
obviously you log in you specify
username and password but you also have
to specify something called a virtual
hug for V host so the first layer of
security is validating your
username/password vinos combination fee
hosts are kind of like little mini
rabbit implementations that run within
the
rabbit and their self contained and
resources are unique to Abby host so you
can have an exchange called Fred within
one be host you can have an exchange
called Fred within another v host they
are not the same exchange so the V host
kind of X I suppose a bit like a
namespace of X in that sense but anyway
assuming that you have actually
validated you know username password
vinos chicks out all right you then fall
through to saying well what can that
person actually do now that they are
logged into this V host and revit
implements kind of three types of
operations here configure write and read
operations on a resource the resources
things like exchanger a queue or
whatever so you can write to an exchange
possibly could be you might be allowed
to do that or you might not you can read
from a cute yes or no you can configure
rabbit an example there would be
defining the binding between you and
exchange the way in which those
permissions are defined is based on
regular expressions so it's not it's not
kind of one hundred percent granule and
you do actually have to have a bit of a
think about how you want to set up your
permission structure of thinking in
terms of how you define those regular
expressions but it's quite flexible
brief summary of some of the some of the
other implementations because I see it
before Peter tensions and martin sus
trick and a few others developed the
very first amqp implementation with
opening in pewter org at some point I
can't remember exactly what year but at
some point i managed to pulled out of
the am can be working group and no
longer supported open amq and peter has
gone on to work more with 0 mean cube
and done really well out of effect we
meet some few bit before with regards to
red hair they're also some people are
actually offering services so storm in
queue and clown amqp cloudy and Q pinas
basically rabbit as a service they're
also i mentioned before
companies like Microsoft for starting to
get into the mix with with the available
streaming protocol and even things like
a patch Apache acted in cube supports a
MTG month mcnaught microsoft is your
similarly and also only ever working on
a product i think it's in beta at the
moment thing to link you light which
supports the amqp one point north end so
now it's getting on to plugins and then
why they're important why you should
care and things like that plugins really
are a key component of gravity and cue
it's a relatively small kernel and it's
designed to be really extensible through
the implementation plugins why would you
have mean plugins for the led to do all
sorts of cool stuff and that's a good
excuse to actually sit down and write
some early in code key reasons why you
implement a plugin perhaps you want to
support some other sort of message
killing protocol leveraging and
capabilities the core capabilities a
rabbit provides that we've talked about
previously clustering securities
capability fault tolerance all that sort
of stuff what you tend to find i'll talk
about it a little bit more later on is
that these message queuing protocols
like stomping qtt and so forth they all
have quite a lot of characteristics in
common and indeed if you have any
familiarity with in q series and you go
and have a look at a in QB northpoint
9.1 it almost looks like the guys picked
up some of the features of in q series
and you know incorporated them into the
way that amqp works so adding support
for additional additional messaging
protocols is one reason why you might
want to plug in alternative
authentication mechanism so for example
when i was working
these cloud team we implemented I mean a
plugin is going to cage against
OpenStack Keystone which is the identity
management system with an OpenStack you
can write plugins that will do
alternative authentication mechanisms
different messaging stores so when you
do assistant or durable messaging with
reven in queue it doesn't use in Asia
for that it's a common misunderstanding
rabbit doesn't use these restoring
restoring messages the rabbit team
actually it's been a heck of a lot of
time designing a very efficient
mechanism for storing messages in
assisting messages the disc but it does
not use the measure you can however
write plugins to em coming alternative
messaging stores I know for example one
of the guys and committed something that
used Tokyo DB for example you can do
that extending the functionality of the
broker a few examples there we look
before the management plugin and so
forth message tracing things like shovel
and Federation shovel allows you to set
up a system we have I messages that
essentially shoveled from 11 Q into
another the Federation allows you to sub
set up a whole tree of brokers and move
messages through that tree to
potentially increase scalability and
things like a new exchange types
actually developing new exchange type is
relatively straightforward and doesn't
require too much code it tends to
require more imagination so remember
exchanges those things that you publish
messages to and the exchange determines
how the messages get routed whether it's
direct into 1q whether it's fan out of
the topic so you can implement your own
custom exchange if you have some
particular requirement in terms of how
you what your message is routed the
react exchange for example what that
does for every message it's published
and
it saves a copy off into a react
database you might want to save copies
of all your messages for example that's
a reasonably efficient way of doing the
shouting exchange is kind of cool where
your messages you know your partitioning
messages across shadow diffuse you know
as I say writing custom exchange is
actually relatively straightforward it
tends to be more what's the scenario in
your own countries so I think we've
pretty much covered why writer plug-in
you want to do some stuff that rabbit
doesn't do out of the box key points to
note I suppose that these plugins do run
within the broker so if you write bad
code or whatever you could potentially
crash the whole shooting the actual
really really tolerant of reasonable
levels of stupidity being able to have
plugins like that fit in with rabbit
also allows you to bundle things up and
have a single installable product as
opposed to having them to all one thing
against all others and what thing comes
down to is is just enabling and
disabling the plugins that you're
interested in so simple command-line you
know riveting q plug-in enabled rabbit
management for example very simple to
enable and disable plugins and newer
versions remedy you actually allow you
to do that on the fly older versions you
had to actually cycle the broker to pick
up configuration changes in terms of
plugins newer versions not so some
coming songwriting plugins that the
revenue q team provide a kind of
umbrella that you can work with provides
the basic shell to get you started on
writing plugins I don't like it I'm
probably the stupid or something and
it's never worked well for me I've kind
of stolen some other bits and pieces
from the community and
use a rebar base build mechanism for
building plugins which some of my mind
is a lot less painful and irritating and
work through seamlessly and I would like
to thank the bear show guys creating
rebars if you are writing a plug-in you
generally have to have a pretty damn
good knowledge of reveling you and the
internals they're off maybe least so
these days but certainly in the early
days before some of the api's and
settled down you used to find that you
know you could have some plugin that
work really well new version of rabbit
come out and everything would kind of
explode in front of you and you get very
nice fascinating looking erling stack
traces appearing in the log files rabbit
is now very mature there are very few
changes in terms of those internal api's
from one version to the next so you know
the fear of plugins breaking from one
version real to the next is now
virtually nil I mean that's not to say
that you obviously if you do have a
plug-in and customers are using it we
obviously need qualified and test it
within you version of rabbit like a nap
I'm not sure how long I want to dwell on
this because i think was still pizza
lead from the certainly beer but one of
the interesting things that was
implemented i should point out so i'm
from new zealand until the original
developers on revel in q are also from
new zealand one of them very clever chap
Tony gunk Jones who's now somewhere over
Boston why doing PhD but what Tony
identified mean they were implementing
Revit in the early days was that this is
a fairly complex piece of work and they
knew from the early days that was going
to be extensible via these plugins and
different plugins have different
dependencies and can't really start up
and tell certain other things with
started up and so forth so Tony came up
with this concept of food steps
basically which you know special little
tanks and you slip into the LED modules
and when rabbit starts up it builds up a
tree of what all the dependencies and so
on and so forth are based on what
plugins of the air and what are the bits
and pieces of the air and it ensures
everything gets started and a coherent
fashion so you as a developer don't have
to worry too much about it you just have
to say if you've got a particular plugin
well this plugin I know that can't start
until the certain things started here's
the unifying boots game to cover there
so I don't think I'll go through it too
much detail but this is an example of in
this case what's called a recovery boot
stage so we're a bit starts up assuming
it's not the first time of stars and
actually wants to go through and check
everything looks okay so i'll check the
anisha database which is used to store
configuration information I want to make
sure that's not corrupt and if it is it
might need to do some fixing it wants to
make sure that any files on disk
containing swapped out messages durable
messages that all of that stuff looks
consistent and so forth so when it one
of the first things that those are the
stars happens do like the recovery steer
to make sure everything looks clean and
is good before it can move forward with
three for the boo signals so that's the
recovery boots dead and it's going to do
a few other things and once that's
completed it's going to say that okay
this ralphing really good stick can then
run and once the routing ready boots
that runs well routing can happen
I think being routing messages from
exchanges and accuse I'm not going to go
through too much more of this because
these are the tears boot steps are
important and has indeed my boot
collection but probably the key point as
I say these things are very important
from a plug-in perspective it makes it
easier for you to write plugins and
ensure that things get started up
properly Tony as I say the limb Tamina
this is becoming a bit of an academic
and likes fancy terms like directed
acyclic graphs and I don't know how many
of you have read El burro's book
rabbitmq in actions so el buro rather
painstaking he went through and had a
detailed look at rabbit and how the
boots the attend together and came up
with this rather impressive looking
diagram which is almost illegible but
this basically illustrates the boot
sequence was in rabbit through a fairly
standard implementation bottom line is
burning up any sort of substantial early
application like this is not a trivial
task the boot steps approach that Tony
came up with makes it a lot cleaner
simpler easier and also accommodates the
fact that people do want to write
plugins and I've seen the broker and
don't want they have to worry too much
about all this nonsense or understand it
in order for things to work El burro's
posted some stuff on the web is that
I've written blog about all of this was
a lot of detail so finally getting on to
the whole multi-protocol open-source
messaging hub thing it was something I
started looking at a few years ago
really these different message queuing
protocols amqp in qtt stomp and so forth
they have a lot of characteristics in
common but they also have secure use
cases that they're better suited to the
others and you know one of the nice
things about rabbit and it's
multi-protocol support for example as
you could publish a message into rabbit
using one protocol and you can consume
that message via a different
about for potentially you can consumer
simultaneously by several different
protocols it doesn't matter what i
should say though is that this ability
is not necessarily unique to rabbit what
i would say is rabbit was probably one
of the first things nicely but even
other cueing products java based
technologies such as active in queue for
example now to actually support similar
such multi-protocol technologies but i
don't think they do it quite as nicely
by thing there's the photo you seen here
mr. Biren yeah the beer i think this was
this was eric was kind of quite
surprised that they're all these new
zealand beers for sale your presence in
any such reverence amazing yeah and
he'll I just needed something to fill
some space looks like so you know like I
say well cool fine and dandy so we can
support Lee's protocol but why should I
really care well like I say the whole
notion of one message queuing protocol
being able to sort of do anything it's
kind of fun Bingley floor Eric talked a
bit about that kind of end up I'm
necessarily bloating things it's just
they're all all of these protocols have
slightly different characteristics yes I
have a lot in common that they have
slightly different characteristics that
make them better suited to certain
scenarios and others so some protocols
as I've said here optimized for low
latency transmission of small messages
really good for that other protocols
might be designed more for efficient
transmission of large messages okay some
protocols will sacrifice to port
performance for reliability so if you
look like a stock exchange type example
you've got to interesting but quite
different use cases that go on there
there will be literally millions of
quotes just flying around all over the
place you know in micro second time
scales if one or other of those quotes
gets dropped the bank of the exchange
doesn't really care because another one
going to cut along a few microseconds
that's fine but when someone actually
buys something a transaction has to
occur you know that has to have an a
little bit more slowly and reliably
people don't like losing money drop in
quotes is one thing so that's you know
that's low latency transmission with
small messages but when people are
actually exchanging real money that has
to be done reliably and as soon as you
include the word reliable in the
sentence you also incur a time killed
okay so not all protocols are created
equal and you know like I've sit down
the bottom here any attempt to
accommodate all possible messaging
scenarios within the scope of a single
protocol must in table some legal
compromise now John O'Hara had you know
great designs free and you need to be
able to do we think it doesn't quite do
everything it covers most scenarios but
you know there are other protocols that
are better suited to specific use cases
another reason for having molded
multi-protocol support or being able to
support the ability to facilitate
different protocols is adaptability
right you know what seemed like a good
idea in the IT industry today might not
necessarily be such a good idea tomorrow
I mean I think I don't know how many
technologies come and go that seem like
really good ideas time you give it a few
years to give it a decade and after all
the Gartner hype sort of gone down and
you're on the on the other side of the
hype curve and so forth something else
is coming along so technologies need to
be able to adapt otherwise they cease to
exist so with someone like rabbit you've
got a good solid core you can meet other
stuff around and that leverages that
core term comedians different protocol
so some of the protocols that are
supported by rabbit by plugins today
stomp I'll talk a little bit about some
of these shortly MQTT which is kind of
becoming one of the preferred protocols
for the internet of things that Derek
and probably comment on is whether he
likes it or not zeromq it hasn't been
too much
zero in q plugin in recent times but
it's still there sort of respawn
messaging I must admit the idea of
message queuing HTTP is a combination
that doesn't gel well with need that
there's kind of a cute plug-in called
rabbit heart which I've been closer to
work with that that allows you can do
that to some degree and you know web
sockets and very yourself so just you
know for people who may or may not be
familiar with some of these protocols so
stop is the simple Australian text or a
messaging protocol you know you can whip
up a stomp client and your favorite
language probably within within an hour
or so it's not a sophisticated protocol
and as its name suggests that the key
word is text so you're dealing with
textual essentially textual messages
will be not talking about our tree bonds
of danger one point that I don't make
there is the actual model around solve
it makes quite well through the amqp or
point nine point 10 MQTT so as I said if
you look at the Internet of Things so
I'll probably a good example in qtt with
the facebook Messenger which which uses
the end continued protocol you think of
your phones how many times your phone is
polling a web server another to see what
you've got some new email or something
like that or some new new content all
that polling is you know inefficient
that waste is a huge amount of time to
waste a huge amount of energy protocols
like MQTT are designed to be very
lightweight and efficient and for you
some things like senses and so forth and
in relatively constrained network
environments okay so this would be an
example utt it does have different
quality of service levels but you know
the lowest quality of service level
there are and hearing
you're going to drop messages and that's
a decision you have made that is except
for the guy all the guys that invented
MQTT Andy Stanford Jones the same player
should say live soft one of those
islands off the UK whoa Kerry Wood yeah
he was on the other line that's right
but he's quite a quite an entertaining
guy and he's kind of got just about
everything in his house is monitored by
a firing qtt so wherever and he's giving
a talk in the world he can he can go oh
hell I forgot to water my guns
because he's got you know senses stuck
in the pot plants that are monitoring
water content things like that what able
to Angelus personally why pop bugs just
died there you go it's not positive
cannabis right that's positive public
plan that but it just being boring to be
like yeah oh that's right it's it's it's
a nice protocol very lightweight very
easy to do is very simple to understand
I mean that's that's a key selling point
means them to understand and again it's
something that match quite well i would
say in this case to a subsidy that the
way in q amqp the rebel-held plugin as i
say this was actually another invention
of Tony Carter Jones and it has the
first few points here it basically
allows you to do messaging using HTTP
and mapping things too growling q
exchanges and Q's so gives every
exchange in Q hosted by the broker two
URLs one for delivering messages into an
exchange or a queue and one to use to
subscribe for messages so it's a web
based mechanism so when you subscribe to
a particular cube or whatever Puddle
subscription as you specify a web hook a
callback URL and revit hub will pushing
in messages out to that nominated URL
there's no mutation of this funny thing
but pubsubhubbub credit on the only
redeeming feature available know its
name but the fact that one of the people
have devised it as a Christian
great so it's got to be a positive for
my pistol so just just for example
subscribing to a theme with rabbit pub
just to illustrate what I was talking
about here so in this case we're going
to subscribe any messages that get
published into the exchange amq direct
which is one of the default built
indirect exchanges with around here who
are going to be forwarded by rabbit hub
to the nominated URL and we specified an
expiry side of this command of 600
seconds which is arguably not the
terribly useful period of time for
subscribing the messages but it's
serious illustrate the point so in this
particular command would seem our
subscription request them to rabbit hub
web server for Rama pub running within
rabbit listening on port 15 672
establish that subscription so what r
ever pub does eventually adds another
couple of tables to your knees your
configuration database used by rabbit to
store the subscription information so
and you know key point down the bottom
you like i said before rabbit rabbit
doesn't care how a message is published
or how its consumed so it doesn't
particularly care if your publisher is
one protocol new consumers another it's
it's largely irrelevant it's just the
routing mechanism is the delivery
mechanism
I often make a sort of a kind of a comic
that one of the good things about
standards this is a lot of them but key
thing about these protocols that are
supported by a rabbit is that they are
open standards you know which is got to
be a good thing and remember that you
know one of the key motivations behind
amqp in the first place from John O'Hara
suspected was to estate that middleware
health now you might think well hang on
that these plugins are supporting
different protocols and things like that
hell we still kind of got some of that
hellish behave you going on well I put a
little boxed out here in yellow which
hopefully kind of suggests not right I
mean in my view anyway there's kind of a
feeling major difference between
developing gateways and a decklist
bridge proprietary protocols that are
having some sort of technology like
rabbit that can really be standard sort
of takis level in protocol messages so
just a you know not like playing around
with stuff and just to play around with
some of these protocols in this
particular case in an openstack cloud
HP's cloud 12 sitting up a 69 cluster
and what I do was on two out of the two
out of six nodes I set up router pub on
another two days and install and other
two nosey MQTT just to illustrate the
point that you know not only can you
publish consumed by different protocols
but again it doesn't matter whether
they're running on different cluster
nodes it's it's irrelevant I could
publish you know into I could publish
something into this node using amqp and
consume it out over here using MQTT
doesn't
how many of you have seen up rabbit
within a cloud environment okay that's
good because they might be some useful
information on the slide but why you
team to find when you when you sort of
say go into the cloud environment the
ec2 or Amazon or whatever or OpenStack
there are certain things you need to
think about when you're sitting out
rabbit within these environments first
of all you go to ensure that various
relevant firewall ports are open okay if
you're setting up the cluster certainly
you need to do this I mean obviously 4 5
6 7 2 which is the default name in dport
that needs to be open if you want to use
the remedy in queue management plugin
which I suggest you probably do then you
need to ensure that port 1 5 6 7 2 is
open if you're sitting up a cluster and
you want to employ epidemiol to be able
to do magical things to make sure your
cluster works you need to ensure that
4369 is open and if you're using the
other protocols and so forth their
various port numbers that they use by
default obviously all these port numbers
are configurable so these are just the
default second point down here from a
clustering perspective early and
provides you with the ability to specify
a port range that will be used for
communication between between clustered
nodes most people when they set up
something in cloud probably are a little
reluctant to just open up every possible
port number so what you tend to need to
do is to use these guys only at this
listen learn and next to lock it down
maybe it was one port or a couple of
quarts or whatever so constrain the port
range that you put Intracoastal
communication and that's something you
can specify for every interview conflict
so setting up rabbit with in a cloud
there are a few things you've got to
watch an order for it to work properly
and a few more things you've got to
watch
actually do cluster it's not a big deal
but you know if you haven't done it
before it's kind of easy to forget on
this one or rather these things just to
note down here so this is more geared up
what's the OpenStack kind of thing I
mental asleep it's probably still alive
I helped out a guy doing some stuff on
ec2 just talks about some of the stuff
and he seems different what sort of
performance can expect within a clouded
very well in generally speaking to be
honest without even trying and a
recently self-respecting sort of cloud
environment twenty thirty forty thousand
messages are second really achievable
but I mean it's kind of a dangerous
thing to say oh we can do this me
messages to see him because he reminder
that depends on large number of
variables message size for example as
australia by the graph there's a huge
impact on how fast you're going to start
moving stuff around and there are
numerous other variables like if you're
doing persistent messaging and things
like that and obviously you're doing a
lot more disk i/o that has a performance
impact but the bottom line is Without
Really Trying you can achieve some
pretty good levels of performance within
a cloud environment for leading on a
good laptop keep in mind if you're doing
a small volume protocol stuff that
normal protocols are created equal so if
you look at say something like rabbit
hub you might think well it's kind of
cute I can publish a message using amqp
and I can consume that via HTTP keep in
mind that for example HTTP is inherently
request response there's a bit more work
that goes on there it might not be able
to keep up with what I mqp can push
through so normal protocols are created
equal both in terms of the news cases
they support but also in terms of those
non functional characteristics like
performance some clouds also have this
rather interesting habit that's what we
use the dental HP Cloud years ago where
was actually been with throttling and so
you know you might suddenly find that
you could
maximum number of messages you can push
through per second between nodes in a
cloud environment possibly the Sun some
vendor and post throttle little blue box
out here is actually quite an
interesting paper where guys at the
little worked with Google to get 1
million messages per second on Google
compute with rabbit I think it was
counting the number of nodes it was
something on the order of a 30 node
cluster and it was a somewhat contrived
test you know they were very careful
about how they set it up so that they
want any disk I though and the routing
was kept very simple and so forth but
what I would say that their paper does
illustrate is it's a very good
illustration not necessarily at hey you
can bring some sort of bench medical
performs result but it's a good
illustration of how how good illing is
in doing this type of clustering so what
I want to do now just just briefly
before we wrap up it's just you know a
few little bits of code before people
finally fall asleep so just enough
enough chatter from the Irishman to just
just illustrate just illustrate a few a
few examples here of what I've been
talking about in terms of being able to
publish and consumed by different
protocols so first up simple example
where we're going to publish a message
by rain QP we're going to consume
message firestorm so little piece of
early encode is going to publish a
message into a queue called stomp and
another little piece of airline code
using yearly inclined aladin
photo/darron URL it'll be civilian code
is going to consume those messages that
goes left you wanna stomp so in this
case we would be using the remedy in
queue stomp plugin obviously and we can
do all of that feeling something
in this case pretty much just a slight
variation on a theme but they can add a
few more examples to illustrate more
stuff here so again in this country
we're publishing a message in this case
to the fanatics thing so if you remember
how fantastic scene is really cute it's
bound to the fan out exchange gets a
copy of the message so we're going to
publish my rain QP into one of the
default built-in found out exchanges
we're going to then have a plaything
consumer consuming commit exchange and
same time you can also have an early
installed consumer consuming prevent
exchange so publishing bayern can be
consuming bahrain QP and also at the
same time because the fan-out exchange
consuming buyer stop we can then go and
write a little bit of ruby code courtesy
of sinatra and type a few simple pill
commands and set up following on adding
to the previous example and HTTP
consumer so this HTTP humor again is
going to consume from the NQ fan out
exchange message was published by around
keep thee in to the fair exchange IMDb
consumerist on consumer and their HTTP
consumer will simultaneously get copies
of that same message are we doing this
one we're publishing bias stomp and HTTP
really fascinating here so further
extending our fan out example in
addition consuming this is just by
multiple protocols we can also publish
those messages by different protocols
okay so in this case we published by a
stop to the aim Keitel can exchange our
HTTP rabbit pub based consumer it's
going to do copies that message as it is
there python consumer and so forth
and just the last one here with with in
qtv and consume biased on there are you
know like I say there are some
limitations around here in terms of how
the bindings and so forth if you like
differ from one protocol to another but
the level of overlap is such that you
can do a lot of fascinating scenarios
involving multiple protocols like this
so in summary you can have lots of fun
with different plugins and different
message queuing protocols and come up
full sync sorts of fancy scenarios a lot
of the ability to do this I race through
the whole section i apologize i race
through the whole section on the boot
steps and so forth and how plugins get
hooked into the rabbit boot sequence and
so forth but the rabid EMU plug-in
architecture allows you to extend the
core functionality of rabbit in many
ways to achieve far more than you get
with the base product one of those ways
being the ability to speak multiple
messaging protocols now it's a good
piece of software as I see it before
you've got with rabbit but good
documentation have been supportive of
good management and and and other
operation holds and so forth and
everything's nice and so forth around
open standards and just to conclude and
make me feel slightly homesick put your
home and there might be some polyps
forming around any questions
Oh Abby order
what are the issues with Federation
Federation but running basically your
clusters of RabbitMQ knows so even
Federation as well yeah you know think
of this big brains problem back it up
see ya I mean as you probably know the
rabbit guys have done a lot of work to
try and minimize the impact will split
brain and I forget the names of the
mountain when you set up the cluster you
can kind of say well I don't care of bad
things happen if you detect that a bad
things happen there's like you know shut
down the nodes that are the minority
side of things and keep them dry over
here running and so forth Mel were
really perfect to be honest it's an
ongoing issue and I think it's probably
hearing a weird area swing from the
group I know that you know it's
particularly a concern as she kind of
indicated a cloud environment you know
possibly you're going across
availability zones or something like
that and certainly my experience you
know OpenStack bad things can happen
between about little concerns and
message laughs as possible so the guys
have done quite a lot to improve it is a
perfect no
on one side you actually mentioned that
posturing allows people to add cues with
other countries we're configuring the
times but that's if I okay to be on
factoring okay well this year at one
point there is which ties in also don
francisco saying to some degree i
supposes that you know when a client
connects to a broker it connects to a
broker it's a stateful connection with
amqp so let's say the broker that you
can enter to suddenly falls over and
screen the p your client needs some
mechanism to flip over to communicate
with another broker now you know that's
not necessarily a big deal but what i
would say is that some a in Cuba clients
are some really in queue clients are
better geared up for that mothers like
for example for java client you can have
a list of brokers some of the other
clients you might have to write a little
bit of code yourself decayed for that
scenario another possibility is to do
something like stick something like h a
proxy or something similar out in front
so you know what's behind the scenes in
terms of say a dozen or so brokers is a
relevant to a client it's just being
invited to a proxy but the problem
you've got dear of course is your h a
proxy suddenly becomes a single point of
failure right so yeah funny Mike
but oh good
well my mother's given this level of
flexibility in configuration and plugins
and all the sacrificing you can easily
should just something like and are they
any Claire to practice so you do decide
if you shouldn't shoot yourself in this
debate every part of your Anatomy be
honest I the thing is with with with
plugins you can you can hook right into
the bowels of rabbit right which is
probably not a good thing to do miss you
actually understand how all those bits
work now what rabbit codes did to kind
of try to discourage that so if you say
look at something like a rabbit hub
plugin which was written fairly early in
the history of remedy in queue and in
part because of some of the stuff that
needs to do it really does put right
into the balance of rabbit later
subsequent plugins what the rabbit guys
did was they trying to create some sort
of abstraction layers almost like some
API is built in forever and and you know
would encourage you to use dollars and
there's much less potential for shooting
yourself in the foot but it doesn't get
away from the fact that there's nothing
to prevent them still from going in
almost implosion life are these
practices good code good testing I mean
I would you know reiterate the point
that whilst rabbit is a mature product
there may still be differences from one
release to another that will teach me
break some plugins so if you've got plug
into the new release of rabbit comes out
don't take it grunting everything's
perfect it may not be yeah
yeah and could you show you a little bit
about what kind of transaction allottees
you mean like you know take your example
today like take a message of 1q and put
it onto another view how about and
that's a topic or for you yeah I you
know Eric's written books on transaction
processing so I won't dear go into too
much details I just get it wrong but so
remedy in queue doesn't support
transactions AXA or two phase commit
typing scenes but it does support a
comparable kind of transaction mechanism
not as sophisticated or as good but bear
in mind that's an amv thing protocols
like stomped for example don't support
that so that's another limitation where
it will try to do transactional stuff in
a multi-protocol world no yes it's
probably I think the trend if we look at
rest is moving toward transactions as
resources where we're ending up having
the program program Spanish more things
that assists worth days compared to what
what they used to when the systems were
doing more transactions so so everything
tends to potentially a trade-off and as
we go into more of the modern
environments where we have less staple
interactions get the benefits of
stateless paranoid that means the
transaction ality is something the
programmers are going to have to
more of in the past when that could have
been handled by the state poll
interactions all of those tributed to
basically protocols depended on stateful
interactions I'm get a big debate about
this in the OTS specification LG for
example because in Corbin what you
remember some of this thing in court
where you have the capability if you had
a dropped connection to reestablish it
but if you drop the connection to
reestablish it how do you know where
your transaction you have to roll it
back so when you have it introduced a
dependency between your
connection-oriented protocol in your
transactions you have some benefits but
at the same time you're introducing a
stateful a connection for that purpose
and when you eliminate that then you put
the responsibility for back on a program
or doing things like check and read
before right to make sure that the
consistency is there or doing some
logging of information so that you can
come back
resource to make sure things were done
correctly so I think it's one of those
trade-offs I think the more we look at
RabbitMQ and other mechanisms does
enablers for stateless types of
communications through messaging the
more we're going to have to think about
transactional consistencies as part of
the program's child rather the
infrastructure that's that State coming
I'm so nice to the people for creating
more work for seduction experts like our
people it is laudable no that's just an
apple all right okay thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>