<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A Trip to the New Wild Wild West with ChicagoBoss - Berner Setterwall | Coder Coacher - Coaching Coders</title><meta content="A Trip to the New Wild Wild West with ChicagoBoss - Berner Setterwall - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A Trip to the New Wild Wild West with ChicagoBoss - Berner Setterwall</b></h2><h5 class="post__date">2013-06-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eJyKC2XOuI0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you thank you all for coming to
listen to me
I'm gonna start with a quick
introduction Who am I my name is Bonnie
said well I work at companion there is
CTO or hour or something like that with
the ad click optimization for profit so
basically the small ads that you see any
time you google something we help big
advertisers such as Netflix buy this at
the prophet and I want to talk to today
about using some new kind of web big
airline experiences i guess and i
thought i was going to start with some
macro trends of the internet so i found
this paper by Kleiner Perkins or
presentation and they have this striking
picture in it so really it's it's a
concert in the 90s and 120 tens and it's
it's a vast different everybody has a
mobile phone these days and a little bit
later they had this fantastic trend line
so i think the web is changing fast and
in this kind of I don't know if trends
is the right name for this next slide
but I think there is there's a new way
you had to think if you really want to
make a nice web application these days
you had to think mobile and I was at a
kind of internet marketing conference
with we like those a lot at companion
and they were talking about mobile first
you should think of designing your web
page primarily for the mobile because
then it will work on the big screens as
well and this I think this is this is a
paradigm shift really that that I hadn't
thought about before so this was like an
eye-opener for me and then at the same
time at the conference we had just
launched this new this new kind of mass
mass market product which was growing
very very slowly but still something was
happening and it was out there and I
wanted to understand how it was
performing him then I only had my cell
phones I was like can I somehow get some
statistics into my cell phone to
understand what's happening in and I
really felt this mobile first need
myself
that was interesting and as always on
the web I think speed is paramount in
making anything basically because it's
such a boost of user experience and one
of the big big things that I had really
missed was CSS frameworks this is
something that has kind of emerged in
the last few years i think and twitter
has made an amazing one called bootstrap
and this basically helps you to have
graphical elements that work both in the
small format on the mobile phone than
the tablet and then the big screens so
this is a real kind of time saver so
anybody building web framework today I
think should should or bootstrap could
be very good place to start in order
kind of good to get this mobile first
thinking and going and this is kind of
an example of how it would look so they
had a big page and then it's resized a
little bit then the menu is kind of
compacted into this up looking menu
button and it even works in the kind of
smaller formats and then at the same
time there is a lots of action in the
JavaScript space so I found this to
illustrate this I was like ah I know
everybody knows maybe that lots of
things are happening but I wanted to go
out there and and finds a good example
so i started at this page html5 rocks
which they have a lot of examples of
kind of the full spectrum of of
different use cases for your script
these days and i found this tutorial i
thought maybe this is interesting
because we care a lot about presenting
statistics in the browser so an index DB
would be something nice and then i kept
on reading and i found this that el caso
the web sequel this was actually
deprecated so now index DB is the
this is what you should go for so I
thought nice i will i will check this
out then i scroll down to the example
and I notice it's not working and I
found here I think it's hard to read
here but this is uncle type I or
I'm here I definite cancer but it says I
can I cannot set property on complete of
nil so basically and then here I can
create the same kind of started reading
the source code and i found this index
DB obok that they were trying to set
their own complete property of and
basically it didn't have that cool back
so it has other cool bags but not that
one and then in this one on this page it
also said that you know here it says
your browser is compatible with this
tutorial so basically the tutorials
aren't even keeping up their changing
it's so fast that you know once you
publish it it's already changed again
even though it's replacing something
deprecated so there's a lot of action
and I found these pages well this was
really funny they actually it's like
some kind of its it does only works in
some kind of very bitter version of
Firefox apparently so you can't use it
but I saw that they had borrowed the
spoon spoon name and this is some kind
of lightweight Fred and they use the can
yield keyword to be able to to get
something that looks a little bit like
airline I figure they try to escape this
whole call back he'll that you usually
end up in when when you write your
script applications but there are also
kind of good interesting things that are
happening so this is for example
cumbersome and WebGL you can do
fantastic visualizations and living
games in the browser just as using pure
html5 and JavaScript and this is very
interesting of course because it kind of
changes the rules of the game and at the
same time they have been this movement
or you can or should you render your
websites on the server side or should
you try to render them in the browser
using javascript and there have been a
host of different JavaScript frameworks
out there we have been trying a few
automatic campania we tried for example
knock out together with Sam ejs switches
it's very just complicated to relate to
but then I found this graph you can see
that there
one here is actually kind of taking off
and growing faster than the online year
it's a little bit of exponential growth
there hopefully and this is the
angularjs framework so I figured this is
what I should try and with these kind of
components i had the whole front front
end in figured out and then I just
needed the back end of the front and so
to speak so this the server side of
things and this is where Chicago boss
comes in and they actually have a very
neat webpage I think to be an airline
airline project probably the best but it
hasn't always looked as well and yeah
but but see they made a good first
impression in general and they have
something some promises on the web page
as well they say that for designers they
will give server-side templates familiar
raise conventions pelas JavaScript
integration is Jason generation and
existing kind of Django NJ templating
support so this I think is very good
because it kind of broadens the audience
that they cater to and of course all
this this type of properties have have
not been so common i think in existing
airline web frameworks prior to chicago
bulls and then they have some more
promises for developers and a
synchronous i/o is something that they
tried to assure themselves as a
competitor for for node.js and they
talked about the WebSocket a long
polling support and now a bunch of other
things and even alex is missing there so
you can if you want to be really cool
you can use chicago boss
and of course they also have some
something for the admin so they claim
load ram usage they have their own kind
of messaging q4 for publishing activity
feeds and they have like an oem mapper
for airline and of course a little bit
of emailing finger as well I kind of
yesterday I was at the soundcloud
presentation and the guy was talking
about how they were trying to decouple
their gigantic rails application because
they wanted to move towards the
service-oriented architectures I'm not
and would complete a short it's actually
good idea to build in your email
services into the web service but on the
other hand airline is not Ruby so maybe
it will work better i haven't played
with it actually but i did play with
chicago bulls and anytime somebody makes
promises with the interesting question
is does it deliver and this was the
first month of operation of add greater
torque which was the project that i
implemented using chicago boasts
angularjs and so on it's not very
impressive actually it has 27 hours of
downtime so i got 19 and this is of
course a little bit less than then the
claim to fame 99 and that you always get
well round the airline and so it that
that's a little bit what I wanted to
show in the in the title that this is
this is a very kind of bleeding edge
cheap product and you should be well
aware of that with some tweaking I
actually managed to get it to two nines
the following mouth so this was nice
just roughly an hour of downtime and now
I want to kind of illustrate some of the
rough edges that you that I I run into
when when using chicago bulls i actually
met Evan Miller yesterday and we had a
shed and when I was starting to read up
on Chicago Boston try to understand how
it works there is a PDF tutorial that
kind of shows you some different aspects
of
the framework and and he was joking that
my presentation would be like the sides
of the tutorial that the offer didn't
want you to know or the secrets but this
was kind of I guess one of the most
rough edges that I ran into and it's
actually this is and I'm now doing my my
current version against the newer
version of Chicago boss and here and
they use their own kind of home homemade
escape sequel function and as soon as as
you see that kind of code you should be
a little bit suspicious because escaping
sequel queries is not always easy and it
turned out that if you start inserting
backslashes because the way they did it
was basically too bad single quotes
until it would be all quoted so because
in a single quoted string you can have
double quotes and most other things will
work out but if you start inserting
backslashes then this actually breaks
and this is used everywhere in Chicago
so this is the my signal drivers not not
all the chicago bus applications use
mysql as their back-end database but I
mean everywhere we insert an ID where
you insert the value they would do some
kind of escaping and it will pass
through here and I didn't actually
managed to get it all the way to an SQL
injection but I didn't play that much
with it as soon as you can kind of crash
the the sequel query execution for
syntax error or from an external web
request then it's kind of time to think
about how to fix it so I haven't
actually open sourced this patch I
realized yesterday scandal I don't know
not so nice at least put it out here now
but I will do so another kind of rough
edge is that it has some kind of a bunch
of pretty old appendices I think so what
I'm trying to show here is I have also
my Chicago both repository and I
checking in for the kill just grabbing
for killing the pool boy dependency and
they use a pretty old version that
actually has this exit
Kim function call which is of course
extremely not so nice if you're if
you're running to it and your processes
suddenly starts dying and the kill the
exit kill you cannot give such in in
airline is one of the few cases where
you can't really figure out what's
happening because the the process dies I
guess there are some tracing you can do
to to debug this kind of errors but it's
a lot harder at least but if I check out
head which is kind of this lower this
command is is a sorry and so the second
one here is when I have checked out the
head of pool boy and now the key thing
is gone because it's it's just not so
nice practice to use kill I think it's
the kind of a great convention but of
course they haven't upgraded to this in
Chicago boss yet so this is so I guess a
symptom of a kind of pretty small but
growing community that they cannot keep
up in the same manner as as maybe bigger
frameworks can a third rough edge was
the documentation so this is again the
tutorial and here they've show some
pretty neat functionality saw something
similar in the soundcloud presentation
yesterday as well so if you want a news
feed or some kind in reds you can do it
by having kind of an after create hook
in your active record model and then you
publish some events there they try to
implement the same thing here in Chicago
Boston this is how they show it in the
in the tutorial which which was kind of
my source of of reference when I started
using it and then little bit later they
show this is how you can do a long
polling handler basically this is this
is more or less how I guess a resource
looks in in in chicago boasts that this
controller the greeting controller
tutorial greeting controller or i guess
yeah so basically they're naming
convention for controllers which is ends
up as the edge of the end points that
you can call this application name
underscore whatever the controller is
supposed to be named underscore
controller dot l
so this one this application is called
CB underscore tutorial creating will be
part of the URL to reach this so it will
be my site chrome / creating / pool to
reach this one and if I do a get a nice
apply a lost time stamp then it will
fetch new great things that are a new
word and this time stamp and if none
exists it will kind of stop and wait
until some new greetings are pushed in
the of the great hook in the model the
problem with this one is of course that
both kind of reverse proxies like engine
X and browsers have some kind of time
out for all their connections so if you
just Navy as I did copy this code change
the names switch great things for
something else and creates this view
where supposedly just like you know the
Twitter feed and Facebook filter
whatever the new items will appear on
top and you're feeling very cool and web
two point which then the browser will
start timing out time outing there and
the connections but this doesn't
necessarily mean that she called both
close down their connection so you
actually get kind of a leaking leaking
number of processes which leads to the
stability problems I was experiencing in
the first two months so this is also
kind of a little bit rough edges in the
documentation I would say and it kind of
the one fourth lesson was that you
should really since the whole I get
semantics or of Chicago boss is is made
in a manner to try to copy rails you
should always try to think like a rails
developer and the little disclaimer I
actually haven't made the rails upside
I'm not sure I know how to think like in
rails developer but when I pretend that
I'm thinking like a rails developer then
then Chicago boss makes a lot more sense
actually and i was i was commenting this
to Devan yesterday as well I think he
agreed that
it's a good idea so for example as an
airline programmer you could think it
will be a good idea that if you if you
get a request and you want to trigger a
lot of work in the background you can
just have your supervisor and spoon some
like simple one for one supervisor
response or children on that and let it
handle its work and then everything will
be good and you replied the request and
things kind of spawned without linking
everything will be nice but this is not
really kind of how how Chicago boss is
built so so I started trying to do
something like that but it ended up with
lots of our processes being killed for
various reasons and it was not until I
introduced rabbitmq as this kind of oh I
got the request now I put it on the
message queue and finished a request
kind of pattern which is extremely
common in the in the Rubin race world of
course where they they don't have the
same parallel least William their
virtual machine I guess or if it is the
Ruby executable am so so there they I
always had to use message queues to to
kind of the fur tasks and this I think
is a pattern that you should try to
follow in chicago bulls as well and i
think the next kind of important
question to ask is does it really solve
the right problem i mean is it should we
try to reproduce rails in airline is
this the right way to go about it and
one thing that i was running into when
when doing with starting playing with
angularjs was that you have a bracket
conflict so both angularjs and django
templates and in extension chicago bulls
use this double bracket type of syntax
in their templates and this is of course
a symptom of using both client-side and
server-side templating at the same time
and this starts bringing a lot of
confusion where should i do some
templating on the server should so
there's some time click on the client
should i do all on the client but why do
I then having server-side templates then
of course I can serve everything or
almost everything
static HTML but then to energy kaga boss
and it's this opens up this whole kind
of questions or what what should I be
doing and if we kind of delegate this
question it's still pretty nice to have
the JSON endpoints like so this is the
way you generate the JSON response in
Chicago boss so so despite this kind of
templating issue it's it's a useful
framework I think there are other parts
that are very good in it but it was
actually work around as well for the
bracketing issues so basically you can
both apparently you can you can have
this kind of you can serve it solve it
on the server side but also on the
client side by kind of switching the
curly brackets 2 square brackets so this
is what i did in in angular to get it
playing nicely with which Chicago boss
server-side templating and I think that
kind of for the future there is still a
need for server-side templating as well
because of or in search engine
optimization purposes of course all the
robots are not as clever as full
browsers for efficiency reasons so they
you just want the pure HTML rendered so
for some pages like this section of the
ad grader where we basically have more
or less at pd a-- like with some
articles about advertising related
subjects then it's very nice to have the
server-side templating and just render
HTML that can be indexed very easily by
by Google and other search engines but
it's still kind of a question of when
going for this more advanced single page
JavaScript applications it's it's a
question or it should you really do when
the templating it all on the server side
another kind of area that I think is
this really like are we solving the
right problem here is of course the long
polling which is the the most visible
approach in the in the tutorial and they
have web sockets support as well and I
suppose olay do it
works out of the box but when I tried it
myself I run into a lot of crashes and I
I got so heartfelt that I started
playing with with cowboy instead and and
this is kind of my my question that is
in my mind right now is the world wide
web a place for for playing cowboys or
has Chicago boss actually contributed
something valuable to the ecosystem and
I think actually i think i think it has
i think that if you manage to get around
the quirks and quirks this is the uptime
record for dune you can at least get it
to 39 so it's it's kind of it will be a
little bit of a rough patch right listen
it was for me but now it works fairly
well and i think that the OEM matter is
actually among the ones i've seen many
of them are kind of built for sequel to
begin with and they make all these
assumptions that it's like a full sequel
you can do joins you can do sums you can
do all sorts of funny things this is
simply not true in the no sequel world
which is where most people or many
people who want to build their the web
applications today with with no sequel
back ends but Evan started out building
in this boasted be over a mapper own
Tokyo tyrant which is a no sequel
database so it has much better fit for
both no sequel and then you can kind of
fits equally into there as well even
though you don't leverage all the
features so I think this has been some
great work in I think it could possibly
be very very nice to have the same kind
of application server handling some
email log logic and activity feed logic
and kind of trying to tie it all
together and if you don't fall into the
same trap of being extremely constrained
by by having only one concurrent
requests running is the jungle Ruby and
so on frameworks have then it might
might make sense to still keep it in the
same one
so so I think I think I had I had a few
weeks and I stinky that should just
poured everything back to the cowboy and
I think like a year ago I think a
company here in Stockholm called Kira
which is some exploring our people I
guess and some other other other persons
as well they were playing a lot with
Chicago boss and then I saw a little bit
later that they had made their own kind
of lightweight frame work on top of
cowboy today I guess they would come
came to this conclusion that they should
actually try to take some other kind of
path or at least publish rapist on
github that follows the malakin a path
but I think that not all of of Chicago
boss will remains as it is today and
this is something you should count on of
course if you're building applications
on top of it but many of the parts that
are in there are really really useful
and they help bringing ere long as a
platform for web developer to invite
their audience by using the rails
conventions and and really making people
feel more familiar and also enabled
people to use some of the tools that
they're used to when developing web
pages and and then at the same time I
guess there are some magic that I don't
always feel comfortable with so i was
checking out Evan Miller's talk on the
San Francisco airline factory and he was
talking about unicode support in airline
and that they had actually had it for a
long time in Chicago boss it was like
okay and then he had this so in the OEM
Matt per day had they have this example
where you put the least you say that
content and then you take the set sign
and and then you have some kind of value
so the content belongs to the set of the
the list of values and of course the set
sign is a unicode sign that that will
generate the compile error in and i
guess or 15 and below and it says we
actually use this as a feature so i
built our own kind of rare
/ around the compiler River plug-in and
we catch these errors and then we
transform it to a list instead and
insert a custom at them and this way we
can it will be very nice for programmers
to look at but in the background we can
still make it work on in erlangen I was
like oh this this sounds a bit freaky to
me then I rather write ugly code but I
think it's very good to experiment of
course and when these kind of rough
edges are polish the way I think that
Chicago boss will constitute a very nice
web development platform and yeah that
was my talk thank you for listening
up there or well good so at the end you
end up working to cowboy with static
with single page application using
angularjs and what did you use for
database connectivity both the do
something no no no I did not Porter
cowboy I spent some weeks thinking about
it and you know feeling heartfelt oh man
really poor uptime record but it stills
upgraded org is still running chicago
bulls and now like since the uptime
graph looks a little bit more like this
and actually in the last few days
figured out that i had forgot the one
place where it didn't have a timeout for
the long polling thing since I fixed
that I think that now now the uptime
will be much better and I will not be
leaking processes suddenly currently i'm
sticking with chicago's any more
questions
alright we're bitterly but let's thank
burner</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>