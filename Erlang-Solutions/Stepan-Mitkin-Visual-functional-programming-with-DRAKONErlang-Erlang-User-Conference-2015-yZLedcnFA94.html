<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Stepan Mitkin - Visual functional programming with DRAKON-Erlang- Erlang User Conference 2015 | Coder Coacher - Coaching Coders</title><meta content="Stepan Mitkin - Visual functional programming with DRAKON-Erlang- Erlang User Conference 2015 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Stepan Mitkin - Visual functional programming with DRAKON-Erlang- Erlang User Conference 2015</b></h2><h5 class="post__date">2015-07-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yZLedcnFA94" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I hope most of you know what air lung
is right but but what is draygon draygon
is a visual language for algorithms it
is similar to flowcharts but it is
different how exactly is it special
first it is heavily optimized for easy
understanding second it has unique
features not found elsewhere in other
visual languages let me elaborate what
do I mean by optimized the original idea
of this language belongs to a famous
Dutch scientist named Edgar
dextra but the final look of this
language was produced within the Russian
space program a lot of effort has been
invested into this language and its
rules were polished in focus groups so
it's not something that I just invented
yesterday night and showing no dragon
contains many rules and they together
try to ensure that a diagram is easy to
read such rules for example no line
intersections so they take away from
this talk is please never ever do n
intersections if you draw any kind of
diagram it is why because when lines
intersect on a diagram then our brain
starts thinking do these lines actually
touch or maybe one goes on
top of another or this is something that
Dragan pay special attention to we
should not make the reader of the
diagram think the reader must
concentrate on the task they are solving
another thing is that only straight
lines are allowed no curved lines only
strictly vertical what's vertical yeah
that's vertical and horizontal ads are
allowed only right angles the reason
there is an an explanation of this
elsewhere but we don't have time for
this now the general strategy is to
reduce visual noise visual noise is
complexity that is present on a visual
scene but does not convey any useful
information what about the uniqueness
dragon has several unique features for
example right is bad the rule of common
fate silhouette and many others some of
which we will see see today so everyone
is is awesome
and Dragon is amazing and I thought
maybe I could put these two guys
together and see what comes out so I
wrote a plug-in for dragon editor that
generate source code from dragon
diagrams and we are going to see what
came out of this actually no we are we
are not because Dutch Ellwanger named
masse Martin German contacted me
and he explained it to me that you're
doing it wrong so you he wrote a better
plugin which I'm using so it's a it's a
simple game we have Drake and file and
Drake an editor produces a air long file
out of this that this Errol and what
happens after that is up to you we can
use LLC or we can use rebar or which
whichever way we want to build the
project so we don't need to to write the
whole project in Drakon airline just the
interesting parts and the complex parts
so let's let's take a look at our world
okay
demo ghost
that's a hell of world in dragon we have
several parts here first the header the
header contains the name of the diagram
it's at the top then we have the end
icon every Draken diagram has one and
exactly one and that's that's that's
rule no matter what happens inside you
end up at the same place and we have the
body of the diagram here is only one
icon in the body it's a it is called
action action contains a command to
execute in our case some l1 code that we
will run we can try to run this
beautiful function but it's not working
because it is a private function we need
to export this function to make it
visible from outside module so here's
how it works we have one dragon file and
inside this dragon file we have several
diagrams each diagram becomes a function
some of these function functions we can
export here so we add these parameters
icon to the right from the header and
the first line is public yeah and the
rest of the parameters icon is the list
of arguments to this function one
argument to line let's try running this
this one
cool it works if we if you look at this
source code we will see that this tool
generated an export statement that
contains the signature of this hello / -
function so far so good but this is too
simple this is much more complex
algorithm it contains several actions
one at a time the first thing to note
here there are no arrows how come how
come doesn't a flowchart have arrows
here's why
arrows are visual noise they attract
attention and they litter the visual
scene without giving you any useful
information but you might wonder but how
do I know which icon will execute next
with dragon the answer is obvious the
next icon is always below we don't need
any arrows because we know that first we
start here and then we go here and then
we go all the way to the bottom we don't
need to think this is a very nature of
direction of things to move in on
planets with gravity if you relax things
fall so going down is is natural there
is one element which was present on the
previous diagram but we didn't which I
didn't unfortunately mention and this is
the skewer the skewer is this central
line this metal rod that all the icons
sit on this line skewer is central to
dragon both logically and graphically
the rule of this cure says that this
cure must be vertical and straight it
does not it must not have any turns or
breaks but you might ask me do we really
need a visual language to to represent a
sequence of steps this is very basic
right so we don't need it in any any of
this yeah I agree but before we go to
that let me remind you how lines in our
lung must be ended sometimes we need to
put a full-stop sometimes we need to
pull a comma sometimes it's a semicolon
or nothing at all
well a long edit drag an editor
simplifies this so the rule is just
don't put anything except the case when
you put several lines in one I con and
here please put a comma right let's get
to some real algorithms this truncated
Dimond is called question icon this icon
contains a question that can be answered
yes for no it's an equivalent of if-else
statement in procedural languages and
this is very fundamental to algorithms
this means that the computer must make a
decision and choose the code part based
on some question and this is so much
important that the authors of Dragon
decided that it must always be explicit
everyone is a rich language we can
actually have we can actually
um hide the branching into several
language tricks for example we can have
overloaded versions of a function that
would have that would use pattern
matching to figure out which function to
invoke this is elegant and and and some
some will find it beautiful but the
negative part is that it's a decision
that must be made and it is hidden
hiding important stuff makes not only
pain it makes headache Dragan makes
important stuff explicit and visible I
could also mention some small things
here for example in Dragan words true
and false are not allowed here only yes
and no why because true and false are
not intuitive they are of course they
sound scientific but they are not the
first words that a child learns so
please use yes and no another thing this
diamond is not a full diamond like in
for charts it's a babbler diamond to
save diagram space last but not least
the rule right is worse so it's easy to
remember right a right is bad left is
good in Dragon this question icon has
two exits but it is two exits are not
the same
the exit that leads down is the good one
and the one that goes to the right it is
the bad one this way Dracon allows us to
represent the happy part through a
diagram the happy part or as in the
Russian IT tradition they would call it
the road of the King must be placed on
the skewer
sometimes the king is not interested in
all the dirty details like corner cases
or error handling or some complications
he only wants to see the most probable
or most desirable but through the
algorithm and then skip all the rest
here is the happy part and here is a
less desirable scenario in this specific
diagram we we are trying to log on we
check the password first and if the
password is correct then we proceed with
the logon procedure and we attach the
session if not we deny access to the
user we do not build our websites to
deny access right we bill them to to
give good stuff to people that's why we
consider this code part bad this is why
we put it on the right let's take a look
at a more elaborate example this is the
algorithm of solving a quadratic
equation the first thing that we do
about so how does it work it accepts the
coefficients ABC and returns the roots
if any the first thing that we must do
is to check whether this equation is
actually quadratic
if not we return immediately we return
an error but the happy part goes like
this first we calculate the discriminant
then we compare it to zero
if it is a positive number then we
calculate the roots and we return them
so that's the main part but the
discriminant might be it might be equal
to zero then we have only only one root
and we return it or even worse the
discriminant might be negative then we
don't have real roots only imaginary so
we return in this implement implemented
as an error so that was related to the
rule right is worse the further to the
right the worse it is there is another
thing which actually Allah I like even
more it's the rule common fate common
fate is a term that comes from
psychology but I'm not a psychologist so
I do not understand what it means
they're here in Dragan common fate means
that if we have the same action that we
need to perform in several code paths
but we need to do that a little bit
differently then we should put it on the
same horizontal here is the calculation
here this similar action is the
calculation of of the roots these
horizontal lines they they give visual
guidance to the reader without littering
the diagram with any additional elements
like these thick green lines I just put
them to to explain this
not all questions can be answered yes
and now some questions might have
several answers for this scenario Dragan
has the macro icon select slash case 1
select icon and several case icons here
is dazed select icon does the rule word
right is worse apply here yes it does
but sometimes especially when we compare
two constants like here they are
emotionally similar they're not much
worse or better than others then it is
advised to introduce order through
arranging the case icons from small to
be from slow to fast from high too deep
and you get the idea the worst the
rightmost case icon is empty it means
that all other values let me demonstrate
this superior algorithm in action it
converts a number which is expected to
be an end to it to textual
representation
zero becomes zero it works if I take a
sufficiently large number I get its
string representation in English but we
don't need to stick to constants in air
lung
we have pattern matching which is a very
power powerful tool which allows us
allows us to break up complex terms and
bind variables while making decisions at
the same time here we have it here the
result variable is first compared to the
item okay and if so this action is
executed if it's not okay then we try to
disassemble it into this double error
and message and then this message
variable gets bound just like we are
used to in in normal airline
now we are getting to the real stuff all
the diagrams that we have seen so far
belong to the type primitive primitive
is the simplest form of Dracon diagrams
and it is excellent it is an excellent
fit for hello world programs but
unfortunately the real world is not
always hello world in the real world we
have complexity and we have a lot of it
for complex things dragon has this
special kind of diagram called
silhouette
silhouette divides a complex complex
task into several logical parts another
use of silhouette is state machines but
let us concentrate on the normal usual
algorithms simple functions a quick sort
sorry I'm reading from this group I see
wet answers the three questions of the
King first what is the name of the
problem we are solving second how many
parts does the problem have and third
what are the names of the problems after
that the King goes away because he has
important things to do but we developers
are left with the details what is the
name of the problem its quick sort
it's a sorting algorithm ok great how
many parts does it have four makes sense
what are the names of the parts
well first we analyze the input what we
have and then we partition the input
list after that we recursively sorted
and then return what we have ok I got it
and then the King goes away and we stay
and we then drill down into each of the
branches and we trying to and we try to
figure them out
the top of the branch is the head is the
branch header it contains it contains
the name of the branch the bottom of the
branch is the address it is the name of
the next branch to execute so here we
analyze our input if the list which is
one of the arguments if it is empty then
we just go to exit and return it because
we consider an empty list already sorted
but if for some reason this list
contains elements we need to perform
some actual work so we go to the branch
called partition and here we here we go
we select a private pretty arbitrarily I
would say then we build a lambda and
then we just partition the input list
using this lambda after that we
recursively yeah the bottom icon is
recurse which makes us jump to the
branch called recurs and here we
recursively apply this algorithm to
these sub lists and we combined them
together and in the end we end up in the
in the same very place returned it the
same thing this bundle Dracon and ere
long they work surprisingly well
because Erlang is very smart I mean the
compiler is very smart at finding
variables that are not used that are not
initialized so you're not going to get
lost along will will save you here
we are of course supposed to use OTP but
sometimes sometimes we really want this
nasty receive keyword which makes the
current process to wait for an incoming
message and we then wait then and we
wait until something comes in there is a
way to to put it using a dragon airline
just just type in this receive keyword
into the Select icon and then we can do
what we are used to do with it we can
pattern match and we can also set edit
setup timeout after which a delay after
which this branch will will fire I mean
this after keyword it must be the
rightmost case icon so this this
received statement will make the
function exit if we get the stop item
and it will make the function recurs
otherwise if it's if the if the message
has a specific structure then we will
print it out and if not it will just say
unknown we create a new process using
this function
and we can send messages if we send just
something it says unknown if we send say
message Stockholm
I like Stockholm when I gave this talk
in Oslo one month ago only four people
showed up and now I have yeah the
function displays this as Stockholm
string but when we set stop it exits so
these were these were simple algorithms
let's get to state machines another use
of drake and state machines what is what
is so unique about Drake and state
machines
Drake and in fact is can be seen as a
combination of state machine diagrams
and decision trees in other words it
shows where is it yes here it is in
other words it shows both the states and
the logic behind them here we have we
have a state machine that has three
states
it actually has four we see this final
branch but this is this is a problem
with the dragon editor it insists that
we have this last and branch state
machines they can sum some state
machines can execute forever because
this is a specific feature of control
algorithms they execute forever they
never end each branch of the silhouette
represents a state
and the first icon after the header is
receive statement which I swear it will
not get translated into actual receive
keyword it will generate proper OTP code
for you so don't worry it's just a
convention then after after that we
switch based on which message we have
received and in the end we specify which
state will be the next one and there is
there is some really important value in
this that we have all the state machine
on the same visual scene there is very
there is no over a little of yoyo
problem when we have to switch between
several files to figure out how the
thing works and since we have both the
states and the transition logic we can
visualize all the relevant combinations
of states and messages and not miss
anything out
yeah that's the source code of this one
so there could be some so this is a
state machine that models a code lock
you come up to to your office you type
in the code and then if the code is
correct the log gets unlocked and you
get in Oh
even though this sounds pretty simple in
the real life there could be some some
events that the designer might oversee
for example if we start typing and then
we walk away what happens then here we
have the state opening if instead of a
keystroke or a cancel button we get a
timeout we transfer the machine into the
locked state so we'll lock the machine
instead so that was state machine
business last but not least what do we
have here since since I had this visual
editing engine I decided to do one more
thing this is not a dragon but still it
helps at least me it is super vision
trees
I find it tedious to edit multiple files
even though these multiple supervisor
source code files even though they
represent the same entity this tree I
need to switch between them and the
syntax is son well it's it can be tricky
even of course we are all used to it so
it's not a problem for most of us so
yeah I added this little thing so that
that was that was it are there any
questions
how feasible is it to build larger
real-life systems in Drakon I I know
that it's used in in aerospace but can
you give us some sense of how large
applications you can build with us this
is an interesting question the large of
the first Dracon application I do not do
not know its size but it's the famous
run a spacecraft it it is a space
shuttle that would lead liftoff go to
space go to orbit then do reentry and
airplane type landing all automatically
so that was yeah the first it was as
complex as hell this is what the
developers say so
they did it in 1988 and our American
colleagues they wanted to reproduce it
took them 16 years to catch up and yeah
by the way the dragon editor is written
in Dragon so so it works yes I think
you're struggling to trying to explain
something to you aliy the IDE you've
been writing a Lang statements in there
but that's not what most people do
so what other languages do they insert
into the dragon they insert plain
English or plain other language I mean
specifications and descriptions of
algorithms another major use of this
dragon notation is medical algorithms so
they don't typically write then C code
ADA or anything like that they're just
using this as a IDE to generate UML it's
from a design perspective or does Dre
can develop its own source code I do not
understand the question sorry well well
so I I'm how did what do you end up
compiling your Drake and stuff - Oh
dragon
editor outputs source code for air Lang
or for C or for C hash or Java or
whatever language you choose okay so
people would write in there they would
write their C code okay so yeah so any
particular you would make a project
decision to use one or a couple of
different languages as part of the your
project and Dracon provides a rigorous I
think we got that a rigorous schema for
how to design the things so that a team
of people can work on them but each of
the individuals will be writing
something that looks like Java code or C
code inside of it when they push the
compile button yes right it's it's
actual airline code inside this box
we understand that right but we're
trying to get a scent I think the people
here are trying to get a sense of what
people until you turned up and did the
airline code in there other people have
been using the Drake and architecture
without Elling we're just trying to get
a historical perspective of what they've
done and how many people use this and
how big the projects are it's not used
very widely
initially it was used for specifications
for this spacecraft control software but
currently it is it is growing and people
start accepting it but surprisingly in
in in healthcare
yeah I don't take my credit we're not
trying to be critical we're just trying
to reach understanding and we're missing
I think we're missing a whole bunch of
information Thanks thank you very much
I had a specific question that I guess
follows up from from what was going on
earlier on I guess one thing that that
perhaps one needs in a language like
this is some form of abstraction or
hierarchy so is there any way that you
can you can abstract over a diagram to
make that into a single node in the or
can you name can you name a diagram and
and parameterize it for example because
those are the things that allow one to
build a bigger system in a in a way that
it's not completely flat but it supports
hierarchy does it does Drakon give you
parameterization abstraction of any form
or hierarchy or will is it simply just a
big is it simply a big flat diagram well
it is a it is a big flat diagram right
except for silhouette which contains
branches so that's it okay thank you
there is also a gentleman who raised his
hand first yeah this is you know very
very interesting and I do remember back
in the 90s reading about the be bad but
just one quick question how would you
represent recursion using Dracon this is
painful question let me show you
recursion is is very important for
functional languages so the recursion
must jump out at the reader which is not
happening with the current IDs
unfortunately so here is an example of
recursion we have some function that
recursively what it does it it splits
the list into tokens so let's go I just
put a comment here it recurs don't
forget yes right yeah exactly
maybe we should put some color here
something
yes the question of the question was if
I could take source code and generate a
flow chart out of it a dragon chart not
yet but many people want it and this
this is this needs to be done this is a
question about syntax in the diagram
about the door you had open which was
shaded at the top and the one which was
not shade these black triangles yeah
it's it's a it's an indication that we
are referring to the same to the same
branch so it's it's a visual aid so the
opening on the left hand side does not
refer to the same opening as they
further there the open where so at the
bottom you've got the opening notes what
a shaded one is not yes because the left
one is a reference to another so here
this one yep points at this branch okay
but these points at the same branch
that's okay
any other question oh well thank you sir
phone thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>