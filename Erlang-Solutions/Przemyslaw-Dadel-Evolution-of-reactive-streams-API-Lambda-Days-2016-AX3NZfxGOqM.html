<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Przemyslaw Dadel - Evolution of reactive streams API (...) (Lambda Days 2016) | Coder Coacher - Coaching Coders</title><meta content="Przemyslaw Dadel - Evolution of reactive streams API (...) (Lambda Days 2016) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Przemyslaw Dadel - Evolution of reactive streams API (...) (Lambda Days 2016)</b></h2><h5 class="post__date">2016-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AX3NZfxGOqM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">just to start the presentation let me
see
text I
gone I'm mostly interested in mobile
devices and how to efficiently deliver
services to mobile devices and but most
important how to deliver services my
knowledge / mobile devices I have
disliked percula a tendency to treat a
mobile like another component in our
software architecture that we actually
can run software some services on it and
get some feedback some execution and
when we talk about mobile devices
context awareness comes close to to to
these topics but I have a reactive
streams in the subject of my
presentation so i'm pretty sure that
most of you are familiar with directive
streams concept we just popular among
car like this functional conferences
added to my best knowledge this reactive
streaming originated from the graphical
you are systems that were used to
describe how the user events propagate
in the in the system but contemporary
understanding is that it's a way of
describing a synchronous communication
in the distributed system so basically
at its core we have a publisher and the
subscriber and publisher produce data
and consumer and so our subscriber would
like to efficiently and at its own pace
consume the data so there is some
feedback loop that subscriber specifies
the demand so as it's like highlighted
is a for governing exchange of a
synchronous boundary something the
subscriber is not forced to buffer data
and yeah it's pretty natural when we
design and build a distributed system we
have like message queues some notes some
pieces of architecture but when I
started building software for mobile so
I came across okay just also to describe
the two active team API so what's what
it does consist of we have a publisher
it's pretty natural are we have a
subscriber and we have a subscription
and we
can see that this subscribers pretty
like all all everything callback methods
hear that subscribe is not fight after
subscription is active next element are
delivered then there is an error on the
stream of the stream is complete and the
important element is the this request
method on a subscription that is used by
a subscriber to provide the feedback but
in the mobile world let's imagine some
imaginary service that will deliver you
feed the data for example you have an
application that gives you hints where
you could go why you traverse the city
what are the restaurants pubs places you
could go and here we have a server and
our vintage mobile phone running android
android 10 probably here and this phone
is requesting for a stream of data is
specifying the demand and getting back
data but it does one little thing about
this okay this phone has a limited data
plan it doesn't it cannot consume like
arbitrary amount of data because it will
cost a user money actually and the
second thing okay please give me more
data but okay I have very low battery
here and and it's probably this data
should be somehow adapted to the context
of the reception and the second thing
okay it's very hot outside so actually
mobile phone can give the screen that
it's hot that probably should prioritize
on the list of the places to go and
place you could have called bureau ice
creams so so so so that's the cases we
we come I came across so actually what I
wanted you to compare subscriber this
mobile tune and nonverbal subscriber
frankly speaking one could say that okay
we should treat our software components
uniform me but there are some apparent
differences between those two systems
and one is that for the mobile you can
know more by stuff you can say that we
have more or less stable power supply
and we have like more or less stable
network connectivity and our resources
are dedicated to the server running
a server application running on the
server and we have more or less like
stable look what's the word outside okay
the destroyer go right with nothing
allowed to see I put an asterisk
everywhere because you know things
happen but for the mobile it's very
apparent that we have limited source
power that changes the our network
connectivity changes our resources are
often more allocated to different
learning tasks now to the back end task
and if you would like to use mobile
devices as a service execution unit it
can have some impact on that and then
mobile you can actually give you some
feedback on our context okay what's
what's the word outside and to just to
set my point I'm focusing on the system
while the context awarenesses and
inherent complexity so we are building
an application where without the context
this application not make sense or we
have very limited capabilities so so it
strictly for that and one application I
built in mind for I actually I started
with this application and the concept of
this enhance reactive stream came from
it I built a platform called social
computing and it's used to run some
computational tasks on mobile devices
our mobile devices are have this very
limited capabilities like eight cores 4
gigahertz 2 gigahertz processor as a lot
of arms right so actually what we have
currently in a mobile phone is small as
what we have a couple years ago in our
in our like powerful great computing
servers and what I'm like are granting
my users that I will only execute the
task when they are changing their phones
and they are on Wi-Fi because I think
nobody would like to contribute the
phone and it would drain battery and
like make consume the data plan so I'm
using the mobile devices computational
service and in terms
of the reactive stream the running
device forms like a long-running
subscription for a task stream and
device probably would like to get past
information about what's the in what
state the device is meaning quite for
example what is the battery level what
is the network or what is the memory
consumption and so on and then publisher
could kindly deliver the tasks if there
are such tasks needed folded and what we
notice that in our active streams that
are as I highlighted at the beginning
are all about back pressure so that
subscriber can be back pressure but this
back pressure is quantitative so we
specified that i would like to process
and more alignments but what I notice in
the application I'm developing the
concept I'm developing I would like also
to have qualitative back pressure so not
only how the amount volume of data but
also the quality the properties of data
that should be delivered so I came with
a simple like extension okay if we want
to pass this context data so let's pass
the past context with the request it's
pretty simple but it gives a lot of
powerful option to the publisher
actually to consume this data it's up to
very useful specific okay what about how
in what application we are developing
but in our case we probably publisher
will like trim the data between the task
to the size of that the mobile device
can consume in the within reasonable
time but if we add something to the API
we need to think about consequences of
it so it is it sufficient only have a
context we have context-aware stream we
are passing context and then is it
enough and as I stated future eyes area
mobile components are like sort of
different they are very fragile body
definition so when you are building as
software component software from
components that actually came by design
go on and off just can get out of signal
lose connectivity somebody can restart
them and so on so when a mobile devices
subscribe to a stream server delivers
data at some point of time is strictly a
synchronous communication and there can
be lag between because server resources
can be occupied and the maybe not data
at some point of time but if this point
in this period of time gets long at some
point of time this context information
actually becomes misleading so okay five
minutes ago I was connected to the
battery plug the network black but now
who knows right so so so its context is
including in is causing some sort of
like mess here so reactive streams are
very explicit API so there's when there
is an error on the stream there's
explicit method to tell you that the
narrow so nothing is hiding there and
everything I think with this concept
should be handled explicitly by the user
so what I added to this API is also a
method that will allow the programmer
explicitly handle this information so
the subscriber can react to the expert
content context so as a subscriber I
give my demand I give my context but if
this context is not used over a period
of time the subscriber who will be
notified of that and the subscriber will
be able to react just provide an account
context if it's still able to process
the data more and finally the context
has a defined value period but EDD
period so yeah so how much the publisher
can rely on this context the question is
could I go different way why this
approach so one way if we have
application that can give us we need
various like various level of quality of
stream right
you could have actually our publisher we
could have various publisher for various
requirements and the mobile phone mobile
device mobile application could select
the streams on demand and another thing
we do we could have like have another
channel for communicating this context
information as like a additional like a
synchronous communication bump but the
one thing is if you want to answer the
question for that think about actually
how what is the life cycle of the mobile
application actually do we have like
everywhere on mobile application and
just to give you handy i'm implementing
in on an android system i'm not sure if
it's it I for iOS the same but actually
we when we have an Android application
we don't have like a google OS process
or thread but we have abstraction of
activities there that can be passivated
and activated by the run time as needed
so actually and what would be the right
frequency to actually send this update
if if it's we should select the stream
or pass this context information what
should be the rate of the update and
when the device should make this
decision to actually update the context
and the diviner question is which
results this case better an app mobile
site or a server side so if we want to
add additional responsibilities to their
mobile device is it actually what we
want to do because it will consume our
battery and mobile resources so my basic
design assumption is that you don't want
this mobile application mobile services
be active that I want to beat them to be
as positive as possible so they will
only react to to to this subscriber
methods so the demonic component will
not do anything on its own it will
specify a demand and when this demand is
satisfied the context aspired the stream
has ended it will only take actions and
I think it's very explicit model for
communicated because it takes a lot of
responsibility from the mobile client
implementations here and like bear in
mind that back and have very huge
battery right our service and they scary
easier and usually when we deploy such
platform we have more control as a
system owners of a like a back-end
servers and mobile phones running ah
yeah one could say I burger stand out
there is a dis reactive string API is
pretty nice concept it's such a
beautiful thing and I added like one
method that's sort of like break this
concept I I you may have a feeling that
often we very active stream streams you
do composition operation like transform
filter map as discover gather operations
and the question is whether it's
possible to do that here because this
context smells like a state in our
application and for the thing I broke
the standard I don't think I'm broking
the standard because the concept is
frankly speaking more general than
reactive streams if we leave this on the
context by method empty and have context
that is actually empty we come back to a
good a very active sim API so so this
way I could like the classic reactive
stream API excuse my concept but the
question is whether whether this concept
this API would be useful with the same
method and frankly speaking I'm not sure
and I don't have exact a question for
that exact answer for that I have some
suggestions right and the most important
things I want in there are applications
I'm building that this context should be
propagated across the network so that's
the most important part the disk this a
synchronous boundary and
and it's where the contexts relevant so
so we have a context a web application
and publisher and then should be a
context it should be context propagated
for the subscription part subscriber
part I know you like to eat the code on
the slides is very like readable right
so but to like let you explain we can
always like narrow the context of a
subscription to the non context-aware
subscription it's it's the publisher
object that is on the boundary of this
asynchronous communication can enrich
the the request with the computer
operation and the rest of the
application can can use the regular
active stream stuff and fold the
publishing API frankly speaking
publisher API doesn't say anything about
this transformative functional operation
and so on it's where the RX java custom
other debt but probably you would like
to have something similar and my my
basic assumption is that the context
should be propagated the point that it's
understandable so does some operation
like map that should could sort of
ignore this concept but like it is fun
in the file found out operation that
marriages or speech the streams is
something that probably should be
enriched with some context merging and
so but my question is whether we
actually will need this because the
publisher is like abstraction what's how
this back-end is producing the data and
to me in this case for the perspective
of the mobile clients is like an
implementation detail here but it's
probably something I will work on in the
future okay just to summarize context
awareness context awareness is in this
application in please inherent
complexity or and what I try to modify
it is an accidental complexity so I
would like the mobile client developer
or this mobile service developer to have
a simple communication channel that that
really
press the the intent of the
communication well and I want a mobile
devices to stay positive because I if I
want users to contribute to my platform
I would like to give them guarantees
that i will not abuse their phones and
in our design we anticipate actually
that our components will be going on and
off and we shift a lot of
responsibilities to the server because
it's where we have the most control and
like three other things I learned on my
design just to sell with you okay every
abstraction will always leak I right we
will find the way that okay this active
stream APN doesn't match it but it's not
something we should always try to like
implement and refine your API we really
need to have a strong reason for that
because and when we have an I API fall
like compiled into some binary
implementation library we can import in
our project it gives our our
implementation and some sort of safety
that we are at having to a standard so
so it's a when you think of abstractions
try to like form them into API and and
and test them so that actually they
satisfy the requirement but but it's not
likely you should implement API everyday
for yourself and for Android OS
processes model it's very different what
we could expect from the linux server i
try to implement this reactive stream
concept Ribery for communicating with
android phones i did it using google
cloud messaging for for those who are
interested but it's like actually we
cannot expect that this application is
life all the time so you need to be
hacked around a bit and I a PFI man
should be bottom up so when you start
want to improve your IP I you should
probably is that we've use cases and and
and how it can be used okay thank you so</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>