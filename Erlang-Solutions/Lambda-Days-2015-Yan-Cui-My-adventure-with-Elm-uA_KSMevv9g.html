<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lambda Days 2015 - Yan Cui - My adventure with Elm | Coder Coacher - Coaching Coders</title><meta content="Lambda Days 2015 - Yan Cui - My adventure with Elm - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lambda Days 2015 - Yan Cui - My adventure with Elm</b></h2><h5 class="post__date">2015-03-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uA_KSMevv9g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone thank you for coming to my
talk on elm and I know it's been a long
two days and I hope you still have some
times listen to me talk about and then I
guess you can go to the parties
afterwards and so for today's start
we're going to quickly gentle and gentle
introduce elm and the functional
reactive paradigm and then we're going
to look at the some of the basic syntax
at home and some of the language
features you can expect we're going to
finish the talk with little quick demo
implementing a very simple game of snake
we film from scratch my name is Yeshua
and I often go about your non alias of
the burning monk because the love
education machine I work for a company
called games this and you're based in
London and we are one of the market
leaders in the real money gaming
business but my team we focus all on the
freemium model games for social dians so
the kind of games you find on facebook
and on mobile and I build backends for
those kind of games so I feel number
backend for our games already and today
I think across all of our games you have
just under a million daily active users
so the scribe your traffic on the back
end before I start to tell you that I'm
not an expert now so and no amount of
Sochi of the team that's behind the
language what you were here is going to
be my personal views and experiences
have you spent some time with play man
with elm in mountain time if ever heard
about it before it's a very young
language spear on top of the hospital
platform it describes itself as the
functional reactive language for
interactive applications which it sounds
pretty cool but you might ask what how
is smashing reactive programming right
I've asked a lot of people people this
question but the best answer I found so
far is to think about it as having value
over time so as if you capture the time
axis in your data structure when so that
you have a complete history of all the
values that some stay has taken through
time and analysis call signal and in
other word think about it is if you kept
your state using a camera that a lot of
things could have happened to the
whatever stadia turns to observe in
between you asking hey what's your value
now so you'll have a point in time
snapshots of someone so you have no idea
how water white turn the
to Heisenberg but if on the other hand
you've got a video camera then you can
capture the full history of state
changes for something that observing and
you end up with five glorious seasons of
breaking bad that should be on
everybody's bucket list and of course
you can't really talk about reactive
programming without talking about this
man here Eric Meyer not just because of
his famous colorful shirt but because
he's the guy who created reactive
extensions who's a peer has been adopted
by many different languages and the very
recent Turkic he gave a code the end of
the oddity Eric's closing remark was and
i quote reactive is dead long live
composted side effects well as screw
Mirza may sound if you watch a talk Eric
wasn't trying to kill reactive
programming or X or the matter what he
was doing was trying to point out the
fact that the term reactive programming
is Sir be so poorly defined a
misunderstood that is becomes nothing
for poisoned chalice and if you look at
Wikipedia definition for reactive
programming well it basically says that
reactive programming came in just about
anything and more recently you've got
the reactive manifesto which I feel is
great for people to start talking about
some very interesting properties of
systems that we should be building today
by the same time you also broaden the
scope of what it means to be reactive to
include a whole bunch of well my best
description would be buzzwords and so i
guess wikipedia was right after all that
the reactive programming test just mean
about anything so as Eric said since we
don't really know what reactive program
means anymore let's just focus on the
things that are important here which is
how do we manage state and how do we
compose side effect in a way that we
allow us to understand them and reason
with them which brings me to oppose that
Dave Thomas Rowe a while back after he
spent some time you feel ixr which is
you who don't know is language built on
top of the Earl nvm he said that one
thing I'm discovering is that
transforming data is easier to think
about the maintenance state which is
very key difference between imperative
and functional style of cold we're in
the imperative world to stay in your
application they are
mutated in place so with this approach
when it comes to composing side effects
is obviously doesn't scale well because
you have to have this mental model all
the time of where and when face you're
going to change can occur and you have
to carefully coordinate them in a timely
and orderly fashion in order to get
ultimately the desired result you want
on your application which I think
partially explains our reliance on
debugging tools to help us just make
sense of what our code is doing you put
in when we run it this is because we
just can't reason bar with our code by
looking at them we actually say that we
don't understand or we can't predict
with any degree of confidence what our
code is going to do it's going to do
exactly when we run it which is a big
problem considering the kind of the kind
of application that we're building these
days that getting bigger more complex
even more and more people working
collaboratively in an insider team and
from a psychology point of view and
keynote this morning we know that our
human blood even man is really quite
primitive we can only keep a very small
handful of things in a head at a time in
an active memory which is required for
just about any cognitive function so
it's easy to see why it's easy for us
what were we can quickly we lose the
ability to understand what our creation
or code is doing but we need to manage
all these different side effects in this
way so you take a very trivial game of
pong as example i was playing mark with
hacks with a while because we run this
report of the game jams and my body
wants to use to the next one hacked or
I'll look at it and if this open FL
frame what they've got I found some
tutorials on how to do this pong game
and just for brevity's sake because I
look at the code that allows the player
to control this bar up and down using
the up and down keys you start with some
having some local variable to track when
those keys are pressed and the state of
the of the bars which in this case is
called platforms in this tutorial you
listen to the ski down events and you
set the boolean value to true when the
corresponding keys are pressed you do
the reverse when the keys are released
and then in your jaw loop which is
called active all times a second
depending on your frame rate we adjust
the
the Y value on the past based on the
value of this boolean and there's also a
subtle race condition here but given the
high enough frame where you probably
know go notice in practice we also need
to make sure that the past is on screen
so we have the capital the range of
values that you can take and whenever
locate and where we've colitis this is
kind of mental model I built in my head
and you know to help me understand what
it's doing so to get the desire I want
in order to know having to let any pair
controller part we have to manage
different bits of our state and encoded
them using a different event handlers
and the changes that we're making those
event handlers they have other knock-on
effects on other parts of our state so
to get to the end what I want to do I
have to depend on a series of side
effects which have which implicitly
depends upon other side effects haven't
happened earlier in time and when I look
like one of my work stuff like this I
just feel like a puppeteer I don't feel
like engineer or because I feel of what
i'm doing is i'm doing the careful
manipulation of states and side effects
and no chinese trying to fit all that
pulling different strings and pulling
them together with the desire one
hopefully that everything all these
things are happening eventually the note
they lead to whatever these damn trying
to do the first place does the law of
mental effort goes into this place going
to this kind of work and you know if
you're a puppeteer and you can manage
your mode and a few puppies at the same
time you're probably a rock star in
their world but really that's a small
fry in software engineering considering
the sort of thing so we have to manage
in even to build a trivial application
in functional programming on the other
hand we focus on transformations instead
of updating stay in place functions they
did provide mapping from 0 state to new
state and they easily think about
because it allows you to decompose
bigger problems into smaller independent
pieces that are easier to tackle on
their own when you don't have to think
about or worry about other pol changing
the state from under your feet whilst
you are solving your particular power of
your piece of the puzzle you can then
combine all your composure only results
together and if every part behaves
correctly then the whole she also behave
clearly as well
so with that let's apply the same
reasoning to reactive programming you
see how we can implement the same
example earlier using elm and this is
SID so straight away you can see that's
a much smaller code base that fittings
are into our mind I can only keep a very
small number of things and that we
define what the state of that platform
looks like and we say okay with the
default platform starts with X being 5y
equals 0 and with sample keyboar ROP as
the input which gives us ultimately a
series or x and y values at the rate of
20 frames per second and then we create
a signal of perform states from those
input starting with the default platform
state and for every input we decide
where the news that looks like based on
the current state by cloning the current
state and assigning a new y value based
on the current y value and of course we
have the capital range between 5 and 36
395 just to be consistent with our
earlier example don't worry about syntax
so so far it looks weird actually I
forgot to ask how many of you guys work
with function languages are no like
Haskell for example okay quite a lot of
people so Alice based on huskers or
syntax why's he looks very much like
Haskell and for me the shift to
transformations and compositions is in
so functional style allows to think
about the behavior of recurring in a way
that's much easier to understand and
once the i-x bacon jas start and elm do
you have the same concept of observable
sequence of values they have different
names them which confusing but also they
have slightly different semantics around
whether now this observable values are
infinite and you'd be able to create and
compose them dynamically at runtime so
you can find a bit more advanced sub
Liske who's the one of the creators of
elm he gave a really good to last year
at the strange group and cover the
different categories of frp in love
detail so there's a link in the bottom
there I do encourage you to go and watch
the talk afterwards another inspiration
behind Elm is Brett victor specifically
he's inventing on
principles talk from 2012 where he
started by a very calmly saying ideas
are very dear to me and he just
proceeded to blow everybody's mind
everybody who's walking was at there at
the time and you know who's ever water
talk ever since with his Mario demo oh I
don't have some actually I do have sound
so this works by life is the girl you
get white block me they got something
there and probably saw so that looks
like that the problem is I don't want
their be able to get up there yet I'm up
there to pump up the girls and go
through this little faster and I could
go round and solve puzzles or not come
back it's art so the turtles to don t
white now now if i can just turn that
down on the boat and now i can try it
enough about me not and so what's nice
second cup it just go to wallets running
said happy to stop it Reba pile by place
again I can immediately see for a seat
well they're not done so here's limited
I'm going to dump on the girl pause the
game but complicated and now there's a
sweater at error which let's be required
for lunch
and now we wanted to that before a beta
jump and change the code make less
bounce it now when I move it over to
similar for using the scene in clinical
States book romantic for this before
this is not good enough I think they
will see changes he if I need to be able
to see immediately whether or not by
mountains right none of us up and give
across this time and you want to see
change them nearly you have to that time
to face so here's what if we did they
bounced off my girl all together now hit
this button here which was my guy
straight so now I can see where he's
been I'm gonna rewind this railing
content is where he's going to be this
is his future and when I change the code
that changes future but can find exactly
the value I need that when I hit play
useful predictor city he's amazing go
and find his talks he's goes by the
alias of worried dreams and his scar
lots of different talks on his website
they are just my employee so brass /
series on shorting this feedback loop
between having an idea and being see it
in action and his workers inspire a lot
a lot of people including Khan Academy's
online environment for kids to learn the
program as well as like table for
closure and of course Elms on very very
long time traveling debugger which is
not taken right our best book where you
can stop the game every time running the
the debugger is keeping just keeping
track of the event so you can change the
values you can see but the different
state of the Mario as of right through
time by dragging the bar turn the one
you don't they have broken this
debugging environment slightly since the
last major release but there hopefully
they will fix it pretty soon in this
performance of not done in benchmark
myself so I can't really say with any
degree of confidence how performance Elm
is so I can only go by the numbers that
the ungass is published
so take it for way is but based on their
numbers is way up there we have some of
the best the frameworks out there like
the home and Mercury this what to do for
simple to do MVC so that's some high
level overview of elm and the functional
reactive programming now let's have a
look at some simple syntax this is how
you define a function in L function name
parameters from your body's pretty
straightforward you can optionally
specify type signature for your function
and when you need in the media variables
so you can use the ladies syntax where
you define the things that you want to
use in the left block and use them in
the in block there's no explicit return
keyword the last the last expression
yours in your function give you the
return value for your function it has
support for carrying and if you've got
function text multiple arguments you can
create new functions from that by
prefixing the earlier arguments so
that's exactly what you expect all of
Elms functions that defined this way so
you can carry them and we see later on
how using currying and pipes allow you
to write code well Nestle function call
in a much more intuitive way this how
you define a lambda or anonymous
function in Elm which looks just like
Haskell in this case we can just shorten
this lambda into this by using the
multiplier as a function that takes two
arguments and prefix the first argument
with 2 we should often find this kind of
code no means quite nice when you seen
small portions it's got tapos nothing
fancy there you can also create a post
using the comma operator as a function
that takes the appropriate number of
elements or arguments is Scott record
which you've ever seen before it's just
a very lightweight and labeled data
structure you can access a fuse by usage
by using dot and followed by the name of
the field you can alternatively assess
the field the value of the fuse using
dot fill name as a function records are
immutable but we saw earlier how you can
take a clone of some record and update
some of the values for the for the clone
to a new value which is in this case
what we're doing here
unlike in f-sharp and Earl and some
other languages you don't have to define
types for your records of front so in
this English case they behave like a
property pack but is usually good
practice to create type aliases for your
record so that you can reference them
later on it gives you better static
guarantees as well and I almost like
this concept of an extensible record
which is generally recommended over
regular ones because they tend to make
your coded depending on them a more
reusable the way well you can read this
as we've got a Thai videos for an
extensible record code name which has to
define a field called the name and which
has a type of string you can nest them
using these syntax which we send okay
we've got the empty record as our base
which can be any other record you define
and extend it with whatever I define the
page and then further extended with
whatever we define name in this case
your function that depends of them can
work these reused nice more views about
the regular ones because you don't have
to provide a record that you'd have to
provide record has all the different
members just once dusty dusty fun in the
extensible record type i underscore
union types which you might have seen
them in other languages are there as
algebraic types or as more generally
sums and products data structures which
sounds confusing but some just means
having a very a set of a choice of
variant types for your base type so what
we are saying here is their status it's
a type but you can be either fly
spending or exploded and for each one of
them you can associate it with at Apple
of other types which is what product
type this downpour oh the F sharps the
pipes operator so to see how this works
you've got field which is a function
that takes the two arguments and because
we are providing it with the color
already so we've created a current
version of field which we are using
pipes to take the previous expert the
result from the previous function call
and slot it into the end of the next
line and so on
the light pipes a lot partly because you
came from F sharp and a lot of sharp but
mostly because the allow is suppose a
more visual way of thinking and on his
website which is brilliant by the way
then Daniel Higginbottom said that a
clean design is one the support visual
thinking so people can meet the national
needs with a minimal of conscious effort
we should say that you should present
information in such a way that people
don't have the faint heart just
understand it which makes sense we do
love the KISS principle after all which
is crazy than when you've come to think
about how do we deal with nested
function calls and methods which is
completely different to how we read just
about anything else from English text
order hug from how we read any any class
files and any code files we read from
left to right top to bottom but somehow
is the opposite when it comes to nested
function course so with pipes in reho
list but we store some of my sanity at
least and allows me to understand the
relationship between nested functions in
a way that's much more visual so that
can luckily I can follow the pipe
understand how they how data is because
flows through my nested function course
so our function your circle here has
this very simple signature takes three
arguments we call sobriety sorry
differently so rather than calling the
individual functions and then passed
without to the next nested function call
and so on we can actually just compose
the functions themselves be using the
double arrow notation which is again
from F sharp and you have share pod
people in the room yeah high five to you
were so the understand what's happened
here so circle is the function that
takes problem it into shape so even
replace the function itself movies type
and we do the same thing for the next
line since it's a career version so you
only takes two arguments and then you
can see how composition is going to work
here by taking imaginable railways and
you just stop sorting them together like
you do with Lego bricks so you do the
same thing for the rest of your function
which is becomes very visual as well as
the simple to understand and we end up
with function does identical to our
previous implementation
you can also do pattern matching without
using the case of syntax but unlike
Haskell and F sharp and number of other
languages you can't do when guard in Elm
so as a workaround you can use the multi
way if stay a syntax instead but the big
thing elm has always been the signal
switch there are a number of different
building one's for you to working with
the mouse and window and so I was time
so for mouse position for instance that
is a signal for interposed so as you
move your mouse you get new values of
being available on your signal and
similarly for keyboard you want to find
out the key code for the last key does
the user pressed again this available as
a signal free earth for you you can map
for one signal for a signal from one
type to another by applying a mapping
function or more well I find this to be
much nicer way to use it this is a
pretty map operator so as example if you
want to work out the number of pixels
inside a window and have that
dynamically change and we calculate as
you resize our window we can write like
this we've got on the right-hand side a
signal or in couples and on the left
hand side because function that takes
something that matches that shape and
multiplies the two-component give you a
signal of integers values so as you
resize you get a new values calculated
on your output signal you can do the
same thing for more than two input for
more than one input signal and you can
then write this instead where we can
reconstruct our dimension by looking by
taking the width and height as separate
input signals and can post them together
as a couple and the list goes on you can
do maps three like this or math four
five six seven and eight and so on
another common operator that you tend to
use with film signals is fold p or fold
from the past where are you taking
initial value for your output signal and
a mapping function that takes the
valleys on the input and the current
value you have the output and give you a
new value for the output signal so if
you want to do even if an account number
of mouse clicks this all you have to
write where you start from zero and
every time you go click on your mouse
click signal input you just
increment your current accumulated value
by one and you do what you expect does
the keyboard arrows that we saw earlier
and we're going to use again shortly
this whole does whole load of other
functions that you can use composed
different signals together some other
common ones include the merger and merge
many and besides all this stuff that you
can find this all so JavaScript Interop
we can do WebGL for doing HTML page
layouts or that's actually a dependency
management system now as well but we're
not going to touch those because we just
don't have time to do that so what we're
going to do we're going to jump straight
into a demo where we're going to build a
very simple game or snake there follows
the classic rules of hit the boundary
and you're dead it yourself and you're
dead you can see from the Beco they are
not very good at this game so let's hope
this goes well we're gonna start with
this snake way for a segment for its
body and it's going to start moving the
direction of to the right of the screen
or to the right of your screen on the
left and if you use the arrow keys you
can change direction but you can't go
reverse and to to give you the illusion
that the snake is actually moving so on
every tick we're going to work out based
on the current direction the snake is
moving in a new block it appearing and
the front of his current head I'm going
to trim off the last bit of its body and
then put a new body and with the new
head together so that it looks like the
snake is moving along and we're going to
use it a wide circle represent a series
that you can eat with this your snake of
course you only eating with your head
and when you do your body grows so there
for us it just means that we don't have
to trim off the last segment of your
body so to make you some code this is
the standard temper you find from Elm
see website which has got a number of
different sections that you just
interview you for your game we have a
section for modeling the user input so I
was inputs to our game loop and both are
signals and since we are sampling the
input say this way at the rate of 30
frames a second ok guys see this ok in
the back no I don't know how to make the
screen pick up I can try to make the
damn book oh sorry picker honest let's
see how it goes and ok where were we
right 30 frames per second and then
you also have the mode of the game state
itself and if in a step function which
given the input and the current game
state give you a new value for your
output flow game state and we put that
together using a fold p and to give
ourselves the signal game static values
which we just pipe it through to our
display function to Joy on a swing and
to put everything together you have we
assigned at the bottom there element
well we basically sign into a main value
main variable which is a special value
announced that every application of
define and I'm uses that is to display
everything on screen oh it compiles to
JavaScript HTML I to as well so let's
the screen is be small so let's see how
well this is going to work change the
monitor setting
okay it is this is readable right okay
but it's slightly more space on the
writer to work with so this is the
standard template we used and well that
you can get from the on website I've
added a few more input you so that we'd
never do this during the demo the first
thing you do is you have to model your
user input in which case we're going to
allow you to put the user your keyboard
arrow keys so we know it's gonna be x
and y value and also you can use space
let's just give myself a bit more room
here to work with what we do this okay
and we're going to have a default user
input in this case which you say it's
going to be arrow with the neutral value
for x and y and we're going to need to
track the arrow keys when the press as
and put them into a user and shove them
into our user input type so our role is
going to be taken from the keyboard
arrows and also we need to track the
space keys when it's being pressed and
tending into our user input type so that
we can merge the two together later on
so spaces is going to be based on
keyboard or space which give you a
signal of boolean values which we can't
really use so we have to pipe is to give
it two in a de function that takes the
boolean and say okay if it's pressed
then give me a space otherwise give me
the default user input and then i use
the input type here at the end it's
going to be okay merge the arrow with
the spaces so it's compared no compiler
errors you can also enable hot-swap but
the networking to be flaky and whenever
you're compiling you steady sending two
to the elms the worst web server so I've
disabled they're here but when you're
debugging when you're working on your
color and trying to experiment quickly
is you can just enable this so that as
you're typing your car is compiling on
the fly as well next thing we want to do
is so we want to model a game state when
we first started game is when we first
came to the game just going to
not started and then once you started
we're going to try to save your snake
and sherry and for the snake we have we
going to use a record represent that
snake equals mean to track the sector
body segment which is going to be a list
of the x and y values where we can throw
the boxes and we're going to need to
target direction is currently moving in
so we will create a type that pipe
Direction equals either up down left or
right and our default snake what does it
look like what it looks like we said I'm
going to start with a segment so oops
require a list of eight numbers and then
we're going to map it into coordinates 0
and at apple of well with the way amzer
coordinate works 00 is rice mat bend in
the middle and positive axis goes this
way so we want to make sure that our
snake is facing that way because you
want to snake to stop moving to the
right so we have see at the end of this
we are going to have to reverse the list
but first we decide how wide each body
segment is going to be so we just define
something for that at the top and we do
the same thing for suree as well the
radius for a circle to draw for sherry
is going to be half that and then we're
going to have the direction equals
moving to the right and the default
games day is going to be not started we
still missing shiri so we create for
sherry we just have to know whether or
not well with the joy and if because it
doesn't always exist that we make it a
maybe which means insider Justin
position or nothing who is it maybe or
maybe kids maybe see if stick and pass
you say no started okay everything's
fine but we're not joining anything yet
so let's implement that for the display
while we need to have a background so
let me get a rectangle the covers
entire window to float age we're going
to fill it with the color black and then
the for our actual game content or it's
going to depend on our current game
state what withdraw so if it's a not
started then I just display some text
before nice a helper function I've got a
bottom to format the message is nicely
so I'll press space to start and then
we're going to probably thing together
and put them into a collage that's the
cover the entire window toward the
background first then the game content
so if this dish now okay that works but
we also need to deal with the case ones
the game has started we can use pattern
matching when we try to get the
different components from our record
doing just this and then we say Sheree
so the snake is going to be made up of
this body segments so segment we since
each segment is ultimately it's just the
XY position so we do that with draw a
rectangle that of our dimension segment
dimension and the villain together
Phillip the color yellow we're going to
move it to the right position where it's
supposed to be and then depending on
whether or not Cherie exist if the share
it doesn't exist that which you have a
daughter snake otherwise we have a
position for Sherri which we draw a
circle so we say okay circle sherry
radius I'm going to fill it with the
color white and then move it to where
it's supposed to be and then we also is
remember to draw the snakes to server
type order so close
what was the florist demo okay so
nothing's going to happen because we'd
have any transition logic for our game
state yet so we do that here or this one
function we say okay well depending what
the game still looks like if it's not
started and then that we're going to
suspect the user input if is space that
we know okay we should the start game
then start it with the default snake and
it's no sherry otherwise it going today
stays the same unchanged not okay not
this right ah note started thank you
okay so let's see what happens well it's
doing something so we're on right track
but because once the game is started we
don't have any transition logic for
moving to the next frame which is why
it's just got stuck there so that's all
we're going to do next we're going to
say okay we're going to grab the
segments and the direction for the snake
and the stay for sherry and then what
we're going to work out the next the
direction is going to be moving into
based on the user input I've got it to
helper function down below so they don't
watch me type all day but doing that
stuff so can you direction that takes ok
only takes X Y value from there from the
arrow and the current direction so we
will do is we're going to clean our
input up slowly let's say arrow is the
based on the user input if it's arrow
then we just take whatever values they
already otherwise would you use some
sensible default value y equals 0 and
then we can use our helper function here
to say arrow and the current direction
we also need to be based on the new
direction the snakes moving in workers
new head position which I've got a
little guy here to do so this guy takes
needs to know the the way that the head
is right now and the direction that is
moving in so what we need to do is
get the help from our list of segments
bodies and the new direction and then
I'll tell we said earlier that we're
going to trim off the trim of the last
segment so we take list the length of
segment minus 1 or segments we also need
to work out whether not this game over
and I've got little function here to say
okay given the the window dimension so
that we can detect when our snake has
hit out the boundaries and its new hair
new tail position we can work out where
the note is game over fear but it's a
problem we don't know the mini
dimensions so what we're gonna have to
get that into our games de loop somehow
which will do very shortly just new to
so we do that well I know for a fact
because I've done this a few times that
we're not going to use the time doubters
are just different oil over right hip
and mini dimension is in integers so we
go down below here where we capturing
the user input into our loop change that
to windows dimensions and now we have
this available as which is call it
window theme so now we're almost of
something that we can see screen so if
it's game over while game states going
to go back to not started otherwise it's
going to be started still and what is
the new body looks like well he's got a
new head can be attached a new body new
tail and the direction we can be moving
is going to be the new direction yeah
I'm done anything for sherry so let's
just take whatever we were given the
first place okay row game of conditions
seems to work so next time to do is to
spawn the Sherry's on screen with some
random probability so we have to do some
work to get random working in the Elm
which I find to be one of the weird or
strange strangest thing I've seen but
understand why they did it so you have
initializes you have the initial C for
your random to generate in random every
time you generate new
value you also get bad new situ they can
generate more random values and we need
to capture that seed as part of our game
state once the game has started which is
down here random seed which also means
that every where we are okay first when
we initialize the state need to give the
initial seed for a proper game you're
going to want to have a different way to
generate an issue seed rather than have
being a constant otherwise you have the
same gameplay every single time you know
exactly where the the share its going to
spawn but we know that for now okay cc'd
and we also have started here and then
nothing that's it and I have little
helper function down below here to
generate X number of random values and
give me by the new seed so packing our
loop here you say okay I need us random
for deciding whether to wait or not
spawn and then we're to spawn it on the
x and y position and a new see I want to
generate three random values using a
currency tutorial to also have the
passing walk past the new seed long
let's make sure they can powers for now
okay still good so now so the new sherry
stay what the snuggling look like well
if the current shear is nothing and
let's say what's of a sensible value
let's say I don't know no point to 2.2
chance we're going to spawn new sherry
it has no the snow sherry right now the
third then we want to spawn a sherry
that takes in the world dimension of the
window and X random x and y values to
use so window dimension and ran the x
and r and why otherwise sherry stays the
same so now we can power them run our
game again ah i forgot the part our new
sherry stay along
okay there you go but we're not eating
it well because we've done the logic for
that so that's what we're doing next do
we eat the sherry well if the current
okay we can do the case off for this one
so there's no Cherie obviously we didn't
eat it otherwise we can find out a
position I see we already know overlaps
you far the head of the snake so we take
you the function here that takes a head
position and the position but sherry get
a nice overlap new head and the position
of sherry and if we ate to show you wow
there's not going to be any more sherry
left then I think otherwise we do what
we did before voila why are we going to
sherry now at least but our snake is not
growing so one last change to say okay
if we ate a sherry then we turn the
whole body as a whole otherwise we trim
off the last segment and with that we
have a working demo
oh so close okay so you come I guess you
can yeah company instead the snake is
growing right ok cool and that's it then
we're done let's go back to slides yeah
put the slides right
you can find the code the code that
useful demo on the github account and
you can also just play around with own
with the Hampton story locally first by
going to the website to other user
interactive editor or debugger and most
of my experience you come so far has
been very good and positive but there's
couple of things and notice which makes
it well we done not so great for
starters I still run into occasionally
cryptic error messages and all our
messages are just not very helpful at
all but they seem to be more rare these
days but the biggest for me pic is
concerned for me right now is that this
is still a young language and evolving
so there are occasional breaking changes
in fact the last time I did a demo at
NBC London two days after the demo
they'll release a new version with
breaking changes so so we imagine i was
going to all my demo broke basically and
our quiet little inside but we are
recovered and there therefore i am here
another culture defines sometimes is
that because with the debugger you can
look all event and if you're game that's
running a 30 or 40 or 50 frames per
second your cumulative ends at a very
fast rate so if you forgot to stop the
debugger make a change to see how it's
going to impact you pay your game so far
you might find that your whole browser
it's going to stop as it tries to render
seven thousand frames that you've
accumulated so far so that's a painful
mistake that I've made a few times once
i was editing with the or nine debugger
and when that happens unfortunately I
lose all my changes or have the way 10
minutes or whatever high level 0 into
Excel to joy every frame but despite all
of this small obstacles it doesn't stop
you from actually using helm for some
interesting things right now but you are
made some made a missile command game
and you can also find examples of other
more interesting games like solid what's
this game port again touches God yeah
bring fruit there's also a bunch of
other demos you can find on the arms
example website the most interesting
thing I found so far been the 44 page by
the Firefly guys sobran Honda who is who
is on the program committee for this
conference his company's their website
got this 404 page which is written Oh in
Elm which is pretty awesome aside from
that I also know one guy and orient one
guy who's been brave enough to release
Elm into production building a
production-ready web application and
find out from being how well is going so
far but some of the problem that he's
run into with running a no application
in production but it's possible and it
besides games you can also make web apps
and bunch of other stuff as well so I
think we're just running out of time and
thank you very much for listening you're
gonna get in touch can know pingy email
or find me on twitter afterwards and
yeah thank you very much for your time I
don't know if you've got any time for
questions ok cool ok suppression diff
there are Park you tutorials on the
website as well as handling examples
where you can open it up in your in the
online editor and just try things and
because of the editors got is hot swap
well auto up the ability you can just
try face and you will render
straightaway so this is quite nice
learning experience from that
perspective oh and one of the guys who
did the Elm talk earlier I've got his
name by he searched to retain the face
Elm by example dog website with a bunch
of tutorials as well and the trouble
with some of these this content is that
they may be outdated as though as the
tester the introduced breaking changes
but usually but hopefully the ones on
the official website is up to date and
any other questions okay that's one day
well no if you have a missing match
closest it would crash but with more
before they broke the Don lines of life
hot-swap capability where you can
actually happen instead okay you broke
it you change your code fix it and then
straight away they seized the snake goes
off the screen because it got to the
point where okay I we can pout I still
know what my current state lobster or
the last beta state looks like in my
pain in my application I was continuing
on with the Dakota the new code that
you've given me and continued so they'll
stay we just keep moving but that hasn't
worked since the last major us well now
your major release not the last of minor
release because there's some changes the
prompter the editor somehow but I guess
for real application you probably will
end up with the exception there are some
exception handling capabilities in arm
as well to handle those things as well
as paying me to do HTTP and the i/o
operations as well as and you get back
signals for your those responses okay in
other questions okay this one did so how
does right yep well with with elm
everything is basically all your uncle
gets compiled into a static graph so
everything is fixed is fixed in place so
I imagine they might do some compilers a
resolution saying or generating
anonymous type so that they know
statically what your function requires
so you can say my function requires a
record that score value x and y without
having to say okay it depends on some
type some type areas of given to this
record with this shape so it works that
way as well
yep you can so the type Ellie is stopped
because records did not really a type is
just okay this record that looks like
this shape all you're doing is giving a
label to say you're not defining a type
your defining a lei you use it you're
creating label that you can use the
reference a record that looks like this
so that in your co you can reference
with that you can do the same thing with
other type so that really are created
tight radius for maybe flow and float so
you can use thi really suited for the
same thing okay okay I think oh sure now
you're not it's not dynamically type
language is still static leotard yeah
yep I don't know but this does not mean
that we really nice and that's something
that I like a lot in f-sharp so that the
compiler tells you and it's giving a
warning that okay you're not you're not
matter you're not taking care of all the
possible cases here but they don't
haven't done in young maybe just a time
constraint they haven't done it may be
something that song about that on the
road map I don't know the answer to that
but it's something that yeah they should
have and the sugar to do okay yes in
fact the like oh you're all your whole
arm co gets can power into a static
route a practice back we don't okay any
more questions ok cool I'm gonna be
around for the next bit of bit so you
can come and grab me a so I if you've
got any more follow-up questions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>