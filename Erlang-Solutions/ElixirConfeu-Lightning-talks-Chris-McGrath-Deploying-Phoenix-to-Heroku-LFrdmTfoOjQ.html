<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ElixirConf.eu Lightning talks - Chris McGrath - Deploying Phoenix to Heroku | Coder Coacher - Coaching Coders</title><meta content="ElixirConf.eu Lightning talks - Chris McGrath - Deploying Phoenix to Heroku - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ElixirConf.eu Lightning talks - Chris McGrath - Deploying Phoenix to Heroku</b></h2><h5 class="post__date">2015-05-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/LFrdmTfoOjQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's want to do a quick presentation on
deploying a feelings up to Heroku I
bunch of people have probably done this
already but in case you haven't just a
quick flip through how you what you need
to do I needed a little test up so I
made a little your oil URL shortener
called flink because it's a phoenix up I
kind of had seen that Chris was
complaining about the company see that
very well but the the URL to install our
through the archive for a mix for a
Phoenix for a point 11 so just thought
right that'll be an interesting idea so
I'm going to assume that you you know
how to set up and push heroku up and all
that kind of stuff you've done up for
the documentation there are on Heroku if
you haven't I'm also going to assume
that I've probably forgotten a step
somewhere because I did this over the
last few days and I probably forgotten
something so if you notice something i
forgot i'm pleased shy so the first
thing you're going to need is the elixir
build pack for Heroku which is hash new
cuckoo build pack elixir you can create
new up with it or like I did you can add
it to an existing up the default configs
it works pretty well but I actually
added the secret key base here so that I
could basically set my secret key
through a Heroku environment variable
because I originally had accidentally
committed it to the repo which it what
you want ahem so it's different from
this this is the one that we're
committed to the repo it's different now
so you try hacking away that's sure your
your product secret exs come in config
and a Phoenix up and to make it work in
Heroku i had to sew the the secret key
base uses system gadem i think there's
something built in to act 0 which will
do this it can't probably can't see it
but the system database URL will go and
look that up and you then need to set
your your config variables hiroki gives
you that database something some color
whatever URL so i just copied that into
the database URL environment
Mabel and to make a new secret this is
basically how phoenix does it when it's
drying it generating a new app so you
can just type that in Dax and then do a
real coup configset and when you do get
push ruki master then that actually
worked if I got all the steps right but
when you go to your Heroku up and you
have a look at it your assets will be
it'll do won't be any assets that we
knew CSS or JavaScript what would be
ideal and what Chris once i think is a
build pack that will actually run you
know brunch on the win it bills nobody's
had time to do that yet it doesn't exist
at the moment if you want to do that
that'll be great so what you can
actually do is BAC just why I did was
comment out the getting new lines and
get ignore for a pretty static CSS which
is where you building and development
then just deploy that it's not ideal in
any way shape or form but I just want to
get it done so that's that performance
i've eard the OTP erlangen OTP in action
book by mailing so obviously one of the
things they do is you use a process to
cash so when you look up a URL on this
thing with a shortcode it starts a
process that live will live for five
minutes and next time you look it up
it'll avoid that data base hit so
totally unnecessary but pretty easy to
implement it's really fast in a single
Dino like at home on my home internet I
got thousands of requests a second when
I try to write locally using observer I
could cash 10,000 URLs and the process
was about 80 Meg's when the cash expired
when the world's processes died the
memory was given back so fantastic Eric
tweeted this the other day basically hex
I'm with a few people have mentioned it
it's kind of actually disappointing to
me that it works that well on hiroki
because one day I want to have something
that will have a c4 x-large with like 36
cores and 60 gigs of memory and and I
did office lee just need one dino at the
moment so it's a bit disappointing so
that's that's basic how you deploy to
Heroku
it's throwing about five minutes please
show if there's something that hasn't
been working the last things just a bit
of a laugh I like the stream to async
stuff yesterday from who say but I want
to be the first person to suggest
modifications the pipeline operator to
avoid having to put that streamed or a
sink Colin thank you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>