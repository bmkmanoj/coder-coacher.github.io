<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Erlang Factory SF 2015 - Sergey Ignatov &amp; Sergey Savenko - IDE Done Right | Coder Coacher - Coaching Coders</title><meta content="Erlang Factory SF 2015 - Sergey Ignatov &amp; Sergey Savenko - IDE Done Right - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Erlang Factory SF 2015 - Sergey Ignatov &amp; Sergey Savenko - IDE Done Right</b></h2><h5 class="post__date">2015-03-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YKA9TUIFq00" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you for coming and this year we
are again talking about our plugin for
IntelliJ we are working together with
Sergey in company called JetBrains it's
her company we produce I'm tooling for
developers different kind of tooling for
first old was an ideas after some
continuous integration solutions and so
on what is intelligent AJ it's our
biggest degraded web development
environment for developers and it's a
multi-platform multi-language and
nowadays it support the language well so
several years ago maybe it's almost
three days ago i started my hobby
project in my spare time you can check
out in it's on github page because free
and open source and Sergey gent me two
years ago as I can remember and he
continued his he continued his work
about spray producer support and so on
so I just remark about so most of your
link users I prefer to use some pretty
simple text editor yeah for instance
Emacs as well because I very fast and
very convenient there and if you are
working if you are using you max for
maybe have been using Emacs for 20 years
it's more convenient for you because
it's a home and your stand alone at your
favorite program in your computer and
your preferred to using it but i believe
it's more convenient four knots and for
more convenient to modify your program
then we get your program when your your
code editor understand and fully
understand your code you can be great
your code you can rewrite it completely
and so on so IntelliJ itself it's a good
text editor first of all we have a same
basic thing like a hip completion which
cult it's a funny name but it's a
completion through the old symbols in
the Oh open files on your all buffers so
it also produce very famous and very
wonderful think it's a true static
analysis because your if you would like
to support a custom language you need to
create so a full lace tea for every file
and after you intellij can understand
what's going on and you can complete
precisely you can navigate precisely and
so on also we have some building stuff
like version control integration and web
tech support and so on so continue my
talk about why IntelliJ I'm like to
share very very funny quote of calling
flaming with a closure developer and
actually his developer of closure could
ship closure it's a plugin for IntelliJ
Twitter support and he told it previous
years it's a lack of typing it's a
future not a bug and you need to try to
modify to modify your program not with
typing and not here but with some more
convenient and more powerful code models
so I'm going to switch my I talk to
Sergei
so right now I'm going to show you some
demo so that you can have a general idea
on what editing experience in intellij
looks like well first of all you start
with importing the project from
somewhere in this example we have the
project imported from rebar and it's it
just takes a couple of clicks to empower
the project and right out of the box you
have your project set up with all
dependencies set correctly like we have
this OTP application awready spool which
is depended on e down your IDs and a
pool boy so another cool thing you get
right out of the box is integration with
your version control system so you get
to work with all your repository history
and you can rebase merge and do all the
stuff you're used to but in a more
convenient way well let's just jump
right in and see what editing experience
looks like first of all when you are
working with IntelliJ it's all about
typing lass so the ID can do a lot for
you so for example you might be used to
using file templates we have this
functionality and you can use existing
file templates or add your own or so
let's just use this empty module
template and start typing something so
let's just write this function demo and
the next thing we want to do is say call
create pool function from this you ready
spool module it's just enough to write
ebc be for example so that we get all
the confusion here and we can just pick
the function and it's already there the
next thing you want to do is to know
what the parameters are so there is this
pop-up that helps identify what the
parameters should be so let's just fill
them in
and see what other editing options we
have here so you can for example extract
variables like this is a full name and
we can also have full size here as well
and let's say you don't want these
variables here you want them extracted
in other function instead of being
written here so you can you can just
invoke this extract function and have it
extracted below so you now have another
function well when we have some name
things here like this is a function
which is named parameters we can
navigate to its definition and we can
navigate can also do a reverse operation
of finding its usages so it now has only
one usage and there is not much to say
about it another cool thing about these
references and declarations is that you
can rename it right in place and it
works across all the projects so you can
find all usages inner project and rename
them and this kind of logic applies to
all the named entities there are so it
works equally well for variables
functionings module names and it also
works for atoms so it is kind of painful
to rename atoms because you don't
actually know where the usages are so in
IntelliJ you can just rename an atom and
explore what changes are going to go to
occur so as you can see we have another
usage here in test files and it actually
is not something that we wanted to
rename so we can filter it out and all
apply the refactoring to the parts we
want to so it just goes on correctly all
right so another cool thing about the ID
experience is that you get static
analysis running while you're typing so
in this example we have this demo
function which is apparently unused as
it is not exported and it is not used
from other functions so we get to fix
this problem by sorry applying these
fixes that are there so we can export
the function and it's automatically
exported we can also oh it's not my
laptop and they don't do not use Mac's
so health problems here or we can do
some other stuff like generating a
specification for a function and this
kind of support works for in a lot of
different places and it has a various
other types that we have here so we can
generate the function back and there are
a lot more applications well yeah we
actually do we have it implemented yeah
I guess we have and I don't really
remember does it work now it's yet to be
implemented well
so what happens point quite often is
that you may want to convert your module
into say a John server in this case you
can write a behavior and you instantly
have this notification that you have
unimplemented callbacks so you can also
go and hit this implemented callbacks
you can stantly have all the fun all the
functions export it and their
implementation stubs are also here so
it's kind of fun all right so there is a
lot more to show so we can navigate
through usages and we don't need this
behavior here so for example we want to
go to wear these create function create
pool function is implemented so let's
say let's say that we do not know what
this module is about and there is this
module structure pop up I can't really
get it to resize Oh surf that oh I hate
using not my laptop's well ah come on
yeah yes I did it so you get to see all
the structure in the file you have here
and moreover you can invoke the quick
document what's oh it's it's wrong
hotkey right can you open it up so from
that pop-up you can look the
documentation of functions you can also
look their definitions and you can
navigate to the symbols
alright so we have this plugin that that
showed the hotkeys I was pressing and
apparently we have some conflicts in
showing the popups alright so from this
pop-up you can invoke what is the heart
key again we can show documentation and
definition also you can navigate this
function its control J alright so I'm
not used to use Mac so you have the
documentation but it's not well
supported in a presentation of all right
so let's move back to the to our
original module we were in it was EF or
all right so another cool thing about
the ID experience is that you can run
any function and you can debug any
function that that there is so let's
just try to run it oh it's run I want it
to debug it right
here we have in debugging support you
can step through the functions and
explore what's going on in the stack and
explore all the terms and bindings you
have here like which may be us which
sometimes may be very convenient like
say you're getting familiar with some
new library and you want to know what
terms are accepted as arguments so this
is pretty much all I wanted to show you
as ID experience was another thing about
the debugger the debugger can connect to
remote nodes as well as running some
local stuff so it might be more useful
than it seems at the first sight so you
might want you might be wondering what's
under the hood or all of this experience
so this is what Sergei is going to
continue about thank you and I'm going
I'm going to talk about internal
infrastructure of IntelliJ and maybe
after my 10 minutes of explanation it
can be more convenient to understand how
its work and what's going on when you
are clicking to something and going
through some another file and so on so
first of all we have a really bad proof
parser and it's generated from our home
home backed parser generator called
grammar kit so we have a grammar of
being F notation and it allows us to
guinea generate a very good parser
because it's worked with incomplete code
we can't use the standard parser from
compiler as well because comparsa co you
have an error in line 10 and after it it
stops because oh you need to fix the
filter and after it's a samsung may
change but you can't use this the same
approach in the idea because you need to
type in and all the time you call it is
not correct because it justs every
factors don't think or implement
something it's not completely correct so
also generates not only parser body some
iced tea structures and accessors to
code model and also we can match the
whole file text to the BNF and
understand what should be placed in this
air place and also it provides us a
completion keyword completion for free
and error reporting as well so we can
easily says it so because something and
but we expect another one and so it's
almost the same as a keyword completion
very important thing can delegate the
references it's something but it's a
symbol just resolution algorithm and
some rapper above it
and every symbol in IntelliJ can can
have a reference so after it you asking
reference please resolve me so it's a
kind of slang I was lying but you need
to ask their friends can resolve it to
something and maybe it's some multiple
results I don't know exactly and ige
tells it okay this symbol is up to this
definition or maybe this definition or
so it's very important that it's a cross
language references because you can ow
have reference from HTML to JavaScript
and from JavaScript to tss and vice
versa so the opposite operation it's
fine usages you can ask an every seam a
number definition please give me all
usages of this definition across the all
open projects and it works really fast
because its use inverted index of
symbols and asks they're all symbols to
resolve and checks if it resolve to the
target or not so after 2i filter out and
that's all its work in parallel and use
your all course in your laptop so when
you're asking to find for instance very
short name and very frequent name for
instance ID which is can be used in a
global poll space nottin sits inside the
function because inside fashion revue
not a lot of identifiers but across the
project there may be a stillness of them
and it will yeah we're warm in your room
because your laptop is working as a
wonderful thing it is a annexing from
work and you can easily create your kind
of different kind of windex it's a base
is a file-based cable storage and you
can easily customize them creating your
own indexes and after it you can also
create very fast code completion because
you can ask ok index from work gave me
all functions from this file or maybe
all functions by this name and so on and
very very important it's always up to
date because when you are typing they
have got changed at the indexing
framework
reskin you're all changed files and as
for me as the user of this framework all
indexes are always up to date so so no
need to check this is definition i alive
or not so it's always valid another part
for instance when you are working with
open files you can precise our the
maximum information of it and the
biggest I statutory if you can imagine
but when you are working out vanille
would like to complete and as a function
from another model for instance no need
to create a full three of this file so
we can pray index all the files in your
project and can easily and very fast get
you the smaller tree without for
instance implementation parts only stops
on the item declaration and it's very
fast and very easy so it's look like for
instance tiles for google maps and when
the assuming fast first of all you have
some tiles which they're not pretty good
but it's okay so about your acting's for
some predefined refactorings you need to
extend some basic stuff basic handlers
but it's some kind of work because you
need to implement the logic of the
language and understand how what's going
on when you'd like to refactor you need
to our imports I think or maybe remove
some unused declarations and so on but
their name is almost free because when
you're implementing find usages and your
references so it's very easy to
understand what's going on and you need
to change all your reference to this
definition when you are trying to rename
it so some also basic stuff you need to
link to your code and understand what's
going on with something wrong maybe not
and it's very great and very useful
framework about inspections and you can
divided you inspection by priority and
top priority inspections going first of
all and low priority after it so we have
for instance external tools inspections
over for dialyzer as well and it has the
lowest priority because it's need to run
external tool lets it cross process
communication and so on maybe not so
fast as you like to be yes it's a basic
thing for quick fixes because when you
are detects and God is not complete on
it's wrong you can create some some
action for fix this part of code for
instance we have about maybe several
dozens of completion Oh several dozens
of quick fixes intentions is almost the
same it a quick fixes as well but it's
some smaller fracturing maybe not only
for bad code but the green as well you
need to for instance you need to
translate one kind of instance you know
it's some kind of transformations really
and I'd like to ask sir gate talk about
reports dressing because he's his field
and it's very hot parting they'll
language your language support because
they have where markers and it's very
scary for instance not fun to standing
but their ID understanding and Sergei
will talk about so as Sergei has already
told all the smart stuff we can do in
the ID is based on internal
representation of the program so when
you have the preprocessor building this
representation might be hard so I'm
going to show you what i've been working
at and it is preprocessing support in
the IntelliJ plugging for airline and
these are some examples I've stumbled
upon
several open source projects so this one
for example was extracted from the
nitrogen web from framework and as you
can see here we have this element Bay's
macro which defines some common
attributes for HTML elements and this
macro is used in various record
declarations for HTML elements so what
we have here is record fields which are
defined through a macro substitution are
not marked as unresolved as we through
macro expansion we already know that
these record fields are actually there
so another thing that we have working
correctly is a completion and you see
that we have all the completion variants
that are applicable in this place
through macro expansion and it is kind
of cool so let's move on to the next
example I saw so some people use this
pattern so they use a handler macro to
handle unmatched of function calls so
what would happen in the version of the
plugin without macro support is the
parser would expect the next function
close in this place but what it has
instead is a macro call which in turn
expands to the actual function close and
the cool thing about it is that you get
all the experience from working with ID
say if you were to have something like
this which is apparently not correct
function close you get this notification
that there is a head mismatch so all the
stuff just works there so let's move on
to another example and having the
process of working you can write
something that crazy and
the fun part part about it is that I de
state the ID still gets what's written
here so it now knows that there is a
function and it says that the reason and
used function here named foo so what you
can do that is you can remove the
function entirely or you can also export
this function and it works you can even
do something like this so you remove the
argument and it says that there is an
hour format call which does not have
correct arguments so this kind of neat
alright so let's move to running in what
well this is the thing that we have
still to work on and currently it would
not rename the macro because there is no
sensible way to do that that and I guess
we should provide some notifications
that the rename is potentially dangerous
and you can and you should go to the
macro definitions and see what's going
on there is yourself yeah and it is it
is yeah and it might be dangerous yeah
yes it is not published yet and as it is
open source you can just check out the
corresponding branch from the repository
or if you don't want to do that you can
ask me to share bill with you if you're
interested yep exactly yeah it is going
to work in it is going to find usages
but it's not quite complete appear so as
to not create usages of macros this
example uses this NM v 9 header format
to define a header format of net flow v9
v 9 and it defines various variables
which are used that and as you see we do
not mark these variables as unresolved
because apparently they have binding up
there and we actually navigate to the
macro call which introduces these
bindings so another example I wanted to
show you is the one you can find in Iraq
they use short macros there to replace
alone record names
and the macro itself expands to hash and
record name so the IDE knows that what
we have here is a record expression so
it provides correct or completion here
as well the talk about macros and
reprocessing support would not be
complete if we didn't call didn't talk
about different configurations of the
compiler so if you have different
compiler options you get different
programs and you have a different code
emitted here so we can reach a different
compile context and have the resolution
changed appropriately so in this default
configuration here we have the profile
macro defined we can add other
definitions as well and the IDS
interpretation of your project changes
when you switch to other configurations
so represent support is not quite
complete but I'm working on it and if
you are interested you can always ask me
to try it out so this concludes our talk
and you're welcome to ask any questions
if you have
oh come on it's written in Java yeah so
she's got a complimentary things you've
done duque some things you've done but
we've got some stuff that's
complimentary for doing the language
factories we'd like to integrate that in
IntelliJ that's written in whose genius
so I'm working on to jail books written
for the testing that one cuz then I'm
going to the SG that grammar can
generate is the same as immature as
natively so you can use so using yeah so
and we also have the debugger
implemented it uses a couple of modules
written inner line so that we have a
seamless communication between Iran and
Java they're actually it would catch up
and it would still work if you change
the files underneath it yeah yes
right you're welcome to come and talk
afterwards ontology is free and it's
open source you can and it's Iraq it
also has these Ultimate editions that is
paid for and it has a lot more to offer
like integration with other languages
databases and stuff yes you can start
with a free version and it actually oh
yeah it does well you mean just showing
the documentation or editing right well
I'm not sure that there is something 00
so there is a plugin right
yeah and also as and also as for the
standard standard library you get the
documentation downloaded from the
internet like exactly at the moments you
hit ctrl J and yeah you don't need it
yes
for many years and when I wish to
airline I was like I heard towards
beyond Neiman's and I was just no way
IntelliJ can do it and when I just
thought that out-of-the-box blogging I
was somewhere between grateful and
careful and it's and just seamlessly
swinger and encouraged well thank you
that's nice work here you don't get out
yeah we actually use github for that so
you can go to github and report any
issues you have there or requests or
whatever it is a standalone up and sort
of thing
yep correct any more questions well
for what do you read a maximally well as
we have everything working semantically
so it is kind of different from what
emacs mode formats files but we have
this hot key which can run emacs in the
background use it to format and then it
gets back to IntelliJ so if you're
working in a team that uses emacs you
can just use this hot key somebody
else's to go to the programming board
xbox at same time because you want to
discover some you see I was on the
profits off
already written this stuff but you can't
discover that fact if you want to battle
so let's bring the poverty that's when
you show an which is a search engine for
searching for search and you Coco search
is a really easy way to see if people
have committed like the same password
and the same bug so it back yeah sh 0 d
and it's a certain or even search scans
internet for open ports and proof so its
way to find not a lot of servers at the
same time all right any more questions
well thank you that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>