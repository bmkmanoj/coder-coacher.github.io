<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Dániel Vámosi | Visual Reasoning and Mental Maps in Elixir | Coder Coacher - Coaching Coders</title><meta content="Dániel Vámosi | Visual Reasoning and Mental Maps in Elixir - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Dániel Vámosi | Visual Reasoning and Mental Maps in Elixir</b></h2><h5 class="post__date">2017-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XLOrFRgmczU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so when I submit to distance CFP for for
the conference I only went for something
that very special to me visual reasoning
and mental Maps how it's connected to me
and how I am very emotional about this
topic actually I started as an architect
like I just moved to software
development like six seven years ago and
before that I worked ten years and an
architect not a software insert just to
make it clear a real architect so
talking about buildings so and I was
always very visual and whenever I came
to the problem that I had to I had to
help someone to understand that what is
happening why Alex fear Island is so
special what is a big fuss about
concurrency of how can you make it more
approachable because to be honest I
tried many times but there is a very big
gap in in to get the first steps into
the platform so some definitions visual
reasoning I would call this from that
when you have like kind of complexity of
information that amount of complexity
that amount of information that we as a
human human being just we are not seek
to the problem they are not good enough
to understand the whole system itself if
we are talking about an airline
application or Alicea application so
many things are happening inside that
they usually go for just to make simple
assertions about what is actually doing
this is why ever I test this is how we
set up the tooling around our software
but the question is can they somehow
bring it a little bit closer to to the
intuition so mental maps but that's the
metaphor I try to follow here it's it's
not mine Maps mind maps I think all of
you are familiar with mind maps when you
are just trying to prepare for a topic
and you first try to figure out the main
point and then set up connection between
between the ideas mental maps on the
other hand is something that's coming
from from architecture and especially
urban planning it's about the way how
how human being if it faces with a
special complexity that means that just
think through that if I would ask you
the question that hey we are now in the
barsa in Barcelona how can I get -
sagrada familia and all of you have like
quite a big like maps inside you but how
you can give me the actual instruction
how to get there that's the mental map
that mental maps were how your mind
digest all that complexity and with the
richness of information you get
something like this what interesting
here that this is for example a mental
map Jason don't about San Francisco San
Francisco Bay so you can see that it
already has like if you want to find
your way in San Francisco that's already
applied a big help
the interesting thing here that I want
to pinpoint that it doesn't seem to be
simple so it's not about this removing
all the information and get to just like
simple lines it always have this you can
see that that must be the sea that must
be a breach that looks like a bridge so
bringing down something complex to
a simple one is not about removing
information it's about organizing
information in that sense that it helps
your understanding just another example
this is the the subway map of of
Barcelona whenever you are looking at
the map like that it's always not the
case that the distance between each of
the station is not the actual distance
it only gets that minimal amount of
information but still very rich visually
so we need to something spend some time
to understand it so as I said I
submitted this ESP like
three months ago and the interesting
thing is that I propose to create a tool
of proof of concept to to to somehow
investigate this topic and like in the
last two or three months while I was
preparing already two or three new tools
emerged and I started to think about
that is it something that's actually
happening is it now that they will move
away from like all the terminal based
tracing that we used to and now we will
get that kind of developer you have that
elixir is so famous about so first let
me give you a very quick competitive
analysis that what's already out there
visually sphere I don't know how many
are you familiar with it it's actually
something written like two years alone
and actually I started to work with
Aleks - two years ago so it was the
first thing that I ever helped me to get
familiar with internal working workings
of
of the beam this is just a small extract
from some visual experiencee here that
it visualizes the supervision tree you
can get some kind of visual
differentiation between the types of the
processes also it's possible to do some
actual message tracing with visual excel
so you can select some processes and say
that okay now I want to catch every
message that going back and through
between the processes also a very
interesting tool that visually grows the
picture is the success diagram message
segment diagram so at that time when I
first met with this tool I was really
fall in love with it but at some point I
realized that it doesn't really help me
in the actual development that I need to
do so it's very nice - it's looking
awesome but there are so many limitation
that that that blocks me to use it when
I'm developing my own software the next
tool that I want to highlight you there
like Darfur Muslim it's created by a
long solution before as far as I know
and what they decided to do is to apply
Netflix intuition engineering principles
to the beam intuition Engineering is
about that nowadays they are facing with
such complexity and software that it's
not the actual quantity that we are
interested in it's more about that
something tools that helps us to to
identify patterns for example Netflix
used this intuition engineering tool
this is called viscera and there along
performance lab people decided to try to
adapt viscera - to the beam what you can
see here is visualization of the
distributed system that has suckers set
several nodes and it's not the actual
messages I'm going back and through that
interesting it from the actual account
it's just the rate of message passing
between each system and it helps you to
investigate such topics like if you set
up a load balancing scenario and you can
check that if that happens in your
system does it really work like that
so make all these things visual they
also went one step forward and this is
also an application of this run into
processes inside inside a node and you
can also use it to figure out some
message passing patterns that might in
point of problem or just helps you to
better understand OTT concepts but what
they done already in the last two three
months is just the rate of the messages
going they also have something very
close to visually clear sowing the
supervision tree and in that sense it
has it it's very promising because they
base the whole thing of that gia so this
visual licks here is based on a 3G on
and it's implemented by the DC library
that obviously has its limitations this
one still not that good as visually
clear but the thing that is based on web
jia maybe it will open up some other
possibilities later so
after I research the already existing
tools that I decided to let's try to
write something on my own
let's write weeks expand existing tools
and that's when I came up with a tool
that helps to like spy on actors and
that's why I came up with the name
paparazzi and the first thing that I
wanted to try and I want you to be brave
and see things that nobody else seen
before and visualize and the supervision
tree is something that's very important
for us because Fortran C itself is built
on top of supervision so that's the tool
that I created actually I dated a
non-visual Xperia z3 library because for
just prototyping information
visualization issues these this is like
unbeatable what you can see in this tool
that and I we also show it in life
positions on some screen captures that I
decided that I want to put all that many
information through to the actual
diagram that can fit and that's how you
can see on the left hand side that like
many kind of visualization that can be
applied and titled so
and I also decided that I should make it
as interactive as possible what you can
see here that I felt the need that I
should supervision itself because
visually sphere alder the node
visualizers before they all just cared
about showing the links between the
processes but that's not the whole story
so it's very important to differentiate
for example that here all the red nodes
are our supervisors ok and I also use
different colors for the different types
of processes so if it's a gem server
like you can see the Search Search I
first check second side the urgent
servers and there is one supervisor that
supervises all these children and what I
decided to do to extract it because all
this information actually is very easy
easy to extract through tracing and
through older DevOps libraries that I
already available for for the beam so it
was kind of easy to extract the actual
supervision that that's happening also
that kind of research strategy that
applies to that very specific supervisor
I use some magic here just to be easily
to fit in the picture so for example rf1
me this is the rest for one restart and
supervision strategy also the numbers I
decided to include the the index of each
children into the supervision that's
where you can see by one two three
because like for the rest for one
restart strategy it really comes that
and when you build your system it can be
a very crucial thing that you can make
you need to make a differentiation that
in which order should
process they start okay let me restart
this animation again so what you're
seeing now that are also made it
interactive
like if you go to observer it's also
possible just to randomly kill processes
but I find it much more fun to to kill
processes on live and see that how the
system actually react and how to make it
happen I need to come up with something
that helps to remove one more dimension
that really blocks as humans to
understand concurrency issues and it's
the time I was really single that should
I create something like a time machine
that the three cords older all the
messages or the event that's happening
and then just get a timeline and travel
back and forth and see and the back
should say that the virtual machine is
in in but I went for a different
approach and I actually just kept
everything on the screen so if a process
dies I don't remove it if the link is
not there anymore I don't remove it I
keep it on the picture and I can decide
with this tool that what are the time
frames that I can that you use that kind
of information and in the animation what
you see that it shows that if rest form
in the rest for one strategy if I kill
or extend the exit signal that that
sounds well not so scary the second
child then basically if the search items
and all the search idea get restarted
and I update the supervisor
with the second child then everything
every process that started after and
supervised by the supervisor will be
restarted okay so let me talk about
visual superposition maybe you know
superposition from from physics and
mathematics that's about that if you
like get one set of data and another set
of data and you put it together it will
be even more than just a pure some of
these data and visual superposition is
also a very interesting concept in in
information visualization that goes to
how to how to build up layers of visual
visuals that in the end leads to
something that's more more
understandable what you can see here is
just the link this is how the already
existing visualization patterns look
like okay and that's how I extended it
add one more layer with the supervisors
and even add one more layer by including
the supervision strategy you can see one
for a year what we are looking at now is
just a very simple application if you
start an IAC's this is the application
like the curve that's already get
started and actually it's super fun to
play with it to see how that course
system is implemented by means of water
and sea okay
so one other feature that I was playing
with this contextual message tracing
context Thomas is tracing is about that
I also wanted to implement and make use
of because along nineteen changed a lot
and which I actually introduced a new
tracing a very performant rewrite of the
tracing system it's also supports LTT
entries so now it opens up that we can
with very of course not in a production
system set up tracing for everything
happening inside the beam and then make
some reasoning about it but also the
message passing it's very hard to to
understand because too many things is
happening and that's why I came up with
the idea that what if if I just use the
amount of information going back and
through and and show it it within every
pair of process also I come up with the
idea that it would be very nice what you
see here is a very simple application
this is the usual theme point that many
of us implement to process is talking to
each other the first ones and the thing
that other ones on the block and I
implemented that if I click on the
number of messages that was transferred
between I can see the actual messages
that was transferred
let me show you a live example of this
tool
so it has a very similar concept that
visually uses it actually extracts all
the process information the hierarchies
between them and then uses the 3/4
layout to layout in that way that it
always looks nice or at least tries to
do okay
this is everything that I already talked
about that how I can just layer and
choose what are the things that I'm
interested about what are the things
that I want to see if I start message
tracing and hopefully through so you can
see that the pinpoint that that I shown
before so it's like in every second of
being and the poem goes back and forth
and I can extract from the back-end
system that what was the messages that
actually happened there was a big
challenge here because it was very easy
to clear chrome itself so because I used
like that so that connection and pushing
every message that's what's happening
and I had to implement a kinda rate
limiting that has to wanted to make some
kind of that pressure but back pressure
is not so easy if you want to include
the browser
so I'm actually collecting all the
information and only send it like every
hundred milliseconds that means that I
can also see things that's happening
more frequently what first thing to do
and I just try to
you
is from
so that's the system running on the
right hand side the ping-pong that we
actually observing so what you can see
here and actually it leads to the
challenge is that that that we are
facing with with information
visualization is the scalability itself
so scalability is not just about making
our system scare to to the users there
is also something like scalability in
this kind of developer UX how can we
make such a system that it will be able
to to get useful information for an
actual running system because you need
to know that all that we are doing here
is just a very basic system nothing is
wrong it's not an actual application
then there is no load on it so that's
the that's the biggest question and
that's why I came up with this
aggregated information and also to put
it in the system on the diagram but that
is still something that that's ahead
so
that's got me to the key learnings that
I had I already mentioned this
scalability issue I very dig very deep
into all the technical details that how
can I make the tracing itself to to care
about all the messages are coming back
consume but still what I feel that it's
more like a UX issue to solve this that
how to make that approachable so my
future plans with this one was more like
a conversation starter because I know
that many people already doing a lot of
things in this topic so I actually
wanted to propose it and and to see that
if it takes a very simple approach to to
the maximum it can already lead us to
much better understanding so person and
I plan to to contribute more on on the
airline perform a sub because that's
where I see that the future is that's
the best system that will be became the
next observer for us so I haven't pushed
already the system but I will do in the
coming hours I promise
one big disclaimer here that I actually
I pretty good at Alex here Elm but not a
JavaScript so when I proposed the this
talk for for the conference I had this
feeling that okay I will spend like a
very good three months in in learning
more about Erlang the beam itself but
then I find myself just coding
JavaScript for the last few months
so but still I think for for for a
prototype it's quite neat so it's kind
of extendable feel free to have a look
at it
thank you very much so we're going to do
some questions real quick there it is uh
is everyone out of batteries I see well
it's going to be a bit of a bit of a
marathon for me then but it'll work out
we're just going to have you have the
question and I'll run the microphone up
to him and he and answer all right let's
see some hands awesome I have a couple
of questions
from a user experience point of view
since you're an architect after all
first of all is this kind like a mind
map think a little disturbing for the
mind I mean if you see as the observer
does in Erlang the observer thing the
layered tree when you can see level by
level isn't that like a sequence kind of
seeing more approachable than this
because if you see like a lot of
beauties I know that you have like
coming something for disturbing the
nodes but it's poor for the eyes you
cannot find where it starts when it
dance on its a tree after all and my
second question since my second question
would be about the dead notes and
everything that concept is great that
it's more of a suggestion if you if you
can do the message passing something
like a gradient behind the link so you
can normalize after after a while what I
mean is if you're standing like million
messages between two nodes and two
messages between other two nodes I don't
know to normalize the gradient and to
have like an all time of the picture of
how how often messages are sent
throughout the system as you have with
the dead nodes
other things with the dead nodes I would
my opinion the dead nodes which are not
resurrected make them like you did and
dead notes which are resurrected to be
like stacked upon or something like that
so the first question was do you think
that the tree view is the best way to
visualize it alright okay so I also had
this idea in the beginning but the thing
is actually it's called super vision
tree but it's not a tree so if you think
about that what all the things that that
adds up to the folder MC is not just the
links button and the monitors and the
tracks it all these things and when I
visualized first of it I felt that
making it more dynamic and using this
this forced layout of d3 will be more
flexible in the long run so that's why I
went for for this kind of visualization
of course some kinds of theater in what
are the like it's not needed to see the
kernel itself so if you have your own
application that you are actually
investigating you don't need to see a
lot of application a lot of processes so
some kind of smart filtering will clean
the canvas
sucking is is a very good idea but I had
in mind and I actually haven't shown it
that I just have a button that I quickly
climb clear the picture so if I already
check something I had an idea that I
want to recheck that if I kill this
process what happened and I can look
around what just happened and then just
kill clear that kind of buffer and
remove the dead dead processes and then
it won't be there just in a very
specific amount of what were in the
habit of suggesting features should be
like a heat map to show the the traffic
I'd be pretty cool right all right any
other questions yes so is there a big
overhead for for monitoring this sort of
thing like could you use this in
production or do you tend this to be
like just a dev only tool I think it's a
demo Michael okay so every episode side
it is more about like if you have an
understanding of your system and
actually I will be very honest I've
learned a lot when I created this tool
because I saw that okay I will intern on
this and let's just send a message to
this one or kill this one and what will
happen and I have something in mind and
it actually was a lot of learning so you
can read a lot of blog posts but on the
other hand seeing something before your
eyes really have and that's that's the
right target this tool not to production
usage okay cool thank you actually a
question when you developed your app I
imagine either there's basically two
portions right there's a portion which
looks at the app and then gets all the
information about the processes and
communications and then there's the
portion which actually renders that
information how inter intertwined are
those two or could they be
interchangeable like you could create a
separate rendering thing or possibly
even go for like a 3d approach it's a
rendering using like a desktop
application well the cold is kind of
coupled right now because
the thing is that there's just a very
good book just published the being
internal Sangeeta and I read through
that if I'm interested in something the
very real concept I get actually very
raw data and to level up to the to our
understand to abstraction I need to make
the code a little bit couple then it's
actually four bit like some magic that
it should be very easy to like extract
like just and check again stage and flow
invalidated how does it really works in
that one but you need to dig deeper into
process dictionary to get the actual
information and that's why now the code
is kind of very subtle it would be very
hard to make it extendable easily
expandable that's what I thank you I was
looking forward to looking at your code
to to see how you did it
I think we have time for one more
question just going to ask you about
your visual design choices were you
inspired by the London metro map and
secondly what do you what is the meaning
of animation in your design is it just
to draw the attention of user to things
that have changed so yes
the previous version was not like a
metro map but I give a little a very
shortened version of this talk and there
are many people from London and they
already very intrigued to see the London
match of that and because it is a very
the concept is of the mental maps and
how the London metro map is designed to
get just the most important part of the
information but still it's very rich
that's why I wanted to apply and that's
why event for this metaphor and the
animation what you intend for them to to
signify in the design
it's just to draw some attention to
what's happening the new thing I think I
edit animation that's what's happening
what I just recorded but what's most my
intention so actually I plan to to creat
like more use cases that how this tool
can be applied to actually escape it but
I haven't get to the point where you
really start with like a veterinary
horse so like an application that has
all the kind of diseases that can exist
and I haven't really had the time to
jump into actual softer and and to
investigate that one so I made that face
thank you one more round of applause
please</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>