<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>WombatOAM - The best OAM tool your Erlang systems can get | Coder Coacher - Coaching Coders</title><meta content="WombatOAM - The best OAM tool your Erlang systems can get - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>WombatOAM - The best OAM tool your Erlang systems can get</b></h2><h5 class="post__date">2014-07-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/59U74925Lzc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the erlang
solutions monthly webinar my name is
Martin maliciously I'm the solutions
director here at erlang solutions
today's webinar represents a
continuation of a series of webinars
that we have been running across topics
of interest in the world of Erlang and
dealing with solutions based on the
Erlang programming language today
specifically we will be talking about
one bad OEM the latest technology we
have developed here at erlang solutions
now one that came out of years of
feedback we have persistently been
receiving from our customers telling us
time and time again and that whilst
benefiting from their airline systems in
actuality they had very limited
visibility into their Erlang nodes and
clusters we therefore built one bar to
address this challenge and to take over
the monitoring and management of any
Erlang system allowing for complete
transparency into its workings and
performance and enabling proactive
responses to any issues starting to
develop in the system so one bottom is
effectively an operations and
maintenance tool collecting over 100
pieces of metrics from across the Erlang
nodes in clusters
posting modifications raising alarms is
needed orchestrating injecting code and
managing deployment today's talk will
provide you with the very fine detail of
the inner workings and capabilities of
wombat as well as a demo showcasing
these capabilities as we only any live
event please excuse any technical issues
we may face today just to start by
telling you a bit about erlang solutions
we are a products in services orientated
company we are completely devoted to the
airline programming language and since
our founding in 1998 we have worked with
organizations and individuals using oral
and helping evolve the language and
supporting people and businesses using
it today we have about 80 people across
offices in London Stockholm Krakow
Budapest in Seattle and working on
interesting line projects across the
globe we are very keen on creating value
and competitive advantage for our
customers across sectors and through the
unique features and characteristics of
Erlang as a language
we're also equally very ambitious in
developing airline based products and
some of those products
include our Mongoose I am messaging
platform the react distributed data
store and of course one by OEM as well
as other solutions applicable across
sectors and problem areas where our line
makes sense now I'm very pleased to say
that our speakers today are Francesco
Cesare me the founder of erlang
solutions in its technical director and
Java Hawk the lead developer on wombat
OEM please allow me to finish by saying
you are welcome to post questions
throughout the duration of the webinar
you can use the chat facility on the
webinars interface for that purpose our
speakers Francesco and Chavo balanza as
many of your questions as time allows at
the end of the webinar if any questions
do go unanswered please raise them via
email using the following addressed
webinar at Erlang - solutions comm if
you're interested in learning more about
one bio a.m. or a line in general or
just wish to establish whether they
could be a solution for the challenges
your own business may be facing by all
means get in touch with us contact me
directly my email address will be
displayed in one of the final slides of
the presentation that we'll share with
you today the same goes for any other
questions you may have
feel free to contact us I would now like
to hand over to Francesco and Chava who
will be glad to start us off hey my name
is Francesco Sweeney and the founder
technical director here at Learning
Solutions
I'm Joe Chavo
I'm behind bon mots architecture and now
I'm working on deploying nodes with BOM
but on different clouds and making sure
that scares okay so if a one path
started you know what I was spent about
a year helping an Operations team in
large company increase top times of the
system and optimizing and customizing
the way they do things and every time
there was an outage and we put a lot of
work into what could have been done
better yeah and every time we got woken
up in the middle of the night to address
an issue you know we made sure that
never happened again
and you're the experiences we had in
that department in that organization
managing our clusters are no different
than experiences you find in
the other organization no larger small
and you know from our end they're
telling solutions with customer
scattered all over the world and a lot
of what I do is in spent large part of
my job which is is traveling around the
world and speaking to discuss tippers
you're trying to understand the needs
and issues and you know a typical
problem we see is a typical problem we
see is the neutrals with the outputs of
a hero programmer yeah there's nothing
wrong with getting a system out during
four weeks you know the big thing which
you know the big question mark you need
to ask ourselves is what happens once
you've got live and you know from our
NGO we've run projects where
documentation alone took months to write
so you know if we come in and we set
aside the arguments that you know
airline code itself documentary you know
we need to start figuring out and ask
ourselves or the question is the
developer you're supporting the system
the one who gets woken up in the middle
of the night when issues arise you know
how do you know you are experiencing the
issues in the first place is it the
result of your customers calling in
saying they can't access a service or
you know when operations actually go in
and you know when they receive the first
school that there is an issue you have
operations already been working on it
you know trying to resolve it and
address are they already aware of it and
assuming you've got all of your support
issues in place you know and I'm
thinking like raising audit trail
statistics and visibility know how much
code was actually written how much new
code was actually written you know if
you have a worker OAM libraries in place
an infrastructure in place all you need
to do is reuse them from one project to
another and only focus on the business
logic itself another notion you we have
to explain is the myth of the nine nines
availability and indeed you know
Ericsson have achieved an highs
available in some of the systems over a
certain period of time and you know to
be frank I'm sure others have also
achieved 100%
those days there was no service outage
the truth is you know not everyone has
unlimited budgets and teams of hundreds
of developers and usually you know what
we tend to argue is you know five nines
when it comes to hourly is much more
realistic you know five nine five nines
a place about three minutes of downtime
per year now to achieve five nines
however is not easy and you need to
implement pre-emptive support you need
full visibility of what's going on your
system and you need to have the
capability of resolving issues before
the escalate and cause an outage you
need systems that you have to failure
systems which sell feel and ensure that
there's no single point of failure you
know so what you can achieve in your
five nines at a fraction of the cost of
other technologies it still comes as a
cost and this still work behind it
thinking that using our line and
everything else we'll have magically
resolving itself doesn't really work
that way
and many of the issues you know you will
face are not necessarily software mating
if you have power backup what happens if
the network administrator trips over a
network cable messes up the firewall
configuration or what happens if you
have hard disk fails you know the
largest part of issues occur during live
upgrades live upgrade and software
upgrade during run time is great
but even there it all comes it all comes
at a cost so you know whenever your own
you know I queried you know how much you
thought was written in the four week
project I was referring to live is which
include metrics alarming logging as well
as listing a lot of other usable OTP
applications and components you know was
you know talking about the whole idea of
reusable components which will also
provide hooks into your existing
operation and maintenance infrastructure
and if you looked at what's available
out there today there are a lot of
homegrown solutions for monitoring and
management and they'll all have their
advantages and disadvantages yeah not
just for example as a plug-in but it
only covers the very basic functionality
fall so an extra meter or you know
libraries which will connect your
business metrics but you still need to
capture this data and story somewhere
you still need to
we'll get your business metrics with
your system metrics and another example
is anthem and pop shows real-time
processing it you know such as a number
of reduction but you know there is no
history of peak analysis so if your
systems crash you know how to manage
your postmortem put the bug mean how you
actually see the peaks which may be led
up to the crash and you know finally you
know how many tools out to focus on
error clusters you know how you know
what tools you have to configure them to
handle orchestration how to scale in
capabilities and capability based
deployment in hybrid clouds or something
as simple as automated software updates
you know there's not much your shut up
over to you yes thank you Francesco I
would just like to spell out how the
visibility and the operations part
translate to combat
so in boombots case and let me know what
is it visibility means that you see
what's going on inside your system and
this room button one positive it means
to see what's going on inside your along
yet you're not
and what homework does is when it
connects to your noise it starts
collecting metrics notifications and
around from these dots you can use this
data to both prevent the failures from
happening and also if they do happen
then you can use this data to
investigate why this happened to prevent
it from happening again
fortunately if you have a big system you
probably already have some tools that
you use for monitoring them and you
don't have to throw them out in that
case because you can integrate phone
back into your existing infrastructure
meaning that all the data that's
collected by Pamba will be pulled over
to your system so that you can view your
data in the day that you are accustomed
to so that's the visibility part and the
other respect with which fumbles can
help is the operations part and that
means that you want to have a method for
deploying your own system you want to
orchestration meaning
that you want the deployment to proceed
in the day that's the best for you you
want to be able to manage the
configuration of your system
for instance you see them something that
is going on in a few notes so you want
to change the laggard log level you want
to lower it so you'll get more
information about those nodes or you
really want to set some configuration
value to be used in the future under the
operations part this webinar will focus
on the visibility part of homework with
a few little grant classes at the
operational spot over to you Francesco
yeah so you know what is wrong and you
know before giving you more concrete
definition of what one that is yeah I
want to go in to deepen you know well
into a few of the many stories which
inspired Robin in the first place and
you know we had a system which was
handling thousands of transactions per
second and in this system a member of
the operations team types of an issue
attaching an airline market he went in
he compiled it he loaded it into the
Alpha BM and quickly realize it didn't
solve the problem before he would solve
and went ahead deleted the being fired
from the patches directory
no what he didn't realize is that the B
model was still loaded in the airline
beer and so the code attached was still
running now in this particular case you
know taking down a rebooting the system
was not an option you know there are
tens of thousands of requests being
handled in that system at any one time
and not only we're gonna know if
rebooting the system would have solved
or addressed issue the result is a
developer ended up wasting a whole week
before he realized that the version of
the module in the system was not the one
that would really was originally for
running and not only this system had
this particular system at thousands of
installations all over the world it had
really good visibility and really strict
procedures which staff had to follow but
in the middle of the night obviously
they weren't being followed is human
nation you try to solve the problem
through trial and error expected as
possible so you can come back to sleep
and you know how would what would have
helped in this case well first of all
every shell command in one bag would
have generated a notification and that'd
be log century their denier who would
have been able to remotely view the
complete shell history of this
particular this particular operations
staff and as well as a shell history
every other node and every time the new
node is loaded in the system a new
monitor is loaded in the system another
notification would have been generated
and finally module versions are closely
monitored you know this particular
system had nodes running the same
release that would have meant that these
nodes would have had to run the same
version of that module instead you know
what happens before but is by monitoring
the modules if two modules running in
nose of the same type differ an alarm is
raised and this is one of the many
things where you know these five days
you know troubleshooting could have been
spared when dealing with it so you know
what is one bad one but is an operation
and maintenance tool for adding based
systems and what it does it gives you
full visibility of what is going on into
your attic clusters either as a
standalone product or by integrating it
into our OEM infrastructure and as an
example you know here's just a
high-level overview of your one-bite
architecture but the way it works is
that one part will be a provide
interfaces to observe legs gratified
cacti we are implementing an SNMP
interface to connect to such as HP
openview and get your standard nibs
now it goes being another one we can
access also one more through a REST API
which is keeping the door open for a
species or mobile apps and for those who
don't have anything in place we're
providing a simple web GUI which is what
we're gonna demonstrate today which you
know gives you access to the food
visibility of the system and the way you
know the way it works is that in in in
one but you'll actually go in and you
start providing a node name and a cookie
and one will automatically connect
itself to this particular node visualize
what's in there
based on the applications which are
running in that particular node inject
agent code so no basically no extra work
needs to be done no you don't need to
include anyone but specific applications
into your system so even if your systems
be live for a few years you can still
start to pull warm back and start
connecting to it and getting full
visibility so you know let me give you a
few examples over what you have your
warm back now you know here's an example
of memory usage and you know you'd be
surprised over how many a few systems
have this ability of memory in there and
virtual machine is actually being used
now if for example your node runs out of
memory or no historical data exists you
know showing you the crash as a result
of memory which happens over time or
sort of a freak process pike so you
won't you don't have the information
which shows you what has happened
resulting in this memory crash and what
you see here is a graph they are
plotting the memory usage and we can see
a few spikes are happening after 3 p.m.
you know the metrics are consolidated
and aggregated we consolidate metrics to
basically be able to reduce the space
needed you know to store longer
intervals and we aggregate them to be
able to go in and start correlating
metrics between each other what you can
do is you can go in and configure
intervals
you know the default interval being 15
minutes an hour a day and a week we also
recently have you know we also recently
have added alive metrics which means
that you can actually be plotting live
metrics which rotated every few every
couple of seconds Shabana thank you
can you go over to the X lied yeah thank
you
so one bot has different groups of
functionality it collects maintenance
alongs
and notifications from the loads and
what I'd like to point out regarding
these groups of functionalities and
similarities between
and their common feelings so one of the
common themes is that one word
automatically starts collecting all this
data metrics alarms and notifications
once it connects to an old and after
collecting this data during collecting
it and it will store all this data in
its own database it has a rest interface
and it makes all this data available via
its test interface it also has a web
dashboard which uses the best interface
so you can very conveniently visualize
all this collecting information if you
have another system graph is the mix or
Nagios of whatever then that's another
way to get all this data visualized the
other common theme between metrics
alarms and notifications is the sources
how they are collected so if you have an
alarm mode then you you may not produce
any metrics around zone notifications if
you haven't thought about operations a
lot but even then one but will collect
over a hundred metrics about the atom VM
and many alarms and notifications the
other source of information is if you
decide that you know the metrics alarms
and notifications that are important for
your system and you want to generate
them and in that case you can use otps
built-in solutions for example you can
use the sasl along too many alarms and
you can use the SSL error handler to
manage other countries and then use
these systems one pass will
automatically pick a few columns and
notifications or error log entries and
collect them just like it will collect
its own built-in data the third way to
generate your data is to use third-party
libraries for semantics of meter an open
source metric collection library
alarm for elin is similar for olives and
flagger is similar for looks and you
know in cases if you use these libraries
on your nodes you don't have to know
anything on your note about combat but
when you connect these notes with bomb
but almost will pick up all this data
actually and finally if you have a home
run solution for handing all this
operations data then you can use a
plug-in infrastructure to implement your
own way of producing matrix alarms and
notifications over to Francesco yeah I
like telling stories you know one of the
many stories is a system which was
running out of memory regular intervals
and when we went in and started
investigating we realized that in order
to save memory that he still believed
they were saving memory the user would
component converting phone numbers to
access thinking that we just pass in an
integer a reference to the bathroom
table around useless memory and what was
happening is all they were seeing where
processes are able to allocate men and
the whole node crashing and you know
some of the metrics we have will include
all the different types of memory usage
so you know some of the metrics were
will have a system memory allocated
active memory so how many male how much
memory is actually set aside for atoms
and how much of the atom member is
actually being used how much memory is
the code using the ETS tables ports as
well as your the memory being used by
processes themselves and you had this
team at an access to this matrix they
would have seen that you know by default
that all the process memory was stable
over time and taking it further yeah
they were started aggregating the data
and you would have seen an increase in
the total memory usage which it
eventually runs out amendment this
increase could have been over time as
well as an increase in the active member
itself and know the way forward would
have been you to correlate that with you
know the number of atoms
that's another metric people in
regularly and which we take care by
looking at the atom table size and you
know they would have solved this
- no time possibly with some of the
alarming they would actually gone in and
been able to realize that them we're
running out of memory and you typed
addresses before the note itself crashed
you know on the metrics idea we have
metrics and distribution ports office
modules you know process information
such as garbage collection message
queues process state as well as
reductions and we're actually breaking
down a new process level information on
an application level of granularity that
means you know you're able to see which
applications are using the most
resources for your business metrics as
Chavo mention your votes of an extra
meter or your you can collate your own
your own business metrics with the
standard I rank VM once so you're able
to go in and look at the number reduces
which are logged in and try to map it
based on your memory usage you know even
alone so most alarms will have a story
behind it as do notifications and you
know CNN arm is a form of warning in
your system highlighting a particular
issue
now when the issues results the alarm is
cleared so an example of an alarm could
be an 80% is full alarm you know it's
something you want to address before
that this becomes completely full and
you're going to delete some of the files
get you is usage under 80% and alarm
you'll automatically be cleared and your
arms by default will have different
severity is usually warning minored
major and you're depending on the
severity of these alarms you can go in
and generate triggers and this triggers
could result in a page of all and SMS
being sent or an email and you know they
could be generated when raising from a
crazed or when be cleared in total you
know we've got about 25 alarms in place
right now and humans are being added in
every sprint you know just to give you
one of the many stories you know at one
point one of the operations team messed
up a firewall configuration it happens
all the time what happened in this
particular instance is that you know
tens of thousands of users were pressing
the refresh crushin trying to react sess
the service and they weren't able to get
through they noticed very quickly that's
you know that you know there was an
issue with the firewall they fixed it
but by the time they fix the number of
users pressing the refresh pressure I
grown to a stage that the note handling
these requests got got a massive number
of requests and you know for every
request were spawning a new process and
by default the system limit for number
of process had not been changed and this
resulted in no crashing and all of the
users being kicked out so all of a
sudden you had a set of users in
pressing refresh one more time hitting
the second note and you know killing it
and then hitting the third note
basically in killing it you're basically
creating a cascading failure now this
was a while ago no today you know not
only have with many more processes than
you know 50 60 thousand but hitting the
limit will not cause a crash on the VM
anymore your regardless off of it you're
having no there are alarms which when
you reach 80% of the process limit it's
raised and we get 90% the severity of it
is raised to to a major alarm and you
know we'll be going and looking and
seeing how close to you you get to
reaching this process limits will help
you put in place primitive measures and
have to do capacity planning or yeah
another example of alarms is the
processors message queues going too long
you know it's often a warning that your
producers are producing requests faster
than the consumer can handle them and
when this happens you know an alarm is
raised and if the message gets longer
this is a very dis increase and you know
clearing it once the alarm will select
clear then you know why best use grows
you know this very system dependent but
at least we're gaining we are alerting
users of it another example of alarming
in a live system a support engineer what
didn't executed happiness call in the
shell and what he was doing when
inspecting the data tried to resolve and
address a particular issue and what he
didn't think was that the table he was
according to activists on contain about
a million entries entries he used the
allele instances in the table he fixed
the issue and he exited the shell and
that was it not thinking more about it
until a few months later someone else
came along and did exactly the same
thing but you know this the difference
is that the second time around
the use
cause that particular mode to crash and
you know the issue here was through the
show history every time you execute a
command in the air in shuttle
there's also stored in the shell process
and that meant that the note at this
point in time ended up having three
copies of it taking millions of elements
and it didn't have enough memory to
handle them so you know one of the loans
we have is which comes and works leap by
default it is if your show if your shell
histories if your shell size it becomes
too large an alarm is created and
generated and you're then given the
tools to go in and clear it and you
clear it remotely without having taxes
to show itself we also know we've got
along from alarm which is an open source
Airmen module generates alarm and the
SAS will alarm handler and they're all
retrieved by default and you can
retrieve your own alarms you know when
writing your own customized plug-in
modules yeah another examples you look
at notifications you know a lot of users
have hundreds of nodes in production and
you'll be surprised to hear that most
for most of them the only way to know
that no two key behaviors crashing we
started is to not only the machine
connected and the irony of it all is
that operations will not give developers
access to these machines so you know
you've have system for cheating but you
can do creative support and avoiding
failures by looking what's actually
going wrong and you know notifications
are also you know in these case they're
only used your foremost for post-mortem
examination of the system and if
something goes wrong you look at these
notifications you know to resolve them
bones you know just just like metrics
you know if your system crashes now one
but goes in and it will retrieve all of
your all of your crashes and error
reports into one place you know through
a web GUI where they can be viewed and
monitored and notifications we handle
including your system monitors you know
such as course being busy
including the disputed island port
sometimes is known to hang if there's a
large message going through if the
process pendulous garbage collecting or
as easily not memory space you know the
Razer dedication schedulers going to
people waking up you know as well as
she'll come and speak typed in
applications being started no code mode
is being purged or or loaded shove
anything to that no not really at this
point so you're continuing what we have
here is I'll just give you a quick
overview over some of the screenshots
after which you know travel will go in
and give you a give you more detail with
them over over a wombats now here is the
adding of an you notices you only need
to do is add in a note name and one but
will accept both long name in short
means you add in a cookie and if you
click discover connecting knows a press
that note will go in and traverse all of
the knows trying to find out which of
the nodes you know with what nodes are
part of the cluster and then
automatically connect to them inject
agent code and stop monitoring them so
in this particular example we've
connected to RIA cluster consisting of
five nodes and one bug itself you eat
your own dog food wombats an airline dog
so one pack is being monitored as well
through you're using one map there's a
graphical topology of the system which
can be seen in this case you know we've
got our system or a cluster which
consists of two node types one is the
real cluster one is the real node type
and the other is one at number five and
the other nodes here as we see our nodes
which when we're currently visualizing
information this is basic information
which we're seeing right now much more
detailed information is being added as
metrics we've got your metrics will
include counters engages as the simplest
one of one end of the scale and more
contracts well such as histograms meters
and spirals here we've got an example of
vibe metric so metrics which is being
updated every second and what's
interesting here is we're seeing the
blue line here which is a total memory
consumption and we're seeing the green
line here which is a system memory and
we're seeing in the blue line there's a
spike and by
and being able to view process memory
we're seeing that the spike is caused by
the increase of the memory used by the
processes themselves so just an example
on how they can be coordinated to try to
figure out in seeing what's wrong
here's another example even here of you
know binary memory a process memory and
the total memory being used and this
example is also being mapped here to
cacti and where information has been put
in by cacti and visualized in captain
this factor would then allow you to
visualize your system metrics and
metrics from other other parts of the
system you could be always metrics or
metrics from other systems which
interface towards it which are not
necessarily written in everything
alarming this is the alarming window we
when alarms are cleared we basically go
in a show showed that to be clear in
this case you're three nodes which had
crashed her to be terminated when the
load came back up the no diamond or was
cleared we're also seeing another log
which is old code miners so old code
means that you've got two versions of
the code in the system you've got an old
version and a new version and this can
be dangerous because if your process is
running the old version of the code you
know next time you do the code upgrades
those processes will be terminated by
default so this will give you a warning
that you need to go in and purge real
code you know freedom memories are using
and if purging code won't clear the
alarm that means as a process running it
you need to do a you know you can you
need to hurt you you need to terminate
those processes what's doing it you're
also seeing alarms where you know the
disk is running out of space
notifications we're pulling in your part
from the system notifications of which
are about twenty or twenty five right
now we're also pulling in all
notifications from the satchel dog
handler as well as logger right here ok
Shaba over to you for the demo you don't
have anything to add you have anything
to add to what I've said no I will end
but I have to enjoy anything more
excellent
so can you see the robot not afford such
a scope can you see the motherboard no
no yes here it is now perfect yeah and
now yeah excellent
great so in order to beat Murphy and we
recorded the video showing one but slab
that form and I'm going to use this
video to demonstrate from what's
features so on the top of the dashboard
you see that there are different tabs
topology matrix notification alarms and
orchestration and these terms represent
the different groups of functionalities
today we are going to talk about thirst
for from topology two alarms topology
means the set of nodes that are handled
by one box here you see that we have two
families 301 for seven family with five
reuploads all of them in upstate and we
have the room without itself in another
node family as Francesco already
mentioned since one but it's just an
element node it can be managed by by
itself if I click on a node then boom
what shows me some details about the
node for example this is the UID that
combat assigned to this load each load
the important part is identified with
ideas like this one if I would like to
end the node then this is the form that
I can use there are two ways to add the
node in both cases I have to type the
node name and the cookie difference is
the derived check the check box below
the discover connected nodes if I don't
check it then boomers will use air and
distribution to connect to this node
using this cookie so the lacquers and no
then I get a new Vinod you see in the
left the other mechanism is that if I
have one cluster of nodes that I want to
add to home but then I select one of the
nodes and type the name of that node
then noting that last I have to do the
same cookie and I take this cookie and I
state that I want to add not only the
node whose name I typed but also the
last step all the other nodes with which
this node is connected so when I add
node at the node then what happens is
this one but connects to this node asks
it for its neighbors it connects all its
neighbors as well and then connect to
that connects the neighborhood the
neighbors and so on so it transitively
discovers the whole network of nodes i
cannot only add a node but obviously i
can also remove a node and i can even
read without the family so that's about
the topology now let's have a look at
matrix there are different ways to
collect matrix and different ways to
visualize them and there are is a
different kind of matrix from just go
mention that there are histograms and
numeric metrics and spyro 3 meters so
because of these different combinations
we have different subtypes here from
numeric matrix to live matrix but today
we are going to have a look at only
numeric matrix which are the most simple
one on the left you see the same nodes
and not families if you want to have a
look at the matrix of a node you click
on the node and there you see metric
categories from memory down to force on
matrix there are two kinds of metrics
even what at this high level there are
built-in metrics which are which go from
memory to system stops
and there are custom metrics which are
represented here only by the force of
matrix group the first the first
category from numbering system starts in
the beauty metrics category we have
metrics that are automatically collected
by home but no matter what your node has
or does in the for symmetric category on
the other hand and we connect those
metrics that your application produces
so if I Maury category for example then
we see that there are ten concrete
plastics so when I select total memory
there on the other side we see a metric
as collected from this node minute by
minute in the last hour
if I select another metric then I guess
see another metric often it's useful to
visualize different metrics at the same
graph for example if I see that total
number is used for something and I want
to see what it is in before then I can
put that total memory and all the
different kinds of memories and in this
example we see that most of the total
memory is used for the system memory so
I don't have to investigate the
processes for example and you see that
live in the bound is at the same place
in these two memory types the other
metric that I would like to show you in
one of my favorite metrics it's the
message queue length metric and I like
this material because it was actually
used to discover and fix a bug and the
story is that we have a load testing
tool developed here at our solutions and
they use bombard
to monitor downloads and then I'm using
it happily
checking for the metrics
and they saw but they didn't expect that
the message queue length was going up
and up the message queue length
mitrik shows the summary of the length
of all the process queues in the system
so that meant that some processes were
feeling that their message queues they
were getting messages and not processing
them and they didn't think that if could
be a problem in the system but
afterwards when they saw this graph they
were able to find the process that was
causing the problem and they were able
to fix it so that would be in matrix we
have over hand if so I don't want to go
through all of them let's have a look at
for some matrix the real node uses
Fossum to generate a bunch of matrix
things are interesting for example the
real KB pre-comic sale matrix tells us
how many times we have figured to
execute frequently too
and fortunately the number is zero
because in order to make it easier for
you to imagine how is for something
works that you put a metric in in your
own node but it's still connected
corrected by home but I will show you an
example so we connect to our test node
with an option and we are going to use
Fossum to first create a new color tab
which I called cars not that interested
meaning but we haven't had such a metric
yeah and we are going to use the notify
function to add some value
we've been increment its value from 0 to
PI and then we go back to metric sorry
when we go back to robot we will see
that it actually picked up
do you metric
two extra note when it's displaying that
it's one you can use not only warm body
to visualize the metric that one was
collected but on what is also able to
push it through the matrix into external
tools for example graphite graphite way
of showing matrix is that it builds
these nice hierarchies that you can see
in the left and on buhdeuce is this
hierarchy to create a folder like entry
for each node likely on one in this case
and put the metric matrix inside these
folders so if you click on active timers
for example then you will see the same
graph that you would see in the box and
now let's see how to configure robot
collecting metrics and pushing it
pushing them to graphite since basically
two lines of configuration this is one
bad config file but you see here is that
we say was the first image graphite is
listening and what's the port on which
graphitic listening and by living this
information to boom bada boom OCA start
pushing automatic for I keep this
address so this was about matrix now
let's see notifications if you click on
the notifications tab you will see all
the notifications that were collected
from different nodes but you will see
the most recent past year if you are
interested only in the notifications of
a certain node then you click on the
node and then you are happy because no
notifications so let's generate some
first we will use blogger which is an
open source open library to find an
analog
especially you know and when we do that
and go back to Walmart we will see that
one but collected this metric sorry
collected this entry instantly and this
has popped up a message for us and if
they did it into our pocket able to
begin open the entry in the table to get
more information it is field there are
no more information but in case of a
supervisor crash for example most of the
information is is there in depth
books with lager
as with any usual law tool you can look
not only error messages but you can talk
info or even debug messages and you
don't want boom bus to collect all these
messages by default and showing pop-ups
and and everything for them so what
about that is that it starts on the
warning level and by default collects
entries above that level so when I send
an influencer here nothing will be
collected by one word but if I think
that there is something fishy going on
with this node then I can set the log
level to info I can even flip to another
node and then I generate an infamous
each after that then I will see that one
was collected it the next thing that we
are going to do is that we are going to
generate real crash not just looking
something but we had a test supervisor
here so we create a child for the
supervisor and we make sure that it
crashes and what you see in home but is
that the same few entries that are
generated when a supervisor child
crashes
so that's about notifications the last
thing that we are going to check out
these alarms again we steal all the
alarms here but if you select a node you
only see around from that node and I
think he loved notifications let's
generate a few alarms ourselves the most
simple error is the node down alarm
simply quit the node and boom but
witness tanzic realized that some there
is something wrong - no this town it can
either mean that it's inaccessible text
something wrong with the actor or it is
actually stopped the role is down home
but is automatically trying to reconnect
to the node and if we note that it will
succeed in a few seconds until all comes
up and the other arm is cleared now
let's generate a few more hours from the
node let's start with a beauty along
this arm so we have an alarm when the
autumn table is almost fielding
so let's generate a bunch of photons
yeah first I need a typo I forgot the
first parameter but a second time we
will actually generate the budget items
and when we go back to vomit we'll get a
new alarm and these are the kind of
alarm that such as post edit operators
should be aware of because even if this
doesn't cause the node to crash now it
allows them to prevent failures in the
future and finally let's use the
built-in mechanism of
al-ahmadi need to create another after
creating an alarm it's collected by
humble columns are different from
modifications because they can also be
cleared so when the application on the
node that
raise the other things that see the
problem here that it on the system it
can clear the other and income but you
see that as they are unskilled so thank
you for listening today we're reviewing
the demo and Francesco let's wrap up
like discuss the roadmap absolutely so
show my screen so very quickly just to
wrap up we've got the roadmap which is
coming and you know what we're doing
right now is integrating with standard
mode you know integrating one back with
standard monitoring tools so we've got
the alarms in place we've got the
metrics and we've got notifications
we're looking at you know standard tools
or to zabbix and Nagios looking at
interfaces towards OAM software service
providers and I'm thinking data talk
here we're thinking you ready
you Splunk lovely and others as well as
adding an SNMP interface which which
will allow us to you're worried they are
interfacing character for the REST API
but this will allow us to actually
started pushing metrics to cacti and
you'll be able to start using other
tools such as they feel preview and yep
standard alarming tools we have your
today know system metrics alarms
notifications for Sasol for OS moan
louder alarm extra meter and Folsom but
throughout the remainder of this year
and your next year we'll be adding many
more applications and your media is the
first one in line we're looking at
different see my sequel posters and
other database drivers and it would be
really great to monitor activities
versus databases the latency of those
requests as well as you know get
notifications when you're the state and
things
change your count who is another one
which our customers have requested them
both integration with standard
monitoring feeds and your brother's
protocol applications are very much
customer driven so if there's something
which is not on here but you're
interested in it
come get in touch and let us know
another area which we're focusing on is
looking at plug-ins for existing
out-of-the-box the application so
looking at for example react rabbit
energy Mongoose IME jeopardy actually be
it will be great to start receiving
alarms metrics which are specific and
specific to these systems as well as the
ability to do operations on these
systems from the operations point of
view we are you know on the roadmap
we're looking at integrating tools such
as he talked team an admin all in the
dashboard when we've drill down to a
particular node you're then able to go
in and you visualize you know the state
of those nodes
you know if Lulu tools which you can
reduce the access for web-based
interface we're looking at configuration
management you know how do you deal with
configuration across rust around any
notes you want to change environment
variable of one node how you sure is
propagate across all nodes and you know
how do you monitor environment variables
which have to be the same across the
cluster we're looking at live tracing
and providing you the ability to go in
and start generating your trace events
on particular parts and actually clean
and measuring latency of certain
functions and particular functions so
then once your systems gone down and
then turn on the profiler and get the
feedback over where you're actually
spending your time early next year
probation will no longer be in beta you
can today deploy
earning based systems to hybrid cloud
but you know we're looking at you're
making that as a you know feature bring
it in 1.0 and making it a feature phone
back as well as start investigating and
implementing automated software upgrade
so how do we actually have through the
one-bite interface go in and start
visualizing your software
pre-procedure and simplifying
introducing a lot of the manual errors
which they're here and you know towards
the middle of next year all into 2006
we're looking at the rules by section
we've got full visibility over what's
happening in your Amex systems today and
what we want to do is a preview a system
with a rules based engine and
distributive space system will be
running with its own DSL so I think my
favorite example of what we're trying to
achieve is you're monitoring
early nodes of a particular type and you
noticing that they're running at 100%
you would have been doing so for the
last hour or so or even last 2-3 minutes
so automatically we'll do is go in and
put a new system on Rackspace or Amazon
and you know reconfigure the load
balancers and you know startups are
loading no to them and you know that
notes are running 100% CPU you can
consider your add another node and if
that doesn't solve the problem you send
out a notification and you get someone
out of bed to go instruct visualize and
make an issue itself
another example is you start getting a
an alarm telling you that 80% of the
disk is full you automatically go in
into logger and reduce your the
wrap-around time of the logs and
possibly go in and start compressing
some of your logs you think 90% of this
will alarm you start deleting some of
the logs you know you don't need so this
is the roadmap for the next well next
year and a half at least but very much
customer driven and you're very much
there to address the needs
you've managed to gather from our
clients so any questions
the shaman you don't do you have
anything to add if I missed anything in
the roadmap know you're fretting you
need to do all this work
we've got a whole team in Budapest
working on one bet on it so he's not
alone from just going on thank you very
much for an inspiring talk on one box
and I'm sure the audience was funny you
know thank you for that now I'm glad to
say that we've received a large number
of questions from the audience
throughout the duration of the webinar
and given the few available minutes we
will be able to answer perhaps five or
six of those questions the remainder we
will answer by an email following the
webinar so without any further ado the
first question coming from Dominica it's
quite an interesting one referring to
the appropriate tuning of the use of
wombats
so what Dominic is basically saying in
summaries that is of course in a perfect
world ideal to you know monitor as much
as you can and see all the sort of
errors and issues as they are starting
to develop the problem is if you start
over monitoring then you're obviously
influencing the performance of the
application itself so Dominic is asking
how do you find the right balance
between over monitoring and under
monitoring with use of wombats so there
is no one-size-fits-all and you never
know when you're gonna need that
information until after the event has
happened so what you can do is you can
actually configure all of the individual
items that you monitor to you know on a
per system basis so if you want to get
your process numbers you know once a
minute you do that once a minute or you
need to get it every a couple of seconds
you get it every couple of seconds so
that's down on a per metric regularity
and you know to add to that you know
this is something which in the future
can also be automated you know from one
system to another now a lot of these
metrics are there because yeah we know
that we need them at some stage or
another and the idea that you know when
we later on start creating a trigger
based system you know that they will
actually help move this forward
would you like to add anything to this
yeah yeah an idea that came to my mind
is they say that the first tool of
optimization is that you have to measure
because before you measure you don't
know so maybe a similar approach should
be taken here that if you decide that
you can give let's say 2 3 or 5 percent
of your performance from your production
node in order to get the visibility
that's what provides then you can select
as many metrics and whatever so that you
you get the most of what you you think
you are able to do and also to add to
this we are actually recording the
latency of all requests it takes to
gather these metrics in one batch so
we've got full visibility over you know
what's expensive and what is it we're
also seeing the reductions in the
processes gathering you're picking them
up and your based on these we will be
optimizing and I suspect in some cases
will actually have to start adding
contributions to their own VM and start
implementing some of these retrievals as
built-in functions to reduce the
overhead they currently have in in their
neck system I think the measurements
we've done right now is that one back
will take a one to five percent overhead
on your system resources on your own CPU
system resources but obviously once
again it varies very much from system to
system thank you for that I think that
just about cleans it up another question
now they came from robots is basically
asking does one box and the nodes that
one bar is managing need to run on the
same version of languor OTP would you
like me to repeat that so basically
Robert is awesome
No so it doesn't right now at least
Shabba do you want to take that right
now
because you're implementing it so yes so
what we do is that you build and use
convert training on Bonaire long version
but before you actually start it there
is a script which will compile the agent
modules so those are the elements that
are injected into your system and when
you compile only the agent values you
can use very old analog compiler for
that so let's say that you have an 13
version and you compiled agents with
that and give them to home what so even
though one bot is running gonna current
an on virtual machine it will inject
these old byte codes into your system
and fortunately white foods are always
particular nothing gathered so
everything should just work and also to
add that you know the only thing which
is limiting in the version compatibility
is distributed airline so right now as
long as this diversion of distributed
air and the version of element which are
running warm back can communicate using
distributed air loop diversions then
you're fine we are going to be adding a
thin layer as soon as it actually does
become problems for some of our
customers where they want to manage a
large range of members but so far we've
not had that particular request thank
you for that another question from Becky
Becky is asking can you purchase wombats
as a hosted service or is wombats always
stored locally to the clients so it's
it's asking for a bit of a
recommendation on the hosting versus
storing locally so that's a good
question
we're currently experimenting with
docker and you know to provide it as a
service software as a service but I
think we need to do as it currently uses
you know distributed air mail to
communicate ideally I think right now
running it locally on your machine in
your cluster it is the best approach we
will be working in towards providing a
kind of more secure
lair from you know which will then allow
us communication there which would then
allow us to start providing it as a
service but you know experiments are
ongoing and you know we hope to be able
to start providing robot demos without
using your simple distributed airline
but not a secure connection so you know
nothing will be encrypted thank you for
that can you talk a bit about the
scalability limitations at present that
Wombats is facing
are there any scalability limitations
and what are they so sharp is working on
on that right now actually and I think
the challenge he has is to get one but
to scale to tens of thousands of nodes
you won't explain very briefly how
you're planning or tackling the problem
yes so the different home but in a way
that you have one master node and you
have as many middle manager nodes and
these video manager nodes will be
actually nodes that connect your system
so for example if middle manager is able
to handle even just a hundred node then
you can see you have hundred middle
managers and then you can scale up to
ten thousand so we designed the system
in a way but we feel package it package
all the nodes together so currently you
have only one middle manager and that
means that you can handle a few
thousands of nodes and what we need to
do to scale up is to actually implement
what we have planned and provide a very
spoon up many it alleges thank each
other thank you Francesco just try and
honor at least some of the questions
that were asked we've already run over
the allocated time for the webinar but
we'll try and answer two more questions
first one if one that injects code into
monitor monitor the Erlang nodes what is
actually the impact of this on the nodes
that are being monitored so executing
that particular code is yes if you clear
memory usage
maybe a 1 to 5 cent CPU overhead is what
we've measured so far thank you for that
and one final question and that's all
the time allows we do promise to answer
all the questions by you know the
following in webinar this is quite a
specific one it's basically asking will
1 lakhs erase lager notifications when
the log file is deleted on the manage
node due to lock rotation I can yes it
does
because it doesn't use log and log files
but it subscribes to logins dog messages
so the instant the application uses like
acted or something like a return home
but the vomit agent and the vomit agent
to be a telephone box server so we don't
use the like a good log file at all all
right thank you for that charm and we do
have to finish the question session at
least now I'm sure once again you'll all
join me in thanking Francesca and Java
for a very inspiring talk from one
Baxter many thanks to all of you who
have joined us for the webinar today
please join us again for our next
monthly webinar and will shortly be
sending invites for that following today
we will be sending you a short survey to
make sure that we capture your feedback
on today's webinar</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>