<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lambda Night - Tomasz Kowal &quot;Monitoring distributed systems&quot; | Coder Coacher - Coaching Coders</title><meta content="Lambda Night - Tomasz Kowal &quot;Monitoring distributed systems&quot; - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lambda Night - Tomasz Kowal &quot;Monitoring distributed systems&quot;</b></h2><h5 class="post__date">2014-06-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TJv1kvveMh8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">just so that starts my name is Josh come
on and I've software developer at Allen
solutions and I began my adventure
actually programming during my studies
at University of aja aja university of
science and technology and since then i
work with ocampo airline I picked up
some Scala i'm also watching closely
what happens with closure and go but my
name work is about ellen and excuse me
if my dog is too and language because
those reasons firstly I want to talk
about something I really love and
secondly I like is great for people
distribute that software time scalable
systems so i'm going to talk mainly
about five things but i find really
firstly its alarms then I'll talk about
love visualization searching products
and how do I fit the data into our
systems and these are five things you
have to think about given before
starting create your system okay so when
I started working at evolutions as an
intern I was tasked with making who is
no website that wouldn't be some
criticality so people forget your phone
in time that it was a server somewhere
in our office covered with us we have
focused to expect them because their
electricity like we're great so
sometimes server just spontaneously
rebooted okay cool as ice episode was
officially now and we configured
everything it's such a way after the
reboot it just restarted itself but
someday it didn't start as of course it
was friday at 4pm and of course I hadn't
noticed before leaving the office so
when I came back at Monday I felt really
bad at the service I was up there was
down for inside today and that's why I
thought about ours and first thing that
I found was madness legacies the
commercial as the industry standard in
IT infrastructure monitoring and it's
really true if you are searching
entering somewhere in Google this is the
first heat this is great you can set up
applications and it's a setup I got an
email when does not this time and it
worked great for me because I'm checking
my email world and when I check my
mobile phone but of course you can also
set implications SMS or instant
messaging to your computer niggas is
also a couple other cool features you
can monitor the CPU cache memory is a
disk usage it doesn't basically out of
the box but the greatest thing about it
is that you have everything at one page
the dashboard on this network you can
see exactly everything that is wrong
with your system and you can go there
each one and say ok everything is fine
and of course you have to have all those
notifications and all those alarms after
death because if there is only an email
notification I can
I can receive an email Sangha the
superiors that was over ninety percent
then I'm going to the next up that work
and I see that it is no longer true so
it's really important to have everything
up to date and in one place for exactly
this reason with dill to the library for
her life applications for your arm and
it can set others and raise them clear
down and you can comment on them and we
needed that because my girls can learn
my only about things that if the
speaking to you and I'm using the
activities that your own arms and have
it in Valdez it's also really great for
working with distributed paste because
if you can comment on other and say for
example okay I'm on it then there are no
other developers that can disturb his
actions and
we have to notice the difference between
others and vlogs because loads are
something that are written once i have
their time and ours are something the
first state and clear it can have some
metadata attitude but first times are
not the perfect solution because as i
said there is no history and when the
distance cool i don't know which there
is caught up if there are four senses
one computer and i don't know why so
next thing you have to think about our
lives and in airline but if you want to
start loving something to prove out the
vacuum is like it's a learning framework
that this feature Mitch this is
everything like other standards
frameworks for other languages of
configuring output files register
verities linings but the really
important thing for me is buffering it
gives it's very great performance
because in high performance systems you
don't want to keep the disc profile so
you have to have some kind of butter but
on the other hand you can't overdo it if
you bother to magic and run out of
memory or your systems stops being
stopped looking in real time other kind
of looks in ellen sazelin notes and such
is a abrogation for system architectures
number by bareeze basically entire lab
everything is somewhere in a supervision
design system you have workers of a
supervised and everything that
supervisor to us is locked the assassin
looks so like crash reports arrow
towards progress reports restarting
children just to anything so you would
like to have all those lost in one days
and there are two reasons for that
firstly it's more manageable the fans
all in one place we can just search it
and secondly because some of your
sisters my dick and then having a copy
of the logs is very important but of
course if you have buffering and we are
sending gloves over the network you have
to get a nice time to them because they
will be out of order you want to know at
least when i'm hosting italy they happen
because even if you have all the clocks
set up perfectly of all your servers you
can't really be sure the times are
exactly okay so after after i started
collecting blocks from from each system
I i had more dogs than I could manage
hello girl I worked the more systems I
dang and there wasn't there were there
were still small systems like the
website but there were also systems like
a notebook or systems and our office
doesn't have voltage drops anymore it is
twice as big as it was back then and we
also host all our services in a great
data center is but can the despair safe
so even when you have problems with 10
hardware it's the still remains full
story line so I would like to have all
my logs in such a way that I can see
everything about them and the best way
to convert your logs to something that
is meaningful and easy to me is to use
graphs some of the hooks are easily turn
into legends like for example how much
time it took to complete HTTP requests
you can just float them over time some
of them like 44 errors are usually loved
by the web server and so is it turns
into metrics but you can just have
number of them in a draft somehow and
let us to I know for graphing such
things is called graphite graphite is FA
consists of server and front me you can
send your locks and metrics to the
server be a simple API which is a theory
people and then you can search and watch
what happens interface and it doesn't
only stir your love it does smell
because firstly you can set up
resolutions from your data for example I
want this magic starts with one second
resolution for lightness the second
resolution for a couple of hours and one
in resolution for entire month and this
way all your loves are there and they
take up constant amount of space which
is really important when you have
massive amounts of loss on the other
hand you can also have also set of
functions that are around before you're
taking a pass from the high resolution
to lower resolution in example you can
take the average minimum or maximum of
one's same time you can also tell
graphite what to do if the data isn't
delivered on time for example your
application didn't send the log and what
to do it should I leave a black space
there should i take average of the
points
I left before the right person I just
look 0 and this is about leather pocket
in the front end you can group the
graphs so that's important things in one
place you can also apply custom
functions to the graphs before they are
displayed like very much already came
out and it's really great when you have
something that's grass in different
scales like to the CPU usage memory
research and disk usage they are all in
different scales that you can just
divide them like their maximum values
and then put one child perfect makes a
really great dashboard so you can still
see that everything is in one place and
you can just even more check it out we
also built our own tool for graphic and
we try to fit it to the helm success
because the right systems are made of a
Mike knows if you can
on this with screenshot there is a user
interface we have two logs fabulous
first one consists of one lock twist of
tuna we wanted something like this when
we click on a load famine and then on
one of the statistics we get a stacked
chart where you can see all the metrics
from all the nodes slight this way I can
put in your Holly wait if everything is
ok with the system and if I see
something suspicious I can dig deeper
into the actual load and this is the
same metric for the actual goals
currently total memory and when I see
something suspicious with total memory I
have other graphs like a fond memory
memory memory and ETS tables
and of course it is good if someone
thought about what you should measure
before you start reading it there's a
great quote by etsy should we read out
loud top of visual Jason please while
later it is moved with traffic sometimes
we'll draw a graph of something that
isn't moving yet just in case it decides
to make a run for it and for example in
one that we have a metric called number
of connected nodes each node has this
magic and it should be confident because
a our systems consist of 16 notes and
that's all but sometimes you can see
that in a very odd note it drops by one
and it usually means that there were
problems with your network so that's
something I haven't thought about before
I actualize so the holograph okay but
not everything can be turned into
metrics for example when I haven't
locked up to my server restarted its
sonar but I don't want to make a draft
pick up I could just make it 0 / 10
maritime and one when they leave a cure
it would be thousands of unnecessary
graphs so I would like the solution the
let's move easy very events by message
to and play them by their logging time
and radius is the resolution for
vocalocity search and even better news
is that there are two specific to load
management that are beautiful and the
two most popular are lost ash and rail
lost Russian has cleared server
architecture use other server which has
the elastic search pocket and it stores
authored a nap so that it would quickly
and it has clients that can pull the
data from your notes and then send it in
a while for me it's Yuri feature which
if there is a kind of look that is
documented somewhere then probably not
that kind of translator for it and can
easily start portly not there's also
prominently on each node you have to
install the client and the client wakes
up about 200 IM going to have a
gigabytes of memory after just starting
even before it starts collecting and
goes that's why we screwed up in our
case really server only it does many the
same things as well start but you have
to manually send off so you do it via
DVD in girl for my girl is basically
Jason with some mothers are the kids and
the characters the writing
it was really easy justice tale traverse
the lofts said to trans- to Jason and
the aircraft to send it we are not going
to degrade or seven okay so the
important thing that occurs is that when
you feed your system with the data there
are two kinds of solutions there's push
model for example in greater you have to
manually push everything to the monetary
system this tango with graphic there are
two solutions like for example when you
set up before language with people by
means it can start clearing your server
so you don't have to touch the server
grav on eternal we set up a ghost for
example loss that is something in
between you it starts putting your data
for you but you have to configure
something the client of each of the
levels and for example in one but who is
given is that this way when we just
point one but to the service that we
want to monitor and it connects to it
via LMK distributed so it discovers all
the notes automatically it injects the
code that sense negative 2 so it's
full solution but usually when you have
the pool solutions there's a problem how
do you make your own custom metrics and
as I said it would be good to have as
many out-of-the-box renderings as you
can imagine but it's usually problem and
you want to set up your custom images so
apparent there's a library there's an
application called Folsom and fall so it
creates metrics like counters ages
Easter grass meters there are all
different things that are documented for
example counters are starting to leave
them on the increment and decrement
histograms can even work history Caltech
time what was the mean was the maximum
info and you can also tell what if you
want the more recent data to rate that's
more and so on and so on and it has very
easy API and we wanted one of us to two
metrics that are created yes awesome and
it does it does exactly that so it is
just the best from both worlds it can to
the data and it is easy to fit custom
register so all of those muttering
solutions are discussed what do
currently use is almost everything we
use one must include the lost cat
metrics but we feed those metrics to
grab at the offer but just because
graphite has superb graphic libraries
all the love that I've metrics like
syslog events web server logs for the
fire wall notifications we push the
Grail and we still use Magnus because it
is just easy to set up it could be
redundant we don't have to maintain it
and we have three or four racers will
just go every day and check if
everything is on so to sum up when you
want to create a distributed systems you
have to press something about what
alarming things can happen and where
were you store them you have to think
about loss how will you send it to the
network are being offered exactly UDP
setting a UDP market is 54 rights of
evacuation so we don't want to send each
metric as a separate vdd market but we
don't want to overdo the battering
because you will lose there we are
you have to think about how do you
visualize your methods and will be glass
if it is there are gas or low iron at
UPS came congratulations to think about
how will you will you your data for
example we had a color that projects
from github and stored in the database
and one day it just stopped working so
we check in greater but the last
messages know that it couldn't connect
to the database into three string
because the database was up and running
so we take the loss from entire server
from different services and checked what
was passionate here and we saw that
there were several times due to updates
even though we just met earlier the
server we good we didn't talk about the
order in which the services with github
and usually then mysql was first but
this time that wasn't the case so we
just have to enforce the order and last
thing that is probably the most
importantly is when you pull the data
from your service which makes have a
continuation of
monitoring system or when you push it
from your services which makes
additional tasks or for your service
there is no government solution to it
that we're trying hard to get okay
that's all if you have any questions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>