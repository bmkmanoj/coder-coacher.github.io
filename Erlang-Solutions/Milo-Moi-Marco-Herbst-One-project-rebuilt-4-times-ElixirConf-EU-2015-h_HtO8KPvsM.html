<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Miloš Mošić, Marco Herbst - 'One project rebuilt 4 times (...)' ElixirConf EU 2015 | Coder Coacher - Coaching Coders</title><meta content="Miloš Mošić, Marco Herbst - 'One project rebuilt 4 times (...)' ElixirConf EU 2015 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Miloš Mošić, Marco Herbst - 'One project rebuilt 4 times (...)' ElixirConf EU 2015</b></h2><h5 class="post__date">2015-05-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/h_HtO8KPvsM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is the world's first
from 1978 any ideas which company might
have been behind that yeah yeah that's
right coda um most famous kind of for
having been subsequently miss out on the
whole move towards digital and then
having common caught up I can tell you
stuff it took us quite some time to get
a lick sir up and running and I am going
to talk just a little bit about what we
were building that the technical
decisions that we went through and and
where that led us to I'm not a developer
every time I'm sorry Mila will be up in
about that five or six minutes and he
actually the guy who did all the work in
terms of elixir so I'm telling two
stories basically one is the evolution
of our company and then the technical
decisions that basically I was coming it
responsible for at during that time so
you can handle two stories in parallel
but as as functional programmers I think
that shouldn't be a problem if I take
this sort of from the beginning of the
story of building our software so this
is the more less the view from my
apartment in Berlin and there was this
social gardening project going on and
there was an architectural project and I
wanted to make a time-lapse movies so I
wanted to grab JPEGs from the from two
cameras and turn it into a videos make a
little video over about a year to watch
what was going on and I got in touch
with a friend of mine
a developer put something together
really really nice be quick I hate the C
sharp dotnet developer and so we started
building this this time-lapse and it's
lovely and I said time hey listen what
you know why don't we seat that up a
little bit that's that's taking the
picture every second and see what
happens
and so with the two cameras there he did
and and it kind of worked and I could
see this this is kind of nice it's kind
of interesting
we had the bones of what looked like a
cloud CCTV where you had the camera and
it was bringing back the images back to
the data center and you could log in and
you could see it so I sort of took my
approach this I made a little website
and said you know cloud CCTV who come
and get it and about a week later I got
a call from Singapore Telecom saying
that they had a million customers on
fibre optic and they were interested in
rolling out a cloud CCTV platform to
offer
home security as a service I said yeah
no problem
I'll I'll get Victor on that you know
that's that's exactly what we do
and yeah right this is the slide that
summarizes that the three years after
that it was a tough old journey we built
up another team of developers around it
we had some guys in Pakistan and we
stayed on the sea shot on that platform
we just uncovered a world of problems
dealing with all these different types
of hardware every camera was different
it's a real real proprietary industry
the security industry which Frankie and
neither was knew anything about all the
codecs as you know in the world of video
were also like different and complicated
you've the extra difficulty of bringing
this stuff over broadband so just from
the world a world of problems and on top
of that we never got the Singapore
telecom as a customer so we did get some
other kind of like significant customers
but it never really worked out as a
business to kind of leave that story
aside I did get another phone call that
was interesting and this time it was
from a company called NetSuite who make
basically cloud accountancy zarbor
and they say listen you know I I don't
want your security system but what I
love is to get a JPEG and a tonight shit
to every document that comes through our
system kind of like a signature to just
verify the event so we could actually
just see the thing happening the person
doing the delivery or collecting it or
buying it or whatever it is suddenly
like all the problems that we've solved
all dealing with all the different bits
of hardware having this beautiful like
cloud interface it all comes together
but I didn't have the problem of storing
all of these images so they said um do
you have an API and I said yeah and then
I went in googled what is an API
that's how it goes behind scenes at the
top
and then it makes sense this is great
we're gonna be the developer platform
for cameras and I confirm they were the
company like Twilio these are there like
big API companies that have really been
making it in there some of the developer
tools seem the only thing is Mike Mike I
have rubberneck would only carry me so
far and I kind of knew that between
myself and the guys who I built the
software with so far we weren't gonna
fool the developer community and we were
really gonna be serious about building
something that developers were going to
use it was gonna have to be a lot more
solid and also presented in a more
developer friendly way so looking at the
problem I can find a new that the people
I wanted I was more likely to find them
in the open source world and in the open
source community I didn't know a whole
lot about it and you know I was I was
asking around for advice but I kind of
knew that's the way it was gonna be so I
started a new development team based in
Dublin which is where the company was
based then and hired some guys who were
sort of familiar with more of the
current trends of software development
and they looked at the problem we talked
it through and I knew a lot about
cameras and I sort of you know we'd been
through the rubbish but I wasn't
particularly technically strong so we
said okay that's let's go for Ruby as
the platform it's been around for a
while
the seem sensible so we started to build
another system in parallel in Ruby and
initial progress was good
and we started transferring cameras from
our old system over to the new system
and pretty soon we kind of realized that
yeah the task we have of like having all
of these different processes talking
all these different cameras isn't
particularly well-suited to Ruby so when
the guys working with a seasoned isn't
here no js' this is the way forward for
for this we will have a go at that so he
took that part of our system and rewrote
it in node.js and roundabout here comes
the third story in parallel around about
this time I started working on another
sort of related side project with Mila
and he was building that out and what I
noticed is that the Milosz was was a
great guy to work with was making great
progress and was actually the person who
I probably wanted in as lead to love of
this bigger thing that they made the
main event ever count so long the
shorter it is Milosz was over in
December just December of last year
and we're talking through the plan for
the year and so on and he says Marco
I've got this idea
elixir I've been reading about this new
language I think it could be exactly
what we need
I see some problems with nodejs I let
him talk you through that other side of
things and I was terrified it's still
like the last thing I wanted to hear
some weird language that I'd never heard
of we're gonna build this thing for the
fourth time
but there's one thing that I really knew
and knew strongly is that I wanted to
work with me lo hee and also that he's
not the kind of guy who makes decisions
from from us of an egocentric point of
view I knew he's a thoughtful guy and
put a lot of thought into this
he was able to let me see that he
genuinely thought this was gonna be the
way forwards for us so I made a deal
with him
I said ok but there's a speaker
conference on in Krakow in about four
months time tell you what we'll go for a
lexer at that conference you were going
to announce to the world the wonderful
product that you have made on this new
language that gives us like a time frame
for this for me like she wasn't very
keen but it shows how much I think he
wanted to use the language that he was
prepared to make that deal which brings
us pretty much today there's one other
aspect to the story that I think is
worth telling which was as we moved from
the Microsoft world today to the
open-source world
I got exposed to the ideas behind open
source the open source community things
like github the working processes behind
open source and I saw that it really
worked for us it worked for us too from
a technical point of view it worked for
us from the sort of people that I wanted
to be working with and it also worked
from a devalues point of view we're
working with cameras and the cameras are
dominated by the security industry but
that's myself in my business part of
that security industry mentality which
is very locked down closed circuit we're
all about sharing of information and
transparency and similar sort so we just
we just got very keen on that and
ultimately we made a decision two weeks
ago where we said
let's open source the entire thing
everything we're doing and pampers
developed as part of the open source
community which is in hindsight perfect
for the problem we're solving which is a
problem that is really composed of about
10,000 small problems
hence the you know that guy with all the
knives it really is it's just a case of
all these little modular problems that
need to be handled so over the last
couple of days I've been sort of quite
liberally just flicking a switch on
github and going live with these repos
which I there's a big disclaimer over
these these are not yet really fit for
public consumption
and you know I'm trying to get get them
alive before the next $50 a month
bill comes up sometime next couple of
days right so that's kind of a human
story of what or or the you know the
managerial perspective story but what
got us onto a dickster
the decision that i'm really really
happy with but it was a decision mostly
made around people the people I wanted
to work with one of the people I wanted
to align business you know you can
probably give you a more insightful
description from from a technical point
of view
so I'm a developer and such a city
America this is me on the left it's my
we are the couple behind the normal and
we went forward with experimental stuff
like for me doing so means like change
technology suffer because like when I
joined Erica we actually had a working
solution we can API group it was it was
a thing that was kind of separated what
was the notice which communicated with
cameras like sending the actual request
to them at rates of thousands per second
which wasn't something that was so she
should computable why why why why
to move from from not just like no
justice works Edward so it surely can
provide us everything we need from from
scalability and currency is a big thing
but actually the thing that we built in
my dress was a perfect imprint it was
really in Iowa there were a lot of
requests coming in coming in and out but
it was Bolton's name and hard waiting in
the few months that we multiple modules
were you know they did overhead security
issues or we had to pick up the ball and
like patch them ourselves so it wasn't
so into making just pertaining to its
web step one thing that mark mentioned
about cameras that's the difference our
business from from other web oriented
businesses is is only only the
fundraising part the actual part
communicating with cameras
and it should be all the things you know
it should be fault tolerant it should be
concurrent and it should be
first of all reliable like people use
our systems for security measures and
it's a five priority for that not to go
down is you never hear about telecom
provider quality because I think the
problem is that's especially for our
business because one of the goals we
have rose for us isn't just having those
security cameras that are connected to
home systems maybe private businesses
and so but actually connecting all the
power cameras available in row as a sort
of public utility function so to be able
to
the magic is highly performant and will
be mistaken for the next five or ten
years or more we're not making something
that is a prick rack just so we make
something that makes money that's it
as I said the original system worked
kind of fine but I was interested in
making better if that means rewriting
major parts of it forward even in my own
time because so I don't wear is kind of
new programming languages and Skylar
grow so one thing I realized sandwiches
that is the for example in Scala
there are vectors and there are many
I heard three I completed missing
I saw lexan and it was
I was thinking about stop stop talking
languages and then try to imagine what
would seem to be what I need to be
corrected I need to be filtering and in
many processes ideally I would have one
process per camera and each process
should be surprised should be should be
run for a long time possibly infinite
and turns out that all of those things
are so previously we use sign for
banking processing for simple things
like sending emails
like getting the snapshot the recordings
for the cameras into our system and
that's one important thing for me what I
think the part of the system was to make
it so it's external to the our current
system so if something goes wrong we
decide not to listen I can just replace
it and because we were using psychic
already I can't go to the era of using
using it as a message message so I think
stands upon the girl and it would just
communicate we delivered over at
exchange processes and it was one of the
things the crazy part
tritter fix mentioned several times and
better we talked about it and she had
the same exact idea but let's just use
psychic from Ruben and the reserve is
you just guess the computer jobs from it
so this is like so this is kind of our
supervision tree or so now we have our
application supervisor there's X Q which
is it's basically psychic implemented in
the wixen I actually talked about just
putting this directly and the workers to
provide supervises the cameras and each
camera work each camera has its own
camera camera board which is which is
practice processor provides results and
each process has its own child processes
which are which do the recording of
sessions and the future of all video now
we're just getting the jitters
because most of our work supervisor is
yes battery simple one for one which
makes it really easy to
Kaymer workers when their trade when we
had cameras to the system or remote
each camera work is exactly the same
that respect is everything but this kind
of technology stack before another to
using WebSockets why have things because
it makes it really easy to to just pass
on the data from the ground process I
mean camera worker to Phenix trends from
associates book tipping action which has
many direct versions for before actual
appointment uses get tax from did and
then also the shop
so we use this before we had the boys to
just get another special and it also
comes time for the mixer super
eye-opening to use a pencil which is a
compression management and deployment
tool so what I do before I deploy his is
volunteer releases all right release is
a way to borrow the application the
dependencies and the actual virtual
machine into one package and deploy on
server which would run it without care
enrollment or anything else installed
the big thing for me for using releases
was whole country road we have always
had to deal with before
switching to the new version suppose
suppose what application so what we did
was basically rolling releases with
Jenica colleges we we had a lot bouncer
and then it's the same thing so it's
it's around various three servers one
gets a bit after the other but for this
we use XR which is and what it gives you
is it extends mix and mix this you can
just compile and make you should have
the previous version
so so what a variable is
I don't I
so this I check out the detriment of
course get dependencies and make a
release and then I thought to check out
to the world of the petition that I want
to deploy so this is like the last
commit to the master branch and then I
make another race so what this does is
it enables excellent to create a session
which is you can think of it as a dip
between two states of the application so
when you put the new release on to the
server it can see what coaching and
change it with without any downtime or
even without any drug network
connections it just automatically or
automatically works there are a couple
of bad things that I experienced while
working with with an excerpt as someone
who wasn't listening to to the whole
world both Poland and OTP and that is
knowledge is basically knowledge is can
required
to do anything more advanced than what
what you can actually get you know Alex
right
I also had a couple of situations where
I had to dive into Berlin's source code
for some libraries that didn't behave
the way I want they the way I accepted
them to be so because I think having
knowledge and it was faster for me to
just bring parenting LIXIL and good
things about of course planted one thing
and I think mentioned often is
commercial is like specifically Phoenix
I really enjoyed the operate guys which
just continue using the pre-war my dog
releases we started with well by
actually because I started as a side
project I started using phoenixon 0.4
and now our vacation is I think zero
point and we adjusted every great memory
and it'll work so not specifically to
listen but it kind of overlap with my
switch to using UNIX and specifically
space mix which is to try to it's
basically when a green + mix which is
its it remember thing is because it's
also well and it has many contributors
and it has a clear vision of what it's
going to what it wants to achieve so
it's basically using space as a guide
even there
there's specific layers of functionality
specific to the language like
foreclosure or for products there's a
separate layer that you can just enable
and of course dimension which is any max
mode built for using it with for use
with mixer and enables you to do my
stuff like running the test for the
current water automatically it has a
depletion you can drop down to IEX from
the from UNIX editor and test the code
so things really improve my to go to
speed and like to develop with Ericsson
so like Mark mentioned on over the most
of our code is open source and pretty
sorry too everything will be opposite so
it's a different start and the other
like I have here is
yes he actually made a wrapper in Nixon
for Mariah Carey and before we actually
open sourced everything and aside from
the confessed driven development that I
practiced in the last couple months I
fought for support which is like should
we just put some color slider is like a
prophet but because everything is
awesome I think if you see some
something that we did wrong or even
issues
so currently it's about 3,000 processes
so we because once a professor which has
3000 trapped process and each of them
has multiple processes so in the process
that I did when evaluating the elixir
was</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>