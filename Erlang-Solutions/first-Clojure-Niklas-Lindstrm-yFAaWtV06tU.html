<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>(first '(Clojure.)): Niklas Lindström | Coder Coacher - Coaching Coders</title><meta content="(first '(Clojure.)): Niklas Lindström - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>(first '(Clojure.)): Niklas Lindström</b></h2><h5 class="post__date">2012-06-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yFAaWtV06tU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">before I begin just a quick phrase of
hands how many of you are in any way
acquainted with the culture all right
and with the Java in general have some
common ground so let's begin what is
closer well it's a dynamic language it
is this based and it's running on the
Java Virtual g that's the basic premise
of it it is very young which kiki is the
creator of the language and he released
it in 2007 after initially working on a
list machine for the clr Christ the JVM
but since closure or closure which is
supposed to be financed actually is a
lisp pilot so it has roots in the
nineteen eighties would be these are
really your ground your father's
emphasis as they say and the features of
such a language is that it's functional
basically mainly functional the core of
the idioms is to use functional
programming and its home iconic meaning
that the syntax is represented in ism in
the data structure of the language so
these enable very powerful features like
macros it also focuses on immutability
given that it's a functional language
that's sort of expected it has very
efficient persistent data structures so
that you can add things to maps without
incurring Lee that
being anything and it's generally worked
very powerful like most Lisp systems or
since you can compose functions and use
macros to generate dsl's very easily
also closure focuses on concurrency and
it's very efficient for working on
multi-core processors by introducing the
explicit separation of identity and
different states of something identify
you can work easily with concurrency
it's also pragmatic so it has very
compact syntax on some syntax for
high-level connection collections which
differs somewhat to older Lisp dialects
mostly are almost over incumbent by
parentheses there are some cases where
Kildare uses a more tight syntax to
reduce the amount of parentheses
actually needed and it's a symbiotic
language with a host language and the
primary implementation is using Java as
a host language and the entire
interoperability is designed to work
with Java specifically but it has also
been hosted on the CL era and there is
also an implementation in Python
currently going on so it is sort of
possible to use the core upload your own
different host languages and that's also
a design by design it's intended to be
used basically for any kind of
programming problem it's a
general-purpose language so in theory
you can just use it instead of Java for
any problem where you
nor use job with some limitations in
speed like in most dynamic languages all
are ways to get around that accelerate
as well I mainly worked with it to
process data I'm experienced in xslt and
I'll turn data with anything from our
landlord to python and transform date
and many situations and I found cloud
you're very applicable to that common
domain given that it's functional so you
always know that your transform states
of information so the JVM is that a good
choice well it depends it's a very
powerful and well spread platform in the
galaxy so you can rely on it being a
very good work workhorse for many things
and it's being tested in battle hardened
for many years so it's a very smart
choice of a house language and many
things in it is in that community is
open source as well as you probably know
so there are lots of libraries to use
for any kind of problem domain and the
closure is fun it's pure fun it's not
fun by incident it's fun because it
really appeals to the purity of this
syntax it looks like this this is you
probably seen list under know the shape
of this it uses prefix notation which is
a very powerful ID it makes any kind of
code uniform it becomes very easy to
expect things and compose them and code
even though we're a complex is quickly
predict
to read even the macro system is so
predictable so you understand the shapes
of things very easily because you always
know the structure on the code and you
will never have any problem with
operator proceedings because you always
have to use the parentheses also this is
because these expressions are real lists
and the code is actual data so it makes
it very easy to meta program with macros
and if you find a hard time reading this
expression because you normally say 1+1
you just stop thinking like that don't
think add one and one and someday
everything becomes clear yet so just
shift your mindset one step to the left
it all works again so let's just take a
quick peek at the basic syntax items
available to you you have regular scalar
scalars and you have connections for
making conversations of data and now
there are certain special forms which
are evaluated specially to enable the
core language to work the basic types
the primitive types are characters and
springs numbers Williams the new value
which is nothing and you also have
ratios so you can work with fractional
numbers without losing stuff by
truncation if you use regular floats
you've seen that that's a real problem
computation so there is a built-in
scalar type for ratios which looks like
that and you have regular symbols which
you use for names variable names and
function names they are you're allowed
to use certain special characters which
are normally allowed in other languages
you can use plus or custom arcs and
dashes also the dot is a special form
which is used for the Java inter
probability which we'll look at further
wrong and then apart from regular
symbols you also have keywords which
begin with a colon and stand for
themselves they are they never belong to
your namespace taste and explicitly for
themselves and they are used commonly as
keys in beta structures but also by
certain functions and operations as
directives so let's keep their
collections as mentioned there you have
the regular East's impacts which is used
for availing expressions so by design
the closure engine interprets and evils
these expressions so that print line
hello results in the printing of a low
this is actually one of the side effects
functions with also returns meal but you
can quote them with a single quote and
then you can access this list as a
regular data structure and for instance
take the first item of it like that
notice that killed your calls first
first and not car so you don't have that
Roger but if you're going to work with
eraser things you normally don't use the
simple list collection you use vectors
instead which is the bracket syntax and
looks like this the difference is that
you have random access with the regular
012 speed in DC whereas lists are
actually linked lists by implementation
so you use vectors when you need to use
general-purpose arrays and for objects
or structs or records if you will you
regularly use regularly use hash maps
like this you can use anything as a key
but you normally use keywords as a key
unless you have a specific reason for
using something you can use hashtags
like any kind of look up tables you can
put anything which has a hashed value
into them like a regular string or even
a function which has its ideas hash but
normally use keywords and hash maps
indicate one of the design decisions
that closure has made which is that in
certain cases it throws away explicit
grouping of things so as you see here
you really have four items you just
group them together pairwise there is no
ambiguity here you know the Tash maps
always use is keeping a value key in a
value so there is no need for anything
else
almost looks like it's falling apart but
it never will is he always known how the
shape should be some of you will get
errors if you try to do something else
you also sets where each item intercept
has to be unique so if you had the
screen unique to this again you will get
the same set back and the difference is
that they use a pound sign before the
curly braces you can use call us if you
want to but commas are just white space
so they mean just asleep that's white
space just as you want to indent your
code for readability in certain cases
you want to use commas to make things
more clear that also means that you can
put 30 comments in here and it doesn't
matter because it's just white space use
them for readability and nothing else
another have the special forms the core
special thing is the death which binds a
symbol in the current time space to a
value pretty simple straightforward
obviously a side effect so it's not an
expression for sale it's a way to build
up your current thing space for the
symbols if it's also a special form the
if expression takes the predicate and if
the predicate is true it evaluates the
first expression after that if it's
false it evaluates last apparently two
is true and this is nothing dangerous
but if to work for some reason falls you
would divide one by ciara and get an
exception
this is how you define functions again
if you've seen older less dialects
normally you don't use you don't have
the vector syntax and argument lists are
expressed with practices but since
clearly the things that too much
parentheses becomes hard to read it has
decided to use the vector syntax for the
argument list and all these small design
decisions we helps to read large amounts
of closure a bit faster than common base
for instance as far as I've seen at
least
of course you want to name your
functions to be able to use them
although you can pass them around as
well but normally you build up your name
space with named functions and if you
want you can just define the symbol wait
to be bound to the function expression
but normally you want to use the
different macro and this is very simple
and easy example of how closure uses
macros to create compound expressions so
this expression defines a function rate
and expands to this form
of course you want to use local names
when you build bigger functions and for
that you have the left special form
which to certain exempt looks like the
hash maps embedded groups Paris of
things so you have simple breaking down
to the valley below and then you have
out bound to the expression on the
screen concatenating greeting swinging
and the name and as you see you can use
the names occurring previously in the
same that vector so this is a way to
create local Bibles and everything
evaluates to the body of the left
expression and function evaluates to its
body so there should be nothing
complicated with this but as I said you
often pass around functions to other
functions and if you do that after a
while you get bored of the explicit and
argument lists impacts because you just
have to name the same variables over and
over again and for that reason you have
the lambda syntax sugar which uses a
pound sign in front of an expression and
then this becomes a function which takes
arguments as many arguments as there r %
science within the expression and if you
have more than one you done with them
like this if you only have one you need
one % to be nice and fun
there are some more sugar well not going
to look at all of them but just so you
know that there is syntax trigger for
regular expressions and for concurrency
which will look at later on you have
instead of evoking gear l4d referencing
references and you can use the at sign
instead now the rest is just even apply
so that's the basic shape or closure so
how would you use it Oh as we've already
seen some examples of usage this is how
you normally use vectors you take the
first of the report the rest of the
items spell instead of a car cover also
vectors our call levels so their
functions you can call them with an
index you will get a title out so the
time ago if you know that you have a pen
deter you can use the latter form
if you help to collections or actually
create new collections from old
collections use calls tell them together
and call me to add just one item to a
collection and Counting how you work
also for lists but since lists the
Royalists are linked yeah it should add
things to default when you use the same
operations but vectors are mostly the
way to go there is of course many
functions which take other functions as
arguments Matt naturally and it looks
like this in disability in function you
have the explicit variant below which is
the lambda which increases the one
argument it gets with one as you see
here the result is actually expressed as
a list and not as an editor and the most
sequence functions in clojure are
represented like this you don't yet the
same time back when you map things you
just something you can iterate or linked
lists are more efficient for that for
all these reasons reduce of course
nothing complicated here I think well
you should know that if reduced is
invoked with a function and one sole
argument it starts by taking two items
from the sole argument and applying them
to the function and that it applies the
result with the next item on so forth if
you have three documents Yuki the first
is the seed value
for more complex expressions you can use
for comprehension she might be
acquainted with if you use a skill or
Python for instance maybe help them in a
line as well I can't recall it
here you see an example of how closure
uses going words as modifiers for
certain expressions so instead of just
looping over the range 1 to but not
including 7 it has a directive called
web which uses the keyword simplex and
this modifies the for loop there is also
a length directive so you can transform
the value within the for compaction
before you use it so you can use that
for even more complex for comparisons
you can also use several loops together
as you can build a coordinate system or
an image if you will by looping over x
and y sine of theta 6 you use for X
strange 12 with them for y1 to fight in
the same for expression to combine them
soldier is by default lazy so almost
anything you can look over is lazy so
there are no problems with infinite
sequences and there are built-in
expressions for creating infinite
sequences like for instance would eat
with ease which is an infinite series a
ones on the iterate which supplies a
functional over Oregon but you can see
that filter and MapReduce or for
conventions and every kind of looping
construct it just takes more like them
at a time so you can use this to for
instance work with type big files
realize is another example of an
expression which takes one line at a
time doesn't reading by five points so
let's look at how you use maps normally
use them like this so you create value
of its very efficiently here we have a
list or a vector of two objects little
gifts which are percent persons with my
DNA then we take the first person from
that and we pick out the name so just as
vectors or callable maps or probable and
you can call it with keyboard and then
you get the value for that keyword out
into that but you can also call keywords
so actually keywords invoke the thing
they are involved with with themselves
and they return merely if the thing they
are invoked with this Neil so it's very
softly working with I'm structural
semi-structured data most available and
as keywords are functions you can of
course sound them to other functions as
functional so you can apply you can use
map so you can get every name from the
sequence of persons but if you get bored
of writing liberal objects like this all
the time there is a macro called def
wrecker and you define a name for it and
you as symbols name the keywords which
will be created for you so you could get
something which behaves like a map with
the keywords idea name in them but you
also get a constructor function which
you see involved here with parcel dot
that's actually the same way you
instantiate java classes to write the
class name dot you can use new as well
that this is the humanik form and for
interoperability actually read books
become java classes but their fields ID
and name public there are ways to
generate your objects with deference
accessible as well but this is the way
to use it to get the keyword thing
working so these are you can start off
with literal hash maps of them replace
them with this sentence and you can pack
up things you can take two items from
the sequence at once and using the
Latics expression like this you can take
two items out and buy them two names you
can also use a map literal where you
actually put a symbol on the left
side and the keyboard on the right hand
side and you buy that this structure a
map or a record and take out the ID on
the name like that things are immutable
of course so if you try to associate the
name yield to an object that object
won't be modified but you have to use
the computed value of the associate a
location to actually pick out with a new
value so things are never change in
place I think I'm time to discuss
namespaces in details but you should
know that namespaces on important part
of closure that's it don't tell so much
time to let's see I think that you know
how to think functionally so this isn't
really really loved for most of you
instead of imperative programming
problem never some switching fields 20
minutes all right I thought yourself
okay great well namespaces local it woke
me up a bit how well you always have a
namespace and just like death sort of
create something in place namespaces
declare the car in space and regularly
you create one range space for 152
somatically this is how it looks to say
that this is the namespace soundly and
for it you require things and in this
case you we also alias them so we can
some core in space and recorded core and
then you use / to access iTunes cooking
oil
we also see a bit of syntactic sugar for
valuable life arguments which is the at
sign in function so when you build
things like that you don't put them in
collections you just put them one at a
time that you use the outside to access
the entire argument list as a sequence
here's the Act I mean and of course
that's that so this is a composed date
and you can post functions together you
start with simple data and then after
why you might use macros and death
records all things like that to create
abstractions and build up more complex
constructs behind macros and since
things are immutable to always get a new
value from implications and you shame
these together to transform your data to
you expressions and if you think in Java
you have to leave that behind because we
can't add a move remove things in place
normally you stop doing that and instead
of compose things and everything's
become a succession of states over time
which leads us to concurrency because
sometimes this is not possible to do you
have to modify some child state
somewhere and kill your force as support
for that as well it explicitly models
things as transitions of states over
time and what we've seen so far is
values everything is a value and the
value
state but you also have the concept of
an identity which you can reference and
identities can change over time and
under the surface you clearly uses
software transactional memory to do is
to isolate points in time from each
other but I won't go into the
nitty-gritty of our networks just so you
know that this is the way to do
concurrency and for the simple case you
have atoms which you can use for
instance like this simple character so
every time you invoke next item you get
a spring with the the last part
incremental and to do that closure
evokes swap on an apple and then Adam in
this case is the item character and swap
takes the album and the function and
then it changes the value of the atom to
resolve the reply that function with the
value initial value of the other and
then you use the + sign as a syntactic
sugar for DF to get the value out of the
after so this is a way to explicitly
model changes things
a similar concept is the references
which you use with the function to sync
and this changes them simultaneously
together so from the outside they are
changed at the same instant in time
although we pick them apart and then we
do sing can alter them one at a time we
have to do it with the introducing
o'clock and when we do that they are to
an external observer exchanged at the
same time as you can see both atoms and
references hold any kind of data
structure as a value it can be
arbitrarily complex in this case we have
a hashmap in there and finally you have
agents and this or when you use them for
asynchronous programming so an agent
again holds the value and then you sound
something to them and what you sound is
a function and optional arguments and
then that function is applied with agent
as the first value and the ocean
arguments of the rest and the agent
itself as a sign change to dissolve the
replying that function and now we get to
ja terrible things of java lab
these are hideous beasts but you can
work with them closure they are of
course by nature not adhering to
concepts of immutability and explicit
time but you can still interoperate with
them fairly efficiently with setbacks
sugar and since you always invoke
functions with values enclosure this is
the way to use Java from wachovia you
what we do here is that we create the
spring by resolving the Java nephew
right instance using the example would
such a you right with this ring be
that's I read the entire expression and
from the inside out of course you create
an instance by using the dot suffix to
the name and that you invoke methods and
objects you use the dot method name with
your vectors the first argument
so let's look at how this works for some
simple concurrent programming first we
import things from Java I enjoy that
internal namespace and then we define a
get URL function which evokes lots of
things Joe instances always gets nice
when you use Java that at least this way
it's more fun some things to notice here
is the due to which is invoked on line 2
which actually takes as the first
argument and object and then the
sequence of mentally locations where the
first argument is implicitly the first
argument and the deepest recharges the
same object this in Java you often
invoke things to change to state the
verdicts this is a way to visually make
it look like something functional of
course you still change the state of
your victim place would you please do
isolated horrible action within a due to
its expression and the wind open is very
nice because it creates something and
that closes it finally regardless so if
there is successful failure
and finally we create a bunch of agents
by looping over the URLs we sending and
we create an agent which holds the URL
one agent holes 1 URL and then let me
use a two sec which is a way to force
looping because normal everything is
lazy enclosure but we do so you actually
do things instead of picking them out
one at a time I leave them it forces the
evaluation so for each agent we tell
them to invoke get URL with themselves
and then a wait for actually makes the
current thread wait for any other thread
in this list to complete with the time
out of 5 seconds and finally for
everything we directly and someone back
and then we get a sequence of web page
patched web pages which have been
fetched by several threads now i'm at
right way to do programming compare this
to the equivalent in java you'll see
that this is way more fun
the Dusek uses the same syntax as the
for compassion so the first is the name
bound to each item in the list for the
sequence it's the same with the left so
I everything every time you name
something this is the idiomatic way that
killed your macros or functions used to
express that after a while it's funny
but after a while you started sort of
see the reason behind everything at
Tokyo slalom these little differences
make sounds and Mexico a bit more easy
to quickly read and finally let's take a
look at how you do the equivalent of
interfaces because as you've seen
invoking Java to be a bit noisy at times
and you might want to have more closure
idiomatic way of doing things so imagine
that you have Dom elements actual Java
Dom elements and you want to use
idiomatic closure functions of them so
you want to define campaign get after
get title of ants then you can do define
a protocol and a protocol is a group of
functions which you can then realize
somehow so you actually define functions
and you can require this construct from
the module and use in your code and you
just use the Gatling get after and get
five elements as regular functions but
here we don't have an implementation
instead the first argument always has an
explicit type of course and to realize
the protocol you say that for a certain
type this is the way to implement
protocol so for the dumb notes you
implement them like this and then you
write the Java invitations to actually
realize
this is a very powerful way of doing in
direction and defining contracts on your
own terms you're also able to implement
protocols with various different things
being something under the hood and the
this doesn't only work for job you can
use these mechanisms for any kind of
thing enclosure and if you recall the
structuring of maps there is mechanisms
for multi methods in closure which
actually manages some arbitrary things
which is al into them and you dispatch
to various implementations depending on
the shape of things this is sort of like
pattern matching in airline or Haskell
it's not as powerful but it's it's a
long way into separating contracts and
implementations for different kinds of
values it's extremely powerful and
general sense and it makes it very easy
to adapt strange Java code to idiomatic
the vehicle so for real though if you
want to use closure what do you do well
use lining up line again is a build
dependency handling to under the hood
detective usin uses maple so you get
access to the dependency mechanisms of
Mahlon by using lightning so you define
a project file which is with the
enclosure where you declared embassies
and then they use things like light
depths to fax all the dependencies
you can combine things create uba jars
if you want an executable jar file
whatever dependence included and there
are modules you can use for instance the
wing which is a web framework for
closure and if you're writing web
applications you use the ring plugin to
start a local server and it will reload
when you change your total code looks
like that so mining and needs to go to
two if you want to try things out and
you can to read lime eval print loop by
the mobile invocation you can always use
closure just by writing CLG and get the
rebel but with lining and you get the
dependencies in your current project on
your class positive things like that so
you can actually think of it library
system and it has come online history
and coloring inside that it's very nice
to me and for editing there are lots of
plugins I use big myself although
closure is the first time I've actually
even considered really trying emacs
because as everybody knows if you love
this you should use max but regardless
if you do or not they both have
excellent plug-in support for using them
and getting completions and interactive
ripples within the editor stuff like
that and if you'd like to wait for your
editors to start up for a while you can
use ID and I even believe that you can
if you really like to take a coffee
break probably use e it clips for a
little girls moment i'd recommend the
first two
and of course although it's a young
language everything happens fast on the
web today there are lots of resources on
the web documentation examples and if
nothing else even if this doesn't appeal
to you I really recommend that you take
a look at the presentations field where
where which nikki speaks about the
philosophy behind his decisions or with
their yet is an excellent expo see of
how he thinks about time and the
separation of identity and state where
he referenced such Alfred North
Whitehead the other philosophers a lot
it was a fairly deep reflection of the
nature of China state and the other one
i really recommend is simple made easy
which is also a very brilliant piece of
the difference between things that are
easy because we're accustomed to the
things that are simple by that i mean
mathematical is curable so have fun with
hungary thank you
any custom yes yeah there's actually a I
think that it's a special form or lack
drama troupe is required in location
which evokes the kind of function with
the arguments ok so it's explicitly
occurs if I think you need to do that
because symbols you have either you have
to define the symbol name them to find
the implementation so there are tricks
like that but their cars in a way to
explicitly yes it's a synchronous so
that you get the value that you desire
yeah oh no no right I think that theater
sorry it's synchronous but it doesn't
itself return well I'm not really sure
if it does you don't
for the this well I think that it's good
in general and used python a lot and
python has switched incremental eights
design from using things by default as
lazy evaluation and lazy loops it
Rangers in general I think that it's
better design choice although it comes
with the cost of times but it's much
easier to shoot yourself an effort
you'll get a memory overload if you
don't have a bite for
with the prototypes the protocols
protocols yes yes we define the protocol
next I believe committed the journey
check these are checking that you can
follow the protocol yeah there is but
there isn't much of a protocol here in
time so what you need to shake it shakes
that you implement all the names but the
argument lists whether you have to have
variable arity for a different things as
well yeah that's an interesting
observation very good one yes the
symbols here that they spent ID is a
macro and the symbols or just shake it
to conform to the names in the protocol
whereas the doll axis is a live simple
if you will see you have comported them
use if you use aliases you have to use
something / about an axis but you don't
have to namespace qualifying those
symbols because they are always intended
to map to the names in
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>