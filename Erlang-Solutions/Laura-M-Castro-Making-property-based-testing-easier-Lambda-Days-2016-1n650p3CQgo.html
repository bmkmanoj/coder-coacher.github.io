<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laura M Castro - Making property based testing easier (Lambda Days 2016) | Coder Coacher - Coaching Coders</title><meta content="Laura M Castro - Making property based testing easier (Lambda Days 2016) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laura M Castro - Making property based testing easier (Lambda Days 2016)</b></h2><h5 class="post__date">2016-03-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1n650p3CQgo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you everyone for being here well
it's a quite ambitious title that I have
here and I will try to convince at least
at least part of you that that we we
actually managed to do something that we
usually use inside Amendment easier to
read for someone who is not involved in
software development right because if
something we've learned in software
engineering in recent years and we
usually learn it the hard way is that we
need to get people involved so we will
probably learn two things that software
products have a better result whatever
the result is but they we are better off
if people are involved in the whole
development process people that are
going to use it that people who are
going to pay for them for the product
and that is something that we as I said
learn the hard way and we've also
learned and most of the times also the
hard way that we need to test the
products right and probably one of the
biggest exponents of these two
recommendations or lesson learn is the
whole set of recommendations that there
are communities making although so one
of the two of the planes that whole idea
gel philosophy is trying to push and is
successfully pushing into the software
development industry is this two
component so if you want to succeed
succeed more involved your stakeholders
and test as soon as possible and those
are actually the two well these two
points that I want to start off from and
involving the stakeholder the
stakeholders usually means finding ways
of communicating what we have in our
mantle with with the way we talk to each
other when we are in a technical level
to another level of extraction and that
has materializes in ways of showing
things in a graphical way with say you
know like and graphical languages and
ways of writing things that are
and not completely free so it's not just
natural language but it will try to
force people to speak in a certain
manner so that we then can process that
easier and that will and I said well
that would be user stories for instance
so that's one of the things and so if
you want to involve people you should
try to be inclusive in the way you
mobile and you communicate things and
then if you want to test oh you want to
test more do you probably want to start
off by eliminating any possibility that
you won't test something and the best
ponent or the best representative of
that philosophy is a test driven
development methodology right that that
it will actually claim that you should
write the test before anything else so
before the actual code that will end up
passing that test hopefully and I thing
is that combining these two we've seen
the birth of what they call behavior
driven development that will use and was
like variation of user stories that are
immediately translated into tests and
and that and that's the way that you
lead your whole development process for
those of you who have never seen
something like that the actual product
with which we work when we use behavior
driven development but we could say that
the biggest despondent of the most
well-known tooling within this setup or
setting is a cucumber it comes from the
Riva community and actually tries to
capture the requirements in this kind of
language that you see here so we will
describe features and feature her side
surfaces scenarios related to a feature
or functionality that we want to add to
a product and we will force people to
say what the purpose is so that's the in
order to so we we have we want to have a
purpose for everything that we do we
want to identify who is that interesting
for and then I want to well we want to
say what we want to do and i will give
examples of how that feature is well
materialized in in in the software
itself so so in this case
well the feature or the setters feature
that we've become later on will be for
for dealing with lists of elements and
then we then we below have an example of
how we will one use for instance
revelation feature of software that this
with lists of invidious a right so
that's what the stakeholder we'll see
and I guess we can agree that this is
something that someone with no technical
background could could understand then
of course the developers go and have to
extract the tests out of these and in
there are a number of koo kumba clones
in a number of languages and here's this
code is from the cuckoo bird clone for
forever long but it means that you will
have a library that will help you
somehow to parse this files because they
have to have this structure but then you
as a developer have to to manually do
the work of well when I get this piece
of text then what it means for my
testing is well I want to well to say
take this this piece and this piece and
this is a call to function in a module
that I have implemented and that's my
actual tests right so well this is what
I will get to that in a moment so that's
the thing in well if we want to assess
how how how sucessful is this idea how
is this growing is it played in some
interest but I get the I guess the
answer is probably yes I mean if we look
at the trend of searching well friend so
people are interested in in known what
to convert in the software category is
and how it works it's steadily growing
and we need something happened at the
end of two thousand five don't ask me
what exactly but it was this is back
there and then so that you can have a
little context we can compare this to
what the trend is for something more
well established so to say that is j
unit that what other people use well you
see that it's probably stable by now but
is it's not growing at the
I contrast with koo kumba so what that's
what the behavior driven development
people advocate for and I agree with
them that this is good for communicating
with the stakeholders but I don't agree
that that is the way that we want to go
as far as testing is concerned if you
were in John's talk about the testing
drug box well I hope you came out of
that talk with the idea that writing
unit tests is not what you want to do
you want to write a model and then use
that model to the right test and then
testing gets more meaningful so what I
want to talk about here today's how we
can well I will make a brief passer own
property based testing for those of you
who we're not talk of who haven't heard
about this kind of testing that I'm
talking about in which you write
something else that is not a specific
unit a space and the whole philosophy
behind property based testing or
model-based testing also as a mom
sisters theory if you will is that we we
are tracked again same as we did with
the with the communication tools for
stakeholders we have struck the level so
we don't want to have the specific test
cases we want to have something that
describes the behavior in a more generic
wake and then have some dueling that
helps us but translate that into
specific test cases and in that we have
those two powerful factors combined
abstraction and automation right and and
actually that's also a hint here for
those of you again who were in the
indian stock he didn't show any code
there right and even though he's had to
come conferencing which i forgive me if
i assume that we all could read a few
lines of functional language code and
still he showed you a few slides
describing what the different operations
of the drop box service was supposed to
do and for conditions and the best
condition but he was not sure you
showing your code so
what I'm getting at is that property
based testing and the family of tools
are very powerful for for testing and to
give you an idea of how again from the
developer point of view will look like
well say that we have exactly the same
thing that we were trying to communicate
with cucumber before and I don't want to
write that specific case that was in the
cocoon bro slide I want to have
something more general so I want to say
okay I'm going to delete elements from
lists I don't want to specify the
elements I don't want to specify the
list just you take him someone make them
for me I just want a lots of them and
then gain the confidence that this is
well implemented well again in the quick
travel an airline quick check of and
their land version of quick check you
will write something like this or slight
variation what I want to do to focus
here is in the use of this Universal
quantifiers ways of saying I'm going to
plate lots of values of I and lots of
values of L using these functions that
we call generators and those are the
ones that it's actually interesting to
to implement and then I want to do
something with them and that's in da
Mesa boolean sentence that has to either
pass or not and show me if not the
values that challenge this sentence here
and again here I'm assuming that there
is such a function in which address of
course because i'm going to use it for
testing purposes but otherwise who i
could write it in any other the Oracle
in any other way that I could feel
confidence confident on and I wrap this
around a function and then I call that
function with the Thule support and I
get the case is generated and if I get a
contract sample as John was showing I
get this ranking which is very it's very
nice from the developer point of view
and of course this is a simple example
but for more complex examples and here i
have a very it's not super complex but
it shows the the need for a model so in
there
but on machine you can you have a few
functions for a registered under Eastern
and looking for the process identifier
of process if you've given it a name
right and of course when I'm testing
this I don't want to test one after the
other in isolation I want to test the
whole system performing sequences of
course to register and ready to
unregister worries with different names
different beads and so on so what I
right here is not something like we've
seen before but well I will get back to
that i right what was behind the idea of
those slides that John was showing with
the preconditions and postconditions who
I actually write those callbacks so for
instance for the for the register
operation i would say okay i don't want
to call this function unless i have
created some process already and this is
my internal the state of my test model
and then for instance for the armed
register i will say well after their
re-register i want to save the name that
i've used to well i won't actually I
going to delete the name that I've just
unregistered from the from the place in
my test state that I keep the names that
are that I have been used before and for
instance as the post condition of the
ways i want to check if the result that
i get from the system it actually is
actually what i expect and then for that
again i use the information that i save
in my model to try and find if this
result is what i would expect so that's
I mean you write that as a in this case
analyst on Ellen module that is run and
the property there are property here is
that well we have this model and assume
that we've written it in this module we
will generate sequences of course to the
to the functions defined in that module
and then what I want to is just to check
that after running those no
preconditions and postconditions are
violated so the philosophy is the same
it's only that it gets a bit more
complicated how you
write these things so again we have like
the somatic situation without with
cucumber this is great for testing and I
will not try to convince you of that
later in the coffee Vegas we are not
convinced yet but I guess we can agree
that it's not good for for communicating
this with other people I mean not even
John showed you the code for the state
machine in there in his talk so there's
probably no little use let's say and
showing this to a client and say no no
you should be confident that dice tested
this very good because here's my model
okay I cannot read that more right so
what I what we did in research project
called prowess which is funded by they
you and join a few universities and
industries around Europe one of the
results of that project was a small
attempt to see if we could come up with
a way of communicating these models
because we were trying to promote the
adoption of this kind of testing but we
need to to fill that gap and the
proposal was well there are some
attempts and we've seen them in behavior
driven development of using semi natural
language to communicate these things and
they seem to be working and people seem
to find them useful so can we come up
with something similar for property
based testing for the artifacts that we
write when we use property based testing
for properties for motors and so we did
and we called it leads back and you can
try to add some examples there's also
the ones that I've shown here and a few
others also and just to show you the
result of the not diner part because you
can check the code and it can have or
asking me later on but someone will get
by using respec having a property file
or having a model file will be something
like this so you will run the tool
against your property and you will have
examples that come up from your probably
come up example of sequences that come
up from your model translated in in in
the case of the property to that same
structure that people are already used
to if they're using behavior
driven development and koo kumba okay so
that's four properties and then of
course when we have that we have the
same for counter examples which is also
nice to be able to show a counterexample
to the unknown technical person saying
okay this is exactly what's going on or
this is what's taking me I don't know
two weeks to fix if you will then with
them stateful mall so we had a different
approach because there was nothing like
that before koo kumba existed but it
describes unit testing scenarios and the
kind of testing scenarios that we
described with the model are much more
complex so we won I can refer to you
where you can actually read the whole
technical report or if you don't want to
wait one year for for the paper to come
out but we define what we consider was
compromised between the verbosity and
the effectiveness of the semi natural
language to express what a stable full
model and needs to express so for each
call for each functionality that you
take into account another model this is
for instance that the precondition for
that the one that we saw in code before
of course in call these two lines but
for those who cannot read those two
lines well here we describe which are
the possibilities meanings meaning what
under which contrary constraints this
will result into evaluation false
revelation true and what I won't get
into too much though how the design but
we can you can ask me later or how this
leaders can be fine tuned in order to
better fit the language of a specific
business and airy hour or so as a final
claim in this in this presentation well
to reassure ourselves and also to do she
to see what we propose was something
that could be used in a real setting so
to say we had in prowess we had a number
of pilot studies around the same
software system that was provided by one
of our
companies working in the project and
this is a video on demand a streaming
system with different parts built in
different languages and there were parts
of them of this system that were not
tested with property Western testing and
in the project they were adapting in
adopting this and methodology and in
others that they have already started
writing their own properties and there
are mothers we got those we we used
those to check our own respect to and we
wanted to find out two things whether
actually it was more a concern in the
case of the state famas if the text that
we were going to generate if the model
was too complex was really efficient if
it was understandable if it was
something that people will actually use
and if we will actually communicate what
is what was important for the testing of
that component or system in this case
then what we actually measured to try
and answer those two questions worse
well the time that took to generate the
textual representation the length in
lines of code and we asked stakeholders
explicity to rate if they find that
useful in the in the sense that would
they use that representation instead of
whichever other means of communicating
the requirements or or whatever was
going to be tested at that moment and
also to write the usability I mean if
they found that it could be improved in
some way or if it was just easy to
understand as it was or whichever I mean
it was a writing and then engaged the
writing was bad they had to they had
room to suggest improvements and
naturally some of the improvements was
very incorporated and by quickly the
results is like well we only had one
specific case of a very complex model
that took a bit too long because had a
number of dependencies and a number of
includes and imports so we
underestimated what how long it took to
actually go and come and resolve all the
macro so well but it took
in that case not even a minute so it was
of course long because it took a while
but in the rest of the cases is that the
the combustion is something really
really quick and the length was deem
appropriate bite all stakeholders and
buy a stock holders in this case in the
case of vaca TV I mean we involved
almost everyone in the company is a
small company but we had both developers
and people who are not technical and in
the group of developers we had people
that were fluent in functional language
attend people that consider themselves
not to be fluent in functional languages
and so the best contentions about the
appropriateness of the lengths and the
nature of the text output and then for
the simple cases and in this I mostly
mean the properties we saw that there
was I mean it was very dependent on the
background on the person if they thought
that the code was easier to read than
the i'm i mean the developers in this
case so developers who were fluent in
function language that i will say no I'd
rather read the two lines of codes that
i showed you before that was to be
expected but the rest they said okay no
I of course I preferred the text but for
the complex cases and for this I mean
with this I'm in the state food models
we also find like two cases and it would
be the case of people that no matter
what they found like the test it was
okay it was maybe not 60 page long but
is I don't know let's say 10 pages long
the test that describes a really complex
pin machine and I can read the English
but I don't really understand it all I
mean it's still difficult for me and
then the other profiler of person that
will be all the developers and some of
the of the non-technical people they
will say that definitely they could
understand it if they read the text and
not always if they read the source code
and even if there were some cases
actually during this whole pilot that
the they were able actually do to
propose new testing scenarios that would
not be invested at that month by reading
the text world
representation that respect was
generated so we were pretty satisfied
with us with that with that result and I
think that's all for my part I will
leave you there with some parts of the
of the interview that we conducted that
well they reflect actually what I was
trying to to come by in the previous
slide and I think that's so from a part
in and have to take your questions
however you say stakeholders in a bottle
what we're doing is it people from
business that I'm told you once wooden
oars this is some some questionable
illness ok so the present is what do we
exactly mean by a stakeholder and we
actually mean both the things you said
it could be the business person that is
paying for product and has no technical
background whatsoever it could be the
user that may not be the same person
that pays for it but it's going to views
in it and it can also be if you're
speaking in terms of agile the product
owner yeah we don't make any distinction
that and so everyone involved in the
process of developing the support
product it's considered stakeholder and
we actually in the pilot we had every
profile in that sense as I said taking
advantage of the the company behind
volka TV being a small company we
involve people from the accounting
department and people from marketing and
people from the Department prod and
departments are
so this specification work also from
people from business they understand yes
so the real question was that to make
sure that this includes business people
and yes the answer is yes yes I feel
quite a lot of this enterprise
development where we use a speedy also
and the problem is that that if you have
this kind of like Virat older horses
than another space not recording of
rescission a single single and
uniqueness and I got the whole whole
structure that but suit Justin do and
the distance this can be quite helpful
but also I would like to keep some more
general why whoo-hoo-hoo man that would
like for example compiled by technicians
even something like that so so just to
give them some to see more mass requests
and that's not a single this cases well
I don't think that's a question but I
will rephrase the comment so it's it's
acknowledged that it is interesting this
kind of way of communicating technical
stuff in to other people and what the
this pressure would like to is to see
something like like a Coomer but I told
that people that the business double
could actually used to play with this
requirements or other kind of
information about the technical
information of the software development
more than just unit tests so that you
can see the whole product that's how as
a whole
Oh
so as you point out if somebody knows a
little bit of programming it's been be
much easier to read the actual horrible
past so there's so to approach it from
you can put a lot of work into
translating the formal text into
informal taxi or maybe you can train the
people that need to read the important
test how to read the formal test I
wonder if you look at those two things
about the trade office no no so the
question is that yeah of course there
well as the pilots show that there were
cases in which people will say no I
rather read the actual code because it's
simple enough so the the question is if
we looked at the trade-off of teaching
people how to read code rather than just
focusing on translating code into other
ways of reading it and we didn't we
actually didn't do that I think that
both problem is both approaches are
complementary because there will be
cases in that even though if you prove
that you could teach all your marketing
department in a week to read certain
tests there will be other constraints
like inherent to the whole company or
processor that they will prevent you
from actually devote on that time so for
those cases in which you probably
couldn't afford that then having the
alternative which is well having the
technical information conveyed in
another way it will help you fill that
void otherwise you're left with or or so
fair enough I see my reaction to all of
this is I wonder how far I can get
restraining into seeing an exploration
of that trade-off I think would be
useful see documentation about the
places where it cannot work if you're
saying there are some and I'm willing to
believe but seeing that explained
together they could be useful yeah yes
to raise the coma so will be actually
useful to have this kind of study in
which both the trade-off between one
approach and the other is compared and I
totally agree thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>