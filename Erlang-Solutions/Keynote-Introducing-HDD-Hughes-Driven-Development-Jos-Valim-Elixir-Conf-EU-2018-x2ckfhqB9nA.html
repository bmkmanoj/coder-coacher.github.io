<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Keynote: Introducing HDD: Hughes Driven Development - José Valim - Elixir Conf EU 2018 | Coder Coacher - Coaching Coders</title><meta content="Keynote: Introducing HDD: Hughes Driven Development - José Valim - Elixir Conf EU 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Keynote: Introducing HDD: Hughes Driven Development - José Valim - Elixir Conf EU 2018</b></h2><h5 class="post__date">2018-05-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/x2ckfhqB9nA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right good morning everybody so
prison is soft top so if everyone said
anyone's confused I'm dr. Chris
my name is just a valium the creator of
elixir I asked it for exchange talks
because I think his way to do a much
better job than I would do
closing the conference no pressure
breeze and today my talk is called
introducing HDD and HD d stands for hard
drive discs alright so let's get started
here so as I read to see the title it's
kind of a play with words with something
trivial development but before I get to
the part of the talk let's talk a little
bit about Alex here have the last six
months and one year what happened what
has happened and what has happened that
time is exactly an extreme or not six so
it was released January 2018 we've
crossed 900 contributors this was really
nice and the formatter playing the
really important job of that because an
exterior not sticks as we see introduce
a new code formatter and we open up for
contributions for the community to form
a collector code base and a lot of
people were able to get involved that
was really fantastic
many people get involved with Alex it
for the first time and we we are
reaching at this point probably past six
thousand packages from hacks
over and over more than 175 million
dollars right so it's good like at least
when we see everything cold wise right
it creates this growing that's really
exciting and then it showed up six has
some very interesting features nice
features so one of the features that
call me Alex 0.6 is the dynamic
supervisor so we always had a supervisor
in the mixer but it kind of had two
modes right so it has the default mode
where the tree would be static where you
define our technician you would define
the tree and in the what that tree looks
like and then would have a special mode
called simple one-for-one which was
actually dynamic for starting children
dynamically and that was completely
because the documentation had
conditionals right like oh if you're
using this this toxin is going to behave
like this and if not it's going to
behave like this and that's our other
side so we decided to get that all the
dynamic parts are going to put it under
the name supervisor we are going to
streamline this experience another
addition that external objects are two
new attributes related mostly with
documentation so for example here is a
function that was the
not seek to deprecated children while
they check every function that's a bit
more explicit as better default so what
we did is that we to the old function
which is the one you are seeing here
signal this function exists in static
view or not 0.0 but it's deprecated and
you should use it
check every stack so we are adding a
little bit more on the patient to our
functions and this is really good for
others language developers a library
developers because now to each other
questions when you publish this
documentation right the users of arrival
is exactly which version that thing was
added if it was deprecated so the
developers you are going to get a lot
more feedback on the API so this is
really nice another nice addition is
that part so we done it so you could
always define your custom parts you'd
have these macros and they have a couple
got just so here is the example have on
our website today right I have this
function where it says you know I have a
user if the user
small is older than 21 years we can
serve drinks and if you have this logic
spread out for different places right
what you can do now is that you can
define a custom part and then you can
use that in your functions and that's
going to reduce a lot of this repetition
but with no discussion the biggest
feature that we got in a little knot
States is the post format all right
thank you
so here's already using the fermentor
beautiful this is thank you
so what the code formatter does it for
Matt's code right so if we have imagine
that somebody brought to this very messy
Phoenix controller where sometimes they
need space after comma sometimes they do
not there sometimes they add extra life
at some weird places different matter is
going to look at that if you are almost
all of the default formatting and is
going to format it according to a
consistent style right and you're going
to talk about it soon a little bit more
about the formatter it's one of the big
topics of this talk right and that's how
the language has improved since we last
met but other things that are not
necessarily related to the language but
more missed me personally that has
happened and that really excited about
it so one of those things is that we've
written and it just went to print like
two weeks ago this book called adopting
elixir so I wrote this book with banned
and Bruce and what happened here so we
have many feedback cycles that we use to
improve the language right well the
topic of this talk is one particular
cycle which is a work endemic cycle
where we are proving the language base
of that but one of the cycles that I
have been easy to prove the language is
my professional experience
so for those who do not know particle
attack is the company behind allottee
right and its symbols board is a
research into download project as
platform attack and so what seems like
the end of 2015 beginning of 2016 we
have been helping companies use a
lecture introduction and how good the
dollar and all kinds of ways right and
we were able to get a lot of experience
from that and so the experience right we
used to improve the language of do the
documentation write more books write
more materials but some of this
experience it was you know it gets to
pointers to remind everything else and
say look I've improved everything I
could but there is to a lot of hot
topics I want to talk about and they
don't fit anywhere so that was one of
the ideas for this for this book right
so I was talking about different clients
and I was saying that a lot of people
dumpty and exceeded a lot of companies
they were run into the same issues right
and obviously I want to fix positions
right and at the same time that who
works at bleacher report which is one of
the early adopters of it exceed the
league see right here that scale he
wanted to tell you the story about how I
got to run a little part then we went
both to talk to Bruce and Bruce at
that's write a book and that's how the
book came to be so the book is about
everything from your journey about the
an exhibit from the beginning from the
coast of like is this really the
language for me right is this I'm going
to find am I going to find developers is
the truly good so even from the concept
of the idea
and then up to the development what
about distributed elixir what about
adopting to functional paradigm right so
all those things we have a bunch of
reports and experiences and then it ends
with productions exposed to concept to
production and in prediction ethics for
how to deploy have to current date
deployments logging metrics of kind of
stuff so and really happen to this book
because I really think it's going to
make a difference in the adoption of its
elixir right because all the questions
many of the questions that you have
every day they're going to be answered
there so really properties and something
else that has happened is that the
product from attack we also are also
launching a new service again to the
backside right there talking with
companies so sometimes the feedback silo
is about improving the language is about
the personal recommendation we got a lot
of feedback on how we can best serve
companies and platform attack that once
you get started elixir right so what you
did was that many people they want to
have a way to continues leverage the
platform attack by and right team
expertise with beauty and its
applications and that's how I figure out
how we could do it so if you're
interested if you are adopting editor of
your company and you're like how moving
forward our speed and confidence just
reach me out break the event go to the
powerful attack website just make
herself heard and they're going to
trigger something out right and as I was
saying so there are a bunch of things
happening include me at the same time
which is really great an editor is going
to continue improving so we're expecting
an external Doc's happen in July 2018 so
a little reduces they happen every six
months so we got 1 January they're going
to get another one in July and it's
working like that
we don't know right like how many
contributors are going to have written
notice that's there but what we know is
that the big feature that we want to
have in a NetZero at seven is the
addition of strength data so what in the
string data straight data is a
degeneration library it's a very
available today you can try it out but
in a lecture when we added to the
language going to look like this we are
going to have so now that we have this
trick module which is about literally
applying transformations to two
collections right street data it's the
same idea but it works on top of data
type so for example after imports from
data now we have a bunch of generators
like the integer generator here where
they say give me ten random integers and
it's going to speed camera images for
you and say hey give me ten random ask
the strength it's going to space ten
random extra access training started all
right so that's one of the the big
additions and you wonder what is this
for right this is we use these variety
property based oops for writing property
based testing so we are going to talk a
lot about these right with today the
rewrite passes that we use examples beta
testing right when you want to test a
function we need to stop and think about
a bunch of different examples to past
our code
we've probably based testing instead
with the finally general property
I say look at my code should work under
this property and then we let the
properties generate all the data files
and test our code using a bunch of
different reports and what is ready to
say is that both the code formatter
which is the big feature that is coming
Alex
six and his three data is coming 1.7
that Thanks go traumatic in anything
that's it and history data that's come
on that Sabbath the initial work initial
foundation for the switchers was started
on papers published by John Hughes okay
so Joe do t is well she's a professor at
Chalmers University and has her going to
see the foundation that we use for the
coal traumatic to work the foundation
that we use on stream data and even
property based testing all together was
initially written papers published a
packet and so that's kind of the that's
the the top right there right so
introducing hvd it's you're playing with
the words here right with the driven the
table kind of thing and here what it has
the huge really development where the
idea is that if you want to improve your
programming language you wait for John
is going to write a paper in which we
try a paper and then you wait like 10
years sometimes even a little bit more
and then incorporate those ideas into
our language so everybody can profit
so that's it questions
so whatever to do today is the following
are going to explore both the code
formatter and are going to explore
through data but you're going to look
into the code how it actually worked in
order to look to the papers that lad to
those ideas okay so it's going to be
more on the code side of the
implementation side of things that
you're going to focus today I'm going to
briefly introduce those features before
we go into the code talk a little bit
about the rationale but that's what we
plan alright so let's do this so the
code formatter
so as we know the code formatter it
permits our code using a consistent
style write it how does it focus on what
matters so imagine that somebody sends a
request or you send a pull request and
you get a bunch of feedback and that's
it back into your coworker or it can be
a - I bought the later - but imagine
that so this feedback says look the
behind link limit is 80 characters but
here you used 82 and then another thing
back says the complexity of this
function is too high right which one
would like to address first the contacts
in one right so the going to pro matter
is that sometimes a lot of the feedback
that we get they are all about style
called convention and those there is no
reason for somebody dollars to fix it
and then we go and fix it right we can't
have tools that are going to
automatically fix it for us and that's
great or I can want to automate that so
the code formatter helps you focus on
what matters because we no longer need
to be talking about style guides called
decisions who here has been at some
point in their career in a code style
discussion right so that's how we want
to we want to not have to
and focus on what matters and what I
really like about things and something
that aligns really well with Alex he had
as in the way as we propose as a
language and learning experience right
is that the code formatter works as a
really good guide for new comer soon
because other things they don't have to
do when you're learning a foreign
language is that you rats encoding like
is this cold idiomatic
is that how other developers in the
community would write this code you have
this passion right and sometimes I send
the code to a co-worker or to a safari
and ask for feedback on that but now you
have immediate feedback just from the
command and then they have it's there
that's how your code should look like so
you can learn how to write the dramatic
code right at least in terms of style as
you're learning language as well very
fast feedback cycle and it beautifies
code written by teams and the community
so this is really important right it's
one code formatter
for everybody and they're going to
explore it a little bit more so just to
drive this point home right so we had a
official and non-official style guide
product we never had a official style
guide because I was very against the
idea that imagine someone wants to
contribute to Alex a and then we say
well before contribute to Alex you read
these like 500 line six underlying stuff
at before I don't think it's a very good
experience so we didn't have a official
start guide and we will be poles and
developers but we have a guy that we
tried
fault internally and kind of the
commanded the decisions that we did in
the leader and what we did when the
coals for matter was ready is that I
said a quick pass a style guide to
remove all the rules that we do longer
have to think about because we have to
format it and we reduce the size of the
style guide in half to more than half so
this is really great is exactly what we
want right so what what are the cold
chromatic principles we have three
principles there right so the first one
it does not change the code semantics by
default right because if the formatter
chains are cold you would not be happy
with that right so that's kind of the
first rule and I just say by default
because they have a flag where the
formatter can read maybe deprecated
functions so in fact in format hey we
need deprecated functions so it can
automatically up to create your element
code to the latest because every name at
the perk edit functions card so that's
really nice but we don't do that by
default we need to ask us to do it and
the other goal is to minimize
configuration right because if we have a
bunch of configuration that formatter
now instead of discussing about the
Rubies you're going to be discussing
about the cultivation of this
configuration is better than the other
and then that's we don't want that to
operate so almost no configuration
that's the deal that's what a gap doing
it and and then the third one is no
special cases and actually was designed
to be an extensible language so we
cannot say oh wait you have this
function after this function let's do
this no that doesn't work because
everybody can get answer and extend it
in different ways so we cannot have
special
right so if you're not using the format
area and you watch is today I need to do
is surround mix format you need to have
an eternal system if you're an
experiment in your project and that's
what it's anyways format all your code
for you alright so how does it formatter
work then so before we talk about the
formatter so here going to the
implementation part of the top so before
go about the code formatter that solve a
subset of the problem and what is the
subset of the code formatting problem is
formatting data structures so when we're
writing code we have data structures
right those data structures there in
memory and we want to get the data that
is in memory and print it to developers
as we can see here right so this is how
we would understand a keyword list where
we took keys the first one is the key a
with a child list of 1 2 3 and the
second one is the key B with the value
of ok right so imagine that we want to
format it so one of the things we need
to consider when we are pretty printing
inspecting for mathematical structure is
the line make so imagine that we have a
my length of 25 columns here our data
structure fits in that the spikes are
like okay that's nice I can print
everything into a single eye right
however if we say that the right length
is of 20 columns here then it doesn't
work anymore it's like we need to break
this apart so what ones that want to
have some flexible for money don't you
have some kind of proximal layout so if
it is kids because it doesn't fit into a
single line in the world what we need to
do is that we need to break it over
multiple items right able to reduce the
language even further right let's say oh
now I need to break this thing again and
then
cool as introduced or you extend the
language if you need to attack simply
for matter the instructors okay and of
course if you reduce even further then
it gets to a point where we are going to
go over the limit because there is no
where we can break that thing further
apart so how does how helpless solve
this problem we use something called
document algebra and the idea behind
document algebra was introduced in this
paper by John Hughes where he called the
design of a pretty-pretty library and
what is really why we liked about this
paper is that the beginning of the paper
he says look we have this problem pretty
printing print printing data structures
like pretty pretty cold this is a node
power right since we have higher-level
languages we want to do this so how can
we solve this and more importantly how
we can solve this functionally okay so
the idea that they had there is like you
know if I were to solve this problem
functionally what we need to do is that
we need to define a very basic set of
data types and we need to define a very
basic set of rules where we can explore
everything else where I can do
everything else on top of those very
basic data types and and on top of those
very basic rules so that's the algebra
right definition of those basic
primitives we are going to build
everything on top that's the document on
Oprah so it's a very interesting you
know when you read the paper and see all
like that's how they are functionally
tackling a problem
totally attacking on the main it's about
data types and defining rules which are
functions that work on those data types
so so we have documents RJ bruh so water
the algebra is the rules right that we
have all this document so what documents
we have we have a backstop so here using
a rating the Alex Rios station that's
how it works in the ethics code base if
you're going to take a look at it right
it's not the same as in the paper but
they are very close to each other so
which documents we have we have a text
document which is a string and a text
document we are going to print it
exactly as is right so when you print a
text document is exactly as it we have
the math document where you say look and
what mass is not met by like two columns
and what is done is that if that
document has a line break we know that
after the light gray we need to last by
two follows and that's what it does we
have a light document which means
between two other documents I want to
have a line break between those two
other documents and we have the coke a
document that Kolkata native lands it
prints one right after the other and
finally we have a empty document which
is empty this or anything right so okay
so now we have our basic document so
let's see how I can print some data
structures okay so imagine that we have
at least res never want to create that
place on the top so we have a list 1
comma 2 comma 3 no spaces for our
simplification
alright so imagine that we want to
pretty-pretty a second like that
everything to a single line so what do
we start with opening brackets and then
we call cap the first document as a tax
right the first document which is the
number one maybe a comma
the second document number Chui the
comma the third document which is number
three and then we concat the closing
brackets and that's it right so that's
everything
a single line but what if you want to
have each entry and it's alright how we
would solve this you would write this
right so let's say look now I have the
opening bracket and then I have to line
and then I have another line document
another line document but we want to
nest everything that is inside of this
so I want to say what to dispatch of
columns right after the the number 3
right they turn the last document and
then I close the brackets and that's it
right so this is it it's like the basic
rules that we use for pretty pretty
native subject but we are not done right
because of what to do that we want to
choose between layouts we want to say
look depending on how much space I have
I want to put everything to the same
line but if I don't have enough space I
need to break that stuff and what we
look at this right there like you know
those things they are similar those two
documents right it's like kind of like
replace coke at my life or like my
Coquette but we have an issue here right
because in this like document we have a
call to mast right but in the previous
document here we don't have a call to
this right so they are really close to
each other like kind of just replace
line like a cat or vice versa but we
have this mast call right so the idea is
a state year with having an algebra is
figuring stuff out like we can actually
keep TV stuff out like this actually in
this document if we add a last call it
doesn't change the thing that's going to
be printed because the next call only
has an effect when you have light breaks
so if we do this if you just add them
the last call it means that swapping
between those two documents it's just a
matter of you know getting all the
lights all the line documents and we
place them back on capp documents and
that's it
right so we're really close of getting
tax we laid out all we need to do is
need to say look I have is the
and they does not might have a bunch of
light breaks in it but if I replace the
line breaks in it will and try to put a
little it to the same line is that going
to fit if so you pray that it is a same
line otherwise a particular part right
so that's what I want to do and we went
to implementation editor for the first
time we use this paper called a prettier
printer paper by Philip water which
butyl top of the double helix paper what
I really like about this series of
papers that they have I will like their
names right so in this case a prettier
printer right just because as we see in
the description of the paper
Philip water he was able to reduce the
algebra a little bit further so it's
less cold and it's also faster right and
I said this is a prettier printer it's
really nice so don't really bother and
the idea behind this paper
is this every time we want to have a
flexible layout every time you want to
choose like these goes into a single
line or over multiple lights you're
going to wrap that into this group
function okay so we have so we
introduced this new group thing and the
idea and the way that the group function
works is the following I'm going to
receive a document so the group function
will receive a document with a bunch of
lines in it and it's going to work like
is going to say look I'm going to
receive a document here and I need to
choose between two documents
so the first off Matt I want to try out
is the safe document where I replace all
lines might have cat if that sticks into
the same line I'm going to use that if
not I'm going to use the original
document with the line breaks and that's
it right so basically what this function
is doing is that it's considering
between those two solutions right which
one of those do we want right so if the
first one fits on a single line that's
what I'm going to use otherwise
is the other and we went we implemented
that so it was a poor class will receive
actually quite long time ago because we
have been using these for predict
training the instructors the elixir
since you know the purpose you can see
it was a lot of mainly 2013 so almost
five years and so it implements when
exactly did you water document autograph
and then we started trying this out and
at some point Alexey he said he left a
comment there like let's do some stress
testing on this so what I did is that I
think it was a two or three megabytes
with the structure so I got this birth
heartbeat structure and I tried to
create that but when I did that my
computer was using like 100% CPU for 30
seconds right so if you try that or not
it's not going to take that long on the
addiction right so something happened
here that was something wrong in what
was wrong is that both cubes and the
water papers they were written for the
Haskell programming language and Haskell
is a lazy programming language so this
code start automatic and Alex you
because it means every time I have
improved we are going to consider all
the combinations at that moment eagerly
so it's exponential capacity let's
understand that okay so let's let's do a
step back let's write understand this
issue so we have this chapter right so
you know when we have the line length of
25 it fits everything to a single line
but if you put the line next to stand it
compresses like that so the question is
how many clues do we have the dis data
structure right how many pools how many
things that are believe you're able to
break apart we have two right so we have
the our list when we compress it a
little bit it breaks apart and then we
have the energy
when we compress it even further we are
going to break it you're going to break
it apart as well we're going to render
each entry it's alright so the legs
investors are eager here what it means
is the following is that every time I
have a group the ethics are called
because it's eager right what it's going
to do is that it's going to replace all
the linebacking cats and try that out at
that moment and then try the other one
out and then if I have a group beside
the group so if you have two groups
because they're going to have a new
piece had another group we are going to
have four combinations to try out to
have three groups it's eight
combinations to try out all right and we
can see that as we have groups so as a
data structure starts to get the mass
that in that state the number of things
we need to consider means starts to go
really high and that's why it was slow
so we've got this other paper called is
strictly pretty right and again the name
here it's really smart because we can
say that Haskell is a lazy language and
that it's simply saying it's eager but
it can say that a lecture is a strict
language so the idea of this paper is
that so recently he got the water paper
and he translated it to a camel which is
a strict language like an observance
right so that's sweetly pretty so he
ported everything considering the source
of complexity here
so he ported over into a camera and
stoppable oh no he sent a pork past
duty on top of the earlybird past where
he converts the operation to the crystal
index paper right and the problem solved
so we have not met article we have it
actually for quite a long time okay and
it's implemented by a bottle called is
packed out of the ground and we use it
to inspect data structures in
but intellectual not sticks we also use
it by the code formatter and the thing
is the code formatter problem is exactly
the same problem is exactly the same
thing so imagine we have this code right
and we want to format it if we have 25
columns it sticks into a single line
building right but if you have all the
20 we need to break it apart right then
we have only 2 and we need to break it
further apart it's exactly the same
issue okay but in order to support
called harmony we actually had to do
some extensions to the algebra so we had
a little bit some extra rules make it
work for us so at system of them some
extensions on the first one it actually
came for is back in the you structure is
the color document that's why when
you're using hi eggs in your turbine all
the data structures they come color
because we added the collars up and
another document we added was nasty bite
or sir so before you could only say how
much less is not met by like four
columns now if you say much messes
document by whatever the cursor is right
now another document that we added and
I'm going to show it as an example is
for some feet and a couple other ones
right so let's see what example just the
kind of changes we need to do in order
for this algebra feet to bark called
harmony imagine we have this code right
so we read for this code okay so we have
we are calling some function
so we have the first arguments the ahta
okay the second argument is a year
doctrine is a multi-line string and then
the third argument is a harlot whatever
right this code it obviously fits in the
sliding leg here design limit it fits
right it's totally fine but it looks
weird right because we have a multi-line
field in the middle of our function call
so the way we saw this is in the Nixon
is like every time you see a here dot
because it's by definition volta line we
want to consider whatever is around it
to be unfit so basically what it does
that every time I have a dear dog
we are going to say look this thing even
poke it's going to fit into the line
consider I think it does it because we
want to break it apart that's it right
that's the kind of ways we defined all
right and that's it find a code
formatter so the idea in theory so I
mean one of the interesting things is
that now we all know a little bit about
how it works but I think one of the main
takeaways that I have from the whole
code for many experience is exactly that
is this algebra idea right is idea where
we can define very basic data types very
basic rules and build everything on top
of that right because then you can you
can address your whole problem domain
with this very basic set of primitives
and that's a very interesting idea and
it's one that was there in the original
paper all right so that's called harmony
it's already out there you can use right
now those are the primitives it's
beautiful and then the second thing I
want to talk about is what is coming
galaxy about seven as we saw and is the
string data right and as we saw a new
string data variety property based apps
but the first question we need to answer
face then why property based that's
right what are the limitations of the
wave right tests today and so what are
the kind of tests
right today those are example busy
testing right so what we do is that for
example in the electrician library we
have a function called is trained that
contained in one of those things that
one of the things that this function
does is it checks not one of the things
the finger dysfunction is is that it
checks if this trade on the left side
given his first argument actually
contains this train in the second
element so in this case it needs to
return true so what about a dysfunction
we had to come up with a bunch of
examples right test also imagine that I
have the street fubar I want to check
that it starts with that it has fine it
which is properly it utters it has so I
want to check that right so we write
this test and then that should return
true and then we check that it also has
bar in it which is the end and we want
to tack something the middle right and
then we want to check that it doesn't
have something that it has so we need to
come up with all those examples right
it's our responsibility as a developer
right but then it brings two fashion
right to the first one how we're going
to find corner cases right like are we
sure that we tested all the scenarios
that are relevant for us to test right
how so how can we do that how can how
can we can be sure okay and even with
these finite this part okay is this
right how are we to reason about them so
that's it some examples and we actually
struggled with this elixir right so this
string contains sheet full bar contain
the ABS training we did you remember
that we need to pass an error and even
we to remember the way to test this case
we need to come up with a way of decided
is this true or false right what what
should be right we need to remember to
test this case as well this is the end
screen contain toolbar is what is either
I'd like these three empty street to not
to do something that is bigger than
eight right
is a little bit easier but what about an
EPS training does it contain
demonstrated all right so did you think
about all those use cases and and
sometimes we don't write and then we
figure out disease cases as we go or
sometimes those these cases the the
answer data gap it's because it's tied
to the implementation right all it just
works because that's how you implement
it for the first time so sometimes when
we refactor the code the behavior
changes because never thought about that
behavior in the first place now to
change the recommendation
the behavior was copied to the
implementation and good luck right now
change the behavior they didn't even
know it okay so every time you are using
an API and it says well if you pass
these it behaves like these or in 2008
string it behaves like things right it's
probably smell right there's no wonder
like it was made up as weight alone okay
so with property based nasty we solve
this issue because we just defined the
property right so what would be a good
property for something like string
context here's what I'll do so I want to
do is that you want to generate a string
that is going to go on the left side
right and then we want to generate
another stream that is going to go on
the right side and then we're going to
concatenate two strings together so we
have a comma string is the concatenation
of you have to write and that I know is
training should contain both the left
side and the right side right that's it
that's the property right and we can
pick Oh something like straight starts
with it's very similar except we don't
check that it contains the right side so
we keep up with your property and we
don't have 12 property sometimes you
have multiple properties for the same
function and now that we have this
property what we do is that these
properties using the code generators
these tributaries are talking about so
right this property
not as the spin for me that's that this
property actually holds this thing is
actually true so it's going to generate
a bunch of random straightens right and
exercise our function using a bunch of
different combinations a bunch of
different strings a bunch of different
values right so this is really good
because now you're not thinking about
examples we're saying look this is how
my code should be hanging right and then
if for some reason the test fails you
know like Oh according to this property
right like these things should be true
so my comment ish is wrong because if I
because my I want my code to execute
this property so it also guides you
towards the property tab right so what
is property based - name so it's also
described as - narrative casting a for I
don't like that name much exactly
because it's more than generationally
generated all right it's about
describing a variance of the systems
about this crime in the things that
should always be true it's a property it
never changes it's always true it's a
property right and when you think about
it like that right it's going to lead to
only test software that is designed in
depth because you're no longer coming up
with ad hoc rules about how this goal
should behave right there is a very well
define it in clear rule and after we
start to using property based testing
more and more analysis we actually found
both a standard library where actually
causes inconsistent depending on the
input our coding database at the
property okay so so how did it all start
properly based actually it started this
paper by John here - cool classes called
quick check a lightweight - for hello
testing
Haskell programs right and but this time
and that's what we decided to implement
projects here we have other
implementations of Abel even for
Alexander leg we decided to implement
something that we can build into the
language and really leverage the
existing strain they need extreme
features that we have in the mixer
that was our phone but it was based on
this paper right but this time is there
in our lesson right because when we
inverted the pretty printed papers right
which were written perhaps called later
we thought that that everything was slow
because Haskell is a lazy language and
that it to this eager district right so
this time it's right there in the taiga
they're like haha you're not going to
get me again so we need that we cannot
just bought this paper we need to do
something different and one of the
things that we use the law to drive our
accomodation was really helpful was that
the implementation for closure right so
for the pretty bitterly base of the
camera connotation
this time really leverage the closure
implementation called test chat and we
build on top of that because it's an
eager strict language as an experience
alright so how does it work right so
let's look at the internals very quickly
how does it work also the daily
generators work so so what our
generators as I said they are all
defined as from data module and the
generators there are these functions
like integer here right or this train
passing the ASCII parameter and we ask
you to generate a bunch of data for us
and they do that right so what are you
ready so they're lazy for something
they're lazy so we took all the integer
generator in the command line it's going
to return this and this is true
it's just a recipe of hot generic data
doesn't generate data right yeah but it
knows how to it's a recipe the same way
that these three module in Excel works
right just a recipe and the generator is
there an infinite so if you say I want
to convert a generator into a list it's
going to take forever
right because it's going to keep
generating things as long as it can
right it doesn't take forever because
you don't have infinite memory
so eventually we run out of memory but
for our purposes we take for everything
and generators so they are infinite so
they keep on generating values but they
are also random every time you invoke
the generator the same generator you're
going to get different times out of it
and you can say that those values are
not guaranteed to be unique right gap
the placated values even the same
location okay another thing about the
generators that makes them really
interesting is that big growing size so
imagine that we have this e to the
generator and say hey I want to skip so
let's take a step back right so we can
see here that those trade is they're
generating small numbers right like
minus 1 1 3 5 but what happens if you
say I wanted to keep the first 800
elements and then generate 10 memory you
can see that the numbers now they are
bigger right so we're generating 800
minus 71 it's also the ineptitude grows
as generic or more terms and that's what
we want right because before imagine
that we are using these for example to
to generate tasks for us for property
based testing as a generic data the
water to allow that has to generate we
are growing the size of input that we
are using to test that right so the
generator is the growth side and the
other nice thing about generators is
that they are shrinkable
right so what do we mean that generators
are suitable imagine that for example
imagine
not that we write this fact this
property that we want to fail okay we
want this property to fail it's a failed
property just for us to test hard work
so what are doing is like so you have
the property normal to check where the
element inaudible is so we say look I
want to generate a list of integers
right and that's going to be my list and
I want to assert that 22 is not in the
least
okay so this is going to eventually fail
because since we're generating random
list of integers and ventually you're
going to generate a list that has 22 in
it and that's going to make the test fit
right but what is going to happen is
that as we as the test runs because the
generator is the growing size right as
the test run
delete they are going to get bigger and
bigger and the numbers are start to get
bigger and bigger so when the stats
fails you may have a very big list you
may have a list with 20 element right
and then here we know that the risk
might fail it because it has 20 to date
but in your actual code what could
happen is that the the test would say
look the property failed here right when
you pass this very large list and then
you look at them and say like wait what
what is in this list that is making my
test fail what we have here then is
making my test not pass right so what do
we do it right in this case we actually
so every time somebody you have a
library every time somebody report a bug
in your library but whatever all the
things are asking to do to have a
minimal reproducible case off of this
bug so I can try it out right so the
generator is they know how to do that
automatically for us because they are
shakeable so what we do is that for this
property when it fails a street data
the generators expense say hey I thought
up this fail let me see if I can shrink
and I can find the minimal
but that is going to make it faster fit
all right and then it can do that so so
it says for example look have this
property and I tried 29 times I tried a
generate with nine different things and
it worked but at some point I didn't
really Tuffy that may lead to failure
and I can I was able to shrink it so you
can see here that when the list is only
is at least two single element and has a
number 22 in it right these things fails
right so because it tried 29 times in
the passage success there's a chance
that the list at this point actually had
30 elements right because the list is
going to grow and as you generate so but
we're able to shrink it I said look this
is the minimal thing that is going to
make this property fail and this is
really really useful so there is there
is one presentation actually it's a
video YouTube is somebody remember two
things from computer fire or something
like that the channel where they got
children's and he's using property based
testing to find and when he was using
property based assets of national
implementation I think it was a
communication protocol for a car not a
factor he actually found a bug in the
park all right the way they go to the
protocol you could find properties that
would always be false and then there is
not you can do like the hope this
specification has a flaw right they're
able to find this floor all the
specification uses some particular
implementation right and whether
attractive stuff like that you don't
want to have a huge input right you want
to have the mini way put it says look
even with this minimal thing I could
find its lawyers this situation all
right that's really fantastic I'm going
to tweet out the episode a because it's
really fantastic it's a really very good
use case for poverty based testing right
and okay so we know all those properties
about generators right you know that
they're lazy we don't read them we know
that they grow with sighs you know that
they can shrink but at the end what our
generators their generators they are
just functions right a generator is a
fiction that receives two arguments so
the first one is to see
that we use for random number generator
and the second one is the sides that we
grow as we generate things and the
generator needs to return to Phoenix
right so it returns a couple two
elements the first element is the
current element that they've just
generated and the second element is
something that knows how to reduce how
to shrink that faith in case that value
fails right so that's the simplification
of how they work internally so that's it
so what to raise related to a litter
right it provides the degeneration
property primitives and we're using
those data generation primitives to
bring stateless property based testing
to accidents right and here is the word
stick list because the discipline the
property base tax is actually a big
display and we're having only a subset
of those in the linear' but that's what
what to do right you want to get
everybody excited about this field
everybody to start relying more property
based tasks right and then if you will
start doing that if you want to use the
more advanced tools you're going to be
able to write because they already have
the introduction in a very familiar
environment right so for example quick
check which is so remember the paper by
jumping so-called quick check and that
became actually a product that they have
the open source version and the paid
version and we have it available for
both intellectual community so it's what
word versa tools right you can check out
quick chat for example it does model
checking it actually does like if you
have a contacts model it tries to mess
up with your scheduler so you try this
that came concurrently it makes for
different things so there's a much
interesting stuff happening there right
so that's it we got the end of the talk
right so that's use driven development
and the idea here again is exactly you
know we have the cycle
where have you ideas be introduced and
then we which time incorporating us into
the language and this time I call it
moves review development right but the
truth is it's much more than that right
so even we are talking about code for
money so hugs the initial paper
and then water approved it and then
crystalline even predict and that's
right all right it's a butch everybody's
already improving everybody's work and
sometimes the idea is improving academia
and then it comes to industry we prove a
little bit more and then academia brings
it back try to rationalize our
improvements try to make sure they are
sound that they're safe
right and then it goes back to us so
it's a very interesting cycle and I
think this particular tools are going to
see because those ideas exist in
academia for a long period of time and
now they're really becoming a strainer a
code firmly we have a bunch of different
languages that actually use it that I'm
not sure if there is the same basic
primitives or not met algebra that we
see here right but it's really getting
more mystery adoption and the same for
property based testing right Alec series
adding it but we have libraries for many
of the major languages that we have out
there so so I want to to thank John
Hughes for all these contributions
it is a great feeling to know to have a
problem and somebody wrote a paper on
solve a problem so it's really it's
really break and as I said it's it's a
bunch of academia actually working
together but we are easy to me examples
from here today and that's why I want to
thank him I also want to fake this work
for this work to get into elixir it
actually required a lot of work from
budgeting for developers so far the code
formatter both code from Aaron's from
data I want to thank the other party he
is me Alex's party and he's going to
give a talk on this related tomorrow if
I'm correct so check it out and so for
the code formatter will also have Alex
job he was a GU some of code student
that helped us really push this thing
forward that is do it before we he's the
one that braved and the first poster try
appalled formatted in a link theory and
we use his stick back in there and to
take the decisions and for its truth
data I also want to thank the closure
task library which is was really
provided a foundation that we're
building our generators as well and
finally I want to thank a lot of heart
attack and we you know we would not be
here to does a platform attack and all
this time that we have invested in
galaxies and in the community so all my
work right it's powerful we're talking
with that all the word retard elixir and
I want to paint the rest of the radios
part of Jesus
if they had a but sure i have to i do
thank them because they got where I am
right now
right so it's that really appreciate it
but I also want to thank the elite
support team right for all the support
and I want to make everybody for being
here and everybody who tried to quote
for a matter contributed to it and
trying straight data and give us
feedback so thank everybody I hope you
have a great day
a huge thank you - thanks for that but
there's one more thing so you don't get
to go stage question I believe that our
friends from Kleckner Devine has a
little something for you
welcome up good morning
that's nice
I'm Thorin you kept me right you will
hear more about this tomorrow actually
we're out if you pull to our
presentation it'll be super exciting
talk about steel but on behalf of my
team and I think on behalf of the
community I would like to thank you for
the hard work you've been doing over the
years and I've discussed with my team
like how to properly thank you and at
Klockner I were really really really
really into 3d printing and we got this
really large 3d printer which is a super
loud and be super cool and we just
thought of something so bear with me
here and I hope you'll have to miss very
arm spin because I know I have
so I'm going to do the presentation of
16 kilograms of polymer sweet it's very
cool if you want to know more a lot like
all of shenanigans like 3d printing or
if you just want to touch the global
just come by our booth will explain all
of that if your speaker at this
conference there might be used some
polymer for you alright have a great
conference
I do
I don't thanks for presentation I was
wondering if there are some other papers
from John Hughes that will inspire a
teacher in near future that's a very
good question so we have like over the
last weeks of data we have been talking
about and a couple different approaches
that we may explore about like how to
best generate data so for example we
have a tree generator in a mr. data
that's supposed to generate a tree but
the trees that we generate they do not
have a good property or they are either
too slapped or you're either too long
and we want to kind of beat the beetle
and apparently it's actually a very hard
problem to solve and so we are reading a
bunch of different papers and you know
Tokyo those names is you know like half
of them are going to find his name so
you know I'm pretty sure I don't have it
is that yes right now but I'm pretty
sure it's it's about to happen
well this question
never I knew I could count on you Martin
all right so the whole idea rocket base
testing night I love that it's coming
into the four language and I guess we'll
all have to learn how to write our
properties because I noticed on the
slide like you you did mention you'd
write several different properties but
the slide you had you know if I were you
know the kind of evil T here that I am i
implement you know contains question
mark as truth so like how do you like
how do you think about the negative
cases for for properties can you repeat
the last part of my think about the so
for example string contains right and I
want to I want to have a property that
also says I can refute that this strange
intends to self constraint but like I
have this random data maybe I'll get you
know a string that actually contains the
under string like how does that work
when you generate the data yes so so so
we so I wrote the code right so the
example had Chekov
here and and then inside of the block
you can do whatever you want so you can
use identities assertions that you need
to use refute you can do what everyone
so our full we do not recommend so for
example to say well there is a
particular kind of put that this code
does not work you could possible say I
don't want to
and antacid at the moment for example
but and you just put all the assertions
in a traditional block or whatever
that's like where you're using but you
want to avoid that because if then it
means that your code is no longer true
for that property right there kind of
like poking holes in it and so we want
to avoid that but if it's something that
person is really to do it it's possible
all right so take everybody for the
questions that we stay around so I'm
going to talk about anything just hit me
up if I cannot answer one of the
questions properly also be me I'll be
glad to talk about the things as well
thank you so much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>