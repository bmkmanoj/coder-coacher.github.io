<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>OTP Team -  Lukas Larsson | Coder Coacher - Coaching Coders</title><meta content="OTP Team -  Lukas Larsson - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>OTP Team -  Lukas Larsson</b></h2><h5 class="post__date">2017-03-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ich_G1z44pQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everybody I'm here representing the
OTP team at Ericsson I'm going to give
you some news of what we're working on
what we're doing and what's in store for
the future and let's see if I can get
this so yeah outline of the talk I go
through some of our planned releases our
latest release 19.3 that was done about
two weeks ago I think something like
that
the next major release and some of our
longer-term plans so our normal release
cycle looks like this we had on the
Pistons of March we had 1903 released
with a lot of bug fixes we're moving
into a release cycle where we're having
a lot of small bug fixes in the small
races and doing a lot of larger changes
in the major releases in different parts
yep so we're doing a release candidate
of the next major release that's going
to be out in the beginning of May please
do try it and see what happens if we
break things that we didn't think we
would break and differently
compatibility some performance
degradations and these kinds of things
so these final release of poppy 20 is
planned for June 21st
so by Swedish midsummer celebrations we
will all be out of the office some just
leaves released with you outside
so the latest release we did a lot of
bug fixes and a couple of small features
we did a lot of work with Christian a
cessation of the cell which is ongoing
work we're always working to get the SSL
and the cryptography key back up to date
we added handling of the different kinds
of POSIX UNIX signals being sent into
the virtual machine and some various
fixes for other file related stuff in
the major release that we've been
working on for the last year now it
seems like forever since nineteen was
released we're going to move away from
the non SMP emulator and delete that
track there's we're going to deprecated
that in 20 so if you have a strong use
case for keeping it please do let us
know we will be announcing it on the
mailing list and so on it will be a
deprecation cycle with the work that
we've been doing with adding dirty
schedulers to the virtual machine and
everything
the maintenance burden of doing non SMP
has become quite a lot and we will in
order to keep it going we will have to
invest quite a lot of time in making it
move along so at this time we're feeling
that the difference between the two is
not the gain isn't all that much we're
going to defecate that one we've removed
some of the old functions like a long
hash that's been a compatibility hash
functions and the early 90s I think it's
finally a new move we're going to do
we're integrated a lot of our work with
dirty scheduler so why would be 20 dirty
schedulers is the first class citizens
we're done with it we're happy with it
the way it works so it will be turned on
by default and we've done quite a lot of
work with how you check processes for
when you're upgrading new code and to
make that more efficient and more
user-friendly some group regard yeah
these are amazing compatibility so as I
said we're dirty schedulers is finally
working in 19.3 we've merged all bug
fixes and all features that we
to have in there so it's working now
finally it took a lot longer time than
we thought it would be but it's finally
there in 20 we'll be enabling it by
default so that it will be there for
when you just start your virtual machine
so you're going to see a lot more
threads running we're adding a bit more
fine-tuned control of when you're
calling Alan garbage collection is
manually and we've also implemented so
that literals when you're communicating
in between processes constants so code
constants are no longer copied when
you're doing that instead they are just
passed by reference we've done
improvements in ETS tables so when you
have ETS tables that are accessed
concurrently that are larger than what
is it 256 entries so not that large
actually you have a lot of more
concurrency working in those ETS tables
we've worked a bit with the binary the
way binaries are handled within the
virtual machine so the way that the
garbage collector works with binary is
smarter we hope and which hopefully will
lead you into less problems with
binaries not sticking around longer than
they should have we're right now working
on improving IO scalability so that you
can do more polling and checking for
different kinds of i/o vents at the same
time inside of the virtual machine so
that will get very efficiency when
you're getting it into SNP scenarios
that are like 16 32 64 parallel
schedulers working at the same time
we've added a new Miss primitive that's
called n if select which is basically
bringing the i/o subroutine of the
drivers into working at slips and I
believe here in San Francisco maybe five
six years ago a colleague of mine called
wicked Graham or say talking about
native processes and how that was
supposed to work be in if primitive is
the outcome of that work and that's kind
of what we're aiming to
use in the future for doing native
processes we've done a lot of work with
a compiler finalizing maps getting into
that so we're optimizing how do you when
you write Maps and access different
patterns in the map and we have
introduced a warning so when you use the
export all directives in a code you will
get a warning saying that hey maybe this
is not what you want to have in the
production system pattern matching for
maps we've add an option to the compiler
to make this holistic builds easier so
that we don't get timestamps the paths
and so on into the actual compiled file
so that you can verify when Yuri
compiled something that it's the exact
same thing by using a hash of some sort
Adams may now be Unicode all of them so
we post in code you can add Unicode
items you can have Unicode items all
over the place you can send them of the
distribution you can create them using
terms of binary binary to term you can
create them using list item all of the
different places you cannot have modules
that are Unicode atoms but you can put
atoms everywhere else let's see what
else another so we've done optimizations
for unnamed ets tables so one of the
things that you're going to notice here
as well is that ets tables no longer are
identified by an integer they will be
identified by a reference so if you have
any code that depends on these opaque
types that's the integer is please
remove it and don't break our
abstractions but everywhere you will
have a reference instead and this is
much more efficient we've been able to
scale creation of ets tables to say like
in nineteen we were able to once you've
reached about four or five chords in
parallel in parallel creation of your
tables performance just died with this
one we get basically linear scaling all
the way up so it's a good thing we've
added some new function to or 2d to set
and to the random module we've added
some improvements to the gen server to
get stack traces of what's happening
more functions to various things we've
added Unicode support to the string
module so there's been a pull request
going on for a long time at the github
adding ways to work with graphing and
Unicode together with like Unicode lists
in aligning the unicode data data type
and UTS encoded binaries being able to
look for specific patterns and doing
your normal string to float or string
substring or all of these things but
you're working with Unicode rather than
working with the lesson1 support that's
been there for now so there will be a
bunch of new functions in the string
module and the old ones will be
converted to work with Unicode you study
in a backwards compatible manner in some
cases there will be new functions that
just try to replace the old ones that
are when you can't do a backward
compatible way or if it's possible to do
it backwards compatible we're just
making extending the functionality of
the current function what and the error
is working continuously working with
security so be TLS distributed or the
data packet TLS I think it is so we're
adding that into V as a sole stack
another largest thing of what the
structure of how we deliver things is
that we're starting to break out some of
our packages from our main git repo into
several smaller ripples so we're
breaking out some of our tools and our
non core products into other ripples so
that you will fetch them instead using
rebar 3 or hex or something similar so
they will still be on the organization
but we will be breaking out some of the
applications in two separate parts so
that we will get a smaller more
contained core of a line in there
first step of this is in OTP 20 where we
will we have already broken out Piper
and percept as they just trying to see
what happens in our internal build and
test environment seeing what's happening
there and how to put it all together in
for our internal Ericsson customer which
have very specific workflows that they
work with our releases in the future we
hope to be able to break out more and
more and more of these applications so
that instead of saying that you want to
have an outline release you would say
that you want to have an hour-long
release with VX widgets together with
the observer and so on till you pick the
packages that you want to have when
you're building it rather than building
the monolith and then tearing it down in
the longer term things that we are
planning to do is that as a continuation
of our work with the ena select and the
dirty schedulers and everything all of
those have been building blocks for us
to be able to rewrite the way that file
i/o and socket IO work in the emulator
so we want to move away from ports and
get into using myths ourselves and
before when we didn't have dirty
schedulers or we didn't have email
select that was not possible now with
the introduction of those primitives in
20 we can start to work with those and
hopefully get quite a bit of performance
and reliability features out of those
we're continuing work on distribution so
we want to be able to use distributed I
along in larger clusters what larger
clusters is is kind of unclear at the
moment but as large as we can manage by
still holding some of the guarantees
that airline gives you still applies so
it would be a trade-off to see what kind
of algorithms and what's the best way to
go there and how large we can get these
networks and still have message
delivering guarantees in the way that
you're used to with our line we're going
to continue splitting everything we're
working to make it easier to deploy
their long runtime system and all its
applications within
trainers in different environments in
the cloud and we're also working on
getting some kind of just-in-time
compiler support into the virtual
machine if you want to know more about
the just-in-time compiler thing you come
to my talk that's in about its I think
the session of the lunch so you can tell
you all about how that works and like
that's it what we're doing any questions
okay</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>