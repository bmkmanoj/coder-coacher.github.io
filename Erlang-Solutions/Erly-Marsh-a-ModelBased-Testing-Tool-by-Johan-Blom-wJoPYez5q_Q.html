<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Erly Marsh - a Model-Based Testing Tool by Johan Blom | Coder Coacher - Coaching Coders</title><meta content="Erly Marsh - a Model-Based Testing Tool by Johan Blom - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Erlang-Solutions/">Erlang Solutions</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Erly Marsh - a Model-Based Testing Tool by Johan Blom</b></h2><h5 class="post__date">2016-09-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wJoPYez5q_Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I so welcome you on and that we present
us early match model-based listening to
thank you thank you my name is um bloom
I recently got my PhD after well I
actually just spent a little bit more
than 10 years on this particular thing
but I've actually spent more time on you
peach tea anyway this is going to be a
talk about a tool that I used as part of
my thesis and it's going to be I'm going
to do it quite a bit of overview even
more like an introduction to the tool so
why do I start doing this developing a
model based tool well one main reason
was that I was working at move a lot at
the time and we were developing large
server software location service smsc
etc for the telecom operators and all of
those system were situated at operators
domain meeting that they are they have
to work and they are ready big and
complicated some of our system hundreds
hundreds of millions of users more loads
were founded by a set of very
experienced developers but we were no
testers so we were focused on developing
member startup were focused on
developing our stuff as fast as possible
we didn't really have time to think of
testing etc so we were thinking a little
bit about this how to test and I
identified a set of core modules in the
location so we had had it had already
developed it at that point point in time
and we had also deployed it us at our
first customer so it was kind of working
and I was running and dialyzer on it
then it
well it looked okay and we also had some
manual test Suites also going fairly
well so I mean basically everyone was
kind of happy everything was working
okay that that's what's like a the
common belief we had we had is accepted
their customers etc I wasn't so
convinced though that that everything
was as good as like was the common
common thought and the reason was that I
mean these manual test suits were only
testing a small parts of the system the
system again they were quite complicated
and there was a lot of use cases in it
and again these products have to work
all the time and perhaps particularly
important they don't have to interfere
with the network entities in the we are
inside the telecom operators domain we
are we are access to all the sensitive
nodes in the telecom domain network like
the hlr for example we could potentially
completely crash a network then I had
some ideas about model-based testing I
knew what it was I had started my PhD
studies before so I knew it from
University and model-based testing is
about it captures functional
requirements you can copy your about you
talked about formal executable models
and we generate test suits from from
these models as their formal we can I
can generate these tests suits from the
model as if you can do this
automatically we can use tools to
generate a test from the from the from
the models
and indeed there exists a set of tests
out on tests attitudes for for
generating test suit from formal models
cutrell expected for example there are
many more they are quite expensive
though they are not specifically
targeted to to erlang to the Erlang
world a more more like a common so what
I did was just too I started to develop
my own tool of course it's always best
that way so this is just what my the
rest of my talk is going to have going
to be about it's a kind of a map in
model-based testing you need a model
that captures the requirements of what
you want to test and to do and in doing
that you can do it in many ways you can
you can create the complete model and
then you do test it there was or how I
did it but you can of course also in
creative mode of step-by-step ask you
product growth in a more edgy ly way and
you need a modeling language to express
your requirements and I'm dealing here
with with abstract models again
capturing functional protocols
specifying protocols a little bit more
advanced systems so how long is perfect
for that I thought we have all the
necessary sing-sing things we need and
of course it should be really easy for
all and developers if you already know
the syntax in the specification language
as well another advantage would is of
course that it allows the use of the
existing erlanger infrastructure so what
I did here was to introduce our long as
a specification language but I don't
need a full power of along for my
purposes here
don't need traps for example or III may
need process messages etc but but I
choose to not copy that copy that here
so basically it's just the basic
functionality of our long i'm using
which is okay here i think because it's
just an abstract view of the systems so
here is our typically a typical
statement machine and you start in the
green blob and end in a red blob there
are several parts through this on one of
the parts is is this just as an example
you have an starting the ideal location
you get an input event sleeve with six
arguments and your output some output
events the two of them in this case and
then there of course there are songs on
god and did edge this edge and there is
some actions update state variables
etcetera and we can express this narrow
long quite naturally we are in the idle
state we have this live event we have
these arguments we have this guard when
in fourth PSI equals false then we have
something a little bit different there
from on our language in you cannot use
that because it's a side effect this is
ok here i I allow it here because in
this case it's a configuration function
it's a static data and it's something
well defined in this language here and
we can see that if we if this first is
record is true then we call this
function send if you Sam is the fire
it's very simple and fsm is not further
define which means here that is an
output event that needs to be defined
elsewhere but not within this hour long
fsm specification ok in this case I can
evaluate these into
ways given that either this record is 2
given us this list of course this is
true this card here and I get this match
in the first line here I can either way
either I can do so I end up in this next
state force update meaning that I go to
a net to a new location force update or
I end up in this access next state
access net Prem so that different the
two ways of executing this and that's
that's how I deal with it I execute
symbolically all the possible ways that
I can like ham it's kind of a partial
evaluation symbolically of the scene of
the rolling code and that's what I work
with later on okay we get a lot of these
edges and we got a lot of possible test
cases one of the problems you face then
is that you want to select a few of them
and this is not actually the Observer
that you may be used to in part of the
OTP actually invented this before they
are surface I'm was too slow to lisas
and this observer here is used for for
specifying which tests that I want to be
part of my test suit because typically
you can execute your model in so many
ways and you get so many test cases so
you have to select some of these test
cases also there are other practical
limits on a test suit I'm talking about
larger systems here which are operating
a more advanced complicated environment
you may have latencies you may have
timeouts when actually testing these
systems so the problem is how to
generate the best test
with a bounded size well a solution here
is to use the sub service and the idea
is that this should be kind of general a
coverage criteria is supposed to fulfill
some requirements you have on your own
on your system on your test what you
want to test and from the literature
typically examples are or to cover all
locations of your model or you cover all
edges or definition use pairs for
example you define a variable and then
you use it but it's it's unclear when
and what coverage khatir to use and
that's all the calls for some
flexibility because you don't really
know what to use and you may also want
to test to invent your own criterias
yeah the motivation is quite simple
obvious you may want to specify any
coverage criteria only one you want to
make it possible and those the
commercial tools that I mentioned in the
beginning that they do not really do
that and then we do these and implement
these by by implementing this observer
and thus that's a kind of another state
machine that observes stop stay the
execution of the of the EFSM model so
this is what a typical observer may look
like observers are in general much
simpler and this is a kind of
complicated observers it's a definition
use where you define
a variable in the from the first edge
that there is actually these are
supposed to be arrows here you define
looking for a defined definition of a
variable and on some particular edge and
you can see here you're looking for a
defined variable on some particular edge
this looks kind of Ireland but it's not
quite because you have x + E here they
doesn't occur here so it's a little bit
different here x + E or rather bound in
a more prologue fashion bye-bye
something we call match matching very
match variables it's hidden here but but
in the definition of the east of iron
boron is edge you have these definitions
and you can define your own observer
predicates and then of course there
could be more than one variable defined
on one particular edge meaning that
actually this is just just this is not
just one observer automata that is
executing it could be many it could be a
hundred thousands operating concurrently
when when when running the the execution
of the Erlang efficient model so how
does it work well we have this run this
is a like an ordinary run we execute the
model more than so it's like we are
executing an erlang program really but
then we also monitoring the syntax and
we need that in order to to see how
which variable that is defined for
example or on which edge we are
currently so here in the observer will
be observed that we have a definition of
em as ID and we are on a one
okay that means that we can proceed to
the second observe estate the execution
of the Erlang fsm model continues we are
on the force update and we moved to the
updated states okay there's no
definition of msid in that state we we
are we stay in this d you one observer
state and okay stuck I got stuck the
idea was that you should continue there
while I don't hook what's HAP sorry
sorry about that i don't i don't know
how to get out of this but now this is
this is just i asked him so i got stuck
in in somewhere I don't know what
happened I must have typed something I
must have done something stupid
somewhere
well I don't know how to I was running
short of time already before
ok
omani minutes now ok we ended up in that
state and we have a have reach and
observe and matching observer state and
we are have also reached final state in
a fsm model meaning that this is an
accepted state ok I have to speed up
this even more ok do we have a problem
here because we are dealing with
symbolic tat suits and the reason we are
using symbolic a suit is because we got
a complex the problems here so we have
been symbolic execution is a way to
handle sets of executions and we have
adapted this to do this model here and
there's a lot of theoretical stop so I
have to skip this of course but we end
up with a bit uh with a test case that
it contains symbolic parameters and we
have to get a set of symbolic test cases
with symbolic parameters that can be
instantiated in many ways possibly we
have to select one or more of these
possible instantiations to get abstract
test cases from abstract test cases we
can generate concrete test cases and the
concrete test cases others that we use
them to 2x that we execute against the
system that we want to test ok so that's
basically it thank you yeah we may have
time for one question but not much in
equation
yes yes it is erlang it is all i need is
that i have in my thesis I have I could
okay but was one thing I was one thing
was missing it because I I had to tell
you we actually found more than hundred
falls in that location system i was
talking about the beginning sorry you
were talking about a formal language and
i'm using oil and in my thesis here you
can write all about these days I'm
antics and the syntax of the language
that I use so thank you okay thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>