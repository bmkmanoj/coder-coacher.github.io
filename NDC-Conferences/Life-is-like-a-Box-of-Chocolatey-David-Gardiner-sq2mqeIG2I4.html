<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Life is like a Box of Chocolate(y) - David Gardiner | Coder Coacher - Coaching Coders</title><meta content="Life is like a Box of Chocolate(y) - David Gardiner - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Life is like a Box of Chocolate(y) - David Gardiner</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sq2mqeIG2I4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everybody my name is David Gardner in
chocolatey so especially if the people
who got in early you might have an extra
special treat just to bring had a
message about chocolate and actually
hags chocolates I'm from South Australia
hag's South Australian chocolates
although ironically there is a Hague
shop just around the corner here so I
could have just brought them here anyway
there's my details on the screen my
email address my blog and my Twitter
handle if you want to get in touch with
me after the talk today I'm going to
talk about basically bringing devops to
your own desktop so you possibly heard
about DevOps or vendors some talks this
week already thinking about basically
using DevOps and getting away from
having our servers as special little
creations that we carefully managed to
being things that we can deploy on
demand sort of bring them up pull them
down and not be concerned about that
sort of process because it's all in
configuration and we can do that
reliably and repeatedly so wouldn't it
be great to be able to do the same thing
for our own desktop so that we're not
treating our own development environment
our own PC as his special little
creation we've got everything just right
and we we don't want to touch it because
it's just working I remember it reminds
me last year didn't they say there was a
talk about having all your windows
exactly located in the right spot and
and not wanting to change that because
you just had everything laid out just
right we may not be able to do that
window location so much but with
everything else as far as getting the
software onto our machines in an
automated way we can do that with with
tools like chocolate inbox data okay
now having said that it's worth
mentioning that these are not the only
tools to do this so some of you may work
in a larger organization that has an IT
department they may already use tools
like System Center Configuration Manager
or popper or chef or even powershell
scripts or partial DSC desired state
configuration these can do similar kind
of things but maybe you don't work in
that kind of organization you just your
own developer you're working at home or
you do but that orbit that IT group are
just focused on your standard sort of
SOE with office and they don't really
care about developers so what can we do
to automate the process of putting them
all our tools on our own machine getting
them all configured and basically be on
a repave window so now we've got Windows
10 we've got this ability to refresh
Windows 10 leave all your documents
where they were but get rid of all the
applications and so then how can we put
all their apps and tools back where we
want them so that within a matter of
hours or possibly overnight we can come
back we've got a completely fresh
environment we can work with the
straightaway so the first time then have
a look at is chocolaty and so yes the
the early birds have already heard of a
taste of chocolate he already chocolate
was created by Rob Reynolds out of the
US and there's a chocolate org website
and so we're gonna have a look at that
first just a bit of a context of what
chocolaty is it's worth mentioning
chuckling it's not just something that's
yummy to eat it's actually based on
nougat so that's the link with the
naming sort of nougat nougat chokolate
developers and their sense of humor sort
of thing and but it uses that the NuGet
package format and some of the new get
libraries to do a similar kind of things
so if you ever created and you get
packaged before this is gonna seem
familiar which is a good thing so let's
jump over there's chocolate org website
bit of an overview of what chocolate is
and most importantly if you haven't
installed chocolaty before click on that
install up the top there and you'll find
out how to get chocolate on your machine
which will do that shortly chocolaty
like nougat org has a repository of
packages so there's this this is a
screenshot this was taken
a few weeks ago I think we're now over
5000 packages and so these packages
represent applications so you can see
things like Google Chrome even chocolaty
itself is a chocolaty package so for one
example of four that might be teamcity
so we've got the JetBrains guys out
there and the expo so they produce an
application called teamcity which is a
build server and so someone has created
a package in chocolaty to help you
install teamcity so you could go to the
JetBrains website download it install it
or read all the instructions and then
click click click next next next and do
all that well you could use chocolate to
do that for you automatically so in this
case just to highlight a few things here
which will then show you where these
come from shortly so we've got a
description here of the package we've
got in this case some optional
parameters we can pass in because this
is gonna run as a service so we may want
to run it with a different username and
password on the left down here we've got
links to the actual original software
site lot software license and
documentation we've also got where the
package source is so if the actual
chocolaty package if you wanted to
update that or contribute to that this
happens to be an open-source package as
distinct from the software itself so
team CDs not open source but the package
is scrolling down we've just got the
very simple instructions of using
chocolaty to install teamcity
so chocolate installed teamcity it's
that easy then there's a file section so
you might be a bit more nervous about
just randomly running things on your
computer so you might actually want to
have a look to see what's this package
going to do so you have the opportunity
to have a look at the powershell scripts
that are included in this package and
review those just to make sure it's not
doing delete start on style anything
crazy like that that's unlikely but you
get that chance to check there's some
virus scanning
there's also right down the bottom
there's dependencies so this is a nice
thing again similar to new get our
applications often have prerequisites so
in this case team C is written in Java
and so that requires a JVM to run
and so by adding a dependency here on
another chocolatey package it means that
when we install team CD it's going to
make sure that we also have a JVM all
installed so it takes care of all those
extra prerequisites for our software in
this case there's a link to the
maintainer of the package and also a
mention of who the actual software
authors are sometimes they can be the
same in this case it's different
we they've got meta tags just to help
searching for other similar kind of
packages and the release notes in this
code so it's just a link off to
JetBrains wiki page but that could be
marked down we could have sort of rich
formatting there for describing what's
new in this particular version of the
package and then we've got version
history so in this case they've released
a new version of this package pretty
much lining up with each new version of
the software and that's pretty common
right down the bottom finally there's a
discussion area so if you've got
problems or questions about using this
particular package that's a great place
to ask those things or even if it's as
simple as a thank you for the the
maintainer for creating the package
that's a nice thing to do as well okay
so let's see how easy it is to install
chocolaty so let's jump back to the web
page and say here I've got the install
page on the website if I scroll down
there's two examples here one using
command that X him on using PowerShell
and I like PowerShell so I'm going to
copy that line there and I've got a
virtual machine here now bump that font
up really large so I think you can all
see that I'm just going to paste that in
and hit enter that's going to download
just that install script which is then
going to pull down all the other parts
of chocolaty and that should happen
pretty quickly so I can type in choco
and I've got chocolaty and I can see
list my local packages and not
surprisingly the only package I've got
is chocolate itself so this is a virtual
machine it's a server image there's
nothing
installed on here I just got the paschal
console so there's no other applications
on this virtual machine at the moment
but we're gonna add some things to that
over time so that was pretty easy to
install tottaly actually I'll jump back
there so how do we still install
something else it's as simple as just
knowing the package name so 7-zip is a
pretty popular thing to install so let's
do that so it's gonna download the
package and then the package will tell
chocolaty how to install the application
in this case it needs to run install
script and it's secure by default so by
default we're gonna get prompted to say
do you want to run this script and we
say yes we do
and we're done so I could now type in 7z
and I've got 7-zip on my machine that
was easy so I didn't have to jump around
and find the right website download it
and figure out where to put it
chocolate did all that for me the other
thing well you might think well it's
gonna be annoying I have to type yes
every time I install something so if I
go back up here and I can actually tell
chocolaty actually I trust you I'm gonna
copy that line paste that here and so
yeah I'm just gonna default to yes run
the scripts so you might be very
suspicious you might want to check every
time that's going to make automating a
little bit more tricky if you do that
low okay
so just briefly I don't know how many of
you dabble in the IT side but there's a
thing called package management that's
been included in the latest version of
Windows client and server and when this
first came out people that are Microsoft
are doing it again though they've seen a
great idea in the community and they're
going to build their own thing well no
it turns out what they've done is that
they're going to work with chocolaty so
you can link chocolaty with package
management that's built into Windows so
I'm not going to dive into that much
more deeply but if you do work in an
organization with an IT department they
may be using Windows package management
already and you could tell them about
how they can use chocolaty with that so
that's just an extra tip there so we've
seen how easy it is to use chocolaty to
install software but what about creating
our own packages well that's not that
hard either so let's have a look at
doing that we're just going to jump over
to my PowerShell here and so I've got
chocolate installed on my computer not
surprisingly and so creating a package
it's pretty similar for you credit and
you get package so it's got choco new
and the name so I'm gonna call this one
in DC and that'll create a new directory
called in DC and then populate that with
a number of files so let's jump into
that there's the files and it's open up
visual studio code have a look at those
but a couple of instances running here
last night's try okay so first of all
we've got a readme file and that's just
for your reference as a creating a new
package there's some tips there on just
how to get started
it's in markdown so you could render
that to make it look nicer but we don't
need to look in the details of that now
we then have a new spec file so here we
go this is looking really familiar if
ever crowded and you get packaged before
I'll just zoom that in a little bit more
so it's a bit easier to see and it's
really well commented so should be
really easy to work through and find out
what you need to to fill in so here
we've got our ID which is sort of like
our primary key that uniquely identifies
this package we've got a version so
let's put in a version number there we
have an onus tag and so this is where if
the the person who's creating the
package is different from the the
software author you can do that so
that's my name then here we've got the
title here and so I'm going to create a
package for Microsoft Excel because it
seems like every application ends up
being I would be run in Excel and our
authors here so that's not me I didn't
write Excel so that's gonna be Microsoft
and in our project URL and just point
that to something and so that's a way of
indicating where does this offer
actually come from originally and
there's more things we could fill in
here like an icon the copyright license
if it was an open source project
I don't think Excel is open source quite
yet but if it was we could point to
where the source code was and other
links like link to documentation the
mailing list bug tracking issues there
are also really good things that feeling
just gives more information for users
when they're browsing the packages on
the chocolaty website and then there's
the release notes here so if you've got
particular changes that happen this
version that's a good thing to include
there we then have the dependencies so
we saw before teamcity you had a
dependency on a JVM
so if Excel has particular dependencies
or in this case it might be a particular
Windows hotfix it's expecting to be
there you can even wrap those up as
chocolaty packages as well and finally
what what files are getting included in
this package usually that's Justin put
them PowerShell scripts so we'll have a
look at those next so I'll just save
that file so in our tool subject we've
got some files here of most interest is
the install script so we're using
PowerShell here again these are well
commented and so most often you're going
to point this to a download URL so it
could be something like office comm
excel XE I don't think that's correct
but it'll do for the demo sometimes you
may have a different download for your
64 bit version of the software and if so
I put that in there and chocolaty will
then automatically choose that if you're
installing on a 64-bit operating system
and then the Chi of installer is at an
MSI or as an X e so in this case it's an
X E but if it's an MSI you put there
because chocolate is going to vary how
it installs the software depending on
that we've got the software name and so
when you install software you probably
familiar with the programs and features
in your control panel this is the
basically wanting to match the text for
the peers there so it's probably gonna
be something like Microsoft Excel and
maybe as a version number afterwards
that changes so we can use an asterisk
there the reason we do that is that then
chocolaty can use that to do the
uninstall so sometimes we need to
uninstall manually and we have an
uninstall script here we can use but
often chocolate you can do that for us
and just by doing that match and then we
have check sums and so what we want to
do there is make sure the file that the
user is downloading when they install
this package is the same one that we
were using when we created the package
now you think well how's that going to
change well it actually turns out that
riesling we've had a few incidents where
some public websites have been
act and they weren't just deface but
actually modified the the binaries that
people were downloading to include
malware so this is a way of trying to
mitigate that risk that the files you're
downloading haven't been tampered with
there they are the same ones so that is
worth doing and then we just got the the
arguments so the whole point of using
chocolaty is a silent install so we want
to be able to set the right arguments
for however we install this software to
make it quiet not requiring any user
input so if it's an MSI we would use
these arguments here but if it's some
other kind of install and some examples
here are some popular installers then
you hear the arguments you want to use
and I guess that's a call out that if
you are creating your own installers
consider providing a silent install
option because tools like chocolate
appreciate that
and then the default is just to call
install chocolaty package it's basically
a function that chocolaty provides to do
the install but maybe your application
is not an X e or an MSI or it has some
different requirements are being
installed so there are other ways of
doing this so we might just have a zip
file we need to install and so we've got
another command for that it could be a
physics a visual studio extension and so
there's some support for just installing
those as well it could just be a file we
just need to download and drop into a
particular folder we might need to unzip
something we might need to run something
elevated like as an administrator we
might need to modify the path or change
an environment variable or set a file
Association there's a whole lot of
things that are built into chocolaty but
it's built on PowerShell so really we
can do pretty much anything we need to
we can update the registry do all kinds
of things if necessary but there's a lot
of stuff that comes in the box which is
really nice once we've got this all
working we would actually strip out all
these comments so that when a you of a
user views this script on the website or
has a look at it it's really just the
concise steps that are
being done we trim out all the comments
right at the top there's some little
one-liner PowerShell script to do that
for you so yes so there is an uninstall
script so you may need that you may not
there's also a before modify script this
comes into play if the software is like
a window service so it could be running
and before you upgrade that or uninstall
it you need to stop the service or do
some other kind of cleanup task and this
is a good location to do those kind of
things so up until now we've seen
chocolaty packages where we're
downloading the files but you can also
embed the application in the package and
in that case if you're going to publish
this to the public repository at
chocolaty org then as a requirement you
include the license information here in
the package itself to say that yes you
do have the rights to distribute this
software and also because we're not
downloading it we need some other way to
verify that the user can verify them for
themselves that this hasn't been
tampered with so some other way that
they can themselves check that yet the
version you've got in here is the
correct file hasn't changed so forgot
all those things in place we should be
able to package so let's go back here we
go choco pack and we worked
we've now their package so the other way
we could create a package is with
package builder look if I can spell it
so this is a tool that's included in
chocolaty professionalism so there are a
number of different versions of
chocolaty and it basically this is a UI
over that the same process that we just
fill in the fields steps through all
those kind of things then jump over here
point it to where the software is it
could be a URL or a local file and then
hit generate and it's going to create
all those same files with all the values
pre-populated if you had the business
version of chocolaty you can just point
it add an existing application it's
already installed on your computer in
programs and features and it'll generate
a package offer
that I don't have that version so I
can't demo that feature but yeah that
can be another way of creating a package
okay so we've created a package what
we're gonna do that well first of all
we're going to test it I'm not gonna
test that package I just created because
that's not going to work I know that but
for your real packages that you're
creating you're going to test it locally
and make sure works and then you're
gonna hopefully if it's one that you
want everyone else to use you're gonna
push it up to chocolate org so just for
example if I wanted to test it locally I
do choco install and the name of the
package is NDC and so by default it's
gonna look to the public repository but
if I wanted to test that I just say my
source is my current directory that's
how I would test that package but I want
to now push this package to chocolaty
but I'm not going to bother the real
chocolate with this package I've
actually got my own local version of the
chocolate repository running on my
machine so I'm gonna use a choco push
and push that to my local repository so
the chocolaty website is open source
I've essentially I'll pull down their
source code and I just run that local my
machine so if I now jump over to the web
page for my local host version of
chocolaty we can jump over to packages
and where's my package I just submitted
it well what's happened it's gone into
the moderation queue and you'll see
there's a few packages here in the queue
right down the bottom there's my package
they're Microsoft Excel so what happens
now is that well on my computer not much
but on the real chocolate org once after
a short amount of time some automating
for extra validation steps are going to
happen so it's going to look at my new
spec file make sure that everything
there looks reasonable haven't made any
really simple errors it's then going to
run my package in a virtual
Chane and see does it actually install
successfully and there's no errors from
that and if that's all successful then
we'll be ready for someone to have a
look at to moderate so human being will
actually review that package and cast
their eye over and say yep I'm going to
approve this and make it available for
other people to use or not so let's have
a look at that process so chocolate all
packages let's have a look at the real
model kappa moderation queue and there's
a few in there at the moment and so
scroll down so here's a package here
this is the real moderation queue let's
have a look and see what's there so this
user has submitted this package and
there's a couple of interesting things
here for one thing this package this
software actually requires Windows 10
and the test virtual machine is actually
a server version of Windows so they've
requested that this software beings
empted from that step and so that's
something you may need to do the other
reason that might be is say your
software expects a particular piece of
hardware or or it's a device specific it
might be something like a video driver
or something like that okay so I'm gonna
log in because I happen to be a
chocolaty moderator and so we're going
to moderate this package right now so
hopefully it's okay so I'm just going to
look at the the notes here so it passed
automated validation and all it's just
flagging down here is it saying that
this does have some dependencies but the
they haven't included a minimum version
so it's not a showstopper but that that
would be nice to say yet I'm expecting
at least this version of this dependent
package and I don't have a license URL
so don't have a link to a license that
maybe because there isn't anyone to link
to you so this application is probably
not one that they wrote themselves but
it's something that maybe they use and
so the software author
hasn't provided any license information
on a website that they can link to so
yeah there's but they can't do much
about that I scroll down here's the
description of the package that looks
like a it seems to describe something
and then I can scroll down a bit further
as a moderator I get to see these these
sort of files to review them so there's
their new spec file it's been summarized
a bit but all its ok one thing here
they've got the admin tag and the reason
they have that is because this package
requires elevated access to install so
anything you need to install in Program
Files is gonna need to run as an admin
so you're used to this when you're
installing software as I can I run as an
admin and so this admin tag so it
indicates that the reason you wouldn't
have an admin tag is when it's just a
file you can just drop in and run it as
it's just a straight XE or a zip file
and so often you'll see on chocolaty
those tend to be described as portable
packages and you may have options of
both so some applications like 7-zip
notepad plus plus they offer both kinds
and so you can choose between which one
you want to install within heavy install
scripts so you can see all those extra
comments have been trimmed out so we can
just see what this since Dahl script is
doing there's the URL they've got a
checksum which is good and in this case
this software is only 64-bit so the
value provided a 64-bit URL for download
as well which is interesting yeah
they've got some extra scripts in here
just to help with the install and scroll
right down there was some special things
I need to do nothing - concerning here
right down the bottom here they've got
this ohk file so that's an autohotkey
file so we talked about wanting to have
a silent install sometimes software
authors don't provide that and so one of
the ways to work around that is to use a
tool called autohotkey some of you may
have used that before in for other
reasons so this is a way of basically
sending
sort of UI messages to their installer
it's a bit hacky and it can be fragile
but it's really the only thing we can do
unless the off the authors improve their
installer to have a proper site install
sometimes this is all you can do so and
we can see what that that our hotkey
Script is doing the was basically
waiting for a window and then clicking
on something so it's kind of a shame
that the authors did it that way but
that's not the end of the world so
that's actually the dependency here is
that to install this you need to have
autohotkey on your machine as well and
scrolling down I can see they've got a
link to release notes and so this
package has been installed a previous
version so as a moderator I'm just going
to just check to see was there any notes
sometimes will approve a package but ask
the maintainer to make some fixes and
that wasn't the case there's just some
notes there about being exempted from
testing previously so so this all looks
pretty good I'm pretty happy with this
package it's got an icon I'm happy to
approve it so if everyone else is okay
with that no objections no okay I'm
taking that as a yes
I'm gonna say approve so there yeah it's
a moderation is is one less than it was
before so that's good the moderators are
volunteers so we don't get paid to do
this and so sometimes that key will
build up if everyone's just busy doing
other things and sometimes it's it's
really empty and you can get stuff so
really quickly you might think well
there's gonna be a pain every time I've
got to wait for someone to moderate my
package well the first few times that's
true but once the moderators have seen
that you've got a good track record this
package is reliable they'll then market
is trusted so after that it'll still go
through those testing phases but it
won't need someone to intervene to
approve it it'll get automatically
approved after that so basically you'll
be approving that yes this is good and
so then we're saying yet we trust you so
that's we you you hopefully get to
pretty quickly so you have to wait for
that moderation
Keef
yeah so the question is I think around
like if it's someone else's software how
does that work if you're creating a
package for for their software it
depends I guess most most software that
gets published to chocolate or org the
license would allow that it's pretty
unusual that they wouldn't want you to
be able to install the software
certainly there are a lot of software is
restricted for distribution so they may
not want you to redistribute it so they
might be happy for you to download it
from their side but not copy it and in
just embed it in your package but yeah
so that that that can be a limitation
some sites make it hard to download
stuff like they might want you to
register to download the software and in
that case it just may not be possible to
create a chocolaty package yeah but yeah
basically the chocolaty it always tries
to do the right thing and certainly we
will reject packages where we think
there's something funny going on here or
or the license is not going to allow
this to happen yeah another question of
the back
yep
so the command line is chocolatey itself
so that that will create the package
once you've got those files then you can
use scripts to update them as part of
your build so yeah so we've seen our
moderation demo okay some quick tips
about creating packages do try and flair
all those metadata tags where possible
get a good icon this makes it look nicer
otherwise the default icon just looks a
bit bland so add the check sums and if
you submit a package read the emails
that come back so many times as a
moderator all you're doing is repeating
the things that have already been
highlighted by the automated email so
that basically means the difference
between you having to push back to the
maintainer to to fix those things
compared to you just approving it
because they've got everything right so
seems kind of obvious but a lot of
people just don't seem to do that so
there's a great help form using git er
there's this one's for chocolaty there
there's a lot of people that are willing
to help you there if you've got any
questions if your package is a little
bit tricky to install you've got
problems or don't understand the
response that have come back when you've
submitted your package from the
validation steps the great resource and
I guess sort of leading into that
question around sort of automating and
building so yes might if you've got your
own build pipeline make creating or
updating that chocolaty package part of
that pipeline so you can either do that
in your own build or if it's a package
that you're maintaining and I've got a
number of these myself where I'm
maintaining them for software that I use
but I don't create you can use a there's
a power module called auto update which
has got some functions around basically
sort of helping you to screen scrape the
the source website to figure out is
there a new version and then it helps do
the download calculate the checksums
updates the package and potentially sort
of commits those changes back into your
github repository that's where your just
holding your package files and
submitting that to chocolaty or
automatically so I've got that for a
number package that runs as an app via
build and it's scheduled to run every
day and so that's and that's really when
you want those packages to be trusted
because otherwise you're gonna queue up
a whole lot of packages and they have
been approved so wait until you've got
the first one approved and so then you
know yep I'm sort of meeting all the
expectations for the package and then
you can set up an automated build if
possible either to push it yourself
octopus deploy the guys they're
producing chocolaty packages I'm
assuming that's as part of their build
process they're probably using optical
stapler to do that I suspect that would
make sense but yeah I think that that's
a great idea and chocolaty that all
really love it when the software vendor
or the software author create their
packages as well because it they're
obviously going to be a better situation
to maintain those and make sure it works
properly but in a lot of cases that's
not their focus so the community steps
in and provides those packages so yet
it's those commercial editions so
chocolaty is free but you can buy
commercial versions so I'm running a
professional version which also gives me
a CDN so it caches a lot of the binaries
for download so they tend to be a bit
faster there's extra virus scanning it's
actually done on demand there's that
package building UI that we saw and also
some support channels and then it's the
business version which I don't have but
it has that extra feature of being able
to create packages from programs in the
features so if you're a larger
enterprise and you want to create
chocolate packages for all your internal
apps that could be a really quick way to
get up and running with that okay so
we've seen a quick intro to chocolaty
but this is still looking a bit menuhin
that we're gonna have to install all
these one-by-one so how can we string it
all together how can we orchestrate this
so that we can set it going and I don't
know potentially last thing before
having your hot Milo and going to sleep
well hot chocolate actually wouldn't be
that would
more sense and heading off to bed is you
run something that get all this stuff
installed in the morning wake up and
you've got a clean box ready to use so
that's where box tartar comes in as I
was created by Matt rock that the
website is box.org and this is all about
using chocolaty and installing all the
different packages but handling the
reboots because that's the real killer
how many times have you I don't know it
went to install Visual Studio
I went to lunch come back in discovered
I was just waiting from reboot and then
had the rest of the thing to install so
box starter detects when something needs
reboot reboots the machine and then
continues on after that now the nice
thing that box though is it works both
locally on your machine against the
remote machine or in virtual machines so
we can think about using this not just
for our own machine but also maybe even
for for automating the the deployment of
some kind of test environment or even a
production environment if we like so
let's have a look at using box data so
let's jump back to our virtual machine
okay so we need to install box starter
how do we do that with droplet II okay
let's see how the the network is going
so a box art consists of a number of
packages so it's going to pull all those
down and install those it shouldn't take
too long
any other questions while we wait here
hmm so the questions around sort of
BitLocker and and how does it handle
that I don't know that's a good question
yeah I haven't used BitLocker so I'm not
sure okay so got boxed are installed I
need to close my power shell prompt and
reopen that just because some of the
parts have changed and for some reason
that means that my fonts go really small
so I'm just gonna bring them back up
again because otherwise even I can't
read that okay all right so we've now
got box data and so let's jump back I'll
just grab some script so I'm gonna
import
I'm just gonna jump backwards and
forward to a little bit if it's not too
jarring import lost of that my clipboard
try again
there we go import the dock starter
chocolaty module and then I'm gonna run
this script and I want to set that guy
and then we'll have a look and see what
the script is going to do so it's gonna
prompt me that's kind of funny out
Scrolls across for some credentials
because it's going to need to reboot so
that we wanted to have all automatically
we can provide some credentials here top
that correctly okay and off we go
so that's gonna start installing
something let's see what that's going to
do well that happens so back over so
Bach started can install from a script
basically a PowerShell script that
script could be one I had locally on
that machine or it can be at a URL so in
this case I've got some scripts hosted
in as a github gist so and there's
nothing secret here I don't think I'm
pretty sure there isn't if there is then
it's been around for a while so here's
the script I used to install my
workstation so basically starting from
scratch I'm creating an empty partial
profile file here because then if I do
that then chocolate is going to append
to that and add in sort of tab
completion for when I'm using chocolaty
which I like I'm then using some of the
box starter options here to set I like
to see my file extensions I like to have
the expander open folder in Windows
Explorer enabled that's just me
and I like to disable SMB one protocol
because call me crazy I like to be
secure so that's one thing I've added
more recently when we we learned that
that was not such a good thing to be
running so these are the kind of things
we can we can do in our box on a package
of ten on my desktop I can then use
chocolaty and chocolate can actually
talk not just to the chocolate little
repository it also understands about
Windows Features so I'm turning on a
whole lot of things here like telnet
dotnet hyper-v is
windows containers all those kind of
things and then I've got a whole lot of
chocolate packages all the software I'm
using solo Chrome Firefox Dropbox there
are lots of things there of interest
you'll see there's a few entries here
like choco pin what that's doing is
saying these particular applications
auto-update so once you've installed
these don't worry about trying to update
them in the future because you can use
chocolate to install new versions of
your applications but these particular
ones I don't need it to worry about then
I'm going to install visual studio so
2015 I can pass in particular features I
want that to install if I don't need the
whole thing their management studio
that's how to be a package I maintained
so everyone should install that one just
to get my numbers up physics packages so
a whole lot of extensions are use for
visual studio and then 2017
resharper oz code installing docker and
then some stuff here this is not quite
working for me so I've commented out but
my intention here is to install darker
and then so basically pull down all the
the base images for dhaka that i might
want to use so I've got my Microsoft
sorry the windows container ones here
I'll sorry there the Linux ones and then
switching over to the we know is
containers so that's my intention I
still sort of work that's a work in
progress but that should be possible to
do that I think the thing here is a bit
of a timing issue docker takes a little
while to start up and then in order to
switch over so I'm what it's just I just
need to put a asleep or something you
need us to get that working
here's the bit where you can integrate
chocolaty into the windows package
management thing basically using a
package provider to tell it about
chocolaty seed neither sudden you get
one but anyway and so then we've got
some other partial modules some registry
stuff here so this is just a powershell
script we can we can do what we like
here so this is all about scripting
enabling developer mode and we know
ten because at the moment I need to do
that before I can enable the sub system
for Linux I think that's gonna change
then the new update that's coming for
window so I might be able to get rid of
that some is things getting my
PowerShell help updated and and pretty
much done but you might think well I
hope that's not the one you ran just
then because that's gonna take a really
long time especially downloading video a
visual studio and installing 2015 will
you're right I didn't this is the one I
ran so we're just enabling right desktop
setting some Explorer options telnet and
installing PowerShell you think hang on
you already got powers on that machine
well yes I do but it's PowerShell
version 4 and so this is going to grab
PowerShell 5.1 and upgrade that and
that's going to require a reboot so
they're reboot probably is happen by now
and then we're gonna install zoom in so
let's jump back to that machine so it
looks like we've been kicked down so we
need to login again and there's our
prompt so that's rebooted and we've
started up after the power show install
and we've installed zoomit so now if I
launch a window this is hilarious that's
huge isn't it yeah something to do with
my high DPI laptop and in a virtual
machine not quite understanding what's
going on but at least the people that
can read that pretty easily so if I run
zoom it there zoom it and it's on the
machine
so basically box Tata detected we needed
a reboot it rebooted the machine and
then started up that script again and
essentially what it's doing is it's
running the whole script from the start
but because it dents goes through and
everything is I've already done that
I've already done that I've already done
that so this who skips over all those
steps and so it gets up moves on to the
bits that it hasn't done yet and that'll
reboot multiple times yeah question
so that's what it's doing that's why I
supplied the credentials to login after
reboot is that what you mean
yeah yeah so I'll bring up the script
here so it's a bit easier to see so
right at the end there I'm passing in a
credential using the pouch or get
credentials Commandment so I'm just yeah
prompting myself for those credentials
they get passed in and it's going to use
that until it needs to reboot and then
yeah so does that make sense right
yes
so yeah so initiate the process so I ran
it in the machine
and to initiate the blocks are the
script I needed to supply it with those
credentials so they could then reboot
that's correct so maybe my next demo
might answer your question as well as to
how can we run this outside of the
machine potentially yeah okay yeah so if
your question was more about why did I
have to log back in that's more just
because of my hyper-v remote connection
I got kicked out of that cuz it
restarted and then I just have to login
just to look to see what's going on yeah
yeah okay right sorry
alright so we've installed we use box
starter to install a couple of vision
applications and it's done the reboots
so there's some other things here we've
seen some of these already being used so
we can disable various things that we
might not like to use sort of enable
different options for Windows Update on
Microsoft Update move things around so
I'm using that to set my Windows
Explorer options so they're all set up
just tell alike but as we've seen we can
go crazy do anything we know just to get
things just how we like them so what
about using box data against the virtual
machine from outside their machine so
what we've seen so far is just running
it inside the PC just as if I was living
on here I mean I could have demonstrated
running box out on my laptop but then
this would be a very short talk I
suspect because everything would go away
alright so now what we're going to do is
connect to that virtual machine from my
laptop itself so the way I was going to
first of all just check to see is that
virtual machine running which I'm pretty
sure it is because I was just in the air
a second ago
sometimes credentials again yes it is
running okay now now I'm going to create
a connection to that virtual machine
with box data good and now I'm gonna run
the second script much so it's basically
another script from that jeast and I'll
fire that up we'll just jump over and
have a look at that and then we'll come
back and see what's going on so demo -
we're just installing notepad plus plus
so not too tricky there we can actually
see the progress of that if I go back to
my PowerShell so we've made that
connection we're now running box data
remotely against that virtual machine
and it's a pretty similar process if you
wanted to run this against the remote
machine elsewhere there may be some
extra things you need to do as far as
credentials or PowerShell remoting that
kind of thing I was running through this
demo last night just to make sure
everything was working and it stopped
and it turns out it's because my virtual
machine when I'd started it up it so has
that prompt with the network saying do
you want this to be visible on the
network or not now it's on no I don't
want that and it turns out for my demo I
do want that so normally normally you're
not deploying software in a Sidney hotel
normally you're doing in your work
environment where yes everything is
visible on the network so that's
probably something just to be aware of
and yeah if you're on a domain I don't
think you'd have those kind of issues so
that has installed its software and
we're done so if I jump back into the
virtual machine now with a huge font I
should be at a type in notepad +
and they were yet an iPad plus plus on
that virtual machine and so that is a
64-bit version of notepad because it's a
64-bit we am and I didn't ask for a
different version one thing you can
override that you can say I want the x86
version so that was the question yeah so
I mean notepad plus plus is a good
example there because they last you know
I think they started producing a 64-bit
version but a lot of their plugins
weren't available for 64-bit and some of
the ones I was using so until they all
catch up I'm installing that with the -
- x86 and so then chocolatiers I know
you really want that version of it so
that is an option okay just the brief
mention that when I originally started
putting this demo together you used to
go to use a click once application with
box starter and this meant you just had
a whole URL with some parameters to
point to your install script and that's
all you needed to run on the machine to
start box data that's been deprecated so
I'm not demonstrating it now it's still
around but basically Matt just he
describes in this blog article they were
just getting too hard to maintain and it
tended to run afoul of some of the
browser's sort of marking it as
suspicious because just the way it works
so the recommendation is to do I guess
as I've demonstrated a just pull down
box starter on the machine itself and
run up locally that's basically what it
the web launcher was doing so that
that's sort of wrapping up the talk so
we've demonstrated chocolaty creating
the packages using Chalkley to install
other software and then bring that all
together with box data to orchestrate
that whole process of installing all the
packages you need on your own machine or
it could be a test lab or order in
production to get all those things in
place and I think that can really get
you sometimes 80 90 percent of the way
there there still may be a few things
you need to do so for example logging in
with you
Microsoft account setting up your office
credentials those kind of things but
really they're just a few extra things
at the end that don't take very long and
then you're up and running with a brand
new machine everything's nice and clean
and you're all ready to go so thank you
very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>