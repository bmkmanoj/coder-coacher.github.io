<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AB-tests, lies, damned lies, and statistics. - Emil Cardell | Coder Coacher - Coaching Coders</title><meta content="AB-tests, lies, damned lies, and statistics. - Emil Cardell - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AB-tests, lies, damned lies, and statistics. - Emil Cardell</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/d7Oy3rbxBak" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone really glad to be back here
in in Oslo and on NBC it was my first
conference ever and or developer
conference and I remember it's all the
sessions blew my mind I learned so much
that here and such a big honor for me
I'm very humbled to stand here on stage
yet again on NBC to speak to guys so
this talk or the underlying foundation
for this talk started about one one and
a half years ago I got on I got the
privilege to work with the one of the
biggest newspapers in Sweden so and I
started in the in the so called TV team
or where it's video on-demand and live
video so we did a web web it pitch to
that so and they have the outspoken way
that they should be working data-driven
and and we worked so every feature we
did we try to a/b test so one of the
first assignments we got what was like
we're going to need to rebuild this this
portal this old old piece of of portal
is something like this and when you
clicked in it was edgy so it's it's
black it's it's very messy so so we kept
working and I think it took a couple of
months and then we ended up in something
what we thought was much much much nicer
that looks something like this so it's
much cleaner easier to find your
information and everything new features
so who here thinks that the new version
did better than the old black version so
who think that the white version version
did best but with users
so who here think the black version the
best okay yeah so we have a 50/50 so the
good thing here is you're both wrong
because they actually did there was no
user behavior difference at all so the
user didn't notice more or less if we
looked at the numbers like for the new
new black site or the the white the new
one so it did nothing so like three
months of work and nothing
and of course a designer and came up and
said like I want to try three new play
buttons so you can see here in the site
we have so this is the new play button
and here is like here we don't have that
too many play buttons but we wanted to
add a play button so we had three
versions here so who hear things like
the blue version one nobody okay so the
red version okay and what I call the
Captain America version okay so we have
most most votes on the red version so
the fun thing here is that we actually
saw like a five percent increase when
we're using the red button and we
actually saw a decrease when we use the
blue button so in this case just a small
change to actually have a five percent
increase in user in this case the number
of video views so the number of times
they watch watch watch videos so when
this concludes like the summary of all
this and all these talks is this
so assumption is the mother of all
fuck-ups so the things we assume that
this should work like all we do all this
work change the design and we have like
no results and we change the small thing
and we get big results
so there is no correlation King the like
how much work we do and the result it
actually has on the site and so I hope
this will be the theme of the talk so
who am I am I'm uh I'm I want to call
myself a holistic developer because I do
more or less everything so i I've been
doing everything from DevOps stuff like
docker to back-end stuff like top net in
JavaScript on odious and and recently I
moved to more like front-end stuff and
react native as well so I do more less
everything in the developer space and
also have a keen interest in like
processes and how themes works and
things like that as well but more than
that in my spare time actually do a lot
of self experimentation so about like
five years ago
about both the scale and every time
every morning I wake up I I stand on the
scale and I actually do a/b testing on
myself so one one thing I did I
actually try to lose weight so every
Sunday I went out for a 10k run so and I
read the report somewhere saying like if
you run shorter but more intensive you
will have the same effect that's running
the 10k so I actually started running to
case and but much more intensive and
actually the article was true so I
actually lost the same weight as I did
the week before when I run run ten case
so I actually do these kind of things
even on my cellphone my spare time I
think the latest thing I've actually
tested was my last eight levels so I
actually when I ran I actually took
blood test to see how my my like lactate
goes in in my blood so I need to do more
tests to see if my training is getting
better or worse
so this talk the talk is something I
don't know I haven't seen it but I want
to join it a be test-driven development
so this is the core of the talk so it's
not just about a/b testing it's about
developers using a/b testing the same
way we use test-driven development so
the same way you actually write a test
instead you write the hypothesis and
then of course you write some code and
you're you try out your is you see if
your test is red or green and here in
this case you actually evaluate your a/b
test and see if it's as a significant
change or not and the reason for this is
this we want to do the right thing
so TDD is actually focused on doing the
things right so you code should be
working or that the code is really in a
good way and stuff like that but if it
doesn't do the right thing how much time
will you put in it it's still useless
for the user or the people using your
system so and it's a problem doing the
right thing of course like we think like
we get experience we have like business
analysts we have UX developers so you
xers we have a lot of a lot of people
trying to help us figure out like what
how do we do the right thing for our
users but there's it's a lot of problems
with this because we have a lot of
biases so if you just ask one person
like how should I do this or it's it
comes down to all our dislike quirks we
have in our brain where we think
and do stuff so like the most common one
is confirmation bias so we actually we
actually select information that
confirms our beliefs and that's actually
pretty dangerous if you want to make
decisions based for your business so
speak and there are the things like
anchoring and and of course there is one
for a be testing as well I think it's
called like Perkins paradox that we
misinterpreted statistical experiments
so we have a we have a biases for that
as well so but this the goal of this is
actually to like try to counter all
these biases that we have so so the big
question here is like what is a a B test
so actually of course I Google this
trying to find as my confirmation biases
a description that fits my my model so
when I read it out loud
two versions are compared which are
indentical except for one variation that
might affect a user's behavior so there
are some very important words in this
and and this is the three so it's two
versions of course we need to have a
what is called a variation and a control
group and of course we want to affect
the user behavior here so we don't that
we don't we're not interested in like
how much server load there is or how our
services are going or how fast our
computations are so it's the users
behaviors that we're interested in
changing and then the scary part comes
and it's nice because everything or like
I would say like a tea
it's the 80/20 rule like 80% of the
things we a B test actually has no no
effects at all as for the user so most
things we actually do it has nothing we
do not in any way affect the user
behavior but the some thing is when we
actually find the gems that actually
change so it's the mic part and the
reason for this is say yeah so there are
other things in play here just more than
our biases and that's that we are have a
tendency to be fooled by randomness so
when we do these counts of things like
check the user data we actually have a
tendency to be fooled by like oh it was
a rainy day so people didn't go I've
worked for for sailing like flight so
it's the summers way
actually the sales will go up if and
it's Sunnis will go down so depending on
factors that around them and your
numbers will be round them and that's a
very normal way and the same thing if we
just take user stuff like a very ugly
and check them it's easy to just get
random numbers that we can't do anything
with and of course this is a competitive
edge because like all I'm guessing we're
all like this we call them urban legends
but I'm guessing they are real like
where Google tests buttons and they have
like ten different shades of blue and
see what which one actually is better
for make people making a buy and I think
all like the big companies actually are
working in this kind of way and for
every time you improve your system even
if it's just 1% each time it will
accumulate over time and if we go bigger
and bigger and bigger so they for the 1%
you add on top of that it will become
expensive exponentially growing so this
is an extremely competitive edge to have
and the big paper of course I work with
they had a competition with another big
newspaper in Sweden and the main thing
was they're slow to beat them so every
every percentage counts and of course if
you're working with like the new cool
agile ways you want autonomous teams
teams that work and have to work for
themselves without having supervision
and I would say like a doing a/b testing
or having to have the user data behavior
it's a prequel Cities or like you have
to do it if you want it real a little
autonomous teams so like it's a lot of
people are missing that part so you say
to a team like yeah here you have a
designer you have a developer you have
everything you need but here you like go
and work in this dark box so you can't
know what's happening around you so if
you if you want a team to really make
their own decisions in choosing they're
like what to develop or what to do and
do it in the right way you really need
to have this in place and this also
gives us the power to question why we do
things
we do a lot of things we do are like
yeah we didn't because like the last guy
did it that way and or we have always
had this feature here because at we had
it in the first version so we can
actually start to questioning everything
we have in our system even if there been
there a long time and of course it can
sometimes show that like we have in
there for reason because it gives us
more sales or or clicks or whatnot and
of course it's enable us to make better
decisions more non biased decisions more
addictive decisions that hopefully are
better for us and better for our users
so so it's all starts with a hypothesis
so we want to we have some kind of ideas
on what we want to do of course I've
abilities to like how should a
hypothesis be built and of course
academia has their their take on it but
like the short end version I found was
this so if I do something then the users
should buy more due to the red button or
something like this and I don't agree
with this format because it starts to
assume a lot of things so like the due
to its assumes that something so instead
I want to I think if you're working with
this it should be something like this to
effect like people buying our product
we'll try to make a button read or we
try to make a button blue or we try to
do something so but we don't assume that
the the button reason like depending on
like they offers the color is one easy
thing but if we do more complex stuff it
starts to like assume that this will
give us the effect we have so we'll try
stuff on the system hopefully we'll get
our effect we want and the question now
comes to like what should we measure and
for developers I've had a lot of twitter
discussions with people about this that
like oh it's hard to find the KPIs that
we're looking for what the white numbers
we should which should track and what
simple
and of course we have a name for this
and it's called key performance
indicators or KPIs and like the easiest
way or two to get them at the developers
actually S is actually asking the
business so the piston is business
people normally know what what kind of
important indicators they use when they
talk to other stakeholders or investors
and stuff like that so I actually had
like so the normal kind of stuff is if
there is a business guy coming to your
developers and nothing can you like run
this database job to get these numbers
for me that's the kpi's normally so
that's what what you're tracking and
some example of this are like page views
or just created user registered it
should be it should be quantifiable but
it could be like minutes listened and
stuff like that so try to find what
matters to you when you start with this
and try and start small it's like
finding those numbers that really affect
the whole business so if you're
accustomed to UX people and they're
there are a lot of other ways to talk
the user so get user data one of them is
user testing or user surveys so for
those who doesn't know the difference
here at user testing it's actually when
you take a bunch of users put them in
front of a computer or and say like test
our software you film them you ask them
a different questions and then they like
make them solve the problems and stuff
like that and of course these tools can
be great for certain things but not for
this a be testing driven development
kind of stuff because as I said we are
biased when we make decisions so if you
come and ask a user a lot of questions
they are very biased as well and the
situation will make them biased or so
they will lie to you even though they
don't think they're lying
today we're like oh this looks good but
no they won't never use it and so we had
this happen to us as well so one day we
got like this email oh you're you're
paying your ads are playing obsessively
loud I will stop using your site so so
we got a lot like a five five
of these females and of course it's a
big slide so it's not that big of a
sample size but still so our
stakeholders come to us like we need to
we need to fix this it's not good the
way we really be testing of course as we
should do so we did two tests so one
that we actually took that the add
volume and we muted it and when done we
took one where we actually took the up
volume and lower it by 50% so we have
like it it's it's still lower but it's
still there and and of course where I'm
dab a t-test
so let's reset again so go whoo things
like the muted one be better okay couple
how many people think that the like the
50% be better how many people think that
the loud one be better very few people
that were there yeah the loved one is
much better so even though the users
actually mailed in and complain that the
volume was too loud when we put down the
volume they actually stopped viewing
videos so the video viewing wind went
down when we new to the video so their
engagement actually was in the reverse
of what they're actually were thinking
of course if you like to leave your
volume too loud and it's going to be
annoying but most people at that didn't
actually got more like oh this is a
video I can watch this and started to
clicking and seeing more videos so as I
said users have a tendency to lie to you
even though they don't know it
so it's more what you do than what they
say but still user testing can be useful
for special for discovering new new
stuff to do but but not for for making
decisions and of course we have
optimizes as well and just to get those
of the tables so there is like
Optimizely
optimizer google have something they're
great probably for further thing but
they have a tendency to create silos so
they normally put like the a be testing
in the hands of the business or the
content creators and stuff like that not
in the hands of the developers and
normally there are only you are layered
so you can only use it for for changing
the UI and and you want to be able to
like change algorithms behind and do
others kind of
it's testing stuff so of course you can
use them it's an easy way to start with
this kind of thing but so and yeah it's
good to know that they're out there but
I wouldn't if you're going to do this
the right way don't start there so let's
get into a statistic part so as it said
before we have control and variation so
control is the group that has like the
software that's running now
and the variation is the new version
that we want to be running in the future
so to speak so when I went to university
I had a statistic class and had this
professor so he used the metaphor that
you have earned and the urn is filled
with small balls and you have red balls
and you have white balls and we would
pool balls and this urn had a lot of
different properties like it was
Infinite and stuff like that but so I'm
going to try this on you and he failed
miserably I think it was like five
people who who passed the course I was
one of them of course but let's try but
I'm going to do things a little bit
different hopefully to make this make
sense because I'm still processing how
this works and it's a lot of things to
keep in mind but let's say we have a urn
and we have a lot of balls in it and we
can pick up a ball and we can look at
the back side and it will be a number
and we know like the number which should
be about between 0 and 100 something we
don't know but it could be so let's like
we pull 5 balls and so these let's say
this is a user group so there is number
of time they've clicked our red button
so what we can say about this is a group
is like okay so we probably will they
have clicked the difference so if we
will summarize this will need to have
the mean of how many what's like the
mean of the number of ticks we have on
this group so this will be about 18 so
we have we we add these numbers and we
divide them in the number we have simple
math
so let's see we have we pull those poles
and we make them one bigger balls and we
want to we want to drop them down here
on this this line depending on what
number what mean they have so let's it
could look something like this I will
pull a little balls and I will place
them out and it will end up something
like this and this is very useful to
think about because this is how your
users will distribute so depending on
let's see how like this could be like
the number of orders they've done so you
can actually if you pick up the users to
look at them you will have the
distribution so normally so if you have
this mod again like you what the usual
will do is like you will take everyone
and just to take them in and say like
normal normally we have like five users
or you do five rewards per user or
something like that and so we distribute
them like this and the math guys or the
statistic guys they will actually say
that all this is a this looks like this
so this is a normal core everything is
even out so it's a normal distribution
there are other types of distribution
but in statistics mostly normal
distributions are what's used when they
were mainly doing the mouth and so we
have the mean so more or less we have
like the middle part of this so
something here so we know where the
middle is and but now we not need to
know like if I pick up a bowl like to
say I do a variation now and I pick up
that ball and I look at it is it like is
it a part of this normal distribution
because if it's if it's part of note of
the distribution I don't know if it's a
change or not go change so now we need
to know like where are the extremes so
we know that we know to know the
standard deviation so we need to know
like where is how far is it out here to
here so in this case we have about like
from here it should be about thirty its
standard deviation that's so we can pick
a bowl so if it's thirty apart it's
actually still a part of the normal
distribution so it's actually
statistical not significant that if we
pull like something that's in this kind
of area so it's like 35 it still still a
probability that's it's the same as the
control group
so now the question comes like how
certain do we want to be because in
statistics you will never be 100%
because it's it's still I like a
forecast it's still guessing and so
ninth if like the normal number you see
out there is about ninety five percent
and it depends on how many users you
have I will go into a deeper later but
let's say we want to be about 95 percent
certain that what we're what we're
looking at is actually true or not true
if it's as change or another change
because that's what we're after in this
a big testing kind of case so let's say
we introduce like two urns so one with
white bowls that's the control group and
then one with a red balls that's the
variations so of course we're going to
like pull out the control group
and we're going to distribute it so now
we need to figure out like will this
when we pull out a variation ball will
it be like in the ninety-five percent
population of other bowls so if we come
inside the lines so if we go back to the
yeah okay I'm not going to go back but
let's say we have the normal distributed
curve if it's like on the ends of those
curves it's actually okay because we can
we think that that's probably a change
because if we add more balls and it's
starting to go outside we know that the
distribution will change and our
deviations will change and we have
actually changed the distribution of our
users so let's say if we pull out two
balls and they are like the it on that
side on this side we know that the
variation is probably a change from the
normal control group so we actually
managed to have a user behavior change
and that's what we want to know and to
make this even more difficult of course
we can pull up balls and see if they're
there outside our standard deviation so
if they're already probably in the right
direction but if we just pull out one
ball and like okay so this control group
is like one user has clicked like 60
times yeah it could be but if I like
pull the other one looks like it could
like say five so we can still be
the distribution even though one one
ball is way off and to look at that we
need to be more confident and to get
confidence
it's a advanced mathematical
calculations but I will try to exemplify
this instead so let's say we have a
sample group of thousand users and we
have a control group that about 99 of
them have clicked a button and in the
variation group we have a hundred people
who click the button there is a 1%
change so if it's if we would have a
bigger change here so let's say we will
have a 50% change that will probably we
will be pretty certain that this is a
significant change because if the change
is so big in itself but 1% it's it's
small so the confidence we have in this
number due to this small control group
is like 63% so this it's still very
random we can't trust that this
variation group is a good group it could
be either way and let's say we we can
exit so we have a sample size of about
sensor sounds awesome and again we have
a control group that's 990 and 1000 so
still 1% change so the change is the
same but now we're starting to be a bit
more confidence but still it's still
like rolling the dice it's still like 50
60 percent so of course it's better than
like the betting on black board red at
the roulette table but it's still not
good but if you go out to about 100,000
we will get the control yeah and we
still have our 1% change so assume the
same change and we now get a confidence
level of like 77 so it's still good so
now we actually start and see like yeah
this change is probably true so if we
will release this feature it's a 77
percent chance which actually will have
an increased number of button clicks
compared to our control group but if we
can go even higher so let's say we go up
to 1 million it's a big sample size but
if you manage to have that 1 percent
change will be a 99
and confidence level you can be more or
less certain that 1% change in a 1
million population will be a certainty
and that's why I like big giants like
Google can run those very very small
tests because they have so big sample
sizes so just a little change in how
many people that clicks will actually
generate will be true for that user
behavior so this little thing I don't
know I'm guessing you've heard like over
the Camden and agile kind of coaches is
like quality first and so I would say
like no you should go quantity first so
when you're doing a/b testing you want
it big like you want as much data as you
can because you as you thought in the
calculations the more data we have the
better decisions we can make the more
certainty we can be the more confidence
we can have that the things we're doing
matter so how do you get more quantity
so of course you can do larger test
groups so you can go about the biggest
group you can have is 50% because you
need to have a control group and that
needs to be 50% so it needs to be
comparable of course then you can just
run one test but if you're a startup or
don't have that much data you can start
maybe doing that at least you can have
one one a/b test and but another thing
you can do is actually run it over a
longer time because a longer time you
have the more users you accumulate the
more abusive behavior you can watch and
so that's one easy way to and one
technique you use is actually not the
whole user journey so because the user
journey starts long before the user
starts or sorry where before they
actually visit your site so you can
actually start to testing like doing ads
landing pages and of course there's the
whole business around this it's called
complete marketing and that's what we do
they actually be tests like before this
in the start of the user journey and you
can actually use the fixed mapping to
that's just fine where can I use data
points so I can try to build it like
find this you
to behaviour and sorry so another
contradictory thing though is that
context matters so even though you think
you have a large data set you sometimes
actually need to look at it in a smaller
way so you do you remember the size that
we did like like the black and white
site we actually drill down in that so
we actually looked in the mobile version
the tablet version and and the desktop
version so if we add them together of
course they were no used to change but
we started to actually to look at the
tablet version and the tablet version
actually did a 5 percent increase in the
user behavior so it's very it's
important to have context awareness to
know that your your application is
running for different kind of use like
mobile devices and stuff like that so
it's it can have an effect and you want
to watch that as well because if the the
change is actually bigger on that device
you can actually statistically say that
so in like this case we have like even
though we just looked at smaller sets of
data the change was so big we actually
statistically can say like the new site
actually worked better than the old site
for the tablet users but it does didn't
affect the mobile or the desktop users
so all of this it's it's not about being
right it's about learning to make better
decisions or everything I'm talking
about here so it's it's like of course
it's fun to be right to say like oh I
picked the red button and of course it
won't
whoo-hooo over Amy but it's it's just
random
we're fooled by randomness as I said so
it's about to make there it's about to
make learning based to make better
decisions so let's get into the
technical parts and of course we want to
want to get started on this want to code
something and so we can use the naive
approach and this is one approach I've
I've used in the beginning or looked at
and and this it looks normally something
like
this so we have a feature switch that
more or less like draw so a lot of
tickets saying like okay this user
should it should he or she get this
feature this new cool feature that we're
doing and of course yes we sell like if
you get a lot of number with like like
lower than 11 we will give you this
feature and and this will lead to a lot
of interesting problems like now you
need to track if this use if the user
got that feature so you need to when
they click the button you need to add
the event saying like oh this user will
got like the teacher a or C GB or your
and you need to like so if we want to
track this so if in your in your program
later on you need to like how does this
test went you need to check the like the
event flag for just this feature and
that's something we like to get away
from because if there is a lot of you
want to bundle like a full approach in
one feature it's harder to do and
there's a lot of problems with this as
well and so one thing is yes so it will
look like if the user has checked out
you need to track like all the different
kind of at like features they've got
before they went to that to that point
in time so we actually went with another
approach
I call it dividing concrete so what we
do is we take all users we have and we
assign them a number of course the
easiest way is to assign them a number
between 1 and 100 and we try to just
randomly distribute them across every
user and so all buckets and we call them
buckets so user will get in one bucket
so but 1 to 100 and all buckets are
unique and that's very important to to
recognize so there is not a bucket like
another bucket they were all very unique
in their own little unique way and but
we all always want to have at least one
uncle untouched control group so
depending on house
how big
groups because if you divide them in 100
normally like even for like a large
newspaper in Sweden 1% or one one is too
small to make decisions on as you
probably will go up to about five or ten
of course if you work in a larger
company you can do one percent but like
five or ten is a good start starting
point so you need to have five or ten
percent a group that's not touched that
people don't put a be test on that
always on its own like the version that
we're not testing the stable version so
to speak and of course you should always
track the bucket ID so you need to track
like which bucket the users are in so
instead of the naive approach we
actually need to strike features the
only thing which right here is time of
course but also the the bucket ID so we
can say like if you are in bucket one
today you will get we know that you will
get this test or that test so in so
instead of tracking what features we
like the users are getting
we're tracking like on the other way
around so what our statistical group
number one what what kind of test do
they get and it could look like it's
very simple code that you'll get to get
this work so you can actually just if
you want to write it in JavaScript on
your front-end you can do something like
this so you cannot sign a bucket so we
check the our cookie so if you have a
bucket cookie you will not get a new
number and then we add a bucket cookie
and in this case also we will we want to
set an expiration date on it
because we actually want people to move
from buckets so we don't get like one
super bucket where all the like users
who click on red buttons are we want
them to move around in a slow matter
like so if you do like to two weeks
iterations of like checking your tests
then then you probably will have like
two weeks or four weeks or something
like that so not too far another year so
you don't want the same users to be
caught in the same user group in the
year so we want some kind of movement in
your groups but not too fast not too
much and it also helps like to view your
your buckets in a more
like Generic way that's that you don't
have your favorite pocket or something
like that so and of course and you can
put so if you're depending on how your
site looks if you you can put this in
your fire sort in your little balancers
stuff like that or if you Akamai you can
actually program Akamai to actually add
this cookie before the request reaches
your servers so you can actually have
always ensure that this cookie is there
for your users but of course you can
always use this front-end stuff in this
can if you do using node or even what
back and setting setting getting cookies
are are easy and then you just need to
check to say like oh okay
so should I show this this new cool
feature the only thing we check is like
are you inside like the bucket IDs that
we have assigned so it becomes much
easier for the developers so instead of
like I need to have a key value that's
the name of my teacher that I need to to
store somewhere the only thing I say
it's like oh I want to run an a/b test
and I want it to go from like okay so I
needed to run a new one so I wanted to
go from 11 to 15 or 11 to 20 depending
on how large group I want so I can
choose how many users just writing
depending on how many how big like the
value of the cookie so it's very easy as
a developer to just spin up new a/b
tests depending on these these buckets I
don't need to track features I don't
need to know anything about the system
around me except other a/b tests of
course I will go into that later but and
of course if you just use Google
Analytics you can set dimensions Slone
little code snippet you actually need to
get this working on your site today is
the this one and it will attract in
Google Analytics alone in Google
Analytics you can actually go in and say
I want to have my cage views for the
users in dimension five that has the
value one two three four five six seven
eight nine ten and eleven paupers so
when he said when you have this up and
running
course you want to have dashboards or
something something to look at because
we actually we have we have now the code
that will tell the user like this is the
new code and now we need a way to
visualize this and of course we have
like this this view in front of us so
it's actually from from work this is not
they be testing dashboards but because a
lot of experts are very very complicated
or advanced and if you want to succeed
with this you need a dashboard that
looks like this more or less so that's
more or less the dashboard where we're
looking at so just simple KPIs and the
difference from the variation and the
control group and we actually started so
when we set the workflow we setup was
that when we released a new feature the
first thing with it like the day after
was actually checking the numbers to see
that if the difference was very big we
can actually see if our code was broken
because normally we just will see just
small changes if we like change the
color of a button or a new feature but
another view that we found useful mostly
because of morale was this one so just
tracking to see how like your KPIs are
going through time so histogram and so
it doesn't need to be more advanced than
this so we actually have this on the top
and this on the bottom and so this helps
us make decisions this just helps us
feel good but what we were doing because
we can actually see over time that we
were improving and as I said before you
need to track all tests because if you
if two groups of developers actually
entangle their tests on the same test
group you will have faulty data of
course so we just have a simple
spreadsheet it looks something like this
we have the red button test so we see
the variation group and the new tablet
version or random recommended or blue
button so another thing when you have
all this set up that we can do it's
negative testing
and this becomes so when you circle to
get used to this like we do have ADA
testing and it and things are going good
and and sometimes nothing happens and
you get like it's not fun but but now we
can actually do some something that we
want to start to work on a new feature
so we actually had like a new
recommendation and then we we thought of
like should we spend a lot of
development hours building this new cool
like recommendation engine depending on
these cool algorithms and stuff like
that so we already have algorithm and
look something like this so if that's
this algorithm here that picks out like
the recommended videos for this this
video so what we did actually before we
actually did some cool development where
are the the machine learning guys had to
do they're the magic we actually said
like what if we give these guys random
stuff just randomly selected videos
because that should perform if this kind
of if the feature matter and it would be
form worse
because we were giving them shaped like
we just give them random stuff it
shouldn't be like it should they
shouldn't be affected they should be
affected by this if they were using this
feature so that's what we did so we
actually gave them like random video
selected videos and the the interesting
part is like they were no effect at all
the cake guys actually said nothing so
we actually we didn't do any development
on this we actually went on and do other
stuff but with what but of course we
couldn't bless we're curious guys we
couldn't believe it at that so we
actually built in so just click tracking
to see if we can see if people just
click those links here and what actually
what we could see of course the random
stuff did do worse for the for the users
that actually clicked the recommended
videos but there are so few people
clicking the recommended videos it's
actually have been didn't have no effect
on the KPIs so it's an interesting you
can do when you're actually starting to
build up this momentum and that's
actually making you so that made us make
better decisions so we instead of like
spending a lot of ml time like for maybe
1% of new user we actually can do a lot
of other fun stuff that actually gave
more use
or a better user experience so all of
this sounds wonderful right but it will
be wrong that is it always goes wrong
and in different kind of ways but I
think like the biggest thing that will
go wrong is this one no one uses the
data to make decisions and of course
this is more of an experience I've had
from other places like we get a lot of
data we buy expensive like as software
to track all the data we have where we
can make cool queries and stuff like
that but nobody use it is it like maybe
some guy comes like once once a quarter
like I knew this report but it should be
used by the developers all the time and
of course focusing on the wrong metrics
is a danger as well and and by the name
data is something I've encountered a lot
of like it says something but it's
something else
and so you make a decision based on that
naming and it's then you actually are
making decisions on other kind of type
of data so name your data correctly and
not accounting for population size it's
one problem I've seen as well so that
when I said population size so let's say
we we which we were doing an a/b test
and we let just take the look the
control numbers so that this looks like
this looks like a very good test so the
variation is like way bigger than the
first one but if we don't take into
account the population size so in this
case the number of users or the number
of user sessions this looks very good
but when we calculate like the when we
take the pageviews divided by number of
users so the this so that number will be
the same the term independent of how the
big the control group is and then we get
the variation it's slower sorry so it
means that even though the number is
bigger if we don't take in the number of
users or number of sessions we have the
data
the decision we will make would be all
wrong so it's very important to normally
always divide your your like numbers
like page views button clicks orders
created by the number of users you have
a by the number of user sessions that
will give you a much better view of how
to make decisions and another part as I
said like the bigger you want your size
as bigger big as possible and sampling
is actually doing the opposite is
actually taking smaller and of course
like Google tries to Google Analytics
tries to push this because it's easier
for them to calculate and of course if
you do it on all your users that's
that's pretty probably pretty good to do
because you save a lot of computing but
what when you do like own smaller parts
actually sampling become something that
gives you either either worse results so
try just so you know a lot of systems do
that so try to avoid it
and of course working with the wrong
thing significance metric so you should
put in a little bit of time to just
check your significance metrics to see
if the variations you have are within
the your control group so one thing you
can always do that's a fun trick is just
we if you don't have it only have
control groups and you take like five
percent and just another five percent
and you compare them you will see that
you will have a difference between
between the same code or the same
features so you can start by thereby
checking another thing is that your code
is broken of course but that's a good
thing so if your if your tracking is
broken because your code is broken you
can normally see that in your in your
statistics and then you can actually go
fix your code so that's pretty nice and
but this is one this more most more
common that you're tracking is broken
because people don't test your tracking
but it's pretty hard to test your
tracking because suggesting actually
something that's outside your system
among technique that I tried and that
you can use if you want to do that is
proxy testing so you actually run up a
proxy that will fake or analyze the data
from the network and project and the the
stack that we're looking at is this you
have webdriver or selenium
the timing on how you want to name it
and there is a product called browser
mode proxy that will actually spawn up a
new proxy and you can actually say to it
start a new proxy and then you can run
data traffic through that and it will
analyze it for you and of course your
favorite testing framework so what does
this testing do so what it does it's
actually going through your network view
and it will actually come and so what
you will do is you will get a JSON blob
that will represent everything you see
here and it can actually go in and say
like you can first film shake like oh
it's their analytics file on my my site
because it should be because else I'm
not running my analytic software and
then you can actually go in and check
like is it sending the right user data
is it having the right buckets it's it
does it do we send all the things we
need to make decisions and the code can
look something like this so we start our
here so we just do this kind of selenium
kind of thing where we start a client
and we say like yeah go to my blog and
check if the title is the title so
that's pretty standard for selenium kind
of stuff but then we actually get this
proxy back so what we with this har file
and we parse it into JSON and then we
can say like oh does it does the do we
have any entry where the request of the
early analytics yes we have and then we
know that at least we have a test that
can check if our analytics are there and
of course we can go deeper in this data
we can assure that the bucket ID is set
that the category that we're using our
set or rip what we are using of course
we can check our events as well so if we
do a click or start or something like
that and always assume something's wrong
if you get like either happy happy
numbers or very sad numbers something is
normally wrong because the normal curve
for change especially in a bigger system
is very flat it's like it's small it's
incremental it's not like big you won't
see 10% up or 10% down you'll probably
see like 1 2 percent in the beginning of
course you should continuously improve
your tracking system and one way to do
is to course is introduce another
tracking system to check to verify the
data sadly enough
that's um that's something we had to do
and we've actually seen that some
tracking system do things wrong so it's
not even in our code it's actually in
their code so it's obviously always good
to have double verification of the
things you're doing so let's wrap this
up but even though we want to be data
driven and of course we're scientific
and we like that stuff religion or
subjectivity will always drive science
or a/b tests so there will always be
some kind of of person or idea or that
will drive what kind of a bit else will
we do today so that's something that a B
test can never help you with what should
you test next
it can only like saves like the test
you're doing is good or bad for the
thing you will want to reach so but as I
said focus on user behavior that's the
thing we want to change
locate your kpi's talk to your business
find out what the important numbers are
of course you can actually make up your
own kpi's in the domain you are working
with do that it's better to have that
than nothing and of course divide and
conquer your users into small buckets
quantify everything so coo coo yeah come
to be first sorry so more get more data
in any way you can to make better
decisions and of course be context aware
when you can and try to make this
support if you want to succeed with this
you really have to make this a part of
your daily routine so if you have a
stand up like one of the things you
should actually say or go through it's
like what are the ad tests running today
how are they doing
are they correct are they working ABS
can we see something can we make
decisions on them so make better
decisions and of course feel your
curiosity because like this is pretty
much fun to actually try like oh the
fish work on the user that this worker
music this is actually so like try to
use
just a few to try out and test new
things so just three traits the last
part so this is about a bit test-driven
development I hope you get a chance to
try it out because it's very very fun
way to work and it's something I highly
recommend and of course assumption is
the mother of all fuck-ups and last of
all I want to just mention expressing
development team that has approved that
I can use this material and I'm guessing
they're hiring so if you're looking for
a job in Sweden I can highly recommend
working there so with that stay humble
be brave do cool stuff and hopefully I
will see you around here in the
conference area so that's all for me
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>