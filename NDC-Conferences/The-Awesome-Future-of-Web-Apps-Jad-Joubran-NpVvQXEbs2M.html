<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The (Awesome) Future of Web Apps - Jad Joubran | Coder Coacher - Coaching Coders</title><meta content="The (Awesome) Future of Web Apps - Jad Joubran - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The (Awesome) Future of Web Apps - Jad Joubran</b></h2><h5 class="post__date">2017-04-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NpVvQXEbs2M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Oh
the only thing that involves faster than
technology is our expectations we want
everything better easier now suddenly
downloading an app you like it takes
forever and in many parts of the world
data is still at a premium with one
megabyte costing up to five percent of
the monthly wage let's face it though
until now the alternative to native app
hasn't finger but that recent
progressive web apps can now deliver
mobile web experiences with a native
looking offering features like real-time
push notification adding a site to your
home screen so you can easily jump back
to it with a single pack
even we are offline plus the ability to
make quick payment on-the-go and all
from your browser
it is the next generation of the bubble
so what are we waiting for let's go and
build something great
thanks for being give being here guys my
name is Georgia Brown and I'm a
full-stack teacher in Amsterdam Brussels
Lisbon and London and today I'm here to
talk to you about the future of web apps
technically the awesome future of web
apps so that's why we're going to cover
progressive web apps from scratch and
we're also going to talk about some best
practices so how many of you are
familiar with progressive web apps all
right keep your hands up if you've done
progressive web apps not necessary on
production locally alright so this is
going to take you from zero we're gonna
start talking from scratch and we're
also going to cover best practices and
towards the end I'm going to tell you
some web AP is that I'm excited about
some of them have landed in almost all
browsers some of them are coming soon in
other browsers and we're going to
conclude with the Future app model or
what some people believe the future of
web apps is going to be in a few years
so let's start by talking about
progressive web apps and the first
question that I always get what is the
PWA is that like a Chrome extension is
it like a library framework and the
progressive web app is you can make your
website as a progressive web app by
using some modern api's by using some
modern web AP is that will make your
mobile website much faster more engaging
and reliable so after showing you this
nice introduction video I'm sure you all
want to see how it works so I'm going to
show you the independent components of a
PWA so you'll be able to know how to add
it to your own web application right now
and the first one is the web app
manifest and the web app manifest is
just a JSON file that tells the browser
more about your app web application so
it describes it it gives it a short name
and name this is an example of a
manifesto JSON so the only thing you
have to do is just link to it
with the link relationship manifest and
this is the sample of a manifesto JSON
you give it a short name name theme
color background color etc we're going
to see how all of these work so let's
take a closer look if we define a short
name and an icon
so normally you define more icons more
screen sizes I just want to keep the
slide short
and here's the video of what happens
when the user clicks on the overflow
menu and tries to add it to his home
screen so by default we get the short
name that we defined and the icon and
once the user adds it we get it on the
desktop on the home screen so just by
defining those short name and icon and
now once we have an icon on the desktop
the user can click on it and this is
where the browser is going to open with
a splash screen so you are able to
customize the content inside the splash
screen so you can define a name now the
name can be the same as the short name
or you can define something longer
that's why you have the name you also
have the same color background color and
let's see how it works
so when the user clicks on it we have a
splash screen and the blue color is the
background color and you can see how
this theme color is affecting the status
bar so once again all of this just from
this manifesto Jason you can also look
up the orientation in this example I set
it to port 3 now all of this magic
happens
because we have display stand-alone this
place stand-alone actually instructs the
browser to hide itself that's why you
don't see chrome anymore you see
Foursquare that's because I decided to
build a progressive web app called
Foursquare and this progressive web app
is going to launch a certain URL which I
defined in start underscore URL in the
flotation map and once again you see how
the theme color if I go to this task
switcher or app switcher you can see
there's no Chrome or browser or Firefox
anymore this is my own progressive web
app that gives the user an immersive
experience and you can see once again
how the theme color is affecting the app
so that's it for progressive for the web
app manifest it's fairly easy to use and
that's the main component of a
progressive web app now the most
important component of a progressive web
app is the serviceworker and the
serviceworker is a javascript file that
fronts or a script that runs by the
browser independently from the web page
and separate from a web page so your
page doesn't have to be opened Forest
Service Worker
and this actually lays the technical
foundation for a lot of interesting
features push notifications the ability
to send to make the up side work offline
the ability to intercept Network
requests and also background sync so
let's see how it works the first step
obviously is to register a service
worker so first of all you want to make
sure that you only register the service
worker if there is support for it in the
browser so that's why we wrap it with if
service worker in navigator and then we
register a service worker so navigator
the service circle dot register but you
have to pay attention to something here
this service worker DOJ's file the
location for the file actually matters
if you put it inside the script folder
then it's only going to be able to
access or or manage this sorry the
network request going outside of the
script folder that's why in most
scenarios it will be at the root level
of your website and this is a promise so
you can see if stored successful if the
registration was successful or if there
was an error now you're probably
wondering what's inside Service Worker
guess it's of course regular JavaScript
but we don't have access to the Dom so
you're not going to see the same code
you used to it we're going to see some
new web api so the first step is to
listen to the install event the install
event happens when the service worker is
installing and then what we do is we
create a new cache called my cache in
this example and we try to add to it all
of these static resources index.html up
the CSS and logo dot PNG so we've got
some resources from the network and we
add them to the cache of this page so
nothing happened so far we just added
some files to the cache so the next
logical step is to listen to the fetch
event so I'm going to continue writing
my own serviceworker code so I listen to
the fetch event the fetch event fires
whenever the main page requests a
resource from the network but because we
have a serviceworker installed the
serviceworker is going to intercept the
sensor request so we are able to deny
this request but it's not useful we are
able to maybe serve it from the cache
so let's see how we can make that so
we're going to respond with something
first of all we try to match this
request so event it's requests do we
have an entry for this request in our
cache if we do then response will have a
value so we will return response so what
happens is if you're requesting for
example the logo and we have it in the
cache we're going to return it from the
cache and if we don't then I'm going to
use the fetch API and I'm going to
request it from the network and return
it back from the network so that's the
most basic service worker code it works
if you try it it really does work but
don't go on production don't go to
production with this kind of code
because it's not future proof if you try
to remove files if you try to add other
files you're going to have some kind of
bottlenecks it's not going to be very
optimized and this logic that you're
doing here is kind of limited so what I
recommend is to use sw-precache and
sw-precache is a node module by the
google chrome team and it generates
serviceworker code for you right from a
configuration file so you define which
files are considered as static files
that you want to cache so you can pass
index.html up to TSS you can even pass a
white card here to say all the images
inside the images folder and then you
just run sw-precache which is the binary
pass in the configuration file and it
will generate the server circuit code
for you by the way I'm going to do a
live demo at the end to show you almost
everything we talked about and you'll be
able to try it on your phone so if you
don't take up anything right now we will
get to get to it later on so once we
register the serviceworker if you open
chrome dev tools you will see that we
have a server circle running so now the
difference what was going to happen or
the benefit is that previously we used
to load things from the network so I
used to load the index with HTML from
the network same thing for the image but
now we are actually loading it from the
serviceworker so we are able to load
some resources reliably if we have
internal connection or not we're still
able to share
those files to return them to the user
even if you have flaky connection we are
still able to display something on the
screen and that's only half of the way
for now because okay we should something
on the screen but what happens if the
user tries to request something from the
Internet and that's where sw-toolbox
comes in handy sw-toolbox is another
server circuit library by Google Chrome
node module it's a node module as well
and it gives us a few strategies to to
deal with content the content that is
coming from the network so cache first
network first and fastest let's see how
they work
this is cache first it's fairly simple
we've got a page and a serviceworker and
this is a natural request the Green Dot
when the network request gets dispatched
from the page it gets intercepted by the
serviceworker and then it will decide
that ok we need to get the data from the
cache so the data from the cache will be
returned back to the page so this is
useful if you've got a list of countries
for example you want to get and you know
you have from the cache you know you
have them from the cache so we just use
the cache first and if you don't have
them from the cache then the first time
you get them from the network they will
be automatically added to the cache this
is cache first let's take a look at
Network first so once again the network
request gets dispatched from the page
intercepted by a serviceworker and goes
to the network now the network will
sometimes fail so for some reason the
network has failed and this could happen
for a lot of reasons
so we now backtrack the request to the
serviceworker forward it to the cache
and get the data back to the page so
that's a nice way again to be resilient
I try to load the content from the
network because I need to get the
freshest content but in case it doesn't
work I'll just revert or fall back to
the cache and the last one which is
fastest or stale while revalidate I got
some natural requests and get it gets
intercepted by the serviceworker which
then spawns two identical requests one
going to the network and one going to
the cache but obviously the one coming
going to the cache will resolve first
and return the data back to the page
whereas the one from the network is
going to go and just update the data
from the cache so this is a nice
strategy if you always want to return
the content from the cache and you don't
mind if it's stale content while always
trying to update it in the background to
always have like a kind of a fresh copy
so how do you use them so you use them
in conjunction so you can say whenever
I'm calling the Yahoo API is I'm going
to use the fastest strategy whereas
whenever I'm getting the list of
countries that we want to use the cache
first so you can define regular
expressions you can define six URLs and
like attribute for this URL I'm going to
use this pattern and you can even do
more complicated things so for example
you can name your cache and specify a
list of maximum entries you can even
specify when those entries will expire
in this scenario they will expire after
one day and you can also specify a
network timeout seconds this is my
favorite because you can say I want to
try and get the freshest content from
the API so or there is new if you want
to get the list of orders but in case it
takes too long in case it takes more
than three seconds then I'm just going
to fall back again to the cache so you
think about it as if the network has
failed and this actually fight life.i
anyone knows what life is and I guess
that's when your Wi-Fi says it has Wi-Fi
but it's actually lying and it does
happen a lot so well it's when your
phone is showing Wi-Fi and you go to a
website and it keeps showing on a blank
screen for like one minute so this helps
you prevent life.i because if the page
doesn't respond after five seconds
you're forcing it to get from the cache
to get the data from the cache now
you're probably wondering that's right
okay I do need a subject free cash but
at the same time I do need a stub you
toolbox so how can I work with them at
the same time and actually you can
configure sw-toolbox from within the
same configuration file that you use for
sw-precache so this is what you've used
a half before and I'm going to add the
runtime caching and this is where you
can specify URL patterns
and the handler so you can specify as
many as you want you can even pass the
Advanced Options here and the nice thing
about it is once you have a nice
progressive bulbar the browser will ask
your users if they want to install it to
their home screen so this happens
automatically and without any
intervention from the user but now there
there's obviously some criteria behind
this the browser cannot ask you for
every single website so those are the
criterias that the website looks for you
should have a valid web app manifest of
course you should have a registered
service worker you need to be on HTTPS
actually service workers don't even run
on HTTP for security purposes and
finally the web's the user has to visit
your web site at least twice within a
five minute duration between two visits
that's because they don't want to ask
the user the first time if they want to
add it to the home screen they have to
wait for like at least five minutes so
this is really nice for users but quite
challenging for us developers to test
you will have to deploy code go to the
website take a five minute break and
then go back again so luckily there is a
chrome flag that allows you to disable
this just for you so you can test so
bypass up banner engagements and you'll
be able to go to the website and the
browser will ask you from the first line
and I'm not sure that serviceworker
opens opens the door for push
notifications and I want to explain
briefly why we finally have access to
push notifications why can we receive
push notifications now so in this
example Flipkart API has sent a request
to the GCM to to Google push
notification server and then GCM is
going to send the request to our phone
now our phone is going to wake up chrome
and then chrome is going to wake up our
service worker even if Flipkart was not
running so that's why you are able to do
push notifications because service
worker can run independently from a web
page and now that the service worker is
running using the notification API we
can just pop a new notification
and that's it and there's also an
exciting new feature that's only
available in chrome right now but coming
soon to other browsers which is bargain
think there are two types of background
things this one is supported on Chrome
which is basically a way to defer tasks
until the user has connectivity so
imagine you're building what's up for a
whatsapp web application and the user
tries to send something but they don't
have internet connection
this will allow you to send it as soon
as possible if you've got internet
connection or just delay execution until
the user has connectivity and once again
even if the web page is closed and this
actually employs an exponential back-off
instead of trying every single second
and there is the periodic sync which is
currently being expect so this one is
not available in the browser's yet but
it actually allows you to do a periodic
background sync in this example every
five minutes and you can also put some
constraints on the power state and the
network state so avoid draining means
the user has to be plugged in and
natural state avoid celery means that
the user has to be on Wi-Fi and you can
just keep the defaults here so I think
the most important question that I'll be
getting is what's the browser support
for this and there's an awesome website
to show you the browser support for
every single feature I took a screenshot
only of the motivation to build
progressive web apps because without
motivation there will be no progressive
web apps and progressive web apps work
on Chrome and Firefox and on Oprah also
something Internet has a version which
works with progressive web apps so if
you've got like an Android tablet they
will work and edge is in development
I've heard rumors that it should be
available in q1 2017 that's all for that
but actually edge is pushing people to
build progressive web apps without
waiting for them because if they build
it today and then when edge rolls out
support it will just work and Safari
doesn't have anything transparent but
there's a brief positive signal about it
in a five-year plan so it should be
coming but No
really how's the answer for that so now
let's take a look at some progressive
web alphabets practices everything I
covered so far is the basics of
progressive web app but once you start
building progressive web apps you will
have some kind of problems or some kind
of minor issues so I'll cover as much as
possible and more about user experience
best practices to make your progressive
web apps much better and the first best
practice is about the theme color how
many of you have noticed that when you
go to Facebook you have something
similar to this like you have a blue
background color so I originally thought
that this is affected by the theme color
in the manifesto Jason but actually the
browser doesn't load the manifesto Jason
unless it needs it so if you want to add
this background color to your browser
you'll have to do it as a meta tag so
normally what happens is that you put
the same color here as the one you have
in the manifesto Jason I just want you
to be aware that the manifesto Jason
doesn't directly affect your website
only if the user tries to add it to the
home screen or only if they browser
things that they should ask the user to
add it to the home screen and then
there's the concept of first paint which
is how much time do we need to start
painting in a web browser so here's an
example we've got two opposite scenarios
one with optimized rendering and one
with an optimized rendering and this is
the most this is scenario that you will
see a lot on the web you open a website
wait for like five seconds on a white
screen and then suddenly everything
loads so I'm going to show you a typical
HTML file to to explain this problem to
you and tell you how you can do this
setup in a progressive web app so we've
got a CSS file in the head basic HTML
and we're loading a script at the end
now if we open the natural tab in chrome
and setup 3G throat link we can see that
we're loading the index of the HTML the
image the JavaScript the CSS and the
whole thing takes 5 seconds to load
because we are on a 3G connection
and this is where the first paint
actually happens in this example so I
want to ask you what is the browser
waiting for for it to start rendering
the script and the CSS it's not very
obviously it's waiting for CSS but the
reason why the browser has to wait for
CSS is because if it doesn't wait then
the browser is going to show some
content without styles and then when the
stars arrive to the page is going to do
a flash of unstyled content which is not
a good user experience so this is like a
default behavior by the by the broad
browser so how can we unblock CSS and
JavaScript let's start by unblocking CSS
and the strategy that I like to follow
is by inlining critical CSS so that's
right we use n line sides in the head
for the most important bits and pieces
of CSS and then for the rest of the
surface we just dynamically inject it at
the end so what do I mean by critical
CSS what I'm just talking about those
minor styles that you can add in the
head to just show something to the user
so I'm just changing the background
color here to gray removing the margin
and then and then just studying a
background color on the header it's
nothing it's not a lot but just to show
that something is happening and to
unlock JavaScript it's much easier you
just add the async attribute here if
you've got multiple script tags you'd
have to use defer if you want to if you
on a guarantee execution order so if
you've got one script that is a vendor
and the other one that is it
Abdo jf and the app depends on the
vendor you want to make sure that the
app has the vendor loaded so you'd have
to just differ because a thing does not
guarantee that they were run in the same
order so putting it all together you
will have inline styles regular HTML
async loading for scripts which also has
a think loading for styles and if we
pull it to the same stuff st. 3G 13
connection you see that we now start to
render at less than 200 milliseconds so
side-by-side comparison a huge win
although it still takes five seconds
because we didn't optimize the whole
thing so why am i searching on this
because this is a pattern we see in
native apps
when you open facebook or what's up in
less than 200 milliseconds you see
something on the screen whereas when you
open a website you'll be staring at the
wide screen and that's not going to look
so native to the user so let's take it a
step further and talk about the app
shell and an app shell is just the
minimal HTML CSS and possibly JavaScript
that powers the user interface so the
app shell is just a way to design your
website and to expect content to go
inside of it so what you normally do is
just add in add a navbar change the
background color maybe add some cards
and once you have the data loaded you'll
just inject it inside of the option so
inbox has an awesome app shell anyone
uses inbox it's an awesome image tool
you should use and unless than maybe
half a second you open when you open
inbox you will have a floating action
button snack bar or toast shape tools
and the header that is painted so this
is a good pattern and I want to show you
that it's not that hard to create an app
shell you don't need a lot of lines of
CSS I have a floating action button
again that's the code for it I position
the logo change the background color and
you can build up cells very easily but
you have to take it into consideration
when designing so now for this app shell
we've got some considerations first of
all it's must load fast we've talked
about it and it must be cached so it
should load fast this is something we've
done using optimized rendering but how
can we cache it this is also something
that we've done using sw-precache so
when you added index.html to the list of
resources for pre-caching now we are
able to always render this option below
ibly even if we don't have internet
connection even if we have poor internet
connection we are always able to render
this app shell as soon as possible now a
common question that we that I get is
how can I detect if a user is coming
from my browser from the browser or from
the home screen and the answer for that
is very simple but actually breaks a lot
of things
so that's why it's documented here so
you can use the start here else to add
add a query string so what people
normally do is they add a query string
homescreen equals one that's where
you'll be able to read this and
understand if you user is coming from
the progressive web app or from the
website if they're coming from the
website then they will not have this
homescreen equals one however this is
going to break your progressive web app
let's see why because every URL that you
precache it will be treated as a
different URL so query string parameters
will make it look as a different URL
except for UTM UTM parameters so that's
the configuration that was added by
default in a subgroup Prakash so UTM
anything that starts with UTM underscore
will be ignored so that's why we will
have to go and add to the ignore ul
parameters matching home screen or else
what's going to happen is the first time
you go offline and the users go to this
progressive web app it's not going to
load because the browser is going to say
I don't have homescreen equals one and
my cash and of course you have to add
query string homescreen equals one and
also some developers add slash for
development purposes because if you're
running surf if you're serving you
normally go to localhost port 8000 slash
so slash is different than slash index
of HTML
all right so now we've taken a place on
the home screen and that's a huge win
but it also gives us a lot of
responsibilities so there are some
considerations that we should follow so
I always like to remind developers that
we know about progressive web apps but
our users don't they don't even know
that the term PWA exists if they see an
icon on the home screen then they know
this is a native app at least they think
it's a native app which means it should
behave like a native app so that's what
I have been talking about the first
paint app shell and all of these but
there's a big problem here actually I'm
going to talk about the next step after
the app shell so after we draw the app
shell we have the first meaningful paint
and the first meaningful paint happens
when we start showing content to the
user this is an important step
and then after it there's the radiant
for interaction because sometimes you
have the content in front of you but if
you click on it it just doesn't respond
and the reason why this happens is
JavaScript so this is a real trace that
I took from my MacBook Pro with only
five times if you throttling from
nasa.gov the browser was idle for eight
seconds not either but I mean processing
Java so for just eight seconds so this
is on a macbook imagine what would
happen on a phone and that's only
because they're shipping a big vendor
door javascript so in the beginning of
the talk i told you you can make any
progressive web any website as a
progressive blah blah this is
technically true but if you have big
scripts then the user experience is
gonna it's not going to be like the one
you want to have so what's the answer
here what's the solution to this
so obviously don't chip too much other
script I know this is not like talking
to developers I know this is not an easy
thing to do
so I'm going to give you some
recommendations in able to ship less
JavaScript and the first one is source
map Explorer has anyone used it before
so this is a node module that explains
more about the stuff that you're
shipping inside vendor go chase so it
will tell you what libraries you're
shipping and it has helped some teams to
understand why they're shipping jQuery
twice so these kind of mistakes do
happen or while you're loading the whole
lodash library whereas you only need one
or two functions so it's not that smart
it will not tell you you can load only
those two functions you'll have to make
those conclusions but it will show you
that for example 10% of your vendor ajs
is being spent on this particular
library so this is useful Yuma you must
try it and also code splitting is one of
the best patterns now of course if
you're using old frameworks you will not
be able to do code splitting but if
you're using newer frameworks you will
be able to do code splitting and the
benefit here is that for every single
page you will have one small javascript
file so for the landing you will have
landing ljs which is about few kilobytes
for the settings you will have its own
setting so js5 you will obviously have
like a small common file that's common
to all of them
and the other benefit here is that we
don't ship a lot of JavaScript we don't
spend time in the network the CPU
doesn't spend a lot of time and when we
have to reinvent it settings of
JavaScript we're not reinventing the
whole approaches so you only reinvented
8 the 5 that means to be interrelated
and debugging is obviously very
important I always tell people like
don't expect developers to build
progressive web apps if they don't have
the tools to debug so during the live
code I'm going to show you some awesome
tools from chrome and there is the also
a chrome plug-in which is called
lighthouse lighthouse gives gives you
metrics performance metrics and best
practices in order to build progressive
web apps so for example it makes sure
you have a registered serviceworker it
makes sure it works offline it gives you
metrics for first meaningful paint first
paint etc and it warns you if you using
deprecated API or if there are better
ways to do things so this is a must
right like you will have the brightest
engineer but in a Chrome extension
giving you feedback on how the
progressive web app is working and this
is also available as a node module so if
you you can set it up in your continuous
integration and see if there are any UX
regressions so now I want to talk about
the future and I think the future is
promising first of all because the
progressive web apps and second of all
because some web ap is that are coming
or that are available in browsers and
the first one is passive event listeners
so I will tell you the problem before
the solution the problem is whenever you
add a touch event the browser had to
wait for your call back to see if you
call event of even default before
passing it to the compositor or before
actually handling the scroll event so
that's why scroll is slow on all
websites on most of the websites that's
because only they have a touch event so
that was the problem by design that's
why the browser's have solved it with
passive true so when you define an event
as a passive event by giving its passive
true you're explicitly telling the
browser I will not call event what
prevent default so now the browser can
immediately
we passed this event and handle it
without waiting for your callback so and
even if you call it under prevent
default it will just not work so that's
an excellent way to make scroll fast on
mobile and I've read an article that in
chrome 56 this will be default for some
touch events on the window and the body
so even if you do not define it it will
be a default but of course you have to
define it for other browsers to work
like Safari and Firefox so this works
today on Chrome Firefox Opera and Safari
technical preview and let's see the
differ non-essential work by using quest
idle callback and a callback function so
request idle callback allows you to if
you're sending analytics or if you're
doing something that you don't want to
affect the main threat you'll be able to
do it in small chunks and this is
something that the browser will call
your function whenever it sees fit so
for example it will call it before if
visual sync so on the browser is working
on the frame it's finished everything in
less than say 12 milliseconds and the
browser knows it has like 10
milliseconds frame I mean 10
milliseconds spots it will run your code
for 10 milliseconds and that's a good
way to guarantee that whatever heavy
work you're doing is not affecting the
guys so this works on Chrome today and
Oprah intersection observer is my
favorite although we'll probably not
going to use it a lot but it allows you
to ask the browser to notify you
whenever the viewport whenever the user
Scrolls into a particular viewport so
that will make scrolling much faster
because we don't have to pull on scroll
events anymore we don't have to ask the
user did he reach this location did she
reach this location every single time so
we just ask the user you sorry the
browser you offload it to the browser
and you'll just get a callback so this
works on Chrome Opera and edge today and
CSS containment is exciting especially
if you have like a lot of widgets in the
example on the right you are able to
constrain or to limit the layout the
layout changes of a particular div to it
to the div itself so previously if you
loaded a certain widget and this widget
needed to recalculate layout which is
something internal to the browser the
browser had to recalculate the layout of
the whole page so now you can give it
some constraints and say whenever it
changes layout it's not going to affect
the rest of the page so you're more
specific the browser has to do less work
which means more performance and this is
on Chrome and opera today and payment
request is the payment request API is
also exciting
it works on Chrome for Android and edge
and this shows a native UI to get
payments it handles also addresses so
you can configure it with other
providers like stripe Braintree etc it's
not in payment processing it's only the
UI so it shows 1/8 of your I use it
saved credit cards and basically forces
the user to PI plus which is a good
thing for us if you want them to if you
want high engagement so it also manages
shipping payments and addresses so
everything I talked about up until now I
works at least in one browser but in a
stable browser but what I'm going to
talk about now is what I think and what
other people think is the future of the
web so this is where you have to use
Chrome Canary possibly some flags how
many of you have heard of web assembly
all right so what assembly is a cross
browser low-level language and it
unlocks an entirely new set of web
applications because you're able to run
some particular codes in native language
it doesn't mean we're rewriting the
whole web to be native that's absolutely
not correct I'll show you a test that's
what assembly which is a web assembly
compiled code that just adds two by two
numbers so it adds two numbers the first
number and the second number and I'll
show you how to use it so you'll need
Chrome Canary for this last week it
needed a flower but as a few days ago it
doesn't need a flag anymore so I'm
creating an async function web assembly
demo and then I'm loading the binaries
this is the same test web assembly I'm
converting it to Boyd then creating mode
the mall
out of it and then creating an instance
this is a little bit similar to classes
and instances a little bit and then I
console.log exports and console.log the
result of add to one and three for
example and when you call this function
what do you get so add to here is a
native function this is native code
running and I know you don't see the
benefit of adding two integers using
native code but this actually unlocks
the future our model which is the
progressive web app can do some heavy
lifting and progressive web app in order
to do virtual reality image recognition
encrypt encryption signs or data
virtualization image and video editing
so you will be building the same thing
in the progressive web app but in case
you need is something that can only be
run in native code then you'll be able
to use what assemblies to achieve this
and this one is not on any browser if
there are like so many specs about it
but I'm personally very excited about it
which is web navigation transitions so
there's a possibility that on the web
you'll be able to listen to page leave
and page enter events and do some
transitions so which means you don't
have you will not have to re-implant or
I mean framers will not have to
re-implement routing in JavaScript there
will be no need for routing anymore
because if you go to another page you're
technically literally going to another
page you don't have to build like a
single page application but this is not
anywhere probably not anytime soon
alright so now I'm going to live code
the progressive web apps bits and pieces
do you have any questions so far
all right so I figured I prepared this
here and I'm going to use Visual Studio
code and I'm gonna run serve so this is
just like a simple similar to Python
simple server and if I go to localhost
port 8000 here this is the app that I
already built before the talk so I'll
show you alright and that's it just
before we start I want see how many
natural Creek was I'm using so if i
refresh I actually get quite a lot
has anyone like stumbled upon this issue
in chrome like you're trying to debug
and then suddenly got tons of JavaScript
loading anyone so those are actually the
chrome plugins and the reason why I'm
telling you about it is because they
will skew your results so you'll have to
use incognito or maybe another profile
so I'll go on incognito this time
refresh and that's it those are the only
info
those are the only network requests that
I'm doing so now let's go to visual
studio code and show you what I've
already written before this is the index
dot HTML I have the responsive viewport
meta viewport I have some inline styles
for the app shell so actually the same
one I showed you in the talk floating
action button logo etc this is the shell
header and then I have logo once again
floating action button and the image I
have a speaker's list this that is empty
and I'm a synchronously loading CSS
there is a better way to it
synchronously load CSS but it's not
working on all browsers yet that's why I
didn't tell you about it and loading
script asynchronously as well so let's
see what you have inside
up to TSS just basic styles for a card
and inside other JavaScript I have a
boot function which uses the fetch API
now you cannot use fetch API if you have
support Safari I'm just using it here to
show you how it works which is normally
used inside service workers so do you
know Jason placeholder the type code
this is like a sample API that returns a
list of users so after the turning list
of users I'll convert the response to
JSON then once we have the data I will
loop over it
and I'll just drop every person and
inside a cord and then at the end I will
add it to speakers list so nothing major
but I'll use this demo to explain how a
progressive how you can build a
progressive robot and I'm calling the
function here alright so the first step
is obvious to work is obviously to work
on the manifest adjacent I already
prepared one here I gave it a name NBC
London this is going to show up on the
desktop on the home screen
so I mean this is the short name on the
home screen the name is going to show up
on this far screen I set the start here
l2 index with HTML and I want to know my
users are running from the home screen
this place stand-alone which is going to
hide the UI from the browser background
colors in color etc so now we have to go
to index.html and link to it
so scroll up and link to it here so link
relationship manifest and manifesto JSON
and don't forget about the same color so
I'm going to copy the same theme color
from here and add it as a meta and give
it the same color so now how can we know
if it works without actually going on
mobile and testing this is where chrome
dev tools come in handy so you fresh and
go to application tab this is where we
have the manifest section and you can
see the browser parsing your manifesto
JSON warning you of potentially
involving stuff you put here so this is
a nice way to immediately dust it
without having to deploy to run it
through a validator or whatever and
don't forget that you should actually
specify icons from
I think 44 pixels until 198 pixels you
have to specify like six options and if
I don't know what are those default
values just search for web app manifest
and you can use either web sorry the
Mozilla developer Network or Google web
fundamentals they have accidents
resources here okay so that's the first
thought first step done now the next
step is if I go to the network and
enable 3G throttling sorry enable
network throttling so normally you have
to test on 3G but because I'm testing
with super small files or go down to
GPRS but normally this is too much
so I refresh and before refreshing I
want to clear everything or so you can
see if the content is loading or not
okay so I'll refresh now and it takes a
bit of time to to show everything on the
screen and if I go offline obviously it
just doesn't work because it's not a
progressive web app yet so we're going
to install as WP cache and go through
the same stuff to make it as a
progressive web app so the first thing
that I'm going to do in the same
directory I'm going to create a doesn't
matter where you created a precache
config dot javascript and inside this
precache config I'm going to module dot
exports list the file that I want to be
pre cached so what do i what do I want
to be pre cached index dot HTML we can
say CSS app dot CSS and let's say J is a
purchase so now you can also say all the
images inside the images folder just
make sure that you're not really caching
stuff that you don't need part of the
app shell or later on during your app so
make sure you're not like caching all
the images in your website and that's it
so let's go run fw - Prakash and then
pass in the configuration file so just
pass in the configuration file and it's
going to generate the serviceworker code
for you
that's it so you can pass debug as well
or for both to understand what's being
cast or not but those are the things the
same things you listed in the manifest
alright so how does it look like that's
it a lot of disclaimers and the reason
why a sublet precache is better than us
writing our own code is that it stores a
hash for every single file so if you're
shipping a new version of serviceworker
but you didn't make any changes to
index.html it will not remove it and add
it to the cache again
so it's an optimized way and all of this
code for it to run so now the next step
is to register the service circle so
I'll go to the landing page to index dot
HTML create a new script tag check that
there is serviceworker support and
navigator
and then register this service worker
you can also add dot them and make sure
it's working couch
so now let's go back refresh we have to
go online of course notes are linked so
we go online and we see the service
worker is actually here whenever you see
the gear it means there's a service
request coming from the service worker
and if you go to the application tab
service workers this is our service
worker installed and it's managing this
page that's cool let's refresh one more
time and go into cache storage
sw-precache those are the resources that
we cached so what does it mean now if we
go if we go to network tab and enable
GPRS and refresh the option load
superfast reliably but not the dynamic
content we're going to fix this later on
and once again if you go offline we will
get will get the option but we will not
get the content inside of it so now
before we continue fixing things I want
to I was telling you about the home
screen equals one requires the
particular fix because by default a
subject a cash-only ignores UTM in the
end of your else so I will go back to
sw-precache config and this is the
default by default so whatever starts
with UTM so starts with UTM and I'm
going to add my own which is whatever
starts with homescreen so we want to
ignore this so that it can be returned
by the cache and every time we change
something in the index dot HTML or any
file that is pre cached or the
servicecircuit configuration you have to
rerun sw-precache so what normally
happens is you put sw-precache as part
of your build tool but now I'm not gonna
automated so I'm going to keep on
running it's manually alright so let's
go ahead and configure run plan caching
so I just specified one time caching
and I can specify a URL pattern this is
where you put a regular expression so
I'm going to get it from averages you
have to exclude the HTTP or HTTPS and
you have to escape things so this is a
regular expression you have to escape
the slash you have to clip the dot and
wrap it with this / and / that's it
so whenever the URL matches this pattern
which handler am I going to use let's
say gosh first so the first time is
going to go to the network and then
subsequent requests will use the gosh so
now we have to rerun the server circular
code this sw-precache go back to the
page refresh this is where the new
service worker is taking control it is
actually running so on the next network
request it will actually be taking
control and you can see here that the
service worker is requesting this is how
the gear icon is requesting the list of
users so which means we now have it in
the cache let's double check we go to
cache storage and sw-toolbox we have the
list of users here in the cache that's
great so now we go to the network go
offline or go to GPRS refresh and we are
still able to return stale content so
this is much better than showing like a
dinosaur image that the app doesn't work
I still have time to show you one more
thing which is what if we use the
fastest strategy if use the fastest
which is failed while we validate I'm
going to rerun the serviceworker code
again so refresh the first time this is
where the new servicecircuit code is
being fetched then next time is where
this serviceworker is actually managing
the page and let me see if I can show it
to you here let's refresh
users actually I need to throttle to
show you this okay so that this is the
users request it's going through the
service worker but it's returning super
fast that's because it's returning from
the cache whereas the service worker
itself is actually questing users from
the network and once the request has
come back it will update the cache so
just to visualize fastest I know it's a
little bit hard to visualize because
you're saying the main thread and then
the service worker at the same time so
you have any questions so far that's it
for the logged on alright actually let
me show you one more thing if I go back
to cache first and let's say I change
the background color for this to red if
I use red and now obviously you have to
rerun the service of your codes so
that's why you'll have gulp or walk back
running all the time
go back refresh so the first time you
refresh it you'll be serving from the
cache so you will not get the updated
version to the app shell but the next
time you refresh sorry right now you're
getting the updated version
did I save
oh sorry it turned out and then notice
it so you will not get the updates from
the first time you get it the next time
and this is fine if you're updating the
app shell there are like multiple
strategies to deal with this
so let's take a few minutes and if
you've got androids you can go to this
URL and try the exact same time
otherwise that I showed you right now
I already coded it and uploaded it to
github so you can go to bit dot ly and
you see - London - demo so you get the
same website you'll be able to add it to
your home screen just make sure you have
Android or like Nexus or Samsung's
tablet yes
so the question is what can we do to
support iOS in terms of user interface
or in terms of PW AE
because there's no PW support and in iOS
yes okay well there's brief positive
signal in a five-year plan but there
isn't something more concrete on that
chrome engineers have been saying that
Apple engineers have been giving
feedback on the spark which means
they're looking at it but nobody knows
when it's going to roll up the
serviceworker is not going to work now
what some websites like Flipkart has
been doing
I think they they're caching this stuff
and like manually checking the
cash-money checking for network failure
but this is going to be a hassle if
you're going to have to do it all right
so those are the list of resources you
can take a look at other progressive web
apps on pwho trucks which is managed by
opera the developer relations team
Google web fundamentals and Mozilla
developer Network have excellent
resources for progressive web apps and
especially service workers so make sure
to check them out so I hope you enjoyed
the Stork thanks for your time you can
find this presentation online here the
same link as before but without the -
demo you can also follow me on github
and I'll answer your questions right now
and even after the talk if you like to
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>