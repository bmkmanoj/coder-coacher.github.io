<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CSS Houdini - from CSS variables to JavaScript and back - Serg Hospodarets | Coder Coacher - Coaching Coders</title><meta content="CSS Houdini - from CSS variables to JavaScript and back - Serg Hospodarets - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CSS Houdini - from CSS variables to JavaScript and back - Serg Hospodarets</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3IUxyBx_PnM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys my name is circus Buderus and
today we gonna speak about CSS kodi
neeya which is actually a bridge between
CSS javascript and browser browser
rendering and originals so in general
about me I also participate in new
technologies development where every
node comes to the browser's share
browser updates and very excited about
everything related to JavaScript and CSS
and I'm out also a blogger and I have my
blog and recently my article was
published in Smashing Magazine it was
about his custom properties and siddhis
custom properties is essential part of
understanding for the CSS Houdini so
later we will use this as a bridge from
CSS to javascript native bridge and
let's go to custom properties so who
knows what is CSS custom property super
we have somebody so internal it is
custom properties it's kinda idea the
same ideas in pre-processors to have
first of all rainbows and sakura to
actually give us developers ability to
introduce our own properties and then
tells the browser how to work with them
and let's take look into pre-processors
first and then move to ESS why actually
we need CSS custom properties so
pre-processors we have variables and
operators so who use preprocessors in
general shells purposes sounds good cool
so you know that actually you can
declare a variable provide some value
there and after that you can use this
across the application so it's actually
not something not something new for you
and of course you can do some operations
like plus minus multiply anything we use
and do this in our code bases but with
assessor's variables that actually have
own problems like each preprocessor
provides new syntax you know in SAS its
dollar variable unless it's something
the else like dot always you spend time
learning a new language in syntax you
always spend time doing some additional
setup so even if the config is cover
kinda easy would look like if you did
couple the parkin fix like you know
whatever I'm saying it's like
always takes time and everything you do
any change you always wait till with
ready compiled and applied for the CSS
output then browser loads so exchange
why we do this by browser cannot do the
same lab and this copulation takes your
time every day you spring in time just
wait and we're actually this will be
done so and essential parts of other
problems like absence of interaction did
the browser see the professor variables
have no idea about this about browser
Dom structure or anything else or just
it goes to CSS output does it everything
what you can do and yeah interaction is
the browser means like you cannot pass
something to JavaScript directly you
always go to CSS and then browser
JavaScript so let's go and take a look
what we actually have a CSS variable and
you will see that actually you can start
using this today
so you just using syntax like - - and
then variable name and then just a
declaration value we will discuss what
you can put as a values there later and
usage is quite simple just use var
function like I like calculus something
else but bar function and put the
variable name and immediately you can
use this across your code base and let's
take a look into some example root so
root is typically its HTML I provide in
some main color my in background and
here is a trick all the CSS custom
properties have the same behavior as
usual CSS properties they cascade they
do the same thing so if you provided
something for HTML immediately it's
available everywhere so it's a global
variable
also you can scope this for specific
things we'll discuss this later so after
that I'm just - mine color some value
and after that I'm using this bar
mine color is a provided here and of
course it'll ask like why again I should
lower this - - you see in text why not
dorsal not something I'm actually good
used to so the idea was you currently
use sauce you can use less you can do
something styles I don't know whatever
other options and the idea is just to
provide ability to use both at the same
time you tomorrow we can start using CSS
custom properties in your code base in
your preprocessor will not pass exams
they will go directly to CSS which is
good so you can take the power of bosco
so here's a simple demo I just took a
demo and just extracted something like
CSS custom properties like font size
let's take a look you see the planes
here said I don't do any matrix actually
browser does I'm changed boom everything
working the same I can do for text each
other I can make it bigger or it
actually will break it a bit but anyway
and of course I can just put there some
forms let's break the demo RL Oh so it
works immediately by the browser and
here is a good actually news one year
ago in my previous talk I was saying
about custom properties everyone was
saying OK source it will be in ten years
or something
voila one year all the major browsers
just supports it of course you will say
tada
our friend is red what to do behave CSS
next we have cast we have custom CSS
mix-ins so you will have ability to
actually emulate this be here if you
still support the browser actually good
news like graded giant companies like
Salesforce drop in support of eleven
soon guys some guys will deserve depends
on your project and everything else so
good news every single in they're in
good shape
well it examples both actually you can
put into CSS custom properties the
answer is simple everything everything
what is valid CSS value you can put
there let's take you look like colors
yeah here lay out their length anything
like that the time I'm serving here is
time she restrained you can print
function of course the power of custom
properties is that you can put other
functions like calc
of course other custom properties is
oscillator and even though you can put
some strange expression have no idea how
will you use this in CSS but later it
and use this in JavaScript reduce and
reuse so it might be a terrible idea but
it might be using by CSS and J's guys
hopefully they will not go very crazy
anyway put there anything they cascade
they do the same as other CSS properties
and next thing it is like of course of
course
anywhere in other languages I want to
have something that sugar motive
sorry just need some magic water both if
I just want to say there is some
variable I'm not sure it's custom
property I'm not sure if it's already
available or will be loaded by later
available there later just use some
default value as we usually do another
like if or something yep just pass the
second parameter the bar function and it
will be used as default value is the
custom property not provided for still
not provided for this block or anything
or still not loaded or something like
this and of course you can reuse other
custom properties like if you prefer if
you provide a new custom property you
can reuse another ones as a fallback so
here is a demo but better take a look at
this one in general like how we can do
this here is the demo I see you see I'm
just saying there is a global properties
custom and it just takes custom is just
the first letter in uppercase and I have
two boxes like text dot custom so two
pluses like text custom and text custom
properties there is only one difference
they have different classes and I'm
saying Photoshop block just use as a
text which actually is the concept of
this block just use this variable I'm
saying use on different variable of
course it's undefined in my code and X
fallback use custom okay full box for a
fallback goes to custom and reuse this
text custom properties is just different
you can not only just reuse other
variables you can also concatenate them
for example I'm saying like variable
custom contaminate this properties is
some space here and make it work let's
take a look that actually it works
properties second pshh updated and
custom I'm updating in real time
immediately your brother did all the
magic you don't need pre-processors
anymore for this stuff and if you know
CSS well actually there is there are
many such as white keyboards you can
just simply use ensured initial and sets
of the main idea like if you want to use
something from a user agent which is
actually browser and you want to use the
default value for some property usually
use like initial onset or revealed
and they also available for CSS custom
properties so as you see everything
except for usual CSS properties
available for CSS custom properties only
one interesting thing like all over a
property if you put something on that
particular property like initial
interested mostly all CSS properties
except custom properties and currently
it's under consideration and discussion
if we need actually specific preset for
custom properties only so hopefully
after a while it will work recently
Chris career just also described it a
good usage of custom properties so you
always hear sometimes you have some
longer alias like for transform or other
things like very good one where the
secondary any even pardon even margin
anything and you put space another part
another part and let's say for whole for
another state or just different class
you want just to change only part of it
yeah so what what could you do usually
wait until the browser adds support for
the separate properties for transform
it's still not available in many
browsers just use custom properties here
I just you see i extracted like scale
and rotate indeed in separate properties
every single they do here and thus
changing on a hover only rotate part
saddam it immediately works
so just all these values can be changed
in this individually just separate them
and it leads us even fuser if I can
separate I can also provide a new way
list box shadow box shadows wonderful we
uses but the only one problem when I use
a long value for however I want just to
change a color what I'm doing copy paste
like 0 0 30 pixels orange I don't want
to do this I nobody likes pepper paste
so I just introduce its box shadow color
still not available in the Block in the
browser's and he is using this you see
here it's yellow there is orange for
voila here I'm just changing thread
waiting loaded works so you see you can
not only just separate all the value you
can also emulate non-existent custom or
non-existent CSS properties so here is
the probably the power and operations as
they say of course we use across Oh
our code bases some operations like
plus/minus everything like this and if I
say something like this my variable x
one and five your browser will say I
have no idea what you want from me it's
just not it's really see ourselves but
and valid for the browser browser
doesn't know what you want use CSS
called CSS calc function is your friend
from now sirs you put this into calc and
browser immediately will know as only
something is changed for this block
front x value variable just immediately
it prizes everywhere where it's used and
especially in the calc function so here
just use it out of the box so calc
provides some even more power now not
only just using provides some operations
but also work with custom properties and
provide some units there let's put all
this together everything between you in
pretty from previous slides so if I can
separate values if I can use custom
properties everywhere let's go and do
this so background color we can use just
a gba function as you know user puja
just super sorry for different things
like RG and B channels and then opacity
so opacity for camera to not
overcomplicate I just put one and RGB
you see here is the demo on this demo I
have three sliders these three sliders
provide just values from 0 to 255 55
there's actually a range of possible
values for this RG and B and let's
change it so every single change it here
is the only value of CSS custom
properties everything else is done by
browser of thematically and I can go
fuser let's use calc yeah and we can
invert actually color of course it's not
Instagram filters but still a lot we
just take in our value and saying like
calculate our 255 minus this particular
channel and actually it's inverted color
for the for this particular are G and D
let's take a look so we change in
something and immediately everything
applied in the browser
cool so we can do this and what if I go
crazy
all the colors somehow you can invent
some called formula and let's say just
you create all the colors in your
application from one color I don't know
usually it's white or some white color
and black color yes you have dark theme
you have White's him or some sunlight
theme and you can use this for theming
for anything you want so the main idea
here you see I just have only three
colors like RG and B and then I went on
by formal I'm just doing some crazy
calculations like multiply divide blah
blah blah make sure it's not out out of
the box and you see this calc is
actually something terrible and I'm
generated all generated all the colors
in this particular demo depending on my
street but sticking with it actually
works or know I'm changing our boom
immediately the same B changes and I go
a bit career a bit far just will just
apply this like this you see everything
changes of course of course do merge you
cannot be changes we just keeping him
that's it we can go even fuser what if I
want just to apply some value of the
changer my job if you'll just change
everything in our application so color
seaming everything you can do using both
custom properties it's not possible to
do using sass dissolve additional code
if in sauce you want just to apply some
new theme color seam or anything you
overcomplicate your scissors output with
this particular classes and overwrites
for colors and backgrounds or anything
like this let's take a look changes to
custom properties have immediate effort
as you saw as only I'm changing
something it's actually browser
immediately the dazzles so here is an
example you see you have just on hover I
just want to change the indent so what I
do in sauce I'm saying like I feel
variable search it will indent the Sochi
pixels no problem margin 30 pixels apply
it but the N I'm changing this variable
in sauce no effort no effort because the
sauce just seemed okay you change this
after you apply something explicitly I
don't care just nothing goes goes to CSS
output the same for power if you changes
this variable it's not explicitly
applied if
you didn't do something like this after
this line if it's mrs. nice and we'll go
to CSS output let's take a look actually
CSS custom properties demo you see I'm
saying like in them 30 pixels then I
doing this in margin as only I change
the value of indent property it
immediately will be changes doesn't
matter where it's only applies something
for the Dom Dom element or anything it
cascades the what applies immediately
for solar it's the same it's actually
applied immediately and I'm sorry
something was missing yet and CSS custom
properties as I said another problem
which cannot be solved anyhow is
preprocessors they ever about your Dom
structure let's take a look usually
usual example yeah you have text and
take spective you would say you said you
want to have bigger text what is doing
such text size apply font size done you
want for active just to change one way
variable yeah
what you doing text size such a big so
because of things we discussed just now
nice and change it just browse your
cells stuff will not provide anything to
0 and will stay cleaner into this demo
text size 20 pixels the same apply this
variable as only change in this adding
class active boom immediately you see
everything about in it it's very
powerful thing for example I use this
across the project and it's really of
simplify simplify circuit otherwise you
always just have to provide additional
light nobody likes writing more code
yeah as I promised you of course you
have ability to work with JavaScript so
ESL just if the hole always combine yeah
in our application you use some
breakpoints in your scissors I'm pretty
sure as you want to use let's say
ninjask is the same if you know there is
a PR just to use in JavaScript
breakpoints the same like if it's
passing breakpoint apply my code and I
don't want to copy places or something I
want to pass from CSS to JavaScript and
there is a simple API
you just find in your element like
breakpoints data like here and then you
can just read your variables like phone
tablet anything you want so your custom
I'm sorry your breakpoints can be
similar simply just sent to JavaScript
so now it's your ex
breach from CSS to Java it you will see
it's only small part of the bridge and
after that you can just do the same like
from JavaScript you send some requests
to the brother to the server it answered
and you want to apply something on the
UI I don't know something yeah change
some class active loaded anything do the
same like style set property phone
custom to do you can do the same just
from from CSS to JavaScript from just
get to CSS both ways and let's actually
use it yeah
everyone likes demo so created a demo I
have a css3 GPU so it's quite easy to
create a just using css3 function and I
have only three custom properties for
the demo this three DRC custom
properties I use it in transform
function so everything what I do emerges
in the skewed opinion of this custom
properties let's take a look
rotate X I just wanted rotate a bit
differently
boom do you see it changes let's just
rotate why why not
boom I can do it bigger smaller every
single to see what it does its transfer
function you see the bigger all that
let's make it even bigger in school it's
wonderful but I won't user interaction
with this correct what I do I do this
from JavaScript immediately everything
applied in your browser you just move
your mom you actually moving your mouse
you just make it bigger smaller just
this mouse will immediately so can you
imagine how many good efforts can you
apply this and because it's native CSS
and JavaScript is just super performant
and can be used used across the browsers
as we already saw and okay we have our
friend yeah our friend tells us you need
to have a way to actually check if it's
supported in our browser and in CSS if
you didn't know there is a support API
you just use this add support and after
this you just use DC just CSS variables
it's quite quite easy to see that
actually checking here is CSS variables
as I apply actually available or not in
JavaScript is the same alignment not the
same but there is API CSS dot supports
you put the same CSS very CSS variables
and then you can check if it's supported
do some something one otherwise do
something else and here it is
let's see tomorrow we starting using CSS
custom properties but you always read
the previous code which actually was
generated but by sacha what to do don't
generate another CSS output with CSS
file like without serious custom
properties addition is easier previous
one now you have another one which is
called with CSS custom properties and
check if it's supported just remove
previous one load another one so kind of
you can do things like graceful
degradation you can do progressive
enhancement whatever one because you
have this api's okay very know that all
this was implemented in one year because
of such goodwill such fast
implementation of course there were some
constraints and constraint is let's take
a look into the specification
animatable no custom CSS properties by
default are not typed which is just
browser when you use some CSS custom
property it goes to the declaration risk
if the say put at the same place doesn't
it doesn't care if what type with is
arranged and just read huge and in
result they are not animatable let's
take a look about comments in the CSS
I'm sorry in this specification CSS
custom properties can even be
transitioned or animated once since the
browser user agent has no idea what type
it is it just flips at 50% what it means
like you saying I want to change my
color from green to red and in one
second I want this wonderful animation
and actually what browser says like okay
I have no idea that some property should
be changed from this to another one in
one second so it's half a second it will
be changed from property to property B
to property B which means like flips at
50% here what can we do and why it's
important why animation import is
important actually when you listen music
you don't hear media you don't see this
musical notes you don't care you just
listen music when you see the light you
don't care it's like particles or
anything you just see the right yeah and
let's take a look something's wrong with
this yeah what if I do here Oh much
better
cool so actually animations are quite
important everything is smooth in our
life awesome so
we need some types why we need paths in
our CSS code because currently you see
it's IDE is your browser
it's the tools in Chrome so it's only
browser knows about your property what
type it is what can be put there you see
I don't even start typing like greet or
anything browser immediately knows okay
it can be used this way it can be it can
have some particular values if you put
font size read browser immediately say
it's I'm sorry it cannot be
done because I don't I have no idea have
some constraints for the font size
property the same you see immediately
applied in your dev tools so if you
provide types procedures custom
properties not just things that it is
now immediately we have support and
validation and IDE syntax highlight
performance update and of course then
the browser in the tools can you imagine
like immediately saying my custom
property is the number has only put the
read just your photo your the to st.
half no no it's not true the same you
can apply the interest compiler so a lot
a lot of abilities and you will say oh
okay actually should be invent types in
CSS and if you're not sure let's take a
look so it was invented in 1996 so
levels of cascading style sheet and you
see actually to reduce their units
length units percentage unions colors
URL so actually it was invented oh my
god my money years ago
so in general let's take a look you know
that for text align you have only
dedicated values like left right center
justified everything else actually is
not a valid text aligned value for
padding top you can use lengths
percentage anything motive or some of
these values so you already know as a
developer if your CSS developer already
know some types available for this
properties but not further of them yet
border is like length six medium and
some apply it values there so we are not
inventing types we have them already in
specifications now we will just use them
and we know how they are code and here
we come to CSS Houdini group so CSS
Houdini task force what it is so one day
let's say that
the story all the browser developers
understand they want to actually move
forward developers asking like to expose
data currently we have a lot of API
which is hidden yet you saying like
display flags and magic some some magic
happens in your browser you have no idea
why but it works you cannot control on
jealous if you always just use some
mutation observer anything to actually
check if something is changes in your
component so the main idea of this group
was just exposed API which previously
was hidden by the browser so it's done
not only by browser the major browser
developers but also HP LG Adobe IBM and
other companies out there and you see
it's not it's not just only group
dedicated developers and where all the
browser's present actually it's in
general if you see from another point of
view it's bunch of specifications bunch
of specific instructions are available
some of them I bought it as custom
properties you see properties and
release you will see this type of object
model and something about jelastic like
worklets CSS layout paint animation work
list api and something different font
magic sit tight you would not believe
but it's quite hard actually a
successful developer you notice that to
answer like how big will be letter or
the text in some particular situations
that's why we use with this vertical
written magic or anything like the isis
and CSS parser api so actually it's a
group which works on the oldest suspect
and where all the browser's are involved
which means actually it's moving forward
that's why we already have this in some
of them let's take a look into the
source to specifications
they're related to CSS custom properties
original how work and the everything
about them so CSS today to read CSS and
Java if you doing very strange things
and I do it as well like when you read
something like
translate 3d can you imagine if you hear
this CSS property and you want to take X
Y is that what you do enjoy ask it okay
looks like it should be that some : here
it should be some translate 3d possibly
it
might be pixels it might be percentage
and usually such a quote just takes I
don't know about not dozens even
hundreds line yeah
so this API this specification is
actually to answer the question like how
simply to read something from CSS how
simply to write front into CSS like okay
I want to get the value of font size
here it is like really twelve type
pixels and the same from JavaScript to
JavaScript you can just do some
transformations and you can send
something from JavaScript or CSS just
generate this transform translate three
you say in like new it is transformed
really new translation blah blah blah
and all this already available in my can
be poly filled in experimental insert in
stable Chrome behind experimental web
platform teachers flock so we can use it
today and it can be easily easily poly
fueled and here is the main treat for
CSS custom properties this six lines do
all the magic it's actually essential
part it's everything mostly what is done
by this specification
now you have ability in your JavaScript
again it's available in a chrome stable
under the fact to say I want to have
custom property which is named what like
this and provide actually a type for
this if it's color if it planks or
anything else and it will give you all
these additional things like LinkedIn
browser support everything but which
I'll discuss it and you can now you
control if it's inherited or no
previously you did know if you did not
have any control just to say it it's
inserted or no you need you just know
some property sign shorted and some no
and initial value this is quite
important for custom elements custom
elements it's essentially your
components in the browser like you do in
angular in react so now you have this
ability to provide types to CSS custom
properties and today we have a
discussion in in github if you want to
provide this in CSS because this custom
properties actually belong to CSS so
this is available it might be develop
that might be available after a while so
and why you ask like why come on
why it's important
once I left my laptop this one or did
the previous demo to remember this demo
which I showed you where I changed it
was out to change of colors for the
application and actually I went to it
something or anything in half an hour I
came came back and I realized that might
actually laptop about this charger so I
did this fixed lines for this particular
property and you see the difference
previously to Avenger than just the I
did Chrome demo you see in chrome like
memory usage from it divorce decreases
using these six lines from 15 let's say
from 15 to 9 megabyte and you see CPU
usage actually decrease it twice at
least it's nice after that my laptop
actually discharged it in one hour so
I'm happy about this and so it's very
important for your performance for your
memory usage for battery for all this
stuff for your site and syntax you will
say okay now I have to learn syntax
first of all you know all these things
like colors numbers you see I just put
it in small text so you don't need to
learn this X is always like color image
percentage or anything and here are the
tricks of course of course you will have
some actual combinations let's say you
who we want to say its length or
percentage like you usually do for
perineum you just use or like and it
appeared to be very important to say the
browser do you want to actually use
culture or no other if you don't want
browser will do even more optimizations
so you give you your properties you will
be even more performant if you use these
combinations of course so if you want to
use calc instead just use - and of
course you can see say I want only
dedicated values like my text edition
will be like big or bigger everything
else is actually not correct value
length sometimes what you do for margin
like 10 pixels 10 pixels 10 pixels sam
reny array of playlists it's actually
lengths lengths plus you see done here
I'm sorry
we already how to closes my bed and vary
the risk rethinking all this once again
if previously it
was not animated as browser didn't know
about the type currently we invented not
invented but reintroduce it types in CSS
and now they should be animatable
let's try the main question so if you
know what is CSS animation I already
showed you them also you already know
that
actually it can be animated animated all
the treat wish I did
previous time here you see the six lines
currently it's five which says I have a
size CSS property which actually
percentage and initial value is 100%
after this my CSS native I'm sorry
animation starts work because I use size
variable CSS custom property which I use
for it after that I'm doing the in CSS
just animations usual CSS native for
animation like in some particular
keyframes
it's another values done CSS animation
done cool what else we can do if you
know what is it no suit is a web
animation okay okay so currently the
same engine the same actual animation
engine in browser so this should be
trigger ball from JavaScript so you have
CSS I'm sorry you have CSS animations
you want to have JavaScript animation
what you did in JavaScript in the jQuery
in other frameworks just to animate from
property to property be to make it be
here or something like this here is the
demo but in general essentially if I
have I love rabbits Oh rabbit move let's
say I want to move rabbit from translate
X to translate X different value what
you do in CSS like this zero value one
solid in JavaScript you do the same it's
native API currently it's polyfills you
can use today in your browsers like
change transform from value a to will
you be the same if you want to provide
some options like how much time should
it take one second and for example where
to stay forward and of course some
pigeons how it should be animatable in
CSS you do this line in JavaScript you
provide some options it's quite similar
to what you did in jQuery correct and
let's take a look if you can use the
same animation land animation figure the
same animation engine the from
JavaScript so
I want to move on my rabbit from
position 0 0 which is here somewhere
here let's take a look on animation it
was moved but did you see any animation
I didn't so it was apply this flips at
50% for the plate after the halwa second
rabbit just moved so what we do you see
I'm animation translate X and translate
y property so all together let's put pin
eat CSS register property and just
provide like translate X is the length
I wish actual initial value is your arms
raised I have to I have to trigger code
pan so translate X and translate y
currently just shift register it from
JavaScript and as the only after that we
start moving applying this animation
well it starts morning which is good -
let's do the same format guy we will
move him here Ellis goes somewhere else
you can continue this demo the main idea
this 6 lines give you all the control on
register and not only just to say
browser she does my touch all
immediately all your record system
starts work in CSS JavaScript animation
everything is available immediately so
let's summarize both VDT CSS introduced
the CSS custom properties so now you
know how to use them and let's begin you
can use them now you can separate the
values you can simply have change some
particulars values without copy pasting
the code and many many other abilities a
cascade and blah blah blah we introduced
CSS property types in general so now
your browser know everything about this
custom properties and make them
animatable
performant very performant and
everything else what we have enjoyed so
far
type it object my model a the API
something where we can read CSS
properties and try to this property
using normal browser API not something
like related strings or anything between
CSS and JavaScript rich CSS object model
there and there is a browser so what is
in the middle what's going on here
browser rendering so let's take a look
into this browser rendering together so
what we have here
HTML just
GSS you were just actually interact with
these guys and you write HTML and
browser starts parsing your HTML Java
skit it goes together to the document
object model CSS applied the earth style
engine and this is called CSS or render
pass everything should be rendered in
your browser yeah then goes to layout
layout means okay somehow my actually
page looks in the browser so let's put
all this together layout all these
things and after that all the way all
the way out so how your page actually
looks starts being actually painted yeah
layer by layer by layer your browser
just paint all the things after that
there is a compositor like compositor
first of all knows that you want to see
only part of your screen and in general
the style start to do some transforms or
anything else usually on your GPU so all
this usually on CPU this is part of on
GP on GPU on your video card so it's
called pixel rendering pipeline how your
HTML Javascript CSS become to be pixels
on your browser like style change
everything else triggers layout pane
composite so these three stages actually
a code during browser rendering and this
all previously was internal browser
engine you had no control no bility to
work with this part
absolutely so the main idea of CSS
Houdini group to expose and give you
both this API somehow will give you
ability to interact and work with them
so Alex Thomas one guy who actually
works in Google on this part and he says
that if you want some code to be trusted
code to be executed during these parts
of scissors can you imagine actually how
often it can be triggered so let's take
a look he says like it's probably not
unrealistic to assume that some of this
code fragment will have to be run every
single frame which means every
millisecond every microsecond maybe even
more so what we can do in this case so
we have the browser rendering we have
some piece of just if you want to
actually execute and you don't want to
block user UI correct
today for such piece of code we have web
workers so they call this Portland and
they have a separate UI thread so your
JavaScript code code will not block UI
they don't interact with Dom directly
which is actually expected and limited
API called limited because it's not
limited because you actually have
explicitly say I want to interact this
property is that property or standard so
it's not limited it just very if you
have to be very careful because it will
be executed very often and today we have
actually equipped six plus the seven bla
bla bla you have classes so essentially
it will be agnostic classes this code
name my method may be name what method
you will see the code which is actually
close to what you use in this use in
your code bases Bible Nova so your code
will be triggered when needed and
possible let's take a look into the life
style a life cycle is like you in
registering your module entire script
the same what you do with Webb Porter's
here and actually your boomer it's
actually essentially the ACMA script
module you'll just executed which is
agnostic plus and every time what's
something apply it like this rendering
plot pass like paint layout or actually
composite it will you'll be executed and
return some updates to the browser and
actually when you close the page it will
guide immediate them so this was fun but
enforces what it is this defect you can
easily achieve using paint portlet so
the pain stage of your CSS is
responsible for painting background
content and highlight all the box which
means like custom image can be paint on
every browser protection you just change
something you just change the content of
your box or anything paint paint paint
every time browser actually does the
paint so what we can do here you can do
any just background image you can
provide some border image list style
image you can do this from your
JavaScript immediately Santa like this
let's take a look into the code so let's
say I want to generate for the bruh
so I want for my box to add a top border
like this magenta I'm saying like border
trophies it's my custom property stem
which or after that will be
use it as your bridge as I say it as
your transport so now from CSS you
saying how big you want to be this
border top piece
it's your custom proposition now
actually all your dreams to came true
which means like now you can custom
properties become really custom you say
in browser how to work with your
property and I'm saying border image
will be actually a paint 20 the direct
official we call our plane for clutter
I'm registering this property same it's
a number so we already learned in this
API how it works and why we need just to
make this bridge work and after that I
made in actually my forked in JavaScript
like read border color DOJ's which
actually is here here we have egg mask a
cloth which is border this is one static
method which actually risk I want to get
border top fees you see borders of these
came from here till here and there so
CSS register JavaScript and paint this
code you'll be executed every time every
time in your browser like when you do
some changes or anything like you have
canvas here exercise or geometry on the
element and style map all these styles
which actually we use so here I use like
okay give me the width of my element and
give me the border top tips this is
after that I'm doing canvas if you know
what is canvas in task if you just
simply the draw a rectangle and shield
is magenta done so what can I achieve
doing this so if you ever ever did any
CSS policies you know why it's so
painful so currently
multiple border per color is actually
available as a specification but non
browsers are implemented this what I
want to do I want to implement this and
it would not believe but actually using
paint API you do this you see here it
was triggered so far six times my paint
API this code kind of simple similar
code to what we saw in previous example
I've worn borders of peace be bigger
even bigger immediately see everytime
browser execute your code and
immediately does it I don't want threat
I want I don't know gray immediately I
don't want border top immediately okay
I've
go even fuser I want to provide mania
blocks like this what we see immediately
changes immediately here so you can do
real CSS polyfills now not something
like set interval not some another magic
not mutation observers but real cold you
can apply other elements like border
usually the border you relate some
background organism and browsers are
smart here is the demo in chrome you can
simply say gee so me with this green
highlight every time when you do paint
so every time on the in this stage you
see it is called our code so just
another property and browsers are very
smart they do in repaint only when it's
really really needed you see here only
this particular poor part of the
application was painted for example left
side you seem let's take a look so when
you change the size of the right guy it
will be change it only this part and
everything related here but this part is
not touch it so none no changes here if
you do something with less part
everything is changes so they trigger
your code when needed and when actually
available layout portlet if somebody is
hurt or you all know what is this a grid
layout we waited even flexbox we waited
for them for three years can you imagine
tomorrow we just invent some another
layout and actually we want to make it
work in the browser using CSS collinear
achievement you can make it work today
it's JavaScript so that you can provide
your constraints see how your layout
will be just working like slightly box
or grid and it will immediately work
after that in your CSS you will say like
display layout centering like the I
don't know vertical horizontal center
about everyone so one day you'll have
this ability like to use some generator
Visio constrains in JavaScript and do
something else like math only today to
do so especially out you actually use
some JavaScript libraries or the code
and case variant performance but we loud
and it was about layout and the
one is composite composite stage as I
said it's mostly on your GPU so layout
and paint usually on your processor and
previously it was called I composed the
composition board currently it's
animation work it the code is in sync
with compositor thread so when it come
comes from layout paint composite
actually your code will be executed so
this case usually it's for some
particular work this Scrolls like
animation this scroll effects like
sticky elements smooth scroll animations
or scroll scroll up bar which you
usually see in Chrome on mobile so volt
is not noticeable here in actually
stable Chrome if you know what a sticky
header stick position sticky is
implemented using this API so which
means it shows how performant it is how
stable and actually it means that can be
used it can be use it now because even
polyfill is available so this guy you
can start using compositor only
properties so if you know two properties
like opacity and transform is the
properties which don't trigger all the
stages in the rendering so if you change
opacity all transform all the stuff will
be done on your GPU so no way out don't
paint only composite so usually you can
also will change and browser immediately
you'll say AHA I will go and provide a
new layer on the GPU which will just
make this work even faster so yeah
straight by the compositor tread and
available is the police'll so let's take
a look into the demo the demo is a usual
one you know when you still have Bill
Murray when I scroll down I see the
scroll indicator you see here here it is
oh sorry
Oh hopefully so um but idea
sorry guys
Hopa little stop sorry I have to kill
this application otherwise it will start
here for our apologies
it is called mouse pose and I didn't
know the texture till they're so slow
sorry for this so actually this scroll
position is quite usual effect in any
you I wish you do and you can achieve
this using an animation worklet I'm
sorry it would stop
okay cool look slightly to top it
I'm sorry I apologize for this so let's
continue this stop position indicator is
quite popular here let's remove so how
we can achieve this using the
composition of work that you can do this
is in place so you created this line and
you just moving this to the left using
just left might have - 100% so it will
be just actually the same line but
hidden yeah and when you want to move it
you will just use transform to move it
actually bigger bigger and bigger you
see what I'm doing I'm just hiding this
line and say like okay there is a CSS
trigger for my composition worklet like
it stays the trigger scroll position
voltage every time when some composure
composure composition is happening from
my blog and this is my reference for
this particular blog after that as we
already said in Java if we add in a
module works in JavaScript let's go to
this module the same like here is my
worklet which I already use it in CSS in
this worklet as you see Sigma script
cloth the same like all the scroller
element references everything but with
code like this in CSS apply my
particular code to this and they don't
want to read anything from there you
want to actually assigned transform
values are and let's discuss this other
properties are so this animation works
it how it looks how it works and if as I
say it is poly shield in this two
methods like timeline and saying I want
to listen scroll I want to listen
vertical scroll and which means like
okay when you scroll the page your
scroll will be changed from 0 to 100
percent after that I'm just using this
you c parsefloat and multiply it to 100
which means like it will give me from 0
to 100 percent after that I use our our
API to to send some data from CSS
abrasca to CSS which is a type of object
model I'm saying like CSS translate just
generate
actually I'm generated this line in
season you see translate transform sense
is 3 and the X just move this line a bit
fuser which makes it poke you see I'm
scrolling down and
immediately just under my x value is
changed which actually makes the demo
work so previously you had to use some
collab rare or innocent now you first
this particular this particular worker
portlet which will do this for you for
free entity of the super performance
will be triggered only when it's needed
and you can go even fuser
both if I just don't want to listen all
the scroll but want to provide some
options there are many options there but
main idea just like I want to say like
670 / 5 pixels in my 100% and it will
give me ability to create some another
demo here it is so this is the damage
here is my Twitter feed and this is
particular particularly mine custom part
Twitter is very good to provided headers
here they always do some power magic
transition there or anything I just use
it one of their transitions you see I'm
just scrolling down and my actually
avatar goes up and this user information
actually appears here so it's a it's
done with this property I'm saying like
when it goes here let's just move here
we just animate on edges only which
makes volume here it changes and let's
take a look how actually works you see
and this is done using transform and
title so you know separately to make
sure that a you know how this works when
I scroll down it immediately moves there
is always a question like how did you
did I achieve such an effect very easily
because we have CSS in CSS you see when
I doing this only one class has changed
and how it works is actually here world
you see I'm changing only one transform
only one CSS property does all this
magic transition actually adds this
animation so you CSS and use all the CSS
animation worklet in your code to make
any additional wonderful effects so
let's summarize all together edit today
we'll learn it a lot so it's a good time
to start using CSS custom properties
because it's available can the police
you can be policy with these other
things and yeah just release time you
can register custom properties from
jealous if it's very good my exam
performant but break browser work is
this in a proper way and actually you
can do some progressive enhancement
using this like when it's available just
do it but it's not available okay no
good things like you can start using
this animation work it because it's
available via polyfill yeah so it's
police field and bright future you can
just enable experimental web platform
feature in plug-in from and just start
playing this print portlet and of course
you can stay tuned to the CSS Houdini
group specs like work lately out for
matrix and type of object model and yeah
you can follow me actually on the
Twitter to let a very you can always
know what is the latest state what is
the new additions in the browsers and
everything like this this slides
available online you can play with the
code you can just enjoy this and you
always know where to find me the Twitter
just pink ask me anything you want so
thank you much for your attention
Cheers and now it's time for your
questions because here we discussed a
lot of this so yeah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>