<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 2 War Stories - Duncan Hunter &amp;  Adam Stephensen | Coder Coacher - Coaching Coders</title><meta content="Angular 2 War Stories - Duncan Hunter &amp;  Adam Stephensen - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 2 War Stories - Duncan Hunter &amp;  Adam Stephensen</b></h2><h5 class="post__date">2017-04-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OF8cxc5w4A8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we're here to talk today about
angular 2 war stories so what we're
going to do is share with you our
experience is about building and
shipping angular 2 apps into production
now a lot of war stories talks about
what people don't like about a framework
or the problems they have so we're not
going to stand up here and complain
about angular 2 today though because we
actually love it so what we want to do
is share with you what we learned along
the way and our goal is to save you time
so you don't have to go through the pain
we have get you asking the right
questions and get some answers out to
you so I'm Adam Stephenson I'm a
solution architect and the general
manager of Estes W in Queensland and I
specialize in shipping enterprise web
apps and I've been building angular 2
since it was in alpha and been working
on dotnet core since it was indeed are
so I've had a pretty fun year in a bit
everyone my name is Duncan I work with
Adam in Brisbane Australia as well I'm a
software architect there and one of the
mentors at five boot camp online where
we teach people angular and I've been
really lucky over the last couple of
years to just pretty much only do
angular 1 and 2 all in typescript about
a dozen projects all in production at
the moment and we've had a you know a
really lucky chance as well to go around
doing a lot of teaching we're probably
taught about a thousand people angular 2
now especially across Australia and we
need to do frequent code reviews and get
into conversations with people about
best practices and stare into what other
people are doing and what we're doing so
hopefully we can share a bunch of that
that kind of experience with you today
so what are we going to cover today
we're going to talk about what is
angular and why you should care about it
we're going to talk about you know
angular 1 and in the upgrades paths to
angular 2 we've talked about module
loaders and build systems about
typescript and IDE choice we're going to
cover CSS frameworks and widgets which
isn't actually as simple as it should be
and where the rubber really meets the
road is we're going to talk about
observables RX jayus and redux and this
is where most people find the most pain
when they're getting into angular 2 so
hopefully we'll help you out with all of
those things so what is angel 2 and why
should you care Before we jump in and
talking that Angelo's one take a walk
down memory lane of
putting applications in the browser and
all kind of kicked off with javascript
in 95 which was supposedly written in
about two weeks which is kind of funny
because it's now kind of ruling the
world and then in 2002 we got xhr
requests from the outlook team at
Microsoft which was pretty interesting
because it's the first time we didn't
have to do page refreshes to get data
and then 2006 we've got jQuery which was
the first time we saw people like
Microsoft and Apple and Google all
agreeing to use same library rather than
rolling their own 2008 we got the chrome
browser and the v8 engine things got
faster people getting more ambitious
what they could do in the browser 2009
we got node and we saw JavaScript on the
server but more importantly we saw the
node package manager which is kind of
what we all use now to manage our
packages on the front end we got
knockout in 2010 but that's been knocked
out and then angular came along and in
2010's now like seven years old so they
learnt a lot being the most dominant
framework over the earlier part of that
and a lot of that kind of culminated in
angular 2 but then we saw reacted the
scene in 2013 and that was really
popular and still hugely popular we got
typescript in 2013 but that was only
really cool for the Microsoft kids and
none of the cool kids knew about it
until angular announced they're going to
build angular 2 in it and then all the
cool kids thought it was brand-new and
now they like it and 2016 we got angular
2 and we saw JavaScript's like es6 the
latest version of Java scripts become
kind of widely adopted and it's like the
biggest subject for the language in six
years so there's a lot of goodies in
there what you can't see on the slide is
all the JavaScript churn and you know
it's just kind of come to that coining
this term javascripts fatigue where no
one person can say on top of everything
and there's like broccoli and branch and
go up and grants and sausage jeaious or
whatever and there's there's a lot of
stuff and you know it's it's hard to
kind of keep up with all that stuff and
it continues still there's a lot of
chance does this make up such a joyous
wasn't in practice hey it's not called
angular 2 anymore so I've been saying
angular 2 a whole bunch that I've just
decided to drop the version numbers from
their name they're going to take on
board semantic versioning we're still
transitioning like everybody else oh
you're still here i'll say angular 2 a
whole bunch bet they want everyone to
now just say angular not angularjs and
which is good it's going to be a little
bit more evergreen
hopefully there won't be as many
breaking changes and we won't have this
kind of drama that we've seen going from
version one's a version 2 over like two
years and all this in a burgeoning
issues so it's just going to be angular
and we're going to feel a lot more kind
of version number changes so ankle is a
JavaScript framework right well it was
the when when the Google team released
the first version of angular they they
said it was a superhero with JavaScript
framework the ideal is it's going to be
the best of the best JavaScript
frameworks but then when they release
angel or two now they say one framework
mobile and desktop much more ambitious
goal what they're saying is what you're
going to be able to write an angular app
and use any backends you want and now
not only you're going to be able to
build web apps but angle is going to be
the best choice for building mobile apps
for iOS and Android and you're going to
be able to use to build desktop apps for
linux windows and OSX so that's perfect
you know that's pretty ambitious there's
a big problem with ain't there was a big
problem with angular 1 if you're trying
to build really big complex apps it was
slow if you tried to run it on
underpowered mobile devices you hit
performance issues so a real focus of
angular 2 from the team has been getting
great performance and they've done
really really well now we've got
optimized code generation so your HTML
templates are actually turned into
highly optimized JavaScript there's
Universal for server-side rendering and
SEO so now the first page load is
blindingly fast we've got code splitting
so unlike in angular 1 when you load the
first page it's downloading all the
JavaScript now when you load the first
page it just downloads the bundle of
code you need for the first section and
as you navigate around the app it'll
actually just download the java script
as you need the real reason i'm a big
fan of angular 2 there is the
productivity you know I'm hands on tools
during the day and I run a couple of
teams and what I care about is adding
value for our customers and angular 2 is
amazing for that so the component model
is actually makes composing your
applications really easy the template
syntax is really simple but very
powerful and we've got typescript now
which gives us you know strong typing
for our JavaScript and the angular see
which we'll talk a lot more about it
gives us code generation but the awesome
thing about it is it's a wonderful drug
production build tool angular 2 is also
a complete frame work out of the box
you're going to get routing testing
internationalization zanimaeshsya cess
ability and a production build tool so
this means you're not having to go and
find all of these components and wire
them up together they all come out of
the box and they're all updated along
with angular so they all say in time
this all say in sync which is great
angle is also the most popular framework
what we've got here is a google trends
graph of the most popular front-end
frameworks we can see it's really a two
horse race between react and angular and
angular is much more popular but you
know we're not in high school anymore so
why is popularity a big deal well the
most popular frameworks there's more
blog posts about them and more courses
about them so they're easier to learn
when you get stuck there's more stack
overflow answers there's more libraries
of working with them okay they're also
kept up-to-date and they're updated more
regularly okay and that's you know
angular 1 was it you ziam is being used
in production for seven years that's
like 140 years in JavaScript framework
is so let's have a look at what some of
the architecture around your to and
we're not going to spend too long in
this but at the heart of it you've got a
component class and this is where you'd
put all your logic that will drive your
HTML templates and on top of this you'll
stick some metadata and this metadata is
what lets angular know that this is this
component classes an angular component
and it also wise up your component class
with your HTML template and they're kind
of married together in that way and you
could call this whole thing a module so
you'll be able to export this from a
file and then import it into another
file and share it around and if you have
properties and functions on the
component class you want to share then
you can do event binding to be able to
get access to those in your template and
if you've got a also property binding
and if you've got events that are raised
on the template like a button click then
you can do event binding to be able to
listen for those in your component and
if you've got other directives or
components you want to share on this
HTML template you can do that and if
you've got reusable logic you
stick it in an angular service and then
use angular's dependency injection to be
able to share that reusable logic across
your components once you've got one of
these components you end up with two
three four lots of component to end up
with like a component tree so the top of
that component tree you would have
something like an app component which
really would just be for initializing
your application and then next up you
might have something like a to do
component here in red and it's really
just a container component that's about
getting the to do's and showing just the
title it doesn't really have much more
responsibility but it also is the parent
component for to child components in
this example so imagine you have it to
do a list component it's just
responsible for getting to do's and
listing them on the page and a to-do
input component that's just responsible
for getting an inputted new to do and
adding it to the list so you end up with
this component tree and it allows you to
do a lot of cool things with routing and
change detection and code splitting that
see if I mentioned but another big thing
that happened in angular right towards
the end of kind of beta and RC was they
release their own module system called
ng modules and this allows you to
specify basically a section of code and
we're going to talk more about it today
but say this section of code has these
dependencies so you could say the whole
thing is one big module but what you can
do as well as you can start splitting it
up and you can say my app module is one
one module or map component and then
this to do feature per se is another
module and right now you can't do very
much special with this as it is but if
you added something else like a home
component and you made that its own
module then you can say well okay I'm
going to just download this home module
to the page when I fire up the
application and all of the JavaScript's
in the other module I don't need until
later so don't bring it down into the
browser so the modules is a pretty big
deal and it changes the way your
architect your applications so angular 2
itself is really easy i never hear
anyone complain about data binding or
services or dependency injection or any
of that sort of stuff they all find that
stuff really easy but angular 2 kind of
forces you to confront modern web
development you kind of got to look it
in the face and you're going to have to
learn a few things when you do it you're
going to need to learn to use typescript
you're going to need to learn a bit of
reactive programming with our xjs and
you're going to want to have a really
good understanding of modules including
javascript modules and angular modules
and
module loaders and module bundlers and
we're going to talk a lot more about
that today so in summary what is angular
and why should you care angular super
fast it's arguably the fastest front-end
framework at the moment it's
cross-platform and you'll be more
productive with it it's a complete
framework its enterprise friendly in the
sense that you know a lot of our clients
we wear a Deb shop we build things for
people they come to us asking for
angular we don't have to do any hard
sell you know even in alpha you know we
had people from government agencies
wanting to start building in angular 2
and you're going to be more ambitious
which is really the big plane isn't it
you know you get more features with a
new framework and you're going to be
wanting to build you know bigger and
better things and you can do that much
more easily so let's talk about angular
1 and thank vs. angular 2 you know that
the choice of frameworks a really big
deal when you're choosing a new
framework for your team this is
something that your company is going to
be invested in for use to come and it's
more than that as well it's a personal
choice so this is you know it really
relates to your career this is what
you're going to be as special that this
is going to be your specialty even spend
a lot of time writing in this new
framework so framework choice is a
really big deal it's easier to choose a
new framework when you're starting a new
project okay but what if you're adding
what if you've already got a feature
what if you already got an angular 1
application and you're just writing a
new feature what are your options well
here's something I want you to think
about every line of angular 1 you write
today is technical debt okay so if
you're going to spend those next six
months writing angular 1 code somewhere
down the track you've actually got to
pay that off and you've got to come back
and you're going to upgrade that angular
1 code to something new so we really
make it a priority to try and minimize
the technical depth at where we're
adding into our solution and get writing
angular 2 as quickly as possible so what
are the options for doing that if you've
already got an angular 1 project most
people see the options as do a rewrite
or upgrade and let's have a look at what
the options around those are well if
you're upgrading that you can have
angular 1 and 2 in the same project
using something called the upgrade
adapter we really don't recommend it
though it that on the plus side it means
you can start writing angular 2 today
but it's a huge refactor there's big
performance issues and it's actually a
big learn
curve so there's not only you
introducing angular 2 and all the
angular 2 concepts there's additional
complexity and having them all merging
together what we think is a much better
option is to start writing angular 1
like angular 2 so if you can start you
can start type script today in your
projects you can actually start using
components from if you from angular 1.5
to know you can start using components
and add a module bundle or India system
so the benefit of this is its low risk
you're already learning the angular 2
concepts and it's a few a better faster
future path to rewrite the downside is
that you're not actually writing angular
2 you're just writing angular 1 using
angular two concepts it's going to take
you about three times as long to do the
migration but a lot of our customers
like this because it's the safer path
what I know most of you in here doing or
what a lot of devs like doing is going
getting approval for a big bang rewrite
now that's heaps more fun you know we're
going to go file new project and we're
going to go and rebuild the thing we've
already got and we're going to build it
in angular 2 we think that's a terrible
idea you know obviously it's massively
high risk you are now building a new
application and angular 2 while you're
maintaining your old application you're
duplicating code you've already gotten
introducing bugs as you rewrite it and
you're just recreating the problem you
know when your boss knows that in four
years you're going to be going and
asking for funding for another Big Bang
rewrite what we're trying to get people
to think about doing is rewriting into
smaller apps so an example of this is is
when you've got an angular one
application you extract out the
authentication and then you can start
building another separate smaller
application for just new features okay
so what so the benefit of this is that
means you can start writing angular 2
today but it's much easier to get
approval because you're not getting
approval to rewrite anything you're just
getting approval to start building new
features in angular 2 and you never have
to do another Big Bang rewrite somewhere
down the track you might start moving
the features and the older functionality
into new smaller apps
the downside is you're adding a bit of
extra complexity with DevOps overhead
and this can be as easy as so we've got
a big time shooting solution that we
worked on and it's got thousands and
thousands of line event at lines of
angular 1 and it's all sitting on top of
asp.net so the easiest solution for that
project was you know we added another
raise of you and we added angular 2 into
the project and the angular 2 sits on
top of another raise of you so now
there's a page refresh when you're
navigating from the angular 1 features
to the angular 2 features but we're
building modern software so we think
that's a much better option for people
it's actually been a really interesting
experience for me last year I had the
chance to work for a company and we
built three small angular 1 apps and
they're all in there all separate apps
deployed separately and there wasn't
DevOps overheads were there all service
and stuff but and they starred them all
to look the same but the position
they're in now is they're going to make
a fourth small app and they can write it
in angular 2 and they can do a
greenfield project and they don't have
to touch their angular 1 code which we
only wrote last year it's perfectly
awesome like it's nothing wrong with it
so now they can make the next section of
it all in angular 2 and they're not
thinking about rewriting or any of that
sort of stuff so it's an interesting
concept if you're sitting here at the
moment in your thinking I've got like
what are we gonna do with our angular 1
code that we're going to rewrite or we
can emerge them together you know it's
worth also throwing into the mix to
think you know is there a way that we
can just write a smaller apt to kind of
get around and do things differently not
end up in the same position so when
we're thinking about upgrading or
rewriting you know angular 1 is
technical debt it's three times the
effort to migrate slowly but it's a lot
safer but really we think you know the
best strategy in most of the situation's
we've come across is to start writing
new smaller apps cool let's have a talk
about module odors and build systems
which is a really big part of any you
know front-end application at the moment
and in particular for angular and so one
of the big problems we have angular 1 is
that we had their huge downloads yeah
forget the entire application into the
browser before you can start it up and
we handle these build systems with golf
would have a sounds online gulp file
that would crush down the package to try
and make it super small but us our apps
are still slow you know that we might
still have an application
you know what's on coming for a big one
to take up to five seconds to load that
initial state so this is where having a
module bundler can really help you and
it's a big transition from going from
one to two but javascripts used to be
such a simple world you know you could
really just get started with a script
one script file on an index HTML page
but the so the simplest way you could do
angular 1 today would just be to get an
angularjs power and a HTML file and you
can start going that's the simplest way
to do halliwell but simplest way to do
angular 2 hollow world at the moment is
to use the angular CLI which we'll talk
about later and you get this so this is
just to put hello world on the page I'm
not telling you this to scare you off
I'm just saying the state of affairs and
it's three hundred and fifty megabytes
and forty eight thousand files and all
of its in the node modules folder it's
your third party dependencies and you
can't seek 48,000 files in the browser
obviously but and a lot of people see
this thing I and you're less terrible
why would you want to use it but it's
the same state of affairs for any fun
tender you know at the moment you've got
lots of dependencies you pull into your
node modules but you need you can't go
through and cherry pick out of those
48,000 files manually and then go bundle
that up you need a build tool so you're
going to need to have a build tool to be
able to deal with this and to have a
build tool that you can use in the
modern environment you're going to need
to be able to declare everything every
file needs so you can go read through
all of that and understand what you can
take to ship to the browser and what
you're not going to take so the heart of
that is es6 modules and that's the
import and export statements so for
example you'd have this math CS file and
use this export keyword see what export
there's some function out of this file
and then you can use the import keyword
in another file and you can import that
some function so the cool thing about
this is once you declare everything with
import and export statements you know
everything this file needs and then you
can start doing some of these build
tools but one of the problems that
angular face near the end of their kind
of big journey into angular 2 whereas
you end up maybe having 20 of these
import statements to every little bit
that each file needed you know if you
use an if statement with angular and ng
if you need an import for it if you did
a for each with ng for you might need an
import statement for it so and this is
going to be a little bit crazy we want
to do some other things so they came up
with their own module system which I
first thought are you guys are in
same like we've got a standard we've now
got JavaScript modules but I've come
around to like it because it saves you
on a bunch of those import statements to
be able to say okay so this area of code
these are the dependencies and it also
helps you wire up that code splitting
but what's really good once you've got
all these things you can kind of draw a
dependency graph you can say this
javascript file has the dependency on
this type script file in this sass file
and this CSS file and so forth until we
build up this dependency graph and you
can pass that into a module bundle I
like web pack or the system JS builder
and it will then be able to bundle it up
for you so you could make just one big
bundle like this and stick all of your
javascript in there to send to the
browser you can get a little bit more
ambitious and start separating it out
into like a vendor bundle because that
doesn't really change very much for all
of your third-party libraries but then
you can start getting more advanced than
you can say okay I'm going to lazy load
this bundle or do code splitting and end
up with multiple of those so this is a
big part of the angular 2 journey for us
definitely is moving towards this new
way of bundling up our applications
versus gold the other problem is that
currently we compile templates in the
browser into executable JavaScript what
do you guys think would be the problem
with that you can help me out mmm
performance yeah it's going to be slow
and also you've got to download like a
little 200 kilobyte compiler into the
browser and this is what we did with
angular 1 that's how you know angular 2
for a lot of people at the moments
working but this big feature that
they've been working on that you can use
now I OT or ahead of time compilation is
about being able to compile those
templates offline so in angular 1 at the
moment what you do is you make an xhr
request you get the HTML template and
then you pass that in the browser it's
the only place that can work and then
you make some Dom and then you get your
executable JavaScript and you run it but
in angular 2 what you can do is in that
same HTML template that you can be
offline you can pass that with node and
then you get your executable JavaScript
and you can pass that straight to the
browser so now you don't have to
download this you know compiler and you
don't have the performance head of
having it there in the browser as well
so things get a lot more faster sister
really one of the two big features you
know for angular to this and the code
splitting that you know involves around
all their module system and the module
bundling that you've got to get your
head around so it's not the only thing
the aot stuff there's also inlining
modules
tree shaking and minification and
there's a bunch of stuff there and the
tree shaking is a really interesting
idea that you can kind of go through
your application and shake out the code
you don't need so if you're not using
angular router or you're not using the
reactive forms module from angular 2
then you won't actually get that pulled
into the bundle that you ship down to
the browser so that big emphasis on
performance so what you're saying is to
the able to ship my app I need to copy
fonts compress images let my typescript
compiler my lesson Sasson to see if
there's compile my typescript into
JavaScript minified all bundle it run my
unit tests and end-to-end tests and now
I need to run a ot compilation do tree
shaking and then build separate bubbles
that's a lot of work yeah so it's
getting really complicated time
consuming to roll your own build process
so when back in so my first angular 2
project was pretty cool I was doing
angular 2 and alpha and don't let cool
when I was in vita so that's a bit of a
and I was I was really proud of myself
you know I was a build tool ninja I
wrote this 800 file golf file to go
through and do all of those tasks okay
and you know it's how it's doing all of
that stuff but then we had a big issue
at the node modules folder so we needed
all of these packages and we downloaded
the node modules and there was forty
eight thousand files in that node
modules folder so when we shipping you
know shipping off to a test environment
was pretty easy you just copied the
whole app over there and it runs but
shipping it to prod obviously you don't
wanna copy all those files so we had a
file that just specified the files out
of node modules that we needed and just
those ones got copied across and there's
a few of you in the audience going
you're an idiot you should use web pack
and we'll look what we'll come back to
that but it was kind of a bit like my
first app it was kind of my first
epiphany and that's you really man
that's kind of the moral of that the war
story here is that you need to get your
head around module loading you know it's
not angular anymore where you're just
sticking a script tag on your index dot
HTML okay you you know your angularjs
has a dependency on 10 files and they
might have another dependency on
the 10 modules what you you really need
a module bundler that can do it Duncan
said and it can actually understand your
dependency graph and when you build it
can go out and just get all the bits
that you need and it can bundle them up
into the bundles that you need them to
do so that's a really important concept
we want you to leave and get your head
around and you know and we got around it
so we ended up going and we had our we
had the gold foil and then so we went
and got the system j/s builder and then
that actually went and analyzed all of
our dependencies and actually built our
bundles for us so but then I lit up with
like a 900 line gold foil you know and
everyone was going you know gulps not
the way to go there's better options so
we went and checked out webpack and when
packs an advanced module bundling has a
lot of other features as well and we
checked out the angular see alive which
is a command line tool that will also do
your production build now so gulp a lot
more work to use gulp and we don't
recommend it great like it's very
popular is node but it's not the best
tool for packaging your application for
the web web pack is awesome so web pack
has advanced module bundling it's the
most popular popular module bundler
around you can get it to do tree shaking
and it has really excellent plug-in
support now you know the drama you know
what happens with web pack though is
it's a big investment understanding its
complex and what happens on most teams
as they go you seem to be good at
webpack you're going to be the web pack
specialist so you're now the web pack
guy is there any web pack guys in the
audience there's a couple look being the
web pack guy into the coolest job in the
world but it's heaps cooler than being
the Crystal Reports guy the downside of
web pack is that you need a web pack guy
it is complex so then there's the Angel
of CLI and now the aid of CLI is a
command line tool that we can use for
cogeneration we can also use it for
generating our builds and it uses web
pack under the covers now which is great
so we can actually use the command line
to actually create application we can do
code generation and it will do our
production build for us
it's developed in lockstep with the
angular style guide so the code that it
generates is directly in line with the
the best practices of the angular team
recommend and it wise up your unit test
in your n doing tests out of the box so
we're big fans the downside of it is is
that while it uses web pack under the
covers you can't customize the web pack
build at the moment but that's on the
way so let's have a look at what the
angel of c allies like to use so i can
jump out and I can go energy new CLI
demo so ng is the command line for it
I'm going to do a new command I'm going
to create a new project and I'm going to
call my project CLI demo that runs off
and that goes in correct my project for
me you can see it goes to and creates
all of those files and then I have a
look at it in my IDE we're using visuals
geocode you can see I've got a full
solution here the first time I did this
before the sit like the angular was out
well before the CLI this took days of
going through following a hot you know
looking at every or all of the different
options out there for putting a solution
together warring up your end to end
tests around getting your unit tests to
run and doing a production built or this
is days or a week worth of work that we
just got out of the box is excellent um
so now I'm going to jump back to the
command line everyone in my terminal I'm
gonna change into that folder and I'm
actually just going to run ng serve
someone around the serve command that
kicks it off cracked my bundles I can
open up my brows that I'm port 4200 my
apps running pretty nice literally only
that much work let's say I want to go
and write some code so the angular CLI
has code generation now we've all been
promised code generation so who used who
got excited about MVC code generation
when that came out you know we've all
seen it and you never end up its wow
that's great and I doesn't work actually
for day-to-day life we use this all day
every day it's actually really really
great so if I want to do I'm going to
crap myself a new component i'm going to
call it the home component so i'm going
to do ng generate component and i'm
going to give it the name home so you
can see that's going to go through and
it's going to create the CSS file i need
the HTM
template the spec file which is the unit
test file it's going to create the
component class itself and it's actually
going to why that in to my appt module
as well which is pretty nice so i can
jump into my ide and i can see
underneath my apps folder it's putting
in the home folder and there's my
component so let that we do and then we
jump in and start writing the you know
it's all spect out and i can start
adding functionality into my component
here's the part about it that's amazing
though so the how easy it is to do a
production build so instead of writing a
900 line gold file I can now just go ng
build and if I just did ng build it
cracked me my dev build if I pass the
dash dash prod that's going to do a
production build for me and I can pass
it the dash dash aot parameter which is
saying do ahead of time compiling ok so
in one line it's going to go out and
that's doing all of those steps that
Duncan went through it's doing the tree
shaking and the ahead of time
compilation it's generated my bundles
and now I go in and have a look it's
actually compiled my whole application
and putting the dist folder I can take
the contents of this disk folder you'll
notice there's not 48,000 files there
you know there's it less than 10 files
there you know you've got your yeah your
fav icon you've got the index of HTML
and then you've got the bundles of code
so there's no HTML templates there
they've all been taken and converted
into highly optimized JavaScript and
that's what's going to be served as you
navigate around your app so i can take
that and put that on my web server and
there's my angular app it's pretty cool
so i'll call out here so if i go and
take that and run it up in the browser
you can see down the bottom here it's
downloading 457 k for the whole out so
that's pretty small especially when you
consider jquery by itself is 256 k so
this is angular the forms module are xjs
and the application and the teams
working on making it tighter so for the
performance is great a question we get
asked a lot is the angular CLI ready and
we had this is
real journey for us we've got a bunch of
war stories around you know what was the
bill tool to you know we knew that Golf
is wrong but then you know we're faced
with well there's webpack but it's
complex and the sea alive but it's not
ready a lot of people who understand him
a lot of people went investigated JSP em
because it was amazing in the way of the
future but it never got the popularity
so there was a lot of churn and a lot of
indecision about what people should be
using but we're really happy now because
we can you know we feel very confident
to tell people you should use the
angular CLI it's the if you're getting
into learning angular 2 this is the one
that's going to get you off the ground
if you're learning it really quickly
it's the most cutter ninety-five percent
of our customers it's the right choice
unless you know that you need customized
bills and then we're packs going to be
the answer for you so you check out the
angular CLI and if your project does
need really customized bill and word
packs the answer cool so let's talk
about time script in ideas you'd be
surprised that there's a bunch of pain
around this for a bunch of people so one
of the problems with large code bases
that are in javascript is they can
become unmaintained ball if you've got
hundreds of thousands of lines or you
like the azure portal where they've got
like a million lines of JavaScript that
can be pretty hard to maintain and a lot
of that surround the fact that there's
no compile time checking and it becomes
risky to refactor if you've got a
refactor avaria beloved files you don't
want to be the guy or girl who has to do
that based off string versus using you
know being based off symbol so this is
where typescript can really help i'm not
going to go into details about
typescript it's you know superset a type
superset of javascript and if you
haven't seen it you should go check it
out but it's the default language for
angular 2 but there's a couple of other
choices that you could use one of them
being just vanilla JavaScript is five or
six and dark but I haven't met anybody
outside of Google who uses dart so we'll
just focus on the typescript and the AR
six today so why would you want to use
typescript there's lots of reasons
they're strong typing but my personal
favorite is the refactoring and the
tooling like by far and away the thing
I'm most grateful for at work from day
to day is get and typescript
get because I don't stuff things up and
types good because i get to refactor
without being as terrified and also
angular is written in it actually ever
everything is written in it so all the
docs all the courses all the third party
libraries are going to be in typescript
so if you don't use typescript for
angular 2 it's going to be a fair bit
harder now the only I can't really think
of any reason why you wouldn't use
typescript for the reasons I've just
said unless you really had a strong bent
for your team to just be staying with
vanilla JavaScript but it's going to
work harder for it and i've only ever
heard one third hand story of someone
using javascript everybody I've met to
use typescript so another thing that's
surprisingly painful for people is which
ide you use and it's mostly around a
single idea that's caused the pain so
Adams a good one it's fast and it's
lightweight it's got a good plug into
tight skirts pretty popular visual
studios another one you could use but
surprisingly it's not so easy to
configure for angular 2 you know there's
you know there's been a lot of
challenges was getting it to not throw
errors on the new language features with
the typescript compiler getting it to
work as like a because it's just a
folder it's not a solution for getting
it to work inside a visual studio
there's problems for people I didn't
find it too bad but a lot of people of
you know really not liked it and we're
been involved with a government project
back home and they're building this
awesome angular app angular 2 for 34
inch monitors and they three front-end
teams they said that the start everyone
has to use visual studio and then they
still wins today even though they can
now use whatever I do they want about
using visual studio because I just had
so much pain learning kind of angular 2
and at the same time trying to battle
with getting it to work with their idea
while they're getting in a head around
it so that has led most people and I
think this will change it'll come back
round a visual studio will be fine you
know they'll it'll get easier but most
people I've met who do C sharp on the
back end now to visuals Visual Studio
code for all their front end and they
use just visual studio for their c-sharp
on the back end and they manage to ideas
that's definitely the case in our office
and it's all voluntary but that's been
the case so visual studio codes one of
the most popular ones you know it's fast
it's lightweight it's great for type
scripts and it's got a whole bunch of
plugins you can get but you need to
probably get about 10 plugins to make it
really really good
but the plugins are great so you can get
code completion in your HTML templates
which is fantastic you'll get warnings
when you misspelled a variable in your
HTML you can right-click or navigate to
the implementation of the function or
variable in the component class from the
HTML you can get auto import statements
while you're typing in your component
class which is great so a lot of these
kind of features are really really helps
if you're doing angular every day this
is a really good one the other one
that's really popular is webstorm all of
those kind of angular 2 benefits they
just have out of the box without getting
plugins so it really comes down to
choosing between these two if you're
going to write it day in and day out
these are kind of the most popular ones
to use so in summary for typescript in
ideas you should be using typescript
unless you've got a really good reason
not to which is not really many of them
and you want to keep your idea using for
the back end it like if you're writing C
sharp I'd stay with visual studio but
I'd probably think about using Visual
Studio code or something like it for
your angular code which if that's the
first time you've heard that idea you
probably going I don't want two sets of
keyboard shortcuts that's crazy but it's
what most people are doing at the moment
and it's not too bad especially because
the keyboard shortcuts are kind of close
so another big pain is being around CSS
frameworks and widgets and it's actually
a pain in the butt so if you want to
have a good UX you want to have a good
component library unless you love
writing your own date pickers and
accordions and those sorts of things and
maintaining the CSS across all the
different browsers and then when you
want to extend it you have to update all
those things in all your tests you want
to be able to just get a component
library for that and when you've done
six months or 12 months of using a
component library in your projects you
don't want to just pull it out and throw
in another one willy-nilly because
that's going to be a bunch of work so
you've got to think pretty hard at the
moment what you're going to use with
angular 2 and it's not necessarily you
know lots of easy choices around that so
we really feel the choices between these
two between using angular material to
which is components like you know drop
downs and so forth and accordions
specifically made by the angular team
for angular 2 and it's based on the
material design specification and then
the other one is bootstrap which a lot
of you would have heard and used which
since 2000
11 has been kind of the dominant way of
doing HTML CSS and layout and so forth
but there's a whole bunch of other ones
you know you've got prime energy you've
got polymer which is not necessarily
anything to do with angular that allows
you to get material like components if
you're going down the material road
there's ng bootstrap which was the most
popular one in angular 1 2 anchor for
the bootstrap directives and it's going
to be the most popular for Angela to
there's wijmo that kendo UI who are
outside there's devexpress they're also
outside in the hall the semantic you I
there's materializes vaden there's a law
there's fuel you are there's ng
lightning it and there's another one
there's a whole bunch of them but
basically they're all investing pretty
heavily because they got such a good
return from making all these components
for angular 1 but none of them are
really fully complete or being around
very long or have all of the components
from their other versions so it's a bit
of a pain at the moment deciding which
ones you're going to use and again
you're going to use them for a while so
it's a bit tricky but they're pretty
close maybe a couple of months and it's
not going to be such a pain so when
you're deciding between material to or
between anger between bootstrap which is
kind of the choices we tend to make
between we think material to is going to
be the default at the moment in angular
angular material one is kind of the
default for a lot of companies when
they're making an angular 1 site there's
full time angular members on that team
and they're moving pretty quick they
keep pace with angular and it's a
first-class integration so they're
really high quality the downside is it
doesn't work with bootstrap at all so I
had a student recently and they're
building like this project as part of
their homework to make it in material
and they thought they'd pull in a drop
down from bootstrap and the CSS clashes
and they think it's like oh but it's
just the CSS clash so it's you know
you're kind of going to choose one or
the other it's not like you're going to
mix and match between these two and it's
still in beta so they're moving really
quickly they got heat small components
they're very clear about this but I
haven't got all their components made so
there's no date digger there's no
accordion so you definitely have
experience with is obtained I went and
redid all about documentation for our
course recently in polymer and material
and I couldn't get a accordion all I
wanted to do was just have an expanding
list and I had to kind of roll my own
and it takes an hour but you don't
really want to do that if you want to
move quickly just want to grab some
component and just use it so that can be
a bit of a pain bootstraps awesome I'm
sure a lot of you have used
it's still what we do a lot of our
angular 2 projects emits well-proven
there's lots of component library views
for on that other lists that are you
know going to be supporting bootstrap
and there's lots of non angular
libraries that you can also use so for
example we built an angular 2 app
burning for a client that's used to
getting kendo grids in their angular 1
apps with us I mean I might not like the
kendo grids but they loved them and they
they wanted to have it look the same and
they wanted an angular 2 project but
there is no kendo grids for angular 2
yet or they weren't ready at the time so
we just use the JavaScript version which
we could keep the bootstrap styling from
so there'll be lots of kind of third
parties small libraries based on jQuery
and so forth that you might want to use
that style with bootstrap and that can
be a real benefit but one of the
downsides doesn't work with material
it's kind of a fork in the road and
you're going to have some sort of
dependency on jQuery plus or minus
jquery and definitely bootstrap CSS and
a lot of people nowadays have a real
bent against not using jQuery and their
angular code they think you're you know
terrible if you do which is I don't
quite understand there's lots of really
cool libraries to use with jquery but i
think a lot of people misuse jquery the
angular 1 you know selecting the dom
directly and so forth but these are
Connor your choices and you also got to
watch out that you don't choose the
third party like component library is
going to restrict you from using the aot
compiler we've talked about because it's
kind of all or nothing if one of the
libraries users doesn't support it you
can't run a ot so and this will probably
be only a short term and a lot of
libraries already supported that you've
got to watch out for that that if you
want to get that performance boost then
you want to make sure the component
library supports it at the moment so in
summary for CSS widgets and frameworks
we think you should be using material to
and trying to patch the missing
components with you know other ones
around the place like polymer and so
forth and then you can kind of add them
back in as they become available now
this is a pretty crazy idea in a bit
ambitious but it's the way we're trying
to go down a lot of teams are still
going to be perfect using bootstrap and
have a very good clear path on that cool
let's talk about observables are xjs and
redux and this is where a lot of people
find pain
I feel like sometimes it's a bit like
this you know the modern web apps are
composed of asynchronous events and
asynchrony can be hard you know you've
you've got a button on your page the
button called the HTTP request all good
until they use it comes along ago 10 NM
in a minute shoot off a whole lotta
requests you're in the how long they're
going to take you don't know what are
they getting returning so I think code
can seem hard to write hard to refactor
and hard to debug the good news is
there's there is help and if you use our
xjs it's really going to simplify user
it'll it's going to simplify writing
your async code so what our xjs is the
JavaScript implementation of reactive
extensions so and this is the part that
a real area that we see people need to
spend more time getting their heads
around our xjs and getting a really good
knowledge of it because it's really an
essential ingredient angular 2 so when
you're doing any HTTP requests you're
returning and our xjs observable when
you're working with forms it's an
abusing observables and you can like
this there's our X jasz built in all the
way throughout angular 2 so I said that
our xjs is the JavaScript implementation
of reactive extensions so reactive
programming is all about applying the
observer pattern to streams so the thing
that you've got to get your head around
is you're really got to get the observer
pattern and then you've got to
understand how that streams could work
with it so that's what I'm going to try
and tackle today and just kind of get
you on the right track so the observer
pattern works like this let's say that
we've got an array and that array is
important to our UI and when changes
happen to the array we want that to be
reflected in our UI but we don't want to
do polling ok what we want to happen is
is when a change happens an event is
like we actually receive an event that
there's hey this has changed cool so
what we do is we set up observers so I
can create an observer and I can say
this observer is going to watch for when
the number of items in that array
changes so I've got an observer with the
array and I've got an observer that's
watching
so what happens then is that then when
the number of items in the observable
changes and advantage emitted so then we
have event then emit the new value from
that observer what a lot of people miss
is you can actually have multiple
observers for the same observable each
performing different operations cool
that's all the observer pattern is so
now we're going to take it to the next
level low and we're going to apply
streams to that pattern so let's say we
don't have that array up front let's say
instead of how it looks say that instead
of having that array up front let's say
that the values are coming in as a user
hits numbers on a keyboard okay so the
user gets the number one a stream is
emitted we have the the operative
account operator for observable and a
new stream is emitted from that count
with the value of one so the user keeps
tapping 47 okay because we've got
multiple observers going on here so when
the seven comes in we're getting from
the count we're actually getting a new
value emitted of three from the way
we're saying we're getting a new new
stream that's emitted which contains an
array with the number 7 it so now and as
we go along and new values are coming
into our stream we're getting new
streams emitted from our operators with
new values in them cool they're the two
fundamental concepts around reactive
extensions so let's have a look at what
does that look like when we're actually
writing our xjs in our application so
we've got a text box here and we're
going to do a type ahead so user can
come along and they can type along in
the box there's a kind of the canonical
example so that search field has a value
changes property and that value changes
property is observable that's going to
omit the values that are coming into the
text field so what I can do to do a type
ahead is I can do a deep I can apply the
debounce operator and so what's that
saying is only a mentor news value after
500 milliseconds of active inactivity
and then I can apply the distinct until
chain
operator so I only amid a new value if
the value is different from the previous
value and then I can do the switch map
operator what you're saying take the
stream that's being emitted pass it
through to my album search service and
then then emit a new stream of HTTP
requests okay and the nice thing about
switch map is it's going to cancel the
last operation and so that's how it
actually we're writing much more simple
code when we're doing our xjs then if
we're trying to handle all of that list
and cream yourselves cook our excess
definitely a journey for sure I've
definitely found that process when
you're doing it you'll go off your go
watch a small tutorial icon that makes a
lot of sense someone gives you a perfect
example like steve-o just gave you and
then you go and you start doing it and
then you're like our man I'm having a
hard time getting this to work and then
you know you're trying to figure out how
to debug it you like our man I don't got
it I don't think I get it and then
you've got back to learning a bit more
and you'll come back to it and you'll
start getting more ambitious and stuff
you know be more declarative or the way
you do things like the type of head you
just saw and then you'll be like I gotta
in here you don't got it and then you've
got to go back to it and then you get
more and more ambitious with it which is
really good but every step that you get
more ambitious with it is every step
that you kind of crawl up this learning
curve and people actually draw like this
cliff with people falling off it as a
learning curve versus being like this
roller coaster so but it takes time to
do you really got to commit to it but I
think with the angular and our
experience and the people we've worked
with you know because it's so baked into
the the way that you use it now that
everything every cent you invest in
LearningRx jess is worth it it's not
like you do all this learning and then
you don't really get many benefits from
it so it really is a journey and it's
worth investing in so in summary our
Astraeus you know the modern web modern
web is asynchronous you know and our xjs
actually makes it easy so take some
effort to fully understand but it really
is going to simplify writing your async
code and you need to spend the time
because it's really baked into angular
to school so one of the the other
challenges in angular 1 and still in
angular 2 estate management for any of
these angular applications when they get
big
and it's always the code that I hate
writing the most toys my worst code it's
the most buggy code as the stuff we
argue on the most it's the stuff that
needs the most refactoring in the most
tests and it's just hard to do and often
when you've got an app that's got a lot
of kind of states that's shared across a
view you know it's the stuff that's the
hardest ends up being a big bowl of
mutable soup and you know it's not
always the easiest and it's the most
expensive code we write for our clients
and this is where the Redux pattern can
really help so I'm Redux pattern is a
predictable state management container
that you can use so I'm using it Redux
here with a little are kind of
referencing kind of the pattern of Redux
versus a big R which is like the library
from the reactor community for
implementing it so this all kind of
evolves revolves around this idea of
having a saw or a single source of truth
so it's just a single JavaScript object
that maintains all the state in your
application be that you know whether or
not the state of the menu is open or
closed or whether or not you have say a
company's array and that you want to
share around your application so that
all goes into the store and the store is
just read only and if you want to
subscribe to the store you can get that
state and pass it down into the abuse so
imagine you have this idea of you know
the state has a company's arraign it
you've got two companies and you want to
delete one of those companies in your
view what you would normally do is you
just jump into your component delete one
of those companies from the array of
companies and then update the view but
in redux you wouldn't do that what you
do is you dispatch an action because the
store is read-only and your dispatch an
action and then action would say delete
this company and the payload would be
the company you want to delete and this
wording is very specific to redux and
you'd pass that into reduces so reduces
of special functions and they become the
only place in your application where you
change state so you'd pass a reducer
this action a tallit company and you
pass it the payload of that company and
the Coosa state becomes mutable you
wouldn't just change that array what you
do is you'd make a new array minus the
company you want to delete and then
you'd pass that down into the store and
you'd get this unidirectional data flow
so when you take this Redux pattern
and you take Eric's jayus that Adams
been talking about and you take the
angular library and you mash them all
together you get this new library people
are talking about called ng RX so ng x
is a way of implementing the redox
patent in your angular applications but
also super charging it by using our xjs
and observables so people talk about it
like this it's a bit landish that RX
jazz is a tool and a philosophy that
will revolutionize your applications in
your development experience so this is
kind of a crazy thing to say and we
always joke when we go to user groups
that how do you know when someone uses
ng Rx and it's usually because they'll
tell you they're using it because people
get really excited about it it totally
changes the way you write your code it's
very very different so you you know
you'll never see a component with many
injected dependencies you know if you're
used to doing angular you might see
three or five or six injected
dependencies into a component or a
controller like router and your services
and blogging and so forth and you will
pretty much end up just injecting only
the store into your components so they
get much more simpler and you dispatch
actions against the store and you listen
for events you don't inject the router
and other things so things get really
really slim and understanding you know
where your state change gets really easy
because it only happens in these
reducers nowhere else so what would that
look like in an application so this is
something we give our students to learn
it's a CRM application we get them to
build it with ng rx so imagine you had
that list of companies I was talking
about I've got two companies here and I
opened up the mg RX dev tools so these
dev tools is a big part of the
experience and the reason you'd want to
use ng RX so you can see down here
highlighted and read all of the
dispatched actions since this
application initialized so the store was
initialized the router said that there
was a location change the default
location of this company list and this
ad companies action was dispatched and
then you can see the state of the
application on this initial load is just
all it has is a company's array with two
companies in it so with these tools I
could go and click delete and then that
company would be deleted because it
would dispatch an action of delete
companies you can see here in red and
then the state would be updated now you
would have a new array of company
is with one less company in it so this
is really good and it kind of gives you
a detailed view of what you can see you
actually get this log of everything
that's happening your application and
you can debug much easier and you get
this thing called time-travel debugging
so if I was to click play down here and
play back the state and you can do this
in these tools then the first state you
would see is that there is no companies
this is right at the very beginning when
you're initializing your app then as it
moves forward in the bar then the
companies now has the two initial
companies and then it moves to the next
state which was that you called delete
and now that there's only going to be
the single company so once you have this
then you can just go back and forth
through your state and every time you go
back and forth you can expand out the
state and you can see exactly what was
called exactly the route change exactly
the objects in there and you can see in
what order and so forth so dealing with
async code gets a whole lot easier so
using ngrick sore or should you not use
ng RX you know there's some pros and
cons you get easy state management you
get better tooling and debugging and you
get a much simpler build like the when
you go through the code base once you've
wrapped your head around all the new
principles then it's much easier to kind
of work with each component so you get
performance benefits you can implement
something a change detection strategy in
angular chord on push so basically
you've got a section of that tree of
components and you can say to angular
look don't do change detection on this
tree because I've got that covered it's
easier to test basically you only need
to test the reducers and because they're
pure functions they take in a list of
companies they pass out a list of
companies your test is basically just to
test that because if you test the
component you're just saying I'm testing
that the the store framework is work
using working and I'm testing that
angular's binding like the frameworks
meant to bind so you're just really
testing framework II pieces so a lot of
people end up just writing end-to-end
tests for everything and only writing
unit tests for their reduces so it
changes the way you think about testing
and it's getting a lot of traction out
of the last three big applications we've
been involved it all reviewed they've
all gone down the road of using ng RX
mostly for the performance but it's
another new thing you've got to learn
and if you're learning angular already
got to learn the modules and are xjs and
typescript and a bunch of other stuff
it's pretty overkill for a simple
application there's definitely a bunch
of boilerplate but you're going to end
up writing around it to write all the
reducers and action dispatchers and so
forth so if you only had 10 pages and
none of those pages have much shed
stayed on the map might be a bit of
overkill for you it's another dependency
and this dependency has a big impact on
the way you write your code and what
your team need to understand so your
team if you have a new team member come
on and they don't know the Redux pattern
there's a bit of time for them to wrap
their brain around it and you're all in
with our X Jess I think this should
actually probably be a green dot because
i really like our X Jess and I'm kind of
over that cliff hopefully so you're all
in you're going to be thinking you're
going to run into situations where
you're going to have to flatten out
observable of observables you're going
to be combining two streams and
combining them at the right time when
one emits not the other emits and
challenges like that which is not
difficult but it takes time to kind of
get your head around so in summary for
this section we think that you should
learn RX jayus to simplify your async
code not just learn it on the job I
think you should probably you know step
back and actually learn some of the
principles before you just hacking
through it and coding in all of the
stuff as you learn it we think you
should think Redux is great but we think
ngx is amazeballz and we think that you
should end use ng RX for your complex
apps awesome so where to from here well
if you are we're running a two-day
workshop at NDC many are in DC mini in
copenhagen on the twenty-second of
februari so maybe it would like to see
some of you guys there we've written a
book so come and grab a free copy of our
little book of angular 2 don't forget to
vote on the way out of the room that's
the color that you're chasing so in
summary what have we looked at today
we've looked at what is angular 2 and
why I should care about it we've looked
at strategies for upgrading your angular
wine application and the fact that if
your rock that you know riding angular 1
is adding technical debt we've looked at
the choices around module loaders and
build systems and the fact that you know
that's one of the big areas you've got
to get your head around we've seen how
typescript is going to help us we've had
a look at the best choices for I des
we've looked at the decisions to make
around CSS frameworks and widgets
we've hopefully given you you know
introduce you to our xjs and emphasized
how important it is to learn and instead
how great our Redux is for manage their
writing large complex applications guys
thank you very much for coming along
follow us on Twitter and hopefully we'll
see you around the conference</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>