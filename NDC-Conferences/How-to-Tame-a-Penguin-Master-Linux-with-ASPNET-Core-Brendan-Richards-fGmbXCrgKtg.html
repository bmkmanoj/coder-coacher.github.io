<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Tame a Penguin - Master Linux with ASP.NET Core - Brendan Richards | Coder Coacher - Coaching Coders</title><meta content="How to Tame a Penguin - Master Linux with ASP.NET Core - Brendan Richards - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Tame a Penguin - Master Linux with ASP.NET Core - Brendan Richards</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fGmbXCrgKtg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is brendan richards and my talk
is entitled how to tame a penguin why a
penguin
well this penguin here his name is tux
and here's the mascot for the next
operating system and the main kind of
theme of my talk is I'm assuming you're
a dotnet developer you're quite happy in
the windows world and you want to give
and it's a try so what I'm gonna try and
do here is give you the background
information some of the things that will
help you trying it out for the first
time and I really want you to get
inspired and go at home and try it out a
bit about me I am a solution architect
SSW based in Brisbane and in a previous
life I was a Linux developer building
websites I now build websites on the
dotnet stack so I was very happy to see
those two areas of influence collide
together with the cross-platform net
core so what am I going to talk about
today my first section is called may you
live in interesting times
it's a kind of little bit of history
where we were and where we're going
my second section is packages all the
way down so this example examines the
Linux architecture and it shows how all
the components fit together via packages
so to understand how to get software
installed onto a UNIX system you have to
understand the package manager system I
logged into a Linux server and all I got
was this lousy dollar prompt now it is
possible to install a desktop version of
Linux and just do everything by clicking
around various windowing toolkit s--
but at some point you're going to want
to jump into a command line to get
something done and as developers the
command line is awesome because if we
can do something in a command line then
you can script it you can automate it
you can what we're interested in is it's
pulling up lots of servers and
automating that process finally with all
that background information underway
we've now mastered packages we've
mastered the command line we're going to
go ahead install.net that's a really
short section and then we're actually
going to go ahead and build an asp.net
core web application so may you live in
interesting times I think it's fair to
say historically the relationship
between Microsoft and Linux
hasn't always been that great this is a
genuine screenshot from the register
from around 2002 and there Steve Ballmer
that then and CEO of Microsoft saying
Linux is a cancer to be fair he's
retracted their statements many times
over the years but we've moved in fairly
short space of time from this type of an
animosity through to the Satya Nadella
years with marks of part Linux so pretty
big turnaround so how did we get there
well for a long time maybe the last 20
years as long as I've been a developer
there's been a big fat wall right down
to the middle of a computing landscape
and on one side of that wall you've got
the windows that platform so everything
on the windows these days is running on
top of something called the NT kernel
started in the mid 90s with nce 3.1
which was the first version all the way
through to the various versions of
Windows up to Windows 10 then there's
Windows Server Windows Phone and even
Xbox one is based on the Windows NT
kernel on the other side of that wall
you've got anything that's a kind of
UNIX flavor and I'm grouping all these
together because although they're
separate systems they all kind of stuff
they all can implement the Commons of
POSIX interface and they all kind of
there are enough similarities between
them that's actually move software
between things on this side of the wall
it's actually fairly simple
starting with UNIX way back in the late
7th sorry late 60s mid 70s through to
line ups and bsd bsd is interesting
because it's another UNIX variant that
then forms the core of iOS and Mac OS so
what's the difference between lonex and
BSD well mainly due to licensing the
linux licensing does not allow you to
take that system and put it into
proprietary software the BSD license
does which is why the BSD sort of
toolkit is what's inside iOS and Mac OS
when you take a look at what's going on
in phone and small devices the picture
gets a bit different because Windows
Phone the Microsoft have a very
expensive experiment trying to buy their
way into the phone market and it pretty
much failed which means right now
even in a conference full of Microsoft
Sestak developers is a good chance
because of the phones that there are
more UNIX buy stuff writing systems in
this room than there are windows-based
operating systems which I think means
you can no longer Microsoft can no
longer reply I rely on the dominance of
the Windows platform so they've done
something about it and they've done the
best thing you can possibly do about it
they're braced an awesome software
starting with marker stuff there's Asia
so with Azure can you imagine the
antitrust there were problems they would
have if they didn't allow Linux to run
on Asia and it was just a Microsoft X
that's one story but as soon as actually
came out it's like we don't care what
software you run as long as you run it
with us then zamarons that means a very
interesting story because Enron's
started with mano-a-mano is about as
open source of story as you can get it's
a complete cleanroom implementation of a
dotnet framework for open source but
because they'd build it for I've been
sourcing for the UNIX platform it ran on
phones which meant when they added
xamarin on top of mono and could run
dotnet code on phones marks up realized
hey they're doing a really cool thing
so finally Microsoft claims their senses
and now owns a marine so they're now
bringing all this stuff onboard dotnet
core we've gone through a very painful
process with dotnet where in order to
become cross-platform they had to
rebuild the whole thing from the ground
up but that's now done it's working in
it's brilliant Visual Studio code below
be just judo code it's getting better
every single day and this runs on Mac
Windows and Linux and finally even SQL
Server so Heather's frozen over even SQL
Server is now on on a Linux platform so
that sounds great how do I get hold of
some Linux
well if you're on a if you a Microsoft
Dave chances I've got MSDN subscription
so you've got some issue credits go and
get yourself a VM and play with it that
way on the azure platform or you can
just use some kind of virtualization
software to run it on your own computer
this is what you'll be seeing a bit of
today because you get a nice-looking
screen but you've got VirtualBox
you've got hyper-v you've also got
VMware
Darko is an amazing piece of technology
and I wish I had time to cover it as
well in this talk but um what it means
is you can very quickly bring up
containers containing Linux I work with
some map guys now that do all their net
development on Mac and they have a
docker container running Linux to run
the rescue our service they can do their
whole delivery experience just on a Mac
without having to parallelize or you
know login to a virtual machine the next
is pretty flexible it can install on big
machines or old hardware so you've got
an old PC kicking around and not using
anymore just format it and put an X on
and play with it that way or you can buy
a very cheap or as we park in pewter and
start playing with it there and finally
you've got this awesome option the
windows subsystem for Linux that runs a
whole binary compatible layer for Linux
that you can run your Linux software on
so what's interesting here is there's
been attempt to kind of boot unix-style
programs on Windows before but this one
is a hundred percent binary compatible
so you take packages from the Ubuntu
your apology's and run them directly on
top of Linux of directly on top of
Windows ok packages all the way down I'm
going to start by talking about
something called the UNIX philosophy
this has been could have expressed with
these statements write programs that do
one thing and do it well write programs
to work together and write programs to
handle text dreams because that is a
universal interface so what you find
when you follow this philosophy is you
avoid reinventing the wheel someone's
already written something is this simple
thing you want to do a more complicated
thing then you'll use that simple thing
and then add your own bits of
functionality you won't reinvent the
whole the whole thing what that means is
you'll see some commands running today
that are unchanged since the 1970s
because they did their job
simple things like listen what's in a
folder or unzip a file they've been
around for years those commands are
going to stick around
the next thing I'm talking about is the
UNIX architecture it's generally drawn
this way and I'm talking about UNIX now
as well as just Linux because this whole
kind of ethos and architecture applies
to all the different flavors of Unix of
course when you start talking I Oh s or
Android there's a whole new layer on top
which actually runs your apps
well in the middle you've got this thing
called the kernel so the kernel
abstracts away all your hardware it also
is the system that allows knows how to
run processes the rest of the system
interacts with the kernel via system
calls as a specification for that called
POSIX which is what makes various
flavors of Unix
semi compatible with each other sitting
around this kernel is what's called the
shell that's our command-line interface
that we can use to actually run programs
that around that are actual applications
and various libraries so when we're
talking about Linux the actual Linux
projects that is just the kernel the
project that Linus Torvalds works on is
just this kernel in the middle and the
Linux project itself was created by a
guy called Linus Torvalds back in 1991
you've probably using your software
already because this guy also made get
the reason he made get was to make it
easier to work on the Linux platform the
way Linux works is all changes it's lots
of developers a huge code base so all
changes go through branches that's the
kind of basic unit of work but all their
yum existing source code control systems
at the time didn't have very good and
very efficient branching so Linus what
his own and now we've all got getting
it's amazing so what made em Linux so
popular is that unlike all the previous
versions of Unix Linux ran on the by
then ubiquitous win sell platform the
3x6 platform so if you ever see I sort
of die hard I hey Microsoft Linux guy
reminds him that Linux wouldn't be
popular if it wasn't for the Windows
platform it ran on so we've got a Linux
kernel here but that's not the whole
system fortunately for everybody when
this was built there was already an
existing project that provided the rest
and this project is called Ginola
now glue n stands for canoes not Unix
it's the kind of something called a
recursive acronym where the first letter
is the Beckenham itself and it's for
some reason bearded programmers from the
70s find that hilarious
but the canoe project was started by a
guy called Richard Stallman now the
story goes that um
he was working at a university and they
had a new printer new printer came in
the printers do two things they they
print and they Jam so obviously what you
want is to print as much as possible as
Jam as little as possible because back
in those days you're walking down the
corridor to get to the printer and so if
you've sent a print job then go to get a
coffee come back and it's not in your
mailbox you're gonna have to go back and
didn't print them again and keep waiting
so well we've got this new printer I'll
do what I did with the old printer what
I'll do is I'll get the software I'll
tweak it a bit and get it to send me a
notification and somewhere in box every
time did jam so we can go and just unjam
it will have a sort of smooth print
operation but what happened is unlike
previously the manufacturers or the
printing of the printer hadn't given
them source control files source code
files to go with their printer so he
phoned them up and said how can I have
the source files please and for the
first time they said no that's a
proprietary property he became so angry
that he founded their free software
movement and the GPL public license pans
this GCC compiler as a result so when
you add the GCC compiler antonin
actually then get the ability to make
more software and law software and more
software so the shells the applications
and other stuff you'll see today come
from the GNU project and then on top of
that we get everyone else the huge
unwashed hordes of open-source
developers so all this software is
sitting on various source code
repositories all over the world
thousands and thousands of projects all
following this UNIX philosophy which
means they're small and do small things
and now have huge web of dependencies on
other things so as you can imagine this
web of dependencies gets quite
complicated so how do you keep track of
that that is where distributions come in
so what distributions do is they take
all these chunks of source code
scattered around the web could be on
github repositories could be held CBS
repositories and they build them into
packages the then main maintain package
repositories which documents the
dependencies between those packages and
by doing this the introduces a level of
system-wide consistency every single
distributions a certain way of doing
things a certain place they put place
there the configuration then they make
installers and DVDs and they have
support forums they distribute and
generally support that platform so what
I mean by packages all the way down is
that everything on the system including
the kernel is a package through the
package manager system it also means if
you do see an error coming up the
chances are it's a missing dependency
and you can fix it but getting the right
package so the first place to look think
oh I need a sort of packages it also
means you can update all the software
with one command or a couple of things
of commands so unlike Windows Update
where you're updating a small subset of
Windows things and what's what you get
from Windows Update is growing I think
sometimes you get office through it as
well
with um the Linux system all the
software they've installed through the
package system which is 99% all gets
updated with that one in that one place
so next thing when I talk about is where
to get software so it's the first most
obvious place to add new new software to
your Linux system that your Linux
install is of course what's called the
official repositories so when we say
official we mean official from the point
of view of the makers of that
distribution so Ubuntu Ubuntu is
repositories or red-hats repositories
there's also something called unofficial
repositories so these are extra
repositories and sources of software on
the web that have been made for your
distribution but maintained by someone
else they could be maintained by
Microsoft or by node so there are
official from the point of view of node
but their unofficial from the point of
view of the distribution so what would
you use an unofficial repository well
where new software comes out there's a
delay between that software being
released and that software having a
package for your distribution and
various distros have have their own sort
of way of how long it takes them to push
software through some deliberately
sit-on changes and so right this is
unstable we'll wait a few months before
it becomes testing then becomes
production what they do do is faster
execute fixes through so fixes go
through quickly
incremental changes for the new version
that
listed on its you've got a choice
between really I'm conservative
destroys like Debian or really bleeding
edge distress like I'm Arch Linux I'll
put it straight straight away but you
don't wanna do that with your server cuz
something might break the next choice
you've got to make is you can get
software through language package
managers say you're using node you've
got NPM I'll say using.net you've got
you get so these are capable of
downloading software onto computer as
well so you generally get a choice you
can install some packages from the
official repository source or through
these new these language package
managers so my general rule of thumb is
if you've got a piece of software
installed just because you're using it
like you're using some database GUI tool
and that's comes from Java but you're
not working with job yes need Java to
run this program you've downloaded then
just use the official repositories
doesn't matter how up-to-date it is as
long as it boots that program but if
what you're working is what you're doing
I'm building a node web server where I'm
building a dotnet web server so this is
unneeded the latest and greatest stuff
and I know what I'm doing with this then
that's when you switch to the the
unofficial repositories to get the
latest and greatest because that's the
thing you're working with so you need
that to be up-to-date
finally some vendors will give you
binary installers to install on the
nukes but that's generally frowned upon
by the Linux community they want it to
all work through their central package
mini system and finally if you really
can't find a package for something you
want you've always got the option of
getting that code and compiling it
yourself with GCC not as hard as it
sounds but I'm not going to do it for
about 20 years so it but it's the option
it's good to have that option there so
what this over this package system means
is that Linux is hugely modular you can
have big or small distributions then
it's can run in many different places
and every component we swapped out for
alternatives there's multiple window
managers there's multiple boot sectors
there's about 50 different text editors
well that also means it's for every
single choice you can make there's some
kind of war online about which is best
so I've got this some slide in here not
because it's particularly funny but
guess how old it is this thing this
dishonor mostly goes back decades and
it's also ridiculous because why is
better
I logged into an elixir ver and all I
got this lousy dollar prompt let's get
straight in and take a look what I'm
going to do now is just show you a whole
bunch of commands how to poke around
find your way around don't expect you to
remember everything but just giving you
the tools that will work to let us run
the second last few sections of this
talk so here it is a command prompt now
it's important at this point not to have
an existential crisis but if you do it
knows who you are
so let's find out where I am put a find
an out PWD means print working directory
I don't know place called slash home
slash Brendan that's my home folder if
when I look around me LS is the
equivalent of dir and there we are I've
got some blue folders and a few files
kicking around if we want to find out a
bit more about any of these um commands
then man LS means manual what this will
do is give you what's called a man page
and this stuff is all switch searchable
as well and what you can find is for
most switches you get a kind of short
version and a long version it's my rule
of thumb is if I'm using a command that
I know really well and I'm just typing
out quickly I'll use a short version if
I'm running a script so want other
people to read it or it's an unfamiliar
command I use the long version so now
I've read the man page we know we can
get some more information by typing LS -
al and a huge much more information
about the fast let's take you through a
few things here this block here is
permissions so you've got read write and
execute for three years those users are
the root user which is this super user a
group so anything can be assigned to a
group which is a basic group of users or
the actual owner itself this section has
the owner I've got a user called Brendan
and a group called Brendan and this
section here I'm just highlighting that
I've got a folder there wouldn't
couldn't see before the convention is if
a folder starts with a name dot with the
dots it's hidden this is used to store
per user configuration just in text
files just in my home folder now you'll
see this pattern more and more because
we're getting more and more
cross-platform software
so it's unlikely to see anything
cross-platform deal with a registry to
configure itself so on Windows say new
get for example has a dot you get folder
somewhere in your home directory I think
under app roaming so it's clear that
next thing we're going to do is take a
look around to the root and system and
kind of find our way there
so CD / CD change directory same as
everywhere else we'll have a look around
at me and see a few folders here so a
few things I want to get across now but
when you're looking at this this command
interface there is no C Drive there's no
registry there's no command tools
there's no one network control panel
what there is instead is every single
thing in this system has a path
somewhere under this slash and when I
mean everything I mean everything so
let's take a look around and the first
thing I show you is the talking Drive
there's no C Drive so what we have is
something called the root partition one
of your draw partitions is mapped up to
this slash location then other drives
are mounted to other locations under
that that's slash partition and the
general rule of thumb is by default
you'll put it somewhere under mount but
don't have to you can put it anywhere
you can give it any path so the other
things that come away with is these
paths generally resolve to a particular
file on that root partition they don't
have to you can have things like
symlinks so you can have special files
or you can have files that are be maps
to a different for different rate discs
slash routes that's the route users home
directory and slash home that say
pronounces home directories et Cie is
very important as I said there's no
registry all configuration for the
system happens in text files and these
text files for the system-wide
configuration go in this ATC folder and
finally the amber contains variable
runtime class these are fast that system
expects to change so things like I've
got log files or if I'm running a
database the actual DB data files there
will go somewhere under this folder
there's a whole bunch of folders not
showing you but to keep this short these
are the important ones you need to know
about a couple more things finally we've
got um diff dev is interesting because
this is actually your devices your
devices themselves
here as nodes in this tree so if you
know the right bits to send to slash dev
slash something you can actually talk
directly to your hardware then you've
got proc proc is a virtual file system
that tells you all about the running
processes so if you're running a program
it will have a filesystem entry under
proc that can tell you all about that
running process so the next thing I want
to talk about is how these um command
line programs glue together so as
following the UNIX philosophy they
handle text stream so you've got a text
stream coming in could stand it in then
you've got the app and it has two tech
streams coming out standard out and
standard error so let's look at working
with these tech streams
this is a simple program echo it's going
to take the string I'll give it in the
first command argument and it's gonna
send it back to stand it out and this
case standard out is the command window
itself if I do that arrow redirects are
far same as dos cat is like type to
print out the file so I printed up the
file then two little arrows - yeah - let
Laros that's a pen to the end so now
I've appended to the end of that file
pretty simple
LS I printed out a list have you seen
before this grep command will search so
I've said grip look for the word hello
in all files that contain a dot and it's
found this two instances of the word
hello inside the hello dot txt if I'll
call it slightly differently and instead
of I'm giving grip a list of files to
search but instead it's like the output
of LS and uses pipe character what we're
doing is with piping the standard output
from LS into the standard input of grip
so now it's not searching through the
file system it's searching through the
stream of Texas we given it's in this
case that stream of text is the output
from LS this stuff here which means we
get just a single entry finally we can
die okay what happens if I say cats
hello dot txt again we're going to take
the output of that one file piped to
grep it's going to return the lines that
match and highlight them
these are all really really simple
examples for when to come away at the
ideas you can take these tiny programs
and start to glue them together with
redirects and pipes to perform more
complicated things
the next thing we'll show you is
privilege escalation let's try and do
something you're not allowed to do
blocks so what I can do is call this
program called Sudi
Sulu stands for super user do and it's
how I can run something as the root user
now it's quite common now for Linux
distributions it's not to actually have
a root password what they'll do is
nominate and say these users are allowed
to pull admins they can do everything
then what's good about su do is you can
control access on a per application
basis so ok you're allowed to run LS or
Sudi but you're not allowed to do
anything else so if I type sudo it'll
ask me for a password I'll type the
password in and it will run and let me
see that folder well it also does is
keep track for five minutes of who I
have that fact I've logged in so for
five minutes I can now just run Sudi
without a password you can also manually
reset that that little case above who
you are now obviously it's it's illegal
to mention Sudi without sharing this
xkcd slide people tweet me if I don't
next thing when I show you is managing
some processes so I've got two windows
here and on one side I'm going to run PS
the PS is printing information about
running processes and by default PS is
quite a narrow scope so all it's showing
me is bash which itself is the
Commandant it's the witness they're the
newest equipment of CMD it's the program
that takes in my commands works out what
program to run and sends back the the
output to the screen and PS I'm running
PS at the same time yeah actually
returns to pit the fact that I'm running
PS while it's running PS only there
looks like a different thing now I'm
going to just type cat and not give it a
parameter not give it a an argument so
what it's doing now this is this cat
program instead of finding a file I'm
putting that to standard out it's
waiting for me to send input to standard
in so the reason I'm done there to start
a process we can see that process in
action on the other side now that's like
PS it's locally scoped so
I see just the - but EPS - a or PSA I'm
gonna see a bit more information and I
can see that cap price is running so
what I've got here is the entry for cat
and I can see something here called the
process ID so what I can do on this side
is type kill and give it the process ID
and it will terminate that process over
there if I type PSA again you can see
it's gone well I could have done also on
the other side if I just hit ctrl C the
break character into the same window
there's one in cat that would have
killed it as well now if I have a really
misbehaving process what killer does is
it sends like the brake signal that
please shut yourself down you know
neatly if I something doesn't respond to
that because it's being fully
misbehaving
you can send kill - nah we just kill
yourself dead and if you send that that
process dies no matter what it's it's
killed it's gone the next command I'm
going to show you is top so top is kind
of like your task manager it gives you a
list of the top running processes
quite a bit of information here so once
been too long on it but it's stuff about
you know memory use and processor use an
interesting metric though is this it's
called load average so you take a look
at a point of time in the system and for
every time there's a process in use or a
process in their queue waiting to be
used that adds one so looking at the
load of it just by itself isn't that
helpful if you don't know how many CPUs
you've got it soon as your load average
creeps to near or above the number of
CPUs you've got running you've got a
problem cuz that means on average you
fully load it up you've got three
numbers there so what it does it samples
these over time so you've got the last
minute the last five minutes in the last
15 minutes so you can see in other
glance it's the system under and of
stress and it's the system you know
getting better or worse over time then
further down you can start seeing sort
of some of the top running processes
here's a process ID and this command is
SQL Server so just like on Windows I've
got SQL Server news and most resources a
quick comment on shell programs I've
talked about bash so yep there's a
program called bash and if I type bash
again
it looks like I've done nothing but I'm
actually now running it's two copies of
bash with the streams all join together
I an exit to come back out now if I do
this we just never do I get a shell and
I'm now logged in as root user on that
shell so kind of bypassed the thing this
has given me I'm now as root for until I
exit which you'd probably never do that
like I do all the time well that's
pretty simple but you get some cool
things coming up now because you can now
do remote shells so SSH opens a
encrypted tunnel and then runs logs me
into a server that is now running a
shell on a remote server so anything I
type executes and runs on that remote
server and the standard in and standard
out are then sent down through the SSH
tunnel to my local terminal and that's
how you do all remoting access on our
Linux system simple but powerful and
effective next thing I'll show you is
package management the most important
way of getting your software in and
package management varies depending upon
which a young distribution you're using
so I'm using Ubuntu see you Bunty was a
Debian based distribution so the package
mine is there is called apt the first
command I'm gonna show you is apt-get
update there's two commands to keep
clear in your mind there's update and
upgrade in order to work efficiently the
package management system keeps a local
cache of all the packages they're
available so apt-get updates will update
that cache and off it goes
the next command is apt-get upgrade this
now I've done an update I know about
what's new I type apt-get upgrade it'll
then tell me okay I need to put a few
some software to installed I'm going to
download 119 megabytes and but after
I've installed 614 we'll be clear so
it's obviously replacing packages in
place I hit continue off it goes it
would take you know from a minute a few
minutes depending on how much you've
been installed I've got I'm crime
install which installs all the times
there's always an update for Chrome
coming through and it's done I can also
use apps to find out a bit more about
some programs so I'm going to show you a
text program called nano
and I'm also passing it to a command
called list that will just show me text
one screen at a time and I'll give you
some information out of that particular
command so this is your stare from the
town or waiting for you to search and
listen to a search through the whole
package possibly and find something so I
want to find the good text editor I can
do app cache search and I as you can see
there are quite a few different text
editors available in a UNIX system and
by a few mean quite a few ok so what I'm
just going to show you to do is instill
one really simple program this problem
is called Nano so you're sudo apt-get
install and then I done type Nano I've
got a text editor the reason I'm showing
in Nano and not by oh there you know
real promise to use boy it's unlike why
if you open up Nano and start typing it
just works unlike voi what happens in bi
is you open up the program and you're
not in edit mode so you start typing
away and nothing's happening about four
or five keystrokes and you neither hit
by or you'll hit oh so I'll put you into
insert mode and they're common because
they're vowels
so I am insert mode or own overwrite
mode and suddenly you better start
typing away and you wonder what's going
on so now is a good one to start with
because it's kind of pretty simple you
start typing you look at hit control and
some of these control counts the bottom
you can exit yes they want to save it's
done I can cap I've saved a file so I've
shown you quite a few commands now and
obviously I expect you to remember them
all at first thing but what I want you
to do is get what's called a cheat sheet
so you just print it out put it next to
your desk and you can you know read
through and keep up certain commands but
you've also got this option xkcd has you
covered this is a t-shirt with a cheat
sheet printed upside down so you can
glance down at it while you're working
away very efficient way of working okay
so I think we've got all the background
information we need to go ahead and
install some software and Microsoft has
done the right thing here they haven't
done its binary packages although
with.net - they are heart they are
making binary packages available they've
done the right thing and set it up as
Apps package repositories so instead of
telling you to download the efforts that
they say on their website this is
straight from the website there so
you're gonna run this script well you've
seen everything we need to know to
understand how the script works sulu SH
- C is a run as super user remember I
said that sudou will run one program at
a time what we want to run here is a few
programs - a show on an echo and want to
do a path we've got a few things going
on in this line so we do sudo SH - C and
this whole string is what we're going to
run as root inside that command we're
going to echo we've seen that take some
text and send it to a file so basically
all we're doing is creating a new file
with this string inside it which is a
bit of configuration so what this
actually does is writes an extra package
source to our EDC folder where we keep
our package sources so it's like adding
a new NuGet package source exactly the
same the next thing we're all packages
for Linux are signed so you need to put
the key on before it will start
accepting packages from this source and
then you've seen this one sudo apt-get
update that runs through and then it's
just one more line to install.net sudo
apt-get install dotnet dev and that's it
we're done
we now have dotnet installed in our
system it really is as easy as that so
the next thing I'm going to show you is
how to go about actually using dotnet
I'm going to start with a simple net
core application and this should be very
very familiar because I'm going to quite
a folder and I've got a console folder
then inside that folder first thing
another one is dotnet new - help don't
give me a list of the various some
things I can run and from this point on
everything exactly the same as it be on
Windows so I can see a few different
project templates there let's create a
console program dotnet new console
created a console program LS you can see
it's just create to fast but simple
primary can do if I type dotnet restore
that then gets to all the new get
packages it needs not many and you can
see I've now got a obdurate
and finally I can dotnet run
you
the next thing I'm going to show you is
an asp.net core mbc website i'm going to
make a folder move in step folder i'm
going to type dotnet new MVC so it's
going to install using the MVC template
just the same as you would from windows
and also these templates that you
installing by exactly the same templates
as if you'd gone to major studio and
subs for our new project MVC template
exactly the same code gets installed in
the same way on your system and it runs
and creates our template we do a dotnet
restore it just works let me do a dotnet
run and we get this piece of code coming
up this this output coming up and it
starts up a web server on localhost
5,000 and that's what it looks like we
now have an MVC site it really is that
simple nothing has changed from how we
do this on Windows the next thing when I
show you its how to publish and again
all the stories the same dotnet publish
- see and give it an output folder which
we then do we have now published that
site if you want to run a publish site
you go to you go to the publish folder
and you can see now inside that publish
folder I put all my dll's included in so
dotnet run will not butcher to run our
unpublished folder use dotnet run and it
will dynamically go and find the deal as
it needs when you publish it it's all
there ready to go if you want to execute
that I just type in so let's net run
just type dotnet and then name the DLL
the publish credit and there it is it's
running again and ctrl C to shut it down
so next I'm going to talk to you about
is how its kestrel and how Ketchum makes
this possible so all previous versions
of.net had the lockdown assumption that
everything was going to be running
underneath is and the even the highest
process so in order to make those steps
towards a non Ras world they've done a
huge amount of work through our win and
now we've done that core to remove the
dependency on is so what we now have is
something called Kestrel
which is a web server built into dotnet
and kestrel was pretty good it's a small
fast web server directly written in
dotnet core and by fast I mean very fast
there are some crazy optimization work
going on inside there and they're you
know chasing benchmarks and you know
obviously if you're bringing your code
chances are you'll write some code that
makes it slower but the pure Wharf speed
behavior of sketch tool is amazing it's
also fully cross-platform it's actually
is it's an example of Windows not
reinventing the wheel here because when
they wanted to build kestrel they saw
there's this library called libuv which
nodejs is already running to make stuff
work cross-platform so they're based on
the kestrel or the kind of network and
layers on that in.net suit core to they
have actually um made that pluggable so
it still works with libuv but that's a
pluggable thing in case you want to do
something else or in the future run some
other code to handle your networking
this all sounds great there's one caveat
it's a very very fast web server but
don't expose it directly to the Internet
now I know this is fine this is totally
fine but concede that might cause you
the pause or like what's going on and
this is totally standard practice you've
ever run a node server if you ever run a
Ruby server a Java server it's just the
way the way they do things now so back
in the old days say with PHP and the way
PHP works is you have what's called a
module and you put that most module
inside web servers which means if
there's new web server coming out you've
got to write that a new module for it
and so it gets complicated and that
module is then tied into that that web
server process that the web server crash
is your thing crashes are worse if your
think rushes you can crash the web
server so typically best practice these
days is to do this you have some kind of
your code running web application and in
front of it you put what's called a
reverse proxy server and with that
reverse proxy server you use Salem as a
is nginx or Apache so though the roles
of those systems are third they are well
known
Harden's battle-ready web servers have
been running for years everyone knows
what problems they had or don't have
their well maintains put that on the
edge facing the general public and then
you put a proxy to your application on
the side so how did you go about setting
this up sounds a bit complicated same
thing you do everything you have a look
on Sakai overfly find a bit of code and
you paste it in really is that easy so
let's take a look at that well if you
want to run I'm going to straight to
their using nginx which is a small fast
web server for Linux well the first
thing you need to do is install nginx we
should know how to do this exactly think
sudo apt-get install nginx and it takes
all over an additional one point one and
a bit Meg great and it goes I think we
can fit that in it's done the next thing
we want to deal with that you started as
a service so like anything in the Linux
world there's multiple systems that can
maintain services the current system
maintenance system in the Ubuntu 16.4
which is what this is is something
called system D so the commands start a
service and system D is pseudo system
control start nginx that's it pretty
quick then you can take a look at
localhost and you get this nice welcome
to end your next screen so you know it's
working so we've got nginx running on
our system as a web browser a web server
let's turn it into a reverse proxy
server and like everything else
everything is configured inside this ATC
folder if you want to configure nginx
it's in slash etc' slash engine X and
then nginx has a place to put all the
different virtual host sites it's
running so that's in sites available
just take a look in there and it's run
them and take a look inside the default
configuration file so this is what most
Linux configuration files would look
like they generally have some pretty
safe defaults with some options you've
got coming out to kind of see how it
works but by default if I scroll
it what you've got here is we're
listening on port 80 and we are going to
serve up files from via W HTML remember
slash Vera's where we put log files
where you put far as we expect to change
so it's all following standard practice
so you want to change this instead of
serving up files to from this folder and
actually you went to that folder you'd
see that welcome page in the HTML file
let's replace all of that with this
again this is your cut and paste job
we're still listening on port 80 but
then on the slash location instead of
serving up files we're going to pass
through to localhost port 500 5,000
sorry and then we're going to set a few
proxy headers know some things let's
know they let the system know we have
actually done a proxy so with that file
change and obviously if you're going to
go start changing text files in your
configuration system back them up first
if you want to reload that configuration
see new system controls reload nginx
it's done next thing you'll need to do
is you're going to start that web
application start that MVC so go back
into here or uh net DLL that's now
running now if I go to localhost you can
see it's now running localhost not Lagos
5000 that's now ready to be served
externally well kind of there's one
problem if I come back to my console
window here and hit the break character
that's going to shut down their MVC site
now if I look at localhost I've got bad
gateway is trying to proxy out to
somewhere that's down so what do about
this well this is where I need to run my
MVC site as a service so I've seen the
service system system D but let's set up
our own service in system D so like
everything else the configures except
configuration files in a TC and if you
want to learn some stuff just get in
there browse around and have a look in
some of these text files let's take a
look at the configuration file for nginx
there it is it's about a page so a good
way to learn it just poking around or
something you just installed and see
what it's put in there but we're going
to make our own in the service so what
we're going to do really use Nano again
and create a service file NBC doc
service inside that service far were
going to do a few things it needs to
know a description all this stuff is
just when we run it it can tell us stuff
about the application working directory
is when we run the program what program
is going to run from and then here are
xx star is running dotnet with the DLL
we're going to start down here we've got
an invite we're going to say we're
running in production mode and this is
the user to run us obviously in a real
production system you'd set up a user
specifically for running this
application and set it up that way the
next thing I want to show you and these
are really quite useful is restart and
we start sick what this means is restart
because always we start Sachi was 10 if
this application goes down after 10
seconds it will immediately restart it
sits like a look at that in action so
we've added that service the next thing
I need to do is actually tell system D
that I've created this new service file
so a guy a system control enable and B
see that service done then I can go
system with 12 starts and B to that
service and it's now started that
service now I forgot our localhost it's
running that website so we've seen a
little bit process and had a manage
prices let's take a look ins we can find
that service so I'm running PS - ax
which gives us a huge page of all the
prices running and then passing that
through the grep command to filter it
down and just find that dotnet program
and as you can see we've got a process
ID here which is a running MVC service
so let's be really mean and fire kill -
9 so we're going to kill this thing dead
so if I do that come back to the web
page I find it's up I come back to PS
and take another look I see it's now
living with a brand new process so that
is how you deploy and keep that that
system alive
and finally I'm great command to use is
something called tail tail we'll print
out that flashed the button bit over of
some kind of file use your log file if
you call tail - f it will stay open and
when new changes come in to that log
file it will print them out as they run
so it's great for watching logs go by
for a few seconds and then you can quit
out again it's not really a great
equivalent on the windows world for tail
it's amazing
little tool of a type tail via syslog
you can now see that it's this is now
logged that the application got stopped
it got caught and restarted again so
that's most of things I wanted to show
you what do we talk about I showed you
may you live in interesting times I
talked about the history where we were
and where we're going in packages all
the way down there's one thing I want
you to take away to get software running
on a Linux system you use the package
management system it's the first thing
to learn we then chucked a whole bunch
of commands into our heads that everyone
don't forget but we know that some
commands exists and hopefully we've
learnt of our ways of working with them
how to join them together and how to
find out more about them we're gonna
install dotnet which is incredibly easy
thing to do and we then use dotnet which
is incredibly easy thing to do and then
we even looked into how we can use the
existing platform architecture the
interesting services like nginx to
configure up a runtime application so in
summary I think there's loads of very
good reasons to use Linux it can be
faster it can be cheaper it scales well
I mean the docker story on Linux is more
mature and there's a kind of race going
on right now where Microsoft are
building headless versions of server so
it's now possible to run server Nano and
things of that that don't have all the
windowing talk gets built in but they're
having their big job to do because it
wasn't built command-line first they're
having to write all these PowerShell to
help you manage the systems that you
used to manage through they'll come out
through the windowing toolkit so loads
of great users versions to use windows
so to use Linux but on mine I just love
it and hopefully if you take it out go
home give it a try and maybe you'll find
something you like too so thank you very
much for listening
it's got time for a couple of questions
yeah so the question was kind of dotnet
application compiled and Windows one on
Linux and I'm pretty sure the answer's
no I would say so that's not true they
can that's right yes yes and what you
know where that comes in okay you've got
two types of publishing you've got run
time dependent publishing and you've got
um what what's the other one there's run
time dependent and self contained
deployments now when you do run time
dependent you build the dll's
and those dll's require that there's a
run time where it's going to run so
those dll's will deployed anywhere
there's a run time so if it will deploy
on to Linux with a run time or deploy on
to Windows with a run time
what you can also do is something called
a self-contained deployment what that
does is when you publish it you specify
what platform it's for so that goes an
extra step and actually takes a whole
version of the runtime with it so you
can deploy it to a Windows box or you
can deploy it to a Linux box that
doesn't have the runtime installed but
in order for that to work it's going to
be built for that platform so what you
get with a self-contained deployment for
Windows for example you'll get an actual
xxe fall on the end where if you publish
just with a framework dependent
deployment
it'll be just a DLL they put used on it
to run if you do a self-contained the
point for Windows will be an X E and if
you do it for Linux you'll get the
equivalent of an X E or Linux just so
far as executable set that can execute
yes
yes that's very is right yes I did mean
to say that so there's been a lot of
work recently to unhardened kestrel for
version 2 but my personal feeling right
now is it's been hardened amore split
was released this week so i'm not going
to start running a production service on
a hardened system no matter how well
it's been hardens on a system those
released this week and it's so easy to
set up a verse proxy that i would still
do that for quite a while until the
hardens versions improved itself that's
not saying I wouldn't in the future to
use the harden version because you might
find at some point in the future that it
becomes better there's so much work so
much effort going in with very smart
people making these things that yeah I'd
say at some point in the future you
might want to consider deploying Kestrel
directly to the web but right now I'd
still keep the proxy yes well there's a
various sort of settings and like
connection timeouts and tunings you can
make to make sure that like misbehaving
requests get dealt with an appropriate
way so things like denial cos attacks
that kind of thing there hold a whole
bunch of stuff Damion Edwards did a
great talk on it quite recently yes yep
yes and what I should say the question
was say you've won our hosting multiple
websites in the same server what I
showed you was the simplest possible
configuration where all traffic coming
in on port 80 was always redirected out
to port five thousands now generally you
might want to do something bit smaller
than that maybe you've got a whole bunch
of static resources you don't want to
send to a second resource so you say
okay for these paths send them through
or you can start doing name-based
virtual hosting or even sni on HTTPS and
start running multiple sites so that you
know he comes in to nginx nginx then
resolves which hosts it is and whether
or not it's going to run and then once
it determines that virtual host that's
where the proxy weak for that you don't
have to proxy the whole thing you can
proxy subsets of the overall system any
more questions
yes yeah that days there's a good
question how do where do I go to its so
learn more I can't say how I learn stuff
and I can't learn stuff by just reading
a book and starting to start the booking
going through the only way I can
actually find the most is to learn stuff
is to actually try and do something with
it so think oh this hobby project
let's try hosting your own annex it's a
good choice to make because it'll be
cheap so to actually try and get
something done then I'll really end up
getting a problem and then I'll be a
problem behind the problem and then
three problems down that's when you
start to really learn what's going on
and it'll be scratching that itch
there's how I learn stuff
so best practices in the fragmentation
whatever next yeah that's that's pretty
hard and you just got a I don't have a
great answer for what's we're finding
than finding the best practice yeah no
no but it is initially because what
you've tend to find as well is because
it's such a kind of wild world up there
you'll see some very bad advice on the
next of all a very outdated advice so
it's worth fishing around multiple
sources like the hit the forums but um
take a look at the date on some advice
as well because you'll see commands that
work three years ago but don't work
today
same as you know dotnet if you look if
you're looking for dotnet core advice
first thing you look at is a date
because you could cut and paste some
code and it's from six months ago
chances are they've changed the
interface since then yeah how long
forget my beards yeah I know I did guys
apparently it's not compulsory they try
to tell me is see I've got stickers as
well you see if you've got stickies you
don't need the beard okay thank you all</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>