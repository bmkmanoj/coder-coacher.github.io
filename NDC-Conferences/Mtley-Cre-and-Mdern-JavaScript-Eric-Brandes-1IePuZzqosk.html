<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mötley Crüe and Mödern JavaScript - Eric Brandes | Coder Coacher - Coaching Coders</title><meta content="Mötley Crüe and Mödern JavaScript - Eric Brandes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Mötley Crüe and Mödern JavaScript - Eric Brandes</b></h2><h5 class="post__date">2018-02-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1IePuZzqosk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi everybody welcome to motley crue
and modern JavaScript I want to thank
you
about JavaScript not always the most
exciting topic I know it's been a long
week in a busy conference so thank you
everyone for you know coming to the
second to last session this should be
hopefully pretty fun there's nothing too
deep or technical in here and some of
you might be wondering why metal music
in JavaScript that doesn't really make
sense
those aren't two things that you
generally will put together but I'm here
to tell you otherwise I think that
there's actually a lot of similarities
between the arc of metal music and the
arc of JavaScript and also it's a lot
more fun to talk about metal music than
it is to talk about JavaScript and it
gives you way better slide opportunities
and hopefully it'll help you guys
remember the message a little bit so
let's start with heavy metal music and
actually 2018 is a great year to talk
about this because it's the 50th
anniversary of metal music generally
speaking there are three bands credited
with creating the heavy metal sound that
sort of we know today is Led Zeppelin
Black Sabbath deep purple back in 1968
and it was a new sound back then it was
really something people hadn't heard
before and people got excited
enthusiastic about it and it was kind of
a I hate to use the word but but
paradigm shift and and with all that
excitement in that enthusiasm a bunch of
new bands cropped up and kept iterating
on that sound and you can see that some
of these bands are huge and you've heard
of them and some of them may be you have
him and the key takeaway here is that
even though there was a lot of
enthusiasm about heavy metal and there
was a lot of bands that started they
weren't all very good in fact a lot of
them were pretty bad and I would argue
that javascript follows a similar arc so
for those that have been doing
JavaScript and web development for a
while
prototype dojo and mootools were kind of
the first three big JavaScript
frameworks that show that you could do
more with JavaScript than just you know
change the status bar in the bottom left
corner and that got people excited just
like Black Sabbath got people excited
about heavy metal music these frameworks
got people excited about JavaScript and
now we have this endless proliferation
of JavaScript there's so many new
frameworks all the time how do you keep
up and so that's actually a big part of
what this talk is about there will
probably be several new JavaScript
frameworks created there
course of this talk published to MPN and
people beyond github pages screaming
about how good their framework is but
the key takeaway and that's what you
need to remember is that not all of
these JavaScript frameworks will be
winners and in fact most of them won't
be they'll be different than what's come
before maybe but that doesn't mean that
they're better and so one of the things
that I want to talk about today is how
do we evaluate a JavaScript framework
and let's look at kind of the current
state of the art of JavaScript
frameworks and see what's good today and
how to kind of evaluate what's good
tomorrow so why should you listen to me
my name is Eric Brandis and I lead two
lives my first life is that of an
enterprise consultant so I've worked in
the belly of soul-crushing corporations
for the last 13 years or so a better
part of that last ten years was building
single page applications so I've sort of
I've written a lot of JavaScript I've
sort of seen how it works in production
in sort of what works and what doesn't
so I've got a lot of experience using
most of the major frameworks that are
popular today but the other life that I
lead is as the co-founder of a
JavaScript company called Trac Jas we're
a production error monitoring tool so if
you've got that angular I'm gonna five I
think we're up to now soon to be angular
six if you've got the angular 5
application and you think that maybe
your business logic has some bugs in it
we make a great tool to tell you if
that's the case and so in that life we
get to see a different perspective we
have over a billion errors that we track
every month from our customers and
what's interesting is our average
customer every other page view on their
website results in a JavaScript error
which is pretty wild it generally
correlates to the more JavaScript that
you have the more errors that you have
and so we get to see how these things
fail and what it's really taught me is
that maybe we want to be careful about
JavaScript maybe we don't want to rush
headlong into the newest thing so this
concept of front-end development
actually is relatively new you know five
or six years ago you would never have
seen a front-end developer role listed
on a career website but now it is now
it's a thing and that's that's pretty
awesome it's pretty metal and there's a
resource that everyone should probably
be aware of it's called the front end
checklist and it's on github and that's
a screenshot of it
on the right there and you can't see
that because it's long because it's
really long the front end has become
complicated it is a lot of work to get a
web application right today so I have
taken the liberty of actually taking
this really long screenshot that you
can't read and putting it into really
long bullet point slides for you and the
start of it and we're not gonna go
through all these no way that would be
awful it's Friday but I wanted to call
it the JavaScript slide specifically and
so you can see on here there's things
like concatenation and minification
right these are best practices these are
always good ideas and so that's cool and
actually I mean if this is the entire
JavaScript section of the front-end
checklist so it seems you know at first
glance pretty reasonable but the
front-end checklist goes on and it's got
a section about the head tag and in fact
it's got two sections about the head tag
and it's got stuff about web fonts and
it's got stuff about CSS it's got stuff
about images right how do you
dynamically load an image how do you
handle retina displays and you might be
wondering well what's the point well the
point is that the choices that you make
with your JavaScript which framework you
pick how you choose to build your web
application that has a direct impact on
all of this other stuff as well so when
you think about JavaScript really you're
thinking about the entire web
application because that's what's
driving it these days one often
overlooked thing is accessibility and so
I mean if you're using angular it is
really hard and I'm quite a bit of work
to make a really accessible website so
if that's something you care about you
know you got to know that when you pick
these tools same with performance right
some of these frameworks perform better
than others and some of them are great
whoops some of them are great for SEO
and some of them aren't and that's just
all that dozens of bullet points that's
just for ease a bog-standard
front-end application of course Google
is now pitching this new thing called
progressive web app so it's basically a
web app on steroids it's got like a
serviceworker component to kind of load
things out-of-band it's very focused on
performance offline capabilities that
sort of thing so not only do you have
the front end checklist now you've got
progressive web apps right they're
basically a web app that's turned up to
11 and Google helpfully has a checklist
as well and again I've screen shot at it
for you and so you can see that it's
quite short
and it's a pretty easy again I've taken
the liberty of turning it into bullet
points for you and again we're not going
to go over all all of this but I did
want to talk about the last two bullet
points so hopefully you can read it but
if you can't I'll read it for you the
last one is content doesn't jump as the
page loads so you can almost always tell
a single page client rendered
application on page load because things
like jump in and out all over the place
right they'll be like eight loading
spinners and like the boxes get bigger
and smaller and if you're on a phone
it's just a disaster because you're
trying to tap on it while it's loading
and the things are moving out from under
your finger it's just awful it's classic
angular behavior actually the last
bullet point out here that I want to
talk about and this just like infuriates
me to no end
is that press so this is what they want
you to do pressing back from a detail
page retains a scroll position on the
previous list page that's a bullet point
that in 2018 Google felt was necessary
to put on a progressive web web app
checklist and that's because we've
broken the back button something so
fundamental that's been working for over
a decade - now we've completely broken
with these client rendered applications
and even today with angular react all of
the new stuff the back button is still a
problem if you can believe it and then
there's a whole bunch of other stuff
that's also really hard to do that
Google wants you to do for progressive
web apps and again depending on what
JavaScript framework you choose this
stuff could be easier it can be hard so
this talk is all about making the right
JavaScript choices because if you make
the wrong JavaScript choices instead of
like a super metal front-end experience
it's like more of an adult contemporary
kind of metal nonmetal experience in a
sort of your progressive web apps being
super awesome they're super lame and by
the way so Tom Jones is a very famous
Vegas singer for those of you who don't
know I always assumed he was American no
he's actually from the UK so this is
sort of your fault in a lot of ways and
as our friend Slayer say if you make the
wrong JavaScript choices he'll the
weights right and I think it's important
to understand how we got here you know
the how do the front and become so
complex and how did we get all these
JavaScript frameworks that really maybe
aren't helping us do our job but are
very popular and so it's one of those
what is the history those who don't
history are condemned to repeat it
something like that so I think it's
important to understand sort of how did
we get here and what's really fun about
this is we can we can follow music in a
similar arc right so if we go if we look
at music first you know before there was
heavy metal there was Elvis right and so
Elvis is sort of the creator of rock and
roll depending on you know sort of what
you believe you know so he took he took
rhythm in blues and and country music
and sort of combined them into what we
wouldn't really call rock and roll today
but he was you know it was a fundamental
change along the computer timeline we've
got Tim berners-lee
right I mean this guy was a fundamental
paradigm shift right he created the WWN
HTML is a markup language this is a
picture of the first web page that was
ever made what's really funny about this
is that this web page actually like
checks a lot of the boxes on the front
end checklist because it doesn't have
CSS right it doesn't have JavaScript it
loads super fast on a 3G connection and
the back button always works right so so
actually you know Tim berners-lee
he was pretty good at this web thing but
music kept moving forward right and so
the Beatles came out I think they're
from France maybe or Germany and but
they you know they had they changed the
sound game again right and the same
thing happened when you didn't just have
read-only web pages you actually had the
ability for the client to send data to
the server how many of you have actually
of you know how this works or have
written an actual form post not an ajax
post by an actual form post because we
just hired an intern he's 19 years old
at one of my client sites and he didn't
know that you could send data to the
server without using ajax and but it
makes sense he's never seen a form post
he's never had to write I thought that
was really interesting
and there's another band from Germany I
think that started a few years after the
Beatles and you know and they kind of
added more edge to that song right it
wasn't just that sort of bubblegum pop
it was it was kind of a darker sound and
in the computer world Brendan Eich was
making JavaScript right he was the
original language creator and
apocryphally if you believe this story
it took him only two weeks to develop
the language and I actually tend to
believe that given how it works
and that ushered in this era of what was
called dhtml which unless you've been
doing web stuff for a while you probably
have even heard that term anymore right
and it's like this was the best image I
could find about dhtml and it was the
best because it was like made in 1996 or
something with like Photoshop one so I
thought that was really you know telling
of kind of that era and then we get to
to Zeppelin to the founders of modern
metal and we've got you know we already
talked about Joe Joe and that stuff but
music kept moving right and so you know
even though Led Zeppelin is still
classic well there was these guys in
Detroit that actually thought maybe we
wanted a harder sound but also with
wearing some cool costumes right and
that sort of ushered you know so after
suppost post dojo and mootools we've got
we've got jQuery right and this was
really what kind of one the browser
JavaScript framework Wars for a while
and music continued to get better I
guess although the mustache on Mars
there is really just something else it
same with jQuery right people were using
jQuery not only is just like a like a
browser compatible API but then somebody
I don't know who it was they figured
this out right this is actually like
this is client rendered HTML right here
all right this is the precursor to
angular into backbone and to react in
all of those right people were using
jQuery to actually build things
dynamically on the client right like
this is this will make an unsorted list
of different taco meat fillings right
with all with jQuery and of course
because developers are developers they
would take this to the extreme and you
would see like thousand line JavaScript
files with just like loads and loads of
this just sort of unmaintainable mass
and just like music kept getting better
at least different
so did JavaScript and I actually blame
Google a lot for a lot of what's
transpired to be honest because this
came out and I don't know if any of you
guys remember sort of original Gmail but
it was a game changer it was really it
felt like a desktop application and they
did it with sort of a single page
application framework they would load
all the data upfront for like the first
20 emails and as you're clicking in
those emails they're just wreak lion
trend during the page they're not going
back to the server so it's basically
instant and a lot of developers saw gee
and said we should build our own Gmail
but the dangerous thing there is that
they're not I'm certainly not Google I
do not have the resources or the time to
do it as good of a job as they did on
Gmail but that's okay because some new
frameworks came out to help us so if
some of you may have used knockout or
possibly backbone right or or you know
angular was really great for a while and
that was kind of the first the first
generation of single page application
frameworks that really focused on that
client rendering and now we're kind of
in what I would call second generation
and so that's kind of a more like the
Scandinavian black metal right is maybe
more where we're at we've got reacting
redux
we've got angular next angular 2 and
given five or whatever you want to call
ami it's just angular now but boy did
they not handle that name change very
well we've also got view right so those
are kind of the big three that are
popular have community engagement today
and of course there's a million others
right and so we've seen the slide
already but there's loads and loads of
these so imagine you're building a web
application a brand new one what
framework do you pick so we've got a
couple goals right we wanted to load
fast want to have good performance once
it's loaded we want a modern user
experience so we have to use CSS right
we can't go straight full Tim
berners-lee on this thing we gotta you
know actually make it look good and we
want it to be quick to develop and easy
to maintain which is kind of a nebulous
concept so a lot of developers at this
point when tasked with creating a new
web application say well we're gonna use
react and you might say why and well
because it's cool and I disagree with
that way of picking frameworks and so I
have a different way that I pick
frameworks and so the first question I
want to ask is how dynamic is your site
alright you may not need all of this
client rendered craziness right if you
if the answer is mostly static that's
one thing or if it's dynamic that's
maybe a different choice so let's say
it's mostly static you don't need a
really crazy JavaScript environment to
make mostly static content you can use a
static site generator like Jekyll
for example Jekyll was written by Tom
Preston Werner who was the CEO of github
and it actually is what runs github
pages it has loads of good things about
it but it's like the important thing to
note here is that it's
for a lot of use cases that maybe people
don't think about blogs marketing sites
you know documentation for things even
like even sort of content-heavy sites I
look at it as there's a lot of clients
where in order to change the content on
a site we have to do a release right
it's not database driven and if you're
in a situation like that if you have to
do a release to change the content well
you might as well use a static site
generator right and then just FTP those
HTML files right up there so I think
Jekyll is pretty great it's a little
long in the tooth now so of course the
new hot thing right is and I'm going to
try to straight us say this with a
straight face is a react static site
generator called Gatsby so you use a
single page application framework to
generate static HTML which I'm not sure
how I feel about that but it's but it's
really popular right now so I feel like
I have to at least talk about it
the reactive documentation side is
actually built with it along with a
bunch of other very hip and cool
websites which you'll notice actually
the pros and the cons column like
sometimes that's great because the
community cares and can move things
forward but sometimes that's not the
best thing so if you can use a static
site generator I think you should I
think it's a great solution to a lot of
problems and people don't consider them
often enough but I will be the first to
admit it's not the solution to do a fair
number of things so if the answer the
question of you know how dynamic is your
site is this is really dynamic the next
question I think that you should ask is
do you go to the server
every time I user click something so if
I click on a link say I've but you know
you've got the classic master details
layout pattern and I click on a link to
go to the details do you go and make an
API call and get back a big JSON blob
because if you go to the server every
time a user does something I've got
great news for you you don't actually
need react or angular or any of that
stuff you're already paying the network
tax to go to the server so if something
sending back Jason why don't you send
back XML and you might think that's dumb
and that's what Ajax actually stands for
asynchronous JavaScript and XML and when
it first came out people really did
return XML from their api's Microsoft
actually for those that didn't know
Microsoft is the reason we have
they created the first ActiveX control
for xmlhttprequest to handle Outlook Web
Application back in the day but the cool
thing is in the reason I'm advocating
with turning XML and this is kind of a
live but it lets me do this next slide
is what I really mean by retaining XML
is HTML you don't need to return a JSON
payload that you run through a really
heavy weight you know sort of JavaScript
pipeline you can just return HTML from
your server and then render it and this
is about the fastest thing that a
browser can do so there's been all these
performance improvements and people have
spent thousands of hours trying to get
these single page application frameworks
to work well when what they could have
done is just generated a big HTML string
on the server and just jammed it into
the body right lightning fast and you
might be asking well that sounds great
but I kind of want to roll this myself
and the great news is you don't have to
you can use a framework called pjax pjx
actually was written by the current CEO
of github and it's actually what powers
github.com and the way it works is
pretty simple and pjax by the way you
can read that maybe it stands for push
state plus Ajax so what it does is when
you click on a link it will make an ajax
get request to the server and expect
HTML back from that endpoint it will
then plop that HTML into a container and
then update the URL so you get what
appears to be a single page application
right you're not doing a full page load
but it's it's even faster actually
because it's just rendering HTML so if
we look at it so I'm on the jQuery PGX
site and because github is actually
written with pjx in mind we can actually
just inspect it and see what's going on
so this is actually just a quick you
know chrome inspection of that page that
you were just looking at you can see in
green is the head tag and so this is
where you know get up what's the CSS and
a few other things in the blue box at
the bottom is all their big script
bundle because even if you serve a
render you still need you know some
script and the big red box in the middle
is the important thing
that's the pjax container that's the
part that gets replaced when you go to
the server so we can actually look at
the chrome developer tools and we can
see it's making an xhr request to that
endpoint and the stuff that comes back
as HTML
there's not a big Jason payload but if
we look at the HTML that comes back it's
also not a full page look we're not
paying to reload all those scripts we're
not paying to reload that CSS we're just
taking the new HTML content and plopping
it in that red box and it works really
fast and actually track J's my company
is written the UI is written entirely in
pjax as well and it really makes it feel
like a desktop application and a good
desktop application to not like electron
based at I'm just kidding and you can
see in the case of github right it's
really fast it took two and thirty eight
milliseconds to get that HTML from the
server but that's it there's no D
serialization penalty there's no big
JavaScript engine that needs to go
through there's no like Dom manipulation
that has to happen it's just done the
browser just renders it so there's loads
of of pros about pjax one of my
favorites is actually the back button
still works so that's cool so you know
we've kind of kept 1993 alive you get
real permalinks and you keep the
rendering on your server which is also
faster probably than some of these
clients
the only real downsides of pjax is that
it's done they're not really adding any
new features to it if it works for you
it'll work for the foreseeable future if
it doesn't yeah you might need something
else because they're not really
enhancing it any further and you might
think wow I've never heard of pjx which
by the way it does have 15,000 stars so
it's not as many as react but it's still
you know it's not nothing but I hope
that can convince you to at least look
at it so addy Osmani released a blog
post called the cost of Jas and it's a
really great blog post so he's just
Google the cost of Jas you'll find it
and he goes through all of the issues
with having these huge script bundles
that we try and load today
and so he's TLDR is you know basically
we want less code because less code is
less to parse and compile it's less to
transfer it's less to decompress right
and then he has some ideas for you on
how you can achieve less code and and
these are some good ideas I mean scope
wasting code splitting tree shaking you
know these are they're good ideas and
they work but I've got an even better
idea you can just avoid all that
nonsense if you just serve a render and
Ajax it in right and so another group
that I think sometimes gets ahead of
themselves is the
flex UI folks and they were really
really excited about react when I first
came out and they you know made a big
deal about we just did our homepage and
react and it always surprised me how
much time they spent on that homepage
because it's one of the simplest you
eyes you can imagine right but just a
couple weeks ago they said hey we
removed all of the client-side react
from our home page and we saw a 50%
performance improvement like imagine
that we just render on the server right
if you don't wanna use pjax you have
some other options you can use
turbolinks
so for years turbolinks was rails only
right it was created by the rails team
but just recently here well send me
recently they've created an NPM package
so you can if you're in a Java Script
type ecosystem node you can actually use
turbo links as well and there's a new
JavaScript framework that just came out
like I think a month ago and it's from
the people at 37signals so it's you know
not completely without merit and its
whole job is to do just slight
augmentation of your page so rather than
do client rendering stimulus does not
want to do client rendering it just
wants to do sort of client interactivity
helping hiding and showing things
limited data binding but certainly not
full rendering of a page so if we go
back to the question did you go to the
server every time a user click something
if you say no I don't because I'm
building Gmail too I say fine that's
cool
no your your single page application
right but there are costs associated
with single page applications in a lot
of ways I think that single page
applications are kind of insane clown
posse of JavaScript right sort of this
unholy alliance between rap and metal
right it doesn't really necessarily
always work so what kind of costs am I
talking about
well for one thing there's the routing
and navigation cost right we've already
touched on this a little bit the back
button it still doesn't work and deep
linking is actually really painful we've
also got render jitter you've always got
you know some sort of big build tool
chain complexity to get all this stuff
built and transpiled and sort of
deployed today a lot of dev time
friction so if you do want to build a
single page application that's fine
but I think people just need to realize
that there are cost to it
because it's Friday that's the afternoon
and people are tired I'm just gonna give
you the TLDR right here at the beginning
we're gonna talk more about these
frameworks in just a second but in my
opinion if you are gonna pick a single
page application framework today in 2018
I would go with react and we'll talk
about why and in the second place I
would go with view I'll do angular third
and then I've got a special slide for
polymer the reason I have a special
slide for polymer if you hadn't heard of
it don't look it up if you if you if you
have heard of it don't use it so I'm
really surprised actually that it's it's
it's sort of still being evangelized
because it doesn't actually solve any
problems that anyone actually has it
does use it does use web components
which is a spec that Google unilaterally
sort of foisted on the world despite
objections from Mozilla but it's but it
turns out that maybe those objections
were valid because web components
actually don't really help you build
your app any faster they don't really
help you get to market quicker they'll
save you any money so not really sure
why people are so excited about them and
because they're not widely supported yet
you've got all these polyfills and other
things that polymer does to try and make
it work and the one thing that polymer
doesn't really focus on I think is the
critical linchpin of a lot of these
applications is state management and
we'll talk a lot more about that in a
second but all of these frameworks view
angular react in in all cases everything
is a component so a component really is
kind of a nebulous concept these days
and they've all sort of taken that as
the abstraction that we want to use to
build our UI's and they say that
everything's a component and it's great
because there's use reusability right if
I've got a I don't know if I've got a
button component I can just slap that
button component all over my site and in
theory that sounds good but in practice
actually the amount of reuse you're
gonna get out of a lot of these
components is almost nil because in a
lot of cases the component that you want
you know you try and place it on your
next page maybe doesn't work quite the
same way and what you end up with in
practice at least in my experience is a
proliferation of these components at all
maybe sort of do the same thing but you
couldn't quite combine that logic
because the business maybe didn't want
it that way the other thing that people
really love about components is the
isolation they said well this is an
isolated sort of atomic
and you only have to think about just
the component itself and it's a little
piece of the UI and at first it seems
right but it's but it's not because the
component doesn't live by itself it
lives within a broader application and
so how you know if I change component a
if I click on the button in component a
but component B needs to know that how
does that work right isolation does not
help me there
and so then you run into problems with
state management right it gets very
complicated to to use or to play like
that guitar and so state management is
actually one of the things I really want
to focus a little time on here because I
think state management is one of the
things that a lot of these frameworks
don't think about very deeply back in
the day this was your pretty classic web
stack you had a browser you had the web
server which is that thing with the
world on it and then you had a database
right really simple and then you know
ecommerce started and other things and
people wanted to have some session datas
and some sort of you know per user state
along with the canonical store the
database and then people said well the
databases can be slow so we wouldn't
want like a level two cache for some of
this stuff too so now we got our state
sort of spread around three different
places and then people said well that
database is cool but like ten
microservice would be even cooler and
separating our services by unreliable
Network boundaries is gonna really make
things better and so now our state
actually lives in you know I don't know
seven or eight places and with these
client-side applications now we've
actually got our state in a brand new
place right so we've already had all
these trials and tribulations dealing
with this state on the server well now
we've got to deal with it on the client
too and a lot of these frameworks don't
really take that into account so I've
devised a trademarked test called the
shopping cart test and it's a good way
to evaluate I think the effectiveness of
JavaScript framework so this is I don't
do you have Amazon in the UK is that a
thing I assume I assumed I just I never
know so this is Amazon's Shopping
homepage right and this is like a
classic ecommerce experience this is one
of the simplest sort of web application
paradigms that you can imagine and so in
the world of components right maybe we
start chunking this apart we've got
we've got the header with the search bar
and then we've got you know the shopping
cart itself we've got to proceed
a button that's cool and those
components are pretty big so we want to
kind of keep breaking those down right
that's that's the advantage of
components is we can kind of get these
small isolated reusable chunks so we
start breaking down further and we keep
breaking it down right that seems great
we've got this kind of component
hierarchy right components all the way
down you might say but there's a problem
with the component abstraction if you
look at those red boxes and I'll remove
the the component outline if you look at
those red boxes if I click on that
delete button or if I change the
quantity or if I add that item at the
bottom right corner to the cart a bunch
of things on the page need to change
right my subtotals need to change if
I've added something to the cart the
upper right hand icon needs to change I
need to have you know it needs to say 2
right and it seems like that should be
really easy but it turns out it's not so
let's talk about how angular handles the
shopping cart test if you've never seen
angular before this is straight from the
angular docks
this is an angular component the way the
angular originally decided that it
wanted to handle state management was
with inputs and outputs so if you've got
a parent-child component relationship
the parent component can pass data as
inputs to a child and the child can fire
events when somebody you know clicks on
the button inside of or something that
the parent can listen to and that makes
a lot of sense of to ative lis right I
mean if I've got a child component I
want to give it things and I want to
know when things happen in it and so
that seems like a good idea
so in actually so this so this is a very
simple component it takes a name and
then it's got kind of this on voted
events when I click this button it's
gonna fire this event so this is the
child component in this scenario and
here is the parent component and so you
can see that the name and the on voted
things are underlined in red and that's
kind of it interacting with the child
component now there's a couple things I
want to call out here one and at least
in case of angular you're doing it
inside of a string template and so
you've actually got a lot of risk here
if you wire this up wrong if you have a
typo or something
usually don't find out until runtime and
they're starting to change that they're
starting to do ahead of time compilation
and a few things so it's hopefully gonna
get better but a string template is
really not the best place to be doing
this wiring the other thing you'll
notice is that it's kind of a weird
syntax that ng4 that star up there is
kind of an odd an odd thing so it's not
actually real markup it's the special
angular markup that only angular can
understand but so you've got these
inputs in these outputs how do they work
as far as the shopping card test goes so
if I say I change the quantity of
something how do I get it to update the
subtotals right so we've got our
component hierarchy and so we'd say
we've got the quantity drop down
he needs to fire an event up to his
parent his parent probably not the top
app component says okay I'll fire that
up as well until it gets up to wherever
it needs to go and then it has to
plummet all the way back down so you
actually do get an awful lot of plumbing
an awful lot of boilerplate an awful lot
of situations where like you could
really screw this up and like you're not
gonna know till runtime and so plumbing
is not not great nobody likes it and the
angular people recognize that and they
said okay so this is this is the basics
for simple app to use inputs outputs the
community has now come up with a global
state container for angular and so
you'll actually see this global State
thing is actually really common across
all of these new JavaScript frameworks
it's how they all sort of work and
manage the state thing but ng rx is one
of the last ones on the market
it was patterned after Redux which we'll
talk about in a second but the downside
of it is that everything is in
observable and so you've got kind of
this this global state bag that gives
you back observables that you can
subscribe to for when things change I
will say it just beware observables they
sounded good at first kind of like limp
Biskit did maybe in the 2000s but I
think as time has gone on it's it's it's
it's harder to make a case for
observables and using them and and the
reason is because there are collection
of items over time right the minute you
add time to any sort of equation things
get more challenging things get more
risky the other thing is is you've got
hot versus cold observe
so an observable is hot if it starts
pushing out data when the app wakes up
and observable is cold if it only starts
producing data when you subscribe to it
the problem is you don't know which one
you're dealing with until you subscribe
to it there's no pattern there's no flag
that you can check there's no way to
know the other problem is that there's
finite versus infinite observables you
don't actually know if the observable
that you subscribe to is ever gonna stop
sending you data and sometimes that
doesn't matter but sometimes if you've
got more than one observable that you're
trying to flatten together if you pick
the wrong flattening strategy and you're
dealing with infinite observables your
apps just gonna hang forever and so
there's a lot of risk with these
observables and the other thing is is
about two years ago async/await support
became more widely supported in babel
and typescript but it only works with
promises so if you want to use
observables you can but you're still
gonna deal with callbacks there's no
syntactic sugar to really help you like
there is async await for promises and
I'm not saying that promises are the
best they have their own problems but
like you know I would just be very leery
of observables plus people get really
excited to chain things together with
observables and so you get these like
just crazy logic chains that are very
hard to debug and there's a whole bunch
of other good reasons to avoid angular
for one thing the unit testing story is
very difficult it is almost impossible
to write a component test in angular
without angular CLI like if you try and
spin it up yourself can't be done
angular CLI makes it easier but angular
CLI doesn't work with all applications
especially if you've got like a hybrid
angularjs angular application it's not
gonna work great
forms are complicated performance isn't
very good in the default case unless you
change the detection change detection
strategy and the upgrade trend bill is
just ruthless so for example between
angular 4 &amp;amp; 5
they deprecated the HTTP client that
they had created in favor of a different
one so as of 6 you actually have to
throw away all of your old Ajax calls
and use the new client which I'm like
you guys they had that chance to make
that change between angular 1 and
angular 2 why are we doing it between
angular form
right doesn't make any sense so anyways
my recommendation is don't use angular
so what about view right so view is
actually one of the newer frameworks on
the block it's got a lot of community
support people are really liking it and
the kind of the rub on it or the TLDR on
view is that it's a lightweight angular
sort of what angular 2 should have been
is what some people have said and just
like angular 2 you compose with
components everyone's very excited about
components and so they've actually got a
really their component hierarchies a lot
better-looking than mine actually and
they've got the same thing as anger
they've got inputs right they've got
kind of their own data binding syntax
and they've got outputs and as we just
talked about that doesn't work great for
big applications so how do we get the
events from the bottom of the hierarchy
to the top right if we go back to our
shopping cart example I changed the
quantity it's the same story we had in
angular 2 we have a lot of plumbing
ahead of us but the view community
actually was realizing this problem as
well I may create a thing called view X
and view X is a lightweight global state
container just like ngr X the big
difference is that it doesn't use
observables which makes it a lot easier
to sort of reason about and deal with so
essentially when a component makes a
change if I as an action store listens
for that action the store updates itself
based on that action and then it
triggers updates to the rest of the UI
any practice that works pretty good
overall view is simpler than angular
it's got a decent global state container
it's lightweight and it mostly has good
performance really in general it's a
pretty good alternative to angular the
big downside is it still uses
string-based templates so you've still
got these situations where you can wire
things up incorrectly and you don't know
until run time and again the tooling is
always improving but it's something to
think about so finally we get to react
right so this is the one that I think is
is potentially the most interesting and
that if someone if it was my money
if I was gonna pay someone to build a
single page application with my own
money which I don't know if I'd do but
if I if I did I would say hey you have
to use react and the cool thing about
react
that and it was you know this is kind of
prevalent now but it was the first one
the heaven was called a virtual DOM and
when I first read the white paper on
react and why this was interesting I was
really excited because what I've always
wanted to do is just repaint the whole
page like you can with server rendering
if I click a button if I change the
quantity drop-down I don't want to like
figure out which pieces to change
I just want to repaint the entire page
up until react it was too slow to do
that so that's why angular had changed
tracking right dirty checking that kind
of thing but with react what it did was
a virtual Dom so rather than have the
actual Dom it would keep it in memory in
memory representation of the Dom and
when something happened you would send
it hey here's the new Dom that I think
you should build and it would do a diff
on that Dom it would only update the UI
elements that actually needed which was
pretty cool the other thing that the
react folks came out with right out of
the gate was the flux architecture and
so you know literally talk about flux
anymore but it was this unidirectional
data flow of you know the component
fires an action the action is listen to
it in the store the store updates itself
and publishes updates right it's this
easy flow sort of reason about and these
days that's all done with Redux so you
don't even need to think it's sort of a
de facto State container in the react
world there's loads of documentation
it's really simple to understand for the
most part and it takes a lot of the
pages out of the functional playbook so
that you know the functional programmer
people they're always against mutable
state they don't want you to be able to
just like change state willy-nilly they
want you to pass data into a function to
have the function returned you know some
sort of immutable value and that's
basically what Redux does it uses the
concept of code reducers which are
basically just functions that take
inputs and give immutable outputs so in
the case of the shopping cart tests in
react it's really easy you change the
quantity button right you just repaint
the whole page and react is smart enough
to do that diff for you and make it
performant to boot you get a few other
advantages with react in my opinion one
of those is JSX JSX is super polarizing
some people really think this is like
the worst thing that's ever happened but
I think it's cool because the other
alternative is string-based templates
and so with JSX this is a JSX example
but this is a javascript file so even
though it looks like we're writing HTML
we're really not behind the scenes that
transpire is actually converting the
staples and what's cool about this is
that we can actually use JavaScript
functions right inside of our templates
and what's even cooler about that is the
tooling knows if that function exists or
not and you get great development time
and tell a sense in vs code or whatever
IDE you choose to use and so this is
actually a react component and it it
sort of looks weird it looks like HTML
kind of right but it's actually
JavaScript but as a user once you kind
of get used to this intermingling of of
JSX and sort of JavaScript it actually
works pretty good and you kind of wonder
why everyone was so excited about
separating the templates from the logic
all those years ago so there's loads of
pros to react but the other one I want
to call out is that react has a server
rendering strategy it actually from
modern it was day one but it's at hey
you'll get better performance if you
serve a render and then kind of wake up
the interactivity part of your app so
react has a server rendering story which
is great for websites that need SEO it's
got a great community it's got a really
cool app called create react app which
is like a kind of a bootstrapper you can
just sort of like initialize a react
application real quick with all the
settings and stuff it has great unit
test tooling actually for the most part
and one of my favorite things about the
react team is that they have a
commitment to backwards compatibility I
think they're on version 16 or 17 now
and they haven't done any major breaking
changes there's been a few but they
always document them really well
they always deprecated them for a long
period of time and they always give you
an upgrade path and so I think that's
you know as a developer that want
something to be maintainable long term I
think that's that's pretty huge but
there's even more that I like about
react and these days everybody wants a
mobile companion app right so react has
react native so if you want to build
your web app with one tool set and you
want to go to a mobile app with the same
tool set you can and so it's not it's
not you know it's not like you're using
divs and spans and react native you're
using sort of
iOS or Android specific components but
it's the same tooling and if you've ever
had to deal with examine forms or one of
those other sort of cross-platform
libraries the react development time
story is much better it's much easier on
the developer and you can use typescript
now so if you like type like I do I
really like types you can use that as a
first class citizen inside react so
there's there's not only JSX
there's TSX and so then in you know
people have released all the Taipings
files and everything for react so you
really get a lot of great compile time
support with reacting out to if you want
it and I think that's pretty metal
so in closing right your end-users don't
care what javascript framework you use
right
they only care if it makes your site
work badly so as long as your user
experience is good serve a render it if
you can or you static site generator or
whatever it doesn't matter
people don't care prefer server
rendering and if you can't serve a
render prefer a framework that has a
server rendering story make sure that
there's some way that you need SEO or
you need performance or accessibility
that you can actually render from the
server it solves so many headaches and
what we see time and again is that the
more JavaScript that you have the more
problems you're gonna have I wanted to
make a slide that was like you know mo
money mo problems but like more
JavaScript more problems that didn't fit
the metal vibe side I left it out but
less JavaScript is always better and you
should use frameworks that you that have
first-class solutions for state
management so if you've got this UI and
when you click over here you need over
here to update you're gonna need a state
management solution and so if the
framework that you're using has one from
the start that's really great
and at the end of the day framework
should make your life easier so don't
use angular but ultimately I guess my
point is that we're making websites
we're not launching rockets and that
some of these things are ultimately a
little bit more complexity than we need
and finally to end it I did a Google
search actually for what is the most
metal thing I got just Google the most
metal thing and at that point Google
knew because I've been really on Google
Images a lot looking at eighties metal
stuff it
that I was when I said metal I meant
heavy metal this is the lead singer of a
Norwegian black metal band who always
performs wearing that owl headdress and
I thought that was in fact pretty metal
so that is all I've got I generally
prefer to do like if you've got
questions just come talk to me after
this I'm just like I'll be over here on
the side or whatever or if you want to
yell at me and tell me that my views on
angular are heretical and I'm a big jerk
that's cool too so yeah thanks everybody</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>