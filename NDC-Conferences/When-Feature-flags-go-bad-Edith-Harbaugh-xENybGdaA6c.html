<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>When Feature flags go bad - Edith Harbaugh | Coder Coacher - Coaching Coders</title><meta content="When Feature flags go bad - Edith Harbaugh - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>When Feature flags go bad - Edith Harbaugh</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xENybGdaA6c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay somewhere in here the the slides
will catch up with me so welcome
everybody I'm Edith Harbaugh and I'm
here today to talk about when feature
flags go bad and I have some very lovely
slides that only I can see so I'll start
with that reducing myself I'm CEO and
co-founder of lunch dirkly we are
feature management platform so I've
traveled basically all over the world
talking to different people using
feature flags what I'm gonna talk about
today though is not a pitch for our
product I think your life will be easier
if you use our product but you don't
have to use our product choose feature
flags they're at their a software
technique that's completely separate
from us so more about me and how I got
into feature Flags is I started off as
an engineer back when we did yearly
releases so how many people remember do
any yearly release how many people
remember releases longer than a year I
mean so this is kind of the old way of
doing software is used to plan out
everything for about two to three months
you would forensic ly code for about
four to five months and I need to have
three months of QA and then you'd have
kind of this release where you cross
your fingers and double cross them and
hoped everything went okay those days
are kind of dead because
those days are dying and I know that
those days are not dead yet but those
are dying because if you're doing that
sort of release schedule around you the
rest of the world is changing I went up
to Microsoft in Seattle in May and even
they they had originally done three-year
releases and what happens when you do a
three-year release is halfway through it
and if you're lucky it's only halfway
through it the world starts changing
around you so you've thought of
everything that you should build you
started to build it you're going on this
track down the to release and all of a
sudden a new browser comes out a
customer wants something else this cool
phone that you thought you would work
with suddenly is obsolete or there's
another phone so this is why releases
are going faster and faster after I was
an engineer for a while I kind of got
sick of building stuff that nobody
wanted I thought that I was a pretty
good release engineer and I'd built a
lot of things but sometimes when we
released them nobody cared this was
incredibly painful especially if you
spent a lot of time on something so then
I became a product manager because I
figured I was smarter than my product
manager product manager is a really hard
job like I don't know how many in here I
think I'm guessing most people in here
are developers given that it's a
developer conference but product
management is also really challenging
job because you're trying to figure out
what to build after that I was tired of
building stuff that I'd talked to
customers and they liked it but nobody
knew about it so I went in a marketing
so this was kind of the final stage of
let's build the right thing let's make
sure that people will actually use it
and let's make sure they know about it
from all this experience I got really
intrigued by feature flags so how many
people currently use feature Flags how
many people are thinking about using
feature Flags yeah so feature flags to
me we're really great from all angles of
being a product manager and engineer and
marketer so a feature
its most basic level allows you to turn
on and off little chunks of
functionality and that sounds really
deceptively simple until you start to
think about some of the use cases that
you can do which are on these beautiful
slides that you can't see so the the
most basic use of a feature flag which
is really powerful is a kill switch
releases can be really stressful
particularly if you're getting some
early releases stressful in its own way
because you're basically releasing code
and no matter how much you've tested
something in a staging or dev
environment as I've tested my slides
many times once you get to the
real-world stuff inevitably breaks you
know the thing that you thought was
going to go perfectly suddenly doesn't
work so a feature flag really gives you
the benefit of a kill switch
first of all so separate from deploying
a new release you could turn off a
feature one of the worst experiences I
had as a back when I was engineering was
we done a release where we actually
destroyed customers data so this was
worse than a buck this was when you
installed it it would go in and start
deleting files this sounds kind of minor
no it does it sounds really horrible
until you realize that our customers
were the major newspapers of the world
so we had some pretty furious newspapers
calling us up saying like you know
literally with what the hell so we we
very hurriedly did a fix pack which we
thought fix the issue if you've ever
done a fixed pack in a hurry the chances
that it fixed the issue or high the
chances that it breaks something else
are also very high so we we did a fix
pack a through H
because we were just kind of in this
panic state where you don't really have
time to test something so you're like
but something's really wrong so you
listen let's just hurry up and get this
and the more you panic the more you get
into bad state if we had feature flags
what could we have done we could have
just said okay this is a bad release
stop that's it and then we could have at
our leisure had the time to go back and
retest and figure out what we were doing
and not break each other things so I
love I love kill switches first of all
because they just give you a lot of
peace of mind every time you put some as
I said before every time you put code
out there's this mix of fear and delight
and delight because it's really exciting
to see something that you've built
suddenly out of the world and fear
because something you've built is
totally out of the world so kill
switches are really great use of feature
flags so controlled rollouts are another
really good way to use feature Flags how
many people here already are using
controlled roll-ups cool so we we we use
lock controlled rollouts at lunch darkly
for things like will do a percent roll
out if something is something that has a
high system load one of the best stories
I heard from a customer was they're
testing a new micro service and every
day they were try to turn it up a little
bit more except where they looked at
logs every time every day around noon
subtly the the usage went down to zero
and they asked the engineer why does it
go down to zero at lunch and he's like
well I'm at lunch you know that's
something goes wrong I want to be able
to enjoy my lunch
oh it makes perfect sense it's like it's
like so so eventually it so you would
you know turn up to 30 and then go get
lunch and then after lunch turn up to 40
because like why do I get paged when
you're on lunch when you think about
this but this makes a lot of sense so
controlled role that's a really good way
to wave across a population and you can
get pretty sophisticated in terms of not
just an overall percentage of population
but you can for example say 10% of
people in New Zealand or 50% of people
coming from a certain IP address and
it's a good way to test scale another
thing that you can do with feature flags
which is fun is you could give them
early risky features to your best
customers it's somewhat paradoxical but
the people who like your product the
most are usually the most forgiving so
I've had customers of lunch Darkly who
will give new features to everybody with
above a certain Net Promoter Score so
Net Promoter Score basically means that
people really like your product if sub D
is above a 50 which is considered a
pretty pretty high Net Promoter they get
the product first
they say that this actually has made
their Net Promoter Score go up even more
because if it's a risky new feature
people feel included and they feel like
they're getting it first something that
we ourselves do at lunch dirkly is we
just added more SSO support and the
customers who'd asked for it we gave it
to them first
and they were very helpful in winter
development cycles so they could get
access to it first we could get feedback
from them and then we could roll it out
to everybody else awesome
another another way you can use feature
flags is to block people there's a lot
of reasons why you might want to block
people to an early feature the most
notorious one is a CEO rule usually you
don't want your CEO to see early code
because they're usually pretty picky and
it's kind of like well this isn't quite
ready yet you know it's not ready for
feedback or you might have other groups
within your company where you want to
kind of shield them hey sorry I dark
launched my own uh my own presentation
thank you I'm ready for your patients by
the way this worked yesterday hey so
these are the beautiful slides you
missed just just so I did have them
that's the kill switch early access and
blocking so there's a lot of reasons why
you want to might want to block people
explicitly so there's inclusion which is
letting people into it early beta and
then there's exclusion where there are
people who it might be destructive if
they get early access even within your
company it might be another group where
you know perhaps they're working on
another part of the system and you don't
want them to be exposed to it yet maybe
you have somebody who's very picky like
your CEO who you don't want to see it
and then even extra dough to your
company there's a lot of reasons why you
want to want to block different people
you might want to block an IP if you
know it's a competitor you might want to
block certain domains if you know
they're the press I've heard of people
who block everybody from at TechCrunch
I'm seeing new features and you might
want a a very common thing as you if
you're in a SAS world and you're selling
to other businesses you might have some
customers who say I never want new
features and an old company we call this
the Morgan Stanley rule because they
never wanted anything new so basically
they wanted everything to kind of bake
for about six months to a year before
they got it
so we would use block girls to
explicitly block them from seeing new
features this is a good way to the flip
of using too early access is kind of the
late access which is here which is
there's always some laggards out in your
population who really don't want new
features as opposed to the early
adopters who do so right now I just
talked a lot about how awesome feature
Flags are and I think feature Flags are
really a great way to improve your
development now I'm going to talk about
some of the pitfalls of feature flex and
I hope that the takeaway you get is that
one feature flags are really really
helpful for your
development process they allow you to
speed up development because you're
showing new features to your new users
first they allow you to reduce risk
because you can always turn stuff off
they allow you to get good feedback
however they could be incredibly
destructive and a really bad form of
technical debt if you're not careful so
I'm gonna talk about bad feature flags
I've seen this was a customer somebody
who do not use launched early this is
night capital so how many how many
people have heard of the night capital
story all right so I'll give it recap
for everybody else so I actually wrote
an article for this for info queue which
is basically how to lose a lot of money
very quickly what they did is they had
feature flagged some features and they'd
feature Flags them deep in the code and
then not really told anybody so they had
some very stale old feature Flags called
powder peg which were in they're still
in their code they did a deployment
where they thought where they were
tested something else and flipped this
feature on what this flag was was so
that at a stage heat environment they
could very quickly test high frequency
trades it was not meant to be used in
production ever and the Murphy's Law
that you just saw if something should
never be used in production it's getting
it used in production so what happened
was somebody flipped this flag and very
quickly they started doing very high
speed trading and lost about five
hundred million dollars in about twenty
minutes
and this is real money this is real USD
it wasn't a play simulation this was
considered legitimate trades that they
could not unwind it took them about two
hours to figure out what had happened
because this was an undocumented feature
flag that it theory should never have
been flipped and by the by the time they
caught it it was too late let's that's
probably the worst case they've ever
heard of a feature Flags gone bad but I
love collecting horror stories so if any
has the worst one come talk to me so not
only let me talk about how you can avoid
such in situations like that all right
and vigorously named flags so feature
flags are really powerful technique in
your to control code make sure that
you're treating them as a first class
object and start using a naming
convention a terrible name is something
like user option to like if you walk
away from that for five minutes even you
are gonna forget what that thing is
other bad naming conventions are things
that are a negative for example on
unused feature what does that even mean
so make sure that when you're naming the
flags it's something that you understand
very well and not only you but everybody
around you
I really recommend if you start using
them heavily somewhere in your wiki or
just decide that this is the convention
that you're gonna use I've seen people
who name them after their JIRA tickets
which is actually a pretty good one
because if you have a good standard for
your JIRA tickets this will cascade over
if you don't have a good standard for
your JIRA tickets that's a totally
separate issue that I'm not gonna touch
this is really important because people
across your organization might have
access to this flag and you want to make
sure they understand what it does
because if they don't they could just
flip it so going back to the powder peg
example nobody really knew what that did
powder peg what does that even mean so
when you're using a flag make sure that
everybody knows exactly what it is this
also it gets important if you start to
use feature flags or heavily I've talked
to people who have hundreds and then
thousands of flags that's what it's
really important to have a good naming
convention because otherwise you're just
accumulating thousands of flags that you
want to be able to quickly know again I
like the convention of linking them back
to JIRA ticket because even if you have
a short name in your code you can always
go look at the full ticket for what this
thing actually controls
overused flags this is a real sign so
what happened here was that uh I
somebody had wired use the same fuse for
both a light switch and elevator this is
great if you want to turn off the lights
this is not so great if you're in the
elevator at that moment when you're
using feature flags be very careful that
you're using them only in places that
you understand if you use a feature flag
in two different places you run a high
or multiple you run a high risk of
accidentally toggling the wrong thing on
and off a real-world example of this is
I heard about a team where they both
thought that they owned a flag and they
didn't have a weight they would
configure their feature flags by doing a
full deploy so a basic way of doing
feature Flags is to have a config file
somewhere that's a text file and then
when you run a release you know just
manually changing it true to false this
kind of is to me and not an optimal way
to do it because they kind of you miss
the real power of feature flies which is
controlling a release separative
deployment if you're doing an a config
file this means every time that you want
to change it you have to do a full
redeploy the customer I talked to
yesterday I said it I asked him if it
took about a half hour and they all
started laughing when I said that for a
redeploy they're like try half a day so
if you're taking a half a day every time
you flip it flip a feature flag and you
flip it wrong you're looking at a pretty
long lag time and you're really missing
out of the value so what this people who
are is not a customer and not using
lunch Darkly had done as they heard
coated all their feature flags and two
config files and they had not documented
anywhere really what they did and both
teams thought that they actually owned
this feature flag so when they ran a
release one team would flip it on their
team would kind of be annoyed and going
and flip it off and it took them about
two days of like flip flip flip flip you
know to really track down what had
happened because the root causes of this
were number one using two config file
a future flag which is bad number two
not really documenting what it did so
people misunderstood it number three not
having any sort of audit controller
permission over it
so that anybody could flip it and took
them a long time to track it down so
when you use a feature flag think about
who has access to it and why somebody
should touch it and design that in from
the very start conflicting flags this
goes back to the the thing I try to
emphasize at the beginning it which is
when you start easy to feature flag
think about why are you using it if
you're using it to control a front end
system make sure that it's scoped to
that if you're using it to control an
overall new new new feature make sure
it's scoped to that where you could get
into a lot of trouble is for example if
you have one feature flag that controls
a dialog box on the front end and other
controls a back-end system that that's
relying on and you start flipping these
on and off separately because you'll end
up in a very bad case so this is this is
an American sign when you look at this
do you have any idea if you could Park
or not so so if you have conflicting
flags what you'll what you'll get your
your system into a state where you might
have very odd behavior the worst case I
heard of this again not a lunch turkey
customer is LinkedIn LinkedIn uses
feature flags very very heavily if
you've ever looked at LinkedIn you'll
see some kind of new features coming in
and out they have a homebrew system that
is kind of legendary for how poorly it's
maintained so what happened one day is
somebody accidentally flipped all the
flags on and all the flags were on with
some crud that had been in their system
for at that point about five or six
years so like the UI two started
disintegrating because it was trying to
old low to old features which conflicted
with new features which conflicted with
another newer feature so when you're
using feature Flags think very careful
about exactly what they're scoped to and
as I
your system around that this is usually
one of the biggest traps of feature
flags is if you use them heavily you'll
start to have segmented up your code by
them if you have poorly designed code
this can get you into trouble this isn't
to say don't use feature flags this is
to more say if you use them too
carefully about how you're controlling
them and how you've architected them
into your code so this is another
real-world horror story that I heard
from an American company is this uh so
they had also used feature flags very
heavily and they had in their UI and
their admin console one that was labeled
do not ever push this and the reason why
they were labeled do not ever push this
was that they didn't really know what it
did and they didn't want to pull it out
but they thought they might need it
someday you can see where this is going
so one day and I heard this from the
product manager that worked there they
started getting a flood of support calls
and as support calls bad enough that the
CEO and this is a public company got
phone calls from angry customers like so
this is a bad something really bad had
happened what had happened was there a
document management system and people
can no longer upload files so if you can
no longer upload files your document
management you're basically dead in the
water it took them about four hours to
figure out what had happened and what
had happened is somebody had pushed the
button and the button was there so that
to temporarily block people from
uploading files so somebody had put this
what do you think about it somebody put
this feature flag in for a very good
reason which was probably they have had
issues in the past with people uploading
too many files very quickly which could
cause a little significant system load
so they'd feature flagged it so they
could temporarily throttle this and shut
people off however they had left this
feature flag in and what had happened is
that nobody really remember that it was
there and then years later somebody
pushed it and nobody could upload a file
so it took about as I said about four
hours of
to figure this out and to this day they
don't know who turn it on or off because
they don't have an audit trail and they
didn't have any permissions so I asked
ask the product manager so did you take
that out and they're like no they put a
bigger do not push this button and as
she said the same thing happened about
three months later but it only took them
about an hour to track down what
happened so this is kind of leading me
to to this which is left over flags yeah
so this is not my actual fridge I
promise but this is what your code will
look like if you're not diligent about
cleaning up flags if you're using
feature flags the best way to think
about it is from the start why are you
using this what's a good name for it and
even plan from the beginning how are you
going to remove it a best practice is
right when you're putting the future
flag into also already have the code
ready to go to take it out basically the
theory of wash the dishes before you
even eat if you've built the feature
flag and you've used it and now you're
trying to figure out how to remove it
it's gonna be much harder particularly
if you've used it in multiple places and
you've not been very clean about it
however if you build it for this start
you can just it's a very easy task to
pull it out um I love to the customer I
talked to yesterday they had a phase in
their release process which was the old
way would have been just build ship now
they have launch and then they have a
phase after that which is tidying and I
love that because the old the old way is
that you you launch something and then
you walk away the new way of doing
something is that you launch something
and you launch it to certain people with
feature flags so you launch it to maybe
your best customers you launch it to
your support team you launch it to your
marketing team first you get reaction
you iterate you keep tweaking that
that piece of code over and over and
over until it's finally good enough to
go to everybody and then you tidy the
feature flag and remove it as an
explicit step that's the happy path I've
also seen what happens sometimes is
sometimes the feature doesn't make it
and this sounds really sad until you
think about it sometimes you build kind
of a stub of a future I've had customers
who say we did a spike we started to
build something when we got some
feedback from customers it turns out
they didn't really want it we just
killed it then so this actually saved
them several months of work to quickly
kill a feature early before they'd
invest a lot of time in it so left overs
are actually good
not these lifters don't eat those but
feature flags to give you the ability to
very quickly get customer feedback and
then take stuff out if it doesn't work
so tidying phase I love that phrase it
beats me but they think about a feature
flag as something that has a full
lifecycle from name architecture clean
up hey
so here if I had to distill everything
down to three to three easy ways to
feature Flags successfully like
carefully naming conventions naming
conventions not just that you'll
remember but that everybody in the team
will understand our super important lock
down access I think think again about
who needs to actually ever change this
feature flag if you have it in a config
file this is incredibly dangerous
because basically anybody who has write
access that config file can change it
and an even more config files because
their texts are kind of notorious for
typos so you can you can very easily
make a mistake just a simple one like
saying ye instead of yes or tre instead
of true could really screw up your code
it's a lockdown access in terms of who
has rights to change what it could be
simple or could be fancy I've seen
people who are more mature with feature
flags they'll actually have separate
right access for DevOps who have access
on production and QA who have practice
access on QA and then they'll even start
to get into customer support will have
different access than DevOps and the
reason for this is that you want for
example a customer success person to be
able to turn on and off features if
their people are complaining about them
but don't want to have them have total
system access so this is actually really
powerful if you could start to use
feature flags for different groups
within your company and probably the
biggest thing that I will reiterate over
and over again
clean up your flags like when you're
done with them
get rid of them otherwise they're kind
of a ticking time bomb of technical debt
because somebody will eventually flip
them when you don't want them flipped
that's not to say that you can't have
permanent feature flags I have seen
people use permanent feature flags as
basically a subscription management
system if you could accumulate Flags
into for example if you have a gold of
platinum and silver tier and then you
have five features that go into this you
can use feature flags to manage that
however if you are doing that be really
clear about that don't mix and match
temporary flags of permanent Flags make
it really obvious which ones are things
that are part of a bigger subscription
plan and not a temporary release flag
just be careful
so where where is this all going I guess
once you once you started using feature
Flags where what what's kind of next
I'll talk about the coolest customer
examples I've seen feature flags really
allow you to treat your code as a living
object when you think about it if you
have dead if you have branches or code
that's basically kind of waste because
you have code that's being worked on
that nobody could see and as soon as
you've branched you've accumulated
you're starting to accumulate a clock of
technical
because around you everybody else is
checking in their code and other
branches and eventually you're gonna
have to reemerge so the shorter branches
you have actually the quicker you are
could get to market the quicker you can
show something to somebody the quicker
you can get feedback the quicker you can
decide is this something worth keeping
or ditching so if you're using feature
Flags effectively what you're really
doing is you're reducing waste you're
allowing yourself to get really quick
cycles to market and this is really cool
like the the so everybody laughed at the
beginning they said well your releases
aren't dead yet I think it's so much
more fun and so much more powerful to
work on something where every day you're
delivering value to customers versus
once a year so you just get that many
more chances to really deliver value to
your customers that many more chances to
figure out that hey this thing we're
working on maybe it's not the best idea
and that frees you up to go work on this
thing over here which actually is a much
better idea so feature flags and summary
can be very dangerous if misused are
really powerful if used correctly so I
really encourage you to walk away here
with a couple horror stories and think
think carefully about feature flagging
but also with the bigger takeaway of you
know this could really help your
development lifecycle and not just you
as developers but also the rest of the
business
for example if and the the old days and
I on both sides of this developers never
as a developer area was always scared of
shipping stuff because if something
broke I would get blamed and the product
manager would say why can't you ship
this I'm like oh that's not ready
yet it's not ready yet it's not ready
yet and so then the product manager
would get mad because everything would
be late
however the flipside is if you shipped
in it was broken you would get yelled at
if you're using feature flags what you
can say is hey this is a really early
access you the product manager gets to
pick who gets the early access and if
you're not happy with the quality you
just turn it off so this really
short-circuits a lot of the the
destructive loops within development in
terms of you you give the keys to the
product manager and say you
get to choose when you want so I left a
lot of time because I love talking about
feature flags so do people have
questions yeah that's a great question
so the question it was temporary versus
permanent flags how do you how do you do
this I'll give a brief plug for my own
company launched darkly and we we let
you label something that's temporary and
permanent we treat them separately in
our system if you're using your own
homegrown solution I would just do the
same thing I've have it be some sort of
flag on the flag if you really want to
do kind of a crude hack I would say just
use a naming convention like I've seen
people do like temp underscore and perm
underscore if you want to get a little
more fancy you'd have to start building
that in
is there a reason they want them to be
per minute yeah so that's really tricky
and for that from other people the so
what if we need this yeah so what if
what I've seen people do in this this
really gets more no process change is to
have a three-month rule which is if you
haven't had to turn it on or off for
three months it just automatically gets
pulled and that the reason for this is
that you're you're accumulating debt by
having that flag bear because you're
creating a path that could at some point
get turned on and you're probably not
actively testing it
you're either actively testing it with
all the other flags in which you're
incurring a debt to keep that branch up
to date or you're not and you're
incurring a risk that if you ever do
turn it off it might could flick with
everything else so three months is
usually long enough that people will
feel okay if seen people go a little bit
more stringent with like a three week
but then people kind of get nervous but
by three months of past most people have
forgotten that thing exists but that
that's really a process change or just
um have you been on both sides as an
engineer and as a business I don't think
the business sometimes understands the
cost of maintaining all these old
branches around because they are
accumulating just a weight of unit tests
that have to be run against them does
does that does that answer your question
yeah and then the trick is to remember
the three-month rule yeah that's a good
question is your question about
migration or about whether or not to
take data
yeah that's tricky um and let me let me
answer in a high level because
everybody's data is a little different
design it in from the beginning which
sounds obvious but have a higher level
what I've seen other people do is have a
higher level a feature flag that
controls two different dependencies and
that way that you can always make sure
that both of them are turned on or off
at the same time I've also seen people
branch at different levels where they'll
have a UI that's capable of handling
both sorts of data and then flipping
that within it these these are pretty
high level strategies though yeah
it is so dependent on a given company's
architecture it's it's hard to give a
generic answer it really depends on how
you've built your own your own
underlying architecture I've seen people
get very granular at a feature level
where every every JIRA is essentially a
new feature flag and that's every
eyebrows being raised yeah I've seen
this um and that that's very independent
of the actual tears a more at a feature
level I have seen also people do it at
every micro service gets its own feature
flagged but it's it's really dependent
on more how your own system is
architected and what works for you so
our questions I love questions
so the question is what about on-prem it
depends out on premier on-premise lake
do you have any sort of remote access to
it I'm sorry
so yeah future flags are really a
technique that's best when you have some
sort of sass access I've seen people do
it on pram if they'll do if they at
least have like a daily way to go in it
go in and update things but that's
really starting to degree than the use
of feature flags because you don't have
the ability to configure stuff so
quickly I mean it the way I think about
it as feature Flags are very useful if
you're in more of a cloud model and then
they're basically the way I think about
is there a lightweight access control
level where you're basically tuning in
and what people have access to if you're
on Prem that kind of falls apart because
people have access without having to go
through the cloud so just does that
answer your question yeah I'm sorry
yeah I should have said that up front
and let me I'll do that next time I do
this talk always make sure you have a
default just as a best practice always
have a known good state of a default so
that if for whatever reason you can't
read what it should be there's something
to fall back on the question is what
about testing this is that's a great
question
I've seen people do everything from very
lightweight and just assume that prod is
where they'll catch everything well to
running every combination automated in
some sort of staging or dev I'll say
having tested thoroughly and to end
staging and missed fatal out bugs in
production I usually try to get stuff to
production as quickly as possible
because that's when you'll always see
the stuff that you didn't see before
as for testing combinations this is why
I really emphasize removing them and I
think that's to the gentleman in the
back spoiler you are adding a weight
every time you leave one in there
because if you're not testing it you're
as I said before you're incurring a risk
that it might conflict with something
newer does that answer your that answer
your question I think it really depends
on how aggressive you want to be in
terms of you know there's the one side
of always
test and production versus let's test
everything over here so so they and it's
really fun cuz I'm so we have had
customers now who've been using us for a
couple years and what you said pretty so
much summed it up there's a lot of fear
at the beginning like oh so this means
everything is gonna be crappy and
production and then there's this mind
shift of oh well the crap is often
production and we can turn it on for a
couple testers and have them test in
real life in production because there's
always combinations of data and such
that you're just not gonna get on on a
staging or a QA environment they're just
never going to be the real world so QA
once they kind of get used to it they
love it because like basically you turn
it on for QA they ran through their
tests on production and then you turn it
on for everybody else and there's never
the cycle of hey we tested everything in
staging but we missed these five
critical issues because just we didn't
have the right data
yeah yeah that's a the the quota I got
from my friend at Facebook is you can't
replicate Facebook except for on
Facebook can you give me an example yeah
I've seen people use so feature Flags
are a technique so I've seen people do
everything from they'll manually flip
them and then run silk scripts for
example or they'll have user human
acceptance tests just does that answer
your question yeah yeah oh yeah so I was
I was answering the generic about just
the techniques of future Flags so our
particular product again you don't need
to use your product it just helps we do
have API is where you can flip on
different combinations and
programmatically run them there's a
question all the way the back who's been
very patient so this is a flavor of the
on-prem and and my answer is it depends
at how much access that desktop app has
to the something that could control it
so if it's the kind of desktop app where
it's capable of talking back to you yeah
of course it's just it's just then
something that you can toggle if it's a
desktop app that's in it inside a
firewall and no VPN there's no way to
toggle things so yeah it just basically
depends on how desktop II or on Prem II
you are this is great I love questions
that's the the manual feature flag
yeah yeah the real benefit I'm to go to
back to your testing is that you're
giving people the opportunity to use
software in a real world where you'll
really to your on-prem it's only when
you you test a feature in real life that
you could get real feedback the the
painful way I've done in the past as you
try to point people at a beta server
that nobody ever uses and it's not
maintained and then uh then people get
very confused also great I think this
gets back to the questions about
architecture
I think teams need to kind of find the
right rhythm of what label level to
feature flag if you've never featured
flagged ever and you start immediately
doing every check-in gets a feature flag
that's gonna seem kind of horrific to
your team usually what happens that I've
seen is people will start using them for
a couple major releases like we had we
had a customer that was doing a major
rebrand and they hid that behind a
feature flag and they're like well this
is great and then they started using
them more and more and more and then
they found in their post mortems that
every time something had gone bad they
said well this could have been fixed
easier if we had a feature flag so then
they got in the rhythm of what was the
right way to do it
yeah it I think that key is and I think
this is true for any development
practice is something that the best
practice is the one that works best for
your team so that's why I've tried to
give specific advice but like every team
is a little bit different in how they
develop so figure out the rhythm that
your team is gonna be happy with it use
like same with naming conventions I
didn't say this is the right way to name
things what the right way to name stuff
is stuff that your team remembers and
understands which is different for every
team so the question is I think you can
have two separate questions which is if
you're doing a percentage rollout should
that percentage have a consistent
experience and then the second is what
what if they don't like that experience
a best practice with the consent of the
same experience so usually when you're
doing a percentage rollout you do it
based off of some unique ID so that
people aren't logging in in different
days and getting different states a
separate thing is what if they don't
like it this really depends on how how
whether they have a choice or not you
know there's some features that it's
just like we're switching to a different
search engine or we're switching to this
different back-end you don't really have
a choice as a user what I've seen other
people do though is they do allow users
to opt out so this is a pretty common
thing they'll be a little bit and the UI
like don't like this go back to the old
way this is really I'd say more of a
business decision it's like what more
could happen in this talk
it's really a business decision about
whether you want people to be able to
opt out on new features the the thing
about it that's nice for the user is
they could say well I don't like this
get me the old way the risk is then then
you're stuck maintaining that old way
for a while which gets back to our other
points about then you suddenly have this
old branch that you have to maintain
it's a business decision
I've seen people maintain an old UI for
several years like mail Yahoo still lets
you switch you got to think that's
starting to get expensive for them
though
so that the question was feature flags
versus featured branch scene and what do
you think um I think that so I'll say I
think in the long term and in the short
term and the short term I think people
and this is why I gave a lot of talks
and I love these questions I think a lot
of people are still kind of wrapping
their heads around feature flags I think
people here more sophisticated than most
because they they're still getting used
to it I think there's still people who
it seems incredibly risky to use a
feature flag because the the the answer
I heard before was well this doesn't
mean crap in production and my answer to
that is well you always had crap in
production now you have a chance to turn
it off but it's oh I think some people
are still just getting used to feature
Flags and they need to get comfortable I
think eventually we will get to this
place and actually write an article
called a killer your staging server that
when you that we will move a lot more
rapidly to production and that feature
flags will act then as a control level
for who gets access like if you can
imagine a world where as soon as the
developer commits a line of code it's
automatically deployed off and then
starts being ramped up that that's
really cool but I think that's scary to
a lot of people right now and I do I
want to encourage people to you know
take like steps that they're comfortable
with is an org and get to the place
where they're more comfortable with that
and you know if if people want to hang
out at branches for a while you know
that's if they're making code and that's
what they're comfortable with and
they're productive there that's that's a
fine way to do it
yeah that's a great that's a great
question the question is config versus
feature flag one way I pray to and we
actually have an article about this on
our website but um I think if I could
figure something that you only want to
change at a deployed time and a feature
flag is something that you want to
change independent of deployment so a
config might be something like a machine
variable that you you know you're never
gonna you you basically have to redeploy
and bounce the server the feature flag
is something you want to be able to do
on the fly and and then the second level
of that is the feature flag of something
that you want somebody who's perhaps not
that developer to be able to control so
that's when you start to have more
tooling around it in terms of maybe a
product manager should be able to turn
this on or off maybe a QA manager should
be able to turn this on and off maybe
customer success should be able to turn
this on and off and when you think about
the personas of a customer success
person or product manager you really
don't want them in your config files
like because there's a lot of stuff in
there that it could very easily go very
bad if you had somebody in there so that
that's kind of a line is who's touching
it why are they touching it how often
are they touching it
well I hate to plug our own product but
we we have a we have an SDK for that
it's pretty cool yeah it's cool
we actually um it's really cool you
should just go look at it
well it's it's cool because when you
think about it like they don't ever have
to hit refresh but because we use
WebSockets they can get a new experience
for you instantly I know I'm probably
either the first thing or last thing
before lunch I really enjoy this talk I
am sorry about the slides but they are
all available and I'm happy to email
them to anybody just fill out that form
I'm also giving another talk this
afternoon um so you get another
opportunity to see me and if you have
any feature flag horror stories success
stories questions we have a launch
dirkly booth here we're happy to answer
questions and talk more with you so
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>