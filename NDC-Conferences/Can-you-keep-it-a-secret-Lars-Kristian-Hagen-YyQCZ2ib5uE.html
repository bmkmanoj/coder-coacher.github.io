<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Can you keep it a secret? - Lars Kristian Hagen | Coder Coacher - Coaching Coders</title><meta content="Can you keep it a secret? - Lars Kristian Hagen - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Can you keep it a secret? - Lars Kristian Hagen</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YyQCZ2ib5uE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I am here today to talk to you about
keeping secrets my name is Franz
Christian Hagen and I work at catch my
insta Langer first I'll give you my
definition of Secrets what I mean about
secrets in this context secrets are
assets that no one should have direct
access to except application that you're
developing in addition in terms of the
CIA triangle you may have seen
confidentiality integrity and
availability losing assets the secrets
would be damaging to the CIA of your
application so a hacker for example
would be very interested in getting hold
of this you could use it to access your
services databases and other things you
may be using and it is therefore your
responsibility as software professionals
to keep this secret so what kind of
Secrets are we talking about credentials
and certificates cryptographic keys
digital signing certificates collection
strings they may contain passwords there
could also be other things in your
applications that would fit this
category so I'm going to talk a bit
about the project I participated in a
while back we got some business
requirements from the customer requiring
us to use various external api's and
they had their own challenges so one of
the api's required user specific
credentials and we're not talking about
like the hashed credentials in like what
0 for example we actually had needed to
have the plaintext to authorize
ourselves in addition we need to use an
additional API which required a
self-signed certificate from the
provider with this raised some some
questions how to securely handle this
both the credentials and the
certificates if this got out it could
run extensive permissions in the systems
and we definitely didn't want that so we
started looking into creating a solution
ourselves
using a database and crystallize of the
map to see if that was a viable solution
and in the end we decided we didn't know
enough about best practices which
techniques to use to get to be able to
guarantee that this was secure to our
customer so instead we decided to use a
pre-built hardened solution we started
looking for left and this also brings up
a quote from a security expert that
Bruce Schneier which is quite relevant
on this anyone from the most clueless
amateur to the best cryptographer can
create an algorithm he himself can't
break so this is important to remember
when you start looking into creating
your own solution as our application was
running in Azure already and a customer
I decided on using this platform we
started looking for alternatives there
and there was indeed a solution that we
could use yeahsure key wolfed which you
can see on the left turn right inning no
not really
so it stores and retrieve secrets it
encrypts them so they were encrypted at
rest there's a REST API and the results
or SDKs that you can use the wrap
yourself in a nice experience and the
user interface on Azure where you can
maintain the certificates and keys and
secrets and also controlled access you
can make access policies which are quite
fine-grained the cost is low very low
and reason that is low is because
Microsoft sees keyboard as an enabler
for security concerned potential
customers and having a hardened solution
like this available for low costs can
help Easter mind sees you to get started
yet the documentation is very good and
basically what you have to do is to
register an application in Azure Active
Directory you create your tables and
then you create an access policy using
the application you registered and you
are good
so like I mentioned you can create these
access policies they can be based on
registered applications or users and
they have fine-grained control over what
kind of operations you can perform for
certificates keys and secrets so based
upon this you can also create hanwen
control over who has access to do what
in your key loft so you could imagine
that you have a vault owner you can do
everything you have some people who can
go in and rotate keys for example while
others can only yeah access them through
the application itself using their
applications credentials it has built-in
cryptographic operations meaning you can
do decryption encryption signing
signature verification inside the vault
itself and this opens some interesting
abilities as your keyboard can also be
backed by a hardware security module a
dedicated piece of hardware that can
store your keys in such a way that they
can't be retrieved not even by Microsoft
and these devices have a very high level
of certification to ensure that they are
they are standards so that way you can
imagine you just decrypt and encrypt
using the key in the hardware security
module directly and the key never has to
leave the vault at all you can also set
up all the things which is quite
important for certain accounts of
businesses they have may have
requirements for this where you can log
who access the keys who renews them
delete them and so on so you have a
complete audit trail of all the list
just wanted to mention one thing like
many of the services in agile you get
credential a client ID and the client
secret so you can imagine that if you
use keyboard to store your connection
strings to keep them safe and then you
leave their credentials for the keyboard
in your code or in your accessing so
anyhow them kind of
fix the purpose so I just want to give a
tip there that you can also attempt the
case against Active Directory using our
certificate so then you prime your
application service for example with the
certificate then you don't have to
actually use the secret at all in your
code or in your config so I had two
quick demos to show some simple classes
basically what you need to do is to
instantiate a new keyboard client this
is from the top left SDK this is our
superclass using Azure Active Directory
authentication library for Microsoft
so just for retrieving an access token
so one can opt into this for working
with the secrets part of keyboards you
need the washed URL and as you can see
retrieving and storing the secrets is
very easy to do it's just a single line
of code really you use the work URL and
the name of the secrets
and for storing you pass in the value as
well you can also create certificates
create keys using this like you see here
and it's all very simple to do moving on
to the key operations still you
instantiate the keyboard client use the
access token in this case you use
something called the key identifier
which is a more fine-grained URL which
goes all the way down to identify the
key or to use and it can even append
version information at the enter so you
can imagine that if you rotate Keys for
example and come back later on you can
have that version number stored
somewhere so you actually request the
correct version of the key but I'll just
use the key itself here specify an
algorithm and the encryption and
decryption steps are quite easy actually
you use the key identifier the algorithm
the plain text bytes so it doesn't have
to be text it can be any kind of bytes
really you encrypt it inside keyboard
and you get the cipher text back
and decryption is symmetry by the
ciphertext you get the plaintext back so
to summarize we often deal with secrets
in our solutions they can be what I
mentioned here like certificates or keys
but there could also be something
special for your solution key wolf can
handle that as well
building trustworthy security is hard
remember in Irish law whenever you try
to do something like this yourself
creating it this may be the simple part
ensuring that it is actually secure
that's the hard part and that's why you
shouldn't do that yourself high quality
hardened solutions are available we used
other key both that worked great for us
there's alternatives from Google for
example they have called KMS there's
also a hash a course wolf that you can
use to install yourself if you want to
run it to yourself on premise and
finally it is our duty as professionals
to ensure the secrets remain secret
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>