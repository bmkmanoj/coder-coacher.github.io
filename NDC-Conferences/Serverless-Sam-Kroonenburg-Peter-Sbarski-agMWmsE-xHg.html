<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Serverless - Sam Kroonenburg &amp; Peter Sbarski | Coder Coacher - Coaching Coders</title><meta content="Serverless - Sam Kroonenburg &amp; Peter Sbarski - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Serverless - Sam Kroonenburg &amp; Peter Sbarski</b></h2><h5 class="post__date">2016-09-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/agMWmsE-xHg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay hi everyone hello okay if I'm Sam
and my name is Peter and today we're
going to be talking about service
technologies and service architectures
so we've built one of what we think is
one of the world's first entirely
serverless web platforms over the last
year on top of AWS lambda and a whole
bunch of other web online cloud services
so we're going to tell you a little bit
about that story today and what we've
built and how we've built it myself and
my colleagues also run the Sydney
Melbourne and London serverless meetups
and we've helped to form a network of
meetups all over the world called so
lost made houses yeah amazing good name
it's yeah and in in May we also ran the
world's first conference on service
architectures which was called service
conf and we ran that in Brooklyn in New
York City and that was a really big
success and we're about to run another
one in London and in Tokyo so it's all
going a little bit mad at the moment so
today we're going to take you through
some of the ideas that came out of
service kampf as well and some of the
interesting conversations that happened
yep cool so very briefly about us
so I'm Sam I'm the founder of an online
learning platform called a cloud guru so
we train engineers on AWS via our
on-demand video platform so we've built
our platform entirely service in fact
we're a completely service company so we
don't run any servers and all the only
operating systems we have to manage are
the ones running on these laptops on our
dev laptops so we think that's pretty
cool
prior to a cloud guru I worked for
Microsoft both in Seattle and in Norway
in Oz I actually went to end a sales law
back in 2008 which was pretty cool ours
a developer on the windows team in
Seattle so then I worked in the core
file systems group and I owned the disk
Defragmenter in Windows 7 and at the
very end of windowed Windows Vista sp1 I
always get mixed reactions when I say
that I came on to the Windows Vista team
just after they'd what they'd pretty
much finished I came off a service pack
1 and
just after they made the decision to
take the visualization away from defrag
so they made the decision and I copped
all black people love those bars those
colored bars but yeah I got that I had
the honor of getting to rewrite defrag
from zero lines of code for Windows 7
which was really fun I got to do it
right everybody through answer you're a
great absolutely yep cool cool no
another Shasti don't listen too handsome
own about ESS they got a defragment so
yeah I also worked on System Restore
volumes shrink a whole bunch of stuff in
inside windows so when I talk about
service today I'm not anti server I
actually spent most of my career
building service software like Windows
Server cool so yeah hi everybody once
again so my name is Peter and I'm VP of
engineering at a cloud guru I work
together with Sam my background is in
computer science I've got my PhD in comm
sigh back in 2008 I think a long time
ago I then worked for the defense
Science and Technology organisation I
worked for the United Nations in New
York and for the last five years I
worked for a consultancy in Melbourne so
I was software team lead and then I
joined Sam and we've been working on our
platform ever since and look these days
my kind of my focus is on software
architecture Salah web but service you
know that's the thing that will really
focus on these days because it is very
exciting yeah yeah okay so what what is
service and there's a lot of debate
about this at the moment and a lot of
people don't some people don't like the
term some people don't care some people
call it Jeff yes I movement to call it
Jeff now because so many people don't
like the term service the same well
doesn't really matter what we just call
it Jeff
sorry story seriously yes that's true
so the rise of the term service can
really be attributed to the growing
popularity of compute technologies like
AWS lambda that are often described as
service so but I think if you look at
the way people are actually building
service systems there's a lot more to it
than just lambda right or as your
functions so my view is that
service is a theme it's an approach to
building applications and it's basically
comprised of compute and patterns yep so
there are servers compute technologies
like lambda IBM open Wisc Google cloud
functions web tasks i/o every major as
your functions every every major cloud
vendor has one now as of a few months
ago and there's serverless architectural
patterns so these are patterns for
crafting systems without traditional
back-end servers and and the real power
of going service comes from the
integration with the other services
that's from our experience hooking say
lambda or Azure functions into native
cloud services in AWS or or Azure and to
third-party services to orchestrate rich
and powerful event-driven pipelines to
build up your systems so this has been
referred to by people way smarter than
me as a service full approach where
cloud services are heavily heavily
leveraged and service compute
technologies are used as the last mile
the function execution technology uses
the last mile to wave all these
different services together cool so what
are these servers compute technologies
like lambda like Asha functions or
Google cloud functions so open wisk we
said that they have to two defining
characteristics first of all there is a
computer service which given a bit of
code like a function will execute it for
you on demand so take lambda for example
you can create a function here the two
lambda and it will run your code for you
secondly we say that these services are
event-driven so code is run on demand in
response to an event so this event could
be an HTTP request right or it could be
a new file pushed into an s3 bucket and
an event causes a function to invoke and
respond automatically and this function
can do anything it wants right it can
change the pile or it can carry out some
external action like I'm taking a
payment or something like that and the
cool thing is function execution is
stateless right and it's actually the
magic sauce that makes everything very
scalable right so the same function can
run can be run thousands of millions of
times in parallel and we've heard of
cases where lambda scales to you know
millions and millions of para parallel
invocations at the same time which makes
it so Wow one company we're talking to
Nordstrom in the u.s. doing 12,000
transactions per second in parallel
through Orlando yes that's not bad yeah
for f22 bucks a month yeah bucks an hour
sorry it's not bad for 12 trials and
transactions a second yeah okay so how
do we get here this is the part of the
presentation where I attempt to
summarize the entire history of cloud
computing in one PowerPoint slide and
promised to do this before in two
minutes so I did I said once that I was
going to do this in two minutes and then
somebody tweeted me saying it was four
minutes and 37 seconds
sorry I don't promise times anymore so
basically the point of showing you this
is to show why we give some context and
show why we think serverless
technologies are kind of the next leap
in cloud computing the next big enabler
so if you think about what's happened a
lot of devs like us don't like computer
hardware especially like me it's
cumbersome it's a break and we've spent
decades building layers of abstraction
over layers of abstraction to get
ourselves away from that harder and to
shield ourselves from the truth of
what's actually running our code so
first we decided hey this is cool let's
chuck it in a data center somewhere and
someone else can be responsible for
managing this system making sure it's
turned on it's connected to the network
awesome as stems we no longer need to
get out of our chairs right never then
maybe I'd stand up and go and find the
physical box and in the data center if
you think about it the hardware is the
unit of scale that if you need to scale
you add more hardware and the physical
hosting environment is now abstracted
away to be someone else is concerned but
provisioning that infrastructure is not
fun it wasn't fun we had to talk to
people had to make phone calls hit to
send email was horrible
and it would take day is potentially to
get new to get new hardware and then in
2006 is is really born in a big way
with Amazon releasing a c2 and suddenly
I can provision machines anywhere
the world using API calls so from my
command line from my web browser and
this was heaven for me because you know
AWS is basically just infrastructure as
code right and same with Azure in many
ways
so I ass was born and we we all shared
and in in is the operating system is now
the unit of scale and the computing
hardware has abstracted away to be
someone else's concern but something I
don't know about you guys but is always
kind of bothered me and I think it's
because I still had to worry about that
infrastructure so we're still there yeah
like I couldn't find the physical box
but I still have to install the software
on it I have to worry about you know is
it patched what if it gets iron what if
the sequel server runs out of disk space
and form another thing the same thing
today you probably some big your notes
yeah so you know what if it crashes
right so you have to worry about that so
and then past came along so you got
these really compelling platform as a
service offerings popping up like Heroku
app Harbor cloud services in in Asia so
what did pass offer that was new so past
services really just take away all the
headaches of configuring that system and
patching it passes your way of basically
saying give me your app so perhaps
services hey give me your applications
code and we'll spin up a machine for you
and we'll run it and we'll keep it
running and we'll keep it patched for
you which is nice right
so we've passed the application your
application is now the unit of scale
your scale at the application level
rather than the operating system level
at least from the your perspective and
that's cool and and now the
configuration and sorry the operating
system setup is abstracted away to be
someone else's concern so that's great
that's one less step that we have to
perform as developers but ultimately
there's still a dedicated VM there and
in most pass systems running my code to
scale it still scales at the VM level
VMs have to be spun up and down that
takes time and happens in large steps
and in many use systems I can still
remote into that VM yeah and it's costly
as well it's costly and it sits there
running all the time and costing me
money even if it's not being used so
then service compute services have come
along
so they really just take this and take
it to the next level so now I define a
single function a tiny piece of code
with a single purpose and I give this to
the compute service not the whole
application but a function so these
functions have small targeted
responsibilities and minimal
dependencies and they're completely
stateless and as such they're really
fast to execute and they scale
effortlessly and they can be massively
parallel as does as Pete said so from my
perspective as the developer there's no
server sitting around anymore waiting
for requests idling and costing me money
and that's one of the big differences
I'm only paying for the time that my
code executes and nothing more the
compute service is executing my
functions only when my users actually
want to do something so with service the
function is now the unit of scale and
the longer the language runtime is
abstract it away to be someone else's
concerned
so a lot of people ask how two
containers fit into all this moving no
we're stuck here we go
okay so containers you know everyone
loves docker right so containers are
really a technology they're not a
managed service like these so container
technologies like docker enable a lot of
these awesome cloud services and they're
actually the underlying technologies
that service compute services are built
on top of and older than your past
offerings as well so it's a different
level of granularity so we'll talk
briefly about lambda so lambda is
Amazon's servers compute service it's
definitely leading the game right now
came out a bit earlier than most of them
I think lambda is groundbreaking and I
think it's as biggest shift forward for
cloud compute
s3 was for cloud storage the s3 being
Amazon's equivalent of blob storage and
if you think about it the two are really
similar so this came out I won't take
credit for this I was talking to the
lambda team from AWS and they gave me
this corollary and I thought it was a
really good one so lambda is to compute
what s3 is to storage so s3 deals in
object on in objects for storage so you
provide an object and s3 stores it you
don't know how you don't know where and
you don't
okay there's no drives to concern
yourself with there's no such thing as
disk space not enough space too much
unused space these concepts don't exist
all of this is abstracted away so you
can't over-provision and you can't under
provision storage capacity in s3 there's
no concept of that it just is what you
want it to be so s3 stores and charges
you for exactly what you give it nothing
more nothing less and now think about
lambda so lambda deals and functions for
execution you provide your function code
lambda executes sit on demand you don't
know where you don't know how and you
don't care right same thing there's no
virtual machines to concern yourself
with there's no such thing as server
farm capacity to many idling servers not
enough servers to meet demand these
concepts don't exist scaling groups
they're not there so all of this is
obstructed away from you you can't
over-provision and you can't under
provision execution capacity in lambda
so this is why I think lambda is the
next level for cloud compute and it says
bigger shift forward for computer as s3
was for storage awesome and look before
we go any further we should say that the
word serverless is a a bit of a misnomer
there have been a lot of Twitter Wars
about the word serverless obviously when
you use a confused service like lambda
or if you use you know another service
or an API of course there is still a
server running in the background right
it isn't magic as much as we want it to
be of course the difference is is that
service are now hidden from us they're
not directly accessible to us so there's
no infrastructure for us to think about
and no way to tweak the under underlying
hardware or the operating system and
look for example if you use lambda AWS
takes care of provisioning and
management of the ec2 fluid of service
that actually run your code right they
are responsible for providing that
redundant highly available compute
infrastructure including all the
capacity provisioning and automatic
scaling so you as a developer you don't
need to think about it anymore which is
quite interesting and
this freezes now you can focus on you
know things relating to your specific
problem and you can move quicker and
yeah overtake your competition so look
there are these service technologies
that are now kind of coming out and
developers are taking these technologies
and building entirely serverless
platforms and applications at scale and
look this is the patent spot you can see
right now some service architectures and
in these new architectures traditional
servers are replaced by an array of
awesome cloud functions that act as
discrete single purpose services so for
example right there you see compute as a
back-end architecture and so we have a
client right we have an API gateway
which creates basically a restful api
it's a service that you can create in
AWS and then you have a number of lambda
functions connected to the API gateway
so when a request reaches the API
gateway that invokes a lambda function
which processes that request does
something exciting and then there you
have it so there are no expensive web
server sitting around you know waiting
for your requests everything is kind of
done on demand when a request comes in
so another patent we refer to as compute
as glue is a way of kind of forming very
powerful pipelines between different
services right so in that diagram you
see you see a search service you see a
notification service and as free bucket
all kinds of services and so you can use
cloud functions like lambda to glue
these services together and to marshal
data between the services to coordinate
actions so you can now build really
powerful pipelines with just a little
bit of code and so the movement towards
service is actually blowing up right now
it's it is very exciting and all the
major players all the major cloud
vendors
are heavily investing in this space so
like Sam said Amazon started with Lander
Google has cloud functions IBM has open
whisk
Microsoft has Azure functions and look
even the press like the mainstream press
is taking an interest we saw this
article a couple of months ago from the
tech editor of New York Times you know
saying that saying that this is
something that's that's growing so yeah
it's not a niche thing anymore and it
will only get bigger and like Sam said
in May we found that n ran the first
conference on serverless
technologists in Brooklyn New York and
we had some really amazing talent come
and talk to everybody who attended the
conference so we had Tim Wagner the
general manager of lamda give a keynote
we had you know chief architects from
IBM open wisk we had the as your
functions team we had banks we had
people from firebase and Google
engineers who worked on paths and
Facebook and Spotify and docker and
iRobot and so everybody seems to be
getting on board with this and we're
actually putting all the other talks
from service confer going live tomorrow
online for free so yeah if you watch our
Twitter you'll you'll see there's some
really interesting ones like how Spotify
moved their entire or are moving their
entire data analytics platform from
on-prem to Google cloud platform while
it's moving without turning it off it's
called changing changing the tires on a
moving car to really quite interesting
so there are a lot of awesome talks yeah
I encourage everybody to have a look so
yeah you can see that the level of
investment going into these service
technologies is actually quite large and
yeah it's very exciting so yeah it will
be published hopefully tomorrow and you
guys can see it and look a lot of people
ask isn't this just micro services right
isn't this yeah well no but kind of and
we say that the two are related so micro
services and service architectures as
descendants of service-oriented
architectures and look you can implement
a micro-services approach using
serverless technologies but you don't
have to right so developers tend to
think of micro services as this small
standalone fully independent services
built around a particular business
purpose right and depending on how you
design the system every compute function
could act as that standalone service
with its own API and data storage we can
do it or or you could compose a macro
service out of a few cloud functions or
you could build a distributed monolith
if you wanted to I wouldn't recommend it
but you could write all we use via cloud
functions as small Nano services that
just do one or two little things so
they're even smaller than micro services
so you have this flexibility and you
have this new emerging architectures
that we'll talk about they give you many
more freedoms and ya flexibility with
what you can do for your systems we've
been writing a book mostly pates been
writing a book on service architectures
on AWS and it's been going around and
talking to people all over the world if
you're building apps within platforms
with service technologies it's been
really interesting yeah to compile all
the patterns together and see how people
are using this because there isn't
really any standard yet or in a standard
approaches yeah this area is so new it
still blows my mind when I talk to
companies and I see them using this in
some way that we could never thought of
yeah never imagined so it is very
interesting this area is emerging so I
encourage everybody to get on board and
contribute because you guys are the
pioneers ok so I want to tell you very
briefly about our story and what we've
built and kind of how we got here so so
last year we put some courses on udemy
com teaching people about AWS and
helping them with their certifications
the whole thing went a little bit insane
and very very quickly and after a while
after a few months we decided well let's
build our own training platform let's
make training fun and let's try and
build the world's biggest and best
online community of AWS engineers so
that's what we've been doing
the past year interactive discussions
gamification lots of stuff to make
training really fun and interesting so
we launched the platform only 10 months
ago since then we've scaled to over
60,000 customers now engineers globally
that we've trained across about 120
countries or more at any given time
there are thousands of people on our
platform using it simultaneously doing
video courses quizzes interacting with
each other by discussion forums and our
system is completely push based and
event-driven so there's not a single
part there's not a single piece of code
in our entire platform that poles or
periodically requests something
everything is pushed based from browser
to browser at both ends so that's kind
of cool so we don't not sure why we need
this slide it's probably pretty obvious
at this point we don't run any servers
and in fact one of the cool things is
our hosting bill is almost non-existent
considering the scale of our business
now we pay hundreds of dollars a month
in hosting in total because we've never
paid for lamda the free tier is so
generous was it 3 million executions a
month yeah no sorry 3 million it's it's
so generous that we've never had to pay
for it so basically the only thing we
pay for really is bandwidth in and out
of the cloud
so yeah and to give you an idea of what
we've built I mean we've got users watch
videos in our course viewer they do
quizzes practice exams it's responsive
it scales down for smartphones and
tablets we've got our discussion forums
it's kind of Stack Overflow style people
can ask questions answer questions vote
each other's answers up and down
comments people build reputation so you
can see it's not a toy right this isn't
just some experimental toy what could we
build on top of lambda this is a fully
fledged rich web application running in
production supporting thousands of units
he is a simultaneously 24 hours a day if
it goes down it costs us a lot of money
so yeah so why do we do this because
this is probably a little bit insane to
build it this way right
so that the main driver for us early on
was rapid well number one was rapid time
to market so at the start this was just
me and I took three weeks off work to
try and build a learning management
system in three weeks so I was
constrained and so there wasn't some
grand vision to build this thing service
it was just out of necessity I thought
well hey if I if I build this thing on
top of firebase I can write to the
database directly I can cut out some
layers I can probably fill in the gaps
with web tasks I oh this was before
lamda was available for API gateway and
I really truly believe if we'd taken a
traditional web server approach and
never would've got the business off the
ground because I just could not have
built the system that would build in the
three weeks that I had we needed to
scale fast and effortlessly because by
the time we launched this we already had
10,000 customers on on udemy so we knew
when we launched it it wasn't going to
be a typical slow triple startup it was
going to be people coming on board
quickly so we needed to know that
whatever we built would scale quickly
and without a lot of overhead or
monitoring because it was just just me
at the time me and my business partner
we also have where sale driven business
so we have large spikes during Black
Friday and sale periods so we needed to
be able to scale up and down quickly
without a lot of cost and last of all we
wanted to offer a disruptive cost model
and I think this is one of the big
differentiators about lambda and as your
functions for example so our business
model is disrupting the traditional
training model so instead of paying
thousands of dollars for in-person
training or even just ongoing monthly
fees for other online course platforms
like you know if she rocks a month or
100 bucks another one patient that you
names no names our customers pay 29
bucks for a cross they pay at once it's
a one-time purchase and they have a
lifetime access forever to that course
and we literally couldn't do that
without land on AWS so lambda enables
that because we only pay for the time
that our code executes
so we have no web server sitting around
no load balancers cloud front and s3
enable that because we only pay to
deliver videos when someone actually
requests it so when someone watches a
video we don't have expensive media
service sitting around to encode it we
use elastic transcoder
that's also on demand so think about
what that actually means if you step
away from that that means that we only
pay as a business when a customer
actually uses our system and actually
wants to do something of value to them
so we only pay when a for a customer
when they take a course and customers
take a course once nobody watches the
same course ten times unless they're mad
so we don't need to charge ongoing fees
on average it costs us about 12 cents us
to deliver a course that's our total
cost of delivery that's it they do the
whole course so this is literally a
neighborhood our business model and and
feel the growth of our business yep so
look as we kind of built our platform
and began exploring and understanding
server those technologies and
architectures had our conference began
talking to other companies that are
working in the space we kind of really
tried to develop our understanding of
service and service architectures and so
we developed a number of principles that
we tend to follow when we architect
service applications ourselves and so we
have covered this in a lot of detail in
the book and given examples actually
yeah this is going to be taught at
Columbia University next semester which
is which is very cool so looking forward
to it so we just want to quickly kind of
describe what these principles are and
give you against a quick illustration of
how we applied these principles in
practice so of course principle number
one very obvious very important you know
use a computer service like lambda to
execute your code on demand or as your
function or as your functions of course
yeah don't run the server don't be silly
just don't don't do it you know your I
guess goal is usually to solve an
interesting problem it's not to you know
catch Apache or something usually so and
look you can write a function to carry
out almost any task right you can read
and write to datasource you can call out
to another function you can perform a
calculation it's just code right and of
course look we are realistic there might
be scenarios where you're doing
server right yeah it does happen
especially if you need to run legacy
applications or third-party applications
but this cases should be well hopefully
we'll be far and few in between so try
to minimize your usage of server done
management and principle number two so
try to write your functions with the
single purpose I guess a single
responsibility principle in mind write
your functions should do one thing and
one thing only we know that a software
engineers if you follow the single
responsibility principle you create I
guess functions or code that is more
testable it'll be more robust it will
have fewer side-effects
it will be easier to understand and by
composing and combining these services
and functions together in a loose
orchestration you will be able to create
complex back-end systems that are still
understandable and easy to manage and
look a granular function with a
well-defined interface will also be a
lot more reusable you'll be able to
reduce it a lot more often in your
service architecture and as we said
before code written for lambda should be
written in a stateless style you must
not assume that resources will survive
beyond the immediate invocation of a
function it is actually not entirely
true because containers are used so you
can actually find files from previous in
vacations on the file system if you go
and explore the container but you can't
share you cannot assume it yeah so
lambda and there's your functions and
other providers you know they can create
and give you a brand new container to
execute your function at any time and
look it's often very hard to know where
the granularity of a function actually
is you know if you make functions too
granular you have too many functions to
manage and it'll become a bit of a
nightmare
if you ignore granularity you will
create mini monoliths as well so it
takes a bit of judgment and a bit of
experience
and I guess we have a few make some
exams we have some examples of them how
we've done it yeah but everyone's gonna
do it different absolutely absolutely so
we for example have a function that
allows our users to submit questions and
comments on our forum so we try to make
those by it's kind of like commands in a
command there yeah submit a question
submit an answer yeah we've got yeah
so we allow our users to vote in the in
our forums and update their reputation
scores who have one for vote up or down
yep guru bot he's my favorite so lambda
and function technologies are great for
building BOTS and slack BOTS so we have
a little guy called pure bodies my
favorite little lambda function and he
guru bot works out what our instructors
on our platform have in it so they can
call him by a slack and I say how much
revenue did I earn today or how much
revenue did I earn this month you so
Guru bot can be run on demand by HTTP
but Guru bot also gets executed on a
schedule once a day once a month and
produces reports yeah our instructors
and lectures love guru board yeah he's
also Mary we have a function that takes
payments so when a new user comes to our
platform and buys a course this is the
function that will process I guess
payment and requesting protected files
or if you think about what we're doing
service we're selling videos but videos
need to be distributed by our CDN but
they need to be private they can't be
public because you have to pay for them
so we have a lambda function that
generates signed URLs for the cloud
front CDN so I use a request that we
look we see do you have access have you
bought this course yes you have okay we
sign a URL that and that signature that
encrypted signature lasts for a certain
amount of time like three hours we
return that and then they're able to
request that URL embed that straight
into html5 video tag in their browser
and yes watch the video yep yep it's
awesome look as you begin to work on
service applications you will have to
quite likely create workflows right you
have to process your data in some way so
when you do that try to design these
workflows in a push based event-driven
pipelines again
so these pipelines when they are
event-driven they become really powerful
they will allow you to extend your
architecture really simply and they look
like magic when they work so an
event-driven pipeline is one that I
guess kicks off thanks to an event and
it continues to propagate without
additional user input so one event
basically triggers another event in a
pipeline and look building systems in an
event-driven push based approach will
often reduce cost and complexity this is
at least what we have found and it will
actually make the overall user
experience a lot smoother right so
because you won't have to pull it will
be cheaper and users will get whatever
they need on demand and you know we'll
show examples as well so yeah here's a
simple example cool so yeah we use a no
sacred otherwise called firebase for our
user facing database is essentially like
a materialized view in CQRS
so firebase is a real-time streaming
database that works over WebSockets so
changes that are made to the database
are synced immediately out to all
connected clients so out to all the
connected clients web browsers via
WebSockets so there's no polling just
the goodness of socks and it works
across a range of devices and mobile
devices so that's that's great so in
this example a user will come
Peter come to our site and he wants to
submit a comment on our forums that'll
go to API gateway which will get loud at
routed to lambda I lambda function
position validation and some checks it
might do some other things that are not
on this diagram like updating a search
index and it'll also push the comment to
firebase that pushed a firebase will
cause an immediate push out to all our
connected clients will receive that
update automatically so anyone who's
looking at that page will now see the
new comment without having to refresh
them without having to poll so we could
actually simplify that previous
architecture a little bit and actually
have one user right straight to firebase
from their web browser right it's
possible and it is actually encouraged
and you might say oh my god what a night
you know writing from the database from
oh yeah but it does actually work and
you should apply this baton in a number
of if you know what you're gonna write
is gonna be if it's it's a no or nothing
proposition you know orchestrating
multiple calls if you have anyone in a
toilet in other word files then it's fun
yeah and this will absolutely reduce the
amount of layers you need to have in
your system which is a big benefit so
here's another example we have a
transcoding pipeline so when a lecturer
creates new video they upload this video
by our interface and then our system
creates a number of different versions
of this video so we rien code those
videos to 1080p 720p for eighty four
twenty p year sorry 480p HFS WebM epic -
and a number of different formats isn't
like and generate thumbnails or journals
absolutely so the process is rather
simple we have our users upload files
directly to an s3 bucket that
automatically kicks off a lambda
function a lambda function goes hey
there's a new file in an s3 bucket then
it creates a job for the elastic
transcoder which is the service that
creates those other additional versions
of the file so elastic transcoder
creates those files and puts them into
another bucket
that in turn kicks off yet another
lambda function oh sorry that in turn
pushes a message onto an SMS topic and
then we as you can see in this diagram
we apply the fan-out Bethenny and so the
pen out patent basically invokes a
number of lambda functions in parallel
one of those lambda functions picks up
that message and goes hey there's a new
transcoded video in the bucket it then
goes and writes to firebase to say there
is a new video that our students can now
view and because like Sam said all of
our students everybody who's using the
website is connected by WebSockets to
firebase they get that update
instantaneously in near real-time so as
a user experience a lecturer uploads a
file to s
three and then a few minutes later or
half an hour later I will use the
students see a new file pop up
automatically in their interface so
there's no there's no need for them to
pull to refresh everything is push based
and on-demand so it's very powerful but
look what's really interesting if you
look at that part one look how little
card there's I mean to build this entire
video transcoding pipeline where it's a
couple of hundred lines of code at most
there's two lambda functions really
there was a couple other extra ones I
have off the fun yeah but to do that
video transcoding it's almost no code
yeah and you only pay when something
actually runs through it so very little
cost yeah yeah and we are using those
slender functions to glue all of those
other services together to create
something quite powerful yeah okay so
this is the controversial one oh yes
this is against everything people are
going to walk on top and this works if
you're building web-based systems so
creates thicker more powerful front ends
is what we recommend so if you think
about it your traditional three-tier
approach to software architecture you've
got your browser your presentation tier
get your web server which is your logic
tier and you got your database which is
your data tier rough roughly anyway so
that layering is nice we've been told
that's really important that keeps
separation of concerns and it's great
but it becomes really tedious to
maintain and to improve and to add new
features and it's actually really
exacerbated in a world of single page
applications I don't know if any you
guys have felt this way but with a
single page app you've now got your
whole MVC framework in the browser with
your views controllers services these
services then have to talk over the wire
to your server with some kind of
communication contracts I'm kind of dto
contract that you've defined you've got
to maintain you've then got to unpack
that on the other side validate it apply
it to some model you've got to do the
same get the data from the database
apply it to some model and then
transform everything apply your business
logic that's a lot of work and you know
if you want to add a new feature to your
product you've got to touch every layer
through that stack and I'm sure you guys
have we've worked on systems that had
multiple other services yes you're
layering as well we had one to add a
button to a UI we had to touch 15
different layers every single
yeah all the managers and all the
proxies and it because the webserver WCF
service which went to another service
and then which went to a database so
it's painful right and it slows things
down lots of layers and just because
we've done it this way doesn't mean that
it is not incredibly stupid yes so with
the explosion of all these cloud-based
web services and now you've got all
these new security mechanisms cause JWT
is JSON web tokens sam'l so something
new becomes possible now your front-end
app can talk directly to a range of
cloud enabled services so that's both
small cloud functions that you've built
but also a whole bunch of third-party
services like we just talked about
firebase that is a web enabled database
your front-end can write directly to it
and read directly from it so now it's
actually possible in many cases to
remove the middleman you know you can
basically you can completely break apart
that monolithic web server and replace
pieces of it with external cloud
services that already exists and then
anything you need to write customer you
can just use small cloud functions
running in the cloud on demand so the
client app is now a lot smarter and this
new model means that now the majority of
your data transformation and business
logic code actually sits in the
front-end you have some of it in lambda
or at your functions but a lot of it's
in the front-end and so most of your
codebase most of your code is in one
single codebase actually a lot easier to
two dev locally to test debug you're not
jumping between different debuggers and
watching DT O's go across the wire so it
can really cut the layering down to look
something like this you want to add a
new feature you just add it to your
front-end so there are many cases in our
system where we add a new feature and
it's front-end only it's front-end code
only just save to firebase great from
firebase if we need to do something in
the cloud at a tiny lambda function to
maybe just do the last bit that
something that needs to be protected you
you know might need to load some private
data from other users to perform some
action like send an email that you can't
trust to load and your end users browser
yep and then the very last one it's
pretty obvious at this point but use
third-party services you know there are
companies to dedicate 100% of their
resources to doing very specific things
doing them really well so we use like
all-zero for authentication and login
like all-zero actually render the login
box on our website and the signup forms
we don't have to worry about that you
know if we want it to enable Twitter
login we just click a ticket button in
authorize dashboard and we've got
Twitter login at our website so it's
some really cool stuff you can do we're
onboarding some really large corporates
at the moment and you know they come to
us and they say can you do SSI with our
ATO first installation and we say yep
yep Xero has done it it's really really
used to spend weeks in my previous job
hooking up a DFS to clients and to take
weeks right but now we can actually do
it
so yeah I mean intercom for Customer
Support messaging this heaps of there's
so many great services out there yes so
really try and outsource everything
that's not your core product right get
focus on building what you do making
what you do well maybe we'll jump over
hope we've only got 15 minutes 15 yeah
we got 15 emails so we're going to talk
very briefly about service conf so we'll
give a bit of a roundup of what
different people talked about and what
other people in the industry are doing
around service because we found it quite
interesting so yeah we ran this we had
this idea let's run a conference how
hard year to beat her on a conference on
the other side of the world we've never
done it yeah yeah yeah it's not that
easy we didn't know if anyone was going
to turn up so we booked this rock
concert venue in Brooklyn but 200 would
hold 250 people that was in January when
no one was really talking about service
we didn't realize that then in the next
three months interest in service was
going to explore it as your functions
was going to come out so we ended up
selling out with a massive waitlist and
we had every every cloud when the vendor
came along and both attended and
sponsored the conference so Amazon
Microsoft IBM Google and then a lot of
progressive organizations like Capital
One bustle i/o really Nordstrom really
interesting people yeah yeah and look we
kicked off with a keynote by Tim bergna
who as I said is the general manager of
lamda at AWS and yet he was actually the
guy who came up with the idea
for lambda and she pitched it to aunty
Jessie who is the CEO and look team is
actually an X Microsoft guy from the
visual studio division of Microsoft and
it just shows you the danger of you know
letting your good talent go you never
know what might happen especially in a
place like Seattle absolutely and so yet
team opened the event with a bang
literally he destroyed a bunch of fake
service with a baseball bat would you
show the video a video yeah it was
unexpected he just comes out on stage
gets on the baseball bat and was well
what's he gonna do we didn't know we had
no idea and I just felt that for the
next speaker who had the follow team
after bat because it was IBM first four
guys and so team basically spoke about
Lander what it was he said that it was
the world's largest bin packing problem
so the AWS infrastructure allocates
space for containers to run and it does
it in the most efficient way that it can
and he also announced a new open source
project called flourish unfortunately
the details are a bit vague we shouldn't
know exactly how to work it's supposed
to be some way of defining several
systems by the IP IP I and the functions
but some open format that's right but
we're still waiting for details so we
don't know it yet but it looks like it
will overlap or compete with the service
framework if you guys know Amazon we
don't know we don't know what we don't
know what yes ok cool then we had
Patrick Dubois
so Patrick Dubois is the founder of
DevOps days he's the guy who coined the
term DevOps really insightful smart guy
and he's doing everything serviced these
days in his new company I found his talk
really really insightful so it was
called from service to service full I
talked a little about service full
earlier so he talked about how in a
service world we're relying on all these
third-party services now and where we
might have had back-end servers in the
past we now call out to all these
services so we've got back-end services
that is these are some of the surfaces
that they're using his company
small-town hero's IT Support Services
office services front-end Services
mobile services we're heavily reliant on
so many different companies now so then
he went into a whole explanation of
promise theory which was really
interesting and you can go look at this
talk he doesn't he'll do it a lot more
justice than I will but he's talking
about all the promises that agents in
the system make to each other and the
contracts between them and the
commitments that they they have to make
to ensure reliability of their systems
and then he he touched on some
real-world examples of what happened
when things go wrong so this is you know
github github is broken everybody take
the day off you know I mean our our
deployment system is is all based off
github so if github goes down it makes
this very it makes it very hard Frost we
are taking day off right
then there's giving up control to third
parties so in this example Amazon does
disabled email sending due to too many
email bounces back so this is SAS and
it's if you look at the email the
message there from Amazon it's a 24 hour
turnaround process for your appeal so
you're at the mercy of Amazon to restore
service there's really nothing you can
do at that point and you talked about
how you have to understand the limits
and the peculiarities of the services
that you use so here you can see I know
it's basically admitting that container
reuse in lambda is completely
non-deterministic you cannot accurately
predict when or how often a container
will be reused and that's a big deal
when you're looking at latencies because
container if if a new container is spun
up to a server lambda function there's a
significant latency compared to if it's
reusing a container so what this means
is it's impossible for you to give
latency or performance guarantees to
your clients because Amazon can't give
it to you yeah and he talked about how
the collaboration between Devon Ops is
now extended to third parties so there
was a lot of controversy before this
conference about no-ops
I don't know if anyone saw it on Twitter
it was an article that was published on
the new stack around the same time as
service conference we were quoted in it
yeah unfortunately yeah even though we
didn't different context though yeah
from context but um it proclaimed the
era of no ops
hello everything serverless there's no
more operations it didn't go well yeah
so let's be clear there are still
operations in several systems you still
have to run operations you can't
outsource just magically all of your
responsibilities to someone else but I
think the responsibilities are shifting
so developers of the service system now
take on more responsibility a lot of
it's done through code but you're also
using other people's operations teams so
fire bases ops team is really we should
consider a part of our ops team Amazon's
ops team should be part of our ops team
because if something goes wrong there we
need to we need to deal with them to
make sure that it gets fixed for our
customers or that we find it okay yep so
then charity may just came to speak so
charity is an engineering lead from
Facebook
she worked on pulse if you guys know
paths but it was kind of a big first
kind of service back end as a service
technology that Facebook bought and then
shut down yeah to quite some controversy
videos passes the whole point of pass
was don't use anything else just build
everything on past your back end your
front end everything yeah we'll do it
all for you all by the way we shut it
down before Deb's yeah so she worked on
that she works on how and if she worked
on Second Life the game's second life so
her talk got a lot of attention and and
her blog posts got a lot of attention so
charity was a bit upset but well maybe
didn't like the no ops article that came
out on being an Operations person
herself so in the glorious future we
will be service and there will be no ops
and you can see what charity thought of
that so charity ran the operations team
it passed so she had first term
first-hand experience building a
back-end as a service platform when many
customers of that platform had an
expectation of just kind of outsourcing
ops to pass just like you guys deal with
it right if something goes wrong parcel
fix it so for example scaling she was
saying customers would kind of abdicate
responsibility for the performance just
expect pass to scale magically you know
like it says their services are not
magical pixie dust so even if you
outsource your back-end you can't still
you can't use crappy architectures right
you still have to consider the the
performance implications of your data
query
you know if you're smashing the service
with riots or you're writing poor
queries yeah you know we use firebase we
have to understand how firebase is query
system works to get the best performance
out of it
so you still have to think things
through design still matters so Rainbow
Dash is a is a software engineer and
she's going to use hosted services she
could pay them to do all of the thinking
for her right but uh-oh
Rainbow Dash is a little confused why am
i users complaining everything was
working yesterday I didn't change
anything
what is query what is index so Rainbow
Dash resorts to whiskey so her major
point was even if you outsource
something you're still responsible for
the results it's your business and it's
not good enough to say oh but lambda
went down your customers don't care
right you should have architected for
that scenario the tools are there you
know to think about this thing's so
labor can be outsourced but caring can't
nobody cares about your product as much
as you do so make sure you think
holistically about the system because
think about what we're doing here we're
connecting all of these different
systems together to build something
unique for our products everyone else is
managing a link in that chain and they
only care about that link you have to
manage that end-to-end flow and make
sure it works and if if some link dies
that you've got some workaround or some
way to recover yeah yeah and I think
that's an important message because we
say that lambda is scalable it's amazing
and it is but if you don't get the
architecture right then lambda won't
help you yeah absolutely
well burning our few minutes left so
touch briefly on web tasks because I
think we're tasks again really cold yeah
it's so this is tomash he works at all
zero and he's the creator of web tasks
he's actually Xbox he built the nodejs
implementation in Azure in web jobs he
got laid off been a big Microsoft layoff
and ended up going to austero and
building web tasks so again don't lay
people off in Seattle yep No so it's
acted a little differently from all the
other function as a service providers so
it was built to scratch an itch at all
to zero to run user created JavaScript
rules I'm say any time any anyone wants
to
login to a north zero system you can
have JavaScript rules run on every login
and perform some kind of processing we
use this ourselves and this is the the
reason I got interested in servers
because I built the first version of our
platform on web tasks because hey lamda
didn't have API gateway at that point so
they wanted to easily allow customers to
run these rules every time a user logs
in and they needed to run them on demand
in a scaleable sandboxed manner so they
essentially wanted to offer web hooks
but web hooks are annoying right because
you expect your customers to stand up
servers and execute incoming web calls
and how can you be sure that your
customers will do that in a scalable
manner your customers going to introduce
bottlenecks are they going to make sure
that the corset is webhooks scale so
author I built web tasks it's basically
a web hook with a server included that's
the way they look at it so you write
some JavaScript code you give it to a
web car web task and web task is
supposed as a fire HTTP it's actually a
really beautiful developer experience to
you on the command line you write web
tasks you give it your javascript file
and it just returns to you on the
command line a URL that's a URL to
execute go your function that's really
as simple as that
we'll probably running at a couple
minutes left I think what we might do is
just move to the last one which was I've
been whisk yep open whisk so IBM is
getting into the server space in a big
way and so the IBM bluemix open whisk
team who works on service at IBM came to
talk and so yeah open whisk is ibm's
service system and it's a little bit
different from the other ones and it is
aimed at being entirely open it's open
source you can grab it on github you can
see what it does
and you can actually run the whole thing
on your own infrastructure which is kind
of interesting you can run your service
computer when you're on your own server
if you were if you keep yeah or you can
run it in IBM's cloud of course yeah so
it has an open interface for event
providers so you can write your own
event provider for the system your own
event source for function that's pretty
cool so if you want to run an event on
every github checking you can
event provider for get help absolutely
so they so you can actually even share
your function so I think they call them
actions
that's right us and they actually offer
their starting up a marketplace so why
people can develop functions and then
sell them to others and share them and I
even have some IBM have probably the
most beautiful user interface it was
amazing older which blew everybody away
IBM this is MBM your user interface and
you can compose these functions together
and you can build these pipelines
visually and chain all the functions
together and actually bring in functions
from the public marketplace drop them in
your pipeline it's beautiful yeah and
the other thing is so those functions or
actions can be written in Swift so this
is Emal's swift or we've no js'
javascript or you can actually even
execute your own custom docker
containers which is and then and they
pitch their to isles developers is don't
go and learn another language if you
want to run run some stuff in the cloud
just give us some swift code and we'll
run it for you yeah I don't have an SDK
so it's very alternative and very very
interesting yeah yep next slide cool
awesome so look how can you get started
you can check out our website we have a
course on lambda it's actually getting a
refresh today or tomorrow or sometime
soon and we are going to post on our
service meetup talks as well so we run
two service meetups one in Melbourne one
in Sydney so please come along to our
meetups follow our twitter at a cloud
guru and we are going to announce
service videos hopefully within the day
tomorrow
yes so you'll be able to some really
cool videos yeah yeah absolutely
and finally you can check out our book
if you'd like you can actually go to
yeah this URL that you have there or go
to book a cloud guru check out the book
let us know what you think yeah
so yeah look you know that's it it's a
brave new world but it's a lot of fun if
you're
they have service technologies let you
focus almost exclusively actually on
developing your unique idea and not
losing sleep every night about whether
your sequel servers run out of disk
space so yeah I really encourage you to
give it a go and thanks for coming to
listen to us today if you have any
questions that come up yes</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>