<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Something Something Cyber - Troy Hunt | Coder Coacher - Coaching Coders</title><meta content="Something Something Cyber - Troy Hunt - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Something Something Cyber - Troy Hunt</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-dUAu-ztGcA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're talking about cybersecurity today
and how safe people's passwords are what
is one of your online passwords
currently it is my dog's name and the
year I graduated from high school kind
of dog you have ever 12 happy on and
what's his name Jamison Jamison and
where'd you go to school I would just go
back in Greensburg Pennsylvania what
school
I hope field area senior high school Wow
when did you graduate and 2009 oh great
it's like my cat's name and then just
like a random number okay and you had
this cat for a while yeah she's my
childhood piss-all and what's her name
her name is Jolie nolleke so I got past
order to be Jolie and then a number like
number one like my birthday's oh one of
the birthday June 12 only 195 oh great
so don't leave 612 95 got it so you mean
to give my password right now no I
cannot do that but we all want to know
what it is so we can tell you the strong
or not oh my goodness let me think
okay one is Tel Aviv yeah four six eight
and then Israel it's it's only three but
it's you know it's a funny strong enough
Ireland one two three four Gemma one two
three spell GE mmm
so most of them are Italian Oh beautiful
yeah I feel like like what's a good
Italian password my grandma's name
what's your grandma's name Maria Maria
so Maria is your password oh yeah
I knew my password it's always fun like
no matter how many times I see it you
still just look at it and go so
hopefully that's sort of relaxing
everyone that and the fact that many of
you've got beer which is making me
really jealous right now so I'm going to
try and do this and then join you okay I
got to talk about something something
cyber and the look was something
something was just that I've got a lot
of ideas and a lot of things that I
think are really interesting I thought I
just I'll just put them all in a talk
and I'll I'll show you and it'll be a
bit of fun and we'll see a bunch of
different stuff and yeah it's a funny
thing because there is just so much
going on at the moment and I see so many
interesting cyber things and I'm I'm
honestly never quite sure when they're
even real or not it's getting that weird
and I'm going to show you some of these
today and I think you'll I think you'll
enjoy it and I hope you learn a few
things as well they're one of the things
that I often like to start off with when
I'm doing these these talks is to just
try and get a little bit of perspective
around hackers because we're going to
talk a lot about hackers right and
people hear about hackers and they have
these kind of images in their mind like
what a what a hacker is what a hackers
do so I thought I better go out get a
bit of material and try and illustrate
exactly what a hacker is so I found some
good info and you'll uh you'll notice
some themes here what do we know about
hackers what is very good what else
matrix a lot of green have nothing new
this but hackers very very into the
green apparently they like binary two
which I guess is good things they want
to do anything with computers that's
kind of useful and that the interesting
thing is that we see this imagery over
and over again as a representation of
hackers and a lot of it is because it
kind of makes them scarier right and
think about how it appears in like the
press if we can make hackers scary we're
going to make the story scary and we
notice what the media does right like
they go house
arrey can we make this thing because
people will read it so we see imagery
like this with hackers now we can learn
many things from here so for example
this is how viruses spread it's just
like a bucket and they tip them out they
go up the rack and you know how there's
the holes in the top that's what they
get in the lesson out of this is make
sure you cover the top of your server
axe with something you probably won't
get any viruses after that okay you may
also have no computers but that's
another issue so we have this
interesting representation of scariness
and we see scariness over and over again
we see the themes that we've just
discussed over and over again and i
recently saw a product pop up that's
called Cujo then I've got a Cujo no good
so Cujo is a little device you get and
you put it in your home
no more hackers it's like magic right
and this is the way they sold it but the
thing is you've got to convince people
that they need to worry about hackers so
how we're going to do that well we make
scary videos like this you may not know
it but you've probably already been act
thousands of hacking attacks occur each
day now how do we know he's hacking
could eat grain very good the music
sounds scary like something bad is
happening we know that much good I was
watching this video a little while ago
and this is sort of part of a bigger
video but I'm looking at the screen and
particularly earlier on there's a little
part of the screen that looks like this
and you look at it and you go looks a
lot like a browser address bar doesn't
it you know it's like the guys in the
browser and and that to me sort of
seemed weird because this is not what I
normally know of hackers and I thought
okay we're going to go and figure out
how are you doing this and I worked it
out I'm going to show you because this
is enormous ly useful for you to impress
your friends and family now here's what
you do you go to a website called hacker
typer dotnet remember this and then
while you're there you just mash the
keyboard
now how do we not checking grain very
good all right
but there's another trick to this as
well because what you do is it's like
you're mashing the keyboard in you gotta
I'm going to break into the Pentagon or
something like that mash mash mash and
you go let me just see if I can get in
oh dammit no I can't get in and then you
kind of hacked us a little bit more on
you go try it again
oh man no all right now I know how to do
it heck a cake a cake yes we're in
amazing now be thank you the amazing
thing about this is that this is exactly
the code that appeared in that video
like I zoomed in the handstand went all
CSI on it and you can see exactly the
same code blocks in the video as just
here and it's a true thing so this is
the way they try and tell you that
you've got security issues
now I thought we'd we'd move on to a
topic on everyone's minds lately and all
I'll just get straight into it now
firstly is it just me or does he look
remarkably like a stoned beaver I don't
know the nice thing is I can go most
places in the world and do this and
everyone thinks it's awesome now as much
as we'd like to sit here and sort of
take the piss out of Trump all night
there is relevancy to this did you see
that recently he did something stupid
now there's a reason this was a news
headline and it's a serious news
headline so what they're saying is that
his website could have been open to
these sorts of attacks and here's the
interesting thing we are going some with
its fair with me he had code on his web
site like this now what do you reckon
could happen with JavaScript like that
how much do you trust i Gor Escobar
because you're loading things off his
github repository and that the premise
that the press put forward is that if I
go I go was to put some malicious code
on there it's JavaScript and you can do
just about anything if you can run
JavaScript in someone else's browser and
and this was interesting I thought okay
well we should sort of we should
demonstrate what you could do and then
we'll demonstrate a defense that a lot
of people don't know about so here's
what I'm going to do I'm going to go
over to a website which embeds code from
an external resource and Beds it from
CloudFlare and then we're going to start
modifying a few things so first of all
let's go to the website and I picked a
really good one I pick this one now this
is Trump Donald org
and it has this beautiful little thing
where you move the trumpeter and you
watch his eyes right and then when you
get to just the right spot and you can
just keep going like around and around
around as much as you want now look
again we could sit here all night and do
this and it would be fun but I'm going
somewhere with this let's jump into the
source code and if we do a search for
CloudFlare you see how it's embedding
resources or CloudFlare all right so the
using CloudFlare CDN so CloudFlare has a
public CDN where they have a whole bunch
of javascript libraries CSS fonts all
sorts of things and you can use
CloudFlare CDN to embed content in your
site now people do this because when
they do that cloud players got 115 edge
nodes around the world so no matter
where your customers are they get
something from very very close to them
which is good news
they're going to get something without
much latency the other good thing about
it is that when you load all this stuff
of clouds layer you don't pay for it
it's just off their public CDN so if
you're paying outbound bandwidth like
you do with something like Azure you
save that cost and the other cool thing
is that if someone has already been to a
website that embeds that same library
it's going to be cached it's going to be
fast so there are lots of good reasons
to load content of public CD ends but
people then say ok well we've got the
problem like Trump had with his website
which is what if someone maliciously
modifies that code so what if someone
changes it and does something to any
site that embeds it because again once
you put JavaScript on a website you can
kind of do just about anything with it
so going to a demo here and I'm going to
open up fiddler and fiddler has this
really neat little feature called
fiddler scripts I don't know how many of
you have used this a lot of people use
fiddler but not seen fiddler script and
what's going to happen now is we got
fiddler open so our traffic gets proxied
through fiddler and fiddler acts a
little bit like a man in the middle and
it can make changes to files as they're
loaded so I'm going to go and jump into
an event for the different events here
on before request on before response I'm
going to jump into on before response
and down here I've got a very special
Trump application script now here's
what's going to happen when I run this
so when I reload the script file and it
comes through fiddler it's going to
modify it as it comes through and what
we're really trying to emulate here is
what would happen if that javascript
file from CloudFlare was modified before
it got to the browser now in the case of
the Trump situation and the github site
we'd sort of be more worried about it
being modified in in storage but this is
just going to let us sort of emulate
what would happen so here's what we'll
do let's just go and open up this one
here would I've make up there so this is
the script as it stands this is what was
loaded into the browser and I just
jumped down to the bottom and there's
you know nothing too special there if I
give it a hard refresh
we'll now pull it through fiddler and
should get modified if I jump down to
the bottom okay now we've got Trump
efficacious script so let's now reload
the site and again what we're sort of
trying to emulate here is what would
happen if this script was changed
somewhere else so hard refresh is going
to pull it through fiddler it's going to
add the Trump efficacious script we're
going to see how this website changes in
a potentially malicious way so Trump is
thinking apparently apparently doesn't
do a lot of that but here we are all
right so we've now got like little
driving Trump all over the place because
what the script has done is it's
actually modified the DOM and in the
script itself is my father Don and it's
injected a background image into every
div so what we've demonstrated is that
we've changed the file outside of the
site the site is now getting something
different to what it expected it's still
running
you can do this still works still works
ok so that's the problem that we're
trying to solve it's going to have a
look another side Biggie's this one
before
oh well that's a lot is then in the drop
box data breach leaked in data breach
Ashley Madison data breach
come on yes that is the correct answer
by the way actually what no no no all
right it's the same thing and a view the
source jump down to the end
I am also embedding a library from
CloudFlare down here so I'm exposing
myself to the same problem so let's do
the same thing I'll pop that open
another tab jump down the end there's no
trump efficacious script in there
because this is the case diversion from
before but if I give it a hard reload
and we ignore those Fidler errors like
so that'll port from CloudFlare through
fiddler and then I go down the end and
now we've got Trump efficient so in
theory we should see my precious website
with Trump all over it in theory let's
have a look so go back to here we'll
give it another hard reload now as it's
reloading I'm going to hit f12 into the
dev tools going to leave the console
open we get an error now this is an
error that wasn't there before and I'm
going to zoom this in a little bit so
you can see what's going on it says
failed to find a valid digest in the
integrity attribute for the resource and
then it goes on and it gives us this
sort of CDN path with computed sha-256
integrity and we've got this great big
cache here and what we're actually
seeing here is something called SRA or
sub resource integrity and the way it
works is that if I go back and look at
my source code here you'll see that
whilst this begins like a normal script
tag it then says let's add an attribute
called integrity and we've actually got
char 384 hash here which goes all the
way through to there now here's that the
beauty of how this works
you get yourself a JavaScript file or
you can do it with CSS as well but in
this case it's JavaScript you get
yourself a JavaScript file that you
trust ok so in this case it was j.crew
so I trust jQuery to point to point 4 I
trust this file I create a hash of that
file and I add it to the integrity
attribute I can now go and grab that
file from wherever I like public CD ends
github something that someone else
controls and when the file downloads and
it sees that there's an integrity
attribute
the script tag it hashes the file and it
checks it and if they don't match we get
this error now the really neat thing
here as well is that my site still works
even though it has blocked the file and
it still works because I've got a
fallback position just here and it looks
to see if a confined window that jQuery
it won't be able to because the browser
has rejected the file not run it and if
it can't find it it says like hey we'll
look let's do this let's actually write
out a reference to my own local jQuery
file so I magic right and if you want to
make one of these you can grab a copy of
whatever library it is you wanting to
embed and then you can go over to SRA
hash generator paste it in and say hash
it and it'll go away retrieve the file
you've got to make sure that that one is
good and there are other ways of
generating the hash as well and then it
will go okay here's your tag so this is
awesome because this allows you to have
your cake and eat it too right so what's
not to love browser support with the
browser support there is one issue here
one particular manufacturers browser you
know I'm going to do so no support in IE
and no support in EDS which is which is
kind of a bit of a shame because we'd
really like to be able to use this more
and what it means is that if I go and
grab say Internet Explorer like so and I
go - have I been coned now that's from
case right but if I give this a hard
reload the same thing is going to happen
right it's going to pull that file
through fiddler fiddler is going to add
the trump efficacious script and my
beautiful website is going to have
somewhat of a problem so you've got to
sort of make a decision there it goes
he's all over the place so this didn't
happen in chrome this actually also
won't happen in Firefox there's just
again one sort of skew of browsers so
you've got to make a decision like do
you go in embed things from external
resources and get all the benefits of CD
ends but then take the risk with non
supporting browsers
or do you just load everything locally
and then you don't get the upsides so
swings and roundabouts here so here's
what I'm going to do I'm going to just
close that one down because I really
don't want to keep seeing everything
Trump off' I don't think that's going to
make for a good demo all right so that's
s alright let's go to something
different and I thought I'd talk about
scams for a while because we see a lot
of scams that run on the internet and
recently I saw this one Twitter
verification and this site was offering
to help you get verified so you go along
here and you you click on the get
started button you go and enter all your
credit card details I'm sure that'll
work out just fine except it probably
won't work out this fun this was linked
to from Promoted Tweet which is kind of
ironic as of this is at payment got HTML
you strip payment with HTML out and you
have a problem you have no default
document you have a directory listing
you look around a little bit and you go
here's an interesting file and this is
what we often see right so we often see
these scam phishing websites stood up
with the local index of everyone who
signed up and it's just sitting there
like just dumped out to a text file and
look at all the data here it's including
things like CVVs from credit cards all
your personal info I went and registered
on one of these just for fun just to see
what would happen and it did that so
they may also not be outputting coding
which is there's also a bit of a problem
we see a lot of scams around I like to
see a lot of scams happening on the web
and I saw one a little while ago which
was this and I don't know if this
happens in Norway or the other places
that you're all from but one of the
things that happens in Australia a lot
is you'll be at home and it's like 6
o'clock at night you're cooking the
dinner and trying to organize the kids
and someone calls up and there's that
sort of long wait when you pick up the
phone like a blood call for a long way
away and then an Indian voice comes on
the line and says we're from Microsoft
you've got viruses
happen here all right well this is the
lady doing it believe it or hope this is
command trap and command row is the site
which has perpetuated a lot of these
scams
now this kept happening to me as well
and it was driving me nuts because I was
like look I know it's a scam you know go
away I'm not going to talk to you I
don't think the CRM is very good because
they kept calling me and eventually I
went all right if you want to keep
calling me I would like to see where
you're going to go with this so I
created a very special VM which is this
one just here now I thought okay what
I'll do is I'll create my special VM and
I'll put some interesting things on the
desktop so you'll see I've got stuff
like I pretended I was max so I've got
Max's porn stash up there
I've got passwords finances I thought
the whole bond and Rick Astley thing
might give it away it turns out scammers
not so smart so here's how the scam
works right they call you up in the guy
you know we're from Microsoft is yet
such etc imagine let's say non-technical
people so think about elderly relatives
are often sort of people to get hit so
the scammers talking them like okay
you've got viruses and they're like oh
can you help fix it and they're like
yeah sure we can help you what you do is
you go to your PC press windows R type
in evem T V W R which many of you will
know will take us to the Event Viewer
and when you're in the Event Viewer then
they say okay open up the windows logs
go down to application and when you're
there just stop scrolling through and if
you see any errors oh holy they're
viruses and of course the person on the
other end of the line is like well it's
red it doesn't look very good does it
you know my god do have viruses and they
then go through the social engineering
process of getting you to give them
remote control to your desktop they
install crapware and all sorts of other
things you don't need all of this is for
free and then they tell you you go to
pay them and if you don't pay them in
some cases they just nuke the entire
machine so these are the guys right
there over here
now as it turns out they were working
this morning which I prepared this demo
now they are turning 500 which isn't so
good but it doesn't matter because what
I wanted to show you is still there if I
go to Ford / robot stop exp just like
all the both of those backups are
sitting there but don't worry it's in a
robot's file you're not actually allowed
to go there so skin scan is a pig do
like the scam and it's just interesting
when we look at the ways that data is
exposed and you know inevitably it's
stuff like this now there's all their
customers sitting there often we see
websites breached and we see all sorts
of reasons about look there must have
been like really malicious people going
in there breaking into it and I kind of
like Hanlan's razor and headlands raised
it basically says look when you see
something like this it's not necessarily
that someone was malicious it makes us
be that someone else is stupid and
here's what we're going to look at now
because we all look at sort of places
where data is exposed so readily
ultimately through mistakes so there's a
really good example here this is an
Indian pathology lab and an Indian
pathology lab that got breached breached
back in back in last year around about
December timeframe and there's a bit of
a problem where 43-thousand pathology
reports were obtained by other people
now pathology reports as things like
what's the results of your blood tests
what's the results of say in utero tests
when a woman is pregnant what's the
result of your HIV test 43,000 records
publicly exposed and they put out a
statement this actually came via the
press their website was hacked
they were filing a complaint with the
site Acela mumbai police which sounds
really scary now you want to know how
they hacked i'll show you somebody went
here
all right so it's just a full-on
directory listing and here's the amazing
thing we sort of see this stuff all the
time where there's huge amounts of data
that get inadvertently exposed publicly
on websites and that sort of disturbing
thing with this particular case is I was
trying to get in touch with them I
couldn't get in touch with them someone
had sent me this link it certainly
wasn't me going around looking for
pathology reports incidentally the
reason we knew that there are things
like HIV test is because all of this got
indexed by Google 43,000 documents so
you could do a Google and search for the
scope that was limited to this site and
then just add like HIV to the end and
you got to see Google caches of the
entire documents without ever actually
accessing and loading them from the site
so I'm in touch with um one ongoing look
like you know I think you probably
should lock these up couldn't get
through a journalist eventually get
through and these guys tell the
journalist this is in December as well
the first of December said we're
actually fixing this we're launching a
new website next month and it'll be good
then and this is what I said like we're
just going to leave all this out there
for a month and then fix it and then I
got a lot of social pressure and that
sort of it expedited things shall we say
now you might look at this okay okay
well this is like just a little Indian
pathology website
what are we going to look at something a
little bigger and this was around the
same timeframe this was later last year
and this was actually related to Michael
Page now Michael Page is a really large
global recruitment company they're all
over the world and someone got in touch
with me and they said I've got Michael
page data and people just took context
it's not like they get in touch with me
because of my Australian heritage and
they now I've got the criminal thing
going so they get it they get in touch
with me because I think well maybe this
will be useful data for have I been
coned right I can put it in there I can
make it searchable so a guy gets in
touch with he says I got this data and
then he says Michael Page is Capgemini
for no it's not what do you mean and he
said
well what's actually happened here is
Capgemini and in case you don't know who
Capgemini are they're one of the world's
largest outsourcing providers they've
got revenue of about eleven billion
euros a year they hire a hundred and
eighty thousand people worldwide I mean
they have massive and anyway it turned
out that there was a bit of an issue on
Capgemini side and what I thought I'd do
first is show you the way this was
represented the way it was written up
and then we'll look at what the issue
was so the write up said feels an
unauthorized third party who illegally
gained access and that second line sort
of sounds like someone did something
pretty nasty right here's what they did
they opened a web site now I was
actually happening the guy that found
this what he was doing is he was just
scanning the ipv4 address range looking
for directory listings so just going
through knocking on port 80 just going
hey let's just make a get request do you
return a page that has index of in the
title and do you have a dot sequel gzip
yes okay great found something and he
gets hits over and over and over and
over again because organizations do this
and what I think is really interesting
with the Capgemini example as opposed to
say the India example is that a lot of
times people say well you know the
Indian one it's a small company they
don't have many people maybe not a lot
of expertise but this is very much the
opposite of this right there's a total
end of the scale and what we know from
this is that it doesn't really matter
how large the organization is and we
don't just know that from this we know
it from a lot of other empirical
evidence no matter how big they are they
tend to get exposed to the same risks
let me give you an example of what I
mean by this does anyone know what a
Google dork is now this is not my
Australian accent saying Google Doc this
is dork as in like the derogatory term
but I'll show what I mean we can go over
to a browser and we'll just grab this
one here and we can give it a bit of
something like we were just seeing on
the screen index odd so I'll search for
index I've got a save one here
let's actually go back because that is
not exactly what I wanted to try again
index of dot secret of gzip so zoom in
and show you what we've done here that's
easier yeah and then we've got all of
these results of websites with database
backups just sitting there like that
takes seconds and here are thousands and
thousands of websites and you can click
through to any of these and see the data
now that would be hacking so we won't do
that but it's not hacking if you just
look at Google cache so so far I haven't
been proven wrong so far we're recording
this aren't we oh
it'll be fine I'll be back in Australia
so long as this goes live after I get
back
alright but you see the point and I
guess this kind of crazy thing about it
is stuff like this just all over the web
and even if it's not like database
backups what if we went back one and we
just gave it a bit of a bit of get do
you think anyone would publish to git
repositories publicly of course they
would why not now fortunately nobody
ever puts anything sensitive in a git
repository so this really doesn't matter
but you can imagine how it happens right
like someone's just picked up the entire
directory of the web site and gone hey
let's just grab this and we'll just dump
it on the production site you know pick
it all up in publisher we have probably
all done this at one stage in the past
so there's a huge amount of data that's
just sitting out there massively
publicly facing now moving on one of the
other things that tends to happen a lot
is we get very sensitive about personal
attributes of data being exposed so
particularly in Europe you're very very
privacy conscious so we've got things
like our names addresses our phone
numbers we hope you guys citizens and
residents of Europe own that data it's
personal data and I want to talk a
little bit about how that gets exposed
now I'll skip past yet another trumpism
if you like seeing more thing
about Trump come to PubCon tomorrow
night very different things and we'll
we'll just sort of get a little bit a
little bit of insight about the sorts of
personal data attributes that people
like to have access to hey I got two of
these phone books didn't know if you
wanted one Hey
how long have we known each other a long
time and yet we've never discussed
mother's maiden names the names of old
pets high school mascots favorite
teachers heck I don't even know the last
four digits of your social all useful
info right like it's all useful info
that people such as social engineers
Fisher's identity thieves want to have
so it's info that we need to protect
very very carefully brings one of these
guys there may be some people in the
audience who send me rights about this
before for everyone else get ready for
this strawberry net is a Hong kong-based
cosmetics website and what they do is
they sell a whole bunch of things online
cosmetics is the word and you can go to
strawberry in it and you can buy many of
these things so I'll I be looking
through here and saying well oil-free
moisturizer I'm not sure well I need
oil-free moisturizer but it looks good
let's take one of those now we're going
to add it to the bag and go and check
out and we're going to express checkout
and this is where it starts to get
interesting what you do because this is
a cosmetic site and it's probably going
to be used by more women than men
you pick a female name you pick a common
line let's say Sarah Sarah is pretty
common and then you go okay let's pick a
common domain name a common email
provider like Gmail and let's now go and
try this Express Checkout and we'll see
how this goes see anything interesting
in the way this is done
now in case you are looking at this and
going well Troy this is very
irresponsible you should be reporting
this privately sit tight because you're
going to see how how hard I have tried
and how they actually view this now you
might also be looking at this and going
well like it's bad because it's personal
in from there but they've obfuscated it
which is good but then they do this
change billing address now I'm going to
zoom in a little bit cuz I want to
experience this in its full glory watch
very very carefully ah now luckily all
of that disappeared before any of you
could see it properly that's okay
except it's not really okay because you
can go over and you can use your
inspector and inspect that field and
find out that it does actually have a
name in it and you might then be looking
at this and saying well for a girl named
ser radicular really unusual first name
and you might then be looking at the
other field next to it the last name
field and go it's also quite odd that
her last name is but because the problem
is is that this has changed billing
address and you can go in and change it
to anything else you like without any
authorization it's just I know email
address and it's this when I saw this
was just unfathomable so I was running a
workshop for a government department
actually in Australia and we do this
enumeration module where we say look
what are the ways where data might be
exposed from a website now so for
example you put an email address into
the password reset feature and it comes
back and says it is there and we sent
you an email or it's not there that's
leakage right because it tells you the
email address is on the side so when I
was told about this I was like you got
to tell them you got to let them know in
the guys like now I really had tried and
they came back to me and they said don't
worry because we've got SSL on the site
so so basically as some sort of freaky
stalker pervert is siphoning women's
data out of the site anyone else trying
to hack them on the way I can't see the
data so I write about this and a bunch
of people got very angry and they wrote
to strawberry net and said look this is
ridiculous and strawberry net very
kindly replied and they had some reasons
and said well look we are actually PCI
compliant all of this is on my blog so I
am NOT making this up you don't ever
look at it and someone else wrote to
them they came back and said yeah well
customers like our system with no
password now I don't know who exactly
they surveyed maybe like the internal
marketing team I don't know and my
favorite one when I said using your
email address as your password
sufficient security this is why I know I
have a long and prosperous career in
this industry it's stuff like this
alright let's go on and do something a
little bit different and I thought we'd
talk a little bit about sequel injection
because sequel injection is still a
massive topic on the Internet and you're
going to see what I mean by this shortly
so we'll start with a little video
now I admit I have corrupted a lot of
databases with seeker usually my own but
how do we know they're hacking
green-screen very good all right this is
out of the Jason Bourne movie and I just
thought it was funny the way they
represent it but inevitably they're
talking about sequel injection and I
want to sort of start to go through a
few other mechanics of how sequel
injection works and I'm going to do a
few demos and show you two things and
the way I like to demo this is there's a
blog post here and it's a blog post of
someone wrote a couple of years ago and
I normally wouldn't be up here in front
of a crowd basically pulling it apart
which is what we're going to do but as
you'll see a little bit later this guy
wrote the blog post it's got some let's
just say creative things in it and I
left a very very nice polite comment
saying you really probably don't want to
do this and what about this and the
other injection things and ignored it
and then all these people came in
afterwards and said thank you this is
very useful I've just done this on my
site and I go well I thought ago I
not more of it then I go I'm going to
such a good career in this industry but
let's just start having a look at it I'm
going to scroll down a little bit and
we'll we'll stop somewhere and just just
sort of ask the audience what we do and
don't like so let's start with the
connection string how do we feel about
this connection string now it's dark but
somehow I can still see a lot of shaking
heads what don't we like about it okay
so look if you said password that is an
eight character password they're all
sequential numbers probably not so good
some people may have said well this is
not the way that we should be creating a
connection string into a database in
asp.net other people may have said well
you probably also shouldn't really be
using sa like SAS is not a particularly
great way of connecting into the
database because a very highly
privileged account it's it's basically
God writes you can do anything do you
think that happens though does it happen
much
and I had to find out how to say it of
course you did okay so let's say in fact
we'll get back to there we'll grab a new
tab and we'll do another Google Doc and
we can do a Google Doc for in URL
web.config now let's have a look at
what's happening here
FTP because Google indexes things over
FTP if you leave it anonymously
accessible web config anyone doing
asp.net knows what that is anyone who's
not doing it this is where your
connection strings are and your API keys
and the things that you want to keep
secret and web servers such as iOS are
designed to never return this but you
can on FTP because that's how some
people get the files there and we've got
hundreds of results of web configs being
returned and as we established you could
go and click through to any of these but
like we said earlier that would be
hacking but there are case versions and
it looks empty because it's XML and it
doesn't render to the screen but when
you view the source code you can see it
so we've got those there but getting
back to the point of SA let's just
filter this down a little bit I'm going
to take that out and we'll just put it
we'll just put an essay in here because
we would expect to see that in a
connection string in expose with the
comfy and what do you know we find them
yes I'm not such a good password that
one also not so good I probably even
with it and we kind of see this over and
over and over again and there's sort of
an interesting I guess issue with this
when we go back to here which is that
often when I see code on a blog post
that is it may be sort of ancillary to
the purpose of the post itself so for
example this post is about how to do a
password reset and I'll hear people say
now look don't worry about this because
this this is not what I'm writing about
it's just like an illustration you know
look at the bit doing the reset and I'll
sort of say to people yeah but you know
that people will come along and they'll
copy and paste this
and they will use exactly what is in
this code published summer on the web on
their own site without understanding it
let me show you how I know this I wrote
about something a while ago about the
Nissan Leaf now this was earlier last
year and for those who don't know what
an instant leaf is you're probably not
from Norway because they're everywhere
here they're these little cars and
someone in my workshop when I was here
in Oslo in January last year we do this
exercise where you get your phone and
you proxy your phone through your PC and
you look at the traffic that your phone
since the PC and the guy my workshop had
an S and leaf and he's like I wonder how
my phone knows which leaf to speak to
like how does it know to say turn the
heating on in my leaf instead of the
heating and someone else's people in
Australia I didn't even know this as a
theme but we have a whole set of
different problems so here get in your
car when it's hot and the sun's out and
the seat belt buckle is there and you
get branded serious that's the real
thing so we're not used to turning the
header on our car but apparently here
you are and he wanted to figure it out
and eventually he found what the API key
was in his phone that identified his car
the secret that would allow him to
control the temperature in his car pull
back the battery status find the trip
history and what he learned is that
secret is the VIN number and in case you
don't know what a VIN number it is an
API key printed in every cars windscreen
and I was here in Norway just walking
around past cars going there's an API
key there's no but I've just taken
photos the thing is though you didn't
even need to know someone else's API key
because they're enumerable and it's
basically just the last five or six
digits where you can just randomize them
and every now and then you get a hit you
get another car so we reported this to
Nisshin and said it probably should fix
your cars and that to be honest it
wasn't an easy exercise a month later
they still hadn't fixed it it will still
expose this was private disclosure
responsible disclosure and after a month
I said okay look I have seen enough
there is risk from this a privacy risk
with people pulling back data other
risks in terms of I think most Nissan
Leaf owners would not actually want
someone else controlling a physical part
of their car which is what the climate
control is so I published a blog post
and that's the blog post you see here
and then they pulled the service
straight away it just disappeared
and it went offline for quite some time
and eventually it came back online and
they had a new app and this is the app
now does anyone see anything in this app
at all unusual in case you're not seeing
it read from the bottom up
this is the real app this is what they
put out there in the App Store and I
want to explain how this happened and
the way I'm going to do it is I'm just
going to I'm just going to flick over
here I'm going to go to let me go to
here you know this site thank you I'm
going to go to here now get out of there
so someone copied and pasted code out of
Stack Overflow and put it in an app that
controls cars without reading it and
pushed it out to the world but it's even
worse because what do the first two
words here say the spirit yeah what do
the first two words here say someone
actually read that and typed it out
which makes it even worse because they
had all of these keystrokes where they
mind could have gone maybe this isn't
such a good idea but they did it anyway
because it seemed like a good idea at
the time I assume okay so look let's get
back to this bloke for a second if we go
back to our sequin Jetsons site how do
we feel about this sequel here is this
good sequel in terms of sequel injection
or bad sequel shall I hand two things of
bad who thinks is good oh you know odd
for those you down the front there are a
lot more people thinking it was bad than
good this is actually good
and the reason it's good is that when we
look at where we've got email just here
this is parameterization and we've got
email decorated with a little @ symbol
and then we go to the Select command go
to the parameters collection and we add
email which matches up to that go and
then we get the tick the text value from
this txt email field
now what prioritization means is that no
matter what value gets put in that field
it will not change the structure of the
query it will always try and find an
email address that has that exact value
so this is good parameterization is what
we want to do to protect against sequel
injection risks how do we feel about the
next one who thinks it's good things is
bad the bad habit okay so the problem
we've got here and the reason I show
this is it's just beautiful to put them
both right next to each other the good
in the bad in the bad what we're doing
is we're taking that txt email field and
we just concatenate it into a great big
string and then no matter what you put
in that field it will form part of the
query and when it goes down and executes
on query the database doesn't know what
is query and what is data it just has
this one big statement so if for example
I was to create an email address called
single quote semicolon drop table login
table - - and send it to there this
would execute it would drop the login
table and I know it will drop the login
table because the guy's connecting with
sa and I can do whatever the hell I want
so this is a beautiful example and to my
earlier point as we scroll down a little
bit I left him a very nice comment I
thought friendly feedback and what sort
of struck me as alarming is okay this is
kind of alarming I'm not sure why but
anyway as we went down you get people
saying you know really helpful useful
thank you very nice and easy to
understand and you realize that a lot of
the bad stuff you see on the Internet is
just replicated from other places I
think at some point probably around
about this stage this was September last
year I think I tweeted this because the
tone started to change and I'm sort of
like sure easy copy-paste reset
passwords of the bank of it and it's
right about here I go
I think the trolls are into this right
and as it goes on I said okay no
security flaws at all
we were hacked within the first week and
and this one Google when you get home
don't do it here trust me okay so this
is how we see sequel injection risks
sort of propagating in this way now the
other sort of side to the risk is that
we see really bad I guess really bad
advice about how to go and hack this
stuff and probably the best way to
illustrate this is I'm going to show you
a video that I found on YouTube where
someone talks about how to go and break
into sites exactly like the one we just
saw now bear with me I'm going to show
you a few little clips from this guy's
and all this guy and although or give us
your comments on it as well let's do a
professional video let's actually show
you how the concept works and I'm using
them the SQL or school method here
school injection now did anyone else
hear that and not think of this right
except at the hacking screw now the guy
sounds you know like maybe 15 16 is a
kid and this is sort of part of the
observation here which is that sequel
injection is such a severe floor but
it's also such an easily exploitable one
that we see children getting into it so
this guy goes on let's listen to a
little bit more but I will teach you how
to do that and and there are easy
methods to do this so do not worry do
not worry about this yeah
I just don't worry about the little jump
cut there okay so I maybe not like
Pluralsight standards of training
alright so then he goes on and he goes
to this website and this is the website
that's got a whole bunch of various
hacks on it and he's looking at what you
now know as a Google Doc and he's going
to show you how he uses this Google Doc
to break into a website I'm sorry bill I
don't know
I forgot that Firefox won't do that so
the phone site was this one which is
literally there so if I just go in here
yeah this opens up this okay so first of
all see how indiscriminate this was like
he's just gone let's search Google the
first result we get is the one we're
going to hack into this is not targeted
it's not like these people have wronged
me the early killing babies or
genetically modifying food or whatever
other reason
hacktivists come up with his criteria
was you're at the top of Google ok so
with this extension what we do is put a
little posture fee here little comma ish
but at their press ENTER and they were
good so this means that we have an error
in the database so there's an error in
their database so and their database is
MySQL server failure so because it's my
school always do out we can target it
and grab all the info
it's easy isn't it and the scary thing
is he's right because if you jump over
to a browser and you do another google
dork for something like in url let's say
PHP because we know that's going to have
issues this is a dotnet centric event
isn't it
just making sure and you sort of just
grab random stuff and you go okay this
one's got an ID and this one's got an ID
in it this one down here is got an ID in
it and we go over there and we say let's
just put one character in because one
character is not hacking I don't think
okay that's got a secret exception there
let's put one character in here that's
got a sequel exceptions there let's put
one character in here
that's got a sequel exception there now
this that obviously this was me just
doing this this was not pre-recorded
video you can try this at home don't go
any further than that all right so let's
see what happens next so next you want
to have this program have Ã¤j-- all
right so this sort of takes us to the
point in because what he's going to do
now is he uses this freely available
software to break in and that the
amazing thing about this again is that
he's a kid right he's a kid managing to
break in and pull data out of the system
so I thought we'll do another demo we'll
make this a really interesting
interactive demo and I'll get like the
the youngest person I can find to break
into this Oh what about you your little
come up here you'll never go alright
okay so what's your name
re re how old are you re so right we've
never met before have we
yes here sad alright but why don't you
get up here you need a stool cause you
only a little happy now here's what
we're going to do understand don't hack
other sides arriving we've got a hack
just the right side so we're going to go
to
let's go to here alright so now I was
going to do a demo so re let's let's
have a look at what happens here this is
the site of mind that you're allowed to
hack now he's going down here and he's
selecting one of the cars here one of
the manufacturers he's found MacLaren's
and he's copying the URL now if you know
how to copy you can be a hacker - so
he's popping this he's going to put it
on the clipboard now once he has this
he's halfway there because he can then
go down and open free hacking software
this is what we just saw right havoc and
he's pasting this into a field that says
target now once he's got that in there
he goes and analyzes and this is just
making HTTP requests so hitting the
website website goes down to the
database and it's pulling data back out
of the
databases trying to figure out what the
database name is and it comes back up
and it says here's your database name DB
heck he's moving ahead of me okay so
then he goes and he gets tables because
he's getting all the tables out of the
database and he goes okay I got those
those a good he has to choose which
table he wants he going to use a profile
that looks pretty good doesn't it why
don't I get all the columns out of the
user profile data
let's use a profile table here's all the
columns so now he's just got to figure
out what he actually wants from there
he's smart so he's going to email
address and of course he's going to
password as well and then the only thing
he's got to do is get data and then here
comes all the data out of the system
give re-route a report that's also how
we practice this there's something you
forgot before you started hacking ah
there you go now is a key okay good boy
okay so on that note let's finish there
but we got a little bit of time in case
you one of us are any questions perhaps
we can leader or myself as well does
anyone have any questions about what we
just saw or is it just like stunned
silence would you go home and teach your
truck now don't do they yes over here
sorry again why are all those sites
still online it's a bit of a mystery
actually they may still be online but
there may be lots of backups of their
database in in other places but it's
amazing a lot of them get taken down but
a lot of them pop up again very soon as
well and I wonder how much people
realize their data is actually being
exfiltrated from the system because if
it's like sequel injection and it's it's
nondamaging they're literally just
selecting data out I reckon a lot of
them don't even know very often when I
get sent data breaches the first the
organization knows is when I go assisted
by other and the hood actually it is our
data we didn't
had no idea the other questions yes
alright so when I find a security breach
how long do I wait before doing what
before publishing it okay so the short
answer is it depends now something like
Neeson is a good example and this
adheres to what I think most security
professionals would say is sort of
disclosure best practice I got in touch
with them privately they responded
quickly we email back and forwards we
spoke that week and then nothing
happened and I kept emailing them and
saying what's the status are you fixing
this people are at risk and what
eventually happened is we got to the
point where I knew that other people
were exploiting this and that's when I
said okay guys look I'm going to publish
this tomorrow are there any comments or
anything that you would like to add to
the blog post so that was one month and
I had to make a call based on the
exposure the risk to people and then the
risk of if I did disclose what would
happen like would people start to
exploit it before they could shut it
down there are other cases where there
are things that I would never publicly
share like that the pathology lab data
even if they hadn't fixed it a month
later I'm not going to write a blog post
going here are 43,000 reports that
include HIV results so it's definitely
case by case and it really depends on
the company doing the right thing in
responding responsibly as well yes
to check
okay he said is the integrity check just
a method for validating scripts such as
the Trump efficacious script so that is
the only method we have that is mated in
the browser that allows you to check the
integrity of an external file and like I
said like that works on JavaScript it
also works on CSS as well so long as you
using Chrome or Firefox that's that's
the caveat anyone else yeah
all right so the question here is that
do I have any any tips to help websites
respond faster when you do report
something because you've reported
something and they're not fixing it in a
speedy fashion right honestly that the
tip is is that I get to a point where I
go ok look this is going to be public
and it's going to be public either by my
blog or the other one that I find is
really useful as journalists are very
very good at getting traction and that
there's a few useful things about going
through a journalist so one is that when
a company here is it's a journalist
contacting them asking about a security
breach and they're going to write
something they're like ok so this is
actually going to be in the newspaper
it's going to be serious the other is is
that it does divest a little bit of risk
from me because I'm not the one having
to have that direct discussion where
they might get threatening or legal or
things like that
and finally journalists and there are
some really good security journalists
out there so people like Joseph Cox from
motherboard or Zack Whitaker from ZDNet
they're very used to framing security
issues with companies their security
journalists so getting in touch with
someone like that if you found something
really interesting also helps expedite
things all the time for about one more
any others yes
all right good question so many attack
vectors how can i czar develop and now
I'm not screwing up I have a think about
the things you saw today most of you are
pretty sure when you're doing that right
unless my database is publicly exposed
not so good I would say that the single
most thing I have a vested interest
given what I do is training for
developers so I've been doing training
here this week we did a two day workshop
on Monday and Tuesday I'll be back here
in January doing another workshop as
well actually for the same organizers of
this event and just spending a couple of
days sort of going through the way these
risks work and the way attacks occur
makes a fundamental difference and it's
just two days then you take that you use
that for dozens of projects over many
many years so that's that's my answer I
honestly think that definitely the best
possible thing you can do is develop a
training we're out of time so thank you
very much for for coming everyone I hope
you enjoyed our emi</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>