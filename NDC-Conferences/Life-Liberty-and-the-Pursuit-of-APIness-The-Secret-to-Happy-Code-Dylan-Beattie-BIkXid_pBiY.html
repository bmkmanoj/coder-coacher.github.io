<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Life, Liberty and the Pursuit of APIness : The Secret to Happy Code - Dylan Beattie | Coder Coacher - Coaching Coders</title><meta content="Life, Liberty and the Pursuit of APIness : The Secret to Happy Code - Dylan Beattie - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Life, Liberty and the Pursuit of APIness : The Secret to Happy Code - Dylan Beattie</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BIkXid_pBiY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon hi hello
it's very bright the lights down there
it's difficult making out how many
people but thank you all for coming
my name is dylan bt i am a going to talk
to you this afternoon about life liberty
and the pursuit of happiness
the secret to happy code this is me I'm
a developer systems architect I've
worked in all kinds of things I've been
building websites and web applications
since 1992 so for about as long as the
world wide web has existed today my day
job I'm the systems architect with a
company based in London called spotlight
my website is at Dylan Beattie down
there I'm on Twitter I'm on email any of
these if you want to follow up you have
any questions or anything you want to
you know ask about it or talk about
after this and yes the topic of today's
conversation is about happy code now my
company spotlight the company I work for
we work in show business
we have default clipart like every
industry does and this is ours these are
the the Greek theater masks of comedy
and tragedy happiness and sadness and
I've been working with this company a
long time I've worked on lots of
projects with them I've worked on
projects with other teams I've talked to
you know hundreds of developers and
teams about things they're working on
and one of the many many things that
I've noticed over the course of my
career is I can't think of a single
successful project that has been shipped
by people who were miserable people who
were grumpy people who were you know
frustrated and pissed off and didn't
enjoy going to work and stuff I can
think of some examples of some
incredibly you know audacious ambitious
projects kind of projects you think
would fail just from the complexity of
the requirements and yet you know
someone's managed to ship a really nice
elegant lightweight solution that solves
the problem I can think of projects that
should have been you know
straightforward relatively easy you know
well-funded good requirements good
contact with the customer that have kind
of collapsed under their own weight
under the weight of the sort of growing
pile of day-to-day
and frustrations and so I started
thinking about this idea you know when
we when we build software we have
functional requirements what does it
have to do and then we have the
non-functional requirements which are
things like you know performance and
monitoring and infrastructure and I
thought what if we started treating
developer happiness as one of the
non-functional requirements that we
optimized for you know what if we look
at ways that we can actually build
systems that are happy that make people
happy when they work on them um you know
just to be clear this is not a talk
about mental health this is not talk
about depression or anxiety or any of
you know those sort of conditions I'm
talking about just not being pissed off
I'm talking about going into work and
getting through the day and coming away
and going you know what that was pretty
good we did good stuff today and we're
going to go back tomorrow and we're
going to do more good stuff and there
are two themes that we're going to talk
about in the course of developing this
one of them is this this is an idea
called discoverability well this is the
space shuttle discovery but I like space
shuttles and I needed a slide
discoverability is a it's an idea that
comes from industrial design product
design user experience design you know
and all those fields they have their
roots in in psychology and
discoverability is the ability of things
to be found you know it's it's
combination of things being obvious it's
combination of that and you know signage
and affordance ways you can interact
with things giving people the
opportunity to explore systems for
themselves and discover the capabilities
the boundaries the services of those
systems
now the other thing I'm going to talk
about is models of learning psychology
and me like you know probably many of
you and I think most developers we enjoy
solving problems we enjoy solving
puzzles and when we do that when you're
you know you're trying to work your way
through something whether it's a piece
of code or a math problem or a crossword
puzzle when you solve something your
brain releases releases a rush of a
neurotransmitter called dopamine
dopamine is the addiction chemical
dopamine is the thing that gamblers get
when they win dopamine is what keeps
people coming back for more
now being addicted to solving problems I
think that's probably okay you know
work-life balance is important but I
think you know if you get a sort of
positive feedback buzz out of doing the
work you do and doing it well then I
don't think that's too bad now the other
interesting thing about dopamine is
studies have shown that things that you
learn that are accompanied by this
dopamine rush you will actually retain
them you learn them faster you retain
them for longer you recall them more
quickly when you need to so if you can
build systems that somebody can learn
for themselves by experimentation and
every time they learn something they get
this little ping you know this little
rush of dopamine in their brain they
will be much happier they will feel like
they're achieving things they will learn
faster they will would call that
information more easily and they will
generally find it much easier to get to
a point on a you know a new code base or
an unfamiliar system where they
understand it they're productive they
can go and they can do meaningful work
with it so while we're talking about
learning I want to talk a little bit
about learning curves so we have this
idea of a learning curve there are no
units on this graph you know my high
school physics teacher would flunk me
for this but basically we have expertise
is how good are you how proficient how
competent are you at using some tools
some system and experience how long have
you spent playing with it so we got to
here we got one on my right which is
blue call them the blue one and the red
one so we don't get left and right next
up and by a show of hands raise your
hand if you think the blue learning
curve is better okay that's a good trend
raise your hand if you think the red
learning curve is better so that's
interesting kind of about 5050 better is
a very subjective word because I haven't
told you what metric we are optimizing
for here this steep learning curve is
someone teaching them Haskell teaching
themselves Haskell in a long weekend you
know this is someone who goes very very
quickly from I don't know what I'm doing
to okay I got this
this one is somebody who's been using
Microsoft Word for five years and they
still don't know what a page break is
you know there are different models of
interaction now the thing about these
learning curves the thing about them
that's important it kind of doesn't
matter how steep they are because a very
steep curve some people will just work
on it slowly you know they will they
will take more time to get there there
are some things you need to avoid though
when you're thinking about the learning
curve associated with the systems you
create this is a localized peak this
means somebody has invested some time
and you know effort they've learned all
this stuff they've learned all this
stuff they get to here and they're like
I'm stuck I can't actually get better
because what I've done here I've
developed this this you know this mental
model or this body of knowledge which is
actually now going to break down this is
asp.net webforms where you spend you
know two or three years and you get
really quite good at building these
these interactive websites with buttons
and things and then you need to do
something like build some streaming
media with a you know continuing
download or you need to build something
that uses richer HTTP verbs and suddenly
you realize that you need to be over
here you need to be learning the
fundamental architecture of the web what
you have learned instead is a very very
leaky abstraction you've learned
somebody else's model of how they think
this is supposed to work and in order to
actually make progress first you need to
unlearn all the stuff that you learned
there and then you need to work your way
all the way back up the other side and
you know this pisses people off you get
to a point where like well if it was
wrong why did I spend the last six
months learning all of this kind of
stuff and this is something that happens
a lot you know there are lots and lots
of frameworks and abstractions and
things that we are software developers
use to get up and running quickly and
there is always a risk when you're
learning something you start with
abstractions you know we start off if
you study physics and you know school
when you're a child you learn a
relatively simple conceptual view of the
universe to go on to study at university
they say well most of the stuff you
learned in school is kind of right for
you know big things but actually when
you get down really small we have this
thing called the you know quantum
physics which is different the
abstractions break down
and that's kind of okay because the
abstractions work most of the time what
you want to avoid are this thing where
you have like you know a learning model
that teaches people the wrong thing
teaches them something that we're
actually going to need to come up with a
completely different way of thinking
once they take the training wheels off
then there's this this is the learning
curve with the brick wall in it this is
the point where you are learning Haskell
or F sharp and someone says oh let me
tell you about monads and two days later
you're just going at and you know
they're already up here they've
forgotten what it's like to be down
there and you're down here going guys
help I literally I cannot see how to
make the conceptual leap from where I am
to the next level here you know this is
one of those things where you're
following a you know walk through I
remember years ago I was trying to get a
sound card working on an early build of
Linux and and it's like do this do this
do this do those recompile a kernel and
I was like okay so I can step one two
three you know step one draw the eyes
step two draw the big step three draw
the owl and you know it's that kind of
model and this is effectively not a
learning curve at all what this is is
you can get this far and then if you can
find your own way to here you can get
this far so think when you're you know
building systems things people are going
to interact with think about this idea
of learning curves and think where are
people going to get stuck what are the
points that you got stuck where did you
have trouble when you were first putting
this stuff together now many many years
ago in the ancient early days of net and
old net when you know we were stealing
things from Java and it was all very
interesting I was playing around with
IOC containers for the first time and I
downloaded castle Windsor I installed it
and I did what I you know followed a
blog post we didn't have Stack Overflow
then it hadn't been invented yet so you
had to do everything using experts
exchange common blog posts and I
installed it I pressed f5 and I got the
yellow screen of death and I thought ah
and then I look closely and it says you
know this is not no reference exception
this is not invalid operation this is
hey it looks like you forgot to register
this module to fix this ad and then it
gives you the XML that you need
inside the error message so literally
you've hit a brick wall you're stuck but
the people who built this framework
you're like this exception is probably
going to happen because somebody forgot
to do a particular thing so let's help
them out let's put the next clue they
need to keep making progress right in
front of them the error message this
stage is very wobbly the thing that
actually says you have a problem also
tells you and here is how to fix your
problem so you know I talked a little
bit about this idea of user experience
and user psychology and a lot of you out
there probably thinking well you know UX
is all ok but I'm not a UX designer
I'm not a UX developer I'm a database
engineer I build backend systems I build
api's you know I'm a systems Network
Network person we all have users if the
thing you build is gonna get used by
anybody for anything you have users if
you're building back-end frameworks your
front-end developers are users they are
using your work to achieve something to
do their job if you're you know creating
networks and virtual infrastructure the
people deploying applications onto your
stack are your users if you're designing
databases you know unless you're just
designing databases for fun somebody is
going to connect to them and go in and
try and get data out those people are
your users and we have this wealth of
patterns and practices and techniques in
user experience and product design and
so we're going to do today is talk about
how we as developers can take those
patterns and we can apply them to the
work that we do so the people who use
our work will go home on time with a
smile on their face I'll come back
tomorrow and we'll start achieving some
good stuff and we're going to start by
telling a story so you join a new team
and you know your first day on the team
whether you're going to the office or
you log in remotely from from wherever
you're working and the first thing on
your to-do list is hey you got to get
the website running locally and you
think ok how hard can that be
so you go into the github repository and
you search for website and don't really
find anything so you search for web and
you find web and web underscore final
and web 2
web 2015 web 2016 and you look around
and a couple of these repos and you're
like I'm not sure this is the right
place and so eventually you know you
ping somebody on slack and you say hey
which the web site which repo is it and
they say oh it's in the repo called
sales application they like what and I
yeah I too used to be part of the sales
team so as in sales I don't worry about
it so you know you get some code and you
check the code out and you open the
visual studio and you know you press f5
and it just fails it won't build and so
you're like okay and you go digging like
oh it's looking for C program files my
company Assembly's version 2 2016 foo
DLL which of course isn't on the
internet because its proprietary it's
something that came from somewhere else
in this company so you go to someone
else hey where can I get this food up
DLL that it needs so now our yeah of
course I'm here copy all the DLL just
just copy my entire C Drive and you can
carry pick the bits you need and you
know you get it up and running and then
you finally run it and of course it
crashes because you don't have a
database and you're like you know where
do I get the database from and you know
if you're lucky and your co-workers are
patient you can maybe work through the
whole thing and get something up and
running and you're going to leave that
like 9 o'clock at night and you're going
to be tired and if you're unlucky you're
going to get one of drunk visual studios
greatest hits you're going to hit a
brick wall you know you're just going to
get your dev trying to do your job
trying to get it up and running on this
new team and you're just going to get
unspecified error and you know at this
point you're like hey does anyone know
about unspecified error and they're like
which one there's like 25 that we know
about me like are they documented
anywhere they're like oh no you know
Ghana's John John's the unspecified
error guy and so if you're a good
developer you'll think right come on
this is crazy let's fix this so you'll
you'll open a page on the wiki and
you'll go through the steps you'll be
like get these dll's from here and go
through and install the database and
clone this database from this repository
install this code do all these things
and then you know you start off
miserable you think I'm going to fix
this yay happy wiki page and you come
back two weeks later and the build
process has changed some of the dll's
have moved the people who did it don't
know about the
new wiki page you know it's
unsustainable this idea of having to
retrospectively play catch-up with a
constantly evolving code base full of
chaos just doesn't work it doesn't scale
it doesn't create happiness so still the
same story all over again you start a
new company or new team working a new
project and they're like hey you got to
get the website running locally you're
like okay and they say by the way the
code name for the website is Applejack
and you go isn't that my little pony and
they go yeah it doesn't matter it's just
it's a code name
take that and you'll find it so you're
going to get hub your type Applejack and
bang there's one repository called
Applejack that's got the website in it
and you're going to look on the wiki and
you type Applejack into the search box
and bang you get project pages Applejack
this is everything we know about this
project so you check it out and you
press GO and the first thing it does is
restoring NuGet packages and you look at
it and you know it's pulling in jQuery
and dotnet corn or leaves and then you
notice it's pulling in a bunch of
packages called my company dot foo dot
DLL because someone has gone we've got
all these proprietary assemblies why
don't we set up our own new get server
and put all our assemblies on that
server so we don't need to worry about
finding them on someone else's C Drive
and copying them across so clone code
press f5 that gets you as far as the
application has built starts to run and
it pops up a screen going hey looks like
you're trying to run the application but
you don't have a database go and look in
your check out folder in your source
code folder you'll find a folder in
there called SQL if you run the scripts
in that folder we'll create a local
database you can connect to now this has
achieved two things for you one you now
have a database but also you know where
the database creation scripts are
because you just solved a puzzle you've
got that little bing dopamine hey look I
made it go I made it work I made the
machine do what I want and next time
you're like hey I wonder what the table
definition for this is or I wonder how
these this data gets populated you can
go and jump into that folder that you
remember is there and you can pull those
scripts out and find it and by the end
of day one you've got the website
running you've got the database running
you kind of know your way around a
little bit you found it on the wiki
happy you know No
Applejack's a codename it doesn't matter
naming things is important if you have a
kind of a natural domain boundary if you
have some project in your application
there on your in your organization that
has some code that goes with a database
and maybe it goes with some logging
infrastructure give it a name it doesn't
matter what the name is it really
doesn't we're not naming a product
taylor kept using a code name and by
giving it a name you cut out a lot of
unnecessary noise when something goes
wrong you know you've got email alerts
or you've got whatsapp alerts or
whatever coming in use the product name
Applejack just had a problem Applejack
says it's at 90% CPU Applejack is
reporting unusual numbers of API timeout
exceptions it's progressive once you
know about Applejack that gets you into
the code the code will then get you into
the new get repo the new get repo will
build you the solution the building
solution will point you at the database
the database will point you at the
schema and everything so every step the
code that you're running you know the
work that the other developers have have
done they've laid this ground work for
you that means you get this very smooth
organic satisfying progression from I
have no idea what I'm doing - hey this
is cool Tuesday morning you come in you
might even deploy something to
production now
the first computer I ever had
was it wasn't this exact computer but it
looked like this computer it was a 286
PC it had one megabyte of memory hole
megabyte and when you switched it on it
would sit there and it would go for
about a minute and then it would go and
you'd go hello and it would say bad
command or file name and you would go
sorry menu because some computers had
menus and it would go bad command or
file name and you'd get help and it
would say bad command or file name the
only fun thing you could actually do
with this MS DOS prompt was you could
say if you're happy and you know it's
syntax error and it would say syntax
error if you're happy and you know it's
syntax error and it would go round and
round and round but apart from that you
know
now at this point what do you do you've
got this this little blank thing here
and you're thinking you have to go look
at the manual and the manual starts with
welcome to the Microsoft disk operating
system you know there's no affordance is
basically a brick wall it's like here
are all of the things that are available
they're all listed in this manual
eventually you find like dir will will
give you a directory of what's on there
and everything but literally you've just
bought probably the most expensive
machine you've ever owns you've plugged
it in you've switched it on and it just
goes eh and you know where do you go
from there and anything you type it says
bad this is not a way to you know create
a happy experience now the other
computers that you could buy around the
time that my 286 PC came out were Apple
computers and when you switch them on
they did this they showed you a little
picture or a little cartoon of the thing
you just born then they said welcome to
Macintosh and they sat there and they
kind of sang away happily to themselves
for a couple of seconds and they're
showing you little pictures and the
pictures looked like the things you just
took out the box there's a picture of
the computer and there's a picture of
the disc and you know there's still a
little bit of startup a little bit of
warm up time while it's doing its thing
and then you get this now
the first thing you notice is oh look
there are things here and I can I can
move this mouse around the mouse was
kind of shaped like something you could
grasp with your hand and you move that
around and you click on stuff and you go
when I click these things appear and you
had this thing here system and that
looks like the disc that you just took
out of the box and this down here trash
can looks like a trash can so you're
like okay well that's probably where I
go to get rid of things and we won't
talk about the fact that to eject the
disc you drag it to the trash that was
one of Apple's weirdest user experience
quirks so you know I I love this idea
that as you start interacting with an
unfamiliar system it gives you clues and
cues and helps you do it and my absolute
favorite example of this that I've ever
come across is this
good morning you has been in suspension
for 15 days in compliance with state and
federal regulations all testing
candidates in the Aperture Science
extended relaxation center must be
revived periodically for mandatory
physical and mental wellness exercise
you will hear a buzz when you hear the
buzzer look up at the ceiling and good
you will hear a buzzer when you hear the
buzzer look down at the floor and good
this completes the gymnastic portion of
your mandatory physical and mental
wellness exercise there is a framed
painting on the wall please go stand in
front of it
this is art you will hear a bus when you
hear the buzzer stare at the art you
should now feel mentally reinvigorate if
you suspect staring arrive has not
provided the required intellectual
sustenance reflect briefly on this
classical music
and now please return to your bed that's
from anyone to tell me what that's from
portal portal 2 and it is the training
level you get when you first start
playing the game and in the course of
that little little skip there so one
it's actually got some laughs and some
narrative and some story and establishes
and context it also teaches you how to
look up how to look down how to walk how
to move around how to interact with
objects that exist in the game and it
does it in a way that you know you're
laughing in you're entertained you're
happy and you're learning and the things
you're learning they're gonna stick and
if you get it wrong if you stand still
for too long the machine will actually
pop up and it will go your computer will
say hey you know use the mouse to look
around move the mouse to look up and it
will tell you which keys and how you you
go through and perform these
interactions so those are a couple of
neat examples of this idea of
discoverability and systems that will
help you discover them one one step at a
time I want to show you one now which is
a recent sort of very developer centric
example this is from Microsoft edge the
new we're not going to do Internet
Explorer anymore it's called Microsoft
edge now and the first time you run edge
as a web developer you go and you bring
up one of your sites that you're working
on and you go right click I want to
inspect an element right click and all
you go to select and print and you're
like where's my stuff you know I'm a web
developer I can't work with select all
and print and so you start poking around
a little bit and you go up to the
context menu here and this brings up the
list of things you can do and one of
those things is called f12 developer
tools so first of all you like that f12
might help with this because none of the
others have a key next to them it's like
saying you know this is where special
you and me we can do function keys
eventually other losers function keys
are special you set it and you get a
thing pops up that says inspect element
and view source will now appear in the
context menu now I love this you know
90% of people who use a web browser
don't need right click inspect element
and right click view source you ever had
a panicked phone call from a family
member going I right-click the Internet
and everything broke and now I can't see
any pictures and you're like what does
it look like and they're like there's
lots of funny angle
brackets and you're like yeah it's
alright it's fine don't worry don't
panic I think this is a really nice way
of kind of taking the stuff out of the
out of the way of you know everyday
users when they right-click there select
all and print that's probably what most
people need but if you are a developer
you go and it takes you a little bit of
exploration you're going to click this
menu you're like okay and so by the time
you've done that one you've got it in
the context menu to you've realized that
most people don't have it in the context
menu three you've learned that you can
use f12 to activate it now this idea of
you know discoverability of capturing
the exact point where somebody is
interacting with one of your systems is
an incredibly powerful pattern that we
can apply in all sorts of situations
when we're building code so there is a
thing called intelligent code completion
what Microsoft call intellisense you
typing away in your editor and you type
something and you get these little
pop-ups that say hey these are all the
options that are available this is where
you can go from here these things are
you know signifiers these are the
options that are available and you know
I'm sure there's something you're
thinking is this go really telling us
about intellisense at NDC you know what
does he think we are we've all used
intellisense anyone who's ever used an
editor that has code completion has
worked with these kinds of things but
how many of you when you're building
your own code when you're building you
know libraries and applications actually
stop to think hey maybe I could put some
smart intellisense in here that will
help other people make sense of this
code base design creating there is this
really quite cool pattern that exists
which is something called fluent
interfaces now what you can do in
c-sharp and a lot of other languages is
you can define expansion methods you can
take objects classes and structures that
are built into the language and you can
extend them so we can do things like
that don't do this because this is a
little bit weird
but I just want to show you a thing we
have a method here that will take this
int
call value and it will return timespan
dot from minutes and it's called minutes
and then we are going to create another
so
intellisense prompt here this returns a
time span equal to the specified number
of minutes number of minutes returns a
time span an instance of CRF equals time
span so by doing this we've created
context we've got intellisense we've got
documentation that's going to pop up
when someone uses this and when someone
types 20 dot they can see here bang 20
minutes and now this actually was an
experiment there's a lovely idiom that
Ruby uses for calculating you know time
spans and at arithmetic which is you can
build extension methods where if you
want to say 20 minutes ago you say 20
minutes ago good you know that's nice
it's unambiguous it's readable and
using.net and extension methods in
c-sharp you can do exactly the same
thing you can have an extension on
integer that turns it into minutes and
you can have an extension on timespan
that will subtract it from now from the
current date time so subtract this time
span from the current date time return
the result and so now by just putting a
couple of expansions in on this language
we can write code that reads 20 dot
minutes ago as opposed to date time
offset UTC now dot subtract time span
from minutes bracket 20 X might be and
lots of others in there one you type 20
dot and you get intellisense popping up
and - you can see from the intellisense
from the intelligent code completion
what this is actually going to offer you
so this is as I said as a pattern called
fluent interfaces it's a very good way
if you're building AP is that expose
things like configuration properties for
configuring something like a pipeline if
you have a request going through a
system and you're like okay well first
we need to run all the incoming messages
through a validation filter then we need
to run them through an authentication
filter then we need to run them through
a parser then we need to run them
through something that transforms them
you can use these kinds of fluent
interfaces so you've got you know
filtered message authenticate and that
then also okay what is available after
you've authenticated
well after that we can run it through a
transformation after the transformation
we can run it through a response
processor
there is something that we do all the
time in net which is connecting to
databases and I've been writing dotnet
since visual studio.net beta 2 and I
still cannot write a sequel connection
strength from memory I do not know the
syntax it just will not stick so every
time I go to sequel connection at that
point I hit a brick wall it disrupts the
flow yanked me out of the zone so what
if we wrote an extension method called
sequel Connect which tells you in the
intellisense the thing that pops up at
the exact moment you get stuck and says
hey the thing you can never remember is
this this is how you you go and connect
to it now I love these kind of ideas I
love this this approach of thinking
where are people going to get stuck
where are the roadblocks where are the
brick walls what are the dead ends in
this application and when my users in
the broadest possible sense of the word
reach one of those dead ends how can I
help them out it's not just about dead
ends it's also about helping people
explore and discover what is available
in the scope of a system so we have a
pattern in UX school you know signifiers
signage we're all familiar with
signposts you know you're out on a walk
you're in a park and you're like hey
where can I go what are the the things
that are available from here and the
world wide web one of the reasons it
works when it's popular is it uses
something similar you can have a page
and a pages of collection of or have a
collection of links and each of those
links will take you to somewhere else
and you know the web is quite popular it
works pretty well we can use the same
pattern this hypermedia pattern in the
way that we design API is if you're
building web api s or hypermedia api is
that other people are going to use to
interact with your data there's a couple
of things you can do to make this
experience really good one of them use
discoverability but also you can provide
ways that other people can actually play
with your data and explore it for
themselves so this is a snippet from a
production system that we're working on
at the moment so this is an interactive
Explorer our API ships with some
JavaScript you can open it in an
ordinary web browser and you can switch
here between the test environment and
the live environment
test environment gets reset every night
we say to people this is safe you know
go and do anything you like delete
records we'll fix it in the night it
doesn't matter and what we do here is we
take the raw JSON that gets exposed by
that API but we actually then process it
on the client so that all of the
different interactions if there are
resources available from here we make
them clickable if there are actions
available from here so we have a
resource here we have a profile
performance profile you can go and
change their height by doing an HTTP put
so those were put there and the person
who's trying this out they don't have to
write code and you know configure it and
put the credentials in someone says to
us how do I use your API we say you know
you got to use name and password not
okay well set you one up then go here go
to developer spotlight calm and play
everything that we support we expose on
this interface and you can actually go
and play around with it for yourselves
there's a live environment on there you
can use for Diagnostics and exploration
and there's a sandbox environment you
can use to try things out if you've got
something in your code and you're like
this probably should be working come and
try on our system we can replicate the
same requests you can do the same
responses see how the thing actually
works
giving people a safe place to play and
clues as to what operations and things
are available is one of the absolute
best ways of them feeling like they're
in control of this journey this learning
experience they're going on now the next
part of this talk the last part of the
talk what I want to talk about is
monitoring so you know we've built code
it's great we learned it new people are
up to speed on the team the API client
developers are happy because everything
is explorable
we've got signifiers and we've got
affordances and we've got
discoverability and the system is
running and everything is happy and then
you know something goes wrong the
hypothetical red telephone rings and
there is a problem and someone says you
know pick the phone up and they say the
system's broken and you're like what
system now you know the system with the
computer and you're like okay hang on
yeah let me take your number I'll call
you back hang on the other line is
ringing you put that down pick up the
other phone someone's like yeah systems
not working there's a problem and you're
like is it can you tell me what it is
and then
it's not working and you know you have
to a half a dozen of these eventually
somebody you talk them through how to
take a screenshot and email it to you
and they send you this and you're like
okay that really doesn't help at all
somewhere in our application stack which
at last count is 1.5 million lines of
code running on 26 different servers
something has turned out we know it was
a request so hey maybe that's a clue you
know um what do you do how do you begin
investigating these kinds of problems
you have nothing to go on
people are already upset your users are
already angry because they were trying
to use your system to do some work and
suddenly they're just getting this
yellow screen with requests timed out
you've got your boss going how long is
it going to take to fix you're like well
I don't know we got 1.5 million lines of
code and I can probably read a line of
code every eight seconds so you do the
math you know this doesn't help this is
a horrible horrible situation to be in
because when you get for that exception
timeout you know it's a brick wall the
learning curve is broken there's no way
you can go from there other than just
start digging through every single line
every single configuration what we want
to do is not only to create
discoverability and you know these
learning curves and user journeys for
people working on our code we want to
create them for people who are running
our code for people who are managing our
infrastructure now one of the simplest
things you can do with this take
whatever you're running in your
organization try and break it down into
a couple of high-level manageable
components maybe it's as simple as we
have a website we have a database okay
so put them up on the wall put up a
screen get a spare monitor buy a TV come
up with some monitoring software and
think what's the simplest thing we can
do okay how do we test if the database
is up select one from users bang if that
query succeeds it's a start if that
query fails we know we have a problem
you put up another one next to it how we
know that the website is working well
let's do an HTTP GET to our home page if
that comes back then you know and what
you want to do is create early
visibility if something fails
catastrophic
it's going to take the entire system
down with it whereas if one component
fails catastrophic a website goes down
but your database is still okay you're
getting at one green light and one red
light and you can ignore the green light
because you know the database is all
right and you can immediately start
looking you've cut your problem size in
half because you know the problem there
is something to do with the web
application code and you can get more
granular you know you break it down into
okay well actually our website we have
the content management system and we've
got the my account management system
we've got authentication so let's make
that for red lights and then when
someone has a problem you're like okay
looks like the login system is having a
problem create these kind of high-level
views because every time you can
partition your system you know for
maximum points each of these little
colored boxes has a name on it this one
here is Applejack Applejack is having a
problem right now and you know what
Applejack is because you remember from
your first day where you've got
everything up and running and so even if
you're not working on that project right
now you can jump in and find your way
around it so we see we have a problem
here we go into Applejack we pull the
code down we're like okay we're going a
500 error system so the next thing that
we are going to do is we are going to
build visibility into the applications
themselves you know what your app does
you know that it connects to a database
you know that it maintains some internal
state it processes orders why not build
in a page stick it behind a password or
use some kind of authentication lock it
down the firewall that actually is like
lifting the hood you know popping up the
trunk on your the bonnet on your
application and going what's actually
going on in here that gives you
fantastic visibility on what's going on
you fire up you know logging
infrastructure you have a look at the
dashboard you see what's happening
you're happy you haven't had to read 1.5
million lines of code you managed to
hone in on the problem quite quickly now
there is an art to exposing this kind of
data you know complicated systems have
lots and lots of features if you just
expose all of them it doesn't actually
help anyone achieve anything at all this
is visual studio look how easy it is to
use all you need to do is click the
buttons to make your program right you
don't want to expose this you don't want
to expose every single gritty detail of
your application
what you want to do is to create
transparency to encourage visibility and
a sort of high level view on what you're
doing you think about the dashboard on
your car it doesn't have a light for
every single moving part in your vehicle
it's got I don't know maybe five lights
you know there's a problem with the
battery there's a problem with the
brakes there's a problem with this the
headlights are on and there's that
little electrical light that says take
the car to the garage and give them a
lot of money and they'll fix it and
that's the kind of level you know if
it's a problem with the oil you can put
oil in it's wrong with the brakes don't
drive it you have a problem the brakes
problem with the battery get a new
battery if it's the other light you're
going to need to call in the experts
it's quickly and you can once you've
sort of got these monitoring systems
these dashboards put them right where
everyone can see them all the time the
Starship Enterprise and Star Trek next
generation the warp engine that drove
the thing which I think actually the
production design this is a massive tank
full of gin and tonic with an
ultraviolet light at the bottom which is
what gives it that lovely blue kind of
space glow you know it's right smack in
the middle of the room where everyone
can see it and there's episodes of that
show where one of them will walk past it
and go hang on that doesn't look quite
right that's the kind of thing you want
to do you want to put this stuff where
people walk past it so someone's on
their way to a meeting or they're going
out to get a sandwich they're like hang
on one of those lights has just gone red
let me let me although it's got orange
you know if it was red
you should have notified someone if it's
orange they're like let me check might
be something that's about to go bad we
can preemptively fix it there's three
things that you want to make as visible
as possible in terms of your you know
dashboards and transparency and
monitoring one of them is what code
what's the state of your box what is
running on it what have you put there
what's been deployed what's it doing
what configuration are you running there
is a web framework and botnet called
Nancy and one of the things one of the
many things that I love about Nancy is
it has a dashboard built in any Nancy
application if you get a my website comm
slash underscore Nancy put in the
password you can figure in your config
file it basically that takes all the
panels off and it says hey here's what's
going on under the hood you want
information about your current
configuration yeah click the big I
button and we will dump everything will
dump you know the static config will
dump the dynamic config will dump
actually happened when the application
got bootstrapped you want to look at
Diagnostics they're built-in you want to
see what requests are flowing through
the system switch it on wait two minutes
we'll keep track of them for you you can
see what's actually happening in
production you want to see the settings
that are currently in effect yeah we've
got a I con for that as well you can
build these things into your apps
without a huge amount of difficulty
because you know what your apps do you
know the numbers that are important and
the metrics that are important and the
latencies that are important so why not
track those capture them you know even
if it's just ten most recent ones stick
them somewhere where you can put them
out on a webpage anyone with a browser
and the credentials can go in they can
have a look they can see what's going on
the second thing that you want to know
is you want context you want to
understand is the thing that's happening
right now is that a freak of nature is
this a weird event or is this just
routine now you get a phone call from
someone and you know one of your network
engineers comes up and says hey the
database server CPU is is hitting 100%
that gives you one data point it gives
you this bang so that's your graph
that's not that's 100 database server
was there a question no it's done
database service just hit 100 now
scenario 1 your database server is doing
this because every hour someone's
running a batch job that's causing the
CPU to spike scenario 2 your database
server is doing this it's been building
up slowly slowly slowly slowly slowly
over the last couple of days and now
it's hit the end point scenario 3 your
database server has just done this doing
ding ding ding ding ding ding ding ding
ding ding bang if you don't have
historical context if you don't know
what it has been doing for the last 24
hours or for the last 7 days you have no
idea what kind of failure mode you are
looking at because those three lines
there if all you have is the one data
point you're starting from scratch
you're like well someone get on the box
and tell us what it's doing and they're
like we can't get on the box why not
well the CPUs at 100% won't let us login
whereas if you've got these graphs you
can very very quickly look at that and
say okay this is what did we deploy here
that has been slowly ramping up and why
didn't we notice at this point that
something was was eventually going to
exceed capacity if it's this one here
you're like what are we running every
hour what's taking so long what's
happening do we have a stuck payment
batch is there a bunch of outgoing email
that's a loop or something and
if it's this one here
you're like okay who deployed something
what did you do has someone just shipped
infinite loops into one of our stored
procedures or some such thing this graph
here this is actually this is real trace
of our production sequel server box over
the course of 24 hours and you can see
from this graph when everyone in the
show business industry in London gets
back from lunch and starts working hard
and then you can see where they all
slope off to go to the theater or go to
the pub and this happens every day we
have quite a localized you know industry
a lot of our traffic comes from the UK
and most people use it within office
hours and so if we get a sudden database
spike in the afternoon what we're going
to know is is this weird because
afternoons tend to be a busy time for us
we've got a lot of historical context to
support that if we get a database spike
at 6 o'clock in the morning that's
interesting you know and having this
kind of context means you can very very
quickly determine is this something
sudden is this something that is
recurring is there something that we've
been approaching over time the point
about the context is that you need to
know here at the beginning that you're
going to want it here two weeks later
because two weeks later you can't go and
recover it historically so put it in
from day one log things monitor things
CPU memory usage disk usage Network
latency how much bandwidth you're
consuming there's a lovely saying from
Etsy if it moves log it and if it
doesn't move log it in case it starts
moving and that brings us on to logging
so we've got the state of the
application
you know what code is running what
version what assembly we've got its
impact on the infrastructure what's it
doing to our disk to our network to you
know all of these bandwidth latency
these kinds of things and then we've got
what is the application actually doing
and the best way to do that
is to ask it now there's two secrets to
getting logging right one of them as
soon as an application has logged
something get it away from the
application and into something central
there are two reasons for doing this one
is the number of people who have ever
had a web server crash because the iis
logs have filled up drive see anyone
else yeah lots of us have been there you
switch on logging you forget about it
and a couple of weeks later it's like
what happened of zero bytes free y CI
net Pub logs is now eight hundred
gigabytes oh cool all right so we've
written down every single request they
hit our website in a folder somewhere
that no one's ever going to look at and
the only tangible effect is to take our
website offline good job get them off
get them somewhere where you can
actually look at them get them onto some
kind of centralized logging and it
doesn't matter what the one we use as a
company called log entries there's one
called log stash
there's cabana there's you know Splunk
there are dozens of these you can roll
your own you can get them as you know
software as a service you give them
MasterCard they give you good stuff
there are lots of ways of doing this get
those logs centralized because that way
instead of having to go through 20
servers looking for the one that had a
problem you can find the problem and
that'll tell you which one of them which
server you need to go and investigate or
if you're doing capital not that it'll
tell you which server you need to take
outside shoot and spin up another one to
replace it depends on your resolution
strategy now if you're going to do this
across multiple applications multiple
teams you need to have some consensus
among your team about what the different
levels of logging mean we have a
convention which dates back to Apache
that there are five levels you use when
logging information from your
application fatal error
one info debug red is the most serious
blue is the least serious faithful means
application is completely unresponsive
this is the way my team and I work with
this kind of stuff these are the
conventions that we use if you have your
own that's fine just make sure you're
all using them the same everyone who's
writing to your logging infrastructure
should agree on what these different
levels mean fatal for us means game over
means something's gone down everyone
stop what you're doing work out what has
just happened we've lost something
significant
fatal errors they should not happen very
often they should never happen twice for
the same reasons that means something
went wrong knocked out your entire
operation and you fixed it and then it
happened again it makes you look stupid
don't do that fatal errors these kinds
of things should be followed up have an
incident report have a post mortem sit
around what happened database server
went down why when I was in the keynote
this morning where louis c.k is doing
the five why's websites offline why
database servers unavailable why because
it ran out of disk space why because the
temporary database exceeded the size of
the disk why because it turned out we
weren't backing up our transaction logs
properly why keep pushing till you get
to something you can fix okay we're
going to ship the transaction logs into
an s3 bucket every night and we're going
to put a graph on it so that if it looks
like it's happening again we know about
it before the system goes down errors
and warnings these will happen you know
with the best will in the world software
has dozens of dependencies that are
beyond our control now the way I tend to
think of these and the error can be
something one person maybe noticed maybe
didn't but it wasn't that big a deal it
could be something that is you know
affecting a single customer in your
govision there's one person who's having
trouble logging in because the username
has got extended ASCII characters in it
and thus invalidation blocking it like
that as an error go and investigate
these things keep an eye on them but
they don't necessarily mean drop
everything you're doing warnings nobody
noticed but it's still odd so a great
example of some where you log a warning
you're doing a like a check at you know
an online order for something you're
trying to convert euros into kronor
using online exchange rate system and
you don't get a response back so you
fall back to the cached response you had
last time which is you know five minutes
old that's a warning you cry again the
next customer comes through you still
can't get a response that's another
warning next one comes up it's back the
system is available again ok fine you
know keep on trucking that's not a big
deal warnings
I like people wearing fancy dress on
public transport you're going to get one
or two they're not a big deal if you get
this
this means something is going on and it
might be interesting you probably better
have a look just in case don't panic but
something interesting is happening info
info means everything is fine you know
info is what we use for things like
applications startup it's what we use
for routine events like you know
recycling a cash you know cleaning up
doing some routine maintenance on disk
caches all that kind of thing in a
perfect world info is all you'll ever
see now the biggest value for me in info
so you come back from a long weekend and
you're like hey there's nothing in any
of our logs for the last 72 hours now if
all your logging is warnings and errors
and fatal messages you can draw two
conclusions from empty logs one of them
is absolutely nothing went wrong at all
over the entire long weekend the other
one is that you're logging
infrastructure failed on Friday
afternoon and everything has been going
wrong and the errors have just been
disappearing info gives you that kind of
sanity check it gives you reassurance
you're like is this it's unusually quiet
today you jump onto log entries whatever
you like now we got info messages
everything's running is just you know
it's quiet day finally debug debug is
the line by line method by method gritty
detail of all the stuff that developers
put in when they were trying to work out
how to make this thing behave in the
first place
debug is the call by call this customer
access this endpoint with this
authentication token and these
credentials and they try to run this
command one of the best habits that I
think we can get into as developers when
you spin up a new application and you
get to the point where you're about to
go console.writeline to start giving you
some some information to work with
stop install a logging framework start
using dear log debug instead use that
for all your diagnostic output use that
for your investigations use that for
your experiments and then love all the
things you know just anything that's
interesting if it's interesting enough
that you want to read it debug it all
the things yeah all the things because
when you deploy your code to staging in
production you can switch debug off you
can have rules that say okay fatal
send it to everyone's cell phone and
whatsapp and put it on the big screen
and you know Deus SNMP network broadcast
alerts all kinds of stuff errors and
warnings maybe if you get more than 100
in an hour send somebody an email info
messages just leave them in log entries
where they're safe debug throw them away
ignore them we don't need them because
sooner or later there is going to be a
problem that you cannot reproduce on
your workstation and it doesn't happen
on Devon it doesn't happen on staging
and it only happens when real production
customers are using your system in the
middle of the night
and at that point you are going to want
to switch on debug traces and you're
going to want to see what's actually
happening with real people getting these
mysterious error messages you can't
track down and that will make you very
happy indeed so let's recap the rules of
happy code number one applejack give
things a name names are signifiers names
define boundaries names give you your
first clue giving something a name means
people have a way of finding it they can
search code they can search wiki they
can search logs they can configure
alerts naming is good pick a naming
convention that make it silly make it
name it after cities name it after my
little pony named it after cartoon
characters anything that works don't
worry too much about names stuff names
are fine eventually they'll stick to
learning curves steep is fine shallow is
fine keep them smooth no brick walls no
localized Peaks no gaps think about as
people start working with the system I'm
creating where are they likely to get
stuck where are the dead ends where are
the roadblocks where are the bits where
I really had a problem when I was
building this because those are probably
the places where the next person to come
along your users are going to go hey
this has suddenly got really hard and
think what can you do in that context to
help them out when your system fails you
know better than anybody why you just
threw an exception assuming that you're
throwing exceptions are not just
ignoring them and discarding them you
know why that exception happened you
know file not found
well you're the one who knows what file
you were trying to open and why so why
not rap there exception the file system
exception in one of yours that says hey
you know we were trying to render a
thumbnail of this image but then we went
and looked and this file wasn't
available on the disk you know give them
the context don't be drunk visual studio
unspecified error I literally I once I
was trying to install Visual Studio 2017
on a workstation and I got a dialog box
pop-up that said the installation could
not complete please correct the
following problems before continuing and
then it had a list box and the list box
had one word in it which was Asia I was
like that you know China the Middle East
peace process Afghanistan Pakistan I'm
not doing your dirty work for you
Microsoft I don't care what deal you
sign you know I ended up repaving the
work station I built a new computer just
to get 2017 up and running signpost
signifiers you know you know when you
build these systems you know what's
available you know where you can go from
here so share it you know be obvious if
things are navigable make them links if
you have methods on your API is using
telephones for them transparency ambient
context make it so anyone who's in your
organization they're logging into your
Internet portals they're walking through
your building share information because
after time you know people actually take
pride in this they walk in now the first
thing they like is is everything green
and even you know people someone thinks
they have a problem this is great when
this starts to happen your users you
know you're the business people in your
organization they won't come to you and
say is there a problem they'll go and
look at the TV and check that everything
is green and if there's something red
they'll say are you working on this and
we'll say yeah and if everything's green
they'll go away and they won't bother
you it's brilliant and finally one rule
to rule them all no matter what you're
working on you're creating api's you're
building databases you're doing
JavaScript frameworks you are creating
user experiences one day the code that
you write is going to be the difference
between someone else going home late and
pissed off and someone else having a
good day getting out on time going
home playing with their kids so remember
them and see if you can think of ways to
make them smile thank you very much
please remember to use the rating system
on the way out if you liked it give me
green stickers if you don't like it the
red stickers go in there then on the
back there so now seriously thank you
all for coming have a wonderful time
enjoy the rest of the conference I'll
see you next time thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>