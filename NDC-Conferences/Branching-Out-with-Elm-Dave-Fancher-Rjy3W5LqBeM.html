<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Branching Out with Elm - Dave Fancher | Coder Coacher - Coaching Coders</title><meta content="Branching Out with Elm - Dave Fancher - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Branching Out with Elm - Dave Fancher</b></h2><h5 class="post__date">2017-04-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Rjy3W5LqBeM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm Dave Sanchar from Carmel Indiana
with today we are going to talk about
Elm I dabble in a few things myself
one of the things that really attracted
me to the Elm language is that it is a
derivative of ML just like F sharp so
for me having some background in f-sharp
coming into Elm was a very easy
transition the type system the handling
Miller type system is incredibly similar
to the way that f-sharp works
there's pipelining and we have
discriminated unions we have record
types so all of those things translate
it very well now why would I be looking
at Elm to begin with well for me coming
into Elm was one of those things like
okay most of my work is on the back end
but every once in a while I need to do
something on the front end and I really
didn't want to work in JavaScript I'm
sure you know a lot of you can relate to
that and I started going down being a
Microsoft guy looking at typescript and
don't get me wrong you know I like
typescript I think typescript has a lot
of great things in it especially some of
the later versions but what I started
realizing and started thinking about
typescript was you know if this is
really just a superset of JavaScript why
don't I just learn to write JavaScript
the right way and do the things that the
compiler is doing it's really not that
hard to make the mental conversion from
using class in typescript to writing a
function as a closure right so I don't
really need that extra level of
complexity yeah as you can see there's a
case to be made that that it's a little
bit more readable but if I'm going to
write that code I might as well just
write it the JavaScript way and keep all
of the typescript stuff out of it but
then I'm still in JavaScript and I don't
get a lot of the assurances that other
languages that I'm used to like F sharp
would give me but Elm being a derivative
of ML makes it very easy to get some of
that safety that I've taken for granted
in other languages so one of the things
being an ml language it's a purely
functional language and it is intended
primarily for
and development and we'll see at the
sample application toward the end of
this talk how what we call the Elm
architecture really facilitates
front-end development for us already
mentioned that was derived from ml it's
statically typed immunity in a handling
miller type system statically typed
great type inference I do kind of like
the way that it requires us to annotate
our functions with with the various
types involved but it does do a lot of
type inference as well so it's beautiful
on that front and as a functional
language its expression based so
everything returns a van in put
everything has an output and then
because it's browser-based everything
compiles to JavaScript but elm is not
like typescript a superset of JavaScript
it is its own independent unique
language let's get the slides we talked
about it Wow sure one of the things that
you'll find is you start digging into
Elm aside from it being a purely
functional language as I mentioned
meaning immutability limited side
effects actually there are no side
effects because everything works through
essentially a message based system and
my favorite part is you can tell from my
license plate there are no nulls so I
didn't have to type from that yes oh
yeah I Drive around Carmel Indiana with
that license plate yeah every once in a
while I see it sweet hey I'm behind a
fancy a cool oh and I don't mention it
on this slide much but you know just the
compiler Fendley compiler errors I'm
sure as we're typing some of the sample
code and a little bit later we will run
across a few of those because
undoubtedly as I'm in the in the repple
I'll forget a backslash or something and
it'll tell me in a very friendly
consumable way not only that there was
an error what the error was and most of
the time what to do to fix that error
because the nature of the language is
such that the compiler can have more
insight into what the code you're
writing is trying to do it can give you
more helpful error messages
I think that's something that we often
lack in software development is error
messages that actually tell us something
useful
and finally it's cross-platform most of
my work is in Windows and dotnet but
today I'm running on a Mac I don't have
my VM running we will see that it works
really well I've had to install a few
components I don't have those listed in
this talk the instructions on the elm
language website are very thorough and
it's quite easy to get set up with if
you want to install it failed on Windows
on Mac other platforms they have
installers and get it from from node and
then you can always build from source
because it's an open source project
editors choose your editor use what you
want
I choose vs code there's an extension
for elm that plugs right into vs code
gives you access to the repple and a few
other utilities that are incredibly
useful when developing an elm
application and I can bring up the
extension list in code when we get to
that so elm is really a platform of its
own yes there's this language called elm
and we write this elm code but we have a
repple and all of these are console
applications that we can use to either
test our code or build our code or
package our code for distribution or get
third-party packages that we want to
consume in our project what's really
nice about the repple is in working with
with vs code is I don't have to jump
back and forth to a terminal window
because it has the terminal built right
into vs code and so I can go back and
forth between my code and the repple and
do that testing of the code that I'm
trying to write at the time right inline
no context switching and it's quite
useful and then you can also send code
as you've written in in the editor
window
you can have it sent and directed down
to the repple window and have it
evaluated on the fly it's really really
nice so before we dive into a sample
application let's take a little look at
the language itself like tille
powerpoint here because we should be
done with that and let's go zoom this in
a little bit man I'm just going to open
up a terminal window here in vs code
how's that look in the back good okay so
just like languages that were used to
let's just do a little tour of some of
the features of the language as with
most languages any language we have our
ups P&amp;amp;L night notice I'm in Visual
Studio code I've got my terminal window
open and I'm at a bash prompt and now
I'm in my elm repple I've got the
interactive console window here so I can
look at things like true and false we
can see these are evaluating notice we
have our types though if this was
JavaScript which behind the scenes
ultimately it is we have some limited
types but they're all variants and
whatnot this is going to be strongly
typed in the Elm sandbox
we have strings we have characters now
let's look at one of those messages oh
goodness error message I forgot my
closing apostrophe for my my character
ran into something unexpected when
parsing your code I'm looking for one of
the following things that starts this
list it only has one suggestion here a
closing quote like that's pretty helpful
right as you get into other things like
like discriminated unions you
oh I'm expecting a pipe or it's a white
space or any of the other things that
may be syntactically wrong because it
knows just what you're trying to do it
in those the context of your code one of
the places where it really differs from
JavaScript is 42 is a number that's the
type we would recognize from JavaScript
but what about 42.0 that's a float so we
have that differentiation in elm where
we can work with both integral data and
floating-point data and it makes the
differentiation we can't just pass them
around arbitrarily because we're working
in a tight safe type safe environment we
do have lists we don't really have the
notion of an array but we do have lists
they look like JavaScript arrays but
it's a list of number here I can do
lists of strings but I can also do
things like tack on 5 let's say 5 with
what we call the cons operator I'm going
to tack that onto the front of the list
right so we have that flexibility and
all of these lists like like lists here
there's a module behind the scenes that
we can work with to do things like
deciding whether a list is empty I'm
going to define a name here it's going
to call it my list and it's going to get
1 2 3 4 5 so we can do things like list
dot is empty my list of course I've got
a number of elements in there I can do
things like this reverse of my list and
so it's going to reverse the order of
those items and I can do lists that sort
notice these are all functional so it's
not something I don't have these
properties or methods on the list I'm at
working with them as individual
standalone module functions so if I sort
I get 1 2 3 4 5
but none of these because we're working
in an immutable environment none of
these are actually changing the
underlying list so if I type my list
here then sure enough I see the original
list now we get into some of the more
interesting types one of them I got
really really excited when I started
learning Elm where record types so I can
group data with names like I don't think
of them as a lightweight class it's a
good way to think of them it's a series
of names and values not not a dictionary
it is actually like properties so I'm
just going to create a person here let's
say first name Dave last name Fancher
and now I've created this type that has
a first name property and a last name
property I'm going to create another one
of these but this one I'm going to make
after my daughter I don't need to start
anew and say I have a more complex thing
say I'm working with colors or anything
anything else that I have some one value
that needs to change so I'm going to
change the first name to my daughter's
name
so I start like I did the previous line
I have the curly brace but instead of
taking a property right here I'm going
to take the original record type in this
case it's me and I'm going to specify a
new value for first name
so I have the exact same structure with
a value replaced and my original record
type is unchanged and we can work with
those just like we would with a
JavaScript object for instance so like
say me dot first name or me dot last
name we can pull those values up but
we're in a functional language and
parsing things like properties isn't
necessarily the way you'd want to do
this what if one of the things that the
elm gives us is there's a notation that
allows us to treat those individual
property names as functions I think this
one's really cool so I get these two
people records for lack of a better
description and I want to just pull the
first names out of that list I could say
me that first name and me and and
daughter that first name or I can do
this more functionally so I'm just going
to start off with list dot map people
familiar with maps functional background
okay so I'm going to just use the
built-in map function to go and pull out
the first name from each of these these
person records I don't need to do
anything beyond start with a dot and say
first name and now I want to give it the
collection in the list that I'm working
with and that's me and daughter and
that's executed that function against
every item in that list and just
extracted that name so if you're trying
to do list boxes or whatnot you have a
key value pair for instance and you want
to extract the particular date a piece
of data from that record to build up a
list box as you would probably do in Elm
this is a very convenient way to go
about doing that rather than defining a
lambda expression or something that does
something that the language already
knows how to do
one of the things that's interesting on
record types before we move on is that
the property names do need to begin with
a lowercase so if I was to come back up
here and let's say I'm just going to
change the property name to begin with
an L end of input and whitespace so it
doesn't recognize that structure there
because I didn't start with a lowercase
L this is one of those instances where
the use that the error message isn't as
particularly helpful as where the rest
of the language comes in kind of shines
but that is one of the little little
quirks of this language okay so I didn't
ask before I asked how many people had
some experience with with Elm but I
didn't ask how many people have
experience with the language like F
sharp anybody in here have F sharp a few
okay so so it looks like we've got a
crowd pretty pretty well-versed and
discriminated unions and guess what we
have those in elm so one of the examples
I like to use to show how the
discriminated unions in elm work is a
suit of cards right you have a very
finite set of cards and a standard deck
we have four suits 52 cards right we
have certain certain values associated
with each card well we can easily define
discriminated unions to represent a
standard deck of cards one of the quirks
of the repple is going to show up here
so I'm going to start defining this type
suit and to do multiple lines we need
backslash this is where I will
undoubtedly miss a backslash we're
typing this most of the time I'm working
straight in the editor so we have hearts
this is one of the places that does
deviate from what I'm used to in NF
sharp as I'm working with discriminated
unions with f-sharp we have the first
students at first Union case has the the
pipe
sitting pipe is optional and I almost
always put it in just to just keep it
consistent and it does not work like
that in elm we have to remove that first
pipe so that was a little quirky for me
I would prefer to have that there it
just lines up much nicer when you're
looking at it in the editor but that's
not the way that Elm works so I am going
to continue defining this will have Hart
I wish I could scroll this up a little
bit more one of the quirks of v/s code
and we have diamond and spade and Club
right now we have defined those four
values we don't we know that our cards
will only ever be hearts diamonds spades
or clubs
we can't suddenly toss in circle or some
other value the type system is going to
enforce this and if I create an instance
here I can just say heart and we see
it's returned that heart is of type
rippled that suit and the same thing
with diamond and so on so how do we make
a deck of cards from this we know what
our suit is let's define another
discriminated union pretty easily type
card and that's going to be ace of suit
and we've got our king of suit clean
Jack and rank now the rank is a little
different and so far we've only
associated a suit with each particular
value card we're going to have a suit
but then we're also going to have an
integer okay we're going to say it's a
value two through ten right I'm not
going to go through the extent of
enforcing two through ten on this simple
example but now we've defined two
discriminated unions that allow us to
easily represent a deck of cards if we
wanted to actually construct the deck it
might look something like diamonds Spade
Club
now we're all to see here is a little
deviation so functions in an elm work
just like they do in F sharp they're
curried which means that we can easily
construct function function pipelines so
here we're going to use the exact same
operator that we would in F sharp a pipe
forward I'm going to take this list of
my suits and pipe it to list dot map now
we don't have comprehensions in elm
which is one of things I don't really
like about Elm it will be really
convenient to have that but because it's
purely functional and most of the
comprehension syntaxes would require
some degree of side-effect
we don't have comprehensions so we'll
have to do this the long way a little
bit so I'm going to define a lambda
expression right here and the lambda
expression syntax is a little bit wonky
in my opinion because it starts with a
backslash it's like we don't have fun we
don't just start with a variable or a
parameter name it's a backslash with V
with a parameter so I'm just going to do
this backslash s and that goes to and
I'm simply going to return a new list
I'm not going to do all of these all of
the cards what I was going to do ace of
s and king of s queen of s Jack of s and
rank of s and 10 that will get me
through the virtue of the map operation
a list of Lists but I want to make it
just one list so I'll take the result of
that and pipe that into another module
function conveniently called concat and
now we see our list ace of heart king of
heart queen of heart jack of heart rank
of heart 10 so that's our 10 of Hearts
and then we can see we switch into
diamonds with the same pattern over and
over he would be easy to extend this out
to define the full deck of cards
and then we can do things like shuffle
the deck and and work with the deck so
this is a very quick way if we were
building a card game to get a
constrained deck of cards very
convenient quickly and and so on so the
expressiveness of the language I think
is really brought out in things like the
record types and the discriminated
unions so let's look at how these pieces
going to flow together I'm going to
close down this red bull window there
any questions before we move on nope
okay so I'm going to close this rep hole
window and since I'm a TS code we have
the levy I can't remember what this
feature is called but we we have this
this command list that we can access it
to now I've installed the Elm extensions
so I have this one right here and this
brings in the repple and we didn't talk
about we're going to see in a moment
this thing called elm reactor so a very
convenient way to just run your elm
applications this connects Elm reactor
and the repple and the other commands
inside of vs code and to access them
I'll do my greater than and I'll start
typing Elm and we can see the things
that are built in so we got clean build
artifact actually that's yeah now
install packages make make Warren
reactors start and reactor stop so let
me going to hit this reactor start we
now see that it started up a web server
because this was intended to rob it run
to the browser
let's ctrl command click on this and
that's going to give me this window this
this page is where it took me to this is
the home page that elm reactor displays
by default
the sample application we're going to
look at is a tic-tac-toe application
like a seemingly simple game but there's
a lot of little rules that you have to
think about as you're constructing
something and it really lends itself
well to things like discriminated unions
and records so let's go take a look at
this application reactor is presenting
us with a list of our file system from
wherever we started it and I'm going to
navigate into demo and I'm going to
navigate into my source folder and
before I go into index I'm going to go
into scripts and I could go to the J's
file but it's not really going to do
anything that's the output from the Elm
compiler but I want to run the Elm code
directly so I'm going to click the
tic-tac-toe Elm and it's going to be
really ugly I'm going to warn you right
now so this thing if it will load sure
X's turn and a bunch of ugly buttons
the reason it's ugly and it doesn't have
to be it's because there's multiple ways
to run an Elm application so this this
dot Elm file is an Elm application we're
going to go over to that file shortly
but what we see here number of buttons
in the HTML if we go and inspect any of
these elements
good alright
I cannot remember my hotkey for zooming
at the moment but I've styled these with
bootstrap so the way as I mentioned we
have different ways of running elm
applications we can either run them as
fullscreen which is what's going on here
we can run them as headless meaning that
there is no UI component or we can have
them target a particular element this
application is written to target an
element on an existing page so I'm going
to back up to the index and now we're
running the Elm application and you can
see the bootstrap styling is all applied
so we can have this within our existing
applications pretty easily as long as we
use the styles that we and the CSS
classes that we would normally use in
our HTML that Elm is generating we can
have a consistent look and feel so
simple tic-tac-toe application we can
click through and it's maintaining this
it looks like it's maintaining some
state it really isn't and I'm just
clicking and now I can see o X wins well
think about the things that are required
the rules and conditions around a
tic-tac-toe application we've got this
nine by nine grid we have two players X
and o we have to track whether a space
has a token in it whether it's X or o or
if it's empty we have to look to see
what wind condition is what are the wind
conditions three in a row right
horizontal vertical diagonal so we have
to manage all of that stuff and we can't
play in a square that's already taken
and the game is over so there's no
reason to continue allowing people to
click well it turns out this really is
really a good sample application because
it takes full advantage of a lot of elms
features like the discriminated unions
and the record types so let's jump back
over to vs code
I'm going to collapse this out of the
way we're just going to leave that
running we're actually not going to make
any code changes we're going to just
leave this as it is and let's go find
the first we'll look at the index.html
to see how this gets lined up and laid
out in the page this is a standard html5
document I've got some inline Styles for
simplicity and then I have a container
element and down here I have a div style
panel body from bootstrap and given an
ID of tic-tac-toe so this is the element
that's going to hold the tic-tac-toe
game and there's two scripts at the
bottom of the file
first is the tic-tac-toe script that's
the compiled Elm just like I would with
a JavaScript file and just reference the
typescript file I'm referencing the
compiled elm file so it's going to go to
the j/s that's what the browser
understands and then the next script
element shows the target where we get
the tic-tac-toe element that I just
pointed out and the next line of our app
gives Elm that tic-tac-toe dot embed so
the Elm code which we'll look at in a
moment the compiler generates a module
it's got an elm namespace essentially
and a tic-tac-toe module and we want to
embed it in that tic-tac-toe element so
we want tic-tac-toe to yeah we want the
tic-tac-toe element to hold our
application so let's go look at what the
Elm code looks like the Elm architecture
we break out our application into three
primary areas we have our model we have
our update and we have our view okay so
you see this a lot of places and put
other frameworks like I believe it was
react has been heavily inspired by this
model so
it turns out that functional
applications tend to really kind of
follow this pattern anyway so this is
really the standard approach for
constructing an elm application so
upfront we've got some setup today we
got our module tic-tac-toe and we're
this parent dot dot so it's any function
that's visible here that's defined in
here is going to be visible externally I
don't really care nothing else is using
it for this it was simpler to do this
but if you look at things like import
HTML events so we're going to wire up
some message handling that responds to
input and click events from our
application and then we define our
program app program a function that
takes an object that defines a few steps
we have an initialization step and then
you can see the view and update which we
talked about and subscriptions so
subscriptions I'm I actually don't think
I have layered up in this version but
what we can do ultimately is have elm
applications communicate with the
outside world through subscriptions and
what we call ports so if you have other
JavaScript or other Elm allocations on
the same page they have ways of inter
communicating and because it's all going
to be message based they will push a
message into the pipeline for this
particular application it will do the
processing against that message and then
update the model and the view
accordingly now it's not managing any
state really we have some we have our
model our model records and
discriminated unions which we'll see in
a moment as we scroll through but elm is
managing that we're not managing and
we're not setting a global variable or
anything anywhere we're allowing the Elm
engine in the Elm architecture to manage
that for us and it will handle things
like a shadow DOM and how the the
elements are displayed and where certain
pieces are rendered or re rendered it
does it in a very efficient manner
so let's take a look here so our model
we know that in a tic-tac-toe game we
have two players
well player X and player oh I'm pretty
straightforward we have those two to
Union cases but then we need to know
something about where the cells are so
we have a x position and a wide position
left center right and top middle and
bottom respectively so that kind of
reflects back there pretty well I'm
gonna reset this we come back in a
little bit but those the x position in
the Y position don't identify the grid
that's there are the position in the
grid independently we need the
combination of those so we have this
alias called cell position which is a
tuple type tuples are already defined
within the language we're just going to
change the definition to the name cell
position for the combination of y and x
position we have a union that represents
self state has somebody already played
in the cell if so who so that's occupied
by player or is it empty we have a cell
let's a cell well a cell has a position
and a state you know what where is it
and who has played on it and just to
make the code a little bit more readable
rather than having things like list of
cell what is list of cell mean in any
given context alias it as board so when
we see in the code below we're going to
work against the board which is really
just a list of cells
none of the player as players are
interacting with the game we need to
know whether they're whether what they
did was valid or not some of this is
enforced by the UI we have well we let
add attributes like whether or not the
control is enabled or disabled based on
that particular cell stay
but maybe we don't have those safeguards
in place so we have a union case for
invalid move so some player made an
invalid move or was the move valid yes
it was so the player ex put their token
on a particular spot and nobody won and
it wasn't a draw if a player puts a
token in a spot and they get three in a
row well that's a win and then a lot of
times I just publisher to call the cats
game but I call it a draw here then our
overall model for the game consists of
two pieces of data we have our board now
our board we just said is a list of of
cells and the cells had the position and
their current state right so we bought
all of the state we need in that list
and then the last move result now we
could take this a lot more a lot further
I just track one move at a time but if
we wanted to implement some like undo
functionality we could actually have
another list here so we have a list of
move results which I thought about doing
just for the fun of it just we could go
like back and forth and see how the
architecture plays with those lists both
presidents we're just keeping it simple
and we're going to track the last move
results so that when we reach on the
board we know whether we should indicate
that something is one that someone has
won or whether it was a draw so that's
the overall model for the game like
that's that's really what we need to see
that's that's how we represent the board
and the players and and the current
state of the game the anit piece is just
a little bit of setup that we need when
the first one we first load the game we
need to identify the horizontal
positions that's just a list of left
center and right and the vertical
positions top middle and bottom we have
lists of those and we essentially just
build up the board from those two lists
so we identify all of the positions and
we create a new model with all positions
piped into the map
and we're going to initialize those all
all of those positions all of those
cells as empty we're going to say player
X gets to go first and then this command
none this is the first part we've seen
where we're tying into this messaging
system that the elem is built around
this is saying we're starting off there
was no command this is is the initial
state and now we get into the update
portion an update is where all of the
magic for the application happens we see
this message type here there really are
only two actions that can ever happen in
a tic-tac-toe game right we have a
player takes a turn or the game is reset
right what is it what does a player take
you can turn do player taking a turn
needs to inspect the state of that cell
where they clicked with somebody already
there no okay well let's put a toke in
there did they win by looking for three
in a row no okay well now we need to
accept another command for the other
player and then there's reset which
simply runs that init function again and
clears out and I back up it's not
clearing out and it's creating a giving
us a new list brand new list of cells
that have all been initialized to empty
so move and reset our move consists of
who did it and where did they go this
lines to check is just some little setup
that identifies our rows columns and
then the two diagonals so we do that
very functionally we've got some
concatenation of lists going on where
we're going to map all of our vertical
positions to rows all of our horizontal
positions to columns and then our
diagonals we're going to concatenate
those into just one nice list that we
can cycle through and find very quickly
you'll find the actual update functional
back up so I define these everything is
if everything is defined above the
update the update is the piece that elm
calls this this function is what LM
calls into and it accepts the message
which we just saw that type what is a
which which will have the commands built
in and the model so we're always going
to be passing in the model elm every
time we click that reset button or one
of those grid squares we're going to get
the model passed back in so we're not
managing that Elm is going to keep that
somewhere tucked away and then when it
needs to work on it again it will pass
that model in but we won't change that
model we're going to create a new
representation of that model which gets
passed back to Elm which is why we're
working in a purely functional language
we're not going to change that state in
any way we're going to create a new
state and let Elm handle updating our UI
for us so here we're just going to do
with a pattern match just like an
f-sharp
we have pattern matching so case message
of a move or a reset and I just
mentioned that reset all it does is call
init right that gives us that initial
list of of cells again but move here we
go here's the logic I describe for what
happens when a person clicks a cell if
it's I need to it I really need to
rewrite this I started off now I need to
make this the positive case but if it's
an invalid move then we're just going to
say yep this is an invalid move we're
not going to change anything on the
state and we actually can't just based
on the nature of disabling those those
buttons
we shouldn't actually fall into that
case but for completeness we cover it
most of the time though we're going to
come in here and we're going to create a
new cell we've got a remember it's a
position and the new state we're going
to say that this cell at this position
is now occupied by the player that
clicked that and there's this function
replace cell
what this does is it takes that board
that was passed in through the model and
it looks across all of those cells that
are in that board and if the cell
matches that the cells position matches
the one that we're passing and we're
pressing the new one we just created it
we're going to use that in place of what
was already in there so we're
essentially replacing it we're going
into a new list and so without going
through all of the details of this piece
essentially we're just handling these
messages we click that has an event
handler wired up in JavaScript that
calls into Elm elm finds the update and
it runs through this update function it
gets us our updated board and then it
calls the view function which we haven't
looked at yet now view oops is a very
simple function but I have a lot of code
above it Elm exposes a module that
defines I think every HTML element and
it exposes them as functions so we're
going to wrap our entire board within a
new div and it takes two lists the first
lists are attributes it's just an
attribute for the resulting element and
then a list of all the child nodes
this billboard function that accepts the
model billboard model we're going to
concatenate building a header building a
div building a horizontal rule and
building a footer to see all of those in
chrome our header is whose turn it is
this tic tac toe box is part of the
index.html we're controlling everything
here that's I'm going to select
everything X's turn up through the reset
button is being generated by Elm so
every time we click something it gets
that message it processes what that new
State should look like it passes that
new model into the view function and it
uses a shadow Dom to make dynamic
changes to our resulting HTML but
because these are all functions it's
we've essentially just replaced angle
brackets with with square braces right
it looks like HTML but it's functional
like we call the div that's going to
give us a div element back in our
resulting HTML with in this case we're
giving it the we're setting the class
attribute to tic-tac-toe board and then
the content for that is oh wait there's
another function call we're going to
take our vertical positions that we
defined earlier and we're going to map
it to build row we're still passing in
the model when we say build row take our
model take our vertical position
represent it as a div and then we're
going to lay out each individual button
across the board so we take those
horizontal positions and we've mapped
that to a lambda expression to a
function takes that position and we go
and get the cell from the board what
does that look like get cell and we're
good so here we go
so going to get the cell this is a new
construct we have this let construct so
I've got just a simple function here but
it allows me to define a variable used
just within the context down below
so let's sell get board filtered down to
the position and the list head get the
first item off of that list then in case
cell of just or nothing so for those
familiar with with f-sharp some or none
this is our option type we have that
same concept in elm getting us around
the whole null ability option we see we
have a very definite case we either have
a value or we have nothing if we have
nothing well then we'll just create a
brand new cell otherwise we'll use the
one that we found and ultimately we
result in this nice HTML beautiful
default bootstrap theme so the Elm
website has a very good overview that's
does the book and the introduction to
Elm the documentation is it's pretty
thorough there's a few spots that I find
there are some gaps in I'm looking
forward to actually trying this out on a
real project pretty soon I think you
know just that the nature of the
language the fact that it is purely
functional should allow for a lot more
flexibility and a lot more
predictability in terms of how I
construct my application give me that
that that safety from the underlying
types and also just because it's ml as I
start building up more F sharp back-end
stuff fee were able to work in a very
consistent language but one that was
designed for being in the web so we
still have a few minutes here any
questions I can go back through yes sir
yes I can I can certainly show where the
where the clicks are Jenna the event
handlers are hooked up let's go over
there right now so this is all coming
out of our view code and if we find in
billboard we've built footer build row
so build sell build sell is by far the
most complex function in this and I
could probably refactor it a bit but
build sell is responsible for building
up each individual square so build sell
takes a model and the cell and it's
going to wrap the create a div and it's
going to be styled and then we look at
the state so if we have an occupied cell
we're defining a button tricks we're
going to invoke the button function
we're going to do some styling on it so
we've got button style that is a a
binding defined elsewhere along with
default we're also giving it setting the
disabled property to true but if we
don't have anybody on that space then we
do a pattern match against the last move
results so we're going to move into the
next player because we're going to we're
not going to say that play D just the
nature of the language we've enforced
that player X can't play twice in a row
player Y can't play twice in a row
that's one of this next the next move
case identifies the next player so it's
going to control whose turn it actually
is so next move case we're going to
execute the button function as well
we're going to do some styling instead
of using the default style we're going
to do the primary style so there we get
the nice blue color and then we give it
on click on click function takes a move
well what was move let's go back I'll
find it again
move is our message it takes a player
and a sell position
you
I lost it there we go so that on-click
function is going to generate the HTML
that wires up the d click handler
and explained that if I can't my posed
actually looks like it's putting it in
script a zoom in when I all right yeah
it looks like it's dynamically wiring it
up it's not putting it as an attribute
so it's doing it through the script so I
can't actually find it quickly well but
that is exactly where it's hooking that
event handler up so each time the board
is regenerated he has you know we played
player X's has clicked they have valid
move the next player is is why it's
going to go and reconnect all of those
event handlers for us so that when the
next click comes in it's going to be
enforced that it's player Y making the
move and then so on it's just going to
flip back and forth because we only have
two players right but it'll reach it
will manage connecting and disconnecting
those events for us so that when we
rebuild that we make sure that we're
getting a valid next move so then
ultimately the reset button does the
same basic thing so we can see here on
build footer they take our button
function we give it our styles and the
attributes on click reset so reset was
again if I can find it one of our
messages so this is going into that
message system we click that update gets
called if we find update update takes a
message this line here line 147 is the
signature these are our annotations I
think I actually kind of prefer this
model with the annotations rather than
doing them in line like we would in a
sharp I like having it just set aside
and up above rather than in the middle
of the of the line but we accept the
message and we accept the model and then
we return the new model and a command so
we've got our message came in and it's
going to pass back I think everywhere
I'm sitting in I'm just returning
commands none that kind of ties in to
the subscriptions and I'm not really
using that in this version so
yeah very easy to wire up it's a
question now you're in a happy land
using Elmer's language you want how
would it look if you wanted to actually
talk to a JavaScript library so how
would it look if I wanted to talk to a
JavaScript library now I don't have an
example of that but there are ways for
elm to communicate with the outside
world and vice versa so I actually
haven't used it yet and it's something I
have been looking into I wish I could
find it quickly they have this notion of
ports so it's essentially places where
other pieces can plug in and it really
works off of the the ports accept
something and essentially it calls into
update over time out and then we can
also have subscriptions that do the same
do some similar mechanism but yeah ports
are primarily we've got a that's
probably right there JavaScript Interop
so this is the elm documentation and get
looks dot io yeah and I love it at some
point your elbow Graham is probably
going to need to talk to JavaScript so
you know if you you wouldn't really be
necessarily if you're using jQuery or
something like glow - you're not going
to really use that in your elm code
directly you're going to stick in elm as
much as possible but every one so if you
have other things on your page that you
need to interact with you're going to
look into things like like the ports and
the subscriptions that's what you're
looking for all right anything else
best Oh for resources for learning this
was L tutorial.org it it brought
together all the moving parts of an
entire app and kind of crystallized it
wolf what is it Alan tutorial helm
hyphen tutorial.org I think is there but
it brings it ties it in with web pack
and all this you know super sci-fi web
stuff that gives you the full yeah that
just as a recommendation I liked it a
lot yeah yeah I don't think I've
actually been to this one yeah yeah
thank you yeah mark dilma have some sort
of syntax like if shops computation
expression so Haskell's do notation does
Elm have computation expressions I don't
believe so but I'd I'm not sure off the
top of my head okay yeah I would be
honestly every kind of surprised if it
does but I haven't looked right right
yeah it really yeah it really is focus
specifically is more of a domain
specific UI language if anything else
then we're almost at time thank you very
much for coming out I'm Dave Fancher
please fill out an eval the the complex
operation is moving it to the box out I
appreciate your time and I hope you
learn something thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>