<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building ASP.NET apps on Google Cloud - Mete Atamel | Coder Coacher - Coaching Coders</title><meta content="Building ASP.NET apps on Google Cloud - Mete Atamel - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building ASP.NET apps on Google Cloud - Mete Atamel</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ka_horV66As" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right it's almost 9:00 so let's get
started
good morning first of all thanks very
much for coming so early in the morning
especially after the party night I'm
losing my voice a little bit so sorry
about that I'll try to make it so my
name is Matata Mel I'm a developer
advocate at Google and based in London
this is my first time at Indy silly Oslo
and first time in also as well and I
went around the city in the last couple
of days I really liked it and I
hopefully I'll see more on the weekend
so today we're going to talk about
building an epsilon Google cloud before
I start my talk a bit information about
myself as I mentioned I'm a developer
advocate so my role is basically to come
to conferences like this give talks
about Google cloud related technologies
this is my Twitter if you want the
slides I'm going to put put two slides
right after my talk on my Twitter so so
just follow me if you want it I also
this is my email I'm also around we have
a Google cloud booth at the conference
so if you guys have any questions feel
free to stop by the booth we also have
code labs at the booth where you can
actually do some of the stuff that I'm
going to show you today yourself using
our laptops that we boot there at the
booth and lastly I haven't talked
feedback link so I always like to hear
your feedback about my talk so if you
have any feedback feel free to fill that
from that link all right so what are we
going to talk about today first I want
to do the intro because I like to answer
the question of why you should even care
about Google cloud when it comes to it
without no applications and and answer
some questions on that because people
always ask me you know I already have my
stuff running in a datacenter or I as
your why should I even invest in moving
that's a Google cloud I think that's
some good reason so hopefully we'll
cover it up there then I want to look at
the traditional applications so the
traditional s without net that runs on
Windows
how can you take that and how can you
move that to Google cloud what does that
look like so I'm just going to show you
a simple example on my laptop and then
after that we're going to move that to
Google cloud and see how that looks like
moving an app to the cloud by itself is
not that interesting because we are just
running it in in one in the cloud rather
than somewhere else but I think the
power of cloud is
basically all the services and the tools
that becomes available to your
application once you move it to cloud so
in the third part of my talk I'm going
to talk about cloud storage powershell
commandlets machine learning with vision
API and speech API and we'll make the
transform our application into something
and better by using the services and the
tools that Google Cloud provides so the
idea here is to give you an idea or what
kind of things and that become available
to you when once you move up to the
cloud and the final we'll talk about the
the new containerized world because as
you guys know asp.net is moving to a
spot on our core and I sped up my core
runs on Linux and with that you can run
it in docker and with that you can write
everywhere so what does that mean for
Google clouds so if you have a nice
without macro application how can you
run the long Google cloud and the answer
is appengine and community so we'll
briefly talk about that I'll show you a
demo on App Engine but I don't think
we'll have time for Q&amp;amp;A teas I'll just
mention what it is and if you want to
hear more so free to stop by at the
booth and I'll talk more by the way I'm
sorry for these guys that are sitting
here because I usually ignore my left
side I'll try to turn around once in a
while but if I don't sorry about that
all right so let's do the intro I guess
the first question you have right now is
you know Windows Server sequel server as
with net on Google Cloud really like
what's happening because Google is known
for search for maps for machine learning
but when it comes to net development
it's like you don't hear about Google
too much up until recently and I think
you are right to think that way because
if you look at the world that we used to
live back in 2014 we used to have like
kind of two worlds right on one side we
had the Linux open source world with
tools and languages around that and then
on the other side we had the windows
world so instead of Java and Python and
we had c-sharp instead of bashing up our
shell instead of my sickle we have
sequel server and for me the most
annoying part of this split is that
these tools they kind of existed
together but they didn't really interact
so I started my career on the windows
side and I learned all the tools and
clicks or windows but then at some point
I had to move to the
because I switch my job so I had to
relearn everything even though I was
trying to solve similar problems and
then at some point I start working for
my so so I came back to the windows side
so doing this back and forth was really
tiring and there was no really good
reason for that and and Google was
mostly on the Linux world and that's
what we use internally but the system
seems like changing so the first thing
was the net going open source in 2014
then after that we started seeing
gradually tools and languages moon from
links to Windows and Windows to Linux so
OpenSSH moved from linux windows then we
had open to and Debian the Linux
operating systems running on Azure the
the Microsoft cloud platform then 2016
really accelerated things so sequel
server the flagship sequel server or
Microsoft started work on Linux the
PowerShell scripting language of Windows
started working on Linux then we have
bash or Linux coming to Windows and when
the year ended with two announcements in
2016 the first one sorry and then we had
a third of nicoya
of course there now you can have s
without net running on Linux Mac and
Windows and this was big news for me
because now all the time and effort you
spend in learning c-sharp and if you
don't net now you can use that on Linux
as well which is great and then the you
end up with two announcements might as
well turn to Linux Foundation and then
Google because of our work with Google
cloud platform supporting dotnet joint
or net1 nation so it was I think a great
couple of years that changed pretty much
everything in the dotnet world so what
we have today is we still have the two
operating systems but the tools and
languages around them there they're
converging they're coming together and
that's great news basically it's a great
time to burn up developer I used to do
Java before and at some point I switch
to c-sharp and I never miss Java anymore
because C chef has everything Java has
and even more I think but one thing that
was missing was the cost platform
support so I was always bothered by the
fact that you know I can write C shop
it's great but it only works on Windows
and not let's change so for me there's
no reason to go back and I'm really
happy about that and at Google cloud
we're basically trying to support the
net as one of the main languages
on our platform along with Java PHP
Python stuff like that
all right so now let's let's answer a
wide deploy to Google cloud as a
consumer because as a consumer you have
choice when it comes to cloud providers
so why should we even care about Google
cloud I think it boils down to three
main points the first one is the Google
infrastructure so when you're running in
Google cloud you are running in Google's
own private network so even even when
you have services in two datacenters
they are not going through LinkedIn that
you when you are communicating they're
not going to do Internet they are using
Google's own private network Google's
own fiber optics and actually Google is
like laying down fibre down Pacific to
make sure that that private network is
private and the reason why we do that is
because when we own the whole network we
can control control latency and things
are much more stable than going through
the internet our VMs are really fast so
you can provision VMs within seconds it
is Linux Windows itself slower but it's
still quite fast and because of fast the
VM provisioning Auto scale just works so
when you need Toto scale it just scales
really fast up and then it scales down
really fast so so the infrastructure is
really good the second thing is price
obviously we all care about the price we
want things to be as cheap as possible
for competitive reasons so the base
price at Google is as competitive as it
can be but we also build features to
make it even cheaper for for everyone
for example if you run a VM virtual
machine in Google Cloud we charge per
minute so if you use a virtual machine
for ten minutes you can charge ten
minutes you don't get charged for the
whole hour if you use a VM for the whole
month then you get 30% discount but by
default you don't have to do anything
just get that and the last one the
sizing recommendation so if you use a VM
and let's say that VM is a big instance
we detect your usage pattern or that VM
and we recommend you which we tell you
that that VM is actually too big for
your load you can actually downsize that
smaller VM and save money so once in a
while when you open the console you see
that there's a recommendation from
Google saying that you know why don't
you downsize this because we don't need
it
so because of all these features and
there's more the prices ends up being
real competitive compared to other
places and also flexibility so if you
want a virtual machine with lots of
memory but not so much CTO you can
actually customize and get that or if
you want a VM with a lot of CPU but not
so much memory you can also say this is
how much CP I want this is how much
memory I won and you only pay for what
you use so you don't have to get a big
machine with lots of CPM memory just
because you need memory right so you can
customize everything at custom VMs and
there's something called printable VMs
so let's say you have like some work to
do but you don't care how many VMs you
have you can use five VMs or ten bm's it
doesn't really matter in that case you
can use what's called printable VMs so
these are VMs that are given to you but
they can be taken away from you at any
time because of the flexibility they are
80% almost 80% cheaper than normal VM so
if you can use printable vm's it becomes
even cheaper so basically in terms of
our consumer it comes down to the
infrastructure price and the flexibility
that you get with Google now as a
developer why should you go to Google
cloud again I think there's like three
separate buckets for this and the first
one is the options that you have so if
you want to use VMs you have compute
engine if you make the switch to
containers there's container engine and
kubernetes hosted in container engine if
you don't care about containers or VMs
you just want to deploy your app and let
Google also scale it for you and run it
in production for you then there's App
Engine and then if you just want to work
with functions not even care about
applications there's cloud functions I'm
going to show a compute engine today and
I'm going to show at engine today but I
want to show container engine because
that in most communities and that's a
whole different topic but I'll be happy
to show you that that enables so you
have all the full range of options we
have when it comes to the appointment
the second thing is once your app is in
the cloud we have lots of services but
the key differentiator with our services
is that we try to make them as managed
as possible so what that means is that
when you are using for example pub/sub
the messaging platform you create a
topic and that topic is globally
available everywhere
and you can send messages and you can
receive messages from the topic but
everything is managed you don't care you
don't have machines you don't have
clusters to worry about everything is
automatically available available and
and as load increases things are added
to the question and then remove from
cluster but that's that's all abstracted
away from you so you don't have to worry
about machines same thing with bigquery
it's like a data warehousing solution
where you can ingest your data and then
you can query the terabytes of data
within seconds so there you just point
to your data it reads your data and then
when you send a query it will basically
use thousands of machines to paralyze
the query and get the result back to you
but then again you're not worrying about
the cluster of machines you don't have
to provision things everything just
automatically scales up and down as you
need them and then the last thing is
machine learning machine learning is big
and it's becoming even bigger and what
we are trying to do is basically we have
all these trained machine learning
models that we print at Google with the
data that we have so we are making these
available to people so there's vision
API for image recognition
there's speech API for speech
recognition and things like that and
we'll keep adding more and more 80s to
make our models available to you and
then if you want to build your own model
with your own data there's tensorflow
which is an open-source machine learning
framework and we we host that on
something called cloud machine learning
so that you can run tensor form models
at scale on Google cloud all right so
this is the last slide that I'll our
cover and then I'll start showing me
some code so when it comes to edge
without net deployment you have
basically kind of two worlds in Google
cloud the first world is not not it
without net on Windows so if you're
using the traditional eyes without net
applications on Windows you can run that
on compute engine so in compute engine
you basically get a VM with Windows
Server and you have different versions
or window you have another service that
you can get and then you can you can
also get a student a framework installed
on that compute engine instance and then
you can deploy your application using
Visual Studio and I'll show you an
example of this in the demo shortly if
you switch for me
not to exploit the core you can
containerize that using docker and then
you can run it on either App Engine or
you can run it on kubernetes on
container engine so App Engine is the
easiest way to run your container they
split the core and that's the one that
I'm going to show so the idea with App
Engine is that you you just pass in your
container and you just say just run this
at scale I don't care where you run it I
don't care how many machines you want to
use just make it work and by default you
get things like dashboards and
versioning and traffic splitting that
I'll show you so it's easiest way of
starting but then sometimes you need to
control your cluster or containers you
want to be able to specify how many
containers you need and things like that
so for those use cases and kubernetes
makes more sense so you can use cuba
natives hosted on Google cloud on
container engine alright and then there
are this is the last one I promise and
then once you have your apps you are you
probably are using something like secure
servers so you can get sequel server on
compute engine we also have something
called cloud sequel which is managed my
sequel and manage Postgres as well so
these are like sequel manage Postgres
and my sequel managed by you by google
we will probably have sequel server
manager at some point as well but today
you have to deploy that yourself and
then in terms of tools there is a visual
studio plug-in that you can install that
helps you to manage your Google cloud
resources that I'll show there's a lot
of libraries so for every Google service
there's a net library it's their own new
yet and we'll use some of those in the
demos shortly and then there's even
powershell commandlets so there's a lot
of different commandments to script your
access to google cloud so we are
basically trying to cover everything and
we are adding more and more so no matter
what you want to do we will try to cover
it if there's something missing here let
me know after the talk I'll be happy to
chat to you about these and see what
what else we need to add here because we
really want to support dot intensity
sharp as much as possible in Google
cloud all right so now let's talk about
moving your existing external
applications to Google cloud and see how
that looks like and to do this I'm going
to so as I mentioned
two more existing apps you would use
compare engine so we'll go through that
and we'll see how to get every no server
on compute engine and how to deploy it
from visual studio and to do this I'm
going to use composer University
application people know this application
some of you know maybe yeah it's a
reference application and it's about
this like fictional university that has
students and courses and classes and
departments and it's an MVC 5
application it's using sequel server as
the backend it's very simple but it
shows like the basics of MVC so first I
will run that application locally so
that you know how it works and then
after that I want to move that our app
to the cloud and see how the process
looks like
so that's the idea about about this so
let's take a look at this app I have
Visual Studio open here and let me just
run it first and see how it works all
right so this is this is the app and we
we have students and we have details
about the students the the first name
last name enrollment and the courses
they're the students taking and then you
can edit a student make changes save it
inspect bicycle server then we have
courses and we have instructors so it's
very very basic with some very basic
views of the app let's let's take a look
at the course briefly
so it's an MVC application so we have
models so for models we have a person
object and then we have a student that
extends from the person that adds some
things to the person like an enrollment
date then we have courses so we have
basically model for every everything on
the page then for each model we have a
controller so course controller
instructor controller student controller
so if you look at the student controller
it's basically the typical controller
you expect so there's a controller for
getting the details of a student that
there's another method for training and
things like that
and if you look at web.config right now
I'm using the local VB so if the local
psycho server running on my machine
right so so this is that it's very
simple but we'll use this as a reference
app to to move to Google cloud so let me
just go back to my presentation all
right so now we want to move this to the
Google cloud so what do we need to do
first I want to install Google Cloud
sauce or Visual Studio this is an
extension so that you can install images
video and it makes it really easy to
manager your your project Google Cloud
project and push your application to the
Google cloud once we have that first I
need to get a Windows Server VM with a
certain frame of installed so I'll do
that on compute engine and and we'll see
how that works and then I also need a
sequel server running in Google Cloud so
we'll get one and then finally I'll
publish from users video to Google Cloud
directly from YouTube studio so let's
take a look how that works so here I am
and to get the plugin I go to tools and
then here extensions and n updates and
then if you go online and search for
Google Cloud it shows up with with the
school classes for Visual Studio I
already have it installed here so I want
installed but then you can just double
click and get it installed so once it's
installed if you go to tools and under
there there is a Google cloud tools and
you need to first add your account at
your Google cloud account so that we
just we can talk to your projects so you
you do manage accounts and at account
this opens up a new page you can select
your account so this is my development
account I'll choose that and it's asking
me do I want to authenticate visual
severe yes and now I'm authenticated
with Visual Studio so you can close this
and then if I go back here it's telling
me that my account already exists
because I already have this here so
that's fine so once you authenticate it
if you go to tools and Google Cloud so
so again there's something called Google
Cloud Explorer
so in here this is my account that I'm
already logged in these are all my
projects in Google Cloud that I can
select so I'm going to select my dotnet
project and under here you can see a few
things so you can see my App Engine
applications so if you look here I have
like two versions on my application that
and they're like 50% 50% so they are
getting half of the traffic each I'll
show this app later and then I can see
compute engine instances so these are
VMs that I have running in the cloud
already so as you can see I already set
up the contoso VM and then the sequel
server so I can see them here and then
you can see your cloud storage so these
are buckets where you can save your data
and kind of data and then collapse
equals so these are my sequel instances
or Postgres instances that I manage for
you I don't have any but you can see
them if they were and we're going to be
adding more and more stuff here so
eventually you should be able to see all
your resources from Visual Studio we
just released this like probably like
six months ago but we'll keep adding
more to it so now the first thing I need
is a Windows server VM in in the cloud
so to get that I can come here to
compute engine right-click and say new
asp.net instance so this opens up there
I what's called up and that indicate
this opens up a cloud launcher launcher
is like a marketplace I had to switch my
account one sec cannot launch is like a
marketplace for different solutions and
one of those solutions is called SPF
framework so with this if I click on
launch on compute engine this will
basically give me a Windows Server with
asp.net framework already installed so
all I need to do is give my deployment a
name so I'll just call this s to.net MVC
Oslo then I can choose my zone so that
we are in Europe so let's just say we'll
choose your West then I can choose my
machine type so I just get a good
machine like for CPUs I can choose my
Windows Server version so two thousand
eight twelve sixteen I like the latest
stuff so I'll choose seven sixteen your
persistent disk and your HTTP traffic so
if I hit deploy now within a few minutes
I'll have a Windows Server
the framework already installed so we
won't wait for this because we don't
have time but let's also get a sequel
server instance so to do that I go back
to visual studio and then this time
instead of choosing an expedited in that
instance I'm going to choose a new
instance so this will open
clauncher again and I have to switch my
project again that's what happens when
you have multiple accounts alright so it
opens up the page for me to get a sequel
server and what I want to do is I want
to call this instance sequel server MVC
Oslo oh yeah and then I'll choose my
zone again - let's choose Europe West B
so what I need to do is right now the
boot this gives Linux I don't want a
Linux operating system here I want an
application sequel server so I choose
application images and here I have all
the different sequel server instances
two versions that you can deploy so what
I'm going to do is I'm going to choose
sequel server 2016
and let's choose the enterprise version
select and then I can keep the rest as
default and create and this will give my
sequel service so with this I will have
a Windows Server with a student left
framework and a sequel server and then
this is the list of VMs that I already
have so I already have sequel server
installed and configured and I already
have Windows VM or the install so let's
just try to deploy to one of those as
these are becoming available so this is
my app so to deploy to my instance what
I need to do is right-click and then
there's a publish to Google class place
so I choose that now as you can see I
can publish to App Engine container
Engine and compute engine this is a
traditional Internet application so it
knows that the only place I can install
is confidential so it's showing you that
one I choose that all right and then
this is the instance that I want to
deploy to VM I choose that one this is
my account and one thing I need to do
actually before I do this is I need to
change this
local db2 and I need to use the Seco
server in in the cloud right so this IP
is the IP o Mexico server in the cloud
so now I can publish just compare engine
and then choose this one and I'm
published and then this is will wrap my
application and send it over and within
a couple of minutes
I should have my app running in the
cloud talking to a sequel server in the
cloud itself
okay we'll yeah there you go it's there
and let's see that it works ok hits
students I have students and this is all
in the cloud now so that's all it takes
to move your app to the cloud so let's
talk about other stuff now and as you
can see things like coming up here but I
can close this close that all right now
our app is in the cloud it's great but I
want to add more stuff to it right so
what I want to do is first these
students they don't have any pictures so
I want to add pictures for them but you
need to save pictures somewhere so there
is something called Google Cloud storage
that's basically for saving any kind of
files you want so you create a bucket
and you can save files in there so what
I'm going to do is I'm going to use
clusters to save student pictures and
then and then link them to student
profiles so savings student pictures one
by one it takes a while so I'm going to
use our powershell commandlets to upload
my images to the cloud so we'll see how
that works so now the students can send
pictures any kind of pictures but that's
not good I want to make sure that these
pictures are safe so they are not
violent or adult pictures to do that I'm
going to use vision ATI so envision ATI
you can pass in an image and it gives
you a lot of information about the image
using machine learning so one of the
things that it does is that it tells you
basically if the image is violent if the
image is other stuff like that so I'm
going to use vision API service to
figure out if the image is safe and let
people upload pictures unmated safe
and then the last thing I want to add is
I want to add like a fun facts about the
student but I want students to be able
to talk to it so I want to use speech
API and and talk and student mode talk
and then it will send it to Google Cloud
it will analyze it and then get the text
back and it will set that as fun tax so
I'm trying to use some of the machine
learning and to see to see if it's
easier or not so let's do that
so let's let's look at the profile
pictures first so what I did is that I
created a service called image uploader
so this is the class that I'm going to
use to upload my images so one thing
that you're real realizing this image
uploader is that it's using Google Cloud
Storage so this is the new gate package
that you can install that will give you
access to Google Cloud search so once I
have that what I need to do is I so you
always save you save your pictures or
files to a bucket so I have a bucket
name that I pass into my class then
after that I get a storage client so
this is the main client that you used to
upload images to or any kind of files to
card storage and then I have a method
called upload image which takes an image
and an ID and then it will just use a
storage client and then there's an
upload object async method but you can
call that and you're basically passing
the bucket name the ID and then and then
your image you can also specify how this
image should be stored so I want the
image to be publicly available so I make
it publicly readable by passing this and
I also have a delete uploaded image
because when a student is deleted I want
to go to class search and delete the the
picture of the student as well so to do
that I basically just passing the ID and
then from storage clients
I just called delete object async and
this will delete the picture so if you
look at how I use this I use this from
student controller so in student
controller when we when we create a
quoit a student
we check if the student has an image and
if so we use the image uploader to
upload the image with the student ID and
then it gives me an image path and then
I set that path to the student model
itself and then with that I can display
the image so that's all there is to so
you all you need to do is basically
install the nigga package for cloud
storage and then just use it with
straightforward api's and then you have
access to it so let's try it out so I
will run this so I'll just try to add
myself as a student okay new let's play
now no matter and then let's say I
enrolled in the beginning of this year
and then let's choose a file so I choose
one of my images and then great and now
this is uploading the image and then
saving the students so if I look at my
page you can see that I have a profile
picture now and if we go back to Google
Cloud console here here there is a
storage area so let's take a look Google
Cloud Storage and then you can see I
have a bunch of buckets but one of them
is called Kanto so this is my for my app
and under here you can see that my image
is already uploaded so it's already
there cool this is great but then doing
this one by one for every student it's
going to take a long time so I'm going
to use the powershell commandlets to
kind of do this image upload you have in
bulk so when you install there's
something called Google Cloud SDK that
you can install on your machine and when
you saw that it comes with something
called cloud shell I will show you that
yeah it comes a Google cloud shell and
then here there's something called G
cloud that you can use to basically talk
to Google clouds from from the command
line and the other thing that comes with
this sdk is the powershell commandlets
so this command as they help you to
script in PowerShell so what I'm going
to do is I'm going to write a script
actually I already have a script I'll
just want to show you so I have this
script it's in PowerShell
and what I'm doing is I am specifying a
bucket and I'm specifying especially
firing a folder and I'm using this
command now so this is new GCS object
this refers to Google Cloud storage so
I'm basically creating a new new Google
Cloud storage object and then I pass in
my bucket so this is the bucket that I
have in Google Cloud and then I'm
passing this folder so this is the
folder I have locally on my machine and
then I'm saying that I want this to be
publicly readable so I'm basically
taking my bucket and selling it to
Google Cloud that's well this script
does so if you run this PowerShell
script you should see that it will look
into the folder and it will upload these
images and now I can use these images
from the student profiles and if and
there's lots of different command mats
for different kinds of things so this is
just one of them but there's pretty much
everything you can do in Google Cloud
you can use it from powershell
commandlets and if we actually come back
here and do a refresh you can see that
my folder is here and then I can upload
update my students to use these pictures
all right so that's that now the next
thing I want to look at is remember like
you can now send any kind of picture to
Google cloud and that's not safe so
let's try to make it safer to do that
we're going to use vision API which is a
trained machine learning API that's
already available to you you just need
to call and use it so to use that what I
need to do is first I created a new
service called image safety checker so
this this class will basically given an
image it will determine if the image is
safe or not
but to do that what we are doing is we
are again we are using a new get
packaged google cloud vision API
so this is available on nigut and i
create a and image annotated client so
this is the client that you use to talk
to vision API and then I have one method
called is safe
so this method takes in a picture and
then and then it passes the picture to
the image annotate your client and then
this will return an annotation and this
annotation has a number of fields kurtz
so one of them is adults the other one
is violence the other one is spoof
another one is medical so what I'm
checking here is that and these
annotations they're enum so they're the
possible values are likely very likely
possible unlikely and very unlikely so
I'm checking whether this image is adult
image and the likelihood is less than
possible so what it's not about image
basically and then I check it for
violence for spoofing for medical so if
all of them are not likely
then I conclude that the image is safe
and I let the person to upload it so if
you look at how this classes up used I
created a new version so this image
uploader remember we use this image
uploader class before I created a new
version called safe image uploader so
this one it basically just extends from
you image uploader but then what it does
is when the image is uploaded it uses
the image safety checker and checks
whether the image is safe and if it's
not safe it throws an exception if it's
safe then basically uploads it right so
that's all there is to it
let's take a look and see if this works
so here Here I am and what I'm going to
do is I'm going to edit my picture and
I'm going to choose another image so
this image is a guy the I don't know if
you guys can see that but it's a guy
shooting bass so it's a violent image
and we don't like that so let's see if
our vision ATI
can detect that so when I hit save now
I'm sending the image to vision API yes
see like blam desirable Save Changes
because I sent the image the vision API
and the originator I detected that it's
not safe and then it doesn't let me
upload it basically
so that's cool and the last thing I want
to do is the based on facts
so these fun facts I want it to be
something where you can speak to it and
it will detect your voice and use that
as fun tax so to do that I'm going to
use something called speech API again I
created another service well couple of
services one is called voice recorder
there's nothing time to hear the voice
recorder basically records your voice so
you there's a method called record for
microphone and you pass in some seconds
so you pass in like say three seconds it
will record your voice and say to a file
so there's nothing fancy here it's just
the utility class but then the world
voice recognizer is the one that
actually does the work so if you look at
most recognizer again it's using the
this nigut package from gold cloud
called Google Cloud speech and then just
like before we create a client so this
time the client is called speech colored
client and then we have a method called
recognized so what this does is that we
call speech client and then we pass in
our file so this is the file or our
voice and then we pass in some some
configuration for it for the speech so I
think these are the defaults I'll just
keep it as it is and then what happens
is that we send the image to Google the
file to Google Cloud and then Google
will do some analysis and it will return
some results so it doesn't return just
one result it returns a number of
results with some percentage of what it
thinks is you are saying and then also
some alternatives as well so some
alternate text for for the things that
it returns but what I'm doing here is
that I'm basically going through the
results and alternatives and I'm
returning the first one normally you
would basically look at the ones that
have the highest rating and use that one
but basically just it's just one call to
speech client and then you get the
results and then you can use them as you
wish so let's see if this works so here
I am let's let me choose another image
make sure
you can save this and then when I hit
record now it will try to detect my
voice and and then it will send it to
Google cloud and then it will get a text
back and then we will see what we get
back what should I say let's say hello
for a Muslim oh I can work let's try one
more time
hello for a Muslim yeah something's all
right maybe I'll go back try one last
time it's always tricky with the
microphone hello for a Muslim oh it's a
slow okay sorry
but it does work work pretty well
usually without the microphone cool
alright so we went through these yep now
I want to talk about the actual new
world the containers world so as you
know and spit on our core now runs on
Linux and then what that means is that
you can create a network or app and you
can wrap that into a docker container
and run it as the inter docker image and
then run that in a docker container and
then you can take the docker container
and you can either deploy it to App
Engine or you can play to Cuba natives
or container engine on Google cloud so
that's how you would run the new
container as a local applications on
Google Cloud I still get this question
on like why should we even bother with
containers so I just want to answer it
here briefly if you look at how we used
to deploy apps it was pretty much like
this because we used to have a physical
machine and then on top of that we had
an operating system then on top of that
we had common set of libraries and then
we deploy our apps on top of those
libraries the problem in this case was
that there was tight coupling between
apps and libraries and the operating
system so if so anytime you change
something with the operating system or
anytime you change something with the
libraries you could potentially break
any of these applications now later we
got virtual
so the idea with virtual machines is
that you have your single physical
machine but you have multiple operating
systems virtualized so you would you
basically virtualized operating system
the libraries and app in a virtual
machine the good thing here is the
complete isolation so whatever you
change here is not going to affect
something in here but the best thing is
that instead of dealing with one
operating system now we are dealing with
four operating systems and four set of
libraries so it was very heavyweight and
these virtual machines they're not so
easy to create and also easy to start so
we would normally do them at the end of
our development cycle when we're ready
to ship our application we'll put in a
virtual machine but we wouldn't really
use it on on a day-to-day basis as we do
up software now with containers we are
trying to basically combine the best of
both worlds so in containers you have a
single machine
and a single operating system and your
virtualizing up from from little
libraries the dependencies of your app
and the app itself and the containers
are they're real lightweight they're
really easy to start and and you still
have the isolation that you need for
your applications so you have the
isolation but you don't have the heavy
weight of operating systems so that's
why containers are kind of great so what
is a container - the lightweight way of
virtualizing applications basically and
as I mentioned they're isolated and
sealed so you can have multiple
containers running on a single via a
single operating system and they don't
step on each other because they're there
they're isolated from each other they're
very easy to deploy it takes like two
seconds to deploy they are very easy to
introspect so you can actually attach
into the container you can see what's
running you can see the logs so it's
another black box you can actually get
in there and see what's happening and
for me the biggest part is composable so
you can actually have a base image that
you depend on so that's your dependency
and you build your image on top of it
and you can layer your dependencies so
if someone depends on your image they
can actually take your image and layer
their image on top of it this way your
dependencies are all layers and whatever
you need you can keep whatever you don't
need you can take out so it makes it
really easy to containerize and put
things together all your dependencies so
doctor is the main container platform
that people use nowadays
others there's something called rocket
from core OS that's also a container
platform for people end up using so when
it comes to Google Cloud
as I mentioned you'll have two choices
when it comes to containers containers
they explode applications app engine and
container engine so we'll talk about the
app engine I'm going to show you how to
deploy it to the simple app to app
engine so FNG means is that it's a it's
a way of like giving your container to
Google Cloud and letting Google figure
out how to run it at scale so you just
basically create your container go to
App Engine and then it will start with
two machines but then it will also scale
as it needs to and it will down scale as
it needs to by default you get some
dashboards that I'll show you
you got versioning so you can deploy
multiple versions of your application
and then you can you can split traffic
between them so you can say a 50 person
gets the traffic and the other data 50%
the other version gets the other 50% so
it gives you some like default features
and it's really easy to basically deploy
to App Engine so it's a good way of
getting started and also auto scaling as
I mentioned it automatically scales so
you don't have to worry about that so
let me show you how how that works so
here I am in Visual Studio again so when
you install the Google cloud tools for
Visual Studio you get some templates so
if you go to file new project under
c-sharp you'll see a Google cloud
platform and we have some templates for
traditional SEO net MVC and then they
learn the core as well so I chose this s
not in the core MVC and I created like a
simple MVC app so I already have it here
so this is the app and then in your app
there's an app settings file so this
file basically it defines your app - to
Google Cloud so here I'm specifying my
project ID and I'm specifying my service
name and version so once you set these
up all you need to do to deploy this to
Google Cloud is right click and then say
publish to Google Cloud and this time
since this is an asp.net web application
it's not giving milk an option
for compute engine because you wouldn't
really deploy it to compute engine it's
giving me an option for flex appengine
flex or container engine so if you have
a cuban ATIS cluster already set up then
you can you can click this and deploy it
there or if you want to use App Engine
you can choose that so I'll choose that
and you can give your version a name so
I'm going to call this like version
let's say version NDC and then promote
version means once this is deployed
should get all the traffic or not I
don't want it to get traffic because I
want the older version to get to traffic
and then I will test this out and then
make sure that it works and then I will
promote it myself and then this says
should I open this site after publishing
no I don't need that so if I hit publish
email version ok so let's call it
something else let's say version 2
all right so what's happening right now
is that it will basically take your code
and it will send it to Google Cloud in
Google Cloud will create a container out
of it so you don't have to create a
container yourself and then we'll host
it on Google container repository so
it's a place where you can actually host
your container images and then from
there we'll publish it to App Engine so
that's how it works ok we'll take a look
at code container 8 it in the cloud put
it somewhere in the cloud so you can use
it in different places and then from
there we will we'll put it to App Engine
flex I already have a version so I just
want to show you the version that I have
so if you go here and under under App
Engine here so by default you got some
dashboards as you can see I have two
versions version 0 immersion 1 and then
you have - box for latency traffic
memory users stuff like that I mean I
just deployed this app so I don't have
any charts yet but if you are using for
a while you can see all these charts for
like an hour 6 hours 12 hours so this is
automatically done you don't have to go
and work for this it just works
I'm the services you can see these
different versions you have so I have
version 0 immersion 1 they each are
getting 50% of the traffic if I want to
change that I can split the traffic and
I can say ok I want this guy to get 90%
of the traffic
and the other one gets 10% and it's
saved and this will change the traffic
settings and then hopefully it will
update yes and if you go back here you
can see that my traffic is split that
way and there there's more stuff here
there's like services so in in App
Engine you can have a default service
but you can also have micro services so
you can define like multiple services in
here and manage them within a single app
so you can have multiple small micro
services managed by attention so this
gives you an idea of how it works let's
see if I have time yes I have some time
and the last thing I want to talk about
these Cuban it is so App Engine is nice
and it's easy to use but it doesn't
really give you much control so all you
have is basically services that you can
define but you can't really do much much
else if you want to create your own
container cluster then Kuban it is a
good choice so cuban it is it's a Greek
word for a governor actually the right
way of saying Cuban it is given it is
that's the Greek way of saying it but it
started in the US and everyone started
calling it Cuban it is and now it's
everyone calls it wrong but it's given
it is actually and it's a 100%
open-source project it's written in go
and it's supported by all these big
companies like Google Red Hat IBM even
Microsoft is contributing to it with
Windows containers so there's a lot of
support for communities the great thing
about given it is that it supports
multiple cloud providers so you can have
a cumulative cluster running in Google
Cloud you can have it running in Azure
you can have it running in AWS you can
even have a cumulative cluster that
spans clouds so you can have a sink you
can have a clustering in Google cloud
another cluster in AWS and you can
celebrate them into a single cluster
basically which is great even though
it's open source it came from something
called Borg so Google has been running
containers for a long time for 12 years
and we have this internal container
management platform called board so
people who worked on board they
basically learn from it over 10 years
and they created communities for for the
open source world so people can use
other things that we use at Google at
work so because of that it's very mature
even though it's open source like from
version one it was it was really mature
and stable all right
and at the high level this is basically
what you have in communities there's a
master that kind of manages the cluster
and then there are notes where you
schedule containers in the master and
the notes they talk through something
called couplets so these are like small
basically daemons that run on only to
note that manage the communication
between the master and the end the notes
and as a user you talk to the master
through and through the Kuban into the
API and there's also CLI and UI as well
and if you want to use Kuban it is I
mean you can run to beneath it anywhere
you can even set it up in your own
infrastructure but if you want to run an
on Google Cloud this is kind of how it
looks like so what you do is you use
something oops sorry you use something
called cloud shell to build your
application in the cloud you create a
docker image and then once you have that
image you push that to a registry so in
this case you can use Google container
registry and once your image is hosted
there you use g-cloud to get a cluster
so with one command you you say
basically i want to create a cuban in
this cluster i want to have this many
nodes to schedule containers and I want
these these machines to be this size so
with just one command once you have the
cluster then you can use cube CTL this
is a command line tool to manage
kubernetes and you can basically say
create me at deployment and use this
image and cube entities will figure out
basically how to pull that image and
schedule it on some of the nodes that
have that you have available I actually
have a whole talk on kubernetes and a
nestled on the core it's like an hour so
that's why I'm not talking about here
and I just show all of this there if
you're interested let me know and I can
send you the link to that talk and on
slide as well but it's a whole different
topic and kubernetes has a lot of
constructs like pods and and volumes and
services and all sorts of things that
you need to know about before you can be
productive but it's very useful because
it's it's it's basically a whole
platform to manage containers in
production
all right so let's do a summary
basically we started with an instant
application running locally we moved it
to Windows Server and sequel server
running on compute engine in Google
Cloud then we added pictures and save
them to a class search and we added some
intelligence with with machine learning
API s and we try to new container as a
snack or with App Engine and then which
boosts the talked about kubernetes and
Google container engine if you want to
know more these are the lengths so this
is the main page for dotnet stuff at
Google and for Windows as well then this
is the page for App Engine and from
container engine this is the page for
kubernetes and this is my information
I'm going to put the slides right after
this talk and if you have any feedback
about my talk that's the link thanks
very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>