<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a development environment out of your production deployment - Orin Thomas | Coder Coacher - Coaching Coders</title><meta content="Building a development environment out of your production deployment - Orin Thomas - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a development environment out of your production deployment - Orin Thomas</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VtUvk5jVQc4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay is everybody ready for building a
development environment out of your
production environment yay
well we've got a small room but
hopefully or a faster large room I mean
who knows it's like the cloud it seems
to have any capacity so today we're
going to be talking about building a
development environment out of a
production environment my name's Oren
Thomas and I well I'll talk about a bit
more what I am in a second but I found
this wonderful quote on the internet
everybody in the world has a testing
environment and some people are lucky
enough to have a totally separate
environment in which to run production
so the genesis of this talk involves the
fact that as I said my name's Aaron
Thomas and I'm an IT Pro and one of the
things that's very interesting about the
cloud and one of the things I've found
very interesting about my own experience
in being an IT Pro and talking to people
about the cloud is the fact that I go
into organizations and they have a whole
lot of what I'd call idiosyncrasies to
the way that they approach traditional
IT Pro topics and that's sort of what
the genesis of this talk is but you'll
understand that as we get further into
it so yin and yang
nice endo Kirk and Spock developer and
IT Pro now you'll notice the way that
are framed that the developers are Kirk
the IT pros possibly more Spock captain
you should not do that I'm gonna do it
okay so again this is a very how an IT
pro might think and maybe I am
exaggerating certain things to get
laughs because I'm kind of known to do
that
and that's sort of the point of this if
we're going to talk about important
topics sometimes it's better to frame it
in a humorous little way of doing it
maybe my jokes will die but at least
then you get your revenge by putting the
nice orange jokes died leaflet into the
evaluation Ben okay so one of the things
that's always been very clear to me and
I started off in computer science as a
developer before I went into AI to pro
was this idea that developers and IT
pros think differently and it's really
not that you're trained differently it's
just that the arch typical developer and
the arch typical IT Pro have different
mindsets they've got different
personalities they've got different ways
of viewing the world developers ah
generally optimists IT pros are
generally pessimists developers often
feel that they don't need test
environments because they're reasonably
convinced that the code that they're
about to deploy is going to work IT pros
really want test environments because
they're absolutely convinced that the
code that the developers are going to
deploy isn't gonna work so again
optimists pessimists different ways of
thinking about this IT pros lay awake at
night wondering did that backup complete
successfully developers wonder about the
existence of backup when something goes
spectacularly pear-shaped again a
different approach oh come on that was
worth a laugh throw a man a banana I
love this one
worked fine in dev ops problem now like
Voltron
however developers and IT pros are more
effective together than they are
separately we've got two different
things I've got a Voltron reference in
as well everybody here knows who Voltron
is how many lines involve Tron five
lines right
which is the best line black line well
kind of blue you know now the genesis of
this talks this idea that many born in
the cloud organizations don't have
traditional IT processes and importantly
increasingly don't have IT pros on staff
in fact within the IT Pro community this
is great fear that we're irrelevant that
we're no longer needed and that the
cloud of v8 soar the need for our
existence and you see that sometimes in
the messaging from Microsoft Microsoft
has a very dev focused messaging
certainly in the last few years and you
haven't even heard mention of IT pros
and IT pros response to this is like
what wait what are we we're not in here
and a lot of organizations that are born
in the cloud and I'll explain what that
means in a moment don't have IT pros
it's very interesting then coming into
those organizations as an IT Pro and
looking at what they've done and that's
again part of the genesis of this talk
and without IT pros with the boundless
optimism of only having developers it
means that they're not building
pessimism into their processes healthy
information systems require input from
groups of people who have separate and
distinct mindsets if you're going to
have long term stability you need both
optimist and pessimist
in the way that you're building out
systems healthy information systems
require pessimists as much as they
require optimist if you just have
pessimists nothing gets done if you just
have optimists everything's unicorns and
fairies until something goes wrong so
you have to have people that approach
this in different ways so the desire for
a dev test environment is an inherently
pessimistic one and this is one of the
reasons that a lot of organizations
don't have them especially born in the
cloud organisation
so this is framing the idea of part of
my criticism of is Europe and this slide
is even funnier when you consider the
following statistic the average age of
an IT pro is 43 there is not a lot of
young IT pros coming into the system the
average age of a developer is 25 so it
really is old manuals at cloud when it
comes to IT pros and the cloud because
IT pros and there's an even more
disturbing statistic in the u.s. the
average age of IT pros in government is
60 so it's a lot of old men with beards
usually old men sometimes old women but
older people and then the young hot
develop if you go and look at the
Microsoft marketing about developers and
you're not seeing a sort of a lot of
people look like fat old bald guys like
me you're seeing lots of hip excellent
people you can look at all of the the
the pictures add on the marketing man
you know and IT pros kind of know that
that kind of guy yeah where everybody's
kind of boring dead well that's the way
it works right so one of the interesting
things about the cloud is that it both
enables us but and you don't necessarily
realize this unless you think about it
it also infant eliza's us what do I mean
by that enables this that's good inform
totalizers us that doesn't sound so good
well enables everything for the cloud is
simple and easy and the cloud provider
takes care of it for you it wipes
changes your nappy it does everything
you want all you would think of the
cloud it's just your dreams are out
there and you are executing them but
that same thing infantilizes us because
everything is simple and easy and the
cloud provider takes care of it for you
and when someone takes care of
everything for you suddenly you don't
necessarily know how anything works it's
like for example people that always
Drive autumn
cars being suddenly put into a manual
now there's an existential question as
to whether or not that matters but it's
something to consider the cloud
providers are making it very easy it's
like come in run your workloads on us we
all make it absolutely simple for you
but there's always a catch isn't there
because if you do come in you do run
your workloads and you don't understand
what's going on underneath then you
start to have challenges if you change
your mind so there's a quite a lot for
example that Asia and I'm talking about
Asia because I'm mostly a Microsoft
person but this applies to other cloud
providers as well there's quite a lot
that it doesn't do for you
but you won't realize it until you read
the fine print and this is what I find
when I go and talk to companies I'll go
and go have you thought about this I
thought the cloud provider did that no
they don't in fact there was a static
that by 2020 97% of all security
breaches in the cloud will be because of
customers misconfigurations so the cloud
providers saying well we've done it
alright but you've got to realize that
there's a whole lot of stuff you do one
of the easiest things to do there's a
thing called as your security centre if
you're a consultant on the cloud and
you're going into an organization you
can run as you as security centre for
free against a subscription and it'll go
through and give you a list of all of
the security misconfigurations
people not people spinning up I as VMs
and then never patching them people not
turning on next-generation firewalls
people not configuring network security
groups because what happens is people
don't necessarily realize that they have
to do this because it's all been made
easy it's all being go out and deploy
it's really easy you don't need to think
about just go and deploy get your stuff
out there but there's a lot more to IT
than just deployment as you're is
endlessly and increasingly complicated
new features are appearing all of the
time I'm if you're watching Scott guff
freez twitter feed he's talking about oh
we've got this and then like a day later
we've got this we've got this we've got
this we've got this that's great except
for who can keep up with this this this
this and this who knows how to configure
this sis's and what is your automatic
response when someone gives you a new
feature you want to take it for a spin
don't you now you want to take something
for a spin that you don't really
understand that's good
but it can also have consequences later
on existing features of Azure disappear
or transmogrify seemingly without
warning again if you're following all
the right blogs you know when stuff is
being deprecated but if you're not
paying insane amounts of attention to
the right people you can find that
features that you rely on get changed
are we moving from the classic portal to
the new portal here's a wonderful thing
I've found when I've gone and talked to
a lot of organizations which portal are
they still using who's still using
classic portal for most things okay
none of you are that's excellent great
vast majority of people I see still open
up that portal first and only go to the
new as your portal when they can't find
figure out how to do it the old way that
is because people figure out how to do
something the old way and once they've
figured that out they don't learn how to
do it the new way because they can still
do it the old way it's only when the old
way gets completely taken away that they
bother learning how to do it the new way
we don't understand what we don't
understand this is a quote that sort of
butchered from Donald Rumsfeld and it
really applies to the cloud there is too
much to know about the cloud there is
too much there we can't understand what
we don't understand how can we configure
an app to run properly how can we
configure anything to run properly when
we don't understand all the complexities
of that and should we have to should a
developer have to understand all of
those extension sees a
something or is it again as I've
suggested that if you have an IT Pro
mindset that's the person that should
worry about it and the IT pro should be
enabling the developer to do what the
developer does and the IT pro worrying
about all of those extendin sees and
that's why I argue when I'm talking to
our chair pros about this I say you do
have a role in the cloud you have to sit
there and worry about things like
compliance you have to worry about
security you have to worry about is data
being backed up and all of those things
that a lot of other people a lot of
developers won't be thinking about
because they're concentrating on a lot
of other complex stuff that's within
their line
we're so pressured and this applies to
both sides so pressure to make it work
that we can't be sure that it works
reliably or securely and here's a
difference again for developers it's
about eglise this is mine this is my
perspective as a misguided old IT pro so
developers it's about getting it there
and making it work if it's working
absolutely great does it work yep does
it passed its tests yep we're good on
the other side you've got IT pros is it
working reliably there's a crash after
72 hours one of the first things I went
got when I moved out of university IT
into working in private enterprises is
this wonderful app that every 35 days
had enough of a memory leak that would
actually crash the server and then the
server needed to be rebooted now the
person that deployed it didn't care
about that because they weren't thinking
35 days out but it became my problem to
figure out why this server was crashing
every 35 days and then none of the
transactions that were meant to be
processed by the server were happening
an artist went ah there's this very
small memory leak that you could see
when you looked at it in that
perspective and again it was that
difference of approach one was this
works that's doing what it's meant to do
the other is does it work over you know
very long timescales it's a very
different way of thinking about
something now here's another claim of
mine the cloud deprecates process
now what does that mean and that's a big
climb to make well the majority of
today's startups are born in the cloud
we know that if there's some great books
you can read one of them I recommend is
Kaos monkeys chaos monkeys is about a
firm that's eventually acquired by
Twitter and by Facebook but it gives a
the guy who writes it it's not a person
you'd probably ever want to be a friend
with he's abrasive he's full of himself
all of that but the stuff he describes
about the way that startups work in
Silicon Valley today is mind-blowing and
we're not talking about the nice Mike
judge way of sort of showing goofy
people in Silicon Valley we're talking
about the brutal it's all about the
money type of Silicon Valley that's
probably a far more realistic approach
to it but born in the cloud organization
why because why do you get born in the
cloud well there's you don't need a
garage to host your infrastructure you
don't need to have any servers when
you're setting up your startup you just
need a trial subscription to the public
cloud all you need is a trial
subscription you can sign up for one of
those for free so you've got an idea
let's sign up for a trial subscription
all you needs an idea some code and the
cloud provider that great mother in the
sky looks after the rest for you you
don't need to go and buy a survey don't
need to go and buy all of that equipment
you should just go spin it up off your
laptop when you're starting out from
scratch the cloud is almost a completely
blank canvas and this comes to one of my
other analogies about the difference
between our IT pros and deaths the
developers are more like artists and of
course IT pros like art critics but it's
that active creation that artists are
the developers are inherently creative
people that they need to create and my
brother is an artist my brother's a
sculptor and he goes and creates these
amazing statues and in Melbourne he did
one that was a gigantic shipwreck on the
shore of sea children I think up here he
did one that was like a cross between a
submarine in a whale that was put on one
of the Sydney beaches
but he has a very different temperament
to me and again this is how I view the
world because I'm a bit more
conservative and worried about systems
and he's worried about going out and
creating things and to an extent many of
the developers I've known have had that
creative impulse and when you create it
the beauty of the cloud is you don't
need to worry about purchasing servers
or slowly ramping up capacity the cloud
provide gives you as an artist as a
developer the ability to access all the
resources you could possibly want in
pursuit of your creation the developer
as an artist has the perfect canvas upon
which to create and this is how to a
certain extent the cloud is sold to
developers it's take your idea and go
with it you can build up infrastructure
as fast as you need you can build out
your idea as quickly as you need you
don't have to sit there and purchase a
$30,000 server and then hook up the
Internet to it and do this and do that
you you should just go with your idea
and run with it so why do poor born in
the cloud organisations have poor IT
processes rapid growth often comes at
the expense of structured and careful
planning again if you are mired in that
process of creation you're not
necessarily sitting there thinking how
do I build this in a very structured and
logical way it's like no it needs this
oh no that's not working I need to do
this now it needs system someone comes
it needs this feature or you need to go
and change this so it's a much more
organic process by its nature the cloud
encourages organic is her ative
development processes rather than
structured monolithic development
processes in the old days when you had
to go and plan out all your
infrastructure there was much more of a
push on process it was well if we're
going to go and buy this $30,000 server
you need to know what you're doing you
need to have all of this ready we need
to know when you need need to have it we
need to go and spend all of this money
if you're sitting there and you can go
throw your idea up on the cloud and then
if
rate it and grow it and grow it and
iterate it it's a much more organic
process and you're sitting there trying
to approve something or justify it to
anybody you're just moving and you're
creating it's challenging and if not
impossible and this is one of the
challenges of this organic process to
bolt on security and process to
something that has evolved organically
so there's an old story about the change
between Windows XP and Windows Vista now
we know that Windows Vista was never
particularly popular right but the
change was that if you looked at the
Windows XP codebase the Windows XP
codebase was going all of the way back
to the Windows NT codebase and that had
evolved organically and then suddenly
Microsoft realized that they needed to
get a much better security story going
and then much better security story had
them realized that when they looked at
the codebase they couldn't make it
secure by retrofitting it they really
needed to start from the beginning with
security in mind and this applies quite
often too unless you are absolutely
brilliant and I'm sure we all are to the
development of any application or any
system you've got a design to be secure
from the start you can't sort of design
it build it out and then go let's bolt
the security on now so giving the
developer as an artist a blank canvas in
the form of in Microsoft's case a 150 K
extended trial subscription is also a
deliberate strategy there is method to
this madness I call it the Hotel
California charity Hotel California
should check in but you don't really
check out that if you're given all of
these resources you get so intertwined
with Azure that you've become so
dependent on US Europe that by the time
that that trial subscription runs out
you're addicted okay your first hits for
free we're going to give you a hundred
and fifty K of spent why because if we
give you that much you've got so much of
a hit that you're probably not going to
wander over the street to Amazon and
start running your load there
when you're in an active creation again
I'm probably way over selling this but
I'm trying to get it sometimes it makes
it's useful to use stereotypes to sort
of perhaps over exaggerate an idea when
you're in that active creation you're
spinning up your idea you really have
time to get security redundancy
economics and data protection right why
because you are trying to get that proof
of concept to the point where you can go
and present it to investors or present
it to someone who can make allow you
should take the next step you're not
sitting there going well I've got this
really great idea for an app but the
first thing I'm going to do is I'm going
to make sure the security is perfect
it's got all of these bits and pieces
it's like no gosh I'm going to create it
I'm gonna have my proof of concept that
it's gonna be there people are gonna see
it and then I'll come back and I'll do
it all that other stuff I need to do
because there's no initial need for
restraint especially when you've got
like a hundred and fifty thousand
dollars worth of spent workloads are not
deployed in the most efficient secure or
recoverable manner it's also always
worth going when you're looking at
someone else's cloud subscription for
what I call orphaned croft workloads
that are sitting there that are not
doing anything there they're dead ends
that they go and create a database or
they go and create a VM or they go and
create something that's no longer being
used but because they've got in the
habit of well we're not paying for this
anyway they don't go and remove this
from the cloud subscription so suddenly
when the building turns itself on
they're sitting there going wow what are
we paying for and if you go through and
while you're not using that you're not
using that you can delete that you can
believe that you can leave that but
there's a sometimes it's not even
documented what does it do well I don't
know because the other guy who was here
who's no longer here created it well is
it part of your app or do you not need
it you hurdle into a substantial monthly
bill when you come off your Bismark
subscription again this is something I
see a lot where organizations have been
on this but come off this buck and then
it's like dude
30,000 bucks a month are you joking well
now we've got to start rationalizing
right now
if you'd had more time to deal with it
or if you hadn't been pushing to hit
whatever goal you were trying to hit
because again this is what I'm trying to
get across in this talk with IT pros and
developers working together you've got
someone who's sitting there you know the
boring IT pros sitting beside you in the
car is your the rally driver going ok
you need to turn left here
turn left hurry up ok good yes we did
that we're still alive excellent let's
keep going foremost born in the cloud
organization's workloads are deployed
directly to production from inception
when you're starting out with just an
idea you avoid processes that get in the
way of expressing that idea and a formal
deployment process does get in the way
of expressing your idea if you're
sitting there trying to iterate all the
time you've got to go through this
immensely boring and complicated test
process before it gets out there of
course you can to avoid that why because
you're not at the stage where you sure
that this is going to lead to anything
well am I going to go and put process in
place when I'm not sure that this is
actually going to lead to anything it's
just going to waste my time and
everybody hates bureaucracy there's a
big reason why so many born in the cloud
organizations like a separate test
environment process gets in the way of
initial create but process yet gets in
the way with initial creative acts
process is also driven by resource
limitation if you were on Prem 20 years
ago and you had to go and spec out
whether or not you needed that $30,000
server you had a whole lot of processes
to determine what you needed do we need
a 30,000 dollar server do we need a
$25,000 can we get away with a $20,000
service whereas if it's all of you
sitting on a Bismarck subscription you
don't care because you're gonna go
whoosh and it's there the amount of
people that spin up VMs that have got 12
cores and 64 gig of ram why do you do
that because I can't it's really cool
and I'm not paying for it's a great VM
and if you've got a VM like that don't
bloody put a BitTorrent client on it
people eventually do notice there's no
perceived if there's no perceived
resource limitation there is no process
or often there is not process the
perception that process is the grumpy
blocker of developer frivolity okay who
here loves process who here hates
process said that one of you put up your
hand for liking process for the other
ones who didn't like process gonna learn
you should hate process you know you
want to put it out in the statues you
want a revolution ah I said well you
wanted to disrupt everything weak
disruptors we just like really like
process that would have got a laugh in a
bigger room many born in the cloud
startups transitions from prototyping
some interesting ideas to suddenly
having a whole business running off with
what was once an ad hoc process of
creation who has ever run into anybody
who is sitting there and they've got a
business and there's people little
conduit and they're sort of sitting
there a bit shell-shocked going it's
just an idea I had it's not ready it's
you know it might be ready in a couple
years no no no no no no we need to go
and show this to investors now okay
who's done that
anybody anybody know anybody like that
anybody Beulah come on some some hands
going up some smiles in the room with
almost getting there
so without process you're figuring out
how to build wings and teaching yourself
how to fly only after you've left off
the clipped off the cliff this is one of
those things that you hear about some
Silicon Valley firms that they learn to
fly on the way down off the cliff it's
not really how you should do it because
often you end up like wile e coyote from
the roadrunner cartoon as a big flat
splat on the ground who's ever worked on
a project where things have gotten so
convoluted that everybody wants to start
over from scratch anybody in the room
right the desire to start over from
scratch is a response to the inevitable
chaotic over complexity of organic
development
traditional developed an IT models
balanced that organic active creation
with a need for overall structure and
one of the claims and one of the things
again I haven't researched enough to
prove it is that there's born in the
cloud type set of methodologies that
have developed really really really
pushes things towards organic
development it pushes things towards
rapid iteration and rapid iteration is
certainly great at a certain phase of
the development process but in terms of
necessarily getting the right structure
of whatever you're building out in the
beginning it depends on how organized
your organization used to how well that
works and the clouds somewhat sidesteps
these models by providing the illusion
to you that you have a limitless number
of resources why do you need good
process why does your code have to be
efficient if you can just keep trying
more processor at it it'll get there
it's like we're sitting here with
machines that are far more powerful than
you know pockets than the ones that
actually landed us on the moon and it's
very interesting to decide well why if
we got to the stage where we are
you know pockets carrying these
supercomputers around from the you know
50 years ago but are we necessarily
accomplishing a whole lot more yes and
no but with the cloud providing that
infinite capacity and this is the other
thing run Microsoft's not running a
charity and neither's Amazon are they
really going to encourage you to write
efficient code that's going to allow
them to charge you less or they kind of
let you write the code you want you
don't need to be all that efficient good
on you
Microsoft's not running is you and
Amazon's not running AWS Microsoft
especially right beat on Prem IT
business they're not going let's get
into that cloud thing because we want to
make less money than we're making with
on Prem they're sitting there going
let's get into this club because we can
really make some serious cash what we
made money on Prem let's get into the
class
a lot more money okay just remember
they're not charities they've worked out
all of this and even though they say
it's cheaper to run it in the cloud
there's an Asterix there
and that Asterix is well if you turn it
off when you're not using it if you've
absolutely got it right sighs and you're
thinking about all of these sort of
caveats that go on the reality is most
organizations are probably going to
spend more money running things in the
cloud than less because then unless
they're really sitting down there and
tightening the screws it's sort of you
know any if you've ever owned more money
and then you're sort of sitting there
going well you know ten years ago I was
earning half of what I'm earning today
but I seem to actually have less money
it's the same thing capacity always
expands to reach it's available limit so
why else might organizations that are
born in the cloud end up with dev test
without robust dev test environments it
was an experimental conceptual workload
and we didn't expect anyone to actually
use it anybody been in that boat tell me
if you've heard this before it's on our
roadmap document we've been okay so far
and you're looking around for wood to
touch the CEO has the attention span of
a kitten on pcp and has 40 1293 things
in the queue that they want to deal with
before we implement a dev test
environment because each one of those 40
1293 things might impact with the
customer and the CEO isn't actually
ensure that having a dev test
environment actually does so why do we
need a test environment okay has anybody
in this room ever deployed something and
then gone whoops okay we're honest
that's good even when I was doing
computer science at Melbourne University
whoops was a pretty big part of my C
code who's ever spent more time cleaning
up a mess than they spent making it
that's my 14 year old about that
in fact the amount of time he
theoretically spends cleaning up a mess
he's probably infinite because it never
gets cleaned up here's a hint for
anybody who's got a teenager Wi-Fi
address Mac filtering figure out the MAC
address of every device they own and
then just go and selectively block those
devices that way you are not denying
yourself Wi-Fi but your team's walking
around like what do I need to do what do
I need to do what all I need to do
dishes rubbish room okay okay okay but
pocket money doesn't work Wi-Fi blocking
does devtest gives you a security
Bastion where another set of eyes can
easily perform a sanity check before a
work load goes into production and this
is important dev test gives you a
rigorous location against which you can
run extensive automated tests so think
about your automated testing environment
and this is one of the other things that
I'll get to is it a good environment
against in which to run those automated
tests or your automated tests just to
see why a scenario where run some
automated tests we're good deploy being
able to recover quickly from a failed
deployment is awesome but it's no
substitute for a good test environment
now why is that because that seems to be
the especially when I talk to some
people that are very hardcore into
DevOps that seems to be their thing
they're like it doesn't matter about
this you have once it's handed over
because if you can roll back you're
golden right well that's good I like
being able to roll back it's excellent
because we will just recover if it goes
pear-shaped only works if you've got a
really good rollback process and your
backups work backups exist in potentia
you never know if a backup has worked
until you have to perform a restore and
this is something that people forget
especially people who have not been
bitten by the all I performed a restore
and it didn't work thing another
interesting step in 2000 before Mike
self-development systems in a data
protection manager they found that 23%
of all restore operations that were done
by Microsoft IT on Microsoft data using
approved vendor solutions failed so
Microsoft and the IT knew how to do
backups but they were still getting a
twenty three percent failure rate on
restore operations simply because things
like tapes were failing or the backup
software wasn't working as advertised
that's why they came out with data
protection manager now we've since had
other companies like Veen come along and
have improved things but the reality is
that most people aren't you don't know
if a backups worked until you've tried
to recover the data so one of those
things that you should regularly do is a
recovery drill but we'll talk about that
in a minute who heard what happened to
get lab 6 different forms of data
protection and when something went
pear-shaped they couldn't bring it back
why cuz they never actually gone out and
tested whether or not they could recover
when things went absolutely wrong so
this is something that you need to think
about there's more to test than it works
on my laptop who's ever heard that one
before test looks enough like production
the problems that you wouldn't we
haven't foreseen become apparent before
they have a broader impact the best test
environments are indistinguishable from
production now there's obviously some
problems with that statement and there's
some caveats to that statement and we'll
get to them but let's talk a bit more
about backup here's a question for you
if your as your subscription was deleted
tomorrow that something happened and
your subscription was gone how long
would it take you to rebuild have you
thought about this question can you even
answer it do you even know where to
start would you be able to rebuild who
here if there is your subscription went
tomorrow reckons I'd be able to rebuild
their environment ok so two of you
if your as your configuration was hosed
so something became corrupted so you've
still got your subscription but all of
the configuration of the apps and
everything that's running on it and the
connection screens there's just some
form of weed corruption got hosed would
you be able to recover and usually when
I ask this question the first question
is for Microsoft I can restore right
it's an interesting question do you not
do you know what level of recovery
microsoft offers on a default Azure
subscription because the thing I've
found when I go and talk to most
organizations is you get that
deer-in-the-headlights look when you ask
this question because people simply
aren't thinking about it and these
questions are critical if your
organization hosts some or all of your
infrastructure in the cloud and you
think a better born in the cloud
organization okay there are examples
where someone has been an administrator
of a born in the cloud organization and
they've had a falling-out with the
company who owns that subscription and
they've muted everything there has been
examples for example where a founder has
started up a subscription on their
credit card and then the founder has
later been let go or fired and then
they've just stopped paying the bills
and the subscriptions gone to put
because no one's actually thought oh
wait a sec now this surely has all of
this built-in backup and recovery it
does if you set it up but most people
never do as your provides built-in
short-term backups for most of their
workloads so they do provide some level
of sanity check and that's usually
depending on what you're looking at
about 30 days but in some case you've
actually got to go and flick that slider
across and turn it on and I can't tell
you how many organizations were I've
gone in and looked and the slider isn't
even turned on and I go so if you lost
this database tomorrow it became
corrupted do you know how to recover it
and it's like can that happen so here's
another one that's interesting right
sequel server management studio you can
connect to an azure database instance
and use your SQL instance
now with some things you can go and
configure firewall rules to allow you in
however there's a really interesting bit
with that if you are running a virtual
machine inside as you are and you
install sequel server management studio
you can actually connect to or you can
attempt to connect to any other as you a
sequel instance that's running in Azure
because by default the firewall rules
allow anybody coming from insiders here
to make that connection the same applies
with virtual machines so you can say
don't allow access to RDP except for
these IP addresses and from within as
your so you just spin up a separate
subscription and then you can RDP across
to it most people don't realize that one
most backups are written two locations
however within the same subscription so
if we go back to that question I was
asking if we go back to what would
happen if an evil genie took over your
Azure subscription and then canceled it
most of your backups are sitting in
their subscription so you'd lose that or
if someone's really trying to mess you
up they could just go through and delete
all of those things and you wouldn't be
able to recover them and this is also
coming back to the idea how many people
here know that the global administrator
account on the rows your subscription is
just whoever set the subscription ups
hotmail account a lot of people are
using their personal hotmail account as
the root account for the global
subscription which means that there are
as your global admin accounts that have
turned up in Troy hunts have I ping
pongs database because there's some
people that have signed up for porn
sites using the same account that they
have as a root account for their issue
of subscription and if they're doing
stuff like that do you reckon they're
using separate passwords why don't back
up to Azure is part of a comprehensive
backup strategy but you also need to get
backup data out of Azure
on a regular basis so that you can
recover in the event that you have
what's called a subscription lost
scenario or a subscription dominant
scenario you need to get your data
somewhere off-site okay off site is all
ways applied with data who here has
backups of as your workloads that exist
outside Azure hands up okay a couple who
here has backups of his your workloads
that exists outside of Azure and
wouldn't be lost if the dev teams
computers were stolen that's very good
because there's a lot of people who are
sitting there going oh yeah I've got a
backup on my laptop so we got a copy of
these your SQL database because I
exported it to a backpack file we're
good so if you lose your laptop what
happens oh yeah I didn't think about
that so it could be as simple as
exporting stuff putting it on a USB
Drive and throwing it in a safe but
there are services that actually provide
you with the ability to fully backup and
recover
most workloads that are running in herds
your subscriptions make sure you have
off-site backups that include source
files configurations and data backup
your arm configurations so those of you
who know how is your works now with us
you're a resource manager you can deploy
the vast majority of your is your
infrastructure using an arm template so
this is where you start you have a
backup of your arm configurations you
have backups of your VMs your data and
anything else you need to completely
restore your environment to a new
subscription if you need it now data
generally needs to be backed up much
more frequently than configurations
configurations basically this is what it
looks like and then you know you spin it
up again and that's what it's all going
to look like again but your data your
data is always changing services exist
to back this up and you can look into
them there's third-party services the
services built into is here some of them
are ok that some of them aren't but
there are services that you can get that
can literally replicate for example VMs
out of azure and across to AWS so that
if you lost one subscription you could
spin it up in a competing subscription
now backups is important and it's
related to building your dev test
environment and I'll explain how in a
minute but let's not forget security
many born in the cloud deployments have
a single root account which means that
there's one account
a bunch of developers know the username
and password and they can all use it who
here's got a friend who might have been
in that situation right
many born in the cloud organizations
allow anybody to deploy to production I
have seen companies where I've gone in
and everybody's a global administrator
of use your account there's no question
if you're working at the company and you
are involved in development at their
company you can basically do whatever
you want me is your subscription that's
how we end up with virtual machines that
are running BitTorrent clients minimize
who is able to deploy directly into
production and becomes more feasible if
you has a test environment cuz what you
get is you set up your test environment
so that developers can go on push into
tests but then you've got a process
about who can actually go from something
that's been approved in tests into
production but if you've got anybody
that can deploy into production it means
that you are losing control of your
production environment use what's called
role based access control to limit who
can perform specific tasks as your
allows you to lock this down on a per
resource group basis you can literally
say so-and-so can only access resources
in this particular group they're only
able to spin up these particular
resources minimize the number of people
that can modify the configuration of a
cloud service get people out of your
global admins group work out what
they're meant to do and then restrict
their permissions this is a big one
because there's a lot of organizations
where everybody can go and do anything
used as if you're privileged Identity
Management and when you turn that on
what happens is membership of any
privileged group requires that you
activate it and then you perform
two-factor authentication so you
literally say I want to go and create a
new as your SQL database so you're going
to the as your console you say I want
this role he'll then perform two-factor
authentication on you and then for the
next hour you can go and perform that
task or you can even have it so that
someone else has to review that and then
approve it when someone leaves your
organization absolutely make sure that
you lock
any accounts they have which have access
to the subscription the number of people
that get fired by an organization then
income in and then mess list stuff is
really not trivial minimize the number
of non subscription related accounts and
by that I mean for example Hotmail
accounts that have any permissions to
the cloud environment so when you spin
up an is your subscription you can go
and create as your Active Directory
accounts so you'll have for example the
root account which might be a Microsoft
account now what you've got the option
of doing is your allow you can allow
other Microsoft accounts access to the
subscription but what you're much better
off doing is creating is your Active
Directory accounts and then getting
people to log in via those because then
you can get rid of those accounts if
those people leave but you can also
quickly enable things like two-factor
authentication and then manage those
accounts centrally provision as your ad
accounts the admin and dev tasks instead
and basically if you've got a root
account that's a hotmail account switch
it so that that account is only used for
that it's not signed up for anything
else and then the password for that
sitting in a safe and you only pull that
out it is as a break glass resource make
sure that the global admin account isn't
someone's personal account so how do you
build a dev test environment a desk test
environment as I said is more than a
developer's laptop it looks like and
functions the same as your production
environment and this is the cool thing
about the cloud an effective distance
environment allows you to figure out
that something is wrong before your
customers do and you can use your
disaster recovery strategy to build your
dev test environment so in the past if
you wanted a replica dev test
environment you basically had to go out
and purchase a whole bunch of servers
and make it look like your production
environment but in Azure you can spin
something up very quickly use it and
then blow it away and if you have a good
functional disaster recovery strategy
that allows you to replicate your entire
environment from backups you can use
that to recover to a separate
subscription perform your test and then
blow it away or figure out what you
wanted
do with it and it achieves two things
one it verifies to you that your
disaster recovery strategy works that
you actually are able to recover in the
event of full subscription loss because
if you can do that then you can recover
the little things if someone
accidentally deletes a couple of tables
from a database you can go and recover
that because you know that you've got
the big backup so that you can do all
the little recoveries in the past test
was indeed recovery probe and it
required a lot of expensive
infrastructure so how would you rebuild
if you watched your subscription that is
how you build out a replica test
environment in the cloud you go and put
it in a separate subscription and then
you can control it in the same way and
you can allow people to work on that
subscription and if they break something
well it's ok it's a separate
subscription it's not going to bleed
over into your primary production
subscription it also gives you the
ability to control the spending costs on
that subscription you can get a good
idea where you're not sitting there
going ok is this a test environment or
is it a production environment well you
know test subscription production X
subscription work towards building a
test environment from arm templates at
configurations and recovered data so
that you can actually spin that up and
you can get to the point where you could
automatically deploy that environment if
you can completely recover your
production environment to a new
subscription you can use that technique
to build a replica for tests means
generating extensive documentation about
your environment and who here loves
documentation one person excellent if
people didn't love documentation or if
people did love documentation I wouldn't
have a career as an author that's one of
the best things about writing books is
it's mostly because IT people and
developers really hate the blank page
they like the blank screen the blank
page not so much so documenting your
environment figuring out what you need
to backup and recover also allows you to
spot what the craft is the stuff that
you no longer need because you become
very aware of what you're backing up and
what you're recovering so you sit here
and go well that VM doesn't need to be
here that particular web app doesn't
need to be there that database doesn't
to be there because I don't need to
recover it to get back to where I need
to be and so you can use that as a
method of cleaning out your subscription
you need to be able to automate the
building and tear down of a just-in-time
test environment and if you can do that
you are absolutely golden you don't need
to worry about a lot of these issues
because you only need to spin up and
play for your test environment when you
need it now as your stacks coming and it
may be that you can push as your stack
as your desk dev test environment I've
seen a lot of organizations that are
very interested in this idea of having
on-premise your the test and then prod
is out in as your proverb and that is
something that Microsoft's certainly
looking at when it comes to is your
stack and we're seeing that go into
trials at the moment opera relational
eyes your pessimism that is assume that
something will go wrong and build
procedures around stopping that going
wrong anything that can go wrong
eventually will don't sit there and go
well we'll be fine you buy car insurance
because you're worried about curving
your car accident you buy travel
insurance because you're worried about
something happening when you're overseas
sit there and work out what is a
weakness in your Azure subscription or
what is the weakness in your processes
and then go and deal with it if you can
back up your in recover your entire
cloud production environment you can use
that to build a JIT dev test environment
backups need to be off-site and that
means out of the cloud that you've got
it hosted on so make sure you've got
off-site backups test environments form
a block between deployment and offs okay
because you want to minimize an amount
of ops that you have and if you've got a
chest environment you are going to
minimize that now at a certain level if
you're small of course is this less
worried about Oaks but if you're
suddenly basing you know other people's
salaries on whether or not you hit
ohrp's then that's something that you
want to consider having not everyone in
your organization needs to be able to
deploy to production if you have the
right structure and procedures in place
you can minimize the impact of
inevitable
problems and there will always be
problems nothing ever runs perfectly
assume the worst and then enjoy the best
thank you very much I'm happy to take
questions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>