<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ASP.NET Core 1: What has changed for MVC and Web API developers? - Manfred Steyer | Coder Coacher - Coaching Coders</title><meta content="ASP.NET Core 1: What has changed for MVC and Web API developers? - Manfred Steyer - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ASP.NET Core 1: What has changed for MVC and Web API developers? - Manfred Steyer</b></h2><h5 class="post__date">2016-08-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mBuZ2O1pRws" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay hello everybody let's get started
welcome to this talk about asp.net
Corvin I am mantlet I am a trainer and a
consultant and I'm focusing on angular
at the client side as well as on server
side net I live in Austria and I also
work in Germany and from time to time I
am visiting customers in other parts of
the Union or of other parts of Europe so
what is the goal of this talk the goal
of this talk is to give an overview of
changes for MVC and Web API developers
regarding asp.net Corps and I will use
slides for this and in addition to that
I have prepared a sample so what are the
contents I will first of all give an
overview of core one and then I want to
talk about bootstrapping how to
bootstrap an asp.net core application
within your web server and then I want
to talk about web apps web apps that are
created with MVC and then I will talk
about Web API is that can also be
created with MVC so let's start with the
overview here we see a graphic that has
been painted by Scott Hanselman some
time ago and I think this graphic really
nicely shows what studnet core is about
it shows that this new dotnet core is a
cross-platform solution and
cross-platform doesn't just mean Windows
8 Windows 8.1 and Windows 10 no it also
means that you can run dotnet core on
Linux or on Mac computers and asp.net
korban is leveraging dotnet core so you
can write web applications with asp.net
korban that can run at any platform you
see
year but if you want you can also use
the traditional dotnet framework beneath
asp.net Corbyn so in this case you can
use all the libraries you have all the
libraries you have written for the
traditional dotnet framework but in this
case you are restricted to the Windows
platform the new dotnet core and the new
asp.net core bring some advantages as
mentioned you have a cross-platform
solution in addition to that you have a
very lightweight solution that bases
open NuGet packages the whole dotnet
core framework consists of NuGet
packages and you just have to use the
new get packages you want to use you
need for your application so when you
want to use that the XS just pull the
data access packages out of the
repository when you don't need start the
XS then you can leave those no get
packages so you just go with the birds
of death net framework you need and this
leads to very lightweight solutions and
this also leads to a side-by-sides
deployment so dotnet core gives you the
possibility to deploy your part of
the.net core framework as part of your
application so you don't demand a
administrator to install the.net version
you need you can just chip the necessary
parts of dotnet as integrated part of
your solution that is quite nice and
this is quite important in this worlds
where we are running more and more our
software in data centers or in the
clouds make out your code you know
dotnet core is also about self hosting
you can self host your asp.net core
solution so you don't need a heavyweight
web server Vala
i-is or something else and you have
something i want to call the f5 compiled
to memory experience so let's assume
you've made a buck you've a buck within
your application then you can just alter
the codes and press f5 and stand asp.net
will automatically recompile your codes
into their memory and then you can in
theory immediately see what your buck
fixa has done whether a bug-fix worked
or not when it comes to hosting you have
several options for instance you could
use kestrel for hosting kestrel is this
new lightweight very fast
cross-platform web server that has been
written by the asp.net team it is
intended for self hosting scenarios
there is also another hosting solution
that is called the Babel asana the web
lisanna is a window specific self
hosting solution that provides Windows
specific features like windows
authentication when you want to go with
I is then you are running asp.net
outside of iis then you are just using a
is some kind of a side of some kind of
reverse proxy and this force 8 is just
delegating some user requests to a
Kestrel server or to some other server
behind that brings several advantages
first of all you can use I is for what
it was intended for you can use IAS to
communicate with a lot of users that are
there outside of your company and in
addition to that you can use Kestrel as
a container for your asp.net
applications you can use Kestrel so that
your asp.net application is behaving the
same way all the time
so it doesn't matter whether your
application runs within kestrel or with
i is it always behaves the same cause it
is always executed within the same
execution environment that wasn't the
case in former versions of asp.net and
this led to several difficulties for
instance to a slightly different
behavior for instance when it came to
security in these cases your
applications might act differently when
they are running within a Salafist
this issue is gone now now asp.net
always runs in the same execution
environment and the same holds true when
you are using some other web server for
instance ng next on Linux in this case
you are using nginx to communicate with
all the users out there and your next
acts as some kind of s8 and this facet
is delegating to some other execution
environment behind of it for instance to
the cross-platform solution kestrel so
why do we need a new asp.net for all
this
why do we needs then you asp.net core
one solution one answer to this question
is that's the old asp.net frameworks
were very tightly coupled to iis they
have been very tightly coupled to
something that is called system bad and
system bap is very tightly coupled to is
it is especially true when it comes to
web forms and also when it comes to
asp.net MVC and so we had to get rid of
system bap to get some kind of loosely
coupling between asp.net and is our the
web server that is used to run asp.net
so as the
just right to get rid of system bap they
had to re-implement all the features
that system that provides and these
features are about low level stuff low
level stuff we all know low level stuff
like session handling low level stuff
like caching configuration or routing
system web also cares about
bootstrapping asp.net within the web
server it also cares about the HTTP
abstractions about dealing with HTTP
requests and responses so all this stuff
had to be re-implemented and the
consequence of this is that we are
facing some breaking changes when it
comes to those low-level api's as there
are breaking changes the product team at
Microsoft use this to just tidy up the
framework a bit when you look at this
asp.net related frameworks today at
frameworks like Web API or MVC or web
pages then you are seeing some top links
for instance there are two controller
concepts two controller concepts that
are quite the same but slightly
different one for MVC and one for web
api and the same holds true for other
concepts like filter like the model
binder like routing like dependency
resolution and so on and so on so there
are some couplings when you look at
these frameworks and the same holds true
when you look at MVC and web pages there
is also adapting namely the razor views
and the product team tried to get rid of
these couplings of the of these
doublings they tried to get rid of all
those concepts and therefore they create
that MVC core one
if which is just a unification of
embassy of web api and it will also
includes the features of that pages in
future their web pages features aren't
there yet but they will come and so you
have uniform concepts for controllers
for views and so on so you don't have an
own controller concept for the world of
web api and the own concept for the
world of MVC I think that is quite nice
so what does that mean for my grading du
net core this just means that your code
needs adaption when you want to make
rates to dotnet core your codes won't
run with dotnet core without any
modifications but you don't need to
hurry because the current framework
versions will be maintained saying that
top CF and web forms won't be migrated
to core at least there are any plans for
this yet but you don't need to worry
when you are using these technologies
cause these technologies are here and
they stay here they will be available on
the traditional dotnet for platform but
as mentioned they won't be migrated to
dotnet core and there will be some
maintenance when it comes to web forms
web forms has seen some new features in
the last month so let's talk about
bootstrapping asp.net korban what's to
be needs to get asp.net korban up and
running within the web server of your
choice first of all you must know that
asp.net core brings a middleware concept
a middleware concept that is quite
similar to the concept of Oban who has
used open before think most of you about
a third
it seems open just defines the host
process
and so does the Middleburg concept of
asp.net core and this Hosken cept this
host process is just running a server
component this server component is
communicating with the outside world it
is communicating by the means of HTTP of
HTTP and HTTPS and this server component
is just taking the incoming requests and
pulling them through a pipeline that
consists of middleware components and
this middleware components can do stuff
with this incoming requests they can
care about security scenarios they can
care about encryption and stick Repton
those middleware components can care
about compression and decompression they
can implement some web protocols like
cores
or like WebSockets and so on and so on
some middleware components will just
deliver some static files and other
middleware components will also
delegates to a web application framework
a web application framework like asp.net
MVC and of course the web application
framework will delegates to your
application code and then your
application code runs it performs some
tasks and the response from your
application code is again pulled through
this pipeline through this pipeline that
consists of middleware components and at
the end the server is sending their
response back to the caller so
bootstrapping your asp.net application
is all about setting up this pipeline
this pipeline of middleware components
and for this you are using a class that
is called startup by convention and this
class has also a methods that is called
configure
and this configure method is getting an
application builder and this application
builder is very you are setting up your
middleware components you are just
executing some extension methods on this
object to define the middleware
components you wants to use in this
simple case I am just registering one
middleware component that is delivering
static files to the user static files
like HTML files or MHS or CSS or
JavaScript files and then here I'm
registering the MVC component and this
MVC component is delegating to asp.net
MVC at the end of this pipeline you can
also create a configuration considering
the current execution environment in
this simple example I am just grabbing
the hosting environment variable by the
means of injection and then I'm using
this variable to find out the current
environment my application runs in then
I'm running within a development
environment then I'm setting up the
developer exception page this developer
exception page is just another
Middleburg component and this middleware
is displaying a nice exception page with
a huge amount of informations about your
exception when an exception occurs so
this is exactly what I want to know then
I do a mistake during programming but
that is not something I want to have
within a production environment because
as you might know it is not a good idea
to expose too much exception information
within an production environment that
would give a hacker too much valuable
information about how to refine the
attack so when I'm just
within and production environment I'm
using this exception handler here the
exception handler is just redirecting
the user to some page that is displaying
some generic error message something
like oops there was a mistake
oops there was error something went
wrong so the question here is how can
asp.net find out about your current
hosting environment and the answer to
this is quite simple asp.net is just
looking at some environment variables
and windows environment variables are
set to development then asp.net assumes
that you are running it within n
development environment so it is goods
that Visual Studio is just setting this
environment variables for us so we don't
have to care about this in addition to
that the new asp.net core is about
dependency injection or decide a old
techno song from the 90s di di
everywhere di is really baked into the
framework and you have this method
called configure services within your
startup class that you can use to set up
all the services for your di container
so in this case I'm just using the
convenience method at MVC and this
convenience methods just registers that
default services the default classes and
objects for asp.net MVC you don't need
to do this you can also use these
methods to register your own services
for asp.net MVC and by doing so you can
adopt the behavior of asp.net MVC you
can alter you can modify the behavior of
this framework just by switching outs
they used
services so let's look at a
demonstration for this here I have a
very simple asp.net core web application
and here I have my startup class and the
startup gas has a constructor the
constructor gets the hosting environment
injected and then I'm using a
configuration builder here the
configuration builder is some kind of
factory or let's say builder that is
used to create a configuration object a
configuration object that allows you to
read some configuration data out of
several different configuration sources
in this case I'm just claiming that I
want to use Jason Jason is the new XML
and so I want to use Jason to read some
configuration settings I'm reading two
JSON files here the first one is called
app settings Jason and the second one is
called app settings and via man's name
Jason for instance app settings
protection Jason app settings
development Jason both of these files
are optional so they don't need to exist
and then we have a look into this chase
file we will see that this JSON file is
very simple structured this is the run
chase new file this one isn't simply
structured but my eyes are leaving me
here we have the right one we see that's
this Chase and file is quite simply
structured so you don't have to go with
this overloaded web.config anymore this
overload that web.config with thousands
and thousands entries you just have a
very slim configuration file that just
consists of the configuration settings
you need there is even support for other
sources of configuration files for
instance you could load some kind of XML
file here or if you like the 90s you
could also load some kind of any files
here in addition to that I am loading
all the environment variables into my
configuration builder so I can use
environment variables to shadow my
configuration settings that can be
especially useful when you are trying
out different configurations on the fly
and then at the end of this I am just
building a configuration object out of
my configured configuration builder and
this configuration object I'm using here
to just fetch a connection string I'm
fetching the connection string
connection strengths column default
connection which is defined directly
here there is another nice feature that
is called user secrets
user secrets are just configuration
settings that you don't want to check
into your source control for instance
these settings can be about your
personal passwords you are just using
for testing purpose your personal email
server all these settings can also be
about your personal database you are
using for development when you want to
use this user secrets then you are just
adding the user secrets to your
configuration builder by the means of
this method here and then you are
jumping to them command line and there
you have some kind of nostalgic user
experience and this nostalgic user
experience gives you some command line
interface to list all your user settings
that are installed on your machine here
in this case I have two user settings my
very secret password
which is none of your business and a
variable X that is why and after doing
so you can also read this local this
machine local settings that you don't
want to check in so this is just the
constructor of my startup close and this
constructor is using the new
configuration system here in addition to
that of course the startup class has
several other methods for instance here
I have the method configure services and
this is where my dependency injection
container is built up this is where some
services are registered for my
dependency injection mechanism saying
that asp.net brings its own dependency
injection container but if you want you
can just hook in the dependency
injection solution of your choice there
are hooks for that and so you can use
something like like Auto FAQ and so on
to get up and running in this case I'm
just using the ordinary built in
container with the default services for
asp.net MVC then here I have my
configure method this is the methods
that is building up their pipeline the
pipeline that consists of middleware
components and this method just gets the
application builder by the means of
injection it gets the current hosting
environment and it gets a log of Factory
and here I'm setting up this log of
factory
I'm just claiming that I want to lock
down to the console and I'm claiming
that I want to configure the console
logon with some section of my
configuration file when you remember my
app settings configuration file then you
are also remembering this section here
that is configuring my laga
so I also want to have debug
informations for instance then I'm
checking whether I'm running within a
development environment in this case I'm
setting up the developer exception page
I've told before then I'm setting up a
database error page that is just
displaying some additional informations
when a database exception occurs and
here would be the right place to set up
browser link to connect Visual Studio to
your browser in your development
environment for the production
environment I'm just using the exception
handler then I'm also setting up the
middleware for delivering static files
and I'm setting up the middle bar which
is delegating to MVC and by doing so I'm
setting up a default route a default
route you all might know when you have
used MVC or web api before a default
route that just Maps all the action
methods of your controllers to this URL
here so in addition to this startup
class there is another file that's
called the project JSON file and this is
where all your nugget packages are
mentioned all the maquette packages you
have downloaded don't get used too much
to it cause this project JSON file will
disappear in future the product team
decided that they want to phase out this
file more and more and at the end of the
day they want just to give you some kind
of project file like the project files
you know from traditional Visual Studio
solutions and this project file could
also mention all the things you've
downloaded from the gate they are just
designing this stuff and so we will go
with this project JSON file for a while
now but it at some
point in future it will disappear so
let's have a look at a controller here
we see that the high level API hasn't
changed much when you compare it to MVC
5 or MVC 4 or other versions of MVC and
map API you'll just have an ordinary
class and this class is arriving from
controller saying that you don't need to
derive from controller enemy anymore
when you don't need the features that
the controller base class provides then
you can just skip their inheritance of
this case that means everything can be a
controller nowadays that also holds true
for an ordinary class that isn't sub
classing anything then my controller has
some constructor and this constructor is
taking a flight repository by the means
of dependency injection and then I have
some action methods that are mapped to
URL else by the means of the route I've
set up before and those action methods
are just calling the repository to deal
with data and then they are delegating
to some view as you see here not much
has changed this really looks like the
good old stuff we know from the old
world of asp.net MVC 5 and so on to make
dependency injection happen we have of
course to configure our dependency
injection container in this case here I
have to tell the dependency injection
container which instance to inject here
which implementation of this interface
to inject here when the home controller
is created and for this I'm switching
back to the startup class I'm switching
back to configure services
and here I'm using services at
transitions I want to use for the
interface I flight repository just a
flight entity framework repository which
is a very lightweight repository I've
written with ASP not a TSP with entity
framework core one before so let's start
this and let's put in a breakpoint here
that lasts a bit now so let's cross
fingers you will make it come on yeah
here we go and we see that asp.net is
really injecting my flight entity
framework repository into the
constructor of the home controller and
then you should see some page yeah
awesome
you can also inject some kind of lager
in your controller for instance here I'm
injecting a lager of home controller
that means that home controller is just
a category name for the locked messages
and then I'm using this locker here lock
a lock debug manfred was here
and you've been hacked you and now there
is my favorite word I have just learned
this week so let me try to write it so I
think this word is quite international
and I've checked it before it's totally
aligns to the current code of contact
here at the conference okay so in this
case I will just lock out some
informations by the means of this
logging framework I've set up before
let's keep this in mind for the next
demonstration of course um as I
mentioned before asp.net core is
nowadays running outside of I is is is
just a facet for my asp.net application
and saying that I also have to say that
my asp.net core application is just some
kind of console application yes your
third right is just some kind of console
application perhaps you've seen it I
have a program class here
good old program gasp with a main method
and this main method is just setting up
a web server that is running behind I is
a web server that is using kestrel a web
server that is using iis integration to
get all the data from iOS for instance
data about the current user and I'm
using the startup to us to configure my
pipeline and then I'm running my
solution here because of this of course
I'm I can very easily run my application
stand alone without is in a very
lightweight manner so let's do this
it takes a while it takes a bit on this
machine to get up and running with this
server so I'm thinking the server
come slowly up here within this console
and yeah here we have our logging
information Manfred was here great and
here we have our website running on what
five thousand so FS you seen here there
is not a big difference between self
hosting and hosted solutions as it was
in the past awesome
ok so there is another nice feature when
it comes to web applications with
asp.net core and this feature is called
takapa before i want to talk about tech
help us let's talk about those HTML help
us we all got used to HTML help us in
asp.net MVC 5 + 4 + 3 and so on are just
methods that are called within your view
and for me this always felt about strap
it strange calling a method within a few
just doesn't feels right for me although
it's about few logic it doesn't feel
right in the past I think about 15 years
ago I've used throw beside Java
I don't tell anyone I was young and
needed the money and I didn't know
better than but server-side Java has a
very nice feature server-side Java
allows for the execution of tax of HTML
elements on the server side and so big
it is quite natural to hook in some view
logic into your views and guess what
asp.net korban is just providing the
same feature nowadays it provides a
feature called a cable helper and that
helper is exactly
that attack helper is just a HTML
element and or an HTML attributes that
is executed server-side so by the means
of a tech helper I am just setting up a
hyperlink here a hyperlink that points
to a specific controller a hyperlink
that points to a specific action method
within this controller and the hyperlink
that is passing the parameter ID with
the value 1 do this action method so
this feels quite more natural than
calling some methods within diffuse and
in addition to that it is very easy to
write your own deck helpers just
subclass some abstract class the
framework provides just write in some
lines of codes just overwrite some
methods and you have your own deck
helpers for your own or for your own
features to make use of Dec hell bus you
have to register them for this you can
use this directive on the top of your
raise of you this directive is called
attack Elba and here I'm importing all
that decker bus star means all all the
deckle bus of this of this namespace
here or let's say of this assembly here
and when you don't want to repeat this
line of code ever and ever again you can
just place it within the file underscore
view imports the new underscore view
imports file is just a piece of a view a
piece of a view that gets respected for
every view that is rendered so just
place it here to get some global
experience
so much for web apps within asp.net
korban you have seen that dependency
injection is baked into it you've seen
this pipeline concept you've seen that
the low-level api has changed
dramatically
things like locking things like
configuration but you've also seen that
the high-level api's are quite the same
they really don't change much so let's
talk about web api s-- when it comes to
web api s-- in MVC Corvin then you must
know that there is not an own routing
concept for web api so you just have to
go with the same routing concept you are
facing in the world of MVC in the past
there was a own routing concept for
asp.net web api this routing concept was
quite similar to the concept of MVC but
it was not the same concept for instance
this former concept of asp.net web api
allowed you to define the HTTP verb by a
convention when you had some methods
that was starting with the words get
then web api nodes that you want to call
this method y at the HTTP verb get and
the same holds true for Bost and for
boots and for delete you just use this
convention to show Web API which HTTP
verb the current action method is
intended for this convention has gone
this convention has never be part of MVC
and as we are facing a unified framework
a new version of MVC that is also a new
version of web api we just have to
forget about those conventions and in
addition to that routing doesn't even
consider URL parameters to select the
actual method that was also a feature of
the routing within asp.net
API with asp.net Web API you could have
ended up with one URL that's pointed to
several methods and in this case Web API
just looked at the URL barometer to
decide for one or for the other method
also this has never been a part of MVC
and that is why also this feature has
been done so to put it in a nutshell you
have to align with all their routing
features of the world from MVC but when
you want to migrate pre-existing code
then you can use this component here
there that API compatibly combat sim
this shim mimics the traditional
behavior of asp.net MVC we are of
asp.net Web API within MVC kerbin so
when you are using this component then
this component is just switching out
some dependencies of MVC by the means of
dependency injection some services are
switched out and then MVC behaves quite
like asp.net web api in the past as the
name suggests here this is just intended
for upgrading your stuff it is not
intended for writing new code it's just
a shim so the best thing to start with
routing and web api is in MVC korban is
to leverage attribute based routes with
these routes you can mimic the behavior
of traditional web api applications in
this case i'm using the route attribute
to define a route prefix that is called
api controller
they are controller with in parantesis
is
just a placeholder this name controller
within the brackets is just a
placeholder for the name of your
controller in this case the name is
flight not flight controller the suffix
controller is omitted the name here is
flight and this name will be put into
this controller placeholder and in
addition to that I have several action
methods here get by ID which takes an ID
and returns the flight get by route
which takes from and to and returns a
list of flights I also have both flight
with which takes a flight and red ones
exactly nothing white and when it comes
to get by ID I'm using HTTP GET and hdtb
get is doing do things here it is just
configuring these methods method for the
usage over the verb get and in addition
to that it defines a additional route
segment so in this case the whole URL
that is pointing to this method is just
called API flight my routes prefix + ID
and here again ID is a placeholder a
placeholder that defines some value for
the parameter with the same name so when
I'm calling API flight 17 then the value
17 is passed to this method here the
same holds true for the next method here
I'm using the route segment by route
this isn't really restful please I'm
sorry for this but I don't think it has
to be restful all the time and as I'm
not specifying Blaze holders for these
parameters here you just have to mention
these parameters within your URL by the
means of the query string and in
addition to that the same is of course
true for this post method here this post
method
dedicated to post calls one important
thing here is that you have to use this
from body attribute when you want to
read some object out of the content of
your current HTTP request when you want
to read the body of your HTTP request
this is really mandatory only when you
are using from body asp.net MVC core one
kicks on the Fermata the Fermata feature
the Fermata pipeline this format abaya
brain consists of several four mothers
that are able to serialize and
deserialize several data formats for
instance json or xml or zone so let's
look at a demonstration for this
here I have a very simple Web API you
see there is no on base class for web
api is I'm just using the good old
controller base class that comes with
MVC
here I have my route prefix I'm using
dependency injection once again and Here
I am having my methods that are
dedicated to specific HTTP verbs and
that are defining some additional route
segments so let's just put some
breakpoints in here get all and find by
ad and post and let's start this no
let's start it within I is don't
let's do self hosting I'm starting it up
within IAS or let's say behind iis so
you see my machine here is very fast it
was a great investment and here I have
fiddler to communicate with my web api
here we go and now I want to call API
flight and so my get all method is
called and this method is returning a
list of lights by the means of chasing
yeah here we have our chasing document
let's AB and an ID in this case the
other method is called that takes the ID
within the URL and this ID is passed to
this parameter here so I think that
isn't that awesome we've seen such stuff
before but let's do something different
let's request XML that is something that
worked when we went with asp.net Web API
we just were able to transmit acept
error with XML I'm executing this year
and I'm getting chasing back so at this
point I just want to cites the famous
philosopher Mick Jagger who said you
can't always get what you want and I
think that is especially true in this
case here the reason for that is that
while XML was a huge thing about 10
years ago it's some kind of special
interest today and so xml support isn't
directly built into asp.net MVC there is
a new get package for it and you can
load this nugget package and you can
activate the support for xml that is
located within this nugget package when
you do so then you get back to good old
xml support I will do this after that so
just let's keep this in mind so here I'm
taking my Chasen I've got
and I'm sending this chasin up to the
server I want just to create a new
flight the new flight doesn't have
bookings it doesn't have an ID and it
shall go from Oslo to Graz where I'm
living in and it should go tomorrow
although there are some plans to puts
down the work and of course I have to
mention the content type of this stuff
text chasin so that didn't work
oh yeah thank you for this now it works
perfect the Chasen is passed out of the
body and here I have my flight object
the flight of check that just has been
dis utilized out of the body that all
works perfectly but we are getting the
status codes 200 and when you are a
humble HTTP developer then 200 is
completely ok but when you are a friend
of rest then 200 isn't because in this
case you just want to get the 201 status
code that is telling you that something
has been created and in addition to that
you will likely want to have some header
that points to the URL which is the URL
of this saved object here so what I want
to do here is I just want to influence
the created header they created status
code and they're graded header entries
here and for this I'm switching back do
my post method and here I'm just
returning an eye action result
and there are some action results baked
into the framework and there are some
convenience methods for those actual
results for instance there is the action
result created at action or the
convenience method created at action and
this method creates an action result
that has the 201 status code within it
in addition to that it points to the URL
of some action method here it is the URL
of the action method get' by ID you
might remember the route for this action
method was API flight ID
where's ID was a parameter and for this
parameter I'm defining some value for
instance 17 so this means that exactly
this value is posted to the column to
inform the caller about the car and URL
of the saved object and in addition of
that I'm also sending back the whole
flight object here so let's try this
let's start up
I've just seemed that diming here is
quite well and let's create another
flight created that action is called and
now we get the two old one start to
scold and we are getting this location
header here so for some situations there
are already predefined action results
but of course you can also create your
own actual resort by implementing this
IX result in the face it just comes with
a method called execute result async and
this method gets an action context and
this context brings you the current
request object and the current response
object and with these objects you can
just define your answer for the cola
I've done this here here I'm created and
accept that actual result it is just
implementing this I action result
interface and within the execute method
it is wrapping the request object it is
wrapping the response object it is
setting the status code to 202 which
means except that it is setting some
user-defined header and that's it when
you write something down to the body you
can just use the property body of the
response the body is just a stream you
can use to write down some bytes or some
other stuff
so it is quite easy to implement your
own logic here f you've seen so let's
talk a bit about configuring asp.net MVC
asp.net MVC has this ad MVC convenience
method we've used before this method
just adds all the default services for
MVC to the dependency injection
container and in addition to that you
can proceed with some other methods like
at Jason options or at MVC options and
this is where you can create a
configuration for NBC for instance this
is where you can hook in additional form
at us for instance format us for XML
parsing and those format us for XML
parsing are located within this NuGet
package these classes are seeds to be
nominated for the largest class named
contest this year the first class is
called let's take brief XML data
contract serializer
input format them and the other one is
the XML data contract serializer output
formatter so just try to say that three
times very quickly and when you are
hooking up them then you will get
chasing are not chasing then you'll get
XML support so let me just show you that
let's jump into the startup gasp here we
have at MVC then I can proceed with
Jason options here I can configure my
chase and serializer
options that serialize the settings here
I can do all the stuff you know from
Jason net daikon can configure the date
handling and so on I can also configure
the formatting for instance here I'm
saying I want to have pretty brain-dead
intended Jason and in addition to that I
can call at
we see options to configure my MVC
framework so there is all the stuff you
might know from former versions of MVC
format the mappings input format us
output format does model bind us gilbert
filters and so on and you can for
instance use here the output format does
collection to just register this ugly
named class here so in this case you
need the lamp where is the lamp is it's
called amp okay for some reason how to
import isn't supported here you just
need some additional no you just need to
output for mother when you do it right
everything works awesome okay saying
that there is also a more convenient
feature to set up the xml support there
is a convenience method that is just
called at xml stuff at xml serializable
matting's that is doing the same or i
think the action name is at XML dot the
contracts here Eliza for matters which
is doing exactly what I've showed before
okay we are running out of time here but
that isn't a problem cause I'm nearly at
the end of this talk let me quickly sum
up all those things we've seen that
asp.net korban is a cross-platform
solution that runs on Windows but also
on Mac on Linux we've seen or referred
that we have this a5 compiled to memory
experience we have side-by-sides
deployment possibilities that means we
can deploy the parts of the dotnet
framework we need a long
side of our application so we don't need
to make friends with the administrator
anymore
we have self-hosting so we have a very
lightweight solution to run our is p.net
application within a cell first di di
everywhere di is baked into asp.net core
and we have these new features of tech
helpers an edition of that we have a
unification of MVC and web api or
something both is now one and solely one
framework namely MVC curve on the
high-level api's are quite the same but
we have to align with MVC style routing
the web api style routing has come the
low-level api is like the api's for the
configuration or the api's for logging
or for session handling they have been
changed dramatically because we needed
to get rid of system gap and in addition
to that you don't need to hurry because
the current versions are still
maintained of course further development
will mainly take happen within the core
branch but the old versions the current
versions will still be maintained so you
need to hurry to migrate to the new
asp.net core vault so and that's it
thank you for coming and have a nice day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>