<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Microservices and the Inverse Conway Manoeuvre - James Lewis | Coder Coacher - Coaching Coders</title><meta content="Microservices and the Inverse Conway Manoeuvre - James Lewis - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Microservices and the Inverse Conway Manoeuvre - James Lewis</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/K-1MpmwOlv4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it's really difficult I was just in this
room previously so I don't know how many
people were also in that session or and
whether I should make the same joke see
how it goes yeah
if I say execute order 66 does that make
any sense it's a bit like being
Palpatine in their souls Senate
essentially what I'm saying there's just
kind of these crazy Bank seats not
intimidating at all right it went worse
the last time so it's fun first of all
thank you all very much for coming and
thanks to the organizers for inviting me
this is my first trip to NBC auslan
although I was act NBC London a little
earlier in the year I've been to offer
before beautiful city you're all very
lucky to live here if you come in the
summer I'm guessing but that's something
else so today I'm going to be talking
about micro services and the inverse
Conway maneuver so this is about using
organizational units within within
companies to reason about software
development software systems and to how
we can use those structures and you
suffer itself as well to reinforce
various key properties that we liked
about software so this is my hypothesis
that software boundaries are isomorphic
with team boundaries in the limit of
Conway's law and therefore you can use
organizational boundaries to reason
about cohesion of services coupling of
services which testing types to apply to
services and which integration patterns
we should use between services it's in
very formal language because I did this
at the ICW II conference in lagano a
little while back and there's nothing
more scary than a roomful of academic
computer scientists to make you up your
academic language game so so this is my
this is my hypothesis and we'll be
exploring this through some examples
throughout the rest of this talk first
of all I should probably introduce
myself so I work for a company called
for Twix we are a consultancy so
therefore we all look like this hell
yeah we are consultants seriously folks
so we're about 4,000 or so now around
the world offices all over the place
in general what we do for our clients is
build we solve hard problems for them
generally through building bespoke
software although more and more now we
do we react as advisors to boards around
things such as lean product engineering
portfolio management finance these sorts
of things so a bit more management
consultancy but all bedded in our roots
of bespoke software development if
you've come across as before if you
haven't rather come across us you may
have come across some of our
publications or some of the publications
that people who have or currently work
for us produced and some of the open
source software projects that have come
from our people so things like cruise
control that was the first ever
continuous integration server
selenium-webdriver that people container
the first ioc container
go which is a continuous delivery server
and books refactoring by our chief
scientist continuous delivery and more
recently before sam left to become an
independent some humans building Micra
services they're all very good fantastic
read them all buy them all I'm sure
those authors will be very happy back to
me so I've been at thought it's about 12
years now before that I spent another 10
or so doing other jobs in industry I
started off as a network engineer so you
know carrying cat cat 5 crimpers in my
back pocket wearing a tie at a retailer
and big stacks of Microsoft Office a
three and a half inch this that you sit
there for hours then Isis I got into
actually database development start as a
database developer for a while on the
Oracle platform then I moved towards
writing software so I going to see those
plus and Java and I guess so I'm
probably deepest in Java over the years
but I've also spent quite a lot of time
on the.net platform so c-sharp a couple
years ago in the project one of the
projects I'll talk about was a c-sharp
project I'm probably best known for this
so I had the dubious honour of defining
what micro services are along with
Martin Fowler there's some debate about
the name I think probably was Fred
George if you know him he probably
coined the phrase first we certainly
defined this term for which you can all
thank me later
the joke is that we've accidentally
created a multi-billion dollar industry
but we've seen none of it
so just saying but for all of you out
there selling micro services yeah just
saying alright enough of the
introductions so I'm going to do now is
I'm going to talk talk through what
commas law is all about I'm going to
introduce you to Mel Conway and then I'm
going to look at some of the issues that
we've seen in organizations that I see
and I see how many organizations I've
worked in with or works but probably in
the hundreds now either as an advisor or
writing career as an architect or
whatever it is and so I'm going to put
together a few examples of some of the
things I've seen and see if they
resonate and then we'll explore some
alternate options and to structuring
ourselves to deliver software in
accordance maybe with commas law so this
is what this is a excerpt from the
original paper that Melvin calmly wrote
so organizations which design systems
are constrained to produce designs which
are copies of the communication
structures of those organizations now in
essence this is a information theory
thing what Melvin Conway is saying is
the way we build our software is defined
by how we communicate with people on our
teams are extremely to our teams and
even if we design software differently
to have that structure looks over time
our software will look like that
structure and go back in whatever it was
60 68 it is isn't it 1968 this paper was
rejected by the Harvard Business Review
and saracen I guess went off people's
radar a bit and that's it our very
difficult here because I can't actually
see Melvin Conway's not in the room as
he if anyone is sitting next to Melvin
Conway can you just shout no good
because I've got this theory right that
Mel Conway is this guy
he's essentially sitting on the balcony
like one of the Muppets laughing at us
he's a hahahaha I told them this in 1968
look at them down there that build
contact carry on building this off flow
and their big project teams verily over
the wall ha ha ha
that's basically what Melvin Melvin
common with me in my mind they know if
he actually is or not maybe we'll find
out as I say his original paper was was
was rejected by HBR and then some years
later there was a joint research project
done by them and MIT on on Conway's law
so they took another look at it to see
if it was valid or not the huge amount
of research looked at thousands of
projects around the world open source
close source different types of systems
and this is what they came up with this
is another exit the paper was with a
very snappy title exploring the duality
between products and organizational
architectures a test of the mirroring
hypothesis and what they came up with is
highlighted tightly coupled
organizations even if not an explicit
choice the design naturally becomes
tightly coupled and in loosely coupled
organizations architecture that evolves
is more modular over time so this is
what they found
which backed up the original research at
mal Conway is the original hypothesis so
just to reiterate that tightly coupled
organizations your design will become
more tightly coupled loosely coupled
organizations architecture will become
more modular around those coupling
points and yeah this is kind of ok
because some of the properties we want
from our software are related to things
like cohesion and coupling all right we
want certain parts of our system to meet
couples to one another and we want other
parts of our systems to not be coupled
to one another we want loose coupling
between components all right but you
know with any components coupling is ok
you know if you're talking to a database
or if you need data from somewhere a
database or s3 or wherever it is some
file system somewhere
you better be coupled to the database
otherwise how you're going to get the
data and similarly cohesion we want
parts of our software to be easy we want
things to be cohesive around business
boundaries things that are stable right
so he once he
these components are loosely coupled
from one another this is what Melvin
Conway's saying well this is what this
research supports is if we organize
ourselves in such a way that their teams
building those components are loosely
coupled from one another and that's
cohesive then that's what we'll get
we'll get software that's like that and
that seems like a positive thing so back
to micro-services dakka dakka dakka
micro-services this is the list of
characteristics that Martin and I called
out now most people will concentrate
most organizations I've met concentrate
on the first one so componentization via
services but in our mind that wasn't
there was only one part of what made up
the success of the companies that were
using micro services that we that we
talked about in the paper so the Netflix
is you know the Guardian newspapers the
compeller markets these organizations it
wasn't just the fact that they have
small so that they wasn't just having
small services that was that was the
thing the other things our eyes
important and fundamentally there's this
idea of organizing around business
capability what is a business capability
we'll come to that in a sec so I'm going
to be talking for the rest of this
around these two characteristics
organized around business capabilities
and the idea of running long lived
product product teams rather than
short-lived project teams I'm going to
cut dead a question I normally get some
time during a micro service talk which
is how big is a micro service so the
definition of the size of a micro
services is it has to be small enough to
fit in my head that is a thing if it's
called Boise's law martin fowler jokes
that I should cut my head off and stick
it in Paris as an SI unit so that people
can measure how big micro services are
if you've not it's quite a big hedge
it's not huge that's kind of okay I'm
sure there are other bigger heads out
there this comes from a restatement of
the single responsibility principle I
was on a project with some with Dan
North actions and others and we should
have postulated that if you hold your
head up to a screen that should be the
maximum size of a class length of a
class in a reasonable point font right
right it's any big of a match too big
it's doing too much there's another kind
of serious point which is actually if
it's bigger than bigger than I can
understand in one go it doesn't fit in
my head it's probably doing too many
things has too many responsibilities and
that's the same with micro services
micro services should fit in my head a
class or function should fit in my head
and as you chunk up to a module to fit
in my head it should have a single
responsibility a micro service should
have a single responsibility groups of
micro services grouped together into
bounded contacts should have single
responsibilities they should be one
thing I should be able to understand
them so that's how big a micro service
should be another way of looking at this
if you're selling them which now our
sales guys like to do is you know like a
normal service is this big all right
well a micro service the laughing okay
cool now I'm done okay moving on par ha
all that so micro services should be
cheap to replace quick to scale
resilient and to quote Adrian Cockcroft
formerly Netflix formerly Battery
Ventures and now VP engineering at AWS
they should allow you to go as fast as
possible that is the goal when we're
building services composed of micro
services you want to be able to go as
fast as possible I mentioned I'm going
to talk through some of my experiences
in the wider world so I I'm going to
sort of bring them all together into a
set of examples of things I've seen so a
typical company alright got lots of
examples of this I'm hopefully this will
resonate most organizations generally
because MBAs have succumbed to this idea
of splitting between your business
functions and your IT functions now your
IT functions are 10 tends to be
separated out into you know kind of your
development teams your testing teams
your architects maybe a PMO your project
managers and then your business on the
other side and commercial colleagues
they tend to be organized around fairly
sensible things those tend to be
organized the area in retail you'll have
groups of buyers you have buyers for
general merchandising the lab groups of
buyers for women's women's fashion the
bias or men's fashion so that on the
business side of things we organize
commercial side of things we tend to
organize our rounds long lived business
capabilities meanwhile in IT because IT
the call center often we organize
differently right we say will group all
our functions together so we'll have
DBAs will have ops
infrastructure people they'll have
developers testers etc so we create
artificially these silos because we
believe it's quote more cost efficient
and that's fine if you're on the side of
the scale where you need desperately
cost efficiency all right now my
experience over the last couple of years
is that most sectors most verticals are
undergoing radical change radical change
yeah and all verticals that I thought
we're going to be immune from this some
years ago you know so you're insurers
you retail banking and so on are
actually undergoing change faster than
than retail from in some cases most
verticals are undergoing radical change
and the only way really like to avoid
being wiped out in many cases is to
change the focus of what we do to make
this more able to go to keep up with
startups that are disrupting disrupting
our businesses and the way to do that is
to flip from this idea of cost
efficiency so we favor centralization we
favor the idea that we're going to be
saving money towards flow efficiency or
value efficiency so our the ability to
quickly or more quickly deliver value
and quickly pivot over time so that's
what I think is driving many
organizations to look at this sort of
different ways of organizing themselves
I'll show you why I think flow
efficiency implies that we change the
way we structure our organizations so if
you imagine that this is a traditional
organization where groups into our
traditional silos we've got offices with
architects and so on you can visualize
this using something
called a it's called a I'm completely
forgot what it's called it's called a
grasp of some description all right so
you can essentially you can group these
around the outside of this circle and
you can measure and monitor the
dependencies between these teams right
where work goes when it hits these teams
it comes up in a sec I'm sure this is
actually not teams this is an example of
doing this for the spring code base
where you can say each module depends on
another module this module depends on
another module but you can do exactly
the same thing for organizations and how
work flows around inside organizations
so dependencies of teams on other teams
and what you find in traditional
organizations is you get lots of lines
right you get lots of these lots of
these cords are they called chord
diagrams that's it lots of these cords
reaching out between these different
teams so you can imagine in this sort of
organization how work gets done what the
flow might look like if you have someone
in sales so tight but there's also idea
for a feature alright we totally need to
build this or don't need to add this
into our product and so they talk to
someone in the project management office
and the project management office says
cool we'll get a project team together
to sort that out for you all right by
the way it's going to take us three
months to get that team together come
back in three months like well okay fair
enough three months so the project
management team gets the team together
first of all they are the architects hey
can you design this thing for us the
architects say of course we can design
this thing and the designer thing then
the architects hand it over to the
development teams and the development
team say are you having a laugh laws of
physics and handed straight back to the
architects the architects do a bit more
work and it back to the development
teams who do some development it then
gets handed over the testing testing
pesters do some testing that's kind of
what testers do and then throw it back
because bugs defects and you never
thought about this and the users don't
like it anyway it goes back and forth
back and forth until eventually it goes
into the queue to be deployed into
production and that keyrings in our
release train that takes 26 weeks so you
wait another 26 weeks at which point
you've lost all that money that you
could have had if you optimize your
process that's kind of what these cores
represent work being handed off between
different groups in
organization this is an example of a
sort of traditional model of flow in an
organization I was I've visited some
using and I predict eight years ago and
lots and lots and lots and lots of lines
everywhere lots of documents being being
produced some full requirements
documents there's a little bit of I can
point without falling off roof there
that's coding that's where the works
happening hand offs handles handles I
like this phrase it's Dan North's phrase
I believe he says the first thing you
should do when you're in an organization
is you should understand the system of
work that you're in you should be able
to understand how work is flowing with
them around your organization's so he's
got this this this manager I think it's
like visualize first you visualize turn
the lights on then you stabilize because
when you turn the lights on you realize
you're surrounded by tigers so then you
need to work out what to do the tigers
essentially and then you then afterwards
you optimize so the first thing is this
idea of visualizing and I kind of like
this tool for the value stream map for
visualizing work and this is another
real example of a value stream map names
remove to protect some redacted to
protect the innocent so if you haven't
come across the value stream maps before
the the steps represent value-adding
activities maybe I'm developing
something I'm designing something I'm
testing something and the gaps represent
wait times so and it's essentially you
get this from measuring a piece of work
and how it flows through the different
stages in your process so as we can see
from this one value-adding activity this
is actually from a real client so the
middle one was development so developer
writing write is encoded the first one
was designed so some architects
designing what the developer was going
to do and the last bit was testing so of
that you've got five days of
value-adding activity right for a single
piece of work but then you've got this
42 days where the work is sitting
somewhere waiting for work to be done on
it
so even though only five days of work
needs to be done in this case all right
and say this piece of work was going to
make you $10,000 a day all right
even though only five days of work needs
to be doing needs to be done you act you
end up actually with 47 days worth of of
delay essentially 42 days worth of the
light so you can imagine you've lost all
of that money right you could have been
making 10 grand a day for 42 days here
if you just optimize what you're doing
and I kind of think of it like the bit
bit like this right it's kind of snakes
and ladders right you move up from the
knees to fall back down because you're
handing over between different groups so
coming back to our chord diagram and
plot the different relationships between
teams and how work moves there's an
interesting thing here because in
general each one of these cords
represents a queue in your system but
fuels in computer science queue except
it's full of work not electrons I guess
it's sort of work each of these handoffs
represents work moving from one teaming
going into another team's queue in
general and this is actually why things
like self service from Azul or Amazon or
any of these that any of the big
infrastructure as a service platforms is
such a big deal because there is no
queue you don't have to ask someone from
Microsoft to start you a VM alright you
don't raise a ticket for them to start
at the end all right you just do it
yourself via an API so self-service you
want to avoid queues if we can and the
reason we want to avoid Keynes is and
this is if you haven't come across Don
Ryerson's book it's messy incredibly
dense packed with economic theory but it
just blew my mind when I read it the
principles of product development flow
and in that he talks of the effect of
queues on systems of work and in
computer science and he says the effect
of keys queues creates a number of
things they increase your cycle time so
that they increase the amount of time it
takes for work to get through that value
stream mapping into production earning
money obviously you know if you've got a
big queue and a piece of work comes in
it's got a wait until all the other
things are processed in the key until
the work gets done
it also increases your risk the more
keys you have and this is not so obvious
but essentially the longer a piece of
works it's going through these queues
right the longer the transit time
through the entire system things can
change now if you've got 26 week wait in
order to get into production and after
week 12 your competitor has completely
blown that that that the opportunity you
are looking to take advantage of a way
you've not only lost all the effort
you've put in but you've lost more so
it's increased increases your risk
you also get more variability so you
know queues use fluctuate in depth all
right so you don't really understand how
long things are going to take with any
great accuracy it increased costs and
this is again counterintuitive increased
increased cost because you get more
overhead alright so think about
governance and the know if anyone in the
room has got a sort of young political
sort of architecture review boards or
architecture governance boards these
sorts of things and they tend to meet
every four weeks and you know changes
requests to do stuff gets built up for
four weeks waiting for the architecture
Review Board to meet and the
Architectural Review Board of Review
four weeks worth of stuff all right
which takes a long time the more stuff
you actually have to do and look at like
the more projects you get the higher
project overhead you get so they create
they create more overhead they also
decrease policy because you get you have
to wait longer for feedback and you get
higher quality if you get faster
feedback and you get less motivated
people
all right I'm much more motivated if I
get to see the results of my effort
tomorrow or the end of the week then if
it's going to be twenty six weeks later
so here's a kind of print pernicious and
I know a little bit more deeply into
this idea of curing for a moment so we
kind of identify a number of rather lean
people have identified a number of types
of wasting systems huge are kind of one
of them there are another kind of
failure pernicious set of set of
activities that all things that
that reduce our ability to improve flow
the first is the top one so this is
scheduling having to wait on someone so
I mentioned this with with the
architecture review boards that sort of
thing you have to wait for four weeks to
get your change approved before you can
do something right
scheduling release trains or another one
of these we have to wait for the next
release cycle to come around that's
because on a scheduled basis the next
one is queues themselves you've got
different types of cues
this animal is from dr. Dolittle it's
called a push me pull you if you come
across these before so this is a sort of
cyclical queue where a developer
finishes a piece of work puts it into
the queue for the QA is to have a look
at these create the QA s have a look at
it say it's broken and have to put it
back into the key to the developers to
look at get these cycles in the
organization and the third one is
synchronization so I have to wait on
another team before I can carry on lots
of different types of waste that you can
identify pretty easily just by
visualizing your systems using value
stream maps so Peter Drucker you have to
have a management consultancy quote
Peter Drucker says there's nothing so
efficient so useless as doing really
efficiently something that should not be
done at all so stuff I've seen when I
define some terms first the first one is
what is your capability I talked about
capabilities a lot so a capability is a
combination of processes people systems
that provide value to a business in some
way and to customers right and those
customers could be internally to be
external all right capability it's
essentially two stable parts of your
business the water the business not the
how business processes clean change and
can and should change right but the fact
that but the capabilities themselves
should be stable I like to use an
example for my current clients who's a
retailer right so they make stuff they
make stuff in a factory and in order to
make those things in a factory they need
to order raw materials from their
suppliers our ordering one with raw
materials is a capability unless they
fish at the factory and stop and decide
to stop making things they're always
going to have to be ordering stuff
ordering more materials how they order
them
that might change how they delivered
that might change the suppliers they use
that might change but the fact that they
need to order things is stable it's a
stable part of the business and that's
our capabilities so I don't see quite a
lot is the capabilities are built by
large teams even if you go down this
route this is an example from a for
another another one of our clients and
they got them they got the idea that we
should organize our own capabilities but
things like it's slightly wrong so they
had great we've got teams in India team
in London team in India is going to be
building 171 capability in this case it
was selling stuff on the internet and in
London we're going to build the
delivering stuff capability so we can
actually ship the things that we are
selling which is fine they have big
groups of people working on this and
they were using projects so whenever
whatever anything needs to be done the
PMO would have signs from developers to
it they'd say okay Singh you've got
eight weeks to work on that spend eight
weeks working on it and then they pop
off they were using this idea of project
thinking short lived projects rather
than product thinking and so you know
the project team the developers would
pop into the codebase when they pop out
again when the project finished they pop
it into another part of the codebase the
next time they were asked to look at it
and they pop into another part of the
codebase and I don't know if you like me
I mean I'm a software developer at heart
I'm fundamentally lazy right it's why we
automate things that we whenever we can
write because we're fundamentally lazy
and that includes often finding
shortcuts or the the easiest possible
path to actually implement a thing and
so the end result with these teams
popping into the codebase project
finishes popping out popping into the
different part the codebase was that
they have these capability composed of a
massively tangled set of small services
incredibly tangled so much so that you
have to deploy the whole thing at once
and this is like 50 things and in any
time you made a change the one you had
to make a change that really the change
rippled across all the others because
they were short-lived project project
teams this is another example you know
this kind of is a another anti-pattern
slide they're six weeks of hardening
because I make a change on a deck name
how it's going to reply to the rest of
the the organization all right so here
you might within Sprint's or iterations
but then fundamentally you've got six
week
eight this queue backs up of stuff that
needs to get deployed we need to
regression test it we need to do
integration testing on all of it
performance testing risk management
theater how did it called there's
another one which is quite pernicious
which is having to fan in to test
everything together so we've got lovely
build pipelines for each of our
different services and systems but we
have to fan in and test everything in an
integration environment and the problem
with this of course is that the
integration environment gets contested
changes overwrite one another all you
have to issue a lock so one team can't
deploy because they're waiting on
another team synchronization again
another form of weights waist weight
time since I do have fan into end-to-end
tests and similarly here this idea of
the having to deploy everything all at
once for so couple that we're deploying
our systems everything together so I
think Sam called it this the distributed
monolith beware the distributed monolith
you're not going as fast as possible in
this case this is simply a recipe for
disaster handful people to just be
having a nervous breakdown
coming back - I was with Conway Conway's
there he's K I told you this in 1968 oh
dear so what might good look like does
anyone know what this is I can't see
anyone so shout if you do someone said
Ebola in the front Mary I'm always
terrified when people start saying
things in the front row do they're
always the hardest questions that come
from the front road so that doesn't bode
well for the end of this talk so yes
this is the Ebola virus and this is a
nurse called Pauline Cather key it was
one of three British citizens who went
over to Africa to help out with the
relief efforts over there and to treat
people whose company who caught Ebola
she was one of the three who who who
called herself so she spent a long time
in hospital she recovered fortunately
they also found a lot of interesting
stuff out about Ebola from her things
like even though you think you've got
rid of it it still lives in your
eyeballs and things which you cannot
detect very nasty anyway she was at to
this place called the roll free so that
the roll free is the
of UK's sort of I guess center of
excellence for treating infectious
diseases it's based in London Chien the
other two were also very in crazy and
we'll Puli
they were Armed Forces medics and
they're on detachment so I was thinking
about this right thinking how when
someone captures an infectious disease
as like awful as a bola that moves so as
quickly as a bola in terms of killing
you essentially how the medics actually
treat this because all through these
these people survive how do they go
about treating them and I was thinking
about the capabilities that the Royal
Free house as a hospital it's got a ton
of the rice got facilities pharmacies
it's got the war just got infectious
diseases labs in all these different
capabilities and thinking if they
organize like we do in Ooty there would
be all these handoffs between people
right you'd have to be waiting on
recessed results and if I have to wait
two days for a blood test to come back
when you could be dead by then and
that's kind of not so cool and I came
back to you I first came across this
idea from Michael Nygaard so this is
something called the OODA loop this is
something that the Armed Forces used
specifically the Air Force initially to
to work out and actually direct how they
build these days and things like fighter
jets but essentially what the usual
interloop says is in a dogfight the
pilots who can navigate to this loop
observe orient decide and act fastest
will be the winner in a dogfight and so
as I say this is influence military
doctrine it's certainly well yeah the
Western Western Mills redocking
doctrine for decades now it's like all
Colonel drawn boys you came up with it
and so much so that the US Air Force
moved away from twin-engine planes
towards single-engine more nimble planes
direct result of the you deliver I was
thinking how do you navigate the other
loop quickly when you're treating Ebola
all right that's what they need to be
doing they need to be quickly observing
working out what's wrong deciding in
acting so I read a newspaper article is
interesting in the newspaper article I
have a list of all the people that are
involved in a bowl of hair in this
hospital and this is that list you don't
need to read them
I've stars the clinicians
these are the doctors and nurses who are
directly caring for the three
individuals and for Pauline kappa key
and these stars indicates people who are
not in clinical care so these are
facilities people porters these are
pharmacists these are cleaners these are
well there's actually who else have we
got in here we've got in there people
like engineering people support services
security tons of people all involved
right and actually this is this is a
pretty common thing where you've got
actually the US military I think it's
for every in the Marine Corps for every
one person on the frontline they're
supported by ten ten behind them if you
like so you've got like a third of the
people involved in in care for Ebola are
actually clinicians but then two-thirds
of these this big team are supporting
them and this is what dr. Michael Jacobs
who's leading the care said if you
imagine all the functions a hospital has
to have not only bla they all have to be
involved they all have to be specially
trained etc so you look at the Royal
Free Hospital capabilities they don't
look like this at all when they're
treating infectious diseases they look
like this right they get all the people
they need in one place to navigate that
user loop to provide very quick
decision-making to care for those
patients and this looks fairly fairly
similar to stuff we've been talking
about the years right so this looks like
cross-functional teams with a single
purpose focused entirely on patient
outcome and this is what we've been
talking about on XP for decades now it's
kind of interesting is another data
point back on the waiting waiting or
passing work between teams problem so
this is from some research that for
weeks there's over a number of years and
a project in Australia and they sort of
measured cycle time for work items and
they found over a number of over a
period of time stories user stories work
items leaving a team they cycled an
order of magnitude slower than work that
could be done within your team every
time we leave your team you're blowing
your cycle time by an order of magnitude
we should really think about that right
there's a lot quite quite damaging to
our ability to get stuff done so that's
one example this is true for trauma
teams in hospitals my sister's an
emergency nurse you know when when a
serious seriously ended trauma patient
comes in
they don't yeah it's not like you that
that patient has to be cycled around
different units in the hospital they'll
swarm all the consultants the
specialists swarm to that trauma trauma
patient it's also true in Formula One
teams it's not just the driver aren't on
race day or even on training days and
test days it's all of them they're right
all the engineers that supporting them
and also in the military so rhenium
Westley military doctoring now a
reinforced battle group is a
cross-functional cross-functional group
composed of a number of stable
capabilities all together in one place
so you don't get artillery and infantry
you get combined armor sources with all
of them together and they've learned
this the hard way they've learned that
this is the best way to organize kids
James what about a software existence
proof so looking at looking at our
capabilities again so sorry looking at
our functional silos within our
organization again what does it look
like if we create cross-functional teams
organized around capabilities lines of
business so I was at the insurance
company actually with said laminate
makers in the room but I was there for a
while with him it was great fun he's you
ever get a chance to pair with him it's
awesome he's the most flamboyant pair
program ever ever come across wall AK
etcetera and in this insurance company
we were helping them break up a big
monolithic application so they had one
application don't know applications we'd
be done actually sort of you're a sequel
server database that has been ported
from db2 and kits could you not so they
have this kind of monolithic application
big sequel server database and all the
products they were selling insurance
products we're in this were inside this
one application all the logic to sell
them all the web pages etc now this
insurance companies called compare the
market they don't mind me talking about
them and so what we advise them to do
over a period of time is to say you've
got
or you've got you've got your big
monolithic thing why don't we separate
out by by your products right
these are fatal things are you're always
going to be selling your these products
have insurance all your going to sell
them or not
which case you can delete them but
organize around your product lines and
take the code outside of the model if
and have these separate systems subtle
it is it created these different lines
of business based around their products
so they created like a home insurance
line a business of motor insurance and
life insurance and so on and this is
very similar to work we've done I think
there might even be something in a room
in the room who is on this other project
at a real estate company in Australia so
he's smiling down the front so this idea
that we separate these things out into
stable units organizational units and
then organize your teams around them it
comes directly back to Conway's law
because what we're going to get is a
reinforcement of those team boundaries
and of course you have some
cross-cutting concerns as well so you
have these cross cross-functional teams
delivering lines of business and in this
case anything that any information needs
come out of those teams in terms of data
was done asynchronously by a publishing
of events and these dotted lines show
that actually Conway's law is going to
reinforce the decoupling of these teams
and enforce the cohesion of these teams
and therefore the software that they're
creating
so cross-functional teams organized
around lines of business nice yeah
and so as a result of that if you go
back to our chord diagram we can see
that we've actually sort of reduced the
number of these chords we haven't got so
many handles so we've immediately
improved the cycle time this is actually
max it's economics right this will make
you money just doing this more money but
I think nothing Conway right is still up
there crap because we've still got a ton
of these handles they don't have the
ability those teams to get with work
we've done independently they're still
relying on lots of outside functions in
the business that's cool because we can
play our our DevOps jazz humble card
right mmm
DevOps dr. Gough a docker are they
synonyms yeah I don't know well build it
right now it's what I'm talking about so
at the moment we've got cross-functional
teams but we've still often the
operations that are sitting outside so
great our cross-functional teams we'll
get all that stuff done and then they
hand it over to another part of the
organization who will optimize for
stability and they'll the Razr ticket to
say to need to deploy my software and
then I'll have to wait until operations
who are really busy and I'm not being
down in operations at all right
operations are really busy usually right
so they get a work item in their queue
they say ok we'll wait until we've got
some time and then we'll deploy or
software why can't we bring operations
with us on this Jenny and say actually
we'll build it run it so we're going to
remove more of these cords from our
diagram more hues and improve our
ability to get stuff done again
whoo so each of these capabilities can
be tested as applied independently etc
and suddenly we've got that many queues
rather than that many queues and again
every time won't lose your team ordered
magnitude decrease in cycle time can we
go further right this is my next hi this
is the next part so if you imagine all
the functions a hospital has to have
they all have to be involved
didn't they accept
Pharmacy and physical estate all the
functions have to be involved at the
moment at the moment we've got this
situation where our commercial
colleagues are still nowhere to be seen
in terms of our things our
cross-functional build it run it style
teams so what would it look like if we
sort of subsumes our businesses inside
our development teams or to put it
another way what would it look like if
either velman teams sat with our
business users those cross-functional
teams building stuff for our business
people why can't they just go and sit
with our business people we don't have
IT anymore then whoa all right that
sounds pretty crazy that sounds pretty
crazy I spent five years or so in
investment banks it's exactly what you
do investment bank front office
development you sit with your provincial
college you sit with the traders on
trading desks that's how I bees make
money if they know the best way to get
stuff into production quickly the best
way to deliver value most efficiently to
concentrate on improving flow is to have
people sitting next to one another
talking just deliver them right still
know it sounds crazy it's certainly not
taught on an MBA course that I'm aware
of and actually makes sense and it is
out there in the real world and you know
you might have seen this called other
names you might have seen this from
Spotify I'm sure you have this is a
similar idea you have this idea of
squads chapters guilds squads which I
made many of which make up a tribe etc
etc so the model we've been having quite
a lot of successes this is only one
model is like a concentric if you like
model of organizational design rather
than a separate separated model of
business or commercial colleagues and IT
IT cost centre commercial making money
and so instead of organising like that
why don't we organize around the stable
elements of our business and actually
have our development teams working in
those stable elements with our
commercial colleagues so if I'm a buyer
in a retailer
there's some developers with me who I
can ask hey this thing is causing me
problems can you just do something about
it and we can build a little thing a
little product that will help that
person so it's this idea of market
segments or organization at the outside
then market segments and side your value
streams within that and the idea of
teams within that with each team owning
one or more services go back to software
and how big should these units be
depends on the size of your company if
you're a 10 person startup you'll
probably have one team of 10 people
right but if you're then a company of
retail and working with at the moment is
many many thousands of people you need
some way to subdivide yourself and so
this is probably familiar this is sort
of XP size I would favor 10 to 12 rather
than 20 but you know so XP size team's
10 to 12 people cross-functional
organized in units of around 160 to 200
so this is done this is done bars number
right the number of social connections
you can hold in your head at any one
point distant if you're organized into
units like this it means when I see Kate
in the corridor I can say hey Kate how
the kids how was golf on the weekend
rather than Kate being a completely
faceless entity or I don't know anything
about and someone I'll come back to in
the end about four works and our
experience most is actually have thought
which stuff is I'll built most of our
offices so we tend to get to a certain
number of people around the bags that's
for the number and then we start another
office in a different part of the world
or a different part of that country
that's why we've got an office in
Manchester and one in London Dunbar's
number the easier to maintain
communities if you organised in units of
that size it's another interesting piece
of research that martin fowler showed me
some years ago actually now and it's
from this book called managing the flow
of Technology by Thomas Allen back in
1977 but none of this is new all right
nothing this is new so Thomas Allen back
in central Evan he did a ton of research
into how work works in R&amp;amp;D departments
how are enriched decision development
departments and big organizations how
they were structured and how
communication works
and he found something interesting see
he found this this is the key result so
communication frequency varies with the
inverse square of distance so we've got
a graph here showing the probability of
me having a weekly interaction with
someone on one axis Y and the distance
they are away from me on the x-axis so
if someone's more than about 8 or 10
meters away maybe
yeah and that includes like flights of
stairs that counts as what's included
I'm never going to have a set like a
serendipitous conversation with them
it's just not going to happen right
these publicist probability shows there
so if you want to sit people if you want
people to talk to another sitting close
together if you actually got people you
don't like each other sit them further
away from each other right the
invocation of this is you've got a
library don't put it where everyone's
walking through it because people will
be chatting all the time
but again this is how Bullock's have
sort of built our offices originally
taking into account
Dumbo's number Thomas Allen's research
so collocates
as much as possible take advantage of
serendipitous conversations our slack is
great because slack and head chat and
the others you know they reduce this
they reduce the effect of this but they
can't solve for it right because it's
serendipitous things that you can't just
have on slack so this is my thesis as
you chunk up from this team to value
stream to market segments to your
organization
you've got Conway's law to help Allen's
research about distance from people in
communication and then Dunbar's number
in terms of organizational units and
these things will help you preserve low
coupling and high cohesion of your teams
and therefore your software those teams
are building because they are isomorphic
with one another and also remember
whenever work is your team you incur
costs in the home straight now I might
need a better name than this haha this
is the chunking up from micro services
to teams to value streams to market
segments to organizations practice onion
as stated already right software systems
are isomorphic with team boundaries
if that's the case we should be able to
use either to reason about the other
right we should be able to use team
boundaries and organizational boundaries
to reason about the other so you can use
organizational boundaries to reason
about the cohesion of the software
composite the teams within those
boundaries of the part building the
coupling of services between them and
which tests and types to apply and
integration patterns to use I leave you
with some examples so between
organizations or between large chunks of
your organization there are a set of
patterns a set of patterns that allow
you to evolve software that you might or
might not want to apply because applying
these things cost money right someone
has to do it teams have to do it so an
example here is between organizations or
between chunks and between the software
therefore we should probably be thinking
about using semantic versioning
so it's Magna queries they have a
well-known method but which you can
version api's but you probably don't
want to do contract tests cross or
graduate these sort of organizational
boundaries so when I say contract tests
I mean explicitly consumer during
contracts this is where me as a consumer
of another service I write an executable
test and hand it to that service
provider so they can execute them so
that when they make a change they know
whether they've broken my usage of them
or not so contract testing is consuming
different contracts now if I'm producing
the Google Maps API at Google I'm
offering that it's externalize to
everyone
I don't want every single person who
uses the Google Maps API to write a
contract test and hand it to me
describing how they use it that just
makes no sense all right what am I going
to run it on I suppose you could run it
on Google but you hate between smaller
units you might make different decisions
there right so between smaller units you
might say I'll be to use semantic
versioning but I'll also write contract
tests so that I know when sums when what
someone using me has been broken as I'm
developing
but I might also want to say we'll all
implement the tolerant reader patterns
this is the and implementation if you
like apostle's law so I accept I don't
break on unexpected input essentially
and I only bind only bind to exactly
what I need a principle of robustness
similarly within between teams within a
within a single value string but within
your team maybe you make different
decisions again so within your team
maybe you rely on conversational change
you decide not to make the investment in
contract testing I'm sitting next to
this person if I'm going to make a
change to my API my service I can just
say hey Bob I don't make a change please
just update your stuff
conversational change but I should still
probably implement tolerant reader
because well if you don't you're an
idiot sorry if I called everyone in the
room an idiot this sounds totally crazy
right no IT we're just going to have
developers sit with our business people
we're going to organize in these
concentric rings surely this doesn't
happen we have a number of existence
proofs that this works what I find quite
powerful to talk about is my own
experience inside the works because five
or six years ago four works was
organized classically around technical
operations tech ops and then I'll
college along a commercial teams demand
finance and the underlying systems
architecture was an absolute mess we had
like PeopleSoft Lotus Notes and up to
someone that heard that ESP czar a bad
idea which is good so they'd implemented
one in a database and called it the
middleware database not so good it was a
complete mess and some years ago now
five or six years ago we decided that we
would move towards this model that I've
been describing towards our organization
around stable business functions moving
our development teams into those
business functions so that they could
deliver value more value more quickly so
that's what we did this is a very busy
diagram I apologize but it's from a
presentation one of my colleagues did
recently about how we're organized we
have business functions so we have a
team that supports our sales teams IT
team as part of sales
the volunteer as part of sales we have a
development team as part of our staffing
functions big deal from for a
professional services company who's
going to go on to which project you have
other teams to the other business
functions and then we have other product
teams like site reliability sort of
product teams providing services to
those teams as well so there are other
existence proofs compared the market is
one actually the government digital
service in the UK is another one they
produce you girls they provide our
payment gateway for government they
provide a bunch of other things identity
services so there are existence proofs
of this working and also every single
trading desk every single bank that
you'll ever visit I'm not saying it's
the only way of doing this I should
point that out so force to finish
successfully adopting this stuff micro
services I would argue requires much
more than just componentization it
requires you to think really hard about
your organization or relational
structure and how your teams are working
there's this thing I like called the
inverse Conway maneuver which is in the
title of this this is from a colleague
Evan bot Jenny says one of the ways you
can go about doing about making
architectural changes is to first design
the organization you want based around
your business needs and then your
architecture over time will follow
kicking and screaming and some things to
look out for so I think Conway's law
sends us signals that we can listen for
so one thing would be you're
consistently having to order work across
different teams in an agile sense if
you're splitting bits of work and having
to hand them off between teams you have
to move people around a lot all right
Conway's will send in your signal if you
happen to deploy everything together -
fine you're probably - couples and if
you have to span in friend to end
testing again I think that's common law
and finally high cost associated with
work leaving your teams so if you're
raising tickets all the time with a
platform team that's going to impede
your progress it's going to slow you
down
it had enough work to other departments
order of magnitude increase in cycle
time and if you're constantly having to
start and stop projects that's another
high cost finally finally the last word
so every no I did this talk this is
pretty much tears old man is talk I got
an email after I presented it a few
times this is not the email says it says
hello James I've recently come across
your presentation go faster than your
competitors that was the original tile
and how I finally stopped worrying and
learned to love Conway's law no I am NOT
sitting in the balcony laughing I'm
sitting at my computer learning from you
and your depiction of me as a Muppets
figure helps to keep me humble keep up
the good work
regards my best Mel so I have his
official blessing thank you very much I
think we have some time for questions
I'm not sure which says a couple of
minutes on this I might be wrong see
front row is always the first I actually
have two questions if that's all right
firstly this subdivision exercise if if
tongue progresses and you're
microservice turns into a decimal this
is service and then gets more convoluted
do we apply the subdivision rule and
could you do these things in small teams
that has to spend multiple services so
do you have to constantly reapply the
rule depending on the size of the
software that you're building as
complexity grows as complexity grows so
when I say that teams are synonymous
with well I don't mean like one team has
one micro service like a team should be
allowed to solve it there's a there's a
problem you have to solve we can solve
it any way we like right I might solve
it by creating a number of micro
services that talk to one another and
maybe with an external as the API I
might might solve it with having a
single application that exposures may
get all something like that
all right um so I don't think that
necessarily the
the team size and the software size are
related because you could have one team
looking after three hundreds
micro-services although wouldn't
recommend it as long as they're
organized around stable parts of your
business I think that's kind of okay
that make sense yeah by the way this is
all Eric Adventist focuses or domain
driven design really so I have a
question regarding you know how you
talked about having one team that is
responsible or cross-functional team
that's responsible for one part of one
whole business but let's just say that
in that unnamed real estate company
between this when you workout yeah now
that I didn't work out okay which I'm a
competitor of which doesn't give that
away so what if you are actually that
team which is a smaller portion of a
much bigger monolith where you've got
one island where we're responsible for
one whole product how do you influence
the rest of the monolith to fall in line
and do what you're doing where you have
one subunit that that's performing
really really well how do you affect the
rep the other units within me okay so I
think the question is if you're in a
situation where a part of your
organization is working in this way but
you're running up against some
boundaries and the other part of the
organization in terms of the system or
in terms of ways working I guess how do
you influence that yeah because I'm not
so concerned about the organization of
the micro services because the tendency
is if you don't fix the structure of the
team yeah then the micro services are
never going to pop up or they just
become just macro services yeah okay so
I'm so how'd you hear about sort in that
fact as I've seen it happened a number
of ways mostly though courageous
leadership actually saying this is how
it's going to be and then over time
people move to move towards it it's
really difficult if you've got isolated
pockets doing this stuff I think most
dealers as I've seen have said within
these
boundaries this lot let's change our
ways of working over here kind of thing
any further than that
and my group daily rates are very
reasonable to solve that very specific
problem I think I mean I'm in Australia
in a couple weeks in one question
mentioned a lot about cross-functional
teams to distinguish that between cross
skilled teams cross-functional this is
cross skilled cross skills yes so I
think teams should so what so when I say
cross function what do I mean
essentially I don't mean necessarily
that you've got four developers one QA
and one ba people in a team and we call
that cross-functional with a quote
DevOps and what I mean is you need to
have a representative range of skills
available on that team in order to solve
the problems that you've been given so
some people among several densify
Moore's developers I tend to because I'm
deep in development often development
and software engineering software
engineering I can also play my hand as a
QA every now and again since I'm a
rubbish QA folks I just don't have the
discipline I can also play my hand as an
analyst right these are stories if I
need to so yes does that clarify yeah
okay thank you for it I think we're out
of time so thank you very much for
coming I hope you enjoy the rest of the
conference in the party tonight</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>