<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Something Something Security  - Troy Hunt | Coder Coacher - Coaching Coders</title><meta content="Something Something Security  - Troy Hunt - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Something Something Security  - Troy Hunt</b></h2><h5 class="post__date">2017-04-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gVXEwfH6FLc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're talking about cybersecurity today
and how safe people's password
are what is one of your online passwords
currently it is my dog's name and the
year I graduated from high school all
kind of dogs you have ever 12 happy on
and what's his name Jamison Jamison
and where do you go to school I would
just go back in Greensburg Pennsylvania
what school
I hope field area senior high school Wow
when did you graduate in 2009 okay it's
like my cat's name and then just like a
random number okay and you had this Pat
for a while yeah - my childhood pet Oh
what's her name her name is Jolie Lily
so I got password yours would be Jolie
and then a number like number one like
my birthday
Oh what is it birthday June 12 all right
URI 195 oh great
so Jolie 612 95 got it so you mean to
give my password right now no I cannot
do that but you we all want to know what
it is so we can tell you the strong or
not oh my goodness
let me think okay one is Tel Aviv yeah
four six eight and then Israel it's it's
only three but it's you know it's a for
me it's strong enough Ireland one two
three four Gemma one two three spell GE
mmm so most of them are Italian Oh
beautiful yeah I feel like I got to get
Italian passport my grandma's name what
your grandma's name Maria Maria
so Maria is your password oh yeah right
you know my past me
yeah yeah it's it's easy isn't it
everyone can do this hacking stuff so we
got to do is just ask nicely I like
these two because they're sort of
they're kind of social engineering right
like they don't just go
they give me a password they go how
what's your dog's name how long we had
the dog and they lull them into this
sort of false sense of security which is
kind of funny but there's a lot of
different security stuff I could have
spoken about now sort of thinking about
all the things that I could do and that
there's literally endless material so I
thought what are those I just sort of
picked the best of it and I'll go I'll
talk about something something security
it'll be fine it'll be good so that's
what I thought we do and one of the
places I like to start in talking about
security is talking about the people who
are trying to break into our security
things and I find this kind of
interesting right because everyone has a
perception of what hackers are and who
hackers owned what they do and what they
look like and I thought well what I
probably should do to try and help
everyone visualize is go out and
actually look for some hackers and this
is what you find when you search for
hackers
you'll notice some trends and these are
these are gone many of the stories we
see about cyber security and that the
trends that sort of stand out to me I
mean ok first of all what do we see
what's the commonality but is ok thank
you all right what is what else is
common what is in green screens now
anything with forties and green screens
is probably going to be a hacker mask as
well very good we know that they have
masks too now the media has to use this
sort of imagery in order to convince us
that there are hackers out to get us and
they have to get increasingly creative
about how they represent hackers because
we get acclimatized and they need to
scare us just a little bit more so they
come out with stuff like this this is a
hacker stealing money from a bank he
basically I understand it he walks in
with a bucket of something like I think
they're the doormen cyber pathogens or
something like that walks in with those
walked in with the bucket and he just
chucked them over the floor and I crawl
up the servers and then you you know you
everyone gets
so so this is the way it's being
portrayed and we'll laugh at this but
there's a slightly serious side to it
and that what the press likes to do is
they like to scare us right and this is
about everything in the media like you
look at the headlines they're all
depressing and nasty but you can't kind
of help but read them so I was secure
there they want to scare us it's not
just the press they want to obviously
make an impact the security companies
want to scare us as well because the
more scared you are the more security
 you'll buy from security companies
this is the way it works I'll give you a
perfect example that there's a little
product called Cujo then you'll go to
Cujo no good all right so here's why
Cujo is a little IndieGoGo project and
bhai Derek Cujo is that you buy a Cujo
you put it in your house no more hackers
they're all gone
all you do is you plug it into your
network now Cujo has this video that
explains who you're trying to protect
your things from I'll show you what it
does you may not know it but you've
probably already been here thousands of
actual attacks occurring each day
now how do we know is a hacker buddy and
green-screen very good all right we're
learning so here's the thing though
right he's on the computer here in he's
hacking away and he's got the hoodie in
the green screen and I was watching this
and the first time I saw I thought it's
kind of odd because I got a like a bit
of an idea about what these guys do and
there's some things there that didn't
quite reconcile to me so I assumed in on
the corner of the screen and the guy
looks like he's in a web browser which
to my understanding is not what they
normally do and it involves green
screens and terminals sharp I was thrown
by this but I've got to figure out what
this guy's doing and I worked through
that and I'm going to show you how to do
this in a major friends and family so
what you do is you go over to a website
called hacker typer dotnet they don't
send us before all right awesome so what
you do when you get there is you start
bashing the keyboard like this
and this is literally what is in the
video to scare you so much that you buy
the security ship to keep the hackers
out of your bedroom what they didn't
show though is you can also do this
right when you do this with your friends
and family it's like you're hacking away
again I think I can break into the
Pentagon or something Danner didn't work
all right and then what you do is you
hack a bit more and you might give it
another go you've got to you've got to
kind of convince them that didn't work
and you hack it just a little bit more
yes ran all right that's how it works
that's hacking so this is the way that
these products are being promoted and
sold which probably says something
around the gullibility of your average
consumer but your average consumer is
kind of confused by security as well so
I get that all right now so that's
that's how we sort of perceive hackers
and the way they're being painted but it
it might be interesting to sort of go on
and look at a little bit more serious
hacking and I found something the other
day I was watching a movie found this
little section
all right who's seen this behind is the
Jason gone movie I have seen sequel
before that has corrupted databases I've
written speaker before let's grab the
data I'm not sure that's entirely what
they meant but bare as it made is people
hacking here now once again how do
another hacking green screen very good
all right so they out here hacking
they're breaking into the things and the
thing is though that is sort of implying
that this kind of sequel injection right
so you might be using a sequel injection
attack to get data out of their database
and I thought what we should do is we'll
go through the mechanics of sequin jacks
we'll actually actually learn some stuff
that sort of have some fun and the way I
like to sort of talk about sequel
injection is to start with the blog post
and I start with a blog post written by
someone else now we are going to have a
bit of fun at this person's expense but
let me explain why you will see what's
wrong with this shortly and then you
will see the very polite comment from me
saying just some friendly advice I think
maybe you don't want to do this might be
better to do that it would be really be
useful and everything was ignored like
just got no interest whatsoever and you
will see the other comments after that
from the people who have been taking
this code and put it in the systems that
you put your valuable things in so this
is going to teach us a bunch of things
let's gonna have a look at this this is
about how to send a forgot password link
on email for reset in asp.net c-sharp
kind of wordy but you get the idea now
let's scroll down a little bit and we'll
stop summer and we'll just just sort of
get some audience opinions about how we
feel about some of this let's not have
any opinions about how we feel about web
forms we might just skip past that it's
got to here how do we feel about we feel
about this bit what what that we like I
type see Rocklin what kind of psychopath
is this
all right so I said connection string
this is really not delay you want to
create your connection strings there is
a convention about how we would normally
do this we probably wouldn't hard code
it all into a code behind now someone
else someone else said a user IDs a they
did not like sa man and there's a couple
of interesting things with this a number
one for those of you who don't know sa
server admin sa has effectively God
writes over the database can do whatever
at once which means that every time this
web application talks to the database
the anonymous person on the other end is
executing a statement under a very
privileged account now some people say
no 1x2 actually does this rather no one
actually does it in a live system and so
let's go and find out what we'll see
what they're doing
now what I thought I'd do is we'll do
some google docs you know google doc is
alright few people so for those of you
who don't know and by the way I realize
with my accent some people think I'll
say Google Doc it's not a doc it's a
dork and a Google Doc is just a very
carefully crafted Google search which
returns things that probably shouldn't
be returned so give you an example we
can go up here and we can do an in URL
in URL like so I'm going to go and grab
a save one just here and we'll have a
look what's gone on him all right so we
are doing in URL for FTP you know Google
index and stuff over FTP is very useful
in URL web confi many of you will know
what a web config is it's a
configuration file for an asp.net web
app it's not meant to be returned
publicly you cannot request it over HTTP
you can however requested over FTP so if
you leave your website with anonymous
FTP enabled and someone can go and read
that well you got a problem Google index
it and then we're given it a bit of file
type config just to make sure we do
definitely get FTP or web config
successful our FTP some number of
results have been returned
and why we're actually getting here is
we are getting the web config of
production web applications and there
are hundreds and hundreds and hundreds
of them exposed publicly some of them
a government and this is exactly what it
sounds like and it just goes on and on
and on now
these are other people's files and you
don't want to sort of be drilling down
mucking around with these apparently if
you look at a case version it's not
hacking though right just checking you
can't see it because it is an XML file
and it's not actually rendering into the
screen if we were to view source it is
someone's we've got config file exposed
publicly now what's going on with though
because we're talking about talking
about si so if I just jump back a level
and let's just wake NSA in there instead
this is really neat actually because you
can find the way people are setting up
their configuration files without
actually looking at their configuration
files you can just look at the Google
results so go okay well who's using si
now we have people using si so what do
we got ID it's a password that's twice
as strong as they say ah this this one's
good and and this is the pain of it
right because it's not just si it's crap
passwords as well oh I I have a real
issue with this right
who does this you can't do that anyway
so we've got this we've got a lot of
stuff out there which is easily
discoverable misconfigured obviously in
this case as well if anonymous FTP is
enabled on a website it's much worse
than just webs or configs you can go in
and you can do stuff like grabbing in
the files that are on there if you're
crazy enough so it's going to so stupid
enough to let's be generous crazy enough
to leave it open you've probably got it
open for right as well so all sorts of
things you can do now jumping back to
this break for a sec very often I'll see
people write code that put it out online
and maybe they put it out anywhere from
github to Stack Overflow to whatever and
they'll have something egregiously bad
right like this and they'll go this
isn't really what I wanted to show right
like what I'm trying to show here is
password reset don't worry about this
you know this is not the
entry of attention and what you got to
remember is that whenever anybody puts
any code on line other people will come
and copy it and paste it into their
application without reading it without
on cernium let me show you how I know so
give you an example here last year we
had a little little issue with these I
was running a workshop fatals here at
NDC in London I went to Oslo afterwards
ran a workshop sagai my workshop who
found that when we did this exercise
where we we take in mobile devices we
proc sit through a pcs there's this
piece where we look at how our mobile
apps are communicating the services
anyway this guy he gets kind of inspired
and he goes home that night he says I'm
going to see how my phone is talking to
my car now I didn't realize this but in
some parts of the world it's so cold
that you've got to turn your heater on
before you get to your car there's not a
problem we have but apparently that's
what you do you pull out the app and you
go Teter on you get out and everything's
warm so he wanted to figure out how his
app was talking to his car and he worked
it out and he came in the next day and
was really excited and he said look I
figured out what happened the identifier
that told the service which car to turn
the heater on and off get the battery
status pull the trip history the only
identify that was used with the VIN
number now in case you don't know what
the VIN number is remember this is the
secret this is effectively the API key
that secret you can find printed in the
windscreen of every car which is not a
good place to put your secrets worse
than that not only is it in the
windscreen of every car but the last few
digits are innumerable okay so all the
first bits of the VIN number like where
it was created what year you know what
country they made it in and then you got
these digits like four or five digits at
the end you just keep rotating and you
can get different cars anyway so this
happened it wasn't real good and we try
to get Nessun to fix it and this and
were like you know we'll get around it
don't worry about it
they didn't eventually published this
and then suddenly that I cited it was
important
and they turn the service off now I am
going somewhere here because this is
about copying pasting code so they took
a long time to get it back up and they
finally got the service back up and they
published their application all right so
they published their iOS application to
consumers who own Neeson's and it looked
like this now can anyone see any
problems with this app all right so if
we sort of jump down towards the bottom
we can see something which is generally
not a consumer facing message and we
were intrigued okay the guy I did this
exercise with myself again well this is
really interesting one here this
happened and we figured it out because
if you go over to take overflow you can
actually find exactly what they copied
and pasted because it is just down here
so they literally got this is missing
engineers multi billion-dollar
multinational building freaking cars and
those are not just little web apps
copied and pasted the code provel them
so every time you see some crap code
somewhere and you think well this isn't
you know no one's going to Ray about
this someone is going to copy and paste
it somewhere so this is what people do
now getting back to this bloke and we
were actually talking about sequel
injection let me show you why I like
this post it's quite handy let's stay
here so we've got some sequel here we've
got a sequel statement how do we feel
about this is this a sharp hands who
thinks it's good let me rephrase this
from a sequel injection perspective who
thinks it's good only a few people who
thinks it's bad
who's undecided is there any like who's
really bright Zeron left yeah all right
the people that were brave enough to say
it's good are correct insofar as this is
resilient to sequin gyptian and what we
mean by that is that when we look at
this text email field and you get the
value out of the field no matter what
email address you enter into the field
it won't change the structure of the
query because we can see in the query
we've got an @ symbol here before email
and what that means is
is that this then goes down here and
it's added as a parameter no matter what
value we put in the text field it won't
change the structure of this query so
this is good how do we feel that the
next one who thinks this is good good
things was bad that's better all right
and this is one of the reasons why I
show this blog post because it's
actually a really good example of
parameterization right next to the bad
way of doing it parameterize ation is
the good way next one's the bad way now
if the penny hasn't quite dropped
imagine I did this right imagine I
decided to sign up into this web
application and then go into a password
reset and I used an email address of and
here's what you got to do imagine on
it's going to go in here imagine my
email address was single quote semicolon
drop table login table - - because the -
- will comment out the little
apostrophes left on the end what would
happen is it would just drop the login
table I know it would drop the login
table because it's got SI rights it can
delete anything in the database so this
is problematic this is again good
because it shows the bad stuff and the
good stuff right next to each other and
off saying before I I kind of went down
here and look you know we all make
mistakes
friendly feedback you know maybe you
want to think about this and what are
things that got me is that as we go I
don't know what this goes on about but
as we go down we get you know this sort
of stuff and this is what makes me think
people take this code and reproduce it
and then we now have that as part of our
lives and it's extremely worrying you
know nice and easy to understand well
certainly didn't understand and what's
interesting as we go along as well.those
know at some point here you kind of feel
that maybe there was beginning to be a
little bit of trolling happening uh-huh
so someone in here as well so they use
it for their bank was it
and let's let's up it's not my bag all
right so we've seen the bad of sequel
injection right so we've seen vulnerable
code but the bit that we've got to add
to the picture now is how the hackers
find your bad applications and then how
do they exploit your vulnerable code and
what I thought I'd do is I'd go out and
find a tutorial online about how to
mount a sequel injection attack and I
found on here and the reason why I
wanted to pick this is that as you
listen to this just how to think about
that that the genre of the individual
who's doing the tutorial let's do a
professional video let's actually show
you how the concept works and I'm using
them the SQL or schoolb method here
skill injection now when I heard that
every time he said that I couldn't help
but think of this that was the only
thing I could think of
except of course it's a hacking school
so anyway we'll let him go on but I will
teach you how to do that and there are
easy methods to do this so do not worry
do not worry about this um yeah I just
don't worry about the little jump cut
there maybe not such a sophisticated
hacker you know it's just a point there
but where I'm going with this was a lot
of time at his children right and this
is clearly a child who's doing this and
you'll sort of see where he goes and and
and we'll talk a little bit about the
ramifications of kids doing this sort of
stuff so what he does next is he goes
over to a particular hacking site which
has all of these different sort of
vulnerabilities and ways of teaching
kids how to break into systems and in
this particular case he's gone to a site
that lists Google Docs now we all know
at Google Docs are now and he's
highlighted one here in URL by dot PHP
question might category equals so he's
looking for something with a query
string and he's copied this query string
let's see what he does with it sorry
cool I don't know
the firefox will do that so the phone
side was this one which is literally
there so if i just go on here yeah let's
have them lock this so that the thing
that should really strike you here is
how indiscriminate this is each is gone
I want to hack some I'm just going
to put in a Google Doc and I'm just
going to grab the first site you know
and for everyone who says I don't think
we've got reason to be concerned about
security because we don't have anything
of value you know who's going to care
it's because of stuff like this because
people are just continually scanning
around looking for things that are
vulnerable potentially vulnerable we
don't even know if it's going to be it
because all he's done is just search for
query strings so it does now okay so
with this extension what we do is put a
little phosphor fee here no comment ish
but are there press ENTER and then good
so this means that we have an error in
the database so there's an error in
their database so and their database is
MySQL server they go so because it's my
school hallways due out we can target it
and probable the input so what he's done
the the apostrophe is obviously being
treated as either terminating a string
some were beginning a string somewhere
or at some point in time the apostrophe
was unexpected it should be there as
encapsulating a string it's in the wrong
place internal database was thrown an
error now keep in mind like he's got no
idea what's actually happened he's got
an idea of the code you just saw how
this sort of thing would happen he's
just gone if I find the URL of the query
string and I put an apostrophe in there
and I get an error could be game on so
here's what he does so next you want to
have this program having all right now
this brings us to the fun bit so what
he's done is he gone and grabbed a piece
of free sequel injection software right
so have äj-- is freely available and it
makes it really easy for anyone who
hasn't done sequel injection before to
break into a website now who he has done
sequin Jackson before
not many okay who would like to do
sequence
I would like someone at the front some
of the front so I go yeah yeah that's a
very half-hearted hand but come on you
can do it I did express the convict
heritage thing last night they are
watching me I can't do this so you have
to do it all right so here's what we're
going to do we're going to get you to do
the sequel injection this will be fun
during now I've got this particular site
here which you can hack without being
deported to Australia and what you do
here is get you to scroll down on the
screen a little bit now do it it'll be
fun seriously all right all right so
let's go down you're going to choose one
of these manufacturers all right you've
got three different manufacturers pick
the one that you like going for the
local one all right very good
all right now we see in the URL the URL
has got a question mark order by right
so we've got a query string in there so
you'll you look like you know what
you're doing
let's grab that URL he did say never
done before all right we'll we'll copy
it copy the whole euro too late now made
us on camera all right copy the whole
URL now down on the task bar there's
this little caret and this is habit
right this is the software that the kid
just before grabbed again to maximize
that window because we're going to add
some real estate for this and then we're
going to drop that into the target there
very good and we're going to analyze it
so citizen analyze button to the right
we hit that one beautiful now what this
is doing is it's making HTTP requests
through that website of mine trying to
figure out if there's a vulnerability
and it's just automating the whole thing
now see the last line there says DB name
hack you saw first underscore DB it's
managed to actually extract the name of
the internal database from the system
what I want to do now is we want to get
the tables out of the system because
we're going to start having a bit of
explore around see what we actually like
all right let's click on get tables let
it be good and it's going around to
making more queries leave the other
internal tables we'll just let that one
finish loading now actually I was your
name I didn't ask you
Taylor how can you never done this
before alright this is going to be
awesome all right sailor so I can choose
the table you like well should we vote
what's the most interesting looking
table here
user profile' okay let's get user
profile table we'll check that one
yeah and now let's get the columns that
Tyler alright it's going away it's going
to get all the columns now we'll let
these ones load vote again what are the
most interesting column names username
passwords or is it email password yeah
email and password let's give those
right now you're going to get the data
get Turner and there we go job done but
that is sequel injection that is the
whole thing end to end so get Tyler
around reports with these done well
thank you good on it alright so you see
how easy it is from end to end like it
is ridiculously simple so we've gone
through and gone all right well this is
how bad code is written this is how
people discover sites that are at risk
and then this is how we go through and
exploit this stuff and it is an absolute
piece of cake this is why we have so
many sequel injections these days
they're incidentally that was what
brought TalkTalk undone as well so I
spoke about TalkTalk the other day last
night this is what the kid did he used
freely available sequel injection
software and he knew how to copy and
paste a URL now that the problem with
this is that you've got kids that are
able to do this so easily themselves and
what ends up happening is very often
they will see a video like the one I
just showed you or they'll be coerced by
other people and they sort of fit into
this this category that we'd refer to as
a useful idiot not you Taylor dime but
the term useful idiot this actually
makes a lot of sense right
useful idiot is someone who's not
necessarily aware what they're doing but
they're being used by other people and
if we took out Stalin and Lenin or went
with anonymous this is often what it is
right so think about the hacktivists
online it's people saying I wonder if I
can convince these kids to do my bidding
for me I don't have to hack stuff I just
have to tell them it's a good idea
now speaking videos
come on it's the big day we couldn't
help it there is relevance to this so
Trump was in the news recently he had a
little issue with his website and this
is what the headline said said that
trump's website got drama's could have
been chaos you know fake media probably
I don't know it was actually an
interesting issue because what the story
was about was that on trump's website he
had a piece of code like this I don't
think he did someone did someone wrote
this code and obviously what's happening
here is it's just a script file right
it's being embedded from github and in
this case it's a jQuery mask library
just puts a little masks on text fields
with the sort of data that you'd expect
to enter now the reason why it made news
is because what people were saying was
that if someone had to changed that
script file on that site it could have
actually changed the behavior of Trump's
website because you think about it right
like what can you do if you can run
JavaScript on a website and the answer
is pretty much anything
imagine how creative any of you could
get if you could run whatever JavaScript
you wanted on Trump's website you know
and that's that's basically where we are
so this is the point they're making now
I want to sort of demonstrate the
problem and I'll demo a fix as well
because there's an interesting little
security control we have so here's what
I want to do I'm going to jump over to
urban dictionary which is this one here
now this is entirely coincidental if you
go to urban dictionary right now this is
the number one article at the top it
wasn't when I prepared this I open this
up like an hour ago and I thought oh man
what are the chances of this anyway let
me show you the problem so this is urban
dictionary now if we jump it up source
code of urban dictionary and we search
for CloudFlare what you'll see is that
they are loading CloudFlare or rather
they are loading a library off cloud
plan okay it's just a j/s library
they're using cloud flares public CDN
because if they use a public CDN it gets
distributed all the way around the world
so it's fast they don't pay for the band
themselves that comes with cloud players
bandwidth all this is free any users see
the ends like this okay now one of the
things that a lot of people say is and
this is sort of a tinfoil hat brigade
but they say this is dangerous because
if you do this you could be like Trump
and I know that sounds terrible but what
they're saying is that someone could
actually change that file and your site
would have problems and if you have it
think about it that like the chances of
it happening not real good
I don't think someone's going to go and
maliciously change files on CloudFlare
without it creating like a massive issue
very very quickly but let's address the
problem let's humor them AG ok well how
we fix this now here's I'm going to do
I'm going to look demo this if I open
this file here we'll just click through
it in a new tab this is the file it's
just a great big whack of JavaScript
goes all the way down to them what I'm
going to do is not jump in a fiddler for
a second now who is use fiddler before
right just about everyone who has used
fiddler script just about no one and
that's how it normally is what you can
do with fiddler script if I go to there
and I go down here and I go down to one
of these events I can do things like
change the request so when it goes to on
before request so just for those of you
who haven't used fiddler fiddler is an
HTTP proxy you open it up your web
browser start sending all its traffic
through fiddler before it goes to the
website on before request allows you to
modify the traffic when the brows are
sending a request out i'm before
response which is his next one down here
allows you to modify the traffic when
the response is coming back from the web
server
so here's we're going to do jump down to
on before response now I have got a
little bit of code down here which is
saying requests that go out to
CloudFlare we're going to trump off' i
it okay now what that means is i have
added a little bit of JavaScript here
such that it's going to modify these J's
files now ultimately what I'm trying to
do here is I'm trying to say what
happens if the JavaScript file is
changed into something that it's not
meant to be and that was the concern
with Trump so I'm just going to make
sure that we are actually capturing
traffic
fiddler will jump back to this file or
give it a hard reload and I'll see if
it's got my new choppa fication script
which is now worked in the bottom and it
does we've got Trump afire down here so
that's what federal script does it's
just modified my response others came
through and now I go over to urban
dictionary and I give this one a reload
and we'll see if it's been Trump afaid
so remembering this is sort of emulating
what might happen if we'd mucked around
with the source file all right it's been
Trump aside now this is the concern
right like this website has no
resiliency to that script file being
chains so I'm going to show you another
way around this which allows you to have
your cake and eat it too so allows you
to have your CDN and be resilient to
this sort of thing if I go over to my
website over here whose use this website
by the way so for those of you who
haven't this is a data breach
aggregation website sites get hacked I
load it in here you can then go and find
we've been hacked who's found themselves
in Dropbox LinkedIn actually Madison
always long ago out the VAX always a guy
too funny that anyway if I look at the
source code of my site here I have got a
little bit down the end where I'm also
using CloudFlare CDN ok so there we go
I'm pulling jQuery from the CDN I can
click on that file and I can see that it
is a great big whack of jQuery now the
script that I just added to fiddler
scripts is going to modify this when I
reload it it was cached so let's give it
a reload and also it happens reload the
file there and again what we're trying
to do here is just emulate what would
happen if the fire was maliciously
changed upstream of the browser that is
now trump off' ID script if i go back to
my website and i reload it's now going
to get the trump affine script and we're
going to see if my site gets Trump a
fight as well and trampa fication for
those who are familiar the term just
means putting an image of Trump knees
here in the source of every div
background of every div now what you'll
see as this loads is that it's not going
to happen okay no Champa fication which
is good
however other things have happened and
this is where it gets interesting if I
jump over to the console we'll sell that
a little warning here little error
failed to find a valid digest in the
integrity attribute for resource by by
by with computed sha-256 integrity I
want to show you how this works there's
actually a really neat security defense
if I jump back over to my source code
here
see how I've also got an integrity tag
here right or an integrity attribute
it's a char 3:48 hash which is great big
and clunky like so and what this is is
this is the hash of that jQuery file now
have a think about how this works and
why it makes sense at some point in time
you have got to have an external library
that you trust ok now this would
normally be one that you load onto your
own website but then you say such as in
the Trump case I actually want to use it
or I still want to load it from another
location I want to load it say from a
CDN so it's fast and I don't pay for it
what you do is you create the char 3:48
where we can do 256 hash of that of that
script file and you add it as an
integrity attribute what happens then is
when the browser downloads this file
that we see just over here to the left
it goes and says is the hash of it equal
to the one over here and if it is it
runs and if it's not then you get the
error we saw before so this allows you
to make sure that it's only ever the
exact file that you want that actually
loads now the other cool thing here is
that if we go back to my site and I go
and do something like looks actually
search for my email address and we'll
see how badly I've been poned which is
not really good it will still execute so
this is jQuery that does all of that so
even though I've blocked the jQuery from
CloudFlare the j.crew still run and the
way you do that is also over here in the
source code so just down here I've got a
fallback
all right now often people will do this
when they want to have a fallback
position from a CDN because maybe my
website is still up at the CDN is down
not very likely but people saw that and
it just looked to see if windows that
jQuery exists and if it doesn't it just
writes out
gripped reference to my local file so
this is meat right like I can say let me
always get the free one that's fast and
if in this really crazy scenario that it
gets modified and the hash doesn't work
load it from my own site and if you want
to know how to create that how sure you
do is you get the URL that you trust and
you go to a site like this the SRA hash
generator and remember this is sub
resource integrity SRA and you say let's
create the hash and it goes away and it
says alright let's download that file
create the hash this is the tag you need
so any stuff that you're embedding from
other locations that you expect to
always be the same and not modified you
can use one of these on now browser
compatibility who uses chrome who uses
Firefox who uses Internet Explorer to
your brave Oh
the Internet Explorer people how do we
put this nicely let's just go and search
can I use SRA and here's the issue so we
have got actually a pretty good
representation here so globally we've
got about almost 58 percent of browsers
in use right now can use SRO basically
everything Firefox everything Chrome the
Microsoft things and the Apple thing
don't recognize this all right you can
still use the attribute but they'll just
go I wonder what that attribute is don't
know just ignore it hopefully we'll see
this coming Microsoft has been adding
support for things like content security
policy which they didn't have is now
coming to edge maybe this will come
later on but hey look it's really good
for the majority of people that are
using browser support it all right so
that's that's s RI and s RI is enormous
ly useful for this sort of stuff and I
strongly recommend you give that a go
because it's pretty cool stuff moving on
for something else there are a lot of
sites out there that believe it or not
off your stuff for free on the internet
or offer you things which they
ultimately can't deliver on lot of scam
sites
there's a site here that helps you get
verified on Twitter and this popped up
as a promoted tweet on Twitter which is
all kind of meta right this is not a
very legit site because you go in here
and you go right
I'd like to get verified I want to have
the little blue thing it'll be awesome
and it takes you over this page and you
enter your credit card details
don't enter when you credit card details
it's there's a couple of reasons why not
I mean first of all obviously it's not
loaded securely it's loaded our rates to
the team incidentally chrome 56 which is
going to drop any day if you put a
credit card form or a password form on a
website
loaded our HTTP it's about to say
communes any day so if you're doing that
now it's a really good time to stop
don't do that so this site doesn't look
overly legit but you know we're poking
around on this the other day of a couple
of people and a couple of people sort of
point of sunny out to me and said
there's a funny thing with this site
right if you take out the file path
you're this and then if you drill down
into one of these files you get this so
what this scam site was doing was
storing everyone's personal data in this
HTML file with their credit cards with
their postal data with everything just
sitting there and like that was bad
enough but even worse was now you get to
see everyone who's been sucked in
thinking they're going to get verified
by paying money I went and registered on
myself just to check what would happen
and that happened so they may have other
issues on their site as well but this is
what happens that we got a lot of
scammers out here who make attempts to
rip people off and generally just do a
really really bad job of it so this was
one of them there's another interesting
one which is these guys anyone ever seen
c'mon TRO I'll put another way has
anyone ever I'm sure this happens the UK
anyone ever been at home of an evening
it's like six o'clock you're getting
dinner putting the kids to bed and
someone calls up from a really long long
long way away and they say
where Microsoft your computer's got
viruses that happen here all right good
it's not just up so this happens all the
time in Australia and these guys keep
calling up and go and you know you got
viruses if you don't fix it then you're
going to charge your money and the cops
will come and get here and they just
make up any reason to try and
suck you into the scam now this used to
happen to me a lot and I got kind of
sick of it I said okay well what I'm
going to do is I'm going to set up a
very special VM which is this one here
and I set up this VM and I thought you
know look I mean they're not going to be
this stupid they're going to see this
and ya don't realize what's going on but
I set this up and they caught up and I
sit down here if you confuse got viruses
are really interesting aha we're going
to help you fix it and I let them go
through the entire process of how they
fix it and just in case you've always
wondered like where does this lead in
what they do is they say do this hit
Windows are ok so we can run and fire up
the Event Viewer and then you fire up
the Event Viewer and they say ok right
what I want you to do now is to go into
Windows logs going to system scroll down
and look at the things here and then
tell me if you see anything in here like
a warning I've at the virus and
this is what they tell you right as soon
as they see a warning or an error or as
soon as you see one they go that's a
virus you're very badly infected we're
going to need to clean your PC they then
get you to go through and go to one of
these free remote remote desktop sites
and they take control of your computer
and basically it all goes downhill from
there now back here I ended up by
creating a video there's like an hour
and a half video here has been viewed
over a million times because people just
like seeing how badly the scammers
ultimately get screwed over
speaking of them being screwed over
because one of these guys the other day
so I wonder if they're still around and
then they are they still here this is
one of the people who fix your PC and
probably not and I've got in our thought
what's always interesting with with
websites like this is to look at the
robots.txt file because the robots.txt
file often tells you many interesting
things about what they're doing
the site so I found the robots XD and
this is what's there live at the moment
so it's just another case of scanners
believe it or not often not being
particularly bright now sometimes we
sort of see these incidents and we think
well you know maybe there was someone
malicious who caused us to have a mouse
or malicious cause with files to leak
and there's this saying I'm really fond
of when it comes this sort of thing
which talks about stupidity as opposed
to MELAS and often it is right often we
see really bad security somewhere that's
not necessarily bad because someone was
smart enough to break in but it's bad
because so I was stupid enough to put it
out there in the first place let me give
you some examples at this site very
recently and this is an Indian clinical
pathology site now what these guys do is
they take a whole bunch of blood tests
they obviously figure out what's what
how much cholesterol you got and what
your white cells are all this sort of
thing and they do reports and they had
an incident a little while ago which
resulted in them having to make a
statement and the statement end up
looking like this now it's the second
line here that really strikes me because
what they're going is our website was
hacked someone hacked into our website
we're going to talk to the cyber cell of
the Mumbai police sounds quite scary so
they said ok I got hacked let me explain
how they got hacked the way they got
hacked is they published all their
pathology reports to a folder with
directory listing labeled this is how
you get hacked this is why they going to
the Mumbai police because they published
all the files publicly and all that
happened was eventually someone found it
and then they told me and I tried to
tell them and actually didn't care that
much the scary thing this says pathology
reports for things like HIV tests
personally identifiable information
whether you're HIV positive non 43,000
files in this directory
took a lot of hard work tracks to get it
taken down this was incompetence as
opposed to malice give another good
example this one happened around at the
same time and trial like this anyone
work for Michael Page no you know works
for cap Jim oh no no I can't see any
hands up in the audience at all
interesting so what happened is Michael
Page had a bit of an issue and it's sort
of summarized here and again what I find
really interesting about the way this is
phrased is it says you know we were
going to reform another unauthorized
third party illegally gained online
access someone broke into our systems
and I saw and malicious must have been
malicious because they had unauthorized
access and the way they did it is they
basically browse the folder and again
this is what it is so this was a
development server with backups of
production data about 30 gigabytes worth
of data backed up to it from different
countries all around the room all the
way around the world which you can see
there and someone was just scanning
through the ipv4 address range gun I
wonder if this IP address is open I
wonder if it's open HTTP I wonder if I
can do an index of and I wonder if there
is a dot sequel gzip file in there and
here we are and they found it and this
is how a lot of these data breaches are
happening because they're just going to
just take the system from your publicly
facing database backups
I'll give you an idea just how much
stuff is out there we've been doing a
lot of google dogs today so if we were
to go and do a Google Doc and we'll do a
bit of index off to a bit of index of
sequel gzip so again think about what
we're doing here this is it this is the
extent of the search and here we go
right over 2000 results and it's stuff
like this just published publicly to the
web many of these have database backups
going back years they just back them up
put them on a web folder because it's
convenient right makes life very easy
makes life very easy for for bad guys
unfortunately but this is what they do
all right so that is unfortunately how
easy a lot of that gets now likewise as
well as doing things like sequel doc
gzip we could always do a bit of get
people publish the git repositories
publicly that I know it because someone
has probably just got an FTP the entire
route of their development website up to
their production website and here we go
fortunately now unput sensitive things
in get because you don't do that with
source control right but they do and
there are automated scanners that just
run around the internet looking for this
sort of stuff and when they find it they
download your source code repository and
even if they don't get sensitive things
they get all of this internal
information about the way your app is
structured and then they possibly find
vulnerabilities in your code this is a
Google Doc away now later on is
something different because there's one
more thing I want to look at in terms of
the ease with which we can find data and
vulnerable systems now I couldn't have
doing one more Trump but there is a
little family guy related lesson which I
think is interesting hey I got two of
these own books didn't know what you
wanted one hey how long have we known
each other a long time and yet we've
never discussed mother's maiden names
the names of old pets high school mascot
favorite teacher
hey I don't even know the last four
digits of your social now this is the
thing right like all of this information
is really valuable to people who want to
steal your identities break into your
accounts identify themselves to other
services I mean how many times you call
up ever think about next time you call
up your bank or your insurance company
or something like that
consider the questions they ask you and
how readily discoverable the answers are
because a lot of it you'll find on
social media profiles database breaches
you've been in check and have a been
kind see how much of your data is
actually sitting out there the thing
with it though is that we consequently
put a lot of effort into protecting our
identities and for those as building
systems we're hopefully very conscious
that we don't want to expose that sort
of information
publicly we go to great lengths to make
sure no one can find our personal data
unless you're these guys now they're the
reason I'm showing what I'm about to
show and the reason is is that they are
well aware of it and I'm going to show
you all the reasons why they've
justified it later on and they seem to
be happy for it to happen does anyone
use strawberry net your sister all right
now it is normally a service used by
women that's got a lot of cosmetics on
it it is a very popular service again I
want to talk to your sister after this I
could ask you sisters email address but
I don't think we'll do this on stage you
do it afterwards and you'll be stunned
all right so we got straw in it now
strawberry net is a Hong kong-based
cosmetics company and they run an online
website where as far as I understand I
got some pretty good deals and makeup
and stuff like that so we'll jump on
over to strawberry net which is over
here and what you do right is you go
alright and just to be clear I'm not
logged in I'm not authenticated nothing
like that I cleared all my cookies in
before I started you go down here and
you find something that you'd like and
yeah okay this is the guys I get some of
this men's cleansing foam all right
let's have some of that I going to add
it to the bag and I'm going to check out
now they came up with a really
innovative way of streamlining the
checkout process and I want to show you
how it works because this is a service
which is predominantly used by women we
need to pick the girl's name in order to
pick a girl's name James good all right
so what you do is you pick a name like
Jane and then you pick a popular email
service Gmail all right what's the Jim
oh good idea like that and then you go
alright gmail.com isn't it now I would
like to check out and what it's going to
do is this nice sort of streamline
checkout process where it obviously it
takes the email address and it goes over
to the database and it's going to try
and see if it can find Jane somewhere in
the system just thinking about it is in
Hong Kong maybe it's a long way away
looking for Jane maybe I should have
tried Julie alright so here we go it has
snail found Jane
this is exactly what it looks like and
the reason I'm showing this one is
because someone else has already found
it
modified the data and I hope it's not
the person's legit data because after
you find the person you can change the
delivery drets you can we can add one
you can change the billing address so
for you with your sister
afterwards answer her email address into
there and see if all of her personal
data comes back now you may be looking
at this and garden gee I hope Troye
disclosed this zero day and they're not
going to come and knock on his door
sending back to Australia or something
like that I did I had a chat to them and
they had many things to say about the
way that works one of the things they
had to say was that the data is returned
over ssl okay don't worry it's secure so
basically as I'm retrieving other
people's personal data someone can't
hack me right in the middle which which
makes me feel so much better and then
they said well we're PCI compliant and I
like this this is the most
excuse ever where PCI compliant don't
worry they went on and I said well we
serve out our customers and they like it
all the customers I've spoken to that
have seen this have used other words
been like but the one I really love is
when they said ultimately we reckon it's
sufficient security using your email
address as your password is just fine
this has been disclosed so them this is
the way they want to run the system we
had a big debate about it back in August
and they just sent that will their life
so that is how easy it is to find other
people's data in ways that can only be
described as a feature alright so look
that is everything I wanted to cover but
I wanted to finish in time as well so we
could do questions and things like that
because and I've shown a lot of stuff
people often sort of want to ask more
about it so we've probably got about
five minutes of people and ask me things
yes other back
what other data protection was in Hong
Kong but you know I'd like that is a so
he's questioned just in case anyone
heard it is is it not breaking data
protection laws
the thing is and and this sort of came
across in the discussions I had with
some Hong Kong's part of China now and
it was a very very different view of
privacy over there and yes it's our data
and people would argue that it should
come under GDP oh and that comes into
effect as well but ultimately they've
just decided not this is the way we run
I run the service I there is a small
part of me it's a very very small part
of me that would like someone to
enumerate through every single possible
email address they just grab a file of a
few million find them and then email
everyone in there and go hey did you
know this is you find them in your
address strawberry Nets exposing and how
do you feel about that so I think they
just need pressure to fix it
other questions think it runs like in
stunned silence anymore only the one
well that was easy
yes you sir okay why - I don't do that I
throw that much all right look I hope
you've enjoyed that and any other
questions hit me up on the Twitter's or
on my website violates two things thank
you guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>