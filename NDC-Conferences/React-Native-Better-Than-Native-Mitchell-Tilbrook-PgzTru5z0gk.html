<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native Better Than Native - Mitchell Tilbrook | Coder Coacher - Coaching Coders</title><meta content="React Native Better Than Native - Mitchell Tilbrook - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native Better Than Native - Mitchell Tilbrook</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PgzTru5z0gk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name's Mitchell - Brooke I've been
doing mobile for a few years now a
mixture of xamarin and Java Android and
for about last year really been kind of
digging in to react native especially
working in the Android space often will
work on lots and lots of features which
are very similar to Android and iOS and
having done xamarin before you kind of
feel like you're wasting bed time late
there are definitely features in mobile
where you need to be really on the metal
like the games a really good example of
this but then there's lots of other
stuff where you just don't need to be
kind of at the metal like how many
powered II need to render someone's like
profile screen or their settings pages
and things not really that much so this
is a phrase I think people have loved
and hated since probably the late 90s is
the write once run anywhere slogan from
Java and people always kind of say it as
a write-once debug everywhere but that
that's I never really found that to be
the case like the JVM kind of does give
you like a nice abstraction and the
stuff did break on the platforms it was
broken in the JVM itself like the Java
code generally kind of worked across all
the platforms fairly well but the
problem we kind of run into in the in
the mobile space when developing mobile
apps is that we have what I like to call
full Native isolation so not only uh we
don't have any kind of shared runtime
like you don't get you at the JVM on iOS
like Apple just won't let you so we were
istic disliked on iOS you kind of stuck
with objective-c Swift C++ Android
you've got Java a Kotla and C++ and the
web now actually has C++ have web
assembler so we really do have language
that kind of goes everywhere and we've
had it since probably like the 80s and C
and C++ but no one wants to write in it
like it's a really powerful language
but it's also a really low level
language there's lots of stuff that you
have to do manually and I don't know
about you but I kind of like having my
high level language that takes care of
all the memory management and things for
me so we've got a few solutions which I
would say native cross-platform
solutions so we've got xamarin which
will take netcode and on iOS we'll
actually compile it down to arm code so
it's running in the same way that
objective-c does and objective-c talks
to a C API love the time reacts native
is using javascript on the on the net on
the platforms and then interacting with
them via a native bridge the same with
native scripts flosser is just one in
here that Google is working on so
flutter is interesting in that the top
free used the native UI toolkits that
already exists in the platform so
they're using the native UIs
flotter has a OpenGL rendering engine
and it's just rendering it's everything
it's entirety of your eye so if you've
ever seen people talk about how they've
used unity to make apps with I guess
flutter is kind of moving towards this
idea that we have a GPU on all these
devices so why do we need to keep
reinventing the UI toolkit every time
this really succinctly describes the
challenge I've had we've compiled
cross-platform tools
wherever it be C++ xamarin this is
especially a problem in Android the ant
and Google noses so they're working on
it but at the moment if you try and
build a large application it will take
several minutes and if you're someone
like uber a large application for them
takes about 40 to 50 minutes to compile
so imagine making a code change and then
having to basically go to lunch every
time to see if you actually your program
will actually compile it's not really
practical in fact this kind of got to
the point where like is taking 40
minutes consistently enough where they
actually had to rewrite the build tools
for Android von Schlieffen had made some
headway in this and that Facebook had
already gone down this path so uber just
had to build on top of Facebook stuff
and were able to get their compiled down
to a few seconds but with languages like
JavaScript you don't have for the most
plate you don't have a compile step
you've got things like Babel which allow
you to use newer features that compiles
them backwards but there's the compile
times and JavaScript are really quite
small so what is react so just a really
quick brief history about like what
react is so react kind of appeared in
2011 at Facebook originally was actually
meant to be a PHP server side rendering
framework but then eventually moved into
a kind of what people call
isomorphic a universal rendering
framework was just JavaScript you could
render on the browser or on the back end
and in 2013 Facebook released reacts to
a kind of meh response because in reacts
your JavaScript and your HTML and your
CSS kind of all live together and this
was so against the grain at the time
that the initial release of reacts was
met with almost hostility to a certain
extent 2015 Facebook released the react
native for their ads app that they had
so again like this is a an app where the
you don't need to be as close to the
metal not to say that reacts not
performant but there is definitely
benefits of being right against the
runtime that you're targeting and react
native is now starting to target other
platforms such as Windows Mac OS and
Ubuntu so you can stay I start writing
native apps not just for the mobile
platform but for the desktop as well so
in react everything is a component and
the component is basically a way to
describe what it is that you want to be
rendered so in this case we a component
is for the most part most of your
components are only going to have a
render function and the render is the
declaration of the UI so in this case we
have a view which is wrapping a text so
this is JSX and this is the thing that
caused the bit of controversy and that
you can see that the name here has kind
of got this kind of handlebar syntax so
we're escaping the XML inside our render
function to put JavaScript kind of in
line the way in which you talk to a
component is via the props and the props
information that you pass into a
component in this sense we have just
created an object here called talk and
we have our component and the way in
which the you map the data from the
outside into a component is via the kind
of attributes style syntax so it's very
XML in this respects is kind of similar
to HTML and this in some ways reflects
it's kind of origin is like HTML based
rendering framework so you can see on
the left here so right
that it's going to take
that's JSX and then it come creates
adjacent object with it and then it
passes that json object into our
component here because it's JavaScript
there's like a million ways to do things
if you don't want to specify each
individual attribute if you object
satisfies the properties that you need
you can use the spread operator sorry
that's this triple dots here and then
once we in the render function of our
talk component here we can then access
the props by the this attribute so the
properties are always guaranteed to be
on the thing I think component so in
this case we need to this stop props ID
name and title so how do you update the
props and the simple matter is you don't
props always come from outside but what
you do is you have another mechanism
called state a stateful component is one
where it can update either itself or can
update its children so if you change the
station of a component and that changes
the properties that you're passing down
to as children and then re passes the
properties down to the children again in
this case the state is very much
optional you have to either declare it
as a property on your object ahead of
time or you have to assign it inside the
constructor the way in which you update
the state is you called the set state
function now the set state function
takes two different arguments I've it
takes a lambda with a single argument
itself which contains the previous
properties sorry the previous states
that it was given or you can pass a
paste
pass it adjacent objects I will truly
recommend using the lambda function
because the set state is actually a
synchronous function and if you call it
multiple times it will actually compose
all the records together and if you're
not looking at what the previous value
was which it will always give you the
previous one that you gave it you can
end up kind of obfuscating values kind
of before the component will actually
re-render on the screen so this is just
a nice little demo showing that when you
call the set state so it says state you
can access the same way as the props
where it's just this dot state instead
of this dot props and that's the whole
example together so where would you use
the props versus the state this is
something I really struggle with for a
bit and I think people struggle with a
lot when they're getting into react
State you really want to kind of be
hesitant about using States because in a
react application you're generally
better off passing actions down the tree
so by an action I mean like I click
handler so you have all your logic kind
of sitting up at the root and then
you're passing the entirety of your
application State down the tree so when
you want to set States you generally
want to do this in a container component
so contain a component kind of defines
the behavior of all its children in a
simple application just the route itself
can be the container and everything in
between is really just a component for
presentation so it's just a way of
taking the data at that level breaking
it down to something that makes sense
and then rendering to the screen and
declaring what children you want the
other thing is to have like form
elements are a good place where you want
to use state in reacts this idea of
uni-directional dataflow is very common
and there's also the Redux framework
which allows you to add extra features
to this paradigm but it becomes a little
bit expensive to kind of always go all
the way up to the top so in a form when
you want to validate the input that's
only something that logic is only really
relevant to that form input and then
that says I would probably
here's what I tend to call a
self-contained component where you do
all use the set state to update the
component and then when the validity of
the component changes then you can
propagate it back up to the root so how
does react native work so this tends to
be a question that gets asked a lot when
people kind of come across react native
we've had for a while solutions like
Cordova which use a webview and then
some C bindings to then call into the
framework react doesn't actually use
this reacts is actually mostly native
code only about 40% of react native out
of the box is actually JavaScript the
rest of it is the C++ and C which is
common across both the platforms and the
objective-c in Java a lot of the
objective-c in Java is binding code for
the native platforms so when you compile
a react native for Android you only get
the C and Java code and vice-versa for
iOS so the way in which this all kind of
gets brought together is that the Java
Script kind of lives on its own thread
soul is in the JavaScript Fred and then
we have a C++ thread in the middle and
then the native UI platform living on
the main thread and whenever JavaScript
wants to do something so when it was
update the UI it will send a message
across to the C++ to then communicate to
the native platform that it wants to
update the user interface so on both
Android and iOS of course we can't use a
webview we're actually using the Jas
core which is the actual JavaScript
virtual machine the powers Safari in
both mobile and desktop because the
Safari may not the sorry the J's core
may not be as up today is what you'd
expect react native comes with babel Jas
out-of-the-box if you're not familiar
payable Jas
it's source-code transpiler which takes
newer features of java scripts and then
emulates them in older versions of the
runtime javascript doesn't actually have
any versioning so you it's really up to
the runtime to kind of you have to
inspect your runtime to make sure that
it's the version you want and the only
way to do this is to ask for functions
to see if they actually exist so
unfortunately a lot of that's taken care
of for you so we've seen view a few
times now
so in react native we are using actual
native UI controls so the base component
that uses like view and textview will
actually bind to native UI components so
in iOS u they will usually have a UI
view some components will bind other
things such as like UI controllers and
things and the Android was using the
androids native view itself now to get
started if we act now if you don't
actually need any of the tool chain
you don't need Android studio don't need
the Android SDKs you don't need Xcode to
get started we can use this create
reaction native app from NPM so if
you're not for me if M p.m. it's the no
package manager so if you familiar
things like chuckle your brew or you get
that's pretty much what NPM is and this
work so in this case I don't actually
have any King I don't actually need
anything installed to be able to run the
app in this case I'm using I have the
iOS simulator which means that do you
actually have Xcode installed but you
could plug in a real device and actually
get it running so you can also see that
if you get something wrong it doesn't
actually crash the application it will
actually tell you what's wrong and give
you a chance to fix it in this case
we're gonna text has to be inside a text
XML tag so we have to do that and that's
using an app called expo so expo is an
application where it has all the react
native code bundled with it already
and you just need to send across your
bundle JavaScript it will then unpack it
and then run it on the device if you do
want to go for the full tooling so you
want to compile the projects you need to
install the react native CLA and that
gives you all the tools you need to be
actually be able to compile a project
and release it to the App Store so expo
has its own kind of virtual app store
inside the app so you can actually
release a kind of beta product about
actually having to go for the entire
process of going through the App Store
release process apples one is a little
bit challenging Google ones is a lot
simpler so you know I have to go for
that expo will help you in that regard
as well so react native uses styling
which looks and feels very similar to
CSS in this case we're setting the
background color and we're using flex so
if you're not for me what flex is
flexbox is a layout specification which
originally was in the web but we're now
seeing implementations for native
platforms because it's the algorithms
and the flexbox are quite nice to be
able to effectively layout stuff in the
cheap cheap man
so in this case we've got our parent
component which we're saying is a flex
one so flex one says I want you to fill
all the available space that's available
to you and if we specify siblings with
Flex values as well it'll actually kind
of add them all up and then give you a
ratio so in this case we have the first
one is will be a six two six and so on
to end up with something like this so
it's creeped our falinda structure
everything there's a little bit of a
drawback in that the style is similar to
the classes you tend to get this in CSS
as well so there's a few solutions in
the react for web which try to allow you
to have a much more dynamic flow by
assigning the styles it's kind of hard
it also makes the XML a lot more
difficult to read so in which case I
strongly suggest that even though you
might just begin start off react native
install style components because it
gives you a much more flexible way of
creating themes for your application so
the back tick here is a very JavaScript
thing and it's called it's a string
interpolated function you can't Google
this it's like trying to Google Haskell
symbols sometimes I think we need like a
Java scripts kind of look up for some of
the bizarre syntax that we get the
language is becoming quite big now one
the other reason I strongly recommend
style components is because you can
create these base themes and then you
can extend them but only that but it
also means that when you have a style
component it actually creates a
component for you on the fly so you can
now start to have much more semantic
kind of XML hierarchies rather than just
having nested views with style tags all
over the place you can start to have
almost kind of readable kind of
structure to your application
so there's there's two ways to do lists
of data there's actually a third way
called a list view it's kind of almost
officially deprecated now but you have a
small set of data with flexbox you can
kind of layout things in a nice vertical
manner of tail easily and cheaply so for
small sets of data for a list I'd
probably choose a scroll view if you
need a much more larger set or kind of
infinite scroll the flat list and
section lists are the official ways to
do any kind of lists so this is just how
we can use a flat list that's the API is
fairly simple we have a render function
and then we just give us some data now
react native doesn't actually come with
navigation out-of-the-box comes with no
navigation out-of-the-box this I kindly
goes back to the kind of ideal that
especially on the web react is a library
not a framework so everything is kind of
a choose-your-own-adventure and react
and this is also true and react native
in fact when I started learning reacts
this exact half this exact thing
happened to me at about six months into
my journey they changed the official
third-party navigation library and
there's not just one of them there's a
few of them so react navigation is kind
of like the default one they suggest for
everybody and it's all done inside
JavaScript so if you've used the MVC app
it's using react navigation but because
it's using react navigation you end up
with some odd behaviors so if you switch
the days you'll notice that the scroll
view remains in the same place and
that's because reactors trying to be
helpful and that it's trying to save
having to make the app scroll so if you
wanted to have that more kind of neat
behavior you would have to tell that
tell the navigation that you also wanted
to scroll up to the top when you want
change the days there's Wix navigations
- Wix I believe a fairly big consultancy
so they've probably got the most
complete navigation solution so what
they've done is they've built a bunch of
native navigation components
and then builds a bunch of bill for the
JavaScript bindings for you
Airbnb probably have the most well-known
native implementation but if you
actually go to the github page they tell
you to go use Wix because they haven't
actually completely open-source their
own solution yet and this other stuff
which is very specific to them which
probably isn't very good for a
general-purpose application navigation
if you are like developing for iOS that
native iOS navigation is really good but
it doesn't work in Android so kind of
defeats the purpose of trying to be
cross-platform so react navigation is
probably the easiest one to get started
with and out of the box that comes a
free kind of navigation dynamics a stack
which is you can generally think of it
the same way you have like an Android
application we get from screen to screen
tabs tabs is quite nice because you can
actually stacked them so if your tabs at
the bottom and at the top you can have
both and then you've got the drawer out
which is your standard kind of click on
menu comes out at side of the screen so
the stack navigation supports the idea
of titles so you can have both dynamic
and stake titles so the dynamic title
when you navigate to a screen will pass
in the props and inside the props the
you can specify data that gets passed to
it and instead of being in this dot
props you have two dango props
navigation state parameters users this
tends to happen a bit and reacts
especially if the unidirectional flow
you tend to have these very large
objects and the hole generally you want
to have it so that your UI sits at one
level of this tree going down so this is
how we can set up a navigation stack so
we just it's just a JSON object by
default it will give you the first item
in the JSON object if you want to
specify in this case the profile screen
has been the first item you pass that in
as the second parameter that you need to
specify with
so the reacts navigation is also a
component so you tend to find that a lot
of react API is things tend to be
components and this is so that you can
mix stuff into your application without
having to kind of go outside the react
paradigm which is that pretty much
everything lives inside the render
function so if you want to go back again
that's on the props object so navigation
is only passed to the direct child of
navigation so if you want like the
grandchild in a navigator tree so if you
have a navigation screen which has
several children and the third child
down that tree has a button you have to
pass the callback for for calling the go
back calling the go back function or the
navigate function down the tree because
navigate won't be passed out and by
default unless you pass down all the
props in the tree again
that's a duplicate slide
all right I mentioned Redux a few times
Redux is a very nice implementation of
estate management system even the
unidirectional data flow kind of
management but it also tends to be
incredibly verbose because what it
effectively means is that because in the
unidirectional data flow you have all
your data at the root you also have to
have all the actions that can possibly
happen at the root which means for every
possible action your application has you
basically end up with these giant switch
statements throughout your application
they're Redux is quite nice and that you
can split these up into multiple files
but again you still have lots and lots
of code that you need to do to do what
normally used to be fairly simple things
and but it can become helpful if your
application becomes really really big
but generally I try to keep the kind of
state management to a kind of per screen
level and in a mobile application is
only so much data you can put on a
single screen so that tends to work
fairly well so set state in the root
component and has probably good enough
that's kind of what you get with free
Docs you have much larger application if
you need to be able to handle
asynchronous flows they would recommend
using rxjs
I would say it's probably bit easier to
kind of and less verbose to use it for
doing kind of asynchronous flows and
being able to kind of get the data back
in a sane manner
it also supports cancellation which can
be a little bit tricky in Redux so you
still can't get away from the delete or
bill cache and start again so she do
have trouble with react native
application blowing away the cache is
probably the best way the chrome
debugger helps but be careful because
when you're using the chrome debugger
sorry for context you can't actually
debug on the navy devices so what react
native allows you to do is run the
application in the browser and then
instead of running on J's corner of the
device it's going to run in v8 in your
browser but it's a different virtual
oisin so the behavior may change so if
you're trying to bug something and the
bugs aren't happening in the current
iboga but they are in the app then
you'll find that that may just be due to
something right so I've been talking a
bit about the kind of greenfield
experience that you get with react
native for the most part reacts and
react native is fairly simple like
navigation is pretty tricky state
management is a bit hard but you don't
have to start from the ground up again
and react native react native you can
actually take just a single part of your
screen and have that just be a react
native component so in this case I'm
just going to use like little simple
Android application and to get started
we just need to make a package.json and
the means they set up the start script
which is going to the start scripts just
going to package up all the JavaScript
for us install react and react native
and then we just need to configure it
inside the Android project I have this
in here because I actually ran into a
slight bug where it was installing the
wrong binaries in the node modules so if
I specify the exact version of react
native that I wanted it would actually
go up to the Internet and pull down the
correct version and again we just need
to tell the Android build tools where
the JavaScript lives the way in which we
kind of tell the Android where our
components are is by a string name so in
this case we're just going to have a
component which is going to call counter
and then we're just going to register it
with the at the react native application
then we need to create the react native
instance manager so this is the thing
that runs the JavaScript virtual machine
on the device for us
so the packages is probably the most
important thing so this is the these are
all the native dependencies that we want
for the application the rest of this is
kind of just boilerplate that we need to
do then we need to create a view in
Android so this is just the kind of a
layout where we want to have Reax be
rendered into no I actually had this
working earlier where are you alright so
this is a little application so in this
case it's got this button here and I'm
just switching out the views natively
Android studio right you can see here
that that container is the bottom view
where we have everything and when we're
clicking the buttons we're actually
replacing the react native use with the
different ones so they're still sharing
the same react native instance manager
but we're swapping out the views that we
actually want to be using in this case
we've got our deke our decrement counter
where if we click it we can see that the
counter goes down but all we're doing in
the Android side of things
is that we're just updating the Android
data base to say for anything to say
take the existing counter and then
decrement it by one we actually have to
go into the native code to see what is
actually happening so what we're doing
is we're actually polling the android
framework I can't read that the back
nope alright let's turn this up 18 us
about that the Android thing earlier
all right as that oh good oh cool so
we're just going to be polling the
Android native UI oh sorry the Android
native code for an update of the
database and every second we're just
going to update the react native UI not
the most efficient way of doing things
but it's simple enough for a demo it
works consistently so the way which we
have to do that is we go into here so we
just need to extend the Reax context
other let me put this so you can read it
it's a presentation right ah that's much
better
all right so we need to extend the react
native based context java module and
then we just need to override two
methods well we need to over a one
method which is to give it a name and if
we go back to the Java Script we can see
that the native modules has an object on
it called MT counter module so that's
this here so everything's kind of
connected by strings because we're
crossing a runtime there's not really
anything else you can really use and
then we just need to register have this
annotation which adds a method to our
module in which case we're accepting
your callback we're reading the value
from the native android database and
then we're giving the callback the value
so that when this callback does fire
we're just going to update the state
with the new counter value
so you dick room yes let's go one second
poll so if we click it too fast you
actually see it jumps so there's more
efficient ways of doing it but that's
the nice little simple way to kind of
get things going alright so one of the
downsides about react native is that
we're using javascript and i spent a lot
of time in java Android and xamarin so I
spent a lot of time using static
languages and Java scripting language so
does anyone know what happens if you
plus two empty arrays this is the
interactive part of the presentation
feel free shout out right now
it's empty string so what about an empty
array plus an empty object it's object
of course now plus is associative so
shouldn't matter that we change the
arguments around so does everybody know
well if we happen if you have an empty
object plus an empty array come on
anything zero so what about an empty
object - an empty object now this one is
correct this one does give a correct
answer it's not number and then we get
things like this we're like we're
comparing their true is equal to any
string which it contains some data so if
isn't true wouldn't be empty to an equal
empty string and the reason we get this
kind of stuff is because JavaScript does
have a type system but it's a runtime
type system so it works up the types at
runtime so when you go plus it doesn't
know what the types are on either side
and if you use the double if you use
double equals and boolean equations it
will actually coerce the types into what
it thinks it can actually compare so you
can end up with some really weird
behavior and because the coercion is
just this big switch statement it just
finds the first type it thinks it can
compare you
is that and then for the second argument
does the same thing so you end up with
this is really strange behaviour so we
get areas like undefined it's not a
function that is true because undefined
is a type and function is a type and
they're different types so yes undefined
as my function is most hopeful error
message but sources it's not wrong all
right let's talk about type systems so
react native does have some typing that
you can use inside JavaScript so if you
don't want to use language like
typescript or something like that you
can actually enable it and it will just
turn it off automatically in production
but the way in which it works is you
have to import a library and then you
create a JSON object which documents
what the types are that you're expecting
for things so in this case the prop
types is used on the props so when
you're passing data into your objects
you tell it what information it should
expect if it expects things that doesn't
think should be there it will actually
throw warnings into the console so we
can specify optional strings required
strings we can do union types we can do
objects all sorts of fun stuff but I
prefer type scripts you can also use
flow but with typescript we can still
use JavaScript we don't have to have a
complicated bill chain but we can also
have types so we can specify our
variables having a number a bit of a
number type and it'll compile time will
validate all our code for us by default
JavaScript is does not expect nulls so
if you do want to have something which
is null you're integrating with a
JavaScript library you can specify
something's being knowable by default
types are actually not knowable you've
got interfaces and types interfaces are
extendable types of fixed hierarchies
you can do function signatures you can
do type Aylor seeing all that kind of
fun stuff this is probably most useful
feature I find is you can do actual kind
of type unions so you can specify a
series of strings a lot of JavaScript
libraries will use string
this way passing flags this can be a
little bit annoying because if you make
a spelling mistake it's not obvious as
to where they're it comes from and this
is somewhat specific to type scripts but
type scripts this what's called
structurally typed so the argument that
you pass in just has to satisfy the
minimum now of parameters that you have
he's passing extra parameters they will
just take them like you just need to
meet the minimum requirement of a
contract you can actually overfill it
theater contract and it's perfectly
happy you can type properties in an
object that's fun you can extend all
right let's talk about type script and
react so setup type script in reacts we
just need to tell the typescript
compiler that we want to use JSX which
reacts and that we want to use the note
the module resolution strategy for node
because when you're compiling type
scripts you compile it as if it were a
node module type react native doesn't
come with typescript out of the box
Facebook makes flows so there comes a
flow so we need to install the
typescript bindings and then for the
props we can just specify over a type or
an interface and then in the generic
parameter for the component then pass in
the interface or type that we expect it
to be given for the properties in this
case we're guaranteed to have the title
and the speaker name in the properties
here state is the same so it just
becomes the second parameter you don't
have to specify them by default by
default it actually takes an empty type
if type scripts not strict enough there
are languages like a camel and reason
there's also fable I'm wearing a Haskell
shirt there our high school the
JavaScript compilers and they're in
various states of support so but these
two frameworks I would say are probably
the best thing that you can get for the
strongest type safety in a JavaScript
runtime and the JavaScript joke examples
are from what the wet talk so if you
haven't seen it go check it out
alright so performance so yes javascript
and react native is still single
threaded if you take more than sixteen
point six milliseconds on a blocking
operation you
start to drop frames but one of the good
things about javascript is it functions
the first class so you can make
functions over functions over functions
and this worked well in the kind of
event loop model that JavaScript does
have so I said before that's the
ListView is kind of deprecated and the
reason for this is that it's it's API is
really complicated it's very slow to
render at first and it doesn't do view
recycling so we can you scroll down in a
ListView it's actually creating new UI
elements all the time and if you've ever
used a really old Android application
you can see that really old Android apps
didn't have this as well or kind of yet
the way in which you've got various like
he was basically cheap hack in the
Android API
they have since fixed that so but the
flat list and section list actually
provide you with few recycling so there
they have constant memory usage because
you're not creating new types of views
all the time it's just going to take an
existing view and recycle it and just
assign new data to it and as you saw
before earlier in the presentation the
API was really simply just go Brenda
item that's about it so react it become
with Flex box and things it become it's
really easy to have these really nested
trees and hierarchies is this a such an
issue on iOS but an Android this becomes
a real problem Android doesn't really
deal with nested hierarchies and UI
components very well at all so things
like immutable data a pure component
will check the references of the props
that you pass it so if the reference
equality is true it will skip any
rendering of itself or its children if
you're not using the pure component you
can there's a callback which you can
specify the Equality check so you can
actually tell it how you want it to
compare data coming from its parent so
if you're rendering everything from the
top
and each of the children in the second
tier takes about two milliseconds and
you ferti it takes three milliseconds
you can end up started dropping frames
quite a bit and this is where kind of
having strategic containers we're having
them update state further down the tree
becomes helpful so having a Redux model
in a mobile application is maybe not
always the best solution react native
also has what what I call kind of view
reduction so in this case I don't expect
you to read a little stuff and left with
them I got this nice pretty diagram
where this is all the visual information
that we want to render and what react
will actually do is actually work out
the positioning based upon the kind of
non presentational parents well then
work out where the children need to be
rendered at and then kind of throw the
parents away when it sends a message
over to the native interface about what
it wants and where it wants the elements
and the way in which it does this is it
works out what doesn't actually have any
kind of visual representation so any
kind of view component which is just
used for positioning gets eliminated and
we can then get end up with in this case
we've got two tier D so we could
probably optimize this to be a bit a bit
more and have it so that it's just one
tier and because what reacts Nev will do
is it will use absolute positioning so
it works out where everything needs to
be and then just renders it so
JavaScript text care of all the
positioning stuff testing testing
in react native is so much you see an
image right if anyone has ever done
Android before they know that Android
doesn't actually let you create the your
UI components it will create them for
you and then kind of give you a call
back but you can't actually control how
the UI components are being created in
reacts and in react web as well as in
react native we've got jests and what
jests allows us to do in fact the
documentation for this is actually a
little bit better
I still have this in Chrome noop uh yeah
so again because to react everything's
library we just import the library let's
just make this full screen so this is
our little component here and the way in
which you test it is you have it take it
to adjacent and then you have it save
that tree for the first time so if you
have any kind of boolean operations it
will kind of evaluate them and work out
what the difference in the trees will be
and then the output of this is all the
kind of inline information that you
would expect anyway so it's quite nice
in that you can kind of render out what
you expect your application to be the
first time and then sequential changes
to your code you can then compared the
trees against it so if you're changing
the application in some way Jess will
then tell you that the application
structure has changed fundamentally
between releases the only other so one
yes so now for a quick demo I think
let's see all right so what this slides
here so one thing which I kind of showed
earlier let me turn off this the
annoying things about react is that you
are if you're running one bundle off for
the application you can't run multiple
at once
let's say delete sorry I must have
closed it all right so this is that this
is an expo application so I'm already
running it all right okay
so now if we go rusty yeah so if they
default we can actually manually reload
the application every time oh we can
actually actually have this thing called
live reload so if we just turned off for
the moment we can see that when we when
we change the application nothing
happens but if we enable live reload
every time we save the file will
actually update our application so both
this and the fact that for the most part
we don't have a compile step means you
can kind of get really far with an idea
for an application without having to
spend lots of time setting up tooling or
kind of learning too much like the weird
things about ios and android at the same
time yes and that's that's really react
native any questions yes
so there be so what the question is kind
of like why would you do it like a an
existing native application yeah yeah so
what I'd say the benefit is that a lot
of screens like especially like setting
screen since that I kind of really high
like low value to your application so
why would you be writing them twice for
both Android and iOS and as you get into
bigger companies the whole thing becomes
talent acquisition and retention becomes
incredibly expensive there's not that
many mobile developers compared to like
JavaScript developers so you can have a
few native developers who really know
how those native modules work and then
the JavaScript developers can just do
the simple kind of UI stuff so air B&amp;amp;B
now actually uses react native quite
extensively in their application so if
you ever used the air B&amp;amp;B trips part of
the app most of those screens are in
react native and the reason they went
down that path was just too hard that
like also I think uber has like 100
Android developers and about same number
for iOS so that's a hundred developers
and both sides that you can't share
anything with whereas if react native
you can start to share not you'll have
to share everything you'd have to make
the entire application react native but
you can start to share those components
which don't need to be on the metal as
it were yeah sure
yes this is your control yeah yeah so
it's using a web server running locally
so when you change the file it's then
sending in event over and it's causing
it to reload the JavaScript file yes so
the JavaScript doesn't get compiled down
so the JavaScript just no it knows what
native component wants in the UI side
and then sends a message across the C++
bridge and then all that Objective C
code we saw in that wrecked native
breakdown diagram that has all the code
for then taking that message creating
the view and then positioned on side the
screen that's right thank you
yep
so reacting it's a job scripts still
single-threaded so it's it's really good
if you're IO bound but if you're CPU
bound on any kind of thing it's really
not suitable but the good thing is like
if because if we act native you can kind
of mix and match so you can have a
native you inside a reactor you inside a
native you insider reacts you so if you
want to do like video rendering or video
processing on a phone you can have all
the video stuff done natively and then
you just give it a block on the screen
where it's just going to render
everything
yes I gaming up like you'd probably be
using something like energy but you
could possibly even have it so that
you're like Settings menu in the unity
app is actually running a react so when
you go to like edit settings or
difficulty stuff you have that and react
and when you hit save or then sends it
back across the unity and then the game
will then keep going so the game's doing
all the kind of computationally heavy
stuff and you got react native doing all
the kind of simple IO bound operations
yeah the the I would say the community
is quite large so if the component you
want to be able to do something it's
probably already out there already I
guess do you the other challenge is that
because react is still fairly young like
I mean compared to xamarin xamarin
nothing started in 2007 with mono touch
react native is like a few years old so
I think for only been a few years old
it's gotten pretty far pretty quickly so
as time goes on we're gonna see it
improve alright thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>