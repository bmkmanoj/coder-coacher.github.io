<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Talk To Your Microservice Via a Chat Bot, not UI  - Yegor Bugayenko | Coder Coacher - Coaching Coders</title><meta content="Talk To Your Microservice Via a Chat Bot, not UI  - Yegor Bugayenko - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Talk To Your Microservice Via a Chat Bot, not UI  - Yegor Bugayenko</b></h2><h5 class="post__date">2016-06-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/S1M3riYHdEU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I see many of you have the same jacket
as I do so thanks for coming the talk
will be about chat bots and micro
services and a few questions to you to
understand who actually you are how many
of you are programmers oh great and
DevOps none almost okay good and
managers not so many great because i had
an impression that the conference is
more than on the angle of the management
side but now understand it's more
technical which is good because the talk
is going to be quite technical but i'm
not going to show any code examples i'll
i'll give more than the one more of the
overview on the architecture side i've
been talking about this chat bots and
micro services for the last year and
every time I'm talking I'm trying to
convince people that this is a good way
to go this is the right architecture
this is the future that chat BOTS should
be everywhere and we're going to we can
design our services as chat BOTS but
today I decided to give that the dark
side of chat BOTS so I'll give you
examples of how we how many problems we
have with this chat BOTS with exactly
actually one chat bot which we designed
about two years ago and i'll show you
problems which we have which is going to
be quite interesting because i never
talked about that it's just the first
time and I'm a little bit nervous but
how you're going to react so a first of
all explain what kind of chat but I'm
talking about the system is called ruler
who have you actually heard about it not
so many okay the idea is that that's a
hosted system it's a it's a chat bot
which talks to you if you're a
programmer you have a let's say it works
on github so you have a github project
and you create a ticket and github the
issue github issue and then you start
talking to the system by saying at sign
then the name of this rotor this year
older and then you say some some keyword
for example you say hello you say rules
or hello and the chat board is listening
to everything what is happening on
github and as soon as this message shows
up the get that the the chat board rules
are answers you and says hello how are
you you can give me this kind of
commands and we support just basically
three commands merge deploy and release
so let's focus on
boy so you have a github project and you
have some code in there and you want to
package this whole code create let's say
it's java application you create this
jar file and then you deploy it to
production so you say rules or deploy
the ruler starts on the server on its
own server starts a docker container
gets your source code from github
packages it and puts it to the
production server according to the
script which you created before so you
have to create a script which you put in
your repository this group which
explains how this deployment should work
so the rules are basically gets your
code packages it and pen and puts it to
production server quite simple the
difference between this system and all
other systems which does almost the same
is that it works as a chatbot so there
is no control panel so you don't go
anywhere and say deploy my stuff you
don't you don't have to log in anywhere
else everything you do is you go to
github you create an issue there or you
stay in the issue you have already and
you talk to this system over there so
you don't need to go anywhere else it's
a chat wall it works like an L I kept
like a like a system which talks to you
in the conversation of in the
conversation thread which is github
issue that's the difference and the main
architectural difference is that that's
what I've been talking about for for so
many times is that the key difference
between this architecture and the
traditional architecture when the system
stays aside for example from github and
you have to log in there and say do
something with my with my github project
and then you control the execution over
there you click some buttons over there
you don't talk as it to the systems
through this dis chat communication
channel but you use the control panel
the key difference is that in our case
this ruler system works as a client so
it connects to github and it works as a
client instead of being a server where
you have to connect to and talk to so if
you compare this system for example with
Travis CI or a circle CI or any other
continued integration services or
Jenkins every time it's some server
which is expecting your requests waiting
for you to connect to them and helping
you out being a server in our case and
the key difference and this is for all
chat BOTS the very important advantage
of the architectural advantage is that
every each chat bot is a client
not a server which is supposed to be
online twenty-four-seven listening to
your request instead it's a client who
is connecting to this communication
platform which is in our case github but
in other cases it could be slack for
example or IRC or any other platform
where you basically post messages so in
our case this chat bot and in all cases
it's a client not a server and this is
the key difference which makes so many
which give so many advantages for for
the architecture and basically there's
three benefits which are the most
important in our case why we started
doing in a chat bot two years ago
basically I did is I I created this
system and and there were there were
three main things which which were
driving me and that's why I decided to
do it in this way without the control
panel without being a server but in a
chat in a chat bot format the first
thing is that there is no user interface
and that's why it's so easy and so
simple to develop and create there's no
user interface no buttons no login login
page no front end there's nothing like
that everything is just a back end which
talks to the to github issue and post
messages and reads messages so there is
no need for me two years ago there was
no need for me to design a complex you I
with this good-looking interface CSS
HTML the things which are not really
professional at so I'm a Java developer
I don't know how to design that the
good-looking UI and it was not necessary
because the for the chat board there is
no UI which is a big advantage for for
the architect for the architects for
programmers they don't need to be you I
there's no need for DUI and a UX design
at all it's a chat bot which just talks
post test text messages and gets text
responses back and that's it that was
the big thing number one which which is
why I decided to go this way and that
saves me a lot of time the thick the
second thing is that like like you
imagine what's going on I get the when
you when you asked me to deploy
something I get your github sources I
need to package them I need to run
docker container I need to do some work
on the server side then I need to deploy
that it takes some time sometimes a few
seconds sometimes a few minutes
sometimes an hour and then I have to
reply back to you and say what's the
answer was there
what actually happened there so it's
quite time consuming operation and to do
it right in the UI for when you're
sitting in front of the monitor and
clicking buttons and expecting me to
answer you well immediately it's quite
difficult so you're clicking the button
you expect this button to react
immediately and say something back like
yes the server was started or the docker
container would just started a second
ago but I can't do it in sin half a
second it takes sometimes a few seconds
and take sometimes like more maybe half
a minute even to connect to the server
and start this docker container so it's
time consuming operations which do not
go along well with the UI so the idea of
the UI and UX in general is that is fast
so it has to be fast people have to be
able to click there and immediately get
some response back but in our case it's
not so easy because there are servers
involved and sometimes many servers it's
it's a back-end operation so but in the
chat bot we have we don't have that
problem because you post your message on
the github on them on on the on the
thread on this communication issue you
post a message and you can wait for a
minute for the answer you can wait for a
minute you can wait for two minutes it's
okay for you to stay and wait if you're
if you're talking like that in a chat
bot mode which is an advantage I think
for all chat BOTS for all of them
because there is no UI you don't need to
be fast when you design your chat BOTS
you don't need to design it really fast
you don't need to be responsive you
don't need to answer in in 50
milliseconds you can't really answer in
one minute it's acceptable the person
who is posting messages to Rueter in
github they are usually expecting an
answer within a minute or maybe
sometimes two minutes a few milliseconds
there and here or maybe a few seconds
don't matter to them if that was a big
advantage again because I don't need to
worry about how to be immediately out to
answer you immediately when I'm still
talking to the server and try and do
something there that's the second
benefit and number three which is also
really important in this case when you
do something with the server you want to
track your your execution flow you want
to keep log of everything what's
happening you want to you don't want to
forget that and when you have the
control panel where people log in there
and they click the button and they say
do something with me or get my coat
package it deployed you need to think
about how to
to record everything what happened there
what commands were given how they were
executed why they failed and everything
so it's it's not so easy to again to
design this interface with you go to any
of these CI systems you see the button
build when you click the build or run or
whatever it builds and you have the log
of this last execution but if it fails
then you have to build again and there
is not really direct connection within
these two builds so you don't know what
exactly was changed between build number
one and build number two so it's not so
easy to track everything and make it
traceable in case of github and in case
of this chat board and all chat BOTS
there's a chat which goes from start
till the end and all commands you post
there and all answers my chat board is
giving to you everything stays in the
same line so you can get back to it in a
year and see what happened a year ago
how we try to deploy our github project
to to production or to maven central for
example and why we failed three times
and then we succeeded on the only under
the force attempt so you see everything
we tried and then the answer from the
chat bot is you know guys we just failed
and then we change something in the code
you would connect this we attach this
commit to the to the issue and we see
what we changed and we try again then we
commit again again and then it may be
like a hundred messages and then it's
there's a success in the bottom so the
same traceability it's really difficult
to achieve if there isn't if the
architecture is not the chat bot
architecture so that was number three
the benefit number three which for me
was very important so all these trace
abilities provided to me by github so I
don't need to build it myself I don't
need to build this all this
functionality of tracking what's going
on of seeing these messages of seeing
people communicating to each other of
this authentication and authorization
login logout all these functionalities
just provided to me by the communication
platform which is github all I do is
just creating a client for this github
which talks to the communication
platform which is github issue and just
just post messages and gets messages
gets answers back
so that was really important the three
things which really you know was
motivating the architecture to make it
in there in the way in the chat bot way
but at the same time we've got I we've
got problems we've got problems which I
was never talking about before and now
I'll try to highlight these problems for
you seven of them there there were many
more probably but I i want to show self
seven in the order of importance first
one is not so problem it's not so big a
problem and then bigger and bigger is it
clear so far up to this point how it
works technically right okay so problem
number one which I'm showing you the
problems which I faced when I try it
when I started to design that I face
that problem and I was solving them
problem number one is that when you have
this chat bot and the chat board is
supposed to talk to people sometimes you
make mistakes in your chat BOTS
sometimes your chat bots will post some
garbage into the communication channel
so people start talking to the altar
they say for example deploy my code and
there's a bug in the code in the rules
are itself and it keeps saying like yes
I will deploy it now yes I will deploy
it now yes I will deploy it now and then
you see like a lot of this garbage
messages and if it's for example night
time then you come back in the morning
and you see like 50 messages there and
that kind of garbage like people don't
really like to see and they immediately
realize that there is some problem there
and they this is really annoying and you
don't want to see really embarrass
yourself like a developer and then so
and it's inevitable because you sooner
or later you will have bugs sooner or
later you have bugs which you don't can
predict and this is the way they may
show up so basically we introduced two
solutions the first one is we create the
filter which was I'm telling you all
this may be because you will design
something in the chat bot formats so
maybe this information will be helpful
for you I'm just sharing this solutions
how we solve that first of all we
created a filter which before you post
anything to the chat conversation it
checks how many posts from myself from
from me the altar were posted before if
the number is
four or more it doesn't post anything
and just just keeps you know stays quiet
and reports about to to admit to me so
for was the maximum if there is more
than four messages and probably
something is wrong so I'm not supposed
to say too much unless somebody's
replying to me so I'm just basically
ruler is basically checking the last
messages if the last four is from me
from realtor then nothing nothing is
posted then that's one filter and
another one is if you see it also checks
the previous posts and if it's for fines
and it knows exactly what is supposed to
be always going to post right now it
compares the text which is going to go
right now with the text stay there so if
the texts are the same then again it
understands that this is a duplication
it doesn't post for example the same
filter exists on twitter if you want to
tweet something and then you will try to
it exactly the same the Twitter will
block your post so if you by mistake or
through the API or try it sir from your
phone if you tweet exactly the same text
twice Twitter will just reject you so we
did exactly the same so if you post
twice ruther by itself it just tries to
prevent this garbage from happening from
from the communication channel that was
one problem another problem the problem
the two is a bit more complicated is
silence it's not the garbage it's the
silent the quietness so when somebody
starts talking to alter there's no
answer because there is some bug on the
on the server for example if it's you I
if it's a control panel then you go to
control panel you start clicking the
button there is no response the server's
down you immediately understand what's
going on in this case users cannot
really understand what's going on
because they are expecting an answer
usually for let's say in one minute or
two minutes but in the case of the error
they post something and then in two
minutes there's no answer in three mins
there is no answer and then they don't
know what to do you cannot show them
some page which like hey how about you
wait for some time or email us or let us
know so there is no no conversation with
them there is no point of contact with
them and this is a problem with chat
BOTS with traditional architecture you
have a page you have a page where people
can see something and then you can go
show them some status even if your
server is down you steal your your
your name server points somewhere where
you can you can show them SAT least some
static HTML page in our case there is no
way to show them anything because if the
chat bot doesn't answer it doesn't
answer and it for all chat BOTS the same
like if you design a chat bot for
facebook is it gain people start talking
to you for some time you answer and then
you don't answer only that means trader
can understand what's going on because
there is no way for the user actually to
contact you anyhow because there is
nobody in the chatroom and boom there is
no point of contact how we solve that
well we had to create a page we had to
create a page like the web page which is
ruler calm and on that page we just show
the status of how good we are right now
and internally this chat bots are
probably all the chat bots are designed
that way it's it's a cycle endless cycle
inside its java application so it's an
endless cycle inside which connects to
github checks for all notifications all
the new messages for me does something
with all of them and disconnect again
connects check all of them does
something with each of them and
disconnect and this cycle goes every
minute that's how we do it every minute
because we cannot do it more like more
frequently because github will you know
prevent that and we don't want to make
it slower because you know we want the
responsiveness to be one minute or maybe
two minutes maximum so we around this
endless cycle every minute would connect
to github asking do you have anything
new for me and the github gives us
notifications so when we start running
that let's say there is some bug and we
can't run the next cycle so we stop
trying and we just stuck stuck and the
cycle is not going anywhere and and what
we do is that we create a in memory we
create a simple pool of a simple array
of statuses of the last runs so every
time you run you put some short piece of
information to this array like the time
when I finished you run it again you put
the time when you finish your run of the
game you put the time and then on the
Status page we show the people to to to
the public the situation of this array
like what was when was the last run of
the hour cycle and if the run the last
run is longer it like the time between
the last execution of this cycle is
longer than 10 minutes then we show that
boom there is a problem like we put it
in red and say it something is wrong
on our system which is an information to
the user that something is wrong and
probably you need to wait or let us know
or email us that's the only way I think
chat BOTS can be designed because like
I'm saying again from the communication
the normal interface from this channel
where people talk to us there is no way
to understand that there is something is
wrong so we designed this front page and
also we can figure this I don't know
which which system you're using we're
using status kake.com which is the
system which you can configure to check
your website it's free so it basically
every minute it pings your system it
makes the HTTP request to your servers
and if something goes wrong it emails
you or send an SMS to you or send you
some kind of notification they're
probably not there they're mini systems
like that we're using status cake so we
can figure a status cake to check this
the situation on the front page and if
something if the time of the last
response is longer than 10 minutes then
it basically gives us an alarm and I'm
getting them the SMS or something which
something goes wrong that's the only way
to do it I think the only way to do that
this to solve this problem of sudden
silence in chat BOTS problem on the
stream is it clear up to this point I
hope so okay from one to three verbosity
this chat communication platforms are
not designed to display messages of a
hundred thousand lines so they are
basically for for communicating
human-to-human like github issue or a
slack or IRC you cannot post well you
can probably but it's kind of look ugly
if it will look ugly if you post on
slack or on github issue the log of a
thousand lines everybody will complain
all the users will complain that you're
just taking like 15 pages of my screen
just to look at the log which I don't
need to see that much i want to see
probably the last 50 lines or last 10
lines or maybe the start so I don't want
to see everything but in our case when
you ask our system to deploy something
to production then we do it and then
there's a log generated sometimes at
10,000 lines of code so what do we do
with that so how can we bring you back
the information which is so huge that
was a question for us because people are
expecting to get
something back from us they're asking
our servers to do something for them and
we need to give them information back
and that was a question how exactly we
can do that in without basically
violating probably there's some I don't
know but maybe some rules on github that
we shouldn't spam them that much should
not post such a huge blocks of data so
the solution was to introduce some
standalone again standalone interface
for the for the for the chat bot so the
chat board talks to you in using
messages but at the same time sometimes
it post a message and says that exactly
what happened but there's a link which
you can click and go there and then you
will see the full log so we're still
talking to use chat BOTS but sometimes
we're asking you to go somewhere and
look at the website it's not the real
website is just the text is just a plain
text page but this plain text page is
somewhere else so it's it's it's a chat
bot but still it has like I'm saying
there are two basically two extra
interfaces one is to show you what's
going on because without that it's going
to be a problem of silence which is
unsolvable otherwise and the second is
another interface which shows you big
blocks of data which you cannot show
anyhow otherwise without basically
spamming and then knowing your users by
big blocks of data so that's that's how
we saw then sometimes we also do if
there's if there's something wrong
happened on the server we say that you
can see the log over there there's a
link but we also show the 50 last lines
of the log which helps people sometimes
quite often so we don't we're not just
saying that you can see the log only
there we're saying this is 50 last lines
which is more or less okay for you to
see in the text chat mode but the full
log you go over there and you find in
there so that's how we solve the
verbosity problem phone number for their
seven total problem number 4 is abuse
filters it is still a problem it's not
completely like fixed now so I think
most systems and get help for example
they are not really designed to be
intensively used by it through the API
by some BOTS by chat BOTS so when you
start posting a lot of messages there or
you will start checking this
notification everything
they have certain limitations that's
first of all so they do not allow you
two to make if i'm not mistaken five
thousand requests an hour so for every
hour you can connect to their api and
make the maximum of five thousand
requests that's the maximum if the if
the if the usage of the our system is
really intensive and we have many many
requests then we sometimes go over this
limit and github doesn't want to
increase that limit we tried we talked
to them they say no this is the limit we
have for everybody so it's 5,000 an hour
which is which could be a problem maybe
other systems have the same kind of
limitations but that's that's just half
of the problem another half of that
sometimes and they have many filters
inside which which they don't disclose
they don't explain how they work but
sometimes they just say we cannot
process your request right now because
you just triggered our abuse filter so
they think that our API our server is
doing something wrong and they shut us
down for some time sometimes for a few
minutes sometimes for a few hours and
it's unpredictable and you can control
you can anyhow I mean we tried we mail
them they say sorry about it when you
email them and say there's something is
wrong please unlock us and I mean remove
the ban they say sure of course we'll do
it right now but then in a few days but
now it happens like once a month it just
starts banging you starts blocking your
requests and nothing and you cannot do
anything so we're just receiving we just
receiving this silence problem the
server just stays quiet it can't work
because github as a platform basically
blocks us and doesn't allow us to
communicate with them so that kind of
problem I don't know exactly how it
could be solved maybe on slack also
something like that will exist maybe
they will also try because they need to
protect themselves they need to to
filter out the behavior which is not
really that which is not really the
behavior they expect but in our case we
do we intensively use the API we need to
check every minute we need to post
messages we need to read messages so we
use their API and they filter us out
sometimes and I don't know what's going
to be the good solution the only thing
we introduced the only thing we did is
that this limitation of 5,000 an hour we
just track how many requests we do and
if the number goes above 5,000 we
automatically slow
us down and don't run this cycle every
minute but we run it like every two
minutes every five minutes so we slow
down our own execution in order to not
go above the limit because we understand
it if it goes above the limit then it's
just a big problem and we from the API
we just receiving the 40404 or some some
really like error messages from from
their server which makes our software
really unstable that's the problem and
now the problem with conflicts even
bigger problem conflicts between two
three or many chat channels so let's say
we have a project and the github
projects and there are many issues and
in each issue the communication goes so
people start talking to rule tur from
one ticket and then from another ticket
and from another ticket in parallel and
we need to somehow resolve that because
we don't want to deploy from two
different from two different tickets if
I ask you if the program one programmer
asks me to deploy the entire code
staying in one ticket and then another
guy says deploy from another ticket I
don't want to start to docker containers
and deploy in parallel because that will
create the conflict on the production
server so I want to somehow put this
requests in the line in this like sick
sick when she ate them so they have to
go sequentially one after another in
order to avoid conflicts because we've
had that conflicts in the beginning we
didn't know about this problem we didn't
expect that and then we realize that
boom sometimes people actually do
requests in parallel and then these
conflicts appear later on production we
can't understand why because one of them
will receive the error message which is
really unpredictable and will be
difficult to understand for one
programmer why it happened but actually
happened because of another programmer
so you need to put these guys in
parallel but it's not so easy because
every time because you design your you
try to design your chat board as a
client which connects to the server asks
what needs to be done in some thread and
does it and then another thread it
connects again to the server gets
another notification and tries to do
exact right to do something else there
are two parallel threads which needs to
be somehow synchronized between each
other and this synchronization needs to
be I mean on the server side so we
trying to initially we were trying to
design
in our chat both as a as a stateless
machine which just does exactly what
needs to be done in one situation just
just do the work and close that and
don't keep the state don't don't don't
save it anywhere but then we realize
that it's not really not really possible
because because in order to resolve
conflicts we need some some locks some
mutexes some something on the server
side which will resolve them and inform
each other that you need to wait for
another one you need to wait for thread
number three because because it's
working on exactly the same project or
and exactly the same command so that was
that was a kind of a big problem and I
think it's common for most chat bot so
you when you talking to pin parallel to
two people you need to store some
information on your side on the back
side about the situation in general you
cannot be completely stateless you
cannot completely ignore the situation
you cannot just talk which is which
brings us to problem number six state
fulness so like I'm saying we were
expecting to make this machine stateless
and but then we realized that we need
some state fulness which is which is
which is not a problem if you design
your microservice in a restful like a
restful api and it's completely restful
and completely stateless in this case
the client connects to you gives you the
order tells you what to do you do you do
the work for the client you return the
result and you forget about the client
that's how restful api should work in
our case we try to do it that way we try
to design this chat bot the same way you
connect to the to the github you get the
notification you proaches the
notification you forget about it but you
can do it because for example give you
give a practical example that the user
says deploy my stuff and the chat bot
connects and say the command is deployed
and that bot says okay I will deploy
right now it goes to the mish to the
server it stars the docker container and
says do this work for me and then it
closes the cycle and it and it just done
I'm done I just started the container
and then it goes again I mean the next
the next run the next cycle of of
execution and it checks what's the
situation with the container it's still
working okay I don't do anything again
the next cycle it goes to the server and
says what's the situation with the
container but every time it goes like
this it needs to remember where is that
container so that's the state
the state between these executions on
the beginning on the on the first
request we just started the container I
have the container number docker
container number I need to save it
somewhere I need to save it and attach
this number to this communication threat
so I need to remember that when we are
talking the command was deployed and
this command is attached to container
number one two three and then on every
run I will check many many times what's
the situation with that container the
container is alive its alive its alive i
can check many times a hundred times and
then then suddenly with one point the
container is dead which means that the
command is finished i need to go to the
server grab the data from there all the
logs and everything about the container
why it finished I mean what what what
what's the result I'll get all this
information from the server and I need
to post that on the conversation and say
you know what the container is just
finish it took me one hour that's the
summary so in order to do that I need to
save the information about the container
I need to keep it inside my database and
that was not so easy because because
because we we never know how many more
conversations we are expecting so every
time we go to github and every time to
go to chat platform which is github in
our case we don't know how many more
tickets we have for us we don't know how
many more people are talking to us right
now every time we just open the door and
look what's going on and the github says
you know what you have fifteen more
notifications for you so there are 15
more people want to do something with
you and you need to for each of them you
need to start something new in your
database so you start this conversation
in your database you say okay now you
talking to me this is the command coming
from you I start something in my
database and the next run I go back and
I don't see any notifications from that
guy but I know that the conversation is
going on and that keeping track of that
kind of that of that conversations is
not really an easy task it took it took
us some time to figure out how to do it
right because sometimes because the
biggest thing is that if you if you lose
something if you if you if you you mean
damage this information somehow
internally you lose the entire
communication you basically many many
problems which I displaying before will
be caused by your failure
to keep the state properly so if
something is wrong if you lose for
example the number of this container
it's a huge problem you started the
container and then you lost this number
so something is going on and the sir and
you don't know what so you can't report
to the user you can't you can shut down
the container you can manage the
resources so you need to really keep
track of that information and it's and
it's not so easy I don't want to go deep
into details but I'm just saying that
this state fulness is a problem I think
for all chatbots comparing to the
control panel systems where everything
is isn't-isn't through the API on every
time the user connects to you the user
brings the context with you with with
with himself so the user comes to you
and says I'm the user this is my ID you
can find me in your database so I'm
talking to you and it's restless I mean
it's it's restful so I'm coming to you
and I give you all the information about
myself serve my request and i'll go away
so it's completely different design it's
way easier to design that way comparing
to chat BOTS and the last problem which
is I called fragility that's annoying
what I mean here is that in some
situations and in our case in most
situations if it fails if something
crashes on the server if there is some
bug then basically stop talking to
everybody so we have right now we have
for this chat bot we have about 300
projects and people talking to us like
every day so all these people they rely
on us and they know that if they say
rules are deploy then something will
happen and the code will be deployed to
production and they rely on that fact
and then some bug happens i can give you
the practical example which happened
three weeks ago so yeah there's the
summaries that if something fails then
it fails for everybody the 300 people
just just stop and they cannot work
because one bug is there and you need to
fix that bug and then the chat bot
starts working again which is probably
not the case with the systems where they
have control panel with the control
panel usually when there is some bug
this bug shows up in some specific click
of a button so you can click certain
body you can do some specific feature in
our
our case in most cases that's my
practice perience maybe in some other
designs of chatbots it will be different
but in my experience we make some bug
and and it's and the software fails and
it means that all people who are talking
to this ultra cannot talk anymore it
just it just just just crashes and it
takes some time for us to restore the
situation if it happens for example in
the weekend and it takes a few hours and
then that's really annoying so we had
this problem three weeks ago one guy I
don't know it's open project so it's
free so anybody can use it so he created
he had a code that was java application
and created the code and he gave the
command deploy and we started the
container and we started to deploy that
code but then while the deployment was
happening he changed the configuration
of the of the configuration file in the
repository which we use so we asked
programmers to create some configuration
file for us so we know what to do so he
changed it a little bit and that's a
llamo format and he changed it so it's
not readable yamel anymore so we can't
read it it's just a Yama with the
mistake so the server is running the
format is broken and then on some the
next execution we're checking what's
going on with the container and at some
point of time the container is finished
so we go to the server our script I mean
ours our software it goes to the server
it gets the information from there and
it tries to answer on the github and say
we just finished with your stuff but
there is a bug in the configuration file
and the software cannot post an answer
it cannot say that something really is
broken it can it cannot reply because it
doesn't understand it doesn't understand
how the project is configured because
the format is broken so it cannot close
the conversation we need to do something
to close the conversation because we
need to give this information somewhere
we can't just drop it we cannot just
delete it because it's on the server we
need to to give this log file somewhere
we need to give this information
somewhere but we can't do it because the
configuration file is broken and we're
stuck with trying and failing with
trying and failing and the entire
software is it was stuck and we were
down for five hours so we are trying to
figure out logically what can we do in
this situation like
we cannot post the data over there and
that's the problem and we cannot even
report to the guy that there's some
there is some problem with the
configuration file because we don't have
an email we don't have any other
communication channels we need to talk
in the github but we can't so that was a
station we're down for five hours and
this is not probably would happen if
that would be control panel system where
you log in and click the buttons so this
fragility is a problem which we not we
haven't solved yet completely because
every time something goes wrong we may
go down for a few hours which would not
happen in the case of a traditional
system the central panel system where UI
is in front of you so that's it have I
convinced you to use chat BOTS or
convinced you not to use them that's my
blog you can read it I there are some
articles about this system you can ask
me questions we'll try to answer if you
have one yeah
yeah the question is how specifically we
solve the problem of conflicts yeah I
can be I didn't say that i can i can
mention i can explain we have we have so
called named locks so we have a system
which a third party system but is that
it's not important where exactly but
it's a list of locks by names so every
time anyone comes to us with the request
to do something we know what github
project we're talking about right
because we know this issue belongs to
this github project the github project
has a unique name the name of the user /
the name of the project so we get this
name and we put it into this lock system
this you know list of locks and then if
somebody comes in with the same github
name with the same issue with from a
different from a different issue but the
same github project name then we just
look at this in this list and if this
name exists there we just don't touch
this issue we just don't touch this
request for now so that's how we resolve
the conflicts and we just we just put
them into one line which is which is
probably the best and loan and the only
solution we tried something else
differently in the beginning but then
this is the best solution just put them
all by names by the names of their
projects and that's it that's how we do
and we use third-party systems so it's
not inside we use the system which is
outside of its called stateful dot co
you can check it out also our project
it's a it's quite simple easy free
system which allows you to create this
locks by names you just just restful api
you just post a locked over there and
then you ask for a lock later so it's
quite easy nothing inside us we just use
the outside system and that's how we do
it what do you think still have 10
minutes we can go to to drink tea yeah
the seven problem we are still trying to
figure out how to do it so we are still
we don't know every time it's a problem
every time if something seriously
something serious is happening the
system goes down and it's basically a
mind problem or we have a few
programmers more working on this stuff
and we're trying to put it up again by
you know by in most cases now because
now it's quite mature the system is two
years old and we don't have like really
bugs which are bugs bye bye you know
justjust mistakes we have some
conceptual box so we have some like I
like it's like I've explained that
situation so we are we want to bring
back the information but we can
technically and we don't know what to do
because there is no way to inform the
user that something is wrong with your
configuration and we only got
information about that that the user
itself emailed us because he knows our
support email emailed us and said you
know guys I just broke your system
because I changed my yamel configuration
I can see that now you guys are down
because of my file but do something
about it and we just said how can you
please fix it back like you know change
the configuration back again but they
didn't help because it was cached on our
side so it was like quite messy
situation and like I'm just giving an
example to illustrate that it if it goes
down the communication between us and
and the people who actually caused the
trouble is really not so easy as with
the control panel system with the
control panel it's way easier because
you show everything to the user and the
user can communicate with you you can
only you always know who is the user in
this case you're talking to to the chat
platform and you don't know exactly how
to get back to that to that user so we
don't know I don't have the specific
solution so far it's always takes time
and always take some some effort to do
it nicely but the more system is
developed the more mature it becomes the
less problems we have like that so
that's that's probably good so we don't
have many of that issues now but in the
beginning two years ago head like every
every week something was wrong but that
was quite stable in his open source you
can look at the code you can go to this
this website and there is a source code
is completely open so it's hosted it's
hosted on Heroku it's open source
it's written in Java and it's free so
you can use it for free you can even
contribute to it you can see how it
works inside you can see how it's
implemented inside this chat bot how it
talks to github how it resolves
conflicts everything is open it's not
it's not that big the code is not that
big because like I'm saying there's no
UI and that's why it makes the code
really small because we don't have the
front the front end well we have this
front end it's quite it's really easy
just two pages right now we have about
300 projects hosted I don't know how
many people talking to us maybe a few
thousand but we have two hundred stars
on github we have about 300 projects
really hosted I mean really using rule
too many people use router to deploy
their stuff to maven central their java
projects to rubygems there Ruby gems and
some people use it to deploy actually to
production like web systems and it
mostly works with linux software and I
mean Java linux there's no c sharp way
to do it because we're based on docker
containers and docker means Linux so
it's all these projects are Ruby Java
Python PHP that kind of stuff no no
microsoft technologies at all
reliability now it's quite high now
reliability is high so we're using it
for all our projects like I mean we do
software development custom salt I mean
commercial software development for
about 25 projects right now and we rely
all our stuff on that so we use ruler
for everything for all deployments
merged release operations how reliable
it is well i think it is reliable
because like I'm saying we put our all
critical operations we doin rule to
ourself but it's just like I'm saying it
just simple thing which starts a docker
container runs the script which you
created and then reports back to you
there's no really you don't need any
extra reliability in this case it's
basically one a few machines with docker
demons installed there and then it just
goes to one of these machine starts the
docker container runs what you configure
it and reports back to you it's really
lightweight middleman between you two
between you between your chat and the
machine that's it so that's that's how
it should be that's how it's really
lightweight so all the hard stuff is
done by docker and we just with just a
middleman between the
real machine and the person who is
talking to us so it was really in it was
really intended to done to be done in a
light way not in a heavyweight
heavyweight okay thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>