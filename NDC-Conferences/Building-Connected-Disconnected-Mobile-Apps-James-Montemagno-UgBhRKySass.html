<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building Connected &amp; Disconnected Mobile Apps - James Montemagno | Coder Coacher - Coaching Coders</title><meta content="Building Connected &amp; Disconnected Mobile Apps - James Montemagno - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Building Connected &amp; Disconnected Mobile Apps - James Montemagno</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UgBhRKySass" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I was a little bit worried I thought
after last night and all the music
everything no one was going to show up
so I'm glad that you took took some time
this morning hopefully got some good
coffee this is my 18th coffee from the
stock flouse I don't know how to
pronounce that someone stock fluffs
sucks felt it's delicious and tender
delicious cos my journey tomorrow night
my classic Oslo tradition is to go over
to Tim anyways awesome so I've built a
lot of applications over the last six
years of being a mobile developer and
while I've always focused on like
creating connected experiences whether
it's connecting devices to devices or
devices to IOT devices that create this
mesh network of how all my data is
everywhere all at once what I keep
finding is that the basics of creating a
disconnected application is the most
important to our users so what I'm going
to do today is show a show you how you
can leverage multiple services some from
Microsoft some not from Microsoft and
some different use cases to create not
only these connected applications but
really focus on the disconnected
scenarios that are so important for our
mobile applications so I'm going to talk
about some easy things some scaffolding
things and some really awesome real-time
things so broke down the agenda like
this over the next hour is I'm going to
talk about the need for offline sync I
talked to a lot of developers all over
the world all the time and all the
different use cases whether it's
commercial consumer agriculture there's
all sorts of different use cases and the
need for offline synchronization for our
mobile apps I'm going to talk about
building an app backend for your
application or leveraging an existing
back-end that you have today or maybe
you're integrating into third-party
services we're going take a look at
building an application with full
offline synchronization across all
mobile platforms so iOS Android and
Windows and then what we're going to do
is switch and we're going to take a look
at something a little bit different
which is real-time connected and
disconnected databases which my new
favorite passion and we're going to do
that by looking at realm has anyone ever
heard of realm before govt if you
haven't gonna blow your mind it's been
phenomenal I love it because for the use
cases of real-time databases where you
want instant responses is mind blowing
and of course let's give you all the
places to get started all this
samples all that jazz so I'm James
Monson magna I'm a principal program
manager at Microsoft previous to joining
Microsoft via acquisition via via I had
to come along um
the acquisition I worked at xamarin for
about three and a half years as a
developer evangelist I was here at NDC
Oslo two years ago actually talking a
lot about xamarin and drinking delicious
coffee and I was actually about one of
my favorite parts of coming to Oslo and
NDC is they keep filling me up with
delicious coffee which is great just
reminds me of home in Seattle same
weather delicious coffee it's great so
I'm excited that's where I live I live
in Seattle I live there pre Microsoft
acquisition I was the only xamarin
employee in Seattle which was really
cool and actually moved out to Seattle
to become a mobile developer I was at
working at Canon actually osei which is
a company from the Netherlands writing
printer software and while printer
software is great because everyone needs
a printer
I thought mobile applications were going
to take off and they did which was good
so I've been up there for about six
years and I moved there of course for a
job but also to drink all of our
delicious coffee and of course to build
mobile applications that's what I've
been doing for the last six years and
you guys can find me all places all over
the internet but if you want to hear
more from me after the conference I have
a podcast called merge conflict which is
a super awesome name for a podcast took
a two years to come up with that name
and then we can start the podcast that I
do in my off time with my good friend
Frank and then I have a show on channel
9 so the channel 9 booths out there
making your hosting actually have a
weekly development show focus on xamarin
that's my major platform that I develop
in it's called the xamarin show I was
real original with the title thought of
that one myself and you go to xamarin
show calm and then you can always
contact me anytime by just emailing me
mots at Microsoft or at James Monta
magno just Google me and you'll find me
I'm out there there's only like one
James Monson Magnum in the world so
there's two me and my dad but he's like
he's into iron work and I'm a developer
so just James not the minded developer
good
so while Nizam runs developer and I'm
going to actually do all my demos today
in xamarin so it will all be in c-sharp
but every single technology that I'm
going to demo will work across any way
that you're building mobile applications
whether it's with xamarin and C sharp or
F sharp using Objective C Swift Java
react native cordova all the
technologies i talked about work today
in all of them just about all of them
I'll kind of go through those so let's
talk about these mobile applications
over the last six years I've shipped
about 70 plus iOS Android and Windows
applications across all the different
app stores not only just working at a
small start-up working at xamarin and
then in my spare time I still like to
develop apps when I'm not talking about
building apps and really it's true that
kind of great app experiences make our
app great I mean it's why our users come
back over and over again so whether
we're creating Mitch rich media
experiences or deep integration into the
OS and integrating the latest Theory kid
or Cortana integrations or something
like that it really makes our apps stand
out creating great native experiences
with really fast user interface and
designing for the platform is super
crucial and of course security and
identity is really what our users are
expecting whether they're logging in
with Twitter with Azure ad or with some
other off provider it's important that
they feel comfortable during that
experience well the one thing that I'm
going to focus on which I found time and
time again that creates a great app
experience is giving our users their
data all the time no matter what so
whenever they need it they should have
access to it so when I go and talk and I
build applications there's this kind of
myth that well we have amazing
smartphones and they're always connected
to the Internet no matter where we're at
in the world so why should I care about
disconnected mobile applications well if
you take a look at the United States for
instance we have pretty good coverage I
live in Seattle and the Pacific
Northwest up there which is okay but
there seems to be something in the
United States that's kind of missing and
that's kind of all up here that's all
farmed territory really and as soon as
you kind of get off one of the major
highways your phone is in a dead zone
and if you happen to be a farmer out
there that's working in agriculture it's
actually one of the hottest trending
mobile divisions I swear
agriculture everyone loves it and
farming is that these farmers are going
out in the morning
taking their tablatures have all their
weather conditions crop conditions
watering condition untaken it off the
dock bring it out onto their tractors
onto all of their equipment entering all
their data and there's no Wi-Fi no
internet there's nothing in the middle
of the fields and this is true whether
it's in the United States whether it's
in South America whether it's in Europe
anywhere it just is true that we can't
get internet absolutely everywhere so
well that's the United States I try to
take a look at other emerging markets
that are out there such as Africa and
even parts of Asia so here what's
interesting is I've selected 2g 3G and
4G and we can see it the coverage is
extremely spotty especially in emerging
markets such as South Africa or in
anywhere else in Africa actually if
you're not in a major city it's
extremely hard to get internet
experiences for the first time I heard a
story from our CEO Knapp Freeman a long
time ago that said when he was traveling
in Africa on holiday that he saw
something that blew his mind which is
that there was a kid that had a cell
phone that would travel nearly entire
day into a city to connect to the
internet download and sync everything
and then leave for an entire week and
that was their experience of using
mobile applications and the Internet as
a whole which is why you can see why
Facebook and Google and everyone wants
to send these little cloud bubbles and
spread Internet everywhere deny
experiences for my first time when I
went down to Cuba as an American we
couldn't go for a long time so now we
can maybe in a few months we won't be
able to again but I was there and I
wouldn't hit something very interesting
which is that there's no internet
anywhere and when I got off the plane by
Google Phi which I swore had internet
everywhere because Google where has
Internet everywhere and I get there it's
like welcome to Cuba
we don't have any service here and I go
off that's no good and then I realized
that it's really hard to get Wi-Fi in
Cuba because there's only Wi-Fi in very
certain hotels and certain public parks
and you see these huge gatherings of
people in these areas and they only have
so many IP addresses that they give away
so that's ten or fifteen dollars that I
spent for an hour of Internet in a whole
week that was my experience so I started
to live this experience of oh I don't
have internet I don't have access how am
I going to check in for my flight now
this is interests
here because this is where I selected 2g
3G and 4G I don't know about you but
whenever I see HSPA+ or 3G I just
chucked my phone out the window because
what is it really good for at that point
because it's no good and that's what I
did here and this is the current 4G and
LTE coverage in those same exact areas
so it's not only creating great app
experiences for the disconnected
experience but it's also for this body
connection and when it goes online and
offline so in my studies I've kind of
taken a look a lot of my applications
that I use so we have a bussing
application in Seattle called one bus
away I'm a big football fan soccer if
you will excel all football and and I
use Southwest a lot for a lot of my
travel in the States and I kind of put
my phone into airplane mode I said well
let's see how this works
and sure enough I didn't expect the bus
routes to work at all but immediately my
Southwest just closed right away and
same with my Sounders I couldn't check
my score I couldn't see anything it was
really intriguing to me because
Southwest knew I was logged in yesterday
it knew my flights back five minutes ago
in knew my flights when I had internet
but now it doesn't so it took a look at
some other applications that I use a lot
and one that I created myself the one on
the left here is Robin Hood which is a
stock application where I pretend that I
know anything about the stock market and
that's my real stocks as you can see on
there and as soon as I booted it up it
told me I was offline but it showed me
all of my cash data it showed me all the
data with a timestamp of when that last
transaction was and of course I'm
offline I'm not expecting real-time data
but I am expecting it to show me where
it was and the last time I checked it or
last time it refreshed in the background
on the right hand side is our xamarin of
all conference application that I
developed for our xamarin evolve
conference and what was unique here is
that we have people coming from all over
the world that may add internet may have
conference internet not all conference
Internet is created equal and I wanted
to make sure that they could go in
browse all their sessions favorite
things and as soon as they got back
online it was synced immediately and
that's a great app experience so what
about the backends so we're going to
integrate into it was to really
scenarios there's ones where we control
the backend or we're integrating with a
third-party back-end so if we're
creating our own back-end there's great
services out there from Microsoft with
as mobile apps which we'll be looking at
today amazon has AWS and has mobile
integrations Couchbase Oracle IBM also
have solutions and realm will look at
for real-time databases but also if
you're integrating with a third-party
application or back-end service that's
what often I do you may want to just
think about caching things locally into
a local sequel light database there's a
lot of service providers out there
because everything every phone has
sequel light on it so sequel ciphers a
256 bit encrypted database sequel light
net for instance is a dotnet wrapper
over sequel light there's a lot of these
out there so let me show you what that
looks like in one of my apps and this is
one of my most requested features so
it's my rail phone and what I'm going to
do here is I haven't mirrored right here
so I run a local user group in Seattle
it's called the Seattle mobile dotnet
user group and about five years ago I
created this app that allow me to go in
and there it is Seattle mobile net it
would go out it would find all of my
upcoming events and I could go in and I
could check in my users now for a long
time it was just online only if you
didn't have internet access you have
anything you couldn't check in anybody
at all you could as soon as you left
this screen you couldn't come back but
here I'm going to check some people in
here but what I found is that my most
requested feature was actually from a
youth case that I didn't think of was
that there's a lot of hiking groups and
running groups that were all over the
place and wanted to have the data
everywhere so there are hiking mountain
so they wanted to make sure that if they
left with 20 people they came back with
20 people and those are the same 20
people they left with so I added a
little feature just recently so save
offline so there I am I'm offline so now
what I can do is close out all my other
apps my real phone there we go and I'm
going to close out of here and I'm just
going to go into airplane mode and we're
going to go into meetup manager there we
go
now what I did here is I wanted to make
it so portions of my app could be used
offline so I say hey you're offline I
detect that you're offline and what I do
is I immediately navigate you into all
your offline cache data and what I've
done here is I just stored everything in
a local
equal light database so i'm using the
sequel light net which is works
cross-platform for dotnet applications
and it's super crazy simple you just
have little primary keys indexes any of
that stuff and you can simply create
tables insert things do link queries if
you want to and that's it so now it's
cool is that if i come in to my
lightning talks way to load everything
just as if i was online it caches the
images i can continue to check people in
now it's cool as if i come back online
give it a second here go back over here
we can actually see the make sure that
we have ten people there i checked in a
few more people i come back into my
groups now that i'm back online i can
come into my seattle where's it at
seattle mobile net and go into my
lightning talks and sure enough it's
synchronized and it's using the same
data so no matter if i'm checking in
people in my online data or now come
back and I should have fourteen in my
offline events sure enough they're all
there so this really created a great
experience by literally doing nothing
but storing just a few tokens into a
little database it took me just a few
days to implement and by implementing
this one feature I have a one little
thing which is add that you probably if
there's like an ad on the bottom here
that costs $2.99 to remove and just by
adding that one feature on iOS and
Android my sales of removing ad banners
because I said hey I have this new
feature think about supporting
development and removing ads have gone
up one thousand five hundred percent by
adding one feature that took me one day
it's crazy now I was integrating into
the meetup API now you may not may not
be able to do that you may be having
your own asp.net back-end or your own
backends or maybe you're spinning up a
back-end for the first time and you want
to create an online an offline connected
experience now I'll obviously work at
Microsoft so I'm going to talk about
infrastructure at scale of what we have
in Asscher is anyone using Azure today
on primer off from beautiful I love that
what's really cool about Asher is that I
was an azure customer before even being
acquired by Microsoft xamarin and even
before I joined xamarin I was a
Microsoft developer of Microsoft
told me to do something I just did it it
sound great I mean I wrote WinForms a
pyro WPF apps I wrote Silverlight apps
on Windows Phone apps I rewrote my apps
pad more times and then boom I was good
whenever Microsoft told me to rewrite my
app I did it um and then I wrote them
for iOS and Android no answer item once
what was cool is that we have actually
more data centers around the globe than
AWS and Google Cloud combined what's
really unique though is that we give you
this amazing service called Azure stack
has anyone heard of Azure stack all
right so see if you haven't imagined
that well we have 40 compute regions and
we have hundreds of thousands of data
centers around the globe to create a
mesh network if you're in an
organization that can't deploy to the
cloud you can bring adjure to you as
your sax allows you to actually run
almost all of a sure in your own data
centers on hardware approved by
Microsoft so you say hey Microsoft I'd
like my own Azure and then say cool that
sounds great
now you're not going to get the updates
quite as fast as than we deploy but you
can automatically do that think of it
like TFS where there's visual studio
team services and Team Foundation
service or runs in the cloud the ones on
Prem with the same exact features you
can actually bring Azure to you what's
really cool is Scott Guthrie he says his
video which he hasn't given to me one
day he will of how his cruise line
actually runs an azure data center on
the cruise ship so they have all of
their data all the time when they're out
at sea which is pretty spectacular now
Asher has a bajillion things in it look
at all those bubbles there's so many
things app service is what we'll focus
on today which is our web mobile API and
logic applications
that's where any of your asp.net web
sites would live today or where your
mobile integrations and databases will
be well so some other things such as my
service fabric for micro services Azure
functions which is our server list
compute which is one of my favorite
services we have a bunch of paths and I
asked services a bunch of for letter
acronyms that I have no idea what it
means but they're they're cool so what
we're going to focus on is that Azure
mobile apps which lives inside of app
service and why I like Azure mobile apps
is that it's extremely powerful because
it's leveraging all of a sure
as your mobile apps is a server and
mobile integration so server and client
and they connect up together no matter
how you're building your apps they're
super flexible you can leverage it on
top of an existing nodejs back-end or
you can spin up a new node.js back-end
inside of azure or you can use app
service itself and create a full asp.net
back-end or leverage your own asp.net
back-end and add on top of it what's
cool is that there's a full cross
platform SDK for iOS Android and Windows
there's also SDKs for Cordova for
objective-c for Java to do a full online
offline data synchronization and it's
all open source not only the c-sharp
SDKs that I'll be demoing today but the
other SDKs too are all open source on
github so you can raise the issues you
can read documentation which is really
great so how this works is normally if I
was going to start integrating with the
backend like I did with meetup comm is
they have a rest service point I do my
off tokens I make JSON request calls via
their API pull down the data ID
serialize it I got to figure out all the
different mappings and through it throw
through JSON net and then do post and I
have to handle all of the actual
business logic myself so what as your
mobile app says to say listen there's
probably going to be a REST API in
between what we're going to do is
abstract that for you into a really easy
SDK for your iOS Android and Windows
applications and it will what means you
kind of just do normal crud operations
so insert adds deletes but we'll we'll
abstract and hide that restful service
call will do it for you and I'll show
you what that means when we get into
code what's cool though is that through
that REST API that is abstracted for you
into a simple cross platform SDK is you
can automatically connect to user
authentication push notifications and
any data connection that you want the
easiest out of the box a box is just
sequel azure that you can spin up
additionally what you can do is if you
have a sequel instance on Prem is you
can actually use Azure hybrid connection
and synchronize your your sequel up to
the cloud so there's a lot of options
there you don't have to only use the
sequel azure but what this does is
through that restful api MSD can't
that full online offline data
synchronization and your back-end code
can live anywhere whether it's running
in Azure as your stack on bsts bitbucket
github you can put it wherever you want
so cool let's build it back end and
build an application I'm going to jump
out here alright so we don't need this
anymore boom
alright cool we don't need this anymore
we have this now what we're going to
build today is an application that I
started building for myself a little bit
ago and it's called coffee cups and the
idea this application is that I needed
to somehow track my coffee consumption
cuz I drink a lot of coffee and I wanted
to do some cost-saving analysis of how
often I'm drinking coffee away from the
house or drinking coffee at home and how
much money I would save if I transition
those over but of course I drink coffee
all the time all parts of day and who
knows where I'll be at maybe I'm on my
my Surface book maybe I'm on my Mac
maybe I'm on my Android phone so I
wanted to be cross-platform and I want
to have it everywhere and I wanted to
also at some point distribute this so
people could use it themselves so you
can log into your own account and see
how much coffee you're consuming so this
application is written with xamarin and
xamarin forms and it's quite simple is I
have a simple model which is a cup of
coffee and what I do here is I have an
ID I have a date if it's made at home
the operating system that it was on and
the location that was here additionally
I have this little Azure version that
I'll talk about in a little bit that
will give me a way of doing a conflict
resolution now this application is quite
simple what it's going to do is have a
single page the sam'l page that's going
to do is going to open it up and go
ahead and pump up the fonts a little bit
there you go
so it's quite simple what it's going to
have here is it's going to have a little
label it's going to ask me if I made it
at home I have a switch to toggle if I
made it at home a button to add coffee
which is going to hit this add coffee
command and then I have a little entry
field here so I could type in the
location wherever I was at and was
drinking coffee and then what I do is I
just have a simple list view and this is
all across platforms Amal with xamarin
forms and I have
talk later today on that and creating
really rich experiences with xamarin
forms but it doesn't really matter what
the UI is built with just so you get the
concepts of how I'm building it here as
I group the coffee's by date so is it
yesterday today or whatever so these
events all go through my view models I'm
a big mvvm type developer so what I have
in here is a grouping of coffees I have
this thing called an azure service and
has a few bindable properties like a
loading message a boolean for if I'm at
home a location I'm using my new
favorite c-sharp seven feature I don't
know I'm just love little lambda arrows
everywhere and then I have two methods
called load coffee it's really simple I
was just really simple code I go off to
my Azure service I say give me all my
coffees asynchronously and I simply
update my list of coffees and then I
sort them so down here when I look at my
sort and I peak to definition there I
can see that I'm using this nice little
link query to group everything by the
date and the display date and getting a
little grouping here and then whenever I
add a coffee it's very simple code - I
call them - this as your service which
is what we're going to write together
and I have add coffee so that's my
application and what we need to do is
connect it up to Azure because right now
there's nothing in the Azure service if
I go into this Azure service here it's a
box I did fill it all in
that's good I thought I deleted it
that's okay so we'll go and we'll go do
some stuff and create it together we'll
do this ready
delete the lead I was up really late
last night don't know one look there we
go
all right cool that's good we'll delete
all this stuff we're doing it for doing
a live final prep all right cool now the
rest is fine cool so what we need to do
is we need to hook this back end up but
we need to deploy a back end so what I'm
going to do here is that's my mobile app
and I'm getting ready to develop and I
could maybe create some mock service
that I'm talking to but we want to do it
live so what I'm going to do here is I'm
going to go in and hit new and under web
and mobile in the azure portal we're
going to see a few different things we
have web apps like asp.net we have logic
gaps and mole
apps and mobile apps is very confusing
because it's not actually a mobile app
it's a mobile app back-end so those are
all of our back-end services so I could
say coffee is great in Oslo and that's
available and we'll create a new group
and I could create a service plan here
let's we put in an existing group so I
can delete it later I have a nozzle
coffee group and here I will put it in
my Oslo coffee plan and what i'm doing
here is i'm going to provision an app
service with this URL coffee is great in
oslo as your website's net i'm going to
say a pin to dashboard I'm going to hit
create so what this will do is in just a
few seconds it will scaffold out my
back-end a my app service logic which is
really cool so this just takes a few
seconds here a little progress bar but
there it is cool so it's only happened
superfast which is great but it hasn't
really done anything besides made sure
that it's in a resource group I could
take a look at data in get out very
fancy charts this is all very nice and
there is a URL here so if I tap on that
URL it's going to say hey your app
service is ready but you haven't
deployed anything yet and that's okay so
what we can do now at this point is that
we have our app service we can deploy
our back-end code and download our
back-end code if we would like to but we
need to let this app Service communicate
to our database so what I'm going to do
here is scroll down in all these crazy
settings
so there's scale up scale out all this
all the stuff if you create an asp.net
website because it is an asp.net website
but over here we have easy tables easy
api's and data connections and data
connections are a way to say hey listen
this is okay to talk to this database so
what I'm going to do here is I'm going
to say let's configure it sequel
database I could also configure a
storage account if I wanted to here I
have a demo database I have a connection
I already set up a sequel server earlier
because that takes about five to ten
minutes so I'm just going to type in my
username and password
there we go hit okay and what this is
going to do is it's just going to say
hey this app service it's cool to go
talk to this database we're best friends
it's great so cool and this takes
anywhere from immediate to 15 seconds
I got does say up boom done cool so now
at this point I'm almost ready to go
except for I need to actually get an ASP
on that application to the POI so under
deployments here I can go into Quick
Start and when I do that it's going to
give me a list of all the different ways
that you can build an application that's
supported so objective-c Swift Android
xamarin forms there iOS Android and
Cordova so here this will just make sure
that you have a database and here I'm
going to say my back end is going to be
c-sharp
so let me go ahead and actually download
that back-end code and that I'm just
going to put on my desktop I already did
this yesterday so we'll have it all set
up now if you want to it will also give
you some sample code it will give you a
full sample application to run with a
little to-do item application so I've
downloaded this back end and I've
configured it a little bit ahead of time
so this is the back end code that's
given to you but I've added a few things
into it so let me go and show you what
this looks like it's just an asp.net
application so we have data objects we
have models we have controllers we have
some app start should look very familiar
if you've done any asp.net development
before when I right click and save
manage NuGet packages we can say I have
Auto mapper and any framework all the
asp.net stuff and we have these as your
mobile server nougats that were
automatically added for me which is
what's going to allow it to talk to our
mobile applications and create mobile
optimized controllers and tables so what
I did over here is I created a cup of
coffee over here and it has almost all
of the data properties from our mobile
application the difference here is that
the server is implementing inheriting
from entity data so entity data already
has and we going to bump this up a
little bit too already has an ID a
version created at the lis
all that jazz which is cool now what I
can do once I have that model in there
is I can create a controller so this
isn't your typical asp.net controller
it's a mobile-optimized table controller
because often your data might the
database may have like all sorts of
columns and all this data you don't want
to synchronize that down to your
application what you want to do is just
do a subset of your data so this is an
optimized table of cup of coffee and all
it does down here that has a get all
cups of coffee get cup of coffee
patch cup of coffee post cup of coffee
the wheat cup of coffee has all the cup
of coffees that are there and at this
point you can even add simple
integration so if you add oo for
instance you can get the claims
principle the provider the ID of the
user so I had to some sample code in
here so you can see how that works there
so if you have logged in with Twitter
you can add authorize flags and a bunch
of stuff so now what you can do is you
can go in and our mobile application is
basically ready to go like every good
developer you go in don't put in any CI
or CD you just hit publish because
there's a button there and why wouldn't
you hit the publish button and what you
can do is you can come in and create a
new profile and you can select an
existing or create a new one and here I
could come in I'm logged in with the
same account so under my Oslo group or
we're going to see here is that I have
that coffee is great in Oslo I also have
a nozzle coffee that I created last
night and I've already deployed it so
it's the same exact one I just not going
to deploy it just in case so what I can
do here is take a look at this Oslo
coffee I did the exact same thing I
promise no trickery I literally just did
the same thing and you can see when I
did it I guess there's some statistics
in here so I've deployed it and once I
deployed it I just have this little tiny
front end that says my mobile
application is running and it's good to
go it's good to go
it's connected to my database and what I
can actually do over here since I've
deployed it and there's a real database
is I can actually use the sequel
object Explorer here I'm connected to a
sure
so I'm connected to my database in the
cloud which always blows my mind I have
all my tables better in here here's my
cup of coffee and what I'm going to do
is save you data and this is going to
make a real live connection out to Azure
into that table it should freeze visual
there it is it should freeze visual
studio and that's how you know it's
working on our 100 megabit connection
here that's what happens when you run it
right on the UI thread
good work sequel team and what this is
doing is for the first time at least
making the connection I've added my IP
in we should see a spinner that's where
this works it's faster if you're doing
it on Prem obviously but it's happening
all in Azure there we go perfect so what
we have here is we have the blank
database that we created yes it's at
that time display that I have nothing in
my database great so let's put something
in the database and what I want to show
is that I've created a restful api and
my mobile apps have a great SDK that I
can integrate into but I can use that
restful api from anywhere so what I can
do is I can open up postman which is my
favorite desktop app to do HTTP gets and
posts and all that stuff and what I can
do is I can come in and I can query it
here
so there's özil coffee as your
website's not net flash tables slash cup
of coffee and all I have to do is add
this little token on the end of Zumo API
version 2.0 it's like a little bit of
extra security so no one can just like
get it I guess and if I hit Send here is
going to go off make my restful service
call and return nothing because there's
nothing in it that make sense but I can
also come in and say post so it's the
same URL the difference here is I'm
going to execute with posts I'm going to
put something in the in the body so
yesterday I walked a little bit over to
Google in value fan I hope so it was
also delicious this is really what
happened that's my location I'm going to
send it some JSON and hit Send
and when I do that I get the actual
response back that this is when I added
it the it came from postman and here's
all my data that's there but come back
into my gets and hit Send
there we go there's my data that just
came in and I'm talking to that back-end
in fact you know that I'm talking to
that back-end because I want to come
over here and hit refresh and let visual
studio freeze again and it refreshes
that sequel connection what we're going
to see up top it's usually faster the
second time sometimes do it do it so I
only do it one or two times during the
whole demo because everyone likes
looking at there it is okay cool so
that's my database and what's cool here
is that this is a real connections if
you want to I can say postman and DCs I
could just update the operating system
and make that request because that's
exactly how everyone updates our
database and if I come back over to my
get and I hit post what do you know
it literally is updated there right so
we can already see that those API is
alive and things are good so let's
integrate it into our mobile application
now another way of those restful service
is up so inside of my azure service i
have a mobile service sync table and i
have a mobile service client and what i
want to do is set up this oslo coffee so
what i'm going to do is say I have this
initialized method that I just call all
the time to make sure that nothing was
garbage collected or I didn't disconnect
I want to make sure it's always live so
I'm going to say is client dot sync
contacts dot is initialized if any of
that is is null I'm just going to return
I'll pump up these fonts one more time
for everyone so now what I can do say if
I've initialized at once it's good just
go ahead and then you're out of there if
something is null you just can continue
on but I'm going to say client equals
new mobile service client I'm going to
pass it in the URL there we go and
it's cool here is that this also takes
in HTTP message handler so you can
intercept every single call that's
actually being passed in so those posts
and your puts and everything like that
you can intercept all of those with your
own HD HTTP message handlers so once
I've done that I'm going to create a new
sequel Lite store so by default
everything inside of here is stored in a
sequel Lite database and you're probably
wondering James how did you get all
these namespaces well I have a new get
installed so here's my new gates and
just like I've installed the azure
mobile server clients I've installed the
Azure mobile clients SDKs this is the
online one and this is the default
offline synchronization which is the
sequel Lite store so what I can do here
is I can save our store DB equals coffee
DB and then I can save our store equals
new sequel Lite store and what I can do
is pass it in a store DB a file name and
what this is going to do is it's going
to create a private database on iOS
Android or Windows that it can do all
the table entry for me what I'm going to
do here is I'm going to say store dot
define table and it's all generic size I
can just say cup of coffee
there we go so I've defined it it's
going to do automatic schema changes so
if I update any of my schema it will
automatically update for me now what I'm
doing here is I have my my local store
that's on disk but it doesn't know how
to synchronize with the backend so what
I need to do is I need to initialize
this synchronization context so I'm
going to do is I'm going to say client
dot sync contacts dot initialize async
and pass it in the store so what this
does it makes the connection to say I
know about a sure because this is my
client and it has the sync contacts
here's my local data store for the
mobile application and you can figure
out how to sync so now what I can do is
I can get my coffee table and I can say
client get sync table and say give it
for my cup
coffee there now once I have this coffee
table I can do all sorts of stuff so I
can say coffee table dot and I can
create a query I can delete a sink I can
insert a sink I can look up I can do
linked queries I can pull I can Persian
this is all local that's there go get
the table name I can do all sorts of
linked stuff that's coming in here's
what I can do is I can start
initializing and doing synchronization
so adding synchronization is as easy as
just a few lines of code so what I can
do is first thing I'm going to do is
check connectivity so I'll say I have a
connectivity plug-in installed
that'll check if I'm online or offline
so I'm going to say if I'm not connected
to the Internet is connected let me just
return so there's no need to synchronize
if I'm offline just return the local
data and now what I'll do is I will wait
I'm going to coffee table pull a sync
I'm going to pull down all the data that
I need and it will figure out everything
for me what's unique here is I can pass
in specific query IDs and link queries
to my actual back-end so we can do
incremental synchronization so it's kind
of a token I'll just say all coffee and
then my coffee table I can do a create
query and you could create a whole bunch
of different linked queries and pass it
to your back-end so it's very optimized
so if you're like oh only give me the
coffee of this user or from this
location and then you can pass that up
to the server and then what I'll do is
I'll just push all my data locally so
I'll say a weight and I'll say client
sink contact stop push a sync there so
literally just a few lines of code to
check connectivity pull down the data
push the data asynchronously
now the other methods I've already
filled in ahead of time
so here I have that get coffee so
whenever I pull it down I initialize I
think my coffees and then what I do is I
simply say now if I'm online or offline
it doesn't matter
give me my local data and order it by
the date UTC for me and enumerate all
asynchronously when I add a cup of
coffee I'm passing in if I'm at home or
not and the location and what I do here
is I say a cup of coffee
fill in the UTC
time passed that boolean set the
location of admah at home or the
location I'm using xamarin form so it
actually has this OS flag for iOS
Android or Windows I'm just using that
and then I just have a few methods what
I'm doing here is I'm creating that
coffee I'm inserting it locally I'm not
doing any internet connections at all
I'm inserting it locally into the
database and then I will say sync coffee
now this is a demo so you probably
aren't going to try to synchronize with
your back-end every single time your
user does stuff you're probably gonna
have some background service that does
sink or you selectively have a sync
button or something like that but for
demo purposes I'm going to sync whenever
I get or insert something and then I'm
going to return that coffee back that's
all my back end code that's it so now
what I can do is I can come in and I can
go ahead and select my emulator here for
Android and I'm going to hit debugging
and with all my code spun up we should
see our coffee cup application spin up
and start talking to our Android
application right here and the only
thing that I've done by the way in the
actual platform-specific code because
everything else was shared is that it's
added one line of code into my main
activity to initialize it so that way it
doesn't get linked and removed away at
all so essentially there I do that on
iOS and Android
because we have advanced linker and
xamarin so I don't want to remove any of
that code so give it a second here while
it spins up and starts building the
application let's see what it's doing
there we go that was the point on my
phone
you can do it
zip aligning there we go
it's totally happening love it all right
up up up up in my suite debug mode I
have a beautiful spinner that you can
see there of loading my coffees so it's
created my database I have a little
entry that I can put in here if I want
to
there's my postman NBC I can come in and
say well this morning from stock there
we go because they add coffee there we
go add it in there if I come into my
postman for instance and I say get
coffee boom there's two cups of coffee
right there
we're almost there I've had four this
morning so we can actually say yeah I
had two over here on Android we're
getting closer
cool so now I have those two there rest
assured those are in the database if I
say I'm at home now I'm at home and then
we'll see the maid at home there on
those different devices and the
different time stamps there so it's
awesome about this is that now I can
launch it on iOS or our uwp and get the
same experience I'm going to start it up
here we're going to go ahead and restart
it over here my cup of coffee there we
go
ideally there we go big not sure what's
happening now it's going to close out
some things come on computer serial so
now I have my my uwp application I can
add a cup of coffee there it's going to
go add it up we have all the same data I
can pull the refresh over on Android
looks like there's some Oh 744 it's
actually working correctly even those
times are different different time zones
no one's for some reason two hours
different but it's here so the same
exact type application that's over here
now it's really cool though
is that I can come back over into
Android I'm going to go ahead and put it
in airplane mode I have this little no
connection made so if I go ahead and say
I'm at home I add some cups of coffee
here this is a normal day about eight
cups and I come over and have this
little hidden refresh button see
nothing's happening over there I can
still add a coffee there we go what's
cool here is that what I can do is as
soon as I come come on come on there you
go back online
there we go I'm back online I should be
able to pull the refresh now at this
point it should be able to go and make
the new connections and synchronize the
database that's there if you li come on
do it do it do it do it give it a second
do it
do it
when and down just close it out see
again so now your users have closed
their application because they were
offline they're not going to use it
they're going to relaunch it that's what
happens let's see if it synchronizes now
but come on there we go
now all that data has been synchronized
across so when I'm offline I come back
online all the data is there and rest
assured whenever I come back into
postmen I hit Send boom there's all my
data all my coffee same things true here
if I go into my iOS application I said
that as the startup I go ahead and
deploy this on my iOS simulator this
should go ahead and deploy and spin that
up so it's cool that we'll of the same
application all sharing that back-end
code across iOS Android and Windows 10
applications and I still believe that we
support you can go back even to Windows
Store like EE applications as well but
here we go there should be our iOS
application that's there
there we go this is our remote iOS
simulator so it's just talking to my
macbook adorable over here and it's
going to spin up this simulator for us
there we go
my beautiful splash screen
and there's my coffee there's all my
coffees I'm at home there's my coffees
so many coffees and it's all
synchronizing all to my Azure back-end
synchronously and under just about 20-30
lines of code which is crazy cool so
what's nice about this approach is that
it really gives you full control you saw
I was in control of the synchronization
I was control of everything there's a
lot more that's baked into it push
notifications with Azure Notification
hubs to do notifications across all of
your devices it also does
synchronization with file stores so blob
storage to do images synchronized
through the same SDK you can add on top
of it it does online offline data
synchronization there too we have a cool
sample that does all of that is called
the shopping demo that this image sync
it does authentication online offline
sync all that jazz which is really cool
so let's talk about real time databases
in the last 13 minutes that I have
because in this scenario I was really in
control of saying the standard I'm
inserting data I'm updating data I'm
deleting data and I'm selectively doing
it when I want to which is really
powerful but what if I want to do it in
real time so as soon as I have the data
it's automatically and I don't have to
worry about anything at all and this is
where realm comes in realm as a company
it's not a Microsoft company it's a
awesome startup out of San Francisco
they've been around for quite a few
years and they're used by tens of
thousands of huge companies and they've
always for a long time had an offline
only database that's what they focus on
is a crazy-fast database so realm is a
company and they're also a database so
the realm mobile database for iOS and
Android and now it's also for uwp and
Windows desktop applications so we're
creating sub PF applications you can use
it there it's developed in the open and
it's spectacular and it's for every
single type of application out there now
what's cool about the database is it
super fast it's going to allow you to do
offline functionality first if you're
doing something like my meetup manager
you can use that too it's thread safe so
you can update things no matter what
it's absolutely ridiculous it's built
with a reactive architecture and you can
even add 256 bit encryption with just a
few lines of code
so a little bit different here than a
normal sequel type table structure as
you inherit from this realm object which
has a bunch of different helper methods
to do the synchronization for you so if
I was going to insert an object like a
dog or something like that I'd have a
realm object which implements a bunch of
other properties for me and I say give
me my realm instance and then I can
insert the dog and I can do that on a
background thread the UI thread it
doesn't matter I can do whatever I want
if I want to get all my dogs I say from
this realm which you can think of a
realm as your database because it's not
sequel it's not no sequel its realm
that's its own thing you can say give me
all my dogs where the age is less than
two now this looks like it's going to go
get all the dogs first and then do the
link query but it's not doing that
actually it's going to do it on demand
and in fact it's not actually even
really returning a list of dogs at that
point it's returning an iqueryable which
will actually do it on demand it's
really kind of cool cool you can turn on
encryption by just passing it a new byte
array and saying this is my realm
configuration and now everything will be
256 bit encrypted on the device
automatically for you and now you would
just go out and get your dogs and do all
your contains or anything like that
automatically and that's just a database
there's no online or offline sync yet
and this is when we're the realm object
server comes in just like I deployed an
asp.net back-end there's got to be a
back-end somewhere that can communicate
with the mobile applications so there's
a realm object server that you deploy
anywhere you want realm is not a you
don't buy realm you get download realm
and then you deploy it wherever you want
and there's different tiers there's a
free tier that you can use for
production apps for the realm object
then they have like Pro and enterprise
stuff too but you're not they're not
hosting your data you're hosting your
data wherever you want whether it's on
Prem whether it's in a cloud so the
realm object server is what's going to
talk to this database and you're not
going to actually change anything from
what I just showed you for the querying
what's cool here is that it's actually a
direct connection to the realm object
server so statistically on the right
here is what you're seeing is kind of
what I just did is I have a sequel
server
I have some JSON back-end I pull it down
I put it in sequel Ida turn into a
native native object and then I pass it
back up now the azure mobile apps SDK
kind of abstracted that for me into just
inserts and deletes but the thing with
the realm object server is it's a direct
connection and it's a real-time
connection so as soon as things update
in the mobile app they're immediately
sent to the realm back-end automatically
for you and vice versa what's cool is
that this makes it easy to do things
such as creating event processing
real-time to a data synchronization
messaging applications real-time
collaboration or even IOT sensor
synchronization so it can handle tons of
mounts of data all in real time so let
me show you what that looks like because
we're going to have to deploy a round
back-end
now the realm back-end is something that
you download and deploy yourself and
where you deploy it is on to a Linux
machine I'm not a Linux expert but it's
really easy to put it onto a Linux
distribution this important sento s67
and in boon to 1604 what's really of
course is great is that an azure we also
have Linux VMs and we support and boon
to 1604 go figure so let's do this and
let's put it into some action so what
I'm going to do over here is I'm going
to go ahead and switch over to my Mac
there we go there we go perfect so this
is realm do and you can read all about
the different SDKs how you can build it
you can even see sample code in Java
objective-c react native Swift or
xamarin for all the different
configurations here inside the realm
mobile database you can learn more about
just the database itself kind of like I
showed another great documentation to
get you started with those distributions
now it'll give you all of the commands
that you would have to ssh in for into
your Linux machine but what I want to do
is take this distribution this package
and I don't have a Linux machine I'm not
a Linux person I don't really like Linux
if I'm a bag I'm a Windows person and
kind of a little bit of a Mac person but
what's cool is that a lodger
handle all my Linux VMs for me
automatically so I'm logged into the
same account
and what's great here is when I hit new
I can actually come in and just search
for realm and we partner with realm so
you can with one-click set up your realm
back-end and deploy it automatically and
what this will do is it will set up your
VM type your username your password
credentials everything like that
automatically with realm you can select
your VM machine it'll spin up your Linux
VM for you it will configure an install
realm automatically for you in just
under five minutes I don't have quite
five minutes so what I want to do is I
already have it spun up here and this
has all my normal VM connections here I
can connect to it it has an IP address
where I can SSH into but what I'm going
to do is just go ahead and talk to the
realm object backend so this is what the
backend looks like I'm running version
1.3 oh you can manage your realms which
are all the different data that are
coming in your users so I've created a
single user account they also support
Google login as rady login twitter to
login all that stuff but it comes with a
default username and password store
automatically and you can also look at
all your logs and everything coming in
in real time if you want to integrate
they also have a node jf SDK so you
could integrate that into your website
so what I've done here is I have an app
and I'm inside a visual studio for Mac
over here I'll just make this a little
bit bigger well this is going to do is
it's going to allow me to create journal
entries so I can connect to that
back-end automatically so what we can
see here is that I have this realm
object a journal entry I have a title a
body text I also have metadata that's
coming in now these are nested objects
and realm handles that all automatically
for me so I'm too worried about doing
any parent-child relationships I have a
very simple view model here that's going
to allow me to add an entry delete a
entry and what I'm going to do here is
as soon as it spins up I'm going to
connect to my realm and it's a very
simple code to do that what I'm going to
do is I'm just hard coding for demo
purposes you'd have your user enter
their username and password obviously
and store that in secure storage but
what I'm going to do here is I'm going
to say give me your credentials where's
the backend login asynchronously for me
so I have my purview
data and I'm going to create this
synchronization config to this journal
entry so you can you can configure these
in a multiple realms for every user and
then I simply say get instant so I can
access that realm and what you can see
here is I'm saying get all entries or
insert a new entry here whenever I want
to add it and then edit an entry and
delete an entry what's cool here is that
built right into my my pages so here I
have a list here as I'm just doing a
data binding to my entries to the
bindable properties on my list I also
have another page here and what I'm
doing is I'm binding directly to the
realm object and it's a live object
that's going to enable me to actually
modify it in real time so what I'm going
to do here is I'm going to run an iOS
and Android application and all I have
installed here is the realm databases
that are on here is that the correct IP
that I had and it does look like it got
32 all right so I should be able to hit
go that's not good there we go
build now what I'm going to do is I'm
going to deploy on iOS and Android at
the same time so it's going to spin up
and start my emulators here this is kind
of a unique thing we have in vs or Mac
where you can deploy on multiple
emulators and simulators at the same
time so I'm going to do this kind of
scale this down a little bit and there
we go and we have our Android emulator
I'll give it a few seconds to start up
and spin up and then deploy it is on a
Macbook adorable with a mobile processor
so you've got to give it a few seconds I
do love it because it weighs like one
pound so alright now we should be able
to deploy
oh I know what I have to do why this is
not deploying because I have this thing
open alright let me give you one second
here come on
nope that goes cool all right so I
should have my app I have nothing in it
at this point
and it should be starting over here on
Android there we go so it's the same
application if the simple xamarin forms
up and what I'm going to do is I'm going
to hit add and when I do that it's going
to be a little bit interesting because
what I do is I insert it into the
database first just because for demo
purposes it's way cool because when I
hit add it just shows up over there
immediately which is crazy and what I
just did is I did a full round-trip in
real time to this Linux back-end so it's
crazy here is it's real time so as I
update whoa that is crazy clapped it's
kind of cool now I didn't do anything I
just data bind directly to the actual
data that's there so no matter if I come
in and I add more data over here and I
save it over here I can come in I can
add more back and forth I can swipe to
delete and everything is data bound back
and forth for me it's bananas I don't
understand how it works and I do
understand how it works but it's crazy
I don't like every time I do this it
just blows my mind so for instance if I
come back over here and I go into
airplane mode what I can do is I can
just simply start adding some more stuff
don't say like this is new and I'll hit
save and if I come back over here into
my Android emulator I can go back into
my quick journal now what this is going
to do is it's going to actually I'm
offline so it's going to try to make the
connection actually to my back-end and
it can't it should be displaying my data
locally for some reason but I don't
think it's not oh it broke got some bugs
in it
that's good that's assured that that
normally totally works so should be able
to come back in and go back online
there we go now we're connecting and
then there's my new data that just came
in from an actual iOS application and
it's all synchronized but it's all in
real time now it's of course important
here is that it's the use case that
you're desiring whether you want this
real time database where it's inserting
everything in real time with real
connections and handling it for you
it's very magical or if you want that
complete control with something like a
j''r but these are two amazing
technologies that are available today
and basically doesn't cost anything to
use which is crazy
because you can just deploy it on your
own Linux machine whether it's as your
whether it's windowed whether it's
something else so let me summarize here
since I'm out of time I like to say plan
for global reach I know that sometimes
you're stuck on your database that's
sitting under some developers desk but
try to plan to migrate that code
somewhere so you can easily deploy
automatically cache locally first like I
did even if you're integrating into a
third party API it always just push data
and so soon assume success really we
have tons of training at zamaron
University which is our live interactive
training where we talk about azor stuff
building apps with xamarin I have a
session later today in this room at
around 13 45 make sure you select that
green card and put it in the box that's
what Henry did and we would appreciate
that I know that it's filled with yellow
so let's fill it up with green so I'd
love to come back yet again and with
that thank you thanks everyone so much
I'll be hanging around the channel 9
booth so if you have any questions feel
free to grab me in the hallway once I
close down or come hang out with us at
channel 9 and thanks again I'll leave
this up for a few seconds</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>