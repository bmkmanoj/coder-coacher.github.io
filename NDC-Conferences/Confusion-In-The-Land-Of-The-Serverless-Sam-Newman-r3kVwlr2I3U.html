<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Confusion In The Land Of The Serverless: - Sam Newman | Coder Coacher - Coaching Coders</title><meta content="Confusion In The Land Of The Serverless: - Sam Newman - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Confusion In The Land Of The Serverless: - Sam Newman</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/r3kVwlr2I3U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning everybody I hope you're
having a great NDC Sydney so far I quite
like speaking early on not only in the
week but also in the day cuz at the
moment you're probably all still fresh
caffeinated so I'm hoping for a bit of
an eager audience I'm a little bit
jet-lagged I though I used to live in
Sydney I live many years I just lived
actually just unlike art which you know
depending on the state of Georgia Street
is either a 30 minute bus ride or a
two-day bus ride away you know I mean
this I'm not even gonna get into the
it's just a mess anyway we're gonna move
on so I moved back to the UK recently
and it's been great to come back to NEC
Sydney for a second year and it's great
to see that even more people attending
this year so I hope you enjoy the rest
of the conference hopefully you're here
today to learn about my confusion around
service which we'll be getting into into
a moment some of you may know I wrote a
book about a year or two years ago
called building micro services this is
not a micro service-oriented talk really
I'm more looking at the service
technology generically has some
applications in that space after working
for Thought up to many years and then
join a startup called atomist and then
left atomist when I moved back to the UK
and I've now started my own business
called Sam Newman &amp;amp; Associates it's not
the most imaginative title but there you
go
my accountants idea right at least it
does what it says on the tin I've been
reflecting actually quite a lot at the
beginning of the year for a number of
different reasons because 2017 has been
a fairly momentous year although you
know I mean I think it's
earth-shattering the things have
happened this year I'm not really
reflecting on on the things that are
happening in politics in terms of these
earth-shattering world-changing events
I'm more talking about the fact that I
turned I turned 40 and that I mean I
know you're all shocked because I do
look good but it is you you get into
self-reflection and that's partly you
know you have to spend a lot of time
thinking about yourself which is quite
it's not something that comes easy to me
as a I suppose it does climb a
narcissist but I
I mean I named the company after myself
I mean come on right but yeah I was
thinking about my age and that's feeling
increasingly old and I don't really
understand some of the stuff that's
going on in the world and the service
stuff was just confusing me I mean I had
to remember you know I remember when the
internet used to come on a floppy disk
actually yeah a five and a quarter I
think the first time I had it Romney's
three and a half inch floppy disk so I
remember that burst of excitement when I
got my first fourteen point four K modem
and the internet was suddenly really
fast
and now pictures loaded like this rather
than like this it was amazing or is it
gonna be a cat is it gonna be guess it's
a cat that's the mystery we used to have
imagine that and when everyone's webpage
just looked like just had animated gifs
of workmen doing this they just said
under construction everywhere when when
the Facebook was still called the
Facebook by what it's worth I still
insist on calling it the Facebook but
and you know now of course no one uses
the Facebook anymore I don't think I
think we're all on on what you know
snapchat or the my face space like my
son's always there with his snap
chatting out who's doing this is going
right he's watching some TV know
something tonight funny they'll make a
funny face you know and they'll friend I
don't know what's happening and I'm
feeling a bit old and and think I'm not
that much of a fuddy-duddy when it comes
to server stuff in the grand scheme of
things I I was using Amazon Web Services
stuff from the very beginning right from
way back in 2008 2009 when all they had
was just the ability to like store
binary data and that was kind of it and
the Mechanical Turk I had lots of fun
with amount of chemical to trying to
dream up imaginative ways to spend my
money getting strangers to do things on
my behalf never quite worked out and so
you know I feel like I should really be
able to get my head around this whole
server stuff but it's been a bit of a
slippery concept for me and so really
been speaking to a lot of people doing
research trying to work out what on
earth is going on but I still find
myself quite confused as to where on
earth I should go or what I should do
and a lot of it does actually come down
to that name service
it's like name is difficult but we're
going to get into that now of course as
you may be aware service is
of course riding high here's the
obligatory reference to the Gartner hype
cycle here you can see microservices
apparently have peaked which is not good
for me given that I rely on my book
sales
so I'm putting up the right book on
ServiceNow but yet service was probably
sort of you know gonna come up and
berryhill peak even higher because it is
of course at the moment as we are all
aware service is the golden hammer to
hit the silver bullets into you know
magic and Wonder but of course I keep
coming back to that term server list and
it robs me up the wrong way and you know
it is ironic coming from somebody who
talks about these things called micro
services because you know of course the
first reaction I have is well there are
computers right I mean so the idea that
this is server less doesn't actually
make sense and what is it even even
referring to probably the first
reference the service was computing was
actually way back in 2012 I say way back
like that was years and years ago but in
the grand scheme of things it was and it
was this this post by came from and and
it just coined this phrase it may well
have been around before but it was the
earliest definition I could find that
was well cited and this is his
definition of what service meant you
know the phrase service doesn't mean
that servers are no longer involved it
simply means that developers no longer
have to think that much about them so
computing resources get users services
without having to manage around physical
capability or limits so there's
something about an abstraction here yes
of course a computer sir you don't
really have to engage with them in any
level and it's kind of interesting
though because this is 2012 and yet when
I speak to most people around what
service is really a lot of people
actually really start talking about the
function as a service they start talking
about things like lambda but lambda was
in came out 2014 so service is obviously
much bigger than just functions but is
you know these things are incredibly
empowering the idea that as a developer
you have this lovely platform
abstraction over these computing
resources you don't have to worry about
pesky things like resource limits or
scaling these things are just gonna
happen for you
and of course it gets everybody really
excited and you think oh yeah this is
great this is a wonderful world view and
it's fantastic and everything else and
I'm talking to people now who
increasingly looking at trying to build
the effects we serve as platforms inside
the organization but of course the
reality is there are still machines
there so from the operations people's
point of view they're like going what
the hell's going on here you all talking
about this service crap I'm still here
I'm still valued now of course with
Amazon they're you using Amazon's
operations people but increasing this is
going to change and this sort of gave me
another realization that to an extent
you know service is actually about a
point of view right it's you know from
our point of view of the user these
systems our service I have this nice
abstraction and an understanding
people's point of view is quite
important you know it's great for my
palaces very well really well I mean
from from from living in Australia or
living in the UK Donald Trump is funny I
think if you were not in the u.s. it
might be a bit different so there were
okay we had that definition in 2012 that
was sort of vague but talks about
abstraction talks about being a bit
further removed from the underlying
computing resources and an old colleague
of mine Mike Roberts in a really nice
sort of he tried to break this
definition down a bit more he did a blog
post recently on Martin Fowler's site
which some of you may have read it's
good a score I thoroughly recommend
reading it's actually quite a really
detailed breakdown on on service and
some of the pros and cons and puzzles
and things and he actually goes to
another level of defining what service
is and he comes up with so these five
rules for service computing and I think
that's not a bad start the first thing
he sort of says is okay well for it to
be service you really need to think
about no management of server hosts or
server processes so you're not even
thinking about I want five of these
things do you even do that you don't say
I want five instances of something you
just you just put an application on it
or you put a function on it and that's
handled for you these things should
scale up automatically and also
provision based on the load that's
coming in I'm not configuring an auto
scaling group it's just going to happen
magically this is actually interest this
idea has been around for a long time
this is quite hard to do because often
computing platforms will be tuned for
the common case and may not always react
as quickly as you need them to but the
sort of service functions and features
we're seeing at the moment work quite
well this model your cost should be
based on precise usage this is why some
people get very excited about functions
as a service from the functions not
running this is the request being made
you only you know people have actually
making huge savings just by moving some
of their processing it with the
functions avoiding the need to run a
process nicely doing any jobs right now
performance capabilities are defined in
terms other than host size or count
right I think you can argue the
duplication the first point and then
you've got some kind of implicit high
availability so in other words you don't
have to worry about resiliency that's
but that's handled for you like magic so
this is the okay this is this is a
better sort of detailed definition to
help us understand what a service
offering might look like and you think
about it right this works really well
when we think about functions as a
service these things map right cloud
functions Amazon lambda these are very
simple models right you you have a
trigger that executes a function a very
shortly a function like so on on lambda
those are capture sixty seconds and once
the operation completes the functions no
longer Onix disposed of
we'd like these a really really useful
system it's kind of interesting though I
think a lot of people forget where
lambda came from really lambda in Amazon
at least was actually kind of created as
a way of gluing together
Amazon's various different services I
didn't really fit together and so you
know everyone was always writing their
code to sort of well I've got to take
some stuff out of Canisius and put it in
s3 and functions are each the way of
gluing together all these disparate
services of course you know that's why
things like the API gateway happened
later but we do service platforms also
encompass things like backends as a
service things like BigTable things like
DynamoDB simple DP on Amazon and the
equivalents and as you saying like RDS
isn't leaf it's the relational database
of service I'm not spinning up an
instance what I'm doing is I'm just
doing my data and dynamo is going
grow accordingly so these back ends as a
service this is kind of interesting like
I was thinking about you know I often
talk to people about platforms I work
with clients that have built their own
platforms internally and I keep coming
back actually to what I've always
considered to be the gold class
developer experience for a platform and
that's been Heroku for many years it's
still the best developer experience for
general purpose application hosting in
the cloud is why cloud foundry copies
Heroku is why things like Dees try and
recreate the Heroku experience sitting
on top of Cooper Nettie's but Heroku
isn't serviced by Mike's definitions
because you are talking about spinning
up dynamo spinning out workers you're
still talking terms of the units of
processing those processes of running
there whether or not they're actually
being used so you have to manage those
things yourself so though you know okay
but I've still built really useful
things on Heroku something it's bad it's
just not serviced by Mike's definitions
at least but there are other things that
do fit Mike's definitions do you know
what fits Mike's definition of service
salesforce.com specifically force comm
part of Salesforce this is an
automatically scaling platform as a
service where you can run code it write
coding things like apex and and you know
deploy them this effectively Salesforce
does all that for you but we don't think
of it as being a service platform yet it
kind of is do you know what else would
work as a service platform you know
actually find a thing about like I want
to execute some arbitrary code only when
it's being used paid based on usage
content delivery networks fit Mike's
definitions of services and it's much
faster I could host a client-side single
page app application out of a CDN money
paying based on how often that thing
gets downloaded that this Mike's
definitions and I don't really think
it's fits the spirit of what service is
about so I'm not quite sure we've got
those definitions right really and of
course now we're in the world where we
are overloaded with acronyms right we've
got our infrastructure as a service the
place where really you know I've been
happy for
you know I'm thinking about machines and
networks and it's like right I've got my
hundred machines now and I'm connecting
them I'm plugging in like EBS volumes
and stuff it's all you know it's amazing
to think that we now consider that stuff
to be low level you know low level used
to be crawling around in racks plugging
cables in now low level list you know
infrastructure-as-a-service we've had
the emergence of what some people have
called container as a service type stuff
these are things like Amazon's ECS
service Microsoft's awesome new you know
paid by the second container service
kubernetes really arguably fits sort of
in that space of container as a service
at least when it was initially launched
but of course then we then talk about
the higher level platforms as a service
things where really are not focused on a
container I'm focused on my application
and you know thinking about those levels
of distraction both functions of the
service and back end as a service sort
of fit up in that past world and really
so thinking again coming back to where I
think the spirit of service is about at
least from the point of view of the
application developer I think what it
really is is trying to deliver on the
promises of what a platform as a service
always was supposed to be this was
always going to be the future we thought
any minute now
we would have a good viable platform as
a service experience that gave us what
Heroku gives us but on a more wide
variety of platforms out there I mean
ultimately this is what things like you
know kubernetes are now trying to do
what Cloud Foundry trying to in the
corporate right these things are
building higher and higher level
abstractions you can now get service
frameworks that sit on top of these
container platforms and then of course
you know I look at a slide like this and
it makes perfect sense to me but I spend
all of my time looking at this stuff and
you know it gets very very confusing
they're trying to talk it's it's IaaS or
Kas or is this baa sss and then you
start ending up feeling like a little
bit of a you know anyway harass i know
what sort of interesting you know so
okay i'm still trying to pickle this
you're reading you're trying to get your
head around this problem space and it
was actually kind of nice to see kelsey
Hightower come out recently I mean
Kelsey's were big people in the
kubernetes community come out and say I
now understand what all the
serve as fusses about when you have a
great idea the last thing to do is set
up infrastructure sort of I think he was
slightly tongue-in-cheek
because I kind of feel get he's worked
that out he's a very smart guy he would
have thought that out earlier than this
but this is this is the the vision of
the platform as-a-service was always
what we were promised you have an idea
you write some code just go and work
make it work that's why her oak has been
so empowering for other people's why
some organizations are loving having
things like Cloud Foundry internally and
the server stuff is this is what it's
about really is giving us this
experience and then I come all the way
back again to that original definition
you know the phrase service doesn't mean
servers are no longer involved it simply
means that developers which is probably
most of the people in this room no
longer have to think that much about
them this is in a way the service
offerings now are just better
abstractions over computers and we've
had in the past and that's kind of a
simple and a way they they are sort of
carrying on what Amazon started with
their infrastructures service offerings
Amazon Web Services started to create
tools to allow developers and operations
people to avoid what they call this
undifferentiated heavy lifting what
they've meant by that you know you have
these these teams that want to you know
create services provision and run them
maintain them support them but they were
spending all of their time doing things
like racking up care and provisioning
stuff and plugging in networks and
things and so Amazon Web Services grew
out from the internal Nishat of in the
company to give people the ability to
say actually I want to focus on my
business problem I don't have to focus
on all this low-level stuff and what was
happening is through experience with
creating better and better abstractions
for developers okay so I feel like at
this point after my research I felt a
bit better about what I think service is
and still very hyped but okay right I've
got a sense of what it's about and what
it's trying to target but there are
still a whole bunch of things that are
unanswered questions and puzzles for me
one of them is actually about resiliency
now this is might be as a surprise to
some people because of course you know
Mike's definition was implicit high
availability
these are things where you can offload
your concerns about resiliency because
the platform's going to manage it for
you yeah Amazon is smart so you don't
have to be right you know that kind of
thing so many years ago I was working at
a investment bank in the UK that
investment bank no longer exists
part of the reason it longer and longer
exists was because of some of the things
that the team I was working with were
doing I'm not sure how many of you have
seen the film The Big Short or read the
book the book is excellent by the way
and this details really all the trigger
points on the global financial crisis
and one of the things that was happening
as part of that where people were
creating these things called
collateralized debt obligations this is
when you take a whole load of bad debt
and you bundle it all up together and
then you say and now it's all good debt
these people are these people that you
thought may not be able to pay back
their debts you get all these mortgages
together and you go and now it's all
good and I know explain this to me when
I first joined the team and I said
explain that to me again how does that
happen
you take loads of bad stuff and you put
it all together and then you say it's
good right and they go yes I say how and
then they said black Scholes and waved
their arms a bit and then then I said
I'm clearly stupid so okay great we'll
just make sure that we can price these
things these trades and process as many
of these things as we possibly could
turned out it wasn't stupid it is
actually you just doesn't work
apparently if you do take loads of
and bundle it all together it's still
 but anyway took us a while to work
that out and some people got very rich
and a lot of people got very poor and
the film talks all about that but
nonetheless I was having a lot of fun at
the time because we were trying to price
these things and handle these trades as
quickly as possible the idea being you
know we want to scale this stuff up the
more volume you can do the more money
we're going to make and we're actually
running this sort of system to handle
these trades on what we used to call it
was actually a grid we were using grid
computing that's what we talked about
before there was a cloud and so we had
all our little pricing nodes that was
sitting there putting in data from
various different sources so we had
systems that were providing information
about risk we were putting in market
data and
Meishan so signal trampling out there
and then we would do all our
calculations and store some information
in the database believe it or not part
of the reason we were using this
particular product protocol data sign
apps was because an awful lot of these
calculations historically were being
done in Excel spreadsheets on traders
desktops so there's a really interesting
world where a trader would get given a
bonus based on how good the trades were
that they were making and the
calculations that told you how good the
trades were that they were making we're
running in Excel that was running on
their desktop and so they were doing
things like oh I'll plug some figures in
the number comes out and it looks like
not a good number ok I will just go and
tweak the algorithm a bit until the
number comes out to be correct
and some people had pointed out that's
probably not a good thing to be doing
and so we'll had our job was to
centralize it so believe it or not a lot
of what we were doing
we're running like Excel solutions on a
massive compute cluster well the nice
thing that dates turn-ups could do was
it had this ability to run in screen
savers and our prices you know that the
little calculations we're doing moving a
lot of them below individually were
quite fast and so we realized that you
know at lunch time we could increase our
capacity by running these screen savers
throughout the bank and they then became
workers in the grid and then one of the
one of our friends in the operations
team said well look that we have these
whole disaster recovery centers so all
the that trading houses in London have
other offices ready to go in case there
was an incident in London that meant you
couldn't do trading you'd actually go a
bit further outside of London and
there's a whole trading floor waiting
for you so you don't know you know lose
money you don't miss out too much time
at that time this whole office just
about 20 miles north of here they've got
like three or four hundred computers and
they're all turned on and active because
they have to be to make sure they're
working so we could just run all of
these algorithms on this feat would
massively increase how quickly we could
go and we thought that sounds awesome
so we did that and then some interesting
things happen so suddenly you know our
pricing grid we suddenly drastically
increase the number of nodes we're
running on we'd scaled it up hugely and
you know the way we built our pricing
alguns works
really well and then some really
interesting things started happening
that was very confusing at the time and
so we realized what had happened we had
this infinitely scalable thing in the
middle that we could now stretch out and
it can do loads and stuff but every
single thing that we talked to that we
pull data from or we wrote data to that
wasn't in that grid got wiped out
totally we blew up so many downstream
services that we got a lot of people
very crossing us and this is sort of
thing does is problematic right when
you've got this infinitely scalable
thing you have to start thinking about
throttling how do you throttle
connections to downstream things like we
took out the database we had too many
writes going into a database normally
what you do is where you handle that is
that you sort of throttle number of
database connections is using things
like connection pools right so you think
about inside a normal application if
you're going to talk to a database you
have a connection pool that has a fixed
number of workers and so as a request to
come in those requests will wait until
they can get a worker out of the pool
that limits the number of calls that are
going to be going downstream and this
actually becomes a throttling mechanism
so now we can limit how many inbound
calls we're going to have and manage the
load around those databases as part of
the reason we use connection pools
it helps us order that load and so you
know this acts as a throttling mechanism
the other thing it does is if those
things are blocking and they can't get a
worker because the database is slow
those threads actually timeout assess
your load shedding mechanism that's
really great so we throw that stuff out
these are useful things but the problem
is that connection pools require state
they are your persisting some aspects of
state between calls you have multiple
workers how does that work in a function
as a service world same problem right
same problem I had with our grid these
things weren't around long enough to
have maintained that state had too many
of them the functions of service world
great I can infinitely scale up my
functions as more load comes in this
platform will spin up more instances for
me those more instances are going to
make more database requests where's my
throttling mechanism at this point for
anything that isn't itself also a
service
back end so if I've got a traditional
database that I'm talking to I can very
easily just have more load coming in and
cause a downstream outage by wiping out
that database like on Amazon lambda for
example you have very limited ability in
terms of how you can throttle these
things and the best you can do is
throttle a number of invocations of your
functions and it's not a very graceful
mechanism for doing that so this one
mechanism that we've been using for
years we are even thinking about it
that gives us properties around
resiliency and allows us to handle
if failures we've just lost that without
even thinking about it now of course the
answer is
wow that's fine Sam the way you solve
that is to say well we'll just use the
back ends as a service will just use
BigTable we'll just use dynamo because
those things can't are elastic as well
as are those things will balance and you
know what that kind of works and that's
great but that kind of implies that
you're all in on service and for most of
you I think for you create your
brand-new application maybe you can
build it only out of service components
but for most of you you have an existing
system and you probably want to start
introducing service components into it
so we start thinking about hybrid
applications like that we have these
interesting impediments mismatches that
occur as I was thinking I was wondering
like because even though experiences as
that investment bank where we had a
similar problem where would effectively
scale something up we'd have mismatched
capacities and blew this thing out and I
was wondering if this was actually it
was it was it's just a theoretical
problem that I had with service was it's
a real issue and I saw a really good
talk by someone from bustle at NDC Oslo
this year and they're famously kind of
all service and serving like 60 million
unique users a month they're not all
serviced by the way ago she if you talks
are very openly and they're not all
service they'll have a good poster child
for the use of Amazon's service features
they had exactly this problem when they
were migrating over to using lambda jobs
they just wiped out all of their reddish
clusters and they had to do an awful lot
of work in terms of how they tuned
they're ready to clusters how they there
were having to do stuff at the
networking level to handle the
connections because anything that wasn't
in that service platform
suffered from these impairs mesh matters
this is a real issue for some
organizations so saying you get it's
amazing out-of-the-box high availability
that's fine for a local concept around
your local functions but it may not
actually give you high availability of
an overall application stack there are
other areas where we make use of state
between calls local state to entomb to
give us resiliency and that's in things
like circuit breakers you know if I
think about how we normally implement a
circuit break it's a very simple idea
you know I've got some downstream calls
I'm making this example maybe I'm
talking to my risk service and if that
service as we've got load coming in if
that downstream service is behaving
unhealthily maybe it's timing out what
you do is you just pop the circuit
breaker open and you degrade
functionality you effectively go to
failing fast you reduce the resource
contention and again you sort of shed
that load you degrade you degrade
gracefully it's a very very common
pattern for how you deal with
synchronous calls and how you make those
more resilient but again this requires
state between calls it's not you can't
have a circuit breaker that only exists
for one call because you have to see
okay i've had i sent five calls through
five of those calls of actually errored
in the last ten minutes that's unhealthy
now you don't have that ability that
sort of gone that's the problem as well
so I'm starting to think you know what
what is the answer here because we've
lost these throttling mechanisms like
database connection pools like circuit
breakers that throttle and shed and
avoid cascading failures but I don't
leaf it when we start thinking about the
functions the service world and I'm
starting to think well actually we might
need something that fits in between our
functions and things that aren't
themselves part of the service platforms
I'm not quite sure what they might be I
do wonder if this might be answered by
some of the service meshes that are out
there now things like link addy and it's
do but those all really rely on running
proxies next to your your X and things
that are executing you can't do that
with these functions because this is a
platform that's abstract it from you
I spoken to loads of people about it
like people who spend their whole lives
working service stuff a couple of
friends of mine run a consultancy it's
all they do they're all serviced all the
time I think they come out on their
t-shirts and then they go yeah yes a
problem I'm like so how do we solve it
and they go yeah that's interesting
isn't it it's like is that the answer he
goes yeah let's move on so but maybe
this isn't an issue right maybe you're
not building systems that are going to
be mixed and have these bursting loads
and high loads where you can't really
provision enough capacity in the things
that aren't service to deal with a load
you may not have real legitimate high
load high availability requirements you
might just wish you had but then I'm
going thinking well if you're not in
that world then a lot of the stuff that
service gives you doesn't really matter
anyway right so that gets interesting -
so resilience he's a puzzle to me
security comes up a lot they have
certainly been some people who have been
critical certainly of Amazon Amazon's
offering that there's been some security
problems around their exit area
implementation of lambda I mean under
the hood the lambda functions are just
running inside containers right no
actually early on early doors
it was just running docker on the hood
you can poke around and see all the
containers and stuff like that and of
course that starts making people a bit
worried because we know that actually
the isolation of container technology
isn't as good as the isolation of
virtual machines so there are all kinds
of situations when you're just looking
at normal docker containers in which one
container can gain access the host
operating system and two other functions
so you know we don't we try and avoid
this sort of stuff right we we say no
know if it's untrusted code if it's
other people's code run it into VM when
you spin up an ec2 instance or Google
compute instance you're running in a
virtual machine there are other people's
workloads running on the same physical
machine but the virtualization keeps
those things of parts we have less
concerns but what about containers
that's what's happening here with these
functions as a service so we worried
about that the reality it's a bit
different right because here's my code
and is executing what we're worried
about
could somebody else see my container
could they gain access it because they
sniff the information that's running the
Keenan the thing is though this is much
less of an issue than people worry about
because if my function isn't running my
containers not actually there it's also
very hard for somebody to target my
functions because there's no guarantee
about where my functions are going to be
so any sign of attack that could happen
within that sort of container engine is
only going to be opportunistic and the
other thing of course is you're not
being given a raw container in these
situations with functions are so it's
anyway what you're actually being given
is a sandbox which happens to be
executed in a container you're not
actually at that raw contained level as
this actually is much better right you
can't hack something that isn't there
you're not giving people access to the
raw container engine so these functions
as a service I'm a security point of
view this is this is actually really
good
kinda because some of these functions
really do vanish when you don't use them
and some of them don't if you're using
JVM based processor at JVM based
functions the JVM has a spin up time the
JVM is not designed for fast spin up
execution it's designed for if neos of
consistent performance running you know
handy large-scale the way all the JIT
caching works is it takes you know a
couple of minutes often to warm up a JVM
effectively and so the way Amazon gives
you some adequate response time for JVM
based functions is they pre warm some of
your functions and they will leave them
around for a bit of time they won't
charge you for it but they'll leave them
lying around so subsequent invocations
can reuse the date that JVM that means
they are floating around longer than you
think they are this is actually the
bus'll team found this out as well part
of the load issues they were having on
Redis was they were hitting the 10,000 a
10k limit on each Redis instance it had
10,000 active connections you can't run
that many functions but those functions
were actually being left lying around
and they could see the connections and
that was really interesting to them
because I son realized well actually
that means these functions are living
for a lot longer than we think they are
so this isn't as clear-cut as it could
be I'm
especially interested in looking into
the details of Microsoft's container per
second sort of priced yeah offering
because that is more like a raw
container other concerns that gets cited
of things around lock-in and this gets
talked about a lot in the context of the
cloud and I think there are some
legitimate concerns here here because
when we first when the cloud was first
talked about everybody became obsessed
with this idea of cloud is utility oh
it's going to be a glorious world you
can just move from provider to provider
you can go where the market wills it ah
Google compute engine has reduced their
price by one cent I will move over and
save myself ten whole dollars and it
will be seamless and wonderful and it's
a it's a lie isn't it because most cloud
services we used are not utility in the
two sense of the word you know what's
utility well electricity is utility so
the UK has a deregulated energy market I
can go to a site like you switch and say
tell me the cheaper deals I can get I
can click a button and then my provider
changes in two days
and nobody notices I just get a bill
from a different person at no stage that
I have to rewire my house because the
voltage of the electricity was different
so this idea of cloud as you see doesn't
quite work it's not as seamless as that
and so what I've always talked about
with lock-in in cloud in general is
actually spin it around don't think
about Lockean think about the migration
cost instead like when you take a crowd
any cloud service what you're always
doing is you're trading off the
potential lock-in or the potential cost
of migration against the fact that I
don't have to do the work I can just use
this load balancer it works bang done it
that's a hole at a time I've saved I'm
trading that off against the fact I
might later on have to move to a
different provider maybe move on premise
move to over to someone else and so you
know you think about some of those
services you use are much easier to
migrate than others so I always sort of
think about spectrums it costs of
migration right I think that's things
like blob storage so Amazon s3 is an
example of blob storage binary large
object storage moving blob store
is actually quite simple in a way you
can just ask Amazon to send you you can
send them a hard drive if they send it
back with your data on it
and you upload it to Google I mean the
equivalent services are quite similar to
each other so the migration cost isn't
too bad
compute ultimately yes the way you might
spin up in instance is the same but once
you've got it it's a VM v MZ v m2 ball
so the migration if all I wanted is a
different machine over here
that's quite no load balancers likewise
they're pretty easy to recreate easy to
spin up your own you start getting into
other things those are different like
the functions of the service offerings
are different they have different
characteristics these are things that
may not be portable as portable do you
think in fact back-end is a service I
think are significantly more problematic
you cannot recreate the semantics of
dinamo anywhere else in the world except
on Amazon and except on dynamo redshift
is the same Google's BigTable is the
same and easily Google BigTable you can
kind of go to Cassandra which is similar
ish your migration costs for those
things are much higher and you've got to
decide is that something you're worried
about it does come back really to this
decision maker you've got to make it's
like I can pay now as I'm gonna
implement myself and therefore come up
with a portable solution but I'm going
to maintain that or paint later and so
you know you've got to think a little
bit about some of this especially
embracing the server stuff which at the
moment at least from the offerings we've
seen from the public cloud vendors don't
really seem to be portable in the way a
lot of that other offerings are it sort
of in this space you know some people
say well one way I can handle this is
black and mix my vendors up that way I
can I can hedge my bets I don't think it
makes any sense it was interesting you
know one of the early benefits was
sighted around microservices oh we can
be polyglot we can pick the right
language for the right job we can pick
the right database for the right job and
if you are like a 10-person development
team you do not want to be supporting
two or three or four or five different
databases and five different programming
languages it's insane you spend all of
your time trying to work out okay so how
do I do stuff in closure oh we've got
stuff in Ruby how do I build stuff in
Ruby again in reality that stuff doesn't
really make much sense at an
organizational level
you have a mix of technology but it's
however idea of polyglot I think doesn't
really work for small scope stuff and so
I think the same as for cloud vendors as
well like if you want to use a service
platform I think it's going to buy in
the factory you're all in on that
platform for that use case but maybe
over here for a different product a
different part of your organization
maybe you do try Amazon or Google
somewhere else but you also get a little
bit I don't know we all sort of think
locking is bad that we was stuck in some
walled garden thats the phrase that's
the nicer phrase use that the walled
garden the thing is I don't sometimes
locking it's perfectly fine if that
walled garden is really nice if you
really love being there it's like I'm
kind of all right with this I am all in
on the Apple ecosystem you know what I
absolutely appreciate lots in this watch
only works with this bloody phone only
with an Apple phone I can't swap out an
Android phone and have my watch work do
you know what I don't care because as of
all gold ones go it's really nice it's
got this lovely it's beautifully
manicured people bring you free drinks
you sit by the pool you hear the
babbling brook been locked into some
other walled gardens which are not as
quite nice the walls are falling down
there's Ivy everywhere it's full of
cockroaches and you just want to leave
but these actual walled girls especially
on the service officer she is still
really pretty good so I don't I wouldn't
obsess about that stuff at all
so where are we well I spent my time
trying to get to a sense of what
services and I think I've graphed and
really is just another name for
platform-as-a-service
ones that just may be slightly high
level of strategy that's really all
we're talking about here I think there
was some legitimate unanswered questions
around the resiliency side of things and
I think I think everyone could do better
about security there are other areas as
well where there's still quite
problematic especially the functions as
a service people have been working for
last couple of years trying to work out
how on earth do I work out why my
function failed what happened how could
I trace the calls in my system Amazon in
particular than a really good job with
that recently with things like x-ray
they've now got their sam stuff which is
nicely named where you can actually run
and execute and debug functions now
locally you can run as your functions
actually now on Prem this is actually
making it much easier for you to
diagnose those issues and so those
things are getting fixed in short order
I think we're also going to see more and
more frameworks that give us things like
function as a service on platforms that
we might run ourselves so there's
there's probably three or four of them
now that will run like we give you
function as a service on top of
kubernetes for example then I'm sure
pivotal would have put something into
Cloud Foundry by now or if you part with
this big enough check so there's some
stuff in there that's great and it's
wonderful and I'm starting you know and
I think they aren't look at these things
can be really empowering there's still
some puzzles out there I still keep
coming back and you know we constantly
devalue these terms as well we had
adjoin at John mint something for a
while you know and then and then it's
like oh it took about 10 years for us to
just completely devalue what that term
meant DevOps came along and that took us
about six or seven years to completely
dilute the meaning of DevOps maybe less
than that you know come on by DevOps by
my DevOps I want 15 DevOps please just
install them here in the rack and
everything's going to be fine micro
services they probably had a good
definition for about half an hour right
it's like Moore's law is applying to how
quickly we devalue these terms and and
serverless is sort of you know it
already means a bunch of mush to a bunch
of people there's also this mantra you
know okay well we've got to be all
serviced all the time and it's like well
really just kind of use what works we do
have this fundamental truth though you
know as luke cane said many he's the
founder of pop hip he said many years
ago there is no future with fewer
servers there was no world in which we
aren't going to mean more computers
doing more things guess what the number
of computers that we're producing the
number of computers we require is
drastically growing fast much much much
faster than the number of computer
software engineers we're creating or the
number of people are going into
operations jobs we need leverage to use
these computers well and serve as
platforms platforms as a service are one
of those nice abstraction points that
give us the ability to work with and
manage these computers and without
having to deal with some of the detail
those and
I'd them so I hope I haven't turned you
off to them I do think they're really
interesting I don't think they solve
every single issue as always with any
new piece of technology give it a go try
it out maybe not on your most
mission-critical stuff to start off with
there are some people out there that
have got some great examples of how
wonderful and empowering service
technologies can be but just do dig into
the details behind the hype especially
don't take the case studies that come
from the vendors of face value so thank
you very much for your time I'm here all
week try the buffet I'm doing a talk
tomorrow on application security and I
think in about 20 minutes and we're
doing and ask me anything in room 8 but
thank you very much so we do have time
for questions if there's are any
questions out there if nobody answers
our ask a question to my here we go
question here third vote for three
so the question of those that maybe
couldn't hear it is this this this
technology is changing all over the
place locks in service elsewhere new
technologies coming up all the time how
would you handle that you invest in
technology that then ends up becoming
obsolete I think the reality is is the
every organization has sort of a
different appetite for adopting AG
technology there are some organizations
that are very very happy to really
invest in picking up some new piece of
technology hoping it's going to give
them some massive boon and they're
accepting of the fact that they're going
to back the wrong horse occasionally
there's may be organizations that really
are technology organizations to the call
that have people that keep up on the
latest trends that are therefore better
able to assess that stuff you have other
organizations of course which really
they want more stability and so I think
the key thing you'll understand first is
what kind of organization are you and
even within an organization you might
have variation right so I've got okay
this is where we make 90% of our money
maybe let's not experiment here because
we might screw it up and so the first
thing is you've got to understand your
appetite I think what you've got to do
is you've got to create spaces in your
organization's where you can actually
safely try new things that's kind of one
of the areas why Microsoft architectures
can be useful because you can try a
change locally on one service boundary
for example but there are other things
you can do there's other non
mission-critical applications maybe
you're a little bit more okay with
trying something new there I dislike it
when people come and say we're a dotnet
shop or we were a c-sharp shop and it's
like you shouldn't define yourself in
terms of your technology right because
that's a guaranteed way for you to be
behind the curve you should define
yourself in what you do if your
customers technology is a means to an
end and so you've just got to create
spaces where you try and bring new ideas
that come into the organization and it's
just hang you vet that stuff and so
other things I'd always look at case
studies read up try and contact the
people put those cases out ask some
questions some of those people are
really happy to share their experiences
don't take what I say
and as true right if I think get
technology and bake it off against each
other try it out and I think keeping in
a wider eyed wider view of the ecosystem
can help some areas of our technology
space are churning much more quickly
than other areas cooper Nettie's there's
loads of people that run great
production loads in kubernetes but it's
adding so many features so quickly that
like if you're going to use it for
example maybe actually you stick to a
subset of the feature set and ignore
there's other things so I've given you
of course the classic consultancy answer
it depends I am available for
consultancy by the way if anyone needs
any help I'm happy to say it depends all
day long I've also got a few main
quadrants I can share - any other
questions one over there
yeah so the question was if you had
access to say a containerized solution
you've also got access to say a function
as a service based solution service
option
what what's going to push you to
implement one from the other I mean the
first is that there are some just there
were some strict operating requirements
around the functions of service
straightaway right you know they can't
run for a long period of time they've
got to let what I execute in less than
60 seconds and so that already is going
to take out a class of services that
you're going to want to run so services
that need to be stateless for example
those are out if you can't offload the
state maybe you're keeping state in
clusters that's already going to excuse
that stuff there are limited technology
stacks available for the phone to
service again that's going to help push
that out the I think where I am at is
I'm starting to use them I'm starting to
push more thinking they're like now I'm
thinking what can I move I'm now
thinking okay actually I'm going to
start a new piece of functionality and
I'm going to put it there and so that's
sort of becoming a default choice for a
lot of people around certain pieces of
functionality the key thing is I don't
think they necessarily handle a lot of
complexity well one of the anti-patterns
I started seeing certain the complex
domains as people have hundreds of
functions all kind of will get wired
together and it becomes a bit of an
unmanageable mess so I still think for
complex logic I still seems to fit
within a different type of structured
code but that's that's really fuzzy in
my head and so for me it's really just
down to I'm actually pushing more stuff
there now but it's it's within those
constraints it's not a terribly clear
answer I've given I'm aware I should
write that down try and clear that four
up are there any other questions okay
oh one here
yes the question was what tools are
there for developing and developers and
debugging was that know you touched on
so there are really interesting so
lambdas actually a good example is
actually way more painful to set up than
it should be it's a simple idea that's
more complex about me expects there's
actually quite a few frameworks out
there that actually simplify the task of
creating a lambda function and updating
the lambda function confusingly one of
the popular frameworks for this is
called service which gets really hard to
Google for so there are if you're
working a certain technology stack it
might be worth you seeing if there is
already a framework that helps you
manage those functions in terms of
uploading and stuff like that when it
comes to stuff like debugging basic
things can help just actually using a
grated logging sticking stuff in cloud
watch lots of examples he's got an
aggregated logging platform already
there's no reason why you can't be
emitting log lines from your JavaScript
functions out the x-ray stuff is helping
a bit that can theoretically to show you
traces between how the functions are
connected the Sam stuff I haven't yet
tried using myself
that's only being that kind of fairly
recently that actually allows you to run
those things locally because then you
can't actually put debug points in your
JavaScript function because it's running
locally on your machine and that's
obviously good if you're trying to
recreate issues this is still not a
completely solved space though because
of that abstraction because it is also
ephemeral you can't go back and grab it
and grab that state and even with
container technology if you've had an
outage or a problem one of the first
things you do is not blow it away is you
just you just you've seal it you know
you take it out of commission but you
leave the container running or you you
know so you can actually go in and
inspect that container work out what the
hell's going on so I do still you know
use tools like Assisting for doing that
captioning system traces on live systems
to find out what the hell goes on we
sort of don't have that yet with the
functions and there still feels to me
that there's gaps the flipside of course
is almost by definition you're putting
smaller amounts of code in these
functions and so your surface area fees
nasty complex problems to arise
should theoretically be shrunk I also
don't think the other providers of
functions that service
yet have all stuff like x-ray and and
Sam so you'd probably have to look into
what is your doing and a lot of google
doing around those things I'm not quite
as aware of that stuff
any other questions all right I'm gonna
let you go thank you so much your
attention you've got a bit of time a bit
of a breather I'm going to be in room 8
for an ask me anything there being
live-streamed and I think they'll be
recorded as well and I think you can
give feedback via the app or you can
vote vote on the way out that'd be very
nice thank you so much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>