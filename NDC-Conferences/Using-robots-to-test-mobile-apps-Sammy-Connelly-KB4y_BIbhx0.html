<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using robots to test mobile apps - Sammy Connelly | Coder Coacher - Coaching Coders</title><meta content="Using robots to test mobile apps - Sammy Connelly - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using robots to test mobile apps - Sammy Connelly</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KB4y_BIbhx0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name's Sam I'm a mobile software
tester please put your hand up if you
have purchased Arduino stuff before okay
so the next question I was going to ask
is who's actually made some stuff LED
lights just switch on and off and who's
actually done some actual projects this
is my first Arduino project I'm going to
share with you I work at a company
called EPM I'm actually contracted out
to another company I can't actually
officially say who my client is for
contractual reasons and the fact that
this talk is recorded but I helped test
a mapping application you might use
especially around the public transport
area but I wouldn't say much more than
that
so this this robot his name is tapping
mocked up face he was built during a
hackathon and I had a poll in my last
company to name this robot and this is
the name that stuck so I'm actually
going to demo the robot first and then
go into the details so let's pray to the
demo gods that this is going to work I
will get up photo booth we will arrange
so if you're not sitting right up front
you should still be able to see my phone
is going to sleep
let's unlock there we go and oh you can
see my shoes I had this all set up
before work
sorry I'm just going to get into this
one I'm cool and let's see if you can
okay that didn't - to Japan there
another tune you might be able to
recognize if I any guesses what - please
I'll Game of Thrones totally Game of
Thrones there's some quirks with it oops
and some timing issues as well but there
we go so that's that's tap emic typeface
in action now I will go back to my
presentation I'm going to unplug tap it
and plug in USB port let's see if we are
working there we go now
tapi is based on the tapster 2.0
open-source designs it's all up on
github you can 3d print most of these
parts if you like it's created by Jason
Huggins who was the founder of this
lynnium framework so I guess the next
evolution from web automation mrs. mirga
automation you can see the first version
of tapster
he are trying to play Angry Birds and
the the design is a little different as
well
you can see that the the tablet is not
secured in in place and so you'd have a
lot more movement all of these green
parts and yellow parts I printed in my
previous company when they got a 3d
printer for to give away as a prize at a
conference
and the larger parts were laser-cut it
took me about 20 hours to print most of
these parts so and note to self the
first time I did a print don't put
things near the ends of the printer or
else they kind of come out a bit like
this so I'm wasted about five hours of
printing trying to get some of the parts
and they turned into a mess yeah and so
the larger parts I actually went to a
hackerspace actually just out in right
near ride Medibank dinosaurs robots and
dinosaurs is a hackerspace
you can touch base with your local
hackerspace and they're generally have a
lot more hardware to do some of these
things like that you can also network
with people who have interests in these
areas too and I had someone there was
able to help me build this and it was
awesome that it's just able to reach out
there's an Arduino on the top and it's
connected into three servo motors that
rotate round it uses magnets and ball
bearings for joints so I can actually
just disconnect these and pass it around
so they're magnets and ball bearings
and it all just connects up together it
took me about two days to build this
once I had printed and ordered all of
the parts it wasn't actually that long
to build and the piano hackathon was
maybe about a day and a half
I spent approximately 300 dollars on
parts as well if I was to source local
parts I could probably get that a little
cheaper but because I was trying to
follow the American instructions all of
the parts that they listed in their
build of materials were from American
vendors so that did increase the cost a
little bit because of higher postage and
the the there's a we have a hackathon at
tyro once every three months and it's
one and a half days this was a hackathon
just before Christmas last year so
that's why it's Christmas themed the
Merry Christmas the jingle bells we
there was even a Rudolph with a LED
light who had flash in time to the music
and so I didn't actually take that long
to get something up and running I
thought it would take a lot longer I
thought I'd have tons of calibration
issues but I've disassembled and
reassembled this robot now four or five
times and each time I do that it still
performs well enough enough to
demonstrate how you can use robots for
mobile automation on the Arduino board
you have to install this standard
Fermata
protocol first I don't understand why I
was just following the instructions and
doing the magic I'm running no
JavaScript on my local machine and the
standard firmata protocol using the
johnny-five api library converts it into
arduino code for me you can there are
actual chips you can buy
very similar to Arduino but run no
JavaScript natively so you don't have to
have it plugged into a machine I can't
quite remember the name of it but I
should have put in a slide for that so
yeah johnny-five is the JavaScript API
used for robotics and Internet of Things
if you are used to using javascript in
certain styles and having access to
certain libraries this can be a little
bit of a transition at first because it
is fairly limited in what it can do and
if you're used to certain flavors of
JavaScript then it can be a bit
different but the benefit of I found the
benefit of using javascript with
robotics is that it made debugging a lot
easier I could just tap here go to X Y Z
without having to stop and restart the
application being able to debug hardware
in real time is is amazing and I had
never had that experience with previous
hardware I've done lots of Lego robotics
with school kids before as well and
trying to debug those programs you
basically have to press play and watch
the robot do its thing and try and see
what's going you can't put breakpoints
in anywhere you can't just start a bit
of program from a little bit and yeah so
hardware does make it introduce
interesting debugging issues we mapped
out the XYZ coordinates of all of the
keys so at the moment it's just hard
coded for my phone and screen size
there's also already the maths has
already been done to convert their
rotations of the motors into XYZ
coordinates if you remember high school
maths
there's cosines and trigonometry and
someone else did it for me so I I didn't
have to remember that trigonometry we've
mapped out all of the keys in
two string representation and then we
represent music as a string with spaces
so for example the four so for example
on this keyboard we have C 3 and we've
mapped that to certain location the s
represents sharp itself it's a d3 sharp
or a d3 yes that's the note we'll play
we use the numbers here to represent how
long to play the note 4 as well so in
our first attempt you can see on the
first line up the top with the Mary
function it's a little bit more
simplified we had only eight keys on the
keyboard and we would use more letters
to represent how long to play the note
so he would just a single e would play
for one note and four C's would play for
four notes I come from a little bit of a
music background I was able to transpose
some of the sheet music I had for the
Imperial March on trombone and you the
timings not quite right from the demo
the short notes aren't quite the right
timing because we're only approximately
breaking up the music but I mean like I
could do a more tweaking to get the
timing better but I haven't invested
that much yet in into it I've got this
code as well on my github repository as
well there's also this function this is
the function that converts the XY or if
you pass in the XYZ does all the
rotation stuff magic for you and I guess
how can this help you test I think
realistically one of the main
applications I can see for this is doing
battery testing
if you wanted to set this robot up to
interact with a real device using real
Hardware over five hours or ten hours
doing that type of testing manually it's
very boring but I've had to do it in my
current position where we took two
phones out and did compared a dev build
and a production build and measured the
battery difference between that if we
could do that with with robots it'd be
pretty cool or unless so I feel like the
the the libraries and frameworks around
mobile automation testing are getting
mature enough that you wouldn't really
want to do this for your UI automation
all the time because as soon as you have
hardware it introduces extra flakiness
so you have to justify the cost with the
benefits so talking about cost and
benefits of automation testing I'm going
to go through another presentation to go
through a risk framework that you could
use to help determine what to automate
so I am going to open up this one
I tried inserting these slides it didn't
quite work but I'm just going to go
through this fairly quickly so this is
what the sheet in front of you is for so
my previous company was Tyra payments
they do F post-processing so if you went
down to the cafe and paid by card they
would have processed that transaction
they are targeting small to medium
businesses around Australia and got a
banking license about two years ago so
they do a lot of the agile stuff micro
services all of these buzzwords
buzzwords buzzwords TDD and I found the
pair programming that they use an
interesting idea they do pair
programming all the time unless there's
an odd number of people who turn up in
the team on the day
pair programming is the default and
solar programming is not so every
machine is set up for pair programming
two keyboards to map mices Mouse's mices
me
two monitors and it tends to encourage
more collaboration has a very disruptive
culture but that's a bit about the
context I'll get into this risk
framework so you have a mobile app you
might want to break it up into floats so
for example we have this simple banking
app and you go through a couple of
different flows we have Darth Vader he's
registering his bank account
two-factor authentication yada yada yada
stuff you've probably seen before
setting up a pin there we go he is now
into his bank account of the Death Star
because even the Death Star has to do
his banking ah there we go so he might
want to transfer funds hopefully this is
functionality you've done in your
banking apps before he might want to
view through past transactions to see if
they've gotten through correctly he
might want to send off the contact us
request in case something is going wrong
and then tyro will give them a call back
later he might want to change his pin
into the old pin and then into the new
pinion twice and also logging in so he's
got these six-feet features or flows
that he can do in the app we're going to
map these flows onto a report so for
example we're going to plot our
frequency of use along our x-axis and
impact if broken along the y-axis we're
going to draw this nice pretty graph and
for example with registration you would
expect it to have a high frequency use
registration sorry lower frequency of
use I'm getting my words mixed up
you should only register once but if you
can't register for some reason has
hit the fan so now that I've done the
first one maybe in your pairs fill in
the rest of that sheet so for anyone
who's watching there's a sheet
in front of everyone which looks a
little like this which is very similar
to this slide with sticky notes so
please have a conversation with someone
next to you on where you think the next
six features or next five features
should go out in the shape
well bye-bye broken just yeah totally
broken like if if the user could not do
this feature
cool how did we go without exercise
hopefully you realize through having a
conversation with someone we all have
different perceptions of risk and going
through this it doesn't matter if your
answers are slightly different to mine
because we all perceive risk differently
as well and this is only just one way of
doing this type of analysis as well and
it's not going to be useful for everyone
but at least it's an idea I'm going to
share with you so I popped the when I
went through this exercise transfer
funds slightly more frequent of use but
has still the same high impact if broken
being able to view transactions may be
slightly less frequency of use or so the
impact might be reduced you might be
able to viewed monthly past statements
if there's a workaround contact us
hopefully if this is broken in the app
you could probably get our phone number
from our website so there could be a
potential workaround being able to
change your PIN hopefully you don't do
that all that often who's ever changed
their pin with their banking up yeah so
maybe but it has a really high impact if
broken so if your pins been compromised
and the change pin doesn't work properly
then we've got some issues but the most
common feature being able to log in
because everything requires logging in
so if I was looking at what to automate
from tap emic tap face point of view who
thinks we should automate the contact us
first
or maybe the change pin I would actually
start with the login makes the most
sense for me to automate at the moment
so having
high-performance of the log ian is
probably an important thing to measure
if you set this up and log in 50 times a
hundred times and you're able you have
some monitoring in place to be able to
measure them either from the device or
from the backend server point of view
that could be an interesting test to set
up and that might add some value having
that high performance with the contact
us request probably doesn't matter so
much so going through this exercise
would would maybe highlight that my
phone's ringing would highlight maybe
that would be a good place to automate
or do this type of put in this amount of
effort into talking about trying to
measure performance testing of being
able to log in there was one time where
I went out for a day or two just with
maybe about three phones and logging in
over and over and over again and doing a
rough approximation of how long it took
to log in often you know there was a
combination of different iOS a--'s
different thorns different Wi-Fi setups
so using the the tyro Wi-Fi system using
Apple's Wi-Fi system just going to the
Apple store using 3G using 4G so I did
this type of testing over a day or two
because when we did a buglets at tyro
whoops it was one of the feedback that
was raised was it was very slow to load
on login and the actual cause of that
was when people were on the tyro Wi-Fi
network we had some sort of internal
networking system that every couple of
interactions would be really really slow
so we wanted to say with this actually
impact our real customers by taking it
out into the field and it turned out to
be just a weird quirk of of the
corporate Wi-Fi system
so I've actually done that type of
testing before it can be a bit tedious
it would have been nice to have a robot
to help me do that
so things in this area we might give
them three starts to go they're really
important we want to focus our areas on
these areas first stuff in this area we
might give to starts it's still
important but maybe not as important
this might give one start and go well
what you might even question why you
have this feature in your app in the
first place if it's in this area you can
also map other things on this risk board
as well if you like so for example we
might mark things with a sticky note if
they have a sticker or marker if they
have security implications so you can
use this to communicate different levels
of risk as well so even though something
might have a low frequency of use or a
low impact if broken if there are other
risks associated with that you might
want to build other automation or other
checks and balances around that so for
example this is the one I used with my
team at tire you can see it has slightly
more than six features most people don't
have only six features in their mobile
apps they're a lot more complex these
days but you can see how how it can grow
over time you can also use this to
communicate risks with stakeholders
outside your team as well and have a
conversation around testing automation
and maybe also building up a shared
understanding of what what design think
are important features and what product
or what engineers or testers think are
important features so how are we going
for time it is ten past twelve the next
step you could do once you've mapped out
these is break a break down a test
further so for example we've got the
orange here number five change pin and
I'm using the orange here to map back to
the risk bought we might have a bit of
test setup to do first so for example
before we can run this test we need to
make sure where we've got a registered
account and we're logged in and we're on
there on the dashboard like you so I'm
using the pink here to represent a data
set up the next thing we might do is we
go through the actions so we've got this
blue box here to represent a user action
tap here and then some sort of success
metric we see a menu list so I'm using
green here to indicate success for this
step and then we can continue down the
process as well so going through this
process can help brainstorm your
automation as well so we click the
change password we tap here we go
through we're presented see change
passcode screen and so from here there
are quite a few actions you can do so
remember with the change pin it was
enter your old pin and then enter your
new pin two times so what are the
possible things we could do from a user
point of view when we're at this step so
enter the wrong pin anyone else yeah we
can press the back button so I guess the
happy path would be enter the correct
pin we've got into the incorrect pin
that's already been mentioned
press the maybe enter the pin after a
session timeout a whole bunch of things
we can do at this point try to have
network disconnecting to put it in
airplane mode and see how it fails also
press the back button
that's being mentioned but there is a
whole list of things we could do at this
point but it doesn't make sense to
automate them all so for example putting
your phone to sleep and relaunching the
app to see if you're still on this
screen or back at the home screen
with the apples UI automation framework
is nearly impossible to do because once
you exit the app your test stops running
so if you wanted to engineer or automate
that type of test you could set up a
robot like this to do it but it's a very
cheap test to check every now and again
so again that cost benefit you don't
want to automate everything you want to
potentially automate just the stuff that
provides the most value so if we're
going down this enter incorrect pin path
people you know if you went to your pin
incorrectly three times you lock your
pin
so with if we go down that we've just
discovered a new flow and we might call
that number seven a lock pin and we
would go back to our risk board now and
map it back out and maybe consider that
as another option so we've just
discovered another floor but we're not
going to automate that in this one so
we're just going to get the most bang
for your buck out of this test if we
just had one test we could enter the
incorrect pin first and then enter the
correct pin so where this comes with
some caveats some people because UI
automation can be really slow to build
and can be quite flaky my team wanted to
reduce our build times so trying to get
the most bang for a buck out of our test
cases was what I was proposing so if I
was to do this test it would be enter
there incorrect pin first just to see
that that flow works and then continue
with the correct pin from there maybe
that's not the 80% test case but it
means we're effectively doing two paths
so just a just to go back to what the
colors mean if you can see colors I'm
sorry if you can't orange we've used
that too
map back to the risk board we've used
the pink to represent data to set up
before or during a test this one didn't
require anything during the test blurry
to represent user actions and green for
a check or a success indicator and we've
just done a manual or with we've done a
test case with sticky notes and we've
talked about testing without writing a
single test in code and when I went
through that exercise that this is what
it looked out a bit further I used a big
green arrow to represent the happy path
and small black arrows to represent
divergent paths to potentially come up
with other flows through the system -
and that is all I wanted to show you
from that presentation I'm going to go
back to back to using robots for mobile
testing there we go and so that's how
you can use a risk framework or at least
one idea in how to focus your automation
as well sorry I think the killer robots
are already here they're already among
us and just to leave you with a message
cool now any questions nor but you
cannot print your own robot oh the the
guy who released the designs he started
his own company where you can buy it as
a package and I think he provides
training for it as well cool thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>