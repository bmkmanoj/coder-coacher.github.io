<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Confusion In The Land Of The Serverless: - Sam Newman | Coder Coacher - Coaching Coders</title><meta content="Confusion In The Land Of The Serverless: - Sam Newman - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Confusion In The Land Of The Serverless: - Sam Newman</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CrS0HVQZiQI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay good morning thank you so much for
coming out I know it's Eid last day and
this is the 9:00 a.m. slot so I do
appreciate and it is also the room that
I think is the furthest from the
entrance so I admire your perseverance
for getting here and not just thinking
better of it halfway along and just
falling into the overflow room for a
little bit of a sleep so hopefully I'll
keep this I'll keep this brief but
entertaining so thank you very much for
coming along my name is Sammy Minh I'm
really talking to you say about
confusion in the land of the service I
wrote a book a couple years ago called
building micro services this
presentation isn't about micro services
specifically it's more about some
technology that's often talked about in
the same breath of micro services namely
service computing since I was here last
a couple of years ago I've now set up my
own consultancy called Sam human and
associates
my accountant maybe put the and
associates in because it sounds a bit
more official because just me and my
wife that run it but just there aren't
really at the moment at least any
associates but I am available for
consulting training wedding Bar Mitzvahs
you know after dinner speaking whatever
you've got I'm up for it I mean setting
up a company made 2017 a pretty big year
for me I mean there's lots of things
going on lots of very important
interesting things that happen around
the turn of the year that gave us all
pause for thought but you know and I'm
not really talking just about the
political situation I'm not talking
about something significantly
significantly more important what's
happening around the beginning of year
pretty much the most important person in
my world and the most important person
in my world is me and I I had the
misfortune of turning 40 and so now I do
feel old I
my back hurts my back hurts quite a lot
this week after couple days of training
earlier and I'm starting to feel my age
I make noises now and I sit down in
chairs I make louder noises when I have
to get out of those chairs in fact I
think that getting out of a chair is
pretty much the worst thing that happens
to me in a given 24 hour period
so I I'm still still remember when the
internet came on these things and you
know made the nice screeching sounds I
remember I remember that little buzz
excitement when I've got my first
fourteen point four K modem yeah so now
might better download pictures
I remember when most people's home pages
were on Geocities and consisted almost
entirely of littler animated gifs of
workmen doing this with this site as
under construction
it's back when we thought that the
animated gif was the height of
sophistication I still insist on calling
Facebook the Facebook because that's its
name I also don't use it because it
scares me a little bit and I have
absolutely no idea what snapchat is
other than my son sits every now and
then and makes a good face and go and
takes a photograph and I so if I sound a
bit like an old fuddy-duddies because I
kind of like the idea of being a bit of
a grumpy old fuddy-duddy because it's
like it's like you can settle into into
your middle and later eight years and I
thought I might as well get a head start
on that but just to set the context of
the rest of talk I'm not somebody who is
unaware of recent trends I've been using
Amazon Web Services from the very
beginning I had the fortune along with
Craig of mine Chris Reed and James Lewis
to do the first ever public training
courses for Amazon Web Services way back
in 2009 and so I know which I speak but
nonetheless this whole new wave of
service computing when I started looking
into it initially left me feeling
extremely confused about what on earth
is going on and I want to share some of
that confusion with you and and actually
some of the puzzles that still remain
despite having looked a lot into
technology recently and the confusion of
course doesn't start with this god-awful
name now I'm a fine one to talk about
coming up with some sort of arbitrary
but word given that I'm in my first has
been making my living to last three
years out of the microservices trend I
just want to say that at least based on
the Gartner hype curve my buzzword is
winning at the moment because we're much
much higher and I think the goal is to
be very high on this thing but services
way down here so that means they're
losing but you know at one point I will
now be
talking about micro so in the same way
we talked about MVC that's a thing a
little MV VP or something but anyway now
we're all talking about surveillance but
it is quite confusing because the name
is confusing and it starts there doesn't
it
server less I've got less servers which
doesn't we feel grammatically correct
and of course the computer starts here
because there are machines here
obviously aren't there there are servers
sitting there somewhere so what do we
actually mean by this and people like
get hung up on this idea but there are
computers there so you do need to
understand about computers it's just
other people's computers so from a
privacy angle that starts getting
interesting
and so I started trying to dig around
for some definitive definitions of what
service meant and one of the very first
references that sort of often cited in
the context of server as computing is
this article so we're certainly present
the first example of the use of the word
service but it's one of the more better
known as use descriptions started
helping put some shape to this when I
went back and read about a year ago
the phrase serverless doesn't mean
service and are longer involved it
simply means that developers no longer
have to think that much about them to be
fair I've work with an awful lot of
developers that don't think very much
about computers that's partly what the
whole DevOps movement was about but
anyway I digress computing resources get
users services without having to manage
around physical capacity or limits so
there's something there about this idea
that we have an abstraction over
computing resources ok this of 2012 now
it's quite interesting to note that
often people use serving us as a
shorthand for what our functions
functions as a service this is 2012
lambda itself which was the first sort
of function as a service publicly
available wasn't launched into 2014 so
we have to recognize straight away that
the concept of service in caps takes
more than just lambda and cloud
functions and all the other things and
another thing is this this has become
very exciting for developers though
they're they're running around going oh
I've got this amazing platform that lets
me do these wonderful things and it's
amazing and I could I don't have to
worry about this stuff anymore and I'm
like I'm going to make me a really
empowered and I'm going to run a new
media company and it can be fantastic
and I'm going to play cents on the
dollar and it's just a wonderful
wonderful land that I operate in
meanwhile all your operations people
that are running these sorts of things
are going boh what's going on I've just
got all these machines and you're
running around talking about servers
crap and the reality is is the problem
with servers as a concept ultimately
it's entirely in the eye of the beholder
right its services from the point of
view of the user right now of course
what we have our hosted cloud platforms
that provide us with service based
technology and we're relying on the nice
people at Amazon and Google and
Microsoft to handle that stuff for us
but service platforms are now coming
into the enterprise if you throw rock
right now you'll hit someone creating an
open-source framework to deliver
functions of the service on Cloud
Foundry or kubernetes for example and so
we do need to recognize as well that
service is primarily sort of a consumer
facing idea and that's what we need to
think about is service only from the
point of view of the use of the user of
the use of the platform so the
definition for 2012 was was was
interesting this idea of an abstraction
did set of resources but not a very
crisp definition and it didn't even
account for what happens now in terms of
functions and so functions have shifted
things on so I I looked a bit further
afield for maybe a more up-to-date
definition an old colleague of mine Mike
Roberts did a long post over on martin
fowler's site talking about microcircuit
services architectures putting in the
context of Micra services as well trying
to read i've into what makes server is
computing different to other things that
we talked about before and so Mike
taking an attempt to come up with a bit
of a definition model for when something
is or isn't serving us which is
subsequently published and it sort of it
has five sort of criteria for a platform
to be serving us and it starts off with
there are no management or server hosts
or server processes so we're not talking
about unit of deployment as being you
know I'm going to have five instances of
something I mean the moment I start
talking about an instances I'm talking
really in terms of hosts
oh I'm talking to the processes it's
going to also scale up based on load
it's going to also scale up based on
loads at costs are going to be based on
precise usage it is interesting that you
can of course you have a truck through
the state through the phrase precise
usage and some people will have charging
per invocations on per hour might still
be pretty precise and performance is
going to be based in terms other than
host size or count so you're not just
going to say I want 10 more yeah there's
some other characteristic you've got
there and there's also this idea of
implicit high availability so almost you
don't have to worry about that the
platform is going to handle high
availability for you now my Mike's
article is really great and I like it
appreciate his his attempt at coming up
with this definition because it sort of
helps as it starts at least it moves the
conversation forward a little bit and so
as I always do when I get
characteristics like this I start
matching it to other things out there
now start thinking of you know what is
the gold standard for me historically
has been about different types of
platforms like Heroku and things they
match these criteria there are some
things that certainly do match Mike's
criteria and we look at things like
lander and cloud functions and like
these function as a service type
products these are obviously service I
mean what became popular around service
time but also things like back end as a
service products are also of course our
service in that same context things like
Google's BigTable and Amazon dynamo
these are database backends that will
just scale seamlessly based on your
usage you're not having to provision an
RDS instance like I would with Amazon I
just sort of throw data in and magic
happens at the backend where lots of
data Pixies run around and move your
packets around and it will all be fine
don't look behind the curtain it's
absolutely safe and nothing's going to
go wrong but of course I thought ok well
a big part of this service movement is
about making things
empowered to developer the developer
feels that they're able to get things
done it feels like a great productive
platform and so I sizing it but behind
limit you know I still consider Heroku
to be the gold standard of publicly
hosted platform as a service out there
it still got a still a nailed at
abstraction really well I think anyone
here actually use to Roku it's quite a
few people right it's so easy to get up
and running the biggest complaint
typically about Heroku is it gets
expensive at certain volumes because
there's basic user you're just playing a
wrapper tax on top of Amazon Web
Services on the top but actually based
on Mike's definition of service Heroku
doesn't cut it because actually you're
your scaling unit is it's your if your
dynamos your spinning up your unit of
scaling still is still hosts and also
you know you have to yourself
turn off machines aren't being used so
you don't have this idea of scaling
based on precise usage and certified
thinking I care about other things out
there that do match Mike's definition of
servers that don't actually feel like
service platforms to us to try and get a
bit closer to that definition when you
get down to it Salesforce actually
matches the definition of a service
computing platform you can run arbitrary
code on it you're you don't scale in
terms of resource counts or pods or
anything else whether or not cost the
based on precise usage or not I think is
up for grabs
but also things like content delivery
networks fit in this realm if the
application you are delivering for
example is a single page app and maybe
as a pure client-side single page app I
could actually use something like fastly
as a service computing platform I just
deploy my application it kind of just
I'm scanning it out over clients
machines but we don't think of these as
being service which kind of implies to
me that I think Mike's definition is
good but it's still not quite neighing
the definition of what service is thanks
also it becomes useful actually to put
the put the service solutions in the
context of other types of platforms your
premium familiar with all the various
sort of infrastructures of service type
platforms is where that sort of cloud
computing revolution began for many of
us the
bility to automate cloud-based
primitives around things like storage
compute and network so Amazon Web
Services Google and you know Amazon and
digital ocean and I promise on again
because Amazon the big beast everyone's
scared of these ideas of low-level
primitives that allow you to recreate
effectively like racking up physical
machines in a cloud-based environment
and more recently we've been talking a
bit more about things like container as
a service things that sort of bridge the
gap between sort of these lower level
I've just got a machine and high level
platforms of service there are actually
scaling containers so you're thinking
here of platforms I mean arguably you
could because you could argue one where
another we're not things like service
fabric fits into space but certainly
things like me sauce marathon and
kubernetes fit in this space and then
you've got those higher abstraction
platforms these are platforms as a
service
now these platforms of service give you
that level of abstraction over the
underlying computing resources but
typically place more constraints around
you in terms of how you're able to
develop your applications and this is
what with the Holy Grail has been for
many years for application developers
but aside from companies like Heroku
very very few people have really nailed
these abstractions well I don't know if
any of you use Google cloud apps when
they first got launched through the
cloud engine it was a pretty it was a
hot mess I think let's be fair to say
right you've got to run a version of
Java but it wasn't really just like Java
and you're sort of using an abstraction
over JDO that was then using an
abstraction over an abstraction over
distraction I have a big table and you
could run Python apps in it but it won't
really like Python apps and it's very
hard to recreate the execution anywhere
else and over time people refine these
models we've got better but if you look
at function as a slowest and back-end of
the service really they're sort of
becoming building blocks to allow you to
pull together your own solutions but
they sit very much in this space now a
much higher level abstraction they place
constraint upon you in terms of what
you're able to do but there's sort of a
nicer abstraction and the ones we've had
in the past I think also the cloud then
got a bit better about scaling up and
scaling down I use one of the early
Rackspace platforms as a service for PHP
applications and it perennial II
suffered from this issue that it would
scale up too slowly and scale down too
quickly and what that meant was that you
couldn't really handle load that was in
any way peaky or not and so we'd
actually have to artificially run load
against the platform to keep the system
running enough nodes for us only over
time people understanding the usage of
our platforms at the instructor's
service level in the containers at
service level I think the vendors have
got a bit better about spinning these
things up more quickly but also our unit
of deployment is much smaller we think
about function the cost of spinning up a
function is quite low and for me really
this comes back to this idea that that
server is computing for me really is
nothing more nothing less than actually
platform as a service it is it is sort
of a slightly higher abstraction
platform as a service and then of course
you've got things like kubernetes which
is wanting to be all things to all
people at the moment and it's moving all
around you there is saying yes we can do
everything you want but that's okay
because cloud found you're doing the
same thing but all this stuff gets quite
confusing you try explaining this to
people and you find yourself blurting it
out in your sleep and then getting
confused at dinner parties and getting
other things confused in with what other
services have we got out there and you
end up feeling like they're just a
little bit of an ass because if they'll
still get demo we lose sight of this we
have these faq diagrams that I like
using that the one we saw before we
sometimes lose sight of it I lose sight
of what's important lose sight of why we
should care and actually I think Kelsey
hightailing it does kind of nail it it's
kind of interesting you know I think it
you know this quite well when you have
an idea the last thing you want to worry
about is setting up infrastructure you
just want to go which is why you know I
used to rope you with so many things in
the past because actually although maybe
long term you're going to need to do
some more things and tweak some more
knobs and dials and get more cost
effectiveness over time when you've got
an idea you just want to go you don't
worry about infrastructure we're trying
to create a new product we're going to
get a new idea to my
market the thing you're trying to prove
is not I can set up infrastructure it's
my idea is good service platforms are
just giving us more ability to do this
and broadening the scope of problems in
which we can use these things I still
don't quite coming I like coming back to
this definition for 2012 is still it
still fits my mental models of what does
make service different from things like
Heroku and kubernetes as is at the
moment it is that abstraction is that
slightly higher level abstraction the
free service doesn't mean servers are no
longer involved it simply means that
developers no longer have to think that
much about them and that's where things
get interesting because they almost in a
way this goes full circle for me as
anyone here heard this term before
undifferentiated heavy lifting so this
is a term bandied about a lot when
Amazon Web Services were launched and it
was being used to explain the mindset of
why that exists in the first place
so Amazon had decided that the way they
wanted to create software was by having
these sort of autonomous teams that
would own the whole lifecycle of their
software you know they would do the
product management they would write the
software deploy it support it in
production monitor it and if appropriate
to shut it down again and the whole idea
about this was autonomy in going fast
but they realized was it was a large
amount of effort involved in terms of
handling the infrastructure all of those
sorts of things so these two Peter teams
as they work also to Peter's being that
no team should be so big that it can't
be fed with two pizzas which of course
leads to a conversation about American
size pizzas versus European size pizzas
and anyway and then the Chicago pizzas
but anyway we have the small teams you
know it's quite a lot to ask for these
teams to be okay what I've now got to go
and think about how I provision my kids
I've got to rack that up in in data
centers and plug the cables in and
that's literally adays what these two
peter teams at Google say that Amazon
were having to do and they said well
actually this is silly so what we need
to do is create core services that these
teams can use to self-service to give
them that abstraction in other words
this is just delivering on that promise
just what undifferentiated heavy-lifting
means to us now undifferentiated heavy
lifting back then men I don't want to
have to buy a machine now it's like I
don't have to worry about there being a
machine there should just be compute
storage and network that is
automatically assigned to me via my
application stack on demand and I and
I'm can trust this is a part important
part of all this I can trust that
they're going to look after it okay so
after going through this whole sort of
journey myself and thinking it through I
started feeling a little bit better
about what it was and really this is
just this is another name for a type of
a platform as a service but there's
still some other puzzles that remain for
me in the land of the server's computing
and one of those big ones comes up is is
around resiliency so many years ago I
was involved doing some sort of helping
a client who was doing credit derivative
trading so I'm not gonna explain what a
credit derivative is but if you want to
look to read up about some of the
socio-economic impacts of credit
derivative trading and things like
collateralized debt obligations which I
was also pricing you can go and take a
look at the film the big short about the
global financial crisis I'm not saying
that I was entirely to blame for the
global financial crisis I was a little
cog in the overall engine I still
remember when we were you had these
things and they said so as I understand
it what we're doing is we're taking
loads of bad debt and we're putting it
all in a big basket and then we're
saying it's good debt and they go yes
that's what we're doing explain it again
you put all bad things in a basket and
it becomes good and they go yes and then
I did math math math math math and then
I just assumed I was too dumb to
understand what was going on and that
was almost certainly true but also it
turned out that no one else knew what
was going on either and it turns out you
can't just put those a bad debt in a
basket and call it good that's not
actually how the world works and then we
had the global financial crisis and a
good film and a good book that you can
read about it
but anyway I digress the system we were
working on we were basically that these
types of financial
products becoming more and more as of
heavy traded and they've gone from being
quite an experimental kind of financial
product to being something that we were
trading at larger volume and so one of
the challenges was how would you take
these
sort of these sort of financial products
often were hacked together running in
things like Excel and just opportunities
a C code and and actually start running
them at scale and so one of the things
we did was we helped move this existing
software onto a sort of a fancy kind of
platform that no one talks about anymore
we've moved it onto a grid based system
to product called data sign apps
actually wasn't bad at all
at scaling and handling sort of running
a node of compute and allowing you to
sort of transparency scale that up and
down right this is a precursor for many
of the platforms that we use today and
so all of our prices little pricing
agents sat in the middle of this is a
big big sort of cloud if you will is a
cloud we had our own cloud they were had
a private cloud it worked fine this is
this is two thousand and two thousand
five two thousand six outs at a time and
in our our sort of cloud of pricing
agents injected information flocks
different places so one of the things it
did was it pulled in information about
risks so the certain positions and risk
of certain organizations and sort of
companies and so as you as your view of
a risk of say a default so the chance of
a company going bust is that changed as
that information came in to us we would
go and look at all of those trades that
were associated with that company and
reprice them and see what the new
position was like and there's also other
bits of market data that we were putting
in and these are sort of external to the
cloud and obviously we were pushing
information into a database because
that's what you do with your data then
it's great there's very interesting this
this grid we pick the reason we picked
particular product was because it had a
very interesting capability once that it
allowed you to effectively execute Excel
spreadsheets in a headless fashion on a
grid and you think well why on earth
would you want to run effectively a farm
of Excel processes and that's because at
this point an awful lot of the trading
that was being done was by traders that
were running sort of algorithms
inside Excel spreadsheets on their
desktops and so when they were looking
at a certain position they wanted to
understand their property in their
potential profit and loss and the
potential risk of a trade they're
entering the product they wanted to sell
and hit a button that'll come a number
and if I didn't like that number because
it didn't mean they were going to get a
bonus they would go and change the
spreadsheet and then hit OK till the
number came out the way they wanted it
to now understandably when you spend a
lot of time trying to analyze the risk
of your financial positions as a large
financial bank the idea that your
traders can just circumvent all this
stuff by fiddling with things until they
get the numbers they want didn't feel
people with glee until an effort to
centralize all these things that's the
idea was we're just a lift and shift all
these Excel spreadsheets effectively and
run them in this wonderful wonderful
grid as this is going on and no who
knows it was kind of it was going okay
but we were constrained at this point by
how many machines that we had available
to us we really wanted to see how fast
we could price these things so we were
doing what was called intraday pricing
which meant that rather than at the end
of the trading day we just sort looked
at what our positions were as new
information flowed in we were a
dynamically reprice and the idea being
that we'd give information to our
traders as quickly as possible and
hopefully faster than the competition
and they would be able to make more
money we actually succeeded in doing
that but it turned out our models were
really bad compared to the rest of the
city of London so the faster we price
the more money they lost so you know
anyway so one of the things we did was
we wanted more machines and then one of
our friends in the ops team said well
hang on a minute if we've got a load of
machines of sitting idle so like a lot
of financial organizations this
particular Bank had a DR Center which
was like a trading floor that was ready
to be used in case we had to evacuate
the building in London so you know
obviously this was still you know
although things had calmed down a bit
the city doesn't still had a lot of
procedures in place because of terrorist
attacks and things and so if that
happened you wanted to go to evacuate
get to another building and then carry
out your trading without losing too much
of a day although I do remember the only
evacuation I was involved in with was
when someone's toast got stuck in a
toaster and it caused a fire alarm to go
off for me
to evacuate the entire building this
whole office is sitting there idle the
machines were switched on were running
as part of part of the sort of BCP
planning and so these idle machines was
doing nothing and we like war and so I
Fred end up Singh said look you can run
the grid agents on these machines
because we can actually they actually
run can run inside a screensaver and so
the screens of it pops on off if it's
the screen set has been operating for
say 30 seconds or a minute it then
becomes available in the grid and so
it's not fantastic so we rolled out this
new screensaver to these sort of you
know a few hundred machines at a sitting
idle and our grid expanded like a
lunchtime it was awesome because
especially because then we also got the
a lot of the machines that were running
actual in the main office as well so you
drastically increased the size of our
grid and and everything starts looking
great and then some weird things start
happening we're all very confused I mean
it's just like everything else was
falling over of course what we had done
is it massively scaled up the compute
capacity of our grid and overwhelmed
every single other service and they'd
all wiped it out and that was long good
and it's actually a problem with US
service platforms as well this was a
form of of platforms are certainly not
serviced but when you have these things
that's scale and scale transparently and
scale in such a way that you can't
really control how they scale you have
the danger of overwhelming things you
know we are used to using things like
database connection pools right database
connection pools work really well as a
method of throttling calls you know I've
got some calls coming in to mind my
service my application and to go to the
database I have to go to the connection
pool get a thread and then go and make a
call and we limit the number of threads
inside that connection pool primarily to
reach and manage and throttle the load
on our databases and things like that so
we don't overwhelm them it's the
throttling mechanism is a safety
mechanism and if though if you can't get
access to the database because of that
connection pubs you can't get a thread
your request will timeout and we shared
load again protecting our systems so
it's a way of not only sort of
being the database from being
overwhelmed but also stopping our
applications for more so being
overwhelmed as by having these blocked
pending connections but of course with a
service platform we don't have that
throttling ability because our functions
are not permanent they're ephemeral
they're there per request in general
which means we don't have the luxury of
the connection port which manages
multiple connections and has a sense of
state to an extent so it can see what's
been happening it can handle things like
timeouts over a period of time and so as
you know you're you're adding your your
more functions you're spinning them up
on cloud functions or lammed or whatever
else as your load increases the
underlying function platform is going to
spin up more nodes spinning up more
nodes in turn is going to have more
requests coming in those requests coming
in actually just result of course in the
same problem because you've lost your
ability to throttle you cannot actually
throttle the number of concurrent
invocations for Amazon lambda for
example except by specifying a global
limit at the account you can kind of do
this ish at the API gateway but even
then you can't do that entirely safely
because often these functions even if
they're not running will hang around for
a little bit and we'll keep connections
open now of course the answer is well
don't use a traditional database you
need to use a back-end as a service
because then of course as the load comes
in and you scale up the underlying
backend of the service the service
platforms can handle that and just scale
out automatically for you and it's
interesting I don't know if any of you
saw the talk on Wednesday from Stephen
Faulkner who was talking about his
experiences at bustled and it is exactly
what happened at bustled when they
started making heavy use of Amazon
lambda they spun up all these lambda
jobs and they completely wiped out their
Redis instances they found that what was
happening was that the functions
although they were actually leaving
connections lying around and that radius
was tapping out 10,000 connections per
node and it was they weren't didn't have
10,000 requests coming it's just the
nature of how the lambda stuff works
that connections are being left lying
around and they had to jump through a
lot of Hoops to allow them to still use
their own Redis instances
to handle the to be able to handle that
load and the fact you can't really have
that natural throttling point and it's
awesome you so yeah sure you can go and
say yeah just use a big table or go use
dynamo will be fantastic but that's not
the world most of us live in no bustle
are cited as being a massive 100 percent
serve on a shop but they're not right
there their back-end database is
actually shifting over to Redis for
example that's not a service back-end
platform most of us when we want to
adopt a service architecture we don't
get the luxury of just going and
rebuilding our application over here
what we're looking to do is take part of
our stack and just rewrite that as
service and yet already a lot of
confusion here about how we handle
resiliency in that mode other types of
resiliency we have to think about as
well I mean many of us will be using
things like circuit breakers in the
context of say synchronous calls between
services circuit break is a quite simple
idea when a doubt when you're calling a
downstream service if that thing becomes
unhealthy you sort of open the circuit
breaker you go to failing fast rather
than failing slow which allows you to
shed load programmatically degrade
functionality give your downstream
service time to recover and and sort of
avoid resource contention so their load
comes in it gets again like a throttling
mechanism effectives the circuit
breakers almost doing here and it can
act as a throttle the downstream service
has a bit of a wobble we pop the circuit
breaker open and we say I can't handle
this right now come back again later and
we shed the load and hopefully the world
moves on the issue of course here is
that even more so than say connection
pools these kind of circuit breakers
rely on maintaining per client state
across requests yeah I need to be able
to see over time can this thing talk to
this thing as often you have sort of
local partitions and things you actually
need a per client state it's not enough
to say is the risk server down and have
some global concepts of it being
unhealthy because actually clients will
see different things based on just the
network so routing over and so the
circuit breaker works by
client maintains that state over a
period of time to assess the health of
downstream service and sever that
connection now of course we don't have
that capability here in a service
platform either and again with hybrid
applications are often talking about
fronting our applications with functions
on the front end and maybe with stateful
services on the back end that does start
getting me wonder if what we're going to
start seeing are sort of throttling and
loadshedding middleware for these sorts
of world is this going to be another
appliance that we stick in in the
network path another form of glue or are
we just going to have to start having
kind of other funnels and things between
our upstream functions and our
downstream services and more traditional
data stores of course I you know I also
have to catch myself every now and then
in realizing I'm talking about other
vias large-scale how you Scout its large
large systems and and actually for many
of us scale isn't really that much of an
issue really I mean we like to say it is
it's always fun going and seeing a talk
by somebody who works at Facebook but
you don't look at Facebook where you
might do but you probably don't know but
you do you could peek with Facebook
rather than face but anyway our main
grumpy so this is I think a lot of us
don't have these scaling issues and the
end I think for but one of the things
that their idea was services predicated
on is the ability to scale up and so you
know we want a service platform to allow
us to scale up a lot but then for hybrid
applications which tend to be more
mature which are more likely to have
large load we're going to have these
hybrid type problems and it's like I
just I don't know when I thought I was
being grumpy and I went round I spoke to
Mike but about it and Mike Roberts about
it using spent a couple of years now
focusing in this areas like this is a
problem I just think we've got to think
about and he goes here and Steve
Faulkner said yeah this is a problem and
it's like we don't have solutions for
this stuff right now which is kind of
interesting so for those of you who are
interested in sort of more of a hybrid
solution mixing in existing applications
back with a server solutions be aware of
some of these interesting gotchas
another puzzling area that's often
citing the context of services is around
security and
you know especially when we start
thinking about you know how these things
are going to operate I mean it's not a
secret that actually under the hood for
example lambdas running on docker and
we're aware that with something like
docker or other container engines that
although they provide a level of
isolation they don't provide firm
isolation between things and so what
that means is if you've got untrusted
code running alongside your code on the
same container engine you have to be
concerned about something in that
container potentially breaching the
container engine itself and gaining
access to things it shouldn't and so you
know it's as manager I've had for many
years which is friends don't let friends
run untrusted code in containers if you
want to run somebody else's arbitrary
code on the same machine as yours you're
much better off using a virtual machine
and actually that's what most cloud
platforms do when you spin up say an
easy-to instance your your-your-your
machine is a virtual machine sitting on
top of physical on a physical machine
and there are other people's stuff
running around you on that same machine
but we sort of trust virtual machine
isolation more than we do container
based isolation and yet when we're
launching our functions we have no real
ability to know who else is running on
that machine with us
so my functions running here some other
persons function is running there and
and we start getting right or what if
they can reach out and see what's going
on can they look at the machine I'm
operating on and sniff out if that was
running and I have actually been people
have done this in lambda for example and
shown that you can see what else is
running on that same machine now of
course the great argument here one of
the reasons why from a security
standpoint function as a service
specifically it's actually quite a nice
boon from a security point of view is
that if your function isn't running it's
not there right and so I can't look at
your running process because unless it's
taking a request it's not there and
likelihood that get shut down and when
another request comes in you'll get on
different machines it's quite hard to go
after your particular container if I'm
actually targeting you specifically
because it's quite ephemeral and of
course that's a nice idea we're wanting
in a sandbox it's not just the
containers and other sandbox around it
but here's the thing actually this idea
that you've your function isn't running
it's not there isn't actually entirely
true
especially if it's a JVM based processes
at lambda we'll keep some pre-warmed
they won't shut them down straight away
either because they know the spin-up
time of the JVM is like so containers
will you know your functions may
actually be running for a period of time
when you're not actually using them to
give you the kind of performance and
scale up scale up sort of capacity you
want so that's still a little bit of a
questionable thing I do wonder you know
I think these sand boxes are probably
the best answer to this because they do
have the ability to build additional
protections around those sand boxes so I
think in general from a security
standpoint they're a good thing but
there's still a couple of little
questions I have around it the other
question the puzzles and concern I have
is is around locking it's really getting
stuck into this sort of space because it
is idea its idea it's great lie that's
been spread for many many years is that
that the cloud is somehow utility right
this is giant peeping amounts of horse
poo absolute lie right what is utility
utility is when I can go into a web page
and say oh I was this electricity
provider I want to be with this one
nothing changes in my house I just get a
bill from somebody else what happens now
I don't have to go and change my
appliances because they're running the
wrong frequency this idea that we can
just create these just lovely abstract
patterns I mean that's like the closest
thing I think we've got to utility
really in say they can inside a cloud
computing space it's maybe it's storage
level maybe as storage level going to
move my files over even then that's work
right so we do have this idea that we're
just going to have transparent across
crowd hasn't really delivered because
actually it's a hard problem it
illegitimate our problem I actually
think abstraction platforms that are
coming out things like service fabric
things like kubernetes and Cloud Foundry
are starting at the platform of the
service level to give us utility at the
point of an application developer but
the whole stacks not so much and
especially around things like the fast
and bass options these are non portable
solutions on the most part
so is that a worry now I don't like
talking really about migration about
locking cost
I like the lobbying concerns I really
like talking about migration cost
instead that's a better way of thinking
about this it's actually all about
opportunity cost so if you're going to
use any kind of sort of cloud-based
product or primitive just applying a
little bit of conscious thought about
okay if I decided to move what would it
how much pain would it be for me to move
this thing and is that a concern that
I've got is it is it a big enough cost
that I'm worried about it and therefore
might not use that feature or might look
to create an abstraction on that feature
because you know ultimately you know not
all things are equal right now because
of migration site like blobstore we show
buying the object store which is
actually fairly learn the grand scheme
of things right I can just export my
data import it and like Amazon and
people let me ship physical devices
around and and they're fairly like for
like I mean there are some interesting
gotchas around use your blob storage
obviously but they're pretty much like
some like compute it's there you know I
mean once you provision the machine then
you've got a machine that's that's
pretty similar that's quite the same
networking gets interesting the load
balances again you know yeah I can spend
up an e lb or something on Amazon but
actually I could recreate that quite
easy the cost is a little bit more work
it's not too bad
but then you know running a pure
function as a service you know if I've
got a solution using lambda right now
I'm using lambda there aren't yet sort
of other portable ways of running those
functions elsewhere although that is
starting to happen with IOT in in Amazon
space like it is with Microsoft even
harder of course it is back end as a
service these are much much more
sophisticated products and they don't
have on the whole the same semantics as
other types of solutions the migration
cost is increased and so when you're
thinking about what services you're
going to use with you're going to buy
into these platforms have a little bit
of a think about this migration cost
something it is a worry to me ultimately
what you're trading off is this idea of
I either pay now or I pay later or maybe
pay later
that's the key thing right so if I don't
want to use this service that is
provided out of a box I'm a vendor I'm
already using and instead I decide to do
it myself so that I get portability
I am definitely paying a cost now in the
hope that over the long term it will
save me some money on the other hand if
you never have to move then you won't
have to pay the money so if you played
the money now you've wasted that money
and so it is a really interesting
trade-off that you have to make I think
on the whole I'm not so worried about
things like function as a service I'm a
bit more worried about the back end of
the service stuff because often we rely
so heavily on those sorts of things
you just sort of decide for yourself
what it is you do and it might not be
all or nothing you might actually
explicitly say okay we're not going to
use these things because actually
they're quite hard to recreate so my
clients for example of stayed clear of
dynamodb on Amazon for some things and
would rather use RDS instances which are
the relational database service because
it's easier for them to port and also
easier for them to run locally for test
employments another thing that comes up
is EO should i mix vendors is it Surya
you know do I have a mix of clouds
Enders so that I'm hedging my risk in
case one jacks the prices up and in
services this comes up a lot as well
because again is this idea that you know
that the plat that service platforms
aren't really comparable in terms you
can't just switch from one to the other
at the moment and here I'm a bit more
like I wouldn't for a given solution you
have all kinds of problems when you
start mixing vendors in the same sort of
application you're creating I mean let's
just talk about networks shall we right
because you've got a route from your
cloud center to provider over the public
Internet into somebody else's you know
cloud provider system that modern
different part of the world and that's
going to get slow now as a corporation
if you're a large enterprise
organization I think it's completely
appropriate for you to say you know we
are we are mostly using Amazon Amazon
Web Services we're mostly using Azure
but I think for a larger corporation it
would definitely make sense to you to
have expertise in other cloud platforms
but maybe that sort of product level not
a you know not on a sip particular
application level and we also do have to
recognize that actually stock in
being stuck inside a walled garden and
actually sometimes be really nice like
if we get awesome stuff it's like well
actually I kind of don't my miss so much
now it's like I'm a I'm a great user of
Apple products never know that Apple
products are lovely they were wall
garden better a lovely wall garden is a
nice is a nice duckling pool the water
feature and someone brings you cocktails
every now and then and there's like a
little live band playing in the area
it's always sunny so it's always very
sunny place smug it's very sunny I've
been a stuck in other walls Gardens
where the walls are sort of there there
but then there's sort of there less like
walls more like some of the prison cells
like you mean a yard you know outside
some some supermax prison and every now
and then the vendor comes around beats
you and so you know it just please you
know you paint your money it takes your
choice and sometimes these places are
quite nice to be sort of bringing all
this stuff together I'm still I'm still
a little bit confused and and you know
there are some things I feel a bit
better about and you know the term
service I've kind of got over it a
little bit because ultimate is what we
do we come up with terms that sort of
have have meaning at some point in time
and then we overload them and then they
become completely and utterly
meaningless you know we think about
agile and agile means everything to
everybody now it's interesting to note
that safe with agile I think it keeps it
closer to the original core message
because it had early on a fairly good
statement about what agile is and what
agile should be which means that
manifesto kept us honest for a bit
longer
DevOps oh boy is that ever been devalued
I'm a DevOps does that mean I'm a DevOps
consultant I'll have 15 DevOps please
and have three agile x' and at 15 DevOps
--is yeah that's not what DevOps is
DevOps isn't about - all things else is
primarily about about culture actually
but doesn't stop vendor selling a stuff
of course the the the the most recent
buzzword of choice micro services which
obviously are completely sine irrational
and should definitely buy my book and
we've done it again with service you
know we've taken a term that had some
meaning in some context and we've
rapidly overloaded it and really when
you look at it it's just a different
type of
platform as a service and then we also
get into this silly groupthink II stuff
that happens like ah I worry about
service I can't use that that's not
that's not service right it's all about
services all the time and it's like well
no just you know kind of use what works
I hear interesting stuff absolutely try
it out caveat surround where you use
some of these features caveat surround
how deeply you you embed your sort of
mission-critical solutions on things
that at the moment at least have a lower
degree of portability than some of the
other cloud products and cloud
primitives that are out there but
ultimately we are living in a world
where you know there are not going to be
a smaller number of servers and a small
number computers out there and yet you
know the number of machines out there is
scaling significantly faster than the
number of developers and operations
people able to work with them and so we
need things that allow us to harness the
power of these machines in more and more
efficient ways and service is just the
next step in that it will be interesting
to see if we start seeing other products
and I think a richer ecosystem around
service I'm especially interested around
the resiliency side of things especially
around hybrid applications because I
think for most of us we are in a
situation where we have a system running
today and we would like to take
advantage of these service technologies
in a safe fashion and so I'm hoping to
see more great case that is like the one
we saw from bustled on Wednesday sharing
these experiences and so I'm a little
less confused than when I started this
journey you know two or three years ago
I'm definitely older and definitely more
grumpy but hopefully at least I've
shared some of that grumpiness with you
to an extent and giving you some things
to think about so thank you very much
your time
we have we have plenty of time for
questions and one's got any questions
out there I will try and see you with
the lights okay I can't see any
questions but that means that up
question over there
hello so the question was I didn't talk
about statelessness or the event-driven
nature of some of these things
well i statelessness and statefulness
is directly handled by the backend as a
service and so the reason I brought that
up is I think often what people talk
about with service is just functions and
it's definitely not just functions the
term service was around for two years
before lamda existed and was being
talked about in terms of things like the
backend and so it's may often get missed
so I think it's worth highlighting yes
of things like Google's BigTable
dynamodb 9 uses simple DB anymore on
those sorts of service platforms that
have service data storage platforms that
have the same kind of semantics the
event-driven nature is interesting
because of course that's where the land
of stuff initially started and I think
that's actually quite a nice sweet spot
for functions functions getting executed
based on events arising although it's
kind of interesting to note that you
know especially for functions on lambda
what really exploded the growth of the
use of the land of functions was the API
gateway supporting it and so I think
when you just had event-driven functions
which are really really useful and I
think Stephen put it really well on
Wednesday that that's a great way of
managing integration between a lot these
cloud primitives that don't always talk
to each other so now I can you know
based on rank being put in a bucket in
s3 fire a function that puts something
in to say Kinesis as an example
functions work really well there but for
many people the lack
of that ability to trigger one from a
synchronous call was holding it back and
so that sort of opened up I think the
field for other people yet person I'm a
big fan of avenged oven architectures
and I think functions in that space can
work quite well then of course you're
offloading your resiliency concerns to
whatever brokerage software you're using
to ship your stuff around again same
concerns come back which is that's great
if you're using sqs or SNS or Canisius
but even they have scaling issues and
you're relying on apart if you're
putting it on to your own broker you
still go out to scale that transparently
so in a way the similar problem I guess
to offloading you know hybridizing with
your own data store for the backend but
yes there's really but there's a real
interesting patterns I would urge you to
take a look at Mike Roberts his article
on service architectures at Martin
Fowler's website he talks it goes in
summers in more details and I had time
to today any other questions I can't
quite see where you are you're at the
back right it's just going to be fun you
have to yell yep
so being a micro-services proponent are
there situations projects where I don't
think micro-services are a good fit yes
I think if you're starting out with a
brand new product like your startup or
your a a company creating a brand new
class a product
I think micro services can be
problematic because you can't have hard
to get a firm enough understanding of
your domain to identify stable service
boundaries and that means that you will
get those boundaries wrong and the cost
of change between service bounties is
quite expensive I'd also say that you
know early on what you're trying to
prove is that this business idea works
not that you can build a digital system
and so I think I think for early-stage
startups for greenfield projects and
side organizations I'm much more likely
to propose and more say modular monolith
so where you think I think these things
might be separate services great we'll
make them separate modules in the same
monolith for now and next and keep the
schema separate by all means let's see
how we go I didn't ask if you search for
micro services for Greenfield I go into
more detail and that idea the other area
where it comes up quite a bit a few of
my clients at the moment are doing
customer installed software when you
adopt a micro service architecture
you're effectively pushing complexity
into the deployment and operations arena
and normally the way you mitigate that
is introducing new tools technology
deployment platforms to manage that
complexity that you've created and you
can hide that and manage that yourself
but when you're having your customer
install systems on your behalf like I
give you this you install it that
complexity in the deployment arena
you're pushing out is now being borne by
your customer and you know they don't
have access to the same sorts of they're
not you know they just wanted to install
an MSI and so again in those
environments I wouldn't suggest the
micro architecture one of my clients
they want to do both and so we're
talking effectively about you were
thinking of every service as a component
that almost is a post-processing step
you wrap it either as a service or you
bind it together as a monolith that's a
much more complex path to production
though so those are the two good
examples where I wouldn't be using a
microphone Sarka tech chure and by
extrapolation maybe not a
a service architecture either certainly
one of the challenges around functions
is that you can get quite fine-grained
into interaction so if you're not
keeping those code bases very very small
all the same things around couple
services can come up although I think in
general people are quite good at keeping
their functions small because it's sort
of it's sort of everything it's almost
like the community feel around those is
to keep the scope of those things really
really tiny so hopefully that helps and
I probably got time for another question
you have to yell if I can't see you all
right well thank you so much your time
and as always I will be available to
answer a couple of questions after the
loaners get to the airport you can find
details about me up here if you're
interested in hiring me or just ask me
questions on Twitter I'll answer any and
all questions on cricket rugby league
board games and micro services and
service computing but thank you very
much your time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>