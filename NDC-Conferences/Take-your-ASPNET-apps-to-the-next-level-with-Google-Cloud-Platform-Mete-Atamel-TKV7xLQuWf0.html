<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Take your ASP.NET apps to the next level with Google Cloud Platform - Mete Atamel | Coder Coacher - Coaching Coders</title><meta content="Take your ASP.NET apps to the next level with Google Cloud Platform - Mete Atamel - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Take your ASP.NET apps to the next level with Google Cloud Platform - Mete Atamel</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TKV7xLQuWf0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right my name is Matata Nell I'm a
developer advocate at Google I'm based
in London and first time here in Sydney
and Australia so I'm really excited to
be here so today we're going to talk
about building s with apps on Google
cloud I usually post my slides after my
talk so if you just follow me on Twitter
I will have my slides up there and if
you have any questions about any of the
stuff I say today we have a Google cloud
booth here at MVCC feel free to stop by
I'm gonna be there today and tomorrow
and Friday but you can also send me any
email anytime after this week I'll be
happy to answer your question and I also
have a feedback link but I think they
also have feedback things that as you
exit so as exit please let me know how I
did good or bad I always like to
feedback so do that alright so what we
talked about this first I want to do a
little bit introduction so the first 10
minutes or so we're gonna answer the
question of why windows why extranet on
google cloud because I get the question
a lot from people so I just want to go
through that quickly and look at like
why should you even consider Google
cloud when it comes to net development
so that's one one after that we're gonna
look at a simple application running on
Windows I'll show it on my laptop and
then we'll push that application to a
Google cloud and we'll take a look at
the process or how that works how and
what kind of process you have to go
through to push your application to a
little cloud moving your app to the
cloud in itself is not that interesting
because instead of running it on your
data center you're running it in someone
else's a data center but I think the
power of cloud is that it once your app
is in the cloud you have access to all
these different services and tools and
and machine learning so in the next part
of the talk I will talk about some of
the services in Google cloud such as
cloud storage vision 810 speech API
these are the machine learning API and
what we will try to use we will
basically try to enhance our app using
these services and I'm also going to
show some powershell commandlets and see
how we can script things and then in the
west point of the talk I want to talk
about the containerized world because
everything is becoming containers and
then with asp.net we have a spec or
that runs on Linux and you can take that
and you can containerize it and then
after they can deploy it to App Engine
flex on Google Cloud and you can also
deploy to kubernetes running on
container engine so I just want to talk
about those and and and let you know
which one makes sense more and stuff
like that so we should have some time
doing at the end of the day talk to
questions but if you have a burning
question that you want to ask right away
feel free to stop me as well
all right before I start the
introduction I'm also curious who is
running services in the cloud today okay
a lot of people and who's running on
Google cloud yeah one couple people
that's good alright and I guess most
other people are running on Azure is
that correct okay okay
I always ask these questions because I
want to know like what the ratio is I
guess the first question that you have
is you know Windows Server cycle server
that's going work on Google cloud like
when people hear this they're like oh
what's happening you know because when
you think of Google you think of search
you think of machine learning and we
invented the language go and then most
of our services are written in Google on
goal or Python or Java so when you think
of c-sharp and that you don't really
think about Google at first but this is
changing in the last couple of years
we've made a lot of investments in
Google cloud and we are trying to make
c-sharp one of the wonder what we call
silver languages so it's one of the main
languages everyone to support on that
and this is what this talk is all about
but if you look at the world that we
used to live in 2014 it kind of looked
like this so on one hand we had the open
sourced world with the tools and
languages around them world with tools
and languages around them and you know
we could argue back and forth about
which one is better you know i is java
better than a c-sharp you know I started
as a Java developer for example then I
switch to c-sharp and then I first don't
think that is much better than Java
but then the unfortunate thing is that
these two worlds they didn't really
interact with each other so I started my
career on this side on Windows side
doing general work at some point I moved
and I did Java then at some point I I
started working for Microsoft so I
switched the see sure but not and doing
this back and forth switch between these
two worlds was always painful because
even though they were trying to do
similar things in these two worlds they
were different enough that it made the
transition kind of painful but if you
look at what's been happening in the
last couple of years it's kind of
amazing
first dotnet went open-source which was
big news and then gradually we started
seeing tools and languages moving from
Linux to Windows and Windows to Linux so
we had OpenSSH moved from Linux to
Windows then we had Lubuntu and Debian
Linux operating systems running on Azure
we had single server and PowerShell
moving from Windows to Linux then we had
bash coming from Linux to Windows and
for me the biggest thing was asp.net
core so the community Microsoft created
a lightweight version of asp.net that
runs on Linux Mac and Windows and this
opened up a lot of opportunities and
you'll see what this means for Google
cloud as well you know as I mentioned I
used to work on Java and then when I
switch to C sharp I like everything
about it but I was really bothered by
the fact that I can only run it on
Windows and with me well with dotnet
core now that runs everywhere and I
don't have that question in my mind
anymore which is wait and the year 2016
ended with two announcements first my
soft join to Linux Foundation because of
their work and then Google joined to.net
Foundation because of our work in the
club platform so I think we had a couple
of interesting years when it comes to
net and c-sharp
so if you look at what we have today we
still have the two operating systems but
all the tools and languages around them
they're kind of converging and that's
why we have things like net NC shop
running on Google cloud and that's why
we have things like PowerShell and
sequel server running on Linux so what
this means for you is that I think it's
a great time together
Multi Belapur I'm glad that I did this
switch and I think that is getting
better and better so I think we're lucky
so that's my pitch for dotnet
but now let's talk about why should you
even care about Google
when it comes to donating windows and
let's look at this question from from a
consumer perspective let's say your
cloud you want to buy cloud services and
why should you care about Google cloud
for me it kind of boils down to three
separate buckets the first one is the
infrastructure so when you are running
in Google cloud you are running in
Google's own private network so even if
you have two services on two data
centers and when they need to
communicate they will communicate on the
fiber optics that Google owns so it
doesn't really go through the internet
it goes through Google's own private
network so what this means is that
things are really fast latency is really
good throughput is really stable so it
just works much nicer and because of
that we have VMs that provision really
fast so if you want to get a Linux VM
you can get that in within like 10 20
seconds and if you want to get a Windows
VM is a little bit faster a little swirl
within Linux but it's still quite fast
within seconds within 30 seconds you can
get a VM and because the Emporer
visioning works really fast auto scale
also works really fast so if you have
lots of load coming in you can auto
scale within seconds instead of minutes
so that makes a difference when you need
to scale up so that's the infrastructure
the second thing is pricing so the
pricing of the services themselves
they're real competitive compared to
other cloud providers but not only that
we also build features to make pricing
even better for example we in VMs we
have per minute billing so when you use
a VM for 10 minutes you get charged 10
minutes you don't get charged for the
whole hour if you use a VM for the whole
month you get 30% discount by default
you don't have to do anything special
and this is my favorite we have sizing
recommendations so let's say you have a
big VM with lots of CPUs a memory we
kind of detect your usage of the VM and
if you're not really using it we the
Google cloud will tell you by the way
this VM is not being utilized you can
actually down scale that to a smaller VM
so you can save money so we try to build
all these features to make it even
cheaper for you and the last thing is
the flexibility with the machines so we
have VMs in many shapes and sizes they
are custom-built
sorry they're they're built like they're
micro instances
there's big instances but you can also
have a custom-built VM so you can say I
want this many CPUs and this much memory
and only pay for what you want so you
don't have to get a big CPU and and big
memory just because you need big CPU can
base the customers whatever you want and
pay will pay for what you're using and
the last thing is the printable the ends
so we have these VMs that are kind of
given to you but they can be taken away
from you at any time depending on the
load in Google Cloud but the good thing
about them is that they're 80% cheaper
than normal VMs so in some use cases
right for example let's say you have
like you're working at your work and
you'll you can do that with ten vm so
you can do that with 20 bm's you don't
really care you can use printable VMs
and and that way it will be much cheaper
for you to process that cure work but at
the same time these VMs can be taken
away from you at any time so this is why
Google Cloud in terms of as a consumer
but as a in terms of why Google Cloud as
a developer it also boils down to three
separate buckets for me the first one is
the deployment options so if you want to
do virtual machines we have something
called compute engine that I'm going to
show in my demos if you want to do
containers we have Cubana T's manage
kubernetes on Google cloud and you get
that with container engine if you don't
want to care about VMs or containers but
you just want to deploy your code and
let Google scale that and run that for
you we have App Engine and then if you
don't even want to care about
applications and you just want to deploy
functions we have cloud functions so
depending on what kind of management you
want to have we have different options
so once you have your app running in the
cloud we have a number of services that
becomes available to you such as
BigTable storage cloud sequel bigquery
and there are actually some talks on
some of these like there's a talk on big
hurry that's happening right now there's
another one tomorrow if you want to
learn more about it but the key thing
about these services is that they're
they're really managed for example
bigquery is a data warehousing solution
where are you ingest your lots of data
to bigquery like and I'm talking about
terabytes and terabytes of data and then
you run sequel queries against it and
that query
is actually split to thousands of
machines and it runs in parallel and
then you get your results back in
seconds but you don't have to worry
about machines you don't have to worry
about clusters everything is done and
managed by Google so we try to make our
services as managed as possible and it
makes it really easy to use
and lastly machine learning machine
learning is big and it's getting bigger
and bigger and Google is known for for
using machine learning in our services
so what we are trying to do is basically
first we are trying to give our trained
models to you in terms of API for
example we have vision API where you can
pass in an image and it tells you
everything about that image and I'm
going to show a demo of this through my
talk but we have other API has like
translation API speech API things like
that so basically all the models that we
built at Google we are providing them as
API still and then all you have to do is
just make a call to use these api's and
if you need to build your own machine
learning model then there's also a cloud
machine cloud machine learning engine
there's basically tensorflow which is an
open source project for machine learning
managed by Google for you so you can use
that as well all right I have a couple
more slides and then after that I'm
gonna start showing you some code so
I'll just hang in there in terms of
deployment options so it lets say you
have an expert on an application and you
want to deploy that to the Google cloud
you basically have two branches the
first branch is if you're running it on
Windows then what you can do is you can
get a Windows server on compute engine
and you can also get a sequel server on
compute engine and then deploy that app
on compute engine and that's how you run
it basically if you make the switch from
asp.net to espenak or running on Linux
then you have two choices you can either
you first you take that I spent on the
core application and create a container
out of that so you put in a docker
container basically and then you host
that docker container in Google
container repository which is a private
place for your containers and then you
can either deploy it to App Engine flex
or you can deploy it to Kuban it is
running on container engine and I'm
going to talk about in the in detail
later
what's the difference between the two
and when you should do both when you
should do appengine versus a container
engine but basically these are the
options that you have when it comes to
development and then once you have your
asp.net app running
you probably want sequel server running
as well because that's what most people
use in world so you can get a version of
that running on compute engine and be
separate multiple versions and I'll show
you a demo with this and then we have a
visual studio plug-in to manage Google
cloud resources that I'll show we have
lots of libraries talking to all these
Google cloud services they are available
on NuGet and I'm gonna show some of this
as well and finally we have perished up
: let's so you can do PowerShell
scripting and talk to Google at that way
so basically we are trying to cover all
the different ways you can talk to
Google cloud and try to provide you the
libraries and the tools that you need to
talk talk to us alright that's it that's
my pitch so hopefully you're convinced
that you should think about Google cloud
at least now what I want to do is I want
to look at an existing s without that
app run it locally on my machine take a
look at it and then move it to Google
cloud and see how the process looks like
right so the app so basically we'll do
this part we'll do this part and then
we'll do the other part later in the
talk so the application that I want to
run and deploy is called contoso
University do people know this
application yeah it's basically a simple
MVC application that shows how to use
MVC pattern and use sequel server you
basically have this university that has
students that has courses that has
instructors and everything is backed by
a sequel server so let's just run this
application locally so I can show it
show you how it works and then later
we'll move to Google cloud so here I am
in their visual studio one thing that
you'll realize is that in web config I'm
using local DB so I'm running against my
local sequel server and this controls
our university it's a Model View
controller application so you have
models like like course
persons do
instructor and then for each model you
have controllers so if we look at for
example student controller this is the
class that controls what happens to a
student so we have different kinds of
methods for creating a student getting
the details of a student things like
that and then we have views so we have
different views for the courses for for
students so I won't get into details of
the code that much but I just want to
show you the app real quickly so you
know what I'm talking about so I'm just
running this locally my computer is a
little bit slow alright so this is the
app and the interesting part is
basically you can see the list of
students and it's pulling up the student
list from my local baby and you have a
list of students it's Paige and then we
can look at the details of each student
and we can edit each student and and
save the same thing with courses we have
different courses with different details
we have instructors with different
details so you get the idea it's
basically a very simple model view
controller kind of app that's backed by
cycle server now let's say we want to
move this to Google cloud what do we
need to do so to move it to Google cloud
I'm gonna first I'm going to solve the
Google Cloud extension for visual studio
because because it's gonna make my life
easier so first we'll do that then after
that I need to host this app somewhere
right so I'm gonna get a Windows Server
VM with asp.net framework installed on
compute engine and Google Cloud we also
need a sequel server so I'm gonna get a
sequel server on compute engine and then
I can directly using the Google Cloud
extension publish my application from
usual studio to Google Cloud so this
that's kind of like the high-level steps
that I'm gonna do so let's just do that
let me close this first
so first what I'm going to do is if we
go to tools and extensions and updates'
I'm gonna get the Google Cloud extension
for visual studio so I will click on
online and then here I'll type Google
Cloud and you can see that there's a
Google tools for visual studio I already
have it installed but if we it's not
install you double click and it will
install right here so once it's
installed if you look at under tools
there is this new thing called Google
Cloud tools and let me make this smaller
oh sorry alright so Google Cloud tools
and then what I need to do is I need to
add my account my Google Cloud account
to visual studio so I hit on manage
accounts and Add Account
so this opens have a new browser I have
a bunch of accounts but I'm gonna use my
development account so I click and then
I will allow this so this will give
visual studio access to talk to Google
cloud so that's that's that and then if
I go back to visual studio it's telling
me that my own account or they exist
because I already added to just video
which is okay now what I can do is again
go to tools Google Cloud tools and then
there's something called Google Cloud
Explorer so this is the guy that will
show me my projects and my different
things in Google Cloud so this is my
account and these are all the different
projects that I have under my account
I'm looking at the one that's relevant
for dotnet and then as you can see
there's Google App Engine so I have some
apps already deployed here so these are
two different versions on my app that's
deployed already I'm gonna look at that
later the compute engine is the VMs that
I have in Google Cloud so once it loads
will see the bunch of VMs so these are
different VMs that I have already and
then there's the cloud storage is like a
place where you can store data basically
any kind of binary data so I have a
bunch of buckets folder under the
buckets I have my files and then there's
also something called Google Cloud
sequel which is manage my sequel for you
have managed my circle but if I did it
would show up here and now right now
this is limited but going forward we
want to add everything in here so that
anything you can do in Google Cloud
console you will be able to do it from
visual studio ideally so that's what we
are aiming for now the first thing that
I want to do is first I need to get a
Windows Server VM with s without next
frame of the installing Google Cloud so
to do that I come to compute engine and
right click and say new asp.net instance
this opens up something called Google
Cloud launcher so Google Cloud 2 is kind
of like a marketplace for different
kinds of solutions to deploy on Google
Cloud I need to switch my account
because this is my work account so I
will switch to Deb so on Google Cloud
will ensure there's many things that you
can deploy to deploy to Google Cloud
space like a solution market space but
one of them is called a spell on a
framework so this solution will
basically install Windows Server and s
we don't net framework and sequel
Express and I asked on a VM so I just
click on launch on compute engine and
then give my deployment a name so let's
just say s without net NDC Sydney and
then you can choose your zone and I'm
happy to report that we are also having
Australia zone now so I'll just choose
Australis at least and you can choose
your machine type so as you can see
there's different kinds of machines like
micro small one CPU all the way through
64 CPUs and you can also customize it to
whatever you want
so I'll just choose for CPS for now
Windows Server support like 2008 1216
I'll choose 16 and then you can get like
persistent disk or as a state disk and
you can choose the size so I'll just
keep the default and hit the boy and
this is it like this will within a few
minutes will give me the frame of
install while that's happening let's
also get a Seco server so to get a
sequel server I go back here and then
instead of choosing new instance I'm
gonna choose new instance so this will
open Google Cloud console for me again
and I think I need to switch my account
again so I go back to my Dominican
and then under here once it loads up
let's call this instance sequel server
NDC and then again you can choose your
zone let's make sure that this is in
Australia as well so this by default is
a Linux instance I want Mexico servers
so I changed the boot disk and as you
can see we stopped a bunch of operating
systems bunch of different like Linux
flavors and there's also sequel server
and windows sequel server as well but
what I want is an application and its
sequel server and as you can see we also
have a bunch of different versions of
that so I'll just choose sequel Server
2016 and select and I'll just keep the
defaults great and this will give me a
sequel server as well obviously I need
to configure this sequel server and get
a static IP for it and things like that
I already have a VM this one contoso
original this is a VM windows VM and
then I also have the sequel server is
configured so we can basically just look
at that so what I can do right now is I
can go to my app and let's say I want to
deploy this app now to to Google Clark
what we can do is we can right-click and
then here there's a new menu item called
publish to Google Cloud so I click on
that and this gives me some options so
it gives me an option to deploy to App
Engine container engine or compute
engine as you can see since this is a
traditional net application you can only
deploy it to compute engine so that's
why this is the only highlighted one so
I choose that oh and before I do this I
need to change something by the way so
let me just close this I need to change
web config and instead of using local DB
let's use the sequel server that that I
have in the class or the IP or this is
the sequel server that I have so I do
that I save and now we can publish so
publish the Google Cloud used choose
compute engine
and now this will pull the VM instances
that I can deploy alright yep and then
I'll choose contours original and then
this is my account and then hit publish
and this will basically package my
application and deploy to VM running in
the cloud talking to another VM with
sequel server so within a few seconds we
should see that opening up
we can close these guys alright so this
is the app and if you go to students
hopefully we'll pull the data from the
sequel's oh yeah you can see that these
students are there so that's what it
takes to deploy your app to Google Cloud
now let's go back yeah you worked yes I
know well you're gonna cut more than all
right so okay this is good but it's not
that interesting to be honest because
now instead of running it on my laptop
it runs in Google Cloud great but the
power of cloud is basically that now we
have all these services available to you
so what I want to do next is first these
students they don't have pictures so I
want to add pictures for students but I
need to save this picture somewhere so
I'm gonna use Google Cloud Storage to
save these pictures then sending these
pictures one by one for each student
it's gonna take a long time so what I'm
going to do is I'm going to use
powershell commandlets so once the
install Google Cloud SDK you can have
these command mats and you can use them
to the script talking to Google cloud so
I'm gonna use a command not to bug up
with these pictures but you know
students once you let them upload
pictures some of them will Pro upload
some pictures that they shouldn't do so
what I want to do is I want to make sure
these pictures are safe so they're not
like violent or adult pictures to do
that I'm gonna use a machine learning
API called vision API so I'm gonna
basically pass my image to vision API
and the vision API will return some
information about the image to me and
from there I can tell if the image is
violent or not and if it's violent I
won't let the student say the image so
I'm gonna use machine learning basically
to detect if the image is safe or not
and finally I want to add some contacts
about students so you know something
interesting about the students but I
want them to be able to do this with
with speech so I want them to be able to
speak and then we detect their attack
their speech and converted into text and
then send that to - as fun fact but so
for that I'm gonna use speech idea
another machine learning API that we
have and see how that works all right so
let's take a look at this first let's
look at the images what I'm going to do
so I I'm in my application now I created
a new service called image uploader so
first thing that you will realize with
image uploader is that it uses this
nigut package Google Cloud Storage so
this is available on NuGet so I already
installed it and what it does is the
image of other text in a bucket name
because you have to store your image in
a bucket in go cloud and then it creates
a storage client so this is like the
main interface that you use to talk to a
Google Cloud storage and then I have two
methods one method is upload an image in
here we get an image and then we get an
ID of the student and then we use the
storage client and just basically pass
the image with the ID and get it stored
and then in the end we get a link to the
image that we save in our database and
then there's another method called
delete uploaded image so this given an
ID of the student it will basically
delete that image for that student so
it's very straightforward
and if we look at how these are used
I changed the student controller to
basically when you create a student it
will check if there is an image and if
there is an image it will use image
uploader to upload the image and then it
will get a path and set that path as
students image path and similarly if we
delete a student we should see it here
if you delete a student then we also
check if there's an image path and if so
we'll delete it from Google cloud
storage as well so let's take a look at
this quickly so I just run this
so this is the same app
alright it will pull up students
hopefully yeah here are the students and
let me just create a new student and it
will be me so let's say my last name
eternal matter and then let's say
enrolled at the beginning of this year
and let's just choose an image so I
think I have some image somewhere here
so I'll choose this image and then
create so this one created student it
will upload the image to Google Cloud
storage and then it will save it and
once it's saved hopefully in the
meantime you can actually hear it saved
so let me find myself to look at the
details you can see that yeah I have a
profile picture which is nice and if you
go back to Google Cloud console this is
the console for my project if we check
the storage section you will see that I
have a bunch of buckets for different
things but this one is for my
application and then you will see that
the image is uploaded there so it's
there already that's good but as I
mentioned like doing this one by one for
each student it's going to take a long
time so when you install Google Cloud
SDK it comes with something called cloud
shell so I'll show you that this is
Google cloud shell so this this is
basically a way for you to talk to
Google cloud from the command line and
there's a command line tool called G
cloud so G cloud is is how you would
manage your your project from from
command line so you can do things like G
cloud config list and you'll see which
project you are talking to but then with
this SDK you also get some powershell
commandlets so what I did here is that I
I wrote a PowerShell command net what I
have here is it's a bucket and a folder
I defined these these variables and then
I use this command that called new GCS
object so GCS stands for Google Cloud
Storage so I'm basically calling this
with the bucket name that I want to say
where I want to save the folder or my
pictures on my machine and then I'm
making sure that this
images are publicly available by
defining public read so if we run this
paracho command that it will basically
look at the folder of the images and I
can use them from my application and
there's bunch of other powershell
commandlets to do pretty much everything
on Google Cloud I'm just showing you one
of them and the stuff that you can do
with Google Cloud so as this is
uploading yeah as you can see it started
to upload it we can go back here and if
we do a refresh you'll see that my
pictures photos are there and I can use
them for my application all right that's
good but as I mentioned giving students
access to upload any kind of images is
not a good idea so let's make sure that
these images are safe to upload and to
do that we'll use the vision API so what
I did is if we go back to our
application I created another service
called
image safety checker so this image
safety checker the first thing that you
realize is again using another nigga
package called Google Cloud vision so
this is the nigga package for vision API
and what we do is just like before we
create a client to talk to a vision API
and once we have the client I have a
single method called is safe and this
method gets an image and then it calls
the vision API detects safesearch async
method so this basically passes the
image to vision API and then vision API
will return us some annotations and
these annotations they have four
dimensions adult violence spoof or
medical and then you can check the
likelihood of that so you can check the
likelihood of this image being an adult
image being a violent image stuff like
that so what I'm doing here is basically
I'm making sure that these images is not
likely to be another image or violent
image or spoofing image or medical image
okay and if all of that is true then I
will return true from this is safe
method now if you look at how I use this
is safe method I created another image
uploader this time it's called safe
image uploader that's extending from
image
the original image uploader and what we
are doing is basically we are
overwriting the upload image method and
you know once we get an image and an
idea we call this image safety checker
and see if the image is safe if it's not
safe we throw an exception if it's safe
we call the base method which is
basically upload the image so that's how
I check that image is safe so let's see
if this works I go back to my app yeah
that's me actually let me edit myself
and let's choose a picture that's this
one I don't know if you can see but it's
basically a guy shooting and so it's a
violent image and we don't like that but
let's see if the vision API is gonna
prevent that to me up from being
uploaded yeah as you can see it says
enabled Save Changes because we sent the
image to vision API vision API told us
it's violent imagery and then from there
we throw an exception so it was pretty
easy basically to use machine learning
with your API and the last thing I want
to do is the speech API so I have this
section called fun facts so I'm
something fun about the person but I
want these students to be able to talk
to it and change the so basically
convert the speech into text so to do
that we'll use speech API so if I go
back to my application I created another
couple of services one is called voice
recorder this is not an interesting
class it's basically given some seconds
it records your voice and stays to a
file so it's nothing nothing fancy but
the worst recognizer is the class that's
more interesting in here we are again
using a new get package for speech API
and then what we do is we create a
speech client again so as you can see we
always use the naked package and then we
create a client talk to the service so
in this case it's a speech client and
then we have a method called recognized
that basically calls this link recognize
anything method on the speech client
so we we are basically just passing the
defile that has our speech and then
getting a response and the response has
a number of results in a number of
alternatives so when you use speech API
usually you get one result but sometimes
you get multiple results depending on
what you said and some of those results
that they have well actually all of them
they have some kind of confidence and
you can choose the one with the highest
confidence but what I'm doing here is
I'm just looking at the results and look
at the alternatives and just choose the
first one and get the transcript from
that so I'm just picking up the first
result basically so this is it this is
how you can use speech API and if you
look at how this guy is used in student
controller I have a new thing called
record so this is what happens when you
press the record button we call voice
recorder and then we record for three
seconds from the microphone to our file
then we call voice recognizer with that
file path and then we call recognized
method on the recognizer get a
transcript and then we said that as fun
fact what it's doing so that's what we
do
so let's try this out it might not work
because every time I did this with the
microphone and stuff it doesn't work but
let's let's give it a try it maybe it
will work so for fun fact we'll say oh
yeah it didn't work one more time
nope
yeah I won't try it because with the
echo and everything it doesn't usually
work but if you do it with perform I
often anyway everything it usually works
all right all right so that's it
basically that's what I want to show you
with the traditional applications and
and the kind of services that you have I
mean we have much much more services I
couldn't show them all but just I just
want to give you an idea or what kind of
stuff you can do now let's talk about
the new container as well because that's
what the world is getting into now
nowadays in terms of why containers if
you look at how we used to deploy
software this is how it kind of looked
like we had a physical machine then
would install the operating system
kernel there then we'll install bunch of
libraries on top of the operating system
and then we will install all the
applications on top of the libraries
right the good thing about this was that
it was easy one machine one operating
system one set of libraries but the bad
thing is that there was no isolation
whatsoever between your applications so
if you change anything about the
operating system or if you change
anything about the libraries you could
potentially break multiple applications
now after that we had virtual machines
so the idea works on machines is that in
a single physical machine you have
multiple operating systems virtualized
so this way the operating system
libraries an app is virtualized in a
single virtual machine so there's total
isolation between applications which is
good but the bad thing in this case is
that instead of dealing with one
operating system you have to deal with
four operating systems and these virtual
machines they're not lightweight they're
kind of quite heavy so you need to
maintain them so it wasn't so easy so
the containers they kind of combined the
best of both worlds so in containers you
have a single physical machine and
single operating system but your
virtualizing from libraries up so your
app and its dependencies you put in a in
something called container image and
that way your app your apps are
completely isolated from each other
because they have they have their code
and there
library is isolated but they run on a
single operating system so you don't
have to worry about multiple operating
systems anymore so that's the thing
that's the good thing about containers
they are lightweight compared to virtual
machines instead of having gigabytes or
a virtual machine file you have
megabytes like 10 or 20 megabytes with
containers I mean sometimes they can be
a little bit bigger than that but
usually there are much more lightweight
than virtual machines and they are
sealed and isolated so you can have
multiple containers running on the
operating system and they don't
interfere with each other
they are very easy to deploy very easy
to introspect so you can actually get
into container and look at what's
happening and for me the most important
part is their composable so you can
actually have a base image that you
depend on your application depends on
and you can layer your your app on top
as an image and if someone needs to
depend on your application they can
create another image on top of your your
own application so you can layer your
dependencies as images this way you can
basically compose your dependencies with
containers and dr. is the mostly used a
container platform I guess but there are
others like rockets from Korres as well
that's that's coming up and I'm sure
that will be more in the future so in
terms of how you can deploy containers
on Google cloud what you do is you take
an esquire application you containerize
it with docker and then after that you
have a choice you can either deploy to
App Engine or you can deploy to
kubernetes now the difference is App
Engine is the easiest way to deploy
containers expedite the containers on
Google Cloud because with App Engine you
basically pass your container and let
them tell App Engine you know just run
this container and I don't care how you
scale it how you run it where you run it
I don't care
and App Engine will basically run your
container on a single machine but then
if you get more load it will
automatically scale to multiple machines
so it basically just runs your container
at scale and you get like some nice
features about App Engine as well like
traffic splitting versioning and things
like that that I'm going to show so
that's easy to do but sometimes you want
to actually build a container cluster
you want to be able to pick and choose
what you have in your cluster and you
want to scale individual pieces
independently so for those there's
something called kubernetes it's an
open-source project to manage containers
and we basically host cube entities for
you so you can use that on container
engine and create your own container
cluster so if you want an easy solution
use App Engine if you want a more custom
solution than use cube Anita's on
container engine that's the answer
so let's talk about App Engine flex so
as I mentioned you just deploy your
container and App Engine just figures
out how to run it and scale it by
default you get dashboards for your
application so you can see the latency
the CPU use stuff like that
you get versioning so every time you
deploy your application you get a new
version and with different versions you
can do like things like traffic
splitting so you can split the traffic
between different versions do a/b
testing do like canary deployments
things like that and auto scaling auto
scaling is really important by default
by just deploying to App Engine you get
Auto scale so things scale up and down
without you having to do anything so let
me show you a quick example of App
Engine
flex with a speed on the core so once
you install Google Cloud extension for
Visual Studio you actually get some
templates so if you go to file new
project you will see that there is like
a Google cloud platform section and with
this you can get templates for asp.net
and you can also get templates way 404s
we don't like core on App Engine
so I already created an app this one the
Esper the core weather API it's right
here and then by default you get a app
settings that JSON file so this is the
JSON file that kind of defines your
application to App Engine
so I specify my project and then I
specified my project it's my service
name and this is my version default
version of my application so if you want
to deploy this to App Engine what you
can do is you can right click
and then publish the Google cloud now
you'll realize is that at this point we
have two choices again like App Engine
flex or container engine so if you have
a queue bonitas class running you can
actually deploy it there from here but I
want to deploy to App Engine flex and
then as you can see the compute engine
is not highlighted because this is an
expert on the core application so it
doesn't make sense to deploy into a VM
you can deploy here so I choose flex and
you can give your version name some
names or just call this version 3 and
when you deploy a version you can
promote it meaning your version gets all
the traffic right away but I don't want
to promote this I want to deploy this
version and then test it out and if
everything is good I want to promote it
myself afterwards so I uncheck that and
then open site after publishing meaning
once it once it's deployed can I open it
from my laptop
I don't wanna open it so I just hit
publish so what will happen right now is
the court will be bundled and it will be
sent to Google Cloud and Google Cloud
will in the cloud we'll create a
container for this application and it
will host a container in Google Cloud
repository for containers and from there
once the image is there the container
image it will be deployed to Google App
Engine flex the reason why we build a
container and and save it is that once
the container images in Google Cloud you
can actually deploy it to anywhere you
want you can deploy it to a container
engine or anywhere you want so that's
why we create the container for you so
this will happen but as it happens I'll
show you
the App Engine instance that I deployed
earlier so if we go here and if I go
here
you can see that I have some virgins so
I have two versions already deployed to
version 3 and this other version and
then by default you get a dashboard with
latency traffic VM CPU instances all
that kind of stuff I don't have anything
in here because I just what is apps and
no one is using them but if someone is
using it yeah you would see some
dashboards here if I click on a virgin
section I can see the different versions
I have so this version is being served
by two so actually behind this version
there's two VMs but this is something
that you don't have to worry about
google cloud figures out how many VMs to
use and how to auto scale that and this
is getting a hundred percent of the
traffic this is not getting any traffic
so once we have the new version will see
a new version in our list and what you
can do actually is you can split the
traffic so let's say I want to split the
traffic in these two versions like 50%
50% I can click here and let's do cookie
based cooling and then I'll say version
3 will get
I think there's something wrong oh yeah
the problem is I stopped this version so
it's not using any VMs and because of
that I cannot give traffic to it that's
what it's telling me but if I could
it wasn't stopped I could basically drag
any kind of traffic I want here so
that's it anything else I want to show
here I think that that's all I wanted to
show and then this guy will basically
within a few minutes it should this one
should deploy to App Engine if
everything goes well there's an error
yeah well ignore that all right and the
last thing I want to talk about his
Cuban it is so Cuban it is it's an
open-source project to manage containers
because containers are nice they give
you a consistent environment to run your
applications but you still need to
manage them in production so usually you
need some kind of conduct container
management platform in Cuba it is one of
the most popular ones it's supported by
a Google and when he came from Google
but now he's supported by Google it can
run on Amazon you can run on Azure the
great thing about kubernetes is that it
can run it pretty much anywhere you can
run run on your laptop you can run on
Google cloud anywhere it's up it makes
it came from something called Borg so at
Google we've been running containers for
a long time for like 12 years and we
have an internal system called Borg so
people who actually worked on Borg they
learn from it over these years and they
created kubernetes for the open source
world so even though it's open source
and it's kind of like a new project it's
very mature because it came from the
learnings or Borg and it's hundred
percent open source and I think it's one
of the one of the most popular projects
on github it's like the most top like
0.5% popular project it's written in go
and the whole idea of humanities is that
you want to basically manage
applications and not machines
so you create a humanities cluster and
you just deploy what's called your pods
and QL it's basically figures out where
to deploy that and you don't have to
like virtual machines yourself I
actually have a talk on this like an
hour-long talk because it's very
involved I just want to mention here so
that you know that it exists and on
Google cloud we have something called
container engine that basically hosts
kubernetes for you so that you can use
it in a much easier way at the very high
level this is how it looks like a cube
and this cluster so you there's a master
and then there are notes where you
schedule containers and the master and
the notes they talk through something
called couplets and the master has
things like controllers that controls
what goes on and notes there's a
scheduler there's an Etsy t44 the
cluster state and as a user you base it
will talk to the master either through
the API a CLI or user interface and at
Google Cloud what you usually do with
kubernetes is something like this so you
create your application and you create a
docker file for your application and
that's basically like the docker image
recipe and then once you have that
recipe you push that image to Google
container registry so your image lives
in Google container registry then you
use g-cloud to get a kubernetes cluster
so with one command you say gimme a
curated cluster with this many nodes to
schedule for my images once you have
your cumulative cluster you use another
command line tool called scripts ETL
so cube CTL is basically what you use to
manage cuban it is so you will basically
say please schedule this image on my
cluster but you don't specify any
machines or anything like that you just
say schedule this part and then it will
be scheduled on some of some of the
empty nodes in all right so that's how
it looks like and that's all I want to
say basically so as a summary we started
with Sol net running locally we moved
that to Windows Server a cycle server in
Google Cloud
we added pictures with cloud storage we
added intelligence with machine learning
api's and then we tried the new as well
the core on App Engine flex and we I
could have shown you much more on
kubernetes but I just basically
mentioned here because of the time
constraints and hopefully this was
useful if you want the links basically
these are the links for net support on
Google Cloud
and and windows support this is the App
Engine page this is a container engine
page this is kubernetes and if you if
you want the slides just follow me and
I'll put the slides up there and if you
have any questions I guess we have some
time for questions right now I can take
some questions but I'm also gonna be at
the Google Club both so you can stop by
there and I'll be happy to answer your
questions so thanks very much so
any questions yep
yes yeah that's that's true yep and
cloud functions is kind of like the
server love this offering
but that only supports not J's as of
today in the future it will support
other languages
I think most of the nougat packages they
were like bettas and that's why they had
like version 1 version 2 until they GA
but the ones that are g8 I don't think
they have virgins anymore oh yeah
they're supported both on that standard
and Dogma core not all of them but they
will eventually all of them will work on
both yes there's actually three tier so
I think if you go to google.com slash I
think it's called three oh boy it's
either three or eight here yeah so if
you go here it will tell you exactly
what you can do for free so you get like
$300 credit for 12 months and then there
are certain things that are always free
if you don't use them that much this
will tell you all the information yes
just regarding the pricing difference
between it's really hard to answer
because it really depends on the service
and how the service is charged and have
they use it so I don't have an exact
answer on that
but overall we try to be cheaper at the
base level also we try to be cheaper
with the features that we provide so
overall is cheaper but in terms of like
what percentage how it is I mean some
people told me oh we we say it three
times because we use Google Cloud some
people said 20% so it really depends on
the service and how they use it I don't
have it like a concrete answer any plans
to add sequel server to your cloud
sequel every so you mean manage sequel
server yeah I think that we heard that
or what and but I don't know the exact
like timeframe but it's something that
we are aware that people want what's the
and story for like secrets management
its management
I mean Kuban it is there's something
called secrets where you basically
define it in a single place and then it
gets attached to your containers as a
volume but in terms of Google Cloud in
general I don't know if we have anything
for secret management I mean we have
like Identity and Access Management
where you can define who can access
where maybe as part of that there's
something but I'm not sure any other
questions
no one more okay
VP sees
oh yeah yeah I mean I didn't talk about
networking at all but there's there's
all sorts of things that you can do with
networking and yeah I don't really look
into that that much because I'm more
like an application developer but I know
that we have we have lots of networking
things that you can do and quick set up
your own private networks and set up
your VPNs between your data centers and
Google cloud things like that all right
any other questions just running Cuban
Eddie's on Windows so Cuban et's master
has to run on Linux that cannot run on
Windows but there's and also the
communities nodes so the actual nodes
where you schedule containers that's
also have been Linux but there's work
now to have Windows nodes as well so I
think there's a company called aprender
that's working on that and there's a
working group within kubernetes that's
working on that from what I heard last
time is that Windows nodes are in alpha
or beta stage but it's not production
you ready yet but it should be
I'm guessing this sometime this this
year is my guess that will be production
ready and once it is then you can have a
humanities cluster that can have Linux
containers and Windows containers in a
single cluster which should be good and
then that way you can also run s without
not traditional on on communities any
last questions all right thanks very
much and enjoy the rest of the
conference</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>