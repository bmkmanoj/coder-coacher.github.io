<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Faster &amp; less risky releases with feature flags - Edith Harbaugh | Coder Coacher - Coaching Coders</title><meta content="Faster &amp; less risky releases with feature flags - Edith Harbaugh - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Faster &amp; less risky releases with feature flags - Edith Harbaugh</b></h2><h5 class="post__date">2016-11-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BcuRv4PHxp0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right well this is really fun for me
as you might guess from my accent I am
not from Australia and from America
my name is Edith Harbaugh and so funny
story from last night I was hanging out
with some other people from the
conference and they said you know you
have an accent and I said I don't have
an accent everybody else has an accent
but they didn't laugh at that uh and
then uh Eastside said I'm giving a talk
tomorrow feature flagging and everybody
started talking about feature flagging
which I love because I am extremely
passionate about feature flying and I
believe that feature flags can help
software organizations move faster with
less risk
so I loved everybody talked about
feature flags there's a great discussion
about ten minute said to it one of the
guys I was talking to said hey you know
that there's a company in Silicon Valley
that does nothing but feature flagging
and I was kinda like oh oh and then he
pulled up at his phone he showed me it
and it was a company called lunch darkly
and I started to open my mouth to say
something and then he started talking
more about lunch darkly and I couldn't
really get in at this point so this and
then I was like well this is actually
very funny you know inside I think I'm
still kind of a six-year-old kid and so
he told me for about ten minutes about
how there was this company in Silicon
Valley who was doing feature flagging as
a service why this was a good a bad idea
what their business plan was this was
great I let him go for a long time
finally I am a nice person and so I kind
of said hey I'm you know that company
launch darkly I worked there and he was
kinda like oh and so I'm I worked for
lunch darkly so we talked for about five
more minutes and you know IP was also
very passion about feature fly and then
he's like hey the CEO of launch darkly
she's a female
so I said yeah you know that that's me
and he was like oh so this was hilarious
for me and actually luckily it was
hilarious for him too because he was
kind of like oh so to introduce myself
I'm Edith Harbor I'm CEO and co-founder
of lunch charlie we do feature flags as
a service as what I should have said at
the time if I wasn't a bit jet-lagged
the talk today that I'm gonna give is
not about our product it's about the
general area feature flagging so I hope
that everybody gets a lot out of it and
you don't have to use a product to use
feature flagging some other stuff I've
do is I do a podcast called to be
continuous I do it with Paul Baker who's
the co-founder of circle CI it's pretty
fun podcast we sit around and talk about
software development I've been in the
software I think for my entire life
I remember programming in basic not
visual basic just basic basic when I was
a kid back when you had to remember to
skip lines because if you made a mistake
you sure needed those extra lines I then
had a summer job actually as a
programmer and Visual Basic programming
for the American government I started
off as an engineer at F eccentric in
vignette epicenter ik was portal
management and I have a couple of
patents of that in terms of how to just
deploy between different systems after
that I was also at vignette which is a
big content management provider since
been bought by Open Text these were both
good be good because I learned many ways
at which not to build software so these
were the era of the mammoth you know
three-year releases that SI p would do
where you would release every three
years and everything was on prim we
didn't think about on-prem or in the
cloud back then because there was just
software there wasn't cloud so you do at
three-year release your customers would
install
maybe a year a year and a half after you
released it so you would lucky to get
feedback five years after you released
it as you might tell and anybody I hear
some laughs from some people who lived
through that era this was incredibly
incredibly incredibly painful because
the cycle for feedback the cycle for
bugs was immense so my company epicenter
ik was considered pretty innovative
because we had a yearly cycle which
allowed us to move quicker which allowed
us to innovate which allowed us to get
stuff to market faster even in those
days though so a year was not that not
that common so we would actually have a
party when we did a major release this
seems incredible now like a party when
you have a release you know the cool
kids are probably deploying every two
minutes you know somebody's probably
deployed right now after I was an
engineer at a epicenter akin vignette I
thought I knew more than my product
manager is all engineers too and I
became a product manager and I
discovered how hard product managers
really have it product manager I think
is one of the toughest jobs because you
are the layer between so many different
people in the company between ops
between QA between performance between
marketing between sales and you're
basically a conductor of not a single
train but 12 different runaway trains
going to different directions
then I thought I could was smarter than
my marketing person and I was marketing
I could cur I actually came down to
Sydney a couple years ago when we were I
was working for them so I've seen
basically everything in software except
for accounting and I have no urge to go
into accounting so the old way of
building software really felt like this
you would have these huge releases which
had a lot of functionality bundled into
it a lot of bug fixes bundled into it
all coming out at the same time because
they were so seldom
there was a lot of other stuff that went
into them too if you had a release every
two two years or even a year you would
have this huge marketing launch with it
this felt incredibly scary you would
always have this panic moment of what
happens when I do this release and quite
honestly almost invariably stuff would
break when you did a release just
because the releases were so big and
there was so much going on there is no
way to really QA everything there's no
way to see how everything would work in
the real world and you would have this
sinking feeling in your pit of your
stomach when you're released like what
is gonna go wrong not nothing's getting
go wrong but more what will go wrong how
quickly can we fix it what's the best
way to fix it and who is gonna scream at
us this time you know is it gonna be
because it's not performing well in the
field because it's very slow is it
because we just completely misjudged a
feature is it because we forgot about a
migration path and we're actually
breaking people's old old functionality
there are so many ways that software can
go wrong I think you could pretty much
write a song about every single thing
that can go wrong when it release
happens and I've probably seen most of
them and then that the really bad thing
about when it release goes wrong is that
you get in this really panic state
depending on how bad the failure is when
I was at vignette we could actually was
an epicenter ik we considered the worst
possible thing that you could do would
be to destroy a customer's data because
this wasn't just you know their their
pictures of their kids this was actually
their production sites that they were
easy to serve up so an upgrade that
destroyed their data was extremely not
good it was bad we did a release that
did that we in a panic state tried to do
a release to fix that one anybody who's
tried to do stuff in a hurry there's a
psychological thing where your brain
starts
firing different chemicals it's an
evolutionary thing where you in a
fighter flight type scenario these
chemicals flood your brain and sometimes
lead you to make very bad decisions
because you're not really thinking
rationally so in this case we did a six
pack a six pack be a fixed pack see in
all quick succession we get up to fix
pack H before we'd really kind of steady
the boat this wasn't fun for anybody it
wasn't fun for customers it wasn't fun
for us in engineering it was just a
really bad place to be
I also remember another case it'd been
yet where we'd put out a bad release and
it was in a room where engineering
directors started screaming at our
operations director our engineering
director was screaming at you know that
we'd broken something there our
operations director like why does it
take so long to do a release why does it
take us you know a day to get this out
into the field and in my head I'm like
our engineering director is kind of an
asshole this is our fault you know like
why is he screaming at the operations
director now I still think that that guy
was kind of a jerk but he was right you
know why it why is it why does it take
so long to get stuff fixed you know
software is going to break the sooner
you realize that software is going to
break the more safeguards you can put in
place to make it better so now that I've
told you about the bad old days and I
hope those are days that I if you live
through it you understand the pain and
if you're too young to have lived
through it
be glad feature flex so feature flags
are basically taking this tsunami of a
release and breaking releases down into
tiny tiny chunks where they could be
easily switched off or switched on
independent of a full release so before
they go and how many people are already
using feature flex how many people are
thinking about using feature flags great
good
good mix crowd so I'm gonna leave some
time at the end for questions because
we're small and I love talking about
future flags so feature flag is
basically a way to wrap functionality
it's basically an if-then it's simplest
and then you have the ability to push
out your code and then separate from a
release turn it on and off for people so
there's a lot of benefits to feature
Flags the number one is that you could
push functionality data who you want
when you want the old days of the big
tidal wave of everybody gets the same
software at the same time whether they
like it or not sometimes is gone being
able to operate independently of
operations is actually also a huge win
if you want to push stuff out to
different people you don't have to cut a
new build you don't have to walk through
pushing stuff to different servers your
code is already available the way I
really sum it up is that you can start
to separate code deployment from
business logic so I'm gonna walk through
different use cases of how feature flags
can help people and the number one
reason to use feature Flags I think from
an engineering standpoint is no long
live branches here here's I see some
heads nodding so long like a once long
live branches are like a slow-acting
poison and somebody corrected me and
they said no their immediate poison like
as soon as you have a branch and you
have developers working on different
areas it seems peaceful because these
two parties can happily work on their
two branches and not have to talk to
each other it's great you have two
people or two teens that are working
away and they don't have to talk to each
other so notice what I said they're not
talking until it comes time to merge
back and then all of a sudden all the
the things that they didn't talk about
suddenly became become a big deal
you know oh I thought that this was
going to be used this way and you
thought this was going to be used this
way but I spent three weeks building it
this way and you spent three weeks
I don't want to give up my way of
thinking right now so basically the
longer you have branches going on the
more probability is that people are
getting yet pissed off at each other
when you try to merge them back in so
with feature flags that might seem like
it's a little bit more effort because
basically you're putting a shim in and
then having two different teams having
to be kind of in constant interaction
but really what this does is make sure
that your code base is very cohesive and
you're not postponing the pain until
people have a lot emotionally and
physically invested in well I already
wrote this code this way and I don't
want to undo that like the more you
spend on something the more valuable
that comes to you so just from a purely
different to have a developer standpoint
I think future flags are very powerful
for helping teams work closely together
so this is kind of a this is kind of an
inflammatory statement in development
sometimes I think I call it there's this
idea of waterfall deployment where each
team kind of throws stuff to another
team and says well it was my job to get
it to this other point in time and now
it's your job what this happens
sometimes you know in engineering
organizations is that you coalesce
around different responsibilities for
different boxes ie
the developer is happily coat away on
their box and then they say okay QA you
go test it over there staging staging
and production is production in reality
what happens is that QA is usually kind
of and staging is supposed to be as much
like production as possible but
inevitably it drifts you can't have the
same stuff exactly on staging as
production also what happens is that
it's really really hard to get real use
cases on staging business users are very
hesitant to use staging because they
know that anything they do there can get
blown away at any time so like what will
happen at best is that you'll have a
business user who will take a kind of
cursory list look at
staging server say it looks okay you'll
push your production and then all hell
breaks loose because they're like well
okay now I'm actually gonna do the
things I want to do and they don't work
and then you say well why didn't you do
it on staging they're like well I knew
that this could break at any time so I
don't want to invest a lot of time like
um you know you know working through all
may actually use cases here with feature
flags what you could do is you can give
people will access just to code live on
production which sounds incredibly
frightening until you start to think
about what that really means you still
have the ability to to turn stuff off at
any moment and I'm not saying to shove
stuff willy nilly into production
without testing it what I am saying is
that you can give people access where
they want it in a way that works for
them so if you take away one thing about
feature Flags I hope it is that it
unlocks a lot of power to get feedback
from real customers faster and it also
saves then development a lot of time
because you're not chasing down random
bugs on staging and QA which can be a
real hassle because you could spend you
know a couple minutes hours days chasing
down a bug and then finally just say hey
this is just a bug on QA or staging that
we can't even produce in the whole world
you know that's that's that's very
frustrating for everybody involved right
so this is a classic diagram from
crossing the chasm so basically the the
idea is that any technology can be seen
as moving out through the range of
people every technology kind of has its
early adopters the cool kids the cool
hunters and then you have the laggards
at the other end on the laggards the
people who who say you know ie6 is good
enough for me i don't want to upgrade
and every every technology has this
curve and depending on what the
technology is different people can be at
different places and sometimes there's
really good reasons why people are at
different places you know they've got
maybe
they've gotten burned by stuff that's
too early maybe there are a bank and
they really KITT don't have any
tolerance for you know new risky stuff
because they want to maintain balances
maybe that's just they feel like you
know laggard the old way of doing
software releases forced organizations
to kind of cut this curve you would have
people who were dying for new
functionality who said I want it as soon
as possible and then you have the
laggards here just basically like leave
me alone I don't like new stuff and you
were forced to push it out to everybody
at the same time
what feature flags what you could do is
you can iterate very quickly by exposing
functionality only to your innovators so
circle CI is a launch circle a customer
so they are I'd say an integrator they
use us because they have new features
that they want to be able to push very
quickly to to people that they know are
receptive to them and then they could
also block people who they know are less
receptive so in reality when something
finally gets released it's actually very
rock-solid
for the for everybody in there to curve
because they might have done you know
four to six to ten iterations very
quickly with innovators been like hey is
this what you're looking for is this
what you're looking for is this what
you're looking for
got an early feedback and then started
rolling it out the other really nice
thing about this is that you could
quickly find out if people even care
about it at all
if you push out a feature and there's
just the responses not what you want
with feature flags you could say okay
our hypothesis was wrong let's shut this
down the old way was extremely expensive
because you basically were locked in to
release single so early access betas are
a really powerful way to use feature
Flags how many people do beta is already
great I think that they're a really
valuable tool
both from an engineering standpoint that
you get feedback on real-world bugs but
also because customers like feeling that
they're special this really surprised me
when I was earlier is that I'd be like
hey this code is really buggy or you
know it's not really ready and people
really like that sometimes you know they
like feeling invested they like feeling
that they're part of basically your
product or organ they like giving
feedback so it's a really powerful way
to make your own customers feel more
involved as well as to make sure that
you're heading in the right direction
a big lesson learned for me was I was at
vignette and I could not get anybody to
participate in our beta this was a real
red flag you know if you can't get
anybody to participate in your beta it
means that you're not building stuff
that people care about like this seems
blindingly obvious but like we'd
invested a lot of time building some
stuff and then I started going out
asking customers hey you want to try out
they're like no oh my god this is
amongst the time I yeah so build into
your build into your thinking of once
you build it who will get it first and
and if it's if it's not something that
anybody will take early or take it all
then it's like hey maybe we shouldn't
build us at all opt-in so early access
betas are usually where you ask people
to participate explicitly you can also
allow people to opt-in this is kind of a
Google Labs type functionality where you
might have something on your site like
do you want to get this new feature do
you want to participate orally again
this is just a flavor over the other one
it's a way to get really early awareness
and get people to be using your system
early so that you're getting feedback
again the real goal of this is to make
life as a developer easier by helping
you find with the real use cases and
find the real bugs and the real
scalability pitfalls earlier and earlier
in your process rather than late when
it's already too late to fix them
blocking this is pretty cool you always
have people that you don't want to have
see a feature which sounds paradoxical
but you might have people even within
your own organization that are
destructive I've heard it being called
the Marissa Mayer rule at Yahoo I have
also been called a the CEO role which I
don't really like but it's true
you know if if you have some people look
at something too early they might focus
on the wrong thing they might give you
bad feedback so before I talked about
feature flags it's just in a generic way
of a user you can also block any
arbitrary thing you could block a
country
I know Pokemon was doing this when they
were rolling out to different areas you
could block a country you could block an
organization if you know that an
organization just physically is not
ready to take something yet you could
block them for getting it square for
example I know does this pretty heavily
because they have so much so many people
who are in high frequency positions who
are scanning cards that they don't want
to push features out so blocking is very
powerful to just gate back control of
your release rollouts
so roll let's I think you're very
valuable if you have concerns about
scalability I don't think there's any
substitute for the real world and a
scalability test you can load test
things you could try to replicate the
real world but the only real way to see
if something will stand up to the real
world is to push it into the real world
so with a feature flag what you could do
is you can have a feature that's off and
then slowly ramp the percentage of
traffic that goes to it this is a really
good technique if you have a back-end
system for example for example that's
you know maybe sending millions of data
requests at an hour you know you can try
to replicate that but you can't I love
this story um my friend told of he used
this really effectively at his company
and you know they would the old way of
doing it a switchover between too risky
back-end systems is to do it at 5:00
a.m. or 3:00 a.m. you know so you have
this risky switchover you say okay let's
do it at 3:00 a.m. and do this hard cut
over this has so many issues that I'll
just dissect why this is such an issue
3:00 a.m. is not a time when people are
at their most awake er where I say this
because I'm a little jet-lagged right
now so you're asking people to do
something very risky at 3m when they're
probably half asleep if something does
go wrong a they might not be in shape to
do it and B it may turn out that the
people need help from are not around at
3m you know so then you're kind of
making these panic calls or like trying
to jury-rig something at 3m and see it's
something that should be very obvious to
people here is that 3m it's not 3m
everywhere you know we live in a global
world now you can't rely on 3m you know
being a time when everybody who's using
your system is asleep
3m here in Australia is 10:00 a.m. in
the states you know 3:00 a.m. in the
States
you know the day here so it's it's not a
guarantee you're gonna piss off somebody
so if you use feature flags what you
could do is set is you could instead of
say hey let's do this cut over at 9:00
a.m. when everybody is in the office and
let's do in a really controlled fashion
where we'll start putting 1% 2% 3% of
traffic through this risky system the
benefit of that is that everybody's a
week if something goes wrong what you
could do is you could just turn it off
so the story I love is that a friend was
to me this really risky system and later
he was looking at the logs and he saw
that every day around noon so he turn up
turn up turn up traffic and every day at
noon it would go back to zero and he
asked the engineer you know why does
wait is what is the roll out go to zero
at noon and then the engineer said well
that's when I go to lunch you know and I
want to go to lunch
have to worry about it so he would you
know crank it up to 20% turn it back to
zero and come back you know makes a lot
of sense you want you want people around
and able to monitor risky systems you
don't want to do it at 3m or when
they're at people are eating lunch so I
think role arts are very powerful for
back-end systems where you can read
about load then an actual slide then is
well hey I'm doing this rollout so I'm
basically splitting traffic right why
don't I use this then for a/b testing I
think depending on the right feature a
be testing or hypothesis driven
development is an incredibly powerful
tool so basically the idea is like hey I
have I'm already splitting the traffic
already I'm getting metrics back for two
different paths wider than a B test and
see which one is better I love this cuz
I'm a little person but I think a B
testing should be done very carefully
the main issue with a/b testing is that
most people don't get enough traffic to
a/b test effectively so when I was a
TripIt we had 10 million users and even
with that much there were just some
things that we could not a B test so
sometimes people see this as a solution
to hey let's we're arguing about
something and let's just a B test that
unless it's something that you're
getting a pretty steady stream of
traffic through like for example a
signup flow and then you still have to
be a fairly big consumer site you're not
going to get enough traffic to
exactically a B the second issue with a
B test scene is that you have to be very
careful about whether you actually have
metrics that you can test for example if
your accounting software what you really
care about is that people renew a
month-to-month so there's not really
it's really hard then to a/b test a
different flow if you're saying hey this
makes people is this make it easier for
people to reconcile their transactions
so I love a/b testing it's just be
careful about why you're doing it and
the metrics that you're measuring
and it's not just a blind thing of hey
let's a be test everything so Jocelyn
who was the director of engineering at
Facebook said they were they were
vigilant about a/b testing there because
they could really optimize on one metric
which was daily activity however even
then a you know you can't a B test your
way into a good design like you have to
have some theories behind what you're
doing so if you can't a B test but you
are splitting traffic what's another
natural conclusion of things thing you
could do a classic flight that I've had
in many organizations is power versus
new users and how to treat them
differently any system has new users who
don't know very much and then power
users who knew a lot and it's very
difficult without feature flags to make
them both happy your power users will on
a lot of patrols they want a lot of
functionality they want a lot of
features because they've discovered
things your new users are new they want
a lot of hand-holding they want a lot of
tutorials they might want a lot of
tooltips with feature flags what you
could do is you can wrap features and
progressively disclose them to different
users again this ends a lot of fights
that I've had with and within
organizations about you know but oh but
people want this feature oh but this is
confusing to a new user you could say
okay great
somebody sees this feature after they've
logged in more than three times or
somebody gets this tutorial if they
haven't logged in in two months so again
feature flags I'd say are more than just
a kill switch there way which you could
start to segment your users in terms of
early adopters laggards power users
scalability and then the next step is
subscriptions so how many people here at
a subscription SAS company cool
okay so really what feature flags are
doing is bundling up code into little
logical blocks there's two ways that
people tend to use feature flags and
they're both right and correct when
people use them for very transitory
purposes when they're doing a release so
they're doing them to basically validate
that this feature will work in the field
and will scale up not break anything not
piss anybody off
so you've pushed the feature out you
eventually get to the end of the curve
with all your early adopters your
laggards your hundred percent and then
you don't need the feature flag anymore
and you pull it the second way that
people use feature Flags they're like
hey actually it really is that long term
I do need to continue to split up these
different user phases so that's when you
get more into the newbie versus
power-user another way you can use the
feature Flags then is to bundle features
and to subscription plants you can say
for example that these set of features
are only in the silver plan and the
bronze plan and the gold plan this is
really powerful because then you could
do is you can start to do one-off
subscription plans that formerly were
embedded deep in the code unfortunately
a big enterprise companies your sales
people start cutting deals that
engineers don't always know or like
about and then they come and they say
hey so-and-so gets this feature but not
that feature this is where ugly branches
start to happen it's where you start to
have ugly branches and where you start
to have stuff that's in code that people
don't know about with feature flags what
you could do is you could say okay here
we're not going to do this with branch
and we're gonna do with flags that for
example Morgan Stanley will get this set
of features and Anzac Bank will get this
set of features so you can bundle
subscription plans as well as custom
entitlement plans using feature flags
so going back to the transitory nature
of feature flags all features eventually
go to the bit bucket in this guy every
feature has a purpose when it's written
heavy purpose every feature serves its
purpose eventually there comes a time
when that feature should be pulled and
traditionally this is incredibly painful
I talked to some developers from London
who said they had a massive one-year
project to get their codebase and I
think it was ten million lines of code
down to two million lines of code so
actually I their Christmas party their
holiday party they celebrated the guy
who deleted the most code and this is
funny because you know traditionally it
feels like you know hey it's better to
build a lot of features why shouldn't we
reward somebody for building a lot of
features features have an incredible
long-term maintenance cost it's not just
a one-time rating it's the maintenance
of that feature in terms of let's Li you
know say if you're a SAS site or an a
mobile app if a new browser comes out
you have to retest that feature if a new
device comes out you have to retest that
feature if you're building other
features you have to retest the
interaction of these features and then
if something is broken then you have to
go back and patch it so it works so the
costs are features not just the initial
cost it's also all the long-term cost of
maintaining it maintain its platforms
and maintain its interactions so
sunsetting features was really a smart
thing to do traditionally without
feature flags that's been really hard
because you don't really have a good
handle on who's using a feature and plus
it's super intertwined within your code
it's not as easy as just you know pull
out this bit if things are nicely
feature flag though they are nicely
wrapped so you you can very easily see
who's using this this this feature and
then is it at a state where I can pull
it and if I can pull it it's very nicely
wrapped
so a sunsetting is a really powerful
tool to make sure that your codebase is
not becoming unwieldy and that you're
not having a lot of stale code running
around um so I walked through a lot of
ways to use feature flags and talked
about how like I think they're great
because I do now I'm gonna talk about
ways you could get into trouble and some
best practices for feature flags alright
so something that comes up a lot is
what's the right level of flagging you
know should I be flagging at a really
high level at the UI should I be
flagging at a really low level of
basically every pull request and the
answer is it really depends on your own
organization so there's no real answer I
think a lot of people fear feature Flags
who haven't used them yet because they
fear that they have to start doing
everything and there's a lot of cruft
then to those people who are just
considering using feature Flags I say
the right level is the right level that
you're comfortable with so maybe you
have a risky new feature or something
that you want to start getting some
feedback from it's fine to just start
doing that one feature usually what
organizations find is that they start
doing feature flags and then it's really
addictive and it's really addictive
because it saves developers pain like
how many people like getting repeatedly
woken up in the middle of night because
something broke
you know yelled at by customers that
they shouldn't have shipped something
just feeling the pain of stuff not
working well out in the field nobody
really likes that so usually what I
would it what I've found is that people
will start using feature flags and
they'll say hey you know this other
thing that didn't work and we did a
post-mortem what we could have done
differently oh we could have feature
flagged it so feature flags will not
prevent stuff from breaking stuff still
breaks that's effective life what
feature flags do do is give you an ease
Killswitch so that when it is broken you
can stop it in the field so instead of
having that ugly embarrassing issue
affect one hundred percent of your
customers and then having to scramble
and fix it you can quickly find if an
issue much quicker with a select base
and then turn it off so the right level
of flagging is really whatever your
organization is comfortable with
whatever gets people to buy into that
they want to do this I think if you if
you start off at two at two low level
it's frustrating for people because they
don't really see the benefit so best
guidance is the right level is the right
level for your organization something I
do have a strong opinion is on is
ambiguously named Flags don't do it give
your flags good names what's gonna
happen is that ideally a flag is that
something that different people within
an organization interact with not just
so let's let's talk through something
like say you have a new feature like a
new checkout flow you want to make sure
that developers understand what this
flag does you understand that the
operations understand what it does you
understand that make sure that QA
understands what it does you don't want
to have something ambiguous where
different people think it means
different things because then they will
both start touching it or think it does
something else so this goes along with
the next one which is misunderstood
flags the mother you know the horror
story I heard is that um two teams both
thought of flight controls something
that they considered their own domain
and so they are both flicking it you
know they were both turning it on for
different people and it took them a long
time to figure out what was happening
they both consider this flag their own
they didn't have very good login or I
think they had no logging so it's kind
of like they had a config file somewhere
whether the values kept changing and
then one team would change back and the
other team would change it back the
other team would show you know it's just
like on and on and on the root cause
really of here was not treating a
feature flag like a first-class object
to the system like
having it stored in a config file
without it being really understood what
it was for along those lines
misunderstood flags can kick and
literally bring your business down if
you have a bunch of flags that are
config file and not very well documented
what can happen is that somebody can
move on either from that team or from
the company entirely so a horror story I
heard is that somebody had set up a lot
of kid feature flags to basically
control the flow of traffic between
different systems
so you're basically tuning it so that
different publishers and an ad network
got different quality of traffic
everything was calibrated just so then
the guy who wrote all this stuff left
the company somebody else showed up said
you know basically what's with what's
with this why do we have all this stuff
at like 0.03 or 0.4 or whatever like
let's just put everything to one seem
simpler changed all the feature flags to
be on all the time and within about a
day had brought down their revenue by
94% because suddenly they weren't
filtering their traffic anymore and
there's flooding publishers with bad
traffic it took them a long time to
recover from that so they were they were
using feature flags for something that
was very fundamental to the core of the
business but they weren't treating them
as something that was very fundamental
to the core of the business you know
again they were sitting in a config file
somewhere where a developer didn't
understand what they were for LinkedIn
uses feature flags pretty heavily so
they they also had a case of this where
accidentally they turned on all their
feature flags and basically it was a big
mess so that ties into the next one it's
really important that you remove a
feature flag if you don't need anymore
before I talked about the distinction
between temporary and permanent flags
this is a really important one if it's a
temporary fly that using just for the
purpose or release
after you validated that the flag the
feature is good and it turned on to a
hundred or let's let's take another side
not all features are good sometimes you
might put the feature out to the field
and say you know what this feature isn't
well-received it's not what people
really wanted let's turn it back to zero
you should still pull that feature out
you know it's it's healthy to clean out
your code and make sure that you don't
have stuff littering the base so if
you're not using a flag because it's
either zero or 100% it really is a good
practice you should go in and remove
your flag I think this is why I feature
Flags sometimes get a really bad rap is
because people say you know future flags
are a lot of technical debt feature
Flags are technical debt if you let them
be technical debt like if you're not
going in and make you just hay this
feature served its purpose and cleaning
it out yes you will end up with a
massive Croft if you say hey this is
something that served its purpose and
clean up you will not have that tax
something I touched on before is
controlling access to flags again
feature Flags if used effectively are
basically patrolling the business logic
of your code this is something not to
treat lately you don't want to exam you
don't for example want your have your
DevOps people to have the same rights as
your QA people to have the same rights
as your product manager and who could
turn on what so ideally in a future
flagging system you'll have different
people having different rights of access
and that ties that also into visibility
into non-technical users I saw I saw
some great actually the talk I want to
see after this is from the people from
domain they've built a great homegrown
system where they can have business
users have the rights to turn different
features on so that the real power of
feature flags comes again what's not
juncture or config file that only a
developer has the rights of touch but
something that a business user has the
ability to to manage and this is what
really unlocks the power both for
developers and for business users
because
the old way of saying hey I want to run
a beta program so let me give you a list
of 20 people that you're gonna hard code
in and every time I want to take
somebody in another beta group I have to
do a release that's really tedious for
everybody you know even an even in a
best-case scenario our release will take
it about 10 20 minutes if not longer so
you want to make sure that your
technical users are not the only ones
you could touch your feature flags you
want to in the best case scenario how
this something that other people have
control to do aligned with this you want
to have logging if nothing else to tell
somebody not to do something again like
a lot of the things that happen with
feature flags are usually not done
through malice but done through
carelessness if you don't know who
changed a feature flag and why they did
it you could spend a long time trying to
figure out why if again I go back to the
config file if it's just hey this value
changed from 0 to 1 or suddenly this
person has access but I don't know why
the two things you could do or just
change it back which could be terribly
destructive to somebody else or you know
start off these long ugly email chains
of who touches up which is nobody nobody
wants to have that email chain so I
think logging is very key to figure out
who is who is doing what and just talk
to them the final thing that's pretty
sophisticated is if you have dependent
Flags you want to be able to manage them
for example if you say somebody in the
gold plan has rights use this feature
but somebody the silver plan doesn't you
know it's a sophisticated system so I
think that the best practices for
feature flags I think basically come
back to treating them like the valuable
tool they are we're seeing people get
into trouble with feature flags is where
they start just doing them without
thinking about how they fit into their
bigger culture and organization and I
mean culture and organization not just
as developers but in terms of who else
in the organization will want to use
them and when they'll want to use them
and who else should have visibility to
them if you use a feature flag it's just
if then statement that one person and
one team uses and nobody else knows
about it and then they leave you're
gonna have an incredible technical debt
because you have stuff that nobody
that's poorly documented managed if you
treat feature flags is something that
helps an organization move faster with
less risk by allowing developers to
turncoat off by allowing business users
to get access then they could be an
incredible help to everybody so I left a
lot of time for questions mainly cuz I
like hearing other people's experiences
so before though I finished I like to
say you can always tweet me at Edith
underscore H I do a podcast and it's
Twitter handles continuous cast and I
know they highly urge people to give
feedback so whether you like my talk
hated my talk I wish I'd talked about so
different things I would love to hear
your feedback because that's what I do
with that I love questions
yeah so that's a pretty complicated
question and actually one of our
engineers give it a talk just on that so
to give it 40 minute talk in a minute
yes you can use feature flags for that
the way to think about it though is what
are you really trying to do are you
trying to switch between two different
systems or what's what's going on that
you're modifying the schema and that'll
influence through how you tackle it but
happy to talk talk more after the talk
it's longer yeah so that's a great
question now the question is a/b testing
versus feature flogger toggles what's up
I think AV testing is great if you can
get a definitive answer about whether a
or b is best
I think feature flags have a bigger role
to play in development sometimes when
you just want to roll stuff out
gradually and get qualitative feedback
from different people like for example
if you're in a SAS organization usually
you don't want to do a/b testing because
that's very harmful to your customers
you might not have a rollout plan that
could handle that you might just want to
give it to a certain organization
there's some people with an organization
and ask them like what do you think
about this feature where a be testing is
more I have a pool of a hundred thousand
sub users and I'm gonna test different
results does that answer your question
yeah that's a great question the
question is um I love the theory how to
actually do this um so that spine it
back to what's the right level of
flagging if you're really just getting
started out the best way to do it is
usually with a new feature something
that's a little bit bigger like a
customer of ours
in the states did it they had this risky
new thing that they really wanted to be
able to control and they used a feature
flag to guard it and that made everybody
happy because everybody had a lot of
concerns about the risk of this new
feature and they felt safer with it
being encapsulated after that you know
that then the the fears that people
usually have are do feature flags work
at all
like what if stuff leaks out or don't I
just have to test for things now what
people usually see after they do their
first couple is that like you still want
to incorporate testing but you could get
stuff out to real users much faster
because you could do your internal test
you know and say hey let's let's give
these to a couple people and get their
feedback so so my advice is pick
something that's risky and that will
help people see the power and then kind
of walk through the process and then
usually what happens is then people have
a flywheel of well this worked great on
this project let's start doing it on
more things because again the real goal
of any piece of code is to get it into
hands of customers or just find out very
quickly that it doesn't deserve to go
into the hands of customers because it's
it's flawed you know maybe the original
business reason doesn't work maybe it's
not something that we want to roll out
figure that out as quickly as possible
it's a great question
other questions back there
yeah
so the question is again data um so
again our engineer gave a whole talk on
just on this which is its own rich
subject basically if you're doing
something like that which we which is
you're trying to switch between two
completely separate back-end systems
which which we ourselves have done what
we recommend is that you initially put
the data in both places and verify that
it works in both and this actually is I
think a better path than the old way
which would be just to do a hard cut
over if you're putting the data in both
places and able to verify it you you you
really are controlling quality the
alternative it without a future flag
it's just to again to do a hard cut and
then if it doesn't work you're you're
you you you have problems you've lost it
so if it depending on how risky the the
thing that you're doing is you do want
to put it in both places verify that
everything works with their feature flag
and then flip over completely
yeah um so the question is basically how
do we clean up feature flags once
they've served their purpose so I'll put
in a very brief plug for my own company
lunch darkly one of the things we do is
help manage that process so we can help
you tell we could tell you when a future
flag should be pulled because it hasn't
been used for a while what we recommend
that people do is at the same time
they've put in the feature flag they
also put in the pull request to remove
it so to think the entire time about hey
this is going to need to be pulled and
then when we send you an alert you could
just do that pull request and pull it
yeah we do it a couple with different
ways we let you say whether a flag is
temporary permanent we also alert you if
it hasn't been called for a long time
we'll also alert you if it's always
called with the same value which means
that you should probably remove it oh go
ahead I have time for I have three more
minutes so I have time for a couple more
questions
oh gosh that's not suitable for feature
flags yeah it's kind of sound like the
bubbagump of a feature flag sometimes
but um I think feature flags are good
for most development processes like we
had a customer who was doing a major
rebrand and you know they had to change
everything they had to change their
website look at fuel they had to change
their email templates they had to change
their back-end systems and with the
feature flag they could have everything
ready and instead of it being a
nerve-wracking thing where usually you
have to make a big change like that in
you're nervous they're like well all the
stuff has actually been ready for about
two days and we've tested everything
alive in production we're just like
flipping a switch now yeah and then they
could test it independent release so
instead of having the rush of hey we
have to deploy everything and make sure
everything works everything was
coordinated two more questions then
every round so come talk to me back
I'll give again a caveat that it totally
depends on your organization like if
you're moving from long live branches
it's gonna be a transition to move to
trunk face development so I like to have
everybody come in the next day and say
we're all gonna work on trunk it's
probably not gonna work
so I'd say whatever organizational style
makes people happy no and I mean happy
in a productive fashion that this this
is working for them again is a bit of a
hedge but I think there's definitely a
transition period that people go through
from branches to more feature flags a
final question and then I like I said
I'm I love talking feature flags come
tell me your horror stories technical
debt success stories I love hearing them
um he talked at the he talked for eight
abs I don't know if it was recorded but
his slides are online Patrick Keating
and you wrote a blog post so if you if
you give me your card after I'll I'll
make sure you get it well thank you very
much it was great to be here in Sydney</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>