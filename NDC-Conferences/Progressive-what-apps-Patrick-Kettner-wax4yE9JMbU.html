<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Progressive what apps - Patrick Kettner | Coder Coacher - Coaching Coders</title><meta content="Progressive what apps - Patrick Kettner - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Progressive what apps - Patrick Kettner</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wax4yE9JMbU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Patrick Kettner
out of curiosity anybody here bill to
progress it what about before some fun
then so you might be asking yourself
what the hell are they so hopefully I
can explain them I'm one of the members
of the edge team yeah at Microsoft in
Redmond where we help define a lot of
specifications that go into progressive
Web Apps and will soon be shipping edge
16 which contains most of the API is
required to do it if you try and find me
online you'll look at this photo besides
my shirt I promise you I do work in
Microsoft that's just kind of a thing my
my partner does for me every year for my
birthday she bakes me a cake normally
she'd be here
but right now she's out in the States
with our son and he's a really cool kid
he was our first kid and he's super
super happy he was the easiest baby I've
ever dealt with in my life he actually
went to the hospital like 105 degree
fever and look like that he's fine
there's nothing wrong with him now but
even like even when he's incredibly sick
they almost wouldn't admit him because
he's happy all the time he's now a
lumberjack which were from Seattle those
are the two options that are available
our web developer lumberjack yeah so
anyway the one thing that always kind of
bums them out though is whenever we get
him into a car I don't know maybe but
something about being like restrained or
something just really freaks him out he
just screams and panics otherwise he's
happy all the time but after a few
months of being at home constantly we
kind of got a little stir-crazy
so we wanted to go up to the mountains
up in Vancouver in Canada I'm from
Seattle which if you're unfamiliar right
there in the States Vancouver's just
about a two hour drive north and you
know preparing ourselves knowing that he
was going to kind of freak out for being
in the car for a few hours I did what's
most nerds do and you go online and you
try and figure out what other people say
you should do and I led me to this video
which seems like nothing it's just a
whole bunch of dots but for whatever
reason it hypnotizes the kid oh you can
seriously if you have children in your
life or something try googling a look up
like calm a baby or something on YouTube
and you'll find this video it's crazy
it's magic it works really really well
he can be freaking out barely being able
to breathe because he's screaming so
loud I put it in front of him with a
half a second he just snaps out of it
and stares at it so you know we get in
the car
he starts freaking out and I show it to
him and I win and we drive up and we go
it's a really relaxing and enjoying dry
it was a beautiful Dave's back in the
winter and we you know he was excited
about all the different snow and
everything and we went into all the
scenes and then you know after we had
been there for a few hours we decided
you know it was about time to go home
there's a three-hour drive back and you
know we get in the car and we're up in
Canada and I pull up my phone to you
know calm him down knowing he's about to
freak out he starts freaking out and my
phone does this and it keeps doing this
and the reason is because I have
incredibly slow cell service in Canada
compared to home and I'm trying to load
a forty five megabyte video and so I'm
just really angry because all of a
sudden you know my kids freaking out
Katrina my partner's all angry at me
because I said I would you know not let
this happen and everything's going
really stressful I'm just really angry
because you know this 2g connection
completely ruined my day and you know
I'm just like everything was just it
doesn't matter if we had fun or not it
was the fact that the Internet's slow
now and I'm just pissed off and
everything and you know eventually we
get going and we cross the border and on
my phone suddenly starts working and you
know I realized at that second that it's
not that two-g ruined my day it was the
fact that I tried to load a forty five
megabyte video that ruined my day
I didn't think ahead you know I was I
was perfectly comfortable with the
solution that I had created in my home
with really fast internet where
everything was great but as soon as I
went to another experience I had slow
internet everything was terrible there's
no reason that this has to be 45
megabytes like it's a whole bunch of
dots dancing anybody can build this
right and that's exactly what I told
myself that I could have done this
better you know I'm just ashamed as a
developer so I Drive home get my kid to
bed and I open up a text editor and I
just stare at it for a really long time
because I realize I have no idea how to
make a whole bunch of circles in SVG and
it I whenever I get into this situation
I remind myself of if you don't have a
better idea you just buy a novelty
domain and that's what I did I bought
hush little baby now if you go to hush
little baby you'll see this which is
less than six kilobyte version in SVG
because eventually I was able to figure
out that you can just create
circled by writing the words circle and
animating it and everything works and it
works completely offline everything you
know it's it's it would prevent that
from ever happening my kid would always
be happy and then one of the key
fundamental pieces of both this and most
progressive web apps is the
serviceworker now this is a fairly
straightforward and simple application
it's really just a whole bunch of static
files that need to be saved that are
available offline and for most people
this will be sufficient for what you
want some people will need constant
pushing but the example we're gonna go
through first is just for caching a
whole bunch of resources at once and
then having them all available offline
so to dig through it we just do a few
steps the first one is going to be
setting up a prefetch cache which in
this case is a name that's just a string
it represents the concept of a cache
inside of our serviceworker caching is a
new api it allows us to save entire
network responses as inside of a key
value store so you're able to basically
be able to look up whether or not the
browser has already cached this network
response inside of your browser so we
named it because we can have multiple
caches in case you want to be able to
say have a bunch of content that you
cached because it changes constantly
like if you're pushing your own code and
then you have a library cache where
things are much slower to update that
way you can blow away one cache and not
have to redownload the entirety of your
site then we set up a list an event
listener for the install event this gets
triggered the very first time you load
your serviceworker in the browser so
this only ever happens the very first
time you load the serviceworker the next
time that the user comes to your page
they'll just skip over this completely
so the great part about this step is
that allows us to prefetch a whole bunch
of stuff that we know for a fact is
going to be needed offline in this case
basically the entirety of the site then
we dig into the actual event itself
so at the install event we have this new
thing called wait until see service
workers are not meant to be able to run
in perpetuity they're only able to the
browser only wants to be able to run
them for the smallest amount of time
possible so that we don't waste the
users battery the idea of wait until is
basically a signal from you to the
developer to us on the browser that you
want to give
a little bit longer lifetime to this one
so because you're going to go out and be
cashing a whole bunch of resources it's
just not necessarily required just a
nicety thing like please don't kill me
we're doing some important stuff right
now so we say we wait until we open up
the cache so we open that specific cache
in this case the prefetch cache and it
is a promise so we get a venable all
these are async operations and so if
you're unfamiliar with promises it's
just a new way to do a sync operations
basically you have a dot then attribute
where you pass in a function that you
get the result from it from the async
operation so we open that cache we get a
reference to that cache and then we call
cache dot at all so what that ends up
looking like is just a whole bunch of
strings it's an array of strings of all
the different URL assets that we want to
be able to save offline in this case
it's just the one asset because this
slide only has so much room that totally
red sands are font so a doll will go
through that array it will make a
network request for each individual
element inside of that array and then
store it into your cache and they'll all
be available offline immediately we use
the new request API in order to do that
and we request them with the mode of no
cores so why the reason why we do that
is because with service workers unlike
some previous ways to store assets
offline you have the ability to request
and cache content that you is not from
your domain so stuff like Google
Analytics stuff that served on a CDN etc
all those things are required for your
sites to work while they're offline but
we obviously don't want you to be able
to dive in and start modifying your
users Facebook account or something like
that if it's a security issue so the way
around that is this mode no cores what
that will do is tell the browser that
hey we want to be able to get this
content and cache this content but we
don't need to modify any of the contents
inside of it so the browser will give
you what's called an opaque response
basically you'll understand that you
have received a successful network
transaction but you won't be able to
look at the headers for it any of the
content inside of it anything like that
most of the time this is probably going
to be what you want because you'll will
kind of just be able to accept all
content you don't have to worry about
whether or not it's from your domain or
another domain you'll just be able to
add it to your cache immediately but if
you happen to want to go in and modify
the content to say hey you're offline or
something like that you would need to
get you know change that a little bit
our case we just have a straightforward
caching case so it is not necessary so
we're already halfway through our
Service Worker the second half is going
to be the fetch event fetch is a new
event that gets triggered at any kind of
network activity in your browser so this
would be when an image asset is
requested when an xhr or Ajax request
happens when basically anything that
would ever show up in your network trace
occurs it's going to give trigger inside
of the serviceworker a fetch event so
what we do with that event is you know
that's where we go ahead and cache any
new assets or respond to the browser
with our pre cached assets so for
example when that event happens we will
respond with will go through caches
match cache is that same global that we
had went with that we had sorry is the
same variable that we had talked about
before with the new caching API dot
match is a subset where it does exactly
what it says on the tin you give it a
request event dot request which is the
actual Rob Network request coming from
the browser and with a cache we'll go
through sorry the browser will go
through your cache and see if you have
gone and pre cached any of that content
already it's basically over saying hey
do you have this asset cached if it does
we get a dot VIN we get the response the
reference to that response rather if
that response is there we just reply
immediately so we immediately check our
cache see if it's there and if it is we
reply with that cached asset if it isn't
we just fall back to the new fetch API
unfortunately named it has nothing to do
with the fetch event it's just a new way
to do xhr requests it's a simpler Ajax
interface that has a promise based
syntax so we do a new fetch where we
pass it the exact same request that we
already captured and it will fall to the
network and we come back and we will
shove into our cache when it replies so
now we had this offline everything works
and I was super happy because I could
convince my baby to stop crying no
matter where in the world we were and so
this is a layout of my apartment I got
it from my vacuum it's the only way I
could think to actually get it working
and so my office is right over here and
the baby's room is over there in the
other end and
in Seattle this is a really old building
it's over a hundred years old which is
ancient by our standards and it's a
whole bunch of brick and metal and stuff
that doesn't do well self sell signal in
between the two areas
and so basically where his room is is
almost no cell service whatsoever no
Wi-Fi service so anyway I'm going to
show off my handiwork to my son and it
works and I go over and I call Katrina
my partner up and she opens up her phone
to try and you know should do it herself
and she gets this and that's because of
this see service workers are not
supported in a ton of browsers they are
in Chrome and Firefox they're coming to
edge very soon the Safari team actually
just announced they started working on
it but today doesn't really help my baby
stop crying you know the service workers
aren't on the mobile aren't on mobile
asset phones unless you're using an
Android device which kind of sucks so I
wanted to have something that could work
offline on Katrina's phone as well as my
own and so I started to look into
alternatives for how to get content
offline and I found app cache if you're
unfamiliar with app cache you may be
familiar with this talk app cache
douchebag by Jake from the chrome team
and the reason it is called this is
because app cache is a terrible terrible
API serviceworkers is way better than
app cache in fact app cache is so bad
they're actually removing it from the
HTML standard it's one of the only
things that has ever been removed from
the HTML standard it's really really
really really really crappy but it
covers our use cases see app cache was
built specifically just to cache a whole
bunch of static assets which for me is
exactly what I need and not only that
it's supported basically everywhere it's
been around for a really long time
nearly ten years and you know it's has a
whole lot of problems and it has a whole
lot of ways that it can hurt you if you
don't deploy it properly you can have
problems where you can accidentally
cache the app cache itself to where your
website would never be updated ever
again you can have to include specific
headers that we'll get into in a moment
or sorry specific attributes inside of
your app cache in order to prevent it
from thinking it's constantly offline
there's all kinds of ways to shoot
yourself in the foot but if you do it
correctly you can have an okay
experience on older devices until
service workers are available everywhere
so we want to eventually do something
that looks kind of like this we check to
see if service workers are enabled
inside of our browser if they are we'll
go ahead and just register it and then
we just fall back to application cache
if a service worker doesn't exist
because app cache is basically enabled
on all major browsers the problem is
that app cache in order to be installed
ends up having to be done this way
service workers is done dynamically
through JavaScript app cache is done
through an HTML attribute that manifest
thing right there and that has to be
there at load time
you can't dynamically append that to the
page it has to be there at the very very
beginning which is a problem because we
want to do it only if the browser
doesn't support service workers if it
does and you load an app cache you will
actually override some of the service
worker stuff because the app cache is a
huge jerk and constantly takes over a
whole bunch of network activity so the
way we get around this is by using an
iframe we create an iframe dynamically
set it to display:none so it doesn't
actually show anything set a source to
an HTML file that's literally just
loading the app cache file and then
append it to our page so this is the
entirety of our HTML file that we're
doing you can tell basically the whole
point of it is just that manifest
attribute up at the top and when we
append that to the page it ends up
taking over the parent page because app
cache will swallow the whole domain if
you let it so this is what app cache
looks like inside excuse me at the very
top we have cache manifest you have to
declare the fact that it is a cache
manifest for some reason and then after
that you just give it a literal list of
all the assets inside of your page that
you want to have available offline you
have to list it statically at run at
load time you can't dynamically append
to this list it's one of the many
reasons why app cache is terrible but
there's a whole bunch of stuff that you
want to be able to add your page to
enable it to work offline where you know
for a fact file name at like your build
time when you use webpack or any other
kind of modern build tool
you can't output this list automatically
and have it function one of the key
caveat is to keep in mind by default the
app cache will think that it is offline
and 404 anything that is not a 200 so if
it is not able to load one of these
files exactly including like a redirect
it will actually naughty
allow you to go to the network to check
it even if you are online on the world's
fastest internet connection so we
assigned this network star at the bottom
to basically say fallback to the network
if you think that there's a problem with
any of these assets or if it's any asset
that's not included on this page now I
can't tell you enough how terrible app
cache is but what's great is that it
took the website they're loading on
Katrina's bone down from about twenty
point seven seconds when we're finally
able to get a little bit of you know
tinfoil Wi-Fi in there down to 190
milliseconds you know having stuff work
offline can make a huge and profound
impact on your users use of your website
and so yes the API is terrible but if
you are knowledgeable about these
terrible old api's you can get a much
much better experience for your users
until we get the great new API is
everywhere it is a douchebag but it's
coming and you know app cache wasn't
even the first attempt at having offline
applications there was many steps before
that does anybody here ever like write a
DHT dhtml HTA
in windows 98 just me okay so if you go
to the hush little baby calm and like
ie6 you'll actually get this pop-up that
tells you that you can load it as an
offline web application where it looks
like this so something that was built
into the really really early days of
Windows you should never do this this is
nonsense and stupid it's mostly just
because it was kind of fun to figure it
out but the whole point that I'm making
is that progressive web apps are not
just a radical new way to create new
websites it can also be a radical new
way to update your websites you know all
of this content that I've created up
until now could have gone on a web site
from 20 years ago when we were shipping
dhtml instead of you know ajax or any
kind of web 3.0 crap it could have been
there the whole time and just never
worked because we used proper feature
detection we shipped the features and
you'll only ever light up on browsers
that you know supported and we still
work offline another feature that's been
around for a really long time that I
think is a key part of most modern
progressive web apps is the concept of a
web worker web workers have been around
for a real long time as well they were
added to the WebKit project first back
in 2008 which is a really really long
time ago
edge obviously didn't exist neither did
I eat N or
it was ie8 at the time chrome was at
version 2 it was a really really long
time ago web work has it been around but
for some reason people aren't really
leveraging them nearly as much now if
you haven't ever used them or if you're
unfamiliar with them the concept with
web workers is that the web kind of has
a problem when you're developing for it
and it's that every it is single
threaded by default if you've ever had
to create like a scroll handler or any
kind of heavy JavaScript function inside
of your code and the page suddenly gets
really janky and gross and slow this is
your problem it's that everything in the
browser has to be executed serially one
by one you can't have two different
pieces of code running at the same time
the reason being that you could modify
the entire Dom in one thread and then
try to check the value of the Dom in
another thread and then they have a
weird race condition and everything's
terrible and so as a result everything
is constantly fighting for CPU time the
browser has to wait for all of your code
to execute before it can lay out the
page and recalculate all the different
layout changes tasks to make and then
paint the page and everything else and
so if you end up having a function that
does a whole bunch of calculations or
algorithmic changes or anything like
that you get really really gross janky
pages and so what web workers allow you
to do is to offload tasks to a
background thread
now these tasks won't have access to the
Dom they won't have access to the HTML
but if you can abstract away that
concepts and just have it do the
calculations or on the algorithms that
you need in a background thread it can
completely save the day it and make
really really expensive functionality
really cheap not only that they are
supported basically everywhere pretty
much all browsers with the exception of
Opera Mini which doesn't support
anything ever is back to like ie 9
supports web workers you can have some
really really cool stuff and for example
I'm the maintainer for moderniser the
JavaScript library if you're unfamiliar
it's a feature detection library it's
not super pertinent to the point but a
couple of years ago we redesigned this
page this is the download page if you're
unfamiliar and not only that we actually
remade the page so that were sorry we
did the libraries so that everything was
modular before it was just one big file
that you would download now every single
one of these check boxes or plus science
are individual files that you can click
off so you can build your own custom
really tiny version of moderniser that's
just the suit that's just an easy one
now the reason we did that was because
people were downloading this whole giant
monetize er file and they were getting
way more code than they actually need it
and we were just kind of bloated into
web as a whole we're the second biggest
library after jQuery on the Internet and
we felt really guilty that we were
responsible for slowing down users
websites so what we did and we were
creating this was modularize it and then
also build a little ticker in the upper
left hand corner that told you exactly
how big your build was dynamically and
client-side and that includes both the
full file size and the gzip file size
and so as you tick stuff off you'll
actually get updated values immediately
without ever going to the server the way
that we did this was by using a web
worker we actually just built everything
client-side inside of a web worker pass
it over to another web worker where you
know calculated the entire length of the
file and checked it inside of a
JavaScript implementation of gzip and
you know everything was completely done
and if the browser didn't support web
workers if there was ever a problem with
the code we just you know didn't have
that piece of functionality it's just a
progressive function that we added to
our page another project that I've been
working on is this thing called the web
worker preprocessor it's a collection of
JavaScript files that have been created
by transpiling external template stuff
so stuff if you ever used like code pen
or jsbin or anything else like that
you've seen stuff projects like the les
library slim pug Jade even sass and
Hamill Ruby projects that have been
completely written in other languages we
were able to transpile all these
projects over to JavaScript and have
them run inside of a web worker so you
could have a offline PWA with something
like code pen or sass Meister jsbin any
of these sites you can check it out at
the offline sass Club it's just a stupid
little website that I made and if you go
there excuse me you will have the
ability to you know modify stuff on the
one hand hit compile and have the
entirety of the SAS library running
inside of your browser and updated
dynamically you know it's kind of a dumb
website but it can show that you can
actually bring external libraries that
were never intended to run inside of the
browser whether they be ruby c
javascript or rust or any other language
and have them run at high speeds because
of web workers you know facebook
actually loads Lib JPEG the
a canonical JPEG library inside of a web
worker it's been transpiled from C into
JavaScript in order to resize photos
that users upload because users tend to
upload extremely large files if they're
photographers something like 200
megabytes they resize those all the way
down before they even upload them that
way users on slow connections or you
know Facebook's on traffic content can
be reduced as much as possible people
are using web workers at these really
high level websites and really important
websites and you can check them out for
your own projects and you know just do
completely crazy stuff another great
example one of my co-workers
Nolan Lawson created this website called
pokedex org that's the another silly
website it's just a way to list all of
the known Pokemon but he wanted to make
it extremely fast even on old devices so
he used a project called virtual Dom
which is effectively just the core
tenets of react it's this concept where
you keep track of what the layout of
your page is and inside of there sorry
in memory just a Dom object and then
compare it against the current one
so whenever a change happens whenever
like a user clicks a button to expand
something you do that against the
virtual Dom you main Dom you diff the
differences and you're able to calculate
the smallest amount of change as
possible to get to where your user wants
to be he extracted that into a web
worker so that you have all this content
being all the sorry all the heavy
algorithms running inside of a worker
and not blocking your main thread and as
a result he was able to get over 60
frames a second on this is the Nexus S
which is a phone from 2011 and it's
renders faster than most of the contests
video isn't really doing it justice you
can check it out yourself but you can
have incredibly fast performance on
devices that are much older than my
child and frankly that's impressive to
me you can check out the project here at
github com
it has a lot of cool little performance
tidbits no one's actually one of the
performance leads for the edge team and
so he really really knows his stuff you
might be more familiar with Nolan from
indexdb he's also the lead for a thing
called CouchDB which is a full version
of the couchdb database that runs inside
of a indexdb inside of the browser so
you have to clone the entirety of your
database and keep it in the browser it's
built on indexdb in the best case as it
falls back
to other database formats if you don't
have it but indexdb is another one of
those things that should be used more on
the web but isn't for some reason I
don't know if it's a lack of education
or if it's just kind of difficult but
it's been around for a really long time
since 2009 when it was added and you
know honestly I say I don't know why
people you don't use it more but I kind
of know if you've used local storage
it's one of the easier to use storage
items you're familiar with kind of this
interface where you have a key value
store and then you you know get the item
later on by that to implement the exact
same thing and web sequel and sorry and
indexdb looks like this and this isn't a
joke this is actually to do the exact
same key value store and indexed it gets
terrible it's terrible to write easily
at the very least but that doesn't mean
you shouldn't use it there are a lot of
different storage methods that are
available to the web and to that you
that you can build off of but indexdb is
really one of the largest and most
worthwhile databases and if you've been
scared off by the syntax you should
check out some of the libraries that
actually make it a lot easier one of my
favorites is Dex ejs it ends up taking
indexdb and turning it much orange like
a jQuery like syntax we're able to have
this kind of streaming interface over
the API and pluck and pull and do all
kinds of much much more readable
interactions on top of indexeddb if you
want a local storage excuse me like
interface there's local forage which
gives you the exact same local storage
API just you know slightly differently
you have a callback interface instead of
immediately returning there's also of
course pouch DB which is the one that I
mentioned where you have a full CouchDB
instance inside of the browser and
what's great about index DB compared to
a lot of these other libraries is they
actually can give you gigabytes of
storage inside of the browser and that
is gigabytes with a G Chrome and Firefox
will give you up to fifty percent of
available disk space on the device
inside of index DB you can store large
forms of media you know videos audio all
kinds of stuff edge stores hundreds and
hundreds of megabytes by default it can
be included if you want to check out all
the different ways that you can abuse
storage you can check out the browser
storage abuser at this domain and that
will give you show you all the different
ways where you can keep a whole bunch of
data offline you can store the entirety
of your website probably
several times over inside of our users
device without them even noticing you
know you can be caching and pushing the
boundary on what content is really
possible on the web by leveraging stuff
like indexdb and some of the new storage
api's now all these you know into all
these different storage methods have
been around for a really long time and
they're not necessarily always viewed as
fundamental to progressive Web Apps
despite the fact that I do but one of
the things that absolutely is key to a
progressive web app is the concept of a
web app manifest this has nothing to do
with the app manifest or the app cache
manifest that I mentioned before it's a
new specification a couple years old at
this point it originally came from the
Firefox team when they're building
Firefox OS
but despite the Firefox OS no longer
existing spec still does and it's
basically if you've never written any
kind of native application or Chrome
extension you'll be familiar with the
concept of a manifest it's just a big
JSON blob inside of a file that is just
a whole bunch of metadata about your
application stuff like title the
language of the thing the text Direction
description so that when you know Google
are being come to it can give you your
users a nice description of what it does
all the different icons for all
different types a whole bunch of other
assets you can even have some cool
features like related applications so if
your company ends up making a native
application in addition to your
progressive web app you can actually
have it tied to it inside of this and
then automatically load the native
application if a user as ever opens up
your website or PWA instead and that can
be controlled with this prefer related
applications flag by default that's
false because the web should win yeah
and what's great is that in order to
support it it's really just this it's
just a link tag that you can add inside
of your HTML and that could have existed
you know 20 years ago in order to have
that hush little baby website work I
added the web manifest to it and you
know that could have been there back
when HTA's we're still a thing and it
wouldn't have changed anything
you can start shipping this today and
you know you might be wondering or you
might have noticed rather a whole bunch
of that content that's inside of this
manifest is also inside of you know the
header already and it's kind of constant
header bloat one of the aspects of the
manifests is being able to abstract all
that different content from your header
put it into a single cashable file
rather than having to constantly expand
it with more and more new icon formats
but the great thing is that this
actually makes it really easy to get on
board with a manifest I actually created
a node module called manifestation what
this does is it takes a URL and it will
crawl that URL and build the most fully
featured web manifest file possible for
it so that you can start building your
own PWA today and I do mean fully
featured it goes pretty all out this is
one of the language detection ones which
is honestly probably the simplest of all
of them we end up loading a couple of
node modules up at the top cheerio is a
server-side jQuery replacement CLD is
compact language detection it's a binary
file that's able to parse a huge chunk
of data
sorry huge chunk of text in order to
look for the most commonly used language
inside of it it's what Google translates
built on top of and what we do is we end
up loading the HTML of the page that the
URL that you give it and we check for
the simplest like language attributes if
that doesn't work we fall back to the
HTML XML language attributes if that
doesn't work we fall back to dublin core
which is a format only used by
librarians in like the 70s and 80s but
if i told you i want it to be fully
featured so if you declare a language in
any way we will find it and if you don't
there a language we pass it over to CLD
it parses the whole content then we get
that value and like I said that's one of
the simplest things the icon one could
take like 15 slides to go through but we
find every single kind of icon that you
possibly exist on your page obviously
your favicon z' your Apple touch icons
your MS tile application icons or even
your MS application config if there's a
way to declare an icon we'll find it and
we'll put in your manifest for you now I
want to make this as easy as possible so
we ended up making web manifest because
I love novelty domains you can go to
that website right now and you'll see
this it is just a single text box that
you put in a URL you hit enter and you
will get a download prompt for the web
manifest you can add that to your
website today and you'll be on your way
to making a PWA you know it's a really
easy way to get started if you're
interested in the web manifest spec
here's a couple of short URLs that are
on top of that domain the validator and
the spec itself you can check out some
stuff and yeah it's a really really easy
way to get
and what's great about it being so
declarative in this manner is that it
makes it really really easy for content
owners like being there sorry content
searchers rather like being and Google
to find it and so one of the really cool
projects that the Bing team is working
on in conjunction with the edge team is
crawling the web looking for websites
that declare a web manifest and if it is
there gonna be automatically ingested
into the Windows Store so this will
obviously be able to be opted out of if
you don't want to have your content on
the web on the Windows Store but by
default we will go ahead and find you
know any website that's declaring itself
as a progressive web app by including a
manifest and will be able to expose them
to the hundreds of millions of people
that go to the Windows Store so it can
be a way to expose your content to a
much larger audience without you having
to lift a finger
other than you know to go to web
manifest to create one and you know it
is a kind of an interesting future with
progressive web apps especially because
you want to tailor these applications to
feel like they are natural they feel
like they belong on whatever platform
the user is using but at the same time
we don't want to go back to the days of
best viewed in IE 4 and Netscape 2 or
any other thing right we don't want to
make websites that actually only ever
work on one platform and you know so
when we build our progressive web apps
we want to be able to take take
advantage of whatever application web
whatever native features are available
in that platform without necessarily
building stuff that rely on it a great
example of this is a lot of the elektron
work by default electron you know wants
to look like a native application so a
user doesn't you know know that it's a
native application you're sorry doesn't
know that it's not a native application
if you've ever used like a java desktop
application from 10 years ago you'll
know it didn't really feel like a
Windows application or an OSX
application or anything else it kind of
just felt like a java application and
one of the ways that electron gets
around that problem you know is by
leveraging and making sure that all the
electron apps have their own custom
sorry have their own non custom system
based clothes bars you know that's a
great example of leveraging whatever the
system provides already in order to give
you a good experience and that's
something that when you're building
progressive web apps you want
be able to take take advantage of any of
those features available a great example
would probably be Safari push
notifications by default Safari desktop
has actually had the ability to do push
notifications since 2011 not a lot of
websites do it but if you have a website
it's something that you can consider
it's pretty easy to set up and though it
is non-standard it is something that's
coming to the web as a whole you know if
you have a lot of traffic from Safari
desktop browser sorry from Safari
desktop users you you know are able to
give them a better experience
theoretically by leveraging a lot of
these api's and eventually this actually
did come to the browser it's already
shipping in Chrome desktop and it's
coming to edge and edge 16 but you could
have been using it for years now and you
could have kind of honed that experience
before more of your competitors are able
to use the exact same api's web payments
is another example Safari
shipped the Apple pay on the web last
year and where you're able to have near
seamless checkout experiences without
having to no mess with any of them users
credit cards or store any of it
financial data it's handled completely
by a JavaScript library and apples
communication servers and it works
really really well I come from an
e-commerce background and everyone's
tripping over themselves to get Apple
pay enabled on their website because it
means that the user doesn't have to fill
out forms they don't have to update new
contact information or new credit card
information they just put their finger
on their device and it works it's great
and you know it's something that a lot
of people should be using but at the
same time we also have the web payments
something that's been coming to edge
over a year ago now that can hook you
directly into the Windows Store wallet
see the point that I'm trying to make is
that you know you should be willing to
use these cutting-edge api's even if
it's they're non-standard because it
helps give signals to us that the
browser what people care about if a
whole bunch of people start using these
Apple pay or other non-standard payment
api's will realize that y'all want a
easy way to do web payments you know and
obviously in this case we already knew
that and we built it but the more that
people use these API is the more you can
signal to us on the browser what you
want and what you want to be made better
you know in this API is actually really
straightforward to use
you just have to define what supported
information do you have inside of your
web payments in this case we're just
wanting a basic credit card
to find the types of credit cards that
we support inside of the network and
then we also just give a couple of
details like what's the total amount do
what's the country that the value is in
and the value itself and then you know
whether or not we want a shipping
address and then we just do a new
payment request where we pass in that
metadata inside of it because with our
feature detection and then if we don't
if that feature detection fails we just
Ford them over to our old checkout
experience this is just a progressive
experience that makes people that are on
the more modern browsers have a much
more enjoyable experience you know by
leveraging these new and cutting-edge
api's you can have a much much faster
and much more financially beneficial
experience for you and your users this
is actually also shipping in chrome as
of a few weeks ago on Chrome both chrome
mobile and Chrome desktop so it's
definitely something if you in any way
take money on the web you should be
checking out web payments it can
definitely make a lot better and one of
the great things with that thing that I
mentioned before the fact that
progressive web apps are going to be
coming to the Windows Store is because
of a quirk of the way that they're
packaged ends up effectively meaning
that they're really just packaged web
applications if you've never built a
Windows native application it's just a
term that we use to basically mean a
Windows native application that really
just loads a website inside of it and as
a side effect of that if you happen to
use if you happen to have a user that
installs your progressive web app on the
next version of edge that's coming out
you will have access as a developer to
the entirety of the win RT API so you'll
actually be able to do feature detection
for if window and windows and then
access stuff like the devices Bluetooth
you can be able to control and interact
with the user's Bluetooth with their
permission of course they'll be prompted
and told that you're doing it but you
can have a lot crazier of a thing you
can do stuff on a website that you never
thought possible before even just a few
years ago with ease media keys you know
your hook into the play and volume
controls if you have any kind of video
or audio on your website you can hook
into the hardware controls in order to
support that even you know OCR optical
character recognition so that you can
detect someone's you know if they're
taking a photo of content to be able to
more quickly fill out a form or any
other kind of content you can build on
top of the native API
that already exists using an easy-to-use
JavaScript API or even Cortana you have
access to the entirety of Cortana you
can you know and include your own cards
or do all kinds of system leveraging
stuff with it and you know you can use
all of this cutting-edge API is because
you shouldn't be waiting for any kind of
a Ryoka texture when you're thinking
about building a progressive web app
these are progressive concepts you can
start you know just kind of folding them
in over time you don't have to wait into
a complete build from scratch you can
just start adding features like the
manifests today in ways that won't
negatively affect any of your users even
if they don't support them you can
slowly fold into it and get something
and you know just don't be afraid to use
any of this new shiny stuff it's fun and
we promise it probably won't hurt you
and you know just make awesome stuff
that was it you can check out any of my
stuff here I'm Patrick Kettner basically
anywhere if you have any questions about
edge or anything else feel free to email
me
Pat cat at Microsoft com thank you if
you have any questions anybody cool I
have stickers or if you want to have us
questions in private I'll be up here for
a little bit</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>