<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Deep dive into building Bots with the Microsoft Bot Framework and Cognitive Services- Vishesh Oberoi | Coder Coacher - Coaching Coders</title><meta content="Deep dive into building Bots with the Microsoft Bot Framework and Cognitive Services- Vishesh Oberoi - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Deep dive into building Bots with the Microsoft Bot Framework and Cognitive Services- Vishesh Oberoi</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bp6KEltdd9g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">cool all right let's get started so
welcome everyone and thanks for coming
along to the session my name is vish and
I work in the commercial soft
engineering team at Microsoft based out
of Auckland New Zealand so just a small
flight over and it's it's sort of
awesome to be here first I'm speaking in
DC so it's really cool bit about myself
again I work out of New Zealand part of
any NZ team and you know been building a
lot of bots over the last sort of six to
eight months working with the whole
bunch of customers in larger Enterprise
sort of organisations maybe sometimes
startups as well whose whole businesses
rely on kind of building a single bot
right so in the mix team of things that
doesn't seem a lot but if you think
about it it's sort of a kind of new a
way of probably reaching out to your
users and so the next sort of our are
probably hopefully less than an hour
will walk through a few scenarios there
are sort of the top sort of trends or
top asks from our customers so the
people the customers that I've been
working with they are thinking about
these scenarios quite a lot and it's
sort of one of the most you know
requested scenarios irrespective of if
it's natural language processing if it's
around managing your knowledge bases and
you know moving ahead from just doing
basic FAQ stuff but thinking about how
you can use some of the core services
that help you kind of do indexing on in
large larger datasets as well at the
same time think about how can you
implement you know things like that
channel or things like sort of doing a
proper handoff to a human be it partial
or be it complete as well so hopefully
it'll give you a bit of a walkthrough
around what's the thinking for behind
each of these scenarios and whether they
fit the requirements that you may have
and also do a bit of a code work
walkthrough as well as we look into
these different scenarios as well so
just before I kind of kick things off
and get a bit of sense of you know what
the audience is like so how many feels
kind of built BOTS already before coming
to this session okay a few of you and
how many of you have built BOTS
on the Microsoft bot framework okay
three or four so again the content is
quite dynamic for me so what I'll do is
I'll kick it off with a little bit of
introduction so the first 10-15 minutes
will be a bit of that
so hopefully some of you who've already
used the bots framework it won't be a
lot of overlap so we'll walk through a
little bit of that and then we look into
some of these more complex scenarios
again if you've got any questions feel
free to just pop them during the session
or we'll have at least 5 to 10 minutes
towards the end as well or just during
the conference just feel free to ask me
anything you want and what I've done is
I've uploaded all the demos and source
code up on this link it's just a github
repo what I'll be doing is I'll be
putting all my stuff from Friday session
as well there so if you want to maybe
you know book market or just started or
whatever just to keep a track of things
you know it's a good place to begin with
so yeah let's kick off with just
understanding you know how we're
changing the dynamics of kind of
interacting with applications around us
right and it's not just about bots in
general it's also about thinking how
you're delivering apps through newer
form factors like you know mixed reality
or virtual reality and so forth right
where the concept of sort of more
personal computing is sort of you know
it's closer to the goal of where it's
sort of wanting to be at and it's it's
more than just being able to understand
a conversation it's about understanding
how you can not just process it analyze
it but also combine it with things like
you know speech analysis or or think
about knowledge analysis or think about
just sort of maintaining States across
these different interfaces so that it
gives you a much more personalized
experience each time you sort of reach
out these Web Services we tried that
once before as well and it was a huge
success as most of you would remember it
but the primary reason of us sort of
coming to the stage we were thinking
about conversations or or BOTS in
general a lot more is because these
channels are are quite relevant out
there so how many in the room use at
least two of these channels or two of
these apps anyone uses for anyone uses
all of them whatsapp anyone uses that
all of them I was at a conference last
week and I think about five people had
all those apps and they used them so
clearly they were very social just not
interested I'm just kidding but
effectively one of the things is that
you know you
got this ubiquitous sort of operation
around you know being able to
communicate with across different
channels but at the same time what
you're noticing is that a certain
element of a fatigue is sort of you know
coming into play as well the name of the
outfit is running out of my head but
there's an outfit out in America that
that's sort of a did a bit of a survey
with a whole bunch of users and what
they found was about 51% of them hadn't
downloaded a new app in the last three
months and about 30% of them hadn't
download a new app in the last six
months so if you put that in your
context and think about how many useful
apps you've downloaded in the last three
months that you use every day or at
least once a week it's it's fairly low
so and the problem is not so much about
the apps themselves and I think search
ability is a big factor there as well
and I think that's one thing that we
have to solve for BOTS as well on how we
can kind of reach out or find the latest
and the greatest BOTS that are out there
are sort of helping us do tasks or
achieve workflows and stuff at the same
time you you look at sort of how
technologies are converging in a way
where you've got platforms and tools
that sort of help you accelerate the
development of and and be able to reach
your users faster than ever before
especially for BOTS itself and a big
part of that is how you can kind of
easily access manage deliver data as
well across those platforms and the way
we kind of see it as Microsoft is is
conversation as a platform has people
being at the heart and center of it
where you know irrespective of where you
are available or what channel you're on
you have this flexibility of getting an
information to you across those channels
we're working with a big customer New
Zealand who's sort of thinking about
this as a way of having a conversation
interface wherever the user is so you
might get a notification through SMS or
through Skype or somewhere else
irrespective of where you are and
whatever your preferred channels of
communications is at the same time you
look at digital assistants which
effectively become your new stores that
help you a little bit around how you can
discover those apps and of course boss
being kind of the new apps that sort of
help you you know complete tasks or or
or get the thing done that you're sort
of looking to achieve and this is a
typical slide that you will see across
our documentation as well
where it's sort of a way of
understanding how the framework itself
works right so on the towards the
right-hand side you've got the channels
these not all the channels there are
more channels as well including the most
recent one we announced was Cortana so
effectively you can kind of use all
those channels and and the biggest part
or the biggest reason for us kind of
having so many channels or giving you
the capability of accessing those is
because whenever we build BOTS for any
of our services we ended up hiring a
developer for each of those are
maintaining the webservice connection
endpoints to each of those channels as
well so effectively instead of sort of
hiring a developer on each of your teams
you've got a bit of a connector service
in the middle that sort of managers you
know the connection with each of those
canvases themselves and on top of that
the framework is a little bit it's it's
quite pluggable as well where you can
sort of use some of the more interesting
you know cognitive intelligence services
like natural language processing or
translation or or speed services or
knowledge services and stuff so it sort
of makes it a lot more easier for your
kind of bot to interact with some of
those intelligence services that sort of
help you have a much better conversation
as well but at the heart and center of
it what you're writing is just a web
service if you're used to writing
c-sharp or node apps or just any other
app itself if you're used to writing and
you've in Web Services in each of those
you know languages it's actually quite
easy so we support dotnet c-sharp and
and node through the platform and again
the community is very strong so if you
go online I think there's someone built
a SDK for PHP someone's made it for Ruby
as well so if you do a bit of a search
you know the community is really really
active in that space and the best part
has since it's a web service you can
connect to any API any internal systems
you may have databases you know storage
mechanisms the whole work so you can
actually do everything by yourself and
the best part is the SDKs themselves are
our fully open source the github
repository is very popular as well so if
you've got issues you know the the
engineering team is constantly looking
at that as well but if I have summarize
everything I just said in the last
five seven minutes the answer that is
just the bots are effectively just apps
which are delivering you know
experiences in a different way as
opposed to the way we are used to
for some people bots is you know all
about AI for some other people you know
bots are just natural language or some
people feel it's just about messaging
just exchange of messages between the
user and whatever your web service is
supposed to achieve and I guess what
I'll do is I'll just show you a couple
of boss that I use I'm one of the bots
that are reused quite regularly and the
other one that I sort of made as a demo
for kind of enterprise scenarios and the
one that I'm used to using a lot is
called sky scanner if you haven't heard
of them before it's just a company based
out of the UK and I use it a lot to sort
of just find you know the best rates
that are available online I might not
book through them but it's a good way of
just quickly I don't define you know
where you want to fly what are the price
ranges and stuff so for example if I'm
traveling off to Seattle in a week I
just give it a message over there and
the good thing is that since it's on
skype I can either wait for a response
or I can go off and have a chat with
other people as well and in this case
you can see the use of rich cards as
well so it's not just a text
conversation it's able to detect that it
was able to store my state that I am
from Auckland it's called that
information and there it's able to
detect that in a week from today means
Wednesday 23rd of August so I'll set
that up in there and I'll say that hey I
want to come back on the 30th of August
and once I put that information in there
it goes off does a quick search just
like how a typical website would but in
this case all the results are available
to me right in front of me and what is
good is that the results a lot more
visual a lot more easier to understand I
can scroll through sorry I can scroll
through the different options that I've
got available and since I'm used to in
New Zealand I can just click on book and
it will then go off call the browser for
me and and I can complete my transaction
from that point on
so everything's filled in for me if I
want I can use that if I want I can
completely ignore it as well so that's
how cool that is another one that I sort
of so this is more so this scenario is
more of a kind
yuuma base scenario but if you think
about the way you know enterprise is
sort of interact I built this little
demo which is called a pots unlimited
sales assistant now this is again
available across two channels for now
one is through the browser itself which
has just gone postal there we go
so through teams I can just start off by
you know every time I want to kick off a
conversation I can say hey I can say
help I can say or I can directly ask
whatever I'm looking for and it comes
back to me with the welcome message
saying hey this is what I can do it
gives me some interactive buttons to
play with as well now let me see what
the experience looks like on the browser
because I've done I've added an extra
sort of feature to it as well where I
can perhaps use voice to kind of
interact with the board itself so I can
start off by saying can you help me
prepare all right let's try once more
all right let me try once more can you
help me prepare there we go so what
happened behind the scenes was that it
takes my voice sample sends it off to
Bing speech API from where it then goes
off speech to text gives the response
back and then posts us back to the user
I think the volumes not working with the
idea is that it sort of grabs whatever
text is coming through as well through
through the voice and and then sort of
transmits out as well so it becomes a
much more interactive experience as
opposed to just texting and typing in
and receiving text responses so it's a
lot more easier that way and the best
part is you can then sort of look in how
you can integrate things like you know
using carousels for example maybe if I
want to email someone I can directly
click on the hard link it goes off and
kicks off my mail app for me that I can
quickly go in on you know fire them an
email straight away so it's it's
actually quite easy to go through this
cool so that's a quick intro on you know
what what bots are what some good
experiences are and how you can sort of
integrate them into whatever you're
building
and with the Microsoft bot framework
what we've done is effectively giving
you this whole capability of using a SDK
that sort of helps you along the way of
integrating with the platform itself you
can even store a state if you want we've
got a state API built into it and again
you can use the one that we provide
which is good for dev test scenarios but
if you're going large at scale then
perhaps you know you can use replace it
with Redis replace it with I don't know
document DB cosmos Mongo whatever you
sort of prefer and then with the
connector service again reach the users
wherever they are and one more
interesting logo in there is this one
over here which I don't know what it
looks like but it's the logo for Louis
so it's the language understanding
Intelligence Service and the scenario
for that is is the most typical scenario
that we sort of or that I usually hear a
lot is to help this scenario which is
quite relevant and sort of both the
consumer and sort of Enterprise
scenarios itself and the way a typical
conversation sort of takes place is
where you think about you know where do
you kick off the conversation with maybe
you start off with the greeting and and
then you kind of complete a transaction
to achieve what you're trying to achieve
over there for example in this case you
start off by creating the user and from
that point on you sort of go down
further the different sets of dialogues
so depending on the type of prompts you
have you kind of continue to complete
your your your conversation there so you
start off with the greeting then you use
whatever the user types in as a way of
branching into the appropriate dialogue
so for example if I'm looking if I'm
having an issue where I'm not able to
you know connect to a web page maybe
based on those keywords I'll go off and
either search the knowledge base that
I've got or maybe connect that person
with a human who can actually answer
that question more appropriately and
similarly you know I start off by
prompting for a response over there as
you can see and and from there I grab
that information which in this case was
that hey I need working ASAP which
effectively helps us extract that
perhaps ASAP means that it's a higher
priority so I'll go off and create a new
ticket with this number with high
priority and and at the end of it if the
users happy I can collect
sentiment and store it as well which
helps me kind of retrain my model
depending on the responses I get from
the user or alternatively if the users
not very happy maybe I can connect them
with a human or or something else and
Lewis plays a big part in this so let's
let's go off and have a look at Lewis
has anyone used Lewis before in this
room okay
few people I think half of them were
just Microsoft II so that doesn't count
but let's quickly switch over to Lewis
so if you haven't heard of Lewis before
Lewis is a great person know helps you
you know just identify different things
that your users are looking for and to
begin with you've got this little
initial dashboard that helps you
understand what your users asking about
the most and you can get into that
information as well which is quite
useful to begin with and then there is
this concept of intense so think of
intense as maybe your methods right so
if I am looking to send a message to
someone send message is probably the
method that I'm sort of resorting to you
do too if you look in the help desk
sorry oh maybe I want to explore the
knowledge base or maybe I'm looking for
help so for help if I'm writing code
I'll maybe call a method which is called
help which whereas in this case what I'm
doing is I'm just creating those intense
based on what the users trying to
achieve as simple as that nothing
complex there so I give it a few uh
trances and our trenches are nothing but
just a sentence that sort of explains
what I'm trying to do so if you look at
this intent called submit ticket I can
go in there and I can have a look at the
different utterances that I've fed into
the system which then goes off and uses
that as a way of training the model
behind the scenes what you also see is
that a lot of those words are kind of
marked by entities as well the entities
are nothing but just parameters or
variables within your utterances that
help you kind of give a better answer
back to the user depending on what
they're trying to achieve
so within entities in this case what
we've got is you can have you know
different types of entities you can have
simple entities you can have composite
hierarchical and again a lot of detail
is available in the docs as well but for
now what I've used
is just a list type a simple list type
to narrow down my search or narrow down
the the cause of an issue so in this
case I've got a category which has got a
few lists the first one is security
because I've got four domains in my IT
department security networking software
and hardware and depending on that
iTriage it to a specific department or
specific set of people and I can then
give it some synonyms if I want and that
will sort of help me further reroute the
sort of problem or the the intent that
that was hit by the user and if I want I
can extend that functionality by using
some of the pre-built domains that are
that we've got they're pre-built intense
pre-built entities so I don't have to
start from scratch and again you've got
a whole bunch of feature sets as well
that I won't spend a whole lot of time
on it but effectively the idea is that
you can use these features to kind of
feed back into the model that's training
behind the scenes so that even though
it's not related to anything that's
specifically inside your intent or
entities but it sort of helps us kind of
classify the the intents or the
utterances a lot better I can then go
off do a bit of training testing and
publish it and the best part is that it
comes off as a web service so you can
literally hit the end point with a
question so in this case I'll just zoom
out go to the address bar and type in my
query and I'll say hey I want to reset
my password and as you can see I receive
a response which is you know Jason and
effectively from that point on I can
look at the intent and in this case the
intent was submit a ticket I get the
confidence behind that intent or behind
the recommendation of that intent and
then from that point on I can go off and
have a look at hey looks like people are
looking to reset and it's to do with
passwords and both of them seem to be
part of this security entity so it gives
me a way of feeding this information
maybe back to my knowledge base search
or maybe to a human who can then go off
and be very specific in that domain
itself so it's quite useful to kind of
filter down results and grab extract the
relevant bits out of it
freak me out of it because the time is
incorrect on my laptop we're running out
of time no we're not okay
so effectively so we've seen a quick
demo on on what that looks like I think
I've just kept a few slides they're
awesome so one more demo before we go
ahead was around how do we construct so
how do we connect Luis with our code
effectively right so if you look at this
for example I'll just start off with the
Luis demo itself where what we're doing
is we're starting off with the messages
controller so the way this this is a
simple c-sharp project so how many of
you are sort of dotnet developers in the
room and no developers okay just one
just one that's fine that's fine
you made it that's fine because half of
my demos at dotnet and half of them a
note so hopefully everyone stays excited
so alright so let's begin with with
dotnet itself so if I if I show you my
solution Explorer it's nothing but just
a simple web service if you build a VIP
a project before it's just exactly that
I've got a controller which is the entry
point in this case it's the messages
controller with that the framework hits
and then from that point on I've got a
post method here which effectively in
this case is pushing everything that it
receives if it's a message type first of
all it then pushes it directly to the
root dialog and the root dialer kind of
acts like my central point of you know
routing stuff to different dialogues so
and I'll explain that concept in a
minute as well but if I go to my root
dialog what you'll notice it is that
whenever I receive a message I might
then be forwarding on to Luis and and
the reason why I don't have Luis on the
root dialog is that sometimes when you
know source code gets really large or
you have mounted multiple domains you
might want to have Louis for your root
dialogue and then you have your sub
Louis models for you know specific
domains and stuff so it becomes quite
interesting as he sort of start
extending the scope of your of your
board or your or your Louis model itself
and then let's have a look at the Louis
dialogue and and see what it looks like
so to begin with you'll notice a couple
of things again all the dialogues are
see realized and I'll explain that
explain what it means in a little bit as
well but I've given it my lewis you know
i d-- and i've given it the subscription
key as well so that it knows what model
to hit and what is interesting is that
whenever i call this class over here it
goes off makes a call to louis grabs the
intense and entities and depending on
what intent i hit on i then basically
route to that method specifically so in
my case if I was looking to submit a
ticket
I would directly come to this intent
over here which then talks to my method
over here so it's just as simple as that
nothing complex here so let's go off and
just try and see if we can run a quick
demo so I just hit run and I think I'm
using the wrong end point let's do a
connect so there we go as you can see I
start off at the welcome message as well
and the reason I'm getting a velcome
message which is over here is because if
I go back to my code and head back to
the messages controller you'll notice
that below the post method we've got the
system messages and and those are sort
of D mocked by delete user data a
conversation update and so on and and
the way we figure out what it actually
is is by going inside the emulator and
within the emulator you'll find this
conversation update that was triggered
off back to the bot and in this case you
can clearly see that there was a new
member added which in this case was just
my default user because that's how the
emulator sort of classifies users and
then from that point on I can go off and
say that if there's a conversation
update and if they were new members
added which was a real person and not
the bot itself because that's also a
conversation update when a bot enters a
conversation I basically go off and send
a welcome message
hey I'm your helpdesk but this is what I
can do and I just reply back that's all
I do so this is a nice way of kind of
catching those scenarios as well and it
gives a much nicer experience when you
think about the US side of it so I can
go off and say hey maybe I want to reset
my password just the same one as I had
on the browser and so once I do that I
hit the breakpoint which then transfers
me from the root dialogue to the Luas
dialogue and if I press run again as you
can see it goes back and hits the submit
method over here so pretty easy to
understand I want to reset my password
the top intent was submitted it sits
here and then from there on I can then
basically just answer whatever the
response I've created there so if I go
back to my emulator again this demo was
just just the demo we'll go into the
complex and our isn't a bit as well so
we've just seen that demo and let's head
off to the slide so hopefully as you
would have noticed from the from the
demos itself it's nothing different to
the way we've been developing websites
or mobile apps and stuff because
effectively you have the route or the
home screen or you have the maybe the
triage dialog or the search page and
then you have kind of the specific
answer that you want to give to a user
or the specific page that you want to
serve your user as well so again it's
quite organic the skills are completely
transferable in the sense of you know
having dialogues for BOTS as opposed to
screens for your apps so that's
effectively what what the reason behind
that is and again when you think about
NLP just just don't overdo it because if
you end up overdoing it it's really hard
to keep track of what your users are
actually you know wanting to get out of
the board itself and a great place to
start for knowledgebase
um kind of scenarios is usually FAQ so
when someone says hey I want to reset my
password instead of creating a workflow
which is probably not the best thing
because none of those channels are
encrypted
none of those conversational canvases
are channeling
that's so effectively you don't want to
be exchanging you know passwords and
stuff and to sort of answer that I'll
just show you a quick integration
between there where is it the root dot
the Lewis dialogue over here and the Q&amp;amp;A
maker so if you haven't heard of Q&amp;amp;A
maker it's a very easy nice and easy way
of kind of using existing FAQ assets be
it on a website be it on a PDF or Excel
or somewhere else and just pop in the
URL and you can get all the information
here which sort of sort of talks to the
point that I made initially how
pluggable the whole platform is you can
just plug these bits and pieces of
services that sort of make sense for
that scenario that you're building right
so in this case like if I want I can go
off and add new knowledge bases as well
so I can go off and I can just feed in
that URL or I can upload files with
question-answer pairs and it's sort of
extract it extracts that out for me in
my case I've got a single
question-and-answer pair just to sort of
show the the sort of the tech itself but
if I go back to my model here what
you'll notice is that whenever I hit nun
or an empty intent I can then basically
say that hey I don't understand your
query but let me go off and have a look
at the knowledgebase and with the help
of the Q&amp;amp;A maker SDK all I have to do is
just feed it the subscription key the
knowledgebase ID and if in case I don't
find an answer this is what it is and
then I can basically sort of suggest
these parameters where I can say I'm
just looking for top one answer and I'm
looking for an answer that if the Q&amp;amp;A
maker is 40% confident with that answer
just give it back to the user if it's
less than that then say sorry I couldn't
find anything so that's basically what
those two numbers mean at the end so
let's just weakly try run this as well
and I don't want to spend a whole lot of
time on this so once I've done that I
just do a quick refresh and I can say
hey by the way who are you
even we just set it on the welcome
message I just wanted to try it again
press f5 oh my god breakpoints every way
there we go so as you can see it went
off at the knowledge base and I just
grabbed the answer from that Q&amp;amp;A maker
so I don't do anything fancy there all
it was doing is making a call to the Q&amp;amp;A
maker service that I showed you in the
previous browser window and it craps
that out for me cool so let's start the
service and quickly head back to my
slides awesome
so Q&amp;amp;A maker is awesome for scenarios
where you've got you know very specific
Q&amp;amp;A pairs maybe if you're going up to
say five thousand question five thousand
Q&amp;amp;A pairs or seven thousand Kuna pairs
it works awesome with all of that it
does a little bit of an LP on top as
well but not a whole lot but what if
you've got you know huge amounts of data
and the data that's not structured may
be data is you know sitting in PDFs or
Word documents and stuff so how do you
manage those scenarios and and if you've
got those scenarios available right you
might want to do a little bit of fuzzy
search as well and then you get into the
concepts of how you can guide the user
to an answer by filtering down based on
specific maybe structured columns or
unstructured information or just
searching across you know different
databases that you've already
accumulated data over and and the best
part is maybe sometimes you just want to
use natural language and the easiest way
to sort of do it is or or the one of the
scenarios that I've used is or that
we've used with customers is to kind of
use a combination of as a search with
any database technology so you can
perhaps use Azure search which is such
as a service that sits in Asia but
allows you to connect with and index any
any data stores so it could be a sequel
dB in my case I've used cosmos you could
use you know blob storages for files and
word docs and PDFs and stuff or you
could perhaps use you know other storage
systems as well maybe if your knowledge
base is sitting in ServiceNow or sitting
in some Dynamics CRM Salesforce wherever
else but to top at that if you want to
reduce the friction to entry you can use
logic apps which has got connectors for
Salesforce and dynamics and stuff and
just make connections from there and
quickly search knowledgebase is sitting
in those CRM systems
while which makes it a lot more easier
to manage so without further ado let's
look into the next demo now again this
demo is based on node but again it's it
should be quite readable it won't be set
bad let me head off to this place and
let me show you my asha portal so this
is my basic azure portal where well
actually my favorite feature is to be
able to change the colors of the portal
and i can do it all day if you haven't
tried it before I recommend you giving
it a go so again so let's let's start
off with our database itself so in my
case I've got a cosmos DB which has got
a bunch of JSON documents which just
over there document explorer
I've just got I think about 10-12
documents to begin with for demo
purposes and again there's nothing fancy
there it's a little bit there's it's got
a bit of structure it's got a title it's
got a category and it's got a whole
bunch of text one thing that you'll
notice is that this text is marked down
friendly so which works really well with
the board framework because the
rendering of that is supported through
our web chat and stuff that you can
easily use and I think it's supported on
most of the channels as well so it's
actually pretty handy so that's my
database nothing fancy there and on top
of that I've connected it with Azure
search and with Azure search what I've
got is basically an index let me see if
I can zoom in so I've got an index there
which is called knowledge base index
which then opens up here and I've got a
few fields that it's automatically
grabbed from the document DB and what
you'll also notice is that for each of
those I guess fields if you will I've
kind of selected a few of those
parameters right so the most important
one in my case for example was the
category because I just don't want to
make it searchable but I also want to
make it faster table as well where
effectively I'm helping the user guide
to a result where sometimes you know
you've got a software issue but you
don't know what
exactly is so you want to triage through
the categories and find out what exactly
your problem is because maybe sometimes
the problem with search is that the
users don't know how to search or they
don't know what they're looking for so
again it's a very interesting way of
kind of giving it a basic query basic
index so that can then clear you over
your data so it's it's quite handy that
way and the best part is that if I go
back to my code and I show you my search
client it's effectively a web service so
all I'm doing in this case is making a
call to my Ash's Search API endpoint and
I'm just giving it the query the
parameters that are you know responsible
for that and whenever there is a receive
a result I just push it back to whoever
called that specific function and note
that's all there is to it and then from
that point on I can use Louis to detect
if I'm looking to explore knowledge
bases and if I am I can then find out
the categories I can make a call to the
Azure search client that I've built here
as well so it's it's quite easy to kind
of then have these different modules
connect up to the same service itself so
it becomes a lot more easier so let's
have a quick look let me just run this
code and let's go to the emulator and I
think this one is running on seven eight
let's see there we go so again similar
experience where I was looking for a
conversation update and whenever there's
a conversation update which means as a
new user added I then grab that
information and maybe I want to start
off by exploring the knowledge base
and as you can see I've got different
you know categories and under each
category I've got a certain you know
about three different resources and I
don't know if you notice but for a
couple of seconds there was a typing
command as well that was showing up so
that's an another interesting way of
saying that hey user there's nothing
wrong with my service I am making a call
to a web service so I'll send you a
typing instance which is just one over
here so that it's just it's that easy
it's just as saying session godsend
typing and the framework handles it for
you you can go off and grab more details
on how to you know connect to a remote
desktop service on Windows 10 and and
and there are is all the information
very easy for me to use and then again
if you want to take it a a bit more
further I can just go off and type let
me just zoom in search about Windows so
what I've done now is I've triggered a
function in node which effectively is
looking for search about as the keywords
and I can just give it a name so again
it's it's it's quite transactional it's
not you know doing any fancy NLP on top
but it sort of is quite common to about
the way people sort of talk about when
they're looking for you know specific
things in your knowledge base so the way
that works is for example if I just do a
quick search no there we go so in this
method over here as you can see I've got
this triggered action on this function
which effectively is looking for search
about and whenever it receives that
trigger it then goes off and first of
all sense of a typing update back to the
user and then from there on a Colma as a
search with whatever the text was after
search about and it does a fuzzy search
on top of the azure search instance that
I had in Asia does that all make sense
pretty easy it's just a couple lines of
code and that's that's all there is to
it
so again that's one of the things that
you could handle through Lewis as well
where you could say whenever users say
something that's related to that
specific thing it will then over time
learn all the different synonyms and
stuff as well
in my case I've kept it quite specific
because you could see that's one of the
features where this is what I can do and
one of them is search about X because
that's a power user looking for a very
specific information but if you want to
make it easier you know experience then
you can just use Louis to kind of find
out what the user is actually looking to
do because that's one more thing that's
quite important to think about and I
think that's a great question because
when you're building BOTS you have to
not just cater to people you're using
BOTS for the first time which is the
most important but also the power uses
because they are looking to get to the
answer that they want extremely quickly
as well and the other part is the way
you handle you know learning for the
bots again I like to sometimes call it
as supervised learning but that's not
the right term if you went to the
keynote this morning unsupervised and
supervised don't don't confuse it with
that it's just a way of sort of learning
it's just a way of sort of helping the
bot learn or maybe just improving
something as basic as the search index
course right if you're doing indexing
and if you want to recommend a search
result versus the other it is a great
way of doing it and the best way to
achieve it is for example you can have a
portal where your internal users can go
and test out the bot or you've got an
agent who is looking at all the
conversations but it's not able to you
know give the best answers to the user
so the agent can go in step in and
suggest the user what to type and the
way we sort of adapt to that and again
this is one of the most popular asks
from the customers as well where they're
like how can we have a back-channel
communication between the bot and maybe
a web interface it's quite classic when
it
two things like hey I am a bank and I
have a very secured authenticated space
for my you know banking information how
can I add a bot there where the user
wouldn't have to log into the bot as
well separately because you just want to
do a back-channel transfer of tokens
between the bot and the website itself
so this stuff becomes quite interesting
in that scenario nothing that's in there
so effectively it's just a way of saying
hey I am doing something on the website
and I want the bot to know about what
I'm doing as well just to get some more
context around it so it's quite standard
so let's head back into the code as well
and see how we implement that so what
I've done in my case is I'll just keep
this on just you know if things go bad
I'll just keep the inspect element on
but effectively what I've got here is a
simple chat window with some
recommendations on the webpage itself so
what I'll do now is as you can see I've
got a velcome message there and in that
case I'll say hey my Windows machine is
not turning on let's just let's just say
that and hopefully what should happen
now is whoops that's not what I wanted
it's still learning early days okay so
let's try something else
okay let's just use one of the sample
ones I cannot print and what happens now
is hopefully if it works properly so
what happens now is it I've got a
back-channel set up where whenever the
user types anything over here actually
let me just see if I can show you encode
it cells because it makes a lot more
easier to understand what's happening
there so this is under the submit ticket
method that I've got or the function
that I've got there so there that's the
submit ticket function and when I scroll
down to it what you'll notice is that
before I've even figured out you know
what what the workflow is going to look
like before I even send the users the
choice of hi
lo which is what I've just done in the
bot over here for example it goes off
and makes a call to as a search again
with the specific text of the query to
do a bit of a fuzzy search across the
whole knowledgebase so that's all it's
doing there and what I can do there is
for example as a supervisor on top of
you know the bot or if the bots having a
conversation with a user I can just go
off and perhaps say actually for that
question this might be a better answer
and I can click on that and behind the
scenes my UI or my website itself is
connecting back to the bot and giving
that answer back to the user and the way
it's doing that is again quite simple
it's just a little bit of script here
which effectively is keeping a track of
the events that are coming through from
the bot itself so for example in this
case what happens is I receive a bunch
of search results over here and what I
do then is I kick off event whenever
someone clicks on any of the h3 element
tags and then from there on I say that
basically the user in this case is
looking for more details for the
specific event which has X Y Zed heading
name or the question name so that that's
all there is to it and then when it
comes back to me on on the bot side
itself I just go up and fire off an
event listener which is just over here
which effectively is saying hey whenever
the event name is show details off which
is what I showed you in the previous
file
I'll just go off and make a fresh as a
search query and I'll filter down the
results based on the title and once I
receive a response I'll just pass it
back to user as text that's it that's it
so it's it's literally that and at the
end of it what I'm doing is I'm just
doing bot dots end which is just a way
of sending a message to the user without
spoiling the stack of it and and and and
the user receives that response and it's
probably a better experience of kind of
giving that supervised answers back to
users so that's how sort of how the
back-channel stuff works
let's see how cool and now I guess the
most popular one which which is quite
relevant in a lot of scenarios is is how
do you hand off to a human right and
it's it's quite important for anyone
who's doing stuff with consumers because
you want to make sure that you're
delivering the best experience possible
again if it's an easy way of of
delivering something then you can easily
use you know us the boss who wants those
questions itself but when it comes to
kind of handling complex scenarios
either you could do what I did in the
previous demo by having this batch on
support' between a portal where the CSR
agent can see all the columns that are
happening between BOTS and users and
they can step in whenever they want to
and and and they can sort of supervise
the whole conversation that's happening
throughout or they could do a proper
full you know sort of improved
escalation path where you could
completely hand off to a user where
perhaps you're not happy with the
response or you know you've got a lower
sentiment saying that hey it doesn't
look like you answered my question
properly so how do you handle that so in
that case you can actually do a proper
handoff to a human who can then go off
and start answering questions on the
bots behalf or or as the human itself
and again this is a little bit more
complex and I'll try to spend a couple
moments on this to explain what it is
but again the whole thing is documented
as well if you go back to the github
side I'll put a couple of links in there
as well that you can sort of read a bit
more about it but effectively what's
happening here is that you've got a
provider which sort of is the one that
kind of builds a queue of the users that
are waiting for you know agents behind
the scenes so if I'm a user I'm waiting
in the queue the provider maintains the
state for it so in my case or in my demo
and the stuff that I've published on
github as well it's not persisting that
information but in your case if you want
you can just sniff out all the
information from there persisted
somewhere and and be able to kind of
maintain a proper of stateful for the
conversation itself the other one that's
quite interesting is sort of the router
which kind of manages the way you
communicate between the bot and the user
and the agent so it sort of is the
gatekeeper or the middleware that sort
of decides which message needs to go to
the agent or the user from the border so
that's sort of the router itself and
command over there the commands sort of
control or whatever you want to call it
that's where you sort of handle the
interaction between the agent and the
bot and it also gives you a way of kind
of intercepting messages from agents and
that are that are going back tightly to
the user itself now what is also
interesting is that the provider over
here it maintains sort of state fodder
for the user as well where it's able to
understand if the user is connected to
the bot itself if the user is connecting
to get connected to the agent or if the
user is connected to the agent so that's
how it sort of works so it's sort of
maintaining those three states as well
and I'll show you that in the next demo
cool so let's go off and have a look at
what I've got here in this case as as
sort of remember from the explanation
that I was giving you earlier I've got
these three sort of files or functions
or whatever you want to call it which
effectively maintains you know whatever
I was talking about in the in the in the
previous slide where if you start off in
this case with the router itself it
basically looks at the message and then
looks at the type of message is this
message for an agent or if it's for the
user or sorry if it's from the agent or
if it's from the user and if it is from
the user in this case I'll then go off
and look at the myth the function that
handles that for me over there so in
this case I've got in a route user
message and I'll see if this user or if
this user is connected to the bot and if
it is connected to the bot just carry on
the conversation as you typically would
if it's waiting for an agent
then you go off and say hey I'll try and
find you the next available agent please
wait and someone will respond you you
are number X in the row or whatever and
the last one is if it's connected to the
agent then it basically does a send
command off to the agent itself and the
text of the message is affected with
text that was sent by the user does it
all make sense
cool awesome so once I've done that and
as you can see I'm maintaining that sort
of information therein in the router
itself the next one was provider now
again I don't want to cover a whole or
detail in this because again it's it's a
lot of code that I've already talked
about a lot but effectively this is just
a place where it sort of maintains a
state of whether the board is connected
to do whether the user is connected to
the board or if it's connected to an
agent or if it's waiting for an agent
and similarly in the command center
itself this is a great place to kind of
maintain or look at how the agent is
talking to the user and and be able to
kind of either kick off the conversation
or end the conversation with the human
agent so that's that's all there is to
it nothing nothing fancy cool and the
way I handle that is again back to my
app is I haven't done a great job of
cascading the code down but it was right
at the bottom if I scroll down so over
here what I'm doing is I'm setting up a
router I'm setting up a command center
and and from that point on I just carry
out a conversation by saying hey bot bot
framework or the bot builder SDK make
sure you use these two middle ways as
well and when you do if the user types
something similar to wack agent login
then you trigger the agent login and if
someone wants to if someone as a human
as a user wants to connect to an agent
you then trigger that off by sort of
doing a handoff to human trigger and
I'll show you that in just a minute what
I mean by that so let me just
no come on I hope this works
all right Wow all right you can do it
there we go
so meanwhile my Explorer is having a
couple of hiccups that's fine there we
go
I just wanted to kick off a new session
so let me just restart this and I think
I'm connected over here so what I'll do
is in this window over here let me just
minimize everything else I'll carry the
conversation out as a user in this
window and I'll wait for the other
window to pop up and in this case I will
step was well connect to that and I'll
act as the human agent over here so what
we'll do now is so let's carry out the
conversation as a user to begin with and
in this case what I'll say is hey I need
to maybe reset my password it's not
typing in for some reason or there you
go oops
so I need to reset my password it goes
up and say hey is it a big problem or
not
but what I can also do is that I've got
the functionality here where I can just
type and cancel as well
and when I say cancel it gives me a
prompt saying hey do you want to cancel
this workflow that you were carrying out
and let me show you what that looks like
behind the scenes as well before I
actually kick into the other part of the
demo we're effectively what I'm doing is
when I scroll up to the submit ticket
method I've got this cancel action there
for me which basically looks for the
keywords nevermind cancel or you know
it's just got a basic reg X there and
based on that I can say hey are you sure
that you want to cancel this current
request or current workflow and the
answer is yes
you then just cancel that conversation
and then you start from scratch again so
let me let me go back and show you maybe
I want to reset my password and in this
case I'll type ASAP so what this will
help do is Louis behind the scenes is
able to understand that hey I'm looking
to reset my password which is under
security but because I've got ASAP in
there it says the priority is high
already because that information is fed
to it and and Louis was able to
recognize that information so I'll say
yup that sounds good and it then
basically gives me a card saying awesome
your ticket number is X and can you give
me some feedback and I'll say hey I did
not like your response just because I
want to play with it so it gives me sad
and it says hey looks like you're not
very satisfied do you want me to
escalate this with an actual person and
you say yes and then you get a prompt
saying cool let me connect you with the
next available human agent and on the
other chat window what I'll do is I'll
go off and log in as agent or as a CSR
agent or whoever else and then it says
hey looks like there's one person
waiting in the queue and I'll say a cool
let's connect and then it says that
you're connected to the user on the
other hand it says hey you're connected
to a human agent
let's talk and it's like hey I really
want to reset my password say it's
awesome let's do it reset your password
and I'll say cool I've just sent you an
email with details cool
so I've done that it goes off saying
that and the users like awesome thanks
and then I can go back to the agent and
say resume back the conversation between
the boat and the user and there you go
as you can see I'm back to talking to
the board again and to do that I was
just using those three libraries which
were then basically routing every single
message between the human and sorry the
the user and the human agent which I
sort of explained in the previous parts
so again with that what I've also showed
you is the capability of sniffing the
text or just reading the text whenever
someone sends it to you and doing
sentiment analysis on top as well I
don't have a whole heap of fan to talk
about it but again if you go to
cognitive services you'll find all that
information there as well so in summary
right and I'm going to understand is the
last session in summary what what
effectively BOTS are their new apps but
they're also a new interface that allow
you to be a bit more personal and have
lot more natural interactions with the
user themselves so it gives us a proper
way of you know having conversations
with the user where you eat either first
of all I'm meeting the users where they
already are or you're able to sort of
give them access to information that
feels a lot more natural to communicate
with and again this sort of becomes the
the core of architecture as well when
you think about it that I've talked
about already but a couple of takeaways
that I sort of would want to you know
finish with is around how we're changing
a little bit around the way we sort of
deliver apps today you know think about
everything being stateless because
everything that I've done so far my
bought wasn't maintaining any state
doesn't have to and if it needs to
maintain a state maybe to store it in
some database somewhere but when you
talk about a session it doesn't care
about it because the whole stack is
maintained by the framework itself using
conversation references and stuff so you
can go further deep into it but it's
really really interesting the way it's
all done again it's scalable right it's
just a web service that doesn't need to
maintain a state for the session so you
can scale it as much as you want and
again it can become intelligent if you
use any of the cognitive services as
well it doesn't have to but you've got
the pluggable option of doing that and
I've shown you that with Q&amp;amp;A maker with
sentiment analysis as well and if you
want you can plug in things like vision
and stuff as well or speech even and
what we talked about was doing simple
FAQ stuff with Q&amp;amp;A maker it's great for
prototyping if you've got some ideas and
if you want to validate that and see if
people are interested in that it's a
great place to start with zero coding
effort if you want to extend that
knowledge base and you've got really
complex unstructured documents then you
know cosmos DB and n search is the good
way to go or just as a Surgeon General
with any sort of document store
back-channel is a great way of sort of
being able to communicate outside the
board interface or being able to pass or
exchange tokens or events or information
between the user that's already between
the website that perhaps your board is
being hosted on or and and the bot
itself without the user kind of you know
having to re-enter that information in
your board itself and of course you know
we talked about the handoff to human
agents so it's pretty exciting the sort
of capability and the plug ability of
the framework itself one thing that I
did not cover was the iron City and the
reason I've put it on the slide is
because it's just a web service so there
are a whole lot more sessions on that
that you can go watch and again if you
think about it as just a web service all
the dev practices remain the same and
again what we've done is we've I think
the guys are in the engineering team had
done a really good job of sort of doing
an overhaul with documentation as well
so if you want to learn about you know
doing anything around the stuff that I
just demoed a whole lot of documentation
is available there as well
and yeah so a lot of both sessions at at
NDC as well so I've just done that one
over here
but as and Jordan are doing a session
tomorrow again it's a pretty cool Sonata
that they're working on I don't want to
give away a lot but if you want to sort
of do a further deep dive into you know
a couple of more scenarios then
definitely check out their session then
Nigel talks about the stuff that he's
doing by connecting his personal data
and perhaps curing a couple of problems
that he had in the past as well and
being able to keep a track of them using
bots itself and lastly if you want to
learn about you know user experience and
how how I touched a little bit around
you know how the existing UX practices
work with the bot UX itself then come
and join me on Friday again the last
session as well apart from that all the
sessions are there all the resources are
there and with that thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>