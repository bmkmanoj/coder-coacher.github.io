<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Automated UI Testing for iOS and Android Mobile Apps - Karl Krukow | Coder Coacher - Coaching Coders</title><meta content="Automated UI Testing for iOS and Android Mobile Apps - Karl Krukow - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Automated UI Testing for iOS and Android Mobile Apps - Karl Krukow</b></h2><h5 class="post__date">2016-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qF6R7R-Un1Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning it's extremely bright here
so I can really see you unless I do this
it's kind of annoying I'd like to be
able to see the faces of the audience
but oh well I guess that's what it's
it's like so welcome to the talk I want
to go back in time a bit about three
months ago I was working late and it was
I was working and I was unintentionally
working late I've been caught up in some
tasks I wanted to finish and I realized
I was late because I I got a
notification on my iPhone from the
calendar app which said that you're now
entering the block of time which I call
family time which means I'm supposed to
be home with my family
and I'm not necessarily the person who
has to structure every minute of my time
schedule so that this is a family this
is fun it's not like that but I work in
a distributed company I work at xamarin
who's now part of Microsoft so there's
over a hundred thousand people not all
of them necessarily know that I'm in a
different time zone than they are so I
block off this time slot in my camera to
make sure people don't book meetings
when I want to be my family so I was
getting this notification and I'm
realizing oh I supposed to be home now
so I better hurry up so I kind of run
off we use slack the slack app for for
chatting and work so I send out those
last messages finishing the
conversations on slack run out the door
switch over to the mail application on
the iPhone and send off the last email
and and and tie really hurry to get home
as soon as I can and I use public
transportation to get to work and get
back because I really I hate traffic
I hate being stuck in queues so I like
the fact that you can kind of get in a
bus or on a train and you can sit down
do some work and you know read a book or
relax or whatever so I was trying to get
home so I switched over to an
application we have endemic old I so
plain
which is basically it's a travel
planning app for public transportation
I'm sure you have something similar here
and it's actually a really nice app so
will tell me so how do I get from where
I am right now to where I want to go in
this case home and it knows like the
local transport system so it's it's
slightly better than like Google Maps
and I enter that I want to get home from
here and I realized this is going to be
really late like I'm gonna be very late
so I go to the message app and I I send
a message to my wife like sorry I'm
really late I miss you and the children
I'm so sorry and but I try to get home
fast and so I keep walking a bit and I I
think you know what I'm just gonna take
it sexy I really want to get home today
and you know checking its axis then in
Denmark it's like here it's not
something you automatically do it's like
ridiculously expensive so it's not like
a default thing but I decided I wanted
to do it so I switched over to the
Google Maps application to check my
location because I've been walking for a
bit and I wanted to call them and tell
them where I am
and then just when I was about to call I
I realized that last time I'd call the
taxi company I got into this queue and
they said why don't you try our new
mobile application it's a really easy
way to book and I thought yeah that's
way better than going into a queue so I
jumped over to the App Store search for
the application downloaded on the fly
got on my device and I opened it and I
was like if it puzzles like the UI was a
bit weird but I kind of figured out how
to go into the booking screen and I
tapped the booking button and I got this
boom crashed home screen and I was
really annoyed like I was late I was
trying to get home I was trying to book
a taxi and you know it was a very basic
thing I was trying to do I just got this
experience crash and then and so what do
you think I did what did I do
anyone what try it again
No
exactly that's exactly what I did I
stopped using the application I deleted
it
I went to the App Store because I was
pretty annoyed at this time and trying
to get home I told them in a public
rating one star please fix your stupid
application it doesn't even allow me to
poke a taxi which is the most basic
operation of this application and the UI
sucks you know I was upset at the time I
I don't usually I can I leave aggressive
App Store reviews but on the other hand
do you think that's unrealistic do you
think that I mean this is a true story
this actually happened is that normal
behavior yeah I mean if you think about
it think about what I've been doing just
prior to getting this experience right
how's that work I got a notification
send out message on slack switch oh it's
the email walk the bed switch over to
the travel planning app in Denmark which
is quite good realized I was going to be
late sent a message to my wife switch
over to Google Maps an awesome
application got my location I was just
about to use the phone app to call the
taxi when I decided to switch to app
store app download the app on the fly
everything smooth so far and then I got
this this experience and this is how I
felt its burn this thing so my point
with this whole story and kind of this
message here is that really users have
extremely high expectations for the
quality of their mobile experiences if
you look at every one of those apps they
have beautiful you is they have they're
really responsive and fast and have
great user interaction design and they
publish updates to these applications in
response to you know app store feedback
multiple times per month and they just
have a ton of useful features right and
that application
I'm gonna have to scan through these
animations that application that you're
building or that this taxi company is
sitting right there in between all these
world-class apps like you know snapchat
and Instagram and Facebook your app is
right there in the middle and it's
definitely going to be compared against
the world's best apps so I'm trying to
get the point over that the expectations
are really high when you screw up it
it's visibly plus publicly visible in
the app stores via the rating system and
users are pretty tough they'll do this
at the same time while there's like a
high bar there's also some unique
challenges quality of mobile is just
really hard because if you think about
it for a moment there are platforms like
iOS Android Windows and our vendors so
device vendors so how many devices are
there well there are multiple vendors
each of the vendors have multiple models
the models feature different hardware
like CPU memory screen sizes resolutions
and each of those run different versions
of the operating systems so there's just
so many combinations trying to test on
all of that can be pretty hard so one
way to to kind of constrain this problem
to make it easy is just to say you know
I'm just gonna limit myself I'll only
support you know Samsung and that the
newest version of the Samsung phone and
maybe the newest iPhone or whatever so
if you were to take this approach and
you want it to say limit yourself to you
know the 75% most popular models out
there how many devices do you think you
would need to test on to get that market
share coverage of the 75 most popular
ones
how many anyone no idea
300 it's actually less 75% well but
you're getting there you may actually be
right because this data I have is
actually probably three years old now so
it could could be worse so to get this
is us data by the way to get 75% of the
market share of the models out there you
would need to test on 134 at least 3
years ago actually there have been even
more fragmentation in the space since
then so you could be right it could be
300 now and you have this exponential
thing right where if you want to push
that 75% even higher in terms of
coverage you get this exponential growth
a number of configurations of devices so
this is this is just really tough so if
you're a QA manager what's your strategy
gonna be like you're responsible for
delivery of a mobile application are you
gonna test everything on all devices are
you gonna test all the features of all
the applications are gonna buy all these
vices are you gonna hire someone like
this extremely efficient girl I've never
seen anything like this before this
picture but no no we don't have people
but this is an example of what people
would do right they will outsource their
testing basically to fairly cheap labor
and they are specialized in you know
very efficient multi device testing I
just really love this picture but then
again you can think about like if you're
testing on what is it like 50 devices
something like that what's the chance
that you're gonna you're moving really
fast that you're gonna make a mistake
maybe actually be pretty big all right
so I think I'm getting my point across
so this is how it should feel like The
Scream right so if you're not familiar
with this picture it's actually here in
Oslo it's it's a fat monk and he
actually gave a german title to this
picture do you know what it is the
german title no it's at that
right there until on mobile apps so so
translating this it's the scream of
mobile app development and you can you
can go look that up if you don't believe
me which you probably don't this is how
people feel like really anxious so now
what what do you what do you do well I'm
gonna argue that one approach you can
take is actually to focus on automation
so if you're able to automate your tests
and as we'll see later to deploy them to
a range of different devices then you
can speed up your cycle and you can
ensure a higher quality and you can test
on a lot of devices very easily without
going to extreme measures so I want to
talk specifically about automated UI
testing now I know that there is more
definitely more to life than automated
UI testing and I know about the concept
of the testing pyramid so which says
that you should have more unit tests
then you have integration tests and you
should have more integration tests than
you have automated UI tests but I would
actually argue if you were starting from
scratch and it turns out that about
actually also 75% of mobile app
development projects they're starting
from scratch like they have no
automation at all they have no CI now if
you're starting from scratch that's 75%
of you guys here and you could you want
to get value and you can now only ride
one test well I would argue that if
you're just able to write one test
you're getting a lot more value out of
writing an end-to-end automated UI tests
or a smoke test rather than writing one
unit test and running that I think that
testing pyramid story only applies once
you have a decent test coverage and then
it tells you something about the ratio
between unit integration and UI tests
anyway just in case someone's not
familiar with the concept so automated
UI testing the idea is to have a program
a test which simulates what the user
does to an application and what does the
user do well he or she
interacts with UI controls like like
tapping you know scrolling swiping
entering text that's what he uses us to
the application now your going to
simulate that in a program so in order
to do that you need to be able to talk
about gestures like tapping and swiping
and you need to be able to talk about
views so the way we do that at least in
our tool is that we have what we call a
query language where you can specify and
you know it's this exact button that I
want to touch this exact text I want to
find and and there's kind of a nice
little DSL declarative language there
and to let you easily do that so some
examples here would be so this is the C
sharp in this case so application please
tap anything that has the text string
help as well as it's a button or it's a
text doesn't really matter just find
something with the text help or
application please tap the element E
which has the ID technical ID history
BTN history button or application please
wait for element e which has the text
Inc so this is the kind of language you
would use in a program like this to tell
the program what to do to the
application like tapping waiting for
event to occur like wait until there's
no spinner visible on the screen in
addition to these various gestures you
can also generate screenshots like I
want to see what the application looks
like just now save that to a file and
you can manage the app lifecycle so
launching stopping the application
clearing the application data so you're
starting from scratch
that's often something you need to do
during a testing cycle like completely
uninstall it install it again and start
from scratch and then some tools like
ours allow us to actually do some things
that are pretty hard to do as a human so
one example would be to simulate the GPS
location of the device so writing a test
that says given I'm in you know Oslo
Airport and I tapped the book button or
whatever
and then the next step you say now set
the location to London so you're
pretending that you're flying for
Muslims and landing and you can do that
now within you know milliseconds and
another thing you can do is actually
like very low level is basically grab an
object inside the application and start
calling methods on it this is a pretty
advanced thing not necessarily something
you need to do but it can be extremely
handy to say to speed up the test or set
the application into a specific state
all right
so that's a basic overview automated
testing so simulate a user using the
application now there are a ton of
different tools and frameworks out there
that you can use to run these and write
these UI tests so the example you saw
before is from summer and UI test which
is one of our own products which is
basically a c-sharp based API it's
cross-platform on iOS and Android so you
can write tests that are working on
Android and iOS applications and
basically you can run them you could
write these things inside any unit tests
and run them from inside Simon studio
visual studio or from the command line
if you want there's also support for a
spectral if you're familiar with that
there's the system called calabash which
is very similar except that you write in
your tests now in Ruby and you're
running them using a tool called
cucumber which is like a behavior driven
development tool so that's kind of
matching what you do in your company
then maybe you want to go down that
route then there's a different slightly
newer option out there which is called
appium and the idea with appium is you
know we this you are testing stuff we
already did it like it's selenium right
it's selenium webdriver if you're
familiar with that so basically I dare
the idea there is that a lot of
companies have people who've been
writing selenium web browser scripts and
why don't we see if we can use the same
API to test the mobile application so
that we can use those people I don't
have to kind of train them from scratch
and the advantage there is that you know
they're always already libraries out
there for Java and Python JavaScript
whatever language you want
that you can kind of use already it's
already out there the downside I think
is that you're getting a bit of an
impedance mismatch because a browser is
not the same as mobile native
application for instance there's no URL
you don't click stuff right you you
swipe or you perform complex gestures so
they add some stuff on top of it finally
there's like the platform specific tools
espresso UI Automator on android and XE
UI test is the newest one from Apple and
those are like the official tools
they're there they come with the
platform SDKs and they use the language
of the platforms which in this case is
Java and objective-c or Swift but
they're not cross-platform so if you
write a test for Android it's not going
to be able to run on iOS so that's the
disadvantage there but all of these are
kind of options you can you can look
into now once you have your automated UI
test and you have your application you
can then go and run those if you have
you've got and buy ten devices plug them
into your machines and start running
those tests on the devices so already
now you're starting to get some value
but of course are you gonna go out there
and buy you know thousands or hundreds
or 300 different models and install the
various OS versions
well you may want to you may also want
to look at options there so this is
where kind of the product I work on come
into play so that's called scientist
cloud and the idea is to solve that
problem for you so we buy the devices we
host the devices we fully automate them
we don't jailbreak them these are like
real devices as the users would go on
buy it in the shop they're not kind of
modded in any way and you can test any
application whether it's written in
salmon or you know objective-c Java
even hybrid apps like Cordova and so on
so we basically provide a test execution
infrastructure so you basically just
give us here's the application here's
the test I want to run these are the
devices I want to run on and we take
care of everything that's how this works
so yeah there's a ton of different
devices that you could you could go and
to buy or kind of go to the cloud for
hosting this list just goes on and I
just like the scrolling so I put it in
here just to get a sense of what this
actually looks like all right you can
also think you know what I'm just gonna
build this myself how hard can it be and
I just want to say right now don't
please don't do it you may think it's
like a month worth of a project but it
will turn out to take four years at
least it's taken us four years and you
end up having to deal with things like
batteries like this that start inflating
after some time and you don't want your
labs catching fire you also have to deal
with like OS upgrades pop-ups unstable
devices cuz these are just consumer
hardware and you have to build out a
parallel execution infrastructure you
have to figure out how to do reporting
and screenshots and videos and like so
it's just the ton of work just I've seen
some people go out and do this so I just
want to put this out there alright so
now let's do some demo I guess you want
to see stuff so this is actually a
sample that you can go and download
yourself and I think I was just looking
at the program right now I think there's
a talk right now
that's using this same sample here but
you I guess you can see that online if
you're interested after the conference
but basically it's called my driving and
like a IOT application in Internet of
Things application and that's combining
xamarin to build the application and
assure I oh t and cloud services to do a
bunch of analytics on top of those the
data and what is that data
well the idea with the application is
you want to track your driving basically
and compare how you drive against how
other people drive and maybe just
against your own driving to improve so
basically what you can do is you buy
this IOT device so it's it's it's a
small device that you can plug into your
car and then it interfaces with almost
any car out there to gather the data
that's being shown in your dashboard so
things
like mileage how faster you're going
what's the engine mode like so this kind
of sucks that out of your car and then
sends it out either via Bluetooth or
Wi-Fi it's like a cheap device and it
will plug into most cars so the idea is
you plug this into your car then you
have your mobile app as or your mobile
device and that IOT device is
transmitting data to this my driving
mobile application and that then
forwards the data into the azure IOT hub
and then there's a ton of stuff that
happens that I don't want to talk about
which is probably the content of that
other talk I was referring to but it's
basically like big data analysis power
bi machine learning on top of this data
to basically compare your driving
against your previous results against
other people out there but I'm not going
to talk about that bit and I'll talk
about the mobile app development story
and the testing story for this
application yet but it's actually
interesting in its own right and you can
go download everything including the
mobile app the source code to the mobile
app using Sam rain which is now free for
everyone and the back-end infrastructure
code for Escher and all the tests so
everything's out there if you want to
look at it afterwards all right so
whoops I was going to actually jump out
here so let's jump here into Simon
studio and I'm just gonna launch the
application here so it's going to
compile right now for iOS and launch it
on the simulator so you can see what
what the application looks like so let's
see here's the iOS sim
so the idea here is you can log in with
Facebook or whatever and this in this
test build hill here we can just skip
the auth just to get into like demo mode
now it's because this is the simulator
I'm I'm actually in the middle of the
sea somewhere so I can set the location
here to say the Apple headquarters here
and I can actually set the simulator to
do like a freeway drive so now it's
actually moving and then we can hit this
record button and it's now saying that
there is no connection to one of these
devices but they've built like a
simulator so we can pretend that there
is a device like this in software and
you see now we are moving around and
it's gathering data here from engine
load and duration and distance and so on
so let's say okay I'm done driving here
we can then save the trip and we can get
a summary here we drew 0.25 kilometers
it took 13 seconds and we're driving 50
km/h then you can maybe we stopped this
driving thing here go back to Apple then
we can review our past trips here for
instance James Monta magno was driving
around Seattle and we can look at the
path he took here and we can kind of
drag this here to simulate his driving
around Seattle and look at at this point
he was driving 38 km/h and then you can
go into like a profile where you get to
score like I'm animate this is Scott
Guthrie he's apparently an amazing
driver in this sample here and you can
look at some metrics here and there are
settings so you can switch for instance
if you don't like the stupid Imperial
system with gallons you can switch into
the reasonable metric system instead and
then these here these skills and metrics
here update and so on so that's the
basic application so
what if we were to ride an automated UI
test for this how would we go about
doing that we have a fairly new product
that we call the salmon test recorder
and that's like an easy way to get
started because you don't like how do I
even get started with this stuff so it's
like a standalone standalone application
here where you can say let's say I want
to run on Android here and I want to run
this my driving application now it's
actually going to install the
application prepared for testing and
launch it so it should happen here it
just takes a bit to install and then it
connects to the application to start the
test recording stuff all right so now
we're connected so now I can hit the
record button here and then go to the
simulator or device I plug in and then I
say like I want to skip off and you see
it's registering a tap gesture here and
then I go into this menu and say I want
to go to settings here and I want to
scroll down and I want to check that
there's a leave feedback text down here
so I can click here on this I don't know
if you can see it here like there's a
small crosshairs and that's like
assertion mode which means now I wanna
make is an assertion so I click this and
then I click the element I want to
assert is present here and let's say
that's that's the test I wanted to run
that's a quick smoke test it took me a
few seconds to generate so I hit stop
here and now let's just verify that the
test actually works that it does what we
wanted to do so we can hit run here so
it's going to restart the application
gonna run from scratch and then replay
the things with it I tap off tap the
menu hit settings scroll down check that
leave feedback is present so that's
actually quite nice right it's a really
fast way to generate a script and now if
you wanted to you could actually go
right now just with this work and run
this on say 10 devices different Android
versions with your application just
right from here Center Tesla
but what I actually want to do is I want
to look at the output here because it
knows kind of under the hood what it
needs to do in terms of C shop code to
actually make this work so what I can do
here is say export copy and then I can
go into my IDE here and I've created
just a new C shape file with some basic
plumbing which is let's use salmon UI
test let's use any unit framework it's
at this class and this here this
attribute means that I want to run this
test on Android on the Android platform
and then we have this line here which is
some boilerplate code just to launch the
application so that's the basic plumbing
that you need to get started now
I just paste in the stuff from the test
recorder here you're saying it it's you
see that it has some like tap this
particular IDE that it detected a
screenshot is to see screenshots and
tusks allow and and all the stuff you
just saw so let's now compile the UI
tests and run this example test here on
the android platform so this is running
from within the IDE so that's to
reinstall and clear the data and then
launch the application so we're chipping
skip off
interseting scrolling down we're good so
quite nice now we actually have our
first test and we can go and run it on
any device if we if we are able to run a
CI system we can plug it into CI and so
on with a you know a few minutes of work
actually forgot to show you something
which is since this application is
written in Sam Rin I can go and change
some basic things here like the the
color of the bar at the top of the
screen you'll see what I mean in a
second you see it's blue now I want it
if I want to change the black that's
just the line of C shop code I can
change sorry I'm I wanted to do this in
the beginning so if we look at the sim
here
it's launching and we go to skip off and
you see now this colors black here so I
want to commit that change to my kid
repo here let's forget about the tests
but let's add
just come in here black bar okay so I
changed my application background to
black alright so just a moment I want to
just check here right so I forgot one
thing here when I was doing this demo
which is we have our test now and
suppose we wanted to run this in test
cloud we can also do that from inside
here so if I right click here and I run
sorry
from here I could do
what's going on there we go sorry I had
to click the very top element running
test cloud from inside the IDE pick out
the application apk file here upload and
run and then you don't know if you can
see it from down there but it's kind of
submitting it's compiling the
application and the application binary
and the tests and get the DLLs out of
that compilation step and uploading
everything to test cloud and what then
happens is I'm gonna pick now a team
that I want to run this test and in test
cloud and what I have here is now a
selection of devices so which devices do
I want to run this test on that I just
wrote I'm just going to sort by
availability which is how many devices
do we have of each of these I'm just
going to pick an Android 4 device and an
Android 5 devices various types just for
the demo purpose then I do done and
that's going to kind of finalize the
upload and go to an application test
overview screen you see I've been
running some tests previously here so in
fact let's see this test here that's the
new test that you saw before that I ran
before going up on stage here so new
test it taps the login button so going
to this screen here taps the sidebar
menu goes on to the settings screen
Scrolls down and asserts that the
feedback button is there so that's now
run on real devices in the cloud and you
can see that it says passed and you can
go and view the screenshots here you can
go and download the test log and the
device locks so you have information if
there's a crash so I also did that
running on let's see
eight devices here and there was an
additional feature I wanted to show you
for instance if you remember the the
slider thing we had so if we scroll up
here maybe just pick a specific device
remember that we could go to this screen
here like past trips and then we pick a
specific trip here and then we actually
have a video if we scroll to here a
video of what happens when you tap the
slider' at various points so if you tap
the slide up slide at a specific point
the the car will kind of drive around on
the map and there's a video recording
available at that so that if there's an
animation you want to see you can kind
of capture that in a video instead of a
screen shot where it can be hard to to
actually see you we also track the
performance data here like how much
memory are we consuming in this case
we're not actually consuming an in CPU
because we're sampling at a fairly low
rate so at least you know that the
application is doing pretty well then
it's not like spiking CPU usage all
right I think that's what I wanted to
show oh yeah
except for this of course also runs on
iOS so I've run this on six different
iOS devices spanning four different iOS
versions like iOS 93 92 and nine one and
nine zero which is what this application
supports and those tests were all
executed in parallel kind of the full
suite testing the application there
goods
yep so that was the basic demo here and
now as I said that's kind of just to get
rid of this thing here this is a real
application with a real test suite that
runs on multiple devices so as you maybe
realized before is that the application
is actually different on iOS and Android
oops or this so for instance the way you
navigate to settings here like on
Android you have to tap this hamburger
thing here to get into the settings
screen and then go here whereas on iOS
the navigation pattern slightly
different it's going to get this
launched here you have to go into
profile and then tap this thing and then
you get into settings so because this is
not like they're trying to build an iOS
app that feels iOS like on iOS and
something that feels Android like on
Android so the applications are actually
slightly different which is a challenge
for writing cross-platform tests so we
can actually help the developer by
putting in the same IDs on iOS and
Android for the same types of buttons
because then you can use one line of
code to tap the same button across iOS
and Android
but in practice most applications aren't
actually built like this so there I
recommend that you use something called
the page object pattern which is
actually a very simple idea it is to
extract the logic of the test into a
classes that we call page objects for
instance you may have a an object that
represents the login page let's see if
we can find that so here login page on
the login page
I might log in via Facebook I might skip
authentication and those become methods
and then you push the application the
iOS versus Android specific logic into
those matches methods which enables you
to reuse the high-level logic of the
test script that's how you structure
your test if you want
cross-platform testing for instance here
on the login page I can skip off in this
case it's actually cross-platform
because you can just do at that tap the
tech skip off which is the same on iOS
on Android but if you see if we wanted
to log in via Facebook we actually have
this kind of interesting construct here
which is on Android the selector the ID
for the log in via Facebook button is
button Facebook but on iOS it's login
with Facebook so this means we actually
have a bit of branching but at least
that branching is pushed into this
abstraction that we call the login page
so if you're going to build these
applications trying to be mindful of the
tester so put in the same IDs so you've
minimized the branching and if you're a
tester make sure you abstract the way
the difference is using this page uptick
pattern that's the recommended practice
there alright let me see what else I
wanted to cover oh yeah just to show you
a kind of some fun stuff this is
actually this test as I said was kind of
a real test for this real application so
we can actually run it on both platforms
so here's the settings test which
changes the metric from sorry the unit
from the US imperial system to the
metric system so let's run that on iOS
here and as that is running because the
IDE can't do two test runs at the same
time we can actually kick off the
Android test from the command line so we
can raise iOS against Android let's kick
that off here so we're running the same
size now on both platforms so which
platform will and who's the fastest
anyone
no no guesses you can already see it
right it used to be that the iOS
simulator was a lot faster but with some
recent updates kind of keeping it stable
and launching it actually takes some
time so now I OS is actually slower but
at least you can see what I'm talking
about here in practice that we're
actually running the same code I push
the branching down in switches page
objects but testing on iOS and Android
and those for the test that also ran in
the cloud on real devices a minute ago
all right I think that's it for demo now
we've seen this yep
and we've seen this so I wanted to I
still just just let this run done it
doesn't run in the background in the
meantime you see this launch step is
also a bit slow alright nevermind let's
kill this so I wanted to say a few words
about I kind of going or which direction
you want to go in if you start doing
this stuff so what's next so for me the
ultimate goal like the end state that
you want to get to is basically to
implement a continuous delivery process
in neuro mobile applications now I don't
know if you're familiar with that but
here's like the canonical definition of
what that is what is continuous delivery
well it's the software discipline where
you build your application in such a way
that it can be deployed to production at
any time so your quality is high enough
and your procedures for deployment are
high enough or good enough that at any
given time if there is a business
requirement to get an update out there
you can just do it now this is not the
same to say as that you're always
automatically pushing out updates
without human interaction that's usually
called continuous deployment that means
that's happening automatic it's a system
it's pushing out the production system
all the time the difference between
continues
deployment and which is that and
continuous delivery is with delivery you
could do it if you wanted to but it's
still a human that goes in and pushes
the button to deliver the applications
wrap storage with the deploy of the
software so the one of my points in some
of the talks I gave is that you can
actually go and do this you might think
that there's no way we could ever do
this for mobile applications but I hope
I can show you in a few minutes that you
actually can do this fairly easily and
it's not as hard as you may think it is
to implement a continuous delivery
process for mobile apps and if you do
this you're going to get the same types
of benefits as you do with other systems
so what are those benefits basically the
three major ones are you're going to
reduce your lead time and so what is
that so the lead time is the time from
someone fixes a bug or until from the
time someone gets an idea until the
implementation of that bug fix or that
idea is in the hands of the users that's
going to be reduced because you're
continuously delivering you're
continuously pushing your application
out or deploying your software to
production so that bug fix doesn't have
to wait to get batched up with a
production deployment that happens three
months from now so you're faster to get
things out this also means in turn
you're getting faster feedback right
because if you get the thing out there
faster well then the user has a chance
to respond earlier right but there's
also from a technical perspective
there's faster feedback because
continuous delivery is associated with a
lot of automation like automated bills
automated tests so for instance if a
developer makes a change that breaks the
bill
well then immediately the system
notifies that developer that there's a
problem so that leads to faster fixing
bugs and which is way less costly and
finally the release itself is of higher
quality because there's just less stuff
in there right it's a smaller batch
because you're continuously delivering
so it's thing you deliver is smaller
which means it's way easier to reason
about that delivery what's in there how
do we test it it's a lot easier if
there's only say one thing in there
and of course the release process itself
is reliable because you've done it so
many times that you may even have
automated automated the process that
it's just easy to do and it always works
because you're continuously doing it and
there's also this kind of thing which
I'll zoom into on the next graph which
is just how does the team feel as
they're going through the delivery so
it's it's a really nice graph it's
actually completely made up I took it
from the Atlassian block in this blog
post here and it's it is kind of a joke
but it's also true but it it's supposed
to graph like how does the team feel I
start going through a manual a non
continuous delivery process so you're
kind of developing you're you're looking
forward to your target shipping date and
things are going kind of okay you're
maybe a bit behind schedule so you're
feeling you know okay but a bit low and
then as time approaches the target ship
date which is when you're supposed to
ship and you have caution you're not
shipping then you kind of feel a sense
of urgency okay we got to get this thing
done we got to get it out there what's
preventing us from moving and as time
passes you feel worse and worse and
worse
and then finally you hit you're like we
actually do ship you hit your actual
ship date and that's like the very
button but at least now you did it
and then hopefully you feel some relief
that we shipped but actually there's
some interesting thing here which is for
mobile there is an additional low here
which I kind of call the abyss of Apple
I know if you're familiar with the abyss
of Apple but it's basically the time
from you submit your application to App
Store and then has to go through this
thing called App Store review process
and you're basically just waiting for
the gods at Apple to approve the
application that you built through a
manual review process so there's like an
extended low here were you feeling
really bad and I could take anywhere
from a day to two weeks
but finally I let's say that the
application is released you feel this
slope of relief it's out there in the
hands of the users but what are they
saying and hopefully they're saying good
things and you feel better and you reach
the peak of jubilation where okay we did
it we got the release out until oh you
realize
have to go through the cycle again for
the next release so this is the
emotional state of the team as you're
doing this manual delivery now with
continuous delivery it's way more stable
I can tell you that for sure we've
implemented a continuous delivery
process for the test cloud product
itself and it made the such a huge
difference both in terms of quality and
in terms of how the team feels so big
big kind of push for me to to get that
in the hands of mobile app developers
yeah so I'd like to say that releasing
is like breathing like it's it's
automatic you don't even think about it
it just happens continuously all the
time all right the problem is that doing
this for mobile is is actually not that
easy
so just continuous integration as I said
only 25% of teams out there are doing it
and you have to setup like special
hardware like you need Mac machines to
actually build iOS applications probably
your existing CI infrastructure doesn't
really have Macs in it because why would
it and there was night there's no book
you can go out and read to figure out
how do I set up a CI pipeline for for
mobile we already talked about testing
in the realistic environment in the
actual devices that's hard you have to
go out and buy them or you have to plug
in into one of these products and
there's the whole app store review
process which means that you have like
an unknown delay between you finish
until it gets out there in the hands of
the users just really frustrating and
there's a ton of complexity around
things like code signing push
certificates provisioning profiles and
certificates so there's just a lot of
stuff to learn and this is what I'm not
going to go through this in detail but
this is what a CI continuous delivery
pipeline might look like for an iOS app
development so you have a source control
change triggers a build runs unit tests
integration tests runs UI tests both on
the iOS simulator and on real devices
probably needs to go through some sort
of manual testing process because there
are some things we just can't automate
but at least you should make that
annual testing step as easy as possible
by automatically distributing the
application to your testers then says
ton of things like resigning generating
screenshots for the App Store page
uploading to Apple pushing the submit
button waiting for Apple to review then
apple says ok your application is good
you have to now go and publish it and
then there's a final step that you don't
even control which is I like with web
systems you push the update out to the
user with mobile apps the user has to go
and actually update so you can't even
control the fact that they're updating
so you may feel like this is like
totally daunting well how am I ever
going to build all this infrastructure
when we have nothing today and what I
want to argue is that you can actually
get started with a you know a minimal
version of this that's going to deliver
a lot of value within you know hours or
minutes or maybe even a day if you want
to get your team up and running and
basically what you can do and this XML
is using visual studio team services
there are a bunch of other kind of clout
CI or continuous delivery vendors out
there but basically what you get here is
reacting to source control change
tricking a build running the UI tests I
showed you before in salmon test cloud
so running on real devices getting the
results back and easy distribution of
the built binary to your manual testers
within you know a few minutes of setup
so let's kind of quickly review this I
want to leave a bit of time for
questions also
so basically inside of oops your visual
studio team services I want to focus
just on the build part of that which is
basically supporting building mobile
applications now so you have here I'm
gonna focus on iOS here so I set up
what's called a build definition for iOS
kind of specifically for these
conferences and let's look at what that
looks like so to set up a build you need
to connect to a repository so I've
connected this thing
to get up a she assembles my driving and
I connected it to a specific branch and
get the about a volt branch here because
I used this for the Evolve talk and then
you set up a trigger which is basically
I want a checkbox continuous integration
so that if there's a change to this
branch it triggers my pipeline you do
need to have a Mac because ultimately
Iowa's needs to be built on a Mac I've
set up kind of just my this machine here
and configured an agent on this machine
to do the build but you can also go to
things like Mac and cloud to get a Mac
kind of cloud hosted thing to build once
you have that setting up these build
steps is kind of a drag-and-drop thing
you can add things here like buildings a
marine applications I'm an iOS building
Xcode applications and so on so here we
have some basic boilerplate stuff and
then the pipeline is restore salmon
components and you get packages built
salmon iOS packaged yep as an IPA file
which is the format you need to deploy
to advise and then there's a step kind
of already inside bsts to run the tests
on time and test Clower to write them in
here so basically what you do there is
you set up an api key and a user and a
key which chooses which devices you want
to run on on every commit now we've done
this and you see now that there was
actually a build that completed eight
minutes ago which passed and that you
remember at the time when when i had to
jump back and do this kit commit thing
that's because i want to show this it
kind of eight minutes later so i was
changing the application background to
black and i was as I was talking this
was actually building in the cloud
publishing and running the test on
salmon test cloud and then getting
results back here and we see we got 12
passes here and we can actually click
directly into the test cloud link here
to see
what actually happened I just ran a
small subset of the test so it would be
really fast but you see here that the
change I made was actually reflected so
this has the back black ground where I
said we had the blue background before
so all of that happened automatically
while I was talking or drinking coffee
and you can set it up to happen with
every commit and I know there was a bit
of setup here but once you're inside it
doesn't take more than let's say an hour
to configure this thing and you have a
CI pipeline and I know it's not the
biggest fully perfect pipeline but it's
giving you a lot of value for a very
small investment you can also connect
this to hockey app if you're familiar
with that which lets you do crash
reporting so if there's a crash out
there in the wild you get that
registered inside of this web system
here you can see there were some crisis
back in February on this application
here and you can see get some metrics on
which OS device it happened on and kind
of the Iowa stack trace here this hasn't
been some public ad for whatever reason
and the other big feature of havi hockey
app is that you can distribute builds of
your application to the manual testers
and that happens automatically so all of
this well I'm and I'm speaking fast
because I'm trying to leave time for
questions but my point is that you're
getting all of this with a few clicks
and a bit of configuration using these
cloud products all right so the final
point is basically this quote which I
really like you don't have to read the
full thing just the last one which is
basically whenever you have an
opportunity to submit a bill to Apple
you should do it so you should be
continuously deploying your iOS
application even though there was this
Apple review process and right now Apple
is the bottleneck it takes between one
week and two weeks to actually get I
build reviewed so your maximum frequency
of iOS app applications is say once per
week or every two weeks because this
thing is living
you but something is changing now which
is really interesting if you chart the
time it takes for Apple to complete
their app review process it's been
dropping for about a year now so you see
now that the very very rightmost corner
of this we're actually down to about a
day which means you can publish new
updates every day to your iOS builds
also which is a huge difference from the
two weeks cycle does anyone know what
the spike is like good huh
higher speak up holidays yeah so that's
not very nice they will actually go on
holiday and just everything stops I
don't really like that they should fix
that also but I guess they need their
holidays too so my point is automated UI
testing it takes minutes to get started
it takes longer to get good CI delivery
you can set it up probably in the day
within your team and you have a CI
pipeline and you're basically
implementing continuous delivery for
your mobile apps you can go into it
that's the point on my talk a bit of
links and I'm happy to take any
questions but you have to speak up
because it's really hard to hear so
first for sermon test out yeah so we
have a free cheer now so you can go try
this for free now and then the entry
point is $99 per month for the last year
and then it scales up depending on what
we call device concurrency which is the
number of parallel devices you are using
at the same time but we changed the
pricing a lot to make it way more
accessible than there were a year ago
and bsts is pretty cheap also more
questions yeah
you can use it to test any mobile
application it's not restricted to
salmon hybrid apps native apps more
questions
alright I'm also happy if you want to
know more details so you don't like to
speak in public you can come talk to me
after the talk but thanks very much for
listening and hope you have a great
conference</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>