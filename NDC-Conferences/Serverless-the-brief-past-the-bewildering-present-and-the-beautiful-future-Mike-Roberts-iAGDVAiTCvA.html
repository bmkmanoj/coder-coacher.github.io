<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Serverless - the brief past, the bewildering present, and the beautiful (?) future - Mike Roberts | Coder Coacher - Coaching Coders</title><meta content="Serverless - the brief past, the bewildering present, and the beautiful (?) future - Mike Roberts - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Serverless - the brief past, the bewildering present, and the beautiful (?) future - Mike Roberts</b></h2><h5 class="post__date">2018-02-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/iAGDVAiTCvA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we're going to make us
now thanks for coming to much
it's late on Friday afternoon I'm sure
you're all ready and willing for the
wrap-up but hopefully I can inspire you
with some ideas that pretty new this
morning Scott Guthrie obviously gave
some some fun demos on on some of this
this morning so maybe you're inspired by
that but yes service it's a relatively
new thing in some ways we're gonna be
finding out about the history of it in
this talk and it's become an incredibly
exciting thing for a whole bunch of
teams a whole bunch of individuals I
started using some of this technology
about two two and a half years ago in a
big way when I was managing some teams
at an ad tech company in New York where
I live it was a bit of a strange accent
I'm from this country but I've lived in
New York for 12 years so yeah we've been
using it about two and a half years in a
big way and then when I left that our
tech company I wrote this article that's
on Martin Fowler's website about service
architectures and it turned out to be
quite popular so much so in fact that I
actually started my own company at the
beginning of last year with my business
partner John Chapin and what we do is
consulting and training around
serverless
and cloud architecture I've run a number
of teams over the years I've been an
architect for a number of years and so
is John and so we've really sort of
combined our efforts to work with a
number of companies around how to get
their heads around this stuff as I'm
going to show you some of this is quite
new some of its old but some of it's
quite new as well and it has a whole
bunch of different ideas about how we
can use it to traditional systems so
what I want to go through in the session
today is first of all a brief history of
service and for those of you that
haven't really heard too much about the
term this will explain a little bit
about what it is this is not a sort of a
pure introduction talk but I'm going to
sort of hopefully level set us at the
beginning here and then I'm going to
talk about what people are actually
using this stuff for this is not just an
academic technology this is a bunch
of ideas and technologies that are being
very widely used in a number of use
cases and so I want to show you what
some of those are and what some of the
companies are that are really embracing
this way of working I want to talk about
what the industry has learned so far
about service this is a pretty new thing
but there's already a bunch of lessons
that that have been learned from it but
there's also a bunch of stuff that still
needs to be figured out we're not saying
all right we figured out what service is
now Goforth everybody and use it there
are a few things that you need to be
aware of that we're still trying to get
our heads around and then finally a
little bit of a look to the future
staring into the crystal ball a few
things that I think that we're gonna see
change over the next few years so let's
start with a brief history of service
and any history of service really has to
start with talking about the cloud and
surprisingly serverless was actually
present at the birth of the cloud and
the reason it was was this little thing
Amazon s3 who here has used Amazon s3 a
good PureView okay so Amazon s3 was
launched in March 2006 one of the
original Amazon AWS services stands for
simple storage service it's really quite
an extraordinary little tool it's a key
value store it's a mass scale file host
file system and also it's it's a web
host you can use it as a web server and
it is used at extraordinary scale by a
huge number of companies and teams
across the world one of the most popular
of Amazon services Amazon s3 has some
very interesting attributes to it when
you're using it you have no concern
about nodes of server machines or server
processes we're not thinking about file
servers when we're using Amazon s3 we're
not you keep thinking about our Sand
networking provider when we're talking
about s3 we're just thinking
about these buckets that we can store
data within and how that data is stored
on the fundamentals is really what
Amazon looks after s3 has automatic and
invisible auto scaling based upon how
you use it when you use s3 you don't say
I want a one terabyte bucket of s3 you
just say I want to buck it and you're
going to start using it and the more you
use it the more Amazon will grow the
storage for s3 under the covers there's
never a point where you say oh I think
I'm going to be using an extra 50
terabytes next week so Amazon please I
need to tell you about that you just use
it the costs of s3 are based upon very
very precise usage those that usage is
both around how much you store in it
pretty much per kilobyte and also how
much data you have going in and out a
very very precise level and these costs
go up as you use it
and as you store things in it and then
precisely go down as you stop using it
so if you delete content from s3 your
bill will be less that's part of s3 is
that performance is nothing to do with
how many nodes that you have supporting
your s3 bucket or any of any kind of
machine sizing we don't have any idea of
what nodes we actually have anyway
that's completely abstract at us and so
this whole idea of like we want to
increase the performance of our of our
storage area network by increasing the
number of nodes is just not possible
because that's hidden from us so we have
Amazon basically look after the
performance of s3 for us they guarantee
a certain of a certain amount of
performance and that's what we have and
there's a few little tweaks you can do
with s3 to get better performances
around it but basically it's nothing
certainly around how many machines you
have or how big those machines are and
then finally here's another final
attribute of s3 that's interesting is
that it has implicit high availability
those you don't know Amazon the way that
they build themselves is each Amazon
sort of area is known as a region in
each region
has a number of data centers in each of
those data centers is called an
availability zone Amazon will
automatically replicate your data in s3
across availability zones so for example
if one of the data centers goes down
your s3 data is still available from
another data center because Amazon
guarantee high availability for s3
across data centers you don't do
anything there's no configuration to
turn that on
it just happens these are a bunch of
interesting attributes when we think
about file storage and storage in
general but this is actually my
definition of a service service more
than just s3 so when you're thinking
about service services think about these
five points and that's the kind of error
that those the kind of attributes that
you should expect from a product that
calls itself service now a service
application in a service architecture is
just one that uses these servers these
service services so an application that
makes extensive use of s3 could argue to
be a service application and there's a
bunch of other service services that I'm
going to talk about as we go through
these next few slides so I wanna give
you some history of how service sort of
came about obviously we just talked
about s3 from 2006 I have to I'm in
London so I have to talk about this
product called Zemke which was created
by a team that was headed by Simon
Wardley who's a fairly famous speaker in
London on service subjects they created
this in around 2005 and it was very much
a service compute service it didn't end
up going anywhere but it was really sort
of revolutionary and ahead of its time
now what wasn't ahead of its time was
Amazon lambda which came along in 2014
an Amazon lambda is basically serverless
compute as as s3 is service storage all
of those attributes that I just talked
about apply to lambda as well very
precise billing you're not thinking
about where your code is running in
terms of individual nodes and servers
and the implicit high availability as
well you don't have to worry about a
data center going down lambda will I
mean
we run across data centers for you now
this whole area of lambda and Zim key a
little bit before it is what we call
functions as a service or fast and there
are a number of functions as a service
products out there apart from lambda
Microsoft as you have cloud functions
which Scott showed this morning
Google have Google Cloud functions and
there are a number of others as well
beyond just compute though we have some
other interesting services that fit
under this service criteria that are
sort of a little bit of higher level of
abstraction so one interesting one is
this product called earth zero so R zero
tries to take all of that code that we
normally have to write when we're
thinking about users sign up and use a
sign on and all that kind of password
management stuff and really just
encapsulate that as a service that we
can just let us users access just by
putting some simple JavaScript on our
web pages or some simple code in our
mobile apps and all zero handle all of
the server-side storage and logic and
OAuth integration all that stuff for you
because that's just a very common thing
that we don't really hasn't got much
differentiation across products and when
we think about that as a service service
as well again because we're never when
we're using all 0 it's is something that
we use that we have no concept of what
the servers are yes this servers running
or zero somewhere that they're
completely abstracted from us another
example here is firebase who here's use
firebase anybody very few of you
firebase is a database that's owned by
Google now it's actually developed and
then bought by Google and it's really
sort of this high level database that
mobile developers can use and other
people as well that's very popular with
mobile devs because it's it's a DB it's
a database that runs without any
database administration and it also
doesn't need an application a
server-side running on top of it you can
just perfectly safely access it from a
front-end kline firebase is similar to
another product that used to exist
called pars and parse is really sort of
the forerunner in this area far as pars
got bought by Facebook and then closed
down but pars did this job very well and
there's a horse also pull bunch of other
Amazon service services
SNS there are they're simple
pub/sub messaging system is a very very
popular one and a whole other bunch
besides and we group all of this second
group into this area that we call
back-end all sorry I've got my slide
wrong here we're called back-end as a
service or bars and back into the
service really sort of came for
originally from that mobile backend if
you look on Wikipedia does you'll see M
bars which is this whole area of PARs
and this sort of mobile backend as a
service where we can get all of these
useful back-end tools without actually
having to manage our own databases or
web servers or anything like that
and so serverless is sort of the unified
world of both back-end as a service and
functions as a service and that's
confusing for some people at first
because lambda AWS lambda has proven so
popular that at first point some people
think old service is just faz it's just
lambda and it's not there's a lot more
to service than just functions of
services all these other high level
services as well that we can incorporate
into our applications so why the name
service where did this come around from
well when I was writing that article
about a year and a half ago I did some
research into this and and the first
reference I came to the earliest
reference I could find to service is
this article from Ken from in October
2012 and he said the phrase service
doesn't mean servers and no longer
involved it simply means that developers
no longer have to think that much about
them now this was in 2012 and the phrase
really started picking up traction in
2015 and that was around the time that
Amazon introduced a product called API
gateway an API gateway does a number of
things but one thing that it does quite
usefully is it allows us to use Amazon
lambda functions to implement HTTP API
is whether they're for websites or for
services and when that happened this
sort of this whole service word started
getting used a lot lot more
there was an open-source framework the
sort of plugged API gateway and lambda
together in a really nice way that was
called jaws and they renamed themselves
to the service framework and that
remains one of the most popular
open-source sort of libraries and tools
around some of this stuff but we
certainly saw this that's word sort of
start picking up steam about two and a
half years ago now there's a whole bunch
of things that refer to themselves as
service some of those things I think are
great some of those things I'm not sure
quite where they they think like why
they think they're using that name and
I'm really it's sort of become this fad
which I am definitely part of but you
know every everyone wants in and it's
not even a very good name service well
there's still service somewhere okay
it's a negative name okay fine we're
just stuck with it there's a few of the
people have come up with alternative
attempts at names but this is sort of
the one that's stuck but it doesn't
really matter what the name is honestly
it what matters is what people are doing
it with it and and the capabilities that
they get from it so let's get on and
talk about that a little bit more so as
I mentioned service is being used widely
in industry now across a number of
segments across a number of types of
company people ask me so might you're
doing consulting around service you know
what verticals are you working in yes
okay well what size companies are you
working with yes and is there's there's
no sort of way that we can categorize
that I'm working with finance companies
and media companies and other types of
companies and I'm working with one
person companies up to multi thousand
person companies and there's no real
sort of distinction there the real
distinction about who is using service
is really their appetite to try out new
technologies and see if it can help them
with their business but let's go through
some of them now as an example so the
first group of companies or the first
group of usage of this is for prototypes
and startups so an example here is a
company called a cloud guru who actually
are a
they're a cloud training company so if
you ever any of you here do AWS
certification all that kind of thing
you probably use a cloud guru to go and
watch them online videos they needed to
build a website to host all of that
stuff and they did that using a bunch of
service technologies and they got so
into it that they now actually run a
global series of conferences called
serverless Kampf but they talked about
how they built their app in these talks
that they give it these conferences and
one interesting they're a serious size
company now they have hundreds and
hundreds of thousands of users they have
you know got good amount of funding good
you know several several tens of people
working for them and they're they're a
massive AWS use and they don't need to
know everything about AWS they're they
have no ec2 servers at all running their
production stack they are an entirely
serverless back-end in how they run
their software now obviously they're a
start-up but every company in some ways
has the opportunity to do little mini
startups within them and what we see is
a lot of companies have you know larger
size trying out new product ideas using
servers because it allows them to get up
and running much more quickly you know
I'll go into that a little bit later on
in the talk second class of companies
and usage are websites and some of you
may have heard some scary things about
things called cold starts and lambda
isn't very fast and blah blah blah
there's definitely some things that need
to be worked around there but at the end
of the day real websites are running
their applications on service the Salar
sort of the leading case study around
this bus'll are a large website based in
the US it's sort of like BuzzFeed but
targeted women audience I know Steve
Fortner he's their director of
engineering and they you know in talks
that he gives he says that they're
actually one of the over 30 around the
30th biggest web property in in the u.s.
so that's a that's a big company they're
entirely service they're using API
gateway and lambda and a whole bunch of
stuff to do what it is they do and
they've really sort of built that over a
number of years through painful stages
because this does very new but they're
now at this position
where they can use servlet knowledge
ease to move really fast in their
product development and I recommend
taking a watch of some of Steve
Faulkner's talks to sort of see how they
work so that's websites on the other
side of sort of server-side systems we
have this more asynchronous way of
working so data processing and this is
really how I got into using these
technologies I was working for an ad
tech company we needed to process in the
order of hundreds of millions events a
day and we had some systems that were
doing that they really couldn't scale to
what we wanted to do with the business
anymore instead we wanted to rewrite
them and we ended up rewriting them
using API gateway and lambda and s3 and
building a whole data pipeline and
Hearst which is a large media company in
the US large and historic media company
they also are using this technology for
exactly this same way of working there
is a talk that they gave it reinvent a
year and a little bit ago actually that
I given the resource document which I
give the link to at the end where they
talk about how they build this but they
look a little bit like this you know
isn't it don't try and read all the
detail here but the idea is that on the
left-hand side we have a number of
sources of data coming in we put those
onto event streams and then we can have
multiple consumers taking that data and
doing different things with that data
and then building up this pipeline of
processing and this is an amazingly good
use of service technologies because this
is all asynchronous so while there is
some amount of latency requests
requirements here most people when
they're using this stuff are willing to
deal with you know a few seconds here or
there in how fast data gets through the
pipeline and service technologies are a
fantastic way of building these systems
for a whole bunch of reasons I'll come
back to this diagram a little bit later
on as well
so the fourth usage of service that I
want to talk about is operations and
this might surprise some of you because
you may think well ops ops people
they're not going to want to use lambda
they want control of their own machines
and they're never going to touch that
stuff
so one example that I want to bring up
is a company called Meetup who some of
you will have come across the meetup app
and site Meetup are based in New York
where I live and so I know a bunch of
the folks there they they had a
transition about a year and a half two
years ago where they went for him on
Prem 2 in the cloud and they moved their
legacy applications to AWS and how to
actually do that they actually needed to
change a whole bunch the way that they
operated their software and so their
operations team had a whole massive
project not just to the initial
deployment but how they were now going
to look after this software going
forward and they ended up using a ton of
servers technology to do that so using
lambda tied to a whole bunch of cloud
watch events are using cloud formation
with a whole bunch of what are called
custom resources to do funky little
deployment scripts all of those are
implemented using lambda and a whole
bunch of other stuff beside so they were
really you know this sort of
service-oriented operations team and
this is not the only time I've seen that
I've spoken to a number of companies
where it's not been this my grand
strategy to introduce lambda but someone
will start using lambda somewhere and
it'll be kind of useful and then someone
else will see that and be like oh that
could save me some time I'm going to use
that and you see this sort of
proliferation of little bits of
serverless usage appear throughout the
operations of applications across a
number of companies and then the final
thing sort of similar to this is this
idea of using lambda for glue and this
is nothing to do with the product called
AWS glue that came out after the rest of
us in this industry started using the
term glue for this but glue is the idea
of like there's often times where we
have to we want to build these
applications that just do a little bit
of processing occasionally you know
maybe they're a cron job that just runs
you know three hours a day and uploads a
data set to a third party or maybe
they're just you know something that
sits in the middle and just wakes up
occasionally and oftentimes it's not
worth running those on an entire server
just to themselves so we end up running
50 of them on the same machine and then
you get dependency hell between them I'm
sure a bunch of you have seen you know
that that one server that has 50
slightly related cron jobs on it
that always turns into a bit of a mess
and so what we also see being used is a
lot of these sort of little tiny things
are far more suited to being implemented
using lambda and other service
technologies and here's an example that
I actually built recently it's on our
blog where I wanted to create a a build
pipeline notifier for our some of our
own internal systems and we're using a
tool from AWS called cope like code
pipeline as our build pipeline tool that
generates events those events can be
then configured to call a particular
lambda function and that lambda function
then makes a call to slack to put a
little message in our slack channel well
a little lambda function about I can
remember now about 15 lines of code not
very much it's really simple to deploy I
can compile this with one cloud
formation script doesn't cost doesn't
cost me any money at all to run it I
don't worry about what machine it's on
you can download this is on our is on
our github page but it's very very
simple and I don't have to think about
the operations of this to a any extent I
would normally do so those are sort of
five of the main uses a service that I
see so websites prototypes data
processing operations and then these
little blue apps that sort of sit around
the company filling in some of our
cracks okay
so that's sort of a the level set now I
want to sort of talk a little bit more
about what's going on in this world and
the way I got to speaking here by the
way I know a guy called Giles Alexander
who's based here in London and he and I
was sitting down for a coffee and a
thing so what you want me to do does I
could do an introductions like I want a
little bit more of that might then Matt
Mike I want to I want to get your
opinion you've been deep in this stuff
now as deepers you know most people have
been as you can be if it's something
that's two years old
like what is going on in servers tell me
I want to I want to hear that so this is
sort of what came out of that
conversation with Giles
so what we learned so service technology
is really cool don't get me wrong it's
really nice that I can build a tiny
little 15 line function and just deploy
it and not worry about coding it
and I can play around with like oh you
can like do this and put that there and
like and sort of start geeking out on
all the tech and I do that I am I am I
am a geek so I do geek out on the
service technology and the technology is
really interesting but sometimes we we
focus a little bit too much on the
technology so here's a quote from from
Geico at it she actually spoke this
morning on a different topic but has
spoken a number of times on service in a
really good way and he said this in a
recent talk he said most people are
looking at service and platform as a
service which is a similar idea from a
technical point of view it's far more
important to look at service with a
financial perspective so there are many
opportunities within service to spend
far far less money and there's a number
of places where it won't cost less money
but there are a lot of places where it
will cost less money and that's either
on building applications in the first
place because it just takes less effort
to build put an application together but
there's also opportunity to spend less
money on operating applications so
here's a here's a slide that Geico
actually put up in his talks from
October so gluco does a few things one
of the things he does is he co runs an
application called mind MUP which is an
online mind mapping tool that anyone can
use integrates really nicely with Google
Drive that kind of thing
they have several hundred thousand users
per month using their software this is
his entire AWS bill hundred bucks for
supporting several hundred thousand
users one thing on here is there are
three cents on ec2 so he's spending
three cents a month on virtual machines
and then his land earth bill right down
there here is 53 cents so he's spending
his on his entire generalized compute
he's spending 56 cents to support
400,000 users this is kind of
revolutionary now he's gone through
several iterations of rebuilding their
application to use a whole
services but this is quite extraordinary
I give a link to this talk and the
resources and I really recommend that
you go and look at that so how the heck
does this work well Goa Coast goes on to
say that many of the solutions that we
consider in architecture as being best
practice are solutions for problems that
no longer apply when we start thinking
in a service way so for instance we
think about high availability and this
isn't what I'm about to give you an
example now's not Syria cost-saving but
we when we think about high availability
right we might deploy two versions maybe
we do if we're in it was I'm gonna speak
a little bit in Amazon world sorry flow
these are not AWS users we may speak we
may talk about like deploying in in two
regions
maybe with service we can deploy five
versions of our application in five
different regions we can deploy our
lambdas in all of the regions in Amazon
if we want but that won't cost us any
money it will only cost us money when
those lambdas are actually executing we
would never have done that with the
traditional system deploying our entire
application stack in a traditional way
25 times around the world that's far too
expensive we'd never do that but the
constraints have changed and so a lot of
when we start looking at a lot of these
things a lot of the constraints have
changed so we've always sort of pushed
towards having the idea of a central
Orchestrator and we do that because
oftentimes because of security we don't
want for example our clients our web
browsers or our mobile apps
communicating directly with the database
that would be crazy talk right but now
that's a perfectly reasonable thing to
do the capabilities that Amazon give us
from a security point of view for
dynamodb and s3 dynamo is there no
sequel database um all gives a gives us
per request security and the scaling
that we have for those things are auto
scale so we don't need to worry about
the sudden influx of users overwhelming
our databases because
DB will Auto scale for us and so the
constraints that we have around
architecture have completely changed um
so this really sort of changes how we
how we build architecture and I want to
talk about this a little later on and we
haven't figured out what that all means
but we have learned that the rules have
been changed at least and that we need
to start thinking about what that means
what happens when we expand our mind and
take our sort of normal view of
architecture and think about things in a
different way what else have we learned
the only applications with service is
fast really fast this is actually why
I'm most excited about so this is what
got me into service the cost impacts are
really important and actually can be
game changes for companies
all right whether they're starting up or
whether they're companies that want to
really change what they're doing the
cost implications can be massive but
this is what I'm most excited about its
how quickly you can build something
entirely new with serverless here's a
quote from Adrian Cockcroft Adrian is
the VP of cloud architecture strategy
AWS he was the architect at Netflix that
moved Netflix to the cloud I'm sure most
of you here have heard of Netflix the
big online TV and film distributor um
they're an entirely cloud-based
organization and you think about the
sizes of data that they're dealing with
that's quite extraordinary they've been
completely cloud now for a long time and
an Adrian was was the the guy that sort
of really moved them to the cloud before
then he worked at Sun Microsystems a
long time but now he's at AWS and he
said this this was at the about a year
ago a talk he said we're starting to see
applications be built in ridiculously
short time periods and by ridiculously
short he's talking about hours literally
people in enterprises building entirely
new applications where they didn't exist
before not augmenting an existing app
but building an entirely new app and
deploying it in a matter of hours and
the reason that this is possible he goes
on to talk about in his writing and and
the
talks that he gives is because people
are now starting to think a little bit
about building applications as sort of
putting you know bits of Lego together
as opposed to crafting something out of
clay so with clay you get you know if
you're if you're a potter and you're
putting you know a piece of pottery
together you have ultimate control and
flexibility but that might take you a
while especially if you're not
experienced at that
whereas with Lego you can build
something that does pretty much what you
want most of the time and you can put
that together very very quickly using a
whole bunch a standard building blocks
and that's what we're seeing starting to
see application architecture become not
about putting together the you know the
perfect solution using tens upon
thousands of lines of code and writing a
whole bunch of stuff custom it's more
about taking a whole bunch of different
services off the shelf and sort of
gluing them together and that with that
comes incredible power and especially
the power to to build something entirely
new very fast now even if you're only
building a prototype this can be
incredibly valuable most of the time
when we're building software we don't
actually know whether we're building
something that the user is going to find
useful and so if we can very quickly
build a production scale safe prototype
put that out in the world see if users
like it we can then decide whether we
need to rebuild it later using something
a little bit more bespoke but to put
something out within ours is a whole
amount of leverage that we didn't have
before so what have we learnt we lent
cheaper we've learned that we can build
things more quickly we've also learned
that DevOps is even more important than
it was before and this is sort of where
I disagree a little bit with Simon
Wardley who talks about this as well
and when I'm talking about DevOps here
I'm sort of really talking about sort of
the cultural side of DevOps and the
collaboration side of DevOps and so when
when we're talking about Bilt being able
to take an idea a concept in someone's
head and get that to production in the
same day that's not going to work if we
have a two-week long chain of process
that needs to happen from development to
our operations team we have to have
either ops happening
on Team or we have to have dev and ops
working super closely if we're going to
get that time to market benefit we also
need all of this DevOps stuff if we're
going to avoid shooting ourselves in the
foot there's a lot of dynamism in these
applications there's a lot changing so
that we need a whole bunch more
automation and structure around how we
actually operate and deploy our
applications if you want to know more
about what the heck I'm talking about
here go read this book I think this book
is probably the most important in our
industry for about 10 or 15 years those
of you who here has read the Phoenix
project a strange strange little book
this is sort of the encode efficacious
of the of the Phoenix project but
actually one of the co-authors co-wrote
the Phoenix project so I really I really
strongly recommend going and reading the
DevOps handbook it really sort of gets
into the nuts and bolts about why DevOps
is not just regular tech ops with a bit
of automation there's a lot more to
DevOps than that the good news is about
some of this stuff is that DevOps
doesn't at the principles of DevOps
don't read to really change too much
when we're using surplus you know I
talked to some people who have seen all
like these wonderful things like the
demos that that Scott gave today and
actually Scott used an IDE so I'm very
happy about that but a lot the demos you
see like have code in a browser and blah
blah blah and that's all you see so
people say so what happens to source
control I'm like you use source control
okay so how do we build a service app
and like you use a build tool okay so
how do we deploy a service apple I'm
like you use your regular deployment
tools like some of this stuff really
doesn't change very much in the
operational side for service especially
around the principles like trying to
build good continuous delivery is just a
pretty standard thing both the
traditional systems and service systems
the one thing that we do need to do with
service and DevOps is that some of our
practices need to be amplified there's
things here like we need to really
change how we're thinking about the
number of deployed versions that we have
of an application normally right now we
might have two production versions we
may have a blue-green production version
and one test version and one
Staging Russian maybe something like
that with service what you tend to find
is you actually have like maybe many
many different production versions
because it's totally free to do that and
you're trying out different segments
against different different versions you
may keep old versions of applications
around in production to support old
customers again because it doesn't cost
you any money like before you would need
to run ten instances of the same ten
instances of your server to support down
different versions each of those would
need to be running all the time with
service you don't need to do that as
long as they're deployed you'll only pay
for them when they're being used some of
the other app practices we need to think
about amplifying how you do like little
nitty-gritty things like how you manage
AWS accounts really needs to change when
you're wanting to embrace service like
this this is idea with AWS where you can
create sub-accounts where the billing
all rolls up to the company but each
account is effectively this completely
isolated sort of deployment area and
that is turns out to be a super in with
these service apps to have like much
much isolated significantly more
isolated systems between different
developers or different teams so really
embracing multiple AWS accounts can be
really useful when you're thinking about
this stuff but then also you know in
this some of the the book the DevOps
handbook gets into this a little bit but
you know thinking about areas like
security and cost management right now
and traditionally we sort of really left
that up to different teams you know as
the security teams job or you know
that's the finance teams job like if
we're gonna start putting out new
applications really frequently or
massively changing the architecture of
our systems really frequently it is our
responsibility as engineers to make sure
that what we're doing is secure and that
we're not blowing our company's budget
by doing so and so those areas of
security and cost management really need
to sort of shift left in the parlance of
DevOps so those are some of the things
that we've learned that it's cheaper
that it's could we can build
applications far faster and that sort of
the DevOps thing is still useful and
just needs to be sort of
pushed forward a little faster but what
do we still need to figure out in the
land of DevOps so here's a tweet from my
friend Sam Newman from last week Sam is
a sort of fairly famous in the world of
microservices he and I worked together
about 12 years ago and he speaks about
serving us as well really great guy
really really smart he said this the
first time developer experience around
the AWS lambda is really bad once more
I'm reminded how complicated the whole
built from primitive strategy is a
problem with respect to usability of
higher order functionality Sam is a
really smart dude he has been he was
giving AWS training courses 10 years ago
if Sam struggles with lambda the first
time he is it what helping what hope is
there for most people um now I disagree
with him slightly but I've been using
lambda for two years so you know I'm a
little bit biased but there's no
question here that the first you the
first time experience for some of these
tools isn't great I would say to
Microsoft's credit that Asia is a lot
better in this regard the tooling that
adder functions has is great both on the
initial experience and also the the
later on experience Scott Guthrie was
debugging an agile function based on a
production event from the cloud this
morning right I've seen that demo before
I've seen that demo done using Java
where they break point it's amazing you
want a break point a production event in
lambda good luck you can't you can you
can break point using Sam local which is
Amazon's debugging tool which is a whirl
keep that in my hand
Sam local which is Amazon's local
debugging tool which is a heck of a lot
better than what we had available to us
a year ago but there is no ability with
Amazon lambda to debug a lambda function
from a production event and so Microsoft
are definitely better at the dev UX no
surprise they've been doing this for 25
years they've always been good at
initial experience and so they have got
that great initial experience around and
so really I think the other cloud
vendors are really playing catch-up on
that dev UX site where Amazon win is
just on like sheer scope of what you can
do in the service world in AWS I mean
they have far more services you can
integrate with their scaling is off the
charts like it's it's it's amazing when
you I just have you know a strong level
of confidence when I'm using lambda and
production that it's it's going to be
really solid but we definitely need to
fix this initial experience with
serverless so that's the first thing we
need to figure out operations the way
that we work is largely the same as I
said the principles and the values
around operating serverless apps doesn't
change to some people that's a surprise
but it really doesn't change one of the
things that we do is training courses
and the first thing that we do on our
training courses is get people to set up
a continuous deployment pipeline we do
that by giving a cloud formation
template they just run that in an AWS
account and bang it's 50 people in the
room suddenly have a brand new
continuous deployment pipeline that
doesn't cost any money because it's
running service Li that's just the way
we work I've been working with
continuous integration systems for a
long long time it's just how my brain
works and that does not change the basic
ways that we're working they don't
change but our tooling needs to change
in the serval as well we need to fix
that one problem that we have and this
is this is the same in the micro
services world but the service world has
this on steroids is distributed
monitoring we have far far more moving
pieces now when you have a monolith and
you want to figure out what's going
wrong you just look at the logs of the
monolith you've got all the data that
you need it's all there
when you have 25 different lambda
functions 15 other AWS services and
possibly some other external vendor
services as well and something in there
has gone wrong where has it gone wrong
and if you're trying to trace one event
that went wrong how do you trace that
event across systems this is incredibly
important to have as we grow the use of
service we're starting to see tooling in
this area Amazon have a tool called X
ray which is very early days and does
not solve all these problems yet but
offers some hope but this is a big deal
we need to think about how distributed
monitoring works we also need me think
about how the specifics of deployment
work and Amazon are really pushing
really hard on this in a great way they
released some stuff reinvent which now
does automatic canary deployments for
your lambda functions so you can say
okay I want to I have version I have
this version deployed in my lambda
function I now want to deploy another
version of my lambda function and I want
to slowly switch traffic from one
version to the other I'm going to give
you a test criteria to figure out
whether that's working or not and if it
is I want you to slowly shift traffic
from one to the other Amazon now do that
for you automatically with their tool
link that's really impressive and that's
the kind of thing that we need because
if we're deploying 30 different lambda
functions we don't want to be running
canary processes or Bluegreen deployment
manually and so for Amazon to give us
that tooling is really solid but we need
more in the area of distributed
monitoring but the number one thing that
we still need to figure out in the world
of service is what is good service
application architecture so in 2003
Martin Fowler wrote a book called
patterns of enterprise application
architecture which I'm sure a bunch of
you here will have seen and what
patterns of enterprise application
architecture did was really summarized
about ten years or so of
state-of-the-art Enterprise IT
development Greger hope came along a
year or so later and wrote enterprise
integration patterns which was sort of
doing the same thing but for more
asynchronous build systems and both of
those books are still useful today
especially Gregory
book you know I still see people sort of
coming to Gregor's book refresh like 14
years on and go this this is brilliant
this does exactly what I need
but these built books were built on many
many years of experience of going and
talking to a whole bunch of teens and
not just seeing one or two case studies
but seeing what patterns were working
repeatedly across a number of teams
across a number of verticals service
hasn't existed long enough for us to do
that in the service world and a lot of
application architecture changes in
servlets the constraints of change as I
mentioned earlier on and so if
architecture is different then what are
the patterns we don't know yet and we're
going to be building that over time now
that's not to say that you shouldn't
start using service there are a bunch of
really good case studies out there and
many of you will be totally happy to
roll up your sleeves and they go okay
let's figure this out we don't
necessarily know that the road map but
we're going to try this out and see what
works and that's what people are doing
right now we're still in that sort of
early stage of the adoption curve we
haven't quite yet reached that chasm of
everyone hating it we're still on that
first like way up we're a little bit
beyond the early adopters now but we're
certainly not you know into into
mainstream use and so it's certainly
possible to get into it but we don't
know this yet so what what do I think
it's going to be like we're like I I do
this stuff all the time I've done it for
two years like what what do I think
we're gonna see with service application
architecture I've got some ideas so I've
gone a little bit of a rant and hand
wave for you so one of the things that's
sort of really coming up as a common way
that people are working is this idea of
sort of orchestrate alerts systems right
when we built applications in the past
we think about having the server the
this server server application in the
middle of everything our client
communicates with the server and then
the server communicates with various
back-end systems to get the job done
with micro services that's changed a
little bit maybe we still typically have
like something like a back-end for
and being at the front of everything and
then that still communicates with a
bunch of other microservices and even if
we don't have that we still have this
idea of for each business function we
have a micro service and the micro
service is the coordinator of everything
that we need to do this doesn't really
necessarily fit the constraints of
working with with service systems really
well one of the things that the the
geico that I mentioned earlier talks
about and his talk is that he's using a
pattern that we're seeing very very
frequently and now with certainly web
driven applications where the the
browser makes a request to the the API
for example I I want to download I want
you to convert my mind my mind map into
a PDF and a traditional system what we
would do is the server would would kick
off a PDF process and then would return
with a binary response content
containing the PDF what we see now a
much more frequently with people that
sort of rewriting their systems in a
service first kind of way is that what
will happen is the lambda function
behind that API will kick off the the
PDF job on some other service somewhere
and will then respond to the client
immediately with a URL and that you are
effectively with a redirect they might
even be an actual redirecting often
enough in case the browser then goes oh
this is a redirect I'm gonna call this
this this redirect has a URL where does
that URL does it go to go to another API
no that goes to s3 might go to West
three via a CDN but it goes to s3 and
what we can do is set up our permissions
on s3 so that only that client has
access to that URL for only a certain
period of time and the client can then
sit there and basically pull that URL
until it gives give some data why is
that interesting why is that useful
when we pay for lambda functions we pay
by the hundred milliseconds okay and so
if we want to in the case this
generating a PDF with the clock the time
are generating the
might be say 300 milliseconds the time
to load the PDF where it's been off of
s3 into the lambda function that might
be another 200 milliseconds and then say
it's another 200 milliseconds to return
that back to the client our total time
in that lambda function has been 700
milliseconds if all we do is kick off
some other thing and it's some other
service to generate a PDF and then
return immediately our lambda function
is only processing for maybe 50
milliseconds so say we pay for a hundred
milliseconds we're now only paying one
seventh of the compute costs than we
would have done otherwise
and that's just sort of a minor case but
you see this a lot where people being
like how can we move the orchestration
out of the server side and either move
it up into the client or build a system
that is much more a choreographed
network of of components as opposed to
one several central Orchestrator so
another part of this so so our Jane
there is the this the most senior
product manager on the AWS lambda team
and I've talked to him a few times and
he gave a really good talk at reinvent
last year and I gave a link give a link
to that in my resource document one of
the things he says in here about people
using lambda
he says use functions to transform not
to transport if you want to transport a
whole bunch of data lambdas really not a
particularly good way of doing that
unless it's you really need to try and
use buttons up the technologies to do
that it is basically free for a client
to dump upload a large file directly to
s3 it's going to cost far more money for
a client to upload a file through lambda
but the the lambda functions can be used
as a way of actually sort of triggering
other processes or doing some actual
some chunk transformation that you need
to do so that's why we start seeing
architectures that look a little bit
more like this instead of happening
having one central data processing
server to rule them all which is what
I've certainly worked with in the past
is we're starting to build up these
networks of collaboration that we want
and there's no one server process in
here there's no
orchestrator and this isn't new either
we you know sam newman talks in his
microservices book about choreography /
orchestration and in the micro-services
world and I think what serverless does
is it takes that and again ramps it up
another level because you start seeing
not just it's cheaper to do this and it
is extreme much more much cheaper to use
service systems in this way but it makes
it far far easier to build in you've
build on new functionality when you're
trying to prototype something new as a
concrete example the the really the
reason that my business partner and I if
there was one reason that we could have
to say about why we got into this we
built this brand new data processing
system when we worked this out tech
company process - I say on the order of
hundreds of millions of events a day so
you know reasonable-sized not Google
size but reasonable size there was a
product team so one of our front end our
teams they start wanting to start
capturing a new piece of data from from
browsers and start sort of you know have
an a/b test where they could do
something with that and see sort of what
what behavior they would get but for
that they needed to make a change to our
front end ads and also a change to our
data processing with our old system it
would have taken months it would have
involved five tech leads to figure out
how that was all going to work and would
have been something of a nightmare the
way that we built this service system
was so flexible and so easy to add on to
that it took one of our new engineers
and she joined us as a QA just a year or
so before a transition to being into an
engineer it took her two weeks with a
little bit of time from one of our tech
leads so that was just extremely a just
extraordinary what we were able to do
from a developer productivity point of
view compared with how we were how we
built systems before the other thing
that sort of was seeing in the
architecture side and the best practice
thing is we're starting to see more
about and this is not again not just for
service but about events being
considered as first-class citizens
Randy Shoop who's the VP engineering
instead of stitch fix just wrote a
really good article on this stuff not in
the world of service but how are we
thinking about
thence Martin Fowler also wrote an
article on on events last year and this
is really kicking in in the server space
because we're starting to see Microsoft
have their product called event hubs the
service framework have created a product
called event gateway where they really
think that we need to be managing events
as a first-class activity to make the
most of service this is all new we're
still figuring this out I'm not going to
say go and use one of these products
right now I'm introducing this to say
this is the sort of conversations that
are going on within the server's
community to try and figure out how do
we use this stuff best because this is
very very new ok so a little bit of
crystal ball gazing now so that stuff
will have to happen there's a little bit
more crystal ball gazing if I if I would
sort of you know bet on things I will
stress that I did a blog article before
reinvent in November where I gave my my
predictions about reinvent I was only
about 50% correct so if I'm 50% correct
on this it's probably about right so
what we can see in the future I think
we're gonna see some standardization and
collaboration across the different
functions as a service vendors right now
it's pretty easy to translate for
example an Amazon lambda function into a
Microsoft Azure function that's that's
that's relatively simple to do but
wouldn't it be nice if you could just
use exactly the same function on lambda
and Azure functions I think that this
might come I think that it's it's simple
enough that we can figure out a common
interface between between functions and
it and this may well arrive this is sort
of similar to the containers world we're
sort of starting to settle into there is
a standard for containers I think we're
going to see a standard for functions as
a service I think that the pretty much
most teams are going to embrace some
kind of lease some kind of hybrid
architecture even those that are really
into running their own their own
containers and I'm a fan of containers
in in in many situations but they want
to run their own they want to run their
own servers their long-running servers I
think they're at least going to start
using more and more service components
and what they do most teams already use
s3 for example for some parts of what
they do there are most teams that are
Amazon users I think they're going to
start using more and more of the
other little bits of service as well
even if they're not building the
majority of their app using lambda I do
also think that open source functions as
a service implementations which I
haven't really talked about because I
don't really use them are going to be a
stepping stone for a number of teams
here so steams they're like yeah we like
the idea of function service but we're a
little bit worried by the vendor lock-in
of Amazon lambda they might end up just
using some open source implementations
of Farr's until they get over that point
and start using lambda but the fastest
teams I think all teams will use service
to some extent I think the
fastest-moving teams are gonna massively
exploit service this is going to be a
change that I think that we're going to
see and those are both the current
servers technology that we have today
and a bunch of service technologies that
don't even exist yet like solving some
of those problems that we talked before
about before how do we manage events
across a whole bunch of different places
that's the kind of service technology
that's still to come I think DevOps
culture the adoption of DevOps culture
and not just of you know making our
operations more automated
I think the DevOps culture adoption is
going to be be rapidly accelerated and
that's because really our processes in
our culture and our management need to
catch up with what our technology can
now do it used to be our sort of we know
we had these great processes but our
technology was slow and Twitter you know
engineers were sitting around twiddling
their thumbs that flipped around now our
technology is ahead of what we can do
from a cultural point of view and so our
culture needs to catch up and once it's
done that what we're going to start
seeing is this whole idea of continuous
experimentation the idea that instead of
having months and months and months of
roadmap we're gonna start seeing okay
let's try and experiment see what
happens and iterate and we're going to
do that every week or two because it's
going to be so easy to try out a new
idea and get it in production and get it
in the hands of our users but that's
going to be seen as a far more effective
way of working than trying to plan nine
months out about knowing exactly what it
is that our users are going to want so
to sum up so this is a distracting name
for some quietly revolutionary
technology and I say quietly because
it's actually in
going on slowly for about 12 years now
it changes many of our constraints and
assumptions so don't go into using
servlets just assuming that it's just a
different technology platform to design
the same application architectures that
you've done before
I think we're leading companies in ten
years time we'll be the ones that are
going to figure out how to use service
the best I genuinely think that this is
going to have a significant business
impact and not just a nice little
surrounding error in engineering
thank you very much so if you want
resources for this talk you can either
go to my Twitter which is at might be
Roberts the last week I gave a link
otherwise there's this link here as a
bunch of there's the slides but there
are also a whole bunch of links of talks
and articles that I that I mentioned in
the talk that I think a pretty useful</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>