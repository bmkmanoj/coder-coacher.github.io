<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Solving 5th grade math with F# and OCR - Martin Andersen | Coder Coacher - Coaching Coders</title><meta content="Solving 5th grade math with F# and OCR - Martin Andersen - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Solving 5th grade math with F# and OCR - Martin Andersen</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ij08U1GGf90" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Martin Anderson and I work at
Capgemini if you'd like to contact me
you can visit my blog Martin and dotnet
and actually the first blog post I did
was about this presentation solving
fifth-grade math using f-sharp and OCR
now the math was my ten year old son's
homework and I showed him how to solve
it to resolve it together to show them
the possibilities of programming I
really like this quote from Steve Jobs
everybody in this country should learn
to program computer because it teaches
you how to think now this is also my
motivation for teaching kids to code to
teach them to think not necessarily for
them to become programmers I feel that
young people today are very good at
using new technology they all have
smartphones and tablets and more IOT
devices in their homes than ever before
but they're not as good as creating
things with new technology and that's
where I feel that we as developers can
help inspire them to create new things
with new technology around 2012
movements worldwide started to happen to
promote the teaching of computer
programming to kids one of the first
country that was Estonia with a pilot
project to teach first graders to code
and a lot of countries has since
followed just recently Sweden announced
that they were going to include
programming in the master subjects for
first graders in no way it's progressing
a bit slower but a pilot project was
started in 2016
aided by lakitu coding which means teach
the kids to code and it's a voluntary
movement that works to ensure that
children and young people must learn to
control and understand their own role in
a digital society just yesterday
NBC and last-hits accoding arranged a
so-called code club here at NBC for a
six consecutive year so very pleased to
see that in DC as involved in this
matter if you would like to teach kids
to code or if you know of any case that
could be interested in learning to code
then go visit the lab hits a website it
has a lot of good material and you can
even find code clubs near you and if
there aren't any you can learn how you
can start your own
our journey into programming that would
be my journey with my kids I recall one
of the first things that it was to ride
against the numbers game in c-sharp and
JavaScript
it's where the computer picks a random
number and you try to guess it and if
you're told if your guess is correct or
if it's too high or too low and you
continue until you get it now at the
time the kids really fancied playing the
game but they didn't really understand
how it worked so it was a bit too low
level at the time to start with a
programming language and often when
things are difficult to comprehend it
helps to visualize it so that's when I
turn to scratch which is a visual
programming language it basically works
a bit like Lego that you are simple code
blocks as you can see here on the left
to generate your program so this is
basically the whole world of scratch it
might look simple at first cause you can
build some pretty cool stuff with it
people have been building 2d arcade
games like Mario and Sonic and I've even
seen some Minecraft clones so I can't
say enough good things about this
project it's a cool cool project then we
took a step towards real programming and
started playing code combat it's a
role-playing game where you control a
hero and you'll learn experience points
as you advance in the game and you can
equip your heroes with this enquire
different kinds of equipment so one of
the first things you do is to equip your
hero with a pair of boots and that
exposes methods like in which direction
to move and you can solve the maze and
get the gem it's it's evil language for
this is Python but it also supports
other languages like JavaScript and it's
open source so if you would like to help
with the translation or even do some
game level design then you can go ahead
so this is a real cool example of
gamification of programming then return
to a programming language initially we
tried with a pair of languages like C
sharp and JavaScript but this time I
decided to go with a functional one
because it's more declarative and lift
noise and as a primary dotnet programmer
the choice was easy so we went with that
sharp so for those who don't know that's
the shop logo darica button so at first
we just used like the Eric collection
and F sharp and some of the functions on
that like the sum and average just to
solve some of my son's math a sign
but in one day sitting at home I heard
him complain about his mouth being easy
boring and repetitive he's done the same
assignment many times so I looked over
and I found him staring at this now it's
in Norwegian but basically the task at
hand is to find the largest number
within each self so in the top left here
would be one point five five and in the
top right it would be five point nine
nine and note that the decimal separator
in Norway is coming so when we as
programmers are tasked with something
that's boring and repetitive we tend to
automate our way out of it so I
suggested to him that we could solve
this using programming and I got his an
attention immediately so we start a pair
programming with me in the driver seat
we sat down and identify the task
wouldn't need to solve and the first was
to get this from paper into the computer
and once we had it in the computer to
parse what we have gotten in there and
identify the cells and figure out the
largest values so the first task of
getting from paper to bits and bytes who
solve using OCR or optical character
recognition which is the process of
converting an image of data you know
image of text in the day image of a text
into data compute on of things now there
is a lot of OCR engines out there but we
quickly settled on the tesseract engine
which is maintained by Google it's been
trained on thousands of fonts and it
also has support from many languages and
it came with a dotnet wrapper so we
could start using it and it was simple
it was just these lines to get the text
out of the image and into two
identifiers so we initialized the engine
specifying where the data files could be
found and then we specified the language
in question which was Norwegian not
really relevant in our case because we
were only concerned with the numbers but
still specifying it then we had scanned
the assignment and we loaded that from
file and then we processed it with the
image or with the engine and then we got
back a so called page and that page has
a get text function that we bound to the
text identifier which then contain this
so as we can see it gracefully handled
the table layout there were a lot of
blank lines in in there and there were
some capitalization issues you'll notice
that some else became capitalized up
there
and that might be because of the quality
of the scan or that the engine just
hadn't been trained enough on this fund
but the numbers all look good so we
could proceed to parse it and start
writing some code
so for 9f showers this is basically live
link the operator here on the left is
the forward pipe operator which just
takes a result of the left side and
hands it over to the function on the
right side so we took the text split it
on the new line and then we remove the
entry entries and there were also a lot
of lines in there without a single white
space so we filtered out those as well
and then there were two lines of text
that weren't relevant in our case so we
skip those two and then we met the
remaining lines - a parse line function
before printing out the resulting array
so the parse line function looks like
this and it takes in a line as shown
above a sample as we can see is six
values separated by a white space so in
the code we split on the white space and
then we map the string values into
decimals and there you can see we're
specifying that is the Norwegian culture
to handle the comer when we determine
the largest value on the left and on the
right using error take free and very max
to get the max value on the left side
left column and then similar to get the
max value on the right column now in F
sharp the return value is always the
last expression of the function so in
this case the parentheses indicate that
it's a tubule and it's a tubule in
containing the largest value on the left
and right so that was what was returned
from this function and the result was
this so as we see one point five five in
the top left five point nine on the top
right and etc so my son was impressed
and I have to admit so too was I that we
were able to accomplish this with so
little code and so quickly so all
credits to the tesseract library for
being easy to use and for f-sharp for
being clear and concise then in the
beginning I told you that this was my
first blog post it's not like I haven't
been social I've been active on Stack
Overflow and I
in active on Yammer at work and I've
been attending meetups and arranging
user groups at work but I had been
hesitant to put anything out on the
Internet
because I basically had this view of it
something goes in and hate comes out on
the other end nonetheless with a little
motivation from co-workers and others I
finally took the plunge so I set up my
own block and I blogged about this
experience and then I posted a link to
the blog post on Twitter and luckily the
internet wasn't so scary after all so
Dunst I'm the creator of F sharp tweeted
some kind words about my blog post and I
eventually got 91 likes on his post and
about 40 on my own I was very happy to
go and tell my son about all the likes
we've gotten so I went to him I said you
know I blogged about our experience and
he goes yeah I guess we got more than
100 likes and then it just stood there
for a moment looking strange captain
before replying that's nothing Ronaldo
gets millions on Instagram so yeah not
as cool as Ronaldo but I was pleased
with the feedback and I've been blogging
since so I hope my storage can encourage
some of you to start blogging and become
social developers and who knows it might
be you standing up here next year thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>