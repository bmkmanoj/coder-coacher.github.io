<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What can we learn from 750 billion GitHub events and 42 TB of code - Felipe Hoffa | Coder Coacher - Coaching Coders</title><meta content="What can we learn from 750 billion GitHub events and 42 TB of code - Felipe Hoffa - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What can we learn from 750 billion GitHub events and 42 TB of code - Felipe Hoffa</b></h2><h5 class="post__date">2017-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/apk2pzubHH4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone good morning I'm Felipe
Hoffa I work for Google thank you for
coming to my talk today
I've been Google developer advocate for
the last four years before that I was a
software engineer for Google and then
they just they said I was too pretty for
to stay behind the keyboard so now I go
around the world I'm in videos I'm on
social media yes I have an amazing job
and I try to bring you as much as we can
from the Google cloud things that you
can use and today we're going to analyze
get half data open source code I guess
that way you came to this talk and this
computer turned off I will turn it on
higher ok so to get started what do you
see here what is this github yes what
else do you see very good metadata so
what we have here is first code but
inside the code we have a lot more
interesting facts we have a life we have
imports we have things that come from
the future in this case this is Python
code we also have more meta data we have
22 contributors we have a number of
folks number of stars a lot of data so
when I see this as we can see cold as
Dayton not only code but also all the
metadata around it or as a friend says
told me to put data very big because
this is big data there's a lot that we
can analyze here so who wants to analyze
it half well I guess that's why you're
here but for example project maintainers
if you own a project how many people
have their own projects on github good
excellent excellent if at any time you
want to change any of the analysis I'm
doing to do it on your own project we
can do it in real time and we can see
what happens then good to see so many
maintainer so you may want to know
the polarity of your project vanity
metrics are nice it's nice to see how
the number of stars contributors
everything goes up but you also want to
see more about these people it's not
only about the number of stars
it's who are these people what are they
interested in what other projects they
like a change management how many people
will you break if you change your
project if you pray healthy are you
resolving issues on time are you how
long does it take to accept a pull
request etc and also project users
everyone uses github but then when we
want a change it's nice to be able to
request changes based on data not only
what you want but for example telling
the prime maintainer how many people
would benefit from that or how to ask
things in a way that will be actionable
or what other projects to follow what
other related products we have and even
before becoming a new sir how do you
choose a project how do you choose the
most healthy one the most popular what
related projects are out there etc and
of course data lovers they are so this
is a super interesting data set that
it's open for anyone to analyze find
facts about your favorite languages
security if you want to fix bugs bugs at
massive scale now you can do it and I
love doing this kind of stuff we're
going to be reviewing three main data
sets that we have all available right
now anyone can go and use these three
data sets right now and get insights a
github archive this is an archive of all
of the events of from github I were by
our last time encounter it was a pond in
seven billion events but it's still
growing so the number continues to go up
the edge Turin is a similar project to
get her archive but it brings more
metadata so for example you can reach
everything that I use and wrote about
themselves on the profile so you can
start getting more metadata about your
logins and you can
get real-time updates from this one they
are publishing them to parcel and also
the one of the most interesting data
sets I have here is just all the open
source code on github at least
everything that has a proper license and
it's kind of popular we have it stored a
bigquery and now that I mentioned the
query who knows big query yes you like
it
exactly yeah but let's go back to 2012
when ilya grigorik started collecting
all these events from github that was
personal developer advocate at Google he
started recording these events and then
he wanted to do something with his head
so he left them available on a web
server if you want to download any of
these files you just get the hourly file
each one was if about five maybe five
megabytes of compressed data and
compressed 40 megabytes and the load in
this will take you nothing less than a
second to get one of these files but the
problem happens when you start analyzing
this at a massive scale you don't want
to analyze one hour of data you want to
analyze seven years and then we are
dealing with 2.39 terabytes of data more
than on the billion events etcetera
etcetera depending on which they choose
in this case it multiplies to listen
when I have because I started with
January first my sample files from
January first there wasn't much activity
and that's when bigquery showed up to
solve Ilias problem this is a product
from Google cloud that we made available
around that time 2012 and it has some
pretty nice characteristics one it's
fast you can analyze terabytes of data
in seconds and I'm going to show you how
that works here you only need to know
sequel to use it you can scale from
bytes to petabytes it doesn't matter how
much data you have it will handle it
there's no nothing you have to pay to
keep it on it's always on
you just put your data there then you
pay for storage if you write queries you
pay for the each query or not you can
work with your favorite software and
have lower Python etc Google Data Studio
that's a new one that I can demo for you
later
and this is from last week they
announced that finally power bi has a
bigquery connector any power bi fans
well now you can connect it to the query
and to things that are super interesting
about the query one is that you can
share data that's inside if I have a big
data set I can set the permissions so
any of you can analyze it so you don't
need to download anything you don't need
to you can just go to the web UI and
start query or go to your favorite
software and connect it to the table
and everyone has a free terabyte every
month to pull off these queries everyone
also has 10 gigabytes of free storage if
you want to share and then you can share
data ready to be analyzed without
worrying about any costs whoever's
writing the queries pays for those
queries but they also get a free
terabytes which is awesome for open it
next slide so first let's blue let's
look at the stars if you look at the sky
there are millions of stars and what I'm
trying to show here is that it's all
about where do you want to focus very so
much data available the looking at any
ranking looking at any portion of the
sky will only give you a fraction of it
but what's interesting is your ability
to focus or wherever you want to focus
start doing your own rankings start
looking at the people you are interested
in etcetera and when we look at the
stars on github we can look at what
projects have received the most stars
so for example just to dive into let's
do something what are the top projects
by stars in 2016 and I have instead of
using the slider what we will do it life
this is the bigquery UI web UI anyone
can use it and I can type my query here
I'm basically here I'm asking for its
repo repo give me the count of stars in
my github archive table so I have here
the 2016 table which has a lot of fields
2016 we got 320 million events 300
gigabytes of data and if I want to count
the Stars I need to look for the events
that are a watch event I have my table
here group a repo named order by the
count give me the top 20 and this is how
long it takes to go over all these
events which is pretty quick but and we
get that the top project was free code
camp this and it has a lot more stars
that the second play here the Google
interview New York City free program
goals we tensorflow of course Facebook
you don't know Jas Apollo 11 yeah those
were the top 20 but not relief and this
is something that I want to show you
what happens when you start projects and
not signing it in this one but every
time I press star I can then anistar it
and start it again and I'm stirring and
stirring and as we are analyzing a log
events that will show up like a lot of
stuff so this is when you start need to
start doing tricks whoever is doing a
ranking based just in the number of
watch events is getting a number that
might be gained so instead of doing that
we can count the distinct actors that
we're doing the story and then the
ranking changes let me just wait a
second for it to run boom so yeah
freakin campaign did not get it I
enacted hundred thousand stars last year
a lot of them were duplicated people
starting the project many many times so
you have to pay attention to that
because some projects get thousands of
extra stars by this measure I don't know
why people do it but they do it so we
see this not all stars are equal like
one thing is knowing how many stars your
project have which is cool it's good for
your vanity but each star comes from
someone it's star comes from a new
developer from experience a developer
from a Java developer Microsoft
developer and you can start also
learning stuff about them solace
if we compare free code come to
tensorflow free code camp got way more
stars and the tensorflow project and
there were about 3,000 people that start
both but you may want to see more
details about them so with this query
for example I type it here admission you
can see the code no I need to make it
bigger yeah with this query what I'm
doing is I'm looking for each of the
stars who's the user behind and looking
at how many repositories this user have
seen how many issues have they written
how many pull requests how many pushes
etc etc and now i can get way more stats
about these stars and you can see for
example that the age of the users free
code camp are about one year old indeed
half years since they started doing you
have stuff well tensorflow
stars are in average two years old so we
are talking about a more mature audience
free code camp stars have started to
have projects tensorflow 80 the number
of issues of retail comments the number
of pull requests it's a different
audience so now we can start doing
rankings instead of by the number just
by the number of stars we can look at
let's see let's do a ranking
only looking at people that have written
more than 20 user comments this will
show us that they have more experience
they may be more involved and github and
free code copy in this case instead of
having a hundred seventy thousand stars
goes down to three thousand so there's
this shows you when you're doing a
ranking you may want to have maybe the
ranking of experienced people instead of
new people wherever is what you are
looking for so we do this ranking when
we rank things this way free code camp
is not any longer the top project the
top project becomes yarn by experience
people pretty like you need to be able
to look at what you want to look to
focus on what you want to focus and with
this kind of queries you can do it
pretty fast now if you want to see
things they start for example this one I
did with tensor flow with this query you
can see that I'm doing I'm looking for
everyone that start tensorflow and did
not start free code can't because too
many people stir it and then I'm looking
at by price that other people start
there are these people start so people
the 22,000 people that start tensorflow
they also start there's a flow models
caffeic ADA's movement of University
ticket learn and Microsoft's the empty
cake and if you want to run it for your
project just to see what they start who
have a nice number of stars ok let's do
it for BS code ok
don't be shy so for example vs code
instead of tensorflow so people the star
visual studio also start in 2016
type screen and yarn and view and
facebook react you start finding things
that people are also interested in also
a pretty to study in ojs in
and tensorflow it's also interesting too
one day you will get a lot of stars when
people find you and then you will wonder
how did people find you where the
everyone show up usually when it starts
it's not a smooth curve if there are
these events in your lifetime you can
charge these and then you you wonder why
did so many people come here and what I
did here if I joined this data set with
hacker news which we also have available
in bigquery so these annotations are not
done by hand but with a joint I'm able
to see the moment this project this
project show up in the hacker news front
page that's when they get a lot of stars
and then you are able to start looking
at different data sets together joining
them effortless
effortlessly this was my hacker news
versus github query so bigquery have all
day I can use articles and comments and
you can analyze them so here I'm doing a
joint based on the URL of the hacker
news event pointing to it hub and then
I'm also looking at the number of stars
of the project and it shows up whenever
something I'm doing my filter for posted
god mal more than 300 votes on happiness
break health this is when we're choosing
a project when we want to see if our
project is healthy let's look at the
number of issues let's look at how many
people are feeling issues so for example
this query count the number of issue
comment events how many comments we had
parish four issues in every repo and
these are the top projects are listing
the month I did it we can do repeat the
query now again you start seeing
interesting things because everyone
knows kubernetes part or regime butts
out on day
why a top project what should be here
turns out most of these issues are
created by one person so again we need
to bring in different dimensions and
let's look at the number of different
people commenting here so we can see
that if we get the number of unique
users and get the top products by how
many people are commenting we have that
yes kubernetes received a lot of
comments but for from 500 different
offers and that gives him a huge number
of comments per offer this shows people
in this project that are commenting a
pretty involved they come back these 500
people in average cried 80 rotating
comments each this month you also have
visual code here Visual Studio you have
more people commenting there this month
but the engagement was way lower than
kubernetes when it is really out of the
norm but still you can see that these
projects on top our way healthier in
terms of being able to have
conversations compared to font awesome
that have a lot of people commenting a
lot of comments but in average less than
2 comments per person like there's no
real discussion there and you can go
further than doing all these counting
styles and analysis that you can analyze
text you have access to all the comments
that people have written so for example
how to start an issue if we look at all
the issues and we look at the first four
words people really like asking things
in nice ways it would be nice if a good
way to is a common way to start an issue
if it possible to I am trying to Papa
Papa Papa I have the following and again
if we will start looking at multi
measures we can see how effective its
ways
of starting a niche so it would be nice
get 56% percent of closure versus is it
possible to get your issue closed 73
percent of the time because you're being
more concrete on what you want the best
way to get your issue close here is I
get the following being very concrete
asking for is it possible to do and of
course there is this weird issues so
that the humans bear it that comes also
from one project the where which where I
didn't filter doing things differently
so so that the humans come for one
specific project where I should have
filtered but I like showing this stuff
up just to reverse always the thought
that oh I need to look at my fate I need
to calibrate it by number of different
people or by number of different
projects we can run the query now let's
see let me see if we can get that
results here so the query used to have
its special kind of sequel why did my
copy/paste query not work
Oh trailing comma
the sequel has this problem where you
cannot put a comma at the end like C
sharp who has no problem with that you
can with sequel if you comment a line
then you have to delete the comma and it
drives me crazy but you have to do it so
yeah here we have the ranking again and
now if we look at in this case I want to
do the issue ID what's the max issue ad
because every project counts the issues
it has so for example the max issue ad
of this shows me that these are projects
that are getting a lot of comments but
then if we go to so that be humans it's
all at most the second comment data
brackets so yeah it's a sample thing and
maybe it's in a lot of projects but it's
always the first project is a beginner
thing and we can filter it out in that
way to filter out the first comment or
the first or the second one and then we
can start as I was telling you before we
eh torrent we can see the profile of
each user so we can see the country so
now I can't count for I can go to the gh
torrent table and I can find that the
country with the most users is of course
the US interesting enough then India and
China Great Britain Papapa Papapa
Australia's here number 11
not bad of course you can chart and this
is the chart by number of pushes in
Exmouth August 2016
now this kind of ranking is not very
fair because of course the US will have
the most number of pushes again we need
to look at data in a critical way so
what we want to count is number of
pushes per capita and now that chart
changes now you can see that yes the US
pretty equivalent on the number of
pushes per capita and then north europe
is stronger than South Europe Africa has
a very low count of pushes by people
pushing by capita and Australia is doing
pretty nicely again we can do the
ranking and we can find out the top
countries the number of people pushing
divided by population so that means we
have a high concentration of developers
the top one is Iceland and Australia is
here looks pretty nice well between the
UK and look simple but interesting
enough the second one is New Zealand
that's a lot of developers there anyone
knows why this is my first time in
Australia so I need to ask questions
anyone from New Zealand here oh oh ok
make sense you like college that's
awesome so the next question affects you
see this map and you see this cold place
is having a lot of developers you might
wonder well maybe developers really like
confinement or do they like hot climates
again we can join datasets I have
weather also on bigquery so I can look
at the weather for the whole wide world
last year this is the average weather
for each country according to my tables
we have Australia around here which has
it's weird to look at the average
weather of a country because a country
has a lot of weather different climates
but it kind of makes sense when I do an
average and look that yes of course
Australia has a wider range that other
countries but you could say that this is
position in the world and now that you
have an average value you can join it
with my other values and this is ranking
this is plotting temperature this is the
temperature here these are the hot
countries these are the cold countries
and the ones with the most developers
per capita of course Iceland is here on
the top and it goes down as the
temperature goes up
but you have some of a liar so for
example Singapore is super hot but on
top you have a high concentration of
developers if you like what weather go
to Singapore you will find a lot of
coders there too and also Australia is
an outlier like it has way more
developers we would predict by climate
so after it is a pretty good place to
find a lot of developers and warmer
weather than Iceland something pretty
interesting here I call all my stuff by
continent you can see that every
continent follow the same trend like we
have New Zealand which is the colder one
Australia Fiji here for Oceanian because
with temperature but in Asia things go
up the hottest country Singapore the
United Arab Emirates these have their
higher concentration of developers I
wonder why we like they like AC since
you have this data you can look at the
top github prize for country what are
the projects that people from each
country are stirring and then again we
have a lot more regional interest
project so this is from looking at Asia
the top project that starred olive by
Vietnamese people is awesome jobs
Vietnam and each country does it has its
own idiosyncrasies let me see if did I
run the one for Australia yes
so for example before the top projects
start by people that say they're from
Australia
relax yet what reactor legs weld
Keystone flow what is interesting here
compared to many other countries at the
price Australia's stirring are not very
Australia specific like the I didn't
find like something that was scream
Estrela here well other countries
something something you recognized
a half so a friend student made the
tenth one see so sometimes you have this
thing with with projects that you want
to make them popular but the first place
to get stars is locally
speaking of local conferences showing
your project around and approach that
may be interesting for everyone around
the world and will start being
interesting first where you live
University and this is a really nice
tool for people that are developer
advocates like me because I travel to
our country and then I can see if the
price I was talking about got more stars
in the country I went and then I can
justify to my manager flying there so
yes star my projects today and then I
will say that Australia is is doing
things I still have 30 minutes let's
look at the code now this is really
interesting we were looking at stars
metadata let's find all of the code
inside bigquery we publish these a year
ago and there were a lot of Googlers and
people from github collaborating to make
this possible if we had to set up a huge
pipeline but now you can find the
contents of github inside the query
ready to be analyzed so when it took
this screenshot this was back in January
we had two hundred thirteen million
different files 1.79 terabytes but let
me look at the contents github repo
contents right now I have two terabytes
of code in two hundred and forty million
files and I mentioned that we have a lot
more code because what we really have
here is you know the number of files but
each file is only stored once each
unique file so if I want to get my total
number of file I could do some of the
copies and if I want to see the total
number of bytes I can see the lengths
the size size so would these two
terabytes and 240 million files really
represent a total of will a minute I'm
adding two hundred forty million numbers
multiplying should be faster can I blame
the website now it's a yeah this is 50
terabytes but I love yes it's 50
terabytes of of code that we can find
here and again we can start doing
interesting analysis now some rules when
you're getting ready to analyze is first
this is the main table each file has an
ID a hash of its content its size the
content itself if it's a an ASCII file
of less than a megabyte and the number
of copies this is the multiplication I
did the first advice I can give you when
you are analyzing a table of two
terabytes since the cost of the query is
per query you want to reduce the size of
the table you want to go from the two
terabytes down to something way smaller
which could be for example extracting
all of the c-sharp files or extracting
all of the Java files all of the
geography five and then you can run your
analysis over the way smaller table I
left some tables that extracts like that
for example this one sample contents has
only 10% of the contents for the top
projects and one sample path per file so
if you are going to start analyzing
amass start with the sample contents
develop your algorithms and then go for
the big one you only have we will only
suppose that I have an open-source
license and that github can detect that
has an opposite Isis so for example this
one has an Apache 2 license if we go PS
code it have Visual Studio code it
recognizes that it has an MIT license
but there are some projects that don't
show up but just Park Oh finally they
fix it sometimes we'd have dozen cannot
reckon SLS's
and the price will not show up it's
funny when Apache doesn't have an apache
license but things are getting better so
for example from let me let me give you
an example from Java the top imports if
I want to find sorry for doing Java in a
c-sharp conference but we can do C sub 2
here extracted all of the data files for
2016 I'm splitting each line for each
file
I'm and then I'm looking for lines that
start with import and that will show us
it just like analyzing code word will
were the top imports on files from 2016
as you see this file is not these tables
doesn't have two terabytes of code has
only 12 Giga bytes which is much nicer
to analyze I am interesting we get the
top imports which makes sense a lot of
people texting with a unit that is a
nice thing to see but then we can start
comparing by ear we can look in this
slide for example I have and comparing
the top imports from 2016 compared to
2013 and then you can see what libraries
are growing more popular which libraries
are losing popularity it will reflect on
what's the state of the
now of course I let me see you do it
with c-sharp I also gave you I left
these two tables for you I made them
last night all the CF files all of the
packages config so if you want to find
the most popular new no get files
you can analyze this one if you want to
analyze the top all of the a c-sharp
code you have 31 gigabytes of code and
we can do things like oh oh by the way I
when I did my extracting that you don't
need to do I also are more interesting
columns because yeah the first thing you
can do to extract is give me all of the
content where they be is in files that
end with yes but I went further and each
of my extracted rows also have the
number of started that price has the
number of stars in 2015 a sample path so
you can look at the popularity of each
file at least for the top row where that
file belongs to so then we can do things
like let's split things let's look for
the files that start with using let's
count the distinct from repo and we can
see that generic is using a hundred
thousand projects later of service NICU
and of course the top imports come from
system but you can go further down with
any dimensions that you might want we
could find what are the top imports in
Australia if we wanted I just didn't do
it last night but if we have time here
we could do in life also Stack Overflow
a lot of people use Stack Overflow
I do you do and with a query like this I
can go and find for all of the code in
JavaScript what are the top questions
that are being pointed in the code so
for example this if you go search in get
half code and you join it with Stack
Overflow code it's like awful flow data
that is also story bigquery you can find
in
our script the top linkle question is if
there is a regular expression escape
function in JavaScript or etc and of
course we sharp there are hundred eighty
nine files pointing to the question
WinForms B paragraph tooltip why this
one I don't know but you can also see
the number of views that each question
has there are for example 88 files
pointing to what is the best algorithm
for an over-reading system object get
hash code there's a lot of people
looking at that question link into that
question and maybe that good feedback
for the visual for for Microsoft to
incorporate this kind of thing so people
don't need to go to stack overflow also
with a lot of views even more views a
lot of people want to know how to
randomize a list and that would be a
nice thing maybe to add to the API
whoever's designed in the language yes
there's a lot of people that need to do
this and they have to go elsewhere to
find the answer and Sebastiaan did an
awesome project where he started looking
for people that copy paste code from
Stack Overflow to github hey you've done
that so this is one of the most popular
questions I have it has to be super
voted so he wanted to know how many
people have copy pasted this code in
their code he took it of course if you
search for this literally you people who
change it in many ways even Taoiseach on
spaces to target cetera so he reduced
this piece of code to a regular
expression that follows a structure and
look if it doesn't even have the name of
the variables but yes he found this
piece of code in 448 different files and
only 97 97 of them 27 percent of these
files gave any credence to stack
overflow
this might be a licensing problem so be
aware people can find when you copy
paste code at least for some credits
they're requesting features this is from
when we want to change the API if you
want to tell your favorite language to
add a different initial - way to do
things to randomize a list this is from
the Golan list someone was asking I want
to be able to write this after time
until instead of after exploration time
startup time now nice request but how as
a pro maintainer how do you choose if
you want to do this or not in this case
my teammate Francis went to bigquery ran
this query and found that two thousand
repositories would benefit from this
with a new this change so the go team
saw this data so that a lot of people
were doing things in an an optimal way
and they other than new easier way so
another nice thing about doing open
source now I'm putting your code on
github you get to vote just by putting
your code there people can count your
code as voting for features that could
benefit you same thing someone wanted to
saw that TLS config have different
capitalization of different gold
packages and Francis found out that 685
repositories would break if they made
the capitalisation uniform so so far no
one has a valid code the fault now you
can go further like we're doing a lot of
sequel here you can also with
expressions etc but you can even use
Java scripts inside the queries to do
whatever kind of analysis you want to do
you can have your own user-defined
functions so one of article publish is
doing JavaScript code analysis inside a
sequel query JSP the static code
analysis it's a JavaScript library which
I point
I pointed bigquery to like query uses
library and then I can do things like
inside my query inside model of my
javascript files run J's hint look for
the errors you can find in the code and
yes I get results I get that a lot of
lines I'm missing a semicolon that
advice and variables are not defined
which you can do in JavaScript but still
may be a stylistic problem expect
something instead so sorry Papa Papa so
I find it really amazing that I can go
really deep into analyzing code
analyzing texts also if I wanted to do
not natural language processing inside
my queries and do it on scale just to
start wrapping tough their spaces tough
top people here spaces everyone else
I'm nothing whatever they need us yes
make sense so I run this ranking and
this is where all these talk about stars
matter because instead of looking at all
the code on github because there's a lot
of code I only looked at files that
belong to projects that have a lot of
stuff so I look at the top 400,000
repositories by stars and that's the
code I was counting smiles files with
more than two lines its blanket one vote
if a file has mixed spaces and tabs I
choose whatever is more popular and I
did it for the top languages first of
course I extracted all of the rate I
wanted that takes a long time because it
has to materialize all the data to a new
table but then I can run this query that
we can run here just to make it more fun
these are my rules so which you can see
I'm counting the number of lines with
spaces there so stars whatever is the
maximum is the best one for this one was
seconds and here we have our data there
are better ways to visualize this - let
me save to Google I just like doing
this you have to show how fast we can do
stuff and to make it prettier let me
copy let me copy this table I want to
make every number all the tabs bring it
to negative space here
when second place tops
- one times we - perfect
now this is negative and now I can go
and chart this stuff Google chart it for
me
chart too many columns I only want to
come by extension tabs or spaces of each
language gets its own count insert chart
and I want to study so things look
better standard they want to do it
vertical stacking standard and here you
have the percentage of people that do
files we're counting files yeah in Java
it's way more spaces than tabs c-sharp
also prefers spaces and their languages
like go there are all tabs because they
enforce it and see 50/50 and we can find
things this is I got a lot of views for
this post but if at least it's settled
there are people today prefer spaces if
you like tabs go is a safe place to go
or to stay with the CPD to do at home so
this is my chart another interesting
project this is a secure some Googlers
discovered a huge
security problem that was pretty nasty
they went searching with the query for
all the projects that we're having this
issue and the team the 50 volunteers and
patches - all of these projects and fix
the security issue which was pretty cool
you can read that article and the last
one I want to show you here is about the
the commas with which one is on that
side which one who likes the trailing
commas yes of course who likes the
leading commas yes okay so I find the
leading commas horrible but that's the
one I use because sequel doesn't allow
me to have a trailing commas you saw my
error earlier today so I would say that
even though this is uglier in many ways
less natural it's more efficient what I
want to prove is that can I prove to
other people that this is more efficient
let's try to do that so first I went
looking for what was more popular if you
can see training commas on the bottom
here yeah on the bottom here I found 550
million lines of a million lines of
sequel code that end with a comma
well learn that start with a common I
were way less popular and there are some
people that put commas at the start and
at the end of the line
I want judge them but yes there are few
very small minority so if you wanted to
judge by popularity of course you put
your commas at the end but I want to
search for what's more efficient what's
best for products so the question is how
do you define the products more
productive I could count the number of
stars the number of people contributing
to the project activity in the project
that started last year wherever I want
to define as my socks
metric what's more successful and the
query was way longer because I wanted to
be to count all that other other things
activity number of stars etc and my
final result was that there are a lot
most projects do trailing commas some
projects have no comments at the end or
the beginning just at the middle which
is nice but then you're not breaking
some price new boss sometimes they have
leading comma sometimes they had really
commas and a very few minority are very
strict and only have leading comments
and in all these dimensions I found the
place that allow leading commas have
more stars in general last year this
year the number of people contributing
like 11 versus 5 or activity like a
hundred fifty six events versus forty
three events in average for the present
but very consistent on not allowing
leading commas so this is a way that
we're showing people that leading
developers figure out that when sequel
has a limitation it doesn't allow us to
put a trailing comma then they have to
figure out oh my life will be better if
I put the commas at the beginning and
then the parade allows them to do that
those project are healthier phrase that
allow you to do what the developer wants
instead of enforcing a standard just
because so yes who wants to analyze
github hopefully all of you I have this
video with Alice and she works at github
and she also uses bigquery to analyze
and understand their own company I loved
a political video if you want to watch
it hopefully you will want to do this
and there's a lot more people writing
stuff doing analyses I collect
everything I find around tomorrow sorry
giving a talk another talking bigquery
more analyzing bikes the real world but
so you want to see more bigquery go see
hell and if you want to find me you can
find me on Twitter
you can find me on Stack Overflow and
you have any feedback for me please feel
free to leave me anything and that's
basically the talks any questions we
have like nine minutes yes hello
I should I'm very bad cleaning them up
and putting them when I should but
please assist me and I will know most of
the things I've talked about are online
so if you go to my Twitter my medium
reddit you will find just not in this
sequence I have my business is
publishing all these tables are public
so if you go to this URL and you have an
account a creating background
might not be the easiest process but if
you need to put your credit card if you
follow the right steps you will be able
to learn here and start writing any
query in the next five minutes this well
so the three data sets are maintained by
different people two of them are
maintained by Googlers github archive
the contents and the H torrent is an
academic project yeah you can make your
copy and to get all of the copies we
consult to copy all of the contents we
consulted all of the lawyers and that's
why we verify and only move open source
code that we can detect that has an
appropriate license
yes so the question is what happens if
you want to run these a big query on
your own data excellent question
you can load your data to bigquery which
is also pretty so you can if for example
I wanted to create a new table I create
a data set and I can tell it create a
new table which will read data create
new table my UI is not oh here it is
create table it's not a pop up anymore
I can load file data directly from the
web up to certain size or I can put my
files on the Google Cloud storage I will
ingest data and once it's inside the
query things will run as fast as you
have seen it here so what you can do
with power bi is once your data is
inside here you can turn on you can tell
power bi read from bigquery you know
this the secret is to move the data
inside and then once it's in bigquery
there's a there are a lot of tools that
can talk to me to including tableau
including python on top yes that's a
good question what happens with your
sensitive data we have all of the ISO
certifications that can assure you that
your data is private it's encrypted at
rest you can only see it we we have all
the audits to show your manager or
whoever decided that yes that is secure
when you store it here no thank you
open-source tools to capture data into
bigquery there's a lot of tools yes you
can even stream data in real time if you
want to just ignore that
so the specific get have we did it in
partnership with github because if you
want to extract this much data from
github
it will choke like the API it will stop
me from starting from a traitor because
it might be obvious oh yeah that would
be pretty interesting I can talk to the
person that wrote the pipeline Google so
we could document it and have it but
it's basically yeah even if the schema
is not the same it's pretty easy to just
change the query to adapt it to what you
have thanks
that sounds pretty interesting too yes
please is the ingestion process and
bigquery is pretty fast because we're
able to if you put regardless of the
size of the table we can the injection
process splits it between a lot of
computers we need in parallel so one way
is streaming data that will get you the
data immediately into bigquery you can
start writing queries immediately or in
batch it might take two or three minutes
sometimes I just do it on the stage just
to show that it's really fast to get
data inside
yeah yeah you have 300 gigabytes of data
I can see it being ready to wanna be
analyzed in five minutes
sometimes it's less and less is more it
but I really bad it's pretty quick yes
problem and by the way another nice
thing about the queries that you don't
need to think about indexes partitioning
distribution you just show your big file
to be query the query will ingest it and
no indexes were needed for any of these
queries everything is a full column scan
since there's a lot of nodes running
things scale fast without you worrying
about that the most are repose in North
Korea there are not many yes so I have
for South Korea for sure so when I want
to run this type of queries I go to my
article so table github projects per
country and I just copy my I look at
whatever I polish first so South Korea
the top project there in South Korea is
Seoul OpenGov but you want to see the
stars for North Korea we have two
minutes we will will we manage I can
copy my query and this is just to show
you that anyone can go to my medium post
take the query paste is here and let's
look only
where is my country code let's see well
see that is so l equals NK I'm assuming
that's the code for Korea there's a oh
yes that's about worry
taratata tatin probably my filters will
leave that country out let's see what
happens so what I'm doing here in this
query I'm taking all of the stuff for
2016 all of my actors and the poor will
return zero problem we can do this the
first question is what's the country
code for North Korea is so how many
laterals KP ok let's now I need a
three-letter code P ok ok
yes we're country called equals where
the ISA equals b arky when we have
results some time
suspense - yes again what i'm doing here
is combining these two tables and it's
not returning anything what I'm doing
yeah I would put here country code
equals prt
let me do an even smaller query just to
get when the big four is often well just
try smaller sets to see if you can get
anything at all yes so that's this table
which have my data into two to create a
fake dollar country oh no sorry
it's the - I don't know wise move to the
three-letter code oh that was to get my
map so what was a two letter code care
Korea and watch events in 2015 by people
from thank you everyone
I love pair programming yes now we can
select
yes you know I need to order by stars
desk and if I don't do it now we have to
vacate the room but I can tweet about it
later
because oh okay yeah free code camp of
course tensorflow soul hope in love are
you sure this is North Korea not South
Korean okay North Korea ISO code to KP
okay last query of the day at least we
are getting results and we're getting
results that makes sense then
oh thank you
they gave two stones to poke which is a
robust elegant feature-rich template
engine thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>