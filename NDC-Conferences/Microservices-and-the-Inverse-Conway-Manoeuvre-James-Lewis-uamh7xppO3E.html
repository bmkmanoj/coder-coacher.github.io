<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Microservices and the Inverse Conway Manoeuvre - James Lewis | Coder Coacher - Coaching Coders</title><meta content="Microservices and the Inverse Conway Manoeuvre - James Lewis - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Microservices and the Inverse Conway Manoeuvre - James Lewis</b></h2><h5 class="post__date">2017-02-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uamh7xppO3E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning how is everyone today
class my partners are my wife is a
schoolteacher so you know pick up some
of the habits from there um welcome I'm
gonna be talking today about two years
agos buzzword docker no micro services
but specifically I'm going to be talking
about its micro services and their
impact on how we think about team
structures organizational structures and
the relationships between team
structures and processes and systems so
this is my hypothesis right right
software boundaries
alright the boundaries of our software
systems are equivalent with team
boundaries in the limit of Conway's law
so when you take Conway's law to the
limit over time system boundaries and
software and organization boundaries are
the same and therefore you can use
organizational boundaries to reason
about it's the cohesion of services
micro services the coupling coupling of
services which testing with what sort of
testing we should be doing which testing
types we should be doing on our services
at different boundaries and also which
integration patterns we can use we'll
finish up with that first of all I'm
gonna introduce myself I work for a
company called thought works quick hands
up who's come across thought works yeah
so the majority I won't go into too much
detail about us we're a software
consultancy there were about 4,000
people around the world now 36 offices
at last count I'm based in out of the
London office and I've been working as a
I guess principal engineer coding
architect for Thor works I've been in
there about 11 years I've got over 20
years in the industry so Greybeard
actually shaved the gray beard off today
because it interferes with microphones
you know tricks of the trade this is us
as I say we're a consultancy consultant
yeah hell yeah work so if you want
people like this people with beards
maybe come to us so as I say I'll wait
for Thor weeks we've been involved in
building both open-source tooling and
contributing to literature
Orion software engineering for that's
part of 20 nearly 30 years now in some
of these you can see some of these some
of these books we've contributed so
continuous delivery Lin enterprise
patterns of enterprise application
architecture some of the open source
projects I've got more of the Java ones
up here but things like jmark selenium
cruise control were all built by people
who either worked for for works or were
working at the weights when they built
it built them cruise control the first
ever continuous integration server and I
had to you know because I saw a cap over
in the far side of the room I have to
say that behavior driven development was
also a something that came out of
someone who used to work for thought
wicks down north hi Dan this is me James
Lewis as I said I've been around for
back in the industry over 20 years now
but principally these days I guess I'm
known for my contribution to whip-around
micro-services I co-authored this paper
with Martin Fowler trying to define what
micro service architectures are and in
that we call out the characteristics of
micro services as we saw them based on
what we were seeing teams doing both
internally and externally that were
making them successful at the time so
that's a brief introduction what I'm
actually going to be talking about most
of the time is is Conway's law and the
impact of Conway's law on on software
and on teams so this is my first my
first slide so organizations which
design systems are constrained to
produce designs which are copies of the
communication structure of those
organizations so Mel Conway wrote this
down back in 1968 based on a ton of
research he'd been doing when he'd
noticed based on information theory that
depending on the communication pathways
between teams the high bandwidth or low
bandwidth communication partner pathways
so if you're in a team you've got high
bandwidth communication between you and
your teammates all right you can have
serendipitous conversations and overhear
serendipitous conversations versus other
teams remote teams didn't parts of the
building or it did different continents
or countries very low bandwidth
communication system boundaries over
time will ten
to conform to those information
boundaries right the bandwidth
boundaries of communication between
people that's a really interesting idea
and he came up with this back in 1968
originally he was turned down for
publication by HBR Harvard Business
Review they didn't think that there was
enough evidence to support this claim
but over time this by the way this is
how I think of Melvin Conway he's kind
of like the Muppet is sitting on the
balcony laughing at us you know he's
been since 1968 he's been telling us
that this is the case and he's sitting
on the balcony like watching us all
walked off build software so laughing at
her we're making the same mistakes all
over again
he's not in no that's good some some
properties I go to he is it's feasible
that he would be in the room so I'm
gonna check I suppose because that being
- I mean anyway live in Conway a bit
later on Harvard Business Review and MIT
got together and did a ton of research
thousands of projects were examined to
test this hypothesis Conway's law and it
was the paper was called exploring the
duality between products and
organizational architectures a test of
the mirroring hypothesis and in this
paper they found that Conway's law holds
right so if you if you structure your
organization to have a database team say
a middleware team say and a front-end
team say over time you will end up with
a system that looks like a front-end
some middleware and the database all
right that's basically a statement of
Conway's law this new paper will the
paper that was published decades
afterwards they found that tightly
coupled organizations in tightly coupled
organizations design becomes more
tightly coupled software system has
become more tightly coupled in a tightly
coupled organization but in loosely
coupled organizations and if you think
about the most loosely coupled often
often they're open-source projects in in
loosely coupled organizations the
architecture tends to be more modular
and this has played out in various forms
things like the Linux kernel and so on
and stuff around the Unix
so so these are the characteristics we
called out what I'm going to be
exploring rather than talk about
componentization by services or how we
do transport between services and
integration I don't be talking about
these two things how we organize
ourselves around business capabilities
and running product development rather
than running project development because
these are often overlooked aspects of
the micro services characteristics as we
saw them and as I say these are the
things that we saw that teams were doing
that we're making them successful if you
think of the the Netflix is the
Guardians the Twitter's etc I'm going to
preempt a question at the end because
doesn't matter what topic I talk about
micro services or round micro services I
always get asked how big should a micro
service be so I'm going to preempt that
this is in response to questions at the
end and my answer to this question is
you know like a normal service is about
that big yeah so Mike reservist is about
that big so you all have learnt
something I'm sure and that's me done
awesome see you later
not really so this is the statement
right micro services should be cheap to
replace quick to scale resilient right
and they should allow you to go to quote
Adrian Cockroft former VP engineering at
Netflix now VP engineering at AWS they
should I need to go as fast as possible
this is the goal this is why
organizations are breaking down their
software into much more modular
components but most organizations aren't
set up I suspect to do this and give you
a few examples of some of the things
that happen well I've seen happening so
this is a group of I guess we're all
based functional silos or that you've
seen many traditional organizations you
architects you've got development
testing operations project management
office sales marketing your business
functions right and like a brief
digression this is something called a
core diagram and what this chord diagram
shows actually is dependencies between
things right so the cords represent
where one thing has a dependency on
another thing this is actually this time
I'm a software developer I went through
a metrics of Israel a code metrics
visualization face of this is spring the
dependencies in spring visualize using
the chord diagram and what I was going
through this and my interest in August
ruptures and things I thought wouldn't
it be interesting if you could do the
same for organizational structures right
use chord diagrams to visualize what
happens in organizations and this is the
sort of thing I'm talking about right if
you've got these sort of these silos or
architecture project management officers
so on and you plot them on a chord
diagram and you plot the dependencies of
work flowing around throwing through
this system you end up with something
that looks a bit like this now you can
imagine what happens here right so
someone in sales says I've got this new
idea for a feature it's gonna make your
son of money it's gonna be awesome right
so they go to the project management
office and they say hey PMO we need to
start a piece of work on this so the PMO
says okay well we'll create a project
all assign a project manager and we'll
assign a solution architect and the
solution architect is going to sit there
and do some design for a bit tablet app
and then architecture will hand that
design over to development and
development will say oh cool we're going
to build this thing oh crap
laws of physics we'll have to hand it
back to the architects so there's a line
going back to the architects and the
architects do a bit more we didn't think
about the physics so maybe we'll do this
design understand how many batter
development development do some stuff
handed the testing testing do some
testing sales this was never gonna work
it's totally broken hand it backs of
development that's essentially what I
see in many many organizations don't how
many of you is that familiar too yeah so
a fair amount okay how many working or
organization that's got more than a
thousand employees is it the same number
of hands
probably the interesting thing well this
is another example this is a real
example from a project sorry from an
organization I visited some time ago of
how work flows through the system you've
got the rolls down one side you kind of
IT solutions business development QA and
then you've got time progressing along
the standard axis interestingly that's
coding
that's the only bit that's like coding
the rest of it is stuff that's happening
work sitting in Hughes which I'll come
onto in a sec and I also think of this
sort of system this sort of process
system of work as it being a bit like
snakes and ladders right you sort of
move one step forwards then suddenly you
hit a problem someone from no one fault
that no one foresaw and you have to hand
it back several several steps back into
the process to get fixed
so there's another interesting thing I
think this sort of diagram shows because
each of these lines between functions
represents something specific actually
each of these lines actually represents
work flowing from Hughes into other
queues Hughes in one department of work
waiting to get done flowing into Hughes
in another department each of this cords
represents at least one Hugh and I think
if you read this I think this is one of
the most important books to have been
written about our craft in well its
lifetime I suspect and it's not even
about our craft it's about product
development but it applies a
wholeheartedly to software engineering
principles of product development flow
by Don rynason in this book he calls out
some of the issues with having cues in
your system in your system of work
rather than a software system and he
calls out these simple or rather
complicated effects so when you have
cues specifically when you have big hues
of work in your system all right they
create long cycle time right work takes
longer to flow through a big hue than a
small team so it takes longer to get
done it increases the risk all right of
the work because you've got lots of
stuff in in progress and lots of things
can change over the course of work for
aggressing from the bottom of a queue to
the top of the hue and actually being
done you get more variability you get
more overhead you tend to have lots of
projects or initiatives people spend 80%
of time on one thing 20% of time on the
other thing more status reporting more
project planning meetings more
architecture governance meetings more
overheads you tend to get lower quality
over time
and you get less motivated people
because if you've completed a piece of
work and suddenly has to sit in some
other queues for 12 months before ever
getting into production
that's pretty demotivating compared to I
completed his piece of work push a
button it's live the users are using it
so queues in the system create all sorts
of issues related to these seven things
I like this quote from Peter Drucker the
American management consultant nothing
so useless is doing really efficiently
that which should not be done at all or
to restate it in a different different
flavor two quotes down north it doesn't
matter if you've got you know if your
development team takes an infinitely
short amount of time to actually
complete a piece of work if it takes you
three months to define it upfront and
three months to get it into production
it's still going to take you six months
to get something done so systems what I
have seen and start this off by defining
what I see a capability is I nicked this
from Microsoft some years ago so a
capabilities a combination of people
processes systems that provide value to
customers and they could be internal or
external customers so a business
capability is the water of a business
but not how the business works it's not
the business processes inside the
business it's the what if your retailer
its selling stuff and delivering stuff
fulfilling stuff if you're in banking it
might be providing loans to customers
it's not how you go about providing
loans but it's the stable aspect of your
business model the water the business
not the hair this might be an example
this is basically organization I spent
some time with about two years ago now
and they they were a retailer they were
selling tickets for public transport of
one form or another and they'd separated
out these two capabilities into
delivering stuff and into selling stuff
and actually selling stuff was in India
actually a big development team in India
and delivering stuff was in the UK big
development team in the UK and in
between these two things they had this
quite a nice separation provided by a
lightweight messaging bus and so they'd
pass asynchronous messages between these
two capabilities
so these are cohesive one of the things
we look for when we're building software
systems they need to be cohesive of
different levels of granularity and
they're decoupled right so you can make
a change in one without affecting the
other one another property that we would
like when we're developing software when
were building systems of systems but
these capabilities were built by fairly
large teams in the different two
continents not much bandwidth between
them you know as I said Conway's laws
acting to reinforce the boundaries of
these capabilities but what was
happening within these teams
interestingly is that they were using
project thinking rather than product
thinking now I see product thinking is
this idea of having a stable long-lived
team organized around one of these
things or smaller components of one of
these things as I'll come on to later
that has a backlog that it works through
and is stable over time versus a
project-based team where you have a PMO
who gets some requirement from the
business stands up a new team of three
or four developers with maybe a QA or
maybe a PM or whatever and then they
dissolve after the work is completed and
they hand that completed work product
over to an Operations team so
short-lived project teams versus longer
live product teams and this morphs into
over time the on idea of you build it
you operate it which is the kind of
Amazon to pizza team model so this
company even though they have these
nicely decoupled capabilities across the
two countries they reason these project
teams to deliver these capabilities as
what would happen is a group of
developers and maybe a tech lead and a
QA and a PM would get together for three
months to deliver something and they pop
into the codebase do some stuff and then
they'd pop out of the codebase again and
then like a month later another few
developers would pop into the codebase
and pop out it's just happening on both
sides and so on and what ended up over
time happening or over time what ended
up happening is and I think this is you
know I'm I'm a fairly lazy developer
lazy in the sense that if I see you know
a problem I can automate I'd like to
automate it for example but I'm also
quite lazy in the sense that I tend to
take the path of least resistance
solving a problem and there was no
ownership of these individual
capabilities they weren't decomposed any
further than just big chunks of stuff
and as these developers were popping
into the codebase and popping out again
popping in and popping out they were
taking the path of least resistance so
we ended up this this company ended up
with each capability composed of many
many many small web services which were
massively coupled to one another
lots of Chatty interfaces because I'd
you know a developer would turn up and
look at the code and say alright well I
need to talk to that thing over there
because it's got some information I need
got some data I need wouldn't bother
because lazy like me wouldn't bother to
like look at the api's that were already
there and just say I'll create a new and
I'll create a new web servers endpoint
so over time you have these incredibly
chatty comms happening I've seen this
happen on multiple occasions and I
should reiterate that I'm not using lazy
in the pejorative sense here I'm using
lazy and lazy smart not lazy stupid
right or lazy lazy what ended up
happening with this is over time they
ended up with one of these kind of I
guess they were trying to work in an
agile way small smaller agile so they
were working iteratively in two-week
sprints but they ended up with this
coupled unheeded mess that had to be
essentially regression tested deployed
all at once performance tested for six
weeks they do iteration iteration
iteration and then six weeks of
hardening this is essentially you know
three mini waterfalls all right
happening and then yeah this is classic
scrum or four or something like that
they also had this problem where because
they were everything was tied together
very coupled they had to they had to
test everything together so they had to
have all these lovely different services
but they all have to come together into
this integration environment for this
regression testing for this performance
testing hardening period I see this in
so many places you often get these sort
of responses when you ask well why why
have you got integration environments
end-to-end testing environments well why
can't you deploy more frequently yeah
well we can't deploy because we need a
new integration project or environment
for this project and it'll take
six months to get one we can't use the
other one or we can't deploy since we
are waiting for the test team to finish
running to finish running running tests
on a different project that's happening
somewhere else and this is this starts
with these problems you see with
distributed monoliths right or where you
have to bring lots of different software
components systems together in order to
have to integrate and integration test
them together I like actually this is
different it's a completely even torque
actually but I do like the UM the
concept of end-to-end testing or
integration testing being risk
management theater I heard that as a
phrase which I quite liked but these
these are very common responses when you
ask why can't you go faster and what
with what you're doing and this idea of
having to deploy everything all at once
is pretty endemic and it's because even
though you know we're using remote calls
to access other services say those calls
aren't those services aren't actually
decoupled they're normally temporary
coupled together so what you end up
doing is building up inventory waiting
to go into into production you have this
big human stuff waiting to go into
production which increases risk
increases cycle time all those bad
things so beware the distributed
monolith this is not as fast as possible
this is the guy in alphago no this is a
recipe for a nervous breakdown
and actually what this is is calm way
laughing at us I told you about that if
you get all these people together and
you form these short-lived teams and
they run them all around the codebase
over time your code base is going to
coalesce into a distributed model if in
the limit back in 968 so that's all very
well what my good look like though I'm
gonna take a brief Sojin somewhere else
and we'll recognize what this is
Ebola someone shouted at a bola it is it
is the Ebola virus might sound like a
strange place to talk to go to to talk
about business capabilities and
decoupled software systems but bear with
me so this is Pauline Kathy key she was
one of the three people who contracted
free people resident in the UK who
contracted Ebola after go an active
after
to help with the crisis over there a few
years ago she's still alive although
still pretty sick it seems to be
incurable pretty much keeps returning
but Pauline was treated at the Royal
Free Hospital in London which is to
Britt the UK sort of Centre for
infectious diseases infectious disease
treatment that level for containment and
all that stuff and this is from The
Evening Standard and this is a picture
of all the people who were involved in
caring not just the cavity but for the
others and this is this is the
consultant I think his name is Michael
Jacobs who wrote the piece in in the
Evening Standard about her care an
interesting he said about her well I'll
come on to that in a sec but come back
to capabilities wouldn't imagine what a
hospital would look like I figured it
was going to be pretty much the same as
a normal big organisation these
different capabilities around
microbiology Pharmacy physiotherapy
estates infectious disease control
different wards domestic services etc
this is kind of what I figured
a hospital would look like and of course
if you plot this sort of structure on a
chord diagram again you get this these
all this work flowing around the system
you get its cues you get essentially
leave time for getting stuff done being
blown out blood tests take a long time
if there's a lot of blood tests to be
done if you go on the bottom of a queue
and there's lots of blood tests to be
done it's gonna take a long time for
your blood tests to be done I thought
well in the case of Ebola right where
this is such an aggressive disease you
need to make decisions like this you
need to be able to keep on top of this
thing really really quickly to provide
supportive care based on based on
current levels of blood pressure and all
that sort of stuff I thought how do they
manage that in hospitals in infectious
disease unit came back to this thing I
heard about fist from a guy called Mike
Nygaard he was talking about the OODA
loop this was developed by fighter
pilots or a fighter pilot Colonel John
Boyd many years ago now he was a fighter
pilot in the Korean War and post the
Korean War he helped to develop the US
Air Force's and then most major Western
Armed Forces doctoring on on war
fighting essentially and it's based on
this idea that if you can execute
doodle-loop observe orient decide and
act faster than your opponent in a
military in a originally was in terms of
you know that's where combat if you can
go through this loop faster than your
opponent then you're gonna win you must
exceed right at this I mean to give you
an example of how important this is in
the military this drove the adoption of
single engined fighter planes rather
than twin-engine fighter planes because
twin-engine single-engine fighter planes
go we're more maneuverable add pilots to
go around this loop faster anyway I was
thinking what these doctors want to be
doing when they're providing care right
in this in this environment for bowler
treatment they want to be going around
this this little loop as fast as
possible deciding things as fast as
possible now how do we how do they do
that so this is a list of all the people
involved in a bowl okay these are all
the clinicians involved the thin end of
the wedge and these are the support
staff involved this is the list of of
people that dr. Michael Jacobs gave
there's actually a there's twice as many
people in supporting the clinicians in a
bollock hair then there are in then
there are in actually actually like
being clinicians treating Ebola care if
you look at these people
it seems that housekeepers domestic team
leaders deep cleaners engineering
supervisors whole loads of people that
you wouldn't think could have any any
relation to actually treating Ebola on
the frontline what what he said was if
you imagine all the functions a hospital
has to have not only the doctors and
nurses bla they all have to be involved
essentially what he's describing is
breaking these capabilities these are
distinct silos up and creating effects
in an infectious disease capability and
that's what they did with all the roles
that were necessary for treating
infectious disease and that sounds quite
similar to how you know XP teams have
been working for years have scrum teams
have been working for years lowercase a
agile teams cross-functional teams
single purpose focused entirely on a
customer's outcome and organized around
a capability in this case infectious
disease treatment the what of what the
hospital does not how it does it
this is interesting some interesting
data from Thor works about the impact of
work leaving your teams right the delay
that can be caused by work having to go
outside your local team boundary so in
the case of the hospital if you have to
wait and send stuff to the pharmacy wait
wait send stuff to the blood testing
unit put it into the back of the key
wait for it to go through the queue and
then get your results back all right in
our study at a large Australian telco
we've found that stories that left user
stories leaving a team cycled an order
of magnitude slower than those that
stayed within a team an order of
magnitude right that's a massive
increase in the cost associated with
delay of the work not getting into
production in this case this is true in
terms of linear trauma teams and
hospitals my sisters an ER nurse sorry
any nurse and you know this is exactly
how you treat major trauma in hospitals
you have a team that comes together
cross-functional to treat to treat major
trauma this is true for formal one teams
it's not just the driver on testing day
it's the driver all the engineers
cross-functional team single purpose
organized around the capability and it's
true in the military around things that
reinforce battle groups all the Western
militaries now reorganized itself over
the last forty years based around
cross-functional teams with a single
purpose maybe the war fighting thing is
a bit too much so a software existence
proof back to you software we look at
our standard organization what might
that look like if we put these
cross-functional teams together well you
know if you have these cross-functional
teams you don't have these distinct
development or testing or PMO groups you
have these cross-functional teams
subsuming some of these other functions
within those cross-functional teams and
this should be quite familiar an example
this is from compare the market some
years ago I noticed the dotnet rocks
guys are in are in town I actually did a
podcast for them about about the journey
that compared the market went on this
journey and what they had was a big
monolithic application all right with
all the different capabilities selling
motor insurance selling home insurance I
mean pet insurance you can insure your
pets who knew
and a big monolithic database I'm over
time what they've done is they've
separated these capabilities out into
separate separate Banach contexts
separate product lines if your local
market segments and so they ended up
over time and this has taken five years
to do this I'm not saying this is an
easy thing to do by any stretch of the
imagination but they've broken out the
individual point lines into the
different in two separate Banach
contacts separate capabilities each
owning their own data communicating in
their case via messaging between
capabilities so home motor life and some
cross-cutting things right so my account
wall and managing my account and then
you have they have cross-functional
teams that are delivering these
capabilities independently if we've got
any one from compare the market in by
the way this is the sort of place
they've come to know they can't disagree
with me there and back to Conway's law
right you've got these cross-functional
products product teams long lived
they've got their own battle offs that
they manage and they work through so
they've got their own they know their
own cycle times and you can predict how
quickly working get done and so on or
how much throughput they've built and
because they're in these distinct
product teams it reinforces the
boundaries the architectural boundaries
between each of them so the motor
insurance team is entirely decoupled
from the pet insurance team the account
management team is entirely decoupled
from all the other insurance product
lines Conway's law in action so what
does that mean for um thrust in terms of
you know the work flowing through the
system delay getting stuff done faster
and so on we want to go as fast as
possible well it's had an impact right
because we've removed a tongue of these
cues from the system and Conway is still
going you've still got some cues though
that's alright because we can play the
continuous delivery Jay's humble card
this is actually from a card game you
can you can buy this is jazz in this
card game I think there's one down as
well as intime DevOps whoo we can play
that card right well build it run it
we don't just have cross-functional
teams we bring in we bring in operations
into those teams as well terry pratchett
said by the way if you ever use more
than or any use of more than two
exclamation marks is a sure sign of a
deranged mind so you can make your own
judgment about me based on my use there
so what we do is we say we're gonna
we're gonna bring some site reliability
engineering into our cross-functional
teams and a lot of teams are gonna be
responsible for not just building the
software but also deploying it also
managing it when it's in production
being woken up at 3 o'clock in the
morning interesting things that have
happened to compare the market when I
was there because we moved to this model
of owning our own and there are owning
our own infrastructure owning our own
deployment no one wants to be woken up
at 3:00 in the morning by a pager
essentially and it's an interesting use
of psychology that if you give people
the ownership of that a kind of aspect
of software delivery then people tend to
respond by writing code in a slightly
different way both in terms of you know
trying to add more resiliency patterns
in so architectural safety measures
things like circuit breaking bulkheads
these sorts of patterns tend to be used
more but also and another example would
be when you start to understand the
value of the software that you're
building previously before they move to
this sort of build it run it ops moving
into moving into the product teams model
no one really knew how much money was
being made by each of these independent
products someone did obviously somewhere
in finance and someone in data analytics
knew none of the teams actually knew
what the impact of the impact that they
were having actually on the company and
never on their colleagues and pay and so
on so based on this of the model each of
the teams could start to prioritize
things like visualization of key
business metrics so I was on one
particular team that managing accounts
team and we put some various types of
nahdi really graphs in based on
statistics statistics a statistical
analysis of how much money the company
would make on click-throughs from our
page and it turned out it was making an
awful lot of money and suddenly when
you've got an ear
real-time picture on the wall a graph
every day saying your team has made
x-ray and money per day suddenly making
changes to the software is slightly
different or deploying the software
becomes slightly different from a
psychological perspective so anyway as
an aside moving in moving on to move
these operations groups maybe you call
them site reliability engineering or
whatever it's your build it run a team
hooray
that's good Conway's saying that that's
good so each of these capabilities the
idea is they can be tested and deployed
independently from one from one another
and they did they're decoupled that
cohesive Conway's law is acting to
preserve cohesion of these capabilities
and to decouple the software within them
from suffering neighboring teams so you
can change them independently of one
another all right you can go faster so
this is sort of number of cues in the
system better potentially than this
number of cues in the system we've got
less delay and stuff moving around I
said that earlier about an order of
magnitude difference in time it takes to
get stuff done if you move work between
teams so we're getting faster we're
getting the ability to deliver more
value more quickly for Arkansas of
organizations for our customers can we
go further than this I think we can I'm
going back to dr. Michael Jacobs again
he said if you imagine all the functions
a hospital has to have and only the
doctors and nurses but estates
management food facilities and laundry
they all have to be involved
he doesn't say except for those pesky
business people or except for those
pesky food and facilities and laundry
people all of people everyone in the
organization has to be involved I think
that's where a lot of organizations are
starting to move to now which is to move
away and some examples in a moment but
to move away from this idea of having
you know the business across this
separate chasm from from IT
organizations so what my colleague in
can't write refers to is business and
architecture isomorphism so the idea
that if you look
your business and look at your software
systems they should look the same if
you're a business person looking at your
software systems they should look the
same as the business that you've built
what this means is again taking it to
the limit is if you is that potentially
those functions should move into these
independent product lines right into the
product teams and I'm not just saying we
have a product owner maybe and a product
manager and portfolio management is done
with the business people I'm saying
those business people move into the
teams as well so we no longer have a
discrete sales function we no longer
have a discrete marketing function what
we have is that people involved in
marketing home insurance sit with the
home insurance teams they're not in
their separate function anymore now that
starts to get a bit weird right that
starts to get a bit scary
what about economies of scale you say
what about what about the fact that
we're going to gain something from
having all the people with the same set
of skills sitting together well
depending on the type of organization
you are whether your base whether you're
focusing on delivery of value or cost
reduction essentially it might make more
sense if you're focused on delivery of
value to have those people in the teams
since you're gonna minimize delays and
this is what it's all about right
minimizing the delay in getting valuable
software out into production if we have
to wait to talk to all these other
business departments business units
before making decisions putting work
into their queues anytime you add any
time work has to leave your team you
introduce delays so this is what
organizations are moving to moving
business the traditional business
functions into into the capabilities
based on building running teams
so suddenly we just got this massive one
big company with everything everyone in
this cross-functional team comment
doesn't make sense right well Spotify
famously have started talking about this
idea of some years ago squads chapters
and guilds I think they publicly said
recently don't do this I understand the
blog said don't do this I'm pretty sure
that the reasons we find directly moving
to a quote Spotify model would be bad is
that you have to go on the journey
yourself and the journey you go on well
it may end up looking something like
this squads chapters and guilds or it
may end up looking slightly different
and bespoke to you but in the in essence
the idea is you have a team
cross-functional team delivering
organized around the capability
delivering value you have a collection
of teams you have this comstock this
concentric structure based on
capabilities and then product lines or
market segments and then chapters which
is essentially what taking taking the
place of what used to be the development
function so maybe some line management
so so this is a diagram of a company
we've worked with extensively for
several years in Australia as you can
see it's pretty clear so what they've
done is they've organized in a slightly
different they've organized sort of in
the Spotify way but they've called
things like differently so they've said
we can organize around market segments
they sell property write rental rental
property and they they sell property and
they sell commercial property and
residential property and they rent
commercial property residential property
so they've separated each of these
things out into a different market
segment and all the people associated
with that sales marketing as a managing
director etc they all sit within that
market segment so this is where we're
subsuming the business functions within
our sort of cross functional groups
within those market segments you have
groups of teams that they call value
streams and each of those value streams
delivers something to some consumer
somewhere so in the case of residential
property they'll be there might be
channels team who delivers the web
channels to for commercial property or
residential
and each of those Valley streams are
decomposed into smaller numbers of teams
depending on on scale that's essentially
this idea of this concentricity ordered
around business capabilities taking
advantage of Conway's law one step
further again all right
taking advantage of this business and
architecture isomorphism idea in order
to reinforce boundaries between teams
and between software systems and each
team owns one or more micro services in
that case the team size is about 10 to
20 this is sort of XP size teams they
scale up to groups of about 160 to 200
then we know what that number might be
shoutout Dunbar's number perfect perfect
perfect answer
Dumbo's number the number of social
connections you can hold in your head at
any one point
so actually thought works was originally
built around the idea of you should only
have an office with about 200 maximum
people in it because then you know over
that number people are strangers to you
whereas under 200 people you can know
people's names you can ask them about
whether they you know went to the
football on the weekend or or whatever
it is so scale in terms of XP size teams
up in units of Dunbar's number multiples
thereof these concentric circles of
teams and teams of teams it's not the
interesting bit of data that comes from
Thomas Allen back in 1977 so I was I
spent some time doing some research
before I wrote the co-author of the
paper with Martin Fowler on the effect
of distance on the bus on software
development backing up the Conway's law
thing and I came up with this or Martin
pointed me at this this is originally a
PhD thesis and in this he proves that
communicate the amantha communicates
with a colleague about something about
something work-related all right
serendipitously it varies inversely with
the square of distance so if you sit
actually you can see only the
probability of weekly interaction is on
one axis and meters distance in meters
on the other you've got a null point
naught five percent chance of randomly
having a calm
about something useful every week if you
set 10 meters away is negligible it's
not gonna happen all right so the the
actual impact of this is well I guess in
an amusing way if you if you know two
groups of people don't like each other
sit them on opposite sides of the
building but in an interesting way if
you want to have a library somewhere do
sit it at the opposite end of the
building all right but the chances of
having a weekly random conversation with
a colleague varies inversely with with
with the inverse very varies with the
inverse square of distance now some
interesting impacts on on team
structures if you sit people close
together you can have this high
bandwidth again this is Conway's law if
you see people further apart on
different continents
obviously her long what a long long way
apart very low bandwidth they're not
going to talk very often right so what
does that means in terms of how we
architect our systems well simply you
get people sitting a long way apart to
work on bits of the software they're a
long way apart or that you want to be a
long way apart because they will
separate over time and this is true
incidentally for things like stairs it's
not just horizontal it's vertical
distance but two flights of stairs in
and people don't talk to each other
anymore so what does this mean well it
means essentially we should be
collocating the people that we want to
talk a lot as much as possible all right
get the people who are working on the
same thing all right these long-lived
product teams put them in the same place
all right and over time you're that part
of the system will become more cohesive
and decoupled from the other player
other parts of the system these are the
open source model if you've got lots of
people scattered all over the place you
should expect the things that they're
working on to become very very decoupled
over time or more decoupled over time I
should say so collocate as much as
possible and take advantage of
serendipitous conversations so in
summary as you chunk up from this idea
of a small group of you know 10 people
team to Valley Stream a group of these
teams to market segments and then
finally to companies we should probably
be thinking about using Conway's law and
how that impacts the systems that we're
building we can use Thomas Allen's
research to sit
people who working on the same thing
together and then we can use Dunbar's
number to make sure that people actually
share a similar social contract with one
another and also whenever work leaves
your team you incur very might cost I
did have a hypothesis earlier on and
this is this is the result of that
hypothesis and it's called the chunking
up from micro-services to teams to
valley streams to market segments to
organizations practice onion star I
might need a better name for this I'm
not very good at naming it's one of the
two hardest things in computer science
as we all know along with cache
invalidation and off-by-one errors huh
moving on so what I've said is service
boundaries right I'll synonymous with
team boundaries there are equivalent all
right if you if Conway's law holds and
therefore we can use organizational
boundaries to reason about how cohesive
our systems are how decoupled our
services are which test in types we
should be applying which integration
patterns we should be using and some
examples of this right so this is in
between organizations or between very
decoupled parts of your organization API
is at that sort of level one of those
boundaries they tend to you tend to want
them to exhibit low change rates and
very high stability now I think about
say the Google Maps API
all right you don't want to be changing
that all the time because people who are
the millions of people who are relying
on that are going to be their bit pissed
pissed with you I think to be honest so
what sort of patterns could we apply at
these very high stability boundaries
I've got a couple of a few examples so
the first one is semantic versioning so
semantic versioning is not a new idea
but I don't think enough people actually
apply it rigorously this basically says
that we should have very strict
definitions of what sort of changes
require bumps in version numbers of our
API it's really really straightforward
it says if you make a backwards
incompatible change you should bump the
major version number of your API from
one to two if you make a backwards
compatible change all right you should
probably bump the minor version number
and there's a whole ton of other rules
all right so semantic versioning
probably makes sense too
by that at organizational boundaries
api's were offering the outside world
what should be we should use semantic
versioning to another technique but what
about these other ones say contract
testing so consumer-driven contracts
have been gathering pace as a technique
recently to improve stability of api's
and further decouple teams from one
another and essentially what it means is
i'm as the consumer of the google maps
api someone who uses it on my own my own
system if i was going to use contract
testing consumer-driven contracts i
would write a test that describes how i
use the api the behavior of the api and
i would give it to google and for them
to run for me every time they run a
build that's not going to make sense in
terms of google maps api all right the
number of people who are using it that
api the number of different ways that
they use it Google would have to be
running millions and millions of
different consumer different contract
tests every time they made a change so
it probably doesn't make sense to apply
that technique what about between sort
of between different parts of of an
organization different value streams say
within a market segment or different
tribes even if you use in the spot of
the Spotify lingo well probably you
still want to apply some form of
semantic versioning but at this point it
probably makes more sense to apply
contract essen to write tests and give
them to the service providers it also
probably makes sense for consumers of
api's across these boundaries to use the
torrent reader pattern so the tolerant
reader pattern essentially it's a it's a
an executable form of the principle of
robustness it says I'm only gonna bind
to the things in a message or in a
document that I absolutely require
anything I don't require I'm not
actually going to bind to so probably I
should be applying the torrent reader
pattern locally or what about
conversational change this idea that you
know I can just have a chat with Kate
about I'm gonna make this change is that
right Kate yes find other ply my stuff
well you probably want more stability
than just conversational
change between these boundaries between
teams
similarly you probably want to apply
these things but what about within
within your team there's ten of you
you're working on a long-lived set of
services and you've got your nice
backlog that you're working through
should you be investing in semantic
versioning of the api's between services
that you're working on should you be
investing in writing consumer different
contracts for someone who you're sitting
next to maybe maybe the investment isn't
worth it
maybe instead you rely on torrent reader
pattern and actually having a
conversation with the people you're
working with instead so this is the idea
that if you break your software up into
these if you break your organization up
into these but along these lines your
software also ends up broken up along
these lines and you can end up applying
different patterns between different
parts of your organization so some
thoughts to finish I've talked a lot
there's a lot online about me talking
around some of the other points and some
of these other characteristics this talk
was about this idea that in my opinion
successfully adopting micro services is
more about is more than just
componentization vice services it's not
just breaking stuff up into small things
all right it's how the organization
looks whether you're running product
long-lived product teams whether you
doing this sort of build it run it thing
organizing around stable concerns the
business these business capabilities and
so on this is as much a part of the
micro services as much a part of the
success of the organizations that
adopted micro services as any of the
other things like smart endpoints and
dumb pipes and decentralized governance
and so on my colleague in Australia has
got a beautiful description of some of
the implications of this he calls it the
inverse Conway maneuver he says is
design the organization you want and in
the limit the architecture will follow
kicking and screaming at seven boring
full ways so if you if you design the
organization you want if you design a
decoupled organization based around
cross-functional in
feeding business teams over time your
software will end up looking like that
so Conway's law I think sends us signals
these are some of them first one is
constantly ordering work work across
different capabilities you know if
you've got a sub splits requirements up
and hand one bit over here and one bit
over here
that's probably Conway's law sending us
a signal that something's not quite
right
again spitting stories between teams
consistently constantly moving people
around having to deploy everything all
at once that's probably a sign that call
his lawyers kicking in this idea of
Fanning in friend to end testing
everything has to be tested together and
also there's at this idea of a high cost
of work associated with a high cost
associated with work leaving your team
if you constantly happen to raise
tickets with another group in order to
get stuff done if you're handing off
work to other departments a lot if
you're constantly stopping starting and
stopping projects this is all again I
think these are all signals that maybe
the organizational structure the team
structure that you're working within
isn't quite right so I'm going to finish
up I've got nine minutes I think so I
can take some questions I'm gonna finish
up with the last word this is an email I
received a little while ago it says hey
James I've recently come upon your
presentations go faster than your
competitors how I finally stopped
worrying a little love Conway's law
which would earlier versions of this
talk no I am NOT sitting in the balcony
laughing I'm sitting at my computer
learning from you and your depiction of
me as a Muppets figure helps to keep me
humble keep up the good work I was from
mal Conway so blessed with Malcolm
weighs a stamp of approval mic drop
except it's on my head so I can't thanks
very much questions
one of the back yeah that's a really
this so the question is how do you
actually go about doing this right how
do you actually refactor your
organization so I'll give you I'll give
you two very vague approaches all right
the first one is you can either do it
top down so the company organization in
Australia the real estate company they
actually got the senior management team
together so the sea levels and they said
this is what we're gonna do
broke the company up and said right now
you all sit in these bits alright so
that was a very very top top-down
approach to it I think there's also an
approach which is to gradually move
there over time that's going to take a
very long time I mean so in terms of
compare the market they decided to pick
pick one of these things and see how it
worked right fairly low risk thing and
then move on to the next thing move on
to the next thing and over time they saw
that it was they were reaping benefits
from it I want to say takes a long time
that approach is still ongoing that
right so that was May 2011 I was first
there and yes it's still ongoing I know
this is I'm still mates with them
they're chief architect any further
detail did I mention I work for this
software consultancy called thought
works any more questions
so the question is if you've got so I
guess specific roles associated with
technology
yeah the network we've got network
engineers you've got a bunch of people
who have got very niche niche roles who
sit in a network team or sit in a or who
sits in a database DBA team
so one of the things that's becoming
really popular I'm seeing obviously I'm
seeing a lot of inquiries about helping
do this was popularized by I guess
Google Netflix around this idea of
creating site reliability engineering
functions which I mean so in the Netflix
sense they are product they're product
development teams that happen to focus
on providing software services to the
rest of the organization in a
self-service kind of way so it's not a
traditional ops team where you can have
your your DBAs and your networking
people and so on but you have engineers
who may include those people providing
say self-service access to
programmatically create networks right
but you build a product that you offer
to the organization in itself they can
use in a self-service way there's
another another model I quite like is
that what you not only should they do
that and offer that sort of that sort of
service but they should also be you know
those engineering teams should also be
offering consulting for the rest of the
organization they should be offering you
know kind of better practice approaches
to doing stuff so an example would be
continuous delivery right it's quite
common or popular popular to have a
centralized continuous delivery server
farm and if you want to do continuous
delivery you get on to your central
continuous delivery server farm but of
course that you end up with all these
tickets you have to create any if you
have to play by exactly the rules of the
people who've built the hardened
consumers at every server farm so in
that model in the model I'm just
describing in terms of site reliability
engineering that the group providing
that might say well look we've got this
really cool hardened secure CD farm that
you can use but we've also got a bunch
of approaches that
you know that we've used to build that
and so if you don't want to use our
central thing maybe you could learn
about how we did it and take the you
know take our guidance and advice around
it and and build it yourself or maybe
they provide docker files that you can
spin spin up your own version of the
security of the hardened farm sort of
thing but it's more it's it's going back
to this idea of of self-service reducing
tickets and reducing the fact that you
have to wait on work in someone else's
queue in order to get your own work done
I I'm not suggesting in this world any
of those more specialized roles go away
I think what they what they will end up
doing much in the same way that testing
changed with XP with agile all right
testing and I hope in most organizations
isn't there long as someone you know
sitting there going through big long
scripts it's more I'm going to be
writing some automated tests in order to
drive drive quality you know rather than
passively sitting there clicking through
test plans or and then doing the cool
stuff which is exploratory testing
rather than rather than Network
engineer's waiting getting the ticket
I'll open the firewall port a network
engineer now has the cooler job of
building the ability for the teams to
use the network's in a software
programmable way or whatever so I tend
to ramble a lot with questions and
answers does that answer the question
also four ways anything else okay can I
I'll be around
can I remind you there's tickets and
things to rate stuff outside so please
do that it's very useful for the
organizer zone for the speakers in order
to get feedback so please do that and
thanks very much for coming along I
appreciate it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>