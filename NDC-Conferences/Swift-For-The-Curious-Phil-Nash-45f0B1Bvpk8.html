<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Swift For The Curious - Phil Nash | Coder Coacher - Coaching Coders</title><meta content="Swift For The Curious - Phil Nash - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/NDC-Conferences/">NDC Conferences</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Swift For The Curious - Phil Nash</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/45f0B1Bvpk8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so good morning everyone thank you for
coming it's good to see so many people
here who are curious about Swift this
hope you're all curious about Swift it's
a very deliberate choice of words in my
title that I selected because I wanted
to try and appeal to people who aren't
necessarily intending to write Swift I
will keep an open mind of course but I
think it's a healthy attitude as a
developer to keep an eye on other
technologies and languages see what's
going on a particular language like
Swift which certainly in the Apple
ecosystem is becoming really important
as well then we'll look a little bit
later and how that might sell leaked out
into other ecosystems as well will touch
the bit on that and so we're going to
look a little bit at these the context
in history but it's a swift exists in
but that said the majority of this
session is going to be live coding I
want to show you what the language looks
like and how it feels and the nature of
live coding of course is it's bit
unpredictable I've got what seven demos
to get through here most of are quite
short so don't let that put you off but
mostly scenes will get through all of
them so what will keep that open as well
so I wanted to start with a bit of the
prehistory of Swift to really put it
into context and to really dig into that
they actually need to go right back to
the early 80s so the beginning of the
80s Brad Cox and Tom loves StepStone
develops a new language called Objective
C which was basically the marriage of
small talk and C to bring low twos to
the C language C C++ was coming on at
the same time there are quite a few
object-oriented versions of C around
check to see is one of them on a few
that survives to this day and there's a
whole story about some objective-c
volved over the years which I'm not
going to dig into too much
I would actually track a parallel story
that happened and started happening
around the Saints at a time and then
we'll see how they come together at the
end
because the iconic year of 1984 came of
course we're familiar with the the book
by George Orwell of that name and Apple
in 1984 used that imagery in a video for
an advert that they ran in the Superbowl
to introduce a new computer first time
the world asinus computer was of course
the very first Apple Macintosh and it's
difficult to really appreciate looking
back now just how revolutionary this
computer was as a mainstream computer
consumer computer it's the first
commercially available graphical OS is a
graphical a GUI first brought the
windows icons the the mouse menus to the
masses for the first time it also had an
unprecedented level of integration
between the software and the hardware
that's really been apple's key strength
fife in the beginning remain so to this
day for better or worse people have
different opinions on that but we're
definitely in the case of the Mac really
resulted in a complete end to end
product that was not necessary that
commercially successful at the time what
was definitely highly regarded that was
in 1984 P fast forward just a few more
years to 1994 situation actually changed
quite a bit in the intervening years
Steve Jobs will see the co-founder Apple
and also that the head of the Macintosh
team the time had been pushed out of
Apple they got on to form his own
company next next actually ended up
licensing Objective C that's where it
comes into the story and all the basis
of their next step operating system
Apple meantime were in trouble because
their operating system hadn't really
moves on very much and even Windows was
has come along to to eat its lunch
not to mention os/2 and other platforms
if
there are two key issues in the
operating system arena at the time that
basically they all worked so long these
they were looking to to run out
basically that there's two issues our
printed multitasking and protected
memory turn out to be really tricky
things to retrospectively add to an
operating system after a few attempts
the probably the biggest one the last
one is called project Copeland had a
string of projects named after American
composers and basically after a lot of
setbacks by 1996 that project was
cancelled famously Apple at this point
was said to be days away from bankruptcy
unless they could going to pull off some
some big stunt which they did they
looked around for an external operating
system and ended up buying next Steve
Jobs company so that's how Steve Jobs
came back into Apple of course
eventually became CEO again but portly
to our story but the next-step operating
system in which form the basis of be the
Mac OS 10 operating system so that the
marriage of the Mac OS and next step and
I brought objective-c back in as well or
rather brought it in for the first time
so what does this have to do with Swift
well I'll go to that but a little bit
more on this story because forward on a
few more years again by 2005 guy called
John C reclusa so if you're in the Apple
ecosystem you probably know the name
well he wrote an article for our
Technica called avoiding Copeland 2010
that's the reference back to that failed
operating system projects so from the
90s that almost cost up all their
business because they couldn't pull it
off
he was arguing with they're facing
another crisis of similar scale this
time what to do with the operating
system but to do with their main
development language a jap TC was
central to the next step but it was
really showing its age and his argument
was but they didn't come up with a
replacement on modern
development language then they were
going to facing a similar problem that
they couldn't head off by pulling
something out of the bag at the last
minute they needed to be working on it
well he said by 2010
hence the known avoiding cope in 2010
well 2010 came and went no word from
Apple which of course is Apple's way of
doing things and 2011 came and went and
so on but surcoats are actually wrote a
follow-up article in 2010 where he
revisited this idea he basically said
that the air-vent of the iPhone in
particular let's sort of set the clock
back a little bit given up a little bit
more time but whose prediction was
basically still sound they didn't come
up with this new language soon though
very in trouble finally we get to 2014
and Craig federighi gets up on stage at
WWDC careful Developer Conference and
says what if we could have objective-c
without the C and isn't he wasn't
talking about just a variation on
Objective C it was talking about a whole
new programming language which of course
turned out to be Swift
in fact they even named it at the
conference and it wasn't showed us a
teaser of some of the features that were
going to be in the language and if you
were a developer in the Apple ecosystem
at the time this was a really big deal
because not only did this language
appear to have all of the features we've
been asking for for all these years but
it went far beyond that as well in fact
looking at some of these features we've
got a quite a few that appears to be
coming from functional programming
languages and there are a lot of
questions about the Swift going to be a
functional programming language so we're
going to ask that question as well but
that was 2014 three years have passed
since then - how's it looking now I
actually put these sides together
originally last year so next few slides
are from the 2016 stuck over so
developer survey
I did go to to refresh them and to bring
the up-to-date numbers but
they hadn't changed that much and
actually it wasn't quite as clear the
way they categorize things anymore so
I've kept these ones bear in mind that
things are slightly different now but
few of the graphs that I've selected
from for that survey that relate to Swit
first of all most popular technologies
pro-death typed in this case mobile so
Swift is obviously important in mobile
and this is technology it's not just
languages so you know we've got Android
at the top there the first language
there was Objective C but already last
year followed closely by Swift I believe
that is now overtaken it in these and
the latest developer serving but it is
most popular not in the sense of what
people like necessary but it's what
they're actually actively using so
there's also a huge legacy code base off
Objective C code bases out there and
Swift is already overtaking it so that's
actually quite amazing I think so there
we go those sir this was there at
another chart was most loved so this is
more about what people actually want and
this was a languages so rust was topping
the list last year being exchanged a bit
this year a swift is already number two
which is amazing for a language that was
just over a year old at the time s sharp
there's number three's I'm quite pleased
about one of my favorite languages as
well but what's missing from this list
is Objective C what is that comment well
there was a most-traded tab as well on
there and Jesse C's right there at the
bottom I think that says everything you
need to know about the developer
communities opinion of these two
languages at least the ones that is it's
like overflow so the other thing that
happened the beginning of last year or
December of view before was as promised
Swift went fully open source and I want
to read for because some open source
projects are sort of normally open
source they'll do code drops every now
and then but the actual development goes
on privately that's not the case of
in fact the whole git repository was
checked into to github you can actually
go back and look at the very first
commits made by Chris Lattner in 2010
remember that date we can see the whole
thing they're not only that they're
moving forwards the development of the
language the evolution of the language
is all going to be taken place or is now
taking place in public on public forums
and not just between earthly employees
but the whole community is contributing
there are Swift language features in in
there now that have been proposed and
implemented by the community this is a
true open source project and a lot of
people from outside the Apple ecosystem
don't necessarily appreciate that it's
also initiated by apples still
controlled to a large extent by Apple
but it's it's the community language now
that's important so I mentioned that
Dave what we'll come back to that in a
moment actually WWD sees the Worldwide
Developers Conference where all the
apple developer news first comes out in
last year's conference swift free was
announced and the first few versions of
Swift is actually promised right at the
start that they would have significant
breaking changes between releases so
there's a lot of reason that it's
phenomenal that Swift has got such a
wide acceptance so quickly on the basis
that your code is going to be breaking
regularly and you guys to fix it up it's
been a pain point for many people though
being prepared to take that on but a big
push with Swift free was to get those
breaking changes out of the way as much
as possible and stabilize the language
at least I'd be the language level so
there's a lot of breaking changes in
Swift free and they've achieved a
certain level of language stability now
so Swift Falls announced a couple of
weeks ago we've known for some time what
features are going to be in it because
it's now developed in the open and very
very few actual breaking changes sews it
all seems to be working willing to print
their plan
in fact I didn't come back to that that
date after deleted that slide 2010 was
also the date that John siracusa was
pointing to in his article and actually
the fellow up article written in 2010
was one month before that first checking
and the last time I gave his talk it was
just pure speculation you know was that
actually a factor and and I you know I
said at the time but probably never know
and about a month later Chris Tattler
left Apple and who were not all the
podcasts and one person did ask him
there was that a factor and he actually
admitted that it was on his mind at
least when he decided to start writing
Swift so yep if you're writing for a fan
article on the internet you can actually
change things to this girl so that's the
the context that this is appearing when
I get on to some code demos because I
really want to show you what the
language itself is like so I'm going to
switch over to that now Sarah Tran we go
and can you be that okay it's a
interesting configuration would do the
screens in here so hopefully that's
going to be okay for everyone now this
is something called Swift playgrounds as
part of Xcode and it's a really
interesting way of exploring the
language and exploring language features
or experimenting with wood bits of code
if you've ever used a language of a
rifle before well it's like that
actually takes it even further let's
show you what I mean if I just type some
code here so the similar Isis is integer
and you can see on the the right-hand
side we've got the evaluation of that
code pretty much immediately sometimes
takes a little while to catch up so it's
not perfect so if I write another one
here oops
second site
again we see that come up immediately
and notice we've got an integer here and
a string however not to mention any
types so first question is this is a
dynamic language or either the static
language with type inference and if we
hover over this string here we can ask
it to tell us the type they need to
convey that have increased the font size
that that is it is telling us that
that's a string so this is type
inference it's pretty good better than
say C++ type influence inference but not
quite as good as some function rolling
which is king now the K and n it takes
our types if we want to be explicit so
type annotations suggests that the
languages is designed from the ground up
to expect type in for instance people
you only annotate the types when you
need to be explicit about them so most
of the time we don't do that we do set
the compiler do its thing there's a lot
less implicit conversions between types
so it is usually pretty safe so what
else can we do
well let's try and add to that string
now to get out of a typical hello world
and now we get an error we have a look
the error says if I can open up so it's
telling us left fire data mutating
operator that surplus equals is
immutable and it goes server stress is a
let constant so now that's telling us
well let introduce it to constant and
even tells us what we can do to fix it
we can change your let to var and the
fact is I click here again it's maybe a
bit too small to read but it's telling
us that we can we can fix it by changing
X's are I know it's done it
automatically for us so it's a really
productive environment to to explore the
language and does this mess about with
things really so we've got let to
introduce a constant or a name binding
and involve to introduce a variable so
this is already telling us a little bit
about the character of the language
so if you've used some traditional bow
or imperative language like Java or C++
C sharp you know that mutability is sort
of the default and you have to add extra
keywords to get something Const or a
mutable like like at the concert keyword
for example a typical functional
programming language where the
immutability is the default you have to
add the extra keywords to get mutability
supposed to be sort of playing it down
the middle it's just as much syntactical
noise to introduce a constant as a
immutable variable so it's sort of
saying well I don't really have an
opinion on this as a language you do
what what you think is best but you know
immutability is important so that's an
interesting nod towards that the
character of the language so we do that
got our string now now we've been
evaluating strings that we can print
them we've got a console down here at
the bottom so there we go printed our
string so I printed a function and we
could also print our integer if we
wanted to so it will just automatically
convert that to a string for us but if
we wanted to put the two together now
we're there some sort of string
formatting and Swift has string
interpolation so what we do is we put
them put the variables in round brackets
within the string preceded by a
backslash able to do that for four
different types and there we've got a
formatted string there because that's to
place it into the string they're not
relying on the print function actually
doing this job for us so in fact rather
than printing it we can just assign that
to another variable there when it
catches up there we go now we've got a
formatted string so especially quite
nice quite clean I think so what else
can we do
so we have arrived one goat is too much
because we'll come back to this in Amit
so the array literals we have dictionary
literals so we can mappings like this so
you know any self-respecting modern
language will let you do this sort of
thing what have I done wrong simply
equals in and so it's good to know that
the Swift had all their interestingly
for you reference into that dictionary
so you can see what we've looked up one
got a value back it looks like it's
returned in integer but if we assign
that to another variable here so the
catch up again there we go
inspect the value of that you can't read
that again but it's actually telling us
that the type of X is into question mark
you may be familiar with this from some
other languages but if not it's it might
look a bit unusual
evacs if we create a new variable here
let's know Bella's are actually we can
give it the type say string question
mark right there to catch up and it's
giving us a nil we can go back and with
that dictionary do something similar to
the and this on the dictionary gives us
a mil so this looks like we've got
pointers going on but actually swift
doesn't have pointers and it's not that
are accessible at this level it's a very
safe language what this is is an
optional site and in fact that question
mark is to say syntactic shorthand for
an optional of string gives us the same
thing so we can now assign that to give
it a value
really can't type this morning so now
has a value so that's good but then how
do we work with options if we want to do
something with the value well we could
test it with an if statement like this
we can prepare against meal and then we
might want to save printed if we have it
that works it's a bit clunky it's not
particularly safe and now we can see
that it's evaluated to this this string
with optional in the name that's
probably not what we wanted so we we
want to get the value out of the
optional that was an explicitly
unwrapped to be optional by putting the
exclamation mark or or bang symbol in
the end there's a reason that that
symbol was chosen because it looks like
a warning in this danger here using this
in your code you should probably think
about whether there's alternative way of
doing it
and there is so you can do that but if
we didn't have the asleep in there and
we didn't have a value that then blows
up at runtime the hard error is going to
terminate your program so don't do that
what we do instead is we can use
something called an E flat well that
does is the optional header values our
bound variable in the left now has that
values unwrapped safely only within the
scope of the condition so now we can
safely print it there and fire again
remove that it's not going to go into
this statement so that's a much nicer
way of doing things now optional is a
really important interest they're
actually quite a big deal for people who
claim from the objective-c world and
they're still come into terms of it but
it's a really safe way of interacting
with things that may or may not have the
value so there's actually a number of
different ways that you can deal with
optionals and Swit I'm going to show a
few sort of as we go further through
some major demos
- for more on the show now it's called
optional training so if we look back at
that string we had earlier and this is
just a string not an optional we can get
the characters and get the counters of
characters on there by calling a method
that's how we do that now if we wanted
to do that on our optional string what
we could explicitly unwrap it and then
get characters count the course that
will blow up if it's erm it doesn't have
a value as we have there what we can do
instead is we can put a question mark on
the end of the value and that will now
say if we have a value now carry on and
call the the method on it and so on if
we don't have a value just skip the rest
of the expression and just return a nil
that's why we got the nil there so if I
put that value back in when I've got the
value it's simple it's safe and you
don't actually need to know that this is
technically an example of a monadic
binding built into the language in a
hard-coded case you can just benefit
from for what I give you instead there
are way as razors they're doing magnetic
binding more explicitly who's that sort
of thing interests you we're not going
to cover that too much we'll touch on a
little bit later but there's a number of
features like this sprinkle through the
language to really make working with
optionals safer and convenient it's
quite nice so that was the first demo
just to give you a little taster of some
of the fundamentals of the language
we've just been dealing with value so
far and we go straight into another demo
where we will look at functions so let's
define a function to just say hello so
it's going to print
something to the to the console so
pretty simple no arguments no return
value and we use the funky keyword to
introduce the function and we can call
it much easy might expect from most
other languages you'd be familiar with
and certainly not like Objective C not
so many surprises there
so let's parameter is that now with with
an argument so let's say names make that
a string of course after annotate the
tract here we can use string
interpolation here now and you might
expect that we can just pass the string
to the function like that but we can
saying we're missing the argument label
again we'll accept the perfect rip so we
have to label our arguments by default
this appears I come you may seen some
languages that has the optional named
arguments it's not quite like that
this traces its lineage back to
Objective C where the labels for
arguments were actually part of the
method named fact you insert the
arguments into the signature of the
method is really weird thing that most
people knew to objective so you really
struggle with they've made it look a bit
more familiar in Swift but it's still
the same thing going on you have a bit
more control though so we we can
actually suppress the need for label we
put an underscore up there so we can do
that or we can give it a different name
I'm going to think of a better example
yes we can do that so we've got some
control over it but by default just to
name our arguments and this might seem a
little bit a bit of a hassle but what it
does if it forces you to to make your
methods much more readable and I'll
hopefully build it up into an example
that shows that in a moment if we fact
this
that was the one that I meant to do so
that works now so what I've done here is
we've also given two names to the
argument so the first one is the
external name that's the label the
defect name is the internal name the
name is the argument coming in the car
this reads so the function definition is
say hello so name hello name and now the
call is say hello to Oslo it reads
really nicely
it doesn't always drop out quite so
neatly as that but actually very often
it does especially really nice property
of the language is a forces you to write
things in a way that makes things more
more readable in natural language so
going to add a another function now
let's say makes greeting and this time
I'm going to parameterize the greeting
itself so it's another string and I'm
going to have a name again and this time
we're going to return the string as well
so we use this arrow syntax after the
function to say what we're returning so
now I'm going to just build the string
again using string interpolation
and now I can I can use that in an hour
say hello function either suppress the
first argument label so we can just say
hello there and then pass name
that should work
it doesn't did I miss come miss the
second label okay hello it's all working
so now we've seen a function with two
arguments we've got suppressing a label
including a label got a return value so
we've seen most things that we can do
with reductions now interesting with the
labels but otherwise not nothing too
complex yet so let's go look this over
on this third demo and for this one I'm
going to build up an array of language
names so I did have talking C++
yesterday so include that doing a talk
and Swiss now will include that I work
with JetBrains so let's put Kotlin in
there because why not said earlier it's
F sharp was one of my favorite languages
include that one and of course we put
Haskell in because that just makes it
sound more impressive so the list of
languages see what we can do with that
so we've got a method source here now if
we try and call that it's going to give
us an error because actually the error
in this case not so helpful because what
it really means is that this is the
mutable method and reviews let we change
that to viola to work at the source in
place the big part of the changes in
Swift free last year was formalizing
this idea of mutable and immutable
functions on objects so if you've got
salt then you can predict that there'll
also be a method called salted that will
return a new array
that's exactly what it does as we can
see here but I saw to the rain but then
we got a problem because this is a talk
on fist but we've got C test test
surface which is actually last in the
list I thought what we want at all so
soothing to fix that what we're going to
salt the other way so if we come back a
little bit we can see from our code
completion there's another form of
salted that takes a function called by
which takes two strings and returns a
boolean so we can clearly see the
signature of this function but it takes
so let's try and use that to sort our
languages backwards so all we can do
that is to write a function here I've
been giving the last demo you said it's
going to take two strings put this one
in us two and return a boolean and all
we want to do is just provide an
ordering between those two strings and
now sure enough we've got Swift first
that's what we wanted so that's great
that's what we wanted to do but what
year is this we had to write a full
function there surely language has
closures or lambdas depending on what we
call them and of course it does so how
can we use that let's grab that function
and I'm just going to drop that straight
in it's not quite right yet or so we can
get rid of the front keyword in the name
and now we just move that opening curly
brace back to before the list of
arguments and replaced it with the in
keyword and that's our lambda that
should now work it does so that's nice
so we're getting somewhere
we're not saving a lot yet still quite a
bit of code there but now we've got this
land during context presumably we can
take advantage type inference and clean
this up a bit more so we know we know
these must be strings so yet we can get
rid of those that know those annotations
anymore so
with a return type you can get rid of
that and in fact once you've done that
if the body of the lambda is just a
simple expression you don't even need
the return keyword so we can get rid of
that as well
fact if I put that and put it on the
next line to see the whole thing whether
I would put this all on that line but
then it obscures the the evaluation the
right so I'll keep that down there so we
can also now now we've got rid of the
tracks we can get rid of these round
brackets as well that's starting to look
quite clean in fact I will be tempted to
stop there I'm quite happy with the
readability of that but if you want you
can go further so one thing we can do
because we've just got to two strings
here we immediately use them we can just
do that with positional names we don't
need to introduce new names here so
Della's zero and dollar one gives us the
first and second argument respectively
so we can get even service name actually
thinking at this point now that the
filler it's as far as you can go we've
got some more tricks closures or lambdas
are so important in Swift that there's a
number of educational cases to handle
them so most often we've got our lambda
as one of the arguments you'll be the
last argument and where it is you can
put outside of the round brackets so
looser label as well so we could do that
and if there are no arguments we can
also get rid of the round bracket so
we're almost at the limit they're not
quite yet we can go further so let's
give it at that for second go back to
our code completion so we saw that what
we actually wanted was a function it
takes two strings and returns a boolean
and what the function is going to do is
provide an ordering on those two strings
we'll also have a function that does
that in the standard library it's called
greater than so we can do that
I would probably not do that I was I was
happy where we were earlier but I think
you can see how important lambdas are in
Swift there's a lot of different ways
you can do them with different degrees
of expressiveness the paucity depending
on what fits there the contact citizen
does mean that Swit is not a simple
language there is extra complexity
because there's different ways of doing
things but you get a lot of conveniences
for the very common cases so again shows
if they don't the character of the
language what it thinks is important
okay how we doing got a bit more talked
about on the subject of optionals so
let's bring our maybe string back again
that's what we had earlier so another
thing we can do now is looked at what we
can do with Landers there's a a method
on an all optional scored map that if
you works with any functional language
or modern language you should know
exactly how that works and now you can
see how we can use that in a very
succinct way and you see in syntax here
and just print the result so when we map
the optional we'll get the unwrapped the
value in the map we knew that to print
it but if you had to use the functional
language you'll be really cringing at
this because we've put a side effect in
our map you should never really do that
what you should be doing is computing a
new value so let's do something like
that instead of printing it let's
lowercase it instead I put that on the
next line see the evaluation they go now
got our lowercase string
so using that T is not buying as much
would have been much cleaner just to use
in this letter optional training even
we've done it so let's look at what else
we can do
I'm going to introduce a an integer now
the constructor for integers well as a
constructor takes a string so we can
pass a string to an integer and it
automatically converts it for us at
least it will when that catches up there
we go that again if I hover over and
inspect the type that's telling us that
it's an inquest your mark so it's
returning an optional which makes sense
because we can put a string in there
that it's not yes an integer like this
one and then we get a nil
what we would expect so let's now create
an array of strings
that we want to interpret as numbers so
we can't have a code demo without the
Fibonacci sequence so let's let's do
that now so now we can map our array by
that's right the we want to convert it
to a linden mixture so use the
positional arguments again so I put that
on the next line I'll do it this way you
can all that right okay so that has done
the conversions but now each item in the
resulting array is an optional and every
item has a value so that probably not
where we want it so that's math again
and well we know we can explicitly
whoops wrong currency explicitly I'm at
the optional like this now got our
integers that's good but we've got an
explicit unwrapped what if before our
spanner in the works now of course it
bows up at one time
so what we can do is be another filter
in there and so I only continue if we're
not equal to mill now that works we
filtered out the things are double
integers and we've got our array of map
sensitives at the end itself quite nice
in fact that's such a common pattern
that there's a name for it in the
functional programming world and swift
provides just that method called flat
map and we can do this oops
that gives it exactly the same thing in
one step so that map will effectively
flatten I could to dimension it view of
your resulting data so that's some fun
things that we can do with the functions
and lenders as well as options hopefully
I've got time for this next quick demo
going on a slightly different tack nail
and for this demo wants to imagine that
we're writing a tool to help us to
organize conferences so we want to take
talk submissions in so let's imagine
that we have an enum for a session type
and if they do a none some Swift use the
case keyword it's otherwise much as you
would expect so that has say keynotes
sort of normal track session like this
one and we might have lightning talks as
well so we're set things build up our
model here using enums so nothing too
surprising yet so let's now imagine that
we have an instance of one of these as
make it this one a clean note and that
much as you'd expect so now let's to
measure we want to write a function that
will give us the length of a particular
talk so going to take one of our session
types and probably return in integer so
now we can do a switch on Deena it's
wrong casing
and again this looks much as we would
expect so we've got each of our cases
they're going to return let's say a
keynote is a 60-minute their time and
track sessions some conferences I go to
the track session is actually 90 minutes
so let's say let's put that in so we've
got a different sign there and
lightening talk about five minutes so
now we can call that function to tell us
how long it's also going to be what did
I do wrong they Alton let's suppress the
label so yes still vertically note 60
minutes that's fine let's spit track
session in so that's 90 minutes but you
may not be familiar with conferences
where they talk to 90 minutes in fact
weather conference has had different
lengths for for the track sessions so
the atcu conference apt a few weeks ago
where they do 90 minute sessions and
45-minute sessions so how can we build
that into our model we could just put
some extra instances in our enum up here
we can have a 90 minute chat session a
45 minute chat session but now we're
sort of conflating two different things
because they'll often want to just slide
whether this is the track session or a
keynote or a lightning talk and other
times we want to get the lent one keep
those two things separate it'd be nice
if we could sort of associate a bit more
data with enum value itself and in fact
we can do exactly that so in this case
the right one say which is a track
session we've got an extra integer now
it's going to give us some more some
more data so now in our declaration down
here we can construct it with let's give
it a 45-minute track session and that's
still saying it's 90 minutes to the
bottom because we haven't changed our
top line function yet so you don't have
to worry about the associated data here
but if we do want to
we can actually find that value directly
out in the case statement and return
that and if you've used the right
language that has patent matching your
recognizes as as a patent match so
switch statements in Swift to actually
fall patent matches and enums are
actually discriminated unions will
arithmetic datatypes so that's clear
good but now we can do things like I can
create a 37 minute track session well
that's probably not what we wanted to
allow either how can we sort of get back
some some safety that we had with the
enum I've only been out to construct the
device that we wanted well you can have
another enum for session length and I
can put just the cases that we support
in there we can't have numeric cases but
the diffusor leading underscore we can
fake it so let's say we want to have
15-minute 4 to 5 minute and 90 minute
sessions now instead of an integer here
I can just put the session Len down here
well I could say session Len dot let's
say 45 but actually it could be no what
type we're passing in which is type
inference and it will infer the type of
the name itself so we can use this the
shortcut where we just say dot but we
were using that in the the case
statement as well by the way so we're
not quite done yet because for now we
need to fix up our talk line now this is
an email when it will need another
function to deal with that so
call it Len this is right than that yeah
this will return another integer and
we've got much the same whoops it's the
same thing going on here
so 15 square root n 15 minutes of cheat
copy and paste now we can just pass on
to to that function here that should now
give us what we expected so yeah we've
got 45 minutes about 15 minutes and
let's do the same with 19 so it's
important to actually follow what's
really going on here forget the language
features for the moment what we've been
able to build is an exact model of our
requirements that only allows us to
construct values that I valid if they're
not valid it's one that don't won't let
us construct them this concept called
correct bioconstruction arithmetic data
types and pattern matching give us
really powerful ways to to build models
that work that way with just a little
bit of effort so if we get time there's
some refinements we can make to to that
code to come back to it but I wanted to
come back to slides for a second I can
switch that back
that's the one you go the curse
we showed values and expressions in the
functions some functional programming
techniques and all this does tend to
support this idea that Swift is a
functional programming language but is
it what does it actually mean to be a
functional programming language so did
anyone here come to my functional C++
talk yesterday yes not one or two people
because the next slide would be familiar
because I did the same thing in that
talk I quoted from the Haskell wiki for
a definition of what functional
programming actually is because it may
not be what you expect since there that
functional programming there's a style
of programming which models computations
is the evaluation of expressions that
essentially that the central defining
concepts of functional programming and
further down the same page clarifies a
bit more in functional programming
programs are executed by against
evaluating expressions in contrast with
imperative programs where programs are
composed of statements which change
global state when executed functional
programming typically avoids using
mutable state so this interesting
contrast between expressions and
statements if you look at Swift as a
language Swift has salient things like
if statements switch statements or enter
this more in the same class plus context
yesterday but basically this prevents it
from being a true functional programming
language so it's definitely language
that's borrowed a lot of techniques and
concepts from functional programming has
good support for immutability but as we
saw it's not not really saving the
mutability as such so it's a pragmatic
language that tries to strike the line
down the middle and we see this in
another number of modern languages like
a rust and Kotlin as well very similar
sort of giving equal weight to sort of
oo + imperatives styles and functional
programming styles a swift is is much
the same in that respect
we really looked at the Oh outside of
Swift yet so I got I think I've got time
to do some our demos so let's go back to
the playground and yes starting with
this one
so web loads of classes yet so let's sir
such as X page to come down here and
imagine that we're going to continue
this this idea of something for modeling
conference talks and we're going to
create a class for session so familiar
syntax I'm sure but actually before I do
that I'm going to create a struct as
well so what's the difference between a
struct in a class depending on which
language you had similarity with you'll
have a different answer to that so in
Swiss gets much like in c-sharp certain
other languages as well
we're structs declare value types and
classes dessert declare reference types
so it's a strict difference here so
structs are typically immutable that
they don't have to be and they have a
set of values so it's a session site
that we looked at earlier and I'm going
to put some other information in there
as well like title and whoops through
the presenters
so because there is all net that means
we have to construct our struct in a
fully valid state and in fact if we
don't add a constructor explicitly or
effective to get one for free where
we've just populated using the the same
name
so let's create one of those down here
and like this so now I can say it's time
let's make that a 45-minute maybe a 90
minute Clark session title is thrift to
the curious and presenter funny enough
it's me so if something wrong there is
it just catching up
that I miss no divided vote input ah why
is it not I wouldn't put the underscore
that should catch up now it has yet so
we've created our info so now we can put
that in the class so we're going to use
let's again there so to create a session
you already have to have that info so
that that info is what a presenter would
typically submit during the call papers
for the for the conference but then you
have additional information that won't
be known initially for example the date
that the presentation is going to take
place so we'll make that optional make
it a mutable variable so now we can need
to add a constructor to this so
constructors in Swift are called
initializers you see in it keyword
otherwise they look much like functions
but don't return the value and we can
refer to self to disambiguate between
arguments and member variables or filled
so should be reasonably familiar for
anyone coming from the most
object-oriented background stuff into
interesting just yet so now we can
construct one of those
like so
catching up again and date is so to use
dates I need to import the foundation I
think let's say a library typed
yeah that's done it so we have our
session with a date so at some point
obviously we do know what dates we want
to schedule that talk for so we'll fill
that out so we can say session date
equals and they'd expect the dates class
to have some nice friendly constructor
that we can make a date with but it
turns out not because the date class
actually comes from the objective-c
runtime originally NS date it's a very
old class and it's not particularly
friendly so we've got things like time
interval since 1970 I can't really do
that calculation and my head very easily
these days so yeah you can you can find
some code online that will do the
conversion for you if I am and be right
there should ever serve it in these
clips somewhere
that's the one so there you go I've got
this from the stack overflow
it's fix it up a little bit don't need
to worry about what's going on here just
that it works
the main thing so takes a string and
returns an optional date so now we can
say make dates and give it a string with
Elsa month let's see six submit we need
some string
that should give us a date I'll put it
on the next line again so we can see the
evaluation in fact there we see it
that's a link today's date tomorrow's
date actually isn't it you get the idea
so yeah but to do that that's fine but
if we're working a lot with dates it's
um it's a bit cumbersome having to use
these helper functions it'd be nice if
that was actually built in as one of the
constructors of date and we can actually
extend the date class to do exactly that
so going to say extension dates to
extend it and you might see an extension
methods in another languages like C
sharp peasants as a syntax very similar
usually you can only add additional
methods but here we're going to add a
constructor it seems less common so I'll
link that in it but remember also that
our method wants to return an optional
how can we add that to the constructor
Swift has something called failable
constructors so in a question mark when
you construct one of these will actually
give you an optional of that type so
we're almost done
and this is where it gets a little bit
weird for us to check my notes to even
remember the syntax but what we need to
do within available constructor is
either forward onto another initializer
or return nil there's a little bit weird
we're either returning something or not
so we say let's state equal this bit so
the
drafted out dates now we can forward on
to another whoops
constructor and we'll have to use this
one because it's a time interval phone
on so since its time interval zero this
date I guess sorry missed if we've got a
date we'll forward on otherwise we'll
return nil so like I say it's a bit
cumbersome one of the little walks for
the language that I was hoping they
would have sorted out by now that's
going to work and now we can actually
use the date constructor instead down
here fact still catching up and there we
go
that's the sphincters works can't see
the date in there now so we extended an
existing library class with a new
salable initializer just a few lines of
code I've been it's quite nice property
and another thing that we can do I won't
do all of this but we had our helper
functions very numb earlier what we can
actually do is make those members of
vinum thenahms our first class types
like classes that can have methods on
them so now rather than passing in our
session limp we are one so to say self
here
and that should work as before in fact
we can go a stage further and we can
also inherit interfaces on any nun so
bring the implement custom string
convertible standard library interface
or protocol in Swiss terms that has one
method especially a property called
Eurasian and this is the syntax for a
property but do that then this email
automatically becomes convertible to a
string sorry to an integer that's not
the one I want to visit okay yeah
getting ahead of myself
but we provide that other property and
now we can come back down here and
instead say turn don't duration so I'll
skip over these accustomed sprinkler
vegetable bit but enums can conform to
protocols and you can also extend enums
in the same way that we saw we date
so there's actually really good o.o
support in swift with extension you can
even extend a type an existing type to
implement a new interface it's actually
saying that I've not really seen in any
other language which if you think about
it it's really powerful concept because
it allows you to take second track that
has one interface and make it conform to
some other interface that wasn't
intended the time allows you to make
different types work together even
though they've been written entirely
independently but I don't even got time
to to show that one now because I wanted
to get onto one more demo because this
one's quite quite fun actually I'm going
to bring up my snippets again to see
this one
since the bond right so this is based on
a sample I found in a book well it's
quite a nice example to start with so
what it's doing is it's using the Google
Suggest API so if you're going out to
the network to the Internet to to look
up search terms your time so I've come
to some of this out because some of this
is going to cause a problem about that
sir let's put that in for a second
because there are some problems with
this as it's currently written so what
I'm going to do is call this this
function weird spring so let's put our
search term as Y do and now look we can
see on the right-hand side is actually
evaluating this by going out to the
internet and getting the top search
terms for the Y do not particularly good
ones today sometimes are a bit more fun
we could put anything we want in there
but what happens if we don't have
internet let's turn the Wi-Fi off and
full set to refresh and now it falls
over horribly because there's no error
handling in this we've got number of
things going on we've got positive URLs
we've got calls out to the Internet and
then we've got parsing of Jason coming
back there's all sorts of places this
can go wrong but we're just not handling
it at all so what we could do is say
take this one where we are constructing
URL object this first place that can go
wrong we could put in a flap around this
because it returns an optional rather
than that exclamation mark at the end
then we're going to have to indent
everything underneath it and then we'll
go into the next fine
we're going to indent that as well and
so on and we get what a lot of people
call the pyramid of doom or the arrow of
doom where everything just gets indented
for the sake of the error handling it is
not really what you want so instead of
reflecting we can use other construct
called guard let and this works your way
around it says we'll continue on if we
got the value else will do the error
handling bit so let's return returning
an array of strings I'll return an empty
one and we can do that with with all of
these so we've got another exclamation
mark there we can get rid of and again
here we've got a few of them actually so
I'll convert that to work with optionals
and then finally whoops getting the
result out we're assuming it's position
so guys keyword is doing a cast all
right that should now work what did I
miss
expected it anything else yeah here
still missing something and the three
nine reps
for short amidst sailors for that back
leg we need to spit that up okay
that's now working its zeroing out here
so I've got our empty empty string but
nobody would want better error handling
rather than just returning an empty
array there on something that tells us
what actually went wrong so Swift has
something that looks like exceptions
with many of the same constructs but
it's not exactly what you'd be familiar
with in most other languages and in fact
in a way it's more of an encoding in the
language of the result monad that
functional programs may be familiar with
makes it look like exceptions so the
first thing we need to do is but the
throws keyword on the function so it's
part of the functions type or its
contract to say this this function froze
a an exception and that means that the
call site now has to handle that and it
won't compile if you don't so we had to
say try make that call
flip to compile that's not compiling
freeze many good wrong place
okay goes there now actually what I will
do is it'll propagate the exception if
it's thrown but there's two alternatives
we can all see you putting these try
question mark and that's interesting
because that will convert the exception
to an optional so if we don't deal with
exceptions but can stop it at this point
or we can do try exclamation mark and
that will be a hard error at this point
so we've got quite a bit of them scope
for what we want to do with that so we
go we've just try and then we can put a
throw here and what we'll throw is an
enum type that implements error and
let's give it a few cases because this
is Lina we can have associated data if
we want I'm not going to do it here but
we can say what our different arrow
types are so throw that query error and
this is a it's a network
and that should now throw the network
error to catch it we put this in a a do
catch box and then the catch itself
supports the pattern matching so so I'm
rushing through this a bit just to
hopefully demonstrate the power and of
course we can have a catch-all as well
so it doesn't look very much like
exception handling that you'll have seen
in other languages except that you're
always forced to deal with them you have
number of different options for how you
deal with them and the compiler will
will enforce that you're doing the right
thing at all levels and you get the
power of patent matching for unwrapping
them so this is not like checked
exceptions in some other languages this
is a better alternative that does
actually work at least in living a life
by phone at it as you've seen we just
done a networking demo at a conference
and it's worked both ways so that's the
power of fist that's the last demo where
I'm going to the end that I have a last
slide I did it's just this one where
want to say thank you for coming for
listening and all the code that I showed
I've put in a playground on github so
that's the github repository right there
or you can follow me on Twitter
thanks for listening have you got any
questions
yeah so what is v written in C++ it's
not yet self-hosting I don't know if
there are any plans to be self-hosting
but it certainly retinas a or designed
as a systems language so it's no reason
that it couldn't be it just didn't
currently hey yeah so support for async
do you say not yet that's something
that's on the cards for Swift five I
believe we're working on over the next
year was going to be Swift for but
there's other things ahead of it
that's only on the platform itself on
Mac and iOS there is basically a C API
that's not bad called Grand Central
Dispatch that gets you part of the way
there but it's still a bit more manual
than a full async monad but that's
definitely something this honor cards so
a good question yeah yeah very good
question I did mean to bring that up
when I was talking about the open source
quickly deal open source you can you can
actually build it on any platform you
want but there's an official maintained
port for the bun - and that's used quite
extensively by IBM they're doing a lot
of Swift on the server and they're
building out some of the frameworks for
that there's a web server written in
Swift that IBM maintained its early days
on the server it's not a complete story
there yet in fact the async stuff will
really play into that both looking
promising yep
okay so I think if you've got any more
questions you can you can come and catch
me also thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>