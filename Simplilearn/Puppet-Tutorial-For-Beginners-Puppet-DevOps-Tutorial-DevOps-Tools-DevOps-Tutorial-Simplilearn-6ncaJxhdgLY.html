<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Puppet Tutorial For Beginners | Puppet DevOps Tutorial | DevOps Tools - DevOps Tutorial |Simplilearn | Coder Coacher - Coaching Coders</title><meta content="Puppet Tutorial For Beginners | Puppet DevOps Tutorial | DevOps Tools - DevOps Tutorial |Simplilearn - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Simplilearn/">Simplilearn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Puppet Tutorial For Beginners | Puppet DevOps Tutorial | DevOps Tools - DevOps Tutorial |Simplilearn</b></h2><h5 class="post__date">2017-08-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6ncaJxhdgLY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">for today's agenda we will be looking at
what puppet is why people use puppet the
pricing model the architecture and
community around puppet and we'll
discuss puppet Forge we will look at
puppet DSL and then we'll have a demo of
how to setup puppet now let's look at
what puppet is puppet is basically a
configuration management tool when we
talk about configuration management in
terms of servers when you have a lot of
them in a data center or in an in-house
setup you will want to keep your servers
in a particular State
now when you have 10 servers it's easy
to do that using a script or going into
each of those servers manually but then
when you have a lot of servers say more
than 50 or 100 it's not possible to do
that manually in those scenarios a
configuration management tool comes to
the rescue the configuration management
tool is a tool which either runs in a
client mode or a client server mode and
it's got some configuration language
wherein you specify what your state of
the system would be now let's take an
example of a simple web server let's say
you're running 100 web servers so
essentially what a configuration
management tool would do is would take
an input from you and that input could
be a file that has code in it in that
code you will define how the website
will be installed and running you'll
feed that into your configuration
management tool the configuration
management tool will then take that as
an input it will process it and execute
that code on all 100 servers to make
sure that the web server is installed
and running now in this case the
configuration management tool will run
continuously or in specific intervals
either in the client server mode or the
solo mode it will not contact the server
and it will make sure that the state you
have specified in your code is
maintained now in addition to managing
server configuration it is also used by
a lot of people in deployments people
use puppet as a deployment tool in their
infrastructure because they don't want
to use two tools for
one for configuration management and the
other for deployment so that is the
motivation for using puppet as a
deployment tool
people also use puppet as a provisioning
tool so there is a puppet labs AWS
module which is available on github and
that is from puppet labs itself there's
a link for that it helps you to
provision instances and other things on
Amazon Web Services now let's have a
look at why puppet as opposed to another
configuration management tool one of the
main reasons for using puppet is that it
has an easy programming language there's
a DSL which is just like plain English
you don't have to actually learn a
programming language it's just like
simple English it's open source and
though there is an enterprise version as
well the open source version will
suffice for most common needs now I've
seen the implementation of both versions
and you have the same functionality
without the cost the community around
puppet is very good it's essentially the
Ruby community who initially started
using puppet and you'll find most of the
common issues have already been resolved
on stackoverflow there's also a good
collection of open source modules
available you'll find over 4,600 modules
and puppet is easy to deploy and manage
so people can easily get puppet up and
running with simple packages which are
available for almost every operating
system now let's have a look at the
pricing model for puppet the most
popular version and the most widely used
version is puppet open source so it's
freely available and there are packages
available on a puppet labs comm or young
puppet labs comm and these are free to
install and free for life the only
downside is you don't get any support
then you have to update it manually the
enterprise version is available for a
price depending on the size of your
organization and you have to get a quote
from puppet labs the enterprise version
has extra features but they're only
required for an interface class setup
looking at the architecture puppet is
pretty much a client-server architecture
the clients communicate with the puppet
server or SSL so you need to have self
signed SSL certificates because
obviously you're not going to buy
certificates for your internal
communication the certificate is signed
by the puppet server certificate
authority so puppet internally packs a
certificate of
now which you can utilize to sign
certificates from the client so when the
initial installation takes place you
have to sign all of your clients you can
set puppet on auto signing mode but
that's not really safe on the client
side you've got the agent running all
the puppet clients and factors so factor
is an information collector that sends
information from all the clients to the
server public agent is the agent that
communicates continuously with a public
server you can set up an interval for
communication of the puppet agent with
the server on the server side you've got
a lot of things you've got environments
so you can have multiple environments
managed by a single puppet server those
are basically defined on a directory
layer and you've got the et Cie puppet
labs environments folder where you can
define environments you've got in build
certificate authority which allows you
to have assigning Authority which signs
all the certificates of the clients only
after which the clients can talk to the
puppet server you have manifests
templates modules and files which we
will talk about in the next slide now
basically the manifest is the actual
code which configures the client the
modules are full-fledged bundles which
include manifests templates and files
templates are configuration files which
are created on the fly based on the
client configuration so let's say there
is an Apache server you want to
configure the Apache coms will be saved
as a template inside the module then
there are files which are static files
say you want to serve out the index.html
as a static file on your Apache servers
you can store that inside the files
folder inside your module now let's have
a look at the puppet community the
puppet community is a rich community of
a lot of people officially there is no
count but counting the various channels
where people collaborate there are a
little over 2900 committers to github
projects who are directly or indirectly
associated with puppet labs there are
four thousand eight hundred and ninety
three modules on the official puppet
Forge these include modules from the
puppet labs and also from open source
contributors to github so that's nearly
five thousand modules of ready-made code
available on the puppet Forge
so before you write any code for puppet
you can check to see if it's already
been written by someone now there's a
mailing list which has sixty five
hundred and eighty eight participants
apart from this on slack overflow you
have a big tag of puppet labs in puppet
which gives you a list of only puppet
questions that's a good playground for
you to interact with people who are
already using puppet and who are
contributing and helping others now
let's have a look at puppet Forge so
puppet Forge is a github client for a
repository which is hosted by puppet
labs that has almost 5,000 modules of
puppet code so these are both puppet
labs and community contributed the best
thing about this is that they're easy to
customize so when you have a requirement
for anything you're doing with your
infrastructure you can just grab one of
those 5,000 modules and then you can
customize it according to your needs
one of the other benefits is they have
built-in tests so they follow all of the
best practices now if you write your own
module you also have to write your own
tests then you have to spend extra time
writing best practice code all of that
has been taken care of and you can just
download any one of those and customize
it according to your needs
and you're good to go so that's the
benefit you get from such a large
community where people contribute to the
modules and the code and share with the
community the puppet DSL puppet DSL is a
puppet domain-specific language it's the
puppets primary programming language
it's just like plain English and you
don't really need to be a programmer to
write code in it it's kind of a sub
child of Ruby because it approaches and
uses is equal to and greater than Marx
to define things so it's very easy to
learn
you can specify packages that you want
to install you can specify services to
be managed you can do things based on
the operating system that you have
so we'll be writing a small puppet
module which will be using this puppet
to DSL we will do that after we install
the puppet server and the client and
then we will write a simple puppet
module to show how to use the puppet DSL
let's have a look at the demo we are
going to do so you will be setting up
the machines using sudo DNS because we
want to have a resolvable DNS because
only by having a resolvable dns can we
use puppet because puppet uses the SS
certificates now we'll be installing the
puppet server and the client will be
signing the certificates of the client
on the server side and then we'll
proceed with writing an NTP module which
will be using for installation of NTP on
the client and then we'll look at the
puppet programming language or DSL now
we are going to look at a demo here so
we will be setting up the machines will
set up a pseudo DNS locally because
puppet requires a fully qualified domain
name in order to run since there is a
certificate communication taking place
here we will be installing the puppet
server the puppet client will be signing
the certificate and finally we will
write an NTP module and make it run so
now we will be starting a puppet master
and a client I have two machines here
one is the puppet master and the second
is the puppet client the puppet master
has got almost four gig of ram and 4 V
CPUs which I can show you here because
it's a Ruby on Rails application it
requires a lot of CPU and RAM
for the client I don't need that much
RAM and CPU so I've allotted one
gigabyte of RAM and one v CPU I will
start both of these machines and find
out the IP addresses right click normal
start
you
both of these machines are starting up
the puppet client has started up and the
first thing I'll do is login using root
and Red Hat password and then I will
change the hostname so I'll say VI m et
Cie hostname
this will open a hostname file in a text
editor which is vim
then we'll do a DD which will delete
that existing hostname
I for insert mode and finally I'll type
puppet - client
which will be the hostname of this
machine now save this file by doing
escape semicolon WQ exclamation mark and
I'll reboot the machine
similarly going to the puppet master or
I'll say root Red Hat
I'll open the hostname file
you
say didi then I'll say puppet - master
I'll save this file and reboot the
machine for the hostname change to take
effect the hostname change does not take
effect unless you reboot the machine
you
now both of these machines are ready I'm
going to find out the IPS and use the
Mac terminal to log into these
so this is 23
in 21 so 23 is my server and 21 is my
client
I'll SSH to 23 first
you
now in order for the puppet master to be
installed I need a fully qualified
domain name here and a fake DNS which
means a full irresolvable DNS name so if
I do hostname here you see my host name
is puppet master in order to set up a
fake DNS I need to go to the etc' host
file go to the end then I say IP address
host name local then space host name now
this is one of the techniques which
makes the linux server believe that
there's a fully qualified domain name on
this machine I'll save this
then I do a hostname - f yeah you see it
has a fully qualified domain name now so
now we will be downloading the puppet
labs repository for ubuntu 16.04 which
is xenial so I'll say curl - 0 HTTP app
puppet labs
dot-com / puppet labs - release
- pc1 - zhenya yep
you can see there is a debian file which
has been downloaded here I will import
this using the dpkg command so I'll say
dpkg - I puppet labs - release - PC one
- zhenya yep
and then I'll say apt-get update which
will update my apt package indexes on
this machine
you
and now I'll install the puppet server
so I'll say apt-get install puppet -
puppet server - wine
you
so the puppet server is now installed
and we will be configuring the memory
allocation for the puppet server so I'll
say etc a default puppet server so by
default it has only got two gigabyte
allocated we'll give it three gigabyte
because it's JVM
I'll make this three and I'll change
this to three as well and I'll save this
file
I'll make sure the unconfigured firewall
allows port 81 40 which is the puppet
lab puppet server port the rules have
been updated to allow that
I'll now start the puppet server so I'll
say a system CTL
start puppet server
it takes some time because it's jvm so
it takes a couple of minutes to start
the puppet server
so the puppet server is now running I'll
also enable it at boot time so I'll say
systemctl enable puppet 2 server
it will enable at boot time now I also
need to configure a fully qualified
domain name here so okay so I'll do that
by going into the hosts file
I'll go to the end and I'll say one
ninety two dot one six eight dot one dot
two three and then puppet
- server got local and then puppet -
server
if I do a hostname - f
put - master dot local because the
current host name is puppet - master so
the trick is to have the host name dot
local in front of the IP address in the
host file
having a fully qualified domain name now
now we will go to the client setup the
client setup is almost the same with
just a small difference the package
which we need to install on the client
is puppet agent so we will go to the
client
so you see this has got a host name now
we also need to set up the fake DNS here
so I'll copy this host name
open the host line go to the end right
the IP address
and then dot local and then hostname
again
so this will give me a fully qualified
domain name so when I do a hostname it
says puppet Ivan client when I do a
hostname - f it says puppet client local
to install the puppet agent on this
machine I will need to download the
Zinio packages so I'll say double you'll
get HTTP app dot puppet labs comm slash
puppet labs
- release - PC one - zhenya Deb
I'll download this and then I'll say
dpkg - I puppet labs - release - PC one
- zhenya yep
so this is the repository package which
I'll be downloading here and then I'll
say apt-get update - why this will
update my apt caches on this machine and
now I'll finally install the puppet
agent so I'll say apt-get install puppet
agent - agent - why
now the puppet agent is here I'll start
the puppet agent and I'll enable it at
boot time so I'll say system control
start puppet
then system control
enable puppet
now puppet is enabled now we have set up
the fully qualified domain name on the
client and the server but each of them
should know each other so we'll have to
do a cross certificate host mapping so
we will be copying the host file entry
of the client and adding it to the
server so I'll go to the e.t.c hosts on
the server side go to the end paste it
there okay and I'll be adding the entry
of the master on the client side
okay now both the servers will recognize
each other now because one of them has
the hosts entry of the other
so if I do from the master ping puppet
- agent dot local
if I ping the agent from a server
- client dot local it is able to ping it
and if I ping the master from the client
if I say ping puppet - master dot local
both of them will be able to ping each
other
now the next step would be to create a
certificate signing request so I'll go
to my to this directory which is opt
puppet labs puppet bin
and I'll say puppet agent - t - - server
is equal to and I'll give the fully
qualified domain name of the puppet
master then I'll say - F when I do this
it will create a certificate signing
request you see now if I go to the
server and I do an opt I'll check and
see how many certificates are pending to
be signed
you'll see there is a puppet client
certificate which is pending to be
signed which is denoted by the absence
of a plus sign here I'll be signing the
certificate so I'll say puppet cert sign
and then the name so puppet - and client
dot local this will sign the
certificates and when I go to the server
on the client side if I run the puppet
agent again you see it's actually
pulling down the catalog as of now it
has an empty catalogue that says there
is nothing
now we have configured the puppet agent
and the master now we will be taking a
module from puppet Forge puppet Forge is
a big collection of open-source modules
which are free to use has a first step
we will be using a ready-made module and
that would be a demonstration for how to
actually get up and running with a
module so search for Apache module here
this is the puppet labs Apache module
I'll be using the puppet command line
puppet module install this is the
command for that but I will make sure I
run this command from the puppet home so
I'll go to the master I'll go to etc'
puppet labs code environments production
in this I'll do modules now I will run
it from the binary which is present at
the opt Popat labs bin puppet
and then module install puppet labs -
Apache and then this version so we are
specifying the latest version and I'll
hit enter when I press ENTER it starts
downloading from the forge API
so you see the module is downloaded in
addition to the dependencies so there is
concat STD live and Apache so now I'll
go to a folder here which is one level
up called manifests so this is the file
here etc' puppet labs code environments
production manifests so in this there's
a file which i'll be creating called
site PP the site PP will specify and
this is the main controller of how the
infrastructure looks in the site PP I
specify that I want puppet - client dot
local node to have the Apache module
included I'll save this file and the
only thing I need to do now is since all
is set on the server side I need to go
to the client side and run puppet agent
it will automatically download the
Apache module and compile it and it may
then make sure the server is in a state
so when I press ENTER we see a lot of
output it tries to configure Apache on
this machine and done now when I go to
the front end of this machine on this
port I should be able to see Apaches
default page so this is the patchi's
default page so the module which we
downloaded from the Forge was actually
written in a way that pachi would be
installed and run at boot time so that
is why it is running here and that is
all we have from the puppet module and
this concludes the demo thanks a lot for
your time have a nice day
hey what's become an expert in cloud
computing then subscribe to simpler
Channel and click here to watch more
such videos turn it up and get certified
in cloud computing click here</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>