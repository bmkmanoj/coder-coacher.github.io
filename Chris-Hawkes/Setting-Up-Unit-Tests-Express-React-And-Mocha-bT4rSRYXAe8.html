<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Setting Up Unit Tests Express React And Mocha | Coder Coacher - Coaching Coders</title><meta content="Setting Up Unit Tests Express React And Mocha - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Setting Up Unit Tests Express React And Mocha</b></h2><h5 class="post__date">2017-01-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bT4rSRYXAe8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up so I had a question
about how do i set up unit tests for a
javascript project and the question was
also whether or not I actually do it for
my own personal projects and whether
it's important or not and to answer the
question do I do it for all my personal
project no i don't and it's important
yes it is sure I'd be going it probably
and do I have to do it you know Frank's
or corporate capacity scoot you
definitely be in the test your code
there are companies out there that don't
unit test vast majority and fast
portions of their coding and that's it
couldn't you know typically of that idea
so the problem is that there is a time
trade-off in some cases although you
always make that up on the back end when
when you have people checking in stuff
that ends up breaking things that unit
tests would have been able to you know
spot at soonest you check that code and
so for if they have even written unit
tests themselves for the code that they
were checking out so is it important it
definitely is one of those things that I
haven't really touched upon too much as
far as how to do it in my money Tom my
channel i think i did a mocking channel
on t sharp and that was I think some
people like there's some people that was
a little complicated but unit testing is
is somewhat of a a complicated effort to
get up and running especially for newbie
and even more so with Java trivia react
and all that other stuff so we in the
past video we have our little component
here which we call our movie component
and really it's just a counter but it
was an example of how to get everything
up and running so let's go ahead and now
we need to go to our command line of our
project and I'm the press ctrl key and
by the way if you guys are picking up on
this video from any other videos there
are two other videos that get us to the
point we're at right now one is how to
get expressed deployed installed set up
and everything then the second video was
touching upon how to get react and redox
working together so this video is going
to be touching on how to get unit tests
up and running so we're going to say npm
install days
and time now enzyme allows us to it
makes it so much easier for us to be
able to import components and have the
testing framework understand what what
just got imported because JFX is what
react uses four components and that's
not something that the browser's just
know how to should work with the next
thing we want to install is an insertion
assertion library and that is when we're
unit testing something we're saying hey
we're executing this and this is the
expected result and actually saying this
is the respective the expected result
isn't something that you just clearly
doing in a programming language so
assertion libraries make it much more
direct and more English friendly to say
this you know should equal this should
be this should not be you know I mean so
you'll understand and just a little bit
but that's what really an assertion
library is all about and the one we're
going to use is chai because eventually
we're going to be using mocha which is
one of the most popular tests running
frameworks out there right now and milk
is really impossible because you can use
so many different things with you can
use try we talk you strive if you wanted
some other sort of assertion library you
could use something else now next we
need to figure out where are we going to
store our unit tests so typically you
need to destroy them you know within the
shot I put my app which has all my
reactant Redux code and everything
inside this components folder of my app
and app could probably it might be a
better name I don't know it's 5am input
it doesn't like that but it's in this
j/s folder because it's really you know
it's really client-side JavaScript type
stuff but anyway that's said that's
where I put it so now i'm going to
create a folder under app which i'm
going to call test so test is going to
contain all the tests of this project
now that's what's in the project oh we
have a component folder in a movie so
that means in my tests I really you know
it'd probably be a good idea to model
the same component or the same folder
structure as that of
you know my my app that way I know what
you know what files are really you know
I know what tests I have missing so even
under components i would do another
composer for movie under test and then
here this is where i would create my
first shot JFK alright so once again the
test is willing to model the exact same
you know root directory of this this app
here so that way test contains component
component contains a movie and all the
tests related to movie would be in
component so as I add more to my app and
add new folders I would do the same
thing to my test and then have unit
tests for hopefully most if not
everything that I'm installing so in our
unit test here we're going to say m4
react because we need to be able to use
react from react project and going to
know the look inside our node modules is
where you have been reinstalled where if
they import expect and this is the
assertion part of chai that we're going
to be using and now we're going to say
import mount shallow from enzyme
all right now what we do is we describe
and the scribe is actually saying you
know what what it is that we're actually
you're messing with but what are we
actually testing here we need to
actually touch the component itself so I
need to be able to import the main part
of this application which actually is my
store because my store has the JFX and
you know the main portion of this app
here I could also just import main
component and for right now let's just
go ahead and import main component we're
going to try to keep things as simple as
possible so that means i need to be able
to tell this thing how to import main
component now in javascript especially
using this import stuff this is where
things get a little bit ugly when we're
trying to talk about okay import main
component to where are we importing it
from we're importing it from all the way
in this mother s so we have to like back
up several directories to even get it so
we can say from dot /i think that takes
us to movie star for such cases two
components test takes us to dot I think
Jen I might believe in the component
movie name component now I'm just I'm
kind of guessing since I don't know I
mean I'm not guessing but I don't know
this is this is this a relative path is
going to work here but we're going to
say described main component because
that's what we're testing we were
important this main component we're
testing it now we're going to also use
the arrow function syntax
and then inside of our described
statement this is where we actually set
up all of our different unit tests so
this component could have all kinds of
different tests that are executed upon
it doing different things and that's
where we have these little itch
statements where it says what it should
do so should create object so this would
be essentially in testing to make sure
that there was no exception when the
component is actually instantiate 'add
now when you say a constant rapper
equals and we're going to use mounts
which we imported from enzyme and we're
going to call upon main component so
we've mounted our main component and now
we're just going to say expect so here I
could say expect main component dot
prototype
dot to not be no so this is what like
the assertion does it allows us to fill
out these on your these kind of like
english-based expectations all right now
in order to execute our test what we
need to do is install a test running
library which like I said before we're
going to use mocha it's one of the most
popular ones that you can set up mobile
to actually execute test every time code
is checked in to make sure things don't
break and things like that so and the
configuration ability of it is really
really key that's why it's so popular
but we need to go back to our command
line in order to get that installed so
i'm going to say npm install hyphen
hyphen save moco
alright so now if we go to our package
JSON file for the main portion of our
app now while these will dad's
dependencies going on including mocha
and enzyme so we have this script
section where we use scripts to actually
run our web pack we can add more trips
here you can see there's one by default
that says test so if I want to run tests
locally with mocha I could do the same
thing like we did with web back I can
tell it name when you when you run tests
you're using motor on and now if we go
to the command line and we say test wait
not I'll NPM run tests you can see 20
now try to run movil you can see it
running over there there's no chat it
doesn't know it says no test file sound
so we didn't know where to look for the
test so we can actually pass in an
argument to our folder which says the
location to which is which kind of
embedded here it's like jazz app has
components
will be
it may not need that first /em announcer
damn it
it's not finding a test as clearly my
path isn't right anyway so you gonna
fight even if this thing was somehow
going to work it's trying to work with
my past not being right
I'll go yourself I so in order to
get this thing what we need to do is we
really need to spell out the full
location to where these files are
located where the where's the test
folder located that's when mocha needs
to know so i can say God /i need to say
that word specially when my problem on
static yeah have tests and I also want
to add a flag that says recursive that
way it'll go for each one of those
folders in that location looking for any
sort of test they can execute now as we
go back to the command line I try to run
Ted alright so this time mocha james
find the test we you can see it's
actually choking on the import it says
import reacts on reacts the reason why
doesn't know how to handle that as
import onyx aren't supported it's
actually something that that Fabolous is
a trans piling to older versions that
actually are supported in browsers but
mocha doesn't know how to import when
it's executing these tests so now we
have to figure out something else in
order to get that working alright guys
so in order to install solve that next
problem for the imports we need to edit
our package JSON file and we need to
actually tell moco to use a compiler
which is going to use Babel to transport
or translate those import statements and
and you already have babbled out for
installed based on the first video of
the series so by adding the argument
hyphen hyphen compiler space jas colon
Babel for register before you actually
spell out the directory to where your
tests are located that's one to tell
babbles to use or I'm sorry mophie to
use babbles now in order for that to
work though you need to actually have a
Babel RC file and we haven't had to
create one yet because we've already
defined and webpack how to use Babel to
compile the code but with the mocha test
runner it's not going to use with that
so we need to have a saveloy key file so
that way it knows
take newer JavaScript code and converted
to the EF clean 15 specification summons
a new file dot Babel RC and make sure
it's a Babel RT because it's a special
file price that only gets use the Babel
and then all we need to do is just curly
braces and then it's a JSON objects the
preset the list with one element mncs
2015 save that for now when we go to our
test command and we try to run our test
again with those arguments in place and
we now tell Moffat how to like I said
transpile it you can see that we now
have a new set of errors which is
occurring and it's saying because mocha
and chai they have this implicit
dependency on react add-on teske till so
we actually need to install that and we
need to do it for our dub dependency so
we're going to say npm install that's a
long ass man but it's react add on test
util to make sure you stays go throw a
it adds it to the Deaf dependencies
now we're we try to run our test again
you know
now this new era cannot buy module so
this goes back to the directory like I
said when we were actually trying to
spell out the relative directly to the
main component i wasn't sure if i went
back far enough from thats what hes
relative about root passwords or ugly
bout to just deal with sometimes with
this whole no JavaScript environment so
let's go back to the the test real quick
and I think I might need to go back one
more directory if not I'm going to end
up doing something else to solve this
ugly path problem
so without wasting any more time I'm
just going to go ahead and fill out the
actual friggin goddamn full directory to
wear this the test is located because
there's other ways of doing this but I
just don't want to waste you more time
doing it and you can see here that the
actual folder directory of where the
test is located right here to project
express movie status press movie static
Jo apps test I got a component movie I
sure that should work another thing too
is because we're not even mounting this
out is component right this is a jsf
component so we need to actually call it
like jsf your main components that way
we're loading it here now another thing
that's going to be interesting to notice
we need to go to our babel our key file
because this is jay effects we need to
tell it to offer you react when those
are the same two arguments that were
actually telling webpack to do you're
gonna have to do the same thing with you
know running these these tests that
require Babel and j sx mocha has to know
how to execute them so now that we've
done that I want to let me see so
there's going to be one other issue that
we're going to end up running into them
and that's the fact that J is Dom needs
to be mocked up for every single test so
you have to like require like a global
virtual ramen and there's actually a way
around that according to this guy's
recommendation so if we install NPM
install save dev and you know thanks to
avatar let me give them a thumbs up here
stave exact so run this exact command
from your command line j/s Tom and Jas
on global because that way we can say
import I'm sorry right at the top of the
file instead of having them we got damn
it instead of having to mock up
everything we could just by going this
route we don't demography nyan we just
have to import right at the top before
reacts we stay in Port JSON global
register
actually run that info command first and
then we do the import and now everything
should work and once again there's
probably a cleaner way of importing
instead of having to sell at the root
directory but I just wears a full
directory I just still I'm not going to
mess with it so now that we're calling
this is a jsf this should work alright
so I'm going to go to my command line
and then we go from okay what is the
problem now you prick this is such a
nightmare ok so I still have a
folder problem for this is a pain in the
ass all right on projects Express movies
static jsf component for the right movie
well I'm in the wrong folder
there
I'm stretch a dumb it's not going
to completely you have to excessive I
the actual component in the directory or
importing so simple typos run this bitch
again
finally thank goodness all right we have
our first unit tests running now as we
start adding tests to the faster we can
start mocking up our expected results
and things like that and I'm actually
going to do that in a separate video but
you know getting all this stuff working
my goodness but if you follow it on
long-haul this way the good thing is you
only have to do this one for you know
each project every time you do it it'll
get easier this is actually the first
time I've had to go through this entire
process for react redux on my own so
anyway I was a good learning curve
learning learning I learned you learn
whatever anyway guys make sure you
subscribe make sure you vote up this
video even if you got frustrated like I
did all right take care my hey guys so a
lot of you asked me how do I get my foot
in the door to become a programmer and I
just want to take a moment to mention
dev Mountain coding boot camp is a 12
week intensive course that focuses on
the technologies of the here and now for
web development some of the things that
are actually teaching in this 12-week
course it's geared to get you into the
industry by focusing on things like
jQuery nodejs react angular how to use
github so a lot of the things that
you're going to need to do as a
developer as soon as you start they're
going to be teaching you in this and
this coding boot camp in the entire goal
is to be able to get you into the
industry within 12 weeks so if you guys
are interested in learning more
information about Deb mountain coding
boot camp just check out the link in the
description proud of this video thank
you for watching and have a good day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>