<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating a Blog with Django 1.7 - Video 2 Adding the blog app | Coder Coacher - Coaching Coders</title><meta content="Creating a Blog with Django 1.7 - Video 2 Adding the blog app - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating a Blog with Django 1.7 - Video 2 Adding the blog app</b></h2><h5 class="post__date">2015-01-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PHiSlGPxwBk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back
so we're going to be working on this
blog that we're creating here and in the
previous video will be installed
bootstrap and you can see that I'm each
blog entry it calls a post at HTML so we
need to go ahead and change some of the
way that this work so it will work
better with with Django so first things
first we need to actually create a blog
app within our Django set up so you want
to go to where the manage that py file
is in your django directory and will
reference that manage folders to manage
py we're going to say startapp we'll
just call it blog well you know I have
to actually you're using a virtual
environment which is a good idea I'm you
need to actually enter into that virtual
environment which I'm going to do here
let's say startup blog okay and now you
see we have the blog directory I'm going
to go and download that from my server
and then now I can access it inside my
my editor alright so inside the editor
over here you can see that we have a
blog it comes with migrations on the
stuff comes with the models we need to
go ahead and create the model that we're
going to have for our blog so first
things first we said class and we'll
create blog and then it inherits from
models top model
so we're gonna have a title which every
blog knees have its own title it's going
to be a character filled with a max
length I'll give it like 250 and we're
going to say blank equals actually know
what we don't want that that the title
cannot be null at all but we do want it
to be unique we'll say date added equals
models daytime field we want to give it
a default we're just going to say equals
to datetime datetime now and we also
need to import date time to be able to
use that that way every time you add a
new post to automatically be the time
that it is that you added it let's think
of a few other things we need to add now
a blog is also going to have an image
it's pretty common
now sometimes the image might point to a
some sort of external image and the
thing is is uh they can be pretty long
the links so I'm going to make sure I
give it a lot of space there for the
image location and we want that to be
know if needed now the other thing we
want is on this tags and we want a lot
of room for tags as well so we'll just
do like 500 characters that way in case
we ever like start searching for
articles by on a particular subject we
can use those those tags now we also
want the article itself which is going
to be like them main your meat of the
blog item and that's going to hold a lot
of space so I probably want to go crazy
with it maybe do 15,000 I always adjust
it later we need to and you know
technically you may not want to do know
when blank equals true but in this case
I don't really care i mean i don't think
i'm going to be putting into me no
articles but if I do it's probably going
to be for a specific testing reason or
something and I just don't want to deal
with not having you know Django blocked
at that injury so I'm going to another
character field for the author max
length of just 850 in case they have a
really long name
and it's probably going to be it for
right now if we want to add more to our
blog we can always do that liquor on one
thing we are going to add here is we're
going to say get absolute URL and pass
in itself as an argument and it's going
to return blog percent i % self dot PK
this way every blog entry will be able
to be navigated to from your Django
admin so in order to reference the blog
inside your admin which is built into
Django you want to go into the admin of
our new blog module that we just created
and we have to inherit a few things
we're going to say from models import
blog and then down here we're going to
say blog admin and this is going to
inherit from admin dot model admin and
then we want the list display it is how
it's going to show up inside the blog
and we want it to equal the title of the
blog and since it's a tuple it does need
that following comma and then just say
I'm n dot sight register and then you
pass in the blog and the blog admin
now we also need to add a URL py file to
our blog so it's going to do it now urls
at the top we're going to say from
Django config you are l's import
patterns include and URL and then from a
separate line from Django can trim in
port admin actually no we're not going
to admin on this particular case all
rights down here let's say URL patterns
equals patterns and then it just gets
passed a tuple i'm going to say URL and
then this is just a regular expression
for how everything is going to be set up
so the regular expression is going to be
able to take the just any sort of
integer and then it's going to query the
database based on that so we got to pass
in a regular expression that we'll be
able to collect that for us and we'll
just call this blog ID
and then the view that will handle that
is going to be called blog views blog
the hell is going on here
well this needs to be closed off all
right so now that we've done that let's
go over to the views for the blog and we
need to already have the render brought
in but if you don't need to copy in that
this on import statement and let's go
ahead and define our blog method alright
so the first thing any sort of jungle
method takes in is going to be a request
object we're going to add that and then
the argument from the URL that is going
to get passed to this function as the
blog ID that we used to we use the
regular expression be able to capture
that blog ID and then what we need to do
is query the database based on the blog
ID so in order to be able to query our
blog database or a blog table we need to
be able to import that that class from
our models file so we'll say from models
import I'm sorry blog and then here
we're simply just going to say vlog
equals blog objects get and then we'll
say P k equals deep blog ID that gets
passed in and I just want to return
say return render request and then the
second argument is going to be the
template so we'll just call this blog
dot HTML and then we're going to pass in
a dictionary which is going to be the
blog objects will say blog and then we
assign it the blog query the query that
we just created I don't think it likes
my spacing
all right fine we'll call this article
then
that way my editor is happy about it but
this variable could be whatever you
wanted to to call it it doesn't matter
now we do need the templates directory
inside our blog modules so let's go and
create that now and then we'll create
our HTML document and then we can
reference the article notice the article
title
all right now we need to go into the
URLs for our main module and we need to
include the URLs that are going to be
used by the blog so in order to do that
on this blank line right here let's go
ahead and say URL and then we pass in a
regular expression like we have been
doing and we'll just say blog and then
over here just give it an include
statement and we're going to include
blog URL
or i could have uncommented that that
was right there in front of me but
anyway now you need to open up the
settings that py file and inside the
installed apps we're going to go ahead
and add our blog now
and now you're going to want to upload
all of this stuff that we just did to
the server let's go ahead and do that
now
you may need to restart your server for
the effects to take place let's go into
our admin and if you run into a
situation in your django setup where you
don't have any CSS showing up for your
admin it's an easy fix you need to go to
your where you can find your python
manage that py file and you just run
python manage that py collect static and
we'll ask you yes or no do you want to
copy the files and you do want to do
that and you can see that 61 static
files were copied to the static folder
which is a built-in thing for django to
be able to you know include the admin
static folders and anytime you have a
static reference in any one of your
files that will make sure that file gets
copied to the static directory now let's
go ahead and log into the admin which
you would have created in one of the
first videos now if for some reason you
don't have the admin enabled already
what you need to do is just make sure
that you're running sync TB so do plays
on manage fpy sync TP and what happened
was here is that I initially had any all
system setup for the sequel Express
which is a sequel light is what it is
but it's added to django by default and
i switched over them to my sequel so my
sequel is saying i don't actually have a
super user created yet so you will end
up getting this dialogue here where you
want to go ahead and create your super
user and then you just give your
password over here
okay and if we go back over to our admin
you'll see that we're log that log in
and now you'll notice that the blog's
isn't showing up yet so number one is we
want to make sure that we did upload
those documents which we did and you
probably need to then restart your
server so you say sudo service patchy to
restart
and now you can see that blogs is there
now when you get this message here that
the table doesn't exist that's because
Django 1.7 which is what we're using now
it it has migrations built-in by default
which was always a huge pain gender
developers used to use a module called
south to handle database migrations and
now thankfully jungle 1.7 has a built-in
so it's very easy to use you just do
python manage py and the first thing you
do any time you make a database changes
you're going to say make migrations and
it will automatically go through and
figure out which tables it needs to
build so you can see it found that blog
existed and another table so it went
ahead and made the initial table now any
time moving forward it's actually going
to be able to detect if any changes have
been made to that table that it
currently has stored right here and if
it does then it will go ahead and
migrate to the new table for you so
that's a really awesome feature and you
can only really appreciate that after
you've been burned many times trying to
deal with database migrations but in
order to actually migrate the the
migration was just created for you you
do a similar command except instead of
make migration just say my great and you
can see that it did migrate and now we
shouldn't get that error message when we
go to create a blown you can see that we
don't so let's go ahead and create our
first test blog will save our test blog
and for the time being I'm going to go
ahead and then put in a temporary image
and let's save that first blog now in
order to be able to get to the blog
let's go and see if this works alright
this indicates that there is a problem
with our URLs that py and if you're
inquisitive you probably caught that
this is the error message right here so
we can quickly see that there is a a
typo if we just saw re-up reupload that
may need to restart the server as well
all right you can see our test blog is
now being found the question is our
template being found then you can also
see here that the template is being
found as well now the bootstrap app that
we had downloaded earlier let's go ahead
and apply that to our blog so it looks a
little bit better and those are located
in our regular template here where they
call it post HTML so it's going to copy
this whole thing and now that i'm
copying i'm going to go ahead and just
get rid of get rid of this
so once again we have to go through the
process of actually changing all this
stuff out so go ahead and do load static
files and then once again we have to
reference static and i'll just copy this
first part here to make it a little bit
easier
now this is a good time to go ahead and
just change the URL of the directory as
well and will change these to some files
we're about to make so I'm going to
change this to about and this will be
blog although i'll probably remove that
link all together and we'll do forward
slash contact you'll notice django
doesn't require the HTML or anything
like that which is really nice it makes
purim clean images or cleaned out of
URLs let me go ahead and change this out
to our images directory
and here is where all this all this
content that they have for us we're
going to get rid of all that and we
actually just want to bring in our
article dot article and then here's the
title so we'll replace this with our
article title and there's a subheading
so we may want to look at probably want
to look at creating a subheading inside
of our blog if we want to and then post
it by and this is what we're going to
say article or article dots author and
then here is going to be article dots
forget what we called it
so if we look at it's inside the blog
here so it's date added so it's going to
copy that
we can change out the copyright
statement down here at the bottom just
add a few more things down here crap
alright finally going without it's going
real poor diet
is there no image in this thing I guess
that is the main image here so this
would also need to be subbed out we're
actually just going to straight say the
image is going to be the article image
and we upload that one more time
alright so this image doesn't show up
very well but still looks pretty good so
here's our test article and you have our
menu and everything up at the top it's
all responsive for us which is pretty
cool
alright so this video is getting a
little bit long in the next video we're
going to do some optimizations also try
to figure out how we can make this thing
look a little bit better but each post
now you need to update the the link on
the main page so it actually goes to
blog and then whatever the blog I da
name is but we'll get into that in the
next video alright guys thanks for
watching bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>