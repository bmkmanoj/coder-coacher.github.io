<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django Tips: How to make an AJAX call to the back end | Coder Coacher - Coaching Coders</title><meta content="Django Tips: How to make an AJAX call to the back end - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django Tips: How to make an AJAX call to the back end</b></h2><h5 class="post__date">2014-02-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DMiBJjTVcFg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up welcome to this video
this is a django tip on how to use Ajax
with what django now I'm just playing
around here with a test test little
piece of functionality it's kind of
rough around the edges I would say but I
have a simple back-end page that is only
accessible by me so it's not like a
front you know that's what I say it's a
little bit sloppy but don't really care
because it's not public-facing or
anything like that so I have this script
where in a movie website that I own I
need to verify which movies do not have
rankings or like a rating system or you
know the 1 to 10 scale that I like to
have my algorithm put on these movies to
see where they rank so to view the page
it's right here so it's just a simple
page that's restricted like I said to
the public and I can go ahead and click
this get rating now when you view what's
going on behind the scenes here is the
get rating and it's simply just an
anchor tag and the href of the anchor
tag says JavaScript need rating lists so
that is a JavaScript function that's
being called and I'm just so you know
I'm not even sure if if you guys are
aware but this is a really cool thing
that JavaScript is known you can just
call JavaScript in it since it's a
client-side line which is just fires I
watch this I'm at Google and I go a
JavaScript colon and then I just say
alert testing you know it must be a
little bit more creative hi YouTube
check that out so that actually runs so
anyway you know if you knew that or not
but anyway that's what we're doing we're
doing the same thing here where we're
calling this function when this anchor
and link is clicked so let's go down to
this function that is described down
here it's called need rating list
now it's an AJAX call so we call the
Ajax function here don't pay any
attention to this but we call the Ajax
function here and here's what we say we
say type it's a get and this is the URL
to the page that is being accessed at
new movies and it's a restricted page
but it's the URL that's being forgotten
now assuming you have the CSRF
middleware token enabled which you
should have it's a security risk not to
have it you need to add this line here
for data I use a synchronous true so it
shows a little loading icon while the
the process is being run and I'll touch
on that in a different video but on the
success if the if the function is a
success then we have our JSON object
here and all we're doing is we're taking
the output div and we're adding HTML and
we're adding JSON message and you're
probably wondering well what is Jason
that message well when the call is made
it goes to the views here this need
rating and need rating here is the
message right here and whenever you're
dealing with with Jason and Django you
just want to create a Python dictionary
just create and you can call it whatever
you want just it's a Python empty
dictionary and then you're gonna
actually take these these are not really
sure what you call them with properties
I guess and they can be named whatever
you want but this is our dictionary and
we're creating a key value so key value
a message the value is gonna be a list
of movies and just so you know on a
query set see this this method is being
called it's saying go to my movie
objects and find me all the ratings that
aren't there so and then I just restrict
what gets returned to a title since the
movie object has a bunch of stuff with
it I just want the title of the movie
so that's what bad values list does and
then once you have the movie you need to
turn it to a list though because it's a
Django object which isn't gonna be able
to get turned into Jason otherwise you
will have problems with it so just I
turn it to a list here so really it's a
list of movie names and it's being
injected and a Jason
message object so going back over to our
HTML page we're saying take the div
output and then just add our response to
Jason message and then on top of that I
have other functions that are being
called with that data which actually
goes down here and I start looping
through that stuff you don't have to
worry about that so let's go ahead and
just view a sample of what what were you
expect here so what I do get rating I'm
gonna get a list of movies back that do
not have ratings so click and you see a
little Ajax so now this is a you know
obviously a very ugly thing but this
isn't meant to be public facing but this
is you know how you do an ajax call so
just to kind of reiterate i have an
anchor tag in the HTML which is right
here
it calls a javascript function which is
defined down here the javascript
function makes an ajax call the ajax
call goes to this URL which is located
in this view right here this decorator
restricts access to somebody to only
with staff access so the public can't
see this and then all it's doing is
saying hey give me a list of movies that
match the credential build an empty
dictionary assign that list of movies
instead of django objects just make a
list out of them and essentially it's a
list of strings now because all it is is
just a title and then it returns it and
then when it returns it
the output of the return message is
appended to this output div which is
really just an empty div for the most
part except for this Ajax loading thing
that you saw and I'll probably touch on
that in a different video
but anyway let me know if you have any
questions this is extremely helpful I
think as far as nowadays you do have to
have you have to know how Ajax works and
it's always better to make an AJAX call
and having like page refreshes and stuff
like that especially if you don't need
it so thank you for watching and I
appreciate it please subscribe</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>