<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CasperJs for Noob's Tutorials - How to Search Google | Coder Coacher - Coaching Coders</title><meta content="CasperJs for Noob's Tutorials - How to Search Google - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CasperJs for Noob's Tutorials - How to Search Google</b></h2><h5 class="post__date">2013-12-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PxHSdd8hHt4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back now the next step
that we want to do when we're scraping
the web is we want to give our Casper a
user agent so it looks more like a real
browser to websites because sometimes if
a website detects that you're a spot bot
then it will like give you a different
page than the one that you think you're
getting in the browser so certain sites
like Wikipedia and stuff like that
they'll end up giving you a different
page than the page that you're actually
after because they want you to use the
API as opposed to scraping their site so
the user agent here is it's a very long
drawn-out thing but it's the one that I
like to use here so I'm just gonna go
ahead and copy this into the description
block of this video so you can just copy
and paste it and also in order to be
able to utilize expose which are very
important on the web nowadays they're
like the easiest way to scrape what it
is you're after you do need to enact the
XPath within Casper so Casper doesn't
it's something that you have to invoke
so we're gonna create a variable X and X
will stand for XPath so in order for us
to be able to use X paths Casper
requires that we instantiate it so we're
gonna do that now we'll say variable x
equals Casper dot I'm sorry equals and
we're gonna say require then we'll say
Casper dot select X path and P is
capitalized all right so now since we've
invoked that we can now scrape the using
XPath so let's go ahead and run an
example here and I'm gonna pull up a
Google page here
the screen here all right so with expose
what we can do is we can just right
click on this inspect element and you
can see that it has an input ID of GB
qfq if it has an ID and then the xpath
is going to be very relative to that ID
so if you're using Chrome you just right
click to inspect element and then you
right-click on the actual input element
inside this box down here and you just
say copy XPath and by doing that and
we're gonna go ahead and we're gonna
select something so instead of doing our
screenshot we're gonna go ahead and say
Casper dot send keys and here in order
to send an XPath we're gonna say X and
then comma and then inside quotes we're
gonna say what we're sending so we're
gonna search newb movies.com all right
so now inside this X this is where we're
gonna go ahead and copy in the XPath
remember because I said it was an ID the
XPath is able to find right where the ID
is because an ID should only be used on
the page once now if it's a class that
you're looking for it's going to be a
little bit different but if you have if
the element that you're looking to
interact with has an ID then just simply
selecting the XPath is the best way to
go because it's gonna be right where you
need it to be all right let's go back to
our Google page here and we want to go
ahead and click on this Google search
button after we type in that data so you
can see here that it's also an ID right
so we can go ahead and see if the span
is clickable now this may fail but we're
going to go ahead and test this out the
actual click elements as opposed to
sending keys on an input is a little bit
more finicky
especially when it comes to a span now
this also has an ID so we may be better
off let's go ahead and grab the XPath
for the button since the button
definitely has a click attribute as
opposed to the span I believe the span
would work too but just in case I think
there's a better chance that the button
will work and since it has an ID it'll
be unique and we'll just go ahead and
copy that XPath all right so after we
send the keys let's go ahead and do a
Casper that then do another function
here and really this is just a separate
what we're doing because you could
really just do this same method inside
the previous function where we send keys
but we're gonna go casper dot click and
we're doing the same thing here we're
gonna do X for the X path we'll go ahead
and paste that in there now let's go
ahead and do another method here so
we'll say Casper dot wait because we
wanted to give it a few seconds to
actually search and pull up the results
after we hit submit so let's go ahead
and just wait three seconds and let's do
our open bracket close bracket and then
we're gonna do another Casper dot
capture to see what it is that the page
is doing so let's go ahead save that and
now we're gonna go ahead and run our
program again and we have a parse error
let's see what's going on here if you
have a parse error or anything like that
you want to go ahead and control C so
it'll kill the application all right so
let's take a look here and see what
happened with our program you can see my
editor is actually identifying what it
is we're missing a closing parenthesis
there so let's go ahead and close that
off my editor is a little bit slow as
far as updating itself I apologize for
that it still says that there's an error
but there's not
so it's going to run that again this
should work
I saw it printed Google now it's waiting
to 3 seconds and hopefully if everything
went well it went ahead and sent our
search criteria which was new movies
comm click the element and then waited
another 3 seconds and then captured the
screenshot I'm going to go ahead and see
what image we have right and here it is
so that is the the website that I own
that I've written in Python it is new
movies.com so let's go ahead and work on
the next step of our program since we
have the benefit of knowing what it is
that we're scraping in this particular
case we know that we want to go into new
movies calm which is found here so see
so you see the website here there's a
website I created and Python and what
we're gonna do is we're gonna try to
click on that article from Google so
let's go ahead and take a look at what
we're looking at here so if we type we
type new movies calm and you can see
that the article is here since we know
what the article name is I want to show
you something that we can do we have
this text here right now we can inspect
the element and you can see that we're
trying to click this anchor tag here
that's a Google anchor tag and if we
copy the XPath and let's just paste it
to a notepad here so that we can see
what we're looking at and you can see
that it's not very identifiable I mean
it's it's some basic stuff it's like you
know under this ID and grab the first li
then the next dere then the next h3 then
the next a now we could probably get
away with just clicking that element but
I think that that may cause us a little
bit of trouble we could also search by
actual name like or like text if we
wanted to in this particular case just
because I'm running out of time on this
video I'm going to just go ahead and
we're gonna copy the XPath
see if we can click into the website and
see if that works so and in our function
here we'll wait we'll keep that here but
just above that let's go ahead and do
one more Casper that da da
Casper not wait and we'll say 3,000
milliseconds function and then we'll say
Casper click print to see our XPath
close it off with the right amount of
the parentheses and now we'll go ahead
and run this thing again if all goes
well the image screenshot that we have
will be an actual screenshot of my movie
website new movies calm and we'll see if
that works here and and then in one of
the future videos I'm not sure if it's
gonna be the next one but I do want to
show you how we can actually do XPath by
text because that can be a lot easier to
identify the element that you're after
if the next path seems to be failing you
alright so we pull up movies here and
you can see it actually grabbed the
responsive version of the website which
is a optimized version for the cell
phone so you can see this is what it
looks like on a cell phone I'm not sure
why it actually grabbed such a small
resolution like that we can adjust the
browser browser size so the way my
website is set up here is that it
detects how big the screen is that's
viewing it and then you know optimizes
the site based on the device that's
viewing it so normally on a desktop it
would look something like this but
anyway so I'm gonna go ahead and
conclude this video in the future here
we do want to get into how we can grab
things using like a span tag and
searching for text and things like that
so thank you for watching and please
subscribe thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>