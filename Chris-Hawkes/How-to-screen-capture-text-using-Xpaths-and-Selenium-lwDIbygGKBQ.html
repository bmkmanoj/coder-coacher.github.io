<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to screen capture text using Xpaths and Selenium | Coder Coacher - Coaching Coders</title><meta content="How to screen capture text using Xpaths and Selenium - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to screen capture text using Xpaths and Selenium</b></h2><h5 class="post__date">2014-10-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lwDIbygGKBQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up welcome back to the
selenium testing tutorial series i'm
working on using c sharp and in the past
we talked about how we can search and
you zex paths to find data that we're
looking for and kind of drill down this
is another means of finding specific
data on a page that you might be looking
for using xpath so here's what we got
going on we have a google search where
we're finding a band we're clicking on
the wikipedia page and then assuming
that we're on the wikipedia page we want
to go ahead and just find a piece of
data that we might be looking for or
testing and let's just say it's this
origin right here we want this data
that's inside the origin so if i were
going to try to find out what i'm going
to do is inspect the element to take me
back to my chrome developer tools and I
can do console and just like we did in
the past if we want to do an XPath
expression we just have to be like that
and the XPath goes inside of this so
like that alright so the XPath up in
this case we're going to use text to try
to drill down and find what it is that
we're looking for because we know that
origin is the name of the text that we
want it's clearly there and we know that
it's in a th there's no ID or class
associated with this to try to drill
down so we really want to just go based
off of this text here so in order to do
that what we're going to do is say give
me a th item and we'll say because we
want to make sure that in case of origin
appears inside of like an anchor inside
a paragraph tag throughout the text of
this page we don't want that we know
that we want the origin that is inside
of a th if there's more than one we
might have a problem there in this case
I think there's only one so we shouldn't
have a problem but basically we're
saying okay give us a th and then here
we're going to say text equal I'm sorry
it should be text open and close
parentheses and then equal and then
inside single quotes we're going to give
it the name of the text that we're
looking for which is origin
and let's close off the square bracket
now let's see if we find anything based
on that okay and you see that it is
finding the th that we're looking for
but the data that we want is actually in
this which when you look at this we
found the th but we're basically saying
no we want the TD so let's find the th
and then we could say we can use the
following syntax with in XPath to find
following so what we can do is we can go
forward slash following and then two
colons and we're saying TD and let's see
what we find now here you could say
because we said following TV it found
every following TD after this th within
its ancestry tree now we don't actually
want that because the data we want is
here so what we want to do is we want to
say give me the first TD and we can do
that by using square brackets like we
did in the last video now we have the
first TD being returned now here's the
problem the text is all sitting inside
of an anchor tag individual anchor tags
at that so we really want to get the
text but the text isn't going to exist
inside of the TD this is how you would
get text but this isn't going to work
you're going to see we're going to get a
bunch of blanks right well actually we
got the commas that aren't inside of the
anchor tag elements what we want is we
actually want to say go into the anchors
and grab the text and this gets exactly
what it is that we're looking for
alright guys so that's going to wrap up
how we get data based on obviously when
you want to use this inside your sheep
c-sharp code you would just copy that
xpath and assign it to a variable
hopefully I don't need to explain that
Lucas a variable origin equals I'm sorry
driver dot fine by xpath
I'll finish off this series here let's
just go ahead and console dot write line
now one of the things that I did show in
the last video is we do have to give the
page time to load so it's going to
thread that sleep we could just do some
sort of while statement or an air
statement to kind of try over and over
again until we succeed certain amount of
times but this this is a little bit
cleaner I think just to sleep for a few
seconds while the page loads and then
look for look for whatever you're
looking for now one of the things that
you're going to find a little bit
annoying is that expats don't
necessarily work the same way on within
the browser as they do with C sharp and
selenium and things like that so this
text doesn't work it's not how you
actually get text using C sharp so our
XPath works and everything that we did
works and we still you know it wasn't
for nothing but what we need we need we
need to change a few things here the a
this would actually only get the first
anchor and if you remember there was
three anchors and the name that we're
looking for so one two three so this
would only get the first day if you do
double it's going to get all A's that
exist as children inside of this TD and
all three of these are children so it
would grab all three of those now in
order to actually get the text to print
out to your screen we'd have to actually
do something like a for each here so we
could do for each
variable George
and the reason why this does not work is
that in selenium there is find element
by xpath which is only going to give one
result no matter what you grab or you
can say find elements and it's going to
come back with a list of elements that
match so this would come back with three
items in a list so origin is going to be
a list now wonder if my thing shows me
that anyway it doesn't show but if you
pause on execution you would see that
origin is actually a list so then we
would say for each org in origin we
could say console dot write line I'm
talking about let me just say for each
will say var print origin so I'm going
to create a variable it's actually a
string I really for each element in that
list of elements we want to build that
string so we'll say prints origin equals
print origin plus or plus and ashes to a
comma
and then for ordway no se or text
that's complaining that's not started
anyway this seems like a sloppy little
bit of a sloppy mess here but you'll see
that this does work so we'll say console
dot write line and we'll write out the
print origin so just to recap origins
can be a list it's going to find three
items because we know that there's three
anchors that was in there is like Queens
New York New York or whatever and then
we need to go through and we're
basically we're creating an empty string
that's going to hold the formatted
address and then we have to go through
each element of our list and we're going
to concatenate the list items text to
our print origin and then we're going to
put a comma and one of the things you're
going to notice is we're gonna have an
extra comma on the end we could just
kind of chomp off that last variable
let's go and run this real quick
so you see that the the entire dress
printed off just the way that we want
the formatting is off though let me kill
this hey well killaby you see this
before we need have some spaces and
stuff in there so number one we should
have added a space to it
now in c-sharp this is sloppy and it
might be another way but I'm just going
off the cuff here to fix the the
formatting issue we can just say print
origin equals print origin got trim oh
shoot
let me say trim end and we can
specifically say what it is that we're
trying to trim
you
actually know what that is crap let's do
this a different way we're going to say
print origin will say we'll use the dot
remove and don't remove first thing
we're going to give it as the print
origin length then we say minus 2
because we want to get rid of the last 2
characters of it and then the second
argument is where we start or how far we
go into the this is the starting index
and this is how probably goes basically
we're saying whatever the length of this
is a minus 2 which is going to be the
space and then the comma go to forward
and get rid of it so that's what we're
going there it's also probably safe to
do a null check here so we'll just see
that real quick make sure it's not null
and when we run this this will get our
formatting correct there's probably a
million different ways to fix the
formatting whenever you're dealing with
something like this but every language
is different in regards to that and you
can see it finds the text of where they
live and the formatting is now correct
alright guys thanks for watching bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>