<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Flask Tutorial - 5.  Querying the Database | Coder Coacher - Coaching Coders</title><meta content="Flask Tutorial - 5.  Querying the Database - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Flask Tutorial - 5.  Querying the Database</b></h2><h5 class="post__date">2016-01-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VSzNYfDQp8Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up welcome back so in
the last video we looked at how to
actually insert data into our database
using sequel alchemy and flask and in
this video we're going to be looking at
how to query the database meaning how to
select data from it and display it and
there's going to be multiple ways of
doing that but we're going to kind of
scratch the surface here just so you
guys can get a basic understanding now a
way to actually query everything in our
database is we assign a value should
we'll set say like something like my
user is just a variable it's a Python
variable and we'll say user and we're
referencing the you know class object
that we created which is our user
database table we're saying user query
Paul and then open and close parentheses
what says what this is going to return
is a actually a list of objects and then
we can pass that list of objects to our
template using Jinja and we can pass it
down to our template by putting a comma
after the name of the actual template
and then we'll say my user and an equal
the name of our variable my user so now
we should be able to access my user
inside of our template and we would do
that by pulling up our template and then
inside of here we're going to do inside
two curly braces we'll say my user which
is the name of the variable that we pass
down and what this is going to display
is a object a list object but it's going
to be just in like standard form so if
we went ahead and refresh you can see
it's listing all the user so that's
really not helpful if you have a list
full of objects because that's what when
you say you get all of it it's always
going to return a list even if you have
one it's going to be a list of just one
object and in order to iterate this I
mean what you would typically do
whenever you're dealing with some sort
of a list object is you're going to say
and it's inside these little parentheses
we're going to say for and we'll just
say user in my user and then here we
could say no I goddamnit why's it doing
that
well list object so then we can use any
sort of like user dot username if right
now we'll just do that okay so then you
also need to end your for loop so we'll
say end for and this is very similar to
Django if you've ever done Django's
template engine here but we're what
we're doing is we're saying loop over
every list of every object in that list
which we have for because we have four
users that we've added and display their
user name inside of an li tag which is
an HTML li list item tag so if I went
over here and I refreshed it you can see
it's now being displayed in list item
and then we could also even say and then
just like do like a user dot email
and then let's also look at the user dot
I think it's either I key
I think it's ID I don't remember yeah it
is ID okay so you can see that ID is a 1
2 3 4 so it starts off with 1 there's no
0 index number and you can see we didn't
have to add all that stuff it
automatically gets added for us all
right guys so that's in a nutshell how
we actually query our database and
display things in list format we're
going to go ahead and do another thing
where we're just going to display one
item so let's get rid of this and we'll
create a variable that says 1 item let's
go to app py so we can send that down
and we can be more specific instead of
saying grab everything what we can do is
we can say user dot filter I'm sorry
user got query dot filter and then
inside the I'm used to Jango where it's
just filter but it so it's filtered by
and we're going to say username and then
we just give it whatever sort of value
we want so we'll say test test - and
then you can now give it first in case
there's duplicate sometimes it's best to
say first just to make sure but in our
case we know that there's not going to
be more than one so we don't have to say
first if we don't want to and then we
need to be able to pass that variable to
our template so one item equals one item
hmm all right so yeah this is actually
new to me so you can see it actually
passed in the entire sequel command
which is really weird so let's try first
and it's almost like a link thing if
you've ever done c-sharp all right so
first is necessary my bad
all right um first is only going to
return you know one object it's
guaranteed only return one even if if
there's multiples but you can see it's
still in an object form there it's not a
list of object it's just one single
object so you'd probably do something
like in your template one item dot
username or something like that
so anyway guys that is how you query the
database both in list format to grab
multiple objects or to grab a single
object now because first is guarantee be
guaranteed to be unique and if there is
no match it's going to return none which
is a no-no
null object and Python you can actually
say so instead it like this says grab
all no matter what but you could also
say grab all that meets your criteria so
even you know say we weren't doing a
unique user name you could say where
where name contains or something like
that
either way we could say username equal
test you could say all and that would
say even though this is only going to
come back with one since it's guaranteed
to be unique because we design our
database that way if you have data that
could have multiple matches you could
simply say you know filter by and then
instead of dot first it's say all and
over up all the matches now you would
want to update your template choose
because you're not going to be
referencing a single object because it's
going to return a list again instead of
a single object so if we went over and
refreshed this you can see it's actually
returning a list with only one match so
that's really um skimming the surface
here that there is a ton of
documentation that's available on sequel
Alchemy's website here so if you go to
this webpage right here and you can read
up on this and this will take you a long
time to kind of go through all of this
stuff and most of it is probably more
advanced than what you're going to need
but this should at least give you a good
start
you know what I've showed you in this
tutorial video all right guys thanks for
watching please subscribe please vote up
thank you bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>