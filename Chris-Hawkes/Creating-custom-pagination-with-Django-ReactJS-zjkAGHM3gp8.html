<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating custom pagination with Django &amp; ReactJS | Coder Coacher - Coaching Coders</title><meta content="Creating custom pagination with Django &amp; ReactJS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating custom pagination with Django &amp; ReactJS</b></h2><h5 class="post__date">2015-05-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zjkAGHM3gp8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up I'm so I'm in the
process of rewriting a movies website
that I have it's got a back-end in
Django so python django it has a restful
api that i created using Django rest
framework and then it's using reaction
is for all of its client side rendering
and all this stuff is made via Ajax
calls and and react and what I want to
do is I want to add pagination here to
my movies and I have four different
categories of movies i have in theaters
coming soon which is coming soon to
theatres then new dvds and then coming
soon to DVD and of these four sections i
want to be able to page them and i'm
only displaying six because that's what
fits on the page and I want the
functionality to be similar to what i
have one on here with the trailer so
what this is is it's all api so it's
coming back as a JSON data and then the
event is being fired and handled by
react to verify you know which data to
display next and things using its state
and virtual Dom so it's pretty cool and
just forewarning I'm in full-on
development mode with this site so I
haven't been spending a lot of time as
far as I you know they're analyzing code
to figure out how to to best you know
reuse code and try to clean things up
i'm not even concerned with any of that
at this point in fact i deal with that
enough during my day job that i just i
don't feel like doing that when i get
home i just i'm pounding stuff out and
i'll worry about it later I feel like
sometimes you can get caught up in the
implementation and never really get
anything done and then another time
there's also the fact where people over
analyze things and they try to abstract
things to the point where just
doesn't make any sense anymore so all
this time you spent trying to minimize
code all you did was that confusion and
nobody knows what the hell is going on
anymore so I've seen that multiple times
but anyway it's just a little bit of a
tangent so in this particular case i
want to show you i'm going to basically
just borrow the same code that is used
for these two buttons and i'm going to
put them down here
and I don't care about having this being
its own component anything like that in
fact all these movies are one react
component and i'll show you how i did it
here now i'm just another forewarning is
that you have to have a restful api set
up and you can see that like this is a
particular URL that i'm hitting and i'm
doing a querystring parameter on the URL
so it gets the the right data that i'm
looking for from my database and this is
all completely separate topic but it
hits my database and obviously as
returning this as adjacent it's actually
a list of JSON objects once again that
is a completely different discussion
than what we're talking about now so if
you don't know anything about you know
restful api czar getting json data back
and things them you really probably need
to look into that because this isn't
really going to be helpful to you if you
don't have your api in place react is
made to work with jason type data so
your breasts will calls HTTP get your
data back have react display it so so
anyways hopefully you guys have some
sort of restful api already set up and
you know how to get on Jason data to and
from it so the movies component I was
just telling you about that shows all
those movies I have my initial state and
the get initial state is the first thing
that's called and you want to initialize
objects in your state that you're going
to be using so that way you want null
preferences when react is I'm executing
so you can see I have a DVD which is a
list of objects which are empty theater
and then I have theater coming soon and
DVD coming soon they're all empty
objects so just empty lists and then I
have a start for each one of the
elements and an end and the reason why
is because when people page you know
each one of those individual things is
going to have their a different end date
and a different start date depending on
what sort of action the user has has
done so i really i needed four separate
ones so there's theatre start theatre
end DVD store DVD and blah blah and
there's obviously it starts at zero ends
at six and that's why there are six
elements being displayed for each one of
those those categories now on component
did mount this
is where I'm actually figuring out okay
if it's DVD you know this is the URL to
grab and this is the kind of criteria I
want / finding DVD movies because I'm
looking at dates basically and then you
have the same thing for all of these so
when it on the component did mount
function it's going to say okay build a
DVD variable go ahead and call this
method down here passing in whatever
sort of movie type it is which is DVD
and then the URL that it's going to be
hitting so and then it's an AJAX call to
my back-end on success for each one of
those calls it says if it's a movie type
DVD go ahead and set the DVD state you
know obviously the same thing for
theater theater coming soon you know
populate those state objects so that's
done all when this thing loads for the
first time what isn't here is how does
the user page and how does the movies
update so that's what we're going to do
now so if i look at let's go ahead and
do a search here i have the buttons that
i showed you before they are being there
being displayed here so i'm going to
copy these buttons and this is the kind
of reuse i'm talking about instead of
trying to figure out okay how can i
reuse this crap I'm just copying and
pasting it to another element you know
down here from the trailers to the
movies because I don't want to spend a
bunch of time and trying to minimize
that I don't like this here like it
shouldn't be that descriptive it should
just a scroll previous scroll next next
is to the right previous is to the left
you can see that it's making reference
to the style objects so I need to bring
those down you have right button style
left button style so I'll go ahead and
grab both of these variables up here and
these variables should be placed just
above your render I'm sorry your return
function within your your render so this
is where you're playing JavaScript and
this is just a JavaScript object so
hopefully you guys
I know what that is but there is one
caveat is that the way you identify what
these like normally and regular CSS this
font size would be font size but the
hyphen doesn't work and you have to do
camelcase so anywhere you would have the
hype and you would just do camelcase it
for your CSS now there's a few things in
here that I don't want actually know
what I do want the float I think hmm
yeah I do I think I need a clear left so
so I'm going to clear on the on the left
i think the left's going to be first I'm
kind of thinking I'm clear left that's
what I'm going to do this might not work
off to to figure that out in just a
moment
so this this should think that's fine
for right there that's go ahead and on
just save it and we're going to upload
and just see if the button is display on
the page
alright so there's a button Zesco it
looks like when you put some sort of
margin on the bottom so we can get
better spacing I'm going to work on how
to make this look better you can see
when click it does nothing so we need to
go ahead and wire up the events now if
we look at the buttons themselves inside
the react render area you can see we
have an on-click event and it says on
click this page left well there's no
page left function here so we need to go
ahead and add that and I'm just going to
copy it from the previous the trailers
so here's the page left function and the
page right function and these are for a
different component for the trailer
they're working trailer that I showed
you guys so we're going to do the same
thing down for our movies component just
above my render i'll add these two
additional methods will now get rid of
these comments
ok
so I'm just going to get rid of some of
this older logic here from the trailer
movie and we're going to start with our
page write function and we want to
increase six at a time we're really up
to six out of time this is going to take
some some tinkering here but let's go
ahead and just start with a rough
example so we're going to say they start
set state and then we call it theatre
start right so theater star theatre end
so I'm going to say even do it here so
variable star equals this dot theatre
start I'm sorry it's going to be this
state also variable N equals this data
here and
and since we're paging it by six we can
just simply add six to the end of these
elements so now we have a different
start in end time so if we say theatre
start and we can give it a start
variable and then theater and and we'll
give at the end variable that we just
declared here so now if we go ahead and
update that and we have these initial
six movies and we go ahead and click our
next you can see that it now has six new
movies because we're iterating you know
by six now if we do it again we still
have you know movies are coming that are
out now in theaters and we'll do it
again you see I've run out right so I've
added six but this elements not here now
ideally what I'd like to do is is
probably start over or go from the end
and then go six back possibly so that
way you know you don't you don't show
any you know emptiness or whatever but
normally I mean the way the trailers
work is they actually go in a loop like
so there's four trailers but you'll see
if I just keep them on next it starts
back over from the original and if I
start from the original go back it goes
to the last one so it's basically just
it's just going around in like a
circular motion now if i go here and i
run out boom it fails i obviously got
some sort of error theaters are gone
it's wiped out so we don't want that to
happen alright guys um so I just want to
explain what I did I'm just as a just
quick and dirty I think as far as trying
to figure out how to get this done I
basically did a loop so I'll explain the
code real quick inside my page where I
function I added this code here and you
guys can just copy and paste if you find
it useful if you have any better
suggestions you can let me know I'm sure
there's some other creative clever way
of doing this but this just makes sense
to me so I have a length variable that
is going to be set any time this when
this method is fire the length is going
to be set to
the theater length so I know how how
many items are in there and then i have
my start which is always going to
increment by six and then the end in the
end is important because if i get to the
end i want to make sure that that it
just shows basically helmet however many
movies are left over and then before
restarts itself so what I do here is
then I say if this could be three equal
signs if I say if this that state
theatre n is equal to the actual amount
of elements it means that I've already
reached the end of it so just go ahead
and start it over at that point so it'll
basically act as almost as if it's a
circle now assuming that doesn't happen
then what I do is I simply append 6 to
the N which we saw before which works
fine until until you run out of elements
and it breaks but what I'm saying is um
when you do add 6 to the end then just
do a simple if check to say okay this
end is it now greater than the overall
length of the movies available and if it
is and I just go ahead and say ok and
you know just be assigned whatever that
that length amount is so that way the
next time they hit next and this value
this will evaluate to true and it starts
it over again so to show you guys how
that works before it was blowing up if I
go next next and you can see it ran out
of movies right so this is exactly what
i want so end now is equal to I think
there's 23 movies here so now when I
click Next again instead of it blowing
up it'll start it back over from the
beginning and I can do the same thing
boom boom boom alright so that's what I
what I did there now paging to the left
is I'm going to raise a little bit of a
different logic question that we have if
you notice when we ran out elements
we're paging to the right because we
don't really know what the last element
could be it's an arbitrary number in
this case it's 23 but it could be 27 or
34 or whatever it can you know it
basically changes and it's not
predictable we always know that the
starting position those are
is going to be zero so if we end up
going over then I kind of just want to
start it from 0 again so to have that
makes sense if it's already at zero when
I page a left here i have this logic
that says if it's already at zero go
ahead and have the starting position be
you know basically from the back end of
it minus six and then have the NB the
length so that you're displaying the
last six movies of whatever arbitrary
number of movies you have assuming you
page left from the zero position if it's
not at the zero position and we page
left we're simply going to take the the
start amount subtract six and then
taking in the mount subtract six but
we're going to a conditional check that
says if we're now less than zero go
ahead and start it at zero and end at
six so this is our starting point so
it's almost like a the opposite of what
we did before so you see you guys can
see this in action we have so if i go
previous like i said before we're going
to have six elements even though we have
23 movies so and if you remember
correctly this is the last element so we
have six movies and if we keep going all
the way back it then hit the negative
amounts and it basically started from
zero and once again we can do the same
thing get the same results go here
previous backup so it's just going in a
loop so it's pretty interesting in that
the difference is you know because of
this arbitrary in the mount since we're
not dealing with something that we know
is you know definitive like a zero is
then we always have this you know this
missing element here if you had a
perfect you know the number divisible by
6 you wouldn't actually have this
problem but you know worst-case scenario
you don't number divisible by 6 and I
mean that's and that's your worst case
that's not too bad so anyway guys as far
as the code Reeves is concerned since
I'm going to have this logic repeated
over and over again for each one of
these elements code reuse then you know
definitely becomes important because I
don't need to repeat that over an hour
over again for each one of these
elements so what i can do is i can pass
in an argument and went at the actual
click event is fired you can pass in
specifically you know what element was
fired through the on click function
right here we could pass in a argument
to this function and the argument can be
like you know what it is basically if
it's on theatre theatre coming soon DVD
DVD coming soon that way I can do like a
simple switch and switch statement
inside here just to figure out okay am i
doing theatre do this logic you know
what I mean that way I can still have
one page right function one page left
and have it just um dynamically change
based on what element its paging whether
it's DVD or theatre so I'm not going to
add that to this video just because this
video is creeping up on 20 minutes now
so anyway guys thanks for watching
please subscribe I appreciate all the
support and have a good day bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>