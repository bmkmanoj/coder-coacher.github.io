<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a website with Django and React.js Video 3: Making our restful api | Coder Coacher - Coaching Coders</title><meta content="Building a website with Django and React.js Video 3: Making our restful api - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a website with Django and React.js Video 3: Making our restful api</b></h2><h5 class="post__date">2015-04-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-zEtzU0KfYo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up welcome back alright
so now that we have our first app
installed the band app we're going to do
is when everybody and be able to get a
restful api go into that way when we
request expand information we can get it
back as JSON data so that we can take it
with a client-side tool like angular or
react in this tutorial we'll be using
react on because it's awesome and we
want that data to be handled by
something that is more capable of
handling it than a the Django template
for a basic website Django templates
just fine but for modern-day apps a lot
of moving parts and cool features and
things I'm you're going to want to use a
client in vm v vm tool like react or
knockout or something similar alright
guys so that being said what we need to
do is um the best solution for building
restful api is using Django rest
framework it kicks ass it's the best
thing out there and let's go ahead and
install that now so I have my shell
going here I'm gonna say sudo pip
install Django and it's all one word
framework Django rest framework alright
so we went ahead installed now that we
have that we need to go ahead and add
that to our settings file so let's go
ahead just like we added to our banned
module before we're gonna add to the
settings file and we'll say rest
framework and I like to put the comment
afterwards so now that we have that we
should be good to go
now since we're using rest framework
with our band module we need to just go
ahead and under the band create a file
at Python file called serializers and
every module is going to need this we're
trying to turn it into JSON data so make
sure I spelled already serializers yeah
so serializers WI I'm gonna get rid of
that and let's see I just what we're
going to do in order to use this just go
ahead and I'm gonna paste this in here
so don't spell it wrong from rest
framework import serializers we're gonna
create a class
banned serializer and it's gonna take in
serializers dot model serializer since
i'm just trying to turn is what is
defined in the model into Jason data I'm
not trying getting more sophisticated
than that so I can just define a class
meta and then I just say down here model
equals band and now it doesn't know what
the hell band is so I need to end import
band so we're gonna say from band dot
models and I probably need to I would
probably just say from models import
band alright so now we have this band
serializer we need to go over to our
URLs and update that so I can work with
the new API and similar to how we
queried the band using band ID we're
actually gonna do the same thing well
almost the same thing so let's create
our regular expression and I'm gonna do
API and I can just copy this entire
thing here
I'm just gonna copy that okay that'll
work and then we'll say and right there
should be single quotes will say band
that views dot band detail
all right so I think that looks good now
with a rest framework we want to be able
to request different types of data
whether it's JSON or XML or something
like that and we want to when we request
that URL so if we go noob music comm
forward slash band forward slash API
forward slash one for the bass side band
that we had entered before we want to be
able to say 4/1 Jason so in order for
that to be able to work so if it was a
XML or Jason we're gonna add a feature
for that comes with Django rest
framework so this should say URL
patterns equals format suffix patterns
and we'll say URL patterns so it's
passing in this this value now if we
look at the the red mark here it's
because format suffix patterns is part
of Django rest framework and we need to
import that so what you want to do is
copy this code here so from rest
framework dot URL patterns and port
format suffix patterns okay now that we
have the serial defined when you go into
our views to create the the view that we
just defined as band detail under this
API so we're going to go over here
and we're going to be using class-based
views which is a little bit different
and then what we've done before with the
you know defining these individual
methods we're gonna call this the ban
detail because this way I identified in
our URL and this is going to use
something from Django rest framework
called generics retrieve update destroy
API view and basically this class-based
view is gonna create like a lot of the
stuff that we can use like to get put
update and delete from our database so
there's a lot of building stuff using
this class-based view and then using the
generics from Django rest framework and
we're get into that more later but if
you just follow along this is typically
all you need to do for most standard
rest restful api is especially if you're
just getting started and you don't want
anything to be too confusing at the
moment but will be able to do some cool
stuff with us here in a moment so every
every view that Django rest framework
returns and needs to have a query set so
that's what we're going to identify now
as a query set it's gonna be band dot
objects and we're just gonna query them
all so right now we only have one band
in our database but we could have a
thousand or 1500 or even 50,000 and we
need to query all of those
and then we need to identify a
serializer class that's going to be able
to return the data that we want you know
in other an XML format or JSON format
whichever one we request and then we're
going to be using Jason so for it to be
able to turn it into Jason we need to
bring in our serialize or class so let's
go ahead and identify that serializer
class equals and then this is where we
bring in the band serializer that we
just identified in here so it's copied
Bansi realizer and we'll say band
sterilizer now it doesn't know what
bands do realize there is so we need to
go ahead and import that so from
serializers import band serializer
alright so now that should be pretty
good alright now for security purposes
what we want to do with Django rest
framework now installed we need to go
over to our settings file again and I
want to add a setting down here which is
gonna be a rest frame awareness as
default filter back ends actually you
know I apologize right now we're not
gonna do that
that's gonna be another video because
that gets a little bit complicated when
we start querying the database based on
like text and things that we want to
search for right now we're just gonna
keep it simple will request a band ID
return it as Jason so let's go ahead and
just move forward now sorry about that
we'll get into that and further videos
so now that we've done all this stuff to
our band let's go ahead and update that
and we also need to update the main
application since we changed our
settings file we install Django rest
framework and now we're definitely have
to restart the server after making such
a big change
all right so if we go over to our URL
and change this and we do ban forward
slash API and then we're going to say
one and that we want to go ahead and say
Jason and that's what that format suffix
thing I was telling you about it looks
like we have a keyboard argument second
all right so one of the things that it
looks like we need to fix is the URLs
here this is um let's go ahead and we're
gonna say just views dot band detail and
we need to give it the argument dot as a
view I forgot about this and in order
for this to be able to to use views may
I say from we can just say import views
that are well from band and for the
views all right that next should work
but this is um as definitely something
that we didn't have right so hopefully
it'll resolve our error
finish every starter server one more
time
now we have another issue no matter your
band detail what I done define it as
yeah look at that so I did band detail
this needs to say the same thing
sorry about that is what happens when I
type in code and type code and talk at
the same time I'm sorry about that guys
so it turns out what the issue is is
that in the URLs not py file and there's
a caret symbol that we're missing for
the regular expression so if we look at
this before I had this and basically it
matched everything and it was matching
this expression and this expression and
since they both matched it was sending
it to the the view so anyway the caret
sign which is this little thing right
here is um it was the the number one
problem if we won if we go ahead and we
fix that and we update the band restart
the the server it will work fine so we
restart that and we go back over to our
page we should not be able to go forward
slash API and then if we go one you can
see Django rest framework here now pulls
up all this information and the reason
why it looks ugly like this beat is
because there is no static content so in
order to fix that what we can do is we
can just run a command from our our
manage Python command so we can say
python managed oculi and we're going to
say collect static and what it'll do is
it'll bring over I didn't spell it right
it would bring over all the static files
that Django rest framework has built in
and it brings them over to our static
folder so if like I went over here and
I'll refresh the server if we went into
the static now you can see that rest
framework added because of that command
it added all this rest framework jss CSS
fonts all this stuff to make it look
nice and pretty
so if i refresh this here it'll have all
the CSS and it look nice alright so the
format suffix thing that I was
explaining to you guys before before we
run into that problem
this format suffix pattern this is this
allows us to be able to request this API
and you can see that we're getting all
this on this base our data back because
we gave it the one and just like we
queried it in the previous video this is
using the API and it queries it in the
exact same way so if I went ahead and
said dot jason you can see it actually
returns all the json data and that's
typically what we want so when we're
using react to communicate with our
django database or django api we're
gonna be making the request to api
whatever ID whatever and we can even
search and we'll add those in future
videos where we can instead of passing
an integer because maybe we don't know
you know the bands ID name so we know
what they're called or what it might
spell or what it might contain so we can
send those as query string parameters
and still query our database and then
return the json data that we need and
what we'll do that in future videos but
for right now we want to keep things as
simple as possible as you can see i've
already run into problems with not being
able to get stuff to work the first time
around so anyway and we don't have a
restful api being returned from our our
band app so anyway we're good to go
sorry about the confusion here in the
next video we're going to get into
installing some tools that we need in
order to be able to keep track of react
and a few other dependencies that our
project is going to need so to keep
things nice and pretty we're gonna get
into what tools we need to install
alright guys thanks for watching bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>