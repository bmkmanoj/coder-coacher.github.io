<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learning to Scrape with Python and CasperJS: Episode 4 - Debugging, Logging &amp; XPath's.. Oh My.. | Coder Coacher - Coaching Coders</title><meta content="Learning to Scrape with Python and CasperJS: Episode 4 - Debugging, Logging &amp; XPath's.. Oh My.. - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Learning to Scrape with Python and CasperJS: Episode 4 - Debugging, Logging &amp; XPath's.. Oh My..</b></h2><h5 class="post__date">2014-03-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/S1XvNNKyLXQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back to the Python
Casper scraping tutorial series where
we've slipped up here is that you can
see in the last video we click the like
button all that was happening
successfully but then the xpath was
failing for this sign in button most
likely because it appears inside of a
modal and that could be causing a
problem or it could just be the fact
that the XPath is just way too large
what we can do is we could try to drill
down by text you can see that this thing
does carry text on this particular class
of sign-in so what we can do is we can
just right click go ahead and copy this
particular class for this span and then
what I want to try to do is change the
XPath selector since it's failing here
we're gonna just erase all this and go
all the way down to right here so just
two forward slashes a span and then
we're gonna say open square bracket
contains most of text and then here
we're gonna give it the Texas I think
it's a sign in go ahead and close that
close the square bracket and see we are
going to make sure it's the right
spelling so there's just sign in okay
lower case and so let's expand continued
success so let's go ahead and try to
let's hope that there there might be
multiple sign in spans so this could be
a particular problem just because this
span if there's another sign in span it
can match that before the one that we're
trying to match we'll find out here in a
second oh it's um let's try to run this
again
and you can see that that actually had
better results because now the click
event this occurred
this occurred click event occurred and
what was the output here looks like it
timed out elsewhere you can see we're on
step 9 of 11 so further steps occurred
you go to the directory you can see test
1 is now in there and it looks like we
grabbed the screenshot before it even
had a chance to go to that second page
it would appear so let's go ahead and
try to do something else here hopefully
the right sign and occurred just out of
curiosity I wonder what this sign-in is
if it's also in a span
and is it also in that same class
either way I don't think it would matter
too much because it takes us to the
right place so it's good and do
something else we're going to say Casper
died wait give us 3,000 milliseconds
function and do a Casper capture test
one dot PNG
so I just want to wait 3,000
milliseconds and see if that gives us
any sort of different results maybe we
took the screen shot after this
succeeded and didn't give it time to
pull up that separate sign-in page
yes he looks like we look we've got an
extra step before it actually timed out
that time test one successfully and
that's exactly what occurs a lot of
times when you do run into that
situation you it's just simply because
you didn't wait long enough or something
like that so you might have to throw in
a weight statement here and there for
the pages to load and such alright now
that we've done that it looks like on my
Chrome browser which is gonna be
different from another from what you
guys are seeing possibly if you're
signed into YouTube like it has cookies
on this particular browser says hey
you're either this or this or whatever
so let's just go ahead and click on this
and this isn't gonna be prefilled will
just say sign in as a different user
let's add an account so this is
basically what we're seeing here I want
to right click and click the ID for
email and then down here and then
evaluate let's go ahead and add the same
thing down here what is the ID name make
sure so that's just email copy this
let's go ahead and see if we're able to
enter this information in and looks like
the last thing we're gonna grab is just
the test screenshot so not sure that
we're gonna get that far in fact another
thing too I'm just thinkin about is that
none of this is even necessary because
the account does not exist that is
something that only I was seeing on
Chrome and that we wouldn't see on the
test browser which has no cookies or
anything in it at the moment so let's go
back to start and see if we can actually
get that login screen with this
information filled out and captured
under test PNG
all right so it is a tad bit unfortunate
that my we're getting closer but I'm
missing something and just to make sure
let me make sure those are IDs as well
by the email and password
let's wait for this I'm gonna see the
test shows see yeah jQuery is definitely
not filling out what we want it to fill
out let me make sure that the injection
is okay this thing should say up here
whether or not jQuery was injected
and it says successfully injected Casper
client-side utilities
all right we're getting closer here hey
guys sorry I just paused the video for a
few seconds to figure this thing out I
feel like kind of a dumbass the reason
why jQuery wasn't working
Casper will fail on the includes even if
you don't have it right
so unfortunately it doesn't tell you
anything wrong and you just have to
figure out the things are wrong what I
changed here is we added a client script
it needs to be scripts and then I also
have the full path to where jQuery is
located which is in my projects
directory and scraping tutorials
spreading jQuery min da GS so when we
run it now take a second and then you'll
see that this thing is working I
apologize I'm probably going to put a
correction in my last video for the
jQuery include which wasn't correct
unfortunately but hopefully everybody's
following along and they're not too
pissed off about that it's just one
letter and typical programming I guess
so over here you go to test you can see
that it now used jQuery too and that's
the worst circle ever anyway it uses
jQuery to insert text which is pretty
awesome
so now just a final step of this little
puzzle we're gonna go and do the sign-in
button and just simply copy the XPath on
that and then Casper we'll just say
Casper died then function
Kaspar doc click X in our XPath we'll
wait another 3,000 milliseconds and
we'll take the test stop he ng picture
now this is obviously going to display
some sort of error message that this is
the wrong username and password you're
going to want to put in your right
username and password and we'll continue
on in additional videos after that so
just to make sure that everything is
going ok you can see that the email
and/or password is not correct so go
ahead and put in your correct
information and we'll carry on in the
next video thank you guys for watching
and please subscribe bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>