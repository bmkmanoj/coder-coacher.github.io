<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Requests - 1. Analyzing and Scraping with Python Requests | Coder Coacher - Coaching Coders</title><meta content="Python Requests - 1. Analyzing and Scraping with Python Requests - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Requests - 1. Analyzing and Scraping with Python Requests</b></h2><h5 class="post__date">2015-02-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UrsUuVAJh5U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up welcome to a scrape
tutorial on how to use Python requests
and also how to evaluate Ajax driven
websites for either automation or for
data communications or data scraping a
lot of terms for it so what we're going
to look at here is we're looking at Ajax
based site and in Prior videos I've used
an Applebees website just as a simple
example I do not condone trying to
scrape their website or anything without
their permission but this is just an
example of how to use a couple of tools
to analyze a website that has a Jack's
data that comes from the server that you
can't get in the source code and what
that means is when you right-click and
you view source of the webpage the data
you're looking for is not actually in
here because it only exists inside the
browser and the reason why is because it
only exists in JavaScript and that's
what Jason is it's just uh it's more
it's commonly used with JavaScript and
it's just a a data syntax similar to XML
but it's very lightweight and it can be
passed around using JavaScript very
easily so anyway I didn't really think
about how to phrase that very well so
anyway I apologize if that is confusing
but I'll get into what I'm talking about
here right away
when we inspect element on this page
what we're going to look at is the
location so click on the location you
can see it actually grabs the local
closest one to where I'm at it does that
based on my geolocation
and it does that automatically now when
you're using Chrome there is a network
panel when you right-click and do
inspect element down here you can click
on the network and what it does this
little red button here means it's
recording all requests that are going
out and then you can sort by get and
post and the status of the response and
everything you can click this little
Clear button and that will remove
everything that's what you're going to
want to do now when we do a zip code
here so let's say location I can enter a
location right now so I'll go ahead and
give an address so I'll say two two one
seven one
I only know this or good zip code or not
and two one seven some well I think
that's Marilyn
yeah that's Marilyn okay so you can see
a lot of requests went out and got made
and everything but when we look at this
when we right click and say inspect
element you can see that the zip code
and everything exists and you can see
that sends out the browser it looks like
it would be inside the source code but
when you view the page source and we
search for zip code you can see it's
actually putting into the fall zip code
based on my my location but that data
for Frederick Maryland that we just
searched it does not exist inside the
source so you can't use something like
Python beautifulsoup
to just grab this Appleby's location and
get the data back you have to do more
and that's why we're going to be using
Python requests so in order to evaluate
what you need to do to get this kind of
data that's being returned and it exists
inside the browser number one you can
use selenium but selenium is slow and I
have videos that show you how to do that
with selenium so you can actually see
what's going on and it grabs data
outside the browser works great but if
you need that to grab data quickly it's
not good so when we go over to the
network panel and make sure little red
button is on so that we're recording and
if I go ahead and I'm going to do this
again this press enter you can see that
the requests that are being made I'm
going to sort by method here so that I
can get the post request on top because
that's what I'm looking for here and
when you look at these things you can
click on each one of them get location
you see be a status go back at 200 you
can see the response data it's grabbing
the closest Appleby's or the closest uh
city to that zip code it's actually
getting the latitude and longitude by
zip code so that way it can then use the
latitude and longitude to get all
restaurants in the vicinity and that's
why it finds Frederick Maryland as being
closest to that two one seven seven one
zip code so you can see here it's Mount
Airy Maryland but the location that
comes back is Frederick because there's
obviously not one in Mount Airy they
just basically said okay let me get the
latitude longitude from the zip and then
we'll go ahead and call this get
location by bounce
so if we have the latitude/longitude
already what we want to do in a request
is just go ahead and call get location
by balance so that's the URL that we're
actually looking to communicate with so
when we come over here what we want to
use is a tool like fiddler and just
download fiddler it's a free application
but it allows you to easily make these
um requests without actually using
something like Python requests because
you can see the data come back and
everything which is good let me go ahead
and clear all this stuff so I'll remove
that now when you have a fiddler screen
you're going to want to go over to
composer and then click on compose and
it will actually have it will probably
be defaulted to get but here's the URL
for that gate location by bounds that we
were talking about which is right here
so we can just copy the link address
pull up fiddler and you just paste it in
here now it's a post request so you
change it over to post now the request
headers you would actually get that
information when we click on this and we
go to headers your one important thing
when we look at this you can see that
it's wrapping up form data that means
that we need to actually include this
content type which says that it's a form
encoded data so it's form URL encoded so
we want to copy that
and we're going to put that into
Fiddler's request headers here and now
the request body is like okay well how
do we pass this data along so we'll need
to have the latitude and longitude and
you can see it's already built that for
us based on the get location so if we
take the form data here that's in the
browser we can just say view URL encoded
I'm sorry you say view source and then
you can say view par so we don't want
the parcel version of the source version
and then we would just copy this entire
source which is really just a query
string parameter
it's like key equal sign value and key
equal sign value and key equal sign
value same pattern over and over again
and that's just a URL request so if we
copy that entire thing and we put this
inside the fiddler body and then we say
execute you'll get the result back and
we get a 200 and if we double click on
this you can see that I have JSON data
selected so you can see all the data
come back and comes back in Jason and
you see it's frederick maryland same
data that was coming back so I could
have just using Python requests make a
direct call to this URL passing those
headers and those and then those values
the form encoded values and I would get
the response back in Jason so I'm going
to pull up my editor here and start a
project for called Python requests
alright and then let's go ahead and add
a file to this
I will just call this test
alright number one let's see if we even
have requests on install because I don't
even remember if I do or not
alright so apparently I do okay
alright so sense of request is installed
and if it's not installed you just
simply do like pip install request on
your command line and it will install it
for you but once you have a request
installed we're going to do the same
thing we did in fiddler except we're
going to bring this into Python code so
first first things first we need to
create a dictionary that we're going to
call headers and this stuff is going to
hold the content type which we grabbed
from fiddler but if we look at that we
can see it's right here so we'll copy
all this stuff
and it should be all in them in single
quotes or double quotes either way when
the bottom line is you copy this stuff
in here and I'm going to just um
paste it in here just to make the video
a little bit quicker but you would add
this stuff manually
that part's tip will hit in my bed all
right so if you need to pause the screen
just go ahead and do that but this is
all it is is just a dictionary key value
so content ID value user agent value
user is our host value content length
and some of this stuff may not be needed
but this is what fiddler did for us out
of the box when we requested this URL so
it probably doesn't hurt to add it you
may want to change your user agent to
something like Mozilla or something less
obvious that you're hitting them up now
we have this this data that we had
encoded in order to do that and request
it will encode it for you automatically
so we're going to create another
dictionary which we'll call our payload
and then once again I'm actually just
going to copy and paste this to make it
quicker but you can see that this
information that we're putting in here
the key and the value all in single
quotes we got from our browser which
chrome makes it very easy for us to form
data latitude and longitude one lot to
longitude to epicenter latitude so just
so that that's how we get that data
there and then every site will be
different obviously depending on what
you're trying to do now once we've done
that with request we're now going to say
our request equals requests dot post and
then we're going to give the first
argument which is the URL that we had
determined that we need to request
adjacent data from so we'll pass that in
there next we're going to do a comma and
then we give a headers argument so as
the headers equals headers and comma and
then we're going to say params equals
payload
and because this is a we also need to
have the following comma as well
alright now let's just go ahead and say
print our our request dot Jason
hopefully this thing will work the
hell's wrong with this
OPEC line too long we don't even need
the comma there but anyway don't worry
about that it's just my editor being
stupid
alright so let's go ahead and run this
code and you can see we get the same
exact results that we got from fiddler
so here's our JSON data being returned
which shows frederick maryland and all
this stuff in here lee latitude
longitude the restaurant hours it goes
on and on so ultimately guys I probably
should have planned the video out a
little bit better hopefully you guys
don't thumbs me down on this one it is
helpful I think it's not really like a
beginner thing but the bottom line is I
just showed you how to evaluate a
website using Chrome to figure out what
sort of Ajax requests are being made
that is communicating with a server and
the server and most instances instances
especially moving forward with these all
JavaScript sites servers are returning
nothing but Jason and allowing the
JavaScript in the client browser to
basically build the page for you which
it lowers the amount of requests that
need to be handled by a server which is
it increases productivity so you hear
about a lot of single page apps and
things like that so these types of
tactics are going to be extremely
important going forward as far as I'm
trying to get data for any sort of
project that you're working on or even
you know testing and things so the
bottom line is that I showed you how to
use the network panel and chrome to
evaluate what requests are being made
and then be able to analyze using Chrome
what data is being passed in those
requests and that way you can get that
groundwork
the way when you bring that data over
into Python requests to know exactly
what information you need to fill out
with Python requests in and how to get
that data back once you have the data
you then just go through sifting through
the JSON storing data to a database
maybe making more calls with that data
whatever you want to do at that point so
anyway guys please subscribe thank you
for watching and have a good day bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>