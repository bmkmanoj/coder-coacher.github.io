<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using Selenium and PhantomJS with Python | Coder Coacher - Coaching Coders</title><meta content="Using Selenium and PhantomJS with Python - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using Selenium and PhantomJS with Python</b></h2><h5 class="post__date">2014-05-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MAQQBeZ1iV4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you
hi guys what's up welcome back alright
so in this new video I want to show you
guys an alternate method instead of
using an actual real life browser that
takes a little bit of time or a little
bit of extra time to pull up the benefit
is that you can actually see what it's
doing it works tripping up the bad news
is that it does have to pull up and if
you're making a lot of requests or a lot
of testing then it's a very
time-consuming thing so if you have
phantom javascript installed you need
it's a requirement I already have it
installed on my machine I have tutorials
that do explain how to install phantom
JavaScript but essentially what you do
is you just go to phantom JavaScript
download the latest version put it
somewhere on your page and then if
you're using Windows you need to change
your environment variables so that when
you type phantom j/s from your command
prompt that it actually pulls up phantom
j/s so if that's working that means
phantom javascript is installed on your
machine and then your machine knows how
to reference that so assuming that that
is done and there are tutorials on my
channel that explain how to do that then
go ahead and type in phantom javascript
alright so when we run this there's
going to be a few problems here let me
go ahead and show you
number one it says they can't find the
XPath that it doesn't exist alright so
for starters what we need to do is we
need to figure out what does the system
see since it's a headless browser
there's no browser being pulled up we
can't see what's going on so what we
need to take advantage of then is saving
screenshots to our machine so we can say
driver dot save screenshot and it's
simply the name of the the image that
you want to save and I'll just do
testing dot PNG and it's going to save
to the default to the directory where
this program is run so that's where that
image will stay you can give an absolute
path to another directory of images if
that's what you want to do this will
still fail but we should get a
screenshot back so if I go to the folder
where I have this stuff you can see the
testing image has been saved we go there
you can see that we're getting this kind
of weird version of Chrome
I'm currently signed in and Google but
since I'm not using a Chrome browser
there's no cookie to show that it's
signed in I'm not sure what view this is
or what's going on there Google actually
sends different versions of their
website depending on the type of user
agent that you have phantom JavaScript
there's a little bit of a workaround you
have to do to set your actual user agent
and let's go ahead and do that now so
I'm going to copy from a blog here some
code that I'll put in the notes file so
you guys have it but we need us from
selenium webdriver common desire
capabilities import desire capabilities
then we need to create a Python
dictionary of our desired capabilities
so just go ahead and you probably want
to pause the video and copy this in like
I said or just some look at the notes
and copy and paste that in but there's
going to be some changes that we have to
make so let's finally copy in this last
bit of code
here all right so it's just giving an
argument and it's supplying a Python
dictionary of values that we've created
here so we have this phantom JavaScript
user agent now this is still not going
to work and I'll show you and just
reason why so when we run this program
it's going to go through it's going to
fail and let's go ahead and take a look
at our screenshot again all right so it
looks the same as what we have before
and the failure is because it can't find
the X path where the X path that could
be found on the previous Firefox
tutorial and the X path is definitely
there it's definitely correct so it's
really one of two things when you have
this particular problem the first thing
that you want to try is make sure that
wherever you got the X path or wherever
you you figured you know that drill-down
the IDS or whatever it is that you're
looking for let me go to google.com and
show you so when I went here to inspect
element to get my X path of the input
location that I'm trying to find I'm
using Google Chrome so Google Chrome has
if we go back to this here go to your
network's panel and just clear this out
real quick and do a refresh on the page
and just go to the top and click on
google.com and you can see and the
request headers is what you're talking
about here it's the user agent being
supplied by your Chrome browser so we
know that supplying this user agent
we're getting this version of Google
rendered to us so let me just go ahead
and copy that user agent now I'm going
to take out all this between the first
quote and the last quote and I'm just
going to paste in that new user agent
and let's see if we get any different
result here
and you can see that that that is
actually the problem there we were
getting a different version of Google
and delivered to us based off of our
user agent or the fact that Google
didn't recognize whatever user agent was
being supplied so we're now injecting
this user agent and to phantom
JavaScript and we're running a headless
browser so it's it's a much faster way
of doing this type of thing and we're
using selenium so we have all the you
know Python API to interact with
selenium to make things up pretty easy
and fast if we absolutely have to use
the browser in most cases you want to
probably try to avoid having to use the
browser since it is slower even with a
headless browser it's still slower than
whether or not it then simple URL
requests and posts and things using
other libraries but this is a good start
now another thing too is whenever you
have a situation where you don't have
elements being like elements that you
think should be there are saying that
they're not there usually what that is
is that the page is not you're not
allowing the page enough time to load
and that's really why the screen shot is
a good idea to get an idea on what's
being rendered but even sometimes like
you might see a screenshot and that's
not really the overall page that may
have the element on that that you need
to interact with so one other tip is
that if you import time using Python and
after you request whatever page it is
that you're trying to pull up so here
we're getting google.com you can just do
time dot sleep and it's a good good idea
to try to sleep for a few seconds it
also helps say if you're testing some
other site or scraping or something like
that you do so as a as ethically as
possible so you don't want to hit up the
server too or too much on give it get
breaks between requests and things like
that and you can see obviously in this
case it's a bit of overkill but that is
the other thing that you want to look at
whenever something is not working
correctly
alright guys so I'm going to end this
video here that's how we can use a
headless browser to use on
I thought Automation scraping and
testing all right thank you please
subscribe bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>