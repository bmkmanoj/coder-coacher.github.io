<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A full example of React and Django together, POST, GET etc... Part 1 | Coder Coacher - Coaching Coders</title><meta content="A full example of React and Django together, POST, GET etc... Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A full example of React and Django together, POST, GET etc... Part 1</b></h2><h5 class="post__date">2015-05-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wU-KUapq1kQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up welcome this video I
want to quickly show you how to get a
working django website up and running
with react as far as being able to
transfer data back and forth from my API
so I'm going to start off real simple
I'm going to have one one module I'm
going to turn it into a restful api so
that I can use react to post and update
and stuff like that so first things
first I'm going to put my settings file
here because it's just a blank Django
project with nothing in it I'm going to
be creating an app called post in this
Django app I've actually never even run
sync TB for the first time to even set
up the superuser and all that stuff so
I'm gonna go ahead and do that now
alright so I'm going to go and run the
first time sync TB doe go ahead and set
up the superuser now set them in the
wrong directory
there we go
all right so I'm going to go through
this process now and pause the video so
for security purposes I can't really
show that but when you run sync TP for
the first time and a Django project it's
going to go ahead and create all the
authentication tables and stuff like
that and you create your super user
which I just did so we're going to go
ahead and run the first command to
create our first app which we're going
to call post
I'm in the wrong directory again god
dammit there we go
now my development setup here is I'm
using Windows and I have in a bunch of
linux server that I'm communicating ways
so I have to use a tool which is putty
which is this some command prompt screen
that I'm using right now so I can work
on the server and then using FileZilla
to transfer files back and forth from my
Windows environment up to my linux
server so this is the two tools putty
and FileZilla and you can see on the
server here on the right hand side this
is what's on the server and this is
what's local so you see the new app that
we just created post is there on the
server but it's not on the local so I'm
gonna go ahead and download that and
bring it in and now I'll be able to
access it inside my editor and you can
see the files that it creates
automatically so we'll start with our
our models file I'm going to go ahead
and define what the database table is
going to look like and that's what the
django models is for and I already have
this mapped out so I'm going to just
paste this here and every post is going
to have a title a date the article and
the author and the author is going to be
a actual foreign key relationship to the
user table which is going to be created
for you automatically when you run sync
TB for the first time after creating
your project but when you're using the
user object in this file you need to go
ahead and import it so that's what we're
doing up here at the top and also
because I'm using this default date I'm
I want to go ahead and and paste in a
date time however with Django 1.8
actually newer newer versions I'm not
sure how far back it goes but there's an
alternative method of doing this we're
old-school was daytime daytime now you
don't have to do that anymore so there's
two options here the old-school version
is to do what I'm showing you here or
you can just paste this in and then we
can remove date/time since we're not
using it that's probably the preferred
method now
now we're going to look at the admin
file which was created for us and a few
things I want to go ahead and do is I'm
going to paste in this code and I'll
explain it as anytime you log into your
admin in Jango you'll be able to see all
the different posts and everything and
here's um the way it's going to display
and display by title and if you remember
from the models that we have our title
defined here then every post title is
going to be unique and then we're also
given the ability to be able to search
by title now because we're referencing
posts here we need to go ahead and
import the post object that we just
created in our models file so to do that
we'll do the import statement here
now we're going to go ahead and create
an additional Python file which is going
to be called URLs dot py
and a few things that we're going to do
I'm go ahead and paste in all this stuff
here I'm going to show you here so we're
going to say from Django config that URL
we're importing everything we're going
to be using Django rest framework to do
our restful api and from there we want
to import format suffix patterns and
that's going to allow us to be able to
put Jason XML and get that format based
on whatever sort of extension that we
put in there and then I'm going to go
ahead and just define my views to look
like this where you'll be able to access
our view the regular Django way by
passing in the post ID and also explain
more on that later but we'll query by
that post ID to get the right post and
then this is the API specific stuff
where we can actually use the API to
just and get back a particular post and
then this will display all the posts and
then finally down here this is actually
implementing what we imported the format
suffix pattern so that will all make
more sense as we go along but you just
want to go ahead and type all this code
in now since we're using Django rest
framework we need to go ahead and
install that so I'm going to say pip
install Django rest framework I think
that's it might not be so it's actually
all one word with no hyphens
all right now in order to be able to use
rest framework in your project we need
to go to our settings file of our
project and end the installed apps we're
going to be adding that down here
alright so in our views we're going to
go ahead and implement the view for this
first normal Django way of our post and
this is the same way that they described
in the the poll module that the Django
documentation provides so go ahead and
paste this in and then be returning this
there's something here that I need to
get rid of
now what I'm going to do here is I want
the jangle way to render as literal as
possible so when the page is requested
the the templates going to be rendered
and the only thing that's going to be
passed to that template is the actual
idea of the post so instead of querying
the database here and getting the result
back and sending it to the view and all
that stuff
I'm actually going to load the template
first so it appears as if it's loading
quickly so it's a good user experience
and then from the template react is
going to go ahead and grab this post ID
and then make an AJAX call to actually
query the database via the API to load
that post information and populate the
template that way
now let's go ahead and work on this post
list view that we have described here in
our URLs and this is going to be more
complicated of the two so we're going to
start with creating a class as a
class-based view which is all described
in the documentation for a Django rest
framework and we're going ahead and
inside this list we're going to
implement the the get view probably out
of space here
all right and now we're going to be this
is where we actually query the database
and we're going to order by the date and
we want to make sure this order by and
the negative date is actually going to
grab the newest object first and that's
the way I wanted to be listed
now we're also referencing something
that doesn't exist which are post
serializer and with Django rest
framework in order to serialize to and
from Django objects that correspond to
your database tables you need to have a
serialized so it can serialize that
information to and from XML JSON etc and
that's what's going to be going on here
and we'll describe that in just a moment
we're also getting some import errors so
a lot of this stuff is going to be
imported in just a second so that we
don't have missing imports now that
defines them all get request and get
request is not going to have any sort of
authentication or anything required I
want it to be read only it allow anybody
whether they're authenticated or not to
be able to request these post objects so
they can read them all right now we're
going to go ahead and define our our
post method and post method is going to
be a lot more strict and what we're
going to do is we're going to use
something called permission classes once
again there's going to have to be
imported but this is a out-of-the-box
Django rest framework where is admin
user and that's going to be your super
user or anybody that has you know that
super user status will be able to post
new posts to your your API
now when somebody does post to the API I
don't want to rely on the client-side
code to pass in the authenticated user
via the Ajax call because then somebody
that can read that Ajax call can clearly
see that the user ID is being passed to
the view and the view is in you know
doing something with that so I don't
even bother allowing that information be
passed across the wire so I want to go
ahead and and use that inside I want to
get that data after the post request is
made so I'll do that by saying user
equals request out user which I can get
on this post here and the request object
is here so the user is is part of that
now as far as the serializer is
concerned once again the serializer
doesn't exist but the same serializer
that was referenced before is also going
to be referenced here except this time
we're going to be passing in a context
object to that and we're going to be
passing in the user that we requested
from server side which is a lot more
like I said I think it's a lot more safe
to do it that way then then trying to
get there the client to pass that
through through the Django template or
whatever finally we say if serializer is
valid and we're serialize are not save
and then we'll return a response of 201
created or it gets if something goes
wrong we'll get a 400 bad request
response now to shore up all these
import problems we're going to do that
in just a moment after we implement the
the get class or from sorry the post
detail class this is the final view of
our urls down here so we're going to be
implementing this method is post detail
as a view so go ahead and add that down
here and then all this is simply doing
is just getting the one particular
object that was requested and it does
that through this this number here so it
will call the serializer for whether
it's post 1 2 or 3 or whatever and most
most likely this will start making sense
as soon as we start seeing it
action all right so let's go ahead and
import some of these things that were
missing here so first we have his
permission classes so when I go ahead
and import that so from raspberry mark
decorators import permission classes so
let's go ahead and say from rest
framework permission since we're using
that is superuser which is down your is
admin user I'm sorry that's going to be
imported from here so from rest
framework emissions import is admin user
and we're missing the response object
and this is a specific Django rest
framework object that we need so from
rest my framework dot response import
response that'll fix that
we need our post object from our post
table that we had created in our models
file so it's going to import that we're
referencing the built in status from
rest framework so let's go ahead and
import from rest framework import status
and then while we're at it we also need
to import generics which is what we're
using down there and then finally the
only other import that we're missing as
opposed to realizer so let's go ahead
and create that now so we're going to
create a new python file we'll call a
post serializer get rid of all that
actually no that's I don't want to call
it down and rename it this is since it's
already in the post module so we don't
it's really redundant to say post to
realize or just call it serializer in
fact you should probably do serializers
is probably the more
more a standard way of saying it alright
so in this file let's go ahead and start
by saying from rest framework import
serialize errs and then we're also going
to need to reference our post object
like we've been doing elsewhere so we'll
import from our models import the post
we also need the user actually may not
need to use or yeah we probably won't
need the user it's going to create our
serializer class so we'll define it down
here and now since this is a model
serializer there's a shortcut and Django
rest framework to sages class meta and
then you define a model suppose a model
equals post and then specifically on the
post I'm going to go ahead and say all
the objects that I do want serialize now
by default ID does not get serialize but
that's always helpful when I'm getting
you know JSON object back from a
database so I know what the ideas of
that so that's why I specify here now
what fields is doing it's a tuple in
Python and that's saying specifically if
there were more fields in this to the
class object of post they're not going
to be included only what's in this tuple
so specifically I'm saying these are the
the items that I want returned okay now
we're going to go ahead and define our
create method so anytime a new object
new post is created this method is
called so we're overriding it and we're
using this information up at the top now
one of the things that that we're using
that user object remember the context
object that we sent to our serializer
while it's being used here so we're
grabbing the user from the context and
then when we actually create the object
to the database you can see that we're
using the user here so we never pass
that information the server everything
server-side said hey this is the
authenticated user that's currently
logged in and it didn't matter what data
was sent for that user it was going to
be the information that exists within
session all right so that's really all
the back end work that we need to do for
this new module now we need to go back
over to our command line and see we need
to go ahead and run our MANET and make
migrations command I'm using Django 1.8
probably should have said at the
beginning of the video but make
migrations is effective I think as of
drangle 1.7 otherwise you have to use
the old-school way of self and if you're
used starting a new project there is
definitely no reason not to use Django
1.8 or at least 1.7 all right so I'm
going to say Python managed that py and
then make migrations and this is going
to automatically detect now one of the
things I forgot to do is I actually need
to upload all this crap so that way I
can actually see it because we need to
upload our my project which is the main
application name that I have for this
and in the post module because remember
my project contains the settings file
which says hey there's a new application
that's being you is not only po po sprit
via the app that we just created but
also Django rest framework so now when
we run make migrations you can see that
detected the post object from the
settings file and it went ahead and
created the initial database schema and
now that it's created we need to go
ahead and say migrate and now it went
ahead and changed that so migrations are
a total pain in the butt and Django
South and all that stuff never I mean it
was great but it constantly didn't work
and it was a real big headache any time
you change your database table a lot of
people will resort to like dropping the
entire table and trying to having to
repopulate stuff it was just it was a
great it was a it was always a nightmare
basically so it I mean it did work for
me and it took a long time to learn it
but I mean it was very very difficult
for newbies and this is a much better
thing that the Django has per new B's to
run make migrations and then my
and it just works out of the box so now
that that works let's go ahead and go
back to the project we're going to go to
the main settings project here I want to
go into the URLs and I didn't even
realize but this is actually set up out
of the box semi old-school Django users
are going back like five years now so
before you used to have to enable the
admin so if this thing works out of the
box let's go and check this out all
right so it works all right so if you
ever run into this situation where you
have this ugly font and everything you
can see the CSS files aren't being used
so you need to go back over to your
command prompt and all you have to run a
command which is Python and go back to
your manage py file and you're going to
run collect static really not a static
route all right I have to update the
static route in the settings file yeah I
definitely don't have it defined in here
so there's a brand new project so I'm
going to go ahead and add that
and this is just a intercept regular
file path to where your application can
be found on your linux server and mine
is a located here so I say post and
static put everything in a static folder
except I better not update this this
should have the click static should be
able to work now because what it's
saying is that it needs to know where
the static folder is because it's going
to put the CSS folders in here should be
like an admin folder we'll check that in
just a moment so if I run this command
again just go ahead and say yes damn it
go and say yes all right so I went ahead
and copied a bunch of stuff over if we
look at this server and we refresh this
sorry my servers going slow here
actually no what the static files for
this particular Django admin is actually
being it's pointing to the virtual
environment so never mind
but either way it no actually it copied
it over and it works now all right so
now if I log in to the website because
we added posts to the admin you can see
that we now have this post and we can
create new posts and stuff like that and
that the author is linked to it's a
foreign key relationship like I said to
the user table which currently only has
one registered user well right so that
is all working as expected
now in order to be able to use the urls
file of our post application that we
just created or the post app we need to
go to the urls of our main project and
underneath the admin go ahead and add
this is something that I have for
another project but we're going to say
pull and then we're using pulled out
URLs
I upload that make sure it works
yeah obviously I have a type of it's
post I don't even know what I'm thinking
about
my post serializers oh yeah we didn't
actually import our serializer into the
view so it's one type let's go ahead and
fix that now
and we'll just say from serializers
import post
all right
we should say from serializers
all right so now it's working just fine
with her our new object and let's go
ahead and test out this API just to see
how everything's going
I'll say this is our first post test
post this is a great tutorial sign me
and then I'll go ahead and save this now
if I pull up a another URL I want to go
to a new post
if we go to post and an API and then one
you'll see that it pulls up the Django
rest framework and it tells me what I am
what's available to me so I can do a get
a put a patch and all this other stuff
which is really a problem I really don't
want that
but I'll worry about that later because
I certainly don't want we all worry
about that later anyway so the format
suffix patterns is that I was explaining
at the beginning of the video when we
imported that into our URLs where that
comes into handy is actually right here
so if I do after the forward slash and I
say Jason you can see that it's going to
actually give the dot Jason format and
that's the purpose of that because most
of the time you're going to make a
request with this exact same format here
even with the forward slash you can have
the forward slash remove but I just keep
it there and I just make the request
just like this without having to edit
anything so in my Ajax call this is the
URL that I'm requesting specifically and
it's going to come back with this data
that's pointing on a JSON object I can
say data ID data author blah blah blah
all right so now in order to implement
react into our project let's go ahead
and download that I also want to
download a bootstrap
we'll grab the starter kit I'll give you
a zipped up file actually don't want all
of it I just want the minimized version
and then the JSX transpiler so we're
going to do the men I'll extract that
and
I said when to my bill J's folder okay
and I went there jazz transformer
alright so both of those should be there
now
now we also need to go ahead and create
a template as we also need the bootstrap
files I'm going to extract that to the
same location and then while we're at it
we're also going to use the minimum CSS
and then we're going to extract the
entire font to the static actually go
into the build folder right so we look
at this and go into the build so we now
have the fonts CSS no images yet in
JavaScript so bootstrap min react min
all right and create I'm going to create
a just a regular HTML template we're
going to call this in fact actually I'm
going to create a folder called master
page a directory called master pages and
then in here I'll just create HTML file
I'll just call this um call this main
master page now you know I was stupid I
chose main
try a template already built here and at
the bottom of my template this is just a
regular Django template so I have the
references to where react the minimum
version react can be found on the JSX
transpiler also this common J's file
which is what's something I'm going to
need for this template that I'm working
with
I also reference the bootstrap main file
and then there's also the jQuery which
is I'm using the repository that Google
provides the cache network that they
have to deliver the jQuery file quickly
and then finally because I'm going to be
using Google Ads in my project and using
react to render those Google Ads I
actually have to add the script file but
you can disregard this part at the end
it's really not necessary
yeah the template here is going to have
my disclaimer for the company that I own
also references to sitemap about us
contact us all the stuff that doesn't
exist for the project yet some social
network contacts and stuff like that now
this bit of information is that I want
to the navigation to be dynamic that if
the user is not authenticated that
there's going to be a log n slash
register link if they are logged in it's
just going to go ahead and it's going to
have a profile drop-down where they can
you log in start out log in so if
they're not logged in it'll display
these two links where they can log in a
register otherwise it will display a
logout button and or ability to view
their profile which none of that exists
yet but that's what's going on here up
at the top you can see the actual text
will be a login register if they're not
logged in and profile if they are logged
in you'll see that in action here in
just a moment so a lot of the stuff you
don't have to actually worry about this
is all just part of my just part of my
setup for this specific site
actually it updates some of these paths
because this is going to be in the build
folder
a couple things to point out with the
template in case you're interested that
I have these different blocks that all
pages from that are going to inherit
from this they're going to be able to
specify their own meta content in fact
most of this is probably going to be
moved into the page that inherits from
this because none of this should really
be here this should be in the page that
implements it and there's a block CSS
you can add custom CSS to file and then
down here is their content that main
main content of the page and then at the
bottom there's also the ability to put
footer scripts so those are basically
the three things in any page should be
able to implement in order to have an
effective master page all right so now
when you look at the views and you see
that this this post hoc and right now
there is no post at HTML so let's go
ahead and create that
now first things first since we're going
to be using a master page we need to go
ahead and do an extends command and then
this is what we say master pages and
then we just called it main that HTML
our second commands gonna be a load
static files
if I wait finally we have a block title
which we're not going to put anything
for right now
and it's going to add the block content
command or content section
all right so there's quite a bit to
upload to the server but we're going to
upload all this information that we just
put it inside the static I don't think
I'd change anything on the poster to my
project I don't remember if I did or not
but it's good to not do this here so if
we go to post and then say one or so the
template doesn't exist yet doesn't find
it
all right um so in general one point it
looks like they overhauled the entire
template system in order to be able to
support multiple templates like Jinja -
and things like that so um is actually
something that's new to me but um
normally you would or in the old school
way you would do the template
directories here and we need to actually
take this value and I'll remove this and
we would put that inside of our
directory here also based on the
documentation under the context
processor I should go ahead and put all
this here and this is just going based
off of the Django 1.8 documentation
specifically stating that if I haven't
customized it which I haven't that I
should just put those in there which I
did and I guess that should be the
default if it's telling us we should do
that let me see if this has any
different result okay so with the new
jungle 1.8 set up your template should
look like this and all this is really
the default but the directory here is
where it would differentiate depending
on your specific setup here so all this
other stuff is just recommended by
Django 1.8 so if we request a page you
can see that it is loading and
everything all right so we have some
craziness going on the view but if you
look at the review source you can see
that it's inheriting from all the master
page and everything that we had just
created so all that data is there
nothing showing up yet one of the things
I have screwed up my viewing ORS is
loader from a template that I was
borrowing from another site
all right so here's the main part of the
application it's still missing quite a
bit but is the part that was telling you
about word shows profile since the user
is logged in I don't have the logo image
missing all the images and everything
down here - none of that is a big deal
to me at the moment since I'm using
bootstrap I'm going to go ahead and go
and edit this post everything should be
inside of some sort of div container so
we'll say dude class equals container
and with bootstrap that class actually
centers the content in the middle
sounds like to add another script tag
I'm going to be providing on this code
on github so if you guys are following
along and you can't really keep up with
the changes that are being made I'm
going to provide all this template
everything else you guys can just copy
and paste it
all right so you can see that the drop
downs everything are working now that I
added the script tags that I need still
missing the logo but I'm not really
concerned about that we're also missing
some of these in images but we're not
going to worry about that for right now
but you can see that the actual tag that
we had added to the page that inherits
the master page which includes all this
stuff is now being displayed the way we
want it to so this is gonna be a
two-part video in the next video we're
actually going to go ahead and implement
the react and do the communication with
a server for adding posts and things
like that alright guys thanks for
watching bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>