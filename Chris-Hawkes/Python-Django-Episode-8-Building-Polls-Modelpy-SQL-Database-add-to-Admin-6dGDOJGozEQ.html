<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python &amp; Django Episode 8 - Building Poll's Model.py &amp; SQL Database add to Admin | Coder Coacher - Coaching Coders</title><meta content="Python &amp; Django Episode 8 - Building Poll's Model.py &amp; SQL Database add to Admin - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python &amp; Django Episode 8 - Building Poll's Model.py &amp; SQL Database add to Admin</b></h2><h5 class="post__date">2013-12-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6dGDOJGozEQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you
Oh
alright so on the Django documentation
there's a really good job of showing us
how to create an app and things like
that so I kind of want to follow along
with their documentation so we can kind
of get the pole application working and
then from there we'll try to implement
like tasty pie to make it a little bit
more like a jack space that's kind of
the purpose of what I'm going for I'm
hoping to just do their standard pole
type thing and then I don't know much
about Django tasty pie but I plan on you
know adding that in and then trying to
make most of the stuff like client-side
JavaScript making these api calls to
update our models and stuff so that's
that's what the goal is here but to
start with we're going to go ahead and
create the poll application and follow
along and the django documentation all
right so first things first once we have
the poll object created see here to
refresh my my directory so here's my
pole
all right now the models file this is
where our database schema goes and all
that means is that we're going to define
what data are we collecting so with the
polls application we have one class
which is going to be the pole itself and
the pole itself is going to be the
question of whatever it is that you know
the pole is asking now anytime you have
a class you do have to inherit from the
models model class so really your sub
classing models that model creating a
new class named pole and then you just
add stuff to it so we're adding question
models done CharField I guess it's how
you pronounce that I'm not really sure
how you pronounce that but anyway we're
going to follow right along some max
length equals 200 and then we're going
to publish states and this is equals
models dot take time field now just so
you know the the purpose behind like the
daytime the char field all that stuff is
that when we sink this in our admin
we're going to be able to go to a poll
and we'll be able to create a new poll
and give it a question and a publish
date and all that stuff and you'll
notice that because the models is except
expecting a datetime field that's the
type of field that is going to be
created within my sequel so my sequel
knows to grab a daytime the admin will
know to display a daytime so you'll get
the option of a calendar with actual
time you know so all that stuff is done
for you you wouldn't want to have to you
know make your schema within my sequel
and all that stuff and try to write all
the Python code to interact with all
that stuff Django does all that for you
on their abstraction layer so they
abstract meaning they take all that away
from you to make it much easier on you
so all we have to do is just define
these models the wage
wants us to do it so anyway that's the
story behind that so the next class now
we're going to have sorry my computer is
slow so following along in the
documentation on next class is choice
and once again it inherits from models
model and we're going to send pull
models now what this does is on this
second class of choice choice will
always have to have a relationship to a
poll object and it's just a single pole
so if we create a poll and say we call
it poll one and then we create a choice
choice says hey I need to have a
relationship to a pole so it's a foreign
key relationship so in this case the
example I'm in describing we would just
say that it's foreign key like so poll
would be pull one and that way choice
would have access to polls question and
polls publication date and it's
mandatory that that relationship exists
because of the foreign key relationship
so we'll get more into that and
hopefully you'll be able to understand
that up if you don't understand what I'm
talking about anyway so let's do the
care field and char field whatever that
is max 200
now we can actually give it a default
value so anytime you create a choice the
default value is going to be zero you
don't actually have to say zero every
time you create a new choice so that's
good a lot of times like when I'm
dealing with date I'll have the default
value I'll simply import up at the top
of the file like import date time and
then my default value for a daytime can
be like datetime date now
but we're not going to worry about that
right right the second but that default
value does come in handy alright so now
that we have our models defined here
we're ready to go on to another step
alright so now that we've done that
let's go ahead and just like we did
before with Django tasty pie we're going
to end we're going to add our app so see
we should have to say my project dot and
then the happening so we call it poll
now if we do a sink TB we're going to
know whether or not it finds it because
we might just have to say Paul one
second let's try this that's where do
our synch TV so it says no module named
poll I capitalize that this thing is on
case sensitive
alright certain everybody we don't need
to do my project you just need to say
poll
sorry we also had an error here
especially models that model as you can
see it gave an error message that model
is not fine so we need to see model top
model all right now it installed the the
pole application that we just created
now what we want to do is we want to be
able to go to our Django admin and take
a look at the polls but what we need to
do is we actually before we can actually
see our poll application in the admin we
need to go ahead and add a admin file to
the polls folder all right so let's go
over to our poll application here and we
want to add a new item really you're
just going to create a new Python file
god damn it i don't have plays on you're
not going to have this issue i'm using a
Microsoft idea unless you're using this
I'm honest I'm just going to be like
this I'm going to say file save as and
create my admin file that way because it
recognizes Python when it's in there I
have to do some work to my editor here
so I can actually make a python file but
here I'm going to go ahead and create
the admin py file so just add a Python
file however you normally would in your
editor once we do that in our admin py
file we need to go and say from Django
contribs import admin and then from
poles dot it's actually pulled out
models and port hole and admin dot sight
register poll
now while we're in here let's go ahead
and create a class here where it's a
class hole and then and then we're going
to subclass a model admin and then from
here we're going to give it two fields
that we wanted to display within our
admin date or admin so we're going to
say we wanted to show the publication
date and we also wanted to show the
question and that goes in a Python list
now when we do our admin site on
register we need to register poll and
pull admin alright so now that we've
done that I'm going to go ahead and go
back go back to our command prompt here
we're going to do a new thing instead of
sync TB we're going to say sequel pull
the name of our app and you can see here
that it created these tables and really
created the tables that we told her to
build based off of our models file so by
saying sequel polls it's going to sequel
based off of the model that we just
created so it went through and my sequel
and it created all these things that we
need inside of our database table for
pole so now that we have done that let's
go ahead and restart our server so it
can take effect
it's now that the server is running
we'll go ahead and pull this up here
don't worry about the error message for
a second but now if you go into our
admin you can see that polls is now
listed there actually you can see tasty
pot of stuff as well but when you click
on poles what displays is based off of
what we told it to display like if you
add a poll you're going to see what's
displayed the two things we said that we
want to display the pole or the other
the question and the date published and
that is displaying based off of what we
put in our admin py file publication
date in question so if we hadn't have
done that then when you go to add a poll
you wouldn't actually see those fields
there they're only there because we said
that they should be there so anyway that
was the whole purpose behind doing that
we're going to go ahead and end this
video here so you should feel good about
the fact that you've created a poll
application we've added it to our
project we've added Django tasty pie to
the project and you even configure your
your app by sequel in the database and
determine basically on determining how
the admin is going to show the pole so
anyway be proud and next video we're
going to go ahead and do some more stuff
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>