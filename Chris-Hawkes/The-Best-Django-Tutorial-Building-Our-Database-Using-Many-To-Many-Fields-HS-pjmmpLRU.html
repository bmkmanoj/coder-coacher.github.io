<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Best Django Tutorial Building Our Database Using Many To Many Fields | Coder Coacher - Coaching Coders</title><meta content="The Best Django Tutorial Building Our Database Using Many To Many Fields - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Best Django Tutorial Building Our Database Using Many To Many Fields</b></h2><h5 class="post__date">2016-04-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HS-pjmmpLRU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up so welcome back so in
this tutorial we want to look at how
we're actually going to create our first
app so Django Projects consists of a
bunch of different apps and you can see
here that I have tutorials and a lot of
this site is going to be based upon the
YouTube videos that I'm putting together
so I'm trying to basically supplement
the channel so I need to have a models
basically an app for my tutorials so I'm
going to create a tutorial app and you
would do that by going to your command
prompt making sure you're in your
virtual environment and just like we did
before with the manage that py commands
we're going to say Python manage py and
then we'll say create app and then we'll
call it tutorial or maybe it's start out
yeah it's start app I forgot all right
so now that we've done that
you can see down here at the bottom that
we now have this project so I'm going to
go ahead and stop my server so I can add
this to my project
I'm sorry including project so in the
tutorials it's going to have its own
admin dot py and I'm getting the apps
don't worry about that but models is
where we're actually gonna focus right
now because we need to create the model
so basically all right so a tutorial
should be it should really consist of
multiple videos and video should be its
own database table so when we think here
so I basically what we're going to do is
we're actually going to create you know
we're going to keep everything in one
model file so we're gonna create two
classes and one models file here so the
first class will be called video and
then you're going to use a models model
and here we want to have a title be the
character field suppose a model is our
character field we should give it a max
length I'll just make it 200 I don't
want titles to be longer than that and
then we want to be unique so unique
I was thinking that my intellisense was
actually gonna help me with this but
it's actually not
so basically unique equals true now one
of the nice things is Django is gonna
create a primary key and which is gonna
be an integer so every video that we add
to our our website or our database is
gonna have you know its own unique ID
which we don't have to actually set up
for some other web frameworks making do
that but Django does not alright so a
video should have a title
there should be a basically we'll just
call it a video ID you know it um I
don't like the name of that so you know
I'll just call it YouTube ID
and I'm not really sure how long that
should be but we'll just make it a max
length of 20 and then we want a
description and instead of a character
field here we're gonna give it a much
larger max length since it will make it
like 800 and I also want to say blank
equals true and no and null equals true
and I want to do the same thing right
here but you definitely don't want what
blank equals true and no equals true
allows both a blank and a null value to
exist inside the database you don't have
to fill this information in the title
has to be mandatory you definitely want
to have some sort of value there and in
many cases you know you don't want it to
be duplicated so the database is
automatically going to check to make
sure that this value isn't already
entered because I don't want to
duplicate videos inside of the database
or it doesn't make any sense to do that
so now let's go ahead and create another
class just like we did here except we're
gonna call this one tutorial all right
so the tutorial is also going to have
its own title it's going to have its own
description just like we did with videos
except this one is going to be a
many-to-many relationship where we're
gonna actually save videos and it
remodels many-to-many and then here what
we need to do is we actually need to
reference the video class that we just
identified all right now another thing
that I actually want to do because a
tutorial is also going to have tutorials
that are basically an association or
similar to a tutorial that's being
viewed so what we're gonna have is we're
gonna have a similar field down here and
I can do a models a mini to Minnifield
and reference itself by using a value
here just a regular string called self
and I can say no equals I don't know why
my editor wants to do that no equals
true and blank it's true because what
this is saying is I don't have to
actually add many too many fields here
like if there's no similar tutorials to
the one I'm working on but this
many-to-many field is actually a
many-to-many of itself
this one is a many-to-many video so
basically a tutorial can have multiple
videos there can be multiple tutorials
using the video and then there can also
be
multiple tutorials that are referenced
as similar tutorials and all be stored
under under this joint alright so one
other thing we need to do is say
actually no what we don't need to do
that in Python 3 anymore I mean in
Python 2 you just have to define Unicode
in order to get the name I don't think
you have to do that anymore but we're
gonna find out one thing though let's go
ahead and let's deal with our date field
because we want to make sure that
anytime a tutorial is added or even a
videos added that there should be a
date/time so that way we know like we
can query like the newest tutorials or
newest videos added so let's go ahead
and import the daytime object from our
Python library and that's part of the
Python installation no matter which
version of Python you're using and then
we'll just call this date equals models
date field and there is a date/time
field but I don't I don't really care
about that and we'll say no equals true
blank true you know what maybe I do want
a date/time field I'm gonna go with the
daytime filled this is gonna be your own
determination but what I'm gonna do is
I'm actually going to default to the
current time anytime a new object is
being added so that way I don't have to
manually enter a date time because that
can get super annoying but I want to
have both of these values consist of or
carry an actual date that they got
uploaded now in order for our actual new
tutorial objects and video objects to
show up in our admin we need to actually
edit the admin dot PI file which is
included with any sort of app that you
create using the Jango command-line
helper so this parts a little bit
difficult to wrap your head around but
the more times you do it the more it'll
make sense but what we need to do is
define an actual admin class which we're
going to call tutorial admin and it's
actually going to use the new
an object that was just added up there
at the top for us automatically and say
model admin so what we're doing is we're
actually implementing or we're sub
classing essentially and our parent
class is admin model admin and what I
want to do is I want to say list display
and I want to be able to display all
tutorials by their title
make sure you add that extra comma
that's weird to put it on it's it's a
tuple that we're dealing with here so
that needs to be there and we're gonna
give it the option to be able to search
through itself for any value that
matches the title you can actually give
other values too if you want it but we
don't need to do that and another thing
I want to do to make it easier to deal
with the many too many objects is I'm
going to say filter and horizontal and
then we're gonna pass in a tuple for
similar and also for videos and we need
the extra comma there now I need to say
admin dot site register and I need to
say tutorial and then tutorial admin now
tutorial is not going to be found here
you need to import it so we're gonna say
from tutorial dot models and poor
tutorial
now that is for the tutorial admin since
I also want to be able to access the
video I need to add a video admin as
well so we're gonna create another class
in here and just change the name for
video admin and then here since there is
no Minnie - Minnie field for the video
we can get rid of that filter horizontal
but we also need to register it down at
the bottom so we're gonna say video and
then video admin and then we also need
to import video as well alright cool so
now that we've added a new app to our
project we need to go to our installed
apps and we're gonna need to add
tutorial which is the name of the app
that we created the reason why is
because any time you add a new app you
need the database to know that it exists
because if we went into our database and
we looked at what noob post looks like
right now we're gonna see database
tables since we created a super user in
the earlier videos you're gonna see if I
go into schema public tables you're
gonna see all the different tables and
all these are related to all this
authentication stuff that Django comes
with out of the box which saves you a
ton of time but what you don't see is
you don't see the tutorial that we added
or any videos so how do you add videos
or tutorials well the database needs to
know about that so anytime you add or
even make changes to your models file
your models file in Django explains to
Django how to create your database table
so this is all Django speak but it turns
into raw sequel for whatever sequel
database you're using whether it's
Postgres my sequel sequel server any of
those others sequel databases django
does all the hard work for you to create
the tables and everything that you need
so all you have to do in order for that
to happen similar to how we created our
migrations at the top we're going to do
the same thing we're
Python managed py and we're going to say
create migrations it might be migration
sorry
it's make migrations I think not create
goddamnit make migrations all right
there you go so it detected that
tutorial needed to be added and then it
created its initial migration so it did
that based off of your models file now
that it's created it it's still not
going to exist in the database because
we have to actually migrate it so if we
look down here the table doesn't exist
and it won't exist so the first thing
you do is you make the migration and
then you migrate and now that that's
done if we go into our database and we
refresh this joint you can now see that
we have four new database tables that
were created you have video tutorial and
then there's two separate tables for
each many-to-many relationship we're not
going to get into the specifics of that
and that can be an entire video and it
really has nothing to a giant or that
has to do with being database specific
but the point is though is that Django
makes this stuff a lot easier than what
you would have to do you know to create
this stuff in a database you know for
you or if you were going to do it by
yourself I mean you'd end up having to
do a lot more work than what we just did
in this video so now that we've done
that let's go ahead and start the
website up because I want to go into the
admin to show you that the work that we
did with our admin panel is actually
working
so if we go forward slash admin you can
see that we now have tutorials in videos
so if we did not add that code to the
admin dot py file then it would not
exist inside here but it does because we
out of that if I go into tutorials I
have the ability to search right now
there are no tutorials in here but I
have the ability to search if there were
and they would search by title based on
you know how we set that up and here's a
video let's go ahead and add a video
so if I go to like the newest video for
this series you can see somebody
downloaded me already what a dick so
like if somebody always downloads my
video like I think there's a bot that
actually does it and it's so easy to
create a bot that just automatically
parsed as a channel to you know wait for
a new video I'm pretty sure that's
what's going on because otherwise
there's always this one troll that won't
like download my video almost
immediately after it gets uploaded so it
seems like it's definitely a bot so some
some butthurt person out there is uh is
upset over my channel anyway um so if I
go to add video down here and I'm gonna
put the YouTube ID for the video and
we'll say on how to use post breaths
bull or something like that this is just
gonna be temporary this is temporary so
I can save it and now that video exists
and if I go to tutorials and I go to add
a tutorial because I said to filter
horizontal you have these horizontal
things which makes it so much easier to
create many to many relationships so you
can see similar here is a many-to-many
to itself but there are no tutorials
otherwise they would show up in here
we're actually creating our first
tutorial now now here's one problem
you're going to notice the video object
and this is actually something I thought
was resolved in um there are the later
versions of Jango but apparently it's
not
so let's go ahead and fix that right now
so in order for this to actually show up
as its title and not just say video
object all we need to do is go to video
and then down here we're gonna say
define Unicode self return self title
and then we're gonna actually do the
same thing
for our tutorial down here and all we're
doing is we're attaching a method to a
class so this is basic you know class
and object oriented programming in
Python but if i refresh this
I may have to restart my server in fact
I think I do
darn it all right let me let me kill
this real quick
all right so if I go to back into the
admin click on tutorials add tutorial
hmm all right so what it was is actually
in the old Python 2 you'd have to do
unicode but now you do Python string so
just STR so make sure that's two
underscores STR followed by two more
underscores I mean need to do that for
both of them which i think is a little
bit unusual but anyway that will resolve
the problem so instead of saying like
video object which isn't very helpful
because we obviously want to know what
the title of the video so we know you
know how to create these tutorial videos
and stuff like that then you know this
is definitely a necessity here so if I
go to admin now I went to tutorial and
we'll add a tutorial we'll just call
this tutorial one and then now you see
instead a video object or a video idea
or whatever it was it now says the
actual title to be a video so I can just
move that over and say this is a test
and you see the date/time is
automatically pre-populated like I
showed you before by clicking the save
we now have one tutorial in here and now
you can see tutorial 1 so I could even
reference itself in a mini - mini
relationship but I'm not going to do
that but because I'm doing a
many-to-many if I did a tutorial too
and we'll just use the same video since
it's a many-to-many this is in and then
now I can reference tutorial one as
being a similar tutorial and click Save
so now you have all this stuff all
linking together in a nice nice fashion
the database is doing a lot of that work
for you which is why relational
databases exist so I know this was a lot
to swallow a lot of tutorials in Django
aren't going to touch on the many too
many and all that stuff I feel like I
did so you guys should subscribe at
least vote up my video or share it or do
whatever and I'm gonna continue to keep
building this tutorial series just let
me know I kind of went I didn't even
know I was really gonna do this but as I
started rewriting a site that I had in
asp.net and I said you know what I'm
just gonna do it in Django and I love
Django I always come back to it but um
so anyway guys I'm gonna continue
building this series let me know what
you think and have a good day bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>