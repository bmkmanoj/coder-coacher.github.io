<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>how to create a RESTful API with Django in 20 minutes | Coder Coacher - Coaching Coders</title><meta content="how to create a RESTful API with Django in 20 minutes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>how to create a RESTful API with Django in 20 minutes</b></h2><h5 class="post__date">2015-03-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gz5TPI2sSTo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up in this video I want
to show you how to install Django rest
framework in order to be able to
understand what's going on in this video
you have to have a Django working Django
website and in this particular website I
just have one model that I'm going to be
turning into a restful service which is
this zip model and the zip model
contains a bunch of objects here like
each zip code that you can click on will
have the city if there is one a county a
state and the zip code so I want to be
able to turn all that information over
to a restful api and in case you don't
know what our restful services it's a
software architecture style which just
consists of being able to transfer data
back and forth through the HTTP protocol
which is the same thing that the web
operates on and it's a lot lighter
weight than something like xml or some
sort of soap messages being sent back
and forth so it's kind of the modern way
of just sending data typically that data
is represented as JSON JSON data which
is a similar to XML but it doesn't have
as much weight so it's easier to
transfer across the wire so that being
said Django rest framework is an awesome
project that has made creating restful
api is the easiest it could possibly be
for the Django project the only other
alternative really that has a lot of
weight lined it is probably Django tasty
pie but Russ framework is now becoming
like almost a de-facto standard of
restful services with a Django and seems
to be just getting better with time and
more and more adding more more features
when it comes to like throttling
authentication authorization and things
like that so let's go ahead and jump
forward here the first thing we need to
do is I'm assuming you set up your
Django site and hopefully it's inside of
an area virtual environment my
particular website is going to be
located under my home and then
wish I could type I have everything on
my web apps here so I have a thing I'm
going to be working with is this project
called franchise so in order to be able
to activate your virtual environment you
need to go into the virtual environment
directory which I really can't type
tonight and then I go into Benny just
say source activate and now if you're
inside your virtual environment you
should see inside parentheses whatever
your own environment name is that you
set up so now that I've done that I can
go ahead and install Django rest
framework now you don't need to have a
virtual environment hopefully you guys
know what that is but it's an awesome
project that allows you to self contain
all your projects and modules or all
your module Python modules and things
into a specific environment so that way
you don't have modules competing with
each other or projects relying on the
same modules that you know may not make
have clashes with different versions and
things so this allows you to make sure
that you encapsulate your project under
its own special directory with its own
libraries so now in order to install
this thing we need to install it with
pip so we're going to say pip install
Django and it's all one word rest
framework
now after that's installed when you go
ahead and add it to our installed
directories here so just go ahead and
say rest framework inside our installed
apps on our settings file next we'll
want to go to our URLs of the main
project and we're going to paste in
these this API so that we can have the
good-looking API enabled for us to make
it easier to manage our restful service
now just for some default security out
of the box we're going to go ahead and
add this to our settings pie file which
is inside the Django rest framework
documentation and this will just set the
permissions so that we can make other
requests and everything it's going to
set it to read-only so now we need to go
to our project where we plan on making
the restful service so I had said before
it's in the zip project so I'm going to
create a file which is called
serializers it's called serializers and
we need to go ahead and import a few
things here so for the top we're going
to say from rest framework import
serializers okay and then see
now we need to import the zip object as
well so let me take a moment here just
to explain my database structure so the
zip code here consists of a zip code
which is a primary key field which is
just text key field right here and then
you have the state county and city and
these are all foreign key relationships
to their own tables to keep these this
data clean so we have a state table
County table of city and zip so in order
for our serializers bill use that we
actually need to import all of that
stuff so we're going to say from models
import city county state and zip so
we're going to be using all of those so
first things first let's go ahead and
create our first class here which we're
going to call our call our city
serializer
and it's going to import my serializers
dot model serializer
and we're going to create a class meta
and then we assign it the model that we
need this thing to use so this thing's
every model and we're going to use city
and then down here we're actually going
to give the fields that we need to
serialize and what this thing is doing
is um so we need the ID and then we need
the name and if you look at the model
for city down here you can see that
there's just a name category ID is added
by default to any table so we do want
the ID just in case we need a reference
the idea associated with that city name
but what this does this is a shorthand
way of being able to say hey Django rest
framework here's the model which a city
that that you need to turn and here are
the fields that you need to actually
serialize for me so the serialization if
ID happens to be an integer name happens
to be a string but it could be like a
date/time object and rest framework will
actually take care of the responsibility
of serializing that down into something
that we can easily parse with like with
Jason and JavaScript and stuff so it's a
lot of headache especially when you
start having a lot of foreign key or
many many to many relationships Django
brush framework makes all that stuff
very easy so hopefully you guys will see
that and really to learn that the hard
way you have to try to just make your
own restful service and serialize all
this stuff yourself and see what kind of
savings this side this this thing does
you don't have to do it the hard way but
that's a good way of recognizing some of
the good that this framework does for
you alright so the next thing we want to
do is our County serializer
and once again serializers dot model
serializer
and any class meta-model equals County
and then we're going to give it to field
equals this is very similar as well ID
and name and the last one is a state
when I say class state serializer this
is very similar to Django models that's
why I keep typing models this looks very
familiar to how you would do that okay
Smita model is going to be state and
then field is ID this is going to have a
name and then it's also going to have a
state abbr so state abbreviation and
this needs to say equals
yeah
so there it is we have three serializers
here city county state final serializer
needs to be the model or I'm sorry this
zip which actually combines the zip
filled plus these three foreign key
relationships so let's go ahead and look
at that now so we're going to look at
zip serializers serializers dot model
serializer is going to be class
meta-model is going to be a zip model
and the field is going to be a little
bit different so the field just like we
described before is going to have the
fields that are there so we're going to
ID we're going to have code which is the
primary key then we're going to three
foreign key relationships that you saw
there so we have city county and state
now these city county and state are
foreign key relationships to another
table so in order for that to be able to
work we need to add something to this
serializer above our class which we're
going to define with whatever name that
we gave down here so city is going to be
equal to the city serializer
so city serializer and just simply needs
to do that and then county is going to
be equal to county serializer
state equals state serializer so these
here are like basically saying hey this
field which is right here in order to
serialize this you need to use the city
serializer and it will then go up here
and serialize the ID in the name of it
because remember this is just a text
area assigned to the table this is a
foreign key relationship which is
another table another table another
table not another table not another
table anyway hopefully that makes sense
so now that we've done that let's go
ahead and look at the URLs for our
project in my particular case
only have a URLs file yet so I'm going
create that now so in the URLs what we
need to do is you always need a look at
this we're going to say from Django you
probably already have this in your file
Django config dot URLs import patterns
include URL and we're going to say from
rest framework dot URL patterns import
format suffix patterns now you probably
don't have this you definitely need to
add it and then we're going to say from
zip import views because we're going to
be referencing the views here so let's
go ahead and create our URL patterns
equals patterns and then we define our
URL so that like right here
so I'm going to have a let's go ahead
and define the pattern I'm going to have
a date it to be a P I go let me just say
views dot zip and we'll just call list
dot as view it should work we're going
to copy this line and then right here we
need to go ahead and add the query
string so if we want to query by a
specific specific view based on the
primary key we'll go ahead and do that
now and that's what this is we're
building a regular expression that will
capture whatever the query string
argument is and then use that to query
the database to try to find a matching
entry in the database and then we're
going to call this zip detail as view
alright so that should be good now we
need to use the format suffix pattern
that we imported up there and what this
does it allows you to actually specify
whatever format you want the data to be
in so if I'm looking at API forward
slash one so zip API forward slash one
then I could say one dot jason or one
dot XML or whatever in it it will
automatically convert it into the right
data for us and it's going to say format
suffix patterns URL patterns
all right so should be all we need here
now let's go ahead and create the views
that we need to make this thing work so
if you notice we reference these on this
list as view so it's going to be a sip
list so let's go ahead and create that
and we're creating a class-based view so
we're going to say zip list and this is
going to import generic dot list create
API for you let's go ahead and import
that so it's going to be from rest
framework and pour generics okay now we
need to define the query set which will
be returned as Jason or whatever is
requested when the URL is visited so I'm
sorry I was going to say zip dot objects
dot all and then we need to assign our
serializer plus equals zip serializer
and then since we're using the zip
serializing we need to go ahead and
import that so we'll say from zip dot
serializer is import zip to realizer
and we're also using the zip objects
when you say from zip dot models import
zip and we probably don't even need to
say models and we could just say models
actually
we call that right as if she realizes oh
I have an s I don't want that so that's
a typo hopefully you guys see that get
rid of the S on the zip serializer
alright and now we need to create the
view for the detail if they query a
specific zip so it's going to be zip
detail generics dot I'm going to paste
this here cuz I'm going to spell this
wrong but it says retrieve update
destroy API view so this handles all of
the possible update delete ends a et
cetera et cetera and we'll say zip dot
objects not all and then serializer
class equals zip serializer again
all right now in my particular project I
need to go ahead and add URLs for these
zips let me go ahead and pull that up
all right just under this site admin
URLs here I'm going to go ahead and
import or not import but reference the
zip URL so I'll say zip include zip URLs
now I'm going to go ahead and update
everything and hope everything works so
let's go ahead and I and try that now so
I'm going to go and just run the make
migrations
oh wait I said plays on manage that
people I make migrations and I'll
migrate this
I'm not sure what that error message is
they're off to have to investigate that
that's something unrelated but
everything should go well hopefully if
it is let's go ahead and take a look at
the URL so say zip API I'll do one and
you'll see that this this layout will
look like this ah if it looks black and
white like this is because you have to
run collect static on your server which
I'll show you what to do you just have
to say Python manage py collect static
and just say yes and it'll copy over the
files that it needs to look pretty and
now it has the so you have a default API
working so you see when I query I'm
getting different results back here and
a nice little thing if I wanted this
result to be Jason because we did that
format suffix thing I could say dot
jason and you can see it straight
returning JSON data
so let's um look at this I'll do 385 192
so that's actually pretty quick I was
actually when I when I do the query from
the the data bit from the admin it's
actually much slower but it's also
running in debug mode as well you can
see the JSON data is very quick I get
data back exactly when I'm looking for
County State City all that crap and the
way we had formatted this because we did
remember we did City gave its own
serializer and stuff so that I mean
that's why we have these different
objects which is exactly what you want
so I think it's probably a good example
for your first because most of the time
well you might be dealing with foreign
keys a lot but maybe your database isn't
as complicated you just have static data
and you don't have to worry about having
multiple serializers for one particular
serialization object in this case we
need to have four serializers to make
all this work correctly but it is
working correctly
and I'm going to go ahead and cut the
video off now that's how you get up and
running with Django rest framework and
for more information you can do this to
your your gets you can do your post your
deletes all that stuff from the admin
panel here or you would look to use like
a tool like fiddler or something like
that to play around with making HTTP
post requests sending the right data to
add new zip codes update to lead or
whatever you're trying to do to your
model objects alright guys thanks for
watching please subscribe have a good
day bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>