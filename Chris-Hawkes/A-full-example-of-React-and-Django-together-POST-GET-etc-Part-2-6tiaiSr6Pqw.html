<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A full example of React and Django together, POST, GET etc... Part 2 | Coder Coacher - Coaching Coders</title><meta content="A full example of React and Django together, POST, GET etc... Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A full example of React and Django together, POST, GET etc... Part 2</b></h2><h5 class="post__date">2015-05-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6tiaiSr6Pqw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back alright so in this
video what we want to do is start
implementing react and react use is a
JSX language so you need an actual
editor that can support JSX sublime is a
free editor for evaluation purposes it's
what I'm using for this tutorial and
you're welcome to download a copy or
whatever so I would suggest you do that
because there's really no way to to
write JSX code easily without one of
these editors just to give you an idea
on how this works so I'm JSX is really
just JavaScript but it's a certain type
of syntax that was created by Facebook
so it makes it easier to visualize
JavaScript because the JavaScript can be
really difficult and ugly to look at
it's very XML like so you pretty much
create these reusable components in this
JSX format the JSX transpiler will then
take that code and then turn it into raw
JavaScript code and then what you render
to the actual user is going to be that
raw JavaScript code that gets exported
but during your development process you
do everything in JSX and you bring in
the JSX compiler so that is actually
what we did in our master page from the
previous video you have react men right
here and then after that we have the JSX
transformer so normally in a production
environment you do not want to have this
JSX transformer because it is a slow
process to be able to take the JSX code
and then turn it into javascript so that
react can read it once you have it
compiled any sort of production site you
would have just a regular raw JavaScript
down here which communicates with react
and it'll be quick and fast and
everything but JSX is an absolute must I
actually hated it at first because I
didn't you know I felt like I didn't
need to learn a higher level abstraction
to be able to write JavaScript but you
really do and you should really just
kind of get over it and learn it
honestly it cuz it took me like three
attempts before I finally said you know
I'll go ahead and give it a shot like a
real shot and once I did I'm really glad
I did and all the Facebook guys are
saying you know just stick with it all
that stuff and anyway III agree with
them
from experience and I think it is really
easy to work with
alright so if you guys remember from the
main master page I have a navigation at
the top and what I want to be able to
happen is I want when they click on the
navigation item to add an article that
that is where it's actually going to add
the post so what I did is I created an
on click event for the anchor tag to say
really it says so this should be like
add article we'll call that add article
you know it will not even call it
article it's stupid
so we'll say I had post the site's
called new post anyway so and I'd post
event is what we'll call this so that
will get fired anytime they add that and
or click that and what I wanted to do is
actually want to pop up a modal and then
have the mode will be the form that they
fill out which then gets submitted to
the API through an AJAX call so what we
need to do is I'm going to create our
react file and I'm going to do that like
I said using this this text editor here
so I'm going to go ahead and save this
as
so the wrong file
and we're gonna call this some net nav
react that JSX and the reason why is
because this specifically is gonna be
functionality that works with the
navigation so really the the master page
will bring this in so every page no
matter where you are in the website
you'll be able to just navigate to the
top and be able to contribute add
article that'll say add post here in
just a moment alright so let's go ahead
and create our actual function which is
um which gets fired so let's say a post
event I think that's where I called it
yeah add post event so we're creating
that function here alright now what I
add in this function this is pure
JavaScript this has nothing to do with
JSX but what we're doing is we're
creating an event that our modal is
going to subscribe to so that it will
listen for this this event that gets
fired anytime you click add post event
or any time this function gets fired
it's gonna notify this subscriber and
the react components going to actually
be the subscriber that listens for this
event so we'll create our first react
component which we're gonna call add
post I'll say react create class
now the first thing on that it gets
called as a get initial state and this
is always called just one time and
everything is going to be a function get
initial state is responsible for setting
the state for anything any sort of data
that could change the Dom and what we're
gonna have in here is just show modal so
modal can change right now it's going to
be set to none and this will make sense
in just a moment but we want that value
to be none by default the component did
mount is another function that gets
called one time as soon as the actual
component has a Dom object and it's
considered as part of the Dom then and
then this method will be fired now the
first thing we need to do is we create a
variable called self we're going to
assign it the this object and then we
need to say document dot add event
listener and then this is where we go
ahead and we add this name of the event
that we had just created above and then
we'll say function and then we pass in
the actual event object so when that
happens so what this is doing is um it's
telling react to listen to this event
and this event will get fired when they
click the button and it calls this
function so then it's going to say self
dot show modal and this is what we're
gonna actually define here in just a
moment and also when I say false here
all right now it's going to create our
show modal function that we just
described
and then all we're doing inside of this
method is we're actually changing the
state of the component so we'll say this
set state and then we'll turn show modal
and we're gonna change that value from
none to inherit and if this makes any
sense to you those are actually just CSS
values that I want to add to the modal
so by default the modal is display:none
when we click the button to add the post
it will display there it'll display the
modal by changing the CSS from
displaying on to display inherit so
that's what's going on there now we also
need a function for closing the modal
once it's out so we'll go ahead and add
that and then once again this is just
changing the state of the component
again except this time it'll be show
modal and it'll go back to none
now we're gonna go ahead and create a
function for add post and this is what's
gonna be responsible for sending our
Ajax call and everything there needs to
be a comma there that'll trip you up and
once again we need to create a variable
self equals this now because I'm dealing
with dates I need to go ahead and you
know what should be variable date equals
new date so there's a just a JavaScript
data object because this is all playing
JavaScript that's occurring inside of
this and then I want to say date equals
date to is so string and what this is
because I'm Django my Django setup has
the date format of a year month day it's
a four-letter year to month date or a
month
sorry four-digit year two-digit month
two-digit day in that format and this is
telling JavaScript to instantiate a data
object and then change it to that format
now we need to go ahead and create an
actual JavaScript object which is going
to be our actual data that is inside the
modal for when these users add a new
post so let's say variables send data
and I'm gonna pass an empty author
object now if you remember from the
previous video we actually don't grab
the author from the request but I do
need to send it otherwise it could cause
a problem of my serializer because it
does expect the author to be there even
if it if it's blank that's fine but it
needs to be there now I'm going to be
adding some gift tags for some input
elements and that we're gonna be
collecting information so we'll say add
post modal tags so this will be a div of
an input element that will define here
in just a moment but we're using just
basic jQuery to grab the value of this
this input that the user is going to add
for the tags the title once again is
gonna be the same way I grabbed this I'm
building this song this you know verb
I'm pretty in the verbose you know long
name because I don't want any sort of
naming conflicts since this page is
gonna or this this functionalities gonna
be on every single page of the document
so I want to make sure that the the div
tag for and this modal is very
descriptive and that preferably doesn't
have any sort of like I said naming
clash down the road and if this doesn't
make sense and I think you understand
them once you see it in action so there
are long give names normally I wouldn't
do that but anyway
this'll be a news article and then
finally data is gonna be the date object
that we just instantiated so that's our
JavaScript object that we're going to be
passing across the wire through our Ajax
call and then now we're gonna go ahead
and define that actual Ajax call using
jQuery now this is where we're actually
going to be adding the URL that I was
telling you about and the way Django
rest framework works is that it's
automatically gonna allow the post
member to the API if you're the actual
super user to the site or admin user so
it's not allow any other posts to go
through for this site but that's already
set up for us so let's go ahead and add
the URL where that post is going to
occur so it's gonna be post API and then
just forward slash when you're comma
there data type is gonna be jason method
is gonna be post and this is all
standard jQuery stuff for sending our
Ajax data that we're gonna pass to it is
actually our send data object that we
just created and then we define the
success method
and we pass in the data that gets
returned now by default Django rest
framework will actually send back the
serialized data that gets added to the
database so I can go ahead and I can say
variable ID equals data dot ID and this
will be the ID of the actual post that
gets added to the to the database so
then I can just do a simple redirect I
could say window dot location dot href
equals this just be a hard link to I
could say plus ID plus because member
Django always puts the the forward slash
on the end so all I'm doing is I'm
simply redirecting to the the new post
that was just created for the user now
if there's an error I'm gonna call a
separate function I said we actually our
status there and I'll just log the error
to the the console so that we can try to
debug what the problem may be and let me
just I'll just say this URL here
how hard
this will say that behind this and then
now finally every component needs to
have a render function and then the
render function needs to actually have a
return statement and this is gonna be
actual HTML markup that gets created in
the virtual DOM and all we're simply
going to do is just have it return side
give and then the div is gonna have a
modal and this is going to be an actual
ad post modal so this is going to be
another react component that we're gonna
be defining in just a moment
I want to be able to pass in custom
actions to this modal so in order to
make this modal as reusable as possible
so I don't need those commas there I'm
gonna create a bunch of different
variables that this modal will be able
to accept in order to build something
custom and really this title should be
custom as well but for right now I'm not
gonna worry about it I'll even add a
style object so that we can add add that
to the modal now so this makes more
sense let's go ahead and create the
actual modal that never referencing here
so this is gonna be a new react element
and we'll say add post modal and just
like we did before we're going to say
create class
all right so we're gonna be creating
this reusable modal and and this modal
is gonna be very simple there this
component it's just gonna have the one
render function now this is actually
like I said it's a mandatory thing
anytime you're creating a component and
react is you have to have a render
function which is going to call it
return and now I already have this this
mapped out here but let me go ahead and
I want to copy all this code here so
don't screw this up on the video now let
me say add I changed that so I'd post a
modal so what we've described here is a
actual dear if it's using bootstrap to
display the modal and then here are the
custom properties that we passed and so
this stop props that title is going to
be this title right here so this is what
we pass to it so add a new post so
that'll get displayed right here and
then this stop prompts our body is right
here but now you'll notice that we have
body equals add post body and there is
no post by what these squiggly lines
here inside your actual and JSX
component here this you know what looks
like normal HTML / xml type of thing
these are actual JavaScript variables
that aren't defined but what we would do
is we would actually define those right
here so I'll say like variable style
equals and then I can go ahead and pass
an actual object to this modal to change
the functionality of like maybe where it
sits and things like that so what I'll
probably do is just is something like
this so I'll change the the display and
we want this obviously the style because
the display is being set by the state so
remember when this thing first loads
this is going to be display:none but
when they click it it changes it to
display inherit so this definitely has
to be passed
to the modal component and you see it's
done through these squiggly lines which
means passed a javascript object to this
modal and then it ends up using it and
the way it uses it as you can see it
takes and applies that property from its
parent this stop prompts that style to
the style tag this takes some getting
used to if you've never seen this in
react it's this is react specific stuff
JSX specific and entire tutorial series
exist on in fact I have a few on my own
but this is really not the purpose of
the video but just giving you kind of
kind of a background in case you've
never seen it before
alright now let's go ahead and create
our clothes variable and if you remember
we're referencing it here so I'll go
ahead am underneath my style variable
I'll add my clothes variable and then
the way this works is this is saying on
click it's saying this stock clothes
modal so it can then add that down here
so we'll say this not props not clothes
and all it is is a button that when you
click it it fires the event to close the
modal and change the state back to none
so that the modal disappears
alright now this next part is a little
bit a little bit larger but we're
creating the actual body of the element
so we're gonna say we called it add post
body
all right so what this thing is gonna
display it's actually gonna display all
this this JSX code which is very similar
to XML and what we have here is now
we're making reference of those actual
input elements that I was telling you
about before it's using the class name
form control because that's a bootstrap
specific thing the idea IDs here we had
used to build our Ajax data object up
here so like I'd post modal tags that's
where we're adding it now so I'd post
modal title here's add post modal tag so
that's where we're using what we just
defined and then I want the button to
say add post and it's gonna fire the
event and post which we defined here
all right
all right so it looks pretty good
I set out at the bottom of the file we
need to do the final thing with react
when I say react i render add post which
is the element that we just described up
here and then we're assigning it to an
ID on the template that we expect to be
there which it's probably not there so
let's go ahead and add that to our
actual template and it's actually gonna
go right here this doesn't need to be
there alright so let me go ahead and
update all this stuff now inside our
template we need to go ahead and load
the JSX code that we're going to be
creating we're gonna be adding a type
parameter here this is very important
and you just a text JSX because what
does JSX transformer is it'll look for
any script includes that have a JSX on
them and then it's going to take that
code and then turn it to regular
JavaScript if you remember what we
called this we call this nav react JSX
I'm going to upload all this information
let's make sure everything's loading
correctly so if I go down to the bottom
I want to make sure so we have our nav
we actually have sex here and it's gonna
automatically try to download that
because the browser doesn't even know
how to render it your JSX transformer
handles that for you so it is being
loaded correctly so if we go over to
contribute we say add post let's see if
we can get some sort of error message
here now the best thing to do whenever
you're trying to debug this kind of
stuff is if you're using Chrome you want
to go to your console and it'll tell you
any sort of errors that it's running
into
so I'm not sure that lady's changed just
saved let me try this one more time
all right so we have an error here
firing action we didn't define action
okay one second
you know it um we actually don't even
need this action let's get rid of it
we're not even using it to be honest
with you I don't remember why I added it
so we'll be upload that
we're not getting any more errors that's
good all right sweet so now we have the
post and you can see that react I'm just
changed the state this kind of modal's
are such a pain in the ass to be honest
we did like the fixed position dibs
never work as well as as you would like
you can see my style is pushing it out
from the top and there's not even enough
room to render the goddamn thing one
second so that's an easy fix
well sort of there the fix is probably
not to use a modal because it's horrible
UX they never work right especially on
smaller viewports like cell phones and
things
all right sweet all right so now let's
go ahead and test this out so we'll be
posting to the server and hopefully
everything goes well I will say it did
just go well
all right so we had all this stuff we
post and it worked you can see it
redirected to post too so that's awesome
so if we go over and we now put post to
in our API you can see some of this
stuff went and the actual article did
not but you can see react that did work
the date/time worked title did not it
must be a big problem let me see if I
can fix that real quick probably a good
name problem here's the add post modal
title oh yeah there's a typo right there
alright and then add post modal article
I don't even know if that's the right
word for it but we have yeah it's Q
screw-ups right there okay so let's go
ahead and try this one more time all
update that that was just a simple div
tag not being read right for our send
data object that we're passing through
the Ajax call over here and remember I
like I said since it's the nav and we
called it nav react because now we're on
this post page which is a different page
of our app and we can still access and
that's why I called it now because it
follows you around it's another reason
why I'm like I said I wanted to have a
very descriptive name because I don't
want to tangle up and have two IDs with
that same name and accidentally a jQuery
grabbed the wrong data and pass it
across the wire and odd stuff so say
this is a mofo of a tutorial testing
testing
please subscribe
all right so now we're at post three so
you can see that with our Django rest
framework we're actually post enough
stuff correctly and as you can see the
author number one is me this is ID three
title date article and then the tags and
if you guys want let me know in a video
I can do another video on how to
actually take this data using the method
that I described in a previous video
about loading the template initially and
then just passing the actual ID to the
template like I feel like I'm not sure
like I feel like I may be the first one
to do that I don't know but either way
it seems like a really efficient
solution to this because a lot of people
talking about with react like render
server-side and all the stuff for search
engines and things and people are like
well you don't want you know react to
sit there loading and have the user
waiting all that stuff well with this
method you don't have to worry about
that because it automatically Django is
gonna send this bare-bones
HTML template which is you know the
mainly the master page which is a lot of
you know code reuse that you can take
advantage of it'll send it across the
wire immediately and all it's doing is
sending one tiny variable with it which
you could then take and just like I did
and my component on the component did
mount where I created the actual on this
component did mount is where I created
the event system and here what you would
do on the component did not usually
would call some sort of function so
instead of posting age actually would do
an ajax call to actually do a get and
you would use that ID to make the get to
this URL so basically all the templates
going to render is a variable this is
three you're gonna be like okay three
let me make the ajax call to post that
you know to post and grab this data and
then build the dom with this data so
anyway to see a working example of
something like this let me go over to
new movies calm
so this page here is um all built based
on Ajax calls and things like that but
like here's the the movie page this does
the the exact same thing so here is um
so we request a movie page and it does
the exact same thing so immediately it
renders the page so that something shows
up and then all this data is then
populated via a secondary Ajax call
which is getting the specific movie data
and then in fact it's actually doing
even more than that because it's making
calls for each one of these movie stars
in order to figure out because each one
of these movie stars has our own page
and but most of this data is coming
directly from Ajax calls but there's a
lot of Ajax calls being made and to be
honest with a lot of ads and and
networks and stuff like that are being
made like I might even rip it out
because I'm I'm not sure if you guys use
things like you know Adsense or in this
case I'm using content ad like all these
different third-party plugins that I use
to make money on the site they're all
making their own Ajax requests and stuff
like that so sometimes I mean my speed
of my site is bogged down by these
third-party applications which really
sucks you have to kind of weigh the pros
and cons of whether or not you want to
add something like that to your site but
that's exactly what's going on on this
page here star is just a bare-bones HTML
template and Ajax call is being made
with the ID to grab the data for this
particular star and populate so it's a
working example of what I'm talking
about and I feel like the situation
works pretty well alright guys thanks
for watching and please subscribe please
appreciate your support
have a good night bye and please comment
subscribe and let me know if you want me
to make that follow-up video to show you
how to build a dom with adjacent object
that gets returned from the API alright
goodnight</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>