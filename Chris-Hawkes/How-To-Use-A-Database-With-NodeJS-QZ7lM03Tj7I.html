<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How To Use A Database With Node.JS | Coder Coacher - Coaching Coders</title><meta content="How To Use A Database With Node.JS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How To Use A Database With Node.JS</b></h2><h5 class="post__date">2015-10-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QZ7lM03Tj7I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what hey guys what's up alright so I
had done two previous videos to this
video where I showed how to actually
connect to my sequel I have a local
running instance of my sequel and I have
my database password and all that crap
shown here but it doesn't matter it's
just a local database it's just used for
these tutorials so I'm not concerned
about that but what you have here is um
in the previous video we just went ahead
and we hope to my sequel but um we were
doing some raw sequel to actually query
the database and this is just something
that's that's not that great when you
compare it to something that's called an
object relational mapper that exists
which also is known as a norm frameworks
like Django or entity framework and
dotnet they have this higher level
abstraction that they call an object
relational mapper that actually handles
a lot of the querying of the database
for you so it does it in an efficient
manner django has their own built in one
and there is a project and node or just
a javascript version which is called
sequel eyes and sequel eyes is it's
still a young project but it has a lot
of support right now and it seems to be
the best bet to have an object
relational mapper in your node in your
node website as of the recording of this
video so a couple of the requirements
though is if you haven't followed along
in the previous two videos you do have
to have NPM install my sequel because
that is needed for node to be able to
communicate with my sequel it's also
needed for sequel eyes now I've already
actually installed sequel eyes but I'm
going to do it again and all we have to
do is just say NPM install sequel eyes
and then you should see that it was
successfully installed all right once we
do that we need to go ahead and actually
make use of it so just like we've done
in previous spots we're going to go
ahead above our app here we're going to
add this little using statement very
variable sequel eyes require sequel eyes
and then now we need to go ahead and
setup our connection string here's my my
sequel database if I show tables there's
no tables the name of my database is
called post because the project is
called post so I'm going to go ahead and
create the connection string down here
and I'll go ahead and say this is their
connection string not really a
connection string but connection object
and you can see that the name of the
database is post the name of the user is
root and then the password is testing
one two three and then down here you
need to say that the host is localhost
and then dialect and make sure that you
have your commas in here because this is
just a JavaScript object now this is
just the required settings off the bat
and we're not going to mess with that
but just have this right now this is
going to be just the default all right
so in order to make a database and
sequel eyes we need to go ahead and
define that as a JavaScript object since
this is all JavaScript we're going to go
ahead and create a video table like we
did in the previous video so let's go
ahead and say sequel eyes define and
then we're going to give it the name of
the table that we're defining which is
going to be called video and then down
here if you've ever used like Django or
if you're setting up your models file
and MVC dotnet it's similar of what
we're going to do here we're going to go
ahead and just you know key value key
value as a JavaScript object so our
title is going to be there's a string so
sequel eyes we're going to make use of
that sequel eyes
string and this is all capitals and then
we're going to have a description field
and then once again we're going to use a
sequel eyes dot txt and that needs to be
all capitals
so let's go ahead and create this
database and the way we do that is we
actually have to call sequel eyes sync
so I'm going to copy this down here and
we're going to say a lowercase somewhere
it's a function call so we have to use
the open and closed parenthesis and this
is this will create a database table if
one does not exist already so if one
doesn't exist this will go ahead and
create it if it does exist it'll be
ignored so let's go ahead and test this
down here this is where I'm going to
start my server so I say no tapped ojs
and I'll start it and it's just
listening and we don't have to actually
look at the website right now but what
we're going to do is we're going to go
over to the my sequel shell and now
we're going to look at our tables and
you can see that we now have a videos
table in fact I want to call it video
but I guess videos is fine we have now a
table called videos so if I went ahead
and I queried everything I could say
select all from videos and you can see
that there's nothing in there so it's
just an empty table now let's go ahead
and add something to that table using
sequel eyes and we're going to do that
under our I'm going to say this is our
model schema okay and then this section
add to table I'll just give it a videos
table so here we're going to go ahead
and create another JavaScript object
we're going to call it video and we're
going to actually no it's not we're
going to do we're going to use the the
video model that we've already created
so we have this object that we've
already created so we're going to make
use of it by saying video create and
then in here we're going to actually
give it the values that we need to go
ahead and set so we have a title value
and this could be whatever you want your
title be so we'll say a node tutorial
and then a comma and then it's going to
be the description this is a great video
now we're going to use a shortcut which
is probably the best way to just get
this thing done we're going to say then
function and we're passing in the actual
object that we just created dang it
go ahead and close that off so hopefully
you guys can see this here so just take
a moment this is and so we're basically
we're saying then and then we're passing
in a function that takes in the object
that's getting created by this video dot
create command and we need to call task
dot save and it's a function call so go
ahead and have the open and closed
parenthesis but we're we're passing this
and so what we're doing is we're
basically saying create this object put
it in a database table and save it to
the database instead of actually
creating an actual object and then
having to call it save it's better just
to do it in one you know one one swoop
so that is what we're doing here so
let's go ahead and we'll stop our server
and when we run it again you're going to
see that it gives two commands it runs
on the port 3,000 and then you can see
that it went ahead and it actually
inserted some data into the database so
now if we go over to our my sequel shell
and we're going to go ahead and select
everything from videos we now have one
result back which is the result that we
just added
so no tutorial this is a great video
below and then automatically does create
it at and update it out which is a my
sequel thing so anyway guys that's how
we get started with sequel is how you
set up a table database schema how you
insert into the table and you know we
might as well go ahead and take one out
too so we can do that as an example all
right so if we want to update let's go
ahead and close this this thing back
down and I'm going to kill the app too
and what we want to do is we actually
want to comment this out because what we
do we don't have any sort of
restrictions on this so we can actually
duplicate like if this thing ran again
if we started the server again this
thing would would execute again and
you'd have a duplicate entry and your
database table and you probably don't
want that you probably want some sort of
you know check going on but we're not
covering that in this particular video
to query the database let's go ahead and
comment that part out like I just showed
him and then we're going to create a
comment here that query the videos table
and then we're going to use the video
object we've already created and we're
going to say find all and then down here
it's going to say where and then we pass
in the actual argument of what we're
looking for so we're going to say node
tutorial and then after this we need to
go ahead and chain another function onto
this so we're saying function we're
passing in and we'll just call this a
found object I have extra parentheses
there so we're chaining on a function to
that database call because otherwise
because of the synchronous nature of
JavaScript it would immediately it
wouldn't wait for the result of querying
the database and querying the database
is always going to be your slowest
bottleneck so that's why we need to
chain on this additional function to say
hey after you get the data then you know
do this next function and pass in the
found data that you have this could be
null and we probably want to check for
null but we're not going to do that for
this thing this example we just need to
get get on with it and we're going to
say we found this title plus found
object and because find all returns a
list I need to actually say return the
first object dot title
because this could have more than one
object and typically probably if you
have more than one object
you'd probably want to actually run this
through a loop so this is a piss-poor
example I apologize but you would know
you would normally run this through some
sort of for loop to iterate over every
object but in this case we know there's
only one object that can be found in the
database so we're just going to assume
it's there all right now if I go ahead
and I'll run the app and we're telling
it to print out to the screen so you can
see it did find it so we said we found
this title and then node tutorial that's
where we we actually found our object
once again because this returns a list
of objects or an array and JavaScript
you would iterate over each one and you
would obviously want to do a null check
make sure found objects not no or
undefined I'm not sure if it will return
undefined or no those are different
believe it or not in JavaScript and just
so you'd want to check for that make
sure programs a little bit more robust
and obviously you also want to have a
better database schema tube or maybe you
have like a unique title so it doesn't
allow duplicate entries because if we
didn't comment this code out it would
have created an additional entry into
the database which you probably don't
want alright guys so that is my video
here on how to use a database with
nodejs
alright thanks for watching bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>