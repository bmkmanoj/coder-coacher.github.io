<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django and Backbone - How to request data | Coder Coacher - Coaching Coders</title><meta content="Django and Backbone - How to request data - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django and Backbone - How to request data</b></h2><h5 class="post__date">2014-10-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7sn-6tzhSoE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I guess what's up alright so in this
video I want to show you how we can use
backbone with our web application and
what we have here is actually developing
something in we have this this movie
page here and I'm gonna be using
backbone to try to manipulate the DOM
and what I did is I built this um
actually this needs to be uploaded one
sec anyway so the idea is that I'm
building this rating system when you
hover over the mouse are the stars here
that you're gonna be able to rate the
movie and what I'm going to end up doing
because this is the new movies rating
for this particular movie so I want if
they basically building if they hover
over this their stars will you know
empty out and they can select how many
stars they want to give and then when
they click it'll go ahead and display
their rating and then I want to load
back the original rating so all this is
currently all this data is currently
coming from the actual Django controller
which are I'm sorry view which is
sending the data back to the template
but what we want to do is change that
now in order for backbone to work you
need to have some sort of a restful api
set up and with django the best option
is Django rest framework if you need a
tutorial on that I do have a tutorial on
setting up the Django rest framework
with angular and the API that I set up
in that video is what I'm using here so
it's a very simple API it's from one
particular movie app that I have as part
of my project of new movies and if you
want to take a look at the app or the
API it's right here so API and we can
say movie 1/9 and you can see that it's
calling the restful api here and if you
have the movie ID it's coming back with
us data and stuff like that so what I
want to be able to do is I want this
data I want to use backbone to make a
get call to define a movie object so
that way as I'm manipulating the DOM and
things like that I can use the JSON that
backbone easily allows me to deal with
to repopulate certain things so anyway
let me go ahead and jump into that so
hopefully it'll make more sense
all right so first things first is
whenever you have your view you need to
have backbone included so you have
backbone downloaded it's real simple
just go to backbone j/s and you're gonna
download a simple JSON file just get
like the production version that's
probably best you also need to download
underscore which it has a link to right
here so download the production version
of underscore now underscore needs to be
added to your template before the before
backbone and where the hell is it let me
say okay so in this particular case I
don't even have it added so I'll need to
do that but I'll show you where it's
currently at right now it's sitting in
my JavaScript folder and I just have
here's underscore and here's backbone so
I don't even have this in my view
currently I'm gonna go ahead and add
that now I have this template is
inheriting from a movie based template I
want to actually put backbone in this
particular file and I have this block
meta content so that way it'll play some
this information up at the at the head
so it's for custom scripts and things
like that that's why I have that
template tag but it's not doing anything
special this is just typical Django
markup for inheriting from a base page
and hopefully if you don't know that you
kind of need to know that but anyway
it's we can move on even if you don't
know it but you definitely should brush
up on that if you're just getting
started with Django alright so let me go
ahead and add my scripts
all right so first things first is we're
gonna I have my media URL I actually
need to change that that is all jacked
up but anyway don't just I have this a
shortcut to find it my settings here so
it'll go to my J's file and we're going
to link to underscore first
and then backbone all right so this
isn't gonna specifically be a backbone
oh damn I actually already had that in
my template down here if you see this
and I have an actual block 4 page
scripts that's probably better but
anyway you just add it to your page like
I just showed you
so underscoring backbone is there and
what we want to do is I want to go down
to the bottom of the page and just
inside of a regular JavaScript script
down here I have a lot of stuff going on
down here I'm gonna go ahead and I need
to define a model and a backbone what it
does it defines it creates a model based
off of your API schema for your Django
model your models file so in order to do
that let's go ahead and just say
variable movie in fact we can eat we
don't have to say very we just say movie
equals a backbone dot model dot extend
and then we need to put down here a URL
route to where I can find your model
object in your restful api so I could
spell out the entire thing by going like
this tell me it'll be done without new
movies and a movie API and the movie
really that's that should be all I have
to define there and now I should be able
to use that that movie object really the
movie class I just created and to do
that I'll go and create a variable and
we'll just call this movie equals new
and it's an uppercase the movie this
class that we just defined open and
close parentheses so when you want to
query the actual API inside of the open
and close parentheses we want to use the
open and close curly braces and then
identify an ID and in my case the movie
ID that I'm gonna be trying to query is
movie 119
all right and then we just have to say
movie fetch and then Oh inside to open
and close or curly braces on the success
we want a function to be called where we
pass on our movie object and then we're
just simply gonna say movie dot to Jason
and close off that statement now just to
test what we got here let's go ahead and
just say alert damn I can't type tonight
movie and then like typical Jason we're
not just references title alright let me
go ahead and see how this works
all right now I'm actually not getting
anything here because the error message
is I have that cannot read Ajax of
undefined the right now the reason why
that's happening is because the backbone
is being called before jQuery is being
loaded into the page so I need to
investigate why that is the case let me
go into my template and I'm you can see
that this is where the page scripts
where backbone is being injected and you
can see that jQuery is not being called
before that so backbone absolutely
relies upon jQuery you can see all that
stuff down here this isn't going to fly
all this needs to move above those above
this block here so that way jQuery will
be loaded before backbone or underscore
all right so now that that's taken care
of let me go back
all right and we got an undefined the
reason why we got undefined is I
actually need to my variable that I
declare up here I actually need to say
that that now equals movie die Jason so
I'm getting the result back from the
Ajax call using backbone it passes in
the result it turns the result to Jason
but in the process also takes that Jason
result and assigns it to the movie
variable and that way now if I alert
movie that title it'll work
all right so you can see that is using
backbone backbone was able to
communicate with the API it made a model
class object a backbone class that was
inherited or extended from the Jango app
models file and now you can use backbone
to be able to communicate and update Dom
elements on your page so if you look at
what I got going on over here there's
something jacked up I have some jacked
up JavaScript here but what I'm trying
to do is when you hover it's gonna
change and then update the rating down
here there are several issues at hand
with this at the moment but it has
nothing to do with the backbone or the
Django setup that I have right now it's
just a JavaScript I'm trying to use so I
mean in another video I'm gonna go ahead
and discuss how to use backbone views
way Django but in this particular video
I just want to stick to how do we
implement backbone and with our Django
API and how do we call it to get data
back alright guys thanks for watching
bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>