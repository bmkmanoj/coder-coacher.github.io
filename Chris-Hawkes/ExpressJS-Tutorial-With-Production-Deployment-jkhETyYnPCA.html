<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ExpressJS Tutorial With Production Deployment | Coder Coacher - Coaching Coders</title><meta content="ExpressJS Tutorial With Production Deployment - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ExpressJS Tutorial With Production Deployment</b></h2><h5 class="post__date">2017-01-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jkhETyYnPCA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up welcome to my newest
tutorial series it's gonna be on Express
Express yes is a framework that is built
on top of the nodejs technology and
nodejs is a lot of people think it's
javascript it's not JavaScript it's
really written in C and C++ so it's a
set of technologies that has a API
meaning making it programmable through
JavaScript I know that sounds confusing
but basically you do write JavaScript in
order to use node but node itself is not
JavaScript node gives you ability to do
things like accessing file systems which
means just writing files creating new
text files things like that those are
things that JavaScript can't do by
itself and the reason why is because
JavaScript just runs inside of a browser
it doesn't have any sort of what is
called a runtime outside of a browser so
nodejs
gives us the ability to write JavaScript
outside of a browser essentially and in
addition one of the reasons why no js'
is so popular it's a it's a primetime
language now it's an in technology said
it used to be kind of like a flavor of
the week type of thing and people talked
about whether or not it was the future
and it was gonna kill Ruby on Rails and
all this stuff and and and some of
that's probably true but the thing is is
that no jeaious is so popular because it
number one it's so easy to work with
until you start getting very complex and
then things always get more difficult no
matter what you're using but getting
started nodejs and express is very easy
in addition javascript can be written on
both the client side which means the
JavaScript that you're passing down to
the user that is accessing your web page
and it can also be written to handle
your server-side code so typically we
used to have to do server-side stuff and
c-sharp or Java or Python or Ruby and
then we'd have to write a bunch of
JavaScript that runs in the browser so
with no JSO we still have to do with
both the server-side code and the
browser side client-side code but the
good news is is that we only have to
deal with one language so javascript is
an absolutely essential language when it
comes to modern day web development and
you know getting started on javascript
is going to be
they're really a no-brainer for any sort
of web development now there's a lot of
controversy out there as far as you know
whether or not Java scripts headed in
the right direction with all the
different frameworks tools and libraries
I would just say this and it's something
that I'm focusing on in 2017 and that is
to just avoid all that don't
worry about whether or not you should be
using react or ember or any of the other
stuff just if you feel like you want to
use that then go ahead and use it but
don't worry about what everybody else is
doing just try to create your own work
of art you know if it's a Content
weight-based website where you're gonna
build the next rotten tomatoes for a
movies website or you're gonna do you
know some sort of a game on an ojs
server a chat application just you know
focus on what it is you want to create
and don't worry about anything else so
in this tutorial that we're really going
to touch on how do we get NPM installed
how do we get expressed up and running I
want to do like a full type of website
here type of thing so let's go ahead and
and take a look at this so it tells you
right on the front page you want to do
NPM install Express so in order for NPM
to actually work you have to have no js'
installed so no jeaious
like I said it's a technology and if
you're on Windows like I am you can just
use your Windows installer but it also
works for Macintosh and Linux so
whatever you do you just need to get it
started and once it's installed you're
gonna have the ability to open up a
command prompt if you're on Windows you
can type CMD and then just simply say
NPM and if it tries to do something it
means that note is installed correctly
and NPM is installed so you can see it's
it's waiting here my computer's being
kind of slow and it gives you the
version of node that I have installed
which is actually doesn't tell me no but
it does tell me I have NPM version 3.3
point well so as far as I'm concerned
that's good enough for me next time we
need to go ahead and have a folder where
our stuff is gonna be stored so I'm
gonna store it in this Express and we're
gonna create a trying to think of the
application or build hell I had a Movies
website for a long time so maybe I'll
try to build that project once again so
I'm just gonna call it movies and inside
here I want to press C
or type cmd' so I can open up a command
prompt on my command line and we need to
say NPM I knit first and I knit is the
first thing it builds a configuration
file that all modern JavaScript
applications have nowadays and basically
just maintains what sort of plugins and
libraries and things that you need so
I'm gonna leave it the default movies
will say at one point I will say movies
website entry point s command
Chris said I don't really care about the
license at the moment let us say NPM
install now - - save I'm gonna say
Express and while that is installing
this is going to install Express for you
we want to go ahead and download a
editor so that you can write your code
into something and I'm gonna be using
Visual Studio code and this isn't a
requirement it's something I recommend
though because it's open source it's
cross-platform and it's like extremely
good and it makes writing nodejs
applications a lot easier so if you
download this and install it you're
gonna have something like this and right
now this is actually Russ code that I'm
writing in here but I'm going to open up
a new window not a new file damn it when
I say new window and now I'm going to
open up the folder to the Express
application that we just created and I'm
just gonna select movies
all right so now you can see that
Express went out and installed
everything and the interesting thing
about the I net configuration that we
ran it creates this file which is a dot
JSON format which is like a JavaScript
XML version basically XML for JavaScript
and then here you can see it has all the
information that we put in here now but
because we said - - save it actually
added Express to our dependencies the
reason why that's important is if you
take your project and you copy it over
somewhere all the things that Express
installed are now inside of your node
modules like if I look in here I can see
that Express is installed here and all
these other things are things that
Express needs in most cases anyway and
if I were to go ahead and transport this
project the source code over somewhere
else and I press type NPM install it's
actually going to install all the
dependencies that the project needs
what's interesting though is that our
project since it's a web application
that's running on Express is obviously
going to need Express but there are
certain things that we're probably going
to use in a development capacity that we
only use when we develop the project and
not you know an actual dependency to the
project being able to run and we'll
understand more about that later on but
that will go under a separate section
which says dev dependencies and we do
that by saying - - save with dev instead
of - - save by now the name of our
application we're just going to simply
call it app and we're gonna say dot J s
which is stands for JavaScript it's the
file format for JavaScript and the first
thing we need to do is we need to find a
variable called Express and we're gonna
say equals require Express now node has
this ability to load modules which is
pretty interesting because this is
normally not something that JavaScript
does but node gives us the ability to
require external modules by saying
require and it knows to look inside of
our node modules for Express and it's
going to return it as an actual object
so we'll have an express object which is
our framework next we need to create an
object for our application which we're
gonna then call Express as a function
we're going to execute it as a as a
function here and this will create our
instance of our Express application
finally we need to say apt-get and this
is our URL so we've ever done MVC
development this is where we define the
actual URL that has been referenced and
right here the forward slash just stands
for the root directory so if my website
is called new movies calm and I just go
to new movies calm instead of saying new
movies calm forward slash blogs this is
going to return the new movies icon so
new movies calm is requested it what
this is gonna match and and then we have
to say function request which stands for
HTTP request and then response and then
we're going to say resource dot send and
this is just a typical hello world which
we're gonna do out of the gate for
starters now we need to say app dot
listen and we're going to tell to listen
to port 3000 you can make it any port
you want if you have something else
listening the 3000 that won't work so
you need to change it to something else
and then we'll just say we started the
Express alright so now that we have app
dot j s if I go to the command we're apt
IJ s is located you can see it's right
inside here and all I have to do is just
say node app GS and note is going to run
the app dot J off so now if I go to my
local host address which is 127.0.0.1
colon 3000 you can see we get the hello
world which is just a simple text
response that our server is passing back
because we visited the root URL of our
application alright so one of the things
I want to do now is I actually want to
create a new folder in the applicant
this is going to be for our templates
and inside the template make sure you
have it selected we're gonna create a
new file called our index.html file and
then here we just have the luxury of
writing HTML and if we wanted to go to
something like w3c HTML like if you look
at this you go there school and this is
so I want to spell the whole thing out
but it gives you an example little HTML
doc that we have here that so I'm going
to copy that close this down we'll paste
our in here also this should be able to
format by saying alt shift F and you can
see that it formats it in the right way
so now instead of returning a static
response inside of our apt I get where
we were returning this text we're gonna
actually say send file and then we give
it a path to where our file is located
so the dot forward slash is our root
directory we're gonna say templates and
then index dot HTML so we're gonna have
to restart the server I believe
yeah we're going to restart it so when
we try to run this we actually run into
a problem and says path must be absolute
or specify route to resource file so
absolute means fully spelled out to
where your application template is
located and that's actually somewhat of
a pain in the ass and we're not going to
do that we're actually going to say
require we're save our path equals
require and there is a module that we
can call on with a node which is called
path and then you install this write
require path so now down here in the
send file I can say path join and I'm
gonna do - I'm sorry underscore
underscore gurjar name which is a
built-in name to get the directory of
the application where the app.js file is
located really it's it's wherever the
code is being executed from but in our
case this is in a pas so your name is
going to be the absolute directory - app
that yes
so then we just have to append templates
index dot HTML there we go
you know it doesn't hurt to have
semicolons here all right so let me go
ahead and restart the server
and you can see that we're now reading
HTML so there was no need to install
Jade or Pogue or mustache or anything
like that unless you absolutely wanted
to now what I plan on touching on in
this tutorial is actually I wanted to
implement voj us but before we even get
to that we need to deal with our static
content how do we actually display CSS
so let's go ahead and create a new
folder make sure it's outside of the
templates folder it should be in the
root directory of the project we're
gonna say static and
and inside static I'm gonna create new
folders one for CSS and really just for
now I'm just gonna do a main dot CSS
file and that actually is how we style
our pages then we're going to do h1 and
we'll say color red so if everything
goes well when we load this thing it's
going to turn the h1 here to red so in
order for that to work that we have to
actually reference our style sheet so
I'm going to say link relation equals
style sheet href equals and this is
going to be to our static location
static main nuts CSS and really we
should just go as a static like that
and it's in the CSS folder Phineas we
static CSS main not CSS now in order for
Express to actually deliver that content
for us we need to add something after
our Declaration of our app we're gonna
add something to app which is built into
Express where it's a app dot use we're
gonna say Express got static and then
we're gonna give it the name of our
static directory which we called static
okay and now I'm gonna restart this and
you can press control C to stop the
server and they press the up arrow on
Windows and it repays the information so
we're still not getting our static
content delivered 404 not found main dot
CSS all right so unfortunately this
isn't working and I'm pretty sure it's
because of the the path for static so
what we need to do is let's write this a
different way we're going to say app dot
use word slash static which is gonna
find our static URL we'll say Express
stop static and then here we're going to
use our path to join again and do the
daar name that we did before so that way
it's giving an absolute path to where
our folder is located with all this
static all right so what we're doing is
we're saying any request to the static
URL which is being done right inside
here any request it says use the express
static which is built in middleware to
handle CSS files JavaScript files things
like that and then we're just simply
using the path down name so we're
getting the full path to where this app
dot J's file is located and then we're
saying looking at me static folder so
that's what all those things are doing
press control-c
and now we have our CSS working
correctly all right so now that we've
done that the next step you want to do
is you want to get a free bootstrap
theme online unless you're like a super
super expert when it comes to building
you eyes and things like that which I'm
not I used to be a lot better than I am
but I just don't have a whole lot of
interest in doing that I liked it and
write the backend code a little bit more
this website has a few few easy options
to deal with so I've decided to register
to the site which is called shake
bootstrap comm they have some really
good themes in here I'm going to
actually use this theme for the website
you can use any one you want because the
rules and everything is essentially the
same so what we have here is we have all
these static files that need to actually
be extracted to our static folder so
let's go ahead and and we're going to
look inside the application or my
computer really I'm looking for the
where I'm storing my projects for
express which is in here movies and
writing the static folder I'm just going
to select and select okay okay yes to
also went ahead and extracted all that
now I need to extract my index.html so
I'm going to go back here and instead of
static I'm going to put this in the
templates folder and that's okay I'm
gonna do the same thing here
so now if we go back to our project we
now have a bunch of CSS inside of here a
bunch of images all this stuff is being
used by the template and all we had to
do is just extract it right into here
now if we look at the index we now have
a ton more stuff in here that we
used too because now there's this very
complicated layout that we're dealing
with so in order to fix all this we need
to actually update all of our references
to say forward slash static so that way
Express knows where these static files
are sitting so you have to go through
the painstaking process of doing this on
every static reference and since you
guys might not be using the same type of
template I'm gonna pause the video while
I do this and update all of these
friggin things and I'll be back with you
in just a moment alright now I went
ahead and I updated all those links here
you can see that I now have this working
theme and it has all the jQuery and
everything all working for me and all I
had to do is just update the references
to all the static files so if my website
we're gonna look like this you know this
looks very similar to so many people's
bootstrap themes out there but you know
what can you say it's so much easier
than having to actually write all this
stuff from scratch okay so now what I
want to do is I'm gonna have this code
base on git so I can have source control
in order to save myself from you know
 something up and then having you
know having something to revert back to
a plus if you guys are trying to get in
there full scale development assuming
you guys don't are not already
programmers you want to try to get
involved in source code repositories as
soon as possible now I'm a guy that uses
a lot of dotnet c-sharp stuff so I'm
typically using TFS in fact I'm almost
exclusively using TFS and I barely know
how to use github however I do have a
git lab project that I set up and get
lab is a free place that you can use to
actually store your code and I'm going
to upload my code up there because I
don't want it to be publicly accessible
and github but in order for me to be
able to do that easily I'm gonna go
ahead and set up a git repository on my
local folder here so let's go ahead and
kill the server first things first I
want to say git config and this is where
I'm
actually going to set my username global
username I'll say there's hawks I say
get your fig global user got you know
and I'm not gonna give you guys my email
sorry but I already get too many too
many Dino's so now here is where I want
to actually do my I get I knit so I'm
gonna do get I I always say I know I
know that pisses people off you need to
get out of the habit of saying it's
actually a knit and knit not I knit but
in it so get in it
alright so empty initialize empty git
repository there we go and then now
we're gonna say git remote and origin
HTTP GET lab calm and this is actually
going to be - the name of your project
if you want to take this step I call
this new movies bag in okay and also get
add
now we're gonna say get commit
cuz I'm gonna do like I said I don't
really okay let's see gets push the
origin master so I'm trying to create my
first or this writing up with my
username which
goddamn I hate them
all right let me see what I can try to
push this now
get course new origin master
all right so that works all right so if
everything goes well what this is gonna
do is it's gonna go in to get lab which
is free to set up and let me show you
guys it's a good place to actually store
your code because I have a Linux web
server that I'm gonna end up deploying
this on so now you can see get quickly
updated all this these folders and
everything to our master project with
this new movies project a project that I
have
all right so now that I have this
project within get lab what I can do is
I can actually go to the project and I
can grab the HTTP address from the the
gate lab project and once again it's
private so nobody can get it
and now I can actually go into my linux
server since I'm on Windows and I use a
program called putty so I can actually
login to my Windows Server they're not
my Windows servers my own my Bungie
server and I'll show you guys in just a
second
all right so what I'm gonna do is I'm
actually going to remove my movies
directory from in here I'm gonna say
sudo RM RF and I'm gonna remove the
entire directory of movies because I
don't give a about it anymore
and now that I've done that this is my
word sudo RM
I started my movie sequel and then I'll
probably keep that around in case I ever
need that so now what I would do is I'm
gonna make a directory movies I'm CD
into my movies and now I can say git
clone and I can paste in that address to
the new movies get now I need to give my
username again
now if I go in here you can see that I
have my new movies folder and all the
node modules apt is everything else is
in there I already have no GS running so
one of the things I need to do in order
for this to actually be seen by the
world I need to go into my nginx I go to
sites available engine X is the name of
the server that I'm gonna use to
actually host my or to run my node.js
application you can see these are all
domain names that I've either that I own
now or I have owned at one time or that
I'm hosting for friends and one of my
other nodejs sites is actually get cause
calm so I'm actually going to take a
look at that because I don't remember
everything I had to do in order to set
this up and really I can just copy this
entire thing so impress controls see all
right now I'm just a sudo nano newb
music and we already have this looks
like I don't know what this is
by the way I'm going to get rid of it
pseudo are my new music calm and then
sudo nano again music calm we'll create
a new file by pressing the right mouse
button it should didn't work all right
one second
I wanna sure curly brace in there okay
so now I need to update a few things I
already bought my domain I've had this
domain if actually it was the first
domain I've ever bought which got me
into programming a long time ago and you
know what I'm actually gonna music son
of a bitch I don't even mean to do that
I want to do movies it's not a big deal
though
actually on both the new movies and the
new music name
now I have to get the root directory
where it's located
right
now what this is this is actually a
virtual host and the reason why is
because when you go out and you buy a
hosting company I use Lindo one of the
things you have to do is on a second
goddammit
all right one of the things you you you
have is you have like one domain name
and we're really one IP address and the
problem is is that you're going to be
sending a lot of traffic to that IP
address but that IP address is actually
capable of having multiple domains that
it can that it can render and you do
that by setting up a virtual host here
in order for this to work so you'll see
in just a second we also had our server
listen on port 3000 so I have all this
stuff here I think this should be fine
for right now I'm gonna say control X
and save it now any I do a symbolic link
from sites available to sites enable and
that's confusing but basically the same
file is available in most sites
available in sites enabled and it's
easier just to link the one file to the
sites enabled folder and I can do that
by saying sudo L and and then I give it
the name of new movies
and then I want to send it to kpcn
genetic sites enabled instead of
available so now it's complaining that
the site the fault file exists
so I needed to leave it actually sites
and this exists because of what I had
there before so I just need to remove it
alright now that I moved it I can go
back to that sites available folder and
I'm gonna press up a few times to do
that command again and now you can see
it doesn't complain but if we go back to
sites and abled and we look inside here
you can see that we have this new
boobies calm so if I looked at what the
content was
you can see there's
all right what else I thought I'd be
able to review it from both locations
but apparently not so sudo service in
genetics reload and we're going to say
in genetics restart now in order for
this this thing to work me to go back to
our our home directory and I have my
project located and save our movies all
right so there's a project and now I
need to say node at the GS so you can
see if we started the Express app
all right so I had a jump ahead a little
bit because this thing was giving me a
little bit of problem plus I had to get
something to eat because this thing was
also bothering the hell out of me not
saying that drives me to eat but it's
also around dinnertime so this uh let me
give you a recap of what it would end up
happening on my Linux web server in
order to get this to work all right
number one you have that Vinci next
install number two when I go into sites
available I have another nodejs
application that was listening on port
80 90 so I'm actually changing my port
number down here to listen on port 80 91
for new movies so by doing that then I
can go ahead and I can use PM 2 which is
a common nodejs runner to run these two
different applications so you can see
that movies application is running on
this this PID and then this app is the
other node.js application that's
actually running so I'm able to access
both of them here's the first node.js
application and then there's new movies
calm now in order for you to actually be
able to get a domain name up and running
on on the site you have to go to GoDaddy
or one in one buy your domain then you
need to figure out where you want to
host it I recommend Linode for hosting
it's very easy but you might want to go
with like a shared host but it's really
gonna be up to you every host has
different requirements and rules and
things if you do decide to use the node
they have $10 a month accounts and I
would recommend that you use a bun to
14.04 or the 16 version but don't use
anything you know any older than that
and if you guys have you know questions
or you want me to send you a copy of
that virtual host file that sits inside
sites available you know let me know but
when you install nginx on a bun to that
sites available in sites enabled folder
is gonna be right there for you in the
same location so you have to create
those entries you have to tell your your
DNS provider wherever you bought your
domain whether it's GoDaddy or something
like that you tell them where to point
you know to which nameservers now the
name servers are gonna be based on who
you actually host your application with
so in my case it's one node and one node
has like five different name servers
that I go into GoDaddy's records and I
update that to point Atilla node and
then once you get to lenola note says oh
you know this domain is being requested
and then it looks for that matching
domain within the virtual host which is
the nginx sites available sites enabled
and then it it then runs and points to
the node.js application process that's
running via pm2 so that was a lot of
 to swallow I understand but this is
complex stuff there's what people you
know full stack development this is why
people get paid access $100,000 a year
to deal with these headaches you know
each time you do it I think you know
things get a little bit easier to deal
with and I would definitely recommend
that you use git because it's so much
easier to transfer files in and out
between get so now when I'm running my
own project locally I'm probably gonna
do it all with a visual studio code post
it to my gate lab and then pull it down
from gate lab to my Linux web server
that's already deployed and everything
so it makes things I think just so much
easier than you know dealing with an FTP
client people have recommended that to
me in the past and I appreciate the
recommendations because you are right
it's pretty badass alright guys thanks
for watching make sure you subscribe you
vote up also this video is sponsored by
Deb mountain coding boot camp so if you
guys are trying to get your foot in the
industry or you're just looking to
expand on your education definitely
check out dev Melton the descriptions to
these guys are in the well I'm sorry the
links are in the description tag below I
always mess that up but they have twelve
and sixteen week courses guys are out of
Provo Utah also Dallas Texas and they're
they they're mainly focusing on
technologies that they hear now the
technologies like nodejs angular react
probably gonna be dealing with view
they're doing a lot of UX stuff as well
as app development so they're constantly
adding new courses to their to their
package deal here and once again they're
their goal is to be able to get you
job in the industry when you complete
the project so check those guys out for
more information and and that would be
doing me a favor since they are
sponsoring this video all right guys
thanks for watching and have a good day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>