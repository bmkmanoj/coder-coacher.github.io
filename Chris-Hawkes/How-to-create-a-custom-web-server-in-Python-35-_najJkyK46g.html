<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to create a custom web server in Python 3.5 | Coder Coacher - Coaching Coders</title><meta content="How to create a custom web server in Python 3.5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to create a custom web server in Python 3.5</b></h2><h5 class="post__date">2015-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_najJkyK46g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what up in this video I want to
show you how to create a local server
just a simple server in Python 3.5 which
is the newest version of Python at the
time at the time of this video has the
availability of a sink in a way of
sewing allowing allowing some concurrent
based programming although Python is not
multi-threaded in the sense that it has
a thread lock for everything it does it
can still make Python a lot quicker so
we're going to look at that and we're
gonna look at the socket library which
is a bare-bones component of the Python
language that's been around since you're
way earlier versions of Python but it
gets real low to the level of where you
can actually tell Python which port to
listen on and a browser can travel to
that port and in this particular example
we'll just end up displaying back a
string alright guys so the first things
first you don't have to actually install
anything assuming you have Python 3.5
installed or any Python version but this
is gonna be specific to Python 3.5
because if you try to do this in an
earlier version of Python it's not going
to work the same way we're gonna create
two variables here our host and our port
host is just going to be blank which is
going to be localhost and the port is
gonna be listening to on eight eight
eight eight and make sure you don't have
anything listening on that port you most
likely don't but just in case you do
it's not going to work and what we want
to do is go ahead and create a variable
I'll listen socket and then we're going
to use the socket library that we just
brought in and then we're gonna call the
socket method and then type socket dot a
F
so there are several options to choose
from but what we're looking for is a F I
net and you're probably wondering what
that is and it's difficult to explain so
I'll let doing Google do that for us but
address format internet basically it's a
standard for being able to read ipv4
domain names so in short that's what we
well we know and it's part of the socket
library that comes with Python 3.5 out
of the box here so you can read more
about it on the official documentation
you can see like gives an example of
ipv4 the Internet has a newer standard
which is ipv6 which will allow us to
have because they're basically running
out of domain addresses and the ipv4 so
they've added a few extra slots but it
actually allows so many different IP
addresses I think there's more it there
would be less atoms on the earth than
the amount of ipv6 addresses that are
going to be available which is the new
internet standard but anyway that's what
we're using here inside our socket
connection and then we're gonna go ahead
and call socket socket stream now if we
want to actually look more into this
socket socket stream I can actually hit
f12 and it visits the page because since
I'm using an editor that will
automatically default to that but you
can see there's a lot of work going on
and just building a socket and listening
to bites and things like that so this
stuff is certainly complex it's very low
level too so if you ever wanted to get
into like how do I actually build a
state of the art web server in Python
this is definitely you know where to
start and getting into the lower-level
internals all right so now we're gonna
go ahead and actually create the socket
that we're going to be listening on so
we're saying socket we're going to say
set sock opt and then here we're gonna
say socket dot sol
underscore socket and socket iso
reusable address and then we're going to
pass in the integer one now let's go
ahead and bind it so we'll say listen
and the socket dot bind and then we're
gonna pass in our host and port that we
specified and that could be any port
number that you want and now we'll say
listen socket dot listen and then we're
going to pass in the into one and here
we're gonna use the new 3.5 print syntax
and python so we'll just say listening
on port
and then we'll just reference the port
variable
all right now to keep it keep the
program running forever we're gonna do a
wild true statement so that way the
server continues to listen for
statements and then we'll go ahead and
say client connection and then we'll
define also a client address we'll say
equals listen socket dot accept so we're
allowing on the call to go through
request equals client connection dot
receive and then we're going to receive
1,024 bytes at a time so we're actually
setting how much bytes will receive on
our incoming requests and then we're
going to print out the request
now let's go ahead and give our response
that we're gonna we're gonna give out so
while we're still in the same true
statement what we want to say is um HTTP
response equals which to hello world
this is a custom server on Python 3.5
all right and then finally let's go
ahead and say client connection got send
all and then this is where we have to
send all is a new thing in a Python 3.5
or it actually needs a bytes parameter
so I need to actually take our string
response here and turn it to byte code
and I do that just by using the built-in
bytes and then pass in an argument which
is the HTTP response but then I also
need to encode that into utf-8 because
it will expect some sort of encoding so
we'll encode that to utf-8 and when you
want more parentheses there and then now
we can just simply say client connection
dot close so that we're not using up all
of our resources so the bottom line is
we created a socket to listen to we use
the socket protocol the internet ipv4
addresses are using that very
complicated low-level stuff and then we
have just a simple print statement
that's gonna fire up as soon as we start
running the program we're gonna have an
endless loop that tells the program to
run forever since it's a server we're
always listening and it's gonna listen
for any sort of requests that are coming
in it's gonna take in any sort of
request a thousand bytes at a time and
then it's going to print the request and
then we're gonna give a standard
response that we give back to every
single request but then we have to be
able to use the client connection to
actually send the response back as a
byte
and then we pass into the bite the
actual string that we're trying to to
deliver but we also have to encode that
do it a specific encoding the utf-8 and
that could be a ski as well or something
else unicode if you wanted or something
but I'm utf-8 is pretty good standard
and then we just simply say okay that
request has been done let's go ahead and
close that so let's go ahead and run the
program here okay so bind actually takes
in a tuple so what we want to do is
actually put an extra parentheses around
around this because we can see if when
we go in to let's see yeah definitely
needs to get to a pool that's good enjoy
it again alright so now you can see that
it's listing upward eight at eight so if
we go ahead and we pull up a browser and
we just go to our localhost address
which is one two seven and then change
the port to eight eight eight eight
we're gonna get the hello world this is
a custom server on python 3.5 now what
you're also getting is you're getting
the low-level information that we're
printing out here so we're actually
printing out the request that came in
and that's where we were reading it a
thousand bytes at a time and you can see
that the actual program has access to
all kinds of different things like the
user agent that was requested wonder
what else it has in here
I need to make this damn thing bigger
but anyway you can see that it has cool
information I was hoping that it has the
IP address but anyway guys on that's
what that's what we're gonna in this
tutorial here that's how we set up a
quick and low-level Python server using
Python 3.5 alright thanks for watching
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>