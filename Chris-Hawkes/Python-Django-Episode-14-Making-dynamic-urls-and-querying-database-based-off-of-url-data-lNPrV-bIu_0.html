<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python &amp; Django Episode 14 - Making dynamic urls and querying database based off of url data | Coder Coacher - Coaching Coders</title><meta content="Python &amp; Django Episode 14 - Making dynamic urls and querying database based off of url data - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python &amp; Django Episode 14 - Making dynamic urls and querying database based off of url data</b></h2><h5 class="post__date">2013-12-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lNPrV-bIu_0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright let's go ahead and start adding
on to our views page within our polls
make sure you have the right view
selected in this case I have the right
one selected and we're gonna add some
additional polls URLs that can be
visited the first one being detail
remember request is the request object
that requested the page so you can get
certain things like you can get the
person's IP address or their request
headers things like that are in that
request object so that's always the
first argument for any method just try
to keep that in mind anytime you're
building these these view methods that
always has to go first it's always an
argument that's required so we'll go
ahead and now return to demonstrate the
dynamic nature of Django I'm going to
follow this pretty much step first step
with the Django tutorial online
and just hopefully you guys can follow
along here
there we go now we're gonna go to our
polls URL file and we're gonna add some
additional URLs here okay
now this regular expression is a bit
interesting and I'll explain in just a
moment
and we're almost done
right sir and we're done with that all
right so we know we also need to add
another shortcut to this views file
because we referenced the HTTP response
object and that's an import needing to
go from Django dot HTTP and poor HTTP
and response
all right so let's go back over to the
application here and now whatever number
we give it it dynamically says hey
you're looking at that URL so one you
know could give any number you want and
the reason why it's doing that is
because in our URLs here this regular
expression captures this integer right
here see it's a this digit it could be a
multi numbered any sort of multi digit
it's either one or more digits that's
what that URL captures right here or
this regular expression I'm sorry so
what we're saying is whole ID so any put
/po and then any sort of number is
captured here and then we're just
displaying it within our views so that's
the pole ID number and that's important
for a reason I'm about to get into
you're in just a moment all right so the
reason why that's important is that
we're gonna be using this pole ID to to
go ahead and query our database so that
we can get the pole object on the detail
page screw just saying hey you're
looking at pole ID because it's not
helpful to anybody but it does count on
the point that you can get data dynamic
data that is delivered to you via the
URL and then use that data to then do
something with so in this particular
case what we're going to do is we're
going to go ahead and query the database
based off of that ID so let's go ahead
and up here we want to go ahead and say
from my project views dot I'm really not
even my project
models I'm taking real quick so my
project I hold models import pole right
and then here instead of all this stuff
we're not gonna do any of this
we're gonna go and try to query the
database on the pole object that was
sent so let's go ahead and say pole
equals whole objects dot and get and
we're going to say PK equals whole idea
now what we're gonna do if everything
goes well we're going to try to send
that object back to our template so what
we're gonna do is use them render to
response method that we've used
previously say return a render to
response and we'll say we have to give
it the URL where it can be found so it
was a pull in this case we'll say detail
dot HTML and then put a comma there and
then here is a Python dictionary and
we're gonna say hole and this can be
whatever name you wanted to be but in my
case I want to keep it as easy to
understand as possible so I named pole
and then I'm gonna sign it the pole
object that we just queried from our
database and then we need one more comma
there and we're going to do something
else here when I say request context
request
and then up here we want to go ahead and
import request context into our file
here so we're going to say from Django
dot template imports request context all
right now we're referencing a template
that doesn't exist inside the poll so
let's go ahead and create that now
I think we called it detail detail dot
HTML and then similar to everything else
we've done here let's go ahead and
extend from the the base page that we
had created earlier and we need to say
poll detail number or actually you know
just say poll number and here we can
reference our poll object so I'm going
to say poll dot ID forgot yeah that
would be good
holdout ID
and welcome to poll page hold all right
now let's go ahead and see what happens
we only have to pull objects if you
remember from earlier videos and here we
have an issue
no modular and pulled out models all
right so we have a few issues here one
being we do not need to request my
project when we're importing on our
polls views file so just get rid of my
project it should just have to say from
poll stock models it doesn't need to
know my project it's already in the
polls folder so just say hold on models
and then another thing too is um on the
database request here I'm noticing and
pulled out object it needs to say
objects so go ahead and change those two
things and let's go ahead and try to do
this again and now you can see welcome
to poll page one and what's significant
about that is that we're not simply just
reading from the URL what we did is we
took at that number from the URL and
then we queried actually I'm sorry this
is the number from the URL right here
and then we queried the database by the
PK which is the primary key and then we
created a poll object from that and the
poll object is the entire poll object
there so what do we have in there we
have the poll question so what we can do
because the entire object exists right
here because we created the object and
sent it to the template inside the
template we're referencing that poll dot
ID which is you know the primary key so
here what we can do is we can say h2 is
just the poll questions so we'll say
poll question
is this tutorial helpful now watch what
happens when we put it in - did you
subscribe to my channel if you remember
from the other videos those are the two
pull objects that create the or created
our database if you reference one that
isn't there you're gonna get an error
because debugging is on you see all this
stuff assuming you go into production
you turn the bugging off and it's gonna
give you a 500 error alright so anyway
that's that's significant because we
queried the database based off of this
URL number and then we filled our
template with the stuff so now we also
have the ability to add the questions as
well so in the next video we'll get into
how we do that but thank you for
watching please subscribe
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>