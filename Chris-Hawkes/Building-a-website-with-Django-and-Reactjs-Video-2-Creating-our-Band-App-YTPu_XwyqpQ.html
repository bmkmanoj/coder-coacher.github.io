<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a website with Django and React.js Video 2: Creating our Band App | Coder Coacher - Coaching Coders</title><meta content="Building a website with Django and React.js Video 2: Creating our Band App - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a website with Django and React.js Video 2: Creating our Band App</b></h2><h5 class="post__date">2015-04-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YTPu_XwyqpQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys welcome back alright so
thing that we need to do is when you go
and create our first application and the
way a gen goin project and work siz that
you you it's it's built to become
composable basically and the separate
little components that they call apps so
your your main your main website is a
project and then the project consists of
multiple apps and each app should be
like a self-defined thing so our app
that we're going to create for this
music website is called the band app and
the band app is going to be responsible
for storing all the band data like their
origin the name of the members and
things like that so let's go ahead and
get started with that before I go into
too much detail and what we're gonna do
is when you go to our command line so we
can create and create the app and I have
my virginal environment already
activated like I had said before it's a
good idea to use a virtual environment
you don't have to but it's definitely a
good idea so I need to be able to do a
CD in to where I have the manage dot py
file available and then you're going to
run the command Python manage py and
then start band so that's what it does
here and then it creates a band now that
it's done that what you want to use is
if you're using a server you want to be
able to use something like FileZilla so
that you can download
what Django just created on your server
to your local environment so you can see
band is right here and has all the
migrations and everything so I'm gonna
go ahead and download that so that I can
get to it in my editor and you can now
see that band is is over here it's going
to come with some files for you
automatically which is like the admin
the models file which everybody needs or
every app needs anyway and that's really
it so let's go ahead and create a file
that you are going to need inside the
module the band module that we just
created and we're going to call it the
URLs that py file and this actually
handles the routing so when a particular
band is requested it will it will tell
it to point to the right view so that it
can render the page so let me go ahead
and explain that a little bit more
alright so
and the URLs file what we want to do is
we want to import a few things the
genitive needs in order for this to be
able to work so we're gonna say from
Django config you are ELLs import
patterns and then separate this all by
comma so comma include and then URL and
for right now we're gonna just define
our URL pattern so every URL file for
all your apps is going to look like this
and once you have the first one you can
just copy and paste but the first time
we have to type this out and the way the
general routing works is it uses regular
expressions so we identify a regular
expression that will match everything
which is this caret sign and the dollar
sign which means for starting in then
there's nothing in between so it's gonna
match anything and then it's going to go
ahead and route this to a view that we
define someone to say this is gonna
route through banned views dot and we'll
just call this we'll call this all bands
okay and then after that first
parenthesis go ahead and put a comma
there all these URLs need to be
separated by a comma I know we're going
to go ahead and identify a regular
expression that we can use for requiring
the database and this will make sense
and a little bit but right now just copy
along so we're gonna do question mark
uppercase P and then inside of these
less than greater than sign we're gonna
go ahead and give our band ID so this is
just an argument that we're going to be
passing along inside that URL and once
again this will make more sense once we
go further along in the tutorial before
right now just follow so we're gonna say
band dot view dot band
and this is a typo that should say
patterns we're not gonna use the include
for right now but don't worry about that
also all of these URL definitions should
be separated by a comma as well so make
sure you add that there I got that we've
done that let's go over and go to the
views and update that if you notice over
here in the URLs we create this up band
that you were in about and create that
that view first and what this does is it
passes in just an integer that's what
this signifies here is our any sort of
multi digit integer it can be a single
digit or multi digit and what we're
gonna end up doing is we capture that
digit under a argument name band ID so
that we can pass that to our view and
then inside of our view we use that band
ID so it'll be like one or five or 1500
and we'll query the database to look for
the band that has a primary key that
matches that ID and that's what we're
doing there so let's go ahead and create
that view I'm gonna say define band and
everything always passes in a request as
your first argument and the request is
going to contain information like the
user's IP address and other things that
get passed along the wire anytime a web
website is requested so you can get like
the headers that they sent the type of
browser through use and all that stuff
is inside that request object including
arguments or any sort of data that they
try to pass as like a query parameter or
anything like that so it contains all
the stuff inside your request and that's
why it's needed and I'm sorry this is
going to be the band ID that we had
identified before and that's that
integer argument so this will be a
number that gets passed in from the URL
every time this page is requested so for
right now we're going to say return
render
and I'm gonna send back the request and
then we also need to then second
argument here is always going to be your
your actual template that's going to
render this view and we're just going to
go ahead and call this band and then
band out HTML alright so for right now
we're not gonna do anything with that
band for right now so it's just that's
the way it is and then we need to go
ahead and create the view for all bands
I think it's what we called it and
Sunday URL here yeah we called it all
bands so let's create that view now and
then this one's not going to pass any
data it's just going to return made a
template so say request and then would
say band all bands that HTML
all right the next thing we're gonna do
with our band module is we're gonna
create the actual model spy on the
models pile is how it builds our
database table to store band objects so
each band will have its own entry into
the database and we need to define how
that entry is going to be saved so every
band has a name and we're going to say
models I this would be a character field
and we want to give it a max Lang band
names could be kind of long so I'll give
it a max length of like a 128 and I want
this to make sure that you can't put in
like a null or a blank entry and we also
want to make sure that this is unique so
we say unique equals true because we
don't want multiple bands with the same
name in there and if there are bands
with the same name we need some way of
different differentiating them based on
their city or something like that so
let's go ahead and say we'll say date
added equals I'm gonna bring in the
models dot date field and then this can
be no actually no date added so this
will actually have a default date time
and instead of having to enter it every
single time I add a band to the database
I just want some sort of record when
they got added and we want this to be to
fault it so we can do that by saying
default equals date time dot date time
dot now and since we're using the day
time object we need to go ahead and
import that that's part of the Python
standard library so you can just say
import day time and that'll work
you don't have to have anything
installed or anything for that now let's
keep things relatively simple and add
just a few more fields we're going to
give it an image and this is another
character field
in fact I can copy this part except I'm
gonna allow blank equals true and all
equals true I also want to give it a
little bit longer because URLs if I'm
pointing to some sort of image for the
band then it can be a pretty long value
there alright so the only other thing
that I'm going to do is I'll just give
it a bio and this is not going to be a
character fields can be a text field and
text fields are made to hold a lot a lot
bigger amounts of text and so bio can
consist of a lot of a lot of words so
what will give it I'm 5,000 characters
for starters and once again I want to
say null equals true and blank equals
true that way I can add a band without
actually providing them bio if I don't
want to all right so we're done with the
models file for right now let's go over
to the admin file which is going to be
an empty here and this is what Django
admin needs in order to be able to
present your data your data properly
inside the built-in admin system that
comes with Django so what we need to do
is we need to import the MA that banned
class we just defined in our models file
so we're going to say from models import
banned and then let's go ahead and
create a class down here and we're just
going to call this band admin and it
takes in an argument admin dot
model admin and then we're going to say
list display this is um there's all
kinds of customized options that you
have with admin but we're just going to
use the list display by name and then we
also want to be able to search so we're
gonna say search fields and they'll be
able to search there should be a list
because you can search by multiple
values but we're just going to search by
name
from within the admin the reason by both
of these are red and needs to say equal
and then finally we need to go into the
admin site register and this is just the
requirements that actually shows up in
the database and we're going to
reference the band object that we just
imported up here and then we're also
gonna say as a second argument band
admin which we just defined right here
all right next thing that we got to do
anytime we build a new app is we need to
add it to the settings file and the
settings file is located in the module
that got built when you created your
Django project and that'll be in the
installed app so I want to go ahead and
add a new entry here and we're just
gonna say band I had the extra comma
there okay now it's also going to throw
an error because we don't have anything
in our templates folder so if you
remember from the views we said that our
templates gonna be inside of a folder
called band and then it'll be all bands
and then band dot HTML and none of those
exists in the templates folder that we
have over here so we need to add that
and just so you know the templates
folder is found based on this entry
inside your settings file which is
template directories and it points to
that that templates directory so Django
knows anytime there's a view it doesn't
matter what app it's in it's gonna know
that okay I go right to that templates
directory and then it's gonna look for a
band folder which isn't there and it
would throw an error but that's why
we're going to go ahead and add that now
so we'll create the the band folder and
then inside here I'm going to create a
HTML file for band dot HTML and then
we'll create another one in there which
is all bands
and we'll just add just some basic HTML
here so that we can see that the page is
working
okay all right so now that all that's
been done we need to upload all that all
of this information to the server so I'm
going to update the music to the folder
I'm going to update band and then I have
another FileZilla over here from my
static content and I have templates some
selected so we want to make sure those
are updated so we look over here you can
see the bands there and the two HTML
files that's now sitting on the server
okay so that should be good for right
there if you're using an actual Linux
environment you probably have to restart
your Apache anytime you make changes
like this or even if you're doing local
debugging with the Django built-in test
server using you usually have to restart
that any time you make any sort of
changes to see those changes in the
admin so we made a lot of changes here
and since I'm talking at the same time I
may have missed something so we're gonna
find out here pretty quickly if things
are working so we know no template
exists here so let's go over to actually
we are missing something I'm sorry
in order for the URLs file here to be
found you actually need to tell the main
URLs file which is in the app that got
created when your Django project was
created where those files exist so you
can see here that music views index is
is pointing to this view here and this
view is I'm supposed to be returning
index and index doesn't exist so if we
wonder let's go ahead and add that right
now since there's a blank project so
that's just in the regular templates
directory we'll add this file and we'll
call it index index is typically what
you want to call your home page so we'll
say welcome to a new music
and I'm gonna upload the template
directory again so it'll reflect it on
me all right so you can see it's not
throwing an error message now because
it's finding that template so let's go
ahead and update our urls file so we can
actually point to the band URLs when the
band URL is requested so in order to do
that what we need to do is um say URL
and then we give it a regular expression
again and we're gonna do a caret sign
and we'll just say band then forward
slash and that's all its gonna be and do
a comma and say include and now we're
using actual include that we had brought
in before that we weren't using and this
is why you use it so like the Django
admin is using it's pointing to the
admin URLs file and we're gonna do the
same thing with this we're gonna say
point to band dot URLs and make sure you
have the comma or it'll break so it
should look like that it's all it's
saying is that when you do new movies or
new music comm /ban and then it just
says hey have this URLs file under the
band handle everything so let's go ahead
and take a look at that now let's upload
we might have to reload the server again
so that's gonna throw an error message
so yeah we got to restart the server
yeah so it's good and it's not finding
it oh you know what I didn't upload it I
uploaded the band's and not the main
application to reflect the URL so let's
go ahead and upload the main project
which hole has that URL so we just
updated or we start the server again all
right so um that's right because the
view if we if we look at the view that
we just created
we gave it no arguments so no argument
is gonna default to all bands I could
have said all bands here and it would
match the view but what I said is if you
did just new music com /ban you're gonna
go to this that's directory and then if
you give it an integer you're gonna go
to this one so we can give it an integer
and it's going to go to the same static
page no matter what integer that is it's
gonna be a single band page okay alright
so now it's going to make some updates
here let's number one before we do that
let's go ahead and move go into the
built-in admin just to make sure that
that is working correctly and you should
see the name of the application that we
just added so looks like we have okay
the table doesn't exist and the reason
why is we need to actually starting with
Django 1.7 it has built-in migrations
which used to be a major pain in Django
before 1.7 where most people relied on
Django South which was like a plugin you
used to handle migrations if you don't
know what migrations are it's basically
once you define a database schema which
means like a database table structure
you can't change it very easily and
you change it all the data that you had
entered into that table previously is
going to be stale and it basically
breaks the database so you have to do
these migrations where you get all the
old data to the new database structure
in order for it to work and it always it
was always a headache half the time it
didn't work and you'd end up having to
drop the table or do some crazy stuff to
make it work it was a major pain but
Django 1.7 now has that included so when
you build a app for the first time and
that model's file is in there you need
to go ahead and create the migration so
we're gonna go to where we can access to
manage that py file in our shell and run
Python manage that py and then say make
migrations and this thing is going to
automatically detect that band needs a
migration so once you've done that you
then do another command to actually
migrate it so we're going to say Python
managed dot py and then we're gonna say
just migrate and then it migrated the
band you might have to restart probably
don't I didn't have to there so now
there was an actual database table
inside of our database for the band that
we just created
and you can see the name the date added
defaults to the current date like we had
had stated that we wanted it to be and
then here's the image you can see that
the character fields are displayed as
these regular text boxes and then the
text fields that hold a lot more text
they use the standard text area HTML
element inside here so it's go ahead and
create the first band and we're gonna go
with my favorite band I just saw in
concert the other day which is Bayside
and I'm gonna create a I'm gonna find an
image I'm just going to point to the
image instead of loading it on my server
for right now so I don't claim to have
any sort of copyright to this image or
anything but I'll just grab this image
here copy to URL paste it in here and
then let's write a quick bio
all right so just that so now we have
our first band object in here now in
order to be able to query the database
and get a little bit more dynamic data
instead of saying single band page no
matter which band ID you put in there
right now we only have one band and
that's Bayside and Bayside is gonna have
an ID of one because it was the first
one that we added so if I put one here
you're gonna see it still pulls the same
a single band page so let's go ahead and
fix that now if we go into the views
what we want to do is we want to take
this band ID and we want to query the
band object so in order to be able to do
that
Jango has a built-in way that you query
the database but it needs to know which
database table you're gonna be querying
in our case it's the band table which is
defined in your models file so in your
views you need to pull in that band
model just like we did with our admin
how we import it from models import ban
so we're gonna do the same thing in our
views so from models and port band and
inside of our band view we're gonna go
ahead and say band equals band and this
is upper case because we're referencing
that model that we just brought in and
we're gonna say objects dot we're
actually gonna say get because we know
exactly the primary key that we're going
to be looking for and we'll say primary
key equals band ID and that's what gets
passed in as an argument and now we want
to return this band to our template and
in order to do that we need to add a
comma after the template argument down
here in our render and we're gonna give
it a Django dictionary which is just key
value pairs and the key can be whatever
you want to be and my I always keep it
the same thing as the variable to keep
things nuts keep them so it's not
confusing so I'll create this key band
and
we assign the value which is the band
value that we just queried from the
database and this should say objects I'm
sorry it's abandoned objects not get and
if everything goes well
Django will take that query that the
integer from the URL and then try to
query the banned object and return it so
let's go ahead and upload this
because I made a big change like that I
want to go to restart the server
so now if we were this page will blow up
if it's not working and it does work so
that's good so we can take and we can
now reference this band object that we
just sent back with the the view it
sends it to the the template so we can
reference that inside the template now
if we go into band and let's go ahead
and just say we're gonna reference that
that band object that we just sent and
we could say band name the reason why we
say name is because name is in our model
structure so it's going to send back
basically his name the data was added to
image in the bio so we're good in
reference all that inside the template
so image source is gonna be band image
and then we'll put inside a paragraph
tag
dan dot bio and just for a good measure
we can also say this band was added and
then we'll say band I think we called
date added so we called it
they would call the data added I was
going up data
now we need to update our upload our
template so it can find the new
information inside that template and now
you can see it's actually retrieved
information from the database and it's
displaying it inside the the actual
template alright guys so we now have the
the page up and running pretty well yeah
this is we're already running up on 27
minutes so that that's how we get the
entire app set up and everything in the
next video what we want to do is we
actually want to be able to install
Django rest framework so that we can
turn this into a restful api so that we
can pass some JSON data back and forth
because what we're going to be using is
on react to be able to handle that JSON
data that's coming from the database so
instead of like hard coding these values
inside the template we're going to use
react to render the view which is going
to do a lot better than the built in
Django templates alright guys thanks for
watching bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>