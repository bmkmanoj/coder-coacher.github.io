<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django Tastypie adding authentication and authorization to our api | Coder Coacher - Coaching Coders</title><meta content="Django Tastypie adding authentication and authorization to our api - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django Tastypie adding authentication and authorization to our api</b></h2><h5 class="post__date">2014-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JLygQE28xnk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright so in the last video we hooked
up our restful servers so now we need to
go ahead and add our user object into
that news API that we just created in
the last video so let's go over to the
API file and we're going to go ahead and
bring in our user object so we're going
to say from Django got control off top
models i'm going to import user ok now
we're going to build our user resource
it just like before it's going to
inherit from the model resource to a
class meta I will say query set equals
user objects got all resource name just
like before and we'll say equals user
now we want to go ahead and exclude some
stuff that this would end up exposing if
we just leave it the way it is so we're
going to give some additional stuff to
our meta here which is exclusion it just
takes a list of things that we don't
want to include which will be email
password is active is staff is super
user
okay and then we don't want anybody to
be able to post to that joint so we're
going to say aloud methods is another
list equals only get now we need to go
back to our URLs file so we can go ahead
and add the new thing here so we're
going to say from api we're going to
import a new resource and also user
resource and we're also going to give
our api a version so we'll say v1 api
equals api api name and what we need to
do here is actually from tasty pie
import api
and then we give it a p.i name will say
version one so now v1 API we can say dot
register and then we'll give it the
first user resource and then v1 API that
register news resource
and now our little inclusion down here
we're going to say include v1 API URLs
all right so let's go ahead and upload
that and one thing when we introduce
this we need to actually say from Django
are from JCP API import API sorry about
that all right so now if we go back to
the site and we go api and then we give
it our version number of our api we can
say format equals Jason you can see that
we now have two objects in here we have
our news and then we have our use or so
if we want to drill in on any one of
those we could do that by simply after
the V once a user and then you can do
format Jason you can get some user
information here which is not going to
give you much because we excluded a lot
we do have the username here which we're
allowing to be seen which is my username
here so we can also go over to news and
you get all the new stuff that we were
just showing so let's go ahead and get
further into some security alright so
now to add authorization to our model we
need to go back to the API file and for
our user resource let's go ahead and say
authorization and we're going to say
Django authorization which comes with
tasty pie but we need to go ahead and
import that
from tasty pie dot authorization alright
so it's going to upload that now all
right and while we're at it I need to go
ahead and add this Jango authorization
to the news otherwise I could probably
have people uploading on nerves and
stuff alright so let's go back to our
API and do one other thing so we have
authorization we also go ahead and add
authentication making sure that the
person is logged in before they can
start messing with stuff so let's go and
do that now and will stay from tasty pie
dot authentication import basic
authentication okay
and just add it down here
so by adding those two items down if we
go back to the site I don't know if you
saw by actually logged out of the site
so I'm not registered right now so I'm
not logged in and if we go ahead and try
to access the API we can get the basic
items that don't require the
authentication why we can see what is
available there but when we try to
actually reference it like with the news
one you can see we get prompted for a
username and password and the same thing
should happen for user which it does
alright guys so um thanks for watching
these two videos and we're going to get
into more stuff in the following videos
make sure you subscribe I appreciate all
the support and everything that
everybody does I have over a thousand
subscribers now and I guess I'm pretty
proud of that it may I see how people
have millions and stuff like that but
I'm happy with a thousand and I
appreciate it so alright guys talk to
you later bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>