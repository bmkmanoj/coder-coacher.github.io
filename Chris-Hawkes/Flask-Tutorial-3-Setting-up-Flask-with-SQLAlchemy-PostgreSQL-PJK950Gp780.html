<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Flask Tutorial - 3.  Setting up Flask with SQLAlchemy &amp; PostgreSQL | Coder Coacher - Coaching Coders</title><meta content="Flask Tutorial - 3.  Setting up Flask with SQLAlchemy &amp; PostgreSQL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Flask Tutorial - 3.  Setting up Flask with SQLAlchemy &amp; PostgreSQL</b></h2><h5 class="post__date">2016-01-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PJK950Gp780" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up so one of the things
with flask is um you really need a
database abstraction layer something
that allows you to manage your database
much easier and those are typically done
using something called an object
relational mapper and it's something
that Django has built into it and it's
really helpful especially for noobs that
aren't very good when it comes to
database manipulation like creating
tables setting things like to
auto-increment being able to query those
things in a way that makes sense without
slamming or your database so for that
reason a lot of people use these forms
and the preferred one from what I've
seen in the flask community is sequel
alchemy so flask has a flask sequel
alchemy project that we we're going to
be looking to install in this zone and
this application I plan on using
Postgres with our with our new
application here so I have Postgres
installed and this PG admin 3 is like
the PHP myadmin of my sequel it's post
presses GUI to make things a lot easier
to deal with and I have a video already
on my channel and it's titled installing
Postgres for Windows and in there it
shows you how to actually install so you
can have this tool but um I mean
whenever you go into production it's
probably best just to kind of get that
out of the way now I mean don't start
with sequel because it might be easier
to use something like like sequel Lite
which comes with Python but sequel Lite
isn't really going to be your answer in
production so it's best to just take
that plunge now and try to get involved
in a production type of database
Postgres is very empowering the django
community these days you can also use my
sequel personally i'm just going to use
the Postgres for this so there's been a
major push I think in the Python
community to continue to to gravitate
towards Postgres so it has a lot of
really good Jason support coming down
the line and just it seems like a really
good option so that's why I'm using it
but you don't necessarily have to but
flask US sequel alchemy is just going to
be how we
in our interface to our database whether
you choose Postgres or my sequel is
going to be up to you all right so that
being said we need to go ahead and
install it so let's go back to our
command line and we're going to run
let's kill the server by pressing ctrl C
and we're going to run pip install flask
sequel alchemy
all right so that installed okay that's
good now let's go ahead and see if we
can import it into the project that we
just created a simple little project
underneath the flask import statements
go ahead and say from slash sequel
alchemy import sequel alchemy and now we
need to create our database objects
we're going to say DB equals and then
we're going to use sequel alchemy that
we just imported and then under the app
dot run command and what we actually
want to do is we want to pass the app as
an argument so DB needs to be defined
after app and here we're just going to
pass an app now one of the next step
that you're going to do is going to be
specific to your setup to your database
but let's go ahead and I'm going to copy
in this code so I don't make any
mistakes and what we're going to be
doing is setting up the config so we
have the sequel alchemy database URI
which is just a key value that we're
setting and each database has a
different config so the Postgres one
that I'm going to be using is going to
look like this now this is going to be
the name of your database and then you
want to have your actual root use or
whoever you decided that to be
so when you install Postgres you
actually created a user which you have
to log into every time you want to gain
access to the server so if I maximize
this I double click then it's going to
ask you for the actual password now if
you notice my username is Postgres here
so that's what I decided to make the
main user I already have a few databases
in here so we're going to go ahead and
create a database let's say new database
and then we'll name it flask movie
all right so now flash movies created so
if I went in here we don't have any
schemas or anything it's all just empty
there's no tables inside of it
but at least we have a database now set
up in Postgres so I would actually want
to change this to the name of my user
which like I said is Postgres and then
this would be my password and then
localhost is fine because that's where
it's currently deployed and then we just
give the name of the database so for
demonstration purposes since this is
just a locally running database that I
don't care about I've actually changed
my password to test one two three so
that way you guys can see everything
that I'm doing and if I type in test one
two three here
it all works oh this should work and
connect to our Postgres just find into
the newly created database that we had
just created using our PG admin tool all
right so now that we've done that let's
go ahead and create our database table
or schema and we do that by creating a
class and we call the class whatever we
want our table name to be so I'm going
to use the documentation from online so
that way I don't mess this up but we're
going to have a user table which you
know we definitely want to use or you
know so we have users to our site and
blah blah blah so we definitely want to
have that and you can see that we create
an ID and we give it a DB column it's an
integer we set a primary key and that
should auto increment for every new user
that's added the ID will add one to
itself so that way it's always unique
and primary keys always consider you
that's always going to be unique so you
don't have to specify that it you know
is unique like we do down here
now we obviously want user names to be
unique we don't need multiples of those
and then we would want emails to be
unique as well that way you don't have
you know the same jackass registering to
your site a hundred times to try to you
know manipulate your data so this is all
specific to sequel alchemy and how this
works so we're just going to go ahead
and run our code here and in order for
this database table to actually be
created what we're going to do is go
back to our command line and let's run
the Python interpreter and what we need
to do is say from and then the name of
our application which is called flask
movie we're going to say import DB this
flask movie right or no it's from app
I'm sorry
it's from app all right now this is just
giving us some sort of overhead warning
we don't care about that for right now
so just disregard that but you can see
the name of our app is app because
that's what we named it under the
folders just flask movie so now we just
need to say DB dot create all okay it
looks like it's actually missing the
Python the Python library tool that we
actually need in order for this to work
so let me see so if you're using Windows
like I am what we need to do is we need
to find the Psy whatever the crap that
thing is called and you need to go to
this URL right here which is a edu site
that actually it's psy Co PG all right
so there it is
and I'm using Python 3 5 so you would
actually want but there without whether
using the 32-bit version or the 64 I'm
actually using the 32 so you can see
I've already downloaded it what I'm
going to do is copy this wheel file and
then we need to put it into the name of
our file so flask movie go to the
virtual environment
go to Lib site packages and then we're
going to paste it inside of there
and now I want to CD into that drive so
going to cite packages and now I should
just be able to say pip install and then
the long name that is co PG 2 - 2.6 16.1
CP 35 nun win32 dot w HL 4-wheel in case
you've never used a pip wheel file wheel
is just the alternate version and how
these packages are contained but you can
still use pip to install them so you
just need to go wherever you have the
wheel file located in your directory and
run that alright so let's go back and
try to do that again so DB
create all all right so that's cool so
that should work and let's go into our
PG admin here and take a look at our
flask movie database go into schemas go
into public go under tables you can see
before we had 0 now we have this new
user table that we just defined and if
we go in there you can see that has C
there's three columns so we have ID
username and email those are the three
columns that we just created right there
if I wanted to add I could go ahead and
just say like insert I could do that
here but we're actually not going to do
that right now in this video so this
video was simply just how we get our
database flask sequel alchemy setup with
uh with with Python 35 flask and
everything else we're doing in this
tutorial alright guys thanks for
watching bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>