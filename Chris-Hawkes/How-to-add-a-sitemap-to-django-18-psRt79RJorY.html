<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to add a sitemap to django 1.8 | Coder Coacher - Coaching Coders</title><meta content="How to add a sitemap to django 1.8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to add a sitemap to django 1.8</b></h2><h5 class="post__date">2015-09-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/psRt79RJorY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up welcome to this video
thanks for watching thanks for all my
subscribers and now what I want to do is
I want to have a site map to this new
music site I'm trying to read and kind
of do it I bounced around so many
different issues and finally just making
a blog out of it don't even care just
just gonna be a blog that's it but I do
need to add a sitemap to it and it's
been a long time since I've done this so
I'm gonna be kind of stepping through
this um I've done this before in
previous versions of Django and I think
things have changed a bit so if I'm
looking at the installation the first
thing I do is you got to add the Django
contribs I'm apps to your installed app
so that's what I'm gonna do that first
and just see if I run into any sort of
issues and it looks like it's not there
by default so if I go ahead and just add
that here into my installed apps and I'm
gonna go ahead and just upload this to
my server try to run the Python managed
not pi and then sync DB I'm just so it
will acknowledge the Django can't rip
sitemaps at that point as an installed
app and it'll throw any sort of error
message if something else needs to be
done but back in the day with earlier
versions of Django I believe that was
all that I needed to do at least for
installing it alright so I have on my
Linux shell and this can be the same
with your Windows or Mac whatever you're
using but I'm gonna run the Python
manage py and then sync TB okay so you
see it added sitemaps here so there's no
problem it doesn't look like
this is a removing sink to be in 1.9
that'll be interesting so anyway I just
want to see if it would throw an error
message after I did that but it doesn't
so that's good alright so now we need to
go over to our URLs for the main app of
your application and we're gonna have to
add this sitemap so this is on the
Django site but I'll make sure I put
this and I'm gonna make a note here to
put it in the comments of this video
okay and then we also need to import at
the top the using statement or the
import statement just so you guys can
see this a little bit better you can
pause the video and just copy these two
lines if you want make sure you have the
import up here at the top
all right so now we need to go ahead and
go over to the views of our main
application and we're going to want to
do an import statement at the top of
that so from genuine trip site Maps
import site map and we're going to put
that at the top and you zoom in on that
so we're adding that and then down at
the bottom we're gonna go ahead and
actually create the site map and in my
particular object I have a post object
I'm trying to create the site map for so
every time I add a new post object which
is essentially a blog I want that to
update so change shrink would see I
don't know if I'm gonna say never you
see
I'll leave that the way it is right now
so anything so there's gonna be post out
objects that filter actually no this
isn't let me see
so this is the example from Django I'm
gonna go ahead and just get rid of all
that stuff so we're gonna go ahead and
add the change frequency in fact I
didn't even need to really get rid of
all that I'll do change frequency I'll
just add two daily priority I'm gonna
give it a top priority so one point oh
now we need to do in the last mod and
the last mod I could just do like
daytime daytime dot now if I wanted to
so as far as I'm into this example of
publication date it definitely needs to
have some sort of like you need to have
a date on your your blog model so it
looks like I already have a date which
is good we want to go ahead and
reference that date of your actual
object and make sure that like for your
items here that you're actually I'm just
gonna say objects dot all so I don't
want to have any sort of filtering going
on so this is for like basically any new
post that I add to the site is going to
automatically be added to the list and
then if you look at the last
modification it's gonna be able to look
at just a date so when that that object
was added all right now let's go back
over to the URLs file and what we want
to do is we want to import that segment
that we just created in our views so
we're gonna say from views import I
believe it's um post sitemap or
something that we called it
I don't remember damn it yeah post
sitemap alright so we import that and
then now we need to go ahead and define
our actual sitemaps that's reference
right here so we're going to say
sitemaps is a new Python dictionary so
equals and now we're gonna go ahead and
just give it any sort of arbitrary name
it doesn't matter but to combine
sitemaps into one like you might have a
post sitemap a blog site map payment
sitemap whatever may be you can actually
create you can add though each one of
those like post sitemap blog site map to
this dictionary to create one you know
massive sitemap so that's why this name
is arbitrary so this can be whatever so
we'll just call this post and then the
value is going to be the imported value
which is a post sitemap
all right so now in order for this thing
to work you need to go over to the
models file and whatever sort of blog
type or whatever sort of module that
you're trying to add a site map to like
you can see in this class file I don't
have any way of getting absolute URL so
that's actually a method that you add to
your models class and Python or in
Django I'm sorry and this is a little
bit confusing but you just have to
follow along here it says get absolute
URL and then you pass in itself and then
you're saying return and this is the
actual path to where the item can be
found and there's a percent you know I
percent self dot PK for a primary key I
said that should be added to your model
file and you also want to put another
forward slash on the end after the I
there all right so that looks good all
right so the reason why that get
absolute URL is beneficial is because um
I believe but if you click on the actual
blog and you it'll give you the option
of view on the site so that way it'll
know to query you know the right URL in
order to you know get the object blah
blah blah so the site map also depends
on that in order to build it so the
beauty of the way I just implemented
this and if you do the same thing on
your website this is just a simple model
of title image tags blah blah blah just
simple you know blog type model but
every time I add one now my site map is
gonna you know be updated dynamically
without me having to regenerate a site
map submit it to Google and all the
other crap I can just have a site map
available now so if we go over to where
we said the site map would be it would
be after the new musicom and then or
whatever your site domain is and just
sitemap XML so we type that in you can
see that the three things that are
showing up which are the three most
important thing since this is just a
blog and the entire site content is
based on those you know those post
articles you can see that they're all
showing up so it shows the location URL
where
we reached the last modification which
is actually the date that it was added
to the site which is really good and
then the change frequency
I put daily you may want but never you
know daily is probably a good idea if
you are going to be adding to it or if
you have commenting on your site if
you're gonna add like Facebook comment
or discuss not a hundred percent sure
that Google actually indexes those
things but I'm pretty sure that they do
at least would discuss so that's usually
the reason why I put that it gets
updated daily even though it may not do
that I want the search engine to visit
me as often as possible alright guys so
that is how you add a sitemap to Jango
1.8 and it's pretty similar from what I
can tell to other Jango versions as well
dating all the way back to like 1.4 from
what I can see here so anyway guys
thanks for watching please subscribe and
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>