<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learning Python Requests In ONE VIDEO | Coder Coacher - Coaching Coders</title><meta content="Learning Python Requests In ONE VIDEO - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Learning Python Requests In ONE VIDEO</b></h2><h5 class="post__date">2016-07-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KnBntO0wayk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's up so this is going to
be a new format if you've ever watched
YouTube tutorials before if you've ever
or if you've ever watched my tutorials
in the past this isn't really a tutorial
in fact one of the things that bothers
me about tutorials is that as a content
creator I don't and somebody that
actually taught myself how to program
and now I'm a professional programmer I
never really use YouTube tutorials for
the most part they were too - all over
the place basically you had a large
combination or a large variant of people
that had no idea what they were talking
about compared to like you know some of
the ones that didn't know what they were
talking about and in their curriculum
you know either copied off of each other
or just you just didn't really seem to
follow down a you know a real efficient
path for me to be able to adopt it you
know so if you want to do more than
scrape the surface with a framework you
need to dig in and dig in deep and start
messing around with it you need to break
stuff because that's going to be the way
that you're going to learn how to code
so in this new series I'm I just aim to
you know go in and learn a Python well
in this case we're going to be learning
Python requests but this is just one
programmers point of view I'm not the
best programmer in the world I'm a
senior c-sharp programmer so I do a lot
of c-sharp and JavaScript Python has
always been a hobby of mine so there's
going to be ways that I write my Python
code that maybe not be like the you know
that pythonic way however this is just
going to be a series where I go through
and try to learn a library for the first
time so that being said I'm not going to
break this up into a bunch of different
tutorial videos is going to be just one
long video one of the things I also
don't like about YouTube tutorials or
even really good tutorial sites like
Pluralsight is that they do break it up
into so many different friggin modules
now in some ways it's good because you
can jump around and things like that but
in some ways it's like dude just get to
that effing point you know let's get
into some code and start figuring stuff
out
let's break stuff let's not make it all
scripted and imperfect and everything so
I you know this is going to be like I
said there's gonna be a different type
of of tutorial so all that said first
things first you need to have Python
installed on your machine so when you
pull up a command prompt by going into
window
typing CMD or whatever sort of operating
system you're using just pull it up pull
the shell and type Python if you don't
have it installed you need to install it
if you want if you want to watch videos
on how to install it like with me Python
how to install Python I have one video
on here that is relatively popular on
how to install Python and get it all set
up here if you follow the python 3.5
tutorial that will show you everything
you need to do so you can just type
google there Chris Hawkes how to install
Python and that will show you how to do
it but hopefully you guys cannot figure
that out it's just an easy installer if
you're on Windows but by typing Python
you it will pull up the shell so we can
actually run a Python statement by
saying hello world and you get Python
there so let's go ahead and close that
next thing we need to do is when you go
in our projects directory so you don't
have to do it this way but you want to
have some way of storing your code so
I'm going to have my Python request
folder in fact I'm going to call it the
full learning Python request so if we go
inside here I want to do a little
shortcut in Windows by typing CMD and
that's going to open up a command prompt
for this new folder that I just created
called learning Python requests which is
in my projects directory and here I'm
going to do I'm going to run the virtual
env command so this is going to create
an isolated environment so any sort of
Python work that you do you want to get
into a habit of making sure that your
environment is isolated and it's it's
relatively easy to do but very confusing
if you've never done it before but just
type this in these are hyphens and make
sure there's two hyphens here what we're
going is we're saying virtual
environment which comes with your Python
installation if you're using Python 3.5
we're saying e and V which is the name
of the virtual environment that we're
creating but this could be anything you
want it could be called you know boobies
or your mom or it could be called
anything you want it to be called but I
just call it env short for environment
and then this no site package is flag
that tells it hey if there is a module
that is part of your global Python
installation directory don't share that
module
just reinstall it for this environment
so basically you don't ever want any
sort of sharing going on so that's why I
do that
so this is going to go out it's going to
actually install pip which is the
package manager so in order for us to
install Python requests we're going to
use pip and you're going to see here
that it's installing pip right there but
once the environment is set up we
actually need to activate the
environment so that's what we're going
to do once this is finished so if we go
and do a door on the directory you can
see that there's now an env folder let's
go ahead and CD into it and look at the
contents there's a scripts folder we
want to CD into the scripts folder and
if we look in there we can just simply
type activate now if you notice on the
left hand side and parentheses it says E
and V so that means that we actually
have the virtual environment activated
so if we run pip install now and we
install requests you're going to see
that it's not going to install it
globally you know for all Python
projects you have it's going to install
it just for this one particular project
so if we wanted to see where it installs
to we can go into Lib go into site
packages and then you can see request is
now in the directory inside of there
next thing we want to do is we want an
editor in order to be able to write code
there's a few editors you can choose and
once again I don't want to be all
opinionated about saying that you need
to use this or that but I'm going to use
visual studio because Visual Studio has
a lot of cool stuff here's Adam Adam has
support for Python but it's a simple
text editor it's not something that
allows you to create and run projects
easily I use visual studio because
Visual Studio is a great editor has a
lot of tools for you but there they keep
getting better when it comes to like
Python tools for visual studio this is a
pretty good project so you can see you
can actually step through your Python
code you'll be able to see even like
performance stats and stuff like that so
it's going to be rather daunting if
you're first getting started but Visual
Studio is definitely an editor that you
would want to learn because a lot of
corporate jobs in case you ever get a
corporate gig you're going to be using
something like Visual Studio or Eclipse
and visual studio
is much better than eclipses in my
opinion so that said I want to go ahead
and open up visual studio if you haven't
installed and I'm going to say new
project and under here because I have
Python tools installed I can click on
Python I'm going to say from existing
code I want to give it a directory where
I'm currently located so we put it in
Python what we call it python request
write our learning Python request we say
learning or using what the did I
call it oh here it is alright there it
is alright so I'm going to say select
that folder and we'll just call this in
fact I'll name the Python project the
same thing with no spaces learning
Python requests we click OK now inside
here you can just say next and then this
says global default or detect an auto
virtual environment in fact I just want
it to detect because it should find it
so when we say detect virtual
environment that should be fine
so now in Visual Studio on the right
hand side you're going to see the CETA
solution Explorer and it's going to be
kind of small font unfortunately for
these project directories but you can
see that it did find our environment env
and you can see if we open up env you
can see requests request is inside of
there it's the only module that we
installed in this Python virtual
environment one of the things you're
going to want to do is click on this
button called show all files because in
the env folder this is actually where we
can go into live and go into site
packages and then into Python requests
and I can actually go into Python budget
impress and if I right click it I could
say including project and this is going
to take just a few minutes will actually
took a second there but now this is all
the source code the Python request so I
can pull it up inside my editor and I
can even place breakpoints and stuff
like that which is pretty sweet so all
that being said let's go ahead and
minimize some of this stuff and we're
going to go over here we're going to
right click on the actual project file
so learning Python requests and we'll
say add new item and this is a empty
Python module we'll just call this start
dot py so in here let's go ahead and say
import requests okay now let's just say
variable test equals request git and
then we're just going to say get the
website hipster code comm and if I say
print test you know I'm actually not
even once again that's me being non you
know not a typical Python programmer bar
is something I would use in either
c-sharp or JavaScript I'm sorry that's
the kind of stuff that happens when
you're writing multiple languages at one
time especially when python just a hobby
of mine so anyway we're going to say
test we create a variable and it says
request I get so this is actually going
to return the status code I believe but
the good thing about Visual Studio I'll
make this a little bit bigger a good
thing about visual studios I can just
click start and it's going to run
but this says hey your project needs a
Python script marked as startup so what
it means is go over to solution Explorer
if you want to pin this open you can say
you can click this little pinhead thing
and it will stay open for you but I want
to click on this start dot py right
click and say start or set as startup
file so now put this Visual Studio knows
which file to start executing because if
you're doing Python Python doesn't need
like a main or anything like you would
need with c-sharp or Java or something
like that
but here I click start and you can see
it's running the Python emulator there
and you can see a print so that's
actually very friggin small let me see
if I can make it bigger all right that's
a little bit better but you can see it
prints the response code which is 200 so
if you guys have ever used HTTP you know
that HTTP has built-in codes that mean
all kinds of different things so let me
see if I can do a quick google search on
that some of the common ones that you
guys probably know about is like 404
like page not found stuff but here's all
the different successful responses 200
201 here's like a redirect which is a
301 you got the 404 page not found but
if you want to go over this
documentation you can see that there's
tons of different response codes but 500
means something got screwed up you have
an internal server error so there's all
kinds of different stuff so this thing
says hey we requested hipster code comm
we assign the value to test now what is
test let's go ahead and see what what
test is so when we say type test let's
go ahead and print that and we see ok
it's a class and it's a class called
request models dot response so let's see
in our env when we say let's go ahead
and open up python repress and it says
models here's the models file and then
what else did it say ok if I pull this
up it says models dot response so we
know that if we look inside here for
response I'm going to say ctrl F
and do a response and that's not it
here's the response object so here's the
class this is the class type that God
created for us so here's all the I knit
code so we know that this has all kinds
of stuff like here's a function an
internal function called get state so
let's call this get state on the object
and see what happens so if I say we'll
remove the type and let's just say test
dot get state and this needs to be a dot
let's just see what happens if we print
this and this is the kind of stuff that
I'm talking about this isn't a scripted
tutorial this is me monkeying around
with stuff but you can see bound method
response that gets state of response 200
I don't really know what that means but
we're stepping into actual source code
so let's go back to our models file and
keep this open I want to put a
breakpoint right here I want to see if
we can hit the breakpoint so let's go
ahead and click the little stop button
and we're going to run this again and
click Play the Python emulator does not
hit the breakpoint that's success okay
so I was hoping that I was hoping that
this would hit but apparently it's not
going to let's see if we can call
so here is this text right so if we
wanted to actually get the HTML source
and I know this from monkeying around
with a Python request in the past but if
I wanted to say if you know print out
all the HTML source code and everything
I could just simply say print test text
now this we're running into an encoding
error so you can see it says charm app
codec cant encode character you f e FF
in position 0 character maps to
undefined so for some reason this is
giving us an encoding error now if I
looked at the documentation for Python
requests it says that it should encoded
in utf-8 by default but apparently
that's not working very well so if I
explicitly say encode it to utf-8 I can
somehow get around this problem I know
this from the past but it's kind of a
weird issue but here this is going to
now print all the HTML source code for
the web page hipster code comm so if I
wanted to a more applicable thing
instead of printing you could simply say
like out out file equals projects what
we call is learning Python press let's
say test up ext so here's our out file
we could say open
you know what we're not going to do
we're going to say out file equals open
and then we'll pass in this value and
we'll give it the second argument of w-4
right I haven't done this in a while
and let's say out file dot right we're
going to write out this drunk alright so
what we're going to try to do is as long
as this path is okay this should build a
test txt file and put it into our
projects root directory
so it says must be a string and that
bytes okay all right so we can just
making what's called convert or cast
this to a string so by saying STR and
then wrapping in parentheses we can tell
it to just cast this and do basically
ignore open just write the goddamn file
you know what I mean that's all I needed
to do
so let's look up the folder now and
here's test.txt so we wrote to an out
file so you can see here we got all this
this source code here's those weird
characters that apparently are showing
up in that HTML file for some reason or
another but now if you look at the the
formatting here it looks all jacked up
so a better well we should probably
encode it a little bit better so let's
go ahead and go back to our visual
studio here and I'm going to say instead
of explicitly staying in code what I can
do is I can actually change out file by
saying out file dot encoding equals is
o88
blah blah blah and let's go ahead and
try to write this now in fact not out
file but I'm just going to be test out
encoding I'm sorry just test is the name
of our variable our class object for
python requests so we're changing the
encoding using built-in abilities of
python requests in order to to change
the coding to this ISO which don't even
ask me what that means I don't even
really know it's just a standard let's
go ahead and
press play so now if we go ahead and we
check out tests Oh much prettier you can
see it's much prettier and this is all
just the source code to the H hipster
code comm website so obviously say you
had a list of URLs where you need to get
all the source code you could have a
Python list so my list
oh no let's do it the Python way my list
of links Python likes to use new
underscores for variable names and then
here could just be a set of strings
where we have a bunch of different URLs
so let's so go hipster code hipster code
will be the first one the second one
let's go ahead and just do hipster code
that about and you guys get the point we
don't need to do more than three but you
could have a list here so instead of
saying test we could say four let's just
say four tests in my list of links
my editor should try to find that for me
but it's not apparently
you know we'll just say four linked in
my list of links that way we can go in
here and say get link and we'll go out
file and now let's be a little bit
smarter about our test file we'll say
plus link plus now one of the things
though is it's not going to be a valid
file name so we can't name it link
actually let's go ahead and do we'll
just call this a test
yeah that's fine we'll just we'll just
do this for a pardon let's just let's
just mess with this real quick let's go
ahead and press play one of the things
that's good is that I can set a
breakpoint inside here and if we go
ahead and we start this will actually
hit the breakpoint now since we're
inside the code and if I go ahead and I
hover over test or I can hover over link
and you can see link is it's processing
the first one which is no way that's not
even right okay I'm not sure what oh you
know what because I didn't put a comma
that's stupid of me your list items need
to have a comma there so see I was
missing a comma so link couldn't like
made both of them all one string okay
that's funny that it actually didn't
throw an error message that's Python for
you man not even throwing the error
there all right so now we're processing
the first link in my list of links so
here we go so test is get and here's the
response if we look at we can look at
the response type and you can actually
go down here to text you can see all the
content down there so now we're going to
open up the out file and now this is
what we're going to throw the error
message because here you can see that
there's all these special characters
that you can't have included inside of
inside of here so one of the cleaner
ways that we can do something like this
because obviously we can't have a link
be a part of a file name because it
includes all these characters you can't
have in a file name so we'd want to use
something like the enumerate function
and Python which allows us to be able to
get an index number so I could say for
index link and my list of links but I'm
going to say enumerate and then put my
list of links inside the parentheses and
then by doing this here I can go instead
of saying link I'm going to say index
index but since index is an integer
because this will send back the actual
you know value like the integer value so
this will be 0 and this will be 1
of where this position resides in the
list so that's not going to be you can't
add a string and an integer without
actually converting the integer to a
string so let me show you what I'm
talking about so if we press play here I
can say for index C this is a zero and
then here's the link and now if I go
ahead it will open up the out file it'll
do the encoding it will write it now
we're in the second item of our list and
now our list is finished so the program
is finished and if we look at our file
we now have test zero and you can see
this is the homepage hipster code at
home and then here is our second page
and you can see hipster code about so
those are two separate pages that we
requested and ideally like maybe you go
and you start parsing the web and get
you know a millions of links like Google
I mean they're going through millions of
links and following links and stuff like
that you can do the same type of thing
with Python requests because I'm not
doing anything special I basically say
here's a list of URLs and go ahead and
parse them now what I could also do is
if you looked at the source code I
deleted the file but if you go in there
you could actually start parsing all of
the you know to get the contents of the
actual page using something like
beautifulsoup in order to parse out like
all the links to it to a page or
something like that so it's let's start
looking at a few other things here so in
our list instead of us writing to an out
file we've already seen how we would do
something like that let's go ahead and
get rid of all this out file stuff and
within our test we're going to just say
print test on my editor keeps doing that
if it does that you don't want to do it
you have to press escape and we're going
to look at the we'll look at let's see
let's see let's look at I guess headers
first so let's take a look at the
headers for
test and just see what kind of headers
we have if anything so here's the first
type you can see the content or the
headers that are sent to hipster code
when we're talking about making this
request across the web you so you can
see there's content lengths and then
there's cookies except coding you can
see the kind of server that is sitting
alive on on hipster code comm which is
nginx it's actually a reverse proxy
server there but that's not important so
those are the headers let's see if
there's any cookies here so we could say
cookies and if we do this watch what's
going to happen we're going to actually
get cookie objects return back to us so
this cookie jar so it's like well how do
we like how do we get those values so we
could say get I think it's called dict
or something like that and that's short
for dictionary I don't remember this
might not be right okay that is right so
you can see that there are no cookies
being retrieved from our Python requests
of you know going to hipster cocom now
let's instead of this let's go ahead on
the third one let's go to Google so
we'll say HTTP
www-what air cookies how you would
retrieve cookies from any sort of
request that you make sometimes you have
to actually get data from a cookie in
order to include it with a post or
something like that if you're going to
be requesting certain data so that's why
both headers and cookies are important
all right the next example I want to
show you is if we go to google.com and
we just starts here on the type test you
can see the query string is this Q
equals test so if I went ahead and I
said you know what okay that's the URL
and we'll replace this right here let's
get rid of these other two links so here
is this this test and what I'm going to
worry about this right now but
what I want to do is just do we'll just
say that for right now so Python request
has the ability inside the get where
we're going to get right here I could
say you know what I want to go ahead and
say payload equals and this is going to
be a dictionary so dictionaries are key
value pairs and we'll just say our first
key what what is the value here so it's
Q so we'll say the first key is Q
instead of equal we're going to say its
value is test so here is our our payload
right there and then would they get we
could do second argument we could say
params equal payload now let's see if we
we get any sort of value back instead of
test I'm going to test that test we
might need to turn that to a string but
we'll try it should be a string by
default actually so here we go so this
thing printed a bunch of a bunch of
stuff
so basically all this stuff is part of
what we search for in Google and this is
typical of Google so there's a lot of
stuff in there that you have to look for
now if I wanted to with test I want to
say test dot URL so we can actually
print the URL just to see how those
query string parameters got appended
make sure those look right so you can
see it by default the query string in
Google is using a pound sign but it
should also invite and typically when
you do a query string it's always a
question mark with a key value like Q
equals test and if we did another one
like if we added another argument here
so we'll just say test
equals testing you know they are
separated each each query item is
separated by an end symbol which is the
typical way that HTTP requests are done
so here's the and symbol so question
mark says hey the start of the query
string first query second query now
Google probably doesn't understand the
second query because that's not
something that they have built in so we
want to just keep it to to the cube well
let's go ahead and print yeah so if we
print that URL you can take a look and
see that the query string is is working
just fine as you normally would expect
it to well let's go ahead and pull up
Google real quick and change this out
with the question mark so it matches our
query string and you can see that Google
doesn't know how to respond to that so
that's kind of a problem and that's a
problem that requests I'm not sure has a
solution too so the harder way of doing
something like this would be to simply
say you know what we're not going to do
params and because Google wants to be
special and different we would now need
to say you know what listed links and
we'll say plus now we can say pound sign
and just say
q equals test so let's see if if the URL
works some would print the URL okay so
this cannot concatenate string to a list
okay so we need to explicitly when you
explicitly say hey you're not a list
item you're string
oh you know what I see okay mother I my
bad my bad I'm not even doing this in
the race why why don't you guys tell me
that that was stupid of me
all right so what I was talking about is
I'm trying to do it here you guys were
like what the hell are you doing all
right so here is where we would say Q
equals test you know what let's just
start like that no I probably only need
that actually let's do it all right now
let's try it
all right so now the URL is right so the
question I mean is do we get any sort of
different text and really you'd have to
go and compare what we got before to
what we're getting now in order to see
what's going on there but I mean
obviously I don't remember what was
there before it looks like we got quite
a bit more content going about it this
way but who knows all that stuff is all
jumbled together into a big mess in most
cases you're not really going to be you
know searching Google using something
like this because number one they don't
even allow it number two you should be
using an API so Google has like a search
API that allow you to use them and they
give you a lot of free resources like I
mean like 50,000 requests a day or
something like that before they even try
to charge you any money
so most small-time website owners you
know they wouldn't have to pay anything
in order to tap into Google but you have
to get like a approved by them so they
can give you a client key and a secret
key and that way you can pass those
values up every time you make a request
but by using an API with with something
like with something like Python requests
you're going to be so much better off
than trying to do web processing the old
way because back in the old days like
with Perl and stuff like that we used to
always grab source code and then save it
as a text file and stuff like that and
then we go through the text file and
look for links using regular expressions
and all this other garbage to try to
find all the anchors and then we you
know put all those anchors into another
Python list and iterate through the list
like I showed you how to do requesting
more pages and grabbing all their links
and adding it to the list you know I
mean so you can create this endless you
know monster of a search engine looking
for data and that's something that the
Python request is definitely built to do
so that's really going to be where where
we touch base on this I mean or where we
stopped on this this tutorial series
there's quite a bit more you can do in
Python requests but I think I'd be
getting into more advanced level stuff
and hopefully you guys like this format
like
said none of this was scripted or
anything like that this is all just
going off the cuff and making mistakes
and trying to spot those mistakes and
things like that so you can see there
you know a lot of this stuff is just
basically okay here's a get we know
about other gets and then our da Jason
it turns it to actual Jason data so if
you guys know a Jason data is it's
JavaScript object notation you can read
things like you know four so you can use
chunks so if you have like a large image
or something like that you can break it
up into chunks you can do custom headers
so if you want to disappoint you to
disguise your user agent you can do that
you can't hide your IP address or
anything like that but you can change
your user agent so if you're using
Chrome you can say hey I'm using Mozilla
even though you're really not even using
a browser because you're using Python
explicitly to reach across the web so
and then you know with the payload data
like we saw Google has the weird query
string that has a pound symbol worm in
most cases you're going to see the
question mark so if you want to use the
payload data that that's fine there so
we've really really touched on all this
stuff and then as far as posts are
concerned you know when you post data
versus get data you guys should know the
difference between that hopefully but
typically whenever you're making a
request for something you're going to
use it get and whenever you want to
change data on the server somewhere
you're going to use a post and other
than that guys I mean that's about it
this is a relatively small library but
it's a it's a powerful library it's
better than the old libraries like we
have a URL Lib and everything so you can
see there's a lot of stores on github so
it's pretty popular anyway guys take
care please subscribe to this channel if
you want more tutorials like this and
and thanks for watching have a good day
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>