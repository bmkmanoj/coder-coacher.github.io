<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django 1.9 Tutorial - 4. Creating Our First App In Django 1.9 | Coder Coacher - Coaching Coders</title><meta content="Django 1.9 Tutorial - 4. Creating Our First App In Django 1.9 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Chris-Hawkes/">Chris Hawkes</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django 1.9 Tutorial - 4. Creating Our First App In Django 1.9</b></h2><h5 class="post__date">2015-12-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6uSDGFQO81M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what up welcome back so in the
last video what we did is we went ahead
and we created our database using post
rests and we did all the authentication
so we set up our user and we looked at
the admin so now we're gonna go ahead
and create our first app and I've
mentioned before in the previous videos
that Django is all about modularity so
it's all about building individual
little puzzle pieces that all form
together to make one particular image so
you can think of you know the puzzle the
overall finished project when you start
a puzzle and when you finish it the that
is the application itself and the little
individual pieces are all the little
components that can compose the you know
the overall project so we're gonna go
ahead and create that first puzzle piece
now and in the Django community that's
called the app so let's go ahead and we
need to go to our command line so that
we can access the manage py file that
we've used so many times already which
is right here and we're going to use
that say python manage that py and then
start app and then the name of our app
now it's always a good idea to have some
sort of idea on what you're actually
building before you start building your
website I already have a basic idea on
what I'm trying to do I've mentioned
before that I've owned this new movies
site and I don't really feel like just
getting rid of the domain since I've
already had it for you know years and
years and I already paid for and
everything and I just decided you know
I'm not gonna talk about Hollywood
movies or anything and I haven't been
for like a year I mean this thing just
goes completely on unedited in things so
it's just a mess but I'm gonna be saying
goodbye to it and unfortunately and I'm
gonna be transitioning it over into a
video kind of a video website that kind
of showcases the YouTube videos that I
create and maybe what other people
create so I haven't really decided on
that but essentially I want to display
it and the typical blog information type
format but instead of like really
written articles I might write stuff but
at the moment I'm just going to simply
kind of link to YouTube videos so that
being said we're gonna be creating a
video app and the video app is going to
be responsible for collecting data for
end
YouTube videos so what we're looking at
then since um you know this is YouTube
that my videos are being uploaded to
YouTube obviously has some you know
similar data points that we're all
familiar with so it has the video title
right so I probably want to store a
title and what we're gonna do is just
kind of create a list real quick of the
things that we want to store so I'm
gonna store a title probably an upload
date we'll probably have the date you
know we'll just have upload date that's
fine I was thinking about whether or not
I should have another date that kind of
like the date that I added to the
database and then an update that I
actually added it to YouTube but I don't
really think I need that separation at
this point we'll have a description so
description on what the video is about
maybe some tags so we can tag the video
like Python or other some other
descriptive type of things so like if
somebody's searching for all Python
related videos I can say hey you know
find all tags that contain Python and
so then one of those important things we
need the video ID and we'll want to use
any sort of multiple words you want to
use an underscore to separate each word
but a video ID is certainly important
and that's this YouTube video right here
and we may want a full I was thinking
maybe I want a full URL because what if
I start uploading videos to other
platforms besides YouTube it's kind of
you know short-sighted to say hey my
entire infrastructure is gonna be on
YouTube and it's always gonna be that
way and you know YouTube could pull the
plug on me and maybe I decided I want to
put my videos somewhere else you never
know so I was thinking you know maybe
you know instead of video ID
I might need a full URL that goes to
some other video site but for right now
it doesn't really matter we're just
gonna go with a video ID we don't need
the full URL so that's probably overkill
so I think we have a good little you
know base starting point on what our app
is gonna be consisting of so now that
we've done that let's go over here we're
gonna say start app and we're actually
going to call this a video because
ultimately that's what what it is so
this is going to use the built-in Django
feature to build an app so if we look at
our data base or I'm sorry our actual
file system where our project is located
you'll be able to see that we have this
new video folder here and the video
folder has this migrations folder the
ein it which is necessary because this
app is considered a Python module so in
order for it to be imported you have to
have that inet file there there's an
admin file we'll be getting into the
admin more late later you have an app's
folder or file which is actually new to
something in Django 1.9 I'm not even too
familiar with that models and then tests
for being able to test it and then you
have reviews and we'll get into all that
stuff a little bit later but definitely
make sure you don't delete the
migrations if we decide that we want to
change our data structure and we say you
know I don't want the video idea I want
to do a video URL or
want to add a video URL and have the
video ID what what needs to happen is
when you add that field to the database
any data that's already stored where
that field is not there your database
can become corrupt so you have to do
something called a database migration
prior versions of Django up until like
the last few versions didn't have any
sort of way of doing migrations so you
had to use this plugin that was really
popular called
Django South or Python South but it was
called South something or another and it
worked really well but sometimes it
didn't work and you had no idea why and
when it didn't work you were pretty much
screwed so luckily in the newer versions
of Django they do have database
migration support built into it which is
an awesome feature alright so let's look
at the the contents of what's in here so
if i refresh this I should see and
actually don't see
all right so here's the video I need to
include that in my project here so this
app stop py file is something new in
Django 1.9 and essentially it's for
being able to configure certain features
at this particular app so the video app
needs at runtime you can configure
certain elements here but for the most
part we're probably not going to be
messing with that too much all right so
the next thing we're gonna look at is
the model spy on this is where things
need a little bit more interesting
because we're gonna start using that
list that we have just comprised of what
the video needs to store for each video
that I plan on adding to the database so
what your models file is used for is
it's actually used to build a schema in
your database and it builds and Django
does this for you automatically using
something called the object relational
matte mapper and that's you typically
hear of that as a norm so ORM and Django
there's a lot of the hard heavy lifting
sequel work for you so you don't have to
be a DBA or you know database expert to
be able to use it all you have to do is
just define in a Python specific way a
Django specific way which is just Python
how to structure your database and
create those columns that you need you
know as far as like how you plan on
storing that data is it going to be a
date/time field is it going to be an
integer is there going to be text field
character field you know something
something like that and you can think of
that as a schema is just like with the
users right so you have this users and
this is just a database table the
server's not running right now I
apologize but if you go into your
database table you can see each one of
these tables here this is all your
schema and in case you guys want to
spell that
chem-20 alright so now that we know what
that is let's go ahead and build that
models file so first I'm gonna go ahead
and just copy this from the Jenga
website which just I don't misspell
anything and we're gonna create our
class person it's actually gonna be
class video so you typically want it to
be the name of whatever sort of model
that you created and this is from their
their website your son wanna mess it up
so here's our first name we're gonna
have instead of the first thing we're
gonna have title because remember we we
created a list here so the first one is
going to be title we want the max length
probably I'll say 200 characters I mean
just in case it's a really long title if
it's longer than that I'll just have to
truncate it truncate means just chopping
it off alright so now we have this
models if there's a character field
there's also a text field so if you're
gonna be storing large amounts of data
you should probably put that into a text
field and you probably should give it
some sort of max length but I'm gonna
give this a large max length because I
don't want to exceed that I'm thinking
that I probably won't have more than
5,000 words in a description but that
could end up being larger than that I'm
not really sure but we're gonna call
this description we have upload date so
let's go ahead and just copy this real
quick
you will get rid of that now there
should be some sort of date/time field
all right there's date/time field and we
probably want to have a default value
for this one of the helpful things with
the the daytime filled with Django is
that we can actually import from the
utilities we can import timezone to set
a default value and then in order to be
able to set a default value inside the
parentheses we're just going to go ahead
and add default equals timezone now so
we're using this and this is based on
your settings file we set our timezone
when I went so here's our America
Chicago I'm actually gonna change this
to New York since I'm on the East Coast
in Virginia in the United States and
this will actually Django will use the
timezone for this particular area and
set the actual date time field by doing
that so that way we don't have to
manually update that every time we want
to add a new video to the database that
will automatically be updated so now we
need to add the video ID which is going
to be similar to the titles so we're
gonna go ahead and paste that down here
we'll call this video ID and then the
max length it's not gonna be nearly as
big so let us say 50 which is probably
way more than we need but you know for
right now that should be fine so now
we're gonna do the tags is just a string
so we'll just have like a comma
delimited set of strings that we'll use
for the tags seems kind of ugly it seems
like maybe there should be some sort of
tagging sort of library that we should
be using but for right now we're not
gonna do that we're just gonna go ahead
and copy this title up here and I'm
hoping that there's not going to be more
than 200 characters of tags we could end
up running out of room depending on how
how many tags we want to add but I'll
just have the tags be this in this
character field so it looks like we have
a pretty good set up here with our video
now in order to get this
schema into the database we need to go
to our little command-line tool and
we're gonna run a Python managed dot py
and then we'll say make migrations and
this should automatically go out and
detect actually before we do that I
apologize we need to add in the app to
our project and we do that through the
settings file anytime you create an app
you have to tell your project you want
to use this new app or puzzle piece you
know what I mean so you're telling your
your main dashboard for your puzzle that
you want to add this new piece to it and
we go down there to our installed apps
and that's what we're actually going to
do that we're gonna do and just a single
quote the name of the app so we called
around video now if we go in and we run
make migrations that should detect video
and then it should look for the models
file for video and you can see that it
created an initial migration for that
which is exactly what we want so now
that the migrations been created we need
to actually migrate the database to use
it so we just simply say migrate and now
this should have gone through and
created an entry into our database for
this new table so let's go ahead and
refresh everything in here and you now
see that we have a video video table and
if we go in here and we look at like the
columns you can see that it has the
columns that we added to it so ID ID is
gonna be created by Django everything in
Django has to have a unique ID so that's
going to automatically create an ID so
every time we add a video it's gonna
sequentially increase it by one so if if
video 2 is already in then the next
one's gonna be 3 and 4 and it'll go into
millions and billions of rows so that
will automatically be done for you so
that's really good
because we'll get into that more as well
and then you can see that it has all the
little fields that we added to it right
so there's nothing in there there's no
entries into the database but that's how
we went ahead and we created it so we're
making good progress here
let's take a look at the admin file
because anytime we want to use our new
app and be able to add data to the you
know that our the model that we just
created if we want to add data to it we
through the admin that that comes with
Django we need to actually update this
admin dot py file to use the new
database table that we just created all
right so now in here what we want to do
is I'm going to borrow this from the
Django side we're gonna say from models
import instead of question we're gonna
say the name of the video you know the
models the video class that we have
defined in our models so that's actually
what we're importing right here and then
we're going to tell the admin site to
register in that video so I'm going to
paste this in here and then replace
question with video and let's go ahead
and run the server because anytime you
make a change to the admin you need to
restart the server
okay and now that we've done that the
videos is gonna show up here so if I go
ahead and click on video there's nothing
in there but we can go ahead and create
our first video right now so I can give
it a title and we'll go off of this
Senses Fail video just right now
this is just a test here but now you can
see the upload date actually defaulted
to today and the current day time so
that was that helpful feature that I've
showed you guys about so that way you
don't actually enter that because most
of the time you just want to do the the
date that you're creating the entry
that's typically the most important
reason and then let's give it a video ID
so we'll paste in that and then we'll go
ahead and just say Senses Fail and i
don't know this is just temporary so
when I click Save you can now see that
we have a video object and if we click
on the video object you can see that it
has all this information in there that
we just added so if I click back to go
back to the original page and then if I
go ahead and I look at the actual
database and refresh this using Postgres
if I click on the video and I look at
the columns and I should be able to see
so if I go out here and I right-click
and I just say view data view top 100
rows you can see that it went ahead and
queried the last hundred rows and
there's only one because we've only
added one but you can see it's census
failed the data that we just added
here's the ID that I was telling you
Jango creates for you automatically and
it just is sequential
and then here's attack so all that it's
really cool we have it all being
persisted in the database that's what
they call anytime you save data it's
called persisting data so if you're new
to programming you want to try to act
like you're more professional by using
these terms that make things more
complicated than they need to be and
then okay so you have the video object
here and that's not very helpful because
if we had two listings in here both are
gonna say video object you're gonna have
no way of being able to differentiate
one from the other without having to
click on it so that's not very helpful
at all so let's go ahead and fix that
now now to fix this this is a little bit
weird but you should just follow along
we need to go to our models file and
inside the class so make sure you're
indented inside the class like you know
just below that we're gonna add a method
to this class and what it's gonna do is
it's actually going to return the name
of and really there's no name so we're
gonna say title so when we say we're
gonna create a method called get
absolute URL and it's going to return
self dot title since there is no name
it's returning this right so every new
video and the listing is going to return
the actual name so we'll get a name like
Senses Fail or whatever that video name
was called so if I went ahead and I
stopped the server and I restarted after
making the change to the model file if I
go back into the Django admin what
you're gonna see now instead of it
saying video object which isn't very
helpful it's going to actually give you
the title because we told it to return
the title for that particular object
entry
and that did not work sorry guys I
actually got that confused what that
actually does well we what we did is it
actually creates a it creates a URL so
that way you can actually go and view on
site for this particular object and it's
not actually discoverable at this point
but that is something that I just got
confused
honestly in order to be able to return
the name and that's what we're trying to
do now is we need to actually define a
Unicode method on top of the of the
class object so let's go ahead and just
like we did here we're gonna go ahead
and say we do need that absolute URL
because like I said that makes the URL
discoverable from the admin but here is
we're gonna say Unicode and I think this
should work so let me go ahead and
restart the server real quick I actually
haven't had to do this in a while so I
apologize I forgot how to do it nobody's
perfect
all right seriously last time my bad all
right what we're gonna do is we actually
need to say under the admin site
register actually not telling it to
display the name and that's the problem
so it's been so long I'm actually
borrowing some code from another part of
my site here we're gonna create an admin
part so we'll just call this video admin
and then we're gonna tell it to actually
display by the title so let's go ahead
and down here we're adding a title so
we're saying list display and then we
give it a tuple and we can give it
multiple values that I could list it by
but we do have a title for our video and
then instead of saying I'm just admin
site registered video we need to
actually say video and then we also say
a video add men all right so if I went
ahead and restarted the server I'm
actually 90% confident it's going to
work now both of those changes to the
model file are necessary it's just I
kind of jumped out of order a little bit
and doing doing those right now because
it's not needed right now in the
tutorial
so now because we're actually saying to
display the title to go ahead and
display the title and what's interesting
though is that that would not have
worked with just the admin change if we
didn't actually add this gate Unicode
method this is absolutely necessary for
for that title to display you know using
this list display so if you would have
done this without that change to the
model it wouldn't work so that's why I
was saying it's kind of a messed up
order I forgot but hopefully you guys
can forgive me I'm just getting myself
acquainted to Django again after being
away for several months and really I
haven't even had to do this probably in
six months or more the get absolute URL
I might as well touch on that now you
can actually provide a URL to where this
could be located so what I would do
instead of self-doubts hide I'll say
self dot ID because typically when I
have like a URL I could say like video
and then forward slash and then this
percent s is Python so you're actually
passing in this argument so this will
just be an integer which is that ID that
like I said Django provides anytime you
do have a database update or you add a
new video to a database table so let me
go ahead and image demonstrate this real
quick so you guys understand both of
these changes and why we needed it
Unicode was for the name showing up in
the admin and then this get absolute URL
is like I said so that the item and the
database can be discoverable by clicking
on you know view on website it's still
not going to work because we need to do
additional work to make it work but I
want to show you what get absolute URL
does so if we said forward slash admin
and we look at the video table and we
click on the video object you're gonna
notice a button over here which we
clicked on before where it said view
site or view on site and before I made
that change to do the integer ID it was
trying to actually point to a URL that
said Senses Fail buried a lie what we
would actually rather have it have it go
to a my domain forward
/ video forward slash and then the ID of
the video because what we're going to do
is we're going to take the ID from the
query string which is the URL so it'll
be 1 or 2 or whatever it is and we'll
say hey find the I the unique ID that
matches this in the video table and that
will always return the data for whatever
you know whatever video is being
requested so we'll get on into that more
as we could go along in the tutorial
series but if I clicked on vo on site
it'll actually reflect that video and
then 1 and like I said it doesn't work
because there's nothing listening for
that but eventually we're gonna create a
piece of code that's gonna listen for
this request and it's gonna say hey give
me the 1 and then it's going to query
the database for the match the match of
1 and pull back the data so let me see
if I go to the video and I view view
data at the top hundred it's gonna say
hey find me that unique ID one that
matches which is right here and it's
gonna provide all this data so that's
why we need that and we'll get into that
more and while I'm here I might as well
touch on in this example comm is coming
from the admin the admin has a sites
location any time it throws an exception
it threw an exception in the system
because we requested some piece of code
that hasn't been written yet so I need
to restart the server but in the admin
here because Django is built so that you
can manage multiple websites through
this site stable the site that it has is
this example.com so we actually want to
remove this and we want to say new
movies comm because that's going to be
the name of the site
and if we went back and we tried to
click on the video you're gonna see
instead of example.com it's actually
gonna try to go to new movies com which
is really gonna go to a real website
which is new movies which is the
Hollywood movie so this isn't gonna work
either but alright guys so that's what
we're gonna end this video here I know
things get a little bit you know hot and
heavy as we get involved here but we
have a completely built app which is
called the videos app we added it to the
ad man we added it to the database it's
able to accept data and another video
we're gonna go ahead and touch on forms
of how we actually input this data into
the website but before we can even get
there we actually have to look at our
templates and all kinds of stuff with
our jangled website so we have a long
way to go here guys but we'll get there
alright thanks for watching bye
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>