<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Interview with James Ward on Scala and Play | Coder Coacher - Coaching Coders</title><meta content="Interview with James Ward on Scala and Play - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Interview with James Ward on Scala and Play</b></h2><h5 class="post__date">2013-11-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UqQ0MXFZEv0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so welcome to night hacking at
devoxx I'm joined with James word hey
everybody this is James from the from
the cold north Tundra apparently it's
freezing in here man I need like three
jackets and we're inside yeah so it
looks like sessions just got out so I
think the body heat will will quickly
warm warm us both up let's hope so
all right so we'll do a little bit of
hacking on play in Scala but before that
why don't you once you talk a little bit
what you're doing at the conference here
and what certain things are happening in
um in Scala lab yeah so great to be back
at devoxx I missed last year but I think
this is like my seventh time here
something pretty awesome
it's a great conference so this year at
devoxx I had a play and Scala hackathon
and well I guess is more like a lab we
told them what to do we didn't let them
do anything so and then we had that it
was three hours everyone I think got the
app working and everything is WebSockets
and all sorts of cool stuff so that was
fun and then yesterday I did an
impromptu akka talk with Josh Tourette
because one of our co-workers got sick
and couldn't do the talk so it's like
hey you're on oh okay was that Yanis or
someone else that was Ryan Knight
unfortunately he's still here just a
little sick so yeah and then today I had
a web jars quickie and web jars is a way
to package up the JavaScript and CSS
libraries from the web and make it easy
to pull those into a java web
application so I did that that was fun
and now I'm here doing this and going on
a brewery tour later so that's that's my
plan for dev ox oh yeah yeah I'd love to
go in the beer tour but uh I'm gonna be
stuck here doing a chest pop so enjoy
enjoy the wonderful ant or beer well I
hope you win
that'll make it worth it so this is this
is not a win lose this is a show the big
toy we showed on stage today I hope it
doesn't crash
it's the the chestnut for a Java that'd
be winning
if it doesn't crash all right cool so if
you're joining us live pop in chat to
say something to us and we'll be happy
to take Q&amp;amp;A the video is obviously our
night hacking comm and also be putting
them on parlays and java YouTube channel
in various places and we're gonna we're
gonna get to some hacking so let me let
me pop up your your desktop here and
we're now you can see us in the corner
there hanging out awesome so what do we
got what's this thing you got here
typesafe activator yeah so activator is
a tool that we created type safe to get
people started building applications
with play and Scala so you just download
it from type safe comm it's open source
and then you can start building apps and
that's what we're gonna do okay let's
build now let's build that
so in activator you can choose from the
templates that are here you can also go
explore a bunch of community contributed
templates I'm gonna go find one that's
the Play hello Play Framework Scala only
one cuz we're just gonna be doing some
Scala today and I'm gonna say alright
let's put this thing on my desktop so
I'll select that folder and then hit
create so this is just creating a copy
of that template application and then
we'll be able to go in and start editing
some code and making some changes to the
app and and then I'll open it up in
IntelliJ and we'll be able to to do more
with it there it's gonna resolve some
dependencies and stuff so it'll take a
second the first time it loads a SAP up
so there's a lot of different templates
you can choose from inside of activator
there's there's play ones there's akka
ones or scholar ones really a Java ones
Scala one's really a big variety of
different templates just to start with
and there we are and there we are so an
activator we have tutorial for every
template so you can read about the code
learn about how it goes this one is
apparently under construction that's my
fault I need to finish right in the
tutorial for this app but that's okay
you're gonna get your tutorial lives so
this is the activator UI and in the
activator UI we can go browse through
the code so we can go in and see like
all right here
my you know application Scala we can go
and see the compiled output it's gonna
run the test for us and then it's gonna
run the actual application so this
application is a web application it's up
and running on localhost 9000 so we can
go in there check it out here's our
pretty little app that we just created
so before we start working on I'm gonna
open this thing up in IntelliJ so I need
to generate some project files and I'll
take a minute to do that so while it's
doing that I'll talk a little bit about
Play Framework and what it is and yeah
yeah so for folks who have never ever
touched a JVM language what's this
what's a Scala stuff that was that was
the dumb interviewer question I'm trying
thank you I have been asked a couple of
times at devoxx what Scala is so it's
it's it's not a dumb question so Scala
is a programming language that combines
object-oriented and functional
programming so you can do both you can
do either up to you and it's of course
based on the JVM it has interoperability
with Java has some really nice features
like has a concept for being able to do
asynchronous stuff and that's part of
what we're going to be taking a look at
in a few minutes and then play framework
is a web framework on the JVM as well
with play framework you can use Java and
you can use Scala totally up to you
which which you want to use and and it's
a modern web framework so it supports
things like WebSockets and asset
compilers for less and CoffeeScript and
those sorts of things so I heard the the
play team was quite excited about
getting lambdas in in Java finally so
they can stop maintaining really old
patterns for for one half of it
yeah the challenge with the challenge
with all this async and non blocking
stuff is that we need to do callbacks
essentially and hopefully we do those
callbacks in a non-blocking way I guess
that's essentially what a basing
construct is for and so Java today pre
Java eight just doesn't have a very good
way to do essentially a callback and so
you have to do these nested inner
classes and it's just a little messy
IntelliJ makes them look prettier though
it's kind of nice they collapse them
down into
lambda like syntax but anyways without
IntelliJ it's kind of nasty and so
that's one of the reasons why I'm
writing this code in Scala today is just
because it shows the the what I'm trying
to show the async and unblocking stuff a
lot more concisely but when we get
lambdas in Java 8 then we're gonna be
able to really make the Java API for
play and and the way that you do
functional programming or do work with a
syncs basic stuff and play make it
really nice
it'll be it'd be awesome we're
definitely cool cool very nice so is our
house our intelligent project and let's
go open it so it's the project files are
created let's go open it up here so this
is on my desktop and then it's this
activator hello Play so let's go open
this thing and I said open let's try
this again desktop
hello play scope I picked the wrong one
it was like a weird caching thing and
IntelliJ ok now we're good to go ok so
this is gonna take a second to index but
while its indexing let's go through some
of the stuff that's going on in this
application so first let me start with
the comm for outs file in play this is
the way that we map an HTTP verb to a
path and that path can be parameterized
restful style and then the controller
that's going to handle that request so
in this case calling controller
application index just a static method
essentially on that thing if you want to
use di you can do that in play as well
you can throw in any DI framework and
instead of calling a stack method you
can go to your container and get your
get your instance out and call the
method that way as well so that
definitely works so let's go check out
the code for that
so here app is our main source directory
for Java and Scala we have a controllers
package and then here's our application
dot Scala code so in this case here's my
my method index that is going to take a
request and return a response that's
really the the major thing that the
controller method does in play and it's
all stateless so everything is you know
take your request return response so in
this case we were wrapping this thing up
into an action
an action is just a wrapper around a
function that actually a literal
function that takes a request and
returns a response so in this case I'm
not actually doing anything with
requests I don't have to specify it and
then my response is status code 200 so I
say ok and then I'm going to use a
server-side template in play which is
down here in views so index let's Khalid
HTML gets compiled into this server-side
template and then that's what actually
is going to render this web page that we
see here yeah so that's our basics so
now let's do some some more exciting
async and non blocking stuff so so I'm
going to just remove what we have there
and instead we I want to show how we do
async and non blocking and there's a few
different ways to show this I could kind
of start at the beginning but let's
let's just skip to the exciting part so
yeah I want to skip to the side in part
yeah and then boring stuff is born so ok
so one of the things that we can easily
make async and non blocking is request
to web sites so there are things that
are not very easy to make blocking for
instance talking to a relational
database most databases relational
databases don't have a way to not block
because JDBC doesn't have a way to not
block and the database vendors drivers
don't have a way to not block so
everything is just blocking you block a
thread until you get your result back
just the way that it is but some there
are some things that are easy to not
block on one of these is making a web
request so when I make a web request
what it means to be non blocking is when
I'm not actually transferring data I
don't actually need to use a thread so
if I'm just waiting on the other side to
respond when I'm just waiting for for
the website that I'm calling to respond
I can actually take the thread and give
it to somebody else and then when I get
the response and I need to transfer data
again then I can you know get a thread
back and do something with the response
so but in that period of time when I'm
just waiting I don't need to have a
thread allocator this is all enabled
through java niÃ±o is really the way that
we do this
cool cool yeah okay so what I'm gonna do
is create a web service request and I'm
gonna do it to James Ward comm so I'm
gonna do WS and this is using plays web
service client library which is a synced
non-blocking
and I'm gonna set the URL here to let's
just go to my website James Ward comm
and then I'm going to make a get request
so that's actually like an HTTP GET
request so this get request would
actually this maquette method what it
actually returns is not a response it
returns a future of a response and the
future is Scala API for doing async
things on another thread and so this
will actually now schedule this request
to be made when I can give a thread to
this thing it's gonna make the request
and then while I'm waiting for the other
side to respond it's going to take that
thread give it to somebody else and then
when I get a response back it's gonna
get a thread and then it will fulfill
the future very nice all asynchronous
unhappy exactly so the challenge here is
that I need to make a few more changes
this controller in order to support this
first is that action the default action
wrapper around something it's it takes a
function that returns a result so when I
had that okay that was the actual result
in this case I don't want to return a
result because that would be blocking
what I instead want to return is a
future of a result so something that
will in the future produce a result so
to change that method definition I just
need to put in action async so now one
last thing I need to do is that this jwf
variable here that thing actually is a
future of a response and what I need a
back out of this controller is not a
response feature of a response it's a
feature of a result and I'm not really
sure why we have two different things a
response and result they're pretty
similar but we do for some reason so I
need to now take this future of a
response and turn it into a future of a
result so the way that I do that to
transform the thing inside the future I
do a map so this is you know functional
some fun functional stuff here so I'm
mapping which is taking the thing in the
middle the thing in the future and
transforming it so in this case I'm just
gonna take my response that's
that's what's inside of this thing when
it completes when that future completes
and now I need to create a result so I'm
gonna do okay and then I'm going to just
return response dot body which is a
string just the string of my webpage so
now it looks like everything is happy I
can just go back to my browser and hit
refresh and then oh one thing we need is
that we need to tell these futures how
they actually run on threads and so in
scala there's an abstraction on top of
thread pools called an execution context
and so in order for this thing to work
we need to provide an execution context
yeah yeah having errors and you're
hacking this is an important sign that
we're actually hacking this is real man
you're right unit tests and they never
failed you know what they are they're
not unit tests nice nice okay so let's
import the the execution context search
one is in Scala concurrent execution
context implicit global so this is an
execution context it's just the default
that I think the default number of
threads is like 1 plus your number of
CPUs on your machine and then it uses
fork/join so so it's it's just a basic
one we can declare to really configure
it add more threads do whatever we need
to that we can also create our own
execution context but we'll just use
that one and this is getting maybe a
little scollay but but I do the way that
I'm actually providing this this thing
is through an ekala implicit so plus
those are fun was that those are fun so
now when I hit reload of my browser my
compiler scenario goes away and we see
my web page I didn't set the content
type and because I just give it a string
and just said hey you're probably
talking about text/plain here so didn't
set it so now we're just seeing my web
page as as a string very nice web page
very professional you should make this
your new blog it looks beautiful
so so now the cool thing about this is
when I load this you'll see there's a
little bit amount of time where the
browser is spinning so I have a request
from the browser to my play server and I
have a request from the play server to
James word calm there's gonna be some
amount of time where I'm just waiting
for James war.com to respond and that
amount of time those two threads that
would normally be allocated and just in
a wait state those two threads go off
and can
somebody else so this is a Sinkin
non-blocking nice it gives you a lot of
scalability and parallelism and all the
all the stuff which which makes your
boss happy I guess exactly exactly so I
want to take this one step further and
then we can chat about whatever okay
yeah let's do it oh cool so a lot of
times in our in our when we're talking
to services in the backend we need to
can compose together a bunch of
different services so I want to add in
another service and then show you how we
can do the composition a pretty sexy way
so what I'm gonna do is come back into
the code and I'm gonna create another
future and this one is going to be to
Twitter instead of James Ward comm so
this is this I'm just working with HTML
data obviously be using JSON or XML here
something something else so I'm gonna
create these two requests and now what I
want to do is compose together these two
things and I want to do it all a sink
and non-blocking so there's a for
comprehension in Scala that's a really
nice construct to do this so what I can
do the for comprehension is I can say
all right take that JW future and I want
to get out of that its value and then I
want to take that Twitter future and I
want to get its value out and when that
stuff is all done I'm going to now yield
a response which is going to be my
status code 200 response and now I'm
gonna take my JW body that's just my
response body from ulta to do the
Twitter one first and then I'll get the
body from from JW body so we're just
putting those together obviously this is
a horrible use case since we'd probably
be working with JSON data and you know
munging these jason structures together
and doing something more important with
them but cool thing about this is that
this for comprehension
it's async and non blocking so the for
comprehension actually returns a future
of a result because it takes whatever
the thing is in here which is the future
of something and it now essentially
wraps up this this yield wraps up that
the thing that I'm yielding into that
into a future as well so I'm now going
to have two web requests going out and
both of those will probably be in a wait
state at some point in time so I would
normally have three threads allocated to
this requests a thread from the browser
to the server and then the two threads
from the server - one from Janet - James
warden one to Twitter right and so in
this case three requests and all of them
can be async and non blocking so let's
go try it out let's just make sure it
works here so I'll refresh in my browser
and play will recompile the change and
then now we're seeing Twitter so this is
he text for Twitter and if I scroll way
down we see the text for James Ward so
now I've just done that whole thing
async and non-blocking very cool very
cool so that was that was some nice
on-the-fly hacking showing what you can
do with the play framework in Scala um
so what else should we talk about what
else you have you have up your sleeve
any vacations coming up my wife is
meeting me here in Europe on Friday and
we're gonna go up to the Alps for the
weekend and go to a spa so that'll be
it'll be nice little that's nice that's
nice
you're gonna Switzerland alright I guess
the Alps technically span a couple
countries but yeah the Swiss Alps yeah
we're going to the Swiss Alps because
then I'm gonna spend the week at the
typesafe office and loose on Switzerland
so that's where the EPA E is at EPFL AFB
Oh EPFL where the where yeah where
Martin works that jet lag kicking in or
the lack of good coffee or the fact they
gave six hours of presentations
yesterday plus a keynote this morning
plus four hours of interviews today
dude let's go get a beer yeah yeah so we
were talking about that and yeah y'all
be going to beer tour and I'll be in the
chest buff Manning the robot yeah it'll
be fun yeah I'll bring you a beer yeah
and see I even I even left us doubling
up on the screen there that's how that's
how jet-lagged and tired I am I killed
them I killed them no you also we also
got the naked dude behind we can feel up
okay that sounds like fun
all right cool so I actually have
something for you too to celebrate your
um your first in-person night hacking
episode you did the interview before
JavaOne but night hacking sticker and
it's transparent so I I think it will it
will work wonderfully because it will be
black in the backgrounds Shh thank you
so much I'm a night hacker very watch
out I'm gonna make you sing what oh yes
please all right and so for folks
haven't heard we're gonna start a new
regular broadcast every first and third
week of the month on Thursday mornings
Thursday morning specific Thursday
evening you know time out here so look
forward to that starting in January and
our first guest will be Brian gets on
January 16th nice I'll be there that's
awesome so speaking of Brian I've seen
around the conference somewhere maybe
he'll join us for a for a talk in a
little bit I'll see if I can snag him
out on four o'clock when he's supposed
to show up nice yes
all right so thanks again James stay on
the stream if you're joining us live and
goodbye to folks watching the recording</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>