<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>10 Minute Java Security | Coder Coacher - Coaching Coders</title><meta content="10 Minute Java Security - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>10 Minute Java Security</b></h2><h5 class="post__date">2014-02-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_ANdXIuhbzQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so welcome to our next
interview with night hacking at Jay
focus I'm Steven Chen and with me I have
Jim manna code and we are going to teach
you how to secure your Java programming
in ten minutes
disclaimer this is this is long actually
a security course and any damage that
result is from the practices we expound
here we're not liable for will at least
get the conversation started Steve as I
yeah there we go
okay Jim so tell us a little bit about
what you do and who you are and then
we'll we'll go through some of your
security sure my name is Jim manacle and
one of the board members of the yeo-hwa
foundation I'm an independent secure
coding trainer I teach developers around
secure software design and development
and I'm from Hawaii Aloha everyone a lot
of my friends out there in the island
you seem slightly underdressed for the
Stockholm wintry weather here yeah I
mean not so much into the thick jackets
gloves or or hats I'm more into like the
Hawaiian shirts and shorts and sandals
kind of thing yeah that's just that's my
preference so you walk around town like
this no actually this is overdressed for
Hawaii I tend to have short sandals and
yeah that's that's how I tend to roll
nice okay so you said that you had 10
different secure practices you wanted to
to cover one of the projects I work with
it a wasp um as a quick note even though
I'm a board member of Olas I'm going to
talk about a no-loss project a wasp is a
vendor-neutral nonprofit organization
they don't endorse any of my commercial
activities or anyone's commercial
activities it's just a nonprofit
organization that I work with so you
know my commercial activities and my OS
nonprofit activities I firewall them as
much as possible to try to remain
ethical so cool that aside I'm going to
talk about an OAuth project called the
OAuth top 10 proactive controls just a
project I'm working on
as an awareness document to teach devs
about secure coding so the first of ten
are you ready for one of ten wait wait
okay Marie yes I think that a lot of
these are boring but the work of
security is not when you do hacking no
offense tonight hacking that's a
different kind of hacking but the real
work in security is when you're
designing secure software and and
writing lines of code using proper
security controls or defenses that's
where the work is done and it's like a
minutia
it's detail it's not even glorious it's
we know when you're coding and sweating
and getting stuff done that's where the
security is done and we're going through
a culture change now we're years ago it
wasn't that important today it's never
been more important so number one secure
architecture and design you know we want
to plan the dive and dive the plan
regardless of whether we're doing agile
or DevOps or traditional waterfall we're
all going to have some kind of process
to think about how we're going to build
software before we build it and there's
a lot ever get any pushback from the
agile community about security practices
or how you integrate it with their more
fluid development style no I I don't
think so because keep in mind when you
talk about agile agile is not about
quickly writing crappy software agile is
about iterative approaches iterative
high-quality software release so it's
not like we're just slapping stuff
together a true agile team has a
disciplined and well thought-out
architecture really elite processes and
redundancy in programming and they have
baked into that agile process the
ability to quickly release high quality
software now a lot of agile teams they
take the good of agile let's let my
manager change requirement slow
documentation they take the the fun
parts of agile and embrace that but the
discipline part of agile many people
throw away so if you're if you're
throwing away the discipline part of
agile you know what you are you are not
agile but some need that discipline and
part of that discipline is a strong
architecture and part of a good strong
architecture is see the security all
right here I go I think I got to be good
at these questions awesome so when I
think about security design let me give
you an example
suppose we're doing we want to save a
variable that's tracking how many times
the user has failed to login
successfully so if they exceed some
threshold we'll lock the account now
this isn't the perfect control just an
example so if I want to implement that I
have to save an integer of current
failed number of login attempts for that
user where do I stick that I Regina are
do in the browser cookies a s why do I
put it in the request in a browser
cookie or or a hidden variable I've seen
that before that has the attacker we can
change that all day do I put it in the
session or do I put it the database a
lot of people will say you put that
variable in the session or I can just
drop the cookie and get a new session
every time so if I want to do if I want
to track the number of failed login
attempts per user that's got to be in
the database there yeah it's got to be
persistent and so though I can stick it
in the session and it's gonna work wait
wait wait hold on
Papa Mike we're running out of battery
they're good
alright how's that for agile
presentation perfect so as a developer I
can take that variable failed number of
login attempts I can put it in the
session and it will appear to work all
day long and even QA testing it it will
appear to work in some scenario so but
very easy for an attacker to write an
automated application bypasses it just
continually spins with new passwords
until they crack it exactly Steve so we
want to as much as we can in design we
want to specify some of these some of
these design patterns to keep security
in mind when we do it that's a very
simplistic example now what should and
and design covers threat modeling
business logic design and much much more
than just that small example but what
should fall out of a good design process
is a series of requirements number two
in our proactive approach is to secure
coding we want to have good requirements
so we can prescriptively tell developers
not just how the application should work
but what the security properties of that
software should be hey developers who
out here they're just curious who out
here happens to be a Java developer
anyone yeah so how many times in your
career have you been given a series of
clear requirements that define how you
code that applications securely you have
zero okay you went yeah right
but we can do this we and we should do
this here's an example out of a good
design process we should have at least
two major kinds of requirements the
first are functional security
requirements like if I want to do the
forgot password workflow or change
password feature or the Edit user
feature there's going to be security
properties in all of those functionality
and that stuff that a QA person can test
easily another class of security
requirements are non-functional
requirements these are things that are
not visible that a security that a
normal QA tester can't easily test and
we usually need security specialists to
test it and that an example of that
would be like a non-functional
requirement all your query should be
parameterized your password storage
system should use an h-back or an
adaptive hash so and then we have
business logic requirements and now
more important than ever well it's
important really important in Europe
not so important in the u.s. privacy
requirements but I'm pumped yeah so so
this is what should fall out of a good
design process is a list of requirements
that I can give to a developer now most
people say you must write secure code
and you're a developer you're like well
how do you do that and well I don't know
just go figure it out that's a path to
failure so we should spec out what the
security properties of software should
be this is ideal but you'll end up
saving a lot of money that's where if
you're getting your requirements from a
you know product manager a product owner
or somebody who's driving what your
application should be like how do you
how do you educate them on what they
should be giving you for security
requirements if you have a product
manager who's driving technical
requirements that really knows nothing
about security there's a lot of frozen
lakes in Sweden we can drop them in -
it's going to lead to disaster so it's
fundamental that you have security
buy-in from the sea level down and
especially when you're talking about
product managers technical project
managers who are driving developers time
if you don't budget security into that
it's a it's a path to failure and again
if you look back five years security
requirements didn't matter so much the
whole world has changed this is the
golden era of hacking yeah no security
hacking we all just go down we were
white hats on the show right on right
I'm with you I'm come with you there
so yeah that that's that's the next
thing it's good prescriptive the
functional non-functional business logic
and privacy centric security
requirements let's go the next one you
ready yeah ready so number three the now
we're getting a little bit more
technical we want to leverage the
security features of our frameworks and
good security libraries if we find
ourselves building our own custom
invalidation layer if we find ourselves
building our own custom output encoding
library if we're doing password storage
from scratch every time we write code
it's a failure so we want to have good
reusable this is just normal
oo normal good development but it
matters more for security because those
are things which if you're using an open
source library if it's getting people
reviewing the code if people are
contributing security patches then you
don't have to do that yourself exactly
and
it's difficult in the Java ecosystem to
find good security libraries I think and
so some of the ones that I work with
that at the Olas foundation is the Olas
java encoder project the OWASP HTML
sanitizer project the Apache Shiro is a
good is a good access control project
Google's Google has a project called
Keys R which is just one of the best
crypto libraries in the Java ecosystem
and by levering by leveraging these very
well designed and well thought out and
well maintained security libraries it
enables us to build secure software more
efficiently and with with long term
maintenance of those controls in mind as
well go let's let's move on with number
four let's charge on and this is a giant
topic identity and authentication this
is something this is something that
individual developers doing day-to-day
work should not be doing there should be
some kind of standardized layer that
standardized components that is custom
to our business that we can roll pass it
this is a big problem for the Internet
of Things because you have all these
devices talking to back-end services and
they really don't know your identity
they're exposed to man-in-the-middle
attacks all sorts of ways you can
exploit these yeah we'll just use the
Facebook login button everything and
you're good to go I am kidding by the
way no offense to Facebook but you know
it's a lot of the trends of consumer
software is to use federated identity
you know the Facebook Twitter and other
login systems and for high security
software I'm not a fan that's not the
right way to go yeah and so yeah so
let's leverage let's leverage what
frameworks we can let's audit them well
let's uh properly called on
ah
all right so we are on battery set three
so some things I talk about when
thinking about identity is when to do
REO yeah forgot password workflow which
I think a lot of folks get wrong no
password reset link let's do a
multi-factor style or things like how to
store a password in proper form and then
then we can get into OAuth and
Federation sam'l it's a very broad topic
that we can spend all day talking about
at least well what's number five access
control access control authorization
access control this is a layer that is
probably one of the most difficult
layers I think in complex software
because there's no like there's no good
standard on doing access control and
most languages now I'm not just I'm not
just pointing at Java I'm talking about
the entire ecosystem of software
engineering yeah it's not built into the
languages and the frameworks and
attempts to kind of glue it on top of
your application ultimately are
error-prone I agree and a lot of a lot
of the language is now standardized on
our back role based access control which
is dead which is a horrific pattern I
don't believe it and so and I don't want
to attack Java at all or any language
assistance what we depended on for many
years in the era of multi-tenancy and
cloud-based computing and more advanced
web centric software the security
benefits of role based access control
fade so we want to move to more of a
capabilities based access control system
or what NIST just standardized a back
atom activity based access control where
we're no longer coding to the user
property like we're no longer saying
things like if the user is an admin or
if the user is a manager or if the user
is this and we hard code that everywhere
that's a path to failure I like it
better if the user is allowed to conduct
this activity now we're checking on what
the user is doing and what data they're
accessing not who they are that we need
to shift our whole thinking into these
more modern access control models I
think Apache Shiro in the Java ecosystem
is probably one of the earlier projects
to really approach capability type
access control very well now as a
critique a
there's a critique of this kind of
thinking in that when you're doing role
based access control you can just slap
roles in from day one and make it work
but when you're doing capabilities and
more data contextual access control
systems like I'm describing there's a
lot more setup before it starts working
so a friend of mine here one of the one
of the speakers who was talking about
IDE optimization she's saying that using
using apache shiro to build access
control into an existing system and
augmenting it was incredibly painful
mapping shiro to her database but that's
always going to be difficult when
building a good data contextual access
control system but we need to do it well
the wins will come out later let's
charge on next this is my personal
favorite security control you have a
perfect I do have a security control
that's your favorite by the way no I
don't you don't have a favorite security
control Stephen I think that's I think
that's a part of your life that that's
missing something fundamental we're
gonna work on that with you Stephen let
me think what kind of security control
guy do you think Stephen is let me think
about this he's kind of man apiece is
kind of reserved what would be a good
security control for Stephen I think I
think encryption in transit good SSL I
think that's going to be your favorite
security control yeah now that that is
my favorite
oh good maze my new favorite good good
good man good man so number six query
parameter ization now we're jumping from
high-level design ideas to a very
specific control Steve why is query
parameter ization such a fundamental
control for secure software
um phone-a-friend
looks phone-a-friend so I'll be couple
your friend let's phone hi Steve good
Steve that's a good question first of
all Croy parameterization is to stop
sequel injection query parameterization
they're using the preparedstatement
class in java it's the only way we can
absolutely stop sequel injection attacks
that modify database queries in our
applications it's a very I just found my
friend in Hawaii jail right on and you
know it's the only way you can stop
sequel injection attacks just use query
parameterization Steve
exactly correct that guy's exactly gone
you got to thank my friend Jim he's
awesome
well I know you're kind of a your
client-side guy I've seen your book on
on FX and I see you're on the client I'm
kind of more the back-end server guides
which is why the quality of the look and
feel of my slides are so awful so it's
all good so number six query parameter
is a ssin it's a very narrow control
because sequel injection is such a
prolific problem it's an easy way to do
massive damage and so that's that's one
of my favorite controls query parameter
ization so next we'll talk about input
validation this is you know almost every
Java framework has a good input
validation library in it struts spring
they all have their unique input
validation layers just use them for all
variables I an input validation I like
to put it on the clients but then leave
it off on the server you're excused you
can go now to take your headset no he's
kidding
no you know but actually client-side
input validation is really good for
intrusion detection if you have really
strong server-side validation and strong
client-side validation with the same
validation rules when people start
evading your client-side validation and
start breaking a validation on a server
know they're not going through the
official client LOC dirt in if the
design is built correctly yeah one
mistake in validation and slock their
account especially when you're doing FX
to web service type programming they
don't have a choice and client they're
using your client yeah if it's built
correctly the only way to evade your
Impa validation in the client is if
their man the milling you are
intercepting the request or doing an
evil twin attack where they use a fate a
modified version of your client to use
the same web services so so so input
validation on the client is good IDs
intrusion prevention again if you do it
right you can be have a very low
tolerance of server side validation
rules one mistake
they must be only
so I think Jim and I both have a new
skill and that is swapping batteries
into headsets hold it in for a second
you should be good check check check
okay so good
yeah check there we go so yeah so
client-side validation in sync with
server-side validation you can be very
low tolerant of server-side validation
errors and you get some intrusion
detection next let's go yet other
another cool part of input validation
that's non-standard is when you're
dealing with untrusted HTML so if
someone's using like a tiny MCE or our
CK editor where they submit untrusted
markup to your server
we need specialized validation and there
are some projects that do that one of
them is the OAuth anti Sammi project
former Shinju Biagi another one is the
Olas p--
HTML java sanitizer project for Michael
Samuelle these are specialized libraries
to set policies around what HTML you can
accept cool that's charged next is we
have next tier encoding this is like my
second favorite control and this is this
is when you're doing escaping in the
user interface primarily to stop see a
cross site scripting so one of the Olas
projects there is the Olas java encoder
project written by PhD candidate student
Jeff I cannot ski and this is a great
library the Olas Java encoder what it
lacks in good marketing in the name it
makes up for in quality and performance
this is a library you can use in the
user interface to escape untrusted data
to eliminate any potential JavaScript
that might be an untrusted data this is
what cross-site scripting is we want to
do escaping in the client to uh to
defend from that risk next data
protection and privacy this is like
doing cryptographic storage and SSL
cryptographic transit properly for a
corrupting data at rest for encrypting
data at rest don't do your own crypto
you're gonna get it wrong you need to do
a yes in the proper mode the proper
padding and proper Ivy management and
proper key management and proper
cryptographic isolation its abhor even
top tier experts so I use a library
called the Google keys our project an
open-source project that's really one of
the best crypto libraries of any
language any language frankly and so
another open source java project and not
just using keys are want to make sure
you isolate your crypto into isolated
services it's probably one of the more
important parts
good design and we have SSL there's a
great website from Ivan ristic called
SSL labs it's a way to quickly verify
how good your SSL configuration is it's
really tricky to get that right and very
important to get that right so I think
we're neat we're coming to the end here
I know it doesn't sound exciting but to
me good logging is very exciting are you
you agree with that yes yes I heard it
but I didn't feel it but that's okay I
can work through that I can work through
that yes in the back of my mind I was
thinking good logging I was thinking
there's a good area for improvement for
our beyond lambdas panel yeah there's
also a song from your that talks about
the joy of proper logging and
programming Oh Ren and Stimpy
yeah if your watch to read Stimpy yeah
yeah would you remember you know what so
I'm going to talk about no I don't the
log are you hum it for me it's log it's
log it's fun it's heavy it's wood it's
log it's log it's better than bad it's
good that that was really good thank you
I probably that's coming back now it's
the log song people do do more of that
later if we had a few beers so sounds
good
so but the importance of logging is it's
to handle incidents when things go wrong
we want to build our software to prepare
for failure we want air handling proper
exception handling to make sure we're
not leaking data and handling failures
and software properly and also intrusion
detection a lot of the products we
normally buy for intrusion detection at
the network layer don't translate well
to the to the application layer so we
want to embed intrusion detection into
our software another Olas project that
works with this is a project from John
Melton and Michael coats call the wasp
app sensor project that lets you it's a
Java project that lets you embed
security centric sensor points deep in
your code so when things go wrong you
can set a bogey for users and take a
variety of different actions based on
the severity of what they're doing deep
in your software cool and with that we
just went through ten so that's like my
first pass the initial awareness when
talking to folks about secure coding so
folks wanted to find out more about this
care practices and oopps wherever they
go well I just talked about the OWASP
proactive control project so go Google
oh go Google or Bing or Alta Vista the
wasp proactive I just had Alta Vista is
that still even like up and running or
elevated enough years I cannot answer
that my gray hairs there it's the OWASP
Pro active controls project the OS HTML
sanitizer project the Oh wash Java
encoder project the apache shiro project
the google keys our project these are
our series of java libraries that can
help you as a Java developer right more
secure software cool thanks very much
Jim pleasure to be here thank you Steve
okay you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>