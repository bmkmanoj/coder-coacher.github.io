<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java EE: Heavyweight or Lightweight—Mythbusters | Coder Coacher - Coaching Coders</title><meta content="Java EE: Heavyweight or Lightweight—Mythbusters - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Java EE: Heavyweight or Lightweight—Mythbusters</b></h2><h5 class="post__date">2017-10-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/LwimkQQDhio" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to Mythbusters why the strange
title of the session heavyweight versus
lightweight because I get exactly the
questions all over the time actually
yesterday someone on Twitter said
someone in the session meant Java is too
heavy weight and what it means actually
I don't know ask the speaker I have no
idea what it means and in projects I can
tell you stories over and over again in
one project they wanted to have
micro-services as a huge shop they had
several hundred Java EE applications so
I mean real Java applications which
means application server and then say
all for micro-services it won't work
anymore and the idea was to use just
jetty and I was asked how to do this I
look at this is where okay this was a
lifetime for me job because then you
know we have to make a jetty to work
like an application server with the
dependency injection and everything else
and the question is what we will gain do
you really believe that if I will you
know patch jetty for you that it will
behave like a fake application server at
the end of the day I'm going to be
smarter than you know the whole white
fly or PI R or Thome team and mice
application server is going to be
smaller and they say actually all right
and what happened was in this particular
case they ditched after the presentation
jetty and they went with payara fool in
this case in production in other
projects white flight fool or Tomy plus
what I never used is you see why now
after the discourse anything was web
profile because there was no measurable
difference in my project if I cannot
measure I don't like such optimization
so I always use the full application
server and even I think even if it has
to run on the Raspberry Pi or doesn't
make any difference so it makes a huge
difference for the for the application
server vendors because if they have to
provide the full platform they have a
lot work to do they have to implement
the old stuff who no one cares about
what I am down the window okay and the
user of the application service and for
me I forgot to mention of course you can
ask me questions whenever like so the
first question
yes we will look at this during this
session I have I will launch a swarm and
PR a swarm and if you have other swarms
we can launch whatever is accessible
right and measure this so yeah and what
I do usually it is very dangerous to be
involved in such discussions because if
you start to argue with what is
heavyweight and lightweight this is
never-ending meeting I mean there will
be no winner so what do you do we stop
the meeting right away go home provide a
proof of concept create read update
delete with the performance test measure
the result and say look these are the
numbers now you can decide you know is
it worth to save I don't know five makes
twenty makes five hundred Meg's to geek
or whatever and if someone says okay if
we do this we save five thousand dollars
or twenty thousand dollars then it is no
or yes but there's no more in my
decision the sad story is if you do this
you will always stick with application
service so if you would like it to your
life more exciting in some more
experiments don't do this what I do yeah
I have a web blog and in workshops and
this is properly interesting so just
like question and answer and then during
the last its first Monday of the month
at 6 p.m. CET I forgot what is actually
hear us minus 9 hours I think and and I
have no time to answer questions via
email so I do this live streaming and
someone asked me they use undertow this
is like the HTTP server from whitefly
and they would like to have just the
undertow in jax-rs and they are pretty
far but it depends a dependency
injection does not work so I wanted
answered no time what what interests me
how much time they spend to optimize
this and if they are ready and it will
work which problem do they have first
this will be unique combination of
technologies just for the project they
created their own application server and
what we were already interesting to see
whether this application server is
faster smaller or more lightweight
whatever it means than the actual white
line so I asked them why do not start
with white fly and then delete whatever
you don't like why you create your own
no no answer because properly it was
easy to do this okay so um so I start
always with definitions because someone
heavyweight and lightweight this is
dictionary I just fired up a pair
screenshot and what it means heavyweight
is okay boxing does not apply apply to
application servers above average weight
this could be ands it the cool story is
the adjective this serious important or
influential this would be heavy weight
there so okay if yes then Java is
extremely heavy weight okay so otherwise
light weight means sometimes is is you
know this is in the amateur boxing scale
it ranges from 57 to 60 kilogram so but
the adjective means lacking seriousness
depth or influence is entertaining it
rather lightweight this is what I see
all these solutions I saw which were
lightweight
they were entertaining but rather
lightweight it means meaningless okay so
um if you come to projects and say to is
too heavy weight and I am in the project
I will ask you what startup time REM
download size CPU overhead what do you
mean or is this just marketing sorry
so okay this was the last light this is
just some workshops and this is the last
line thank you so the question is what I
would like to do is to start some
application service like something for
you and measure this and the question is
we get some numbers out so application
servers full I just will use full and I
always use the micros because you asked
so the question is to what we should
compare the numbers I mean if this
what's coming out is heavyweight we have
to have a comparison to something right
which is lightweight what would it be
huh yeah it will use works as well so
what's there is already in but what else
yeah and Tomcat is too boring what I
will do is the create an ultimate micro
service what yeah what WebLogic I I have
it but I did not the recent version but
I measured in the past so I will tell
the numbers I could try to launch it but
didn't launch it for long time WebLogic
drop wizard yeah what I will do even
worse I will provide something white
white less yeah
white less or lightweight and absolutely
meaningless so what I would like to do
is to create the ultimate
micro-service actual an eunuch colonel
and I will start with a jar I mean this
ultimate thing would be Java C project
and call it white main oh okay I hope
this was the right one
and this is nothing it's just just a
pump and what I would like to do is I
would like to create a Java class and
call it calm yeah thanks Nana
and then one main method public public
static void main and serversocket right
what let's say 1990 hopefully is not
used new and destroy some exceptions the
variable socket and then Zorka dot
accept what I get back is the socket and
at least dual block so we can measure
how much whim it will receive and I
would say regardless what you are doing
this is the absolute lightweightness
right there there will be no other drop
with our Tomcats nanos or whatever which
are smaller than this so this is our
reference
there's the smallest possible server
with single threaded like note but the
little server agreed so I think this is
this is reasonable
this is socket sorry this is it's called
ass and ass get out get out put stream I
guess and then right
white less get bytes I think it should
work so I would just build ant or just
go to the command line this is in junk
folder no no maven package then we
should get T on target and I say Java
minus CP this is not executable target
and what was it this was this and calm
air hex and I think Nano right so it
once cool right
this is the future nano service so if
you would like to be no famous
conference speaker no dependencies throw
away everything else go to your drop
wizard guys and say your application
server are to heavyweight use this so
then J visual VM launch it what do you
expect
so it uses size 25
250 max is this total consumption and
right now it uses 60 16 megabyte of RAM
so what it means regardless what we are
doing it would be never better than this
everyone agrees
so it's JD k-19 I could do some streaks
with the module loaders the question is
if I have such problems either the
application server is supposed to run on
Apple watch right or we have serious
budget problems because I know how about
us but in Germany I can buy 64 gigabyte
of ECC Ram for server for about 400
euros so if I run the performance a
garbage collector you see it is 7 Meg
but I will have to run it frequently
because there is no pressure so it will
never optimize to this ok everyone
agreed good experiment right and this
should actually work so if I go here and
say Curl Curl let's see what localhost
1980 would cool right you see how
lightweight java is try this with note
more code no and with Java SE verts out
of the box now application server so the
easiest to me is to start white phial
payara
because i have them and amuse them in
the projects so this is white flight n-1
full is the current one there is 11
something but this is the full payara
you can download a payara white flight
and if you go to white fly so we can
check for instance download right now
and what I use all applications of a
distribution I use the full one the
biggest largest of course ten one full
web and distribution and there are 134
megabyte download size so this is the
largest available white light the others
are around 150 as well so it means if
you find a technology it will be always
hopefully smaller than this the question
is do we have problem with that this is
like you know 5 iPhone pictures I would
say
okay everything else what the download
is usually larger than this some iPhone
apps are larger than 150 EPS so the
question is what's the problem and I
build them frequently in docker image
and even the download size is not a
problem but therefore I use the largest
one if you look here for instance
servlet only is 28
just servlets but I never saw just a
servlet in production in my projects for
me sometimes we build load balancers
just with servlets but I mean usually
you would need something else so it
means the reference here would be 28 mix
right so it's the smallest possible
white light okay so now I start that and
this is not there's a little bit
cheating but they are cheating in in in
my disadvantage because this white fly
is already I has this highest monitoring
setup so there's the most overhead so
we're measuring here is the DD large as
possible all that so let's go here to
the visual and we see here JBoss full
click to monitor and we see 87 Meg used
without any changes perform GC we see it
goes down to 40 Meg what we had in Java
were five Meg's right or six seven so
what it means the very good so we have
to be precise here otherwise you know I
get lots of trouble so so we have seven
max with Java SE the full white fly in
idle takes that just goes up because out
of the box it comes with minus X and mix
setting so it is less pressure on the
JVM to college the garbage so what do I
have to do is to make it comparable
remove all the settings then would be
less but we see if I perform the garbage
collection then this is around 35 Meg so
it means we can save 30 megabyte of RAM
per microservice in production now in my
project we have at most 20 micro
services it will means 20 teams which
are independent it means in the full
setup in my client we could save 600 mix
of RAM
now imagine me and say forget your
application service we should be more
lightweight if we do this and it's
a few days we will we will save one time
probably 600 mix over m and the main
client will ask is the enterprise
companies or money rules right there are
not like Tequesta say okay how much is
it like approximately 5 cents and they
say ok a completely strange right you
can say what's about clouds so I did
some payara and white fur and Amazon
accs and I forgot to do to disable the
cloud with ELB and it cost me $16 per
month to white flies in an ill be
running all the time so the question is
there a larger company and you could
save 50% to $8 a month what's the
difference I mean is it significant ok
so now we have what white light done
who said WebSphere okay try WebSphere so
I'm just please remind me to stop the
service so WebSphere is in different
folder
I installed web seon service so this is
the last one and so this is the start
this is not the WebSphere kernel what I
did already
I I said it this way that it uses the
Java 7 web profile plus dependencies and
this is the Webster you can you can get
with the web c license this is the newer
one so let's go here in the and we see
here
comm i BN website kernel boot this is
deep protest so i switch here monitor
and we see it is 90 megabyte of RAM
perform GC goes down to 40 so what it
means
Webster is you could a safe with white
fly to Mexico
compare compared to WebSphere deployment
in all application service a small war
complies usually about in one second
this is what it takes
of course the more crazy the application
gets you
that takes what the cool story is why I
like actually Java E is because to the
wars are always small because there is
nothing in there everything is on the
application server the diplomas are
always crazy fast actually in one
project I said use Java e and then
complained is not as fast as you said it
takes five seconds and what we noticed
they had a virus until a virus scanner
and it scanned everything before
something could deploy it I mean this
was a different story but so if you are
complaining about the deployment
performance check really or other make
the virus scanners so they scan
everything so this was WebSphere a
Liberty profile and in I forgot actually
I think this one's on ninety eighty
WebSphere this is a localhost ninety
eighty I guess yeah and with full Java
seven support and module are you can you
have full command line so what I can do
is serve a list there are all these
servers I can dump them archive here I
you can create service and close them on
the fly so this is what's the Liberty
profile so I would I would do spy era
and by the way WebLogic would start with
100 Meg and this is the largest one and
the overhead would be a perfect I think
I recorded a screencast about web
project as well and it was like 90 Meg's
or something like this so it was the
largest but it's still not a problem so
it's not like it took 500 Meg's it was
like twice as large I think like a white
files like ATM X or something like this
so you can always argue no webs web
logic is heavy weight because it's twice
as large I was white flight like what it
means the numbers ATM exams okay what
problem do we have whose item X and by
the way which is always a good thing to
compare this with Chrome and my test
window takes now 70 Meg's of RAM so what
it means if you are really really about
lightweightness never open a browser
okay so so we have white fly we have the
Liberty if you like payara
para would be similar so we should do
this right now to be complete so
server stop and it stops the default
server and what do you have to do to
configure this so if you go here to user
what I did
servers default server can't server.xml
sorry so this is the full configuration
this is the I had to tell website use
web profile 7 oh there is no full
profile there is something like web
profile plus dependencies but it does
matter this eg B's and CDI everything is
included already ok payara this is not
the most recent one because I use this
in production and so start that and I
wouldn't like to start the glass 55
because it's like payara without patches
right so so it starts right now
and take a look at this and you see it
comes this is already no more comparable
because it comes with - mix 512 megabyte
of RAM but if we go here we see it takes
now the JVM already fix out is 130
megabyte of RAM but it has too much RAM
assigned so there is no pressure on the
on the garbage collector to collect that
unfortunately I will have to kill
everything Java related this happens
with profiling because of class sharing
and just we do this so and then I will
just show you and I would then implement
a small war deployed and measure the
performance and see where the overhead
actually is and then start these swarms
so after the payara swarm and the hollow
swarm how it feels like and was the
difference then you can then use it with
CD numbers good strategy if not we can
do something else but I try to know to
see what it how much whatever you can
actually save yes
yeah always actually
so we perform stress tests all the time
and I will actually create an
application if you like a GB with
transactions and see the itís the most
of that and then if you have that all
aspects are loaded to be no much
difference but you're right if the
Immigration Service a super smart they
would start nothing right and then if it
deployed first one but you will see
there will no difference actually so um
so actually very good point so most of
my clients they they run with two
gigabyte of RAM in my perspective I
would assign more because there is you
know what's the point what they just
like it so this is the most whitefly
payara they run with - exam mix to geek
and of course this say nothing because
if you start to cash in your application
you know it really depends what we are
doing so monitor now we have the payara
wheter from the garbage collection and
you see is again 41 max so it seems like
the 40 megabyte is is the absolute limit
no limit
all these servers are 40 Mac and the
Tomcat I test it once around 10 Meg so
this is what you can Tomcat or jetty but
though it is 6 megabyte more they can
say Tomcat is bloated because as twice
as big as my service orchid right so but
you know the arguments is if you know
the numbers I mean what's the problem
okay that's a one full time I mean
heavyweight is meaningless
agreed so now we have payara and so
let's implement a something so and
yesterday i was on the how it's called
keynote Oracle code keynote and there
were lots of FAS FAS right you know what
it is
food as a service right so this is what
should be scalable here so um I would
like to create a project what I did
yesterday and just taught it back
migrated back to Java EE 7 because I
would like to use all the service and
this 8 would only run on GlassFish 5 and
it comes with one it comes with nothing
in the built
so then I would create a Java class and
call it food serve food resource with an
end point and the end point is food and
one cat and I would just go with that -
usually I would just that we have an EJB
already and then string get and then
because you asked me this I would like
to get and also activate dependency
injection so I would say food manager
all enterprise apps need a manager
then another stateless beam and this
stateless beam has a or we can do
request cope or whatever like but
stateless I think many say eg bees are
the heaviest so was the request scope
they would be slower so I'm happy to do
it with stateless so but food and what
we get is already got the yesterday
salad of course salad so decorated
sanitary incorporated salad and some
random noise so we have this save it and
then I can inject the food manager FM
and here's a return this.f m dot food I
think it's enough so I'm just the
adjacent object I will leave it so it
will be as fast so this JSON object
doesn't make a lot difference and I hope
wait a second
that all the payara is running so let's
deploy it and payara so run and I would
lose payara right now
so as to say there is not a lot
difference between the application
service regarding the overhead or
runtime performance I mean they
optimising like crazy over the years so
resources food so resources food and cat
was it wrong
miss Perry something
functions are service okay resources and
food yeah works so now we have here an
app to EG bees with an injection I mean
in real world we will get probably
another AG bees with some injection so
we could measure the difference and I
would like to use JPA because most of
the spring drop Wizard project have also
GPA so there is nothing to compare so
what I would like to compare the
applications of a specific stuff like
CDI and eg bees this is what we can
where the overhead might come from right
so we have the GlassFish that will
connect to that and then what I would
like to do is a nice tool called Apache
benchmarks it comes with Apache and is
available on all platforms if you
install Apache web server we have the
tool - see is this number of concurrent
processes let's say 5 - n is the number
of requests and I can say 1000 and go
with that
what's problem yeah - and thank you so
as you can see right now is requests per
second is 1,400 which is surprisingly
low and we can look now and the monitor
and we see perform GC and doesn't have
really doesn't affect a lot I mean
there's a little bit right because it's
loaded and everything is initiated but
if I do it again and perform GC it goes
back to about 60 and this is the usual
behavior and all app so there's actually
I would argue if the application gets
larger and you have some day then you
get entitymanager with caches and
concurrent transactions that there are
lots of RAM but this was never a problem
so I mean jelly from the beginning and I
never saw a project where we have to
migrate away from application server
because it was too big too slow or
whatever and always a fault transaction
from transactions handling locking or
whatever I am so we did this
now there's another tool a little bit
more convenient and work deft procs
tools and this is called J Mita three
one and this one yeah it starts so I can
say I would like to have a thread group
with five threads and it should run
forever and ramp-up is okay and then
what I do I add a sampler HTTP request
and this is the path so it and the I
need the localhost here and 8080 so fast
resources food and then one thing is
called listener and I only would like to
have the thing is called
summary report yes this is what I'm
usually need and I say start know and it
is important that here is zero errors it
means this is the actual stress test so
and this once this is what we do at the
beginning of the projects to see you
know how much resources do we need so
this is the my usual operations lag and
doing this on conferences just to get
you know an idea what the application
service doing so and then you see here
CPU usage is 60 so it is not a very good
stress test because it should be 80 so
it is and we see here the TDD in needs
more memory but if I perform the garbage
collection it always goes back to our
around 60 and the heavy load and now
comes the cool thing what I would like
to measure is the true overhead of the
ejbs interceptors and dependency
injection so I would like to switch to
to simpler and see CPU sampling so now
this is like profiling with very very
low overhead and what I see here is that
the most overhead is sync threat verka
get tasks and I think the reason is I
miss configured the payara was to have
just five threats doesn't really matter
but the cool story is there are no no
each Ibiza so the first page it seems
likes to eg bees and all the stuff do
not consume any cpu cycles in relation
to the other stuff
and what you should do and just
searching for my package and this is you
see these two classes they this are the
overhead of eg B's these are the
interceptors or the proxies which start
transactions measure monitoring
performance as you can see is the
overhead of egb in total is zero one
percent so if it would remove eg B's we
could say that most 900 milliseconds
during a test so it is pointless so
actually I never had a stress test where
the eg B's appeared on the top if we
have HTTP layer and this is natural of
course because the HTTP layer does a lot
of work they have parsed the HTTP
protocol start the threads we our should
be but for unknown reasons most of the
task force tried to go away from CDI and
eg B's they implemented their own
framework which never worked and then we
roll back to stand out and it work again
what became boring again and properly
you can call it now heavyweight ok so my
point is here in architectures you know
you should measure first and premature
optimization is the root of all evil in
architecture because if you will create
your own slow snowflakes with undertow
in jax-rs
no one will get why you did this and
there will be no support any questions
about this so then I would like so my
CPU is hot right now so but I would like
to switch let's see
who is from payara your Pyro's just have
priority I forgot always do you
read domain monitoring I think now
monitoring domain yes
server transaction service as you can
see we started in our tests 177,000 on 1
million transactions and there are no
rollbacks so what we got also now a
complete complete complete monitoring
with a full stack out of the box and
this is true for white fly if your
Liberty profile all application servers
this is what you get for free if you
start with your own undertow and jax-rs
we have nothing if you have jealousy or
a little bit but you get it for free and
the cool story is I can have it up Jason
so I can create a decent you know react
app to monitor that or if you have a
service bus of course you can consume
XML if you like years B's ok so this is
what you get for free and all the
bulkheads and are also included no time
to mention this yeah yeah this is what I
said this this last test is the highest
possible overhead because what I did
here they're here in payara and my
service always run in full monitor
configure you can see this is my
standard setup all monitoring even color
bar which is not used is high so the
highest possible sampling and monitoring
level so and this is why because we
measure in all the stress test in all
our our tests was the highest possible
monitoring if is good enough we can go
in production with the highest possible
monitoring and if not I will deactivated
so we always do as high as possible
monitoring Wi-Fi the same so the first
thing I do I activate everything so the
activating is not that easy but what you
will never do you will never activate
something in production right but if
everything is tested stress tested there
is not a problem
so this was the worst possible
performance you can achieve and this was
the slowest possible thing usually have
around 5,000 to 10,000 transactions per
second as a
transactions per second in this setup
and this is the overhead included of eg
B's of course there is no business logic
but I mean if you introduce business
logic do be pointless the whole
conversation I agreed questions No
then I would like to stop payara and
then go to junk again and junk because I
would delete it afterwards Java - Jarrah
payara micro now it's the micro and I
can say deploy please I think it's this
way deploy FAS should be target and then
we have here FIS
so now the PI are micro started and this
is what I really like in micro payara
you download this it can do this so what
is the in my eyes the ultimate use case
for micro it is simpler if you just need
this so if you have to create an docker
file you have just one thing you don't
have to unzip so the docket files a
little bit simpler but hence I have all
the documents it's not a big issue for
me but if you are starting with Java I
mean this is nice to see something like
this
so um paella micro monitor 170 used so
so performed GC it goes back to about
there are 30 and back to 5060 I would
say the same almost you had to make to
the a reproducible test I will have to
kill all the JVM switched on my laptop
but you see it is in the same ballpark
right agreed so um and the jmeter I
could start no oh we had seen 10,000
transactions per second you saw this
there were 10,000 so now we have 4000
this is PI R now micro but there were
10,000 so it wound up so I forgot to
show you now it's called cuts high in
higher okay and whitefly Hollow so now
it's we had a swarm and we have D hollow
swarm
now this is actually the thing to use
the hollow swarm it means it is ready to
use profile and you only have to specify
the app so you don't have you notice
that the whole mavin hell with all the
dependency issues I don't get it you
don't have to do this so and this is
absolute nice so what I can say is Java
- char micro profile swarm and then
point just to the same to the two DFAS
and it starts you see it started the
JAXA res CD I'm Jason bean very dense
transactions undertow and jax-rs and
then it said this is the advice that is
ready so um what is the overhead monitor
this was where is it Apache don't see it
like oh yeah is it monitor 70 used
perform GC goes back to 30 so it's the
first micro which you could save 10 max
someone asked me the question you know
what is my opinion by micro you seen out
the numbers now is your choice if you
would like to save 10 Meg use micro okay
and the problem with a little bit of is
marketing so payara is great but if you
go to white fly swarm this is what I get
a lot of questions so first right size
your services it implies something is
too big right and then if you try this
you see this simple project setup I mean
it's too hard for a session from scratch
right so and the cool story is what you
get then you will have to rebuild the
Piatt ad sorry there there the the white
fly and you app over and over again okay
now the last thing build times and
docker and clouds very important thing
someone said what about clouds why the
micro is smaller so that now I would
like to show you this okay so kill the
swarm and then go to FAS and now I have
my maven project so what I can do
do a little bit larger I can say maven
clean package
and it builds the app right so what I
can do right now I can say maven package
and and nothing because I forgot a
docker file so we need in FAS and I will
say I need here other and the docker
file and what I have to say is is from
this is my own doctor repository X let's
say white lie wild wild sly I forgot to
show you Tommy Tommy is very similar to
Liberty very very small that Tommy and I
always used it Tommy plus so Tommy is
also great copy target FAS dot war into
deployment there so this is the
dockerfile and now I can say Doka build
- tea Java one FAA food as a service dot
ministy built so now you have fully
executable image you can push to the
cloud so we can do it again now try the
same with fetch ours so in last project
they use a technology would not to
mention so simple boot took 40 seconds
all the dependencies were pulled and the
service was right the service was right
sighs afterwards but why I have to say
to wait 40 seconds just to see to build
open over game the same stuff
therefore the killer tip here use the
hollow swarm or micro profile don't even
try to build a server over and over
again doesn't make any sense
now a little bit of cheating because
docker images and what you see here is
the following
there's a lot of images wait a second so
this this is the last image so food as a
service and this is a 560 Meg of RAM of
disk by disk space as you can see if I
build it again this is 560 over and over
again so if you see just Alliance I
think no way that man hard discuss then
not space so something wrong with the
display right and now I show you
something doctor history j1 FAS now is
the killer feature of application
servers using the application service in
the clouds and thin Wars if you do this
look at that there's ah yeah okay so
what you see here the first layer is the
centers operating system was built six
months ago
now here I built this is Java six month
ago Java eight 200 mix then four months
ago I created a white flag and these are
the layers and the cool story is what we
built to Dell today about one minute ago
is 4k
so and this is why you always need the
separation between the infrastructure
and the war and the cool story is what
you do in the clouds you get too much in
em add some vegetables for example it's
German you get in Amazon Google Cloud
Asia or jelastic your private docker
registry and you will push the 560
megabytes minus the 3k once ok and then
what they are pushing the docker is like
a kid has been understands that nothing
change or delays are the same then you
would only push the three case therefore
in all my cloud projects were crazy fast
because pushing to the cloud it took no
transfer of three kilobyte but if I
would use let's say the swarm without
the holo I will create first my build
would be crazy slow I would have to
build in maven all the things and my jar
would be let's wait a second city junk
LS Minos so you see the nanos this is
hollow swarm is 86 Mac and micro are 60
Meg so what it means I will push each
time 62 max plus 3 kilobyte to the to
the cloud and this is significant okay
so this is when you have Clyde clouds
you have to really have a good reasons
to use fetch our super jars I don't even
get it I asked many times and the most
reasonable answer I got why they use
uber jars in one project say they
started before docker and back then they
didn't you better so this would I
understand but right now it does make
any sense if you think from software
engineering perspective why I should be
built over and over again the same stuff
with only three kilobyte out of 60
changes if I will migrate everything to
the pump I will I will build the 60 max
over and over again why if you know the
answer you can give me now or we can
move out and but I have no idea okay so
I think we're almost done with the time
right any questions because I have night
next session right
yeah very simple if the client has
already you know contract with red head
white life if they have Tomcat Tommy and
and if they have something with glasses
or Sun payara and I don't care I use in
my projects Tommy pyar and white fight
never micro so far I like micro but I
wouldn't why because if you have to
configure them there's you need the same
XML file somewhere there's not like you
need never need a configuration yeah
this is what I really completely against
so in my project you will have two
really good reasons to do this so I
don't get it still and I never got an
answer why to do this because in the
rules docker and clouds is absolutely
irrelevant and also I got in Docklands
pull requests you know to use alpine
Linux instead of sent OS but Luke sent
to us the commands all my clients know
with Alpine I would say if 100 makes per
machine once the machine who cares about
that you know this is the same story so
we can argue then make a linear or what
Lina who who cares about one other
megabyte of this space right and yeah
this is what I can tell you in five
years before you could complete
different answer I would say you use
GlassFish but the reason was grass which
was the reference implementation for
which you could buy support and this was
unique right something like this was
never before but right now there is no
support for GlassFish but there is
support for payara
it's also nice because if you get PI R 5
it makes appealing because last fish V 5
is the reference implementation for Java
8 and payara 5 I guess will be the
etched glass which where you can buy
support so they have a slight advantage
I would say ok then thank you I have to
go to the next session if you need ugly
sticker
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>