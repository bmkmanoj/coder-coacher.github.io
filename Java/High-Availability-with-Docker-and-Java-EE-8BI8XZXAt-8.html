<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>High Availability with Docker and Java EE | Coder Coacher - Coaching Coders</title><meta content="High Availability with Docker and Java EE - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>High Availability with Docker and Java EE</b></h2><h5 class="post__date">2017-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8BI8XZXAt-8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Java EE server and you get your
productions guys and say well now I want
to run this Java EE application server
what is that well no it's similar to
Java isn't it you know he starts the
Java VM but has an application on top of
it well okay so see mr. Java I know how
to start how no I'll just stop I don't
have to do backup I can do this that's
fine then you say well you know what I
have this application here
PHP aren't you are you working PHP yeah
so now I have this application here PHP
well PHP how to do this well PHP is
Apache right just run an Apache oh I
know how to do Apache I can do that okay
good
so then Ian Shasta right there he says
well we know guys you really should use
this this red mine issue tracker system
is pretty good is reading Ruby so you go
to the production guys well I'm just
going to use the Ruby application oh no
stop of that you know I had to learn
Java I had to learn Java EE I had to
learn Apache and PHP I'm not doing Ruby
no no no no no I'm not doing Ruby here
right
you know I will stop now this nonsense
you developers you're crazy you're my
worst enemy you keep changing things all
the time I'm just getting out now we're
going to define here in this company we
only going to use you know unless your
application server running Java 1.2
right and that's it no more things and
then you got stuck you can't do anything
else because now you piss it off your
production guys because they they're not
supposed to keep up with all these right
you know it's very manual process it's
very you know it's very time consuming
to keep all those stuff running
everything so what's the solution to
this containers right so what you do you
get your job application put inside a
container you get your Java EE
application you put inside the container
you get your PHP application put inside
the container you get your Ruby
application put inside the container you
get your C handcrafted application put
inside the container right you get the
craziness state yein is doing this mash
horn and JavaScript and you mix all of
that you put inside the container right
have you ever tried to stall node right
like
a lot of things right so you you put all
of this stuff inside a container and you
give the production guy a container
right so what does he do he gets your
Java container put he knows how to run
how'd you start how to stop how to move
your container around he knows how to
back up your container he knows how to
put load balance your container he knows
how to get your container from your your
laptop move your test server from a test
server to your production server from a
production server to your cloud provider
or you want to running more than one
cloud provider let's put my containing
multiple cloud providers you see them
going up this Brian
multiple cloud providers right here I'm
going to this right ok so yes he needs
to prepare this part right here yeah he
had no idea what I'm going to talk about
now he knows ok so you know so now you
can get all of these come here you can
you can have your container you can have
your application and you can really
streamline the whole process of getting
application running on multiple places
right and your production guys they know
how to do all these because containers
are standardized the biggest revolution
of containers exists for a long time
I think the first containers are seven
1970s right to make this for a long time
but only recently that we agreed on this
size of the box right we've all been
doing containers but like some of some
more Tupperware containers some were
like really big wood boxes we didn't
have a standard to it now everyone in
the industry has agreed to use docker
as the packaging right so now we know
the size of the box and so now we all
understand not only the sizes this size
how the hooks get to it I know how how
they fit together on top of the other so
if we agree to this with darker and so
now we can finally start doing the same
thing that happened of the second world
war uh when the first ships with
containers started they would run you
know a few hundred containers
today the big the big container ships
they carry ten thousand containers
fifteen thousand containers right and
you know they grew a lot during those
years same thing that's going on right
now the the first container platforms
just out you know Amazon container
service about a year old Google
container service about a year old
Microsoft's container service even less
than that like two months old you know
Oracle has just acquired several
container companies right so they're all
just starting to run containers that
means if you right now so containers
will be a revolution on how we develop
and ship software will completely change
a lot of things we're talking about so
we're talking about micro services
you're talking about Java EE you're
talking about other stuff all of these
will completely change the way we
develop software because we're running
top of containers so and if you're ready
right now if you understand right now
how to use containers then you are ahead
of the pack right you're going to be
prepared for this future that's going to
be this year right I mean I mean saying
that for the last year I've been saying
the next couple of years so do you very
halfway through it right
so through this year we're going to have
a bit more and more things going to be
shipped using containers so it's
extremely poor that we do this and so
I'm going to show you other bits how
many of you guys here are running Java
EE here how many of you know how to run
java application alright most people
okay so we're going to show you how how
you can run containers using Java EE and
but that's true for anything you're
doing right now and so you can you can
that's that can jump start your process
but but the truth is containers is the
right abstraction between developers and
operations right so if you're doing
containers there's no reason that
developers are the operations biggest
enemy right there's no reason for that
because now we have a clear interface we
can pack our stuff into containers so we
can innovate as much as we want and we
just delivered you to get to production
guys the container
the issue is what happens if you show up
with a big container like you know this
how long do those thing like 30-foot
right there very long right you know if
you if you show up with one of those
huge metal containers on port that has
no container cranes what do you do with
it right it goes crazy right you know
are gonna carry this whole thing are you
gonna just shove it inside a bar ship
that's not prepared for it that is the
biggest problem you know it doesn't
matter it doesn't matter if you
developer you're using containers and
you're kind of packing yourself in
containers if your production guys if
they don't have the tools to run the
containers what are you going to say I'm
not going to run this stuff here right I
have no idea how to run this thing I
have no idea how to manage the thing oh
you mean you mean it instead of one
server I'm going to have dozens of
servers I can do this
right so this whole process going on
right now just hold the tools the we
call the orchestration tools you know
all the orchestration tools are coming
on right now so that's the thing so in
terms of Java EE I'm going to go really
quick here on this on this discussion
but if you come to this URL here jav MN
it slash doctor-doctor je there is a
article that goes into very in a lot of
details and you can actually run all of
these on your computer so everything I
can do here is it just requires you
three four commands and you can run all
of these here in uh in your computer
yourself right so let's just gonna take
a look here how we can do this things
right so we all know we talked a little
bit about containers we all know that
Java EE is a server that has a notion of
containers right you know you have a lot
of contains the web containers ajb
containers and basically what we use
this for is that once you package our
application a special way it can run
image for application servers right oh I
like to say one thing here here Brian's
going to remember that you know
JQ e e I'm an old guy right so I kind of
you know if I put this here on on Oracle
they's gonna say there's not but not not
j2ee anymore it's Java EE now right the
thing is everyone has to me did Oracle
do good things for Java and the answer
is yes
Oracle did amazing things for Java open
JDK is much better now than wasn't then
it was in Suns time the Java community
has a lot of very cool things that
didn't exist on Suns time so Oracle puts
more people to solve security things put
more people to develop a Java so Java is
a lot better than he was on Suns time
right in a lot of ways in one way it's
not so this was the diagram that Sun had
about Java EE this is the diagram the
Oracle has about Java EE pretty boring
isn't it I mean like yeah he's like
that's okay right he's been Oracle for
five years no you you look at that's
fine right you know I kind of prefer the
fun one right this much better is more
colorful Milovan come on so I keep I
keep serious with j2ee if you see
nothing changing it's just the callers
right and the database not looks like
Oracle Beauty all right okay so so the
hell out this containers here and
because you put applications how to
contain you have a special way to
package your application
you know you now can run your
application in all kinds of different
application servers that's very good
very positive news for us we can move
application for one containing one
application services and access that's
amazing works very well but how about
installation application server itself
you know if you want to move from you
want to still use the same application
server but you want to move from your
laptop to the server in your company or
you want to move to the server in your
company to the cloud server why do you
do you have to reinstall the whole thing
again right you know you have to
reinstall application server we have to
reinstall all the dependency you have to
restart up the operation system you have
to reconfigure everything
not very portable isn't it's portable
between application servers but your
whole setup it's not portable so if you
want to use application server in a good
way
how about if you package the application
server inside a container that's what
doctors for right we can package the
whole application server inside another
container a docker container uh I gotta
there's a cool tweet the other day and a
guy saying my mom saw a doctor sticker
my laptop and freak it out
so docker is not blue whale okay all
right
if you don't know what I'm talking about
yeah forget it don't worry but um
docker is the packaging the biggest
innovation of DOC brought to us is the
packaging you know er Scott
well you know docker has no innovation
in docker he's telling me the other day
you know it's all our Linux containers
right LLS lcx right so how to say LCL
cgroups yeah let's just see groups right
in in in in Linux containers right
Solaris zones yeah okay yeah I know so
let's on is it a long time ago yes
both things are true the thing there is
not think the Oracle docker broth is not
the tools
it's not easy commands the thing that
the doctor brought is the packaging now
you can easily package a container and
everyone agrees that the package of
docker is a good thing so when um when
Amazon Oracle jelastic and all the
providers adopt that same packaging it
means that your container becomes
portable between providers so that's a
very very cool thing
um I don't we going to say something not
now later all right so so docker is the
packaging of the container that you can
use right so how does he does he work
right so you know how to huh when you
packaged in a Java EE application you
put inside Watts a year or a a war right
a year or war depending on how complex
things you're doing so let's do a simple
one let's go
that's my war right so I have my
applications or I'm just gonna put it
right here right so I have my lip my
warm packaging I'm just going to pass it
as a parameter so I don't have to change
my script every time I change my
application right I change change the
name of application up so you can just
pass your the name of your war as a
parameter so everything you do in Java
EE works nicely you know you've just
spat your application you're fine you
can use maven someone to send means I'm
using maven right you can use maybe we
should create your war file for example
um so then I'm going to run a command
docker build docker build builds a
container see the packaging builds the
packaging of the containers going to put
my application side the packaging and
I'm going to give a name to it so I can
reference later ok so basically I'm here
I'm creating a container so next thing I
need to do is this you need anyone
notice what changes here you're here
nothing change it yes it did this little
dot hinder ends right this is just
saying I want to build that container on
this direction right now and on this
reactor I have this file the docker file
the docker file is the instructions on
how I build my container right so I know
it has things like oh it starts from a
Tommy EE pre-existing image we're going
to talk about this in a minute add some
configuration for high availability add
some configuration for users right so
I'm just kind of hard coding everything
here just to make it easy so so again a
lot of things are hard-coded because you
can run this in your laptop right so you
know you go you go to the article
there's a github account there you don't
work for the github you just run the
whole thing in your laptop so we add
some configuration for data sources we
add that driver for post grade so it can
access poetry so you see in the
container I have everything I need to
run my application right so I have all
the libraries I need I have all the
configurations I need I have everything
I need to run application inside the
container and then the last thing here I
ads the war file and look I install the
war file in the web apps directory off
Tommy for Tommy this means that I'm
stalling the update Java Java EE
application if it was another
application server you might have to do
something different installed
application but notice that my container
will have the application storage ready
to run when you add your application to
the container that's an image right
remember when you created visual images
in the clouds that what you do you would
kind of create like a base image amazing
stall and then every time you change
application you just upload the war file
to the to the to the to machine with
containers we could do this with virtual
machine - but if containers can do a
very cool thing that we can create
appliances an appliance is a ready to
run image with everything that I need
prayer configured ready to run so I have
the latest version of application right
here install it ready to run what
happens if I need to upgrade an
application I create a new version of
the container it just just insert a new
version my container okay
so I'm going to do this really quick
then you know I'm going to start the
container here doctor creates create
create create and creating three
containers different ports right based
on the same image Tommy you are the same
configuration I'm creating a cluster
here and then I'm going to add a load
balancer this load balancer here is
another container I just download from
the internet I don't need to do anything
right now so you know I have some
configurations for it but that's okay
right so with this I have four machines
a load balancer three application
servers running on a high availability
solution with four commands for my
computer that's it you can run your
laptop this the whole thing and of
course I'm doing here doctor creates so
it just creates the containers when I I
can start it with docker starts or I can
do something easier I can just run two
commands in one I can just use docker
run and I'm just going to run those
commands right there okay
so with this four commands I have this
whole environment I have a load balancer
three Tommy's servers up and running on
my laptop what did I do with this well
you can get now the same the same four
commands you can run in your test server
and you have your test environments the
same four commands you can run your
production servers now you have a
production environment the exact same
containers you can run anywhere if
tomorrow you want to experiment with
jelastic right juh last right here you
can just run the same four commands on
July's platform and you have your pure
your your containers running the cloud
if you want to do Oracle you can do the
same thing right
can just run the four commands on an
Oracle machine in Oracle clouds and
you're going to have all this
environment running on another provider
right so very easy for you to migrate
things from one place to the next
it's very easy for you to test your
environments no no no more those things
all you know I might test environments
completely run production environment
because they are different things with
containers you have very similar
environments both sides and the
interesting thing is that a docker
allows us to do something more
interesting there is there is a load of
pre-existing containers in the internet
they can just download and use it
immediately
right so for example you know all these
sea of containers if there's a huge
repository of containers with lots and
lots and lots of pre-existing containers
and I can just go and say oh let me let
me find a tommy server and I also need a
poster database I also need a active any
kill a message servicing I just kind of
use them and I also need Cassandra
service you know toggles right there and
so we can use Cassandra and I can just
like connect my Tomy server to all of
those guys and I have a very
sophisticated environment I can just add
a load balance on top of this and now I
have a sophisticated architecture it out
configuring anything just reusing
existing come
Rainer's there you can download from the
internet and actually don't even need to
download them just by passing doc to
doctor a name of the thing you're using
doc you automatically download install
locally and run for you right so it's a
lot easier for you to build a very
sophisticated architecture a lot easy
for you to automate your own work you
know remember when you said this a lot
of people don't automate their own work
a lot easier first you automate our own
work alright so the cool thing I've
mentioned this a few times but all of
those providers here know including
Oracle and jelastic the two the two guys
are sponsoring us here in our tour those
guys here all of them they run
containers they all understand doctor
containers they all run docker
containers so you can actually have all
of the stuff running on any provider and
the cool thing is you know this
particular thing that we can do right
now so from all of those providers here
jelastic is they've been doing
containers for for longer than most and
one cool thing that we can do in those
guys in all of them we do eventually is
that we can actually migrate from cloud
vendors right today we're going to do
this after we finish the tour we're
going to host a series of webinars
online they were going to invite people
that could not come here to the tour to
come talk to you guys about cool things
so we're going to do a demo of running a
container running a positive that that's
minecraft run a minecraft server and
we're going to migrate the container for
minecraft from one cloud provider to
another cloud provider it doubt downtime
you you're going to be playing you can
do this you can be in your computer
playing Minecraft with us and we're
going to migrate the server from one
clouds to another cloud and you're just
going to continue to play right through
it we can do this today he's like oh man
that's not possible what you want to do
it yes but you thought you think that's
not possible no you think that's
possible right yes it's possible
right containers allow us to package
things in a way that we can we have the
tools today
to do this kind of things right that in
the past could sound like crazy but now
we can actually have multiple cloud
providers guaranteeing high availability
between providers and even live
migration off containers to different
provides so we're going to do all those
kind of things right so Brian don't come
here with me and say in how about you
connect your computer and then we can do
we can do those two things you want me
to do my first and you do for now you do
your first and then all right it's your
first right so containers really allow
us to do some very sophisticated things
and that's that's it it's extremely
important that you learn how to do
containers now right because the sooner
you learn how to do containers you know
all those guys will raise their hand say
I'm looking for a job right the sooner
you know that stuff the sooner you plain
within your laptop you know you know how
things was in the past yeah okay not the
past was like when I when I was the age
of you guys especially I'm you know you
think you're doing this yeah I'm just
gonna pick on you right now right so you
know when I was your age I was I would
see those vendors coming in and you'd
say oh you know you can use this this
very sophisticated piece of software
here is this object-oriented application
server as it exists something like this
right and very cool ah
and then you say ho in it how can I do
this well it costs $30,000 a license per
developer and so I would I would sing
down my chairs like okay I'm never going
to learn this you know I need to work
for a company that's willing to pay a
product it cost $30,000 for me to play
with it I'm not going to have that the
cool thing about today is everything
we're talking here you know from what
Ian said what otago said what I said all
of those things are completely free and
available for you right now
right so you can right now from your
laptop just do all these
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>