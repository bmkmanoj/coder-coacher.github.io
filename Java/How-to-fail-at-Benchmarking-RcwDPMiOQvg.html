<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to fail at Benchmarking | Coder Coacher - Coaching Coders</title><meta content="How to fail at Benchmarking - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to fail at Benchmarking</b></h2><h5 class="post__date">2015-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RcwDPMiOQvg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">the internet can see us yeah just record
so hoping for the best so I welcome to
night checking from devoxx here with me
yesterday PL apart heroin he's a working
for datastax company building a
commercial offering on top of apache
cassandra and just yesterday a new
version of apache cassandra was relief I
think it's 30 zeros absolutely 320
that's a big that's a big improvement
for us so can you tell me about about
Cassandra in general Cassandra itself
yes so Cassandra is no sequel database
that an open source no sequel database
that it hosted by the Apache foundation
project and it has no no master
architecture so from that architecture
there are two very interesting qualities
the first one is that since no node is
privileged from any other one it means
any node can go down it doesn't it
involve downtime at the database level
so you can have failing nodes you will
still managed to get one hundred percent
of time ah that's correct I know so I
heard you to tell me about a demo about
crashing and burning nodes like a on the
keynote of the Cassandra summit other
Cassandra stew meat yes so we had that
demo with where we would have two data
centers six node in each data centers
and we would randomly crash node those
words on raspberry PI's ah we would
smell coffee burn them destroy them
using an axe and yet the application was
still on it was still working although
those horrible thing would happen in the
data centers oh so typically you don't
get with access to data centers no you
should not try to do that but the idea
is when you think about it highly
available what does it mean it means
rarely unavailable but still it can be
unavailable yes we don't want that that
is bad we want always on and we shoot
for always on okay always long sounds
good let's get my son always all I like
that that's good and so the other big
quality is that since well it's due to
the architecture as well but when you
double the number of notes you have eww
your capacity and it's linearly scalable
good that's great yeah so um what are
you working on in a data stack so so I
shall talk to you a special task were in
the during the past year it was on
drivers performance so mostly writing
driver benchmarks identifying
bottlenecks and working with the
developers to remove those bottlenecks
and now I've switched to the commercial
offering that we have on top of
Cassandra which is datastax enterprise
and most specifically we are developing
a graph database on top of Cassandra now
or on top of datastax enterprise and I'm
writing the benchmark and the
performance test overall that we are
going to run to check that the we meet
our performance criteria okay so you're
a performance guy I am a performance guy
that's why I'm here yeah that's why
you're here so what is your box I'm
going to give this talk that is
literally called how to fail at
benchmarking because i love benchmarking
and because benchmarking is fun you have
to you have to see it as a fun activity
and we really often make mistakes in our
in our benchmarks and that's normal
that's normal due to how how it works
now you have to recognize those mistakes
you have to admit that you will make
mistakes regardless of how much time you
spend preparing you benchmark and you
have to run to to learn from the others
people mistakes as well so and from you
learn from your mistakes or from others
mistakes or uh both let me guess you
learned a Kirk I've learned with courage
yes so typically when Kirk gave a talk
yesterday and they were starting a
performance tuning activity and
immediately asked what is our
performance target and he didn't get any
answer so think about it would you write
a recursive function without a stop
condition but or not doing a benchmark
without a performance target is exactly
that you never know when you will stop
because you will always have a component
in your application that is slower than
the rest and when should you stop it's a
time consuming activity when we
you stop that's a first mr. so get the
get the target the requirements or comes
first and i start looking for where you
wanna go yes get clear requirements I
then make sure that your benchmark
actually answers the question you want
to answer that's another mistake it's
really easy to write benchmarks thinking
oh I'm going to answer this question get
an answer except it was an answer for
that question you don't realize that and
you have taken the wrong decision so
you're like a benchmark buster yes yes
in the new sequel world it's really easy
you see benchmark all over the place
that claims that one is faster than the
other usually between competitors
marketing departments mostly and I like
to think those benchmark are all true
but they claim different things now how
can all day those benchmark be true in
that case well simply because they omit
to tell you the environment their claims
may completely be true given a specific
context given a specific situation when
they don't tell you that they emit a
part of the truth and they claim that
it's a general truth right this is
another mistake you should always report
the context of your benchmark when you
are reporting results so you tell me
don't believe any performance benchmark
results I see that those to figure out
my own or figure out my requirements and
try to get my own benchmark results well
when you see a benchmark online try to
see how it was run on what was the
environment of the benchmark itself and
does it suit your needs typically there
are benchmarks out there that test
distributed system on one note
even here yes but why not if you want to
start your application your distributed
application and you have really low
requirements at first this benchmark
might give you good answers I won't do
that but you need to figure out this you
need to read the benchmark description
you need to rerun the benchmark and make
your opinion out of it you don't you
need not to trust blindly the truth that
is exposed online okay so I figure out
my requirements and I try to match them
on the benchmark so that available yes
and maybe I can figure out a way to pick
the right one or that's like of your
call it was it I'll give you a call yeah
give me a figure for me that sounds good
I can do that you're doing talk about
that one so like a figuring out what
benchmarks are not good and what you can
do wrong so yes yes so typically when
product managers ask you right this
benchmark and we want to be the fastest
thing ever you need to work with them
it's it's a it's a social exercise you
need to work with them and make sure
that you get precise requirements you
need to make sure that you get a clear
concise scenario that you can run
explain rerun and such yeah that's great
so great to have you here so i can just
a suggest for everybody come over talk
to pierre you join his session and um
yeah great to have you thank you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>