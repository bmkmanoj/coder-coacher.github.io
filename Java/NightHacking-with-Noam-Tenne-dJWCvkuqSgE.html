<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>NightHacking with Noam Tenne | Coder Coacher - Coaching Coders</title><meta content="NightHacking with Noam Tenne - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>NightHacking with Noam Tenne</b></h2><h5 class="post__date">2013-02-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dJWCvkuqSgE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right welcome to night hacking for
those of you joining us on the live
stream we're broadcasting at night
hacking calm and we have a live chat
window we also have a full crowd here at
the j focus conference in person so
folks who want to join us in hacking
move closer to the stage and folks who
actually want to have meaningful
conversation you should you should move
farther and farther away and we're also
monitoring the live chat here so for
folks who want to say hi to us such as
Derek from Cape Town South Africa hi
Derek saanson OMSI um say hi to us and
chat ask us questions or comments and
we'll we'll try to respond to them as we
as we go through so no tell us a little
bit about you and what you're doing you
work for Jay Prague yeah i'm a senior
developer forge a frog I've been
programming and messing around with a
JVM for the last 10 or so years and I
spread my free love for programming
basically yeah very nice so you're real
you're real hacker I like to think so
yeah so what sort of what sort of stuff
have you been working on recently what's
your sir objects at work or open source
things you're doing both and the pretty
ancient wine so it's work will working
mainly on bin train and if you haven't
heard of it it's what we dub the github
for binaries we can speak about that
sooner and it made me really dive into
the hole groovy world grains world and
I'm putting
knee deep in that now so I go around you
know I promote and country to different
plugins and implementations wherever I
see that can get improvement and I can
have input I try to do it bacon cool
yeah so what do we do when we do a
little bit of both so well we'll start
out with a demo of ben tre the product
you're working on for folks who haven't
seen it or don't know what it is and
then we can get into a little bit of
hacking on some of your some of your
projects that you do in the evenings and
weekends yeah sure thing so just for a
small intro about been trained armed or
to speak a bit about the philosophy
behind that so we've noticed that
there's a bit of a problem with
distributing binaries in the John the
word or maybe in the different JVM word
so we've got a repo one which belongs to
maven and most of the build tools and
the dependency managers use v / one but
Reaper one has its forms so if you step
aside for a moment and look at words
like Python for example there were
really nice public repositories it's
very easy to upload your binaries into
their your developers they have a face
all right I got a favor for you to ask
for you the NC took over my computer can
you quit your VNC server for a sec yeah
sure thing sorry
this happened to me once before with VNC
when I was desktop sharing and it's not
it's not very pretty
all right there we are we're back so I'm
going to start up start the server again
and I'll connect to you via VNC and then
they can actually see what's on your on
your desktop
all right buddy better all right keep
going yeah so main problems with Reaper
one which belongs to maven is the fact
that you've got terrible bureaucracy if
you want to upload your binary you have
to wait a week or so filling in many
forms and that and you're still
anonymous sender and even though you
have all those different bureaucracy and
all these formalities we still see a lot
of garbage in there and we want to store
that we want to have one big open place
we can host all your binaries no matter
what whether it's rubygems android
packages rpms debian files whatever you
want and you can do this son of it's
completely self service and people can
give you feedback follow you and you can
basically take ownership of your work
very nice so actual sensible binary
repository system yeah throw releases
obviously so the basic UI the homepage
you can also by the way register today
and ask for an invite it's popular guy
looks familiar Roger yes that's a this
is actually pretty funny so on the first
day of of the conference it went too
many people here could with just the
workshops and Andre scheduled the
hacking gotten so I do when hack some
many people come and do some good stuff
a hacker garden ended up being me and
andre and there was no internet in the
hacker room but we moved out to the
lobby and that was fine so what we
actually did which was pretty cool was
we took the ascii dr. maven plugin okay
and we basically ported it into a Gradle
plug-in because great was in my opinion
obviously it's much nicer than maven so
we started all day we hacked around we
got something nice and working really
good and in the end we published it tube
entry in two minutes so you can see that
from the home page you can see new
members which are joining new packages
have been the bells life and raise being
one of them so let's see andres so by
the way I'm with you on grade all over
maven fist bump man
so you can see was watching Andre I'm is
different repositories so he's recently
migrated Griffin to be desired so
there's a whole social aspect yes at
that Karl Karl Quinn is that is Colin
Quinn nice sounding too I with different
crew too and we can also drill down to
the different repositories so this is
the one we created yesterday to ask a
doctor you can see it's a package the
Gradle plug-in it's got one version
which is 0-1 and you can also download
the files to that completely public you
can point whichever bill truly used to
it whether it's may even a Braille and
they can speak as you can view you can
rate the plug-in or the package in any
way you can link it to your own
repository send messages you can do many
things which so it says it says beta how
would people try this out if they wanted
to give venture HR so they just go to
Ben Tre com they fill out the form they
get an email and an invite we accept
everyone these days it's no longer
private and have fun distribute your
binary is it looks okay alright so i
think that's that's enough about Finn
tray let's because you actually you work
on you hack on ben tre yeah yeah so what
sort of what sort of stuff have you
actually been doing so one of the things
i like i said groovy which is a reading
tonight to work with and also will you
have to test your code obviously so for
testing i also use Spock so this is a
really magnificent testing framework I
think it actually brings back the joy in
testing but it is so good I so it's
written purely in Java but you can use
it for writing groovy tests and so on it
has its own yourself so it's much nicer
to write tests tests are feature driven
I think it's a really big hit and more
people should be using it yeah you can
you can use spark even if you're not
coding groovy yeah yeah yeah that's John
comes to or anything basically
fits on the JVM you can Spock it yep so
one main issue I had with spunk is the
fact that you have different set of
methods maybe we should write a small
test to demonstrate the point so let's
open a new test call it the sample spec
so since Spock is a specification driven
the convention is that you end your test
name with spec you extend this fox
specification class and now you are a
spark test so how do you test you just
write your feature method let's test
something and then you have different
blocks so you have one block for the set
up one block for making the different
assertions and option your the blocks
link for such as iterations so if i type
this setup I'd simply write set up
create a block write code here then I'd
like to continue on to my expectations
and assert a shin so i could write
expect let's write my code here and so
on now so to do kind of behavior driven
development yes inside of your test with
the nice syntax yeah very a lots of
syntactic sugar and now the ideal is
that you have one feature method pro
feature so obviously you can get it at a
dirty but that's the point okay but you
something about spark wasn't you said
that wasn't quite working for you yeah
the problem is that you have different
ways to set up your test you have one
way to set up the complete specification
class this code will run before any
feature method has run and it will run
once so you define set up spec and it
will run once and you can set up the
feature itself within the feature now
the problem is when you start using I
iterations so if I'd like to start I
iterating I do it with where and I do it
with a certain variable and give it the
values to
in the list for example the problem
being the setup block will be called on
every I a shin so if I do rounds 1 and I
do bounce to sorry every iteration will
invoke the set up so it's good but not
good enough because what happens when
you set up block is very heavy so you've
got some heavy data loading in a set of
spec heavy data loading and set up this
world and every Hydra I think a testing
purist would say that you want the set
up to run every time to avoid side
effects between individual test runs but
I I've had the same situation in big
database data heavy applications where
it just wasn't well maybe my test sucked
but it wasn't possible to get the actual
data set of time to something reasonable
it's true you should try to be as pure
as possible girls too pragmatic so the
like he said if you have to perform an
integration tends to research service
actually it's a great example what if
you have a search service you have to
load loads of data onto it and that
takes a long time you want to perform
different augmentations of your data and
test each one each one is a heavy
operation you don't to do it on every
test class which i think should be doing
a small example yeah I can make the
point so let's say we have a storage
service open a new class
and we'll create a new method called
load data as you can see it's very
complex loading loads of data good very
nice yeah it took me a long time to
write it yeah yeah that's gonna take
forever to run that's yeah so we want to
call it once before everything loads
because we want to work on the same
dataset so we'd call it from the set up
spec so we do new storage service
assuming you've injected it because you
can also inject using spring and called
service load data this is fine we'll
also make this a shared field so on our
feature methods can use it and now
accessible to all features now let's try
to perform a augmentation on our index
data so will create a new search service
we'll give it a new method will call it
augment index give it one parameter
just to specify which method we want to
offer the index n also very heavy
intensive work to be done
and that's also adds perhaps a comment
methods we want to count the number of
elements in our index for example
Nick featuring along
so
for its counting elements
I don't think anyone here is gonna
criticize your spelling they were picky
lot so grace good and where we turn some
arbitrary number because don't really
matter like five now assuming our
augmentation is really heavy we'd want
to write it before each feature because
each feature specifics specifies a
certain augmentation so its core new
search service and augment index using
method one make this into a field too
you should probably initialize it on the
field
right then we can perform some sort of
search like counting the elements
and we can use also the variables as a
search phrase so this means now that we
set up the feature methods we augment
the index using the word block we
perform two iterations one for each
value in the list that provided to the
parameter mm-hmm and then we perform a
count but so assuming this isn't broken
and I can run it will see two counts for
van one and Val tune okay so maybe a bit
difficult to see here in the output can
you see it yeah that's all the screen
but it's just really tiny yeah I don't
know how to enlarge it basically what we
can see in the log is the fact that
we're loading loads of data we're
augmenting using method one then
searching for Val then augmenting with
method one again and then searching for
Vance too that's because the setup block
is called on every iteration and this is
bad because potentially augment index
could be really heavy and you don't want
it happening on every iteration what
happens if we have ten such methods and
you do it again this is these are many
cores okay so you you capable or hack
yes I'm pretty sure you can do it a lot
nicer maybe there's a way to do a new
blog called it set up once and call it
here but I don't think we really have
time for it and I should probably do it
anyway but still so a really nice
feature of spawn because it also gives
you extensions where you can add any
behavior you like to spoke and it gives
you certain method handles such as
before specs before features before
methods anything you like basically and
this is starts out as an hour annotation
so you can create a new annotation
annotate either your spec your method or
a themes perhaps and then perform
different interceptions from them so
created a new annotation ford custom
extension annotation as you can see it's
fairly standard nothing to expecially
here the only special thing is that you
annotate it also and provide it with a
implementation class which I called
custom extension
so how does it work you provided with a
certain value is a normal a notation and
once your who could get scored it gets
called into this class now as you can
see it extends a base class abstract
annotation driver sanctions and you've
got many different methods you can
override which gives you all these
different hooks so you've got the method
for the spec for fixture field and so on
we're interested in inter venting
intervening right before the method so
we'd use visit feature annotation right
now well and you can see you get all the
data he get the data about you
annotation or the information about the
feature but we're interested in one
specific instance so the feature gives
you nice information but you can't
actually do anything with it apart from
extract information what we can do is
add a method intercept I'm which means I
can get an instance of the currently
running spec class and call a method a
new method I like groovy like so that's
what we'll do to setup method yeah so
how would it get done let's go back to
an annotation and let's create a value
value but this will actually be our
sorry
no remember the syntax wrong
okay so this will actually be the name
of the setup method which we would like
to call behind the scenes and we can
annotate the method custom extension a
notation and record it set up oh never
mind so once we know we're in our
implementation class of the notation we
can use the hook so we've got access to
the annotation itself we've got the
value of the method and we've got the
feature information so with us using the
feature we can add a new interceptor so
you can see the method supports an
interface of I'm at an interceptor which
is what we're going to implement
actually will implement something a bit
more specific it gives a small tools so
let's go and see I methods interceptor
okay I'm about the abstract method
interceptor which also gives us the
different hooks so this is what we'll be
using so let's create a new method
interceptor we'll call it the setup ones
into a scepter will extend the base
class from spunk
and we'll use the appropriate hook
method which is intercept feature method
awesome so what would actually do is
where pass on the name of the method
which we would like to call before the
feature and then construct that into the
Interceptor implementation and add the
Interceptor so it'll listen all right so
let's create a field here something
silly like method to call will construct
the Interceptor
give it the value of the annotation
because that's just the method we like
to call and register it as an
interceptor this issues it will be
called before the feature method so how
do we actually do it within the
invocation we can see that we can
receive the instance um there is shared
instance this is actually the instance
of the spec math class which is
currently running and since this is
groovy you can call a method directly
onto it which I really like this and you
invoke it so
one thing to remember is that after
intercepting your self to proceed
because otherwise your featured a method
just won't run have you ever done that
before yes took me awhile to understand
why doesn't work but then I discovered
that's why you should read documentation
okay so let's create a new method called
set up Olga because that's what we
expect to be called and will continue by
calling augment index from here and
leave some other set up in this mini
mart so let's see if it works maybe this
maybe doesn't nope
ok this is the issue it happens when you
want to proceed
yeah and for some reasons on getting
corns oh yeah I'm good a typo here dhara
she be there you go yeah
so I should I should have caught that
since I'm your coat I'm your cocoa der
here ya know crumpet soon up looking
okay let's see
she sent a bone
maybe someone on the chat has some
insight towards it
we're anyway it worked on my machine
that but that's the point of the issue I
mean you get it I don't think there's
any pro Cee'd here either
so what's the exception you're getting
again basically what it says is that I
don't have any data in my data provider
which is this okay so it's as if the
setup didn't get run yeah so it's
obviously a lie let's check it again
this is by the way a big part of hacking
it's looking debugging it figuring it
out yeah the damn this is this is real
stuff we've all we've all had um even
even Heinz earlier got stuck and Thomas
you still here helped us out but it
looks like it looks like he's it's not
as much of a groovy expert as a Java 8
guru and you suppose everything the
house seeds with a method call and
always call this method know what that's
the bucket the hell there you go let me
see if we even gets here so let the
before feature which is good iterations
looks like we didn't even get there so
something wrong with the annotation yeah
didn't even get to that line so maybe
this is the Interceptor registered let's
check it out so construct the
interception we give it it on you
there's a custom extension registered
just an extension let's check the
annotation yeah shouldn't be good let's
make sure
ok so we are here
we have the Interceptor maybe it's the
wrong one it's not a Eurasian takes good
yes
very strange all right so hold on a sec
while your um yeah sure thing debugging
and thinking yeah let me let me pop up
in the chat and see who
ok so here here's here's some of our
comments ok so he'll your buddy Baruch
says hi hi Brooke hey both insight bowl
I need in tonight I don't have some
chuba jabba and those those guys are
having way too much fun chatting back
and forth and Mohammed shock here from
Mumbai zone as well so hi mohammed hello
even even Peter doesn't know they're
there they're trying to help you from
the J frog hasta remote debugging get me
look daily I'd see a summary we'd
probably run out of time and people will
go to the keynote and that's fine where
this is for the benefit of the folks on
the livestream the session here is
already started they're gonna they're
going to bring in the big guns all right
let me pop back to your screen so we can
see where you're debugging yeah now too
much interesting though OOP okay yeah
so if about the invocation and I get the
instance specification instance for the
current iteration should be good
abstract math interceptor doesn't have a
default constructor anything which you
didn't implement so did you actually get
to this line where it calls the method
on the distance it doesn't even get to
the invocation instance here so I'm
pretty so it doesn't even hit the yellow
feature interceptor yeah so it looks
like it's though the feature method
isn't even being calms tengas we can
discover from the intercept switch cases
every one of switch case
no neither it's very strange
we could try and giving it without the
iterations it'll probably fail on
something else but and see if it gets us
any further without the we're modifying
the variable just give it one but it's
not right yeah okay so it it's passing
now but it's not actually loading doing
anything set up stuff for the data yeah
let's check this again so
what the setup unger
let's fix a good too so we add the
Interceptor and it's registered let's
see who gets it
ok
so I'm thinking then you eat you down
did it missed it
let's see what the unification looks
like
that's just something that's good but
the two blocks expect instead of our
interceptor is registered
looks legit
ok
and our current instance is a set of
one's interceptor so should be fine
intercept feature execution yeah looks
good
oh I see should be intercept sorry I'm
to override
feature execution
all right I have no idea what the
difference between future execution and
she sure I think it's pretty obvious
ones for execution ones for methods okay
that's yeah okay yeah good much better
haha shed instance I think that was a
correct one you know this works we don't
need this is too is too you know yep rah
all right now but you can put the test
back to the way it was before with the
Elm yeah multiple iterations and then
we'll we'll call it a successful hack
and then we can actually see why we went
through all of this oh ok so this is
very nice so you can see also it's a bit
simonia but you can see in the longer
that we've lowered the all the data we
augmented only once yep and then we set
up twice which is a nice set up so we
don't mind and run a nitration for every
value nice it's all right it was so it
is a nice hack and a good way to do
initialization and thanks for sharing so
this is great so P other people don't
have to go through the pain of doing
this now that they've seen the solution
um its patented patented rights reserved
it and im sue your ass if you Ste really
know very nice I'm i read a blog about
it or something whoopsie yeah yeah if
you blog about it let me know and all Oh
broadcast on the night hacking shooting
my blog Steve on Java com yeah cool
alright so I for a successful hack see
I'm actually one of my one of my
attributes as a programmer is I'm
extremely stubborn so you wouldn't have
gotten off the stream without getting it
working haha I've got a 94 morning so
you get the night hacking calm we would
have pulled in a guy who wrote Spock to
help us out
geez thanks and it was a pleasure being
here and with you two in this conference
thanks everyone over the stream yep and
that actually concludes the J focus
night hacking Nordic tour it was the
head of a rhino fix like a head of a
right yeah yeah no it was it was it was
fun I got some good snowmobile action
and it's actually really snowing heavily
out here and in Stockholm right now and
you know great interviews with you know
Heinz Holly Venkat here at j focus a
whole bunch of other folks so check out
the recordings at night hacking calm and
thanks very much for for joining us on
the live stream thanks
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>