<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JSON Support in Java EE 8 with Dmitry Kornilov @m0mus | Coder Coacher - Coaching Coders</title><meta content="JSON Support in Java EE 8 with Dmitry Kornilov @m0mus - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>JSON Support in Java EE 8 with Dmitry Kornilov @m0mus</b></h2><h5 class="post__date">2017-06-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tJgbFkTemfI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi my name is Mitra Kornilov and it's a
JSON support in a Java Enterprise
Edition age coding session we will start
with a little bit of legal stuff so this
is safe harbor statement which basically
says that what I'm going to talk today
what I'm going to demonstrate could be
not a part of for the final product so
you shouldn't make critical business
decisions based on that now a little bit
about myself I don't have a capture in
software which supports
picture-in-picture so I can't make it
the day as other doing there the corner
of the screen you see my picture my
video talking so I just put my photo
here it's how I look like I'm from
Oracle I am Jason Biden congestion
processing spec leads last year was
awarded as outstanding spec lead which
are very proud of I'm also open source
enthusiast and eclipse link project
comida
enough introduction let's actually start
coding and this session is organized
today that I created a project template
which is a using JSON processing and
Jason binding and I will demonstrate
live how to use adjacent proteases and
Jason binding features from very very
easy from very simple ones to some
advanced ones and I will also
demonstrate how to use JSON processing
condition binding together the result of
that I will put into this repository
alright maybe I will clean it up a bit
maybe I'll put some comments there to
make it nicer before putting it there so
don't expect that it's exactly the same
as you see
you will see today but it will be a same
from the functionality point of view so
this is how my project looks like you
see that this is a maven project it has
only three classes here and through the
model classes I will touch them when I
will talk about JSON binding this is the
console application I already pre filled
some of the UI themes here so we won't
lose time coordinate so when you run it
it will show these texts and you select
the number you should type the number
which do you want to run and the GMOs
are listed here so I have 8 things to
demonstrate we'll start adjacent
processor and after that we will go to
Jason binding right well actually you
select the demo it runs the
corresponding methods itís even methods
here and currently this methods are
empty so I also not Oleg and I empty
this is not empty but as you see this is
just data preparation nothing else right
and I will cause I will add codes to
these methods you know online unity
session over else resources which is
what the JSON documents I'm going to use
for my samples and important I suppose
is this this is for maximal main file
which is also very simple let us go
through these quickly dependencies I
have only four dependencies and these
are Jason protesting API is I'm using
milestone 1 version Jason producing RI
as base and the same for Jason binding
API and RI which is yassun and in order
to add yeah so here I've had
and this repository here because yes
only uses eclipse foundation
repositories it has its so release
repository mission space right built
section is also very simple where are
only free plugins compiler with 1.8
target and source simply plug in and
exact plug-in because I want to run my
application from console main let's just
take a look how it looks like if I
compile Clinton's soul and exact Java so
based on building the project and
running it oh see maybe what builds all
first time it usually takes time
no it was relatively quick so you see
this UI right and you select the DMO you
want to start and nothing happens
because these methods are empty at the
moment so I need to queue to creat ok
now let's open our demo and start coding
something Jason parson demo demonstrate
parsing of JSON document so what's all
about I will show how to open JSON
document how to use JSON parser and the
task is to list all the parts in events
and the corresponding keys in values and
after that ultimately how to skip some
part of your document if it's be Jason
Jason so this is the document I'm going
to use for the app so as you see this is
a JSON document in the least and at
least of free Jason's Jason Bourne super
agent it has some phone numbers so you
can phone him if you want another one is
Jason Voorhees remember of right is 13
so he is a maniac killer he also had
some phone numbers
I'm not recommending giving him a cover
and the last one is Jason from the Asian
Greece he's the lead of Argonauts if you
remember what's bad right he doesn't
have any phone numbers because that time
phones didn't exist right anyway okay so
let's just open this document and the
parser parse it parser works the way
that it just goes through the document
and the Banat gets when it reaches meet
some jason related field or talking or
whatever it's basically then right so
let's just create a parcel jsonparser
parser it's imported equals to jason dot
create parcel so jason t has these jason
class right I just don't see what it has
it has methods to create a refeed
factory methods right here's some
builders batch generator blah blah blah
a lot of things right so when you need
to create you always know that you need
to create it from J subclass so it's
very simple create parser and we need to
pass the input stream to this parser
like these a get resources stream and we
are going to read our Jason's Jason
document okay so we have a parser now we
need to parse a document how to do it we
need to have a cycle which cycles until
parser has next event looks very similar
to if you are working files in a similar
way so now we need to get the event
itself and we use parse the next method
which was the event so event E right
I'll say this and now we'll just print
out name of event and let's run it and
see how it works
compile it slow yeah got it running
number one the mo and you see already
real so here if we open our JSON
document you see that when parser
reached just talking it start array
start the Raven traced enough then go
start object which is here and after
that goes key which is name and after
that radio still adjacent ball blah blah
blah blah blah blah and when it reaches
the end of the array or the end of
object it has end object and the Ravens
right so this way it parses all the
document so what are we going to do now
we are going to email it reaches the key
we will just print out the name of the
key when it reaches the value it just
prints out we will print out the value
let's do that close it run to the demo
okay so in this case we need to
distinguish their bets right so when we
get this key name or wave enters value
string will print this value if some
other way we have to just keep that
right so in order to do it we just need
a switch statement here switch sorry
switch event right and in case it's key
name or in case it's very string we will
just print out the value parser gets
trick
so which parcel get still croissants
actually the value from education
document to make it a bit nicer or we
need to remove print line here making
just three
and make it like this and okay let's do
it this way we need to find break that
doesn't look good I think so let's just
check it okay I forgot to creat Street
and compile it again my computer's
rolling now when I'm starting compile it
just was like that hopefully you won't
hear this but I hear that okay it's done
and you see that if it's key key name
when you steal Jason Bourne blah blah
blah it looks great
okay so I assume that the first two
tasks are completed but we still have a
third one imagine that imagine that
these phone numbers array is huge Jason
Voorhees a super agent he works in
different countries I suppose if in each
country he has a phone number maybe many
phone numbers he changes from numbers
every day you know super agent so his
phone numbers array can be huge and we
don't want to parse it we want to skip
it right so how to do it it's very easy
and because Jason P version 1.1 has
methods which allows you to skip erase
and skip objects basically when you
inside immediately go to the end of it
right so it means that in case we are
either a we need to skip it parser skip
array right but now if I keep it like
that
it won't work because the document
itself is the least is the array right
so start rings are first element
so it will just don't do anything we
need to only skip phone numbers array in
order to do that I will introduce a
string
where we'll hold the current key we're
in so slightly modify our sample that in
case you meet the key we just put it
into our variable yes you need to print
it right you need to print it and hang
it right here right and if if these key
equals four numbers I need to skip array
and break right so that's good news
yeah it's okay so let's just run it and
check up a little bit again check that
it works I have a feeling that
compilation slower and slower because
we're aging the code there may be its
objective okay number one okay I choose
like working so you see that we have
starter and after that wedge up it'll
end object immediately right so we don't
have phone numbers here oh we have a key
for numbers but what inside is skipped
so this is actually exactly what we
wanted so huge phone numbers array we
just skip okay so we finish through the
first demo let's jump to another one and
Jason generated them oh and here we will
generate a document similar to jason
jason in the course sometimes you need
to generate jason in the code to do it
Jason B has a class called jason
generator now just create it
I call it Jan right then again if you
need to create something I need to go to
Jason class right create generator beta
to cast and here we need to pass where
actually we want to generate it right
out output stream and we will use system
out for the scripts
okay so we created the generator now
let's start generate and the first
element is basically we have a list of
Jason's right so first element is a
start
all right right star all right and after
that we are going to put the third JSON
object I mean Jason Bourne here object
containing Jason board here so we need
to write start objects right you see
that a generator has a nice builder
interface which is very easy to use so
after that we need to write our stores
property right and the key is name and
the value is Jason Bourne
and then Jason board like that and the
second property is profession if I
remember well profession and the his
profession is super-agent right and
after that goes array with phone numbers
so we need to write start array and now
we need actually pass a key here right
four numbers right
and inside there again we need to write
start object and in that object we have
two properties first of all is tied for
type of phone number so it's home and
actually the number itself so right
number and if I remember well number is
like that it's not because I am phoning
him a lot just because number is very
simple and this is the end of the object
so we need to write the end of the
object right and JSONP has one method
right and to write and to end everything
so
it's used for the end of an object and
for the end of array so we are closing
the object now we are closing this array
now we are closing out a small object
and here we are
Oh closing our three and what also have
to look at the flashes and it looks like
that's it then just start it and see how
it works like forgetting to create all
the time so let's compile it it's
supposed to produce like a source part
of our JSON JSON document I use in the
first sample let's take a look here and
here this array first object Jason
Bourne super agent phone numbers blah
blah blah blah blah blah so it works
great so now we can go to the fourth
sample and for example is streaming API
right so in JSONP 1.1 we added support
for Java 8 streaming API so we can
actually read the JSON object and using
steaming API to do something like that
and from this sample I will use another
JSON document I prepared and this is a
list of like a shopping cart and here I
have again this is the least and it has
free object there so it's what I bind
and by Martin ball 400 bucks and buying
a video card for 500 bucks
so it is nice fun it's supposed to
collect an 18 g-force or something like
that and I buy the PC case which is a
quick cheap for hungrybox I'm not sure
that I'll be able to assemble a nice PC
from that but anyway this is just a
demonstration right and our what are we
going to do we are going to use
streaming API to get the total of the
cars right
count dude first of all we need to read
the JSON document and we will use JSON
the reader for that Jason the reader
reader sorry
later equals to again Jason create
reader and we are going to create reader
from our card document card yes right
now we need to read everything to JSON
array because its array jason array now
actually do it the other way around so
because I need to demonstrate a
streaming API so the less you see is
reader we need to read array right like
that and that read array it has a method
called stream so get a rest sleep so now
we can use our streaming API right so we
need to oh no need to collect all right
writes just need to collect because we
actually need a map right we need to map
and not map we need to map to double
because double the price is double right
now we put a simple lambda here which
actually extracts the price from our
objects there and lambda will look
something like this we need to get the
object as JSON object right so mist we
got our JSON object which has a name and
price here right and we need to get a
number value for a property a City
properties price if I remember well it
is check quickly yeah name and price
okay and back price and we need to get a
double value of that so it's easy as
that and after that we just need to
summarize all this that's it
and to print it out I just do I just put
it to variable and I print out this
variable here let's just run it and see
does it work or not and the amount of a
total amount will be supposed to be 700
bucks if I remember well this yeah
700 so look it works so and this is how
to use Java it seems a streaming API
with JSON processing okay now we are
jumped into the interesting bit which is
JSON pointer this is a feature of JSONP
1.1 and which is one of the most
requested features and here I will
demonstrate how to create Jason pointer
and how to print out its value hi
first of all left-click pointer let's
use our Jason's document and create a
pointer to profession of the first Jason
Bourne right it will look like first of
all we need to create a Jason pointer
again P Jason create pointer right and
then sign the pointer we need to put a
string which is something like XPath
inside the JSON document so we always
start with the root and because it's
array we need to get the first element
of the array which is 0 and after that
we are getting a profession property
here it is it's very simple
now we need to apply this pointer to
some JSON documents to extract this
value from there so basically we need to
read our Jason's as you can copy it from
here yeah
so we're reading our Jason's documents
and let's just create an array jason
array Jason's and it's imported from the
reader reader iterate so we have Jason's
right now and now we can apply this
pointer to the document right so it does
it it works away that pointer and it has
getvalue method right and we pass our
Jason's here right and it's supposed to
get the value corresponding to this
pointer from them so it's Jason value
Jason value profession and print it out
precision to string let's see what we
will have
combining compiling yeah and this is
number four and it doesn't work right
and it says non-existent name when you
pair in the object blah blah blah key
profession I made a mistake somewhere
here raw fish
yeah it looks okay but here is the wrong
document because I could be pasted here
it's supposed to be Jason's right and
then I put the card there right sorry
about that so let's just try it again
okay I hope now it works and it does so
profession of Jason Bourne super-agents
right so just to confirm that it works
then just change it to this and it
should display a profession of the
second Jason right let's just run it and
it's supposed to be maniac killer is it
yeah when your killer so this is how
Jason pointer works okay
so finish - Jason pointer and the next
one adjacent page right what is Jason
page
Jason page is basically the ability to
pet you Jason document basically change
them or add something thing there or
remove things from there it's similar
you are working with source code
repository to eat for instance right so
you have a source file and you create a
patch you change something you create a
patch not that you apply the patch to
that source document to produce new up
right this is the same vein JSONP right
and if diiemma will take out jason's
a document and we will create a page
which has multiple things there and it
will remove the last Jason from there
with only came right and it will replace
professions of resource to Jason's right
so in order to do it let just read
Jason's document like this I copy pasted
here and hopefully it will be right this
time Jason's Jason and we have Jason's
Jason right here now let's create Jason
patch Jason patch right Jason fetch
fetch we use Jason class to create patch
again but we're going to create page
builder here we're going to build the
patch right so create page builder and
the first thing we are going to do we
are going to remove and we are going to
remove the last jason which is a little
Argonauts we don't need him here
and as a parameter we supply the pointer
to the object you want to remove and he
is a number free in a released so it's
like that right the second operation is
going to be replaced and we are going to
replace the profession of our first
Jason which is Jason Moore and replace
it with maniac killer so he will become
a mini killer which is maybe right
because in the super agent he's keeping
a lot of people's of his sort of a
vernacular right and we are going we
don't have we want we don't want to have
too many killers in our list so we will
replace a profession of Jason movies to
super agent
and it could be true as well because in
the movies it never said that he is not
separation so maybe he is actually super
agent doing some very complicated tasks
or whether anyway so it looks like this
okay it's so sad because I forgot I
forgot to build right now it looks okay
and now we need to apply this patch to
something right
basically we similar pattern we are
using here all right patch apply and we
applied it to out Jason's list right
like that it will produce a new JSON
array result right and we need to print
out with result to see that it's okay
result to string right it looks okay so
let's just run it and see how it works
okay and this is number table number
five okay so what we have here we have
adjacent ball and here is a mania killer
works and we have Jason Voorhees and
he's a super agent great and we don't
have Jason who is are going out so it
seems working so this is how to use
Jason patch and it looks like we
finished with Jason protesting demos and
now we'll jump into Jason binding BMO
right and what is Jason binding Jason
binding key the framework which allows
you to buy the Jason to Java objects and
vice versa so basically serialize and
deserialize java objects to and from
Jason documents and this is the
sample where I actually have some pre
filled something's right and what is
that I just created the model classes
for our Jason's right so person class
which is which has a name and profession
and the list of phone numbers and phone
number is this it has type it has number
and what I did here I just pre field I
created to Jason's list basically but
same as here right but Angela okay
so assume that this Jason contains the
same data as our Jason's JSON document
right and here I will demonstrate how to
serialize this into Jason and some
customizations like formatting Jason
changing property names changing the now
feels behavior this kind of stuff but
we'll start with we need to actually
create with Jason binding agent Jason
button instance first right and I'll in
Jason P over main processes Jason Jason
vo main projects is Jason be right but
it creates like a different way so Jason
B Jason B equals two it imports
Jason B builder create it just creates
Jason B agent with default settings and
we design Jason be the day that default
setting suitable for
everything so which is the standard way
of creating Jason and after that we need
to serialize out Jason's list and it can
be done like with Jason be to Jason and
we are passing our
Jason's list here and we say look just
two lines of code and we need to print
it out like that and now let's see how
it works if it works they just run it
okay and this is number 6 DM oh yeah it
produced JSON document which looks
absolutely the same as our Jason Jason
but it's not formatted right so I can't
really broken it let's just add some
customizations here and which produces
we're formatted output right in order to
do it we need to create Jason B
configuration which is stored in Jason B
config object so all configuration is
there so we're creating in you Jason B
configuration and so which is which is
what you can configure look many things
clockwise order stick gene coding locale
adapters blah blah blah many things here
but we will use this one for now before
marching through now we need to pass
this configuration to jason builder to
create customized Jason B engine it can
be done like this look it's very easy
and if we run it it's supposed to
produce nicely formatted Jason let's
take a look okay and this is number six
yeah so this is how our Jason looks like
looks it's nicely formatted now let's
see what if what if we want to change
the property name it eats phone numbers
but it's too long we would like that
it is phones in the produced Jason
documents how to do it of course I can
change the property here right
but this is not nice much better day is
using Jason be property annotation which
allows us to change the property name to
funds right and if we're on our sample
now these phone numbers should be
replaced with false let's just take a
look let's combine compare I hope that
if it compels immediately I have time to
add another GMO to my demonstration but
I can't do it okay so look it changed
two phones right and then we think is
that and you can put with notation not
only to feel itself you actually put it
in together alright get phone numbers if
you put it here it will produce the same
result if you want to check it and then
just run it again so this property can
be on Gator can be on the field itself
can be on cetera if you put it on setter
we will expect that we will read from
our property all these which is supplied
in the annotation so you can actually
read to from one property and write to
another one I don't know do we need with
your skin but it's allowed
so she founds here at so you can click
to the ghetto another thing I want to
demonstrate here if you look at that
document that Jason it does he doesn't
have any phone numbers so funds property
is not there at all because it's now by
default Jason be just skipping now
properties but what if you actually want
to have it there right so you read it
from other application that expects it
to be now right it was easy to change we
just put Jason B
new label annotation on the class so all
properties which are now in the class
now supposed to be a supposed to appear
in result injection document then just
take a look I keep forgetting to creat
yeah oops
you see that it has phones which is now
now right so there are some more
annotations right for customization
Jason the creator and blah blah blah
it's out of scope of adjustable of my
demonstration now maybe I'll do another
demonstration to demonstrate you know
other customizations but not today so I
assume that we finish with serialization
and let's jump to another demo and Jason
we dis utilization them okay so this is
the nice thing what we are going to do
here we are going to use Jason processor
and Jason reader together and by the way
I think I didn't mention that but Jason
binding is using Jason Otteson in behind
so one anyway that's up to you what I'm
going to do I'm going to lead our
Jason's document using jason processor
I'm going to use Jason pointer to get
the first Jason or let's use the second
case unless you don't get second Jason
using jason pointer and after that I'm
going to deserialize it by this to our
person object here right
okay so again I will just copy paste
these beat right
which is getting which is creating a
reader and reading everything to Jason
Rae and now we need to create a quiz
hell it in the demo here create an
adjacent pointer copy paste it here but
instead of profession I will get whole
other object so this is a pointer to the
second Jason Jason Wu he's right okay so
now we need to change this because it's
not profession let's call it mu he's
right so which is Jason value of that
axis I think we can I guess that's okay
it's okay okay so we've got our who he
is now now we have to bind it to our
person object so we need to create a
Jason B Jason B which is Jason B builder
create right and now we need to do
person person equals Jason B from Jason
in this case right and we need to get
out Jason here which is which is to
string and we need to actually for D
serialization we need to pass a type a
target type here with this person dot
class right so this is our Jason movies
to check that it works let's just print
it out person I'm sure that it has to
street method okay doesn't have it so we
can just quickly add it like this
it's like this and let's run it
creatures and run it
okay so this is number six okay
wrong demo so sexy number seven here
okay and you see that it's actually you
find it's actually works so we do she
realized so it doesn't print anything
here but which is supposed to be my
design so phone numbers are there so
what we've done just now again we just
use JSON parser to read JSON document we
you Jason pointer to extract some bit of
that and we use JSON by binding to buy
this data to our Java objects here okay
and now it looks like we have our last
demo which is the D serialization with
generics again we are going to what we
are going to use here we are going to
use our favorite Jason's document and
this time we are going to dis realize it
into the list of person so it's a
generic list right okay let's do it
first of all we need to create a jason
be edging jason be using jason be
builder recently builder create right
here our comes okay let's just do to say
we need to dis realized our jason's
jason jason file to a list of person
list of person Jason's
supposed to be Jason B from Jason and we
need to pass our stream here so let's
just do it as I usually do
Jason's Jason right and we need to pass
a type of whether it is realizing to
hear it was very easy for the normal
type like this but for generic type is a
little bit different because a generic
type and you know this genetic
information usually is lost when we are
passing it to like like this way right
so in order to do it properly what we
have to do we have to do it this way we
have to doesn't know what the type is
okay side we it actually create array
list of person
so basically instance in a sink right
and after that get it's a generic
superclass like this like this and we
need to pass it here and in this case it
will properly work right to check it
let's just print out let's go to say the
first name the name of the first Jason
get the first element and
it's cause to be Jason's and get name
right let's just run it to see that it
works here competition is okay so it's
number 8 VMO Jason board so it works to
check it then just print out the name of
a second second Jason it's a poster
print out Jason Voorhees here
okay so number eight Jason movies okay
I'm sorry so it looks like we've done
everything what's planned so as I said
II I will upload this demonstration to
this source code repository so you can
reference it any time and thanks for
watching it if you have any questions or
if you have any suggestions you always
can go to our website which is Jason B
dot that and it contains everything
about this binding it has references to
arrived implementations I'm getting
started guides and so on anyway so
thanks for watching and see you later
bye bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>