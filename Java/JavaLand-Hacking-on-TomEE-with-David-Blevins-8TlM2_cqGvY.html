<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaLand Hacking on TomEE with David Blevins | Coder Coacher - Coaching Coders</title><meta content="JavaLand Hacking on TomEE with David Blevins - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaLand Hacking on TomEE with David Blevins</b></h2><h5 class="post__date">2014-03-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8TlM2_cqGvY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright so welcome to our second night
hacking interview with me I have David
Blevins who is the founder of tummy and
you know have a new company Tommy tribe
yeah yeah we just launched here at
javaone and uh we're pigs are quoting
pretty pretty well so it's pretty
exciting nice and today we're gonna
actually gonna do a little bit live
hacking on Tommy we've got David's
computer hooked up um but I don't know
you want to say anything before we get
to the coding no coding is better
coatings better everything is all very
better straight to your laptop I'm gonna
I'm gonna get rid of the banner so they
can get a nice full screen of your of
your laptop that's it that's an awesome
background what do you have no no that's
you know one of the default what is it
yeah one of the default like psychedelic
yeah colors orange is my favorite color
so it's our company color and it's also
my desktop nice yeah there we go you
really want that that's a modern art
yeah on your wall like right above yeah
I'm okay very nice assa back to hacking
yeah okay uh yeah well so just in case
people aren't aware you know so Tommy is
basically the Java EE version of tom cat
yep so I'd apache software foundation
you know I've been hacking there for 10
years and in Java EE for about 15 and
yeah so you know tom cat has always just
sort of stuck at the at the servlet
level and so we finally decided after
you know a decade or so hey what if we
did a little bit more yeah and so we we
took a page with everybody who took
Tomcat and takes it and adds the jars in
and you know makes it just a little bit
more well we decided to do exactly that
and then finish all the integration
points and certified I know are you guys
are you guys officially yep java ee
certified now we are yeah yeah so what
we earned our java ee certification and
so what that means is basically we pass
a truckload of tests and and
yeah so how painful was that it took
several months hello I've you know one
of the founders of Geronimo and I've
done eone for certification EG five and
six and it took us you know ten months
basically of just continuous banging on
the test Wow and in that process it's
not like we added like a million lines
of code the result is like you know 27
megabytes zip which is not that big but
we just had to take a lot of care into
all the details to to make those tests
pass and so there's a tremendous amount
of integration that's there in that that
binary so it's it's pretty cool nice
nice sorry so you gotta git hub project
here oh yeah well so do i do their show
you kind of the standard java ee things
that you normally see i thought it might
be fun to take a peek at some of the
rarer corners of the space that have
kind of really neat things to offer that
don't get a lot of exposure cool so the
first one is uh is something we added to
each seven rather quietly it's not not
really been widely advertised and
basically it is that we revamped this
thing called the connector architecture
which everyone goes yeah heard of that
but now has ever used it and for some
decent reasons but back in the day I
usually did a JC a 10 connector
architecture implementation Ripley wow
that was scary yes so yeah you get a
special kind of bad for that one yeah
it's if you have had if anyone's ever
read that spec to try and get anywhere
yeah that was it was a few months of my
life gone forever I'll never get them
back yeah yeah exactly well maybe they
might pay off now that we've kind of
fixed it up a little bit I am Illya open
this project up of the idea intellij
crazy alright well so the basic idea of
the connect texture and everyone's ever
everyone's heard of like MGBs
message-driven beans but they always
assume that they're JMS and that's
because it originally started out being
jameson like when Egypt when MTV's our
first added back in ejb two point oh
they were tied completely to JMS then an
ejb 2.1 we actually like tore them apart
nice and made it so you can actually
drive them with any kind of connector
and it's not even a synchronous so i
finally i find so i found a rare person
who knows that they're not JMS related
but they still assume they're
asynchronous and so to prove that that's
not the case and actually show some of
the kind of updates we did I've got here
a nice little telnet connector and so
the idea is that that you can have these
little at command methods and if you add
them into your MTB they will show up as
little command line commands and we can
go ahead and invoke them this and you
know so it's all very dynamic and it's
we're not even implementing like a on
message interface so there's not even
like this one big do it method and so
yeah it's it's incredibly flexible and
we basically modeled it after jax-rs so
here if I I've got a little arquillian
runner here I set up to build up my
archive dynamically and just start and
deploy this little app on the server
okay so now we can go over to our
command line here a-league just tell net
localhost 2020 which is the port and now
it actually literally logged into a JVM
this is not a system that I logged in
this is not linux or unix I'm in the JVM
it's I'll and so I've got all these
little commands that I added and I can
say like you know
free memory that tells me how much free
memory I have and to implement that I
just have a little md be a simple simple
command to return an int that says the
number of processors that I have simple
command to grab the runtime tell me how
many bytes I have returned it as a
string nice and the cool thing about
this is that you may look at this and go
oh I want to learn this new command API
I hacked it up myself and you can deploy
this on neee server and so you can make
your own little api's like this quite
easily and in fact so we've got this
little sample project on github it's
it's right here you know it's it's a
github Tommy tribe telnet connector yeah
we'll put a link inside the video
description so if you do that then you
know it's it's it's fairly easy to hack
up these kind of connectors and so what
you know here's basically what you have
to do basically three things that you
need to create yeah you create an
implementation of resource adapter there
we go kill that we can stop our process
and you have really only like four
methods to worry about start gets calls
when the windows server itself starts
stop gets called when the server itself
stops endpoint activation is basically
deployed this beam and endpoint
deactivation is under ployed as being
and the secret magic here which is the
change that we didn't eat you 7 which
makes us very awesome is when you'd call
this method create endpoint you
basically get back a subclass of that
beam that's a proxy like an at local
bean or like a CDI proxy identical so
you can invoke any method you want on it
and you can use reflection to see what
kind of annotations it might have on it
so you can create your own so listing
the commands yeah so so I did all the
listening of the commands just by
iterating over the method seeing which
ones are annotated active and then I
chuck them into in my own little telnet
implementation so the cool thing is is
that you can extend your
server in ways that you historically
have never been able to do so it doesn't
matter if it takes you know if you know
in in Java EE we tend to have everything
go through servlets or HTTP specifically
because it's the only kind of front-end
technology we have go and we're all very
enamored with WebSockets because oh wow
we could actually get like an actual
socket feeling kind of thing and they're
really great for browser work but if i
was there going to implement like a non
browser to server type of architecture
make your own connector because you can
you can start your own threads you can
open sockets you can do whatever you
want and then you can actually deploy
this thing in any app server which means
basically to the cloud so you could
throw this up on ec2 or you could deploy
your cloudbees app that you know or your
jelastic or whatever yeah i don't think
many people write their own connectors
no it's not that difficult there's
really only use these for methods that
you have to implement it you have to
read like 200 pages of spec to realize
it's just for methods so that's why it's
kind of nice to have a sample project
there where where where you can you know
just sort of skip the reading and go
straight to the to the coding but it's
pretty cool all right that's awesome um
I I took you off screen temporarily tell
me if you want to show something else um
jeez one more thing sure yeah all right
there you're back on the screen alright
so here's a here's another little fun
idea that that we tried to get into EG
seven and we'll probably go into ee8 and
it's a simple like annotation reuse
concept so in Java EE we have like a
stacks and stacks of annotations that we
that we that we have in our AP is yeah
just a few which is great because it
allows us to to not have to write a lot
of code because the amount of code that
would replace those annotations is even
a larger but now we have a little bit of
an annotation bloat problem
and so here is for example a simple
little crud application I'm saying what
security roles can add a movie just to
JP and I'm what kind of transaction
attribute and when I invoke it i want
this interceptor to be to be executed
and I have the same thing for delete and
the same thing for forget right so I run
this this little class and this uses the
ejb embedded container that we added in
ejb 3.1 by ron it it's fairly quick but
you know as I say it's it's a you know
there's quite a lot of annotations when
we start adding rest for example this
same class can be a restful endpoint and
in which case now we're going to have at
get we're going to have path / am and
all that kind of stuff so that ran but
that will open up a different version of
it that uses it as concept called meta
annotations this is basically
project oh yeah so the same project but
now I have that many annotations yeah
and I've made my own annotations in my
application I have an annotation called
ad and on ad I have roles allowed
transaction attribute interceptors and
now I could just reuse add everywhere
and I don't have to copy and paste
annotation data throughout a million
places in my application I've localized
it yeah yes your labia factoring your
annotations totally we reuse soon
annotations would be kind of awesome
yeah especially when they have a lot of
string parameters you can just sort of
say when I use the word at at ed I mean
all these other annotations imply them
please nice and so now our applications
go from being very large to being
something manageable and in fact even if
you don't want to have more than one
annotation it's nice to just people to
rename them yeah you don't bring any of
them useful names for right well then
make fun huge right yeah yeah so it's
it's it this is a nice nice thing that
this also opens up you know we showed it
with a trolls allowed but yeah that's
like simply being able to abstract
strings from from our classes and you
know if we wanted to change the Sookie's
the security roles everywhere we use to
add will now have different permissions
yes I think I think Andrew approves yeah
he likes it hold your fingers in the
audience all right so um like you should
wrap up yeah what would you like to let
people know about Tommy your new company
or yeah what you noticing I think that
we have not yet realized a full
potential of open source yeah and I
remember I think the first time we met
in person was an open source conference
at us come yeah a few years ago yeah
yeah you as awesome that we can before
Tommy tribe yeah exactly exactly we need
more we need more open source companies
out there you know
it takes a lot of food to develop open
source we don't quite realize it you
know we a lot of pizza a lot of pizza
yeah I know and we use it to very large
length so like our friends a jet and
Greg who write jetty you know that they
have jetty used in square runs all of
square runs google app engine but those
guys don't put any resources into the
project and that's a it's a fundamental
misunderstanding of how open source
really should be yeah and you know we
have great companies like red head out
there putting you know this employ six
thousand people we need more of that in
our industry yeah and I think you're
you're more making an appeal to
companies which use open source to just
staff some hours or maybe at a dev to
just write back what what we'd like to
do is just make more of a partnership so
instead of using this the code this is
the community to get the community
involved in your company and have them
help you use the software better they
will learn how you use it and you'll
also be able to make the project better
and everybody wins we just need to
establish healthier ecosystems cool so
yeah I thought it all some of the
awesome things we'd like to do aside
from yeah you guys are doing great
things with open source at Tommy tribe
so I wish you guys all the success oh
thank you very much and thanks for being
on stage at their job thanks for having
me and I hope everyone enjoyed it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>