<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Martin Skarsaune on JVM Debugging Under the Hood | Coder Coacher - Coaching Coders</title><meta content="Martin Skarsaune on JVM Debugging Under the Hood - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Martin Skarsaune on JVM Debugging Under the Hood</b></h2><h5 class="post__date">2015-09-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5sXxIfjaALg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Mardon and we're going to chat about JVM
debugging under the hood and you're
gonna you're going to show some live
live coding and real real stuff today
right yeah I'm going to play a little
bit with the same interfaces that the
buggers use nice nice okay and then for
for audience members who want to play
along you'll notice our screen is not
actually hooked up so feel free to look
over Martin's shoulder if you want to
look at the code or just hang out and
listen to the chat it's up to you guys
yeah did you were to give your talk
today no still up coming so I'm coming
here okay any pressure stress a bit no a
bit yeah yeah i finished my talk on boy
yeah i was great i'm all done no stress
for me but um yeah i still have stressed
from my book deadline so maybe i'm still
slightly stressed ok maybe i should
switch to your laptop you want to show
something on your yeah ok I mean see
come on here yeah so I mean the talk is
basically about how the debugger works
so spent most of the time looking at you
know real debugger and what goes on and
try to learn a little bit but when you
look into what's there as you know lots
of possibilities in those AP is so I
just want to play around a little bit
and see what use I can get out of it and
so there's I usually work in small talk
for many years oh nice so there are some
assumptions that always annoyed me a bit
in JAMA yeah no I mean I think I used to
work with guys who developed a lot of
small talk IDs mm-hmm and compared to
Java IDs like you know we're finally I
think we're finally getting to the point
with job IDs where small talk was 20
years ago I think actually when its past
and static typing helps yeah yeah at the
beginning yes java was sort of
big step backwards it felt so yeah we're
finally warming up the Java yeah so the
way I've done this is I used a tool
called whole tile which is a very nice
interface to get out the different
information of your application Maya jmx
I was a lightning talk here yesterday
and demonstrating that so I thought this
would be a good place then so basically
what I do is I so say you have your
application in a Java servlet container
and there is a requirement that the vm
should listen for a debugger connection
and so you simply just drop hotel and
it's doesn't have any your application
doesn't know about it it's very non
intrusive and then on top of that i
created a little separate web app that
again the two others don't know about
and what it does is it is able to set up
a deeper connection to the vm and
extract various information and then
make that visible where jmx and a day at
a custom plugin because what i always
modular architecture yeah so i haven't
done a small user interface just to to
be able to see what comes out so and the
first thing i wanted to so you can see
here we have the bottom we have just any
web app and then we put that whole title
and then my little Atul here so we'll
see there's a separate tab for that and
with some settings you can do so in this
application there is some terribly
unreliable cold it's actually the RIP
deliberately unreliable deliberately
unreliable yes so you can actually debug
your yeah so if you feel
care it's a nullpointerexception and
it's oops wrong line should remember
that during the presentation it's a long
chain of messages and you really have no
idea where things went wrong yeah yeah
that's like typical enterprises because
yeah but somebody else wrote possibly
you yesterday pause for me so I have
this chain of events here nice to see
from the stack trace I mean no point to
exception from from Java doesn't tell
you anything now a lot of where the
problem is so but the thing is that the
vm has this information okay just not
exposed it's just not exposed to the
debugger knows yeah so with this tool
here then I can I can make this attached
and this attached by a divine connection
to the vm and what i do is i can check
that i want to add some Diagnostics to
know pointers and so if we repeat this
same physical writer i'm having trouble
seeing your screen 20 what do you think
etter should wear shades sorry it
doesn't match your cave like probably in
your in your little cave with all the
lights turned on now we see we got the
same exception and this is not from the
tool this different application now we
see that no punch exception occurred
invoking the method f oh that's as we
can see here then in the console that we
actually the last one and yeah yes we do
the e and then the f is the next one so
that's where I get the null pointer here
and then another nice thing though since
we already have this ability to extract
information from the debugger nice then
it can do what used to be called a walk
back in small talk which done is a
stacktrace and see up yes something ok
so then will affect but I could show a
past one so what you basically do is in
addition to the stack trace I would fill
in information about the lionfish a bit
strange but about the receiver objects
the arguments and the temporary
variables in each frame leading up to
that so if you want them to do some more
analysis yeah now that's cool so is this
something you'd use while you're
developing or would also work on
production apps for pretty bugging this
is just me playing around so I don't
think the thing is um I see yeah I i
gave the ability to pause it because i'm
not i don't have long experience with
the with the effects of running this in
the real environment i guess you have
more professional tools for that but at
least you kid then attach it if there's
a certain problem you want to yeah but
really you could attach it to a
production process but probably not a
good idea yeah I maybe be a bit
reluctant should should have some more
experience and also again then sort of
another thing to expose more information
from the debugging information via jmx I
put up the opportunity that you can list
the number of classes that you would
like to to monitor the amount number of
instances and then there's already some
nice functionality within ho tyo which
is ok
something something went wrong but what
you should see here is you consider this
really good practice yep for your
presentations like so he's going to work
perfectly this afternoon you should
maybe you know maybe I'm just stupid I
poster that's the explanation yeah that
explains it so let's get the hopefully I
want to the same twice so within ho tyo
do have some special readily
functionality for numeric attributes so
you can chart them and if I then try to
do some setups on calls with some leaks
here and there which you don't see a
development and what I also allows you
to take a certain charge and add it to a
dashboard for instance so if we come
back to the main dashboard where I have
memory and CPU in those things yeah we
get the same charge here nice you can
move along the timeline to see if you
maybe want to investigate along certain
certain points or something cool pretty
subdued is this it I assume this is
something where you could you know take
the take the plug-in you've written and
maybe like it's open source you can have
its yeah it's an it's a bit more
preparation before I think yeah not
quite recommend using it but it is it's
on github so nice so yeah that's that's
more or less what the end of my
presentation will be that's a sort of
example that even a guy like me can can
make something didn't like this work so
yeah it's pretty cool I guess that's
what I have the screen yeah yeah so I am
looking forward to your talk later
they'll be exciting and I think we've
helped you work out some some possibly
not bugs in your software but
presentation glitches yep
and having stuff started and working in
the right order so yeah no thanks very
much for the short interview thank you
guys for being a great audience setting
an excellent example of Pekin Pekin over
the shoulder at what are what our
presenter is doing and I hope you guys
enjoy the rest of the Javas on
conference so we're doing more
interviews this afternoon I believe we
have three more interviews lined up each
about an hour spaced apart interact with
us by tweeting to hashtag night hacking
and watch the live and archived streams
at night hacking calm so thanks thank
you alright good job</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>