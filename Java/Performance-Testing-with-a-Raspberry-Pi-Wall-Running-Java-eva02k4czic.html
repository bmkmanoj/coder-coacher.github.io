<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Performance Testing with a Raspberry Pi Wall Running Java | Coder Coacher - Coaching Coders</title><meta content="Performance Testing with a Raspberry Pi Wall Running Java - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Performance Testing with a Raspberry Pi Wall Running Java</b></h2><h5 class="post__date">2014-02-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eva02k4czic" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so this is Steven Chen for our
night hacking Jay focus interviews and
today I'm going to be interviewing Eric
Rahm nur down his Raspberry Pi
performance testing wall thank you
so tell us a little bit about what your
motivation for this um this project was
well actually we were working with a
customer and we were building a network
server and the server had very high
requirements for uptime it was to be
after basically all the time it also had
high requirements for performance we
needed to support 50,000 concurrent's
network connections to it and we also
needed to handle 100 business
transactions per second at the sustained
rate and we were also using SSL so there
were SSL handshakes going on and in that
time as well and the server used a
combination of a custom binary protocol
and and so also there were very strict
requirements so you outsource it to a
cloud service lawyer yeah exactly so we
needed to ensure that things were tested
and we thought about the usual
alternatives we thought about using a
single server dedicated server about
using the developer workstations setting
them up using grinder or some other
framework we also thought about using
the cloud bus as you said the security
requirements were quite strict so we
couldn't get the cloud in through the
firewalls also we wanted to run
sustained tests for very long times and
with a cloud that would actually have
been quite expensive yeah so finally I
thought about buying cheap Raspberry Pi
computers and setting them up on
all and using them to run the tests cool
how does this worked out for you it's
worked out very well actually the key
thing to to think of is to keep costs
down because the Raspberry Pi itself is
very cheap yeah but when you start to
add all the peripherals you need it adds
up
so what what we did was we bought
raspberries for about twenty-five
dollars apiece and then we solved them
directly to a power supply so we didn't
have to buy USB power cables okay so
it's almost about savings there yeah and
we bought memory cards network cables
and then the important thing as well is
to to find sheep switch because if you
buy a really small switch you will get
it for nothing but as you add more units
you need larger and larger switches and
eventually you end up with an enterprise
price tag switch yes that's true so you
need to find a balance as much as many
raspberries as possible before you get
to the enterprise switch level and it
turns out that the largest switches come
back what's the magic number is 48 48 48
so both our wall and the hazel cost
supercomputer with raspberries both use
the same model of switch actually okay
so that's that and we ended up at about
$3,000 for 48 units so that's I mean as
far as performance corporate performance
testing clusters that's a pretty good
price tag yeah so you're gonna put your
markup on this and sell this at the
showdown
no but I know over at least one company
I don't remember the name but they have
copied the solution and built evolve
themselves yeah very nice so in that
respect I think it will stick around one
of the choices we had to make was which
yoga version we you know were to use
because at the time we did this
the Java c8 embedded was still in early
release it was not legal to use it the
offenses 7 embedded was usable but it
required a license and it also only
supported soft floats on the raspberry
open the ADK was free and supported hard
floats but as you can see in the chart
here and it is much much slower yeah but
in September last year
Oracle actually released their JDK 4
raspbian so now we can use the real
thing oh and I brought the travel ball
with me here to look at in a bit demos
some hardware mm-hmm and like this all
right tell us a little bit about what's
going on in your your hardware board
here yes down here we have the power
supply it's on the first version we
built we had a PC power supply that
could handle about 35 units this one is
much smaller and since I will be lugging
this thing around it is what you wanna
bring travel-worthy
yeah and this is a very cheap consumer
switch we have connected the power
supply both to the switch and to
connection board here where we have
small thin power cables going to the
rasp years where we have sorted them on
the behind them
yeah then we have the raspberry's
themselves screwed onto the wooden panel
so it's a fairly simple design so I need
special considerations when you're
trying to route power to multiple
raspberry PI's like this on the small
wall it's not anything to think oh
really I wanted to be able to take off
the raspberries because when I was
traveling to the United States with this
one I didn't dare send it in the shaking
luggage I took the
raspberries in my hand luggage so I
wanted to be able to detach them by
simply plugging them off like this nice
but on the real big wall we yeah the big
wall we have thin cables and then we
connect them to thicker cables before
going to the actual power supply rekka
otherwise nothing to think oh really
cool and yeah we got the results we
wanted we were able to run sustained
load tests for several weeks and all
that time we had about 90,000 concurrent
connections 100 business transaction per
second nice load yeah and this is not
something I mean you you home-brewed a
solution with raspberry PI's but if you
had to buy an enterprise great solution
for this sort of load testing what would
it have cost you I don't know but I can
say that we looked at using Amazon Cloud
and they wanted was about 16 thousand US
dollars per month for this kind of
warehouse so three thousand dollars and
we can run it for as long as we want
it's much cheaper no that's very cool
all right so in closing how do people
find out more about the Raspberry Pi
wall well they can always go to my blog
and
they can if you just search for
raspberry pi and quote mints or
raspberry wall I'm sure it will show up
there and they can listen to my talk
tomorrow at 3:30 here at Jay focus cool
alright thank you very much and hope you
enjoy the rest of the conference
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>