<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java 9 and 10 Performance with @javaperftuning and @josephbottinger | Coder Coacher - Coaching Coders</title><meta content="Java 9 and 10 Performance with @javaperftuning and @josephbottinger - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Java 9 and 10 Performance with @javaperftuning and @josephbottinger</b></h2><h5 class="post__date">2018-04-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5yBbkpfKvfQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm Joann injure um one of the editors
for the server-side back way back with
what's good about Java nine there was a
lot of goodness coming in Java nine it's
it's faster in what way
smaller what makes it what makes it
sound you know I it's just the overall
incremental improvements that go into
the JVM pretty much on a daily basis
that just get rolled out it with every
release every lease gets faster because
you know the the geniuses the hot spot
engineers well they are geniuses
actually they are keep doing amazing
things to make it more stable faster
more more features just you know it's
it's just a better engine day-in day-out
okay so that brings up a good question
now are these performance increases
incremental or are they they're not
dramatic right they're just like it's
faster because it's the new release and
new things go in right well some of the
things actually ok so I run a
performance training workshop I think
most people know that and and and as new
JVMs come out I have to keep adapting
the material to the new JVM so I so I
can rewrite and stuff and and and over
the years what happens is if we get
exercises that just get you know the
effect that we used to see just goes
away so I'll go from like Java six to
seven and
I'd lose an exercise because you know
whatever part of the JVM it was
irritating to cause some performance
bottleneck is it's gone right and it's
no longer an issue and you go to six to
seven the same thing happens
seventy-eight same things happens and
you know when you start running things
at nine you just see that different
things happen and I do this other talk
it's basically I call up my my magic act
where I get the audience to tune an
application for me right and again I've
been doing this for a couple of years
people seem to like it this is my cheap
drink thing and yeah it's fun right the
audience likes it because basically
they're driving the demo but the one
thing I noticed is that over the years
you know the performance target that I
give the audience has gone down it used
to be like about four seconds you know
get the little micro benchmark to run in
four seconds now it's two seconds so the
same code no changes the same code we
don't do anything differently right all
I'm doing is just changing the JVM from
version to version
it's not really a garbage collection
issue because there's no garbage
collection issues running in the whole
thing so it's just you know better
optimizations coming from hotspot things
like that and you just you just notice
it it just it cut the runtime down by
half just over the years so little by
little so from that perspective the
rapid turnover from 8 to 9 to 10 to 11
to 18 point three whenever that whatever
but is that like a harbinger of that
kind of incremental performance on a
regular basis yes I know I'm you know I
think you know I mean if you went to
Marc's talk if you've been to one of
Marx talks where explain what's going on
it's basically
the the delivery model is completely
changed it's what's ready gift goes in
excuse me
and and it's and and it's you know the
releases are fixed so if you're not
ready it's like we just just left out
it's the next one right so so I think
what happened with essentially 9:00 and
like 10:00 is that there was just a fat
pipeline of things that were coming in
but I think over time you I don't think
you can't maintain that pace of new
features so I think what what will
happen is that you're just gonna see
like an income incremental amount of
change coming in I think Simon Ritter
had a talk he does this 55 things and
bright new things and his joke was the
you know next for Java 10 or 11 it's
gonna be like the five new things even
that's better than no new things well
hmm excuse me I actually think it's
actually better than 55 new things I
know it's gonna be more than fine but
you know right that's the joke but but
it's actually better because it's
because the incremental jumps that
companies have to make as they go as
they upgrade their stack is gonna be
smaller which means that they're gonna
be able to keep up with the JVM so you
don't think that the rapid the end of
life in a 5 9 and 10 in its turn you
don't think that's gonna be an issue for
no I don't think so
maybe ok maybe early on it will be but
later on once we get used to the pace
right no it'll actually be better it'll
help companies we move up the stack
faster so they'll be able to stay more
current it's gonna be really hard on the
right now it's hard on the tool vendors
because nothing represented a huge
change right and so the you know the
tool vendors and everybody are just like
we're still reeling trying to catch up
to that you know and we're not caught up
and tens coming out right but you know
but the difference but the change
between 9 and 10
is minuscule right and I met you know
the change between 10:00 or 11:00 I
imagine it's gonna be like it's so small
- also that you know we'll have to make
some adaptations but it's gonna be a
much smaller gap which means that we'll
be able to move up the stack well we
know that with ten there's some changes
in the module in the default module with
name spacing so like some of the Java EE
modules are no longer being exposed to
the default namespace right what other
changes does toon have that's a good
question actually I honestly don't know
because I haven't been paying attention
those are some small languages that
change I mean the changes I've been
tracking are things like value types
right okay which is a pretty big change
it's it's a big it's a big change for
the runtime but it's not really a big
change for anything else not for the
language okay so so var handles and
things like that were you know they're a
big change but for everybody there's
there's all these changes small changes
but they don't really affect everybody
yeah well as a coder how to value types
affects what I'm doing they don't at all
I mean I like I can't write a value type
thing well you could but it but but it I
guess explains it perfectly right Brian
says it perfectly he just basically said
performs like a primitive behaves like
an object
but he didn't say that way he says you
know looks like an object behaves like
an inch or something like that but but
but you know but that's his message
right and and that's really the way it
should be it's like we're gonna take all
of these things like strings and they're
gonna be primitive types rip out the
header do you ever see a header no so
what do you care well I'm just kind of
convolving as a platform guy I'm like
you know trying to think how does how is
this going to change I mean like how is
it going to change the performance of
what I do and also because I use a lot
of alternative languages like Kotlin and
skaila Scala skaila it's an ongoing joke
it's Carlos gala I don't know you know
how whenever I mispronounce that people
have to take a shot so readers is it is
it is it relative really relevant I
should say which one the performance
what the pronunciation is no no the
language they're just kidding okay so
I'm lost no I can do that to you so but
but but okay but it's you know at the
end of the day what you have is an
engine that executes bytecode right so
how are you producing byte codes you
know
not my problem well I was just thinking
like give me byte code when you look at
languages likes like cotton that have it
doesn't have an apprentice doesn't have
a model for primitives it just says look
it's me it's an object do you think that
languages like that especially over time
because I'll have to catch up to do you
think that languages like that will see
a benefit from value types at all or do
you think it's just highly transparent
it's I think this is gonna be a very
transparent change
I don't expect and then why do it well
if the change is transparent why is it
about why is valuable
well okay because really what we're
trying to do is reduce memory footprints
okay okay I mean do you really need more
than one one
yeah but having more than one one takes
up memory right so why not just have one
one and don't bother taking up all that
extra memory we could go into like a
metaphysical discussion of what a one
really is yeah there's a reason for it
because a one might be a one in integral
concept but not a one in I'm not
prepared to have this discussion right
now thanks but um neither am i well I
mean you know like when you look at a
one that the the vertical slash that
represents the one for most people in
Unicode one is not the same as a real
one in America one that's kind of where
I'm thinking so the different
representations have value but maybe
they don't I don't know I'm still kind
of wrapping my mind around the the
utility you know like you get well it's
it's a reduction in memory exactly what
it what on what factor well first off
you're gonna lose the object catters
that's 42 bytes right anything right
that's 42 bytes of overhead you lose
when you lose the flyweight stuff for it
presumably like the integer the fly
waits for oh yeah okay well you do lose
the level of indirection right which is
never a bad thing so so I think there's
some benefits that are coming from I I
mean the real bit the bigger issue is
that we really would like more control
over layouts of memories so that you can
take better advantage of the advances
and prefetching and things like that
inside the CPU and value types is sort
of like
the butter we call the first step on the
road to giving people more control over
what how data is later than memory all
right here's another question for you
because you're giving me all these
little thoughts that run around in my
head and I'm not used to that okay
how many job what what percentage of
Java coders and just you know look at
the rank and file how many of them know
about or care about memory layouts how
many of them know about or care about
the memory lands right we're talking
about like just the ordinary Java code
or like I have no idea I I don't think I
don't think people really care that much
about data layouts when they're in their
cube like ready franÃ§a their application
or whatever it is that they're doing but
I think framework developers do you
think that linked lists will be finally
be useful
was it ever useful well not in Java
[Laughter]
of course it's pretty linked list I use
it I use them all the time but running
joke well I mean you know when most
people must be an insider joke there
well not really because when you well
look at if you need a list most of the
time you go for an ArrayList because you
don't have memory fragmentation you
don't have you have a faster speeds it's
an array access for the reference and
well it depends on what you're doing
always mmm buddy I mean if you're doing
something fie fie foe or sorry LIFO then
you know well I mean an array an array
list isn't actually gonna work right so
it depends on the operations that you
want well all of you use right so so so
that gets into you know what is your
data layouts look like right what do you
how you gonna anyways data layouts are
important they're gonna be important too
people writing frameworks and there's
all kinds of stuff down there I mean I
just looked at a friend of my needed a
talk where we mentioned value types in
all and the whole thing right I said
okay how many real developers are going
to actually use value types right sorry
yeah and and and well they're all gonna
use it but they're all gonna use it
unwittingly right right so they're not
they're not gonna know they're using it
they're just gonna use it and that's
fantastic that's perfect that's what you
want right right I mean I I just want to
write code I the performance issue or
the representation issue that's somebody
else's issue right and and if they come
up with a better way of representing
things and it gives me some performance
benefits and I have no I don't have to
do anything for it then they never will
lose everybody wins and that's really
what it's about
yeah so next question Java 12 was gonna
get rid of nullpointerexception
that's new to me I've heard that but you
won't hear it that's a terrible idea but
I mean I just think it'll be kind of fun
to try to try to rename the basic
exception time I have a I have to think
about that I'm making it on okay that's
good I mean not throwing
nullpointerexception seems like a great
idea but well yeah renaming the
nullpointerexception well that doesn't
really you know that's that's basically
putting a cherry on the lipstick on the
pig right
we just angered PETA a whole lot um made
fool
anyways so okay so Java 10 doesn't
change much about from the coders
perspective right I don't think so
do you see modules growing in in
acceptance for legacy probably not but
for new code I mean we asked the
question today you know basically I like
really modular code and I tend to write
in a very modular style right and I mean
to the point where we just took my
desktop application and we ported it
into vertex for whatever reason and it
took about two weeks to port the whole
thing right most of it was just fixing
tests right the port and because really
a vertical was a module I was like oh
okay I just like have this thing extend
abstract vertical and boom I got a
module and everything about basically I
you know I have a vertical and a
vertical just happens to translate very
well down to a module so so the next
logical step for us is like okay well do
we actually make a module over this
thing now and so far the answer is net
right right we don't really have
motivation to do the extra work to make
modules out of these things at the
moment but that's not to say that I
can't see a point in time where we would
say yeah you know what probably we do
want to make modules out of these things
because we want to share these different
components with different projects and
that's essentially what we're doing now
I mean the reason why we're going to
vertex is because we have different
projects that are using the verticals
right so you're easy so effectively
we're using modules anyways this
actually brings up another interesting
thought okay so you know I've been like
part of Java EE for ever ever yeah um
almost as long as me yeah back in like
2002 with Orion it was kind of when I
got started on it I think it was 97 when
I was reading the 0.72 spec yeah good
stuff with San Francisco though so ha
with IBM's this is a good pissing match
I think you'll win oh but I'm sorry I
had to throw that out there yes San
Francisco um it was good it was a funny
project okay it was weird but anyway um
so for one thing Java is getting renamed
with rebranded or whatever which is all
fine and good but the thing for me is
like I don't do Java EE development
anymore I mean like the actual platform
yeah I used the api's a lot but the
platform itself is nearly irrelevant for
me now you mentioned vertex spring boots
out there a lot I do a lot of stuff with
drop lizards just for actually my main
goes through platform right now there is
all right there's react rx Java yeah
there's a reactive libraries yeah
governess akka and rx Java I'm sure that
I'm missing a whole lot of them do you
think that fragmentation is good or what
do you think about the presentation what
about we've got a positive or negative
think fragmentation is awesome what do
you think it means long-term it means
that people are exploring people are
still investing things people are still
growing the space that's what it means
and that's really kind of cool because
when you look at see you know she never
really had never did this but the
language the language really didn't see
C++ languages don't really facilitate
this type of experimentation like this
mass social experimentation well I mean
I think they did I think it's it's very
difficult to adapt components C++
components like a camera pretty did a
really nice talk on this a couple of
years ago
like as a keynote it's basically you
know C++ versus Java
why did Java will win essentially and
and and a lot of it is that you know why
did you have a win well one non-managed
memory at one unlock of pointers it one
on I can take a component from you and I
don't have to worry about it like
completely you know bombing my are
really corrupting or messing up my my
runtime in very devastating ways so that
kind of goes back to my original thought
because I think that one of the
strengths that Java had against C+ was
one of the things that made no point was
possible not null pointers no pointers
but I think that actually Java EE being
a fairly monolithic swag was actually a
really a real strength for a long time
because if you needed to do a real
pointers I think that's secondary to my
to my father I'm sure it is but I think
it's really trivially simple you don't
need to think deep about it it's just no
pointers that made a whole bunch of
different things possible that are you
know guarantees and things that you just
can't make when you have pointers the
same start exposing pointers all bets
are off I seen this in languages on just
about every single platform that I've
worked on right as soon as you introduce
the introduce the concept of pointers
into the language on the platform
you just have everything this is
different okay so look at pythons
inroads in AI or NLP data science sure
Java has not had the penetration when
data science that Python has for a lot
of different reasons but one of them is
well the lack of pointers a lack of like
the recce memory access and pointer
arithmetic for quick data traversal word
that's what you mean against Java that's
against shadow right so do you think the
I mean how do you see Java for one thing
is that a goal worth achieving for
another you see Java doing it and we're
getting other how well the assertion
itself Brooks I think I think it's a
good question I think it's like a very
long discussion
but I I think it's I think I'm all you
have to do is look at the trading
community and trading strategies being
written in Java and you realize that
obviously you can do all of this stuff
very easy so you think it's a matter of
Python having easier integration with C
libraries to do all the work as opposed
to Java not being suited for it no I
just think it was just I'm not sure
exactly why but my guess is is it's more
of an emotional choice than it is
actually a technological choice yeah it
could very well be I think so I mean
I've done a lot of AI and Java obviously
well maybe not obviously but I have
write and mostly an LP stuff that I do
is in Java so clearly it can be done but
the libraries are kind of old know is
the biggest problem is all the new
development work right he's being done
in Python I kind of resent that because
PI's might kind of bite but look at h2o
written by cliff click yeah there you go
okay</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>