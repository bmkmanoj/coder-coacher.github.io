<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Getting started with Java ME Embedded 3.3 on the Keil Board. PART II | Coder Coacher - Coaching Coders</title><meta content="Getting started with Java ME Embedded 3.3 on the Keil Board. PART II - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Getting started with Java ME Embedded 3.3 on the Keil Board. PART II</b></h2><h5 class="post__date">2013-04-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SGiULMq_DpY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back this is Angelica cero I'm a
Java evangelist at Oracle and this is
part 2 of the video of getting a starter
with Oracle Java ME embedded 3.3 on the
kya board on part 1 of this series of
videos I show you how to get a start
with the hard work and the software with
this video now is going to focus on is
creating your applications what about
them better they P is how can I use them
to create my first Java me embedded
applications
okay so the board is ready we already
connected to it we verified that it's
actually up and running and now it's
time to start using the IDs and clear
your first Java ME embedded application
for the cowl board so before we go any
farther and these are the three things
that you have to make sure that you've
done before you go any further on this
presentation you do need you do need
Java ME SDK installed on your machine
because the emulators that we're gonna
be using our part of the Java ME SDK so
make sure you install again this is
great news for those developers who
don't have a board with them they will
be actually able to create applications
and test them on an emulator without
having a real device so this is actually
great news for development environment
we're gonna be using netbeans ide 7.3
after you install the IDE you need a
plugin so make sure you get the Oracle
Java ME SDK T 3.3 netbeans plugin okay
if you install the plug-in you should
actually be able to come to NetBeans go
to tools and see the Java ami item on
the list if you don't see it please
reinstall the plug-in because it just
didn't install properly so you have the
Java ME and we're gonna have a costume
we're gonna see also that later on we're
gonna be creating at different devices
that you can actually configure multiple
devices for testing your application
this is actually the emulators that
we're gonna be using another thing that
you should see after installing the
plug-in is the device selector so this
will allow you to add a device in this
case the cardboard so how does it work
so we call here this is just that the
platform that you have in your system so
in this case is actually detecting that
I do have the Java AMI
and platform 3.3 so let's add an
external device in this case remember
that the IP address for my board is
10.0.0.0 rekt next and hopefully it's
going to find your device
yes device is available and then finish
so what you see now is your device is
being added to the list of available
devices so this means that you should be
able when we create our first
application we should be able to deploy
on the on the board directly okay
so let's create our first application
our first embedded application if if you
look at Java ME from the beginning it is
actually an architecture with two layers
the lower layer is what we call the
configuration and on top of that we have
a profile so we talked about the
configuration we're talking about and
where we define the virtual machine so
this is where where we have definition
for the VM and we actually have just a
small set of api's that allow you to
create very basic applications and on
top of that you have more complex api's
where as what we call the profile and it
actually tailored to devices with
certain capabilities so for embedded in
this case we're going to be using the
information model profile and for the
configuration we're going to be using
the connected limited device
configuration 1.1 this chi configuration
and profiles all the others api's are
actually part of the Java community
process so for c LD c we're talking
about the GS are 139 and for the
information module profile we're talking
about the GS are 2 to 8 and so we have
configuration on top of that we have the
profile and then on top of that we have
a set of API
some of those are already pre integrated
like for example the fire io web
services security and Trust services and
also their XML now for the information
module profile next generation so it's
actually based on mid P 2.0 but there
are few ApS that were not included for
example the LCD UI all the UI api's were
not included the game api's were not
included and we talked about Inlet
rather than Midlands and pretty much
they have the same life cycle we have a
very nice API there are the device
access API that give us access to the
GPIO lines allow us to do serial
communication and also use the SPI and I
square C protocols this API will
actually have a require particular
permission so it will actually require
root access and it actually required
that you sign the midland the inlet as
an option you can actually modify the
policy file so if we go to your micro SD
card that when we previously created and
go to slash Java slash ADP TB you will
find that file that file actually
defines some domains and these domains
are there are few domains that are
unsecured domains so make sure these two
domains allow device access so this is
the permission that you will need to for
your applications to use the device
access APRs ok so even if your
application is untrusted or unsecure has
the minimum privilege it will actually
allow we allow their application to use
the device access api so what we're
gonna do is we're going to create our
first Midland first we're gonna run it
on an emulator and secondly we're gonna
run it on the device so let's get it
started
so let's create the first embedded
application so we create a new project
is Java ME and you see here that we have
the embedded application as one of the
project options we just name it anything
let's call it my car first just take the
default one when I'm finished
okay so just the skeleton was created
just with the main methods that you know
for studying the application parsing the
application or destroying the
application so we're just gonna do some
output in the console so we're gonna do
a small loop here let me just format the
code it small loop to go all the way to
90 now I'm just printing that particular
counter so no rocket science but we
should be able to see it here on the
console so first we want to run this
small sample your third very first and
simple application on the emulator so if
you right click to your project and you
select properties in the platform you're
gonna see the device that you we're
going to be using so in this case I want
device one this is actually the emulator
so when we run the application the
emulator should be actually it gets
automatically started for us okay so
let's run it so right click and run the
project emulator should come up okay
telling us the status ok the inlet is
running and we can see here the Apple
hello Kyle and all the way to 99 ok very
simple but again this is your first
Inlet even though it's running on an
emulator we can actually see everything
here the emulator is actually pretty
cool it allow us to see the GPIO pins
available for these emulators the poor's
if you have the I squares
see
SPI all the information here and we will
actually play with it a little bit more
as we do some more demos
okay now let's run the same demo the
same code but directly on the board so
the only thing that we need to do is go
back to the project right click go to
properties and then in the platform
let's select external device okay so now
we're actually running on the board okay
now if we run
okay
we can actually see when we bring the
party connections that we have so
remember that we have two consoles one
was the output of the cardboard and the
second one was the application
management software so we go to this a
system up we can see now that the Kyle
output is displayed in this console here
okay all the way to Nationals so my
project is actually running on the board
we can actually go to the application -
reserved for and do a list so now we can
see that now we have Kyle first that is
my application that is actually
installed and it's actually the status
is running on my board so we were
actually able to from NetBeans the upon
my mid inlet to my board run it executed
and from my computer I'm actually seeing
the output all my of my application okay
good
you
some demo was good just just to make
sure that everything was working
properly with the emulator with the
NetBeans with the device but it's
actually not very exciting demo so let's
actually use the device access API to
really get some excitement here so there
are some pre-configured GPIO pins in the
board so let's start with that and let's
run it again in both the emulator and
the device so what do we have here so on
the board you can actually see that we
have some LEDs these are actually
pre-configured LEDs we have also a
joystick that is actually I squeezed
using I Square C protocol and we also
have some buttons so we have a few GPIO
that the LEDs and the bottoms the LEDs
will be just for output and the bottoms
will also we'll be able to get our input
so let's play a little bit with selling
the LEDs on and off and getting some
reading from the bottoms before we
actually connect an external hard work
to my board so let's see the code
okay so in this case so again we have my
midlet and and the way is it going to
work so you have two ways to actually
connect to to a GPIO pin the simplest
one is this one over here
where you actually ask the peripheral
manager to open a particular GPIO line
in this case we're going to be using the
ID the information about these numbers
why I'm using number one for ID the
developer guide would actually have all
that information for you so just just
trust me that this is the ID that we
need to use but again all this
information is provided in the developer
guide so what we're saying here is they
are at the GPIO pin with ID 1 is
actually the Lidl ad 1 so what we're
doing is with ax actually asking the
peripheral manager to open a connection
there okay with the default
configuration so this is the simplest
way to actually connect to a GPIO pin a
second way a second method to connect to
the GPIO pin is by using a configuration
so in this case we are actually using
the peripheral manager to open a
connection to the GPIO pin by giving a
particular configuration so let's see
what this GPIO pin configuration is so
it is very simple it's actually given
providing more information about the pin
in this case the first parameter is the
port so you can actually associate
multiple pins within the same port we're
not doing that so which is going to use
port C the value for Poe would be 0 the
pin for the second LED is number 2 then
the third parameter is actually the
direction so because this is an LED
we're just actually going to use it as
an output only the fourth is the mode
then if it's gonna trigger anything and
then the original value so the initial
value will be false so the LED
turn up so what about the bottom so in
this case what we're saying is we know
that bottom is pin number three we're
actually gonna be doing some input
because we need to provide some input
and then the default configuration is
gonna actually trigger so we're gonna
listen both ages when we push it and we
will release it so that's that's that's
what we want to do and what we're gonna
actually also do is have a listener so
we're gonna be listening to events that
get triggered by this particular but I'm
gonna get pressed it will actually
trigger an event and when it gets
released also trigger an event so so we
try to connect to the pins again as I
mentioned the general one oh through a
configuration then the third one
remember is the bottom so we need a
listener so we're gonna listen to input
two actions happening on that so what is
gonna happen in the main loop so if
everything goes okay so if we do have
connectivity to all the different pins
we're just gonna do twenty times we're
gonna take the first led and we're gonna
turn it on and off okay so we're gonna
take the previous value we just have the
opposite value of that so if the LED was
on we turn it off and if are off we turn
it on so very simple at the end of the
cycle we just want to live it off okay
now for listening to the event so
remembered that we're going to be
listening what happened with the bottom
and the listener is actually myself so
if we go back to the class definition we
have that we are implemented a pin
listener pin listener only has one
method that is value change
so whenever the value of that GPIO pin
change this method is gonna be cold so
we are just providing some output so
we're saying okay this is this was
triggered and then what we're gonna do
is when we
push the bottom we're gonna turn our LED
at the second LED on and off so we have
two LEDs one LED is gonna be tough it's
gonna be turning on and off by the
previous cycle by the previous loop that
we define here but the second LED is
gonna be actually turned on and off
depending on the value of the bottom so
if we push it if it turned to one we're
gonna turn it on when we release any
gold low value again so the LED will
turn off okay
so one of the coolest things that we can
do is with the emulator from the SDK for
the Java ME SDK you can actually create
your own emulator so for example for
this particular sample that I'm using
for this particular code we have three
pins right one pin would I did one okay
and two other pins okay the second pin
we using a pin number two and pin number
three and this is gonna be for output
and the third one is gonna be for input
okay and so this will be actually the
bottom for the third one we're actually
gonna be listening to when when we
trigger it both ages going up and going
down okay so if we go to tools Java ME
we can actually go to the custom device
emulator select the one we wanted and we
can actually create a new one we can
name it anything so let's call it my
Kyle and then in this case we can
actually select what GPI or lines we
want it in this case we need three so
let's play the first one we need for the
first one remember I did was one poor
number we could use in zero team it's
gonna be pin one it's gonna be for
output remember this is the LED and low
for value for the initial value then the
second one pretty much the same thing
also on LED and we want though for the
original volume third pane is actually
the output at the input this is the pin
so we do trigger both ages and original
value is low okay now we can actually
run the project with that particular
emulator so if I right click I can
actually
come here see that my emulator is mic
I'll go to the GPIO pins see how number
one the pin number one is actually going
low and high low aha as we'll make we go
through the loop and then the second led
is not changing because it's associated
with the bottom with the input right so
here in tools we can see an external
event generator this is actually pretty
cool so you can generate that event so
for the bottom you can actually push it
and release it right so in this case the
pin is gonna be there low or high so for
example I can actually trigger an input
for that pin so you can actually change
in and see how my pin number 2 is
actually being changed right so we're
listening to changes in pin number 3
once we hear for those changes we update
the pin number 2 okay and this is
actually happening right here on the
listening okay when we change okay we
actually update pin number 2 okay so
very nice now let's do something more
interesting let's go and connect
external device in this case there's
gonna be a lake or airplane let's go
back to the presentation for a bit now
the previous demo were using like a
pre-configured GPIO lines for example
but what about if I want to connect my
own devices my own things in this case
is gonna be a Lego motor that we're
actually controlling through the GPIO
lines so what is happening actually and
you can again see it on the developer
guy there are already some free
configuration free map pins so for
example LED number 1 also map to pH 3
pin
and led to to pH 6 and L 83 to pH 7 so
what we want to do is we want to move
the airplane back and forth and this is
by turning on and off some of these
things what is very useful is the LEDs
will show the status of these particular
things so if we have a low signal the
corresponding LED will be off and if we
have a high signal on the pin our LED
will be on so we can actually see what
is happening
okay
so let's have a look at the code before
we run it so it's pretty much what we
saw the song Liam minor difference here
for example remember how you can group
different panes into a port so this is
an example how this pin are actually
part of pour seven okay this is again by
specification of the cardboard it has
nothing to do with your program just
with the board and Peachtree is the pin
number 3 and P sub P h7 is the pin 7 the
rest is pretty much the same you connect
you open the pain through the peripheral
manager using those configurations make
sure everything goes correct and then
all I'm doing is using pin 1 to go to
the left then wait a little bit and then
going to the right wait a little bit and
then go to the left again and so forth
so on ok so just going to one direction
stop going to the opposite direction and
we do that twice and that's pretty much
it
ok so let's run the demo
okay so what do we have here we have a
small Lego airplane and that is actually
holding a motor the motor is gonna be
powered by the GPIO lines it from the
board it will go to the right or to the
left depending of the output that we are
having so we're using this pink here we
have three volts we have ground and we
have two GPIO lines this actually will
feed an H bridge the H bridge is
allowing us to use the nine volt from
the battery because actually the model
will require nine volts and the board is
only giving us 3.3 so again we got the
power and ground from the board and we
also get the two GPIO pins feed the
board and the H bridge will allow us to
power the model using the nine volts
remember that these pins here that is pH
3 and pH 7 are actually mapped to the
LEDs so what it's gonna happen is as the
values in this thing goes low and high
the LED will actually turn on and off
depending on the value so these LEDs are
very useful to actually debug in an
understanding what's going on on each of
the GPIO pins they saw us the airplane
move we should be able to see the lights
on the LED going on and off so let's run
so you can see the lights going on and
off us the different two different GPIO
lines go on and off as we go to the left
or to the right with the airplane
okay so that's the end of the
presentation I hope you have fun and
start working with Java any embedded
remember you don't require the Kyle
board you can actually use the emulator
while you get the board if you get the
board it's actually a lot of fun and you
can just keep building really cool and
interesting demos thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>