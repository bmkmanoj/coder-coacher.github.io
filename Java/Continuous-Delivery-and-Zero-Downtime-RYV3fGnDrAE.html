<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Continuous Delivery and Zero Downtime | Coder Coacher - Coaching Coders</title><meta content="Continuous Delivery and Zero Downtime - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Continuous Delivery and Zero Downtime</b></h2><h5 class="post__date">2014-02-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RYV3fGnDrAE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so this is Steven Chen four
night hacking at Jay focus and I have
with me axel Fontaine don't say your
name right yeah correct
good to meet you and what are you gonna
show us today well I think we're gonna
have a bit of a chat about continuous
delivery zero downtime and if if the
Wi-Fi plays along we might do some some
deployment some packaging of instances
as VMS and deploying them live on the
clouds later cool sounds awesome
so do you do you ascribe to the DevOps
philosophy hi depends it depends I think
for me DevOps is a bit of a it's a bit
of a faster horse to be honest with you
I think I think that DevOps as we see
today with a lot of puppet and chef to
automatically configure instances is
some is something else just kind of
speeding up the thing that a seasoned
min has traditionally been doing so is
part of the job of a seasoned min to
have a reproducible environment is to
have machine a as identical as possible
as machine B and so is making sure the
patches and everything is all up there
and it's synchronized between all your
environments and this is basically just
kind of automating and accelerating that
but it's not really fundamentally
rethinking it the way we probably should
be doing it in this day and age got it
so it's automating what the system ins
have been doing whereas your gonna shows
continuous delivery continuous
integration where we doing continuous
delivery
yeah continuous delivery we go where
we're gonna actually show you how you
can change your Java product to be more
reactive in terms of how often you're
releasing and going through your whole
life cycle I'm not sure if we'll do that
in the demo today but we'll take a Java
product and we'll show how we can do the
last leg and get it out there cool
sounds good
yep all right so you want me to show
your screen sure we can see we'll see
what we can get working with the Wi-Fi
at the venue here sure
okay so I've got a small sample
application here it's just a very small
HelloWorld to make it easy so this is
just one of the pages it's the is the
main page in the app so we're we're just
gonna customize it a bitches too
just to make sure to show that we're
live so just gonna save that and now get
a very small project here so it's just
some it's just some well some more file
we're going to build some small some
small Java apps so just running a
standard maven build on that so they
said exactly what Mateus told us don't
do this on the conference Wi-Fi hello
and then he'll probably be okay with us
and we're a hold on
just gonna run it through down this is
here for this build demo okay so today
that's still the part that's fine that's
on my laptop it's not too stupid yet the
really stupid part is gonna come in a
couple of seconds so first so we've got
a wall file now if we if we have a look
in our target folder we've got a brand
new wall file there yeah and we're gonna
fire it up locally first to see yeah
that would be so we're gonna turn this
war file into a machine into it that we
can then run on a hypervisor to do that
I'm using a tool that isn't on the
market yet it's not released yet but Ida
it'll come in the next couple of months
the code name for the tool is photon but
that all changes all so here we go we
just kind of point it at the wall file
and do a photon apt and so what it's
doing now is it's basically looking for
the dependencies that are necessary to
run this war file on Hardware so what
kind of dependencies does the war file
have it has a tomcat dependency a jdk or
GRE dependency it's got as at the JRE
depends on the c library the c library
depends on the OS kernel so we fused all
that together so we have our image here
in about nine and a half seconds it was
assembled it's a four year old laptop so
it's a bit slow and we've launched the
instance on vmware now so we've got a
local local instance here so that's the
IP we got up and running out took about
10 seconds to to get that up so that's a
that's a full machine we've got there so
we can access that a clean instance that
your that's a that's a clean instance
it's it's a it didn't exist before now
it's it's booted on on the virtual
hardware there so so we've cut it up
you're running a hello now attacking
there's our little test page we've got
here so we we can also
look at the console to see answer to
prove you that we've actually booted
something something there so we can just
um just look at the console here and
we're just gonna point it to make sure
it's the right pillow sir cancer is
gonna find first instance for that
payload and that's just basically the
Linux boot process and whatever we saw
there so it it eventually booted and
stalled around
Tomcat and how all that said oh and
there's your app server running yeah
absolutely
I've been there in the machine we can
scroll up a bit and see it's all the
Linux kernel booting so that's all fresh
from that instance that didn't exist a
minute ago and now we're gonna take now
we start the stupid part where we take
this bad boy up to the clouds away we're
gonna we're gonna get it up and running
on ec2 this is really stupid after that
no risk no fun living on the edge that's
that's what we're here for
so we're just gonna switch the
hypervisor it's just a flag so we're
just going to switch it to ec2 and gonna
fire it up yeah three two one okay this
is where everyone turn off yourself and
give us a little bandwidth so we've
let's like it connected yeah
so a real so so we've reused the same
machine image it's it's unchanged and
we're taking that same image and
uploading it so it so it's up already on
this tree and we're creating an instance
so we've created a security group that
opens up the ports necessary for it so
it just opens up port 80 nothing else
and now we're waiting for the Amazon
infrastructure to launch the image so
that usually takes somewhere between 30
and 45 seconds so so unfortunately we
gotta wait for these guys they're
probably rewiring stuff so okay so we
our instance is up already and now we're
waiting for the payload to boot on ec2
so that should take a couple of seconds
I basically just the actual spinning up
of the instance so we're up and and
we're gonna have a quick look at that in
the browser here we are
copy paste this bad boy here get in
there and here we are we're on ec2 in
under a minute
brand new image ad unchanged from local
to the cloud that's pretty impressive
think so to the site you know this the
cycle usually deployment takes you
longer than your test cycle but this
looks like it might actually be faster
than most people's test cycles the point
here is that you really enter a new way
of thinking where you're not logging to
some kind of instance and then SS aging
and customizing that's all gone you
enter a world where an instance is
disposable so you create the image you
fire it up if it's not what you want you
just discard it wait five seconds you
have a new one and so it's very easy to
integrate this as part of your build
process where you can just create and
time machines as part of your build
process and you find your integration
tests against them and if they're
successful take the image to the cloud
so how do you think this is going to
change the way people go through their
development process well I think it's
going to clean up the interface between
development and operations I think right
now there's a lot of uncertainty because
the platform you develop on is a
different platform than you actually run
your software on so the development
thinks everything's fine the operations
try to get it up and running it doesn't
work finger-pointing back and forth
that's all gone with this because you
you can deliver a clean image and either
it works or it doesn't work and the
story certainly are the operation guys
scared of you well I would say it seems
like there's a certain amount of
potential for folks to be worried about
their future employment I think it
depends the way the way you look at it
because it will free up time for more
interesting work than just doing the
grunt work you can start planning your
infrastructure at the higher level of
abstraction and dealing with that so I
think that's going to be very
interesting and I think it also makes
life easier for accepting the
deliverables from development because
you can have a very clear operations
handbook where it's basically this is
the image these are the three or four
parameters you get a set either it's
working or it isn't yeah yeah now it
sounds like it definitely simplifies
things and lets you do end and
deployment from the Java development
decide rather than
absolutely different environments you're
deploying to production and so one of
the interesting aspects about this we we
haven't really thought about the time if
I if I now list the images that I have
that I've got here gonna have a quick
look at that so I'm just gonna list the
images and so you see I've got an image
here and this is the total size and
that's kilobytes so where we're at under
40 makes for a whole machine running
there so it's really changing the game
of it because if you if you look at the
machines we have today you've got five
gigabytes of stuff to run a very small
payload that's gonna solve your business
problem and you've got all kinds of
technical ceremony next to it that
doesn't really serve the business and
now you're down to just the code as you
spelling in exactly what you need is
dependencies based upon your project
correct are there advantages and
performance or startup time or well I
think the start of time you've seen it
that's pretty fast
yeah you get pretty much everything out
of the way so there is a today there's
nothing that can interfere with that but
for performance the same argument that
you don't have any background process
that might sabotage you you have a clean
sandbox as part of your VM so you're
well isolated and and because it runs on
the own standard hypervisors you know
you don't have to set anything up or any
intermediate layers to make sure it
would work cool
no that's definitely simplifies a lot of
what people spend a lot of time on doing
deployment for their projects that's my
that's my hope as well I I every
customer I see runs into the same
problems it's always too complicated
that if it's too error-prone and I think
it's time to radically simplify also so
right now you mentioned it's called
photon but it's gonna be something
different when it gets released yeah
it's going it's going to be called box
use when it gets released nice pure SEO
story because photon is just a poor name
for that it's in the job as a as a
codename but but that's it so that
that's coming one of their features do
you have in a pipeline for the release
well I think yeah for for the release
we've got a couple of things in there
already that are quite interesting so
with a flag you can generate the machine
in debug mode and so you can connect a
remote debugger to it there's a there's
a development mode so you can NFS mount
the output directory of your IDE and as
you make changes they get uploaded into
the machine and reload it on the fly so
that basically you end up reducing the
number of environments you have of
development test production and
everything down to one and then you have
this one environment you can then test
everything against on your local machine
already so your run with the same kernel
with the same JDK with the same
everything you're going to have in
production later so there are no
surprises you bring the pain forward to
find out about it immediately and then
once you're happy with development you
got the NFS link regenerate in
production mode and off you go okay yeah
that sounds like it would definitely
simplify mmm-hmm so what about you have
any plans for the future roadmap for
where box fuse is going well I'm I would
say right now to focus is getting one at
100 out of the door and and insulting
that out and I think I have lots of
ideas for the future but I yeah I'm not
ready to talk about them yet that's fair
that's fair you see so an Oracle we
never chat about futures you do it's a
very unfair question yeah I called Larry
said no don't do it don't do it cool
that sounds good
all right well thanks for the interview
another box views and how we do
continuous delivery my pleasure
there's um there's a waiting list if
you'd like for the launch that I'd get
Foton comments still the code name so
the rebranding still has to take place
but if people are interested sure sign
up and I'll let you know once we go live
call all right thanks a Cheers thank you
very much Stephen</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>