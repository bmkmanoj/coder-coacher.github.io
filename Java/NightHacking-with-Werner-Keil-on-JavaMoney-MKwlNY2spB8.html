<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>NightHacking with Werner Keil on JavaMoney | Coder Coacher - Coaching Coders</title><meta content="NightHacking with Werner Keil on JavaMoney - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>NightHacking with Werner Keil on JavaMoney</b></h2><h5 class="post__date">2013-01-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MKwlNY2spB8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright so welcome back 2nite hacking we
are in Copenhagen Denmark and this time
i'm joined by warner kyle and for folks
who who haven't been on the night
hacking stream where i watch tonight
hacking stream before you can go to
night hacking com where all the videos
are posted on the live stream runs and
the way this works is we have a live
chat going so you can interact with us
while the streams running we're going to
do hacking and chatting and showing cool
projects taking questions from the
audience and maybe going out for some
good Danish beer afterwards I think
Sauron has the place all picked out for
us already and definitely so where tell
us a little bit about what sort of stuff
you've been working on recently now well
here in Copenhagen I'm mostly working
actually with something in the devops
category so those who may not have heard
it although I pretty sure a lot of
people may have heard the term this is
the combination of developer and
operations sort of part of the whole
agile and lean movement to to get
developers and suz ops closer together
so we are basically here helping the
cloud of the most line IT to get more
lean and more DevOps tiles with a lot
more things that we're manually done in
the past can now be automated or will
soon be automated even more so there was
three tools these for automation well in
most cases it's something similar to
puppet or chef but it's actually called
cocky is written by a Finnish guy who
currently works at Twitter is written in
Python so although we use a lot of maven
and java ee stuff behind the scenes
the provisioning happens mostly with
Titan which kind of started when we
dealt a lot with PDAs and now Oracle's
wustl which is a century Titan based and
it's a bit like it's another language on
top of the gvm we saw Ruby just before
so Triton is kind of similar but in some
areas then we just found if the
development is mostly done on Linux or
similar environments we might as well
use Titan directly mostly due to
performance reasons or sometimes you
also don't need to have Java installed
and you can start right there so we
still use Java but for the actual
provisioning in most cases that starts
with the piping tools and I dentals as
they roll out all the important parts of
the cloud that each of the project needs
and lots of different application server
so it's very heterogeneous okay lots of
stuff that yeah the whole java ee
ecosystem is hoping to get but i guess
we'll get there with ie8 some of that we
we already have to do what now okay nice
so what service area stuff where we
connect on today so I came across a
javafx binding example on the Oracle
website and I'm hoping this way
spontaneous and standard what I'm hoping
as far as we get with it to start
working on a custom binding for monetary
type which is defined by a new chase are
that I'm member often we also happy to
have at least one more expert here from
Copenhagen who also recently joined this
project is called chase art 350 for the
monetary and currency standard for the
Java platform which is scheduled to
become part of se9 because se8 is just
rolling out so that's a little bit too
late for that but since there are other
platforms out there especially on the
embedded space it could potentially also
be used there for adding currency to a
platform that never had it before cool
so we're gonna see if we can mix in with
some bindings done yeah so basically
this is the basic example where there is
a little bit of monetary amounts so I
took a very small example basically just
the bill which is small costs and the
bill is based on numbers and number
bindings so if you run this it's kind of
unspectacular to just focus on the
binding part I didn't really want to do
a lot of you I in this case but it's
basically using the binding that comes
out of the box with javafx number
binding stuff like observable and then
the pihl class just look at the pihl
class so it contains a double property
an implementation called simple double
property and then some amount attributes
when you actually run it you can see it
it uses the binding API to sum those up
so it has free individual Philippines
that are all headed together into a told
him and then the total value is 450 m
like I said this is now pretty bare bone
but I'm hoping that we could probably
create a similar binding for the
monetary amount which is the core part
of the Java monetary API so that
combines the currency interface which is
kind of the next generation of travel to
currency and holds that together with a
numeric
value got it so maybe adding up a bunch
of currencies together so basically if
this bill would then be reflected
ideally instead of a double property and
a simple double property we should have
monetary property and a simple monitor
quality ok so I I think from my memory
of all of the property classes that this
is all possible by extending the right
base classes and implementing the
correct methods to create your own
custom property types but it will be an
interesting exercise to see if we can do
it on the fly yeah well let's probably
start as far as we got not sure I also
want you if we can get through a fully
runnable code what and we also have lots
of examples at on get up already so yeah
it doesn't get far enough I plan to to
add this to the example space of the
Java money project so you will find all
these bullies get it kicked off now and
the worst cases after a few beers and
we're really then we're really cooking
and then we can finish it off later
tonight so as we will also need a
property I've request can you turn up
the brightness on your monitor so I can
I can actually see your screen on my
screen and for the broadcast it doesn't
matter because they said that their own
mod or brightness but I can't I can't
actually see what your size
Oh
Thanks oh it's I have interfered with
the internal wonder what does it get
does it change it that way I guess
that's the darker stitch catsuit yes a
gimmick a brighter brighter butter yeah
yeah yeahs him or I keep going thank you
that's good enough enough that's good so
I already started by adding some of the
main interfaces that exist for the
number binding so a monetary binding
monitor expression and something that
holds it all together this is still a
skeleton sore this would have to be
flashed out but there also needs to be a
property at this place on book what we
have in the peel so that's so double
property and simple download so we need
a monitor property
you know by heart what double property
is based on otherwise we'll just ask
netbeans that's fun pretty sure ooh yeah
second
I can see where this may be a little
more complex because there are so many
different types around it yep I did I
delved into this code quite a bit when I
was doing the skull text libraries to
mirror all the properties in Scala and
this was this was easily a couple days
of hacking to to get my perfect layering
of Scala on top of there I think there's
there's something like a total of thirty
classes and interfaces for all the
property and binding stuff but also are
curious I I will definitely show by a
quick how to instantiate actually the
money API inside that example we may not
be able to completely bind it to binding
simply because the bindings are quite
sophisticated and have a way deep
inheritance hierarchy as we see here so
we will basically need what this is
generic property yeah you don't need to
do that but you're going to need a a
monetary property and a read-only
monetary property so you need both of
those classes okay so you didn't want to
already enter we'd only one yeah so
that's extra in Absaroka so well well
all learners hacking here let me I think
I suppose some issues being let me
mention J focus which is a conference
upcoming next week I'll pop open the
website for J focus it's currently sold
out but Jay folk is embedded still has
available along you can still sign up
for Jay focus embedded so if you're if
you happen to be in the area of
Stockholm or want to be in the area of
Stockholm next week then check out J
focus embedded it didn't quite work
nope alright well we'll pop it up on
Werner's machine check out the j focus
embedded web site and that's a nice
conference to be a part of
let's do a second try
nope
well
alright so have you got the read only it
seems most neat double expression yes
you need one of those two is that you
don't need the number expression base
that's the base class so then we just
have a monetary expression which
actually is already it's just
we have a monetary expression base
yes we have much our expression this is
just ok meet
not sure if larger expression she ended
up being a gas yes this only the costs
of public abstract who trip your class
actually I guess there wasn't a number a
number expression as well this used to
be an interface first
because manager amount is actually the
interface that's none of the equivalent
to number if you want mm-hmm so if the
binding for the concrete class is also
necessary we will enter the double
expression I guess we would actually
need that based on the class at the
interface such that sound right or can
we just face it directly on the
interface are you talking about the
classes in the monetary appear yes so no
monitor APR monetary amount and currency
unit they kind of their the spec of
interfaces with different
implementations there is at least one
implementation in the current RI that
works out of the box yeah so I think
well it can be mine interfaces that's
that's the interesting question well I
think you can't actually use the
property without having a concrete
interface and all the property classes
are concrete they're not interfaces Oh
so I think you are going to have to use
the implementation you can't just have
it reference the implementation and then
pose it later i guess that's probably
what do we then actually need the same
layer as we as there is for money here
of a number here or can that be dropped
and it just user binding directly for
the concrete class so for money in this
particular case I think it's called big
money amount or something like that so
that that's our blueprint for what the
Chitty k may actually end up calling
something ya know is you're questioning
if you also need the abstract binding on
top of it or if it works just for the
concrete class like for the money class
and you don't need another layer of
binding like for double you have the
number binding which of course mixed
yeah complex yeah so you don't you don't
need the number bottom layer probably a
better pattern to look at would be the
way string
string string final properties
implemented because the reason the
number base class is there is because
it's reused across integers and doubles
and floats and all those types the ones
which are based on objects are string
ends there might also be a duration
property I think string and duration
property are based on objects duration
okay well that's not based on she saw
free 10 yet little key tenets
let's just
kind of see what the
okay so at the moment because there's no
JDK for yet we have like a main facade
which is called monetary which is none
of the factory fall season and who but
imported all the libraries correctly so
will can basically use a get monetary
amount victory
so they're not pinch problem
shook up
it's all the stuff
natori you
yes so
actually one of your current
No
so we didn't see you net provider yes we
get pulled up a string
some crystallized
Paris this is a this is a nice example
of how to use them the new money api's
for anyone hasn't tried out the jsr what
sort of what sort of work are you doing
on the on the jsr
you
there we go there
here you go so it's sort of what sort of
stuff have you been doing on um yes our
group so far just bug fixes yeah I've
just joined it so I haven't really done
anything I just trying to get up to
speed on how well they are and
previewing it and so on have you been
trying any of the AP is doing small
tests and together to learn the better
issue any any thoughts on things you
would have done differently I think some
of it is our for instance here getting a
an amount you need first to get a
currency and then an amount using
factories right now if I drew boos yeah
so I hope we can improve that most of
most of these factories should ideally
extend what you currently see for
example in Charlie until currency where
you have like methods called get
instance so what here and actually the
streaker yeah the latest update in Qatar
I believe already you can get rid of
this so I need a second argument here
because basically what we also try to
support is currencies that are not
necessarily i saw although I so it's
like the default out of the box but if
you want to support other currencies
either for social-media gaming so
Facebook for example has its own
currency or other virtual currencies
like Bitcoin and anything that's similar
that the community picks up and likes to
support that is basically also a
currency as well but most of them are
not likely to be iso standardized in the
near future so that's why we introduced
the notion of a namespace which is
basically like a different currency
system other than I so which allows to
switch between current
systems more easily
so although technically just try some
technically if the implementation
already supports it we should also be
able to use tenish fraud let's see what
happens we're interesting at least sorry
Soren Soren said remember to add
twenty-five percent in tax for the the
Danish currency
okay so what will it be for now we will
just
you get a semicolon before FX I can't
find a semicolon in keyword but yes so
let's go back to the
slowly come
so we may not be able to get to a total
year although we can thanks to the money
API we can do some of those additions
actually directly with money if you are
that's good so let's but ideally we'd
actually have the binding so when update
automatically yeah oh don't get our
first compiler okay but that's actually
that's some of the new stuff the
monetary expression is making us unhappy
soul yeah just stop it out stop stop
stop fake it until you make it into the
class you don't yeah well originally it
was an interface are we comment about
all that all the NetBeans will just
accept just well deleted and let it
regenerate just just woke up you know
this is probably not the whole file just
whack the code you have highlighted
whack all for Olmsted it also ain't
gonna implement it so I know we're just
really different it okay whack whack
whack ok dot and then tell it
now autofill not been smashed oh it's
abstract yes that's what netbeans
officers to it well extended you want it
to be abstract no for now it's fine if
it doesn't I just wanted to compel me or
whatever well it takes to talk about
those feral oh that was a guy yard I
have this one of those keys oh these are
older idolized yeah but yeah we can
photos from would throw this wise it my
god okay so this one's not abstract so
if you wanted to compile you have
another problem is i think monetary
expression was changed into an abstract
sorry it would have to extend it this
was like the interfaces that were used
for number yeah that this was changed so
monitor expression is not in need of it
that's why i guess it cannot i say yeah
with the base so it can either extend or
we'll just take it away and simply let
it where's your control key still here
at the end of struggle okay sorry
monetary expression based and then and
then implements observable yeah also I
want to control Sarah could okay up
there howdy hmm drag out save it all I'm
sure it again thanks
Oh something
executing
alright still just doing something still
running up
nor okay yeah so it's actually well
actually quite good and it supports the
danish kroner as you can see so even
though this is more or less a hard-coded
example because here I I use the double
value of 10 and instantiate it a
currency unit from the currency unit
provider and most of the iso is already
supported so even though it's a little
as a two-string you even get the iso
here but yeah even the nice krona
already supported cool so
so could do a little bit of that
actually in here
yeah I guess for for the sake of example
we'll just leave it that's the same
value because basically we would need a
satyr like this to change the number but
we can the nice thing at the money API
itself and of course that's why yeah
some binders would probably get a little
more sophisticated we actually have to
say week use of the underlying API enso
what I think I think we're going to have
time to finish the whole interface but I
can show you the method where you
actually tie in the addition to make
that work so the binding we get they
called in the right place so that's just
to to rip this up show simply harder if
you proof that the ad works in this case
so we're just adding again as as we have
those free bill beans up there and offer
them now contain a new amount you which
is returning a monetary amount yeah as
you can see this is basically the total
which is 1010 krona plus ten krona is
twenty coma which is rather simple I
talked about it it shows that the add
method in this case works in the
monetary ago so the challenge which is
probably a slightly larger called face
is tend to to add this to a monetary
finding based on Djokovic's where the
edge and everything that we we solve for
the numeric example happens as
seamlessly for monetary values and the
cool thing is that if you bring that add
method
groovy you can just write plus and it
will work yeah because the groovio
rights plus innocent to an mm-hmm rather
are actually at least one or two plugins
for groovy that I've seen earlier that
tried to get monetary support into
groovy already but we're also hoping to
to get the support of the monetary chase
are integrally they don't so that either
improved versions of these plugins or
maybe a new plug-in actually makes use
of this API so that it not only uses the
java.util currency that exists right now
because that's what the plug-in extra
dancing groupid doesn't reinvent the
wheel but that it can also support the
API of chase are 354 also in kvm
languages like movie okay so this this
is the magical class that we need to
implement actually make it work and
basically like you'd have to override
implement this method add and then
implement this for you know adding other
types of numbers or possibly adding an
object like am so of course we will also
have something like an observable
monetary value yeah yeah so I think
that's the trick yeah so basically this
this interface assumes you're only
dealing with the for primitive types and
what we really want is the ability to
add to monetary types to each other so
probably what we want to do instead of
having a number a number binding because
this doesn't really apply to us I mean
it's still into facebook if you really
wanna do is we thought to have a
monetary binding class which has its own
add method on
yep thank you do monetary binding dot
you don't at an instance of that add to
another monetary binding mmm you'd have
different stuff on it all right but I
don't think we're actually have time to
stuff out a hold on code maybe after
some a lot more beer where we already
got the nice examples and actually any
anybody you don't even have to be as
brave as a class to trine the JTP and
trying to expert coupe of course if you
want to contribute the lads to the
actual spec you're more than welcome to
do so but those who want to write cool
examples based on javafx own groovy on
java ee or anything that you can imagine
it that you would like to see there's a
very base and yeah it is no no it's
based on java it's just a chase art each
other standard extension yes so that the
project is called Java money on github
and there are a couple of repositories
there already one is the actual main
channel on it that's the spec and our
either are just short in this example
and there's a nice example space already
which editing this example would
basically get a new module like chava FX
there's a oh this is also currently work
in progress but i created a web example
that as a matter of fact I I presented
at least once at the D server-side the
same conference where you hooked up with
young in Prague I did a presentation
about this example application which is
based on something that people have
written for spring to array long time
ago and at the time we had another chase
our that was for all
of units but was specialized in for
monetary units and that I had rewritten
to use those units instead of plain
numbers and to also be country specific
so you could you could lock into one
country in the stock market and it would
show you for example your stock value in
u.s. dollars and if you log into a
different stock market it would show it
in Euro or pounds or if you own or
whatever and this application I'm
current in the process of porting to the
new money api so that's java money
trading app and so basically this
examples app is free to anybody who has
a key top user and in the examples
project you don't have to sign the chase
PA or become member of the expert group
or basically so it's a low this area
entry it's it's an impact this atop that
chase of people who are in charles
groups and they wish to adopt the chase
our can of course contribute those
examples through this example space very
nice and all right i want to put the
results of what we just discussed in
here cool so thanks for being on the
night hackers program sorry there you go
what all right well my aim is all of it
off but here we go did you have a pure
already and i wanted to announce what
we're doing next for the night hacking
show so i am leaving for tallinn estonia
i'm going to be chatting with yevgeni
and anton who are part of the arable
crew and i also have a whole new lineup
for j focus i just posted it on the
google calendar and the ustream site so
you can sign up for those events i'm
going to be interviewing Highness
kibbutz holly from IBM holly comments
then cat super minion ends one more
person I'm blanking on this but if you
check the schedule you'll see the four
interviews and we're going to keep the
night hacking stream live the entire
time at the j focus stage so you'll be
able to see the posse live will also be
streaming Gosling's talk all on the
night hacking stream next week on
tuesday and wednesday and of course if
you're around see it live you can still
sign up for j focus embedded which has
some open slots and get all the embedded
content plus that stuff cool alright
well thanks everyone for joining the
night hacking stream out the fourth
person is Nome 10 from Jay frog thanks
very much for for Jim Weaver for
pointing that out so thanks very much
for joining us for the stream and I hope
to see you guys tomorrow in Tallinn
Estonia</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>