<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lighting Talk: JITWatch Plugin | Coder Coacher - Coaching Coders</title><meta content="Lighting Talk: JITWatch Plugin - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java/">Java</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lighting Talk: JITWatch Plugin</b></h2><h5 class="post__date">2016-08-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NIuSMzfX3g0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so my name is Dmitri I work for
jetbrains on the cuddling team and we
had the hackathon in our company a
couple of months ago where I decided to
build a plug-in for intelligent analyzes
the jit watch logs the hotspot
compilation logs so and now I just
wanted to give a quick demo of the
plugin it's not released to the plug-in
manager yet I wanted to release it right
before this talk but if I found some
problems that I still need to
investigate so I hope that you will be
to get your hands on this like later
today or maybe very soon so so in order
to load the logs file you can either
just use the action in the menu or you
can run the in the run configuration
settings you can enable the option to
collect the logs automatically then it
will add the necessary vm options to
enable the logging so when you open the
logs the first thing you see is this
report window is it essentially gives
you the list of all inlining values
failures which would be useful to
investigate so you can see the reasons
here and the number of invitations and
so these are the methods that you might
might want to make smaller in order to
improve the performance of a code to
make sure that they in line when you
look at the code itself you see those
those markers in the editor they show
which methods have been compiled and how
much native code was generated and so on
and if I method was recompiled multiple
times you can see this too yeah
decompiled two times and also here in
that deter you see highlights for
inlining successes and fails so also the
calls that have been hired that are
underlined in green are the calls that
have been successfully in line and the
red underline showed the calls that
failed to inline once again you see the
reason here so in inline failed no
static minding and the other thing you
see here in the editor is the escape
analysis results so if an you so here
you see that a new keyword is on the
line with green this means that this
object allocation has been removed by
the escape analysis in the compiler and
the other thing you can look at is the
bytecode so if you if you click on n if
you click on one of these these gutter
Marcus you get navigated to the
corresponding location in the bytecode
and you can also jump you see that there
is some synchronous scrolling between
the bytecode and the source code and you
can see also the range of byte code
lines generated from each source line
and in the bytecode you can also see all
sorts of tooltips corresponding to the
information in the hotspot log so for
example branch information escape
analysis information uncommon traps I
don't really know why it would be useful
to see them but still the information is
there so I highlight it and also in
lining information one other thing that
you can see is you can see the entire in
lining structure of a method so for
example this test sort method you can
right-click you can right-click and
invoke the show in lining structure
action and here you see every co-heir
everything that has been here that
either hot spot spot either tried to
inline or fail to inline into this
method for example this a really huge
capacity it was not in line because
where is the tooltip there should be a
tooltip yeah there it is so it wasn't in
line because it was never executed and
also this call also failed to enlight
already compiled into a big method so
you can see that you have quite a lot of
inside what hotspot is actually doing
with your code and this works for java
code as well as cotton code of course
and yeah you can use I don't have any
big success stories for how you for how
this could be used to improve the
performance of the application or
actually I do have one so we so IntelliJ
IDEA generates not now assertions for
methods that have not null annotations
of the parameters and it turns out that
we generated so much byte code for every
not null check that it prevented the
inlining in very many cases so we just
reduced the amount of code that we put
in to give a byte code that we put
inject into each method and put some of
the code in a shed helper method and
this has improved the inlining that
works in IntelliJ quite a lot so that's
it and I hope the plugin will be
available in the plugin manager in later
today or in a few days later this week
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>