<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2012 • Interview with Chris Anderson | Coder Coacher - Coaching Coders</title><meta content="GOTO 2012 • Interview with Chris Anderson - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2012 • Interview with Chris Anderson</b></h2><h5 class="post__date">2012-08-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ySpGGLrZt74" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to this interview we have
Chris Anderson here from couchbase
welcome thanks except one and here at
the go to conference and I hope you're
fine great conference so far and I heard
that you had problems at customs and
didn't sleep for 30 hours is their true
oh well the travel was great for me but
not so much for our t-shirts and remote
control helicopters they were giving
away what happened they're in a box
somewhere straight ok tell us a little a
little bit about yourself and how did
you get to couch TV and couch base sure
so you know back in the day I guess I
was a ruby on rails developer building a
project that was spy during the web and
we're spy during the web into postgres
which was all well and good but the you
know fourth normal form and the actual
web don't really mix once the pain and
it worked but it was slow and I could
have optimized all those queries but
instead I just tried out this new crazy
Apache couch TV thing I fell in love
with it as a user first and it was
through using it that I got excited
about it and taught myself erlang so
that i could add features and fix bugs
and got involved in the community and
damien cats and yah glitter my two
co-founders of couchbase were you know
really great kind of at involving new
people in the community and making it an
open and experience and you know even
though some of my crazy features were
bad idea they still let me try them out
so yeah it was it was really good to get
in from the open source angle hmm okay
yeah let me start with a perhaps strange
question it's it's about the merger I
think this is important for a lot of
users because if you look at it from the
outside it's a little strange to
understand because of a lot of reasons
because of do you see the use cases and
it looks like different worlds so can
you tell us a little bit more about the
merger and perhaps the road method yeah
so the history is damien jana i founded
a company couch lon and there was
another company called min base that had
a high-performance key value store and
that's as opposed to couch TVs flexible
document database and we'd always
intended to add a caching layer with
high performance in front of our
document database and they'd always
intended to add more query capability
and flexible multi data center
replication but instead of you know both
going our on our own paths and kind of
ending the same thing we joined forces
and I think that gave us you know an
acceleration maybe a year or two just
you know like that as far as getting
these teams together and building a
product that has the best of both worlds
so the defining feature of mem base is
that it uses memcache d as the front
layer that talks to and it used to use a
different storage engine and now it uses
one that's based on couch TV which gives
us a whole bunch of nice benefits for
performance and reliability and
especially longevity because as you have
these long-running databases you can
have fragmentation on the on disk files
and just a whole bunch of stuff that
that the couch TV storage engine is
ideal for handling so oopsie you
mentioned the memcache d protocol so you
still stick to the memcache d protocol
from the outside that's right so
couchbase 2.0 and couchbase 1.8 are both
drop incompatible if you're already
using memcache d you start using those
and the first thing you'll notice is
that if power goes up and you trying to
computers back on your day is still
there but you also get more than that
you go to query capability and you get
the ability to add and remove notes to
the cluster without having but today to
go missing you just took a career
capability
kind of quite a query capability because
the memcache d protocol is not popular
for acquiring capability right so yeah
that's where it starts to get
interesting from a technical standpoint
we try to put all this behind
developer-friendly api's so if you're
just using our Java SDK or Ruby or PHP
or whatever dotnet whatever your
language is you strut queries and what's
happening under the covers is your puts
and your gits are all going via memcache
d as well as you know some of the other
memcache the operations like you know
get old and Kaz and the various kind of
more advanced of cash d features but
when you want to do range queries across
MapReduce view that you've built based
on your database those go via the HTTP
interface so we just have these two you
know interfaces that are that are native
to their particular ways of accessing it
and we abstract it so to the developer
you're just writing the database and
running queries against it again about
cavalli on documents so you're gonna
recommend to stall documents as the
values or that's right and I think a key
value is kind of the simplest of the new
SQL options out there so key value
really you can if you have the key you
can save something under it and you can
get it back and generally a key value
store is going to not look inside the
value its its opaque with a document
database really the big difference there
is that the document database is a where
some level of the structure of the value
so in our case we treat the value is
JSON and once we know that is JSON we
can parse it and allow you to write
functions on it to build custom indexes
so if you want to find you know all the
blog posts sorted by time that's trivial
you're gonna do more complex things like
figure out how many of your users are on
level 15 you can also do aggregation so
again on query capabilities what do you
have you integrated MapReduce right so
if you're familiar with Apache couchdb
couchbase uses the modification
the MapReduce indexing and query engine
from CouchDB so we've done is we've
extended it to run on cluster so that as
you're adding nodes and removing nodes
the indexes are rebalanced along with
the underlying data on the map produced
Crabbie's in JavaScript and Charlie yeah
typically JavaScript we also support
copy script in Erlang and it's not a big
reach for a developer to implement other
languages so Python support or Ruby
support is something that you know a
dedicated developer could could easily
use if they wanted to write the adapter
a few years ago I have something about
what was it called it tap into face of
something like a stream out into face
yeah is it is it still alive can someone
use it yeah so it's a sort of an
interesting to really get into that
you'll start to understand a lot about
the internals of the product because tab
is what we use inside of one cluster to
keep cluster members and sync with each
other so as you do a right to one though
the very first thing we do after that
hits our network adapter and our memory
is in queue it to send to another node
for replica so you're less likely to
lose data and same the same kind of
queuing system will send it to disk as
well and the Layton sees you know to go
to disk we're going to be longer than
going to a remote know and most of the
time and that's all via tab so tap is
essentially a fire hose of the activity
on the cluster so that it can keep all
the nodes and sync with each other and
it's a it's a little smarter than that
it only sends each node the data that it
needs to know about as far as which
shards it's in charge of so we are doing
some work I would say this this may be
coming out soon or we're actually
experiment with a couple different ways
to do this but tap is a natural way to
get a real-time feed of what's happening
in the cluster so if you wanted to keep
something like an elastic search index
or some other index system up to date
with your changes in the cluster one way
you could do it is with tap that's going
to have very low
Layton sees but what we found is that if
we do the indexing based on after it's
been written disk so rather than sending
it to the external indexer as soon as it
hits memory we wait for it to drain
through the disk queue and then pull it
back out off a disk you're more likely
to end up with consistent you know
something that's more kind of easier to
deal with as a developer because in the
most extreme case with the tap you could
have something show up in your search
index before it shows up in a replica
for instance but with the disk queue
then you really know that your index
reflects what's stored so for that we
use the same technology that powers our
across data center replication which is
based on the couch DB replication which
is essentially its killer feature so for
that essentially have you know if you've
got a 16 noted cluster they're just
going to trickle those updates push them
out to whatever indexing terior using as
they hit disk okay so what do you think
of the typical use case is no for this
new product you have yeah so for no SQL
the the use cases are all over the map
for us we think that sweet spot is
really people who have performance
constraints especially around latency so
if you need to measure your database
response times in microseconds you have
to have something that's using memory
caching layer disk just can't keep up so
for us the disk is primarily around
throughput you need a faster disk if
you're going to have aggregate
throughput reads or writes especially
right says you're growing out your data
store or if you have very large systems
you're going to need to have disk
throughput for rebalance operations or
for warming up new nodes in the cluster
all right dealer reboot so this sounds
perfect for the gaming industry but use
for sure you have more government yeah
so we you know Zynga is a customer
america online advertising this
customers they use couchbase for ad
targeting we also have other big data
you
ntt docomo uses us for big data
analytics we have also all kinds of
small users as one of the beauties of
open source is I would guess most of the
people who are using our technology we
don't even know about it and it's only
when people you know really have a
commercial interest in making sure that
you know they have someone they can call
about up time and what to do under
certain circumstances but that's when
that's when they find us so so then your
business model is still that the
database is free to use and so we have
an enterprise edition for and it as well
as the Apache License all the work we do
is open source but then we build an
enterprise edition that has extra QA and
supportability and then that gets long
tail bug fixes we have people who are
running versions of that software that
are months and maybe even a year old
that have just been you know patched by
us to make it so they have to do you
know the smallest upgrade possible to
stay on the latest stuff okay you just
mentioned zoo know the game company does
the Facebook going public has any impact
on zynga on coach basin I think the
facebook IPO assuming they don't crash
and burn and I think things actually
looked all right I think they probably
did pretty well in their pricing maybe
I'm maybe I'm an outlier there but i
think that i think that they didn't
leave any money on the table okay and so
that's good for them as long as they
stay stable and continue to grow its
going to be good for the startup
ecosystem not everyone okay let's get
back tecnica the memcache tree protocol
are there any ideas to extend this
protocol because it's quite limited so
we do have protocol extensions yes and
one of four instance there's the observe
command that you can use to see when a
right has been persistent disk or to
another replica which wouldn't be
relevant in just an in cash d scenario
because there's no disk or replicas so
we've had commands like that when you
can you add a hook on this observer
observation or so it's essentially
something say your java client would
abstract for you to the end developer it
would look like a synchronous right but
we don't want to actually
walk on the network connection to the
server so we have this asynchronous
streams going in both directions and you
do the rights here and you get notified
from the other streaming but but it's no
not a callback whether use a specific
function is called good well so now once
you have those two streams going our
SDKs will extract that for you so you
can make it look like a blocking right
if you want or to have a call back when
the right completes okay good yeah can
you tell us about the future of conch
base yeah what upcoming new features
yeah so the current GA released a
version is 1.8 so that's what people
like Zane good I neo l are using a
production right now and it is it
doesn't have the query capability is
strictly a key value store so what we've
been doing is doing a major rewrite of
the data path of CouchDB from Erlang
into c and c++ so that we we had the
performance we needed in order to make
the upgrade be seamless for users but it
was using too much cpu for common you
know you see to type deployments so
that's why we did a rewrite and see so
now we have that same performance we
were able to get to with the storage
engine but with much less CPU usage so
2.0 is coming out this year hopefully in
the next few months and there are
developer previews available now some
people have that in production or in you
know staging environments right now and
are giving us a lot of feedback on it if
i was going to start a new project i
would definitely take a close look at
the two point O developer previews weird
a few min wait a few months well started
working with it now the api's are pretty
much what they're going to be it's just
that you know if you want to be able to
buy the Enterprise Edition it's not
available yet okay past one word about
monitoring I've worked with min base
about a year ago and the monitoring was
quite interesting but I think you you
added more features in the last year
yeah well the big features for the
monitoring are being able to watch those
cues drain so if your disk queue starts
backing up that means you know that your
overall aggregate right
it's and reads or you know overwhelming
your iOS subsystems and the next thing
you want to do kinda want to do right
away is add another server effect so as
you add servers then you're going to be
able to spread that disk load out across
more machines so having visibility into
those q's is important but those are you
know that there's maybe the top three or
four stats most people look at but we
offer you know end up kind of
second-by-second graphs of a whole bunch
of stats like what is the cache miss
ratio you know what how long the various
fetches take so that you can get to the
bottom of any kind of operational stuff
you might you might see when you're
using it it's these statistics API is it
public so I mean that that external
services or so are our entire front end
is our admin UI is driven the rest api
and so anyone can just write a script to
interact with those same AP is that our
ajax UI uses so so does companies or
chef a puppet interfaces on sm
activities yeah so there are plugins for
a few of the popular monitoring tools I
don't know off top my head which ones
they are but yeah I think you know the
popular ones and then probably somebody
haven't heard of because it's fairly
easy you just write a little a little
script that knows how to that take the
JSON off the rest api and parse it and
you know put it into our rd or whatever
it is you want to do with it hmm okay
one question many people care about what
happens to couch TV now yeah also we are
actively contributing back to couch TV
and especially and we're making
improvements to the view indexer and we
have done that that implementation of
the storage engine and see instead of
Erlang we've queued really close to the
Erlang version so for instance you can
write out the file with the C code path
and then read it back with the Erlang
code paths may actually use that to
verify you know as we're developing that
we have
any bugs in there so that means that
it's right for contribution back to the
Apache foundation I think Apache does a
great job of making it so that no one
company can really own a particular
technology hmm but if you are trying to
innovate at you know a breakneck pace so
that you can do what customers need
right now you don't want to put the
customers on the other side of the
apache commit firewall right so we we
just do our stuff and we all our code is
apache license so if anyone you know in
the apache community wants to take it
and pull it back into CouchDB they're
more than welcome to do that and if we
get it second to you know take a take a
breath here we might do it ourselves but
right now we're focusing on getting the
product you know one hundred and ten
percent washbasin edcouch to be itself
does it has a still a strong community
and perhaps also some leaders who oh
yeah lead the direction so there's two
other startups that their primary
business is couch TV there's Irish couch
which does plain vanilla Apache couch TV
hosting and then there's Cloudant which
does a version of couch TV is designed
for big data and so they don't have the
same low latency characteristics we have
but they can definitely scale up to
large clusters uh-huh okay last question
perhaps about you at the beginning you
talked about languages but as far as I
know one or two years ago you only had
three four languages the ruby lane or
sometimes not working so yeah embed
right it has improved yeah we've got a
whole team bully SDKs so Ruby php.net
Java Python those are the big ones but
there's also community support for
things like closure and you know he has
an angle interest in general and just uh
whatever developers are using these days
there's a community effort right now to
build a nodejs library and it's actually
you know one thing to know is that if
you have a memcache d library already
you're good you can get better
performance by upgrading to what we call
smart client
it's aware of the clusters apology so
that it doesn't have to go through a
proxy layer can write directly to the
node that's in charge of a given data
item so our clients all do that but if
you're using a legacy code base and you
just want to do kind of an incremental
upgrade you don't have to change your
client library out if you're already
using memcache d ok I think it was a
great interview thanks for being you
thanks for answering the questions yeah
there's no time that go to a conference
I'm gonna get right to it see you next
year</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>