<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2017 • Avoiding the Nightmare on Elm Street • Thomas Anagrius | Coder Coacher - Coaching Coders</title><meta content="GOTO 2017 • Avoiding the Nightmare on Elm Street • Thomas Anagrius - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2017 • Avoiding the Nightmare on Elm Street • Thomas Anagrius</b></h2><h5 class="post__date">2017-06-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Qhx81eI5FPs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yes hi I'm my name is Thomas I'm the
only guy here who's not on stage because
of my merits but because I'm actually
paying for for this I hope I hope you'll
stick with me anyway
and that I am not trying to sell you
anything I'm trying to tell you
something interesting
so my first slide here is programming is
pain and suffering and I think that most
of you will nod to that statement in
some regard at least and I actually
changed my title it was avoiding the
Nightmare on Elm Street to Elm oh my god
what the have we done it should be
and it should actually be what the
were we thinking
when we decided to choose this
technology because this is a talk about
choosing tech when starting a new
project and it should be maybe not so
much what the were we thinking but
what were we actually thinking at the
time of making that decision so this is
me I work for try folk and who me oh I
have been doing web development for the
past seven eight years or so and I have
a like very interested in functional
programming languages and that kind of
attracted me to LMS language so this is
not going to be you talk about Elm in
particular but it's gonna be a talk
about as I said choosing technologies
and why we decided to choose Elm so who
here knows Elm that's about the same
number of people as use web VR it seems
on so about 0.5% of the room it's good
because it doesn't matter this is not a
talk about Ilham but Elma the added
Lance is that it's a typed functional
language right
it's based on ml is not a seal or
or anything like that that's
conventional it's just like just like
typescript and so on it's something that
compiles to JavaScript so it can run in
the browser hopefully soon even
webassembly it's made from the ground up
to be a front-end language so that it
has features that caters towards doing
front-end ish things it's I mean this is
maybe something a bit novel for a
JavaScript developer at least that there
are no runtime errors that means when it
runs it runs it doesn't crash ever there
you don't you don't you don't get like
runtime exceptions and says oh no
pointer exception or anything like that
and it's very fast so this is what it
looks like like it doesn't seem like
JavaScript and it's even to some extent
people would say it has an esoteric feel
right it's like alien comes here
compared to what we're used to so but
just to set the stage as I said I'm I
work for a company called hooyo and what
we do is we do a log aggregation and
monitoring tool right so if you know
Splunk or qivana or known ya or tools
like that you it's in that category
right and it's uh it's it's a technology
stack of scala akka Kafka and elm
alright and we've been around for about
a year so it's a startup and we have
about 40,000 lines of elm and that's the
second biggest Elm codebase in the world
I was told a couple of weeks ago um so
just give you an impression of the kind
of problems that we had this is this is
the product right it's a it's a place
where you can search for text string and
it's going to find the logs across your
infrastructure that had that string and
you can then do string manipulations and
grep and arc and all kinds of operations
on it to find some interesting
information when hits the fan and
you got a look in the logs
that's what we do
so you can see there's a lot of
information streaming out right this
this is actually a relatively small
number it's only a hundred and seventy
two thousand its we are easily into
hundreds of millions of events that we
deal with and they get streamed to the
front end so we have to be really fast
and we have to be able to transform data
as it streams in and so on so it it puts
a lot of it put it puts a lot of work on
the front end so we had to find a tool
that would match that right and we do
charts and so on so the initial reaction
that people have when I tell them all we
we built this thing in Elm oh are you
guys crazy wow that's so awesome what
the hell were you thinking choosing a
new technology like Elm this is like
you're going to have a bunch of problems
right how do you even hire people
no one knows them like just look at this
room we have a room full of developers
and you know two people have used it so
well when starting any kind of software
project you are going to have to make
tech decisions right and how do you make
tech decisions well the considerations
that we had was that as I said we have
high volumes of data we want to do a lot
of transformations to make it look cool
and so on we want to remain very
interactive
while we were using the tool but data
streaming out and we're doing
calculations we had a distributed team
we had a certain company culture that
we're very language geeks so it had to
to fit with that as well and we have
dashboards like these these things that
sit on the walls of companies all day
long like they have tens of these
monitors on the wall that show you know
has stuff goes it gone down how many you
know database queries have run is on and
this is on completely dynamic data it
could be anything so we don't want this
to crash we don't want a big red or blue
screen of death on the wall right and
everything stands still oh you know
we've had to
hundred thousand visitors in the past
week we also had that last week I wonder
why that is
right it's just hung itself you don't
want that you want it to be updated
constantly and not go down without
refreshing the way that you usually pick
technologies is that new is always
better I know a lot of people that will
say that at least right the normal
scenario and the companies that I've
been in is more like this you know
Thomas starts you've been picked as the
tech lead for this new upcoming project
that we're going to build right oh
that's fantastic I'm you're going to use
Cassandra I'm going to use kubernetes
I'm gonna use rust right it's because
that's awesome and reacting Redux what's
the project about right so obviously you
got to choose the right and the best
tool for the job but how do you actually
determine that what does best mean does
it mean mainstream does it mean the best
performance does it mean written in web
assembly does it mean you know that it's
easy to write that there's a lot of
documentation that it fits your culture
that you know it's easy to debug and so
on what does it mean it's a combination
of all these things right it has to fit
your company it has to fit the project
and the you know what you're trying to
do but no matter which technology you're
going to pick you are going to have
pains right you're going to have pains
if you choose JavaScript you're going to
have pains if you work with WebGL you're
going to have pains if you write it and
see but they're just different pains and
this was first of served by the Buddha
Siddhartha Gautama while he was sitting
under his Bodhi tree that life is
suffering that's the first noble truth
and that you know that's in every face
of life and since we're developers a big
part of our life is programming and thus
by extension the first or the modified
first noble truth is that all
programming is suffering to program you
must suffer it is impossible to program
without experiencing some kind of
suffering right it
the only thing that you can choose is
which kind of pain do you want right
that's not a very nice choice but that's
all we have every choice you make is
going to have trade-offs javascript is
pain anyone who says differently is
selling something right I I don't I I
you know when I did this talk the first
time I had a long list of facts about
JavaScript you only need a few examples
right I think Ben already brought it up
what do you get when you add two arrays
well you get the empty string of course
right not a number is not equal to not a
number and ya know I don't even want to
go I don't even want to go there and
also the just the fact that a lot of
developers actually don't like
JavaScript because of these things so
people there will be friction just
getting people to work with it at least
in my company so but Elm is also painful
it's very painful trust me I've been
dealing with it for the past year the
pains are just different
so the code pains in ohm is that you
have this esoteric syntax not mainstream
there's a steep learning curve come it's
compiled to just being able to run in
the browser so you can actually see the
code that you wrote running in the
browser that can make things painful
right it's difficult to write takes a
long time to actually write the programs
but once they're rich they run really
well so there is that there's not a lot
of tools support because it's new and
actually that's the main thing for us
it's been that being first adopters that
is very painful right lack of
documentation and a lot of things that
steam from that so webassembly that's
also pain right and anyone who is just
different no actually Ben Smith is
selling something so but what you just
have to do is you got it you've got a
way you got to think about tech
decisions when you have a green field
like we had look at the problem try to
predict some of the things that you're
going to the problem or the difficulties
that you're going to meet and find a
technology that matches that
right so just think of it like a
business strategy I don't I know you're
all developers right but you should take
responsibility for your company when
making not just add a new framework but
think about would this actually benefit
my company in the long run so think of
it as a long time strategy but what
companies also have to remember is that
keeping developers happy and excited
about the technologies that they work
with that's a strategy as well so maybe
actually hiring the best talent will
only they will only come in the door if
you actually have something exciting for
them to work on so for our problem or
for our product the problem was all the
ones that I listed before and we try to
match these with what Elm would provide
righted lots of data transformations
well it's good functional language right
data transformations is kind of what
functional languages do very well
there's high volumes of data elements
like extremely fast very interactive
well it's extremely fast we're a
distributed team a thing about type
languages is that it offers
documentation for the developer right
so when rather than writing a lot of
prose you can actually just annotate it
with a type and the compiler will
complain if you're using it wrong and
being a distributed team not sitting
next to the guy that you're working with
there's a lot of value in having types
in that we got through element we
wouldn't have gotten that for JavaScript
company culture as I said were language
nerds so it was a very good fit for us
and dashboards that run all day they
don't crash because there are no
runtimes exceptions so the biggest pain
that we've had in the past year is
definitely being early adopters being an
early adopter means that when you meet a
problem you're the first person in the
world who who meets this problem right
there's not going to be anyone who's
written about it on Stack Overflow
there's not going to be you know
I blog about it you got to figure this
thing out yourself and that takes time
and it can take you know you can sit
with a stupid little bug for weeks and
then hopefully you're going to rub out
it afterwards right but you know I think
of I think of going into things like
this as an investment and in financial
investment there is there's a concept
called the J curve and that means that
when you go in and you invest very early
in a technology or a company like a
startup like here you are going to lose
money for the first few years it's going
to cost you something but that initial
investment will turn after some time
usually in in financial investment it's
years for us we hope that it's now we're
over the worst part now one year in
right it seems to be turning up for us
but we hit our low point down here in
October 2016 those were dark times we
this was when when when Elm which is an
evolving language we figured out as well
decided to cut about half their features
and add some new ones and unfortunately
that half that they cut away were the
ones that we were using so we got a
figure we had to figure out what the
hell to do and those were some tough
some tough months but we're out of the
tar pit now and we're happy and we're
excited about our choice you know we get
a lot of good publicity just being able
to talk about being the second biggest
Elm codebase in the world and a lot of
people are excited about our project and
our product just because it's written
and um so there is that so one of the
cool things if we have time how much
time do you have left 15 minutes all
good so I'm only going to use about five
so you can go home and sleep one of the
cool things that you get right there are
always pros and cons one of the pros
that you get with Elm is that you get a
time-travelling
threaten time-traveling debugger right
and at least we thought so
that's that's one of the selling points
that let kind of said ah we need this
why we want this this is why we chose
them and about two weeks into the
project it says yeah but not when you
call JavaScript and we had to because
you know not everything is implemented
in elm yet so we have to make a
real-world project so you can't use that
that doesn't make a good demo today of
course they have implemented it since so
it does work today so let's see here
live coding for the win let's see if it
works so I'm starting our application in
debug mode and that actually means that
it can you see it oh no that's actually
a very bad position for the debugger to
be up there you can see here that you
get this little this little widget
inside your application and if I try to
use our application a little bit and get
some results and click here and go into
fields and see what what data we have
available for this event and then go
over to settings and you can see that
it's it's counting up down here
so if I try to open I should actually
look at my screen rather than this
screen that's a lot easier so if I try
to open this debugger window it actually
shows me exactly what has happened
through the time that I used my
application every single state
transition every single click every
single update to the data is available
and this is something called event
sourcing right it means that you treat
every event every message as something
that needs to be put on the queue and
then processed by the application and
that allows me to do things like this so
you can see as I'm traveling through
time
the UI is updating accordingly and I can
stop at any given point in time and look
at okay what data was was available what
did my what did my the application state
look at like and so on that's extremely
powerful imagine a situation where you
have a customer for your new product and
there's like ah you know every other
Wednesday when I go into the settings
page and click this particular button
nothing happens so rather than writing
that description they can just say oh
debug and when you're done going through
this this process you click export so
when I then refresh and they sent this
file to us then I say import and
hopefully I can find the file it's right
here alright and we're back
and I can see exactly what they did
exactly the problems that they had I was
very excited the first time I saw that
so I didn't do it so so I mean there's
there's always dangerous with cool
features as well um one of the things
that you get in a name L language is
that you get a very very powerful type
inference on the code and I've sat for
you know being a front-end developer and
having developed for many many years the
way that I usually code or experiment
with my application is just like the the
VI guys just said I would I would write
something and then I will go over into
the browser and I would checked it at
work and then I would try something else
did it work now and how does that work
and experiment with it and so on but
ever since I've been working in Elm I've
had days where I've sat like six hours
and not even start my browser doing
working on a web app and someone would
you say Oh could you oh you know could
you come over and see this cool feature
that I've developed and say and then I
try to show them in the browser and what
OH I haven't started the server today
you know that's that I don't I don't
think a front-end developer would you
know normally work this way but so you
get to trust your compiler and maybe a
bit too much that's all I have for today
I any questions just shout or shouting
don't it shout into the microphone my
question is I have heard good things
about elm and from very prominent people
in community but that's fine but we see
a lot of innovation around es as well
and if someone needs to step in twelve
or basically not particularly
adilyn but functional programming per se
in context of JavaScript and front-end
how good investment do you consider
album I mean because you are saying Elm
is good fit because of those goodness
and down the line if we look at say few
years javascript is going to get most
probably those goodness natively well no
JavaScript will never be able to do many
of the things that you can do gnome
simply because it's a different language
and there are different insurances and
and so on I mean most of the strengths
like not having runtime exceptions you
could never have in JavaScript but sure
I mean the functional aspects and so on
they get grafted on on to JavaScript but
you're you have a very broad and
mainstream language if you want
something more specialized for a
particular use case right then you might
look into something like this I mean you
don't have to base your entire product
on Elm either right you can just make
one page or even I know that that Elm
Lang calm all the Elm that they have is
like the login widget in the corner
so you can just you can just do a little
thing and try and see if that works for
your applicator or for your company
right but there is a steep learning
curve definitely associated with it
my context was morally partially
touching on CoffeeScript as well for
example mm-hmm many consider it maybe
just in textual things that's what it is
so javascript natively gets those
goodness and say CoffeeScript is kind of
obsolete so I mean yeah the thing is
that you can you can say that about any
language right any Turing complete
language you can do anything in but you
know why not try to pick something that
is more appropriate for the task at hand
and of course I don't know your company
but if you have a certain category of
problems whether maybe a language is
better suited for that category at the
bottom at the back hi
cool well seems to be interesting but I
can see like most of the newer
frameworks that come from Facebook for
example are solving the same problems if
you have you three docs for example you
get the time-travelling debugger or
state rollback oh yeah I mean it is this
is not something unique yeah I mean the
the concepts that you have in redux and
and react come from Elm I mean the
concepts there were inspired from from
Elm but I mean it's not something unique
but but have but writing in a JavaScript
still means that you can do things wrong
all right well and then if you do if you
do state transformations in react right
when you set something on a component
rather than doing it through reducers
then you don't have you don't have any
insurances well now you have a
Facebook's flow if you probably have
checked it out
yes allows you to
basically use your existing a6
compatible code and annotate them with
types yeah so it does type inference
which means you're not going to get or
have a less probability of running into
runtime exceptions there yeah but you
still have no no stuff how would you see
the future of elm well I think you know
the future of elm I I'm not trying to
convince you guys to use element all I'm
trying to convince you to make you know
good decisions when starting new
projects and if if you know using
typescript is the right thing then go
for that if you know I think that the
landscape in the coming years will
change a lot due to the work of Ben for
instance that we're going to have a lot
of a whole slew of different languages
running on the web platform so we
shouldn't dig too deep in with
JavaScript I mean javascript is not
going to go away some say that's a bad
thing some say it's a good thing right
but but it's not going to go away but
still I think that you should consider
looking at other alternatives as well
right that's all thing is that is the
state management is it built-in with the
language if so how or is it a separate
library or is there a framework around
that you'd have to probably implement to
a particular interface or so is the
state management a part of the language
well yes and no I mean the language and
the way that the language is used is it
kind of works together to form that
there's not a there's there's no like
special package or a framework or
anything that you need to add it's like
using elm is really barebone usually
there's there's not a lot of stuff that
needs to be added hmm we have a final
question over here how about the Dom
updates because I guess if you said it
was inspired by no react tree was
inspired by L so do you have like it
since you have Swedish right sorry yeah
okay but if you have so many I guess
dumb updates because the data changes
and then you want to have everything
super performant how do you perform Dom
manipulations based on
so how do you pro that's a tough
question so how do you perform Dom
manipulations based on state well just
like react elm produces a shadow Dom
that it compares to the previous one
right so it's the same kind of concept
there they can make a lot of shortcuts
because and that's why Elm is so so so
fast it's like a factor five compared to
react or at least last time I checked
you know that was a week ago so a lot of
stuff cannot happen since then in
JavaScript right you know but but but
what they can do since since it's
another language right they can make a
lot of assumptions that you cannot do
and react about things having changed
because you can control it a lot more
tightly so they skip many things that
react even though it would want to just
cannot because it is running in
JavaScript and that's kind of my point
right that there just because of the
language no matter how many features and
so on that you add in you can never get
out of this hmm okay thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>