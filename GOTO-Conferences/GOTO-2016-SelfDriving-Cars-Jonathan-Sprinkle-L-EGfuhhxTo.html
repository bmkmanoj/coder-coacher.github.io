<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2016 • Self-Driving Cars • Jonathan Sprinkle | Coder Coacher - Coaching Coders</title><meta content="GOTO 2016 • Self-Driving Cars • Jonathan Sprinkle - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2016 • Self-Driving Cars • Jonathan Sprinkle</b></h2><h5 class="post__date">2016-08-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/L-EGfuhhxTo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm excited to be here I'm really happy
that i received an introduction and very
proud to be able to talk to you today
about this exciting research area so
having said that I do still crave your
feedback I say this sort of somewhat
tentatively since I've never been to
space and I don't have any books that
have sold 500,000 copies but still I
really look forward to talking with you
about this today because of several
things that will go through throughout
the talk so as we heard before from the
very beginning in the darpa grand
challenge we've seen some amazing things
that have happened in the past in terms
of self-driving cars so here we have
Stanley the car from Stanford which is
coming across the finish line and the
second Grand Challenge in the second
Grand Challenge we only had a small
subset of teams who participated and so
I think we had teams sort of from all
over the US but not that many of them
and it and so what motivated DARPA to
continue in this work was that cars that
will drive us around in the desert only
really satisfy a very small number of
people I don't know how often you've run
around in the desert in your car
probably not that much and so then they
held the DARPA urban challenge and here
you have dr. Tony tether waving the
Finnish flag as another car crosses over
so we saw more involvement from teams
throughout the DARPA urban challenge
because the problem became much more
democratized so in the beginning and the
first Grand Challenge a lot of the
technology and involvement had to do
with figuring out sensors and what to do
with sensors and then almost anybody
could put that software together because
there was so little data coming in and
because so many of the algorithms were
so close to control systems but in the
urban challenge you actually had a lot
more of a challenge in terms of logic so
we moved from things where we were just
processing sensor data and making
decisions to thinking about the mode
that the vehicle might be n or whether
or not we can trust those data and so we
needed a broader set of people to be
involved which meant that it needed to
be easier for people to get in and as
we've seen the trend in the latest few
years so I have a slide that I gave from
a talk in 2014 about states in the
united states that have permits for
self-driving cars even in the last two
years we've seen a dramatic growth and
terms of the states that now support
this in some way and it's getting even
more interesting because a bunch of
states have also tried to have
self-driving cars and it hasn't made it
all the way through the legislature or
perhaps it's on its way through the
legislature so I'm sort of themed with
traffic signals here green means go red
means we tried it and we had to stop and
orange is like well maybe right like
you're sort of not sure whether you
should stop or should slam on the
accelerator pedal and some of these
states are going in different directions
for that same color and so as we've seen
in the last few years we have more and
more interesting things happen I want to
pay special attention to this highlight
from google our cars will run over fewer
pedestrians so we've got that going for
us right is so so we're going to talk
about some of these issues today like
what does it mean to have a safe
self-driving car I will just kill fewer
people right it's not really a great
argument to have but if you have great
lawyers maybe it's a great enough
argument that you could could go with
and so we've seen a lot of this work has
now grown out of companies that have a
vested invested interest in figuring out
some of the details of self-driving cars
for various reasons so one of the
reasons companies are interested in
doing self-driving vehicles is that they
think that they're going to be able to
find out more about you as a driver by
sampling the data of the kinds of
decisions that you make and so many of
the things that we see in cars today
have to do with getting data from the
user and then seeing how the user reacts
in various situations but companies like
Google are interested in image
processing video processing etc those
are all relevant to self-driving cars
but not all people who are working in
this area are doing it because they just
want to make money some of them are
actually doing it because they want to
save humanity and so here's a great
example from Volvo where their ambition
is to ensure no but no one killed or
seriously injured by 2020 so now we're
not talking about just finding out more
about drivers we're talking about
actually doing something to improve
humanity and to me as an engineer this
is the number one calling that I have
it's it's a bit like being in a
religious
calling accept my calling is to improve
humanity through the things that I work
on and so that's my number one goal for
anything that I work on it in
self-driving cars it's especially true
that I want to make sure that I don't do
something bad with the car so other
automakers are also in the business here
so we see Mercedes with their
intelligent Drive this is actually a
pretty old slide I think many of the
technologies that you find in today's
model year for Mercedes are actually
using slightly different sensors but the
idea is the same they want to know the
region in which the car is so that they
can reason about the kinds of things
that they could and couldn't do and so
in other automakers here's an example
from this on here they were showing some
self-driving inside of a parking lot
where you might bring your vehicle and
you want to go to the cinema or
something like this you just pull up to
the front of the parking lot you get out
and the car goes in parks itself so it
is worth saying to that many of the
technologies that are required to make
this work are pretty expensive in terms
of sensors or you might need to have a
very controlled environment so the
environment for Nissan is that they have
a parking garage that has cameras all
over it and they can use those cameras
and other sort of real-time embedded
systems to figure out where all the cars
are so they know everything about the
environment and this is a trend that
we've seen also in self-driving cars
that environmental perception is
actually pretty expensive and tricky to
do so anybody here ever heard of Pareto
optimal solutions before it's not a
necessarily very common term but I'm
glad to see many of you have you've
probably no doubt though heard of the
8020 rule that eighty percent of the
results come at twenty percent of the
effort and this comes from Pareto
optimality where you have to choose what
you call the sweet spot so how much
effort am I willing to put in based on
the amount of reward I expect from that
effort and this guy vilfredo pareto was
not thinking about it in terms of
self-driving cars or matt i think his
motivation was actually arable land and
how much crops you could get from land
or something like this but the idea is
still very similar so in the beginning
we wanted to drive across the desert and
we could do that but we needed a lot of
sensors and then we wanted to drive on
city streets and we could do that but we
still needed a lot of sensors but
where's the sweet spot
where are we going to actually be
helping humanity so for example here's a
chart of drives in 25 miles per hour or
slower this is fatalities every year and
you see a big jump here in 2009 anybody
want to guess why that might be
smartphones yeah that's it that's a good
guess I I don't want to claim that
that's actually what it is because I
attended the data science talks
yesterday and I know better than to make
a claim like that based on one chart but
it is true that people are driving more
distracted now because they want to pay
attention to their smartphone but for me
like if you think about 25 mile per hour
zones or less many of these zones are
school zones so I want to make sure that
we can have technologies that's on board
so that we can make better decisions
even at low speeds so reviewing back now
what site what kind of technologies we
need in order to make great decisions
for autonomous vehicles we have a slide
here from one of the teams in the the
darpa grand challenge from ohio so we
see some rangefinders on the side I
think I have a little thing here so we
have some radar bits here we have an
inertial measurement unit which is under
here this is a rate gyro usually that
tells you about attitude changes in
acceleration we have some range finders
on the side a laser rangefinder in the
trunk we have GPS on the top a secondary
GPS because the GPS error that you can
expect it any time might be around 1
meter and so you want to have two of
them more than one half wavelength apart
so that you can do better than that and
then we also have some digital
information here so this is a fairly old
kind of setup for autonomy but you can
see there's a lot of sensors on there
and Google actually is making great
strides here but they still have a huge
cost for their vehicle about 250 k just
for the equipment anybody interested in
buying a car at 250 k right now if so
I'd like for you to also donate to my
university because i think you have
money that you're just willing to set on
fire right so bring now to the bear so
we've seen you know the examples from
google and many of you know that Tesla
also is interested in the autonomy more
good the model 3 which is their newest
vehicle is it selling for about 250
thousand dollars no so there's a pretty
big discrepancy here right why is it
that Tesla can do something for 35 k and
that includes the vehicle costs but many
of the other systems that are out there
and running around right now have such a
high cost for sensors and so it all
boils down to how we perceive our
environment this is an example that I
got straight from Tesla's website that
talks about how they want to figure out
what's around them so that they can
reason about a path that they can take
where other vehicles might be on that
path obviously they're going to need to
do this at something of a high rate
because you'd like to be able to make
sure that while you're driving in
traffic if someone makes a decision that
you disagree with that you'd like to
slow down fast enough to avoid knocking
into them and so you have to have
systems that are pretty accurate and run
it a fairly fast rate in order to make
things work so something of a bit of an
overview now of the entire domain as
we've seen it in the past few years we
can see that on the Left we have like
lots of technology that sort of bolted
to the outside and as we continue to
move to the right we see more and more
of those sensors finding their way into
the body of the vehicle so the vehicle
looks less like a robot that you see and
in some time in some persons lab and
much more like a car that you just
actually drive so on the left if we
think about things that were happening
say 10 12 years ago the characteristics
were that the software was fairly
monolithic and that we were using sensor
fusion which is a whole bunch of sensors
that are out there to build a map of the
world and then we reason in that map
about what we should do and where we
should go and as we've moved from left
to right now we see that now we're
starting to in the mid late 90s we're
start to now thinking about composable
software instead of monolithic software
so by the way I know that in the darpa
grand challenge to dgc too there was a
guy named Mike Monta Marlowe that worked
at Stanford I know this from news
reports I don't know this because I know
him but he was the guy that everything
had to go through and so if you wanted
code to run on the car you basically
just emailed it to Mike
and he integrated it into one giant
executable does this sound great to you
guys or what all right I hope he doesn't
lose his laptop right like that might be
the only running version that he has so
so and I'm sort of teasing a little bit
because we would never dream of doing
something like that now but in the early
2000s we still had one executable on our
desktop that we ran that generated
something for us or that gave us some
kind of service and life has changed
since then we're now moving the software
that's composed from lots of different
services that are being provided maybe
not even running all on the same machine
they might be running on many different
machines and at different time rates but
we still had sensor fusion which was a
bunch of sensors that fused together
into one concept of the map that exists
of our environment and then we reason
about that map in some way and so
finally now we're seeing advancements
that are taking us from that $250,000
pricesmart for sensors to something much
more reasonable through composable
perception so now we've had composable
software enter through various
service-oriented architectures
composable perception means that we're
interested in finding out something from
sensors that talk to one another at a
much lower price point so in terms of
the the scale of how all these things
are happening we can actually look back
a little bit at some of the precedents
that we're set for avionics so there's a
many parallels from autopilot software
for Boeing and Airbus to self-driving
cars and if you look at the trend in
software for avionics this is actually
the kind of trend that you want to see
for your company in terms of sales right
this is not the trend that you want to
see in terms of lines of code that you
have to maintain for a system and in
fact the cost is also exponential so not
just the lines of code that it takes to
produce but the cost that it takes to
maintain that to serve that in order to
debug that and I think the the most
recent figure that I heard in terms of
certification or software for a new
airliner is about fifty percent of the
cost of the airliner is the airframe
development and fifty percent of the
cost is software that's a huge
percentage required when you're talking
about billions of euros or billions of
dollars in order to develop a new
commercial airframe
so how did we as service people for
software get past this exponential
increase in single executables we went
to composition instead so we want to
think about some system that that we
have has a bunch of different processes
that talk to one another now here I
don't mean a thread process I mean a
process in terms of some functional
behavior that has inputs and outputs and
so if you can think of a process that
has inputs and outputs you can now name
those inputs and outputs and even
strongly type them and then you can
begin to compose through a concept that
we call module interconnection the
various types and then you now have
something of a type-safe system so you
understand that the output of this
process feeds is an input to another
process and with graphs like these you
can actually statically schedule your
system to make sure that it runs
correctly in real time you can even
reason about containing a bunch of
processes into one parent process and
then abstract that in some way that you
now have another component that you can
think of as a composition of a bunch of
other components so this is how we've
managed complexity and software for a
long time that we have processes call
other processes or functions call other
functions and then we want to be able to
do stress testing of the individual
components as well as the composed
system so functional behaviors in this
way are actually pretty easy to test you
have a bunch of canned inputs and you
compare them to the expected outputs of
those canned inputs so you can begin by
having say a reference implementation in
one kind of language and then move to
another language and compare the inputs
from one to the outputs of the other to
make sure that you've implemented your
code correctly so while we have
functional behaviors fairly easy to test
the non-functional behaviors don't
compose very well at all so these are
issues like timing or how much memory we
use these kinds of things actually turn
out to be pretty important when it comes
to making sure that you make a decision
in time or that you have a car that
you're going to be proud of so do you
guys remember this when the woz spoke up
about his prius so I don't actually
remember what the outcome of this was I
don't know that he actually was able to
take it the Toyota and demonstrate his
use cases but he thought about his car
like a software process he had a
well-defined set of sequence of
interactions and from those sequence of
interactions he could generate he claims
in the article an output which doesn't
actually match with what should happen
so he had essentially a sequence model
that gave him an exception condition for
his car this is how we think about our
software systems but it's non-trivial to
do that for hardware systems where you
have lots of different things
interacting at different time scales so
I actually always wondered why if you
were in a car and the accelerator went
out of control why you didn't just shift
your car into neutral right maybe that's
because I used to drive a stick shift
right I don't have one anymore but in a
stick shift you know you can pretty
easily change what your car's doing at
any time with an automatic shift it
actually works too but this is not
always a good way to escape something
bad that might be happening and so this
is an example of a video from a guy
who's driving along in his Tesla and as
Tesla actually steers into oncoming
traffic I do not recommend doing this by
the way so so in terms of now the
interaction that you have with your
vehicle how comfortable are you and
going out to buy an autonomous car right
now anybody anybody and so so as I
pointed out before if your accelerators
out of control you have a lot of time to
react you can just shift your your
shifter into neutral and then your
engine will explode but your car won't
crash and so I'd rather have my engine
explode than to do a head-on collision
with someone any day but the time that
you have to react in this situation is
not long and so you thankfully you know
the driver and has his hands pretty
close to the wheel so he senses himself
going over and then he shifts to the
right but we also have examples this is
from the same story in The Daily Mail
about somebody who's driving along I
think this is just outside of Seattle
and his hands aren't on the wheel and he
senses his car sort of like shifting
over to the right and so he just grabs
the wheel and starts to turn to the left
so you have to be really vigilant if
you're using a system like this but the
cost of failure is actually pretty big
like the this this would not be good if
it were to end up
like this so this is where we start to
think about like how would I test the
system like this or alternatively how
would I design a system like this so
that it can be used in a fairly good way
so I really did appreciate yesterday the
the talks in the data session because
many of the folks there who were talking
about algorithms for machine learning or
techniques for machine learning had an
architecture which is sort of described
in this way so I want to point out that
things over here on the left these are
related to training data that we have
and outputs that we expect from those
training data so the canonical example
that's used for this is pictures of cats
right because cat videos are really what
makes the internet run it's not really
used for anything else and so we have a
bunch of pictures that have cats in them
we feed them into our learning algorithm
and some of those pictures are cats and
some are not and then from that learning
algorithm we generate a runtime
algorithm which might be a bunch of
matrices and weights and matrices etc
but then at runtime we take in those
data feed them to our run time algorithm
and we expect similar kinds of labels to
come out so how does this fit for
autonomous vehicle design this is
actually where some of the composable
perception ideas start to feed in so
many of the ways that we can think about
reducing the cost of the sensors of
autonomous cars have to do with using
much cheaper sensors that give us the
same or similar kinds of behaviors so
here we can see that we have an
autonomous controller which is getting
information from the environment somehow
and it's feeding its output into a
learning algorithm and comparing that
output to user input so this is actually
a really unique way to think about how
do you design an autonomous controller
with a human in the loop so you put your
autonomous controller on board the
vehicle and it listens all day long to
how you drive so in various situations
whether you slow down or speed up how
how close you find yourself following
another vehicle as well as what other
vehicles even are with the onboard data
and sensor data acquisition and sensor
technologies that we have and so then
you feed all of that into your learning
algorithm to generate new versions of
the autonomous controller again in this
case we're not using the autonomous
controller for anything weird
learning information about how the
system could behave based on how you
drive and then when you want to actually
have the autonomous controller work you
then compare user input when the user
feels really uncomfortable about what's
happening right so you saw the driver
like grab onto the steering wheel and
steer out of the way so here now we're
actually saying hold on I just found an
exception condition I want to take that
exception condition and generate now
some new user inputs and sorry some new
algorithm work so that I can see why is
it that I responded in the wrong way so
our system has to be robust at runtime
in order for us to do this if the system
is not robust at runtime then you might
be embarrassed about what's going to
happen
the joke's on you actually I stole that
joke from a guy named John Doyle at
Caltech a few years ago totally true
right we've come to expect that the
systems that we use for presentations
are actually not that robust so some of
you were groaning like oh god what a
terrible joke right but what's the good
of a counterexample in your test case if
the person can't walk away from the
crash right we don't want to just say oh
if we find exception conditions we'll
just fix them later and then you see
carnage on the roadway so this is not an
acceptable way to test systems in this
way so we need new kinds of
architectures like this one so this is
an architecture that probably nobody is
using but this is a kind of architecture
that might work and I have to say you
know in terms of full disclosure I don't
have any non-disclosure agreements with
any companies all I know is what I get
from news reports etc but I've also
thought a lot about how I might do this
in terms of my own research so now if
you wanted for example replace a 30
thousand dollar sensor on the top of
your car with a camera then you can take
the proven autonomous controller with
the really great sensor information and
compare your new replacement autonomous
controller with a much cheaper situation
and then analyzed to see how it is that
you behave so you can compare the
outputs of one controller with another
and generate new exception criteria
while you still have the existing
architecture doing safe things for you
so this will even also work if you have
a user instead of an autonomous
controller making those kinds of choices
so now you can find out about those
exception criteria without actually
having an exception and you can check
what we call the functional and
non-functional viability of some new
process in a nice way but you still have
to worry about other kinds of things for
self-driving cars this is actually just
from a few weeks ago where he had
somebody in his Tesla who rear-ended
another vehicle at high speed and if you
dig a little bit into this the the
driver is like oh I totally thought the
car was going to stop I was sitting
there sitting there waiting and waiting
waiting and then when it got too late I
slammed on the brakes so Tesla went back
and they looked at the data from the
person's car and said actually you hit
the brakes a long time before this and
you disabled the autopilot
so this is the standard way that cruise
control works if you just tap your
brakes the cruise control goes off and
so he was a little nervous before and
maybe didn't realize that he'd tap the
brakes he still thought the vehicle was
going to take over and then it never did
until it was too late and so this is
what's typically called in avionics as
mode confusion so the pilot and an
aircraft if they have mode confusion can
end up pulling up on the stick instead
of pushing down which is what happened
in the air france crash from a few years
ago so you really need to understand the
state of the vehicle and the state of
the software and the vehicle if you want
to make safe decisions so so now we need
to be able to think about where all of
these problems are taking us and how can
software help so we have lots of
different kinds of problems we have
unclassified runtime data from lots of
different kinds of sensors we have
models that are opaque they don't
actually appear in equation form
anywhere they're just components that
run we have sensors that are maybe going
to go out while we're driving so we want
to be able to respond to that we have
issues of liability where we need to be
able to take care of things we have the
cost of sensors going down and then we
also have the need to certify our
software in some way because drivers are
not going to be happy to buy a car if
they think at any moment that the car
might crash and it's probably still
going to be their fault so there are
lots of big questions here that we need
to be able to address so in terms of
this is our vehicle here at a fundraiser
event that we had a couple of years ago
at the University of Arizona so we have
one two three four five six seven eight
nine ten eleven people here for our
autonomous car it's this is a joke sort
of left over from the DARPA Grand
Challenge days when we said yeah we only
had a team of 20 people for the the car
with no driver right but we need to do
better than this we need to have issues
that scale better in terms of workers
and how many people you need to have
working on the project as well as the
amount of confidence that you have in
your system so this general area the
area that I work in called cyber
physical systems isn't easy because of
this reason so we're interested in
things where we have intersection of
control systems communication systems
and computation systems so many of you
have had classes that
interact in two of these areas but the
classes that interact in all three of
these areas are few and far between
because the prerequisite is to be an
expert in all of those other areas and
it's not easy to find someone who has
those kinds of qualifications especially
not for example at the undergraduate
level and so so the reason why it's hard
is that you have essentially if you're
doing something like real-time control
then you're assuming that there's no
problem in communication so you sort of
hold fixed this one bit and say well
we're always going to have reliable
communication and then you solve a bunch
of other problems so when communication
becomes unreliable now suddenly it's
really hard to do some of those things
with the assumptions that you'd made so
we have lots of examples where we've
worked on this a stock data from the
housing area I thought that I turned
that off before it's not that I don't
want to hear the sound it's just that I
have four videos with sound and so
hearing all four of those sounds at once
doesn't make a lot of sense so this is a
competition of a bunch of undergraduates
working that involved them using a
simulator to do a lot of their design
but they're they're actually picking up
mosquito traps this is sponsored by
Microsoft the the project has to do with
being able to detect the flow of blood
borne illnesses but it was a bunch of
undergraduate students they were able to
leverage a simulator and then design a
really complex cyber physical component
to pick up this trap so that they could
automatically pick it up and deploy it
without depleting their batteries or
without having to send somebody out into
the jungle to do something that that
would put that person in danger of being
bitten by a mosquito so then we also
have examples from avionics over here
where we're using boundary level
certification to make sure that that the
vehicle is moving along in a way where
it's going to avoid collision at all
times we have something here where we're
actually sending floating sensors
downstream using the same kind of
algorithms that you use to detect
traffic in the traffic flow we want to
detect things in water as water flows
and then over here on the Left we have
an example where we're actually
correlating the cost that it takes to
cool or heat your home with the amount
of temperature change that you think
that you need so it'll actually help you
figure out the set points that you
should use based on how much money
you're willing to spend so all of these
things are things where you have to
think about the communication aspects
the computation aspects and the control
aspects and the systems have to be able
to interact on multiple levels of timing
and closing the loop and so this is this
is a slide that I really like because
you see lots of big things so like over
on the left you see issues of you know
being able to change my lifestyle how
would I want to do that what what kind
of choices should I be making that I
won't see the results from and say more
than 30 days so you know deciding how to
eat better or how to do exercise can be
hard to stick with unless you know that
it's going to eventually pay off and
then over here on the right you see
things where this is actually so fast
that for many of us it's instantaneous
so we see things on the left where the
time constant is so big that you need to
have public comment or regulation in
order to make sure that as a society we
make good choices for things on the left
for things on the right these are
actually only possible through
automation we can't imagine always
having a human in the loop there and for
the things here in the middle well these
are things that we've typically been
doing on our own or that we think we've
been doing on our own and so autonomy is
moving from this region here where the
time scales are really fast further to
the left and we need to feel like we're
in control of those kinds of things but
more importantly we need to be able to
specify those kinds of things in
software in a nice way so the two
paradigms that are commonly used in
order to do this are discrete mode
control or discrete systems descriptions
that you might see in state models state
flow state charts however you want to
think of it so these are typically
reactive systems where you receive an
event or you register for an event and
receive it and then you react and then
we have on the bottom what we call
functional models or time trigger models
where we're operating always on the most
recent input that we received no matter
when we receive that input and so these
time trigger models are really good for
describing things like control systems
if we're describing things like state
changes we need models like at the top
and so the issue is that these models
don't always compose in a nice way we
need a bunch of theory to help us figure
this out so going back to this example
of how much time do you
have to react to your self driving car
when it starts to behave in a bad way
you'd really like to know the
controllers that I have will be able to
make that reaction time correctly so
when I give you a little teaser of some
of the research that we do in this area
by showing you some examples of how you
can think about this in a new way so if
you think about as you're autonomous car
is moving you're collecting data you're
making a control decision then you
collect more data at a new time and you
make another control decision and you
hope that your control decision
completes before you actually get your
next state update because if it doesn't
then you've missed a deadline and
missing a deadline and a hard real-time
system can mean system failure you you
really don't want to do this and the
reason why is that you might be wanting
to avoid some kind of an obstacle and if
that obstacle is moving then you want to
be able to react to the motion of that
obstacle in real time so as you're
moving around this obstacle you might
actually have a small margin for error
in order to get around it and this is
true for those of you who are drivers if
you wanted to avoid a bicyclist for
example that's on the path and there's
an oncoming vehicle you need to be
pretty sure of how your system is going
to react as you swerve around and so
things like this are actually not easy
to do because the models that we use to
predict behavior don't always match the
physical system so if you pick a pretty
accurate model in order to make sure
that you avoid this obstacle it'll take
so long for you to make a decision that
you'll actually collide with the
obstacle here so you can't always use
the most accurate model that you have so
you can say Oh easy I'll just use a
simpler model so that I can always get a
really fast reaction and if you do that
what may happen is that the vehicle will
actually collide with the obstacle
because your model is wrong and so
there's no solution right well we need
theory in order to help us understand
what it is that we need to do so we have
these competing constraints one of them
is that we need to be able to avoid
obstacles we need to have really fast
decision making but we also need to have
really accurate models when we need them
to be accurate and so the research in
this has to do with exploring what's my
design space and how can i integrate
what I know about software
software response times in order to
perform this computation in time with a
model that's accurate enough and so
again in order to do this we use some of
the classic tools that are out there for
control systems the most common tool
that's out there for control systems is
Greek letters and so for those of you
who are afraid that you wouldn't see any
equations in this talk I'm happy to say
I have some but I'm not going to go over
them I just wanted to tell you that we
use math and it's magical right so this
magical math tells us how our system
should behave but it's not easy to code
it up so we need to take advantage of
other kinds of tools in order to make
sure that this works at a high level
what we're doing is deciding at runtime
with some supervisor which controller do
I need to use in order to make a
decision fast enough and that's going to
depend on how much I'm going to be
steering my steering wheel in large part
and how fast I'm going to be going so as
a teaser you can see a difference here
between two models that we're using this
one is obviously has more Greek letters
in it so it's much more complicated but
more interestingly it has six modes of
six state variables here and here we
have three state variables we have the
products of a bunch of sines and cosines
here and so this is actually what makes
this harder as a model is not that
there's just more states it's that if we
want to optimize our system then the
gradient descent algorithms that will
want to use at runtime might take much
longer to converge and the reason that
we have to have a lot of these other
variables has to do with the stiffness
of our tires and the various masses that
we have of each tire because these react
differently at different tire angles and
at different speeds and so if we want to
know our behavior at those speeds we
need to have a really good model of the
system so the the overall approach that
we have here is that we want to take the
difference in our current state and
compare that to the difference in the
predicted next state and choose the
smallest value that we have there and so
this describes essentially which mode we
need to pick so in order to figure this
out we actually have to know how wrong
our model is and we also need to know
how long it takes for our system to make
a decision with that model so now you
can see these non functional parameters
coming in like the timing of your system
and how the timing of your sis
is going to impact a decision that you
want to make so actually for most of us
in this room timing is just something
that we always want to shrink right as
long as it's getting faster we'll always
be happy but in real time control
sometimes you're actually not always
just wanting it to be faster you just
want it to be reliable you want to know
that the decision will always be done by
a certain time so that you can provide
an upper bound for you how your system
should behave so we can compare these
somewhat graphically which eases the
strain of those of you trying to read
the equations and we can see that one
mode has a lot more error than the other
mode here so when we have a high
steering angle and high speed there's a
lot of error in these models but at low
steering angle and low speed the models
are actually pretty close to one another
and so that will enable us to choose
that other model and we can even
normalize this by the execution time so
I want to just point out here that we
have an execution time that's averaging
or pretty close to about 50 Hertz here
so we have 0 point 0 2 seconds return
for our simple model and point oh five
seconds return average for the more
complicated model so it's more than
twice as slow to use the more accurate
model and now we can take this into
account and normalize how our system
should behave so if we so we normalize
this in this thing called uncontrollable
divergence which tells us depending on
which model we're going to use how far
we will travel before we get a new
return time and how bad our estimate
will be at that return time so if we use
our much accurate model such accurate
Rao so we have our much accurate model
here and we can see that we still have
some divergence but really big gaps in
between the cars and with our really
terrible model we get really fast
updates and over time the gaps in our
cars are actually smaller unless we're
at high steering angle so if we have a
high steering angle with our vehicle
then these gaps get really big and it's
really not great but fortunately the
great news is that nobody actually
drives their car at high speed with a
high steering angle this is actually a
really fun video if you want to watch it
this is a woman who gets into a car with
the date and pretends like she can't
drive a stick and so like she's totally
trolling the
in the passenger seat and then they she
pretends like she makes a wrong turn in
this parking lot and then lets it go
right and and the reactions of the
passengers are actually pretty great in
this example but you actually have to be
a pretty good driver in order to do that
or something like this will happen this
is a picture of the one of the Carnegie
Mellon teams in the darpa grand
challenge where they flip their car over
because the car thankfully right just
like we told it to it drove it this
velocity with this steering angle along
this road and the car sort of mindlessly
flipped itself over and broke this
really expensive sensor on the top so we
don't want to do that but like I said
thankfully most of us don't actually
drive like that this is some driving
data from me as I was driving around
Tucson and in the vehicle where I was
plotting over time how fast I was going
versus what my steering angle was and
you can see actually a really nice
approximation that we can do with this
exponential curve here where we can show
that I'm almost never for example going
more than 8 meters per second with a
tire angle percentage of more than
twenty percent so we can take this into
account and design a controller so that
if somebody tells my vehicle to go this
fast with this steering angle then our
controller will actually pick a point on
this line instead of just blindly
following along there and when you do
this you can actually get different
kinds of controllers depending on how
aggressive you want to drive so if you
want to drive like my grandmother you
get a different behavior than if you
want to drive like my little brother
who's much more aggressive and so we
call this the the comfort curve or the
the name in the lab is actually the line
of death because on this side you're
safe and on this side you're not and so
again that one of the reasons that we
want to do this is we're using a test
bed that could kill us at any time if we
give it the wrong information right I
don't want to sort of joke about that
too much because it's really dangerous
to drive a self-driving car like if
you're compiling something and you run a
test you're like oh that was just a sign
mistake I'll fix that right good luck
with the sign mistake with oncoming
traffic I do not recommend it so we can
now normalize these plots by the return
time and
with a really great decision tree that
tells us when we should pick what and so
in this example we can actually compare
the line of death which we've plotted
here so this is the rest in peace area
and this is the safe area and so one
nice result that we have is that we can
show that if you're on this side of the
curve you should choose the dynamical
model and if you're on this side of the
curve you should choose the kinematic
model and the dynamical model would be
used when you're on this curve so it
means that you're you're not going to be
making such an approximation that you
might end up flipping your car over
because you don't understand the vehicle
mode so it actually works pretty well
even if you have a lot of obstacles that
you want to get through and in fact so
we can see the different mode changes
happening here the vehicle is a much
darker color like a blue color when
we're going straight and whenever we
need to turn it turns to magenta because
we're actually using the other mode and
so this gives us great information about
what our errors are and how we can
expect those errors and so we can see
that we actually end up doing fairly
well with our hybrid controller this is
another great example of the kinds of
things you should expect to see and
talks by controls people you should see
Greek letters you should see plots where
things decay 20 and then you should also
in any great talk you should see great
three-dimensional plots so we can see
that actually also works for airplanes
so we can reduce the return time average
pretty significantly which means that we
can react faster at runtime and like I
said you'd love to see any plot where
you begin at a big number and then the
numbers get really small over time this
is how you know you're talking to a real
professor right and so what we can see
is that the theory actually works pretty
well but we want to be able to take it
and show how we can make this work in
the real world and in order to scale
self-driving cars to the population in
general and actually improve society and
the way that we'd like we need to have
cheaper sensors out there and cheaper
sensors may not be the only solution
that we need so we may actually have to
pick our battles for what we want to do
so I did any of you actually like to
drive me to actually have a 1976
mercedes-benz 240d
anybody ever seen a car like that pass
them on the road no no it's it's a slow
car 2.4 liter zero to 60 in 7.2 minutes
that car is amazing right but I love to
drive it unless I'm going to drive a
long way right so this is us heading
back to Tucson from Texas and it's like
oh your next turn is in 420 miles nobody
wants to do this right and then there
are other tasks that either we don't
like to do we're actually really bad at
doing this is a car that parks close to
me every day and I hope they pay for two
parking spaces and then there are other
things that we'd much rather be doing in
the car like my son Jack would much
rather sleep in the car then drive the
car at any time so so we can think about
things that we could be doing if we
didn't actually have to pay attention
and so the kinds of things that we want
to do in our car might or might not be
easier to do if with certain kinds of
sensors so when we think about things in
terms of software we think about the use
cases that we have and how we respond to
those use cases and so some of these use
cases are actually easier to implement
than others and we'd like to pick the
ones that are either going to be safest
or or will at least be the cheapest to
do so in order to do that we've been
working on a test bed at the University
of Arizona so that we can experiment
with various controllers that we have
it's a ford escape hybrid car for a
thing from 2000 a tour 2009 this is me
putting all the computers in the back of
it I don't actually move this fast
unless I've had a lot of espresso and we
actually have a bunch of safety things
in here so we have a the ability to put
it in pause mode we can push an
emergency stop at any time which locks
the brakes it doesn't actually lock the
brakes it just issues a break command
and the ABS is still triggered if you
need it we have what's called a Deadman
switch which means if we don't get any
information in a certain time that the
vehicle stops so this is the kind of
safety feature that you need in case
your controller optimization algorithm
doesn't come back and now you don't want
to just continue issuing the last
command as long as you go if you lost
communication with some piece of your
equipment so we have a couple of
hardware additions on it for safety we
have this cool spinning velodyne sensor
that gives us data that look like this
this is us just driving around in a
parking lot you can see
here we have a light pole that we can
see this is a passenger van over here
and actually the resolution of this
sensor is incredible which also means
that the data files that you say from
the sensor are really big just a couple
minutes can be like five or six
gigabytes of information and so we also
have onboard an inertial system which we
use in order to see where we've driven
and where our data is reliable and where
it's not but even with just an inertial
sensor you can do some cool things here
we're now in simulation you can do some
cool things like check to make sure that
you actually follow a path correctly and
so this is from the simulator that we
use you can see that we're actually
trying to follow some paths and we may
or may not be following it correctly I
think here I actually try to add the the
trajectory so you can see what it is but
I'm going to skip that for now so with
those interfaces to the vehicle we can
abstract how it is that we want to
control it through models and I
typically use something called
domain-specific modeling for this which
is very common approach for lots of
complex systems in order to scale how
you interact with the system so if
you've ever used SolidWorks or LabVIEW
simulink etc this is a very common
approach here and so if you have a
fairly simple idea for how you'd like to
interact with your system you can design
a modeling language using concepts from
UML where you can specify the types
there are loud associations and labels
and then you can generate at the end
result a diagram so that you can draw
this kind of system and with that
diagram you can then compose various
bits of software really fast and with
this kind of composition we can now take
on an agile approach which I tend to use
the the spiral development process which
is a kind of agile process unless you
don't think it is and then we can talk
later about whether I should still say
this is agile and so our approach is
that we do some simulation in MATLAB we
replace noisy data with data data from
MATLAB that's clear with noisy data
maybe some noisy data from the actual
car we check to make sure that we can do
the same thing in simulation then we
move it to simulink generate the code
run the generated code finally on the
actual vehicle so this allows us to go
from zero to 60 if you will in a very
short amount of time and every summer we
actually have students who come and do
things with the vehicle and
span of less than 10 weeks and so you
can see like the impact that we have
here is that each one of these students
showed up knowing absolutely nothing
about the car and ten weeks later they
were able to make the car drive and do
amazing things largely because of the
scale of the tools and so you can
actually if you go to our youtube site
you can see lots of videos that they
have as well as videos of our simulator
doing stuff I want to highlight just a
couple of them here's a team last year
that used an android cell phone to do in
car following and stop and go traffic I
had earlier made sure that the sound was
off on this video because they were so
happy that it was working they said a
lot of words that no one should hear
which I didn't notice until one day I
plugged in the sound in a presentation
it was like oh wow had no idea he could
even say that right but you know the
amazing thing about it is again you know
he's just holding his cell phone here
how great would it be to rock up to your
car plug your cell phone and a holder
and then not have to worry about traffic
until you got to work that's coming that
will happen here's another example from
two other students asthenia Velasco and
Charles Johnny they actually did an
implementation of that switched model
predictive control again in less than 10
weeks through this the scale that's
allowed by the the composition of our
modeling tools you've maybe seen people
using a laptop while they are driving
before it wasn't very safe I actually
wasn't really happy that Charlie was
doing it here but he still sent me the
video right and so some of these amazing
things you know get us a lot of
publicity and press but for me part of
the the interesting impact has to do
with you know the smile that you see on
the faces of the students as they're
doing it and the fear that you see of
the other people in the car with them
this is actually kinins mother you can
imagine like teaching your child to
drive and then later riding in a car
that your child taught to drive but if
we can do this kind of system
implementation with pictures how young
do you have to be before we're going to
trust you to draw something that you
want to have the vehicle do and so we're
actually looking and seeing how small we
can shrink this recently we did some
work with a middle school that we have
in the local area where we found a bunch
of robotic students that we're doing
tabletop robotic
and so they already knew how to control
the vehicle like this one to move
between dots based on planning and so we
developed a domain-specific language
here this is my student Matt bunting who
did a lot of this work talking with the
instructors there and so the students
actually show up they get a nice
domain-specific language in order to
plan their trajectories they synthesize
that to run on the tabletop robots and
then they synthesized it again and ran
it with the actual vehicle and so here
you can see sorry I skipped a little bit
there so we could see a little bit
faster here so we went from the idea to
the platform and then the students
actually get to see you know the vehicle
doing cool stuff they get to see all
this nice sensor data to sort of get an
idea and a picture about what's out
there what a career and technology might
mean for them and it's especially
meaningful I think for students because
we get reactions like this one this kid
was actually really happy right but but
this this this is the body the group of
students that was affected by this and
maybe one maybe two maybe ten of these
students later decide to make a career
out of technology that never would have
before because of some impact that I had
and I want you all to think about those
kinds of things that you can do as well
for how you can have a great impact on
someone especially populations that
might currently be underserved in
engineering so in order to just make it
more available even further available we
also have the ability for you to
download a copy of our testbed to
simulate and test it you can find this
link from my Twitter feed as well we
actually expose everything on our
vehicle through Ross and so you can
download a ross simulator that allows
you to do cool things like build a
simulink model and then push a button
and generate the code and then watch the
vehicle follow your simulink model so we
have lots of these examples on our
YouTube page where you can see us
working through the tutorials and
everything is open right now so we just
made a pre-release of our very first
release a couple of weeks ago and so
with these kinds of things you can see
you know just in a couple hours after
you finally download it you can watch
the vehicle do turns which is actually
not very exciting at all it'll just do
this all day but this is our open loop
like test you know one of the very first
unit tests we sort of had for the
composed system and then you can later
do things like this so you can
to see how well our safety system is
working so we actually are commanding
the vehicle to drive straight into the
house and it doesn't and so you can
actually experiment with this as a
person you know you can just click on
the vehicle and try to move it around
and see whether you can because in a
simulator like you're sort of like God
you can just pick things up and smite
them and so in this case I'm just moving
it further back on its trajectory and it
still tries to plow straight into the
house because it's being told to move
through the house and so at some point
you might actually get tired of doing
this I don't get tired of it but we keep
moving and keep moving and it's trying
and it's trying and then it gives up
again right and so then finally the
obvious thing that you have to do let me
change it here you know the obvious
thing that you would do if the house was
in your way is not steer around the
house but just move the house out of the
way and then the vehicle takes off right
so we have on board in our composed
system a way to intercept commands that
we know are unsafe and say no thank you
i will not be doing that so what's next
where are things going and what kinds of
things can you do so we're interested in
regression testing I think you did you
want a picture of that sorry some of
these I mean I tried to make the font
really big so I wouldn't forget that
this is like the end of the presentation
so so we need to have real data that
we're getting from real vehicles this is
the metric for success for real systems
that we can no longer test on our own
archived versions we need to be testing
on real things and this is something
that many of you who are in production
systems know that you need to have a
test version but there are some things
you can only test on the live thing and
you don't want to mess it up and so the
difference in our architecture for
replacing a module is actually for for
some enterprise system is actually not
that different from how we can architect
it it's just that the requirements might
involve lots of safety conditions and so
in order to make this scale and make
more people to have an impact you'd like
to be able to have great impact for data
curation so that you can make your data
sets available to other people that they
can run their algorithms on it and see
whether they agree with you about the
system being safe but then finally
one thing that I really want you to
think about is how to inspire the next
generation and give opportunities to
people who may not have those
opportunities whether it be through
talking to to the schools or you know
visiting schools and doing things maybe
it's taking on board a mentor over the
summer who has nothing to do or you
think they have nothing to do these
kinds of things really will inspire the
next generation they inspired me when I
was a young child to end up in the
career that I'm n so we have lots of
things you can read I did not do all the
work most of it came from all of these
folks who have done amazing things three
years of cat vehicle we actually just
started the fourth year last week and of
course none of this would be possible
without the support that I have from
various funding agencies and generous
donors in the United States so thank you
very much again don't forget to do this
and thank you all I look forward to
talking with you more
thank you we got a lot of questions
unfortunately I can only choose three so
my apologies but I think Jonathan it
Hank is hanging around here all day so
you can ask all the questions and I
would highly recommend to listen to a
podcast he made where he answered two
hours questions around self-driving car
so I think it's called Omega tall
podcast just google it and then you get
all the answers I cannot ask now okay
one question was what are your thoughts
about security against hostile takeover
of the car system it's not my research
area but this area is definitely
important because we want to be able to
scale to more vehicles and the most
reliable way to do that is to have the
vehicle tell you where it is and what
it's doing but we can't trust that
vehicles will always tell us the truth
we need to verify that and then we also
need to have some idea that the systems
on board the vehicle haven't been
compromised in some way and they're
there no easy or fast solutions here
because that the adversary might be
thinking more steps ahead of you than
you are and so really the only way to do
this I think is the same way that we we
handle security for servers which is
lots of patches and the ability to check
some things to make sure that it's the
version that you know that it is you
mentioned the high cost of self-driving
cars even if the cost doesn't go down
for all the sensors and stuff is it
still economically feasible if companies
like uber buy a very expensive or buy
expensive self-driving cars and we just
use it on the fly so even if it's like
five percent more expensive it should be
cheaper then it's now yeah I think that
that's one model that will probably work
and I think that we'll see taxis that
are sort of two to three percent within
all the cars that might be in a traffic
flow might be taxis that have these
kinds of capabilities
we're sort of already doing that with
aircraft that the aircraft is too
expensive for any one of us to use but
we share it with one another and I think
that that's that all that also may work
for people to be trained inside how to
react to different things so last
question oops I have to find it ah who
decides if the car should protect the
passengers or bystanders when an
imminent crashes detected what if the
car can detect h or other factors of of
the soon to be implicated as I I think I
yeah do you crash in rather into an old
person or into three I I encourage the
the questioner to attend the philosophy
track later today so so in this case the
the question is a viable one and I think
there's a patent already out there from
google to explain why they will always
crash into a minivan instead of to a
semi truck and there are reasons to
think about why you might do one thing
over the other but but faced with a
decision like this we're now left to the
philosophers and to the authors like
Asimov more than we're left to us so at
some point somebody will have to make a
decision for what that should be but
that's a that's a terrible kind of
choice to make for even a regular driver
so I I look forward to talking about
that in the coffee break but I have no
answers for you I'm sorry ok thank you
Jonathan thank you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>