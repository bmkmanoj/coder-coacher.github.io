<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2016 • Smoke &amp; Mirrors the Magic behind Wonderful UI in Android • Israel Ferrer Camacho | Coder Coacher - Coaching Coders</title><meta content="GOTO 2016 • Smoke &amp; Mirrors the Magic behind Wonderful UI in Android • Israel Ferrer Camacho - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2016 • Smoke &amp; Mirrors the Magic behind Wonderful UI in Android • Israel Ferrer Camacho</b></h2><h5 class="post__date">2016-10-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/912hbLVdIQE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you can you hear me okay yeah
welcome aright thank you for joining me
today first of all remember to join the
conversation in Twitter hashtag go to
CPH and remember to engage so you can
raid my actual session and ask questions
so my name is Israel Farah Camacho an
Android developer at Twitter you can
follow me on Twitter too and ask me
questions there too I work on the
moments team which is nice experience
full screen experience or it's on to the
scrolling where you can add a list of
tweets and it's an expense to a story it
doesn't have to be following a
chronological order for those who are
not 90 and English native speakers as me
smoke and mirrors is an expression used
to describe something that is eschewing
air and eschewing or embellishing the
truth is usually used for magicians
because they do magic which is simply
not real this is a trick just so you
know sorry if I spoil you guys and the
reason for this title was in the last
Google i/o during the recyclerview talk
where Adam Powell and Reed Boyer by Adam
Powell indeed we are
Adam Powell actually started the talk by
saying UI developers we have a lot of
things in common with magicians in that
is actually true if you think about some
of the animations that we do and some of
the component that we use in the
framework and that's the idea of this
talk I'm gonna be showing some examples
in the android framework or where we are
using smaller mirrors to make an an
application just great flawless and
smooth and after that I will start
talking about one of my favorite apps in
Android and how that experience is
actually built and I will do a demo with
that so let's just start start with the
android framework so this is a timeline
hopefully you know what is to you so you
know theorically anytime like I have
infinite tweets right as you can see we
asked really fast performance really do
vary way so here is the problem right
the problem is we have infinite amount
of views that we want to show but we
have a limitation we cannot just
instantiate thousands of views at the
same time actually what we have really
do is we just need to do this we are
showing one two three four beers in the
screen we don't need to actually show
any or instantiate any other view just
five at the same time seven eight tops
if the tweets are really small but Jake
likes to talk a lot so they're just big
so anyway how we do that we use this
component called recycler view the name
will give you an a hint of what is
actually doing which is recycling I want
to talk about it how internally works
because I think it's very interesting
internally has the linear layer manager
which actually recycles which actually
is responsible for mentioning and
positioning the item use and as well as
determining when to recycle those be use
that are not shown anymore
so when you try to actually show the
next position the late let the delay
your manager is gonna go to the recycler
view and invoke the method get view for
the position when that's call recycler
view will go to the doctor and will ask
for the type of that be because you can
have many types of videos in your
recycler view so for example if you want
to have different headers or you gonna
have a carousel for showing that for
example okay so yeah we get the type the
recycler view is gonna go to the
recycler pool which is where all they be
use that behold there's a we can recycle
and it will get a view holder for that
type if that is known it will go to the
adapter and then create one but if there
is one it would just send it back to the
lab to and say hey can you find this
view holder with a new data with the
view
with the data for that new position that
we want to show the one that was showing
an animation once it holds the
information it just return it back to
the second bu and then to the layer
manager will actually layouts in the
screen the item this is a really simple
explanation of how the result will be
you actually recycles views and and you
can learn a lot of more in a Google i/o
talk that I was talking about the one
that inspired this talk is called
recycler bu ins and outs and they talk a
lot of more about how to animate items
and do transitions in between States
another example on the under framework
is this one that I'm showing in the tree
lab as you can see there is a list of
images and when you click one we
transition to full screen those are
called share element transitions share
lemon transitions we have a smoky
mirrors too but first let's begin on
what on how it works the way it works is
the activity has an activity transition
state which perceives the state of that
transition and and it has like the most
important part is the shared views that
are going to be transitioning to one
screen from one screen to another and
then when activities lifecycle inbox is
involved for example goes to ondestroy
so or on pause so it's disappearing and
then we are gonna start an activity it
will call the activity transition state
to start a new transition which will
actually call to the TV transition
coordinator the activity transition
coordinator it's a base class they in
fact it actually there are actually two
there is the entering and exiting
coordinator so one handles they enter
transition and one the exit transition
and that will that has a transition
manager and it will begin the transition
so but if all the transition is a turn
is a translation but you can change that
on your theme and you can actually
customize your
transitions between activities but he
was thinking okay you're talking a lot
about how this works but what is the
actual smoke and mirrors in transition
in the shared lemons well think about it
when an activity is been going to hide
or to the background and another one
comes in the table how they are actually
being able to do that transition from
our one to another well what they do is
they hide the target activity and they
have a list of the bills that are
transitioning from what position their
transition said they pretty much in any
activity to that transition that's what
they are doing and how they do that well
they use view overlay which is used by
the default transition in in the
framework be overly provides a
transparent layer on the top of a view
to which you can add any type of visual
content be you or drawable and that
doesn't affect the layer header Keane is
on the top so that means that you can
pretty much animate anything and you it
just works and doesn't mess with the
layer hit okay it's great it's gonna be
your best friend forever in animations
okay think about it that so let's
imagine this we have as you can see that
is two layers there is the linear layout
which has a nice image view which with a
Saturn illustration and then this is the
V overlay so in order to make an
animation I'm gonna add that too early
how do I do that well linear layout any
any of you has that linear layer gate
overlay and then you add to that overlay
and what is going to happen is that
suddenly that image B is not going to be
part of the linear layer anymore it's
gonna be in this temporary B overlay
that we're going to use for animations
when you do that the wreck of that image
view is invalidated in the parent so you
that forces are a layout so you have to
be careful if you depend on that view
otherwise you will miss the whole
hierarchy but the good thing is any type
of touch or animation touch event or
animation it gets delegated to that be
overly with that image view so if you
are actually
imagine you have a reference to this
image view and you try to do an
animation it will animate even if it's
not part of the linear layout anymore
which in this case is part of the be
overly so
unfortunately sherry lemon transition
really nice but there are there are
limitations the first one is that the
user can control the transition with the
touch it's just an simple animation from
one place to another
so they use the eye of the user gets
caught and doesn't lose the context
between the screens but it doesn't allow
the user for example to pinch and zoom
and control the transition with the
pinch and zoom right so that's a
limitation and another limitation is
that one actually when I was doing the
code I've I saw that yeah the transition
doesn't track the target destination so
if you don't eat all the touch events
while the transition is running it looks
terrible and and it's just a limitation
but I mean we can simply you fix that by
using this transition listener
thankfully we can hear all the lifecycle
events of the transition so what we we
can do is on transition star we are just
gonna eat all the attachments pretty
much and then when the transition
finishes we just set the touch listener
again to the right place issue right
okay so before entering into the
interesting part of the talk which is
the demo let's talk about two important
attributes for animation and
consistently these are the attributes
that actually mess with all type of
rendering outside the parent absentee
parent so first of all is the clip
children the clip children at the hood
it's a attribute of a groupie group and
by default is set to true which makes
sense because he Clips the children to
the bounds of the Pine View group and
that's exactly what we want right right
before we want that to happen so it
looks like this right you are not
allowed that that's me actually that's
my avatar so I'm not a my my
my tree is not allowed to draw outside
the parameter unless I clip I said clip
children to Falls and in that case I'm
gonna be able to draw outside the first
parent but not the second not the
following parents so what I have to do
is spoiler alert I have to set that to
false in all the parents which is kind
of playing but that's how it works so
yeah okay really about any mission
either it just shows the point
okay so clip padding so clip binders em
so if you have the click the clip
children false but you have a padding
the bu is still gonna clip to that
padding
yes that happens especially with
recycler views happens a lot so just
remember if Sully IV of yours gets cut
in a recyclerview maybe it's because
there is appalling and you then said
that the false so this is what it looks
like mm-hmm it gets clipped to the
padding and you know pretty much what I
did at at some point a long time ago was
creating this type of utility which
allows me to go through all the parents
of the BU
and just set everything to false which
is not super difficult but anyway let's
talk about one of my favorite apps yeah
this Google photos have you think about
it do you have it do you like it I think
before I never had such a great UI
experience in a gallery
I was actually it's just top notch it's
a really well thought and and for a long
time I was thinking how did they pull
that off like it looks so good the pool
but let's the check it out how it works
actually so there is one layer two
layers and then fullscreen right I'm
really badass a foolish do so much you
can see that I'm not really accurate but
anyway so that's how it works it's like
super super smooth he has three levels
of zoom and then he goes to a full
screen and as you can see they are able
you know the user is able to control the
transition to fully screen which we were
saying that sherry lemon
transition is can do it's a limitation
okay so the way you figure out how
something works in the UI
pretty much
these developer options you make them 10
times it's lower which is - is low maybe
five five times is fine and you make the
animation ten times the duration in the
animation scale ten times is lower and
then when you do that so this is what it
looks like yeah the other is just
starting
so with that you are able to see what is
going on because well no I will you will
understand why that's really important
soon but for now another developer
option that you want enable these flames
yes I like flames so surely at
boundaries and you should enable it all
the time it's such a beautiful UI right
now it's it's wonderful for your eyes no
but really this is really useful for
developers that is the blue lines which
are the clip up the clip bounds where is
the red lines which is the optical
bounds which is something into some four
point three that I actually didn't have
everything used but maybe you need it so
check it out and the ping area which are
the margins these not only helps to see
the alignment in your whole screen but
it will help us to feel that I did
already but I want to show you if we
will do in together so you see what is
the trick of the google for this
application so now this application
looks like that it's pretty much the
same but with some layer boundaries
right yeah this is Google IO we had such
a great time anyway anyway so now just
pay attention to the video I'm not gonna
say anything just think yourself how
this is happening and then I will go
deeper on to what is really happening
okay so I'm pinch this is my yeah that
was the concert anyway so you know three
levels so I'm scrolling going back are
you seeing what is happening you see we
didn't see that before because it was
fast enough right and now yeah pin
system is more difficult once you put it
a scale 10x it's super difficult
actually you have to do a like a really
huge span in order to go to fullscreen
so what happened did you notice what
happened okay let's cut to the real part
which is okay this part is so mean
let's let's get closer you see that can
you see that the two different recycler
views there is another invisible
recycler view with the destination size
with the bigger size and not only that
but they are actually close failing
between one and another it's all smoke
and mirrors they're just three keen eyes
but you know that's magic guys that's
that's what we do if we do magic so the
lesson here is sorry it's pretty very
really good fancy okay yeah so the
lesson is anything fast enough will look
good enough and that's true for
everything when you just try twenty-four
hours to make all your animations ten
times slower and you are gonna see how
all the applications suddenly doesn't
make any sense anymore because they all
actually use that it's fast transition
fast animation that hides all the
problems in the implementation right
there is another there is one more thing
that wasn't able to get on that video
but in this video you will figure out
when you try to zoom in to the full
screen oh here we go what is going on
it's the same image right so they are
kind of faking it
they're copying the same drawable maybe
and they are using it in order to do the
transition to the full screen so that's
my trick but if you do it fast enough
and this scale is not an intact M and
ten times slower than it just works so
that again more magic these Google
photos guys are just magicians so fake
it until you make it pretty much fake it
until you make it
that's what we just do all the time in
under development and and so I show you
how it works but now you know I tried to
be sure that I wasn't doing it wrong
that I was that my assumptions wasn't
wrong so I'm actually create a demo what
I created a demo which is a
simplification of well for us but it's
pretty much it it's like
- zoom levels and then the last one is
goes to fullscreen and and so so you can
see all the smoke emitters and you can
actually see the code it's gonna be you
know github repo so you can check the
code and you can actually apply all the
strings to your applications so let's go
for the demo yes fireworks is so good
again okay fireworks so this is the
application this is some nice drawings
by my wife is illustration it's an
illustrator yeah so so I mean zoom out
okay and then full screen what's good
for scan okay so how did I implemented
that so these are the layers I have a
container medium recyclerview is motor
sector view and a full screen container
so the container is going to be the root
of the whole here key layout and of
course it's a frame layout it's an
obvious choice because we need to stack
all those layers on the top of each
other and they are going to take
fullscreen why do I need to put the
fullscreen container on that screen is
because as I said before the transition
the share element position doesn't allow
the user to control the transition to
full screen but I want to do it because
that's the nice experience so I put
everything here and you can you just do
that by creating your own navigation
manager and you know depending on the on
the stage you have a stack and depending
on that stack you can just you know
inflate the sorry instantiate the
presenters and the view delegates that
you need for each of the layers but
let's talk about the important part
which is the medium recycler view and
this motorcycle view from now on I'm
gonna call the small images the small
recycler view and then medium which is
the terrible work but I didn't know how
to say bigger than a small which medium
is fine because it's not too big so my
name is fine so medium small recycler we
will be the higher level of zoom before
going to full screen so we are using two
recyclers vu because that's the three
that allow us to do that nice swimming
effect on the gallery but before doing
that we have to talk about some
thing and I'm really bad at pronouncing
these word nobody actually understand me
so it's pivot or something like that and
otherwise you have this nice meme from
my favorite episode of Friends which was
the favorite pivot table if you even
know it you may be too young so you
should watch it because it's really fun
it's still fun incredible still fun
so yeah let's talk about paper so the
paper by default it's set in the center
of the view so what happened is when you
try to actually scale something it is
scaled from Center and it goes in all
directions so it looks that's not what
we want right what we want is to
actually scale right down so the first
thing that we have to do is set the
pivot the pave pivot to zero to the top
left point of the view which is the
recyclerview because it's the one that
we are scaling that's important for
scaling and rotating to so then it looks
like this which is actually what we want
we want that type of scale okay so we
have to recycle reuse and my approach is
to use two adapters but with the same
collection backing them up because
really they are actually using the same
data it's just the same image they just
have a different size right and then
it's important to set on the set up the
medium one to invisible because we only
want to show one first which is the
small one which is the one that is going
to be swimming in the first time and
then let's talk about touch events the
way there is different approaches but
the approach that I like it was to
create this it and touch dispatcher
which is a class that gets all the touch
events and depending on the state of the
BU we go to we delegate that touch to
one or another class so pretty much
already it was creating this class and
then add that class to both adapter
so how does it look like well it looks
it looks ladies it has more stuff but
the touch of n is dry the most important
part so you know since both the recycler
bees are using the same we can get the
idea of it or sacred we listen all the
moment we know what is the recycler you
get in the touch event for that what we
do is we have this gallery just to the
texture which I will talk about it later
it's the scale just to the texture that
we will use for scaling the recycler
views and what I do is in case there are
smaller site reviews get in touch it
means there is only one one way which is
it can only go to medium recycle you can
only assume in right so that's what it's
doing is pretty much delegate that to
the colleges to the texture which we'll
know and we'll do that swimming then in
case of the medium recyclerview
we have the same the galley just to the
texture we'll know we'll know how to do
it
it has both logics the important part
here though is that we have zoom out
which goes from the medium to the small
but we have swimming or in this actually
always kind of lazy and I just did click
but in when you click you go to the full
screen and then so how we do that well
we use the span the span is the it's
actually not the correspond is the Delta
between the last span and the current
span span is the distance in between
your fingers so with that if it's zero I
know there is no pinch and swimming is
just clicking and with that I as a
recycler ear which in this case we know
is the medium recyclerview give me these
the vu on that coordinates and then I
just perform a click so that's that's
how they zoom in zoom are between this
medium recyclerview and a small
respectively works
now I always kill them so this is what
we are missing right we were in a scale
and we were just setting the touch
events but not a scaler right for that
we have convenient contract in a
platform on a scale gesture listener and
it has on a scale on a scale begin on a
scale and the names are pretty self
document document but on a scale begins
you just set up everything for starting
the scaling on a scale is the constant
stream of this the the scale gesture and
our scale n is pretty much the user just
stop touching the screen so just reset
the position to the state that you want
so on ask in the scale begin what we
want to do is show both small and medium
recyclerview because what we want to do
as you said in as you saw in the video
is at the middle of that zoom in or zoom
out we are gonna do a fade in fade out
in between both recyclables right so
both have to be visible you can do a
different but this approach works
because the smoke and mirrors is it
comes at the end on their scale end but
on their own scale this is pretty much
all the mass of the of the talk which is
well this is it gesture torrent which
applies a low low pass filter to avoid
the flakiness because our fingers are
you know not that accurate so even if
you think you're not moving your fingers
the screen is getting some events so
there is a a constant signal that can
produce small increments and decrements
on the scale so we want to apply a
low-pass filter so we know that a
minimum span was met and it's a span on
that same direction that we were scaling
before so that's the gesture tolerance
as I was saying this code is all in the
Reaper so you can actually you that you
can actually read that method later then
we have the scale factor and the scale
factor medium which are the scale factor
as you can see on a scale give us a
detector the detector give us a scale
factor and we
that a skill factor with a clamp
function to limit the minimum and the
maximum scale of both recycler views and
of course one is the inverse of the
other and the minimum maximum they have
to match otherwise in the middle of the
transition they want they would not have
the same size and then the fading fader
will look terrible right because he will
know much so you know the numbers are
whatever I like but you can actually
modify that and make it as complex as
you want and then the Alpha is the same
we want that alpha to be in the middle
of the transition half for both of the
prosecco abuse and then at the beginning
a smaller sector value one and the other
the medium to say zero and at the end of
the other way around so that's how the
only scale works but what happen if
suddenly the user stops touching in the
middle of a transition if we don't do
anything else if we leave it as it is
it's gonna just look like to to recycler
be use and half alpha both of them or
either no it depends right very well it
will look weird we just get an ax on a
real estate so on the scale n what what
I want to do to hide this implementation
these small committers what I want to do
is just finish the transition
automatically to one of the states and
for that I just use transition boundary
which transition wonder is just I I
calculate the Delta and so I know how
much is missing for the transition so if
it's below 20 or 30 percent and you can
change it and put whatever you want I
will assume that the user didn't want to
go for the screen and he actually want
to go back to this mall right that's
what I do
otherwise if it's above that transition
boundary it means okay here when I go to
fullscreen where he was just you know
doing really quick the movie if you
don't do that what happens it's like
everything just gets a stuck in one in
one in one place and and that's that we
don't want that because that will show
the trick to the user so we that we have
the container the medium recycle view
and the small recyclerview
but then let's talk about the
full-screen image container the
fullscreen is it's a black it's a
friendly art with which a black
background and that shows in full width
they image so exactly this so to do that
there is this this requirement by the
recyclerview when you add an item to the
recyclerview
the following so you add one item and
then another item the second item is
gonna be in a higher elevation the first
one so if you try to actually scale that
first item is going to be drawing below
the second item so it will just not look
right that's each item has an elevation
in a recycler view so there are
different approach it's probably the
most difficult custom layer manager that
knows when we are clicking that it I
think when we are clicking one single
item we want that item to be on the top
of everything and be able to draw above
all the other items which I will not do
because that's too much work when you
can fake it
and cycle it I like to fake things so
yeah then you can use this one this is
this a middle ground one which is just
go back and then what you're gonna do is
when you get that call back you set the
limit elevations the rest of it of the
items so the RM that we want to scale is
gonna be on the top of all of them but
remember we talked about it five minutes
no not five to ten twenty around even
now other you know the talk we talk
about your best friend forever in
animation from now on be overlay that's
what we can use we can just use the be
overlay on the top of the recyclerview
for the transition for the pinch to zoom
to full screen and then we just had that
item that be you to the frame layout
which is the fullscreen container why
you want to make you more complicated
when you can do it easily right that's
true that's it it's like like five lines
so how does that work it's more than
five lines for a Maya
there are some methods there and some
abstraction but okay you get your lay
from the fullscreen container you're
going to clear the state of that overly
because you don't know if previously
maybe another another item that was swim
in and then you're gonna add a new item
as you can see this was in on click
that's the performed click that we were
doing before on the ETM touch dispatcher
it in touch listener dispatcher yes that
one and what we're gonna do is we
animate that item view and then animate
to full screen and what we have to do is
with an INT action which is going to be
setting the click listener so we can go
back to the to the gallery to the medium
recycler view let's take a look at that
method so that methen is actually pretty
trivial to you know as you can see of
course that is more things going on like
setting the background to black set it
the back to dress friend or send VD to
go on but pretty much the idea is you
are just using the overlay overlay to do
your transitions and then at the end of
the state when the transition is done
you add that view to the real parent
where we will actually add all the logic
to do you know if you want I did a that
image or you want to change the name of
the image of whatever equality
application does on a fully screaming
image so what we are gonna do when
somebody clicks on that item and on that
full-screen image again we just have to
transition back to the medium recycler
view so we add that item again on the
overlay and then we're just gonna
animate it we're just gonna set the
original region Y and then scale it to
one which is the default width which is
the original size for for that for that
for that image and finally don't forget
to remove the item from the relay
otherwise it will just still be there
until somebody in the fritz
something in the framework decides to
recycle play and that's it that's how
easy you can allow the user to interact
on the transition without using this
chair lemon transition just by creating
layers layers on the top of it and just
one activity and then you get this you
get zoom in zoom out click listener
fullscreen I mean not bad for a 20
minutes or 30 minutes of talk again
magic guys this is almighty that's what
we do we do eye development we do magic
that's magician is your new job role
from now on so let's let's recap let's
recap magic tricks that you can use for
animations clip adding clip children to
draw over pants and shield and in
pairings that's important one if you see
something is carrying your views it's
really one of those are not set to false
the view overlay
best friend forever for animations
really it allows you to draw over the
whole layer here he and to do any type
of things without messing with it share
Lehman transition has it doesn't allow
the user to control the transition
without events so you can actually allow
the user to that by just creating a
single activity and then clear in your
own navigation which is not it doesn't
have to be super complex we don't need
to have 300 life cycle events or
anything like that which it should be
just show height and maybe something
like anime to next or enter or exit the
screen that that's whole idea for
another talk
and then finally fast animations hide
any problem with implementation if you
do it fast enough as we saw during the
talk it's just gonna look right and nice
and smooth and good anyway so remember
that make it fast enough so the eyes are
not able to see the trick which is prima
what which is pretty much what magicians
do and with all of that thank you
here is the repo you can check the call
right now yes
you can ask me questions there too and
if you want more examples of smoke and
mirrors these great application meaning
bites your play has many more examples
so remember to rate my session thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>