<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2015 • Scaling Open Source Projects from 0 - 1000 Commits • Barak Michener | Coder Coacher - Coaching Coders</title><meta content="GOTO 2015 • Scaling Open Source Projects from 0 - 1000 Commits • Barak Michener - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2015 • Scaling Open Source Projects from 0 - 1000 Commits • Barak Michener</b></h2><h5 class="post__date">2016-02-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6qVcrPDU2uQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yeah hi I'm barrack Michener I'm from
core OS all right so core OS yeah we're
doing whole bunch of cool things Icarus
I but one of the most important things
one of things I love most about core OS
is that we do pretty much all
development open source in the open so
the title of the talk is scaling from
zero to a thousand open source commands
so I wanted to think about this in terms
of kind of stages of project as I've
seen it at core OS said as I've seen
personally and what sorts of things here
to keep in mind or because I just out of
curiosity how many people I actively
contribute to open source like run a
project commit any care do a project
okay couple of hands now I maintainers
anybody know okay cool how many element
weren't you and how many company is the
roughly do lots of their work in the
open yeah I know about okay so this will
be kind of maybe a different opinion or
maybe something that hasn't seen as much
they don't get to interact with as much
which is cool see ya coro actually have
about a hundred open source repository
on github Adam we maintain most of them
anyway some of them are library some of
them are really cool projects some
notions of them sampling or at CD rocket
final I decks which is we just announced
last week which is a cool authorization
management it does some OAuth checking
it's what provider is what it is
internal so what we're doing fleet which
is a distributed system d Mayday which
is the way you can type a day at the
command line and so I'm going to package
up a nice bunch of statistical yesterday
clicks log files everything we need
beacon and help us debug if core OS
later and why are we building all these
things well
the notion is of course to make Google's
infrastructure for everybody else sort
of our mission statement and we packages
all together into tectonic and that's
what kind of live product is now and
that's kind of an overview of course
does um one thing I wanted to else play
out is so we do this all open source
like all those projects open source one
hunt we do this every day and another
thing another project that I'm working
on the side is kaylee which is my
open-source graph database i wrote well
as a google so I've I manage a couple
projects i run i maintain things this is
kind of my life so I wanted to think
about how we go from zero two thousand
commits so zero commits right on github
you're starting with get in it land this
is your blank canvas this is a good day
right this is when you start your
project you're excited you know what it
is you want to write hopefully at least
you have an idea and with this idea
comes a lot of questions right out the
gate and managing these questions
supplier to talk is about you know what
we do how can you have a small team that
stays focused stays agile or rugged and
works toward something greater works and
works in the open so you know first
you're going to have like the skeleton
file right which is say I speak too fast
when I'm getting started it I thought so
skeleton file you may want like a
repository with just some basic defaults
for your organization or for other
projects you might do a standard choice
of licenses we use apache to it echo s
there's open photo ones I've standard
built files if you have a tooling site
you prefer we're having to read me is
the kind of a good place to start i like
starting with the readme which says
here's what i think this project is
going to be very abstract at least is
title even if naming is one of the
hardest things you can do and believe me
we've had many naming problems over the
years at first but there's a yes naming
leave me and then contributing day
something that people tend to forget
contributing is how is a file you bright
to say here's how if you want to
contribute to this project you should go
about it this is this whole bunch
liquors in this and I'll come back in a
second one of the notes i want to make
was that if you don't have a license you
should pick one right now there's only
about there was a good blog post back in
march ma my earlier this year by a
github saying that only about twenty
percent of their repositories actually
have a license and that's really
actually a problem because given laws
given the situation at the united states
international saying something is in the
public domain doesn't count necessarily
it can it's all kind of very very mix
messy legal thing so one of the best
things you can do is find yourself a
license find when you agree with I like
BSD for my own stuff but some people say
I want to share my code better so GPL go
for it I don't care which one do you
pick one because that's the best that
because then when other people want to
contribute when other people want to use
your software they know what what's your
license incentive they know what they
need to do to you know do right by you
as well so code style is another thing
that people start to rat hole on really
fast and another good sort of tip when
you're starting a project is just a pic
one avoid the bike saying you don't want
to talk about whether or not your curly
braces go on the next line you want to
just pick one and so go does a great job
here there's go format which tells you
what which automatically format your
code for you otherwise won't compile
which is good there's Pepe for Python
there's a whole bunch of other standard
guides Google's got a whole bunch for
all their projects so if you want to
just avoid using and just say oh google
does it this way here we go that's a
perfectly reasonable thing but by having
a code style and then mentioning it in
contributing got em because all your
code should look roughly the same if
you're reviewing it this is you know the
standard by which i am holding my code
and how it will look so putting this all
together means adding get her being okay
so so then you start coding right we
started committing some code 200 commit
sin no this is exact right i'm using
this by proxy is more of a story and an
exact number of oh man a 200 commits it
must look this way but in the first two
hundred some-odd commits right the
chemist messages may be very messy like
i did some work things were in progress
who knows and we don't do this in
general right but maybe the right thing
would be to about this point is when you
are thinking about releasing the project
this is that point where you've done
some work you've got some ideas encode
their functional and maybe we want to
start raising it this could be on the
order of days right this is not too far
into the project that it hasn't happened
yet I mean iterate super fast you've got
your small team you've got three people
who are saying hey what if we try
building a actually um it's a good
example just the other week there was
Matt in New York Met gypsum he was
writing crud and something we open
sourced about and he did it in two or
three days all it was was taking web
books and been deploying it on Cuba
Nettie's so if I got a new container
built I have a hook for that boom I'm
Linda then we deploy it based on a
configuration file and so it's kind of
end-to-end to continuous delivery right
so he started writing it and just got a
couple commit sin and I mean so he was
about this stage about a week ago if it
so what if it doesn't work out and I
wanted to call that there are projects
you create their ideas you come up with
you type getting it you CAD that idea
but maybe I experiment didn't work the
way you planned maybe business thing L
needs changed maybe anything changed
that's okay i want to suggest that if
you're writing code and you're creating
something that just doesn't work that's
fine we don't say that enough actually
you know so be sure you think that every
project should be good every thought we
should live but really if you've learned
something in that in the experimental
phase if you and you'll have
experimental faces throughout your
project but you should
be able to feel good about failing at it
should feel good feel good about
rebasing the entire tree down to get rid
of those nasty commit messages into one
something that you're about ready to
announce so yeah preparing to announce
your wellcare mailing list maybe if this
is a big project to your planning and
sewing or working with sporting IRC
channels and then there are two other
things about preparing for announcement
that I wanted to suggest to point out
one is that the last couple commits may
involve a lot of lipo air time to first
hello world which is you have a lot of
at first gear the first person writing
you know exactly what your fielder's
dealing but somebody else reading it may
or may not understand exactly what
you're trying to do so if you want your
project to actually be successful when
people to get interested in it a great
way to do that is to minimize the time
to first hello world they should be able
to dunya download your thing run it and
within a couple of minutes mo mo swear I
have something that happened something
meaningful happening right for my graph
it was downloaded running I have a
ruffle now I can do with my first graph
gray just straight from the readme and
hey I have some results I have some
movies that this actor started that
works that's really nice hey you can do
cool things with this so encouraging
people to get interested in your project
at all sort of minimizing the time to
first however old this was a slide from
my friend Julian I really liked it so as
to it another thing that we've started
doing a core OS that I really appreciate
is the notion of having a road map mb
file some people have roadmap
directories but usually a simple way of
markdown file will suffice which is
here's what here's what we were
listening today here's what features it
has here are the next big features and
the next point releases that we're going
to be talking about for the next month
or something next month or two maybe not
too far out it's not two years planning
it's not because things change way too
fast for two years of planning
but within the next day or two months
yeah this is part of what we're going to
be working on and pull request should be
accepted for this this is something that
yeah your team maybe Yorker OS and we've
got a TDM you've got plans that we and
milestones and okay ours but really that
shouldn't limit people from contributing
right they should want to say hey what
if we added in this feature I'm going to
do it you put your name right next to it
put it in the roadmap done md and you
should be able to be encouraged outside
contributors to want to grow your
roadmap because you can drive it you can
direct it yourself but really it's kind
of a collaborative effort that talks
about where we're going in the next
little while so all of our major
projects have a roadmap that MV file now
and that's something i really appreciate
and then you'd announce yeah put it on
hacker news call it done or not done but
color it started and the sooner you're
working in the public the better because
then you're not then you're beholden to
other eyes seeing a cult code because we
do everything and they open it per OS we
I actually feel like my code gets better
because I know that my ploy requester on
the open if they want to look at my
personal fork they can and see all my
like what can progress branches and so
on that sent up to github just so I can
work on it on different machines and but
every time I might commit matches is ah
my commitments is just get better right
I'm actually doing something meaningful
miss you know branch and I'm trying to
collapse and of course it'll collapse it
down or I'll rebase before I marriage or
something but really because i'm working
the open and because we were all our
code in the open mostly at core OS it's
a better experience to thank for doing
projects like that uh rights okay moving
forward we're at about 400 commits so
the past 200 commits now looking a
little bit more reasonable right they
are you have real commit messages you're
doing pull requests your drink code
reviews how many I hope everybody's
doing code reviews in general yeah
mostly you can please
good because you know I actually started
right I school thinking now code review
why would we want to do that but really
it's that same effect of doing
everything in the open but 10 times more
important because a somebody else is
seeing it be if you get hit by a bus
somebody else or at least looked at it
it's they're not the best thing in the
world but they always somebody will say
oh I know that piece of code they wrote
some time ago and that's better than
nothing so it's still early in the
project life cycle right things can
still change don't be afraid to kind of
do some major reef actors or experiment
break things because you're not quite it
in yeah even at point five yeah you're
still in the sort of alpha phase of
figuring out what's going on but because
you're working in the open everybody
gets to see this process so it's a
little more scary but out there you also
start getting your first external
contributors this happened to me dankaur
track from Australia awesome guy here's
my first and contributor sorry wrong
side that slide here's my first
contributor for kayleigh and i didn't
work half as well without him because
anyone for me as I community who wants
to help you is immediately your best
friend they understand because they get
it right from the outset you haven't had
to sell them on it they already knew
they kind of wanted it and hopefully
they know what they want to change so
you start by just in treating them as
best you can a tribe and merging their
code is faster you can I know I've
failed at that sometimes and another
thing i've heard actually at the
conference this added it guided the
slide in the game is that just answer a
question three times for my anybody
external or anybody was looking at the
object you should probably write down
the answer and start your study or wiki
start yeah thank you because here if
people ask me which is a label mean in a
triple i should be able to say that
right point them somewhere and say hey
that's good another optional thing you
can do is at start adding benchmarks
this is something i didn't think about
as being
as oh man benchmarks I'm not ready to
benchmark right I I'm still awful i
don't know how fast my database is going
to be badd it kaylee and turns that
doesn't have to be perfect you should be
able to write a benchmark go is really
good at this because benchmarks are part
of tests and having a measurement makes
well i think it was said earlier mother
talks if you can measure anything it's a
really good argument right you should be
measuring everything and have as much
lemon tree as you can so the better
measurement more measurements you have
the better makes decisions easier for
instance here's a current measurement
from Keighley where it's a benchmark i
ran i rewrote some of the internals i
changed from using json encoded blobs
within the store or to using protobuf
which really sped things up right so now
I could be praised about 30 times faster
in three percent faster fifteen percent
faster in some cases big win but this
downside is it does require a sort of a
database migration so what's the
trade-off but let's take a know what
sort of the way na is and these are just
queries I decided it seems about right
one of them is really simple it's like
just get me one thing give me a key
value have done how fast does that
happen and so that was you know really
useful ones been really useful to track
the progress thing of my code is to say
hey here's what it used to be now it's
faster and I was slower maybe we take a
small speed here but we get these
advantages it's a really great way of
discussing a pull request so then we
move on to moving forward 600 commits so
now we're getting you know out there
right we have a couple of early releases
now we're doing yeah 0.3 0.4 in that's a
deal and that definitely happened when
using semantic versioning I want to call
out because we do everything as much as
we can coral s doing semantic versioning
but just say major breaking releases
minor releases and point releases that
shouldn't change anything up in fix bugs
mostly
that's less true when you're less sub 1
point 0 because things are subject to
change and that time frame once you call
something one point how it should be
major releases break things but
otherwise API compatible backwards and
forwards unless you have other tooling
they might roll your database forward
automatically if you can do automatic
migrations and still but as long as
doesn't break anything for external
users or for external API clients other
programs and I'd be talking to it that's
a good idea but because you've put out
some early releases some binaries one
thing that will happen is this if you
give a mouse a binary he's going to put
it into production and and we bits
because once you give it away somebody's
going to start using it doesn't matter
always happens and so but this is
actually a really good thing this means
that people have noticed it means
they're trying at your code believe in
it they want to run it right now it
finds bugs really fast because they're
trying it in production but this is
actually when it is where it starts to
be a question of how does a small team
deal with this because something we have
users to support oh wow so I want to
shout out something that we don't should
do better but all my projects actually
is to write the fine manual yeah the
person who knows the most about it you
should write a write down what you know
you should actually start to structure
real documentation I know it usually is
messy because we usually don't want to
start writing the next great feature but
taking the time to make something usable
and the UX as well as what I mentioned
on here because maybe a command-line
flags are getting really unwieldy or
maybe you need to think about what your
clients and your API design looks like
but writing manual help you a understand
where people are coming from and B give
you a better give everyone else who's
trying to use it in production
support it trying to write clients a
better understanding of what your
guarantees and what your API is based on
and when you can actually close above
and one thing we try and strive for it
though that's is closing more bugs with
saying oh hey thank you for asking that
question which here's a pull request
with a documentation change so that in
the future when somebody asks this
question because it will happen in the
future again we can say point at it and
say hey we have an answer for that so
then okay let me take a short 800
commits all right so what are the past
200 commits look like now we're prepping
for one point oh you're stabilizing our
api's hopefully we have no major changes
in our api's you can do major reef
actors which are tricky but possible and
I wanted to call out a story here which
was at CD and the migration from 0 for 6
to 2 dot oh you know I'm a few all run
at CD at all but it's a distributed key
value store that runs through the raft
consensus protocol so that any as long
as we have a quorum of machines nodes in
the cluster you can guarantee that your
data is the same and the history is the
same and this talk is less about CD then
the open source but because it goes
through aft it you know each of these
nodes has to communicate with each other
in a very specific way and we decided
that the raft implementation we had been
using was not up to snuff it was not
sufficient for you know it would break
at times in an interesting way so we
wanted to do a complete rewrite of that
our API is wooden estate to say my you
know external clients wouldn't hopefully
not notice but internally these new
nodes would change completely and
especially in talking to each other so
this is where we had to kind of make the
bad but you know reasonable decision to
actually say okay people are using 0 for
6 in production but here's this new
version that won't talk to it it's going
to be a hard migration you have to
actually bring it down with the stuff
over and bring it up again or do to it
at same time or something like that
yeah that kind of sucks but the benefits
are that hey we have this brand new raft
that's going to make everything so much
better and stable in the future that you
go through pain once now while you're
still having pain and hopefully you
won't have pain in the future so one of
the problems with doing things in the
open like this is that you have this
situation where hey I have this alpha
version in production and now we want to
go and change that again so like yeah
that's also why we called it a breaking
change but also because we knew the
rafters stable and we've been working on
it for months we knew that we would also
want to call it a first major release
the first major version so that's kind
of story there and then moving forward
geared about a thousand commits now so
where do you go after that right you
start talking about release cadences is
something we've started on it CD which
is releasing every two weeks one week it
depends but you should always release on
a Wednesday or something like that and
and have point releases bug fixes
whatever happened to be rolling in the
past week just package it up aidonia and
increment your revision number and call
it another version really useful one
thing we've also done is started talking
about stable and master branches master
branches where every all the new stuff
is happening new raft speedups new
internal new protocols new API is yeah
things we want to have in the next major
version of our master but because people
are actually running stable in
production we have stable when may have
bug fixes that get cherry picked over
it's some people talk about get flu get
flow some people talk about their own
get things we just can't keep it simple
with two branches stable and master and
release these either one of them as part
of a release cadence right if we have
bug fixes that hit Matt hits table then
maybe we do a release of dot on
Wednesday and if we have any welfare
thing we're trying out over the side on
the next Wednesday you can sort of go
between and after I had sort of the root
Mia you built the project you're running
here people are running it now you have
to find a way to make profit but that's
that's not big gold open source and go
open source is actually to build
something awesome and to give it out to
the community so the bacon bill are some
things and it's a virtuous cycle so yeah
that's most of my taco I think I've
taken about half an hour so I'm a little
bit early but I'll take questions
because questions my favorite pipe sir
yeah what's this way good way Smith oh
sorry sorry hey good ways to get
visibility obviously posting it was
funny is that's a great question because
it's really it feels really weird to try
and give visibility because the thing
you have to do is just start announcing
everywhere you don't want to be a
spammer but you kind of want to spam you
want to say hey I'm doing this thing and
you might say that we're in it makes
sense in context don't tell them if
they're not asking but they just say hey
I'm doing that so I'm building this sir
hey I just did this new real major
release here or hey I have this new
feature oh you're talking about raft hey
will we just added mr. yeah that's ed
hey we should be doing a more stuff over
there or you're talking about graphs hey
I'll have you checked out my hand Kelly
project yet sir there's a bunch of
opportunities that show up that it might
seem slightly improper to say hey yeah
I'm doing this project but really go for
it because he also it's open source
right if you want people get interested
in it you want to grow community and
it's free anyway so the worse the big
inner sayers oh no I have a new free
project I know about so
yeah I've certainly in earlier you
talked about you got personal loss
products oh yeah what yeah what
differences do you see between obviously
wouldn't've is your own personal time
yeah it is like to defeat your people
stay with me uh yeah in that sense it's
actually been investing I've been
learning how to balance this a lot
better this past year since working at
core OS because stuff that you're told
to do is obviously less fun and stuff
you want to do but hopefully try and
make the to make one into the other and
so when it comes to more work projects
like at CD then I think the thing that I
noticed more is that I will do the like
documentation writing or API specs and
so on more for work just because whereas
I feel like I can do more fun projects
for more fun features just kind of oh I
have this idea for something i want to
write let's write it and i knew that my
side project if I have the time if I
don't but most of the time I'm doing
things like okay here's our plan here's
our roadmap which is probably the better
way to do it I'm gonna start adding a
roadmap and start adding some more of
this was mostly project management
actually to my side project as I've been
learning things to sort of work in the
open source fear from its a gate but so
met its age time management trying to
find things that you're interested in in
your day job and still having some
energy left at the end of the day if you
want to work on your side project that's
but since it's only open it's fun
because you can the two can influence
each other right you can have a great
idea and commit it to one code me like
oh I can just use back over here to you
because it's all open source so a good
example of that is that happened oh well
good example that is kind of within my
office I word Jimmy Jimmy Zielinski
who's went written one of the better
bittorrent trackers the one that's used
with
in facebook to distribute the end
applications in its data science and a
lot of kind of his it didn't go as well
and so kind of on lunch breaks and so on
will talk about how our projects are
going and some of the changes he's made
and have influenced my project and vice
versa and so working an open source is
great because it also gets under
open-source people involved your
company's I I've got a bit of a tangent
now but I will repeat the question which
is how do you pick a license such that
yeah companies can use it in companies
and people can build on it about the
same time being reasonable for your own
purposes let me start by saying I'm not
a lawyer just so I can like disclaimer
everyone knows it here we go okay never
that's where out of the way I think the
one that seems to be and in my opinion
be one people tend to choose is Apache
too just because it's got some
reasonable things around how patents
work and how anything we come up with
may or may not be patentable but
whatever we still kind of on that
because you know because reasons and the
US and other systems but it's still
basically at its core pretty close to
bsd you can use it within your project
so you can you build into a proprietary
thing you can compile against the link
against it which is all pretty good
obviously a bsd MIT that's why i do in
my spare for fun projects or small side
projects of mine just because well I
mean I went to Berkeley so BSD is
awesome and furthermore it's just enough
to say don't blame me if it yeah blows
up your data center but otherwise where
you go do whatever you want with it and
it's pretty well tested and pretty well
known and people have written walked out
and done a lot of legwork already around
BSD and MIT so that those and those are
also pretty well used within companies
as well because again it's just free I
can do whatever I want with it things
that tend to be a bit more tricky tend
to be some people will use GPL awfully
comfortable with change sent sherry
initial changes back some
gender prizes less comfortable with
doing that for whatever reason they
really shouldn't be and then there's
even crazier licensing structures that
are less familiar to me so I'm not going
to comment on them but that's I'd say if
ya short answer is people seem to pick
Apache to get this yeah or maybe there's
also the Mozilla one right which is you
can share your chain if that's per file
if you want to use that you can share
changes back I think but it doesn't have
to be all of it hey you can just keep
your own like sub library and still be
fine so there's lots of options that's
what user License dicom is all about and
yeah picking one is better than not
because otherwise you're in the whole
legal limbo of what's actually well
thank everyone it's about that time
actually</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>