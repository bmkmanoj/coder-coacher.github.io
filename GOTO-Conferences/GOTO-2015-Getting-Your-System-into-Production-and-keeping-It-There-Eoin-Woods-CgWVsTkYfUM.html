<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2015 • Getting Your System into Production and keeping It There • Eoin Woods | Coder Coacher - Coaching Coders</title><meta content="GOTO 2015 • Getting Your System into Production and keeping It There • Eoin Woods - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2015 • Getting Your System into Production and keeping It There • Eoin Woods</b></h2><h5 class="post__date">2016-03-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CgWVsTkYfUM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Owen woods I'm the CTO of a
services company called in Dava that two
and a half thousand people I was joked
with the biggest services company you'll
never have heard of this isn't about to
Dover though so this is about production
ization which is very related to being
rugged just to remind you there's a nap
you all know the story can you all right
the session in the app thank you so what
we're going to talk about and first
thing is what is production so a quick
show of hands who here works for a
start-up really small company anybody no
one who works for a company with an IT
technology department of at least 200
most people right and how many of you
work on a system that's in production
everybody great so hopefully this will
be relevant em how many of you get cold
in the middle of the night if something
goes wrong that's a much smaller show of
hands I've got to say you were all
leading charmed lives this is mainly
this presentations mainly about her not
to get cold in the middle of the night
so hopefully that might avoid it for
those of you who do so we'll just talk
about what it needs and production
system is or what its characteristics
are because they're a bit different the
environment that most of us working most
of the time and then briefly would just
think about what is it actually goes
wrong but the main thing I want to talk
about is the fact that there are four
key requirements that i have noticed
over many years every production system
needs to exhibit so i'll have a look at
those and then I found this a pretty
simple framework you can use for
thinking about how am I not going to get
these wrong from my system and that's
really the thing to take away will go
through an example for one particular
requirement one particular quality
property but you can do it for all of
them we just don't have time today how
much longer version of this talk does go
through them all and then just wrap up
with a few final thoughts so what is a
production system and any definitions
for me a production system is any system
with someone's doing real work in it
which means they care for two main
things if it's not there they can't do
their jobs and if you lose the data
it they get really upset and that for me
is production doesn't really matter how
they're classified by an organization
those that's how you know a production
system and for many developers I have
noticed and one of the reasons I give
this talk those of you who know me
you'll know I've got these two hot
buttons one is production ization and
one is security because I find
developers in general we blame them a
lot for developing insecure systems and
yet at no point do we try and
communicate the essentials of how to
create a secure system and then people
get beaten up for things that go wrong
in production and no one has ever um
actually taught developers what they
need to do to deal with production so
when you were graduates so most many
people here I guess read a technical
degree at college how many of you had a
module on writing code for production
yeah I don't either and in your graduate
training you know you came in and you
were trained in your mental you became a
craftsman during that process how many
of you had something formal about
production the constraints the
requirements who you deal with now
exactly and then people beat you up when
it went wrong in production how unfair
is that so the problem is who do you
talk to you what's important no one ever
explains this stuff you find it out by
being called at three o'clock in the
morning and you know it's worse than
that because if production was really
easy you just figure it out but
productions a bit developer hostile
generally isn't it and it's kind of for
good reasons because how do we treat the
development environments we just run
rampant over we do anything we want to
do we install you stuff we patch the
operating systems we use development
languages that aren't ready for
production and obviously we can't do
anything in production we've got to keep
production cleaned pure and completely
stable so it's kind of a difficult
environment and no one teaches us about
it and in particular there's a new cast
of characters you've got to get used to
so who do you deal with in the dev
environment that's developers and those
users and you know there's different
kinds of people involved in development
the others people who specialize in
tests there are project managers I'm
sure you've got a senior manager got a
point pointy head boss some people will
have you just won't confess but there's
people involved in development
there's people who care what you're
developing and they tend to be real
active end users who are involved and
actually want to know what you're doing
because they're going to suffer the
system and what happens when you go to
production nothing if my bill doesn't
work all these people came out of the
woodwork where did all these people come
from you put a system in production and
the world wants to know about it
obviously the IT operations group are
very keen to know about it obviously how
many people here you use a DevOps
oriented software development process oh
that's come on just bluffed put your
hands up you all feel much better about
it and so obviously with dev ops ops
will be involved right from the
beginning but they have a much i found
that ops have a much sharper focus on
the system when they're about to have to
put it into production than three months
beforehand when we're talking about
generalities so they become very
interested and then of course there's
the infrastructure folks you know when
you wanted all that storage allocated
and you couldn't get hold of them and
they seem to be ignoring your tickets
there were rather elusive they tend to
find you don't like when your
application has caused their
infrastructure a problem I mean the way
that I have observed many infrastructure
people is that infrastructure architects
believe that infrastructure would be
fine if those people didn't keep
installing applications on top of it and
keep messing it up so you've got to keep
infrastructure happy and then there's
the senior managers acquirers these are
the people paying for the system so if
you're in a really small firm these
might be external investors there's
whoever's money's being spent and in a
big firm there's probably a budget older
isn't there he's already seen your
business person who you've you've heard
of he's never heard of you but when your
system goes wrong in production suddenly
he'd like to know who what your name is
I'm not in a good way I've noticed
they're far keener to find out names in
a bad way rather than tell you what a
stand-up job you did it's just one of
those unfair things in life there's in
the business managers these are the
folks actually running the business
you're supporting their various levels
various specializations but when you
were in development did they get really
involved well they there at the
stand-ups going I really want to drive
this product for you let me explain all
of all of my constraints like hell they
were what is in production has just gone
wrong has just dropped all the
transactions for the day on the floor
they tend to get much more involved very
quickly and then finally you get whole
cast of characters i call auditors
they're the people with the checks and
balances security auditors business
auditors compliance officers all the
folks you check you're doing the right
thing who again can be very hard to get
their attention when you're in
development and you're trying to work
with them but funnily enough as soon as
you're getting towards production they
suddenly get very very interested very
quickly so a whole lot of people you
need to keep keep happy and as we said
production is very constrained it's
highly controlled it's all has to be
highly controlled because it's a very
valuable thing the contents all valuable
when when when your integration tests go
wrong what do you do to get them running
again what's the first thing everyone
tries to do Rian's well reinstall the
software in case you have a corruption
what are you in the database you just
chuckled the data why don't you whereas
in production people tend to have really
really lack of tolerance or throwing all
the data way it might make the system
work again in fact it was funny and one
of the speakers in here earlier to get
the demo working hehe truncated the
database rebuild his app and it started
working obviously can't do that in
production and finally change can be
difficult I don't mean whether or not
you've got CD pipeline or whether all
that's working smoothly it's more the
fact that you've got to think about
change in production because it has an
impact on a much bigger environment if
you're part of a large enterprise how
many of you work for enterprise with say
more than 20 major applications number
yeah well submitting for a starts came
to my hands go up yeah so I mean there's
potentially 20 touch points there
they're going to go wrong if you get
your a prom so change has to be thought
about rather more it's also pretty
unpredictable how many of you have had
an event happen in production that after
after you got it back together and you
did the incident report you thought to
yourself we would never have spotted
that coming I had one years and years
ago or I was working on a system called
a three o'clock in the morning system
was going into mad garbage collection
discovered that one particular part of
the process which had never caused a
problem in five years of operation which
did an N by M match which I accept was
not a smart
software engineering in the world never
caused a problem what happened was an
upstream system that suddenly said
260,000 of something in a single batch
when normally we got about 2,000 a month
and they send 160,000 in one go and we
tried to end by and match them which
clearly didn't end well what had
happened turns out that system had a he
had an end user programmable feature
which hadn't really been used before
where you could take a transaction
rewrite the transaction and replace the
first transaction all under end user
control with a little kind of macro
language we didn't even know this
existed you can guess what happened next
yeah an end user didn't understand that
if you created one and didn't remove the
first one first then the thing would go
into a loop what had happened was in the
macro just gone into a loop so rather
than generating one transaction for this
special case 160,000 of them completely
flattened us we would never have
predicted that we should have predicted
that we could get overloaded and we'll
talk about that a bit later but we would
never predicted that event it's also
highly visible as I mentioned earlier I
found that when I was when I was
responsible for systems called in the
middle of the night like God or I got my
name in front of some really senior
business managers I barely heard of they
all got to know my name really quickly
and I've been lucky enough to take over
a few production systems that we
described as red meaning on the red
amber green charts every morning they
had a very nasty habit of being bright
red and you really do get a lot of
attention in those cases but to say not
in a good way everyone wants to know
when you're going green it's funny when
you're green everyone forgets who you
are because you're not causing them a
problem so it's completely different and
finally you don't own production
actually irrespective of security
control this is a bit dramatic you're
not allowed near it that's not the point
we genuinely don't own production who
owns the development environment to the
first approximation what you do well
it's yours you built it you run it it's
for you it's completely yours who wants
production the business that's paying
your salary it doesn't belong to i.t i.t
operated on behalf of a business who
owned it and so we've got to keep that
in the back of our minds even if we have
divulged up and we've got completely
automated pipelines and the whole thing
looks
very smooth always bear in mind it's
somebody else's environment we are their
custodians of it we're not the owners of
it and that's a different philosophy so
what actually goes wrong in production I
bet you could all you could all produce
a list well here's my list first set our
performance surprises three things
happen mean this is the most classic
stuff I think is that everyone thinks of
production first sorry performance first
interactive load surprises things like
marketing that have put a lot of fliers
in magazines and they didn't think to
tell technology first all the magazines
have gone out and as soon as everyone
picks them off the newsstand or they
pick up their Metro in the morning they
go to your website to type in their
special code to get their bar of
chocolate if only they told you first
you could have checked that you had
enough capacity for that very hard to a
two spot and bats time surprises you
know batches that run for 40 minutes day
in day out year in year out and then one
day they run for four hours 22 minutes
and not the entire batch schedule for
the organization for 6 i'm not a big fan
of batch I've always tried to design out
of my systems but many enterprise
environments Ben who here works for a
medium sized big company who doesn't
have batch you've all got it somewhere
right because even if you can pre
process your stuff event by event if you
can't get the data you need which
arrives in batches you're going to have
back problems and the last sort of
surprises is other system abuses there
was a system not so long ago I worked on
that one of the business analyst had a
brilliant idea we had quite powerful
system and wrote the old-fashioned thick
client but very powerful thick client
end users loved it but to search in the
system you had to know what kind of
thing you were searching for so you
search for an account and it had a
clever search function and then you into
the clients cream you can do a clever
clap appliance search and he said one
day you know Google don't need to know
what you're searching for why don't we
give them a search box that just
searches anything in the system that
matches this string of text that's a
brilliant idea we said end-users loved
it wasn't very difficult to do went into
production everybody was happy and then
we were getting all these strange
interactive performance problems in the
afternoons I mean we eventually tracked
it down to one end user who clearly
thought that this was mainly for
entertainment
for business purposes was asking it
questions like what have we done since
1972 for all plants in Botswana and
obviously that's quite a difficult thing
for the system to answer quickly so um
the other the other thing is where end
users don't necessarily understand the
impact that their use of a system can
have on it now clearly again we should
have done a smarter job about putting
results governments in again touch on
that a bit later but system abuses can
be quite hard to predict the better the
tool you give them the more likely
they'll find some way to abuse it
anything but production I touched on a
few minutes ago is you're in an
environment what do you do in
development and test you mainly create a
stable isolated environment don't you
because you want to be sure what you're
testing and you want it to be
predictable because you don't want
flickering tests that's exactly the
opposite of production you are now
linked into this spider's web of an
environment and you can have a lot of
problems with constraints and contention
I mean contention for example on shared
infrastructure anyone here shared a Sam
with a large system that can be an
unpleasant situation again I was
involved in a production incident where
our database was suddenly running really
really slowly so hence our batch was
really really slow and interactive
suffered and the whole thing and our DBA
is were very very puzzled because nobody
changed anything until they cold storage
went these guys are seeing terrible
terrible performance on this Sam the
silence at the end of the phone no we
haven't changed anything don't know what
could be oh well we just moved the data
warehouse on to that San alongside you
do you think that could have had an
effect given they move half the data in
the firm every night that could have an
effect yes again not something we could
have controlled unexpected behavior such
as when you became example years ago
we're calling a pricing service and this
pricing service evolved to be helpful
and returned a range of prices and not
just one in our response without
actually telling us and they were
strictly speaking correct because they'd
always return the list but they'd only
ever return one item in the list guess
what how develop had done well they'll
only ever be one item in the list or
take the first we've got some very very
strange pricing calculations for a
couple of days till somebody figured it
out at the last point I keep seeing
around around the environments
integration points
wherever you're touching another system
you're dependent on somebody else doing
their job well this is something that
somebody who works for a large
bookseller that happens to also be a
very important online company mentioned
to me some time ago was that one of the
real challenges he had in his
environment was not so much keeping his
service running it was predicting what
was going to happen to all the other
services he was dependent on to deliver
his service so it's not just big banks
of this problem failures of course
happened software defects they're
completely our fault so let's gloss over
those who move on and just assume they
never happen and platform failures
platforms simply fail they go wrong and
sometimes we have all managed sometimes
we haven't done such a good job on that
em and then there's the environment
failures were just something it's not
the underlying platform but something is
now malfunctioning in your environment
for example something you call routinely
via some synchronous connection maybe
not a good idea but maybe you need to
for some reason suddenly starts running
slowly all suddenly starts returning in
no values at all as a failure somewhere
else it's Peter deutsches definition of
a distributed system isn't it so when
their failure for computing you've never
heard of prevents you getting any work
done it's that kind of environment
problem unworthily security tangles how
did your security look in development
everyone's pretty well got root haven't
they or some some some equivalent of
root because it doesn't really matter
and then you get to production and what
happens you suddenly realize that it's
an awful lot harder than you thought it
was I've been involved in a number of
situations where actually shipped the
software having gone right through
testing cycles and validation and you
got to production and then you found the
special guy it works in Hong Kong mid
market risk or something who needs a
security profile that nobody else knew
about and it's just just the problems
with security is dealing with many
security principles in different trees
different hierarchies dealing with
external security all the stuff that
really you can do an all gone on long
runway down the security design route
actually managed to ignore most of this
until you actually start thinking what
the real environment is like so given
that gloomy outlook what are we going to
do about this and how are we going to
help engineers avoid these problems
I have noted / slightly too many years
of production systems experience there's
full things you always have to get right
and if you get any of these wrong it
ends badly now every systems got unique
requirements don't get me wrong but this
is not all you need to do what I'm
asserting though is if you're not
functionally correct if you're not
stable if you can't provide predictable
capacity and if you can't nail the
security problem you will have
production problems and I have an awful
lot of the real production incidents
I've ever dealt with have had one of
these problems behind one of these root
causes behind them and of course there
are many other ways you can go wrong in
production but these are kind of kind of
the cool ones um and it's worth a couple
of words on field made stability it
really means predictability it's not
necessarily that you can do the
impossible but it's that when the
impossible turns up your system doesn't
suddenly stop like the one I was talking
about unfortunately did and then
capacity it's being able to process
whatever workload either is needed but
actually in practice it's you can
process the workload you've promised to
be able to process a lot of critical
banking systems for example do this they
agree what the capacity of the system is
and then they build the system in such a
way that it will always process that
capacity however if you send it more
worker than that it will get dropped on
the floor possibly silently that's the
contract and that's the trade-off there
guaranteeing a capacity what they're not
guaranteeing is to start doing their
best once you once you've over that
capacity and it's a trade-off between
whether you need more flexibility or the
capacity is an absolute requirement and
then security kind of speaks for itself
people used to say there's no such thing
as bad publicity whereas if you've seen
a few few security headlines in the last
couple of years that that old adage
probably no longer holds there are
definitely some kinds of headlines you
really don't want so would have done
when I've dealt with this when I've been
designing systems and trying to help
teams move towards production is that i
found that you need to approach it at
three different levels which was really
three different stages in your thinking
one is when you're putting your system
together you need to have strong design
principles to make sure that people can
achieve these four
essential qualities just as a side
effect of doing business as usual so
everyone follows a certain set of
principles pretty well they're going to
be in line with with these needs and
there are certain technological
solutions and as engineers that's often
where we focus because that's often the
fun bit is figuring out what the right
design pattern is or what kind of
security algorithm we're going to use
and finally especially when we're
dealing with operations groups it's
really important to be clear what kind
of processes we're going to use that
doesn't mean a big thick binder full of
paper that gives people step-by-step
instructions unless that's what some
someone's asked for but it is being
clear how you're going to do certain
things with your production system so
that you don't need to work it out the
first time and something goes wrong this
is a really come from with security
what's one of the processes that you
always need for enterprise security what
happens when things go wrong you'll need
an incident response plan agreed the
thing that a certain large international
entertainment company clearly did not
have when they they were attacked badly
a couple years ago or if they had it
they know how to use it and it's not
necessarily that you want to bind a full
of material but you do need a group of
people who have agreed who's involved
who's doing what and what they're going
to do you don't want to work out your
incident response plan on your feet in
the glare of the world's media or even
in the glare of your CEOs unhappy Slayer
so the kind of things that fit in here
are things like you might have a design
principle to stress simplicity to help
you achieve correctness that's a rather
trivial matter but there are definitely
design principles can drive you towards
correctness functional corrects you
might for example member under stability
we were talking about resource governors
a very specific technical solution you
might decide that you are going to use
resource governors in certain places in
order to achieve stability and for
processes for example for security you
might decide you are going to get able
to threat modeling because you know that
has beneficial side effects in
understanding the threats and working
out what the correct mitigations are all
similarly you might have as I said
incident response plans or there are a
number of processes relevant to them
the key thing is this is a framework
where you simply put this up on the
whiteboard you go right to achieve these
four which of these areas are relevant
and what are we going to do in each you
need to agree that as a team I'm not
suggesting mad amounts of big upfront
design where you start sketching loads
of uml diagrams to figure out how you're
going to build stability mechanisms into
your system but I am suggesting that
before you get you before you've
invested very much of that businesses
money you do need to understand how you
are going to achieve these four critical
properties a few general principles
which are going to help you is thinking
about one team early on you will work
for DevOps organizations it's all right
put your hands up we won't tell anyone
and making sure that remember that big
cast of characters making sure that
everyone in that is feeling a bit of
accountability but also a feeling fully
consulted that they know what's going to
happen about this system when it gets
towards production all it is in
particular in my experience particularly
don't like surprises there what like the
term is often a negative stakeholder the
best result for an auditor is your your
your project gets cancelled and your
system never gets near production
because then they don't need to worry
about it obviously that's not what the
business once but they're quite a
negative stakeholder having them as part
of a warranty merrily it's a great thing
automating everything we can I think
that's becoming more and more well
understood principle the more we
automate the less surprises we're going
to have and the better we'll we'll get
it doing it measuring and improving as
we go so that we actually know for
getting better or worse and if we're
getting worse we can do something about
it and finally is making sure that we do
this in a timely manner we're going to
need good enough and especially run
processes we can often agonize to the
point where we're trying to write
micro-level fine-grain processes and if
you don't want operations team who've
come from maybe a heavyweight mainframe
background they may be very comfortable
producing very very detailed processes
worth challenging that and asking them
what the value of such a detailed
process assuming they've got skilled
staff is that's just one example where
you would make that trade-off but often
it's
being good enough it's learning learning
lessons from the Facebook's and the
googles and the netflix that you need to
be good enough to go to production
because you don't know what perfection
looks like anyway so you need to get to
production to get the feedback loop to
figure out what direction you should be
heading these things today of course the
CD and devils movement are talking about
they're not you though CD and DevOps are
labeling them as important things and
that's terrific but they've been around
a long time we just need a bit of focus
on so give you an example how would you
go about using this framework supposing
you want to achieve stability I had to
pick one of them because the full
presentation does all fall but I've Pig
stability today then because it's got a
nice diagram but see what you think when
we get there so for example suppose you
you you need to achieve stability what
design principles are you going to use
with your developers so that people
understand how to achieve stability in
your system well for example three
high-level principles might be failing
quickly isolating problems and making
sure that you always can maintain steady
state operation they sound sort of
obvious don't they how many systems have
you worked on that you've had a problem
in one part of it has managed to ripple
right across the system and paralyze the
whole thing that's a really really
common problem especially in connected
enterprise systems and a problem in one
system causes them all to come to their
knees what's the classic service and an
enterprise will bring it to its knees
which service would you turn off to
bring the enterprise to its knees the
fastest it's a network service ldap is
good one actually I was thinking more
fundamentally DNS turn off DNS nothing
will work diff we go one to isolate I
must have met but failing quickly so you
fail fast you don't keep retrying things
especially on the machine control and
you timeout so that things are going
wrong you find out quickly you don't
have all your threads hanging up waiting
for something that's never going to
return if you're going to isolate
problems can you put circuit breakers
into your API calls so that you don't
overwhelm the root and the remote
systems with more and more calls when
they clearly can't respond can you put
old heads in your system this is a Mike
Nygaard term so it's
it is their way of isolating your system
such that a memory overload condition in
one part will in one service or not
affect another service and can you
integrate asynchronously so everything
doesn't get hung up in a huge
distributed call Jane when something
goes wrong and ensuring steady state
operation is really boring but actually
it's quite common that if if you're in a
big organization and you look down a
list of production incidents over a week
it's not rare at all to find one or two
systems that have had an incident
because they they forgot about the
boring stuff of steady-state operation
truncating their logs making sure they
had a storage management policy
predicting memory usage on a rolling
basis understanding what their bandwidth
requirement was and so on so suppose
then you had actually identified some
design principles clearly you need to
communicate those clearly and agreed
them as a team and then those it's all
about giving people micromanagement but
it does help them to think about
prioritization and think about their
software being production-ready much
earlier in the process then we often ly
encourage people to do so so then you
then need to actually look at some
technology solutions in nearly all cases
I mean some of the examples would be
things like failing fast so that you
your load balancers have got are very
intolerant to problems going on further
down the stack and very quickly start
returning errors to people so if you do
rest-based API so this is a terrific
heuristic if you've got a problem for
the damn things are running slowly just
send people retry failure codes because
there's no point in trying to process
them if your systems already becoming
overloaded separating your system to
separate physical parts can be a good
way to implement these these sort of
virtual bulkheads so that one overloaded
server doesn't cause the entire estate
to to get overloaded
if you're calling things that can
unpredictably take a long time make sure
you've got time outs I mean if you've
got a short time out on your database
tier yeah a few nods which is good
actually because I very very commonly
and when you've seen a problem around
the database you find that one of the
things that really locked the problem on
and cause problems was that all the
client software which is only sitting in
the mid tier or Cynthia queries and then
waited infinitely or waited so long it
might as well be infinite and so they
stacked lots of work up in the database
that was clearly had a problem with it
and then tied up all of the middle tier
which then tied up all of them in tier
which tied up all of the front etc etc
so timing that fast you can propagate a
problem back and handle it and get that
work out of the system because it's
probably not not going to complete
anyway a resource governor that's one of
the ways you prevent database is running
away but many technologies that are
resource intensive have got resource
governors in them and a circuit breaker
which I'll just talk about in a moment
but that's a way of wrapping an API that
you feel may fail at some point or is
likely is likely to have some failure so
a circuit breaker again I'm stealing
extremely shamelessly from Mike my guard
here but it's a common pattern that fat
back when I worked in the system
software industry it's a very very
comment system software products do this
I've seen it very very rarely an
application software the idea is the put
a very simple state-based wrapper around
any synchronous indications you need
across networks now we could agree that
synchronous implications are not ideal
but you often need them so what's going
to happen if the thing at the far end
starts to come under very heavy load and
starts taking a very long time to return
to your synchronous RPC what's going to
happen to your system it's slowly going
to grind to a halt isn't it because
you'll get more and more threads all
hung up waiting for the network service
what do you think is happening at the
far end it started running slowly and to
help them out what did you do you sent
them a lot more work they they probably
didn't thank you for that because you're
really not helping so that's what
circuit breakers that's the situation
circuit breakers meant to help with the
normal condition you call the circuit
breaker it calls the service
returns done if however it hits a
problem if there's an error it starts or
it times out whatever it starts counting
that event and if it goes over a certain
threshold it stops trying to propagate
to the remote service it just starts
throwing errors soon as you call it
it'll throw an arrow straight back to
you which is just what you need it stops
your thread being hung up so you might
sacrifice five of your threads which are
now hung up and they might have five
requests to deal with but it's an awful
lot better than 500 well it's 495 of
yours have now been aired out quickly
and you can get that workload out of the
system and tell them all to retry and
they'll back off and obviously then you
there are variations on it either after
a timeout period it can reset itself or
you can decide actually say you were
dealing with a credit card processing
company they don't feel very often when
they do it can be catastrophic you might
want a human being there might be an OPS
procedure at that point to raise an
alert and manually reap manually reset
the circuit breakers that's really a
detail the key point is when something's
going wrong don't make it worse and then
once you've got technology you probably
want to start thinking about what
processes are you going to use to help
the stability of the system the
principles really around processes for
stability I think would be you want
repeatability the more times you do
something the more likely you are to do
it well and the more likely you are to
do it in a consistent way Automation is
the color II of that if you automate
something that computers going to do it
the same way every time so you're going
to providing reliable end up with a very
stable process that works the same way
every time and you need transparency so
you can tell when things start to go
wrong one of the other problems I've
seen very regular with enterprise
systems is that you find out things have
gone wrong quite late in the day what's
your what's your monitoring system for
production how do you find out your
system is running slowly is it a
well-defined alert with a rising
threshold and a graph or is it an
end-user calling a help desk because
it's quite often if it's be honest it's
an end user calling a help desk going
this system is a bit slow this morning
and everyone looks in and goes yes
that's right it's not exceeded any
thresholds but it is really rather slow
and modern tools I mean people like AB
dynamics and their friends competitors
who are now you relic and our examples
of tools they're very good at tracking
what's happening it in an estate and
showing you trends smoothing out the
noise and allowing you to see dangerous
trends early but there are lots of other
ways of doing it important thing is is
allowing people to see what's going on
in a way that doesn't swamp them with
information because that's the other
thing is that we log everything right
and what happens we have to debug
something you can't find anything
because those long as everywhere and you
don't really know what logs to look in
it's very difficult to find them so it's
transparency rather than data production
and so process automation is absolutely
in my view crucial to achieving
stability the kids kind of conceptual
model being that you've got a human
being may be triggering but certainly
can oversee an automated process which
is pushing changes into your estate so
everything's got an API which is just
changes the game entirely when
everything can be automated everything
in the estate that's working
automatically is reporting what it's
doing and you're pushing all that into a
monitoring system that knows what normal
looks like and then the human being can
ask questions such as has this completed
what has completed in the last hour how
many of these changes have we done but
most importantly the monitoring system
knows to recognize abnormal and can
propagate that to the human being who
can then decide to change something the
monetary is doing that's the fundamental
structure of creating successful process
automation in my view so in summary
productions different productions not
like our dev test integration type
environments it's quite demanding
because you need correctness you need
stability you need capacity and you need
to be secure in a predictable way unless
you've got those I predict you will have
production problems irrespective of what
your enterprise architecture team or
our end users of those nice external
consultants from the management
consultancy told you your requirements
where if those four things aren't there
bad things will happen and so the
question is how on earth do we guide
potentially quite a big development team
with people from many different
backgrounds lots of different kinds of
skills to actually achieve those four
well my suggestion is what we need to do
is to make sure we've got design
principles that support them we make
clear technology decisions especially if
we can pushing those into infrastructure
and frameworks and we think as early as
possible about process constraints what
processes will we need at some point
before we get to production and we do
that for it to support each of those
qualities explicitly and that's all part
of if you like the spike that starts the
project I'm not suggesting that's a huge
design exercise what it is is a focus
thinking exercise and it guides you into
the problems you're going to have to
solve before you get to production and
it prevents them all becoming a huge
surprise just before you get to
production which is what I've seen many
team has happened with many teams
they've done a great job in development
but because they've not actually been
thinking about the production
environment there's a lot of very
unpleasant surprises very close to
production these requirements and
principles are not you I am old enough
just to have worked on mainframes i
sponsored by Phil Motor Company and I
spent a short period on the mainframe
before moving on to what Ford thought
were newfangled and frankly rather
untrustworthy distributed systems based
on unix took them a long time to come
around to it what was really interesting
though is that seeing the DevOps
movement is just fantastic because they
say all the right things and doing all
the right things what's really
interesting for those of us with gray
hair is how much many of the mainframe
people have been saying the same things
in the background for some time the big
difference is what the mainframe people
haven't been saying haven't been
stressing is integrating the teams and
they haven't been stressing automation
from development into production in fact
they rather like a bit of an air gap
they like stuff handed over and that's
what we've got to change and that's what
DevOps and CD have been doing so well
if Farley was talking on that earlier so
it's all about breaking down silos to
allow the old principles which are
timeless to actually become effective in
in today's much more dynamic
environments in 40 minutes I'm not going
to actually teaching very much about
production but there are in fact a small
number of books that's the other funny
thing go to Amazon and do some case on
programming books just do searches and
look at the case java you know if xml
god help us Jason rest loads and loads
of topics thousands of books certainly
hundreds in many cases you can try and
find books on operations production
migration to operations path deduction
and don't use the term DevOps how many
books were you find not very many and a
few of the ones that I think are well
worth looking at which I I've explicitly
not included all the DevOps books it's
not to say they're not very good but I'm
looking for slightly more fundamental
ones Mike no guards book release it is
really excellent few years old now a few
of his technology war stories now aren't
quite so relevant in that you won't see
the problem but crikey the way he
handles it the way he spots it and the
way he resolves it is exactly what you
do with a different problem full of its
really nothing because he's he was very
much pioneering development needs ops
guy at the dawn of the large-scale web
and his book is packed full of anecdotes
about black friday disasters and
scalability nightmares and middleware
collapsing and bugs you would never have
thought about that all had to be worked
around in production and he's got great
advice on what to do but I've stolen
shamelessly from some of his concepts
what to do well before you get there to
ensure that all the problems he's had
don't happen to you web operations is a
nice book it's a series of essays really
on different web ops based topics it's
written by all the really big guys in
the industry it's written there's a
chapter for facebook as a chapter from
ebay I suspect those a chapter from
netflix I don't remember but I think
there probably was air and all of the
other guys like that they're really
interesting because they deal with a
scale that Muslims will never have to so
to see the way that they deal with the
problem allows us to see what the
ultimate good looks like and then scale
it down for own environments there's a
lots of experience there and and
design-build run
by Dave Ingram I've just remembered his
name at the last minute dave is
accenture I think or X accenture has
done a lot of work working at the data
center end of things and also have a
good understanding of software
development if you're dealing with
production people from a fairly
traditional background this is a great
book to help bridge the gap culturally
there's a lot in it that they'll
understand and like but you'll end up in
much the same place as if you start from
a much more modern DevOps approach and
it can really help to build a few
bridges and finally as the boat Nick
rozanski and I wrote when you're doing
your architecture one of the views that
we have is the operational view which is
quite rare in architecture thinking it's
quite rare that architecture still has
much about production and the operations
view is as we put it how you get your
system to production and keep it there
which is where the title of this came
from so I am just about on time so happy
to take questions and all discussions
are even better than questions actually
and can you rate the session for the
second time thanks very much yes so the
question is how do you prioritize this
and I guess that's why I go around
giving this talk so much I'll give it
with an endeavor every time I visit a
delivery unit I give this talk one of
the things is we talked to them and we
do give them talk so hopefully a longer
version of this as more funny stories
I'm really sorry you couldn't have the
funny stories I don't need 40 minutes
and so we don't talk to them that's
actually the key thing but I think
what's really important is that two
things one really senior management in
technology and the business make it
clear to people that production failures
are not acceptable but in a good way
they'll support them in doing the right
thing and actually going to get senior
managers to behavin to behave as if they
believe that and that's not always
straightforward and and the second thing
is to make sure that one team concept if
you get people from all these different
stakeholder groups involved in some kind
of virtual team developers get much more
interested because actually people are
interested in them and they're asking
them how are you going to do this and
they say well we don't know how are you
going to help us and suddenly the
profile of it raises and people start
putting stories on backlogs and say I've
just been talking to somebody from
compliance I didn't even know we had a
compliant
apparently and you know up against a
story and that can really help this
people talk to people yes I mean
strictly functional correctness and I
skip over that even in the full version
of this very neatly what I'm really
talking is what I'm really talking about
is have you got sort of behavior driven
development front to back can you really
stand up and say I've got an executable
spec and I can prove the code does what
the spec says there is then another
question which is did you have the right
spec and then there's a whole sort of
glucose kind of questions about how did
the business produce the spec for you so
that's the kind of thing I'm talking
about under functional correctness
you're quite right correctness itself is
too general okay thanks very much I
think it's beer in keynote thank you for</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>