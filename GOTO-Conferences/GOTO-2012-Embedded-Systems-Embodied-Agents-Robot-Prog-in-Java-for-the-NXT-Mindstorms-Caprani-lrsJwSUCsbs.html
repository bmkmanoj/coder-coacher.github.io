<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2012 • Embedded Systems - Embodied Agents, Robot Prog. in Java for the NXT Mindstorms • Caprani | Coder Coacher - Coaching Coders</title><meta content="GOTO 2012 • Embedded Systems - Embodied Agents, Robot Prog. in Java for the NXT Mindstorms • Caprani - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2012 • Embedded Systems - Embodied Agents, Robot Prog. in Java for the NXT Mindstorms • Caprani</b></h2><h5 class="post__date">2013-03-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lrsJwSUCsbs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">for the last 15 years or so I've been
teaching a course at the University of
automotive the computer science
department called the embedded systems
in budding agents
the course is about programming robots
in Java and the robotic systems that
we've chosen for this is the legal
mindstorm NXT kit robotic kid that out
of Lego bricks can be used to build
different robots that can be controlled
by the NHC petroleum this so I'll talk
about the course the reasoning behind
the course the content of the course and
show you some examples of some of the
eighth court projects that the students
have been doing this course it's a one
semester course and it's divided in two
parts in a 10-week session where each
week we have lectures and lab sessions
that take place in this room the lego
room odors playroom for kids but to get
funding I hate to call it the legal and
lab the other part of the course is an
in course project it's a 10 week period
where the students in groups of two or
three select their own projects and
finish it and present it to me and hand
in some lab notebooks describing their
process and the product they've done
this is how the lab looks at the end of
the impost project period and when I
complain about it to my students they
always say why don't you build a robot
to clean up the legalized on kit is a
bunch of Lego bricks and then some
elements that can be used to build legal
robots like this one it's really easy to
build these
you built them out of Lego bricks and
then you add on the little controller
here add on a sensor and add on two
motors in this case to have a fixed and
ready legal car to run around the core
this is the nxe it's the control unit
it's chance by horrified I'm chargeable
battery this is very practical when you
are 30 or 50 students their input ports
for different sensors and output ports
for actuators motors and lamps etc for
programming we use the layer system it's
a very active environment open source
environment the latest position is from
ferry this year started out with the
earlier robot control unit from Vega and
now they have also developed it for the
you that's three or four years old and
it's a complete Java system with avi for
this box and an API for the pc so it's
rather easy to write a couple of
programs one for the pc and one for the
robot and make them communicate i means
a bluetooth or USB so you have a whole
system consisting of programs on PCs and
programs on these and exceeds they also
have a very nice tutorial which is
important when you want to teach the
architecture of the layer system is
described here
the yellow part is the firmware that you
download once and for all flash memory
of the processor inside the unit c then
the user program can use the native
methods that give you access to the
motors and sensors and due to the cetera
but you can also use some of the classes
from the API for instance a rather high
level navigation class that can make you
navigate your open around room so know
where it's the very low level there's
another processor inside here but you
don't have to care about that the two
processors in here to make sure that the
real time requirements are built with
first of all the students need to learn
about the Java API that's running on the
NXT and for all those every vice for
buttons the screen etc there's a class
in the API in this case the earth music
we used the LCD display can be useful
for text and graphics for instance it's
rather easy testin described for
debugging purposes values out on the
little display or you can also use it
for graphic Africa during the first 10
week period I organized the course in
some lectures where I this week the
second week told that PID controllers
allowable back today and furthermore I
described the evaded Jana so the first
part of the course is about embedded
systems what is an embedded system how
do we write programs for it what our
sensors war our actuators and we use the
NHC
and the robots that we can filled with
it to describe both be embedded Java and
controllers for cheating about
controllers I use a chapter of this book
one of the pioneers of using robots in
hands-on education this is an
introduction to engineering for MIT
students and back in the nineteen from
the early nineteen he designed a robot
with Lego bricks legal wheels Liga
motors but with some homemade
electronics on board to run interactive
see programs on board of these robots
now remember that it's computer science
students I'm teaching they know nothing
about control systems they know nothing
about regulation so I need to start from
the beginning by describing what is an
inflated system that is one control loop
for instance this little car following a
wall getting feedback from sensors
measuring the distance to the wall and
using motors to drive either towards or
away from bubble so two wheels are user
is actually this a bin sensor tells how
close to the wall the little robot is
and then we need to write some control
loop that every now then looks into the
environment and try to refine or adjust
the position with regard to the mobile
and in this book it's explains rather
nice what a a simple controller biz with
on-off control or bang bang control if
it's too close to the wall drive right
to get away from the wall or if it's too
far away from the wall
cried left and it's the value of the
bench centers that is interpreted as
being too far away or two filters the
first week i introduced this idea by
means of a lab session where they build
this robot oh this little legal car add
a light sensor download a line for what
program and this is their first embedded
java program so they need to know how to
use the classes that are accessible in
the API so that we can access the light
sensor in this case we have an instance
of the line sensor class with a
constructor parameter saying that it's
connected to port 3 then we turn on the
floodlight the red light so its
reflection from red light from the
surface that we get we can read the
value when we have this instance a value
between 0 and 100 and red beans very
bright 03 black and we can use it for
testing whether we are on the black or
on the white surface at least is the
robot is on the surface of the motors I
accessed similarly through AP is motor
for B and C and used in this case and
the method control motor with two
parameters a direction forward backward
sup etc and some power number between 0
and 100 and in this case it's a pulse
width modulated is mine Bob power supply
to the motor to supply different power
levels to the match and then the control
group is very similar to the loop from
Fred Martin's book just this symbol on
off bang bang if we are on the black
oh sorry I'm white turn right if we are
black turn left and I have calibrated
this very car to the lightning
conditions in here and here you see how
this control loop will make it follow
the line one of the things that I say at
this point is from the outside we will
describe this as follow alive a follow a
niche but there is no representation
inside the program of a line it's just
two simple rules to let Jen right this
is how you get back from the city one
late-life 79 following a wall art
turning left turning 11 of the
parameters that they are supposed to
investigate it is breached it's the
threshold and furthermore the sample
rate this is very new to computer
science students but the same array you
use in an embedded systems determine how
good this ability a some different
system is one of the next small lab
sessions to get them to know about
controllers there is to build this
little robot so now you can see the
advantage of having legal robots as the
kit that we use for robot programming
because we can rebuild and rebuild for
each lab station whatever we like
investigated large wheeled small wheels
whatever just like the same way we're
trying with this one to balance on two
wheels and we use the light sensor to
measure the distance to the surface and
hence also how much it's away from the
right position where they spending
forward or bending back and from this
book on legal java programming with the
less I stolen this little PID controller
so this bie controller we're trying to
balance a late way like this one yeah
what's opinion I'll fight let them
you're in computer science yeah because
if we try with the simple on-off control
bending like this drive like this
painting like this drive it like this
then it will fall over immediately I
mean you can't use this strategy for
controlling when it's balancing okay and
the reason is that it's falling too fast
a PID controller has three terms
proportional integral and derivative
proportional means that we somehow make
sure the error are far away are we from
the upright position but we want this is
the offset then we read the light sensor
value and subtract that from the value
that would want it to have because
that's the right distance and the error
dozen calculated and used for
calculating how much should we drive
forward or backward if we only use the
proportional term we save this error and
multiply it by some constant and put it
into climbing forward a bank work down
here with the motors so proportional to
the error we try to adjust the speed
in one hour the other direction if its
upright in a proposal to zero if we only
do that it will fall over very quickly
because when it passes through the
position that we want it has too much
speed the arm okay then we take the
derivative which is the speed in this
case the difference between the previous
area and the error the actually this is
the detail by putting that in it will
stop a little before the position that
we want just like an elevator it
approaches the floor and stops and
settles down it's not gentlemen similes
then it's more fun to have other
constants right but in this case we want
to stop gently at the upright position
and the integral term is not that
important in this case but normally with
the elevator it makes sure that we get
just right at the position we integrate
the era when the integral is large
enough would give it a little push now
the problem here is to find out what
should these constants be what is this
strange term why did we have this this
is what they investigate during this
book during this lab sessions
furthermore they learn how to debug
embedded systems by having a GUI running
of the pc with typing in New constants
sending them to the programs while it's
running and then getting you Constance
into the PID
I can demonstrate how a PID controller
works in this case you saw how it
oscillates around the it's but if I just
use the pizza in the D term of this case
and calculate the error with respect to
just above the edge of the light sensor
then it will find like this let's normal
more normal misapply burlesque are
trying to get it out and you can see if
I put it here it will just correct each
time oh this is where the debugging tool
comes into pandey back in the myth or
almost in the end of the five six weeks
we have a competition where the students
are supposed to fill a robot of their
own choice it should start of the floor
trying to get out here turn around and
go back now this is really engineering
mechanical design instrumentation
choosing the sensors to get the
information they need but also trying to
get to the point where they can choose a
strategy for running up and down this
this Alison oddish oddish on train track
it looks as if they should follow the
line and one of the groups actually did
that with two sensors driving rather
quickly but only using the line every
now and then
so there are stages in this program well
their stages in this program where it
knows that now it's on this slow or on
this slope because now it should catch
up the line on the left or on the right
and there was supposed to run as fast as
possible from the green area to the
green and back to the green area and
here you can see the time can't see it
but they handed in the time to me and I
trusted but there were some other
strategies like this one it's coming out
of the dark there's no senses it's plain
hand-coded time and you can see it's
late night they've been working on this
the whole day in the whole night and
every now and then they just corrected
it a little and the battery level but
now see what they do so instead of
driving all the way back here they've
carefully throw themselves from the trip
and down in the green area there is my
slab leaguer here old one and this is a
very risky and the very non robust
solution but I mean in this case it
worked fortunately to me because I don't
like this kind of switch total it to me
it was a little too little longer time
than the other solution and the price
was a dinner in town on me so the first
team shot at dinner so the first part of
the course will teach them that an
embedded system and some seemingly from
the outside world going through
the sensors into the control program and
here they learn about senses when they
come they have this misconception that
sensors measure information out there in
the real world they are on a basis and
without noise and they learn totally
different issues like noise and very and
bass yes numbers the company furthermore
when it comes to the actuators motors
are not similar not from legal and you
have to reap we had to program this into
your control program so it's not an
ideal world it's a very real world that
their robot is supposed to living it has
three components each of these
components independently determine the
Bohemian robot the environment the
physics the robot the wheels they're the
placement of the wheels etc and then the
control for computer science students it
comes as a surprise but the control
program is not enough I mean they
comment said if we can prove it no you
can't because there's an environment
there's physics of the Rope then the
embodied agent
autonomous agents are robots that can
behave autonomously planning on their
own what to do that too it's robots that
can adapt to the environment if you saw
the computation arena you saw that the
lightning conditions were very different
the slopes the two slopes and they
didn't realize that until very very late
during the competition you have to adapt
to the lightning collision in the
environment when you talk about agents
you talk about systems that have goals
this is very hard for technicians to
understand we have a coffee machine in
the lab it was put there by today the
Fontan local organization for earning
money from taking coffee of selling
coffee to the students some of the
students found out that they could hack
the machine to get free coffee by some
strange push of the button it took two
years before the organization realize
that there were no money coming they
were filling powder into this machinery
every week now the guys were programmed
this coffee machine didn't think of the
goal of this machinery the goal is not
to give money out that is not too to
give coffee the goal is to earn money
for its owner so the first component to
build into such a system is a little
component that send SMS messages to its
owner when no money comes then the rest
for the coffee and all that that's okay
but this is the most important part of
the system to make sure that the goal is
reached the difference between embedded
systems and in body ratings can be
described very easily by taking a better
robot and the robot baby see you power
this is
supposed to exist in a very engineered
environment with very engineered
actuators and sensors and the sequential
strategy built into its program a single
plan for doing its job this is an
embedded system living in a strange
environment hospitals in nursery homes
are being taken into bath being hawked
being handled in every possible way to
make sure that this will work in any
alarm we need to program it differently
the fred martin has called this reaction
energy to look into the conditions of
the environment by means of the center's
and choose some action depending on
what's going on in the environment so if
somebody is plugging pyro very hard it
will scream out laughable and if
somebody touches it gently it will say
sounds and hey so that the owner will
know this is what I want and it also
learns its opening these reactive
systems built into systems that were
supposed to live in environments that we
do not know in advance started to be
built in the 1990s Rodney Brooks also
from MIT coined the term a sub solution
architect three different behaviors
running on one robot as independent
threats each of them can behave and make
the robot behave running alone of the
robot for instance a random crime is
just the breath that uses the motor to
randomly fly and rap
this one has input from some senses that
register if there is something in front
of the robot and then use the motors to
get away and avoid this one up here
every randomly time interval decide to
dance and play some chew how do these
three behaviors behavior modules exist
together and share the same motives in
Rodney Brooks case it was based on
static priorities if this one is running
and the others are passive let's okay
get through but as this one wants to
control the motors it suppresses this
one's access to the motors so we have
priority with respect to access to the
motives and the individual behaviors are
picked by triggering conditions and in
mind static prowess is are not always a
possibility we may at legal version of
the pakman the two red robots are the
ghosts the yellow one is remotely
controlled packman they run around the
mace and the two red ghost has two
behaviors stay on white the maze between
the black sides with the black mind
centers and avoid if it bumps into
something everybody's notice that this
is the most urgent behavior when this
one is one but every now then when this
one gets control it backs off and out of
the base because we're not looking at
the sensitive so we might solve this by
looking at the sensors during the avoid
behavior or by having the sweets of
priorities and this is what they do when
they describe our animals switch between
Bohemians
we have a bunch of behavior patterns in
this model of the animal only one of
them is active at a time it's something
called motivation that this determine
which of the behaviors are active if
it's and it's mr. balik consumption is
very low in sugar in the blood it gets
hungry and then the motivation for
getting something to eat rice if it's
late night it has a motivation for
resting if it sees an enemy it has a
motivation for running to model this on
computers you simply have a number of
time-dependent functions that describe
the motivation for the different
behaviors rising up and down and the
behavior with the max motivation value
is then the one that get to be in the
activity this has been used in the Mars
rovers and this is used in vacuum
cleaners this is used everywhere where
robots have put out an environment that
are hostile try to model them as animals
that try to survive the most important
behavior is to get reach out to vacuum
cleaners that is stay alive
and now to a demonstration of some of
the ink course project some of them
choose very control related projects and
some of them choose very embodied agent
related projects like having a flower
Globox running around this group has
decided to start with the same way and
then the late way that we built during
the 10-week period instead of the light
sensor they added a mural sensor because
then it can also drive up and down hill
of the Ellison track then they decide it
after having done this but they need to
rebuild because small wheels are not
good for balancing large wheels and this
one put a little up so that the way is
up here then they added light sensors
and a business center so besides being
able to balance this is also able to
avoid when something comes too close and
to follow a line if it recognized a lot
Lynch one I love trying ok
now it calibrates to know what is for
example then I choose to put the avoid
behavior on the light follow behavior
then should I mean it's oscillating a
bit this is because it's computer
scientists engineers and I've done it
better right if I put my hand close to
it it will avoid as you have had a large
Jesus let's see if it follows there yeah
okay that's that different goals in this
robot but the most important goal is to
balance bike so the balance infinity the
bouncing Vienna is a utmost priority and
if I put my hand in it won't follow the
line but then the your voice behavior
becomes the action one whoa and now it
tries to follow a line again
you know the system inside here is just
like the system in any vacuum cleaner
okay with a lot of behaviors I think
there are 20 to 60 behaviors inside a
vacuum cleaner and the most important
system inside that is to choose the
behavior that is the most appropriate
beating at any time some of you have
learned how to program by means of
something like this a little turtle
running around screaming drawing some
silly stupid joints right how many of
you have done this I this is where you
got the poison because then you try to
think about things as if they are an
ideal world the virtual world where all
mathematics just fit with what comes on
the screen now some habits original idea
and this is the original turtle from
1969 worse also to integrate
understanding of the physical work into
the understanding embedded systems into
the understanding of trying to do this
here is an early version of kids trying
to control the drawing very quickly a
lot of my students try this building
something like this running around
drawing and you know they start with
this strange attitude that the real
world is ideal and mathematical and
filled with logic it's not this is a
magnet centres are trying to figure out
the direction where they
again because they know that the choco
pound us on the wheels are not enough to
make sure that they know that position
because the wheels are slipping so this
doesn't work either because there's a
lot of wires underneath the floor in the
lab the magnetic field is totally random
and every time they try to do this they
trying to do as if they were in a
virtual world it was only this year but
a group of the this year's a group
trying to recalibrate by means of some
kind of sensors that measure distance
the walls ever happen another line is to
do some robotic game and here is a game
where two autonomous robots are trying
to fight each other and it's in days so
I'll try to explain what's going on to
two robots the blue one and the red one
are going to fight each other there's a
camera in the above the two robots
sending information to the pc so that
the pc can send information to the
robots where the l robots because it's
rather harsh to fight sensors so that
they can figure out where the other
little buddies now they're supposed to
run around and bump the other on a touch
sensor sitting on his tail and this
system that they really work on half to
give information that'll be mr. robots
where the other robot is there doesn't
seem to work
this is always what's happening they are
interfering with the autonomous robots
because they're not give your tongue
isn't they obviously do not know where
the armed robot is so somehow the
picture analysis doesn't work or somehow
the information to the robot doesn't
work but in the end of the video you
will see they take the two robots in
their hands and make sure that they
actually get points but it takes some
time for them to realize why are they
spinning this is one of the problems
with robots it's very hard to keep up
come move come on come on hit the other
the supposed to hit up here because this
is an example of this idea that we can
get total information about the
environment so that we can control its
by means of all this information x y&amp;amp;z
coordinates angles etc etc this year
some students took the idea but in now
its formal autonomous robots running
around it's actually supposed to be the
turtles from there was really that's a
very of the animation work Linda Turtles
the four Ninja Turtles and then we have
a bad robot an evil robot sweater flying
around trying to bump the turtles on on
top and now the kids are supposed to
control my mean to this keyboard
shredder running around and each time
the Ninja Turtles get on the pizzas they
get more life and power but when they
are hit by shredder they lose power now
it's they suppress within two minutes to
two to see if they get some point it's
still
prototype with exhibited in a museum
importance in the two weeks but as you
can see the guy is controlling this one
trying to mock them on the orange little
disk remember this one is eating the
pizza right this one fact they found
some pizza there but they can still be
beaten even there if they even in
conclusion I found two peoples that I
including this presentation because they
both talked about this idea of having
autonomous robot robots in the computer
science careers because all too often in
the computer science curriculum as well
54 say we think about systems as if they
were virtual machines or virtual worlds
there's nothing outside of the program
and there's a lot of ideas he calls them
powerful idea as you get if you think
about the whole system integrated as the
environment the physics of the system
and the control program at least if you
are designing embedded systems you need
to have the other two components
integrated into your process this one is
about as a separate Martin's paper that
the one that wrote this book he has yeah
course against ethicals for many years
stunning in 1991 a one month course for
engineering students
with a robot competition and you found
that all engineering students being
taught like they do with a lot of theory
and no practice and no hands on prints
they come with some ideal notion about
what is physics what is electronics what
is programming what is your mind and
they mess up completely and I know this
because every year I'm in charge of a
number of robot competitions for school
kids they come with this idea that the
robot knows what I know but they have
this view very egocentric view and the
students also at MIT as this they can't
see it from the robots point of view and
information is coming through the
sensors no it's not it needs to be
interpreted and if you interpreted it
wrongly you need to do something so if
you're interested in how to develop
yourself into embedded systems and how
we trying to develop computer scientists
into knowing about it embedded systems
you might read these papers it's very
amusing where you can find this in any
toy shop less than to that danish krone
okay can it stand up for that position
no no that there's not that many per
hour and the motors and they have tried
this really because then they they could
write a program for autonomously
learning how to balance because when we
roll down then up again that's right but
they've tried with everything like touch
sensors to detect when is down stuff
like
so it's so much easier to furman with
PID controllers with this one because
it's still there when you may sit right
but this one is not easy there's a the
the the last Java system if you have
this robotic it available it's really
very nice it's stable it's well
documented and it's very nice to use and
since the students no job open become
program is programming game is not an
issue it's learning about this sensor
actuators and some of them build their
own sensors because it's very easy also
to do electronics because the it's open
source from legal and the different
things are connected to the NXT so you
can get recipes everywhere on the net to
build new sensors and building ranch
owners
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>