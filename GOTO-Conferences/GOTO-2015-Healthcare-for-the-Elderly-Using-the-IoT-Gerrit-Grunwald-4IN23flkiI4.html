<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2015 • Healthcare for the Elderly Using the IoT • Gerrit Grunwald | Coder Coacher - Coaching Coders</title><meta content="GOTO 2015 • Healthcare for the Elderly Using the IoT • Gerrit Grunwald - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2015 • Healthcare for the Elderly Using the IoT • Gerrit Grunwald</b></h2><h5 class="post__date">2016-09-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4IN23flkiI4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yeah welcome to my session about health
care for the elderly using the Internet
of Things this is about a little project
that I started in the beginning of this
year and it's still ongoing so it's not
finished yet and it's it's not a product
on end of all it won't be a product and
it's just born out of an idea and other
tell you about the all the experiences
that I have been this building this
stuff and using it because I use it
every day but first of all let me
introduce myself so my name is Gayle
Kumar I'm working as the developer
evangelist for Oracle and on Twitter you
can find me at at hand solo underscore
don't forget the underscore cuz there's
another hand solo and that's not me and
because I'm working for Oracle I have to
show you this slide which just says
Oracle won't build any product on based
on these things that I will show you and
you have to read it and I guess you read
it already so we just go on so last year
I was visiting a friend in Canada and
you know Canada is really beautiful it
looks like this it's really you have all
these farms and lots of area just it's
just great but it also comes with some
problems right so one of the problems
and we also see it here in Germany I
think we see it worldwide is
depopulation
on the countryside so that means the
countryside is less popular to younger
people and usually how it works is
people move to the countryside they have
a farm they start farming then they
become kids the kids grow up they hate
it on the countryside because there is
nothing to do so they when they grow up
they move to the cities right this is
that's usually what happens and then you
can you can think about the result of
that means many old people staying on
the countryside right so the next
problem is
that which is not really a problem but
somehow it is for this kind of things
it's people getting older right it's not
like in I don't know 100 years ago where
people maybe get 70 or something
today people get 80 some people get 90
so and if you get older you have you
have more problems so here's a little
chart that I I found based on data in
Germany and it's from 1995 to 2009 and
you see that it's the population on the
country so it really drops and
population in the congested areas just
increases so people tend to move to the
cities this is let's a trend and it's
for four years and if I would ask you
would you like to go and have a farm and
do stuff I bet most of you would say ah
no not really
so right so this is that's the problem
the next thing is on the countryside and
this is in Germany it's not not that big
problem but in Canada and all this stuff
is based on Canada is it's a really a
big problem because you don't have the
same possibilities to access doctors
right or health care services so in
rural areas you usually have just have
as many doctors as in the cities and you
have to go five times the way to the
doctor if you are on the countryside and
then you can think about people that are
70 to 80 years old and they have to
drive with a car five times as far to
just get to the doctor is a problem all
right and you also have fewer
specialized health care services so that
means on the countryside for the doctors
it's the same oh not that many people
coming to my to my to me and need my
help so it's better if I move to the
city because they have more people and I
can earn more money so this is really
it's a bad situation right and if we
look at the aging I I mentioned that
already this is what you dream of
right this might be your future but most
of the times or more often it's like
this that means peep
alone if they are old kids moving
somewhere and then if you have a couple
then one of those died and then for
example you see a lot of old women in in
some houses and they're living alone for
years
kids are not there this is and you have
to face that right we will get to in
that situation in a couple of years so
it's it's it's not not an easy thing to
think about that but this is what it is
so people are alone and one is in case
of need so if you are in the countryside
you have a farm you're living there
alone and then you fall and you break
your leg so what happens so I and that
was the trigger for me
to start this project because my my
friend he has a farm and he told me are
my neighbors five kilometres away the
next neighbor
I thought five kilometres Wow yeah yeah
and you know a couple of years ago
another neighbor he just died and nobody
ever really figured that out just months
later someone just tried to call him and
how what's wrong and then he drove there
and he found him dead lying on the on
the floor and this is that's terrible
but this happened so and when I saw that
and I hear the story I thought okay now
coming from the technical point of view
maybe we can make use of the Internet of
Things to to help those people in these
situations right and that was the main
idea behind this project and therefore
first of all we need something like
health indicators so we have to figure
out what could be an indication if a
person is in good shape or not so and
it's not that hard to find that out
because steps walk today so simple as it
is it's a really good indication because
if people walking around means they at
least they are not lying in the bed or
just sitting on the couch they are
really doing something so that means
they're in relative good shape if they
walk a certain amount of steps each day
then and of course if you have a
wheelchair you can also you
the rotation of the wheels right as an
indication if the person is moving
around all right so this is because if
you have older people some some of them
sitting in the wheelchair then another
thing is the number of rooms you change
the day that means walking from one room
in the other room and back to the one
room and then to the bathroom to the
kitchen and all that so it could be an
indication of the if you don't have the
steps just see okay this person changed
the rooms in his house for I don't know
200 times a day so let's say and if he
does like this then that means he's
moving around so it couldn't be that bad
right then you can do monitor locations
that the person visits outside like
neighbors right so if the person visit
the neighbor each Tuesday or for example
my my grandma is going to the
supermarket each Tuesday okay so you can
monitor that and and so if this is some
kind of a rule right so if this rule
doesn't doesn't fit anymore because the
person doesn't walk through the
supermarket each Tuesday then something
might be wrong right this is the main
ideas figuring out situations where
something might be wrong with this
person all right this is the idea and we
figured out time that TV set was running
could be an indication right maybe not
in the US because in the u.s. most of
the times TV set is running all the time
but in Germany I tested that with my
grandma and there the TV set was running
around three to four hours each day so
this is something that you can monitor
and then you can figure out you can
create a rule out of that and figure out
okay this drops at some point either the
TV set is broken then you can check the
TV set or something else is wrong right
so it's a trigger and there are many
more right so it's this is just the
stuff we we did and from from this rule
so that you create mm-hmm you have to
create some alerts right something like
a dramatic decrease of steps and then
for longer periods so that means
if I walk today 20,000 steps and
tomorrow just 100 no problem but if I
stay to 100 steps for a week then there
is a problem and something is wrong
right you can figure that out and if the
same goes for the rooms that if they
doesn't change anymore if the number
drops and it keep it stays low and for
example TV set same right if it's not
running at all or if the person is just
not using it and like I said either the
TV set is broken or the person has a
problem then hmm we also have an sorry
an alarm button let you know that this
is available today people can hang it
around their neck and then just press a
button and then it will call or health
care service or something
so we also have something like that so
this is of course an alarm and you
because we can monitor the location then
we can also monitor if the person is
outside or inside and if you have
something like person is outside and
it's during the night and it's cold you
can monitor temperatures mmm there might
be a problem right then
bad weather also if you are on the
countryside you visit your neighbor it's
five kilometres away and you walk back
and it's in the night and it's very
heavy snow and then you see the person
isn't isn't moving anymore might be an
alert right so in all these things we
try to monitor with this project and
there are many more you can you can name
it it's really we just thought about
things that will fit for the farms in
Canada that was the idea so in the end
everything you need to do is data
processing and that means we have first
of all collect the data then we have to
aggregate the data we have to analyze it
and in the end visualize it right and do
something with this so let's start with
the collecting this is the more IOT part
of this project because collecting data
first of all you need some hardware to
collect data right and first thing and
most crucial without the internet you
can forget
project this is as bad as it is but
without internet connection the whole
thing won't work but in Canada that
wasn't a problem we checked that and
they have a good coverage about 95% of
the rural areas where people live they
are really have this 3G connection at
least so this is not a problem in
Germany it's it's also quite good but
like countries like Asia Africa this is
problematic or Russia for example they
don't have a good internet connectivity
outside in the countryside it's it's
really sometimes problematic so we use
ibeacons to locate people inside the
rooms so that means the changing of the
rooms we use ibeacons I will come to
that in a minute what it is and
accelerometers to count the steps and
then we have GPS to locate person
outside and power meter to detect the TV
usage right we can also you could
doesn't use the coffee machine if you
like it's just a power meter that you
can plug between some electrical device
and the power plug and then it will just
measure the power that was drawn by this
device so ibeacons who knows what eye
beacons are someone used it already
just a few mmm I use these eye beings
from blue key but there are thousands of
different ones this have just because a
little bit bigger and they have a really
big battery inside so this thing can run
for three years on one battery which is
rich is great and you have also very
small ones they can run just a couple of
months on a battery but we have to
install these things in the house so
that was the reason I just would like to
do it once every three years it's ok
change the battery mm-hmm so it's a
Bluetooth low-energy device and it just
simply broadcasts a unique ID that's in
principle what it is and you can adjust
the interval of this broadcast and also
the transmission power can be can be
adjusted and with this you can create
something like location-based
right if you enter our room then your
phone for example or whatever device you
have detects the beacon and then you can
do something and it's it's quite useful
for indoor navigation so I saw that this
year at Mobile World Congress in
Barcelona they equipped the whole
conference floor with beacons and then
they gave you a mobile app and then you
can locate you in the conference hall
and then you can say I would like to see
the booth of that company and they
navigate you inside using the beat so
it's it's possible but the accuracy is
within 10 20 meters so it's not really
the like GPS it's not meters it's it's
more tens of meters right mm-hmm so and
this is the setup that we use so we have
for example a floor plan of a house we
place the beacons in each room one
beacon and then if the person just moves
to the room then whatever device it has
then it will detect the signal of the
beacon and then we know ok the person is
now in this room and the problem that
comes with the beings is the tray the
transmission power right if you see each
beacon has a radius of that range where
you can see it and then you have this
overlapping areas here and that's really
bad especially in this point here you
will see all four devices at the same
time so in which room that is the person
right now so what you have to figure out
is how to adjust the transmission power
in the right way so that it really
detects only the room where the person
really is and this is also if you
implement the software for that you have
to do something like if you go into the
in the room and the first time the
beating was detected yeah question
now yeah yeah you can do that but but
the because you can do two things first
of all you can just detect the signal
that's all and then you can start
ranging that means you can detect the
distance to the beam we don't do that
because that draws a battery really we
really just detect the signal and
therefore this is the range the signal
can travel and you can adjust it by just
adjusting the transmission power that's
the idea so and in the software that
we've wrote it's it's really the first
time you detect the beacon we also keep
every beating you see it's the like this
I'm I'm in the living room then the
device knows like the count room was
living room down the next time it sees
for example kitchen then we wait and
until kitchen appears more than once and
see okay no he's really in the kitchen
and then didn't we changed the new
current location to go to the kitchen
yeah so this you have to do but it was
not that hard so with the beings you get
some software you can adjust it very
easily mm-hmm yes so first attempt was
let's build the stuff by yourself all
right why not so it's it's fun so based
on this device which is an old Roy W
which is not available anymore I built
this thing and it was it was smaller
than this one maybe maybe there's a
little box like this size and that was
the last edition with the with this GPS
antenna I also had different GPS
antennas so we built in a GPS sensor and
Bluetooth low-energy adapter to get the
beatings we had an accelerometer inside
and also the whole thing was running on
Java SE 8 embedded it was fun and it
worked for most of the things but it was
too clunky so I couldn't put this thing
to my grandma won't work she was like
well what's that okay forget about it so
it's too obtrusive it you can't really
wear it it's it it's okay as a prototype
and that's it
mmm it was really hard to handle it
because you see it doesn't have any
buttons there was only one button to
switch it on and that's it and there was
no interactivity at all with the device
itself so we needed an addition phone or
something
to do that which doesn't make sense in
battery life for seven to eight hours so
this was just really the first attempt
and then when it was finished we figured
out okay it works but it doesn't make
sense
so hmm we went further to the next tent
that was based on this device and that
was quite nice it's a Kickstarter
project it's called Ottumwa
and fortunately this company was based
in in Canada close to the city where my
friend lives so he he went there and we
talked to the people and they showed it
this showed us this stuff and we bought
two of those and we have accelerometers
inside and Bluetooth Low Energy and
there's a tiny display here you can't
see it and you have to code it in C and
it looked nice in the beginning but in
the end it doesn't really work out so it
it has no GPS and it was really hard to
handle and really not stable and then
there was no interactivity except this
very tiny screen where you can maybe put
one character on or something to make it
readable to elderly people right so kids
can read the small things but even for
me it's like what is it okay so it that
wasn't really good so and the battery
life was a couple of hours so not really
useful so and then at third attempt mmm
and it seems so easy just use the mobile
phone band right so I don't know why we
tried all this stuff before because that
was really maybe because we have when we
started there was this what is it a
google fit you know some of you know
that maybe it's the same as the I think
it's Apple health or something from
Apple they have the same stuff and and
when we started doing this this stuff
was both quite new so and that that kept
us away from using the phone but over
the time it's really now all the stuff
is based on on google fit most of it
because you know they they can collect
their
automatically so you can ask them okay
give me the step so if you're activated
in your phone your phone will collect
steps if you walk so which is really
nuts so first of all we have 3d or 4G
connection which is great then we have
Wi-Fi and Bluetooth Low Energy
so everything's there we have a really
long battery runtime especially with
this phone so it's it's that phone here
it's a Sony and the good thing is that
that the phone is it's a water-resistant
so and that was the main reason it first
of all it's small it the battery it
really runs for two days if you just use
it with the program it runs even longer
than two days and if I would use it for
example with my grandma then this put
the only thing that they use it for us
it's this program running on that phone
right because she's not like like it's
too direct
I have to write some messages or Twitter
or something so that was really nice and
mmm what a resistance e is something
that is in my is really important if I
have to tell my grandma I you know you
can use that phone but be careful with
water right if it gets wet then it's
it's damaged so that was the reason why
we choose the Sony stuff because you can
even put it in the ended bath tube and
then it can stay there for 30 minutes
mmm without getting any damage then with
this we also had the watch you see it
here it's a it's a smart watch it's also
from Sony and when we started we just
use the phone and then we started with
this Android wear stuff and we thought
about okay maybe that makes sense and we
saw the watch which is again
water-resistant which is great so you
can use it in the shower and you don't
have to take it off and it has Wi-Fi and
Bluetooth Low Energy and Wi-Fi is really
interesting feature with the Android
wear stuff and this watch can also count
steps it has a GPS sensor inside and it
has a really long battery runtime which
is important and it interacts with the
phone and the nice thing is it interacts
with the phone even over Wi-Fi over the
cloud so that means I can use the phone
leave it at home and I can use the watch
and if they are both connected to some
internet connection they can talk to
each other so it means if I can trigger
something like an alert call it doesn't
make sense if I have the phone at home
and I'm here but if you have the phone
in your room in the living room
somewhere then you can walk in around in
your house and you don't have to carry
the phone all the time and that that's
really useful because if you just have
the watch then you can maybe convince
older people to wear the watch right
this is that was the main reason why I
really really stayed with with the
Google stuff because with the Apple
things this is not possible as far as I
know then that's really nice and it's
water-resistant so so then the
interesting thing is and we will come to
that in a minute that I can trigger
alarms from the watch even if I don't
have the phone in my pocket if the phone
is maybe in the living room and I'm
somewhere outside close to my home and
still on the wind on the internet then I
can trigger stuff on the phone which way
which is really nice then we use this
flick buttons and you can buy it now I
get them from Kickstarter but I think
since two weeks you can also pre-order
them it's a Bluetooth low-energy device
and it's really just a button you can
press it and then it will send a signal
and the test click double-click and you
have also a long click and you can get
press and released that's the things you
can do and yeah I don't know the battery
will run forever it because it just
sends if you press the button so
otherwise it just stays there and we use
it as as other triggers and you can have
multiple right so you because each of
them has this unique ID so we can have a
trigger in each room for example you can
just push the button and then the phone
will call someone or call for help yeah
we have multiple buttons possible so
that's this approach was really easy to
handle and we have Bluetooth Low Energy
and GPS and we have a long battery life
and the connectivity is not a problem
and interactivity because we use a phone
also not a problem so for the software
mmm that wasn't so easy because we have
to detect GPS location and beacons
that's the easy part we have to interact
with the flick button also not a big
problem aggregating steps you can do it
by yourself but like I said with all
this google fit stuff coming we didn't
have to do it anymore so they do it and
they do a good good job so and the good
thing is to be used to watch and the
phone
both will collect steps and then if you
combine them again then they they will
figure out what is the real the right
value so this is really nice and we have
to call the contact person because I
thought about my grandma it's she calls
for example my mom every day right and
for stuff like oh I forgot where I put
this thing in my kitchen do you know can
you come over so we needed also a
contact person in case of something's
wrong so you have to have one person
that you have to contact them and we
have to publish the data somewhere so
that was the that are the requirements
and we start with the mobile application
and it looks not that fancy because it's
for elderly people and it should be easy
so it's just two big buttons it's just
one button to call help and another
button to really trigger an alert and if
you set it up you set it up with you do
that once with the person the telephone
number and the picture and then it looks
like this right so this is my wife and
then you see the picture and then it's
really easy for them you can just take
the phone press the button and perform
will do the call and on Android we have
this widget stuff and the good thing is
you don't have to even start the
application you can put it directly on
the screen just a widget with a button
like this and then that's all you do
just switch the phone on and then
directly can call a person or trigger an
alert and that is really convenient
alright so this is what I really like a
lot and then we have to set up the
beacons once in the application you do
that once and then that's all you need
to do so that's in principle the mobile
app and it can call a contact person can
send other messages and collect steps
detect beacons and location and then
it's something like because we know if
the person is inside or outside we only
use GPS if we are outside of the house
to really save battery life
and didn't the beaten stuff is really
written by the newer phones and
Bluetooth low-energy
for it's not that not the big problem
with the new phones for example if you
have an galaxy samsung galaxy s4 i've
tested with this phone and as soon as we
used the beatings it draws the battery
like hell on the sony one no problem
anymore so it really depends if you have
a newer phone it's better the older four
phones are not that good so we
implemented also for detection
algorithms so that means if you fall
down usually that's what happens if you
have the g-forces over time and that's
normally around 1g if you fall in the
moment you fall down you get close to
zero g and then if you have the impact
and you have a really increase in the
g-forces and then it goes back to normal
a little bit up and down and then stays
stable again and you can detect that
with the phones so we have that in the
software and if you follow this this
link and there's QR code you will find a
paper that describes in this algorithm
let me use and it also has poster record
recognition that means we know if the
person sitting lying or standing you can
really figure it out from the
accelerometer in the gyroscope and
that's that's quite interesting so that
means if the person has it has the phone
close to the body and it's falling down
we can detect that fall and then we can
trigger an alert if this happens you can
for for example you can do stuff like
the person is falling down and it
doesn't move anymore
that it's a really bad situation if it's
falling down on the person then you see
okay standing up moving again okay
everything is fine but the worst case
would be the person is falling down and
then you don't have movement anymore and
the hit rate is around 85% on that
algorithm it's not the best but it's
good enough right it's easy to implement
okay so the web application that is
running on the watch it's inference I
put a copy of the of the application
that is running on the phone it has just
these few two buttons and they look the
same and they do the same
so it can also send our message collect
the steps and interacts with the phone
by a Bluetooth and Wi-Fi that's the
stuff what I mean if you can leave the
phone for example in the kitchen and
then walk around in your flat or in the
house and if both things are connected
you can you can still trigger an alert
from the watch and what it does if you
trigger the the the phone call for
example it just calls the number and it
switch on the loudspeaker on the phone
so if the for example if my grandma's
falling down in the floor and the phone
is lying in the kitchen then she can
trigger this telephone button and then
it will call for example my mom and it
would switch on the loudspeaker so that
means my mom can hear my my grandma and
then she can they can talk even if the
phone is lying somewhere else that works
for close distances so it's stuff like
that you have to think about but it's
possible and then with the new and the
new our watch faces on on Android where
you also have the ability to have a
watch face that has a button so we can
be implemented this and if you press the
help it will directly call someone in
this case or you can also use it for the
alert it depends all right so stuff like
this makes it really useful so that's
really nice ideas so if we take a look
at the fake button I I mentioned that
already with this we just have for all
buttons the same it's just triggering an
alert so you can put them wherever you
are and as soon as the range of a phone
and you press it then the phone can do
something in this case it will do the
same as if you press the alert button on
the phone on the phone application and
it can interact with the phone via
bluetooth low energy so that means you
have to put it for example you can also
put one in the car that's what I did I
tested the whole thing for for since
June and have one in the car and I'm
only for the location of the car by
having the the the beacon in the car
because as soon as I'm approaching the
car then my application knows oh no I'm
in the car then I'm moving around and as
in
when left the car because I can detect
the position and I see o'the beacon is
not in range anymore then I can save the
position of the beacon of Big Boss and
then so I know where my cars always when
I when I leave it somewhere so this is
the the Yocto wat which is which
measures the power and it's from a
company called York to puce it's a Swiss
company and they really have nice
modules small and for all different
things and you can hook them up to many
devices really nice and this is just BB
pull between the TV set and power plug
and just money to order for consumption
of the of TV set and it can interact
with they also offer something like
little Wi-Fi module and then you if you
attach it to this one then it can send
the signal via Wi-Fi so the mobile phone
or maybe in gateway can directly monitor
this device so this is all the stuff
that we use to collect the data so if
you now we have to a granade it and
there are different ways to do that and
we started with with this thing which is
an IOT gateway and it's it's an ARM
based single board computer and in this
case it's a based on I make six quad one
gigahertz and has four gigs of ram so
it's quite powerful device and we use
Java SE 8 embedded to run the software
on that I'm what it does it acts as a
geofence server so I will come to that
in a minute
and also it a granade data directly from
the power meter and also via mqtt and it
filters the data that comes in and it
forwards data to the cloud or whatever
where wherever you have it and if we
take a look at the geofencing who knows
what geofencing is yeah most of you i
think it's really it's a useful thing so
in principle it works like that you have
a map like this and you receive the
location and then you create some fences
they and they are polygons in all cases
so because we implemented it by
ourselves if you use the features in
Google Maps and and another software
they usually they use the circle or
position but for us that didn't really
work because we would like to do things
like a supermarket and whatever in labor
with a farm so that's how we trigger if
the person approached your neighbor
right we just create geofences around
the next neighbors farm so we know the
person is now at this place and when you
come back home he enters his own home
fence and so we can I created a lot of
fences and at my home town and it's
really interesting if you see that
because if you then trigger oh because I
get get push notifications when I move
with one phone in a fence and I can not
only because we keep the state and
that's the difference so usually with
the fences it's you can say Oh someone
approached the fence but you never can
tell
is he still in or not and we can so that
means we keep the the state of each
fence the fence knows how many people
are in there and they know what when the
people arrived how long they stay there
and when the people leave we also get a
notification so that means the geofence
serve us a little more a little bit more
advanced than the standard stuff so it
really it can react on entering the
fence leaving offense and also you can
create rules like how long does the
person's is in the fence now right it
could be in another so for example if
you have my grandpa he'd like to go in
the woods and just to walk there and
pick up some stuff and if you create a
fence around the woods for example then
you can also say okay he's now for six
hours now and it's pretty cold outside
and it gets dark so you can do something
with this so it's really you can do a
lot of stuff with geo fencing if you
think about it so then we have to
aggregate the data right so this the
this little box that the Gateway it
aggregates data directly from the from
the TV set so that means by a Wi-Fi it
gets the information okay now the TV set
consumes that much power so it's on then
you can start collecting data okay now
it was on for five hours for example
then from the mobile phone via MQTT MQTT
who knows and qtd
it's a it's a binary protocol which is
publish/subscribe model and very popular
in the IOT area and it was invented by
IBM I think ten years ago and in the
meantime it's open source and it's
really for stuff like this it's really
useful and it also gets information from
the geofence server in this case the
defender was running on the Gateway but
we also in the meantime for example the
geofence service in the cloud somewhere
so it's not on this gateway anymore so
it has to filter data and the problem is
with all the sensors you know it's not
always really reliable the data that you
get out of the sensors and you have to
filter it you have to smooth it so with
the TV power for example you have these
peaks in in there so it's not really the
truth and with GPS you know that maybe
sometimes you switch on your phone and
then you are in Hawaii or something and
then whoops it moves somewhere else and
this is stuff you have to filter out to
really get reliable data with the GPS
it's really because the geofencing
depends on the GPS location right and if
the GPS location is wrong then the whole
geofencing doesn't make sense because if
you're at the border of the geofence
then it starts to jump right inside the
fence outside the fence inside the fence
all that things you have to really
figure out these situations and and
filter them out yeah like here it's with
the geofence data so if the GPS location
jumps around then also the geofence data
starts jumping around with inside fans
outside fans inside fans so this is
really stuff you have to you have to
filter and that's not that easy it
really depends on the phone for example
the the iPhone 6 has an really extremely
good GPS receiver and the the Sony phone
is ok it's it's not as good as the SDI
phone so it really depends on the phone
too so it's it's interesting then if we
have all this data collected on the
Gateway we have to forward it somewhere
and what we do we have a that changed a
lot so we started with an application
server based on Java that was sitting
somewhere we host a head head hosted
server and we publish the data by our
rest
to that server in the meantime now it's
still a hosted server now it's not yes
so we don't use Java EE anymore so it's
really it changes a lot but the
principle is still the same so we have
once a day the data will be stored so
with all you can imagine that it might
be sensible sensible data right so if we
monitor the location outside who would
like to be monitored right not not
really a good idea but what we really do
is we just save the data once a day and
we only save the steps and the room
changes and that's it and all the rest
of the data is gone it's just for live
monitoring in principle it's really just
for the system to monitor yourself and
to figure out if there is a problem and
that's all we need the data for at the
moment so this with the steps we do some
analysis and also with the room changes
but I will come to that in a minute so
that was a grenading analyzing and for
analyzing data it's first of all if you
have events then in the beginning of the
when the event occurs it has the highest
relevance right but over time this event
becomes less and less interesting
because it was just one little event but
if you aggregate all the events then
over the time a lot of events become
interesting right so this is that that's
an interesting thing that you have to
keep in mind and what we did we created
the simulation data set of about 5,000
people three months of history five
minute event interval and that was
around 130 million events that we have
and we would like to figure out how can
we monitor that and what can we used to
do and we use spark does someone know
spark Apache spark so we use that for
analyzing data we just started with it a
couple of weeks ago so I don't have a
lot of information about that but it's a
general-purpose cluster computing system
and it started in the Amplatz university
of california and it was open source in
2009 and it's the engine is written in
scala with an api for this then
languages like Scala Java
Python and even ours now available and
this is a core engine that has different
modules and with this modules you can do
stuff like Map Reduce group by full join
all these functions that you can work
that you would like to use on data you
can you have available in in spark and
you can use data from HDFS from
Cassandra SQL you can use data from
streams even from MQTT data streams that
means if we stream the steps as impurity
messages into Sparkman spark and use
this data and aggregated and analyze it
so and in principle this is the
architecture of the of the system so
it's we have the spark core and then we
have the modules for data frames and SQL
streaming machine learning and graph
processing and we use these two
streaming and machine learning where
machine learning is really complex it's
not easy this is where all the rules you
have to create rules for all this stuff
and and figure out the problems because
the ideas the system should monitor you
and then that the system should figure
out yeah you can you can ask a question
show
oh it's not a database spark this is
really a system to analyze data this is
for analyzing it's not for storing data
so you can use this this spark engine to
get data from your database and analyze
it in ways like I will I will show it in
a minute
so like take a look at this 130 million
events and then filter out these stuff
and this stuff and apply this rule and
that rule and then get a result out of
it that's the idea so it's more for data
processing it's not for data storing and
it's it's it's an open source project
and it's quite popular at the moment so
if we bring it together then this is how
it looks like so we have the devices on
the left side we have an mqtt broker and
then they sent the data into the broker
then it goes into this park system the
the mqtt stream and what it does it will
be processed and then we have this
historical baseline data frame and then
we can detect suspicious events and how
that works I will tell you in a second
and normal events just go back to the
historical data and then the spark
system will just use it and this anomaly
detection algorithm that's the
interesting part here because that's the
stuff where we try to figure out if
there is a dramatic situation or a
problem for the for the people so let's
let's assume a person walks usually
4,500 steps which might be a lot for
older people so I don't know if someone
record steps that someone uses them okay
so what is what are the numbers daily
eight to twelve thousand years so it you
can imagine that four thousand five
hundred might be four eighty year old
person that quite a lot but that was
just a guess and then there's another
rule which could be usually a person's
going to the supermarket every Tuesday I
mentioned that already right and stuff
like TV set usage and so on and there
more so if we go to the steps then we
have for each person and this is the
problem the system has to learn because
this is different for each person human
and learning means it takes some time to
figure out the right numbers so we have
an individual baseline right so it
starts in the morning we collect the
steps over the time and then we get this
kind of graph this is just how it could
look like right very ideal case if we
filled with data then this could be a
typical day of this person right so it's
in the range of the normal baseline so
that's okay
so if this if the stream for the day is
like this then in the beginning it's
okay
and then at 2:00 p.m. some somehow steps
are dropping so no steps coming in
anymore so then the system can go to
this kind of we name it attention state
so that wait a minute something might be
wrong just let's take a closer look at
this person now if it doesn't go back to
normal and it stays for two hours then
and it's still low then we know our cone
here is an alert right so that's this is
how it works and then if it's below
normal there and and it's going flat
then we can trigger an order then the
system can really do something that's
what this block system does and we just
tested that at the moment we are just
testing this with this simulated data
set so it's not really on the live data
because we had some problems with the
MQTT stream getting the data into the
system but in with the simulated data
set it works so we are figuring out how
to do this but the system it is capable
of doing stuff like that figuring out
monitoring data and then see okay here's
something wrong do something and the do
something could be call a rest service
or something like this so this is what
we do for the data processing and then
in the end we needed also this
visualizing so therefore we created a
desktop client and the idea was this
could be used by third party healthcare
service or whatever so it was just to
have something to show so it's a it's a
Java client and it shows the last-known
location of the person it shows some
additional information of the person and
of a contact person because if you have
the healthcare service and you get an
ally
from the from your person that you
monitor then you might want to call the
contact person first because it might be
something wrong you might want to go
there please go there or contact your
your grandma or whatever it is and there
might be a problem so this was the idea
of the contact person and it it gets the
data we use server-sent events from the
phone application server and in the
meantime it's not a java application
server I mentioned that it's a note noce
server and this is what it looks like so
it's in front of it what we have is we
had that at the baseline let me see here
we have a little chart that shows the
steps this is the data that's coming
from the database that's all we have in
the database really just the steps for
each day and they will be stored
directly before midnight so just collect
them so you can directly see if you
click on a person here you see a map
with the location you see the steps and
see ok yeah it's it's an ok then we have
the average here it's it's hard to see
then we have data like this little heart
indicates the current status it just
takes data from the last I think 10 days
and compares them to the to the current
state and say ok if it's over average or
average then it's fine
if it's below average for 10 days and
then something is wrong here all right
this is also coming out of the system
and we have here the steps we have the
room changes here is the information of
the contact person like the name the
telephone number then we have also
information about the battery of the
mobile phone because the battery's
running low
my grandma maybe doesn't know how to
charge it or when she took charge it so
the system will also trigger alerts like
batteries running low you have to charge
your phone for example we have weather
information we see here if it's day or
night
we have also something more like if we
have the location we have the geofences
around the person and then you see this
path because what we do we collect all
hospitals in a radius around
I think it's 50 kilometers for each
person and in case you have a problem
you can trace a route to this hospital
closest one and you can send this route
for example to a driver so we get really
the routing information and then we can
send it to into a driver to send him the
route on a mobile application say you
have to go this way from the person to
the hospital to figure out where the
next Hospital how far is it away and
stuff like that how it works when you
have the mobile phone then this is the
person the mobile phone and if now the
person press the alert button you would
see here you have an alert sign coming
up and here and this can only be reset
from this application at the moment so
the person with the phone can't reset it
it can but it's hidden somewhere so to
avoid people pressing alert all the time
right if you have the alert once then
and MQTT make sure that this message
will arrive because they have something
like quality of service and if you send
the message with quality of service -
then it really makes sure this message
arrives at the location so that's the
reason we don't need the ability to have
multiple other triggers so it's one
trigger is enough and then the alert is
in the system and then you can reset it
from here if this is a little button
it's hard to read and if we press that
button and it will reset it on the phone
remotely so that means so we can make
sure that if the person triggers an
alert someone has to reset it on this
system right okay so and at last the
setup of this system is like this we
have the devices and the gateway and
then MQTT broker and then we have this
park system and then we have an
application server you see it gets
complex the visualization it could be
somewhere and then it could also there
could be also be a third party service
that can be triggered so this is the
setup how we started and it's yeah it's
quite complex as you can see you have a
lot of things you have to cover and one
of the worst things was the gateway and
so we decided to simplify because that
was too complex this is how it looked
like in the beginning and the first
thing we we try to do is getting rid of
spark and the application server and put
everything in the cloud
you might know that Amazon came up with
an IOT cloud service Oracle will also
come up with the IOT cloud service that
means cloud services especially for IOT
they come with inbuilt data analysis
capabilities and that will be the first
step that we are working on at the
moment and we could simply simplify even
more if we do this and that's the final
goal of the whole thing is that the
phone directly collects the data from
the from the TV set for example and
phone talks directly to the cloud
service and everything is done in that
cloud service wherever it is it could be
like I said different companies are
working on that attend iBM is also
working on something like an IOT cloud
service and with this setup it's it's
much easier because then you have just
one point to talk to and everything can
be defined in the cloud service and the
conclusion is that after working with
this since the beginning of the year so
the devices are really just too big
mobile phones are like this today and I
would like to see small phones because
you don't need all this stuff I don't
need a phone for web browsing but I need
the Bluetooth low-energy stuff and all
these things right so I need a touch
display but not that size for first for
things like this it should be small and
lightweight then the technology must be
more easy definitely it works if you
have if you know what you are doing it's
easy but you have to set up the system
for each person once and that takes some
time and it's really problematic to
convince people so it I talked to my
grandma and try to convince her and she
was like no I don't want to add that
stuff then okay so maybe if we get older
we are more into technology there might
be not a big problem but today it's
really hard and data privacy and
security I have slides for that but I
have to skip that it's not not the time
this is this is critical right so it's
critical data that you have here and you
have to make sure that this is really
secure in a secure place and this is
something you have to take care of that
and internet access once again this is
on the country side
this is crucial without that the whole
system doesn't work and that's it
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>