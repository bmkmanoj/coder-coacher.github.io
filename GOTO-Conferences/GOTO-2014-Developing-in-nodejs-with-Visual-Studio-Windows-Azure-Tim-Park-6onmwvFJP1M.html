<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2014 • Developing in node.js with Visual Studio &amp; Windows Azure • Tim Park | Coder Coacher - Coaching Coders</title><meta content="GOTO 2014 • Developing in node.js with Visual Studio &amp; Windows Azure • Tim Park - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2014 • Developing in node.js with Visual Studio &amp; Windows Azure • Tim Park</b></h2><h5 class="post__date">2014-08-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6onmwvFJP1M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today I'm going to talk a little bit
about nodejs and javascript in general
on both are our visual studio
development platform and then also on
Microsoft Azure cloud platform and you
know the first question how many people
how many people here have experience
with node or so one of you okay great
that's pretty common it's fairly new
thing and so the first question that you
ask yourself is why why would I do this
why would I switch off of you know Java
or using C sharp or you know any any of
these other platforms that you've been
using and you know kind of the first you
know the first and and and the biggest
reason that people do this is so that
they might already have a team working
on the front-end app the front-end web
app in JavaScript right so you're
building a web add a web front-end and
using know it allows you to use those
same people kind of move them back and
forth right add jali between the front
end in the back end I think this was the
original motivation so Ryan doll was the
guy who started node I think what of his
original motivations were to be able to
have that agility within the team be
able to move people back and forth
between front end and back end as the
project's needs came up another thing
that that node one of the trademarks of
note is that it's asynchronous based or
another way of saying that is more
importantly the most important mental
model to have about node is that it's
single threaded so in contrast to a lot
of the platform web platforms that we
use today asp.net or servlets or
whatever where they're multi-threaded
node runs in a single processor on it
wasn't runnin single process usually too
but also a single thread and so that in
some ways is it makes it easier to
reason about right you don't have
there's not the possibility of these
multiple threads causing causing trouble
with any shared data in the system but
it implies also that you have an
asynchronous model right you can't block
because that would in a single threaded
system would block the entire web web
server and so what instead you do is you
have callbacks so you provide
function so Java is a very first
functions our first class in in in
JavaScript I wouldn't go as far as call
it a functional language but and so a
lot of a lot of the methods of the note
actually take a function that gets
called back when the when that operation
is finished and in this way you could
you can prevent any operation from
blocking the server what happens is it
does something like I oh that that would
you know it does block to to perform the
operation but and node where does it
switches to the next thing that needs a
call back to to that has become ready
and so it's really good for things like
again and it could do that as opposed to
threading can do that very very
efficiently and so it's very good at
things where it require a lot of
concurrency in particular if you're
doing streaming of anything you know
Street video you know whatever node is
devastatingly effective at that because
of that model it basically just switches
back and forth between all these
different these ports sent receiving
your you're sending data out on and n
streams the data to them and it can do
that in a very lightweight model between
those different streams so it's very
good at that use case I owe a use case
that it's very poor at for the single
threaded reason is anything that has to
do with lots of computation and so if
you think about you know pretending you
know here here in Chicago you know
finance is a big thing right if you're
doing a lot of financial calculations on
in your application server node is maybe
not a good good choice floating-point
numbers in general and JavaScript leave
something to be desired so it's probably
a good choice anyway but you know doing
anything we are cranking through a lot
of computation because that doesn't
block it actually won't jump on to
another request and so the entire time
you're doing this this this long
computation you've essentially blocked
the web server so that's an example of
something that's not good at but if you
buy into those or he have a use case
where those things are useful you get
all these kind of these bottom things
you know for free and and these bottom
things are a reason a lot of other
people choose it and probably the best
is that it's has a very vibrant
community around
it I'll show that in another slide but
there's the incredible community it's
because javascript is so well known
across a developer base an incredible
community has sprung up around all the
packages you basically would need to
interact with third-party systems or or
implement something in your application
it's also it's also a cross platform and
a lot of that is driven by the fact that
it's open source so it wasn't initially
it was part of I was built by Joyent
who's another cloud provider but they
had the foresight to open source it
we've added Microsoft has invested in
the platform we actually use it
internally and so we ported it to
windows initially for a project we're
doing at skype but that the positive
part of that is that the Hopi we
released that as you know for the whole
community to have as we were chatting
earlier there's a project called is node
you don't have to use is but the the
thing that makes it possible on Windows
is this container called is node allows
you to run note on windows as well and
so you can use it on whatever server
platform you're using the and that's
fairly abstracted away from you so you
don't have to know much there's not much
difference in terms of the application
model depending if you were on Windows
or on Linux or on sun OS or whatever and
probably the the you know I mentioned
this before we obviously JavaScript has
is up there and i would say i would call
it one of the big four right so Java
JavaScript well maybe five or six you
know c-sharp C++ Python these languages
is just have a tremendous amount of
traction so this is I thinking of the
graph of number of things committed to
github and then a number of packages
that they have available in the
ecosystem and so javascript is really
shot up this chart and that's mostly
because it's ecosystem is growing really
quickly so the red line there is is the
JavaScript ecosystem there's a number of
packages that are available in the
ecosystem the the blue the two blueish
lines there are Java and Ruby in
in you know as the kind of the leading
the leading platforms of right now and
there's number other ones there but
nothing has kind of growth rate of node
and that's led come own why isn't it
going next slide you can do it oh it did
it of course look at the second i hit
xscape maybe that's what needed alright
so that's led you know that's led a
number of fairly high-profile companies
to take on note right so probably the
biggest ones here skype uses it anytime
you make a call on your browser it's
actually using node to to do that to do
that streaming between your browser the
note i'm sorry the skype infrastructure
and then relaying it out to the rest of
the rest of the caller's yahoo uses it
pretty extensively inside of their
operations as does paypal and ebay which
are same company then we use it if
you've ever used as anybody use mobile
services on azure but if you had it
mobile services uses this for the kind
of scripting model behind it so mobile
services is sort of like a parse or
whatever for for making it easy to build
and build mobile web app and so we use
nodejs extensively behind the scenes to
to do this and you know you know because
of that as i mentioned before it's
really a first class citizen of windows
azure microsoft azure our cloud platform
we have a node module allows you to work
against the cloud and node has you know
i would say you know across cloud
providers has very good you know support
client support for being able to use
your application against their against
go there for two different clouds our
client library is open source on github
is developed actually very actively with
community and in fact our command line
tool if you don't use the powershell
version there there's a node command
line tool that we actually use for all
the other platforms so for mac and for
linux and for you know anywhere else you
want to use you know work with with
azure we actually use node to provide
the to run the command line tooling
again because it has
too rich cross-platform support and so
you know the natural progression of this
is we're using a lot of note inside
Microsoft developers are obvious using a
lot of node and so we've decided to add
it to to visual studio and what we're
doing we're taking a slightly different
approach with with node building on you
know the fact that note is an open
source project we actually you know
obviously we took notes written straight
from the open source project added
visual studio and then we've added on a
plugin on top of Visual Studio that's
actually been cooperatively developed
with the community so we've put a number
five to six developers inside Microsoft
on on nodejs tools for for visual studio
we've had a number of really good
community contributions as well Oh is
something odd behaving alright here we
go yeah and so you don't have to have a
license or one of the the premium
editions of nodal studio to run these
tools we have a free installable version
of vision studio called Express web and
that includes everything and you know
you don't lose a bunch of you know
functionality because of that so we have
it has type subscribe support which I'll
talk about a little bit and also has
local and remote debugging of your
nodejs apps and then as I mentioned that
it's an open source project we actually
had two things or actually contributed
so the Edit continued the ability to
change your code and still continue to
bugging without having to restart was
actually from a contribution from a
community member dimitri and then also
mpm which is the node package manager
that integration was actually
contributed to by the community as well
and we're bundling that with it so
visual studio support is more or less
what you'd expect it has intellisense as
syntax how do you people use visual
studio from time to time okay so
basically it's the experience as you
expect now let's just apply to a new a
new know a new programming language
essentially so as intellisense debugging
profiling on the same project system and
as your deployment that you're used to
with C sharp projects same thing comes
to to visual studio you could do this
against as your websites running in the
cloud even if they're running on Linux
has full support for that and you can
download it today it's currently in beta
but it's at nodejs tools codeplex com
and there we have all the documentation
videos etc etc and so that's kind of a
highlighter to highlight the overview
where where where you know where know
what node does where it fits in and and
what kind of support we have in visual
studio I'm going to jump in now and do
some demos for the most of the rest of
the most of the rest of the presentation
cross across a number of things
including our nodejs stuff own and of
course it's not showing up hang on
control panel mirror displays
all right great okay so and no I don't
want to update that all right so the
what I'm going to use is kind of an
example to kind of run through this is a
very simple app I built it and kind of
the new architectural paradigm of the
day which is as a single page app
written in ember Jas that works against
a rest back end and so I'll walk through
that in a little bit of detail but it's
a very simple twitter-like app you know
I can say oops hello go to and you know
adding that adds as a message saves it
in the rest back end and whatnot so
super simple application and so what
this application is doing as an ember
app as I mentioned and essentially it
routes you know the what a single page
app does is it essentially routes
internal to the web page so everything
you have to hash you can really think of
like like the way you've done on the web
server if you haven't encountered this
before and what it does is it works down
to essentially a model of what this
message looks like and so a message in
this very simple system has a time stamp
in a body which was the pillow go to and
this ember app works against a an API
back end I have two of them here I'm
going to show it in the cloud later but
here I'm working against Allah a no JSA
app running in here locally so I'm going
to switch over and show you that since
most a lot of people haven't seen a
node.js app for I've written this
there's a couple of the you know kind of
more complex things in here but we'll
jump over that essentially i'm using a
library called express which is the kind
of the equivalent of asp.net MVC or or
whatnot in the different other
ecosystems but allows you to define a
set of routes and control and
controllers to field those requests and
i'm using that to essentially set up a
very simple set of API endpoint
and so I have a I can feel the post
request to the / messages endpoint and
then it's going to call this create
controller to create a message I can do
a get on all the messages and it'll pull
down an index of all the messages or I
can grab one at a time and so what that
ends up what that looks like then is
essentially what it does is it takes the
message that I post it up to the to the
web service creates a model of it saves
it and then sends it back in the
response so a very very simple rest api
back end i'm using it for this
particular example I'm using the
Mongoose ORM and what Mongoose allows
you to do is allows you to use MongoDB
in your application and so here again is
the time stamps embody I assign a
default if you don't send up a date I'll
assign the current date to it and then
this saves is with a type of string so a
very simple very simple system we can
you know so as expected with you know it
mentioned before if you want to go
through you know if you actually want a
single step through this I can actually
set a breakpoint and then if I go back
to that that web application oops oh
yeah there again and so it's broke into
the debugger here and so you know as
you'd expect as I as I single step
through this I now have a message that
you know that that has this hello again
body into it I can then you know save
the message I can see there was no error
saving the message and and so on and so
as if I was debugging this application I
could go through in single step exactly
the same way if you you know in the
other languages you have in visual
studio and so that's pretty interesting
you know I think it's interesting in the
fact that it's it's it's more or less
exactly what you expect and there's
really not a lot different to it one the
one edition that we have as I mentioned
before is you have the ability in node
you can define dependencies and so if
you've used new get in
in the dotnet ecosystem or maven and
Java you have the ability to find
dependencies and pull those in and so
here I'm pulling in the the Express
framework from the the node ecosystem
and so within visual studio you can
actually you can actually automatically
fetch all of those dependencies without
having to drop the command line what
else all right so we have this
application and now we want to build the
but you know we want to be able to send
it to the community center you want to
deploy it into the cloud and so one of
the great things about Windows Azure it
has actually has a platform of the
service layer called websites and so
what this allows you to do is
essentially use a a git repo is a
destination for deploying your
applications and so I'm going to create
a great really quickly here a what do
they i'm going to do quick create i'm
going to deploy a backend for this
called messages dash be on as your
websites and i'm just going to create
this this website and this will take a
few seconds to to to initialize but
essentially this is building a container
for me that I then can push things too
like this back-end to do essentially
deploy my application and so it's spun
that up so now i have a a fully you know
expose on the internet endpoint for this
application and i can then set up a you
know how i want to push that code to the
to the web site so there's a number of
options here you can use Visual Studio
online you can use a local gift repro
you could have it such that every time
you committed to github or two I think
bit buckets down here somewhere yeah or
codeplex it automatically will watch
those and using a web hook deploy that
code onto your website and so it's great
for kind of continuous integration
scenarios where you automatically deploy
it maybe run some tests against it what
not I'm just gonna use a local git
repository for this and so it's going to
spin up the
is this container and then give me a URL
that i can use with my source control
how people have used get or use it day
to day okay further okay so this is just
to get you know get repo I'm going to
copy that I'm going to go into not that
one but the other one and I'm gonna
actually I forgot to remove my old one
so I'm going to add a new one back in
and basically I'm just adding a remote a
remote repo address for this local repo
called with the URL that it gave me and
then what i can do is this message is
directory is the app that we were
looking at that nodejs app i can just do
get push as your master and it's going
to take the current stay up after my
password of course and then I kicked the
current state of that of that repo and
push it up onto Windows Azure and so it
does is it pushes it up there but then
it also starts to commit or does the NPM
install that you essentially do with
every nodejs app and this is fetching
all that within azure it's fetching all
the dependencies for this application
including express and and the other
dependencies that we define in our
package Jason so it's pulling all that
down and what's the deployment is
complete it'll tell us here obviously in
this but it also tells us here in the in
the web console that we were using to to
manage the website so once that's
complete it'll tell you it's done lots
of stuff to download
wow that's going Oh almost I think
about as well as doing that we mentioned
I also mention that we were using
MongoDB for our application one of the
things that as your has is actually a
store called the azure store and what
I'm going to do here is I'm good
actually going to deploy a mongrel labs
MongoDB instance so Mongo labs provides
hosted MongoDB instances in the cloud so
I'm gonna go do that they have a great
sandbox version allows you to have half
a gig of of of information I'm going to
call that messages Mongo and sure deploy
it in the West wait for this to finish
all right great and so that's spinning
up a MongoDB instance that we can then
use with the with the application I'm
going to check so I finish successfully
if I went to the the website itself
whoops should see that this deployment
is finished successfully and it's active
and one of the features is as you push
these different versions to of your
website you can actually roll back to
the previous versions if something goes
wrong so you're not you know if you if
you you have a rollback you know the
ability to roll back right and a website
if you need to great so let's go back
and I need to grab that going to grab
the connection string for this
and then if I go back to the to the
website I can configure this so that it
can it can connect against it
configuring loads it's it's not usually
so cramped it's uh it's quite a low
resolution but Dad I think you think you
can understand what's going on all right
and so I'm just going to enter this as i
have a MongoDB connection string you
know instead of baking that directly
into my my application like I can pass
it in as an app setting and then I can
apply that so it will restart the
application and provide that as an
environmental variable to the
application so my application knows the
look for that environmental variable and
uses that to connect to the right mom
going to be instance and so if we go all
you know if you go round trip and then
look at the application that we were
looking at the right the beginning I'm
going to change it to use this back-end
now instead of using the local one i'm
going to use the messages be e and if we
go back to the application there's no
applications because we haven't entered
in yet but if we go you know hello asier
you know we've essentially have spun up
this this this locally running
application working against the backend
that we swung up an azure and so you
know i think the the message you get
there is exceptionally easy now to
actually deploy these applications and
actually essentially spin up a
production and you know production level
quality applications very quickly and so
let's say this this application became
very you know very popular one of the
things we have in this in Azure or in
websites is the ability to scale it and
so I was using their I was only using a
single instance that you know it wasn't
very popular at the very beginning but
we have the ability to scale by cpu and
so we can say we want to be able to
scale up to we want at least two for
availability we want maybe a little
scale up to nine and what it will do is
essentially as the CPU goes over 80% on
any one of these instances it'll spin up
another and another until the the the
target CPU is within these bounds and
when it drops down through six to you
let's say it's the middle of the night
it actually
scales down your application to a more
cost-effective number of instances and
so it's very easy effective from a very
effective from from a cost benefit as
well great yes uh-huh yeah yeah so so
since I used I'm going to quit out of
that just to end up spending a ton of
money my credit card if they use MongoDB
you can actually go and use mongos labs
browser so I just click the manage
button on that subscription that I have
and then your junk you jump over with
single sign on over to the account that
you have and here's the so if we go and
look at the messages here's the message
that I just pushed up from that
application so my goal lab has a great
you know if for people that do use you
know tues mono maybe they have a great a
great offering you can do the same thing
if I had to use this we have C clasher
as well which allows you to run sequel
server in the cloud or we also have
another partner clearly be which
provides my sequel in the cloud they all
have you know some sort of
administrative you know Kate min estate
of back-end for working against their
applications great so I thought I would
finish by like by talking you know so
one of the Knox obviously on on
javascript is that the languages is you
know a lot of people describe it has the
English language of the internet and
that's not to say i always say very you
know in a nice way right no english is
sort of a messy language right a lot of
irregular verbs anybody has learned it
as a second language knows that and you
know javascripts a lot like that so one
thing that we've been working on at
microsoft is a language called
typescript and have many people anybody
use typescript before yeah a little bit
okay and so what typescript is is the
goal of typescript it's another open
source project we're working on and the
goal of typescript is too it's the kind
of speed boat some of the standard
features that are coming out a next
version of java script so you can use
them today
and in the process make it make the
experience of building building things
in JavaScript easier and so visual
studio provides a great first you know
first party support for this so if I
wanted to convert this this controller
to use typescript all I need to do is
actually just change the extension on it
to TS and there's a little scary warning
it's really not that scary but now this
is a typescript file and the first thing
to know about typescript is that it's
just JavaScript since a lot of people
haven't used it I'll go through a little
bit about about typescript we have this
great thing called the the typescript
playground and what allows you to do is
just kind of see the type scripts on the
left and then Java scripts on the on the
right and so it shows you how things
convert and so the first thing you note
is that if you just type JavaScript as
into your type script file that you get
typescript out I'm sorry you get
JavaScript out but as you start using
some of these features so let's say you
wanted to use classes and so over here
we've defined a class that works kind of
the way you'd expect with other type
languages you might use typescript will
automatically convert this to use the
prototypical manner that JavaScript uses
to define functions in of functions on
functions in JavaScript and so as part
of you when you use visual studio at
does this for you transparently when you
go to run your application it compiles
the or trans files the the typescript
down to to javascript such as you can
start using some of these features so
classes are something that's coming in
es6 which is the next version of
JavaScript but with typescript you can
use it today it also has support for
doing generics so you know being able to
accept arbitrary types they were all you
know used to from other languages as
well as doing modules so being a i'll
have more modular code it converts that
over to the the mechanism of doing that
in javascript so es5 or deleted target
cs5 for this current version
and so that's kind of the idea it
provides inheritance as well so you know
the canonical animals it turns that into
JavaScript as well and so if we wanted
to do you know we can take advantage of
that by just simply using typescript and
then we could use that in you know for
instance we could I won't do it here we
could convert this this mountain goos
modeled we have into an actual class
that you could use in our application
and the great thing about that is that
as you if you try to use the if you try
to use it incorrectly let me show this
actually I think it actually shows up
here so if I say I want to pass it you
note that this to the snake is defined
to use take a string so one of the
things that type script ads is actual
typed type parameters to to JavaScript
if I start trying to use you know a
number here it'll actually still it'll
flag that as an error doesn't match the
call the call target and that's not what
I was expecting please fix and so you
know you have that you have the full we
have better tooling because of this the
kind of the annotations you're able to
make to your your JavaScript you better
you know the ability to have better in
the moment you know understanding you're
using the code incorrectly great so we
ran through an example of using visual
studio to debug and application as a
development environment we deployed it
to the cloud we used some third-party
tools as a data back end and we talked a
little bit about typescript that's all
the structured content i had but if
you're interested in going into more
detail about any of these any of the
different parts of this I'd be happy to
dig it in more detail
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>