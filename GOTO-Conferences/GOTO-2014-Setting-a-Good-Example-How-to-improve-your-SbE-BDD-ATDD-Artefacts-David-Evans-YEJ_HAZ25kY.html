<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2014 • Setting a Good Example - How to improve your SbE, BDD &amp; ATDD Artefacts • David Evans | Coder Coacher - Coaching Coders</title><meta content="GOTO 2014 • Setting a Good Example - How to improve your SbE, BDD &amp; ATDD Artefacts • David Evans - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2014 • Setting a Good Example - How to improve your SbE, BDD &amp; ATDD Artefacts • David Evans</b></h2><h5 class="post__date">2014-10-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YEJ_HAZ25kY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you very much it's a great
pleasure to be here I hope you're going
to enjoy this conference I got to be a
seer a preview of a lot of what you're
going to see at the recent event in
Copenhagen and there's some fantastic
talks on so you're in for a treat in
recognition of that I'm going to crack
straight on because I know that I'm
competing with some very high-quality
alternatives so if you were sort of
IMing and erring about which session to
take what I thought I would do is set
out exactly what I'm going to cover in
this talk so that we have a fairly clear
understanding about what you're going to
get if it turns out that from this
little precis you don't think this is
the right talk for you and you can sort
of quietly leave I won't take any
offence and hopefully the people that
are left in the room will will get the
right to talk for them so the catchy
part of this talk is the setting a good
example but the real title if you like
is that subtitle it's about improving
your SP bdd and 1880 artefacts I'm just
gonna unpack that sentence so that we
know exactly what we mean by that so by
improving I'm essentially talking about
increasing the value primarily through
extending the useful life of the things
we create I think one of the key
problems with mistakes people make is
that they're creating artifacts and
tests almost as a as a one-off you know
once we get to the story implemented
then we're done and we don't care too
much about it that's a syndrome I want
to change what about this alphabet soup
while I'm assuming that you know what
most of these things stand for but just
to give you a fighting chance SB stands
for specification by example beat it is
behavior driven development at 18 it is
acceptance test-driven development we
don't have time today to sort of talk
about what is the subtle differences
between all those things for the
purposes of this talk I'm treating them
all the same that is they all have
sufficient overlap in terms of what they
are as processes and the advice I'm
giving you today applies to all of these
whatever term you're applying to what
you're using and the far apart of the
artifacts now some people think this
might be an odd word to choose people
say well you are talking about tests
aren't you well you'll see as I get into
this tour
there's a very specific reason why I try
to avoid the word tests I've chosen
artifacts it might not be the most ideal
term but it's not bad actually artifact
comes from the Latin arte factum it
means made with skill and that's the
important thing that I want to encourage
is that people think carefully and apply
good skill when they're creating these
things now I know people tend to think
well artifacts tend to be used in a
archaeological context they tend to be
old things that are dug up out of the
earth well what makes those things
interesting to archaeologists is not the
fact they're old but there are evidence
of skilful civilizations in the areas
that they've been exploring so in our
context though artifacts means if you're
using something like cucumber or speck
flow it's your feature files and your
scenarios if you're using things like
Fitness it's your fitness pages and test
tables but it's really anything any
framework any tool that supports the
idea of executable specifications but in
addition to that it also applies to
cases that you don't necessarily
automate so those discussions about good
examples that you might have at a
whiteboard those those count as valuable
artifacts as well
final point as I say the artefactum is
the the Latin origin of artifact which
is why this is the correct spelling in
case you're wondering it's only the
Americans that tend to use the IEEE
spelling where I means incorrect um how
am I going to go about this well
primarily I'm going to and identify the
common mistakes that I've seen teams use
when they're starting out down these
processes I'm also going to share some
of my tips for improving the style of
the things that you create we'll take a
look at some real examples that we've
discovered on our consulting travels and
I'll give you sort of five key takeaways
or points to highlight along the way
also in recognition that I know that the
way people tend to take notes and
conferences these days is just a
photograph slides they're interested in
you may have seen already that I'm not
using PowerPoint or keynote I'm using
Prezi which is this sort of zoomy thing
that goes all around the place in
recognition of that you might not know
what is the
right place to take a pictures so I put
a little camera icon in the corner of
the spots where I think that might be a
good summary of stuff to take a photo if
you wish to and I'll pause there that
will give me a chance to take a slug of
water as well okay so let's crack
straight on it's not an introductory
talk okay so I'm not going to explain
what SB and BDD are I'm assuming that
you already know that but just to sort
of frame the rest of this this is kind
of the one-pager
of certainly that the principle behind
specification by example it starts with
a sort of general truism that good
examples help us understand the general
rule in whatever context we might be
talking about in the context of software
development
well requirements are a type of rule and
tests are a kind of example and this
little triangle we have in the in the
middle is about the relationship between
each of those items so examples that is
good cases that we might discuss when
trying to understand a particular story
or a particular requirement help us to
clarify that case it helped us to
understand the details of what we mean
by the thing required and if we've
expressed those examples in sufficient
detail if we express them at the right
level of abstraction if we understand
the correctness of the relationships
within that example then those same
examples can serve as tests that can
ultimately verify that we've implemented
those requirements quite correctly so
that's really SB in a nutshell so
specification by example you start with
examples to specify the work you need to
do I'm sure many of you have seen the
the Pixar film up I have and I enjoy it
and my kids enjoy there's two main
protagonists in this film it's Carl and
Ellie and towards the beginning of the
film as is rather sweet scene where they
it's it's you know flashes back in time
to when they're both six-year-old kids
and Ellie is explaining to Carl that
she's got these great plans for you know
having adventures when she grows up
she's going to go to this exotic place
called South America and the way she
explains to the six-year-old Carl what
south america is is in these sort of
slightly hushed tone she says South
America it's like America but south now
one of the problems I see with
acceptance test-driven development day
and so forth people treat it as a new
thing but they come to it from the
context of something they already know
which is TDD most people are familiar
with TDD and then they sort of start to
branch out into this this other thing
like a TDD and I'm afraid the level of
explanation of what a TD is tends to be
fairly similar to the explanation that
Ellie gave Carl and I think that leads
to a lot of dysfunction about what it is
that we're creating in that process in
particular it leads to this
dysfunctional thought that really the
thing that we're just creating is just a
test and that's why I said really what
I'm trying to talk about is artifacts
okay there's the the purpose that we or
the role that these things serve need to
be more than just test the trouble is if
we think of what we're creating when
we're driving a process as just a test
is the word test carries quite a lot of
baggage for a lot of people especially
because in the context of TDD we've
talked about unit tests that's fine most
developers have a fairly clear
understanding what they mean by a unit
test but when we're talking about a
process where we're encouraging product
owners or other business stakeholders to
be writing tests those people don't
necessarily have a similar framework of
what a test is or what a test should be
what it should look like so it leads to
syndromes a bit like this one it's it's
a pretty intense thing to read that I
don't expect you to have to go through
that but the context here was that I was
working with an organization that had
just started out there on a a BDD route
and I asked to take a look at one of the
early feature files that they've created
and this is one that they showed me and
it's this sort of long very very
difficult to understand thing with a lot
of Givens and Wen's and then so it's got
it's got
gherkin ish kind of sound to it but it's
it's essentially trying to pick this
long journey through one of these
questionnaires he might fill out for
insurance so if you know that if you've
ever had to insure your car online or
something like that you know that you
get asked various questions that try to
ascertain your risk and based on your
answers to all those questions you get
some kind of policy quotation given to
you now you can imagine if your insuring
a business then it's a much more
complicated process there's a lot more
questions to ask and so the the logic of
how this questionnaire unfolds is really
quite complicated the answers you give
on page one will change the questions
that appear on page two and so forth and
so there's a long process to go through
and this is sort of picking a path
through that so scenario one just tells
us you know one long path through that
there's another scenario helpfully
titled scenario two that sort of goes
off down another path and so you might
be thinking you know you have this
similar reaction in me you know what a
failing test is all this the development
team that produced this sort of I think
got a little bit defensive and said well
you know hang on that's it's it's it's
got the gherkins you know it's got all
my Givens wins and ends it's it's not
unit test which doesn't refer to any
technical terms or implementation
details and then they've felt very proud
they said well and besides you know why
should why should you criticize this
because we didn't write this our product
then I wrote this so it was kind of a
you know take that mr. consultant off
you go now I happen to know that the
product owner of this team was a very
very capable and good product owner she
was ideally suited for the wrong she was
an expert in her field she knew the
product very well she knew the business
very well she was an intelligent woman
and she was very keen to sort of apply
any new techniques that would help the
team be more effective so I was a little
bit surprised to hear that this might
have been something that she would have
spent time creating so I figured I need
to understand the story behind this
so wouldn't smoke - and I said well
literally what is the story and it was
something along these lines it says she
said oh yeah that well it's fairly
straightforward
it's just that six of the questions in
our questionnaire database they needed
slight you know rewording because the
lawyers had gone over and they said we
just need to change the wordings of some
of these things and she had her own sort
of internal codes to identify these
things so these things the bottom meant
something to her
so as a little aside there if it if
that's the nature of what your story is
and you're attempting to apply bt deals
SBE to this that's probably not a good
place to start a simple change like
adjusting the values of text rings
doesn't really warrant the need for
specification workshops and so forth I
would suggest in this case if you change
your text rings don't use SPE don't use
BDD use JFDI let's assume however that
this was an important or high-risk thing
that it did need to be clearly specified
we did need to get out the the specific
examples that would support it you know
what would we need so I asked her well
do you have some kind of list of what
the question text values are associated
with each of these IDs Suzy oh yeah I've
got my master spreadsheet of all that
and she produced this extract for me she
said well these are the six things need
to change and these are the values they
need to be and for completeness sake the
right-hand side this is the what the
text reads at the moment I said ah
perfect we've we've got it in one this
is your specification this is the thing
that you need to give to the team such
that they can drive their implementation
and job done and she looked at me as if
as if it's gibberish as well of course
that's the first thing I gave them but
they said we're doing this thing called
BDD and they wouldn't write a line of
code until I have given them an
acceptance test and hence the result was
that great big long script
so I felt well somebody needed to be
knocked around the head a little bit
here but let's just focus on what's the
what's the lesson of this and it is
point number one is that when we're
talking about a specification for
something we need to change yes we want
that specification to be testable but
don't think of it as a test because what
we're trying to do is that we're trying
to specify what it is that needs to be
tested we're not trying to specify how
we'd go about testing it so in her world
she had no sense of what would be the
acceptance test as far as his product
owner was concerned she said well how
would I acceptance test this change well
I'd have to go and see that the actual
you know wordings of those sensors came
up as I expected where they appear in
the questionnaire but in order to you
know get question number six to appear I
need to know what path I need to go
through so she knew the right sequence
of answers she needed to give in order
to make this thing appear but that's not
what we're testing
none of that logic was changing so if
you could bypass that and just say can
we guarantee this is what the texturing
is given this index is at the right
value that's sufficient in other words
we need to sort of leave behind the
mechanism by which we test because
that's something we can refactor we can
always change the method by which we
test what we're not changing is the
thing we're testing so focus on the what
not on the how so let's go back to this
what I said was the the fallacious
position of believing that the thing
we're creating is just a test well it's
clearly more than just a test and it's
more than just a test because it's it
has sort of three important phases in
its lifecycle so there's what is it to
us now I when we're first discussing a
story that we've yet to implement it
what will it be soon and what does it
become later on after we've done the job
well the first role is that it's the
specification now it's the specification
when we do haven't yet done the
implementation and what we need is a
collective or shared understanding of
what is the change we made and how would
we know we are done
it serves then as a test and after we've
implemented ideally as soon as we've
implemented because we've wired up those
tests automatically and we get fast
feedback that what we did or what we
intended is in fact what we did but this
third role is arguably the most
important I think this is the key to
succeeding with SPE BDD and so forth is
to think of the long term rather than
just thinking it's a means to an end it
gets a story marked as done and then we
don't need to care about it thereafter
the thing that creates should live on as
documentation of the choices you've made
it should be a good description of the
behavior of this particular part of the
system collectively when you put all
these artifacts together you should be
having a nice sort of browsable coherent
set of living system documentation about
what your system is capable of and how
it behaves so thinking ahead to that
long-term role of documentation is
really the key to getting the structure
of your artifacts right when you first
create them now there is a related idea
to this which is about what is the the
short-term versus the long-term
equivalents of some of these things that
we create in our agile processes and for
each you know these these things are
horizontally aligned so the things on
the left are typically short-lived
they're typically a means to an end the
things on the right are the the the
long-lived equivalent of them so a story
itself is really just a scheduling token
if you like it represents what is the
change we intend to make and its primary
purpose is to you know be the the the
promise to hold the conversation about
what we do but also it gets us to a safe
implementation from that point what we
need is the the specification of we are
what are the impact or the effect of
that change so the story is about what
change we need to make specifications
about what is the effect of that change
and similarly a story has acceptance
criteria we need to be able to have our
checklist of how do we know we're done
on that that may or may don't include
automated acceptance tests as part of
that acceptance criteria the automated
acceptance tests live on they become
regression tests that they they are
permanent parts of our at our system
infrastructure
or a quality infrastructure from there
on and certainly the actual physical
artifacts if you like the cards on your
wall or the the items in JIRA those can
be torn up those can be archived but
what you want as a result is to capture
the essence of what the results of the
discussions you had the outcomes of
those conversation that that survivors
documentation that needs to be cared for
that needs to be groomed your you're
creating living documentation out of
that with a view to making that return
value to you over the long term now in
these three roles of specification now
test soon and documentation later we
need to be conscious that we're trying
to create one item that serves all of
those roles but in those roles there are
competing forces at play and the way I
characterize this is that they they're
sort of you know we're trying to find
the right trade-off between how we serve
each of these roles so specification
needs to be concise tests needs to be
complete documentation needs to be
caring I'm going to zoom into each of
those in turn so the key to a
specification is in in the name it wants
to be specific so conciseness about
being focused on what is the exact
change that we need to make you know
what is it that's different about this
what behavior is relevant to this
particular topic that's where we get the
most value from and we lose value if we
sort of start to introduce too many
related but not direct consequences of
this particular change so we have a
tendency to want as little extraneous
detail in our specification as possible
now that force competes with the testing
role because it's a common syndrome that
in a test you'll hear people object to
saying well it's not sufficient just to
test that path it's not sufficient just
to test that the change you've required
is made I need
test that there aren't negative
consequences of that so I do need to
test around the edges of that change I
need to sort of regression test other
things that you know might have been
changed even though we don't think
they're related there's always a risk
that I've you know pulled in some some
strange bug along here so the the phrase
I tend to use is that that's the the
footprint of the test tends to be larger
than the footprint of the change that is
the scope of what we think is valid to
include in a test sort of naturally
tends to bring in a little more around
the the core of what this change is so
we need to be conscious of that that
competition between the conciseness
force for the specification and the
completeness force for the test and
maybe the documentation forces the thing
that unites that we want coherence in
the the description that we've created
of what this change was what this new
behavior is that's in our system and
that's where we perhaps find a balance
because we find that we're going to need
to provide enough context after the fact
to understand what are the details that
we're just specifying here you know
would this stand up as documentation of
particular part of our system many
months after the actual conversations in
which we made this change so we need to
be aware of that we we like face to face
conversations we like to be able to
short now cycle time between the need
being identified and the implementation
being done that's all well and good but
the trouble is that change now is part
of our system and when we need to
perhaps revisit that area later we want
to be able to go to some reliable
documentation that makes it clear what
the current behavior is so the the the
answer needs to be self-explanatory the
other point here is that it's the level
of detail that we express in
documentation isn't flat it isn't sort
of consistent a lot of people say well
you know unit tests are about - the code
level design issues acceptance test
should be about user interface issues no
I don't I don't agree with that I think
there are certain things that a customer
cares about at an end to end or a UI
level but a lot of business rules can be
completely devoid of the actual UI by
which we interface with them
it's where is the core of your system
where is the heart of the risk in your
system that will be where you want a
much greater level of detail in your
documentation because that's where the
the value lies that's where your
business stakeholders care that you've
got it right so be prepared that you'll
have some acceptance tests that will be
quite low level quite specific quite
quite detailed others that are quite
broad okay so having considered the
forces now let's look at the qualities
that we expect to see in these artifacts
and there's again there's three involved
here we're looking for the appropriate
overlap or the appropriate intersection
of each of these three qualities
first of all we'll look at is balance
and come in to another example here this
one actually turned up in an early
version of the fitness documentation and
we say people who ought to have known
known better about how to give a good
specification so it's the features
described as payroll and the scenario is
a simple acceptance test for payroll so
again much a little bit clearer and more
terse than the first example I showed
again it's got the given when then in
this case we're given a set of employees
there's a little bit of data for them
the when that we're testing here is
running the payroll so when we run the
payroll and the expectation the then all
checks printed correctly there's perhaps
of sub-clause everyone lives happily
ever after so the issue here is I hope
fairly obvious that whilst you can't
sort of argue with the intention of the
test the way in which is done is really
not particularly useful because
somebody's had to do an implementation
of the phrase all checks are printed
correctly so their choice or their their
determination of whether that returns
true or false is entirely hidden from us
it's entirely up to the person that's
made that implementation furthermore it
begs the question well is it dependent
on that data that's in the given you'd
have to assume so if it's if they'd
bother to put that in the test at all
but that means I could change my name's
there from Jeff Smith to
Jane Smith well is that going to make
the test fail what's what's magical
about that data so it's problematic on
all sorts of levels in particular it
sort of violates the problem of it's got
a mismatch of the level of abstraction
between my Givens and the VINs so the
tip here is look out for your Givens
that are irrelevant to the VINs
everything that's let's mention the
given should in some way directly and
impact an expected result you would see
in the ven an and hence as tip on the
right-hand side keep the level of
abstraction the same there is also
another sense in which we want our
artifacts to be balanced there and this
is this phrase of we want hourglass
shaped scenarios and this is just a
simple tip that says that the the
grammar of any gherkin supporting tool
allows you to say well given a and B and
C when D and E and F then XY and Z but
whilst you're allowed to do that it's
not good practice to do that the wind
should really about the thing that
you're actually testing so I like the
wind to always be a single phrase don't
say when this and this and this because
that's that's a bunch of things together
probably some of those clauses in that
are really about setting up Givens or
preconditions so it's okay to have you
know given a and B and C keep a single
when had multiple bins if necessary and
hence your result in a an hourglass
shape scenario all right the next point
is about focus and here's arguably the
the worst of the examples that we'll
we'll see so this this is a is a fairly
obscure type of test but let's let's
just bear with us and try to figure out
what's going on now as you saw with some
of the previous examples the the role of
this artifact perhaps being used as
documentation I think it fails at the
first hurdle there we've
not taking any opportunity to put some
meaningful explanation as to what this
this specification has tried to show
we've got very brief descriptions here
the feature is called statement and the
scenario is called weekly statement we
have no other explanation of what the
business rules are so we need to almost
reverse-engineer those out of this this
test so what have we got well in our
first Givens we're creating some account
so we're saying given the following
accounts now notice that there's a whole
lot in there so we got three accounts
that all seem to be identical they all
got the same name or all got the same
type credit limit balance and status and
we don't therefore don't have any
explanation of why we need those things
but we can see that we're also setting
up a user in this case it happens over a
number 187 but it's got a relationship
to an account of number one so we
figured out okay well at least we've got
perhaps we need that account because we
need to give that to user number 187
because down here in the win we're
talking about executing a statement for
player 187 now another alarm bell goes
there why we referred to a user in one
area and a player in another are they
the same thing
are they interchangeable if so use the
same terms go for a ubiquitous language
so anyway it's there it looks like we're
saying okay we need to create a
statement for player 187 and because in
our transactions that we've set up as
part of our Givens we've got a
transaction that number one that's
associated with account number one
therefore we expect transaction number
one to be in player one 8/7 list okay
fair enough by the same process
transaction four is also account number
one therefore it appears in the venn and
number seven again also account number
one we see seven down the bottom so ok
having having squinted at this for a
while and seen that relationship we can
sort of as a reverse engineer a business
rule out of this which would probably be
expressed something like when you make
it when you request a statement for a
player you only get to see the
transactions for that player's account
not for other accounts not a
particularly groundbreaking rule it's
very unlikely that an implementation
team is going to not get that rule or
not understand that that might be the
way this this players statement should
look and so what about you know so
having highlighted the bits that perhaps
are relevant to that that rule or that
part of the test what's all this other
stuff here what's going on with all this
repeated data there well you can sort of
imagine somebody who's implemented this
or created this saying well yeah in
order to prove that I'm only getting the
transactions for this player I needed to
have an account for that player and I
need to have some transactions for other
accounts that didn't belong to that
player therefore I needed to set up some
accounts and an hour system when you
create an account there's all these
mandatory fields you need to have a name
you need ever type you need a credit
limit balance and so forth but those
things aren't anything to do with this
test so what we've got here is the the
the artifact is the victim of the fact
that we've got a very generic process
perhaps for building these these items
like transactions and it counts so it's
that I'm sure you're all familiar with
the phrase of Shaving the yak so someone
has tried to you know create a an
assertion about transactions belonging
to particular accounts and what appears
and what doesn't in order to do that
they've had to sort of do all these
other irrelevant things that are in the
way of actually getting to that point so
really all that stuff in our spec is
just yak hair it's just things we needed
to do in order to get the actual
important thing done but in the process
it's getting in the way it's it's it's
it's just noise in our specification and
the same goes for all these other things
yeah the dead giveaway is anything
that's very repetitive so well okay that
the stuff to do with the account all we
need it was a relationship between an
account number and a user ID so all this
other stuff on the account we don't
particularly care about that we don't
care about all this repeated stuff on
the transact
again maybe somebody would say well yeah
but you ought to prove that in the
statement you see the same values that
you saw in the original transaction well
okay I'll buy that that's a fair enough
thing to check but this isn't check it
because we've made all those things the
same so I don't know whether I'm
actually seeing the details of
transaction one or the transactions of
detail four because in this test they're
exactly the same I certainly don't need
whatever that comment that column on the
right-hand side is about and therefore I
don't need all this stuff in the dens
now the only things that I've left not
blocked out here are the dates because
surely we know if the the one shred of
evidence we have as to what this thing
is about comes from the name weekly
statement then there probably is some
date processing that's that's up for
grabs here there probably is something
we need to check about the way dates
behave and we know that we've asked for
this statement on the 7th of January so
you would think okay if it is a weekly
statement then we probably want to only
see transactions in the seven days up to
and including the seventh of January
which is fine the me in the results it
does our earliest one there is the first
in our latest one there is the seventh
but of course we would we've got a
dreadful missed opportunity because
there is no counter example nowhere in
our source data is there a date that's
earlier than seven days old and there's
no date data that's after the seventh it
would have been a much more informative
proof that that weekly statement does
restrict to a date range if we had
examples of transactions for that
account earlier than that date and later
than the statement date so as I say the
one thing that this test could have
usefully proven it doesn't so most of
this is pretty useless so what we're
trying to do is have each specification
have each artifact express a rule it
should be it should be clear about what
it's trying to show this particular
example was strongly suggesting that it
was created after the fact and somebody
said okay well I've got a basic
framework here I can probably construct
a test that shows some of these things
but you wouldn't have had any of that
extraneous detail if you were specifying
this up front so what's the tip here
well I always like to start with the ven
start with the expectation so think what
is the thing that I'm trying to change
what is that the what is unique about
what it creates express that as a ven
statement or set of clauses and think
okay what are all the Givens I need to
actually generate the sort of
exemplified in the then simile if you're
using Fitness think about your right
hand columns what are the output columns
what combinations of data can I expect
to see there and then fill in your
inputs to to get to those outputs and
the third quality that I want us to
espouse to is is that of contrast so
let's look at another example here so a
little bit similar to the very first one
we saw it's very user interface yes very
very cliquey type II push button e in
its expression and look at the structure
well given when and then and then and
then and then and it's all sorts of
things to do with some kind of shopping
carts or look-alikes to do with buying
music concert tickets or something like
that very hard to sort of even imagine
what the route is you have to sort of
read it several times to try and work
out what is the flow going on but then
there's a sort of little magical thing
that pops out at the end of oh and I get
a 10% discount now again because the the
slimmin clue I have is that the scenario
is called bonus discount maybe that 10%
is important but again where's my rule
how on earth do I know what in that
sequence of events has led to a 10%
discount under what circumstances do I
get a different kind of discount or no
discount at all none of these things are
evident we left guessing as to which of
these steps and are relevant to leading
to that discount so we can't we can't
infer the rule because we only have a
single path a single example and of
course the worst thing is that it's it's
run as a
a script it's very coupled to the user
interface so anyone who's done any kind
of study of evolution is sure to be
familiar with the case of the pepper
moths so although it's little bit grainy
there's two pictures of pepper moths on
I think ash trees in the UK so a black
variety of the pepper moth on the left
and a white variety that pepper moth on
the right and the the the pepper moth is
the more common variety though the white
one it's evolved to be camouflaged
against the white lichen that would grow
on the ash trees of of England and you
can see that there is actually both a
black and a white moth in both pictures
we can see the black one if we look
carefully there and even more cunningly
disguised there's a white moth hiding on
the lichen there so you can see very
well adapted to being disguised on the
white lichen of course the problem is
the English Industrial Revolution
arrives and the dark satanic Mills are
spewing out all sorts of coal smoke the
lichen dies off the trees go black the
otherwise well hidden white moths now
stand out stand out like a good meal to
a bird on the dark trees and the black
moths
are now a little better disguise in the
hints we had this radical shift in the
population of the wipe em off versus the
black pepper off as a result of that why
am i showing this well because it's the
same thing we can't see the moth if it's
the same as its background if we haven't
got a contrast then we can't see the
outline of what's there so we only see
the moths by virtue of being able to see
the background as well as the foreground
so that's what we were missing in that
previous test about the bonus discount
is we perhaps showed a case where a
discount applies but we can't see the
ground around it we can't see what else
leads to not getting the discount
we need both examples some people might
call these the the happy path of your
light and we need counter examples and
the two go hand-in-hand you you really
only get a complete outline of your
scope if you've got both so let's took a
look at what meet what might be a better
example of that so not exactly the same
as bonus discount but the same sort of
realm so here we're talking about when
might we apply free delivery on a
shopping cart and here just look at the
basic structure we've got a title that's
what this feature is about free delivery
it's the kind of phrase you might type
into Google to sort of understand that
part of your application and we've got
you know in this case just a paragraph
or two of explanatory text that in plain
language tells us what is the rule that
we're expressing here you know so you
can imagine this sits quite nicely as
documentation but the very same thing
could have been a nice spec that we
could have you know handed from product
owner to developers all collaboratively
created to say yeah okay that's a good
expression now we understand what this
is and it's supported by examples now
the first row in this fitness style test
here is arguably the only positive or
the only happy path case it's an example
that shows getting free delivery
so the VIP customer is ordering five
books therefore they get their delivery
as is free and then the other four cases
are all counter examples they're all
just slight variations on that situation
but where you don't get the free
delivery so we're drawing a nice neat
you know line around the possibilities
by varying one of our variables at a
time to show that yes each one of those
things matters in determining free
delivery or not hence a VIP customer
whose orders less than five books
doesn't get free delivery a non VIP
customer ordering five books doesn't a
regular sorry a VIP customer who's
ordering something other than books this
is a you know good example of where at
estimate I said well yeah okay books are
fine but what if they're ordering you
know white goods from our outside are
you really gonna offer free delivery on
five washing machines and what about if
I've got the five books but I also snuck
in a washing machine do I still
that for free yeah so good questions
that a tester would be able to ask and a
product owner should be able to give a
definitive answer to that and that
becomes a nice set of examples that
specifies the rule so we're looking for
the intersection of focus balance and
contrast okay I'm going to pop in a
little caveat here or a little warning
because I do get it often at this stage
when when people say well okay you're
expecting quite a lot out of our test we
generally don't put that much effort in
and it seems that if we you know want to
do all this fancier you know - gold
testing that's going to slow down our
development process especially if we're
doing this upfront and I so I get this
kind of argument a lot from say
development managers typically and I end
up having to concede that yes in a
fairly limited sense doing these tests
with care upfront is going to slow down
development but only in the same way
that stopping for passengers slows down
the public bus so be careful of what it
is that you measure all you believe is
your metric of productivity it's
certainly not the speed of the bus when
we're talking about public transport and
similarly this is this is you know this
is not the point of writing code is
producing lines of code faster Kent Beck
has a nice phrase that says code that
isn't tested doesn't work this seems to
be the safe assumption I think that's a
beautiful phrasing so if anything
stopping to do these tests well is the
only thing that's slowing down is the
amount of not working code we're
producing them maybe that is something
needs to be slowed down so yes you can
sort of imagine the the bus driver
arguing that well you know I noticed the
old people are the slowest to get on my
bus you know I think my my I could
optimize my process if I didn't stop for
the old people and you know the
iteration - is well that worked I'm not
going to stop for anyone the next time
and see if that gets my numbers up and
so then the next guy says well yeah you
don't even have to stop at the bus stop
you can just sort of cruise straight on
by
and then next thing you know well we
don't need to take this odd zigzagging
route across town we can go straight on
the freeway we'll be back in the depot
by 11:00 so optimizing the speed of the
bus beware of arguments against sort of
doing some of this work because we're
trying were worried about slowing down
code ask the question are you really
measuring the speed of the bus and
coming towards the end I just want to
leave you with a little story about when
my my father was an early adopter of
alternative sources of energy he was
this is at the time of the oil crises of
the 1970s and I was a young kid and I
remember quite distinctly my dad telling
me that the somewhat shocking news that
all this petrol we put in our cars was
eventually going to run out there was a
limited supply and once it's gone it's
gone and that's why he was interested in
other sources of energy I thought it was
pretty shocking and of course I said
well how long have we got before it runs
out and he said about 30 years and of
course to a seven-year-old kid that's
suddenly you thinking well ok I'm not
gonna worry about that that's four
lifetimes away you know it's after the
year 2000 I'll been riding in my jet
pack and and of course time went by I
perhaps didn't pay as much heed to my
father's warnings as I should have I
became a little more a green oriented in
my older age but I did sort of wonder
what happened to that prediction about
30 years as far as I was concerned that
that that that deadline had passed so my
brother-in-law works in the oil
exploration industry I thought if
anyone's gonna know he'll know so I
asked Richard I say rich the the oil how
long have we got before it all runs out
well probably about thirty years I'm
thinking hurricane it sounds a bit
suspicious is there is there a note
somewhere on OPEC this is if anyone asks
about the oil say 30 years and I sorry
Raquel that recalled the story I said
well that was kind of the same figure
that my dad gave back in the 70s we
really found that much more oil he says
well that's sort of right but it's in
general the these things are based on
geological models of the world and those
models have been relatively consistent
we get slightly more sophisticated about
knowing
what's where and how deep but overall
it's been static so what accounts for
the difference in the in the duration
well it's because the oil isn't sitting
there in a great big tank a few feet
below the surface just waiting for us to
turn the tap on oil cost money to get
out of the ground and when you consider
that for about a hundred years leading
up to 1975 I think it was that the the
inflation adjusted price of a barrel of
oil was five US dollars then anything
that's cost you less than five dollars a
barrel to go around is you know there
for the picking something you can make a
profit out of but anything that cost
more than five dollars a barrel
you're not going to bother getting out
of the ground because you can't sell
that on for a profit
so things that are deep below Arctic ice
you know we're in difficult terrain
dangerous terrain deep under the oceans
that sort of thing you probably going to
leave that alone until price of all
shoots up to $100 a barrel suddenly
you're looking at the world's oil
reserves with a different different pair
of glasses on so what's the point of
they're all this well it's the same with
the things we create so the amount of
value we or the amount of investment if
you like that is the the cost to drill
if you like the amount that I invest in
that is really a function of how much am
I going to get back in return for the
thing that I'm getting out and so it's
like the the market price of the oil now
if we just see these artifacts we're
creating as tests then you might get
people say yeah well test on a dozen you
know my test is doing cost very much I
can I can scale that up so it's not
really worth spending more drilling for
these things than what they're they're
giving back to me so I like to sort of
do this thought experiment I sort of say
well if I go to an organization and I
said say well the testers job is to
write acceptance test I said okay well
what if you outsource that to me how
much would you pay me to create each
test
well tests aren't worth very much around
here five dollars now that's not good
news to me because I you know have you
seen I care about the detail these
things I
want you needs to be you know high-value
artifacts I'm probably spending $15 a
test to to create that so that's not
economic for me so I one might wander
off to the developers and say it seems
you guys are really struggling with a
lot of rework because you're not getting
clear specifications of what you need to
do you know would that be helpful if I
were to do that you know how much would
that be worth you oh yeah I'll do $10 a
spec for that that'll be they'll be
useful I'm thinking okay I'm now about
to break even so then I wonder off to a
business analyst or a in a business
person and say guys you got no system
documentation here at all though what
you do have is out-of-date and can't be
trusted what if we actually had
executable documentation documentation
you could push a button and it will tell
you which bits of it are no longer true
magic gosh $20 a page for that now I'm
thinking okay so the one thing that I'm
creating I'm selling that at a total of
what was that that was 35 or something
like that I'm now making a profit so
this is the secret to you know being
able to justify this extra effort you
put into these things to realize that it
can serve multiple purposes it can its
it provides value to multiple
stakeholders okay I know we're towards
the end that was the main content but
there is one extra thing I'd like to
sneak in if I'm get the nod thank you
I'm assuming it's a primarily developer
audience here or anyone identify
themselves as a tester I can just see in
the dark yep okay all right good I think
for that proportion this is worth doing
this little section here so my phrase
that you know I when I put this out as a
tweet it seemed to get a lot of action I
say just as a friends not food so once
again another Pixar film reference you
can tell I don't have a life I have kids
all I see as Pixar films it refers to
the these sort of sharks who have this
matter that say well fish are friends
not food and they're trying to overcome
their reputation being mindless killing
machines of the ocean but it's not
really to do with arrogance towards
testers even though I have seen some
developers who'd put Bruce Lee and his
mates to shame it's more the fact that
when we're talking about testing it's
more of a function of waters that we do
and so I see it as being like friendship
in the sense of well you know how would
you know someone is a friend and I sort
of think there's this universal measure
I suppose that you'd it seems to work
every country I test this in is you know
you'd call something a friend if they're
the kind of person who would help you
move your sofa I mean I think that
probably works in Denver of course the
sofa would be much better designed than
that here in Denmark but but I think it
probably is the same the same threshold
reserved for a few people above that you
know the people you might call best
friends those are people who help you
move a dead body but and then you know
below there's there's there's everyone
else there's you there's your Facebook
friends it begs the question well if
what what are you what what role do you
play maybe it's useful to think of
imagine this scenario so most people
here in the room developers so imagine
your your development and someone new
has joined your team so a new developer
has joined your team and maybe after a a
couple of days she's she turns around
and she said oh hi look I've just coded
up my first feature I think I'm done on
it but I could really do with a tester
to help me check that I've implemented
correctly could could you help now you
might feel that you're within your
rights to say oh sorry didn't anyone
explain I'm a developer not a tester you
sort of you know will you chair around
and carry on with what you are doing now
what if that same person had asked
exactly the same question that she only
changed one word he said all hi look
I've just coded up my first feature and
I could really do with a friend to help
me see that I've implemented correctly
would you help now are you going to turn
around and say oh I'm sorry I'm a
developer not a friend it doesn't really
make any sense to sort of you know view
our our roles as if they exist in silos
you know just as we are we're all
friends to some
we're friends to some people by virtue
of you know what actions are we doing to
help them that's the way I see testing
testers our friends on the team who help
us get better at producing good quality
software so for some people that's their
specialism but for others it's just part
of the way they work so let's try to you
know forget this idea that there are
sort of different breeds of people that
there are developers and there are
testers as separate things so just as we
earn the right to be called a friend by
virtue of our actions the value we bring
to the team is determined not by our
roles but by our deeds I'll leave you
with that thank you very much thank you
David does anyone have any questions
and I'll put the whole slide up and just
remind you of what I talked about in
case the rest we have one quite early in
this talk have you also got some
examples of on doing it right well as I
said there's probably only one that I
would consider to be an example that I
would I would hold up as a good example
and that was the free delivery example
and of course that was the the one that
I constructed rather than picked out of
the wild I think the nature of the work
I do means that I see more bad examples
than good examples but yes I would I
would look if you're going back into the
slides pick up the free delivery you
know the the VIP and for five books
example that has all the elements that I
think make a good specification a good
title just enough introductory text to
explain the rules and examples that
directly support the content of those
rules so a good relation between what we
say it should be done and the examples
that demonstrate that being done and to
have those examples include positive
examples and counter examples that's I
think is your formula for a good spec
any other questions before we leave
yep okay so the questions when you
starting to get a large number of tests
that you're sort of you know moving into
a regression suite over time how do you
keep that maintainable well the very
recognizing that you have that potential
problem is you start you know you do
need to treat this as something that
that requires a bit of care because
otherwise it will be a dumping ground
and it will slow you down because you'll
find you know breakages that you are not
sure why they've broken people sort of
start to give up on fixing those things
because they'll say oh yeah it's
probably just the test is no longer
relevant and so forth well I always
think the next step after a story is
implemented is I'm now sort of almost
committing it to the the documentation
phase so I like to personally make as
part of the definition of done are we
happy with what this this executable
specification says about the work that
we've done does it sit neatly in terms
of its relationship to other things that
we have already got so if you're using
something like fitness there's a it's
naturally very strong on this because
each page is just a wiki page so you can
have a lot of good positive links to
related concepts a little harder to do
that with things like cucumber and speck
flow but it's still possible to do that
so I think yes associating with the
related concepts is important treating
it as if you know the this is
documentation not just a regression test
but also I think just having the
practice of making sure that regression
suite is run automatically you know make
make sure the build server is doing that
nightly at least so that at least we're
getting fast feedback if we've turns out
that new functionality has broken it
so yeah maintainability comes from
making sure it's always running green in
some cases that will mean you've picked
a genuine regression error in other
cases it means that the documentation
got out-of-date but either of those
cases are in my mind a stop the line
situation if we find that that our
system behavior no longer matches what
we say the system behavior is stop and
fix that so I think it's just about
taking regression errors or regression
suite breakages as seriously as you
would any and you know a breakage of a
unit test
Nonna's yeah there's a nice well several
nice stories documented in my colleagues
books working partnership with coeds
each so his book specification my
example if you'll excuse me a quick plug
on that that's got a number of real case
studies in there and something might be
Iowa student loan example is a good one
because this was an organization that
was creating student loans based on the
bond market and when the bond market
sort of collapsed in the u.s. they were
at risk of their entire business model
was no longer being relevant and they
felt well they needed to change that
very quickly they knew they had good
core IT systems they knew they had you
know they still had a demand in the
market but they needed to work out how
do we how do we changed the the the
model that sits at the heart of this and
they've said that they wouldn't have
been able to make that change so what
would otherwise have been seen as a high
risk change to their their call model if
they didn't have an extremely well
documented and they had lots of examples
that they could say all right well what
a what happens in this case and they
could actually go directly to the
specifications to say alright this is
what it would look like under the new
world and that gave them a very you know
a strong position of confidence to go
and be able to change their business
quite fundamentally so I think that was
a you know a business critical case of
we're living documentation allowed them
to make that change but yes so try to
book has got some a lot of interesting
cases like that over my budget
thank you everyone
thank you David</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>