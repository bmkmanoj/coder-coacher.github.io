<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2012 • Playframework: Real Time Web for Java &amp; the JVM • Sadek Drobi | Coder Coacher - Coaching Coders</title><meta content="GOTO 2012 • Playframework: Real Time Web for Java &amp; the JVM • Sadek Drobi - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2012 • Playframework: Real Time Web for Java &amp; the JVM • Sadek Drobi</b></h2><h5 class="post__date">2013-03-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KS86NeTs8Jc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so also when something else I I do I do
a lot of photography and there's this
picture that I did somewhere in infants
and it has a little story actually I so
it's like I don't know it's it's a place
in the middle of France where you have
like this mountain of sands and you go
there is really interesting but then
you're up there and you see like you can
get down very easily but you can't climb
then afterwards it's so hard to climb
actually really hard I mean you'll be
running for five minutes
to discover that you didn't move at all
and you know I went down to take a
picture from down it seems like cool to
take a picture from down and then when
I'm down it was like getting dark and
rain was coming I would see it through
the forest coming and I started to panic
because I have two cameras with lenses
and it should not get wet and I see the
rain coming and I try to run run run and
I'm still in the same place I didn't
move at all and and this this is what I
mean i i'm kind of like relaxed cool but
i started really to panic I mean really
panic because you see like you're not
advancing there's still long way up
there and that's when I learned like one
trick it just put some signs where you
where and then you will see that you're
advancing and this will stop you from
panicking because panic is that I will
start with really feeling bad and then I
start like me putting some rock some
rocks at some level running up and see
like okay I made some some some
difference and then I can go on so that
was really a good discovery in any
situation that was a bit awkward for me
like I've never felt panicked and so a
good story behind this picture it's kind
of doesn't happen very often so I so I'm
sorry groovy I do I worked in quite a
few languages and lately I worked on of
course Java and Scala for rewriting that
play framework what we call play too
which is like what's released in March
and we started working on it last year
around August
and we we designed the player play
framework designed from from scratch for
supporting reactive and real-time web
and we will talk more about this so and
I am also a technical director at the
next city the company that is that is
behind play so I I like to share my team
Guillaume we work together we co-created
the play - he created and found it
together with heavy the first version of
play
he is our CEO at the next city it's rare
to have like a CEO that understands so
much technology and and that is so cool
as cool as heavy that's why I would like
I mean I share his photo here because I
think like he was really essential to
the whole work with it on play and on
the next city and he's quite open-minded
understands technology and pushes for
forward of course with money right this
is important so and the next city we do
web oriented architectures which means
like using web technology or what we got
on the web to do architectures for for
companies for like banks for no
transforming all these big businesses
into into web and like to help them do
all over software all there
systems on top of the web so what is
Play Framework well Play Framework is a
web framework that targets the gvm Java
and Scala and it's kind of like mimics
tries to give this experience of what we
know in in Ruby on Rails in rails the
rails experience were like everything is
interactive everything is thought of
like polished and I will give I will
show you fast like how play looks like
and it was as I said it was architecture
to support like web oriented
architecture and real-time web which
we'll be talking about it and it has a
reactive model based on futures and it
arathi IO don't care about this
technical stuff just know like it's it's
done for reactive and modern web so
let's I will just go into my here is it
good this way so that you know it's very
familiar structure in in play this is a
controller controller has has methods
each method it is doing one action it
corresponds to one route that is written
in the route file and you'll be just
returning some HTTP status in this case
it will be so for instance here it will
be an okay status with calling some some
some template so pretty standard MVC
structure we see like we fly it doesn't
hide the web so you when you return
something you should say this is okay or
not fun or whatever other status we
really we are really are careful about
this kind of thing because we think we
should use the web and not fight against
it and this is one of the main
principles of play now if I go and run
this well it's running also like you
will use the play run command which is
actually which starts up the application
and keeps compiling your code on the fly
right each time you refresh your browser
it goes and there we go so now so this
is the result of the application if I go
back to the to the app and I go change
something and then I go and refresh it
okay
a compilation error and not only it will
tell me like where exactly I got the
problem and then I go and fix it get
back and I get it running so this kind
of focus on the browser even errors
should get happen in the browser well
formatted so that you you have to focus
like one on the on your code and one on
the on the browser this is very
important like not 100 consoles 100
things like two things your browser and
your code okay so that's about lis of
course we support a also like Scala
natively so it's for both Scala and Java
and the interesting thing is that you
can start with Java and then do some
controllers in Scala some codons in Java
and evolve that way if you want for
instance to start understanding like
inada
the Scala language then you can start
like progressively this way if you want
like some parts of the system they need
a functional language some some parts
you can do them with Java then you can
make put it in the same project there's
no problem ok back to the slides I
should find them so so that the story
here like why did we like we're talking
about real-time web work let's try to
remember how like how web was with from
the beginning like how did it start web
started like these static pages like
HTML pages right where a company will
put an address and something and you
know you click on that and it's just a
static page nothing in there and then
like we discover we can put counters for
for users you know to count how many
users are happening and this is like
coming completely from the server Wow we
can count people on and we can even have
some dates from the from and the date
and the time coming from the server I
know why cool is that but but it seemed
cool at the moment to get the the time
from the server and then it made sense
and we started adding more and more
dynamic stuff into the pages right
something like what ASP and peach feats
are doing like the same model of page
static page but we add in like dynamic
portions into that into that page and
you know a business took this and start
like we started doing a lot of
interesting stuff with it application
but still with the same model right one
page dynamic portions and we discovered
that it isn't scale because it's really
complex a lot of complexity in the page
like everything is mixed up like some
view some buttons here and some logic we
couldn't we couldn't go forward with
that model and we needed something more
structure than that when we start like a
patterns like MVC and so on started
appearing we was like let's let's
structure this more and put the model
separated from the view and from the
controller and this way like each aspect
is represented in a different place and
that and it made sense and then with
thanks to this structure we could
introduce we could like do much more
sophisticated applications right and
that's why we what we we had for the
last I don't know 10 years or so maybe
less and and then something happened we
discovered something called Ajax right I
could I could just change one place in
the page and go and do a service call to
that to the server but I can I should
not I don't need to reload the whole
page it made sense and we started like
in doing Ajax calls in the page
everywhere to be able to do this
interesting stuff like calling the
server for four different things without
refreshing the whole page it made sense
right and start doing sophisticated
things until we discovered that this is
not going to scale right and then we
decided like we decided at the neck city
that we need a model a server like at
the server a model that can target
better this kind of architecture where
where a lot of interaction is happening
between the browser and the server a lot
of real-time right today you open your
Twitter in in few seconds you get more
tweets and if they keep appearing same
face same thing in Facebook a lot of
streams of that are happening and you
need something at the server that
supports this kind of new paradigm a new
need of develop deploy development at
the server side so what is real-time web
so real-time web is is what you do when
you you get the data as it happens so
you don't keep asking the server for
give me a given and rather give me data
but it's like
you get it as it happens so if you get a
new tweet you get it into browser you
don't need to keep Pauline now what is
the technology used behind it doesn't
matter that what matters is that you
keep receiving that into into your
browser and doing something about it
okay so that's the definition from
Wikipedia basically receive information
as soon as it is published by its
authors rather than requiring software
check whatever so technically speaking
what's behind what is behind this
real-time wave there are several
technology we started with long calling
the long coining is basically I I would
call the server okay I will issue a
request an HTTP request and the server
won't respond until it gets something
new for me and then it will respond and
as soon as it responds I think I I do
another request okay and that request
will wait until I get a new data so it's
kind of simulating the stream of data
but it's the client that is all the time
making sure that there is a socket open
there's a request and so that if the
server has anything it concerned it on
that on on that on that socket or on
that request respond to that request now
something happened afterwards we could
do commit and commit there's different
things like commit can mean different
things but one of them one interesting
were think a trick to implement comment
is like we know there is HTTP chunked
HTTP chunk is basically saying when I
respond when I have a response when I
send a response to the browser I can
send it into chunks right different
chunks and if the browser can understand
what this chunk is it can show it right
away right it can translate it and show
it okay it can make sense of any of the
chunks as they come it will show them
right so the browser not only can
receive things in chunks but can
understand them in in chunks which is
actually made for for some maybe
performance optimization for streaming
large files for streaming images and so
on but the interesting thing with it is
is that you can what you can do is that
you can stream some script tags so if I
stream
script tags each chunk is a script tag
the browser will execute it right and
this with this you can simulate some
some continuous stream coming from the
server because the server's kid-like
keeps sending this script are that they
have some data and they could call some
callbacks and and I will be able to
simulate a stream so that's what
basically comet is is a hack on top of
HTTP one one chunk and then we heard of
WebSockets and you know this is
implements not natively you know
bi-directional socket with a server and
then there's something even more
interesting or as interesting I don't
know how do i define it but server sent
event is basically a protocol on top of
HTTP very similar to the HTTP chunked
but it's like natively supported by the
browser and where the browser can
understand this event sent but by by by
by the server but it's one way from the
server to the client which is kind of
cool in some cases where you you don't
want to send a lot from the client but
rather I receive a lot of things through
the stream anyway these are just
technologies that can enable you doing
the what we call real-time web now what
can I do with this right I mean I got
this socket or whatever you call them
real-time what can I do that would them
I mean suddenly you have a technology
you need to decide what to do with it
so one of the things you can do with is
like disconnected peers where whatever
whatever the example is it could be a
web chat where they have peers connected
with the server they send message to the
servant server publishes everyone but
the same concept of a web chat of a
chart could be like a game where parties
keep sending that and that is published
right it could be a game it could be any
other application that is I know appear
and the server peers and the server and
it could be also like streaming some
information like what you got in for
instance you got a system you're
monitoring you ate you can get a socket
to that system and it will keep pushing
you some updates about like how the
server is doing right this is what all
of the things you can do with so it's a
one direction socket from the server to
the client or for instance you can start
a lot of jobs of MapReduce or real-time
calculations and you can grab this data
and
stream it to the to the browser to the
client as it happens and you have web
web stream web streams API so Twitter
has one you can search for a term and
you get real time in real time you can
get the tweets as as they happen
whatever and you can mix them you can
have like a mix of these into n1 app ok
so I would like to show you like some
examples of apps already using play with
with this real time web so there is this
that is called it's a chess it's a chess
application so I have to get this out
ok ok so there is this chess ok so this
this is I just said it's a game it's a
chess game that is happening real-time
you have a lot of people connected these
many players there are game against that
happen I can join a game I couldn't join
it was too fast don't touch it but
anyway you can and this is based on on
top of play and you can see here you can
see also all the games that are
happening aren't like games you can see
in like all these happen in real time
you can see they're moving so these are
like using WebSockets with on top of
play on also there is one hidden feature
in some somewhere where you can monitor
the whole system so these are this is a
stream server sent events stream coming
from the server telling about how the
server is is behaving it seems like
seems behaving well to me so there is
another thing that we help like
implementing adds annex to help tie the
guise of typesafe implementing is the
aqua console so the aqua console is
basically a system that will monitor how
your actors are doing so I don't know
how that will it behave in these kind of
settings but it's really cool is that it
will collect like data from all these
servers and we keep stream them at
stream in them at the client side so
here these updates are having real-time
is exactly what I see how the system is
doing right now and you can have a lot
of actors a lot of dispatchers you can
click
here and compose different strains
because you know basically there are
widgets and then you can compose them
and you can decide what stream you want
to receive and you show it on the
interface
okay here we can get dispatchers okay so
and there's this other I just to give
ideas there's this guilt service that
did a live stream okay that that shows
you what people are buying right now and
again it's a server sent event
that is sending you like updates are as
as they happen this is what users are
buying and then you can see how many
articles you still have how many you
still have of this item for instance
here I don't know how many left but is
within some way yes so this the constant
that the akka console did what I showed
you is a demo so you can go and check it
you for yourself you get it with the
typesafe stack and I saw a tweet like it
you will you will have it for free for
developers but it's my part of that
typesafe subscription but you can have
it like as for as a developer you can
have it for free it seems in the next
release so we've got examples let's go
forward you should okay so these are the
services so now we talk about all these
things now the question is right away
like why should I introduce a new
framework for doing that why shouldn't
why I can't use them I can't I use the
the war servers I got Tomcat or whatever
other other war server for for doing
these kind of apps why do I need
absolutely a new framework and I keep
hearing about new Java frameworks that
do this this thing right let's let's
have some some context about this
problem so the basically that with the
war architecture and and some of you
might already know it is based on the
fact on the assumption that one user I
give it one thread which means you go to
request okay I give it I give a
that request is read as long as it goes
and then when it gets that a response
back it gives us a response back I I get
by the thread which is cool in case you
are you are you're alone and you don't
have a lot of users meaning that this
server
it's like auto like it's contained by it
by itself it doesn't didn't call any
external services it might call it
database but that's a different story
but it doesn't interact with the rest of
the web the request is just CPU mostly
CPU bound I will go and I will do some
CPU and it makes sense to give a thread
because anyway if you don't have threads
it means you I have a lot of CPU
activity whatever whatever but that's
that's the old the other old way of
designing web applications right because
now you have a lot of things you need to
interact with on the web right you have
a lot of web other web servers rest
api's you need to collect data from
these and you get a lot of connections
not only in love of users happening at
the same time but i we said we need a
socket open with the user so the user
will open a socket and it will last as
much as a class it can last for hours no
one knows right it's just an open socket
and if you give each open socket a
thread then you you you'll not be able
to serve more than 100 maybe 200 threads
for for a particular web server that
doesn't scale absolutely doesn't scale
because because the architecture did
some assumptions on how we design web
application that were based on what we
had at the time and things have changed
okay without so we should acknowledge
this change and we should move on right
so what we need actually is that when we
call any of the services that are
external okay we need we should not
block resources we should give back
threads okay we don't need the thread
now I did some IO and I'm waiting for
response so I don't need to wait for f2
to block a thread when it happens i I
will take it I will handle it okay and
and not give each connection to thread
just the connection is there we don't
care about it if there's something to do
with it I will take a thread I will
exuse some code and then I will give
back the thread the thread as execution
doesn't have any any connection any link
to to to how many connections I got
and that's what we call non-blocking
non-blocking is basically I do an eye or
anything and I'm not block I'm not
blocking the execution thread the actual
the current execution thread while that
this call is happening I just get
notified I get notified when this thing
is done
imagine I'm calling like Twitter or
Amazon for doing that let's say I'm
calling Amazon for doing a huge
computation okay I don't want to wait
and waste my resources on the machine
waiting for Amazon Amazon will notify me
when it happens and I can go and do
something else this is what we call
reactive right I'm not proactive I'm not
waiting for the response to happen and
reactive and this is extremely important
if you want to scale now there's one
thing like we hear a lot people talking
about this kind of subject and I don't
like my framework is a synchronous right
I got this web framer that is completely
asynchronous Wow completely asynchronous
it seems like he's selling you something
a synchronous is a problem it's like
leaving all these benefits you get from
synchronous programming for free now the
first question you should ask this this
someone that is selling you this why why
you want me to do the program in a
synchronous and then should have an
answer if you don't have an answer you
don't need this a synchronism okay if he
tells you like I have a non-blocking and
so I have absolutely to be a synchronous
that's okay because you are giving away
your asset like the synchronous
programming which is comfortable but for
something you're giving it for public
factory it would be non-blocking
for the fact of being maybe parallel so
parallel programming will do also some
asynchronous you have to do with a
synchronicity but it's not an advantage
a synchronous is a whoreo is something
really hard to reason way about and it's
not an advantage and the first time when
someone tells you I got a synchronous
you don't like why and wow this is hard
why why would you ask me to do that and
the second question is what are the
tools so that I can deal with this now
crazy word of a synchronism right
he should provide you the tools you
should not let you in the wild with a
shank
Skol backs like I'm waiting for to
assign currents Kobach's how can I do
now I I want both okay okay now I have
to do logs or not logs or I don't know
what and then starting dealing with
things that I wasn't dealing with so the
framework that is that is suggesting you
to do non blocking or parallel should
provide you with the tools to handle a
synchronous programming and we do
actually in in in in play we use futures
with authorities whatever they are they
are tools to help you to deal with a
synchronous room as it happens because
of non blocking and reactive C's all
right okay now okay we got this reactive
system right that way we use the thread
only when we need to use it right we
don't block it for waiting for something
we just use it when we need to use it
and we need to use the same architecture
none on block and architecture for
streams right streams as a series of
data that is happening and we don't want
to block anything worth waiting for the
next event that is going to happen in
the stream we need to hand it in there
in the same reactive manner right so
this is some some play some play code in
Java and it's like offering you one
solution for doing with sockets
what you have here is so this is some
controller it's a WebSocket you get an
in and an out right and for the for the
in you can say okay on each message I
have a callback and I will print it and
print it whatever and for the out I can
say okay out dot print something okay
Wow
this is callback right this is so this
is it is it a solution for doing new
streams so this is what we got now right
now right now in the Java API the
problem with the Java with Java the Java
as language it it lacks only one thing
for us in this kind of scenario we need
a function if we have a function then we
can offer a much better API than this
that takes into account the comply
of using of stream of using streams like
something that will handle all the cases
for you just explained Express business
logic your game logic or whatever you
trying to program and then the rest all
the synchronization all the handling the
plumbing is done by the framework so we
need only a function now I have to ask
you a question at this point I can do
one of two things either I can go and
show you more examples of using the Java
API or we can go into a wonderland where
we can see like what could happen if we
have a function if you could have
something that really really addresses
this problem of doin real time real time
web and and reactiveness and all of
these things so the red is for the
second and the blue is for the first the
red is for the wonderland who goes for
the red oh everyone I'm lucky because I
don't have the other part I could I
could open my my Emacs and show you some
examples no problem and I'm offering you
only the truth so what are streams I
mean with tree we're talking about real
time web on streams but we haven't
identified what what streams are like
what are they how can I talk about them
like what how can I assign them to a can
I assign the mini forever if I kind of
say extreme and put it in a variable
reference it afterwards can I adapt it
in some way like how can i I need to
deal with streams you know the first
thing the first thing we need to do is
to acknowledge that they exist these
streams and to talk to have some
vocabulary to talk about with which we
can talk about them right we we should
treat them you know like we talk about
objects we can put data structure and
references which put them in maps we
need to reason about the same way and in
the same way about streams the same way
we reason about anything else right so
when you saw this code from the earlier
example did it remind you anything
it made me deja vu nothing what about
that period in before the structure just
just before the structure we got
something that looks like this wow
that's very similar that's when we
didn't have the tools to do any any kind
of thing like web or anything before we
have we start doing time players who is
like having GSP is weird for having all
of these so we are back to that point
now we are back to that point with all
the frameworks that that offer you a
channel with push an own own message to
something we are back to that to that
era of doing any everything imperatively
and caring about all the problems in the
world and this thing it's just call back
that is really horrible I mean it brings
me this right it's a as we talked about
it like it's a it's the callback hell
it's when there you have yourself to
reason like what if this happens after
the other you're you don't have a
programming model you you're lacking
what you what you need is a programming
model this is not a programming model
this is a hack this is okay
it's just bring it it available the fact
that you can receive a message but
that's it it's not a model
there's no programming model in there
and what we need is really a programming
model okay so these are the important
questions how can we talk about these so
we had in the history of Java something
that is really similar what we want to
achieve we got input and output streams
okay at least I can assign them to the
Vario to a variable they can represent
this stream that kind of they were kind
of good step to forward to dealing with
streams like properly dealing with
streams they only like some some like
they are not reactive they're blocking
you know not not non blocking they're
blocking and they like some facilities
for composition but it was a good step
I'd want to identify streams so it seems
it seemed that what the industry is
going backwards
we started doing something in the Java
if there was good engineering of a list
which talked about streams in a in a
normal way and we went backwards into
like events and whatever complexity it
brings okay so what are streams we want
to deal with streams as first-class
citizens in the line in in the language
in libraries right we know we want to
not represent it as events and handlers
and so on and we want to have streams
adapters and sinks right streams are
things that are having events adapters
is to be able to to adapt these streams
in some manner and and things where we
will push these streams to you know it's
okay it's um whatever it is okay so
let's do some fiction here if Java had
functions so I would take some some
stream that is tweets I will assign it
to a variable right we know what this
means and then I can get these tweets
okay before I can make an adapter that
will translate a stream of strings into
a stream of G's own right it's kind of
adapter and how would it do that what it
will map each string s into into a G so
and it will just parse each string as it
happens right this is an adapter it
takes each string and it gives it and
it's a general purpose right I can use
it with anything that is coming having
strings at our G zone and I can just
adapt any stream like that with this
adapter so it's it's a very general
purpose adapter and then what I can do
is I can push the tweets through the G
zone right nothing fancy there and then
I can have another stream which
represents some ads that I want to mix
in with with with these tweets and then
I can interleave these streams and I can
and I can interleave these streams tweet
dot into tweets dot interleave some ads
and then I pass it through the comet
protocol or the event source protocol
which is the server sent events which is
even the pro
to call the eventsource protocol is just
an adapter right
it gets messages it wraps them into some
protocol and it puts them to the wire
right it was easy we just need to have
the vocabulary we need to have the right
types to be able to express what streams
are and the program is completely
different now it's it's like I'm not
talking about how to synchronize these
streams that are interleaved I'm not
talking about how to do when okay when I
send something should I work with the
server for sorry for the client until he
receives it or not all these kind of
thing all the plumbing is taken care of
by the framework that's what we need we
need to talk about streams as streams
and not as something else first since
streams right now this does exist
already it does exist in the Scala API
but that's very similar to what we got
here in in Java which is I did some
adaptations to be able to represent it
this way this means two things that we
can already have it today but there's
something also interesting for people
that were not willing to move to to
scatter that this we can easily have it
so we can easily have it in Java 8 when
we get the function that's trivial okay
we got the framework that completely
support this reactive manipulation of
streams we is there it's just a matter
of a surface API where anything we can
implement in a week or so and we can get
there in with API is that that know how
to deal with with streams of data okay
so that's not hard the heart that we
just need one thing from from Java so to
be able to represent it all okay and
even if some people are are familiar
with the plot with Eclipse plug-in or
something like that that represent
functions and in most classes out
functions we can even add it for these
okay so what we got here we got the
powerful reactive stream manipulation
API right I can reason about my logic
and not the logic of how to synchronize
all these stuff and play with it right
I can I can express my own logic
and and I don't need just to get the
possibility of having a socket and push
through it I need the tools I need the
tools to it that enable will enable me
to deal with this without the huge
complexity of dealing with concurrency
okay so when you expressing your
business or your game or whatever you
are expressing you don't want to say
like what if happens what if this comes
before that what you want to say like
this is a stream this is another stream
that's interleave them this let's adapt
in a bit right and let's buffer so this
is very easy to do trivial no and I want
to buffer like 20 and messages before
sending because the way it's made more
it's better I won't like to a lot of
things that you can do with this this
API like we can we got really huge like
I don't know how many methods that our
helper methods to that you can do
something like is very useful in in the
case of real-time web and and dealing
with streams so let me now I can show
you an example of I will show you just I
will drink water so let's see an example
of using these streams for an example
that looks like a business hapless and
by the way we got a lot of samples in
quite a few samples in in the player
distribution that you can check check
out for for getting at some inspiration
or some examples of how to use this API
so I'm going into scatter comment life
yeah so this one so I will start with
another one than the one that I wanted
to show okay this is that what have I
got in there no I don't care about okay
so now actually okay what is it so I
will open models which is in models okay
so here what I do actually is that I
have several streams that I prepared
right I have a stream of requests per
second okay it's a kind of monitoring
API it's a monitoring service where I
got one stream of monitoring like how
many requests per second I'm getting
this the server one stream is getting me
the heap one stream is getting me like
CPU status and then what I do is so I
get the first stream I interleave so
this is basically dot interleave with
the second stream dot interleave with
the third and so on okay
now you could ask me like you you might
want to know like where where the just
eat okay not through protocol okay so
basically what we're seeing here is very
interesting well first we're not lying
about HTTP we're sending an okay status
with a stream of data and the in stream
of data is interleaving several streams
and this is very interesting it means
like I can you know I can modular eyes
my streams I can put them in different
files different projects and then I can
I can get afterwards and interleave them
and push them into into the wire this is
very interesting right because we are
talking about streams we can separate
them into different things and now if
you look at how the icons construct the
different streams what's it like it's
not it's not that hard actually so if I
get into here it's basically saying
every
so every 100 milliseconds I'm going to
execute this this thing okay which is
getting the the requests per second for
instance the heap is a bit clearer
because it does less things so every 100
milliseconds I'm returning run time to
get run time the total memory minus one
time look at run time with free memory
which is a heap right which means like
this one way of constructing streams is
by hitting some some API on the JVM in
this case and getting this data and
constructing stream out of it all what I
did to it where or what I needed to do
is just Express what code should be
executed every every some seconds and I
get the stream bar out of it I get a
stream of of ain't I guess in this case
and then I adapt it to his own okay so
let's try to execute this app which will
look a bit familiar and then commit life
I'm a computer freeze sorry
oh yeah thanks okay and then I go back I
don't know how many times
yep so it should not work okay thank you
someone's following it was a test
enter leave wow how did you detect that
sorry
you think no am i yeah yeah yeah that's
right what's magical okay okay this guy
and I were to hit refresh so it's
basically now it's compiling the the
source files giving me a bunch of former
warnings because I'm doing some
refactoring this is master and I get
this guy that shows me the status of
them of the system right okay that was
very easy to do right so another example
and again I mean we're very close to do
this in an angel we need rest the
function to be able to do to have this
to be able to talk about streams and in
a the right way the natural way so which
here yeah and then there is stream time
I guess maybe application so this is a
bit more interesting maybe and different
there's nothing so dis going so the same
thing is here I have sorry ok so again I
have so here I have an application for
which I got two data types
I got operations and I get system status
right so operations is basically an
amount and the level of so it can be a
like admin or manager whatever it is and
then you got some system status that the
system will be pushing some status to
right and I got these two three two
streams one of them is operations it's
randomly generated the other is some
noise coming from the system and my
events is the two interleafed right this
means interleaf I can write it to prove
it
okay now at the controller side it's
kind of interesting because I want to
apply some business rules here okay so
first thing so this is the stream that I
will be sending this is the controller
that will be sending the stream to that
to the client right and it got several
paddle parameters it got from the user
which will give you that the role of the
user if is an admin I'm a manager or a
normal user and the user will give like
a lower and an upper bound of the
operation he's willing to see like I'm
only interested in amounts between 50
and let's say 150 right and this is will
be given by the user and will
dynamically here will dynamically
construct the stream that corresponds to
this criteria how will we do that first
we do this the secure adapter it's an
adapter right as we saw it's just an
adapter that will just checks if the
role is a manager then it will leave it
will it will let it go otherwise it will
just return it filter it out okay so it
will give only operations that are
private only for managers and only
public's for for the others that is but
what is basically saying I give if it's
private is only manager they're going to
get them if it's if it's public then
everyone can can see them this is kind
of security to the stream and then I
have another functional thing which is
inbound I need to have them inbound
it's another adapter to the stream where
I said like okay I have to filter its
collect is a kind of filter where I
could say like ok if the amount is
inside the bounds and I leave it
otherwise and if it's a system status I
let it go right and anything else I'm
not letting go right collect it just you
you say the cases you want and you you
throw everything that you don't need ok
and then I have a third adapter which is
as JSON which takes each case with each
type each data structure and realize it
into a JSON and the finer adapter is
secure together with so this is composed
I will leave them this way but this is
secure composed with inbound composed
with as G zone so I'm taking these
adapters and I'm composing them together
ok to make one adapter so I
even in compose adapters and I get one
adapter this is the final adapter and
then I can feed it and I pass it through
another adapter which is the event
source adapter okay
looks simple right I'm talking about
adapters I'm filtering some streams and
that's all I'm doing
let's see how does it run I should know
where it is first so I guess it is in
workspace yeah and then streams demo and
then okay here it is
now what should I do
I should execute it my framework way to
play this hope I didn't break something
I brought something Wow okay let's try
to solve this problem fast it's a
project
baby baby baby it's in plugins I guess
actually because I have my own master so
I seems I broke something I'm trying to
fix it fast I hope I will be able to fix
it but otherwise if I can't fix it you
believe me guys as it'll work I know
it's not here sorry it's just in
properties build odd properties whatever
million properties okay there it is
was it hard to find not this way
but zero okay let's try to run it now
hope it will run so basically they're
like we are dating some some some
dependencies into in the framework and
that's why like I always have my master
is a bit a bit dirty I should try to
clean it often and this was a sample
before I do the refactoring so that's
why it I've had these problems it seems
compiling alright so there we go
actually I will just close it don't open
it again okay so I have operations green
ones
it means like they are not private right
the red ones are private so as I'm not a
manager I will just see the green ones
if I go as manager and then I can see
red ones too okay and system status okay
and then I can set the bound bound I can
say like I want to between 50 and 1000
and I'm not going it to get anything
like it's less than 50 that's not
obvious let's do it 100 may we see the
idea right same thing as a user I can do
the same thing between 500 so then okay
much much less often that's it so that's
that's really representative I guess of
real cases real-world cases I mean we do
a lot like we do real time web apps at
my comparison exit II and it's really
it's it's a he
I mean you got the tools right you're
talking about things in the right way
and you got the tools it's so much
easier to talk about thing like we did a
lot of applications like some mixing
logs some like doing some real time for
instance and attacks the application
whatever it is and it's really trivial
at the server side because we got the
right abstractions all right
motives to be able to work with streams
how am i doing on time
I guess yeah so alright and there are a
lot of other examples out there like
okay I was just one last example it's
very fast I hope I didn't break it - and
if I broke it I will not show it you
will be able to come and see it by
yourself okay so play two samples okay
and this one okay no okay
I suppose locator yet come on come on
okay compiling should get it now okay oh
I have to login okay I don't remember my
login move was it okay not this one this
one okay so here basically it's using
the Twitter API they have a streaming
API that will you'll like search for a
term and you will get the stream of
tweets that are talking this this is
happening in real time right so we're
just plugging into this stream of data
that is coming from Twitter and we're
streaming it using server sent events to
the to the client a lot of people
laughing so I guess that's it
well thank you and questions yeah and by
the way just here I should show yes if
you want if you're interested in play
then you can go and check the website
which is wow it gives me from the
beginning why does it do that okay
okay you can go to the framework there
is a community you can get with things
answered like pretty fast very very
active community and check check out the
samples they are really interesting okay
questions now yeah so actually so the
question is about SBT with play now if
you are if you don't care about SBT and
scale and all that then there is a
package you get it you get like the
normal play experience which will you
start it with play run you don't care
about SBT you do not nothing on nothing
of that and if it you will not stand in
your face now if you have a very like if
you're using SBT and you do a lot of
dependencies to you have a lot of
dependencies to a lot of other project a
lot of other things sometimes this
beatty does some things in it I mean
it's not SBT it's like it's it's depend
dependency doing with dependence is very
hard problem mavin couldn't solve it
completely ivan neither and SVG is not
any any i mean it's it's it's a step
forward for some some parts but they
still I mean you still get into some
weird cases where you get different
dependencies or sometimes like something
happening wrong but sometimes like when
you upgrade a new play version that that
might happen just you need you have a
script that it cleans all the cache and
then you can it's basically the IV cache
that is that sometimes there's some
trouble but you have a script clean so
you say play clean - all and it will
clean all that re so it's it's good like
when you have it any problem let's try
to do the clean own and it so it can
solve the problem especially when you're
moving between versions because it got a
lot of things cached and you need to
just clean these up yeah that's that's
often not that used to happen to zero
whatever and now we fixed we we can
change the world completely the way we
do it the deadlock you're talking about
it was like a the blocking it was in
development mode it was because some
class pass classloader hierarchy that
was wrong it was like parent calling the
child Charlie calling the water parent
but we completely removed that in in the
next version any other questions so the
question is how convenient is it for for
a Java developer right and of course I
mean I recommend using it from Java of
course there are things that you can't
just do in Java and then you have the
opportunity to do just a part in Scala
and the rest do it in Java but there are
really big companies that use only Java
and one of them is going maybe to
announce soon we really worked a lot
with them to to get like the experience
right and really we work with real real
world project projects with real like
problems and real things and we really
got to experience
I mean basically working with this
company which is really an interesting
reference in you know the Java EE kind
of atmosphere it's really interesting
because they care about exactly these
the matter of a Java developers and
really we work very close with them and
we like
and I went to them I worked for for a
few weeks so that we get it really right
this so yes it's a Java and kind of
development web framework and you can
use it from Java as well as Kara there
are certain things that you will not be
able to do in Java because of Java until
you get the next get function and things
like that
until then yes you can do these parts
just in Scala and communicate between
that and it's just one system so there's
no problem with doing that questions
questions well that's it and thank you
guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>