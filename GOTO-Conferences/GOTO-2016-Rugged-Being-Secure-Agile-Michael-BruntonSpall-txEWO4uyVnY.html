<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2016 • Rugged: Being Secure &amp; Agile • Michael Brunton-Spall | Coder Coacher - Coaching Coders</title><meta content="GOTO 2016 • Rugged: Being Secure &amp; Agile • Michael Brunton-Spall - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2016 • Rugged: Being Secure &amp; Agile • Michael Brunton-Spall</b></h2><h5 class="post__date">2016-07-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/txEWO4uyVnY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today I'm going to talk to you about
how you can combine security and agile
development at the same time so first of
all I'm Michael Brunton's Paul you can
get me on Twitter and hat run since Paul
and you know tweet me questions or talk
to me throughout the things my pronouns
are he hears and him and I'm the lead
security architect within the within the
government digital service which is a
part of the Cabinet Office in the UK
government so my job is to basically go
round the rest of government and give
advice on how to build systems that are
secure but to do it in a modern
interesting and unique way I'm told the
second most terrifying thing that you
can hear somebody say is I'm from the
government and I'm here to help nobody
likes to have the government come in and
talk to them however the most terrifying
thing you can ever hear in an
organization is I'm from security and
I'm here to help and sadly I'm both of
those so I'm probably the most
terrifying person anybody can see in
government which is always worrying
because I'm always here to help I like
to help but I'm both in the government
and I'm from security and my hypothesis
and my theory is that agile development
can make us more secure not less secure
in order to tell you about that and and
so forth what I kind of need to do is
explain how security works now in
organizations like governments like
banks like finance organizations that
are heavily regulated and show you why
it works the way it does because many of
us have been sold a myth of security
many of us been told that it works in a
certain way and there's not actually
what happens so what is the current
state of security
well actually security tends to be
summed up by a couple of different kinds
of words the sorts of things that people
talk about its certification
accreditation if you aren't doing
certification accreditation you've
probably heard of PCI it's already heard
of PCI so that's the payment card
industry certification if you take payer
credit card information you have to
demonstrate that your system is secure
enough to maintain that information in
order to keep paying it iso 27001 which
is an accreditation you can get as an
organization to show that you take
security seriously you understand it and
I've never really met somebody who's a
developer
works in software industry who likes PCI
or ISO 27001 then on here want to put
the hand up and say they like ISO 27001
now nobody likes it it's not fun it's
not actually very valuable either the
processes you have to go through the
things you have to prove are often at
odds with how you actually work so you
spend a lot of time documenting how you
do these processes that you don't really
do they've written down so everyone can
say that you do those processes but the
reality is that people do different
things in the background and what those
push us towards is this concept that
security is a gatekeeper Security's job
is to prevent you from doing work
Security's job is to prevent you from
making a mistake to prevent you from
accidentally breaking anything so we end
up with development teams that look like
this you come up with an idea but before
you can actually do anything with that
idea you have to go to the security team
and get risk analysis done and they will
look at the idea and decide whether it's
too risky for your organization is it
within the appetite of risk for the
organization once they've said yes
that's ok it's not too risky there you
can go to the design phase you can
design your system design your IT system
but then you'll get a security team
who'll also simultaneously go along
adding some extra features and they'll
do a design review and they'll stop you
moving into the next phase until they've
done their design review you can then
code and build the system and then
you'll get a code review so the scooting
will go through and check that you
haven't used functions that you weren't
supposed to use the your code is secure
by design that it does all the right
things
finally you can put it into the test
environment and you can do your
functional testing does the system work
does it do what you intended it to do
and in the meantime the security team
are going to go off and get penetration
testing done they're going to get people
who are gonna check your system is
actually secure and then finally you're
going to put it in production and
everyone will be happy and what you're
doing a traditional organization is
you'll throw it over the wall to the
operations team and they will enforce
something called a change Control Board
on you everybody loves a change control
board and I kind of feel like I should
apologize for ITIL because the UK
government is actually who came up with
ITIL and published it and I'm really
sorry this is the ITIL process map for
approving a change into production so
the first thing you have to do is you
have to go and ensure that you
understand the impact of the change you
have to find out what kind of changes
and categorize it is a minor change a
major change it cetera you push the
change to the change control Advisory
Board who
whether the change is appropriate to go
you then need to check when the change
can be scheduled to be deployed into
production finally having Churchill's
the change beautiful introduction you'll
hand it an Operations team who might at
some point actually do the change in
production and then they do an impact
analysis to understand how whether the
change took effect what it did and tell
you that your code didn't quite work the
way you thought it did this kind of
heavy weird process is a way that we
ensure security in many organizations
you can't change the system in
production because you might change your
security property of the system and
therefore break the system so somebody
has to analyze it you've got a security
representative on your change control
board checking every change and saying
have you changed the security of the
system do I need to update the
documentation do I need to do all of
that well the thing is the IT industry
has changed the last ten years has seen
a massive shift in the way that we
developed software agile development
changes absolutely everything about the
way that we do this and one of the key
things about agile is that lots of
people say they're doing agile I go to
teams all the time who tell me they're
doing scrum we're doing agile I met a
team the other day who literally said
we're doing agile we're doing two-week
iterations we've just finished our sixth
design iteration and in two weeks time
we're gonna start our coding iteration
and we'll do 20 of those coding
iterations before we do our test
iterations so I always like to just just
in case I'm sure you all will understand
that y'all but I like to make sure that
we all are on the same page what is
agile because agile will the Capitoline
a jar with a little a are very different
there are lots of different highly paid
consultants who will tell you what agile
is what their brand of agile is and sold
you on they expensive training course
but agile really comes back to these
things this is the agile manifesto when
the original originators of the agile
movement got together they had a variety
of different ways of doing agile and
they all got together and said what are
the commonalities that we have and it's
this bit in the middle that's really key
it's about saying individuals and
interactions and working software
customer collaboration responding to
change and that is what people remember
about agile when I go speak to people
who work in the Ministry of Defense who
work in the Army who work in the Air
Force so go talk to people intelligence
agencies they say this agile can't
possibly work because you only care
about responding to change you have no
process no documentation
but actually what the agile manifesto
said was while the things on the right
have value we value the things on the
Left more they have more value than the
ones on the right
it doesn't mean those things on the
right have no value so we value
individuals and interactions over
processes and tools there are tools and
there are processes and they are
important they matter they actually help
us deliver software but not if they
prevent individuals from interacting
with each other
not if they prevent you from actually
going and talking to operations team or
talking to the person who's going to use
your software if the process gets in the
way of the interaction it's not a good
process but a process that ensures that
we can do it repeatedly that's a good
process on the vision it encourages and
informs individual interactions working
software is more important than
comprehensive documentation we should do
documentation documentation is important
it helps that if I am run over by a bus
my co-workers can continue the work that
that I was doing and documentation helps
them do that but if I have a 200 page
manual on the system but no working
system that manual isn't very useful
either so working software is more
important than the documentation you
have to do both we have to have working
software responding to change over
following a plan I have never seen a
Gantt chart that are still true a day
after it was written up whenever I've
worked on projects and you look at is
this project going to be delivered those
charts are lies they are entirely
fiction they represent when everybody is
desperately hoping that software will go
into production but they're never true
they're never ever true I turn up to
boards and project boards and they show
me this wonderful chart say this is how
it works I go that's awesome I'm gonna
go talk to the developers I talk
developers may like yeah we've been
saying for about a month that we're not
going to hit those milestones but you
know the management of determined that
milestone was announced publicly so we
can't miss it so you know we're not
gonna miss the milestone it's just not
gonna be the day that they said it was
going to be which is a fairly common
thing we hit the milestone we just
didn't quite hit it in the same way
responding to change is really important
because it turns out we can't predict
the future
I've tried over and over and over again
and I cannot predict the future I cannot
actually tell you how long it'll take me
to implement a function I can give you a
good estimate and give you a good guess
but there's a narrow margin in there and
when we're building software all those
Martines add up quite a long way a long
way and the people I talked to they
might say I really want that blue and
I'll implement it and it'll be blue and
then I'll show it to them they'll be
like no no the other blue and you go
back again responding to change is
incredibly important it's much more
important than following some plan that
was written six months ago
and finally customer collaboration over
contract negotiation it is vitally
important that you are not implementing
what is written in a fixed document that
you're talking to the customer to what
they want because quite often they don't
understand what they want until they see
it they don't understand how it works
until they see it and the person who
interviewed them and wrote it down had a
view of the world they wrote it down and
then you read what they wrote down now
your is as if you're talking in three
different languages the chances that you
got down exactly what was intended it's
very unlikely so you need to be able to
collaborate with people contracts
planning documentation processes and
tools they're all important they're all
incredibly important they helped us
build software repeatably they helped us
have confidence in the software we build
but more important is collaboration
change deliverables and people so for me
agile means building software together
having a team that is built around how
we're going to build the software that
includes everybody one of the teams that
I work with has three developers one
operations person two lawyers one
procurement consultant and a project
manager all sat together in the same on
the same set of desks the conversations
that you hear from that team are
fascinating because it turns out
developers and lawyers are actually
quite similar they speak a foreign
language to normal human beings and
they're sticklers for details and
pedants to a fault the team also
particularly liked tea so they often
have tea and they they all go out and
they'll get tea together and they'll
have tea cups and so forth when those
software developers are trying to
implement some part of the software and
they're like oh is this gonna break the
law is it is it are we asking the right
question they can actually turn to the
lawyer something that's next to them and
ask the question directly and when the
lawyers aren't be charging you for every
three minutes of their time it turns out
they're quite happy to respond and to
answer and we make their lives easier
which means they like us teams that work
together the build software together are
much more effective and
about support and trust that team needs
to needs to know each other be able to
support one another and trust each other
and it means that management has to
trust that the team is going to do the
right thing that they can set the goals
and the vision set the direction but
leave the team to own the delivery
version of that the other thing that
actually gives us is a push towards
building simple systems simplicity is a
key to agile it is to me
agile is the art of maximizing the work
that we didn't do if I built a
requirements document that I know a team
two years down the line are gonna have
to implement I'm gonna put in every
requirement that might have to come up
because I don't know and I'm not gonna
be able to revisit it or change it later
so I maximize the amount of stuff that
could go into the system and then
everybody who reads it is gonna go oh
well I didn't know quite how that
requirement meant so I'm gonna implement
every possible option which means I end
up with massively complex software and
that software doesn't work as well as it
can but agile is about maximizing how
much work you don't do it's about
looking at it and saying what are we not
gonna do today we're gonna focus on this
bit and deliver this bit and we'll worry
about the rest another time as then says
your code is is not an asset everybody
thinks of code as an asset it's a value
to the organization it's not as a
liability the more code you have the
harder it is to change the more you have
to maintain it the more difficulty you
have in a variety different ways of
dealing with it your code is a liability
so you should minimize how much code you
actually have you should minimize the
amount that you're producing again as an
also says agile is about minimizing the
lead time for delivering business value
the faster I can do what the business
wants to do what the organization is
there to do the better the organization
can be and it doesn't matter whether
your organization's job is to sell
widgets is to trade stocks on a stock
exchange or to deliver benefits to
citizens across the country delivering
the value is what you were there to do
software developers aren't employed to
write code that is an important thing
you need to unsend in agile software
developers job is not to like code their
job is to build a system that does what
the business needs it to do and code is
just the way that we do it but code in
and of itself has no value it's not
important so what does that mean how
does that actually manifest itself today
agile has changed over the last 10 years
a little bit
minimum viable product or service that's
the MVP the term that people use one of
the nice things about this this term is
that um you as a development team get to
pick what minimum means but your
customers get to decide whether it's
viable or not you never really get to
decide whether that's going to work so
you have to build the smallest thing
that you think services the needs of all
of your customers and then you're gonna
iterate on it you're gonna change it
you're gonna put it in front of real
people have them use it watch the music
and then you're gonna change it so that
it gets better and you're gonna keep
doing that over and over and tell it's
the best it could possibly be in the
smallest amount of time the smallest
amount of deliverables to do that you
have to release early you have to
release often you have to be able to put
it in front of people and change it and
put it in front of people and that's
incredibly important in agile how do I
get that to that to happen I have to
build processes and tools that help me
do that
they're still important the UK
government formalized this this is now
developed methodology we start with user
needs government exists entirely to
serve the needs of the citizens the
reason that government exists is to
collect taxes so that we can pay for
healthcare so that we can pay for all of
the functions of government it exists to
provide benefits to people who are
trapped in the worst ends of life it
exists to ensure that you can visit a
loved one who is in prison it exists to
ensure that you know other people who
are in other cars on the road are
legally allowed to do so because they're
qualified they know how to use that car
and they're not going to kill you it
exists to ensure that beef that is in
the animal market doesn't get ground
down and fed to other cows because
that's unhealthy it exists to ensure
that the land that you own stays yours
and nobody can steal it the government
is there to deliver those user needs so
we start with that and when we talk
about a digital service we start by
saying we're going to do a discovery
that's a short period of work where we
say what are those needs and is a
digital service the best way of meeting
them or is there something else we could
do how should we best meet those needs
and how do we ensure that we can build
on the metres needs we then build up and
we build an alpha that is normally paper
prototypes or a little very simple flat
HTML prototype something that we can put
in front of us very small number users
we're talking
ten fifty a hundred people at maximum
throughout an eight week period where
you can put something in front of them
and say does this work for you I can go
out and see a farmer with a laptop and
say if you needed to claim money back
from the EU how would you do it is this
process going to work and they all look
at it and say I need like seven
different documents to fill this in and
that one's here and ones that my
accountants office this is really hard
and we can revisit how that process
works because while it's a simple thing
that's drawn on paper or a HTML mock-up
it's credibly easy to change once we've
got an idea that we have a service that
actually works we start going into a
beta process and we're building bigger
and bigger services we're allowing more
more people we start connecting the
backends and the data and we start
having to deal with users data and hold
it once we have done that we are
continuing to change that service the
entire way through and eventually we put
it into production live in front of
users but we don't stop changing it we
don't stop reevaluating am i meeting
every users need are they being able to
use the system we keep changing it
continuously in live government is
predicated on building projects they
have a start date and an end date but we
change that we've turned the government
and said you build services and services
don't end if you need to enter services
because you are actually deliberately
choosing to withdraw the service and
that's a different thing but services
should continue to change tech still
needs to be collected every year but the
way that you do that changes the way
that people interact with you change
their needs might change the way they
interact with accountants might change
and you need to be able to change that
continuously when you throw it over a
wall turn operations even saidan not my
problem anymore it becomes a terrible
system for people to use we don't want
to be there so if we're working with a
team that works like that I have an
agile team I have a small team of
developers or a large team developers I
have a team of over 100 developers in
one of the projects I need to say how
are they going to build a system that is
secure because security is the team that
says no it has to review everything
that's happening but my security team
can't review every change going into a
production system every time they happen
if we're doing this agile thing like my
security team gets quite upset when I
say this because then they start saying
but where's the specification that I can
check it against how do I understand the
security properties so what we did in in
the government is we got together some
of the smartest security people that we
could find we started looking at some of
these systems and we came up with sets
of principles we
the best way that we can build security
into these services is to have
principles that anybody can follow
they're not designed to be used and read
and understood by security professionals
because those people have you know like
me they're very special they need to be
read by normal people these be read by
normal developers they need to be read
by test doesn't need to be read by
anybody who's working in those teams so
we come up with a about three different
documents at the moment and for for
those principles the first is protecting
personal data people want to trust
government mostly it would be nice if
you trust the government but people do
trust government to hold their personal
data the government probably knows how
much money you weren't last year it
knows where you live it knows what kinds
of car you have it has all kinds of
information about you and it is vitally
important that you trust government to
hold that data securely sensibly and
safely so we produced a set of
principles on how to protect personal
data in bulk because lots of companies
do it fairly well but we're seeing
reaches happening all the time so we
need to make sure that we're building on
good principles and these principles
there the URL is here and I'll put the
slides up later but the principles cover
essentially know what data you are
storing and make sure it's the right
data and it's proportional understand
who has access and understand how it's
kept if you follow principles along
those three lines you will generally
build a system that protects the
personal data appropriately so we can
give people principles that say do
things this kind of way think about
these principles and then they can apply
them per service we also think there's a
set of principles for securely building
services so we produced some security
design principles and these are divided
into four categories the first one is a
before you start what do you have to
think about in advance before you build
the system at all make sure you have a
couple of those principles make your
services hard to compromise we can cover
all the things that we do that make it
hard for somebody to actually compromise
the service but services get compromised
so if we assume reached if we assume
that service will be compromised we can
also apply some principles that say how
do I reduce the impact to compromise how
do I make it hard for somebody who has
compromised my system to have continual
effect on the system and then finally
the other critical thing that people
forget is how do we know if my system
has been compromised
so what principles can you design into
your system that make it easy to
detects the compromise and these these
principles the security some principles
I think we came up with 22 or so our
principles that help you understand that
so you should do network segmentation
that means it's hard to move around move
laterally within your service
you should have Trust batteries in those
segmentation so that services on the
back end don't just trust that
everything on the front end is good and
happy and healthy
you should have auditing that no links
of elsewhere those are the kinds of
pencils that we put in there to say if
you build a system this is how you build
it and finally the one I'm going to
cover the most of is the principles of
risk management
so risk ISO 27001 is a risk management
tool it is unwieldy and unreadable and
they show an information security
specialist to be honest it's pretty
unreadable even if you are an
information security specialist it's not
a lot of fun so we tried to boil it down
to the simplest possible things that we
could in a modern world in a world
that's designed this way and we came up
with eight main principles that you
should understand the first one is
accept uncertainty it is very easy for
people who deal with risk every system
has risk to assume that they understand
all the risks and that they can manage
every risk but you can't ever reduce the
risk to zero
you can't ever deal with it you have to
accept certain amount of risk and more
importantly there is risks that you
won't understand that you won't know you
it is not possible to know every
possible thing that could go wrong so
you have to start on the premise that
I'm not going to be able to do that so I
need to be able to go as far as I can
but no further that's a really important
part the second thing is that security
has to be part of the team security
cannot be external to your system design
your system implementation and your and
your general system it has to be part of
the team that builds it because security
cannot be bolted on later
you cannot just sprinkle some magic
crypto dust over the top of your system
and go tada it all works I've got public
private key encryption or HTTPS and it
always it's fine
that's not how security works it has to
be embedded in the design of the entire
system has to be thought through
everywhere you need to understand the
risks and everyone needs to understand
the risks in order to know whether
you're doing the right thing or not
doing the right thing you have to know
what risks you're taking
you have to be able to trust the
decision-making in the team the team if
they get to make the decisions about
what things to implement what to do when
to do it as an organization you have to
be able to trust that they're trying to
make the right decisions
everybody is trying to do the right
thing so trust that decision-making and
make sure it's there security is part of
everything it is not the special it's
not just firewalls Security's how you
design the business process security is
how you ensure people interact with the
system and this ties into the sixth
principle which is one of ones that to
me is the nearest and dearest of my
heart
um user experience has to be outstanding
security merely has to be good enough if
you build a system where the system is
secure but to use it properly is too
hard people will circumvent your
security systems and they will be it
will be a worse system the security of a
general system is much worse if I build
a system where I have to change the
password every single day the chances
that I'm going to write that password
somewhere insecure the someone else can
get it becomes very very high and the
entire security system is compromised
because I've made it too difficult to
operate so the security has to be good
but the user experience of using the
system must mean that people choose to
use it in the secure manner it has to be
as easy to use in a secure way as
possible if I trust the team to make
decisions I need to be able to audit the
decisions not to blame them but so we
can go back and say why did we make that
decision and can we can we make sure we
don't make that decision that way in the
future or when did that change how did
that change why did that happen we
believe in trust but verify so make sure
that you trust people to make
appropriate decisions but verify those
decisions are the right ones find out
who made them how they were made what
the decision-making process is so you
can go back and reflect on how that
works and finally if you're building a
system and you're weighing about risk
you need to unsend the big picture
impact again it's very easy for
developers to say I'm gonna install
vault or kms or use something to manage
my keys and it's a very small siloed
thought about doing key management but
actually your system has a wide system
is a much bigger thing and you need to
understand the impact of every decision
you make on the bigger picture a good
example we have is there might be
situations when you interact with
someone else in an interesting way so
the UK government provides you with
information about your benefits and one
of the pages you can go to says how much
how many how much money would you get
from did you get from your benefit last
week so you can go and check did I get
paid the right amount but many banks ask
if you if you have a security check with
your bank and I found out my bank and
say I'm so and
so and so forth one of the questions
they're commonly say is how much money
were you paid in in your last paycheck
if my system can reveal easily how much
money anybody got give them got paid
I've just broken the bank security
system and so we need to work out how we
do that we round the numbers
appropriately to beyond what the bank's
care about and we talk to the banks and
make sure they understand that
so understanding the big picture impact
is vitally important so how does a j'l
help if I'm doing security in that way I
am gonna take a breath at some point I
promise how does agile make this better
how do I build secure systems within
agile well the first thing is if agile
is continual delivery of business value
if I'm constantly changing how much
value I'm delivering I'm constantly
continually delivering in the the in the
system then I'm also continually
accepting the risk and I'm changing my
risk profile on a on a regular basis so
how do we do that in agile well first
thing is security needs to stop being
the department says no and needs to view
itself as an enabler the security team
inside your organization their job
should be to enable everybody else to do
things well and in a secure manner and
as soon as they get their mindset the
things they focus on change dramatically
I'm gonna move slightly sideways for a
quick point there is a difference
between safety engineering and security
engineering and very rarely do the two
meet in security engineering you assume
a malicious user you assume a system
that is working perfectly but somebody
is malicious somebody is coming in and
trying to hack your system and Insider
is trying to break get data around
something bad is going on because of a
bad actor in safety engineering you
consider everybody to be a good actor
but you assume bits of the system are
going to fail and you try to work out
how they fail in interesting ways
very rarely - those two processes of
thought combine together to allow you to
say what happens if if a malicious actor
is it's using a system where something
has failed or what happens if one if one
of the people inside your safety
critical system turns out to be
malicious and deliberately turns off the
failsafe
how does your system work combining the
two together is really
and the two predicates I always have
it's security you think about malicious
users a hundred percent of your users
are evil and that you need to work out
how to deal with the fact that you still
need to deliver business value in that
situation in safety engineering you need
to remember the important predicate 50%
of your users are below average and are
likely to make mistakes if 50% users are
below average how is that gonna work
with your system and bringing that
principal over to security matters as
well how easy is your system to use
securely if 50% of the users are below
average and don't really want to do the
appropriate things instead of assuming
that everyone is a great minded happy
nice person so back to agile the unit
delivery is the team that's what agile
tells us the team delivers itself the
unit of decision making is the team and
insecurity when we think about risk we
have to think about every decision has a
risk impact so how do we do that in a
normal organization the security team
will go off into a risky impact
assessment they will look at what the
security risks are and the delivery team
never see that in many cases I have
worked in organizations or I've worked
with teams where there is a document
that describes every possible risk
that's in the system and that document
is classified and none of the people
building the system are allowed to read
it which makes it quite hard to build
the system because you don't know what
could go wrong because the document that
tells you what could go wrong you can't
read and then you have security people
going but I wrote all this down why is
the system still crap it's like well
because you classified it why did you do
that so the first thing is educate the
team to the threats in government that
can be quite hard because some of the
threat intelligence that we have is
classified information and that means I
need to get people security clearances I
need to ensure they can come and be
briefed appropriately need something
having to share that information but a
lot of the time the information isn't
terribly classified if I'm building a
system chances are any reasonable person
can think through what the threats are
if they just took five minutes to do so
so helping the team understand those
facts and documenting them
one of the systems one of the benefit
systems I work with has a concept of of
anti users so we generally have you know
user profiles who is going to use the
system this is gonna be used by this
kind of person and this kind of person
a person well we have bad users who is
gonna try and break system well we know
that independent hackers might we know
that journalists might be interested in
this we know that state-sponsored actors
might be interest in this criminal gangs
fraudsters by building up those those
pictures and having those as posters
hung in the development teams room all
of the development team were aware at
all times who are the people who might
be bad actors on this system and what
might they do to the thing I'm building
educating the team to the threats helps
them understand what they're building
the context in which they're building
their code and means that they can build
better things you can keep a running
risk log with we're experimenting with
different kinds of wiki's or
confluence or issue trackers that track
risk so you say here are the the 20
risks in my system and at any given time
anybody in the team can look at it and
can see what are the risks and every
story has risk decisions applied to it
so every time I play a story it says
either it counters that one of these
risks or adds a risk to a risk log or it
does something in there and that means
that when I'm when we sit down and
somebody says we should have a password
reset the screen and something say all
that adds a bit of risk to people doing
people stealing people's accounts that's
a valuable thing to know because then
you can start making a decision on a per
story basis about what risks you're
willing to accept some what you're not
you can apply controls per story you can
say actually we're going to require
two-factor authentication if we're going
to turn that feature on because we need
to put that in there as well and you can
start building security controls in on a
per story basis and that's not perfect
because security is holistic so that
will work in in the small but actually
the security of the whole system is
going to change but much like developers
are used to the concept of technical
depth which is a way you make decisions
now that you know you're gonna have to
go back and undo later because it's
quicker faster better delivers better
value we build up security debt in the
system we know what decisions we took
and what risks we are taking we can look
at that risk log at any time the the
governance board can look at the risk
blog every week and say how is our risk
position right now and then they can say
whoa we know we need business value but
actually we're now running to higher
risk we need to focus on some of that
and remove some of that damn
some of that damn and it's more
expensive to pay off later we can apply
all of the standard debt rules that we
have the other thing is that simple
systems are more secure if I built an
agile system and it only does 10% of the
functionality of the intended full end
system it only has 10% at the surface
area so we're building a more secure
system one where we understand the the
methods and all that stuff and that
means my development team can continue
building day in day out understanding
the risks understanding the security
even though they're not security experts
they can understand the impact of what
they are doing they can understand how
the system works and again security has
to be the easiest option for them doing
things in the secure manner must be the
adoption when I decide I want to use a
base image in my virtual machine right
now the easiest option is to probably
just go pick the default Ubuntu image
but what if my security team creates
base images that are already locked down
and have all the packages we don't care
about removed so that it's a much
smaller much safer image if that image
is there available for me by default all
my teams will use it what if all of our
counts have to FA enabled by default in
AWS consoles so that we know that if I
get given an account it won't be
compromised it's easy to create a new
account in there I can still do it in an
agile manner but security of making sure
that the options available to me are the
the easy options available to me all the
secure ones and that's where security
needs to change the way it thinks and
start saying how do I make that easier
how do I make it so that you can run
penetration tests inside your acceptance
testing process and that's how I talk to
developers but turns out systems aren't
just developed they're actually run and
operate it as well and that's changed in
the last ten years quite a lot as well
DevOps has come along and DevOps is a
terrible term that means a different
thing to every single one of you and
probably different thing to me as well
but there's a couple of common themes
that we get from that
the first is infrastructure is code so
those you've used puppet or chef for
ansible or you're using cloud formation
or you're using any of the modern
services for for building and
orchestrating your system you have your
infrastructure defined in code so this
is what ours looks like for gov UK for
the the front page of of the UK
government's website
we publish all of this publicly anybody
can look at how we can figure out
systems anybody can look at how we set
up a system so this example is a varnish
I believe yes the varnish config so it
says when I say varnish should be
installed here's where the template file
should be here's how it should be
configured and it gets me a set of a
complete varnish so I can say put
varnish on this box and it will just do
that and there's codes that defines how
that works that means that we have
shared infrastructure it's really easy
to see how it works more importantly
that's not just infrastructure as code
it's infrastructures testable code which
means that I have a set of tests that do
things like this this one is for nginx
but it's a set of tests that confirm
that our configuration for nginx if you
add aliases does the correct thing in
terms of creating the hosts in the right
place with the correct names based on
the domain name that you expect
which means common myths configurations
that we would have done before we'll be
caught if our code is incorrect so we
can run a set tests on our code
continuously to say have we miss
configured any servers have we done
something that is inappropriate do we
know that we have disabled HTTP on port
80 on all of our internal servers so
that they only talk over 443 because
that's what we care about we want them
to be there so we have tests that saw
that we haven't accidentally configured
port 80 because if we did that that
would be a real issue the other thing we
can do with those tests is we can run
automated tests this is a set of tests
this is a smoke test that we run these
are written in a BDD style tool thinking
cucumber and what they do is when we go
to do a deploy we deploy to an internal
cluster of machines and then we run some
tests where we go and try and fetch a
number of the standard pages and that
confirms to us that all of these
infrastructure is working as expected
the requests go through they get served
by the back end they come back and
everything works and that's that's
amazingly powerful for us because it
lets us know that we haven't missed
configured things it lets us know that
everything works the way we expect we
haven't broken things which means we can
change things quite easily which means
that we can deal with patches so when
open SSL has a vulnerability some of the
organization's I work with in government
a year later have still not captured it
because the rollout of the patch process
is so complicated that they can't do it
it can take three months or six months
to get it into the
cycle to get into the change control
board and deployed into production but
when we do that we've infrastructure as
code so we can say what machines are
affected well how do I know what
machines are affected by a pattern
engine X let's say there's a security
firm ability in engine X I have this bit
of configuration this is a puppet again
that says this is how I can dig arrange
an X and the critical thing here is that
at the top you can pass in a version so
by default we just say it's a it's
present and when you say passing a
version it will ensure that version is
installed so I can then do something
like grep over the code base what
versions are currently configured in my
code base and we use something called
Huayra
which configures the puppet and says for
these these different hierarchies and
machines this what versions are sold so
you can see that our precise machines by
default were running one for four but
we've actually updated almost everything
else to be one for six so that they're
slightly newer the front-end machines
are running one for six that's
configured across all the frontier
machines but the back ends have been
held back a patched version for some
reason within this this command took me
two seconds to run and I don't work on
the operations team for the web Ferg of
UK but I can look at this and
immediately say I know what machines we
have that available if I know there's a
security release one four five I have a
clear indication about what is
vulnerable right here right now that
information took me a few seconds to
find if your organization isn't doing
this how long do you think it would take
you to find out how many machines you
have and which ones are running version
one four five because I'm gonna guess
it's longer than a few seconds you might
have to go consult the documentation but
what are the chances the documentation
is actually accurate and matches what's
in production this code is redeployed to
production every 10 minutes or so so the
worst case I have here is that this
might be wrong but if it's wrong it's
only wrong by ten minutes that's a
pretty good understanding about what's
going on in my service what about when I
want to update it well actually all I
have to do is check into the test
environment Yama file a new version one
four seven committee get it pushed it
get it pushed and suddenly all of my
test machines will upgrade themselves to
one four seven and I'll be able to run
tests and check whether that patch works
or not in the entire test environment
and that's awesome what I'm saying I
find that some of the machines it
doesn't work for let's say the back-end
and front-end machines the backing
machines there's some reason one four
seven breaks the way that we have it
configured that patch is urgent to me I
want to get it out to the front-end
machines now we'll do some development
and testing and we'll roll it out to
back-end machines in a couple of days
well I can do that as well I can change
it so that I only change the test
front-end versions to 147 instead so I
can specify which machines get it once
that's done I can repeat it in
production severely but just doing the
commit and rolling out the ability to
patch machines at that speed to be able
to understand what's going on in my
infrastructure is critically important
to understanding that I have a secure
system so what does that lock combine
give me if I'm doing agile development
and I'm doing this DevOps II thing which
is agile operations and I'm doing them
together I'm getting automated testing I
know that the application does what it
was supposed to do I know that it does
it every time
I have continual validation that I
didn't just break something from before
by changing it and I can also put
security testing in there it is possible
to automate the low-level of pen testing
tools or to put in things that say I'm
going to check that you have a CSRF
token that is appropriately set I can
put checks in to make sure that I don't
break fundamental security properties
that I care about we have service
service I worked with where we had
checks that when you added a bank but a
bank account to an a to an account that
it wasn't a bank account that was
flagged as a malicious bank account we
have some information from banking
services that that we can call an API
and say is this a known fortunate bank
account I can check that that
configuration is still present every
time and that nobody has accidentally
broken that which means I know that
security property is true of my system
that automated testing is amazingly
valuable for me as a security property
as well as for reliability in integrity
property of understanding whether the
system is still doing what it's supposed
to do and whether it still delivers on
the user needs
I get infrastructures code I've talked
about this already but you know you get
the ability to actually look at
documentation that code is the
documentation for the system and we go
and talk to security experts and
security people who are responsible for
the the systems in production you start
talking about infrastructure as code and
they're like oh god anybody can change
anything at any time
you show them that you can audit that
code and they go you've just saved me
six months of work I can actually focus
on other things they suddenly get why
it's valuable to be able to see your
infrastructure written as code to be
able to apply tools on top of that to
find out information
what changed when when did we release
that patch how often do we patch our
services for the last ten major patches
for heartbleed for open SSL for for log
stash for whatever it is you know all
those things how long did it take me to
actually patch it I look at the commit
messages and check was that patch within
a day within seven days have I met the
SLA is that the security team requested
of me suddenly you get a massive amount
of audit ability that doesn't exist in
all of those Word documents that are
stored in repositories that nobody ever
reads again I get fast repeatable
deploys and fast repeatable deploys
means I can do it more often it means
that I understand that it'll be the same
every time I understand that it will
it'll be reliable and that makes it very
easy at 3:00 a.m. to be able to apply a
security patch when I went to go work
with one of the department's they
deployed twice a year that was their
formal policy once every six months they
did a deployment there's not entirely
true they deployed six times a year
because they did a deployment they
always scheduled a second deployment two
weeks later to fix the bugs that they
had caught before the deploy but didn't
have done to fix and to fix two weeks
after that to fix the ones they caught
after the first deploy so if they did
they did six deploys a year when we
spoke to them we discovered the
deployment instructions had changed
every single time they've done a deploy
there was not one instance where they
did a deploy where the instructions
weren't wrong and they would fix the
instructions and then bite six months
are gone by the system had changed
enough that the deployment instructions
were no longer accurate every time when
we went in and we said we want to do
this regular deployment thing and they
freaked a little bit and we overruled
them which is quite nice sometimes a
government I get to go in and just hit
people with the stick of power we have
ruled them on we built a system that we
deployed to ten times a day and they
were absolutely freaking out that we
were deploying ten times a day after
after a week we pointed out that our
operations engineer had now done 50
deploys and there was not a single
person in their organization that ever
done 50 deploys of their existing
systems
when something
at 2:00 a.m. which of the two engineers
are you gonna trust to be able to deploy
the security patch in a hurry the one
who's done 50 deploys or the one who's
done four in his lifetime it's that's
that's not a great place to be so those
were peaceful deploys matter hugely it
also matters that we can automate those
we get audit logs I know who changed
what and when I have a history that
tells me exactly who decided to turn off
the firewall rule that allowed something
in I know exactly why the firewall rules
change they're often the comment on that
c'mere I can link back to a work story
and understand why that change happened
and whether it was appropriate so when
we do have an incident and everybody has
incidents we can do some really good
trace back to say why did we make the
decision and did we not see the knock-on
impact and how can we change our
documentation our process to make that
better we get code review of
infrastructure changes we have a two-man
rule nobody can commit into the
production repository by themselves they
have to create a branch and issue a pull
request and a second person has to
review it before committing it that
means that every single change to every
one of our production servers has been
seen by two people that's vitally
critical and that gives me confidence
the system works why does that matter
last last couple slides I promise and
the Australian Intelligence Agency the
Australian signals Directorate produced
a document that's that's down here that
said that 85% of cyber intrusions on
government systems in Australia could
have been prevented by it by doing four
simple things they said these four
things could prevent the majority of the
intrusions they see as a government
organization against persistent targeted
attacks the first is application
whitelisting servers are only running
the the processes they need to run what
turns out puppet does that for me
it read checks every time are the binary
is still the same binary is the
configuration still the same
configuration is it running the
processes I said it should be running is
it running anything weird it does that
for me
patching they said people not patching
the operating system is is one of the
critical things that mean that people
cut other that you can be attacked but
again we patch our Frank system really
regularly because we do changes all the
time that's really easy
they said patching a second time because
it's so important
they say patching your application your
open SSL libraries and so forth is
really important again my DevOps gives
us that as well and minimizing
administrative controls
Australian intelligence actually looked
and said the majority of systems
administrators are logged into their
admin account and also browsing the web
and reading email and that means that
they're very easy to be attacked via
those mechanisms
none of our systems administrators log
in to the servers on a regular basis we
very rarely log in with an
administrative account because we don't
need to we push code and then we tell
nota mate at all to do the deploy so we
very rarely have this problem as well
there were a whole new world of problems
that's a very simplistic wave but done
well those agile techniques about
development about operations and so
forth mean that we have more secure
software better than we've ever had with
the old-style security says no system
and that's that's my hypothesis in my
backing up as to how we do that it is a
requirement that I have to tell you that
we are of course hiring because the
government needs awesome people and some
of you may not be able to work for the
UK given but I do i do say government is
in desperate need of people from the
tech industry like if we don't do
something we will be left with a legacy
of terrible terrible IT services that
are maintaining the security and your
personal data across the entire world in
every government in every place so if
you can't work for us work for your
government work for your local
government work for your local council
but please we need smart tech people
working in government to help make it
better
these days the UK government is doing
agile doing DevOps releasing multiple
times per day we are using docker in
production we've overtaken many startups
in London now with the speed at which
we're doing things that's a great place
for us to be to be able to say the
government can do this stuff and you can
do it in this environment it's no longer
a stuffy place with bowler hats and
canes and so forth as you can tell I'm a
civil servant so that's me at Brampton
school please feel free to contact me
and I if we have any time for questions
we can do questions thank you
so I can take a breath now right yeah
yeah okay one very easy question do you
work with James Bond I'm probably not
allowed to tell you okay um a nice
question regarding the talk we had
before how do you treat third-party open
source libraries so I yes
the same way everybody else does we're
spending a lot of time looking at the
supply chain at the moment I absolutely
echo that the supply chain in software
is a fundamental vulnerability to modern
organizations and it's something that
needs to be looked at it needs to be
addressed there's a huge number of
startups people working in that area who
are trying to make it easier to
understand what impact that has on you
and where it will change but it's got to
get better it's gonna get better over
time with we're trying our best as well
as everyone else to work out how on
earth we deal with the nodejs dependency
chain like the fact that somebody can
have a lively for padding characters on
the left and break more less the entire
internet is insane like from a security
perspective if they change that library
to do something horrible who would have
known that they were now running that
production it's a it's a world that
terrifies me completely they're the best
we can do is look for people like I am
the cavalry and say how do we get this
better okay what is the best way to
maintain the risk look over time I don't
have a best way I don't believe in best
ways because everybody's company's
different
I hate wiki's it's where information
goes to die but actually the continual
updating in the continual ability to see
it works really well I know some other
organizations using issue trackers and
just you know managing it a little bit
to keep the risk log the critical thing
is anyone should be able to see it and
it should be very easy to connect it
with your story tracking tool even if
that requires a person manually updating
it that would be sufficient but index
cards on a wall will also work quite
well okay last question can you imagine
diversify governmental solutions at
regional or municipal levels in order to
mitigate risk and increase robust
and we think about that question for a
second federated systems are really hard
to secure it's a it's a really hard
problem the the problem you have is ramp
trust boundaries so who trusts who in
for what things and so forth there are a
variety of good federated systems we
know ones that work we know ones that
don't a government has to do a certain
level of Federation and and delegation
of authority to different organizations
and so forth so it's an ongoing
challenge I like to believe it's
possible
you can't ever reduce the risk to zero
and all we ever do is move the risk
around so I don't know quite what it
would look like but it can't be worse
than it is today right that's that's
that's the thing I keep telling myself
it can't get worse okay thank you very
much Cheers thank you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>