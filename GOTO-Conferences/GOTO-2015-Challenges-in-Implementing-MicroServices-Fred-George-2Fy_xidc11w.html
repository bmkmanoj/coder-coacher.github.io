<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2015 • Challenges in Implementing MicroServices • Fred George | Coder Coacher - Coaching Coders</title><meta content="GOTO 2015 • Challenges in Implementing MicroServices • Fred George - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2015 • Challenges in Implementing MicroServices • Fred George</b></h2><h5 class="post__date">2015-10-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2Fy_xidc11w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so this is me first of all you should
understand that I'm going to talk about
some strange things today because
basically I'm a change agent also known
as disrupter in the in the literature
now so this is the the management
literature talks about disruptors it's
so the role in an organization where you
go in there and question everything and
I do that pretty well in fact I had a
job description at one place in London
where I was described as the hangar and
a being thrown into development if you
can get that job description you should
take it it's a lot of fun to do this so
basically I probably go in there and do
the things that that Eric was talking
about last night I create that
environment that Eric thinks is ideal
for the programmers that's kind of what
I go in there and do and have you have a
broad background obviously I get
evidence a long time I wrote my first
code in 1968 I still write code so yeah
I have a lot of tools to sort of make
this disruption happen but if some of
you sounds weird today it's because I
tend to live on the bleeding edge so
this may be something you're not not
ready for now five years from now
hopefully it's pretty pretty interesting
so reason microservice is kind of
springing up in parallel not two places
I noticed that when I go to conferences
people are talking about microservices
gorgeous implementations then I've never
even heard of them before and so I think
it came up for a lot of recom common
reasons and some of the common reasons
have to be around the technology so we
got some technologies now that really
allow competition to go attack with the
yeren to starve yourself attacking big
companies or whether you're a big
company being attacked the fact that
some technologies are there helps you do
that I mean cloud computing I no longer
have to go out and spend millions of
dollars on machines before I can before
I can have a system I don't have to
spend thousands of dollars on
programmers you know per day just to try
to get systems up and take a year I can
get started out with some of the stuff
ahead of time and I got frameworks now
they just kind of let me go build a
website within days that lets me sell
things there used to be a really long
process but also it's happening on the
business side there's some business end
occurring Silicon Valley's provided us a
model for how to run businesses it's all
about finding customers didn't worry
about trying to make money off of them
we can find customers you can find
investors and so they provide you know
lots of role models for the startups to
attack accelerating business needs I can
tell you that I put that on charge for
the last you know 35 40 years I spent
days done the same
we've already it always goes faster we
think we're going fast and we go faster
the other thing is is really nothing to
stop your business from being attacked
by some people sitting in India that
allocates the space on the Dublin
servers and all of a sudden they can be
in your marketing it can siphon off your
best customers because they can find
them because of social networks they can
find your best customers and siphon off
at the top so this is some of the
reasons micro service is rising because
it lets you go do some of these things
faster the other thing it's sort of
described as we're solving different
problems today than we're solving back
in the day when I start writing code and
I think this represents it quite nicely
this is the Knebel from a guy named Dave
Snowden it's not the other Snowden it's
Dave Snowden and he didn't get any hits
anymore by the way and he kind of
divides the world into different types
of problems
he said simple problems are problems
where the cause of defects were very
straightforward there's complicated
problems for the cause-effect
relationship is a little more convoluted
but it exists kind of the domain of the
expert to help tell you ever do that but
he didn't stop there he also said their
problems that are complex and chaotic
and complex problems with those problems
with a cause-and-effect relationship
cannot be figured out yeah if something
happens you probably figure out why it
happened but it does not help you
predict the future so these are things
like most your recommendation inches
should I loan you money are you good
credit risk what books do you like to
read based upon which you've read so far
these are sort of questions that are
sort of complex financial markets google
adwords complex problems and complex
problems cannot be solved with some of
the same techniques use will complicate
it
there isn't an expert you can the
manager can't tell you how to do it
better because he has no idea the expert
can tell you about a cause he has no
idea the causal effect relationships are
not just
a lot of the organization structures
that try to solve complex problems with
the roaming organization structure
struggle one of the things Dave Snowden
has said is most problems you don't know
the type of problem it is until you
actually get in there and look at it and
see how it behaves and you have a
tendency to drag a problem into your
segment where you like to work so if
you're a politician everything is simple
you elect me I'll fix it
we'll raise the taxes or lower the taxes
whatever it's going to be it's an easy
problem of course there's not um you
know if you're an architect you must
think well it's just complicated like
everything is I'm an expert I can do
these things just tell me just give me a
chance to do this stuff but it may not
be that type of problem myself I tend to
like to live in chaos and complex worlds
so I'll tend to make things you know
complex of regardless but this is the
domain where a lot of the new businesses
are coming up it's a complex to me and
because the organization structure has
been targeted for either simple
complicated problems a lot of workers
who struggle when they get here so again
we're solving new types of problems
we're not doing payroll all the time
we're doing you know what why would you
want to save money for your Christmas
present how do you want to you know and
you want to save money for your next
boat or something and how do you
motivate people to sort of saving your
banks so just quick summary of micro
service principles since I'm kicking off
this track oh there's probably general
agreement among us that have been
playing with this for a while about
these very things they're really really
small compared to what you've seen we
sort of argue about how small a small is
but it's kind of a moot point
I think Adrian Cockroft the guy who
helped the CTO that put together the
Netflix stuff he sort of said you know
team size of one it's what anything say
if the service takes more than one
person to design and implement it and
maintain it it's not a micro service I
think all of us kind of agree with that
to some degree so we kind of like that
idea
loosely coupled as much as possible we
like the idea more in mobile versions at
the same time because that makes you
faster services would kind of have to
monitor themselves to make sure that
they are working correctly it's kind of
responsible review service and not if it
doesn't work to sort of raise his hand
and say I'm not working this one we kind
of stole or at least google it really
exploit the hell out of this one is that
if you do something interesting you
should publish it don't worry about who
needs it
let's just take
too long if you do something interesting
you should publish it somebody may find
used for in the future but they don't
want comfort come find you to get you to
change something so we kind of flipped
that model on its head and whole concept
of these application boundaries you know
forget that all the batteries become
fuzzy in this world so it's kind of a
summary that principles we're talking
about
so we get on until the challenges and
this is kind of a common theme behind
all the challenges and some of the my
preliminary question story hit hit on
this that is right now we're really in
experience about what microservices do
we're just starting to play with this
stuff in the last couple of years and so
right now are the things we're talking
about our sword is still emerging so
take everything is being okay very very
early experiences and you come back five
years from now in it I suspect some of
the things were saying are absolutely
nonsense all right so let's talk about
some of the challenges associated with
this so one of the initial challenges is
synchronous or asynchronous
microservices so this is kind of a very
subtle point but there's two ways to
sort of build these micro services and
you'll see yeah most most solutions
falling into one of the other of these
interesting enough I was on the stage
with oops mm-hmm actually that's not the
first one first challenge is actually
technologies choices so question is you
see micro services microservices not an
isolated technology if you think about
micro services being an isolated
technology kind of missing it micro
service has been enabled by a lot of
things happening at the same time the
cloud the emergence of event buses
certainly doctor and Cassandra and
frameworks like that but it's also you
have all these things like agile
programming anarchy and if you're there
last night you know the concept of one
hacker way different ways of working
they're emerging as well you got DevOps
and full stack developers you have
entire conferences now about DevOps and
it's got an emerging idea that says you
know you kind of take that and treat
that differently now and you got things
like Minimum Viable Product and Lean
Startup movement even on the business
side and there's a common theme running
through all this stuff
and that is this all about going faster
we're trying to figure out ways to go
faster if you really want to go faster
you say well first thing we'll do is
microservices inward we're worried about
some of the other stuff later you will
miss the point you will not get your
benefits if you got an organization and
insist I'm gonna have a dedicated ops
team we're gonna make sure we deploy and
rigger boundaries and we're gonna make
sure our database stays up-to-date
micro-services provides you nothing
you're gonna have to buy off on a couple
of these things at the same time if you
want your micro services be successful
but you can't go faster so this is a
chart this comes from a company I worked
with in London this is called a for
technology group at the time and
basically it was how fast can you go and
they actually published their github
stats this was a team of 50 programmers
then they were deploying something new
in production every three and a half
minutes so you think you're going fast
now you can probably go faster
I think adopted almost everything you
saw in the previous chart to get that
speed not all at the same time they
started doing it but yeah again we want
to go faster what we do next
DevOps what about the next thing docker
they just keep nibbling at nibble you
probably go faster and why not doing
almost everything on that chart okay so
that's actually the I got my shorts
backwards here so that was actually
challenge number one which is shown here
is chalice number two it's not just
micro services that was the challenge
one one challenge to is synchronous
versus asynchronous so synchronous
versus a cigarette two styles of micro
services um I have a colleague Chad
Fowler I think he we know chat really
well um former thought worker himself
worked in India he and I happened to be
on the same stage talking about micro
services a few years ago in Dublin no no
he stood up there described micro
services just nailed micro services
absolutely and said basically you should
use the synchronous micro service
strategies of default in other words
here's a service basically invokes
another service probably restful calls
was Jason invokes in another one folks
another one so that's kind of the
architects you want to put together
because that's how people describe the
problem we're kind of used to that as
programmers because this is more
traditional structure so he says that
should be your default structure
I stood up after him and I basically
said yeah it's really nice
chants all wrong about the answer the
answer is asynchronous the idea that you
wanted to basically really loosely
couple these things build your
algorithms differently and yes it may be
hard for your programmers but you should
teach your programmers you know what I
mean by an asynchronous architecture so
it sort of comes down to this is one of
my favorite metaphors for that it's
happened to be at the time when I drew
this had a new iPad and was on an
airplane couldn't have anything else to
do with my finger so I just kind of drew
this out but the idea is I call it rapid
rivers and ponds and it sort of starts
up there in that upper right corner one
of the things that's happening in the
industry is we're moving away from the
concept of a relational database that
understands the operations it's not an
operational database and a reporting
database we've kind of have these two
databases because one they have to
optimize differently who won for inserts
and updates one for reporting that
original top database that operational
database is dying and then you look at
Silicon Valley it's been replaced many
times by an event bus so rather than
saying that yeah I'm gonna keep track of
every entity perfectly across my
enterprise it's kind of like this is
your email address today and you change
it these are two valid data points don't
worry keep just the last one keep them
all because they may be interesting and
so the idea of this is is to take these
four route the events are going on and
put them in basically a bus and they
have every single event going on on that
bus then clusion log messages includes
traffic stats includes user journeys as
well as the sort of message running
through that that's a massive amount of
information so you want to kind of pull
off messages from that rapids into a
river sore me and drinking water has has
a little more theme to it so pull it off
an attack your services to that you
still have a need to have static
information for reports because frankly
reporting in sequel databases do work
really well together but basically you
do that by sitting here listening to the
rapids and if you happen to see an email
address change will update the record if
you get a new customer well then you an
insert on a rut custom record but sit
there listening to the rapids make your
changes to your your your reporting
databases I call those pawns because
they're stagnant
they've lost that time nature of the
information so that's kind of the
metaphor that we were talking about
doing a relative to a synchronous
services and it creates some very
interesting new architectural patterns
sort of based upon the fact I have a
high capacity event bus and there are a
couple these out there my favorite right
now is Kafka Kafka is the bus that
LinkedIn uses so again everything going
on we touch link in every time you talk
about your your your reference somebody
look up somebody's little events being
generated lots of little applications
being springing up doing all social
analysis of that and etc and so the
Kafka bus actually is really dumb at
some level but really really fast you
can put a quarter of a million message
the second on that bus accordingly
messages very few out of your
applications probably cannot took that
bus with I take every load when you log
messages take your user journeys take
your traffic stats you're not gonna go
load that bus down then the great thing
about LinkedIn is they gave this away so
this is an airline Apache project the
documentation of the Apache website is
excellent really motivates the whole bus
unfortunately when you say two hundred
thousand messages a second they cheat
and how they count so write a message
once you read it 10 times that counts
for eleven messages so you put a hundred
guys on this guy all of a sudden maybe
it's not such a high capacity so you can
to put little things on the side I like
to use the rim queue for this to put a
little service on the side and create a
river so the idea is I'll pull out every
message off I put the ones I kind of
like and I'll pass it on to my children
so mine basically my services will
attach to a river so you don't took the
bus and take capacity out of the bus but
they'll of course always publish the
rapids by the way Kafka buses in
debugging everything that happened your
systems on there already you have to go
to your log files and try to correlate
those and put your other events together
in traffic stats and get a little time
machines it's already there you'd start
debugging nine percent your debugging is
already done by having it on one stream
it's a very powerful concept so that's
this sort of architectures now allows us
to build some different sort of styles
of applications click OK click works
this way
or not there we go so when you solve
applications sort of a sort of
asynchronous services so I Drive an
asynchronous micro services I mean sort
of really decoupling on these sort of
lines so another architectural pattern
story emerges is something we call the
need pattern so basically you're a
service here you just kind of put on the
bus that says I need something here you
came and apply for a loan
do I want to lend you money that's a
need and hopefully there's some guys
down there listening for this need and
they'll provide some solutions so the
blue service may say you know a couple
of different opinions about well they
should lend you money the Green Service
has its own opinion you collect these
opinions and basically make a decision
the nice thing about this is it's easy
to go right version two of the blue
service and run it at the same time you
don't have to tell that blue service
about you don't tell the yellow service
green service could care less it's easy
to do you just try you different things
again again very powerful architecture
for the complex problem some by the
kennefa model you might think about this
easy put variations in there but also if
the green service goes down we're still
running we're getting opinions we're
making guesses anyway but the system's
still runs extremely robust of course
you know where the green guys goes down
there's all sorts of other bells and
whistles going out to try to get him
back up but the system hasn't stopped
itself so a very powerful sort of
architecture around that yes probably
you should hold the question because we
a yeah I'll go into action animation of
this in action which will generate even
more questions that's what she'll I pad
apps for you know you felt these on your
phone so let's say I got a website
associated with renting cars we'll call
it 2 Hertz and so you got website doing
that some some you know legacy web
server doing that so if I want to put
basic some advertising in these slots I
want to try to target some advertising
to you based upon choice because I can
make some more money off you look we
call this share of wallet well I want a
higher share of your wallet when you
come to my site so I put a
high-performance bus in there put myself
a little service that sort of interface
to the existing system a little micro
service of its own right right
sell a couple of services are gonna
provide all first to you so I have a
corporate level little service running
that pads love information it's probably
the company level so if it's Hertz maybe
it's a weekend program they went to rent
on but each individual of Hearts
location can have its own little service
running that's sort of two new
themselves they can say have a surplus
of a certain type of vehicle I like to
put those on sale and get those rented
out as well
they're running independently of each
other but I can also add some
complimentary services here like
segmentation or membership membership is
of your or you remember our frequent
renter program one of things they've
realized you know companies like this
have realized is if you're already a
customer it's way easier to hold onto
you then it is to basically try to win
you back so you should offer discounts
to your current customers just to sort
of keep them around make them keep them
happy segmentation means I kind of
divide the world up into you know how
you behave it turns out if you rent cars
during the week during the week you
probably are doing a corporate travel
you don't pay for the car so putting an
advertisement up there that says give
you a discount
not very worthwhile well then they have
you do rent during the weekends you're
probably paying for it you do like
discounts so it's something that you
tune quite nicely so how is this work in
action so I bring up a web page that
sort of says I have an opportunity to
put some ads up there this little guy
will publish a little message to the bus
these guys here care about that because
their basic listening for any event
that's associate with that so they pick
up that message these guys until you
know who it is they can't do anything so
they can they don't care about that
message these guys basically come up
with solutions of their own push these
solutions up we take those solutions we
listen for those solutions back in the
little green box and we kind of do a
redirect and post those messages to the
to the web page notice that I'll do a
redirect because this is not a data bus
it's an event bus so I'll probably just
carry around the message a URL that says
go to these URL link it has all the
content you want to show on that page I
wouldn't put it on the bus itself
all right so now I actually you know
comes along and I find out as Sally like
she logs in or I dropped a cookie on her
site and who she is that Jerry is a more
interesting message for the more
information of course everybody cares
this is fact with Sally is here now so
they all picked that up and take that
message again know these guys know that
Sally is an existing customer this
enough information says okay I got a
better offer for an existing customer so
let's go make a better offer for that so
they make different offers based upon
that additional information push that up
now there's anything happens this point
obviously those message get collected by
the first guy but despisers comes down
to the membership membership says Oh
Sally she's platinum she's where are
really really really good customers that
would get everybody excited so basically
the membership stuff for just adds more
information to the packet and pushes
that pack it up and clicks it clicks
finally yes um so notice that you know
I've got a solution yet but it's more
information I took the original
information that about yeah I got
somebody here is her name is Sally and
it's in a way Sally's platinum of course
these guys down here there's another
offer as far as they're concerned
another opportunity because they know
more so you push that message to
everybody else and of course now that I
know that Sally's not only a only a
current customer but Sally's also
platinum you get really excited for
platinum people you're not let them to
go to Avis see you basically poll is up
and you keep collecting these messages
as well and you keep going on and on and
we'll add segmentation information etc
that's the nice synchronous micro
service notice that they you publish
some message into the bus you don't know
anybody's listening you have to sort of
design your algorithms to handle that
but notice if I have a better idea for
how to do corporate advertising I just
pop it on the bus try it out
deployments really really fast in that
environment so you sort of have a
service taxonomy in this sort of
architecture first of all you have a lot
of different channel interfaces
according to what type of browsers are
supporting or you supporting an iOS
device or an Android device
whole different micro serves for each
one of the
because they're different but you have
all these sort of processing services
sitting on the bus
you saw example of solution services and
the enrichment services the ones that
had the segmentation or the other stuff
but you can also be keeping track of
what I've showed Sally so if I show
Sally an advertisement five times she
still hasn't clicked on it
don't sure it again and I got a service
sitting there looking at you know where
we're showing Sally and why she's taking
it and also I got guys sitting here
looking at Sally's existing reservations
Sally has a reservation in Houston it's
showing his reservation why would I want
to give her a discount for Houston I'm
just giving you money back so block
those sort of solutions so again until
the service I can add in there making a
little more sophisticated I'm basically
I'm building myself an incremental
system where I'm continually improving
the system as I go as I get more and
more ideas by the way we built one of
these systems for a hotel chain we
charged him three million dollars to
build a system I think he made 40
million dollars additional revenue in
the first six months of a pretty simple
system otherwise and they were arguing
about how they should have bought some
IBM product for that instead you're like
no it's up and running you just made 40
million dollars go away
so yeah rich with service kind of just
reap adds information to it republish
it's a packet back on the bus
these guys are providing their
information and you sort of you know
adjudicate among these things judge
among the services things you want to
show with that also it's to your point
logging and monitoring is very very
important because you need to have some
idea what's going on but it turns out
extremely powerful is the capability of
watching and measuring your KPIs if all
your events are on the bus I'll almost
guarantee I can put a KPI monitoring up
there how much money am I making when
did I make a sale those sort of kpi's
can be monitored and monitored very
aggressively just by hanging something
on the bus so a very very powerful
concept behind this as well so
asynchronous the sort of style which is
difference tile of algorithm very much
kind of like when Map Reduce came along
all the rolled algorithms don't work we
have to have new versions for Map Reduce
in order to get Hague advantage of that
a cigarette has that same challenge so
your programs not gonna be used to that
but has
huge advantages in terms of deployment
speed the ability to a be testing built
into it
so let's kind of your first challenge
you want to go synchronous which is kind
of easier for your programmers or
asynchronous which has enormous business
benefits okay
challenge number three the database so
turns out that the database itself it's
kind of like you gotta basically tear it
apart the concept of having this big
operational database is the thing that's
going to slow you down
because every I was actually listening
to a micro service presentation in
Australia last year and the guy stood up
until an amazing story about how fast
they can deploy as long as there's no
migration of the database I'm like wow
that kind of it's a pretty big
constraint you have you touch the
database we have to slow down it's very
very calm so you have to tear this thing
apart fact Chad Fowler is now at six
wonder Kenner in Berlin first thing he
did was basically Tara's database down
in terms lots of small databases then
started building services around that
concept so you got to chair the database
it down so you know the challenge you
come up with is how many databases
should you have and the answer is you
know if you're talking to sort of the
the people in the big companies the
answer is I want to have one because
obviously an entity database is
absolutely perfect is it perfect for my
business and that's been a Holy Grail
fact I was talking to in a different
hotel chain was talking to the chief
scientist or chief architect rather and
I say well how many databases do you
have well I'm a troublemaker so I asked
the question he said well I have three
I'm trying to get down to two I'm really
embarrassed by that and I told him by
the way the answer is three hundred it's
the last conversation we ever had which
was kind of okay because he was going to
talk to his vendor after this meeting to
tell him about this new waterfall
process I didn't really want to talk to
him either
so what happening is we're going to
there's basically this event bus is
being sort of the operational quote
database of some sort and so basically
each little micro serves you have to
have persistent has its own little store
holding what it needs to do its job but
nothing more so very wet we get little
things and you can use whatever database
makes sense just because you need a
relational database with
with transactions doesn't mean all the
rest of us are stuck with a using sequel
server we can use the database of choice
that we need to use very powerful
concept it turns out only about 10% of
the databases are actually written into
most or read only and only a tip
probably a temperature that 10% are
actually transactional in my experience
so is only about 1% of databases need to
have the transactional databases so I
put one there put a sequel server put a
my sequel whatever you want to do there
so examples sort of some of these
databases going back to this example so
this little guy up here the green guy on
the corner here which was basically just
pumping out little messages and we
collect new solutions I'm probably
setting him up as run in four different
containers I got somebody up there
sitting at the top the event publishing
who basically says when the page comes
up I publish an event to the bus and
then I basically have another piece of
code that's sitting there collecting all
the answers and putting it in a read its
database it's also running in some
container and if I happen to be
supporting ie6 though why are you wait
for 3-hour milliseconds looking ready to
database for the best solution so far
and pop push it to the web page if I get
if you come back to the same page I got
all sorts of great answers already
cached I run it that way
so for different containers but I call
this one micro service because it's
sitting around one little database which
is a pretty simple database it says you
know Sally these are the offers we found
for Sally for it's pretty
straightforward similarly down here from
the membership database membership
sitting here basically it's just a just
a look up between Sally and what level
of membership he is so it's quick a
little service doing that little key
value stores all I need is I'm probably
refreshing this every night from the
data warehouse to see what the latest is
and are probably it's unlikely they can
actually export key value pairs so I'll
write myself a little micro service that
runs into the corporate database pulls
it out builds my key value store by the
way if this doesn't run tonight that's
okay I'm running with slightly outdated
data I can live with that
it's a pretty robust system so again
little databases all over the place in
this architecture so that's the thing
you have to worry about it you got to
tear that into a database you'd be
affected with micro services fourth
challenge this one is a big I feel a
little uncomfortable ISM because I'm not
basically a closure programmer kind of
real
novice closure programmer but it seems
like they have a choice of either using
micro services or closure or functional
programming languages in general so let
me sort of go into why I think this is
kind of an important question because
both of these are actually very powerful
technologies and she wants to click so
in my world micro services are like like
object oriented
and I did a lot of done an object
programming for God since late 80s and
sort of this is kind of my idea of how I
carve up my systems I try to make as
many classes as possible as long as they
do something interesting if use the word
and in a definition of a class I make it
mean I make two classes we try to
minimize the communication we have
persistence of course persistence now
made you a little database so basically
is the same sort of design principles
for micro services that we stole from
object or any programming concepts but
look at it sort of closure program and
how close your programs look tttt
closure love share data the whole
concept of you know is sort of
functional program is that we like to
concept of immutable data and yes it's
not all about immutable data but it's an
aspect of it so what you want to do is
you write a lot of transforms that take
some former data move it to another form
of data and whatever we did this by the
way the Daily Mail we use closure to
take basically adjacent representation
of all the content we want to know our
webpages or instance of transforms to
change the HTML a very successful
project but you look at these little
data structures in the middle he had
sort of these arrows what's in the
arrows and what you see is it's kind of
a map of a high of a map of an array of
hash of maps it's come really complex
data structure this past to the next
phase to let him do this next
transformation it's not very likely
another service once this data it's very
very tuned to the functions themselves
and so why would I separate each one of
these yellow things into its own micro
service when I'm passing around these
massive structures of data that are
basically immutable so it's sort of a
question I have in my mind and in fact
I've had experience now within three
different companies trying to play with
this
so I'm gonna sort of show you how many
services we had the language was you
wrote the man and sort of some degree
how were coupled them together so we'll
start with forward that was a company in
London I was with them they we did our
first micro service implementation
around in 2008 we have over 300 micro
services running we wrote them in Ruby
for front-end stuff node.js for traffic
monitoring closure for heavy lifting we
just are for some interesting analysis
of data originally we would kick these
things off with cron jobs then we went
to restful interfaces and finally went
to a more asynchronous structure with
Kafka buses so very much the stuff I
described as things that we came up with
it forward then I went to the Daily Mail
and we had closure doing the heavy
lifting of doing the page
transformations but I wouldn't call them
micro services only three of them it was
for thousands of closure but 4,000 lines
of closure you can move the earth
they're not micro services in any way
whatsoever boy all of our traffic
monitoring was done with node and they
were really tiny in fact the average
service was around 18 lines of code
they're really really small we had lots
and lots of them and we use RabbitMQ as
kind of communication mechanism so again
closure but not really micro service
closure they're kind of much more heavy
than that and then I went on to work in
a start-up in California where we're
doing a lot of things like this it all
think of a color off arrangement
thinking that I should with Hertz we had
about 25 services originally written in
all enclosure we use a little
orchestration ravening and qubit
interesting enough the number kept
shrinking because some way would say
well why do I want to you put it as a
separate service why can't why don't put
these two services together because the
communication between them is this heavy
heavy data stuff why do I need these
separate services so I'm kind of feeling
like maybe there's some conflicts
between using closure with its concept
of large data structures and the like or
moving to sort of micro services there's
kind of a new hope on the horizon I'm
I'm kind of hopeful I'll learn some
things here and that's basically
elixir Yammer elixir is basically a
functional programming language but no
the Erlang virtual machine and of course
it has lots and lots of
a little process is running and it kind
of feel like I feel like microservices
so I'm hoping I'll learn something by
playing with this language song but
functional programming or microservices
I'm not sure that they're not some way
to conflict with each other
all right fifth challenge what are you
gonna use for your architectures and
frameworks and the problem here of
course is we're new
we haven't really we've been still
playing with it these concepts of spring
frameworks and their equivalents or are
you merging up hasn't happened yet I
probably won't happen for quite a while
the good news is there's some candidates
coming out there really quick first one
I would point out is a lot of open
source frameworks that play with this
stuff
Netflix meaning this champion here on
Netflix by the way very much a
synchronous micro service architecture
versus the asynchronous stuff I showed
you very much a synchronous structure
they write it in Java and they have some
very very powerful frameworks that sort
of allow them to have all the a/b
testing whatever there were 40
open-source projects coming out of
Netflix about how to do things in fact
this is kind of the stack that a lot of
large companies were beginning to use in
the US I know the Department of Defense
in the u.s. usually is building a new
application on Netflix stacked it's
extremely robust extremely powerful by
the way Adrienne Cochran game would say
it's probably on the capability of any
one person to understand all 40 of these
frameworks so some of these things are
quite complicated but very very powerful
nevertheless the other thing interesting
thing is happening is the node community
themselves the node community is getting
very active in micro services they tend
to have that core philosophy that says a
library should only be one thing anyway
so a concept of building smallest of
small functions as part of their nature
and you're starting to see a lot of
frameworks come out of these guys Seneca
is these are this is out of a company in
Ireland near Forum they've embraced
micro services Ren calls this one
interesting enough we use a 0 mq which
is what any little favorite frameworks
so a lot of these things in that
thinking but still it's kind of an open
open season on what actually it's gonna
be great frameworks I think I saw
recently an advertisement for IBM this
said yeah websphere now supports micro
services I'm
seriously you bring up a whole websphere
for a biker service No
so people are getting in on even though
it's not just a good idea
all right next challenge despite the
fact we really needed at this point we
haven't got the Gang of Four book yet we
haven't got a design patterns book for
micro-services yes and books are
starting to appear the one by Sam Newman
same Newman just published one of the
first books about this stuff everything
sam says is actually gorgeous it's well
worth the read it doesn't talk at all
about asynchronous services but a lot of
the infrastructure you need to worry
about it's covered very very nicely in
that but it's not a patterns book it's
not something you pull out and say
here's a problem here's how you should
solve it the recipes aren't there yet so
that's still yet to come the good news
is the micro service community itself is
getting together and talking about micro
services this new dedicated conferences
too that this one was in Berlin the
beginning of the year there's another
version of this be in February of next
year I was in two weeks ago I was in
Poland and a dedicated micro service
conference as well so it starting to
emerge as well so this is where a lot of
these things are happening we're sharing
our stories with each other I think some
of the patterns will emerge from these
sort of conferences I mean while they
the meetup groups are legion they're
running all over the place Silicon
Valley has had one for quite a while the
one in Ireland started up not too long
ago love their logo so much more
interesting logos and everybody else but
you know basically there they were
getting into that so people getting
together and sharing the information and
if you haven't be playing on micro
services yourself find yourself a group
to talk about it you'll share your
experiences get collective knowledge
from the other people as well because we
don't have the patent gotten patterns
yet there are a lot of bad things we can
try and we'll fail on now last couple of
challenges we worry about is first of
all and this kind of goes back to that
first slide about going faster we got to
interact with the business differently
they way were interacting with business
with traditional agile is outdated I've
certainly went to the presentation last
night you sort of got a taste of that as
well and it's my experience as well to
some degree we kind of have always
assumed that what they
conversations about what to build needs
to change I grew up in the days of the
stone tablets we basically you know put
two requirements in fact to some degree
in fact we have requirements process
like this it's kind of my fault well not
personally my fault but my generations
fault back when I start writing program
a big program was a thousand lines of
code I mean a monster was two thousand
so I said down with you cussed rewrite
because I can write that much code
that's not a big deal when you got to be
sixty thousand lines of code some of the
operating systems you had to have a team
and that means the team has to work with
each other it's a little more
unpredictable and all of a sudden we
started telling the customers why don't
you tell us what you need we'll go build
it for you and we got really good at
telling them to go away and that's kind
of why we came with stone tablets that's
why you have to write this thing in
stone tablets you have to sign it in
blood this is what you I want to have
and we built our industry around having
these concepts I'm doing that that works
really well when you know what you want
to build but if you're working in the
complex segment as kennefa def ammonal
talks about you don't know what you need
to build my favorite story is what's the
difference we know customer and used-car
salesmen answer a used-car salesman
knows he's lying
so a customer say this is what I want
it's like I don't believe you let's try
it see what happens so we're moving much
more into the fact that we're trying to
try ideas out we want to move into an
environment we're trying things out
which means a much much closer
relationship treat the customer so why
here as an idea come and tell us about
it this is a mantra we used it forward
experimentation drives innovation I love
that because experimentation means we
will try things and fail
we call them experiments just to set the
expectation we will fail my role in a
lot of these companies has been when
things break and people complain about
that I tell them to shut up we're going
to go keep going fast oh we know you
have some more meetings we won't have
this problem if we have a spec we won't
have this problem we're gonna go fast
shut up that means also that you know
the sort of the agile pyramid it's kind
of messed up as well so a few years ago
actually almost a decade ago I drew this
with a colleague at ThoughtWorks
and we you know everybody has talks
about stories we break stories in the
task but when our observations were a
task our sort of story
a part of a features features as part of
projects projects can be tied to some
overall business initiative and almost
all the agile processes say we should
interact at the story level that's kind
of nice
more often than not when I go to a
stand-up meeting and look at a client
they're talking about tasks at stand-up
meetings what tasks do you finish how
long we need to take why'd you work
takes so long working these things no
fun is being had what we really want to
do though is actually interact at the
feature level on with the business tell
me what you're trying to accomplish give
me some KPIs and then go away let me
alone you want it you want to have you
figure out how to work things I'm good
at algorithms so that's what I'm really
good at turn me lose temper with KPIs
are I'll figure our way to win trying
ideas out so we need to interact in a
whole different level than what agile
says we're interacting with in order to
make this work well also it turns out
the other challenge we have makes the
last challenge is the roles are outdated
like if you think about some of the
titles we have there are names of the
steps of the waterfall process all our
titles are associated the waterfall
process names not to say a good starting
point for this sort of stuff
so we basically have basically over
specialize to a large degree the theory
of course of specialization is that
specialists are more productive so we
want to make sure we exploit a
specialist
well we've realized of course is the
overhead of the communication among
ourselves among the specialists it's
been completely underestimated and you
want these huge imbalances of workloads
and a lot of inefficiencies and you keep
worrying about it you know more meetings
about why don't we have enough front-end
developers we need to hire some more or
you can't work on front acres you're a
back-end developer so you know again
I'll run across this a lot and my
challenge is to try to fix things so I
basically titles have institutionalized
a lot of this stuff so in fact I was
working again at the Daily Mail there
are 50 IT professionals in the group I
was working with between ops and and cue
A's and scrum masters and etc there are
25 titles and there was zero people to
what we're doing
so we got to fix this sort of stuff and
a much longer story about how we how we
handled that the Daily Mail but this is
kind of again tearing down the structure
rebuilding something much more along the
lines of what Eric was talking about
last night
so you got to fix this as well you don't
fix these organizational issues you will
not be successful micro-services so my
final one is and I cut a label it sort
of challenged nine through end and that
is we got that's gonna have the same
problem here as we have with agile
everybody's going to claim they're agile
everybody's going to claim we're we're
doing micro services we need to sort of
be very explicit about what we mean when
we say we're doing micro services we
need to label it a little more precision
than we're doing micro services is an
easy tournament throw around it's in
vogue so I think we ought to be talking
about you know give me a taxonomy what
do you mean when you say micro services
not that you're wrong but let's let's be
precise about what we're talking about
you know maybe maybe three dimensions
I've been thinking about so far oh you
know or how you six or a sickness is and
you're never 100% one or the other but
you know what you put your preference so
your preference from two asynchronous
your preference to a synchronous style
Netflix clearly preference to
synchronous they have some a circular
stuff but purpose the synchronous things
like the offer engine very much
asynchronous it's got some secret of
stuff in there occasionally but we
default as a synchronous uh how big are
these things and how many do you have
and tell me about your databases if you
have one database and lots of micro
services you're not there yet that won't
work so I'll wrap up with sort of this
graph of I drew I've been drawing a lot
of grass lately it's one things you do
we get older is you want to reminisce
about things
something reminiscing about lots of
things so this is a log-log scale just
get your head around that log log you
remember that back in school sort of log
log scale so it's the size of the
application in lines of code and it's
not a very popular thing but it's works
and you know how many services do you
have so I call that the rails in Java
zone because I spent a lot of time in
rails and Java applications trying to
get them fixed and especially one giant
application with lots and lots of code
in it I was around also for the
beginnings of some of the SOA stuff
had a chance to work with some bright
people and thought work so we're early
SOA pioneers and you have somebody like
credit Swiss sitting there with maybe 50
services but there are like 50 thousands
code each and that wasn't you know they
broke it up very nicely you got a lot of
benefits from doing that and that was
the SOA world I think this is the micro
service world it's more like almost a
ten to one ratio is kind of the boundary
here the line here in other words you
know have that and so you sort of I've
worked on a lot of stuff in that zone I
will never do that again
it's not fun I don't have to do that
anymore good you may be stuck with it
for a while longer that animation I
showed you sits about there we actually
at a workshop I run we actually
implement what you saw in that engine so
we spent a day and we write that code we
have about 15 services there never 100
lines of code or less there always 100
code or less that Ford group I talked
about the head over 300 that's where
they sit and Netflix right there they
have over 800 services they run about
one to two thousand lines of code Java
each but that's it they're based in a
micro service world so ply if you're
doing micro services plot yourself on
the chart if you're sitting over in this
area probably not micro yet it's much
more different than that so a good point
to wrap up here if you want more
information about this it's becoming
available you know very much like this
presentation they've been dog videotapes
being shot I think almost all the stuff
from the conference in Berlin is
actually online now so it was in German
so if you speak Germany get more more
than I can read but yeah go basically
just google for stuff it's a lot of
stuff out there now there's also books
there's also something a lot of stuff on
these other topics about what I call my
manager list process programmer anarchy
but obviously you know you should look
at some of the stuff that Eric talks
about as well but you know go out there
and research some of that stuff and
we'll wrap up by saying you know give us
give you session and writing please and
bring your questions and when I get four
minutes
oh I never finished early this is good
we got a lot of questions but I can't
read it without my glasses so you have
to pick them for me nope
yeah I'll pick one one ask just say he's
testing what about testing and
microservices oh well take know 30
minutes it turns out if you're using the
really really small micro services that
I do with asynchronous we tend not to
first of all do unit testing on these
things because frankly they're so small
it's like if it works it works it
doesn't work it's pretty obvious what
went wrong and we're deploying him so
fast
basically integration test is dead and
Exodus been dead a long time you didn't
realize if it's been dead but it's been
replaced by active monitoring you want
to take your running system and
instrument that and so it always says
testing itself because now we're
building you know complex applications
that have lots of external services you
want to know when the next terminal
services change their API or down you
don't get that in the sterile
environment called integration testing
where you hand it over to a group and
make sure it works so we're not that we
don't write them but we will write them
in terms of active monitoring if you do
the asynchronous services the KPIs are
amazing blackbox test you want to know
what's going on measure your KPIs so
wait so that's what we did it forward we
would have kpi's up we're working in
domains that had fast feedback you know
Google AdWords for example we're doing
Google advertising 20 minutes after you
do something you get results so
basically we monitor the KPIs
we put something out there whoa look at
the traffic goes up goes down not sure
why it went down in fact sometimes we
take it off it still goes down was it
our fault
no the tsunami in Japan perhaps but KPIs
provide a very very powerful integration
mechanism I know a training house in
London that are constantly basically
doing doing active deployments they just
deploy it constantly to the environment
but they're always buying and selling
things constantly in testing mode still
spend 10 dollars buy some IBM stock then
sell it so they're always running
transactions through that to make sure
they know when something goes down but
they're confident that when they put a
hundred thousand dollar transaction
through it'll go through so testing is
kind of have two answers one if it's too
small to even bother writing unit tests
don't write one by the way they do write
unit tests in Netflix for the you know
one or two thousand lines of code in
Java it's Java so one to thousands of
code probably worth unit testing
not so much when you're writing you know
nodejs services and it's 18 lines of
code so testing various thing changes
yeah and the number one if you can have
the time talks about the protection
problem so if you have a lot of
different views on the same piece of
code to just keep adding new predictions
and views what do we do
I'm not sure you mean by additional
views I mean certainly if I have one
service up and I have another idea for a
different type of service I'll bring
them both up in parallel and if I like
the way the first one the first one
gives me better answers I throw the new
one away if the new and gets me better
instance for the first one away
sometimes you do like Netflix and
Netflix actually live test everything so
if you deploy something in Netflix they
basically will take a subset of you and
you will be using new Netflix stuff and
if it crashes they'll all of a sudden
say oh excuse me well hit the restore in
your movie and of course they will start
back up with the old code but they'll
basically just segregate the users and
test in live environments so basically
you want to set yourself up so basically
going to have multiple versions out
there if you think you're going to have
one version something out there you're
gonna go really slow because of that
okay thank you very much thank you guys
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>