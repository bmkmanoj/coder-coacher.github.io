<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2015 • Challenges in Implementing Microservices • Fred George | Coder Coacher - Coaching Coders</title><meta content="GOTO 2015 • Challenges in Implementing Microservices • Fred George - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2015 • Challenges in Implementing Microservices • Fred George</b></h2><h5 class="post__date">2015-08-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yPf5MfOZPY0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning three yeses people still
floating in so I'll start out by well
you're just basically icing who actually
works in micro-services already today
yeah kind of scary
so I guarantee everybody raise their
hand is doing it differently because
that seems to be the nature of it right
now and I'm gonna address that a little
bit in my talk today so my name is Fred
George there's a lot of things they
could talk about that I've done in the
past because I'm old I think you sort of
the most significant thing so me quickly
works again there we go
it's basically a thing that I tend to do
is I'm in change agent with an
organization sometimes known as a
disrupter disrupter is actually a formal
title that the Harvard Business School
now talks about it's a sort of person
you bring into an organization to make
sort of very radical changes and it's
sometimes same with some of the
literature you know this is a short term
job you will get fired so I'm kind of
used to working you know four to eight
months and then they'll fire me because
they're tired of hearing all the
disruption I'm causing but I usually
leave behind enough good that they hire
me again somewhere else this is my one
of my favorite job descriptions ever
I was described as a hand grenade being
thrown into development if you ever get
a chance to be the hand grenade you
should take the opportunity it's a lot
of fun so they gave me sort of carte
blanche to do a lot of crazy things and
that sort of describes the most of my
career I tend to be on the edge of
technology the things I talk about tend
to be the things that are bleeding edge
in general if you're not doing the stuff
I'm talking about don't worry about it
it probably happened next five years or
so we don't feel bad about it because
your organization may not be ready for
it there are certain steps you want to
take to get ready for these things all
right look we're not gonna have an
interesting dialogue today
so why is microservices happening I was
at the conference in Berlin you know in
February and we were talking about
micro-services and James was there as
well and speaking and I heard stories
from people I never even heard of these
people before on Fridays I never heard
of before and they were doing very nice
job of micro services and so I began to
think about what's going on it's causing
all these things that happen at this
particular time and so if you look at
micro-services it's not in a vacuum
there's all sorts of other things going
on here as well you can sort of got the
cloud coming out and and lots of new
tools like docker and Cassandra coming
out and you start looking that's kind of
nice so these things that you seem to be
having at the same time and somehow
related to each other but then you got
agile and programmer anarchy and
manageress processes even though Jeff
was talking this morning about sort of
the lead leadership instead of
management sort of thing happening a lot
of that stuff's being talked about we
also have new titles floating around you
know we have DevOps and full stack
developer seems to be coming into vogue
now and then you got sort of the
business equivalents of these the lean
startups the MVPs and that sort of thing
and it's sort of common theme I see so
all these things and again Jeff sort of
touched on this and that is there's just
a huge drive to go faster that here the
speed of what you're going at if you're
not going faster your competitors will
be going faster and so one of the things
that's certain to be motivating this
move into micro services is this drive
to go faster and a whole lot of enabling
technologies processes and organization
tricks that we're putting in place to
make this happen
so because we like log large charts
because we in doing some of these I drew
a few log oriented charts as well so
this is a log scale on the side it talks
about how long does it take to get
hardware I need hardware to bring my
systems on how long does it take to get
it and so just starting back even in
1990 you know this is kind of how long
it took three about three to six months
to order a big piece of hardware and
actually that's a bit of a lie because
generally you had to basically allocate
the capital for this hardware in
September of the year before that's all
I can September this year you have to
figure out all your needs for 2016 and
you got to be right you can't have too
much or too little you got to having
exactly the right amount
so the lead SATs were basically horrible
at this point time and then virtual
machines came along saying it's a way to
carve up this hardware so I can sort of
allocate it much quicker but it's still
the process some would take some time to
get some of these virtual machines
allocated you think this has been solved
pretty easily but I was with a client
just last year and we try to get a
virtual machine put into their
enterprise systems so I can run some
software on it and they said yeah we can
get this ready in a month I'm saying a
month seriously you get a virtual
machine well yeah we're gonna break some
processes in the process and doing that
but we can do it in a month if we have
to and you're saying okay wow you guys
don't get it
because for a long time now we've been
sort of this world where the commercial
cloud came along and now it's no lawyers
so to take weeks for your IT guys to
sort of get this you can go to a
commercial vendor like an Amazon and get
something in an hour two or thirty
minutes or something like that we got
really good at that but even that we
didn't stop here you now got docker
which is you start running dock your
enterprise you break it when you using
your container in five seconds or less
and so you have this huge acceleration
now I went too far
all right see my work story end
Oh yup again ah good so the other thing
that's occurring here is not only do you
have all these things but you now have
an impact on the organization to some
degree the organization what's the need
for a capacity planning this is a
process that's institutionalized in a
large company I think he's going to turn
the volume down okay
this concept of capacity planning is
institutionalized as teams that do this
stuff it's part of the process you have
to have this you have to allocate the
capital there's a lot of momentum behind
these processes and it's dead if you're
stilling doing this your guys don't
understand an old concept of having a
dedicated ops team to run this sort of
thing which was really important or
perhaps even said if your virtual
machines allocate that's going as well
you don't need that when you're running
in these other environments
if you don't understand those sort of
changes you're not sort of seeing what's
happening what's driving their micro
services because micro services depends
upon being in the yellow zone if you're
stuck in the blue zone you try new micro
services you're wasting your money and
wasting your time alright another log
chart here let's talk about how long it
takes to deliver software so I'm gonna
rescale this one a little bit I'll start
back in 1980 that's actually well into
my career but I was in not working for
IBM at the time and basically I worked
on a project in that timeframe and I got
an award for the project because it
turned out really well and the project
he had started five years before that
and we had any delays that was the
schedule and a silver successfully I
also worked in a project that sort of
same timeframe that took three years we
had 1,000 programmers working in that
project and we delivered on time by the
way we made 1 billion dollars with that
software it was a windfall but you sort
of look at that you sort of say well you
know that's a long time to sort of think
about delivering things and even an IBM
when I was still in IBM and delano in
the early 90s yeah we were getting a
little fat
like that I was able to get pushed off
frog software out of my organization
about once every six months and then I
started you know started adopting object
wearing programming principles and
practices and yet we were still
delivering in three to six months cycles
so even that sort of technology kick
didn't really help delivery cycles at
all and then we got a little bit better
when some of the agile stuff comes along
and yes this is a log chart so a
straight line down is like a good a good
idea but agile comes along my first
agile project we had you know three
month delivery cycle by a followed by
another three months cycle and then we
got to up to two months we're getting a
little faster but projects weren't
necessary delivering any faster maybe
some internal either iterations were
fast and some other things but these
cycles are still pretty long and then I
got involved with some some other
companies doing some interesting things
and all of a sudden very very strange
things happened I call this a tube
because it sort of sets agile agile or
advanced agile or in a migrant active
sometimes programmer anarchy but we
started doing things associated with
organization structure to compliment the
idea what we could do with software and
we got to the point where yes we were
trying ideas out in a week and then we
got really really fast in fact how fast
do we get sort of how fast can you go
and just be sort of processes so how
fast can you go if you keep pushing the
envelope well I thought we kind of hit
the limit a while ago and it turns out
it's not the case so this is actually a
github stats a live github stats from
our from our project this is about three
years old now and you do the arithmetic
we were to pushing something new into
production every three and a half
minutes so you think you're going fast
now you can go faster again I never
thought we'd ever hit this sort of
number but you know as Jeff was talking
about in the keynote
yeah Moore's law kicks in with software
delivery as well and we're getting
brutally fast about how fast we can do
these things so it's a little bit of
what's going on and are you taking
advantage of that but two days is
basically this there's basically a lot
of supporting structure around going
faster and it's not just the software
process it's also the organization
impacts so the other thing is happening
is we're solving a different type of
problem and I really getting grasp
around this with the Kineton model for
a guy named Dave Snowden it's known
unfortunately a very strange name these
days but this is not thats notice the
other one and Dave Snowden was a
brilliant guy at under story
understanding Stan's problems and what
problems look like and he's doing this
nice diagram he sort of carved the world
of him these types of problems he said
there's simple problems these are the
ones where the cause-and-effect
relationship is very easy this is the
world of best practices because there is
a best way of doing these things this is
where you put in place a manager and
employees because a manager can teach
the employees how to do it better
because there are best practices and you
say there's a complicated world that's
the cause and effect is there but it's
much more convoluted it's a little
harder to understand and it turns out in
that case you have experts but experts
are expensive so therefore you turn
around and hire grunts to sort of do
what the experts tell them to do and a
manager to make sure it happens this is
a world of good practices not best
because there are lots of ways of doing
the job and so it's called good
practices but you know day didn't stop
here in fact now it gets really
interesting he says there are also two
other types of problems you can wrestle
with want to call complex and one called
chaotic and again goes too fast
in complex the cause and effect
relationship is not discernible yes if
something happens you could probably
figure out why it happened but it's not
a predictor of the future this is the
world of financial markets this is a
world of Google advertising this is a
world where you're trying to figure out
whether you as person over here is a
good credit risk or not these are not
deterministic problems and it's called
chaos with you you have no idea what's
going on cause it affect you're really
lost it turns out depending upon what
type of Paulo it is you want to act
differently you want to organize
differently you want to work differently
because there is no in the complex world
because there is no concept of cause and
effect there is no role for the expert
because he doesn't really know what to
do and so if you think it's you have
just need hire an expert you're yourself
if you're that type of a problem now
then Dave Sutton also talks about it
says most of the time you don't know
what type of problem it is you need to
watch it watch how it acts
and you'll tell you which of these
segments that goes into and therefore
you can sort of classify it and act
accordingly now he also talks about one
other thing here and that is personally
you tend have a prejudice for what's
thing but you like working in if you
happen to be a senior architect at an
organization everything in your world is
complicated right you just need me to
tell you what to do listen to me it'll
work well if you're a politician
everything is simple you elect me I'll
fix it you raise the taxes it'll fix it
lower the taxes it will fix it it's that
easy
of course that's nonsense because it's
one of these problems over here
so in Tintin I tend to be a guy because
of my nature and being disrupter I tend
to love living on that side of the world
because I think it's a lot of fun to
have chaos and sort of complex
situations and so I tend a bit
prejudiced myself that way as well but
you think about the lob problems we're
working on now are more in that segment
when you're talking about customer
retention you're talking about that
segment if you're talking about how to
do your financial accounting oh yeah
you're back in the complicated world and
you organize yourself differently so
we're solving different types of
problems that we solved you know ten
years ago because of the technology and
some of these insights we're getting now
so what else do you want to basically
worry about this sort of micro service
stuff and the other thing is you
competition it's going to do it if you
don't because we used to be a lot of
barriers to your competition coming in
and basically attacking you Jeff talked
about sort of the disruption of
occurring industries people going much
faster than everybody else so first of
all all that you used to be if you
wanted to get into a heavyweight
business you had to go buy some hardware
you got to find a million dollars
somewhere to be able to build hardware
and put a development team together and
get that thing operational and that's a
barrier for somebody coming in and
attacking your business that barrier is
gone they just go to Amazon and bump by
what they need on the day they need it
and so those barriers are gone and they
have these huge software libraries that
are free I don't even buy a gigantic
staff I just have to pick some software
off the shelf it's open source and I
have stuff that used to pay you know
hundreds of thousands of dollars for its
license fees but it's even worse than
that because at one level also you're
having business pressures
coming in Silicon Valley is now a role
model for how to attack businesses they
have technology stacks they have
processing their input in place they
have techniques they've done they've
grown from very small comes in very
large companies that is a role model for
your competition to come after you
follow some recipes those guys used
there's also very few inhibitors today
for global competitors they can be a
team city in India a little company city
in India who's attacking your
marketplace siphoning off your best
customers because they giving you a
better product and gives customers a
better product and one day you wake up
and look around says okay what are my
revenue per per customer it's going down
because all the best customers have been
siphoned off the top are these
competitors and they can find your good
competitors because of you know all the
marketing and niche marketing you can do
with social media so you're gonna get
killed by your competitors unless you're
doing this yourself and that's kind of
the warning we have to give companies
and again Jeff said that very nicely as
well so let's get into micro services
there's a lot of debate about what they
are what they are but typically we tend
to agree on these sort of principles and
these are basically they're really small
especially compared to the SOA services
of a yesteryear obviously I can't wander
the stage oh this was the definition
that came up at the conference in Berlin
the micro services conference and the
idea was if it takes more than one
programmer to write it and maintain it
it's too big it's not a micro service
anymore
and I think all of us sort of most of us
kind of gravitated to this definition
when it's proposed they're very loosely
coupled because loosely coupled services
means that going to be deployed faster
and more independently makes us faster
it's okay to have multiple versions me
this is kind of strange when you hear it
off here because why aren't you using
the latest version of my software and
you've what you try to push your
customers to do that but in fact you
liked running multiple versions if you
have a new version coming out your new
service you're writing then write the
new version keep the old one running
because the old ones being used by other
other guys let it keep working boy the
doing deploy the client who needs the
new one and you're up and running
you're faster if you don't try to turn
off the old one again going faster
services tend to have to sort of alert
if they don't can't do their job they
need to sort of stand up and say I can
do my job
we need our system to fail fast if
something's going to go wrong and we
didn't have this philosophy that we we
stole from Google us says you do
something interesting you should publish
it do not worry about who needs it don't
wait to the side Comcast doesn't do you
need this for me if you want to do
something interesting you should just
publish it and basically Cole concept of
application and what an application
means kind of disappears in this
environment the borders are very very
loose among these things you know these
may be trying to do this and just tries
to do this but then you you see how many
services tend to overlap so those are
sort of things we tend to agree on so as
I talk about the challenges and that's
what this is about because this year you
know I talked about micro services for
three or four years now
and you know and and I'm talking about
what it could be how to implement them
and this year I've been talking about
the challenges because it's not all rosy
Gardens
and there's a common theme to almost all
these challenges that is to some degree
we don't know what we're doing yet let's
be honest about we don't know what we're
doing yet we're inexperienced and so as
we find something it's like oh here's
the trend oh well it's not a trim
because somebody else did something
completely opposite even work better so
we're still trying to figure these
things out so my challenges was kind of
rude to the fact that we're still
learning in this process and it's still
new again I love the chaos world so this
is a very happy place for me so our
first challenge and I kind of sometimes
change my mind with it for number one is
but you know last night no this became
number one on the database you've got to
tell the database apart if you have one
of these big centralized databases
that's your operational store it is
holding you back because every time you
touch that guy you've got tests every
line of code to make sure you didn't
break something and this whole
organization sitting around trying to
make sure you can change this thing
safely my gradient on migrated all these
other things so you got to fix that
problem by getting rid of it so it's
kind of this becomes really interesting
when I talk to various clients about
this because I sort of asked a question
sort of because I'm a troublemaker
I asked how many databases do you have
so I was talking to a client not too
long ago a large hotel chain was talking
to the chief architect first time I met
him and so I kind of asked me how many
databases you have and he basically said
you know I got three and I'm kind of
embarrassed by that I'm trying to get
down to two because you should only have
one so that's very interesting because
the aunt right answer is 300 it was the
last conversation we ever had which was
fine because one of the things that he
was doing after this was going to talk
about the new waterfall process with his
vendor it's like I don't want talk to
you either dude so what do you really
want to do is you basically are going to
go and start using event buses this is
the new technology that a lot of the
Silicon Valley guys are using use event
buses for to replace that big monolithic
database and then basically every micro
service having these persistence has its
own version of the database but only the
summit needs to know now out all the
other fields and tables and all the
other nonsense just what it needs to
know do its job wait and we used a lot
of different languages we use the
appropriate
sequel of technology or non-singular
technology for that particular need it
turns out is we've been doing this for
them just a little while about 10% of
the databases are write writable most
are read-only and over that 10% only
about 10% of those tend to be
transactional and that has a profound
implication because just because I have
a transactional oriented system for that
guy over there all the rest of us are
not stuck with using oracle or sequel
server in order to do our databases we
can use the things we think is
appropriate which makes us faster so was
this event but sort of the stuff looks
like well one of my favorites were
models and and I drew this picture as I
was playing with my new iPad as I flying
across country a few years ago and that
is this is sort of my metaphor for what
I'm trying to build and the idea is
there's a rapid rapid is every message
from every place everything interesting
is in the same stream of information
and I called that the Rapids so not only
a message from the service are there but
also their log files every time you log
in something you're doing something
interesting publish it to the world
traffic stats in the log service stats
in the log putting it on that graphics
so every message that's flowing there it
of course that's a lot of information so
you call it call out things you need
sort of look at more closely into a
river it's a slower moving body of water
and typically you'll hit your services
into there there is still a need however
for entities so yeah we can kill the
entity oriented database for operations
but it's still a very important
reporting technology reports and sequel
databases make a nice family so there's
a need to sort of have what I call
stagnant areas where you just have the
current state of something but you kind
of lost all the time value nature of it
because of that I call it a pond because
they're relatively stagnant so how do
you build such a system well you need a
high performance event bus and sort of
one of my favorites and they're getting
to be more and more these out here but
one of my favorites I sort of understand
it at least to some good degree its
Kafka so Kafka is a persistent bus it is
the bus behind LinkedIn so every time
you touch Lincoln or somebody touches
LinkedIn or looks at your profile events
are being generated like in the droves
to this Kafka bus and they have a little
application looking this will get you
translocate who's doing things scoring
you suggesting people you want to talk
to all these little apps running off
that event bus and the lovely guys that
LinkedIn gave this so far away this is
one of these open source projects this
is now an Apache project the
documentation on the Apache site is
amazing you explain why the bus works
how the redundancy works with the bus
now it's super super reliable how do and
now how actually it's very very dumb bus
but it's also a very fast bus because it
is dumb
you can put two hundred and fifty
thousand messages a second on this bus
you gotta have a pretty big application
before all your log files and all your
events are going to drown a 200 mm
message bus it turns out though they
when they say to every 3,000 they made
200 2000 messages
but if you write a message once and read
it 10 times that counts for 11 so you
got to be careful how many things you
attach directly to this bus and so we
tend to attach things that then attach
other things these basically are the
rivers so you're pulling off all the
messages have a certain trait and
hanging those two corresponding services
and you sort of build those a lot with 0
mq or some of you can do a rabbitmq to
make that work and you can sort of hang
a few rivers off this bus and the other
guys that are really listening for the
messages it's okay to have rivers all
for other rivers so you want to keep you
know filtering messages and wasting what
you do then is you take this and you put
your services I'll attach to this system
I'm definitely not going to move far
from here so you attach your service to
this system basically by you listen to a
river but you're always publishing to
the rapids you don't publish to a river
because then people may not see your
message that want to see it always
publish to the rapids so the rivers
keeping from your basically listening
too many times to the Kafka bus but the
services themselves hang at that point
so this actually allows us to start
building incremental applications you
have another thing for that James your
little hashtag is never done yeah so
James calls has never done I call it
incremental applications it's the same
concept and so if you have this sort of
let's say I have a system that's
basically a car rental agency I'm trying
to put some advertisements today tell
you more goods on this car rental agency
so I got just a website and the way you
would typically build this application
incrementally is you get yourself an
event bus could be Kafka people rabbitmq
could be one of the other buses from
Amazon but just have a little service to
interface the event bus and then you
write some guys that can offer brands
over some advertising to go into spots
so you say event bus what basically says
you know I got I got an opportunity here
and these other services wake up and say
here's some answers and then I can sort
of continually find this application I
can add let me tell you about the
membership of this of this person may
I'll tell you what segmentation they
look like you know or their road warrior
do they rental the weekends which will
bias whips or offers I want to give them
I just keep adding more and more things
to the system all the time the original
system works
the social assistant works better I
continue to deliver this process this is
what we're doing way every two three and
a half minute deliveries we're
continually tweaking our system making a
little smarter so you look at where the
databases are in this world you can sort
of look at this guy
so you open a rental office what you
really see is this there's a little
piece of code called the event publisher
that says oh I have a need to have some
advertising he published a little event
to the bus his job is over there's
another guy sitting on the bus solution
collecting he was waiting for these
angels to come back hoping he gets some
he could get lots answers could be a few
and he sorts through the answers but
what he does is he takes hit answers
coming in he sticks it a little database
register makes a good database for this
then you got no piece of code up there's
no way for 300 milliseconds because I'm
supporting ie6 unfortunately he wasted
3-hour milliseconds says oh okay
what's my best offer right now pulls it
down of course more offers are coming in
perhaps after 300 milliseconds that's
fine because next time we come in there
will already have this cached so there's
a little micro service and he has a
little persistent database Redis helping
solve its problem that's the IDS a
little database is popping up and then
micro service on their own I'm not
running some gigantic query against some
Oracle database so looking at the
membership service pretty
straightforward as well when you think
about it there's a little guy sitting
there saying if a packet comes along and
it has indeed some membership
information I'll add it into the packet
only rich the packet and I'll pull that
from basically a key value store you
know if it's Sally here's Sally's a
platinum I just looked that up put it in
there but of course I also have a little
micro service that refreshes that
database every night run some ETL
process against the data warehouse puts
into a key value store and by the way if
it didn't run tonight that's okay I'm
using yesterday's data that's okay I'm
still running in my system but again a
little database sitting in the middle
that just provides exactly what the
membership needs but no more so that's
the database story you gotta take that
gigantic thing probably kill it off in
favor of other technologies smoothly the
database apart
one of our colleagues at the at the
conference in Berlin talked about the
first thing he did with his gigantic
rails app that basically fell over the
first day he showed up was he saying a
tour of the database apart didn't try to
turn into micro services yeah just took
the database and turn it into lots of
little databases so they're completely
independent each other now I can start
playing now is this first step
all right challenge number two we have a
bit of a debate art once ourselves in
the in the micro service world about
should we do synchronous services or a
cigarette service by cigarette service
that means take that application you
currently have which has all these
modules and let's turn each module until
service and it's still the calling
across these boundaries with dynamic
binding we will actually do a restful
call now we're doing services right
I say yeah you're doing services but are
you did you gain do you think from
that's architecture that's the
stickiness architecture but can you do
asynchronous can you do things in
parallel now for a change
so let me go a little bit more about the
asynchronous stuff and by the way it's
it's still interesting active debate
amongst us in fact chad fowler guinness
our colleague from indole these and
thought works and i we're on the same
stage in dublin
talking about micro sources a few years
ago and we said all the same things
about it we've created all the
principles behind micro services they're
small and etc etc and so chad wrapped up
his presentation by basically saying you
know my recommendation you should use
synchronous because first of all that's
the way the algorithms are described to
you by your customer and frankly we
programmers that's what we're used to
and so it makes us faster so I stood up
after Chad and I agreed to everything
Chad said except for the whole cigarette
stuff is nonsense you know would be
synchronous you want to be asynchronous
because this goes give you robustness
this is going to give you the ability to
run a easy a/b testing and yes your
programmers don't know how to do this so
let's teach them and that's been my
philosophy in organizations I've tend to
work with so what I mean by asynchronous
services I basically mean there's a some
patterns emerging about how to work with
these event buses so like oh that's a
pretty good pattern the need pattern
because basically the idea is you have
your nice high power bus you have a
service
and he expresses the need and hopefully
some people are listening for that knee
but he doesn't know that he has to worry
about the case where nobody's listening
so these guys received that need decide
yeah I can satisfy this need they may
provide one or more solutions each one
of them and the original guy collects
these solutions and he picks the ones he
likes the best
pretty straightforward architectural
pattern kind of actor oriented based but
it has some huge advantages because it's
very easy in fact this one to go right
version two of the blue service and just
deploy it don't take version one down I
don't have to tell that yet green
service about it I don't you tell the
yellow serves about it I don't have to
even tell the blue service about it
conversion to stuff and running now
let's see if it gives me a better
results if it does it'll kill off the
old blue one but I can try that so
easily so the a/b testing is kind of
built into the architecture the ability
to try things out is very easy but also
this is very sort of very graceful
degradation
if the green service goes down ok I'm
not gonna get as many offers coming back
but the rest of system still working I'm
still getting offers now of course the
system would be screaming bloody murder
the green is gone let's go get green
backup but meanwhile the work still gets
done and for the complicated world yeah
this doesn't work so well because I got
synchronized everything but for complex
problems this nails it this nails
complex problems so we have a critique
chiral patterns like this beginning to
emerge just quickly a little animation
of this so again the rental-car example
so you know a web page gets served we
put a message on the bus the message
gets received by the corresponding
services that care about these things
these guys will get that message and
these guys will suggest offers you know
they'll have different idea of what they
could offer the client so this one has
the knee offer the other guy says I have
a B offer these guys collect the
Solutions Center Dumpty dumb there you
go and you basically push those to the
workstation
and you got a B no celery logs in now I
know it's Sally that's the new event
before I didn't know who it was but now
I know it's Sally so that creates
another message notice has a little more
content to it this time it's filled in
everybody cares about the Sally message
so I go Basin to everyone again I get
different offers knowing it Sally
because one of things we know for our
industry is if you already have a
customer retaining them is way cheaper
than trying to buy them back so if you
have a consistent customer you want to
treat them very nicely so we've got some
more offers coming back in okay we'll
collect those offers meanwhile meanwhile
we get some information about her
sigmund tation or membership we know
Sally is a platinum rule in our rewards
program this means she's a very very
good customer she spends lots of money
with us we do not want to lose her to
the competition so we have even better
offers so we'll publish that message to
lots of people and they'll begin to
offer better messages for her some
message goes down to these guys they
have different offers etc and the same
thing will happen with segmentation
we'll find out she's a road warrior she
rents a card during the week because
your enduring the week she's probably
not paying for it her company paying for
it she doesn't care about a discount
offer so again these things sort of work
as well so this is an example of it a
secret is the algorithm where I can keep
enhancing it and it sort of has this
sort of shape of taxonomy that's needed
architectures basically I have a
different little micro service for each
type of each type of device I'm
supporting because I e6 it's running for
three-hour milliseconds give me your
answer Hiroto gets the latest Chrome I
can use WebSockets and push the answer
there use a carousel as a front-end from
working with email I go to run this as a
batch process and get lots of answers
put it to my email but again same sort
of channel interfaces I have a whole set
of services here types of services that
are servicing this sort of need I have
certainly solution services the guys in
yellow that were giving answers you have
the guys at the on the side of my
example which I'm blue
the other ones that are giving
compliment you information any
information to it I can actually keep
track of what I showed Sally and if she
doesn't click on an ad then perhaps that
ads not appropriate for her
I can degrade that ad that's what client
biases are doing for me and finally I
gotta have solution blockers I can say
look Sally already has the reservation
Houston do not offer her a discount in
Houston she's already agreed to the deal
why do you want to give them money back
so you have lots of those guys doing
this you have a solution collector
that's pulling things together and one
of the really essential parts of this
system is you're always monitoring and
logging things including KPIs
it's very easy to write KPIs into the
system because of the event bus is there
which means I can measure everything I
care about from a KPI perspective how
much money did I make I mean clicks
today I get where's page retention time
how many logins did I get how many
registrations I can track all those
things that's kpi's and see how my
sister's really behaving so that's the
architecture behind the asynchronous so
again it's a little strange to develop
in this environment but it had pays a
lot of benefits in terms of how easy is
to deploy new things so the three and a
half minutes was this environment
working you things like this all right
third challenge and there's seven all
together your case you're counting so
number three will be is that micro
services or is a closure reclosure is
functional programming these are two hot
technologies that seem to be very useful
yet at some point they seem to be at
odds with each other and it's causing me
some confusion I'm not a closure expert
probably I'm not even good a good
closure programmer but I've been working
with a lot of good closure programmers
that are because micro services in my
mind is almost like objects at some
level they tend to have a lot of things
that are very object oriented about them
they've tried to be really small because
they're doing exactly one job you want
to make sure it does that one job really
well and it kind of has encapsulation
the way it keeps in a little database of
what it needs and doesn't share its
database with anybody else so it kind of
feels like an object some of my designs
around micro services depended a lot of
pun of my design and objects that I've
done in the past
but you look at closure and your
functional programming it's basically if
these functions and they and basically
they love shared days don't capsulation
you know they like shared data because
fundamentally the shared data is not
changeable you can only make new data
not change the old data and so when you
build one of these programs you
typically build a series that transforms
it takes your data from one form to
another so when I worked at the Daily
Mail
we basically rewrote the front end of
the Daily Mail and the front end of the
Daily Mail used to be rendering the
pages 130,000 lines in Java code with
jsps and everything else like that we
wrote an enclosure instead of 130,000
lines it's now four thousand lines of
closure so there's certain problems that
function of programming languages are a
silver bullet for this happened to be
one of them
but if you look at this the way these
passed information back and forth it
started out with adjacent structure of
the page which was here's a page and
here some articles and articles have
headings and headings have your pictures
associated with them and pictures have
captions and there's tax and always say
there's a big Jason structure or the
page ran through a series of transforms
created to an HTML equivalent again
killer application but you look at these
intermediate structures here and there
like hashes the maps of arrays of hashes
of maps of rays of hashes of maps and
you sort of say what other service wants
to use that data structure because it's
highly tuned to the next function only
so there's no reason to sort of make
that a service at some level and publish
that API and so it seemed to be a
conflict between these idea of lots of
Smurfs says and functions so you know we
play with this closure and microservices
it's three companies I've worked out in
the past so far so one of the first
companies that did the micro services at
back all the way back to 2008 was a
company in London called forward we did
lots of strange things but we had over
300 micro services a lot of stuff I
talking about it came out of those guys
we use lots of different languages you
know most of times ruby was our language
of choice for rendering front and front
end stuff we use a lot of node to track
various things an API thing so all our
monitor was done with node heavy lifting
our groves were done with closure
occasionally some analysis would be done
with our and a little bit C++ shown in
but lots of different languages know
where different services use different
languages the languages appropriate for
the service originally we sort of use a
database and cron files we got into
restful interfaces and Kafka buses then
you move on to looking at the daily mail
where we did this and we basically had
three services are running closure and
then dozens and dozens of small stores
running nodejs the closure services some
of them were to thousands of code not a
micro at all the average size of the
node services would 14 lines of code so
yes we had micro services but the
closure didn't fit that model very well
and then I worked at it started that did
a lot of optimization engines things
like customer retention supply chain
management all four engines we use
closure a lot in that environment we
start out with 25 services and the
number dropped because of your Zoe just
put boundary between them so three
different answers so where do I stand
about this stuff I'm confused
I think closure should fit in this world
but I'm not so sure it fits with micro
services there's a new hope on the
horizon you know and thanks to Dave
Thomas anyway back in the corner there
hi Dave
elixir which is a basically a functional
programming language built in the Erlang
virtual machine which means there's just
tons and tons of little things doing
little functions and I'm like wow that
kind of feels like micro services again
so I'm just playing with this language
when I use some time I have this
conversation with Dave last night on the
boat and Dave was kind of very
encouraging that this does work all
right
fourth challenge architectures and
frameworks what are the origins of the
frameworks we can use like down and the
answer is we don't have any or we have
some candidates but we haven't got the
established spring frameworks or the
rails and those sort of things don't
exist yet the good news is we're getting
lots of candidates so you know thank
goodness for Adrienne Cockroft and his
team because they basically built us
Netflix which I love Netflix I can
travel the world and use Netflix
but then what Adrienne Cockroft did was
he took this entire almost an entire
stack over 40 projects an open sore
opensource 40 projects the US Department
defense is using this to build therefore
sophisticated systems so if somebody
told me I got to be a very sophisticated
system it's got to be absolutely right
and stuff like that I'd probably dust
off and use the Netflix frameworks
because they work for a very big company
and other people are using it as well
but it turns out the community is really
going crazy for micro services turns out
to be the node guys because very small
services and very very clear boundaries
of our brauch part of the node
philosophy here's one out of a out of
Ireland Seneca it was another one that I
never heard of before peccato based on 0
mq which they're kind of like that idea
so there are a lot of these things
emerging but we haven't got any winners
yet so this is one of those problems we
have is you don't have something to say
oh this is the stack to use was too
early to tell alright the other problem
we're having is it sort of comes because
you know we were very comfortably back
in our world about design patterns book
we have not got the designs patterns
booked for micro services yet no I
described a need pattern that's not
written down anywhere other than my
charts we haven't got that book we
haven't sort of gotten together as a
community figure out what the good ideas
are but we're talking about it at least
and I think that's totally key so all
those guys that raised your hand if
you're not talking about your micro
services you're doing is all the service
we need to understand what you're doing
and what seems to be working for you
just see if we can find some patterns
because we need our designs patterns
book nice thing is a lots of conferences
now talking about it today we have a
track with five different speakers
they're talking about micro services two
years ago that you you fight you
couldn't find Microsoft on the agenda
and then we have an entire track this is
the Berlin conference good news is it
happened it happened it'll happen again
next year I'm sure it's gonna be one in
September and Poland it looks very it
looks very interesting as well to
probably bring the right speakers
together and there are lots of user
groups this is where the real sort of
thing is happening is user groups are
springing up everywhere Silicon Valley
obviously has one there's one in London
there's one now in the in Ireland in
Dublin
of course they have the best logos but
that's happening so if you're not if
you're not talking about what you're
doing in one of these forums create
yourself a forum and talk about it
because we need our design patterns
challenge number six you need
micro-services by themselves cannot
stand by themselves if you just try
micro-services and not do anything else
you will probably get no success so we
really just depend upon a lot of other
things take not only just technologies
but also processes and your
organizational structure so I kind of
start out by showing this picture
originally this morning and talked about
microservices but you need to sort of
look around here and pick some of these
other things because micro serves by
itself as I can get it done you need to
sort of pick some other things to play
with so you may need to sort of rethink
two job titles it creates a DevOps
concept you certainly better be using
the cloud or maybe docker you better be
thinking about how you use some of these
non-sequel databases instead of putting
everything in sequel this is not
necessarily the right answer for
everything and you've probably got to
rethink some management processes I'm a
big fan of manager list processes I
believe in leadership but not management
Jeff talked about that a little bit this
morning as well but you need to pick
some of these things and make sure
you're kind of working with them so you
haven't got co-requisites you're
probably not gonna have successful micro
services so my final wrap-up is a little
bit you know in challenge number seven
is we're still wrestling with the
concept and everybody has their own
about what is the micro service mine
tend to be really small I love
asynchronous but it's just my definition
there are lots of good definitions out
there for it I think one of the things
we have to be very careful of in the
microscopist community is not screw that
up like we did at agile where
everybody's agile automatically
where does Geoff show this morning 3% of
people say they're doing agile but those
53% are not delivering every iteration
or every every sprint so what are they
doing so we need taxonomy
you know my favorite X on me right now
would have at least these three
components I'd like to see how big how
many serves you have and how big they
are
some sort of ratio there I'd like to
have such an idea of how much
synchronous you are or not
so you're if you're very Cygnus fine you
can be that way by the way Netflix is
very synchronous where are you very a
circus-like some stuff I play with and
you can't be all one percent one of the
other but you can try to get closer to
one than the other
and your database ratio how many
databases do you have you say you got
two databases that 50
I don't think your micro we had a
presentation in Australia was that a few
months ago and the guys says that you
know talking about how fast they're
deploying and they're deploying you know
twice a day and I'm thinking wow this is
really cool and he said yeah we could
apply a choice today as long as we don't
have migration scripts I'm like whoa
okay you just constrain the things I can
do it by a lot so by the way what does
that tell you need to know you need to
fix the concept of needing migration
scripts then you can go faster
everywhere so you gotta fix that problem
as well if you haven't fixed that I
don't think you're in micro yet so I
have a sort of a again it might sort of
diagram of things that look look like
this so this is kind of my taxonomy and
definition is that again 2 log scales in
this case this is log on both scales so
I kind of find that this this space over
here is kind of I call the rails in Java
zone so it's one big app lots and lots
of lines of code and then we kind of
have the SOA world as it emerged so
going back to the sort of the you know
2005-2006 area when an SOA story came
available you know credit Swiss is
sitting there the writing services there
are 10 to 50 thousand lines of code each
they got 10 to 20 of them so they're
kind of sitting in that blue zone I kind
of think this is where micro services
live whole of they're a ratio and size
of services associated with that so
that's where I used to work in this
environment I never want to do that
again it's too painful and we're not
working on big apps anymore the
animation I was showing you about about
you know offer engine for your rental
cars it's since about there on the model
the company worked for forward they did
a lot of these and 300 micro services
this is where they said nothing was
larger than hunt lines of code and they
had over 300 of them this is Netflix
Netflix services are much larger they
tend to be a thousand two two thousand
lines of code written in Java
they also synchronous but they have over
300 they have I think 800 and last count
that's why I heard over 800 service is
running that size making your Netflix
work so this is a taxonomy you're
looking for so we talked about micro
services at least begin to plot yourself
with a couple these dimensions so I
understand what you're saying and how
you fit so I kind of wraps up my
challenges a lot of lot of in front of
us we're getting some very clever
solutions
these things but you really want more
information then basically the answer is
the same as always
googling it's out there lots of stuff is
out there and if your stuff that you're
doing is not inventing blogs and posting
something like that please get it out
there so we can index it but certainly
the micro servers architecture stuff
there's a lot of videos to talk about
that the micro a change conference begin
to put their things online I think
somebody just checked the other day the
first five up we're at all in German so
you speak German you're a good shape
otherwise you need to wait a little
while for James and my presentations to
be up there and Google from Google for
the other things about programming
anarchy which is the sort of the
corresponding management processes that
sort of make this thing run very fast
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>