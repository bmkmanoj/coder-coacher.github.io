<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2014 • Building a Smart Travel Guide: Triposo's Suggestion Engine • Douwe Osinga | Coder Coacher - Coaching Coders</title><meta content="GOTO 2014 • Building a Smart Travel Guide: Triposo's Suggestion Engine • Douwe Osinga - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2014 • Building a Smart Travel Guide: Triposo's Suggestion Engine • Douwe Osinga</b></h2><h5 class="post__date">2014-11-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/amlD18whXxI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey my name is davos Inga i am one of
the founders of trip Oso and I'll be
talking about our smart travel guides
today I wanted to start with this
obnoxious light because you know we talk
a lot about big data and I think that
two speakers before me actually talked
about big data
I won't be talking about smart big data
because my rule is if it fits on a USB
stick it's not big data and Amazon sells
one terabyte use B sticks now and so
that's the new limit of big data all
right
what is trip oh so we make smart travel
guides so smart travel guides you know
the tour guides on books have really not
changed the last hundred years or so on
devices you can go a lot further you
know it knows where you are it knows to
some extent who you are it knows the
weather it knows the time it knows what
you've been doing and it can we can use
all this information about you know to
in order to give you clever suggestions
that we pop up on the main screen our
travel guides are completely algorithmic
based what does it mean it means that we
don't employ humans to write travel
guides or any of the information we go
out on the internet and collect all the
information that we can find process
that to some extent with you know simple
algorithms but ultimately that spits out
a data set that then gets uploaded by
downloaded by the devices and show you
this travel guides we always joke that
when the robots take over
they'll be on our side because you know
we don't employ humans we already have
the robots and one of the nice side
effects of that is that we cover the
entire world because we don't have to
send riders to all the different
locations the only thing we have to do
is make sure that our algorithms work
for any location and so currently we
cover over 10,000 cities with three
million points of interest in those
cities and a hundred eighty countries I
believe and so far our apps have been
downloaded I think eight million times
or so which sounds like bragging but
it's somewhat relevant because it gives
us a lot of usage information that we
then can use to improve our guides even
more so let's talk about the suggestions
this is this is the way that on an
iPhone our app looks the first time you
open it for Berlin there's a download
button that allows you to make this
thing work offline all our guides work
offline and then there's these these
suggestions the the idea is always that
we depending on where you are we give
you the the thing that you might be
interested most in and I'll be talking
about these three buttons that we
normally have like I said the guide
knows where you are so we have a nearby
I suggest sir that gives you some more
information about what is nearby and
what might be interesting there it knows
what time it is for travel even more
relevantly what time it is at the local
destination so it can suggest some
things that are time-based and finally
it knows what the weather is actually
when I made this the weather forecast
for Berlin was quite bad and so it shows
this it's it's it's quite nice I don't
know of anybody if you have been outside
but it is quite nice right now
so let's start with nearby obviously
suggesting stuff nearby in itself is
quite easy you ask the phone where it is
and then you go through your database of
places and you say oh well these are
nearby maybe you want to check them out
so the question is more how do you get
to a nice database of places that are
nearby the way that we do it we start
with the web we there's a whole bunch of
places that allow us to use their data
either these are open content places
like OpenStreetMaps or Wikipedia or wiki
travel or their commercial parties like
Facebook or booking that have an API
that is applicable to this and so what
we do is we go through all those places
and we get their feeds split them in
what we call locations which are
essentially cities and app you eyes
which are the things in the cities that
you might be interesting in and so now
we have these two data sets of a mixed
format and we use a bunch of matching
algorithms to try to figure out what is
what this is in itself of course a
complicated thing which would easily
take 15 minutes to explain so if you're
interested in what exactly we do there
come find me after this and then when we
have all this combined we end up with
our three million Pugh eyes and we use a
copy this this slide from météo so
this is our system so part of our part
of our processing is just done with two
big machines in the kitchen of our
office it turns out that you can do a
lot of processing there if you don't
care about real-time or big data but you
do care about precision so and it's a
it's certainly cheaper than renting
those machines at Amazon and so that was
machines then do this processing push it
to Dropbox and a Google spreadsheet that
keeps track of what everything is and
then our our guides from time to time
fetch that Google spreadsheet and go get
the stuff from s3 right and then we end
up with a nice list of suggestions of
places that are nearby where we have
some descriptions of the the things and
we know how far far it is all right so
whether bass suggestions I'm skipping
here the the the next one the time base
because there's some overlap and it's
easier to start with weather
so whether bass suggests
they try to fetch the weather forecast
when you have data access and then when
you're ready to go out in time compare
what the weather should be with the sort
of thing that are attractive given that
sort of weather and it has the advantage
that we have a nice way to show you
whatever it will be like and inspire you
to some extent even if the weather is
not so great like in this case where I
don't know how readable it is but it
says like museums are always an option
which seems very very fitting to Berlin
this time of year so we start of course
with weather data weather data is it's a
nice and open if you're into that sort
of thing there's these guys that have
been collecting weather data since the
1800s or so and you can collect these
this data in a format that is vaguely
based on punch cards of course but you
can process it with your whatever modern
thing you you have so what we do is we
get all this data and we line that up
with locations and pys that we have and
then we look at what our users actually
do on those days and we also look at
random picture sets that we find on the
internet and we look at when they are
taken and now by lining those things up
and associating this with P wise we can
see that some things like a museum the
usage in there goes up a little bit in a
rainy day and the number of pictures
that are taken is fairly equal while if
it's if it's a park you see that the
number of pictures dramatically drops
when the weather is not great and if
it's a beach you see that's the number
of pictures that people take they're
actually drops when the temperatures are
lower and so what we do is we define I
think ten types of weather based on
temperature whether it rains or not and
and sunniness
and then we look which correlate with
what type of user behavior and then we
spread this out based on either
Pui type so you know we
say okay in general we conclude that
museums are good and in some cases if
things are popular enough we can
actually do it on a on a single Pui
level and we can say okay well this this
is really great where you should go to
this restaurant because it has outside
seating of course our algorithm doesn't
really know that it has outside seating
but we do know that people go there when
it's nice sweater and so we can say hey
it's nice waiter why don't you go to
that bar and so we end up with whatever
based suggestions yes and apparently
according to our algorithm the Jews
museum is the best place to go with it
if the weather is not so great I'm sure
the other ones are great too but if you
have extra time it's certainly worth the
visits okay
um five more minutes that should work
what did you say all right well well uh
I can I don't have slides for that but I
can talk more so time based suggestions
so again the first thing is that we
don't have to do all of the heavy
lifting because our users use our app
and they they look at what they look at
at a certain time and we have a
law-based system of keeping track of
this immutable and Jason and everything
and so we what we can do is we can
actually look at what people look at at
what time today trying to fix this for
their local time zone because it turns
out not everybody when they travel
overseas adjust their time zone
some people just adjust a time which
then confuses the entire logging so we
have to you know throw away these people
or make educated guesses so we see that
people tend to look at coffee in the
morning and start to look at lunch
around well lunch time and with dinner
one of the interesting things that we do
see is that people start looking at
dinner places so around 5:00 and then
the later it gets
smaller the distances between the user
and the place that they look at right
because you know when they're starting
to look at dinner around five they're
really willing to to go out of their way
doing a little bit of research and that
sort of thing but by the time it's 9:00
they really want to have the kebab
around the corner because now they're
hungry
so the thing go is that in order to give
people the right type of time-based
suggestions where we're mostly
interested in things that are not just
highly ranked according to our thing but
that are highly ranked for a specific
topic right because the overall ranking
of a place it's entirely possible and
quite likely even that the the best
coffee place might not have the best
service you know it's because it's a
man's by some bearded hipster that is
more interested in the quality of the
coffee than in you and they forbid you
to have Wi-Fi or you know use your
laptop or whatever and but they still
have great coffee so what we do in order
to to get to the opinions we take our
database of P wise and we look at all
the value properties that we have for
example we say ok this place has a phone
number and this is the phone number
string so then we go look on the
Internet at large whether we can find
this property anywhere and we do the
same with all the other properties that
we have we have we talked about 20
properties and so then we have all these
pages that where we found these
properties on which are like could be
about the places that we that we have in
our database right and so we collect
them all on a per domain basis and then
see ok if this is indeed the phone
number then we would expect it we have
multiple hits on the HTML pattern around
this phone number for different py
places in our database right you expect
that it's it's a it's it's a it's a it's
a lucky you know it's it's a bit of a
guess but you expect that if a database
of reviews
of coffee places mentions the phone
number that the HTML around that phone
number will be the same for every py
that they have it's not always true but
if you have enough pages it turns out
that it's true enough and so what we can
do then is say okay as soon as we find
for a certain domain that we have five
hits for any of the properties or we
have multiple hits for different
properties we can now assume that
actually we have a way of detecting that
this page is actually about our P wise
and then what we can do is we start
opinion mining so there's all these
people that these language models where
you have words that describe certain
opinions and about things and so that
way we can then conclude that this page
is about coffee and that they are very
enthusiastic about the coffee and so we
then forward this to our few eyes and
say okay for this this py you can we
score them on these various dimensions
and one of the results of that will then
be that we think that one answer coffee
is really quite good the barn is on -
she's really have swapped that because
it turns out that the barn has a little
local presence here on the only thing
and but yeah I mean like the people at
Google like to say then algorithms are
neutral we can't help you we can't
change anything here all right
so that concludes our three suggesters
on the main page we have a bunch of more
minor ones but that is it for now
well thank you very much
ratings are stuck war isn't just
baseline
no we do you mean our users or other
people's users so we do keep track of so
the the whole weather-based calculation
is based on what I used to do in our app
yeah so we do keep track of that we
don't have ratings and that sort of
thing we only use it we're not a big fan
of explicit feedback tents you know it's
interesting but it tends to be a bit
skewed because only people that are
really annoyed or really enthusiastic
tend to do it and so you miss you miss
sort of the middle bit and if people you
know the best way to see that the
suggestor works is if we say you know
this is a great coffee place and then
really see that the user goes there so
we use for a lot of stuff we use Python
and so there's this NL DK or what is it
called
mmm toolkit which is really quite
powerful and awfully slow right thanks
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>