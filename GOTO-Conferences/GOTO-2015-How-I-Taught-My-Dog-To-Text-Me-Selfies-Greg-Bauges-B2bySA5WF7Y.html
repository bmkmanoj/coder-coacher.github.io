<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2015 • How I Taught My Dog To Text Me Selfies • Greg Bauges | Coder Coacher - Coaching Coders</title><meta content="GOTO 2015 • How I Taught My Dog To Text Me Selfies • Greg Bauges - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2015 • How I Taught My Dog To Text Me Selfies • Greg Bauges</b></h2><h5 class="post__date">2015-07-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/B2bySA5WF7Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right y'all hear me okay very good
cool my name is Greg I serve as a
developer evangelist for twilio and
thank you all so much for coming i know
there's like three other talks going on
right now and I really appreciate it all
coming out um I want to talk to you
about how I taught my dog to send
selfies and here is oh my gosh it's
still let's see here if we can my
apologies for the delay will do this all
right it's imperfect but it's better
than nothing so this is my dog this is
kyra and really what this talk is about
is an introduction to hacking on the
Arduino Union and I'm a software
developer mostly web developer and I was
pretty intimidated by hardware for quite
a while and you know I I think I maybe
got like Addie in my electrical
engineering class in college and all the
wires and stuff and I didn't you know
they Arduino programming languages based
off of Java and that seemed pretty
intimidating to me but a cool thing
happened a couple years ago and that's
we got Kyra and Kyra as it turns out is
is relatively trainable and so we had
this light that had a floor switch on it
and I realized that if I like took a
treat and I held it to the floor switch
and I took her pawn and I set her paw on
that switch and then push down on it
then eventually she would learn that
when I said light to run over and press
the button and and then when I said
light again she would run over and and
she'd turned the light back off and this
is great because I'd be laying in bed
and I didn't want to you know turn the
light on and off myself and problem is
Kyra is like a little bit too smart and
she kind of realized that when she did
it like she was so adorable that I
couldn't not give her a treat even when
I didn't tell her to do it so we'd start
waking up in the middle
22 the light going on and off because
Kyra got hungry well I how do you say no
to that you know and so often the most
impressive complicated hacks they're
just like simple building blocks stacked
on top of one another right like it's
just a collection of relatively simple
straightforward components and so after
this happened I start thinking well I've
got a dog that can press a button what
can I do with that and last year twilly
launched mms and for those of you who
aren't from how many of you have heard
of twilio before okay a few of you cool
how many of you have any of you used
twilio before all right so just a little
bit so twilio is best known you know for
like last six or seven years for making
it really easy for developers to send
and receive text messages and place and
receive phone calls in just a few lines
of code and whatever programming
language you're most comfortable with
we've helped our libraries for just so I
kind of have an idea who here primarily
is say a rubios few and Python no dotnet
Java quite oh that's that's the bulk so
you all would be totally fine with the
arduino stuff so we have we have a
helper libraries in all those languages
you know whatever it's basically a REST
API with helper libraries on it and you
could send and receive text messages and
then last year we came out with mms and
so once that happened I started to
wonder i wonder if i could get kyra to
send me selfies while I was like away on
on business trips and so I didn't really
know how to do this but then I
discovered this thing called the Arduino
you and the Arduino Yoon is how many of
any of you played with the Arduino
before like an Arduino period a little
bit okay so in our do we know Yoon it
actually has two micro processors on it
so the typical Arduino has one and it
the Arduino unit is a second
microprocessor that runs a very stripped
down version
of Linux called open wrt and that
microprocessor comes with Python
installed on it but you could also
install Ruby or note or any scripting
language that you are comfortable with
the other thing that this unit has is
Wi-Fi which is awesome because one of
the big complaints or frustrations that
folks will often run into when they
start hardware hacking is that they
built these really cool hacks but they
are unable to connect them to the
Internet you know it does something but
they can't you know connect it and tell
the world about that something so i got
the arduino you and and started playing
around with it and this is the rest of
this talk is a story of what happened
there and so what i'm going to do is
walk you through the steps we use to
take the arduino un which is hiding in
this cigar box right here this little
protip well not pro tip amateur tip if
you are into hardware hacking cigar
shops sell empty cigar boxes for like
two bucks apiece and they make for
awesome enclosures for for your projects
mmm so hiding in here is an arduino unit
if anyone y'all want to see it
afterwards feel free to come on up
connected to an easy button which you
know all the stuff you can buy online
and and we're going to walk through how
we use that button to take a picture
with this webcam we're going to take
picture of all you and we're gonna have
you pull out your phones and text into a
twilio phone number so that we can use
your phone numbers in this demonstration
and we're going to send y'all a selfie
that we all take care together we're
going to do all this in code assuming
that the keyboard starts working again
so does it sound good yeah alright cool
so cool really cool thing about the
arduino union is you can ssh into it
alright and so this is what it looks
like when you when you ssh into your
there arduino alright it's just a shell
that y'all are pretty comfortable
working with so the steps that we're
going to need to do when we press the
button is that we want the arduino to
take a picture with the webcam then we
need to take that picture we need to get
it off the arduino and into the cloud
and we're going to use Dropbox to do
that and then we're going to send an mms
using twilio to all your phones okay
we're going to do this a little bit
backwards we're going to start with the
twilio piece so we can collect your
numbers kind of build up from there then
we'll look at taking the picture then
we'll upload of the cloud and then we're
going to put everything together and
show how to do it at the press of a
button actually on the Arduino okay
alright so first thing everything with
twilio begins with a phone number and so
we're going to go to twilio and we're
going to buy a phone number and who here
is from out of state who's not from
Chicago was here where you from what's
your area code in Utah oh no no no just
your area code what's the what's the
lazer all right let's see if we have any
801 oh sorry i'll buy a number well see
if we have any 8080 one numbers um sorry
how many of you are actually from
Chicago all right great I wow this I am
too I've lived here for 10 years and
absolutely love it so we'll search for
an 801 okay so here we go here's an 801
number so we'll buy this and just to
show you like the simplest hello world
in twilio and they give you all
something to text if you all want to
pull out your cell phones I promise you
I will not like use your numbers like
sell your insurance or anything like
that later on and but if you all want to
play along today I'm going to just pull
up the site called twimble bin twilio
works basically like just like if any of
you have built any web applications
before all right so the way that toil is
going to work in the same way that your
browser makes an HTTP request to a to
web server whenever a text message comes
into a twilio phone number twilio that
is twilio makes an HTTP request to a
server that you have somewhere you're
going to send back XML which we call
twiddle and the twin bowl is looks
really simple and it's just a set of
instructions to tell twilio what you'd
like to do
so I'm just going to say thank you all
right and then this twin will bin here
just serves up static XML just gives me
a URL where I can stick a little XML and
I'm just going to put that in here to my
web hook for my phone number and save it
so now whenever a text message comes in
to this phone number here then twilio is
going to make an HTTP request it's going
to get that XML back and then it's going
to reply with a message this just says
thank you so if you all would like to
text send a text to this number text
something please be mature about it cuz
we're going to display these uh these
text messages up on the screen here in
just a couple minutes so that disclaimer
is more necessary when we're doing this
demo for likes a high schoolers or
college hackathons mmm we still end up
with lots of poops and craps and such so
has anyone gotten a reply back this is
no signal here that always makes these
demos more difficult you got it all
right cool all right so hopefully the
rest y'all will start getting replies
back and we'll see what happens got it
ok cool all right so so as your text
messages come in oil is going to log
those and now just to reiterate I am SSH
into a computer that's inside this box
that's about the size of a deck of
playing cards and the costs 70 bucks has
pins on it for hardware hacking and it
has a really simple computer so often
like I always have to remind myself when
I'm doing this because I'm so used to
working in a shell on my Mac that like
this doesn't really feel particularly
special sometimes but then I have to
remind myself like like you can buy
computers that are like less than a
hundred dollars i mean the Raspberry Pi
is 25 bucks now and this thing is a the
unity Arduino plus a linux computer for
70 bucks is like pretty amazing so all
the coding we're going to do here is
actually SSH into that you in there so
we're going to do is change the
directory into the external
a card that is on the UN so it has an SD
micro SD slot and so I have an eight
gigabyte drive in there or just little
card in there and I'm going to create a
new a new file to send an SMS all right
in order to send an SMS I'm first going
to need a twilio phone number and we'll
just format this in a way that makes
twilio happy and then I'll need my
account Sid which I can get from here
for those of you who have who here is
written something that interacts with an
API before we've done something with any
of you okay all right that's good that's
comforting you never know so so accounts
did auth token is basically your
username and password for programmatic
access and copy this here too all right
and then I just need to import the
twilio library and poor oh here go sorry
i totally screw this up from twilio to
rest import twilio client and then I
need to create an API client using my
account Sid and my off token and then
once i have the client i can grab a list
of all the messages that you all have
sent to the twilio phone number that 801
number that i just purchased and once i
have the list of messages then i can
iterate through each one and I can grab
the body of the message I can grab the
phone number of the message and then I
can print those out so i won't actually
print out your full phone numbers
because we're going to
tape this and put it up our video this
and put it up online so obfuscate those
just a little bit and will just display
the last four digits but we will then
add on the body here all right so does
that make sense so we're creating a
twilio client with our accounts in or
off token we're pulling down a list of
all the messages there and then we're
iterating through each message grabbing
the body grabbing the the phone number
and printing those out on the screen so
before we go on let's just task make
sure that works and we'll see the the
messages that y'all have sent in here oh
how do you have here messages client
atmos client twilio client object has no
attribute messages well that's weird let
me tell you why this is one of the
secrets of live coding is a you always
have a back-up plan here right so I must
have just missed typed something so my
apologies what's that twill I'll totally
wreck on thank you very much alright
alright
thank you
there you go belly butter
I'll try this again
alright so we got a few of these here
now what happens sometimes especially if
you're working with phone numbers that
are international or some carries that
don't play nice is you're going to have
some phone numbers that will fail with
twilio so oftentimes it's important to
when this happens you can just come in
and you can wrap your the stuff that
you're doing in a try and catch because
you don't want because you don't want a
bad number to break everything was that
I saw somebody sent in unicode
characters was that an intentional thing
or did that just happen with the phone
yeah all right all right so we'll run
this again and hopefully now this will
just go through everything and we won't
get there all right cool so there we go
so we have our list of text messages
thank you all who who textin thank you
for keeping it clean for us so that is
how we pull down messages let's look
real quick at how we send how we
initiate sending a text message and then
once we send that text message we're
going to we're going to look at how to
send an mms so very similar client that
messages dot create and we need three
things whenever we create a new text
message anyone have any idea what those
are I guess all right just typed one of
them right we need a 2 number what's the
next thing from yeah all right so that's
going to be our twilio phone number and
what's the last thing a message yep
message body alright so i'm going to
send y'all a link with doggy selfies to
the blog post that has all this
information in it okay and so you can
just click through there and it has all
the files and links to everything you
can buy and whatnot alright so I'm
creating new message I give it a 2
number I give it a from number I give it
a body and we'll run this again and as
it steps through its going to print out
all your information and then a couple
seconds later we should you'll see a
little bit more of a delay than a couple
seconds later yeah you should start
getting text message
show up so like I said before we and
when you get a text message wave your
hand or let me know that came through
you got one okay great so like I said
before for like six seven years as far
on the text messaging front this is all
you can really do with twilio which was
awesome like people built some really
really really cool stuff with this and
then last year though we launched mms
we're super super excited about it and
so let me show you how you take what we
just built and send an mms and just for
the sake of you know correct file names
will copy this to new file and then
we'll edit that one so all you need to
do in order to send an mms oops let's
put a comma on there is a is add a
fourth parameter which is a media URL
and this is just going to be a link to a
publicly accessible picture okay so it's
just a picture that has a URL the twilio
can access all right so now we have two
from the body and then a link to a
picture and so we'll run that one all
right and now text messages are pretty
small right like text messages take up
like you measure their length in bytes
pictures are quite a bit larger and I
would say that probably next to say
carrier pigeons or the US Postal Service
sending data via mms is about the
slowest method of transmission that you
can get so this is going to take a
little bit longer for it to come now
that said we're going to help you out as
much as we possibly can on that front so
what we're going to do when you send a
text message or when you send a picture
message through twilio the first time
you send that in we're going to resize
it for you to fit the format you know so
the size it's a little bit better for
phones
and then we're also going to cash it for
you so the second time that you send an
mms it's going to go a little bit faster
because we won't have to do that
operation you get it in all right so you
guys y'all are getting the pictures of
Kyra they're wearing her her twilio
headband all right unfortunately now
Kyra didn't take that picture I had to
take that picture so this only gets us
half of the way what we want to do is
take a picture of this webcam and then
we need to get that publicly accessible
URL right so taking a picture with the
webcam turns out it was like super easy
I was blown away how easy it is to do
this so there is a linux utility called
FS webcam that just takes two parameters
one is the directory where you would
like or the file name where you'd like
to store the picture and the second one
is the resolution you want to take it
i'm just going to take this at a low
resolution the camera does a much higher
resolution than this but but for the
sake of fast mmm esas will do it this
way all right so 321 need everyone to
smile and you should see there will be a
green light here comes on the webcam all
right and then you can see here it says
writing jpg image 22 this file here and
we could pop out the SD card plug it
into my computer and check that out
we're going to see it in just a couple
minutes anyway so we'll what we'll come
back to that but you can just hopefully
trust me that that picture was taken all
right so let's create a new app to
interact with Dropbox and have any of
you worked with drop boxes console
before or their API before not of you
okay if you ever have any file storage
needs I have been super impressed with
how easy it is to work with us they have
really excellent documentation it's
really easy to get up and going it works
pretty flawlessly with how many do any
of you use Dropbox just for like
personal file storage or at work and
stuff okay so works really well my
apologies the Internet's a bit slow here
right now but
alright so here we go so when you sign
up for a developer account then you just
drop into the console and you can create
a new app and it's a RESTful API has
also like they also have helper
libraries in just about every language
that's out there so we'll just create a
new app I just hold it here like hey I
only need it to that I can I can
basically segregate its files to its own
folder and I don't need to give this app
access to all of my other folders which
is a pretty good thing for security sake
oh go to say go to selfies and so when I
create this app is going to create a new
folder in my publicly accessible dropbox
folder or into like the normal dropbox
folder that you would typically access
and then I'm just going to generate an
access token here which I'll use to make
my API calls all right and now i will
create a new file i'll call us upload to
dropbox and i'm just going to drop my
access token in here all right and i'm
going to i'm going when i upload this
right now I'm just going to always save
it locally to pick jpg but what I want
to do is create a unique file name for
this each time so I'm just going to grab
a timestamp you do that like this in
Python and i'll just use the like the
unix timestamp for and then we'll create
a unique file name
add on the time stamp and then it's a
dot jpg
and then we'll just print that file all
all right and then we'll run this real
quick just to make sure that our file
names are being created okay so that's
what our file names are going to look
like alright so then what we need to do
is import client the dropbox client just
in the same way that we did with the
twilio client and once we do that we're
going to create a client in the same way
that we did with the drop box in the
same way that we did at the twilio
client it's just that with Dropbox we
only need to access token whereas the
toilet we need to the accounts it and
the auth token then we're going to open
up our file and this is our picture okay
and once we've done that then we can put
that file into dropbox so let's say put
file and we first tell the file name
that we want to do and then we pass to
it the file and once we do this this is
going to give us back a response and if
you want to see what kind of data is
pass back we can do that here and so
then when we run this it's going to give
us back a little bit of information
about the file that it just uploaded and
then it's also going to store that
picture on in our dropbox so that we can
access it via the web console that will
go in there and I have a feeling that
our internet taking a sweet time on this
one so we will do to do
there we go okay so you can see some of
the information that comes back there's
only about one or two of these things
that are really interesting to us but
then the other cool part is that when
you open up dropbox and i'll just skip
this for this for a second and go from
there although this concerns me it says
we're resolving host right here so this
may or may not drop out on us and a
little bit but we'll see what happens
alright so let's go back in now we what
we don't have is just yet is a publicly
accessible URL alright and so we're
going to need to grab that and we'll
just do it grab it from here what we can
do is just grab the path of the response
like this and then we can do grab a URL
by using drop boxes media command
alright and then we'll print off that
URL and we'll see what happens when we
run that again let's see we might be
dead in the water on internet here yeah
it looks like this is going to make it a
little difficult looks like we have lost
our LTE so here's what I do I want to
walk this phone so I'm running off the
hot spot here so we're going to walk
this to the back of the room and see
what happens and they'll look there all
right well let's see if we can figure
out how to move forward with this
without about our internet access so
tell you what we'll do is let me show
you what the actual script would look
like we may or may not be able to send
out the text messages depending on if
this comes back online or not but i'll
show you like you can probably guess
about where we're going with this thing
and that is we're going to basically
take the two files that we just wrote
and we're going to kind of voltron them
back together and so that we can grab
are publicly accessible URL from dropbox
and then we can use that URL to send an
mms using 20
so let's all right so we will first
create a new file and we'll call this
upload and send py and then we're going
to take our twilio file and we're just
going to append it to the end of upload
and send here alright and then when we
take a look at upload and send all right
so we see we have our access token we
grab our URL we're not going to need
that here but once we have our URL then
we're going to come down here and we
will instead of sending a static URL we
will send the URL that we get back from
Dropbox alright and that should be it
then I'll see how we're doing here and I
still don't think it's going to work but
we'll see what happens I tell you what I
know this is not going to work because
Internet's not coming through here so
all right so let's pretend that I hit
upload and send and it blasted out text
message to everyone we take another
picture here and whatnot but the problem
is that everything we've done right
there we didn't actually need the
Arduino to do we are doing everything in
ssh we're just running a Python script
nothing impressive so far we could have
just done that right here what the
Arduino allows us to do is to trigger
all those actions with the press of a
button alright and so this is what if
you all want to come up and see this
afterwards just built a super simple
circuit using on the Arduino so this is
literally example number two in the
Arduino getting started guide the hello
world of our dwie nose is a program
called blink and the the I don't know
whatever hello world plus plus is is
blinking at the press of a button okay
who basically what happens is we're
powering the Arduino off of a USB cable
that's plugged into the computer but you
can also just plug it in using a wall
wart into the wall you can run on off a
USB battery and so we're running the
power to the button then when the
circuit is completed then
it's sending a signal down through the
green wire into a pen and it says hey I
press the button go do something so the
code for this is open up arduino this
program when you write our dueno
programs they're called sketches and
let's open up just the standard this
would be the example here so let's see
if we can zoom in a little bit better
all right cool all right so basically
all we're doing here is we're defining
the the two pens one is the LED the
other one is a button and then your
Arduino programs have two main
components to them one is the set up
this runs once ok when you first upload
your sketch and this is telling aired we
know where the button where the LED is
and then you have the loop and the loop
runs thousands of times a second after
the setup is run and so all we're doing
here is we're saying read the button
alright so so read a pen you go this up
like reed pen seven and if the button is
pressed then blink the LED and then we
throw a little delay this is 50
milliseconds just to slow things down a
little bit otherwise like your battery
drain is really high if you're running
off a battery and then blink led all
this does is well once this is triggered
is it writes to the it turns the LED hi
waits two seconds and then turns it low
okay that makes sense any questions are
yeah that's exactly right yep hi and lo
is like basically binary for that's
exactly right alright so like I was
saying earlier so we're just gonna
modify this the Arduino Yoon has two
different micro processors on it and the
way that you bridge the gap so to speak
between those two is using a helper
library called bridge and then there's a
second helper library called process
that then lets you start processes on
the second microprocessor so we're going
to create a new
uh two new functions here one is going
to be called upload and send all right
and the other one is going to be the one
to take a picture like such and
basically all we're going to do in these
two is we're going to recreate what we
already did oh one thing i forgot here
is we just need to begin the bridge when
we do our setup okay so we're going to
create a new process and that process in
this case in the case of taking the
picture is just going to run that FS
webcam utility that we already did and
then we're going to add a parameter to
it like we did before of the file name
we're going to use the same file name
that we're doing previously then we're
going to add another one that is the
resolution all right and then once we've
constructed our process then we're going
to just go ahead and run it and then
upload and send is going to be super
similar we're going to all we're going
to do is we're going to run Python all
right and we could probably actually do
this all on one line but just for the
sake of making the code a little bit
cleaner easier to understand we're going
to pass in the full path of the script
send pew I that we wrote previously and
then we'll run that all right does that
make sense all right so we're basically
just using the Arduino sketch to
recreate the commands that we were
running from the shell earlier and then
we're just going to drop into here so
we're doing our and we're going to blink
a light and now we're going to take a
picture and then we are going to upload
and send the picture all right and let's
just check our internet we'll cross our
fingers here doesn't look like it's
going to work here so but in theory what
would happen we could probably actually
well here let's come up here
unfortunately no because the Arduino and
this need to be on the same Wi-Fi
network and the conference Wi-Fi doesn't
like it just doesn't give you the nice
eye peas in order to do that so it kind
of sucks but here well so we will so you
can come up here you can verify that
this works and this doesn't let's just
see what's going on here Tina well tell
you what I don't know that it does is a
ton of good to debug this at the moment
because it's not going to end up working
anyway but let me jump to the dramatic
conclusion and we'll show you the fact
that that my dog actually was able to
take a selfie and so we had this setup
that we have right up here
and then it takes about 30 seconds for
the picture to be taken for it to
uploaded to dropbox and then for it to
come through on the phone and and that
is how i taught my dog to send me
selfies so thank you all very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>