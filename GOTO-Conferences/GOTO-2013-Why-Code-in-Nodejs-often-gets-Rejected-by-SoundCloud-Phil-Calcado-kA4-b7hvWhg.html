<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2013 • Why Code in Node.js often gets Rejected by SoundCloud • Phil Calcado | Coder Coacher - Coaching Coders</title><meta content="GOTO 2013 • Why Code in Node.js often gets Rejected by SoundCloud • Phil Calcado - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2013 • Why Code in Node.js often gets Rejected by SoundCloud • Phil Calcado</b></h2><h5 class="post__date">2015-10-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kA4-b7hvWhg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone thanks for coming thanks
for having me
my name is Phil I worked for a company
called SoundCloud in Berlin and I'm here
to talk a bit about how we had
SoundCloud have experience what's our
experience with the node.js community in
general and what I think and it's not a
song called things like what few things
could or should be done to each some of
the pains we've had while trying to not
only beauty seems in node.js but also
get node.js people to join us and to be
productive into Jericho so the first
thing just briefly on me in 2011 I
decided that I didn't want to be a
consultant anymore I've worked in
consulting with forwards for four to
five years and consulting is very fun it
you travel a lot you do a lot of
different things but it gets the stage
where you want that client for one year
and when things actually start getting
good when the products out and users
start using it you are out of your
contract and you're back home and then
you go back to another client and start
over again and again and again which
kind of got me a bit tired and I decided
that it would be better to go build a
product so I literally I knew I wanted
to go to Berlin because and I literally
went to building start-up jobs.com which
is a very nice website actually and
ended up finding this complete course on
cloud so some cloud is the largest
repository of order on the web we can
think of us a bit like YouTube for the
web and the amazing things that when I
first apply for some cloud I actually
have never heard of some cloud but it
happened the same as when my sister told
me she was pregnant you know she called
me is like oh I'm pregnant and
congratulated her I stepped out of the
house and immediately all women around
me were pregnant it's just you start
realizing it and the moment I applied
for SoundCloud I went to the Guardian
page I went to the Billboard page and I
saw that there were players from
SoundCloud everywhere we are we are bit
of a platform or we used to be now we're
more of a destination website but we
grew as a platform
and your pelvic we have more than eight
hours of sound music and speech uploaded
every minute so you can't possibly
listen to all of our archive even if you
stop for the rest of your life and we
have around 200 million users a month
both on our own properties mobile
websites websites everything and the
other places where our widgets is like
the Guardian website New York Times
white house and the different things I
have from the White House for Obama to
Skrillex we also have some weird stuff
like the sound of bats having sex which
to me sounds very much like Skrillex but
it's it's a platform and we are growing
a lot but one thing coming from a
consulting perspective a consulting
background one thing I knew was really
really important to get right we were I
think when I joined we were about 40
developers and which is a big startup
but she was small for this guy always
history and a recruitment process was a
mess I remember doing Skype Skype
interviews from London to building then
flying to Billy and in the same
interviews again and then people not
sure so I had to come in a Sunday and it
was really bad and I'm really passionate
about recruiting and the whole
recruitment process and saucy as well
like finding people my because I had
this background as a as a consultant and
when you're working many working in
consulting what were in consulting what
you do is to sell people's time so sauce
you find people exactly a core part of
your business because that's what you're
going to sell in it so I came with this
mentality and I dedicated a lot of time
in work with my team and the HR people
in trying to get a recruiting process
that would suck a bit less and inspired
heavily about what we used to dress or
works we come with a we came up with a
very simple model in this model we have
a funny interview where someone screens
you just to make sure the expectations
are match we got a lot of people who say
oh I really want to work in an order
called a new format of audio codecs this
is not what a back-end developer
SoundCloud does we do have some people
working on different parts of this but
if you're going to work as a back-end
developer is not very likely going to do
that
so we may need to set expectations
beforehand and the second part is the
code review so we send you a problem to
solve it should take about three hours
for an experienced developer to do Dula
and the center-back
we have at least three people looking at
your code and making a sentiment we try
to give people feedback when the code
was not didn't meet whatever criteria we
thought you should meet and then if you
if you succeed in that then you come for
interviews and worst case an hour you
would have like six interviews we've
we've had high with just two or three
and the on offer is the last stage and
as a manager right now my one of my main
concerns is make sure that this cycle
goes very quickly because it's really
hard find good people when you find
someone you just want to make sure you
get this person before next I got them
and because I am also very worried about
about getting people that actually know
how what they are doing I really really
value this step which the code review to
me this is the most important thing we
can get along with you very well maybe
we are not exactly the same kind of
people so we will have some some rough
edge to go through while communicating
but if I if I hire someone to write code
and I haven't seen anything these people
this person has written before it sounds
a bit off to me so I tend to really
really value this part of the process
and one interesting thing we had when I
first joined this was literally the
email I got with my challenge back then
which is to build a website with one
thing it's an upload button and a
progress bar so you could upload
anything and how to make it available in
a URL and the only really trick on this
coding challenge is the progress bar
because you have to synchronize that and
has to work in i6 so you have to
synchronize that with what's being read
in the backend and it's a bit tricky
depending what you do especially
supporting multiple clients at the same
time but it's not it's not too
complicated but yeah
it that's what we had and the first time
I actually gave this talk is the second
time I I collected some data on all
submissions we've had also
I've had evaluated and try to understand
what languages before using to to submit
their solutions in we don't really
require any specific language Soundcloud
used to be a ruby shop these days we're
moving more and more to has been a JVM
shop which a lot of systems in Scala and
closure but we didn't we never said you
have to use this language oh you have
even know Ruby and the only constraint
will have we will have Vince you have is
you should minimize the dependencies
ideally you should only depend on
language runtime and that's a bit
complicated with language like Ruby
we're like everything's in the runtime
but that's you should not have to
require a library you may if you think
you need really need this one library
but just white right one paragraph
explaining why you think he's needed so
in between 2011 and 2012 this was kind
of the distribution we had we had
massive well have a lot of Ruby a lot of
nodejs
some Java some C's and pleasure and from
these submissions is in percentages
these the green represents people we
actually invited for interviews after it
and that doesn't me the person was hired
just that they we actually said oh you
know what we should come to office and
we should chat before before talking
about the different different values one
thing that I really really hated that
challenge I hated it while I was making
it I was submitting my solution to it I
hated it was reviewing the code because
99% of the case it's so simple someone
would get something like rails a flash
uploader putting them together and send
to you sometimes there will be a whole
project completely fulfilling the what
was asked but there was like one or two
lines of code that the Candide had
actually written everything else was
just putting together frameworks and
doing some stuff it got to a stage where
I started emailing people back saying hi
I'm a name is phew I'm reviewing your
code can you you I see you use the flash
uploaded I know we don't supposed to say
that but that's not kind of what we are
looking for do want to try again without
doing that it did work a couple of times
HR people not too happy that was you
know
but we've got at least two people who
submit a much better solution once we
were clear with our constraints but also
to be honest the problem of uploading
and streaming for us is pretty much soft
transcoding is a bit of a pain because
we have a lot of scale uploading and and
streaming back we will see the ends in
s3 so we have something in the middle
that plays it you know that just make
sure everything is fine but we each
store there is safe there our our villa
we are as reliable as Amazon in that
sense so instead of doing that I like we
got together like a lot of teams got
together and tried to think of a better
challenge for this and the one we came
up with was about events so we are
proposing we're asking users or
candidates now to do socket server this
is one system that people should build
where it receives events in one socket
and events are user a followed user be
user be followed you see any difference
like user a sends a message or broadcast
message who should receive only their
followers and your system just has to
work out what's what's going on there
one thing we also provide is a test
suite for you to check so there's a
there's a program file that you run
against your program before I've been
sending to us to make sure that you
likely a solution is right or wrong I
don't have any problem talking about
this deal and I would wish I wish to
make this open source at some stage
because I don't really think these
things should be secret or secrecy on
this work but anyway then we got to our
distribution and one thing for for this
new challenge and one thing is I saw
this pass over the past year you see
here go kind of took over from C we used
to receive a lot of submissions now we
see a lot of go submissions I don't know
how to read that we do a lot of girls
especially our infrastructure teams so
maybe it's because someone read the blog
post on it I don't but I don't think I
think I got one submission in C over the
past year everything else was around
these languages and was for number of
people who invited over for interviews
very much like this
so no js' is you very very low in
general if you could actually make it to
the second stage of the interview and
just one thing that the first time I
give this talk and when I talk about
nodejs in our experience we know chess
with people that it's once they don't
get me wrong we are from Berlin we are
hips it's what we love talking about
foreign languages we love talking about
frameworks love discussing - everything
that you haven't heard of itself nice
and we do have no jazz projects actual
mobile website it's pretty much to all
the back ends based on and low jeaious a
lot of our events streaming website
system was no chance as well but we were
bit scared because we will we were going
for this new project which was to
replace our public API with symbols with
something that pretty much just receives
non-hp requests makes five requests in
the backend that matches them together
somehow and returns this is the perfect
case for know chess especially if you
considered everything is Jason but we
were like can we actually build
something with these two and find people
that can maintain and keep that going
and going in a good shape not too sure
we decided to we decided to actually
build this this new project inclusion
but the main reasons that the code
received are mostly like this this is
not actually a submission this is
something I got on the internet and
trying to obfuscate because I would make
for second date but this is not all this
no function it's just bad for Sirocco
this ifs everywhere it's Flags
everywhere don't know what going in to
know what you're doing it works kind of
in each call back there's a blob of
JavaScript it's impossible to read
duplicate the lines blah blah blah so
the main thing you're finding in the
node.js for miniature now in the Ruby
community as well is that if something
comes from some other language Java C
sharp small talk is okay I guess but
like if something comes from time at the
range it's not good now dude this is not
Java
don't don't don't try to push our
complexity here object models your
everything on us JavaScript Ruby
whatever they had simple language they
don't need that and that code tells me
that this is not true
we shouldn't be throwing away years and
years of development culture and
sometimes even a little bit of science
just because we think our language the
simpler of single linguist are better so
these are like some books that actually
have some theory around how objects
behave in how I design and circus I
think most of them are in C++ at the end
one in iPhone so we should be which
apply this kind of things this kind of
knowledge spell technology mix toy
JavaScript code bases well I suppose but
the big problem is that javascript is
very flexible in the way that especially
node in the way that you can lay out
your application and I haven't seen a
good book or reference on how one should
lay the other application one should
create the the major design I think we
are we evolved the industry in a sense
that code and design a pretty much the
same thing now with the drawbacks that
we stopped writing books and consuming
material design so much before we used
to have some more abstract books where
modules talk to each other this way were
discussed now we kind of have a book on
this library a book on this API but not
so much on how to lay down an
application you have to spend a lot of
time reading through open source code to
understand what how do people actually
build this stuff so the main thing about
you about JavaScript in that sense
though is that there's at least three
ways to build a lodge as JavaScript even
application one is to use decent
procedures to eat morning to sin think
about procedural codes that we keep
hearing out this procedural as if it was
a bad thing it's not a salah' bad thing
there's a lot of people who invested a
lot of time before most people in this
room were born to understand and to
create good patterns around procedural
code it is possible to do you can spend
your time reading books like this and
then drawing diagrams like this which
you don't really have to but this is
this describes how modules interact with
each other with flags and data where
they come and they don't come there is a
lot of technique and there's a lot of
patterns you can use when writing
procedural code procedural code is not a
blob of things put together in what
be a function what should be a method
this doesn't have to be bad but to be
honest it takes a lot of effort the
literature is not up to date in terms of
technology so you see like people used
to draw a diagram like this then write
the code then write pseudocode maybe
then write the code so we don't do this
anymore it's a bit hard but you could do
it you could totally do it and the other
option is objects so everyone hates
objects these days apparently this is
the this is a nice thing to do I even
though I've been doing functional
programming and Lisp languages for a bit
I really like object orientation and
sometimes that gets me to be the odd one
in the room I don't see any problems
with that I think it's fine obviously
the theory is flawed here here there but
then again what's not but you could
JavaScript with objects as well in fact
our main website is a single page app
there's a blog post describing it which
is pretty much object oriented and it's
fine works well we have a lot of people
contributing to this codebase we have a
lot of changes every day what's fine the
code is readable the codes mean
maintainable it's not no js' runs any
browser but you could apply the same
principle somewhere else but the way I
like to write JavaScript both in low
chairs without you know but also in the
browser even though I do have much much
variance in the back and then in the
front end is to use functions and when I
say used functions what that means is
just like objects at the building block
of an object-oriented system functions
become the building block I use so
everything not everything but most
things are going to be modeled after
functions I'll show some examples later
but one why would you anyone use
functions with JavaScript in that sense
why not go for the object approaches you
very popular well the first things that
it's not it refers to me that the nodejs
come back tomorrow if use much better
its switch where a functional approach
then any other approach I've tried this
is the same with Ruby one of the first
projects I've I've I was part of at
SoundCloud was our notification system
the thing that sends you push
notifications email notifications and
all that and it's very the system that
processes a lot of transactions for a
second
we started to build it in event machine
which if you know Ruby if you don't
already is a is an implementation of the
reactor pattern because it was Ruby we
decided to make it really
object-oriented and we ended up with a
lot of objects which implement the
command pattern ie they're just
functions or procedures and we wired
them together and we do a lot of things
any day and like dude if you just had
like made it a functional design sort of
an object oriented design we would save
a lot of lines of code and a lot of oh
my god where does this go again
I just fuse to me that then especially
the reactive had and then the callback
model suits and a functional approach
much better and turns out that there is
a lot of things online including these
famous post by Brandon Wright the
inventive JavaScript this is oh actually
JavaScript really careful what I say now
is a bit like scheme because some people
are great some people's agree some
people kill each other after this and
it's also someone who has done commonly
spin scheme a lot I think they are I
think they I can see a lot of scheme
when I write JavaScript and I see a lot
of how I can make it following scheme
patterns and if people think our scheme
is extremely functional and these and
that I actually excuse me has a lot of
mutation everyone just use these
functions in a much better way and I
like to follow that but I don't want to
get into the religious wars of
JavaScript is all these fears no I don't
think it is a lisp I think but that
doesn't mean that we cannot use what we
know from these languages in the
JavaScript itself now how do we how do
we then use these languages how do we
get the concepts from languages like
Lisp I suppose you could use some other
language as well and apply them into
JavaScript as I said a bit before I
think it's fairly unfortunate that our
industry got to a stage where we have
code this design very well established
in our heads but we are not discussing
design so much which cursing
lines of code in ten lines of code
whether or not and and also and may
maybe hang on maybe I jumpy from the ten
lines of code to how to distribute these
globally in to scale horizontally but
we're not discussing the mid level
architecture
how the modules talk to each other how
they should be shaped I think we we just
decided that dependency injector is not
good a good thing but then we didn't
replace with anything and there is a lot
of hard-coded dependencies be injected
everywhere
and this but I really think this is a
bit unfortunate and we should work on
that
but when I was thinking about this
problem how to structure an application
a functional way someone suggested a
book to me which is freely available
online it's called how to design pro
house design program is really good and
it the way it got you through many
different things but I think the gist of
it or what I what I would like people I
work with and people who are applying
for sampler to take from it is stuff
like this this paragraph here where it
creates a function to add three numbers
right so don't be don't get scared with
the parentheses I swear it's the last
time you see Lisp in this presentation
but what what we have some Turkish and I
apologize for being so high so this
defines net function so define it's
different defining a function the add
function takes an X and then it returns
a function called X adder so if you see
there's another defining block inside a
function the local keyword there is a
bit like far in JavaScript and then it
returns this function so you you receive
you have a function that returns
receives X and returns a function that
sums X with something else if you want
this into a repo that's what you get you
define I've defining my own variable
adder and saying that it's the content
of AD plus 7 then I apply add to 10 and
I get 70 so if this didn't make a lot of
sense because of the parentheses it's
roughly equivalent to this JavaScript
it's also very high so if I get I have a
function add that returns upon receiving
X the result returns a function that
sums this add this X with another y and
then I create another and add it to by
the table and here you have some chrome
output tray
now this is just using higher order
functions and what is sometimes referred
to as combinations to provide some to to
add functionality to to your code and
there are many different ways you can
apply this and this is like I think this
is the core of our that book and so many
so much of the literature especially on
Lisp kind of tells you like you see
write code this way and you're going to
have a lot of benefits so what kind of
benefits let's let's see three examples
of how this can be applied to real-world
JavaScript for some valid real world but
how we can go with school we can be cool
and so you get some benefit hello first
example passing functions around it is
very very common to have code like this
in at least the Coe submissions I
receive and now the nodejs specifically
code I've seen these these these are two
functions at track and at user which
just receive a user a track object and
save them to the database or execute
some some operation in database what
they do they both get a connection
passing in credentials they both execute
which means theory is a function that
executes some jobs some sequel in the
database connection and they handle
error so obviously there's a lot of
duplicated code there and because you
may have one of these functions for each
entity in your system you end up with a
lot of code in object-oriented languages
you can do this in several different
ways the most common is to have a
template method around this but if you
if you've used spring JDBC and all that
you know that that can get really really
bad but also you could try be fancy and
objective it's aspects for it which
never really worked very well but shoot
there and different things so to remove
this duplicated code even in
object-oriented language is a bit hard
it's it's ok
it's doable but it's hard in a
procedural way I'm not too sure how we
do that but anyway when you talk about
functions and it's all about functional
programming there's an easy way to do
that at least something that becomes
easy after a bit which is the first
thing is that you extract
common and this is a pattern we're going
to see over and over and over and over
in functional programs what you're doing
functional programs that you extract the
protocol there the interaction from the
the what's actually being done so what
we're doing here is that we create a
function execute with connection that
receives a function to execute and
arguments and then it will create a
connection to the database and just call
that function or handle there itself
that's very simple that's very easy re
actually happened to do a lot of this
stuff in the browser but for some reason
not so much in the backend when writing
JavaScript but then once you've done
this you can write your add track and
add user function like those so they
just execute they just call execute
passing in the database and and they see
what they want to do this do code rate
should be much simpler if you follow
this pattern and the way you focus the
operations like that so you call execute
with connection you pass in the function
so when I was talking about function of
being the building block that's what I
meant in an object-oriented design you
would be passing you objects around in a
functional design you often be passing
functions around and sometimes these
functions well oftentimes these
functions are going to be pure functions
like this one where it doesn't really
change state though it calls a function
at any stage but that's a different
question
and receives an argument so this is to
be honest out of what I've seen
including that sample I had before this
simplifies a lot of what people are
trying to do around resource management
why people don't do it I don't really
know so another thing is that closures
are not only for objects in JavaScript
we tend to use closures to emulate
object-oriented design it's actually not
a bad thing to do a lot of languages do
that a lot of language have the object
system built that way and it is a funny
meme around an object dissapointment
closure a closure is a boomin object
this is this is okay this is fine but we
can do more with that even if you don't
want to use objects you can use closures
in a way that will help you build a
program in um of
functional way even with pure functions
which are good for other reasons but you
have some have enough simplicity so one
example that also comes along I haven't
worked in any high profile website that
wasn't attacked
every single day when you I worked for a
bit in a relationships website you know
this kind of find a partner I know and
that was that was the the the most
horrific when it comes to being abused
every single day by people trying to
find the ex-boyfriend there and also a
crazy stuff in our case we get a lot of
spam so what we do if you go to some
calm now and if you write some
JavaScript yourself that makes no sense
I think one no 10 messages in a minute
you're going to receive your warning say
hey hang on stop there
you you're doing too much stuff at the
same time we that's because we think you
about we have a lot of people trying to
sell plays and comments in sounds you
have to fight against them
so that's the kind of code that one
meant ends up writing so the function
right comment takes account alpha in tax
relief that counts bigger than three it
just throws an error it doesn't write
the comment otherwise it saves the
comment and returns the in incremented
count why does it return an incremental
count because I wanted to give this
function pure so I didn't want you to
save state somewhere so I'm returning
I'm doing everything I have to do and
returning your information I had there's
no state cap there's no state change
which is all very good and great except
that the way to call that function now
it's a bit like that in the in the block
below where I have a counter start with
zero and that I have to manually keep
the contents the counter somewhere and
positive and obviously this is a
exaggerator example this code could be
everywhere and how do you keep track of
the counter how can you make sure that
the count is always used never erased by
mistake this is this is really hard to
keep track of but it doesn't have to be
like that one thing you can do is first
you can keep your write comment code
exactly like it is like you don't need
to change anything is okay I would argue
that
keeping track of the counts and writing
the comment itself are probably two
different things and maybe we should
separate them in different functions but
you don't have to do it this is maybe
this is another iteration in our
refactoring but what you can do is to
create a second function which I called
here make write comment function because
I'm horrible naming that receives an
author and then what this function does
is that it gives to closures
it keeps an immutable closure for the
author and a mutable one for the counter
and the function it returns is bound to
the counter up there so now you don't
need to you don't need to keep track of
the returning value because once you
call this function it will it will
mutate the immutable verbal meanwhile
your internal function is to your write
comment function in soup here and it's
probably easier to plug in some other
things one interesting thing about this
design is that it doesn't you can have
the counter logic you can abstract this
protocol even further and having the
counter instead of doing you write
yourself short sorry making the second
function instead of calling write itself
it just receives another function this
is doable and that's probably what you
want to do in the long run but overall
it should be fine it should work and the
way you invoke now is a bit different so
you create a phone you create a variable
current car with user rights comment
calling make write comment fascinating
because ro and then every time you want
to call instead of calling that the
first function we call the function you
just have any variable any function it
works exactly like the one before if the
state kept in a closure it's a bit you
will eventually depend on what you keep
you may have issues to that for example
you can't eat as easy sorry you can't as
easy catch this guy but there are ways
of doing that and just a minimal example
of what I mean by putting closures have
in your states in the closures and
another the third example which is it's
a bit of repetition of the previous ones
but with a bit more action it's using
functions are everywhere
you have you have a lot of these code as
well where you have delete user and
activate user and it's very common that
an action like delete or activate
activate I mean like when you receive an
email in please click click here to
activate your account I want to receive
this kind of emails we want to make sure
that the person activating the account
is either the user or someone who has
access rights to do so for example an
admin and this little in our code base
in our ace code base I think I've
grabbed for this line over there if
current user blah blah blah but in
emails and I think whatever number of
controllers we have at least 2/3 of the
controllers have this robot copied
pasted boom
copy paste boom copy paste boom we've
managed to extract with a lot of testing
and cannery releases because it's Ruby
it's really hard to know when you
changed its radius not even really want
to change something you never know
what's going to break but we managed to
reduce it and at least have them calling
the same function so now instead of just
having that mean we have like an ACL ish
implementation but it is this is
extremely common and again if you look
at that and if you remember the first
example we had probably what we should
be aiming for here is to extract what's
common to exactly protocol so we extract
the common protocol with another
horrible in image function calls make
authorization checking function which
receives a function so what this guy is
going to do is that it's going to do
exactly the same the same we had before
but instead of calling the exact
function we want to do approve user
delete user it calls the function to
execute if they were successful and then
again once more you could probably
receive the list of users are proved to
do such-and-such operation you could
pass it in or maybe even better you
could pass in an out that authorization
function that does whatever to check
what's going on and then when you do
that your delete and activate user
functions become to be a bit more like
that they are really small and all they
do is to actually do the task the
sorcery as opposed to a lot of bumping
and
boilerplate and how you use it it's like
the same way we've done before you make
your transition checking function
passing the function you want you
receive a function back and that's the
function you keep using everywhere one
interesting thing that comes many when
you're talking about web applications
why do I keep these functions because if
they are dynamic how how does that go
purge requests they create these
functions I never really had problems
with that
I've heard people especially doing
JavaScript in the front end so for
browser having problems with these kind
of things and even happy to cache
functions and do a lot of different
things I'm not really specialist in how
to up to myself or the browser so I
would I don't know if this actually is
going to cause you problems or not
before for our most of our
infrastructure this has never in
naturally in no language but Ruby this
has caused problems in Ruby because the
garbage collection is funny you have to
do different things but this works fine
and in the in the end you can question
yourself do I even need this this you
guys up there
so you start when you start going this
this way when you start separating the
protocol the how things interact from
the things themselves you start having
more you might experience at least a
much more pure domain and in each and
description of what you're doing the
main problem with that is that I wrote
in from tamiya list yeah I don't know
because once more we don't have de lis
so much our blog Rafi and work around
how to design programs I just the type
of the book we I actually end up with
some some philosophical questions in my
head about how to model an object domain
using functions too if you know I've
been using this for a very long time I
think I tend to fall back to the old
object model and then try to pull me
back up we use a lot of Scala at some
call which kind of tries to match both
object model in the functional model I
think it tends to drive you more towards
the object model when you doing domain
modeling we also do a lot of closure
which used to be very strict in what the
data types are as a functions and kind
of structured data but now it's much
more
it's about protocols and things you can
do so I think the main problem with this
approach is that there's no there's no
domain-driven design work for this some
people try to think of that book had
talked about how to how to write
programs as this kind of stuff but I
haven't seen any an equivalent to this
book of like how to dis how to model
your domain using functions except when
you talk about you know mathematical
domains and things that easily align to
functions themselves but I'm going talk
about user has a track a track has likes
these things in that I haven't seen any
good large example to apply straight
away so it's one I think the main
takeaway I wish you guys had was that
disease there's a lot of code there's a
lot of times that we're we're even the
way and we all know that I'm pretty sure
every single speakings conference is
gonna say these exact words we reinvent
the wheel too much but also I think more
than that we just we think that what we
have in our hands is different why it's
not it's just we have we have fairly
ignorant about what went on I know
before I was born I know I know I am and
every time you use searching for
patterns to build programs like that
because you don't know what's a quat
terms to search for or what - look what
you know what we go for really it's
really hard to find what's the what's
equivalent someone used temp 20 years
ago
my recommendation today I just try to
read books which are similarly useless
to you at all times like the structure
analysis books probably none of you is
going to use in your work unless work
for a bank
maybe but but still will give you a lot
of insight and will teach you some words
that maybe you can try to map back to
your domain but when it comes to no js'
in JavaScript itself did the framework
we had there had only two things or two
techniques extract the protocol from
what you're doing and use cheap mutable
state in enclosures this is pretty much
how I've been writing closure and schema
for some time now and works very well
and JavaScript also has been working for
for the past few years I think that's
good enough but one interesting things
that
what I tried to avoid within our
examples and when discussing the
problems is to use these scary words
scary words like monads because every
what's going to happen is that you're
going to start writing these codes like
this and eventually you're going to
you're going to start thinking that
actually your protocols also have a
protocol you know the resource
allocation protocol for the database
that actually can be abstracted even
further and all this stuff can be
abstract abstract abstract it and then
you're going to go in Stack Overflow
and you're going to say mmm I'm thinking
about these these days and the first
answer it's going to be oh you should
totally look at my OneNote tutorial and
you go look at the burrito story or
whatever they got had written and it's
gonna take a while you're gonna finally
understand you're gonna write your own
Nona tutorial because that's the thing
you do and you're gonna start actually
using it a bit more but you don't have
to you can start with just these two
things I was talking about just extract
the protocol from the actually thing
that's been done because that's gonna be
repeated over and over and over it's a
pattern let's say you just I don't think
when you go more towards the functional
edge you need as many of the old-school
functional sorry object-oriented
patterns anymore function programming
has its own patterns don't let anyone
fool you but you don't need those
anymore you recreate or not they need
for those will be fulfilled by higher
high order function follower of them and
eventually you're going to discover
another of some other patterns and this
plenty plenty to learn for like I was
saying most of these books I really like
owning books I I don't have a Kindle
because I liked this male hooks and when
I first moved from Australia to Europe
like the largest bit was five boxes full
of stuff of these books and I do
recommend that you start buying and
trying to read even if you have no idea
what you're going to use it for because
especially like this tables these
pictures very rich in the sense of stuff
I myself bought thinking I'm never going
to use it but what the hell I have this
week and then eventually that map to my
experience building systems in many
different languages even in Java which
I'll still do a fair chunk you can see
at least you can understand why people
complaining about
Jonica that's why but in JavaScript Ruby
Python closure obviously in Scala
there's a lot to learn from this books I
just don't be scared of the language
they use because sometimes everything to
a different audience but ask go to
second flow go and have someone pointing
that you two did in one a tutorial but
also in the JavaScript community there
is some movement towards is not with
underscored yes so because I had to
repeat this talk I started reading this
book and by started reading I mean I
place an order in Amazon and this is
this is also full of interesting
concepts and trying to escape from the
whole you know Huskers color category
theory madness you don't need that you
you may need that you probably will need
that at some stage but you won't need
that to get your code so much better
shape now if you decided to go in a more
functional way with the JavaScript but
then again just to reinforce it you
don't have to do that
it's object-oriented javascript is
perfectly fine if you know what you're
doing especially with nodejs I don't
think the best way but there's plenty of
people doing it and funny enough on when
I showed the graph they - only people
I've hired I've made one offer the guy
hasn't replied that and other ones been
working with us for a bit late months
now they true only people who actually
had no Jessup's submissions had them in
object-oriented Java JavaScript and it
was fine it was preference New York aid
were great great code and we caught the
guys in so yeah this one had talk to you
about so you have questions time for
questions
so answer then why do you use no chat
SoundCloud yeah if you have the other
questions just come grab me after the
reason we use in Odessa SoundCloud it's
funny because I've talking to you I'm
talking to a lot of people from Twitter
and Netflix and different companies
doing pretty much the same thing and
what we do a lot is to have micro
services in the back and some sort of
controlling API in the front for example
we made a questionable decision of going
with the public API for our back-end for
the for our website now we are suffering
a lot of that if you go on soundcloud
now open fire but press f5 and see the
nature bureaucrats that are made you're
gonna go crazy one thing we want to do
is to have these guys talking to a
back-end they own and what this back-end
does is like one get requests here get
scattered across many different services
it's a bit of dataflow programming which
will echo and then everything returns
sometimes we don't care about if
something doesn't return we mash them
together we return one response to the
browser or three mobile device which are
even worse
load us is perfect for this kind of
thing it's just really really good it
you don't really have to think about
this a lot of the libraries are based on
that it's great we started using it more
and more but then eventually for this
eventually we hit the wall with hiring
we finding people who actually could
levels up in in that sense in how to use
node.js and because we we started
becoming more and more close to what
guys like Twitter Tumblr and other
people are using on Foursquare
are using we kind of moved towards it
which is stack which is a finagle as a
framework built by tweeted all these
people use that's very much what I do
now but one other thing we use node.js
heavily for now is segmentation of users
which is heavily based on events before
you had you had some sort of system
where segmentation was how what's the
age group of this user or I don't know
what's there what kind of tracks
this person has listened to in the past
six months in the kind of world we have
today segmentation has to be much more
real-time to know what to recommend to
you what to show to you I really need to
know what you've listened to five
minutes ago and for these
a lot of our systems you know Jess both
those that try to get you to stay in the
side and those are try to get you back
to the side because obviously is any
public facing website a lot of people
who sign up because they wanted to
listen to one thing and they didn't ever
come back as they even forgot what the
website was called to begin with and
then you have to try to get these people
back NES this means spamming the hell
out of them we try not to but with these
systems of you know just these days the
mobile back the back end for the mobile
website now it's been the Commission and
replaced with the other solution visit
witty stack I was talking about just so
that we have the same stack for everyone
for all our systems it's functional
JavaScript faster than orient object
oriented no Jess actually don't know if
anyone has a benchmark and wants to
share that would be great but I don't
think that many reasons for them not to
behave very similarly but I never really
had to measure this much what's it
really an object define a function and
function return your function that's a
very good question but the object
identify definition but I would say by
definition has multiple operations
attached to it and a function has only
one operation function only does one
thing so a function that creates a
function it's just a function is it just
happens at the return it its return is a
function itself so while the object has
a whole protocol attached to the data
and like language like closure try to
make this a protocol instead of class
and object a function just this one the
other thing so it's it's much more it's
much less coarse-grained at one problem
that causes which I haven't experienced
so much in JavaScript but I do
experience a lot in closure is how do
you organize these functions they put
all my functions related to user in one
namespace we use to scatter them around
by like what part of the horizontal
layer they sit in I don't know
this is still open an open question in
my head
all right why do mice color because this
so well actually I think it is because
they kind of know what's that we use but
I have to say that those who don't do
very well that very horrible but right
because we are with this you can find
about you feel if you apply for some
cloudiness your homework you can find
out kind of stack we use so I think
people tend to simplify but we did have
we we had some pretty good people being
rejected in the process just because no
one could understand the code they wrote
and the code worked fine and everything
nice but what the hell does that do I
don't thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>