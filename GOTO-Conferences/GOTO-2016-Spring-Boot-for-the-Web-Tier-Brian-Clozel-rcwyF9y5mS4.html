<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2016 • Spring Boot for the Web Tier • Brian Clozel | Coder Coacher - Coaching Coders</title><meta content="GOTO 2016 • Spring Boot for the Web Tier • Brian Clozel - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2016 • Spring Boot for the Web Tier • Brian Clozel</b></h2><h5 class="post__date">2016-11-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rcwyF9y5mS4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi welcome to to this presentation
during this talk will talk about the how
you can develop web applications with
spring framework and especially here
with a with spring boots so we'll talk
about various things that the kind of
experience you can get but also the kind
of features you can leverage with the
with the latest versions here we're
focusing on springwood 13 and and and
spring forward framework 42 but let but
first let's talk about one thing if
you've been to the presentation given by
Stefan have you been to the presentation
given by sniffing by the way yeah so
I'll talk about really so in spring boot
that there's a feature that's called
externalized configuration and in a way
that's providing you that's providing
you a way to configure the application
inside application dot properties or
application the general files without
doing things manually or programming
programmatically and the thing is the
spring boot team has defined a lot of
keys for you to configure for example
the the port your server is running on
or the your data source etc etc there
are a lot of keys that you can just use
and set the values you want to configure
things easily instead of doing things
yourself but the thing is there are so
many keys defined a one one thing when
you're using those keys you get Auto
completion in your ID because the spring
boot team is providing all that data as
metadata files that any tool can consume
being an ID like IntelliJ or netbeans or
eclipse STS or anything else so that's
the kind of experience you can have in
your ID but to product to provide all
that like I said you the spring blue
team has to provide all those meta data
somewhere and like anything you need to
manage it because whenever you change
the name of the key or you deprecated
something or there's something new you
need to somehow manage the lifecycle of
all those properties otherwise it's just
confusing so previously what the spring
boot team was doing and still doing is
providing and changelog
for each version so that key which
confused the session timeout for example
it was replaced by something else or it
was changed or it was deleted why etc so
you get a full view of what's happening
between versions but to provide that
that was kind of a tedious work to do
manually so that's why the Springwood
team created an internal library for
them to to manage all this and between
two versions of boots you can manage to
get the diff of everything that changed
probably wise in boots so that's kind of
meta but the dead library what what it's
doing its loading the Maven artifacts
for for example spring boot 125 and 130
loading those those jars looking into
picking into those jars looking at the
metadata generating a diff and from here
we'll take that library from here and
what we'll do during that talk is work
on some kind of web UI to display that
information quite nicely so everything
that there'll be the the slides under
the conference website everything here
is actually a longer a shorter version
of a long University where there's a lot
of features a demoed so if you want to
see the code it's on github and there's
also the longer version of the slides so
the interesting part of the about the
code it's a there's a commit by commit
history of what we're doing with that
project so whatever I'm doing right now
you will see it commits by commit and
explained so it's quite it's quite clear
so that's the end of the slide where and
right now will focus on the application
so what we can show right now is for
example kind of output the kind of
output you can you can have from from
that library so this is a sample sample
class a sample application I've got it
into a project just to show you it's
loading the it's loading right now the
the jars and it's showing some kind of
ask a doc textual version of what we
expect so in in a group
for example spring resources chain
you've got ya so in in the group spring
resources change you've got that key
enabled which has been headed and that
key is doing this so that that's what
I've kind of data we're doing going to
deal with during that presentation so
right now what we have is an actual
application yeah let's go so if I launch
that application it's a spring good app
and okay that's the basic application
it's already being done so i'll show you
what it does if you type i want to see
the differences between 125 and 1 to N 1
30 it's loading and then it's it's
rendering a page of of all the
differences between the keys of those
two versions so obviously it's loading
things from maven central good so you've
got it here so we've got the differences
in displayed in table with everything in
the red that's been deleted green
created etc etc we've got all those all
those keys keys displayed so as you can
see there are some groups where nothing
changed recently but they're still
displayed and we'll do something about
it later but what I want to show you is
also the layout of that application so
if you take a look at the layout right
now so there's a the config div module
which is the the library we're using to
generate that data but the web
application we are looking at right now
is a simple blue application with the
application class which is launching the
whole thing we've got controllers web am
busy controllers we've got services and
we've got also pojos to to deal with
with our data because its a good
application we also have things in into
our resources folder being static
resources or applications or properties
l will talk about it and also templates
because here we're using a template
engine so this is the kind of a layout
and experience we have so far and what I
want to show you right now is not
previously when you often when you're
working with a with a web application
what you have to do is you have to
change something being into CSS or
templates or in a classic controller or
somewhere you're changing you have to
recompile restart redeploy all that and
that can be really tedious when you're
doing that over and over especially when
you're writing a web application so
that's why with with the lately with
with spring boot the boot team has
developed the devtools spring good
devtools library which which hooks into
into your life cycle when you're
developing your application and you can
have a really nice experience so I'll
show you what what how you can use that
so I'm stopping the server right now to
show you and here's here's what you can
do you can you can add a dependency and
that dependency is spring good dev tools
and whenever you do that you're bringing
in a library built by the spring blue
team and that library will reload your
application without we will restart the
right part of your application without
restarting the whole thing without
restarting the server or the JVM so
you'll see how it works so by adding
that dependency if I ever restart my
server I still get the same application
nothing change right still still here
the new thing is I can do something here
so I've got a I've got a developer I've
got a browser plug-in an extension which
is public it's out there it's called
live reload so live reload is its in
itself it's some kind of protocol
defined by third party by third-party
not by us and live really is basically
you're a client your browser connecting
to your
and with a WebSocket and whenever the
the server wants your clients you just
refresh it's sending a signal saying
just refresh the page and that's third
party that's regular and if you install
that data that extension and you click
on it then you can see I'm connected
because when i'm using dev tools in my
application dev tools is creating such a
live reload server so whenever i'm
making a proper change in my application
the buddh application will tell my
client to just refresh it cuts the whole
life cycle down to simple actions
instead of restarting stopping etc
refreshing my browser it's just you'll
see so let's try it out with with a few
changes what we can do for now is a for
example right now I've got a key which I
know has been duplicated recently so
this one spring you suffix it's been
duplicated and in my HTML if I look in
the HTML I already have a class
somewhere saying deprecated but I didn't
add a style so what I kind what I can do
is call edit my edit my CSS file and add
something so i can add a rule saying
deprecated and I'll decorate the text by
adding a line through it so whenever I
rebuild my project here's what happened
what happens I'm not doing anything it's
being refreshed the project the project
has been refreshed on the server side
and send a signal to to the client and I
didn't do anything on my browser it's
showing that the change which is the
line here so you might think okay this
is a static file that's an easy one we
can do something something something
more complex so the next step would be
we can add let's say a banner because
someone in room asked for it so what
I'll do with spring boot you can add
files which are better and if I add that
banner in here you can write any text
you want there are placeholders for your
application version etc and it's even
dealing with with the NC colors which
means that if you refresh your project
it's showing a nice little banner inside
your your console so to give you more
explanation or on why we're seeing this
right now it's because whenever you're
rebuilding your project the devtools
library is is watching files that you're
of your project and whenever you're
rebuilding it's doing the right thing so
if it's a static file is just swiping
the right thing and sending the signal
to your browser if it's more complex
than for example a template it's a
recompiling if it needs so let's let's
do that for example we'll get a will get
a template so for example in our here in
application we want to prevent all those
keys to be to be displayed like those
groups that were nothing changed we
don't want to see those so let's do that
to do that we need to go to the index to
our dip template and in here we've got a
our forum where we've got the the
versions and our compare button so here
we'd like to add some HTML so I've got
something for this checkbox so basically
a checkbox saying whether or not I want
to see the whole thing so we're building
refreshing all right so I've got that
new checkbox it's not doing anything for
now so I'll like to get that that signal
from my form to my controller so that's
the next step if i go to my controller
dealing with that form so from version
to version and the model so to get this
out just fast forward a bit into the
presentation
alright
so right now I've got a I've got my
controller with my form so I've got a
form object backing the whole form in my
web application and here i want to add
the the full flag the flag at just added
in my a my HTML template so for this I
can I can do something some change here
so i can add a model add attributes so
here i'd like to know if it's full or
not so i don't have it right now so
let's add it so do we have the full
version of the the data or not that's
why we want to have here so so is what
whew no that's not the one TIFF request
better so is it full or not ok and now
instead of giving the the whole diff and
all the groups to to our page to render
we just want to select the ones that
wear nothing wearing something changed
right so here we'll get the groups
instead and will filter filter those so
this list of you check this so we've got
the groups here which our group diff
we get the list of groups here and we
want to filter those with a predicate so
the predicate being so is that group it
did something change in that group so if
type it's a conflictive type so if
something changed then we don't want to
see it we want to see it or or we or if
we know that the we asked for the whole
thing okay so by doing this now we get
the filtered list of our groups we want
to collect that to list we're done so by
doing that we should see a lot of things
disappear in here okay so we've got less
things right we've got only groups where
something's changed and we made a change
to an actual controller so when we did
that we rebuilt the project and and what
happened is dev tools to care of this it
restarted the the spring context the
spring application context with the
beans without restarting the old JVM nor
the container so the it's actually start
restoring pretty quickly if you look at
this in the run application here I think
we've got the should have somewhere the
time at the end here here it was started
in less than a second and the JVM has
been running for a while now because we
started out the the presentation earlier
so okay that's the kind of experience
you can have when you're dealing with a
with dev tools from
static resources to templates to actual
classes and you can do many things here
so another thing that can that can
bother you in when you're dealing with
with a web application is dealing with
the static resources in many ways so
here we are going to show you i'm going
to show you how to deal with with this
in a specific way so for example in this
application all the static resources
they are built there we get them as web
jars so we're not copying and pasting
those resources as just static files
into resources we have those specific
path and if you look at the palm if you
look at the palm then you'll see that
we're getting jquery and bootstrap as
maven dependencies so we're getting
those which are jars and those jars are
on the classpath of our application web
application and boot made those
available in or and serve we can serve
those as static resources directly so
that's what we're that's what we're
doing but the thing is if you if you
look at the actual page when you're
doing this you've got to have the
version and you have to deal with with
this so meaning whenever you're
upgrading the version of some static
library you have to deal with this also
interview template so both into your
palm and your template that's not really
let's not really fine so what we can do
is a in our palm we can add another
dependency which is a wedge ours locator
so that's a third-party library that
spring boot supports and this library
helps you to locate those web jars
libraries without specifying a specific
version and it's doing the right thing
but that's a way to show you one thing
if I do that I'm changing the
dependencies of my boot project and
whenever I do that I somehow I've got to
restart and I'm going to explain why I
previously explained that when you do
something the built that when you
rebuild your project developer tools is
restarting the applique
in context etc but doing so it's not
restarting the whole thing because it's
creating two different class loaders at
the beginning of your application one
for your app everything related to the
app and one for the actual container and
all the libraries that you're I mean not
everything that's not your code
basically all the dependencies
everything that you've got in your palm
it's right there in in that class order
that the first one and the second one
wherever you're changing something to
your code that's the class order loader
that's being thrown out and we started
when you know when you're doing
something to retire your project so
that's why when you're adding something
or deleting something from your
dependencies in maven you have to
restart your project that's the only
limitation but that's the same
limitation a very efficient way to
restart right very quickly without
throwing everything out so we okay we've
got that what jobs locator library and
that library will allow us to do
something interesting with those with
those resources so instead of having
those we definitely want to get those
resources without specific specifying
the version so here what we'll do is
create a specific customizer because
we're here was using we're using
mustache as a template engine you should
know that with other time playing
complaining engines that that feature is
handled directly with no need of
anything specific that I'll show you
that you can still hook into it so here
I'll create a mustache customizer so
something that a something that hooks
into hooks into the the mustache
templating engine and and gives the
possibility within the engine to add a
new URL a keyword that URL key world
will rewrite the URLs for from the
resources so because we did that we've
got the new keyword into our templating
engine and so then and only then we can
take care of this so instead of writing
all this
we could we could rewrite all links and
have this so as you compare instead of
having withdraws bootstrap the version
etc I'm deleting the version and I'm
just calling my url QR that i just
created and doing so and rebuilding
we'll see that it's still reloading or
not because i restarted the server i
don't know if it still hooked into it
start doing the right thing
so the thing is not loading their the
resources in our application because I
don't know why
any idea
yeah maybe I didn't restart properly
when I added the the dependency properly
so okay so if you look at this now if
you look at the at the source code then
you see that the versions are here but
in my template they learn their not so
that's one way of dealing with with
static resources as well so okay that's
a that those are first steps for a
regular web application with the static
resources with what jars for example
we've seen how to handle with how to
handle things with devtools how it
changes the way we develop your
application our web application and but
we can do many many more things actually
here I'm going to switch to another type
of application so same application but
instead this application will be based
on angularjs and you'll see reset
okay I reset the whole thing I've
changed the dependencies rerunning so
here's an example of a different type of
application first let me show you that
still works so with 125 release 130
release same here so here you change see
the the browser is not reloading the
page we're fetching something with a a
an API with a with a REST API and we're
rendering the whole thing with the the
angular templating engine so the
difference i want to show here is that
ok it's it's different it's a it's a
single page application but there's also
a different way of structuring the
application we can see here we've still
have our web module with same thing
controllers etc but this time those
controllers instead of returning views
they're returning chase on here and we
don't have we have a single template
here and that template is and we'll see
in that template we've got a we've got
ng ng views alright we've gotten our
angular views and we're getting a lot of
resources with angular jquery etc but
all those all those resources and all
those all those things that are actually
located in a separate module in a client
module so previously what we had we were
getting those dependencies was those web
jars dependencies that like jQuery and
bootstrap we're getting those from maven
and here that's actually what we are
going to do but for our own code instead
of putting everything into SRC many
resources in our web module we will have
a separate module for that so why do
that if you've built a single page
applications you yell you often noticed
that you have ok your code also
third-party libraries like module you're
importing and maybe tests and maybe your
own module system or your own build
using grunt or gulp or anything
so if you add all that into your web
application that's a lot of craft that
you don't want you just want the actual
output of the build and you want to
serve that as part of your web
application so that's what we're doing
actually we have a client module with
here you can see Bauer confidence so
third-party libraries we're using we're
using Bower and we're using NPM to
actually build on our project we've got
a package.json we're saying we've got we
need Bauer etc and here in SRC we've got
our sources so we've got our our
JavaScript and our CSS so that's where
our client application lives and
whenever we build this whenever we build
this we're actually we're actually
calling wherever we're building that
module we're calling note in npm we're
installing those as part of a maven
plugin and we're calling that as part of
our maven build we are building our
whole or own client and then we're
creating a jar just like a web jar and
that jar will be will be get as a
dependency in our web module so here
where we can see we're calling node and
NPM stuff and we are bundling everything
into a jar on those resources and and if
we look into the other module the web
module you'll see that here will will
getting we're getting the spring one the
spring boot client module so the client
module is we're getting that as a
dependency but when you look at this so
two separate modules it's it's good
because we have our tests and everything
we need for our client in separate
module we're not mixing things but it's
kind of different from the usual layout
project layout and that breaks a lot of
usual things you might say but it's
actually quite easy to make it work so
once you've got the jar set up like this
you might think that the whole
the devtools experience I've shown you
until now it's totally broken but you
can actually work around this and that's
a one of the great strengths of devtools
so if we go to the application
properties right now we've seen just a
couple of things we've added in you know
in previous steps but right now we'll
add a specific application but property
for dev environment so whenever you
suffix your application properties files
with with a with a something a key that
that there'll be the environment so
whenever we run our application in dev
mode with a def profile we're actually
applying that properties file and with
dev tools we can hook into it and we can
add a few properties like this so we can
say first we want to serve specific
locations so everything that's on
classpath tag but also files that are
located in to the other modules directly
on disk so we're referring to the the
module next to us so that's only in
during development phase we're serving
directly the resources from the module
from the next folder instead of a jar we
don't need to rebuild the whole jar
every time so first step and then for
dev tools to understand what's going on
we're telling dev tools that it should
take care of those additional paths so
it dev tools should look at those paths
with a file watcher and whenever
something changes it should hook into it
and with live reload refresh your
browser etc so that those are the
properties we've set so it's not a lot
and with a some kind of exotic layout
we're devising it can still work so
let's let's look at this so it's already
started let me refresh making project so
okay we still have that application
still have that setup I still have with
everything and what we can see right now
is whenever I'm calling this there's a
there's a delay right because that we
were making a rest call to to our server
and surrendering on the on the clients
so we can
and see if we still have the same
experience with the with devtools so for
this let's go to our new template so
within our new template we still have
our form with the from version to
version and now we've got our or button
we've got the button compare so now what
we can do is we can for example change
the button we can change the button and
add some some logo in it so that's what
we are going to do so whenever we are
calling this now we have that logo shown
and because it's not super fun then we
can add we can style it so we can still
so that the previous step was in a
template in our web application and now
that means that CSS file it's in our
client module so different module so
here we'll see if everything still works
so here I'm adding a few few CSS rules
to to change the style so whenever I'm
I'm clicking on it now that the CSS
applies so I'm by editing the file
directly on disk I still get the change
instantly in my application in the the
other module or in my men when main web
module all right so now we've seen that
with a different type of application
different layout something that I think
is more suited for single page
applications having a separate client
module with with a building itself we
can still have the same kind of life
cycle and experience developing a web
application so as you've seen being with
boudoir framework there are a lot of new
features that help you to write those
throne than heavy applications how to
handle those static resources in your
templates how to serve static resources
for from various locations etc and not
only this but also the main lifecycle
the development experience we have and
what we can also do is show that
things so whatever you've got your
application you're working on your
application you also often want to to
optimize the experience and the web
performance your users will have so if
you look at the network tab here for
example so here's a here's one thing if
you look into this that we're calling
our API that's the API were we're
calling and we're getting the the data
to represent the whole table of things
so the diff between those two boot
versions for all of kiara keys so if you
look at it it's actually quite big it's
a it's almost four hundred kilobytes
just for one call right so we can we
could definitely change that and we can
improve that to improve that we can
leverage several several features of
Buddha and framework and I'll show you
so the first thing we can do is in that
document were sending a lot of things
including things we don't really need to
render on the front end so that was when
it was when the templating was done on
server we didn't really care like we can
send the whole thing to templating
engine and we're rendering just what we
need but for the client if we're
sterilizing the whole thing to the
client then that's a big payload and
that's that's a problem so if we want to
change that we can select the the right
parts of the payload we want to we want
to see and for this we're sending this
to the client whenever from from our
controller let's look at our controller
so whenever you're calling the data API
you're you're getting this object the
configuration div and that configuration
diff is is that class and that class has
a lot of things in it so there are
there's a from into version but then the
list of differences if you look at those
then download our the dids and property
property types and if you look at those
there are a lot of other things etc etc
a lot of metadata out there so that
that's a that turns it to a big document
and have you seen sprinkled here in
they're in into that model with added
jason views annotations and jason views
annotations are you familiar with jason
views Jason views is a feature in in
Jackson the JSON library so you can
annotate your Jackson model your your
model with those and that's a way to
customize the kind of output you'll get
from serializing depending on the
context so here which we've said we want
this to be serialized only when i'm
using that particular view and we will
see how it works so in the controller if
I if I'm still on the controller I can
say okay in that case I don't want the
whole thing I just want to select what
I've marked as a field as a view so if
I'm adding the chasm view annotation and
and then I need to to use that
particular view of we've seen so here
with the D view summary class so here if
I'm saying I just want to use that view
and then I'm refreshing whenever I'm
calling that up with that that API here
we've gone from 400 to 246 because we've
deleted a lot of stuff so here on the
fly when serializing the object we're
applying that specific view to to that
object and we're so I serializing just
what we need just one step from 400 to
22 5246 then the next step would be for
example when you look at this you can
see the response headers and it's not
even compressed like we totally forgot
to enable compression and usually when
you do that you have to fiddle with your
with your container you have to change
your container configuration set a lot
of things etc but here we're using a an
embedded container and we can even do
that more easily by using the things
we've described until now so
if we go to our application properties
here we can use compression and there
are a few keys so if you type
compression you can see that there's a
server compression enabled mine types
it's a mini response size that those are
all the things we can change here so I
prepared something so here we r enabled
we've enabled the compression and we're
we want to compress everything Jason
text CSS and JavaScript and we want we
don't want to compress anything that's
under 2k because it's not really think
that it's not really useful in that case
so same thing refreshing refreshing the
whole thing and now we've got the the
content encoding gzip so we're really G
zipping that response and now we're down
to 20k basically from 400 at the
beginning so that's great we're now
we're now up putting less we're now
compressing on the fly and now there are
even more things that we can do using
the latest framework features for
example what's the best thing besides
sending more to your client it's sending
nothing and when you want to send
nothing it's about HTTP caching so same
thing HTTP caching you can you can do a
lot of things in late spring spring
newer versions there are many ways to
deal with this there are cross-cutting
ways for your whole application for all
static resources for example but in our
case we want to tell you something
really for our own API here so for
example when you're asking for the
difference between version 1 2 5 and 1
30 we know that once they're those
versions are out we're not changing
whatever once the diversion is released
we're not going on maven central and
changing swiping swiping artifacts right
so when you do that the diff is pretty
much set in stone so we could definitely
use that leverage that and say ok that
diff is the same once and for all and
any new clients htp clients you can cash
it and to do that we will definitely
leverage the
the the e-tag HTTP header so the e-tag
st-pierre is a way to put a tag on a
response and saying that for that
request the response is this and the
e-tag izzy is the identifier and
whenever the client has that response in
cash it can ask if the the the response
is still okay with that attack so we
need to come up with some identifiers
something that stands for the response
whatever happens what we could do is use
the the two versions the two keys right
the from and two versions concatenate
those and that that could work as a key
that's what we're going to do we're
creating a will create a new tag with
those keys so we'll create an e-tag
using the the two of the two versions so
we'll get the string from version and
string to version or just let just get
let them let's get the request all
together in one shot and then we can
create a new tag with this will join
then with a hash and then we'll get the
from and then the two version and
concatenate the concatenate
concatenating both should create a
somehow a decent etag now we need to
leverage that one too into our response
and to do that you can instead of
sending back a configuration gift that
the object you want directly to to
serialize you can send back a response
entity of that object and that way you
can send that object that still
customize the response in any way you
want so here what we can do is return a
response entity and we want to set a we
want to say it's okay we want
add a new tag on it and we can create
daddy tagged with the diff requests then
we can we could even add some cash
control on it so I want to I want to
tell my my clients that they should cash
control this that it should catch that
response for one one day for example or
we could even go with the with one year
once i'm done i'm going ok and get that
body here and changing this should
definitely add something new tour ok
here so to our response now we have an
e-tag saying this is the e-tag and we
even have the cash control directive to
our response so here I've disabled my
cash but if I don't do that and irie
compare here we're going to see that
it's getting now the response from cash
so it's not requesting the server
anymore because we have the e-tag we we
have the cash control thing so we're not
even asking the server to do that
anymore so all right so now we've got
we've done a lot of things with caching
and compression on top I think we still
have a few minutes not 5-10 minutes
maybe five so do you do you have any
questions right now or I can go a bit
further by tweaking the the client build
questions or not
okay so that's a question we usually
have how to get devtools but still
exclude dev tools from from the build
and not have it in production so it's
done automatically for you I mean if you
what I may have not done properly into
my app it's whenever you need whenever
you import dev tools you should use
optional first and also whenever you do
in your application dev tools doesn't
does actually it it's enabled only if
your application is launched in such a
in such a way with directly with maven
or into your ID but whenever it's
launched as a executable jar it's not
activated so you can still ship it if
you want but it won't be activated by
default or there are other ways as well
into your build to exclude dev tools
whenever you're building the application
with the the spring boot maven plugin so
you can say that you don't want to add
all that that dependency for production
good so one last thing that I can show
then is a to even go further with the
build so with the client what I can do
is actually now we've got our resources
in our client module but we could
definitely totally build an optimized
version of our of that application to
even go further like optimizing the CSS
and JavaScript and still come up with a
something with the jar something that
can be consumed but still optimized for
production and instead of doing that on
the server side and juggling with things
into your web application and mixing
concerns you can definitely leverage
that separate separated module client
module and do whatever you want in it
and that's what we're going to do were
even going to use native tools that
aren't really Java related and that way
you can do whatever you want so to do
that first we can add more dependencies
here so here by default we've got power
big but wicked but we could use gulp so
we're choosing gulp as a bill to gulp is
kind of like Gradle in the JavaScript
world if you if you know it and here
we're adding the double tool and we're
adding things here to optimize the CSS
and optimize the JavaScript once we've
added those dependencies we can we can
use those and and create an actual build
file for our client application so I'm
creating a bill file that for gulp which
is called gulp file that Jas and here
you can write that gulp file so we're
basically getting the the dependencies
we've added previously we're describing
the project 22 to the build and we're
adding tasks so just like Aunt we're
saying okay here you need to get all the
CSS files and optimize them on the fly
and write those in a particular path in
our in our target dist directory and
same thing for javascript optimize
everything on the fly and write that
into target disks so whenever we're
building the application we're launching
all those tasks and and we're optimizing
the our resources but to bundle the
whole thing to tie up the whole thing we
can use our pawn in our client and
change a few things so right now
whenever we're launching the bill we're
installing in p.m. if it's not already
there installing third-party resources
with power and now we need to add a
another execution which is I don't know
if I've got it all ready or not no I
don't think so I'm adding another
execution here which is gulp build and
I'm adding their goals and the goal here
is gulp
so we're launching gulp whenever we're
building our application as part of
mavin where we have a third third
execution goal here so now when we do
that we'll build all those optimized
resources into our dist directory so now
we need to get those resources instead
of taking whatever we have in source we
need to have we need to go to target and
dist and take everything from it and get
those resources and bundle them so let's
take a look at this if I go into our
client if I it's a packager application
so whenever we do that we can see that
it's launching a node and PM the whole
thing a gulp then there's our goal build
its being it's been the mini flying or j
SN and javascript files etc so meaning
if we go back to our to our application
and this time we're launching the
application will make sure that the
application is done like this right
then I'm not sure i made the whole thing
right yeah good so here instead of
having our main dot CSS file which is
big not optimized etc I have something
that is optimized for my application for
production and if I ever switch back my
profile to def profile then I can still
serve the the resources derived there
directly into my client module for the
development experience with the with
everything you need for development time
so that's a way to have both experiences
and still have a ni a nice development
cycle with a real application all right
I think I'm done don't I state to ask
questions about the whole thing about
web features I think we've seen devtools
itself etc how do we want
how do we handle he tags for static
resources yeah so maybe we have like a
minute there are many other things as
well that you can do and there are a lot
of things I didn't have time to show you
but there's even the resource chain that
is part of framework and that is
leverage in spring boot and that way you
can even for example do this I'm going
to enable it and you can for example a
day may show you true I think that'll
work directly
or not
no it's not sir from here mmm yeah I'm
not sure it's a it's right for cash
enabled oh you meant sir okay okay so
the other one so whenever you want to
bring resources chain cash no that's
another one cash period string resources
cash period that one so for example if
you want to do this for example cash
resources for an hour for your resources
you can still have this for example a
bjs and if you look at the headers it's
in no store right now because I'm in dev
mode but if I'm switching to production
then it'll show cash control the cache
control that I've set into into them
okay
how do you switch those profiles so with
the whispering boots in the in here in
my ID I switching profile is about
adding editing my run configuration and
adding or deleting a profile here / dev
or production or something like this so
that's here and triggering a profile
it's triggering all the add profile
beans in your application regularly
right but it's also leveraging the
application that properties or
application dash profile Doug properties
so you can that's why I have a
application dev properties especially
for dev and in full production you can
you can launch your application with
with flags and defining which which know
which profile should be activated in
production when you're running
interaction sorry how you
yeah there are many many things actually
with properties in boot there's like a
list of 10 ish ways to resolve a
property it goes from an actual value
into your properties file from the
environment from environment or foreign
environment variable when you're
launching your or even a common line
variable so there are many ways to set a
property and when you're launching your
application for example with an
executable jar you can tell it that it
should load that property file from from
that place from from the file system and
it worked any words also yeah it was all
the time we have left for questions
right now if you have any further
questions please feel free to come up to
the stage and I discuss some things
further don't forget to vote and please
join us in 20 minutes for Josh's talk on
the spring cloud</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>