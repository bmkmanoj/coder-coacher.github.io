<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2015 • Microservices and the Inverse Conway Manoeuvre • James Lewis | Coder Coacher - Coaching Coders</title><meta content="GOTO 2015 • Microservices and the Inverse Conway Manoeuvre • James Lewis - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2015 • Microservices and the Inverse Conway Manoeuvre • James Lewis</b></h2><h5 class="post__date">2015-10-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uicjqeZO690" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay welcome everyone thank you all very
much for coming I want to kick off so
I'm going to be talking today about
micro services specifically two
characteristics of micro services that
Martin Fowler and myself wrote about
urine or two years or so ago now I come
on to that in a second
the way I'm going to talk about these
characteristics is through a few stories
so stories about companies I've worked
with been involved with for seven years
companies that my colleagues at Thor
works have been involved with so and I
quite like stories that quite like
stories as a way of conveying
information my former colleague Simon
Stewart whose networks Facebook is
incidentally the author of buck which is
a build tool he always used to describe
that it was a nice thing on a team to
have a team of Shaymin so this idea that
you'd have someone on the team you could
tell you this story of how things got
the way they are so you know you look at
this awful maven Pomeroy you think of
what on earth how could it possibly get
to look like this and so the team
Shaymin gathers you all around and says
i'll tell you the story of the build you
know so specifically with maven that
this is so stories are important so I'll
tell some stories today one of the
stories I'm going to start with actually
was something that happened last night
so this isn't specifically about micro
services but I thought it was I had a
very strange experience last night and I
just checked the pronunciation but I
believe this is this is the city where
Kirika good god is that right okay
lived and I had my very own existential
crisis last night if people were at the
conference party I didn't record
anything and I didn't use a flash so I
think I'm still within within the the
terms and conditions of being there but
this happened right so and I was as I
was watching this amazing Mindstorms
kind of tournament going on in front of
me I found myself sort of floating above
my body looking looking at this amazing
circus with all these candles in the you
know and these robots fighting in the
middle and I realized suddenly this
we live in the future right this is
crazy
we went to a circus last night and
watched robots fight honestly and and
the future is owned by ten year olds
right now this is this is enough to
trigger a crisis in me um and I thought
it fitting to share being as as I say
this is the home of existentialism
um so from that story to another story
which goes back I guess some decades now
so Melvin calmly back in 1968 he
postulated Conway's law he he postulated
this right organizations which design
systems are constrained to British
designs which are copies of the
communication structure of those systems
so the software you build looks like the
organisation that built it if you have a
UI team a middleware team and a database
team guess what you end up with UI
middleware and a database I think Dan
North was paraphrasing someone else when
he said um you can also look at it if
you are seven people to write a compiler
you'll end up with a seven pass compiler
it's same thing right now I was thinking
about it Marvin Khan when I was thinking
and it's also worth incidentally the
scene as we are a go to and the amount
of amazing people you bump into here I'm
just gonna check is Melvin Conway
actually in the room no I like it into
trouble because this is what I think
Marvin Conway looks like
I have no idea if he does or not but I
put this impression that he's sitting on
the balcony watching us all perform
writing code right he's watching the
organization's produce software and he's
just there laughing and pointing at us
he's commentating all the time on the
codeword right because back in 1968 he
postulated this theory Conway's that
became known as Conway's law and it was
completely rubbish by everyone it wasn't
until a follow-up paper in the Harvard
Business Review I think it was 2007 with
some follow-on work that was published
jointly by HBR and MIT which was called
something along the lines of very long
title a test of the mirroring hypothesis
and this research that they did sort of
it proved his hypothesis didn't disprove
his null hypothesis then I guess and
what they found in this I've just pulled
out some explicit bits from this what
they found was and they spent time with
lots of different organizations lots of
different types of organization building
lots of different types of software
including open source software so very
very distributed teams what they found
was tightly coupled organizations even
if not an explicit managerial choice
design becomes tightly coupled so if
you've got tightly coupled organizations
you get tightly coupled designs and on
converse that if you have a loosely
coupled organization then what tends to
happen is you get more modular
architectures more modular systems that
are built by loosely coupled
organizations and so this is been that
well was postulated in 68 validated
again in 2007 and I still think that we
haven't learned the lessons from from
from mr. Conway who's still sitting up
there laughing at us on the balcony so
just to reiterate tightly coupled
organizations design becomes tightly
coupled loosely coupled organizations
more modular design um I mentioned I was
going to talk about a couple of
characteristics I should probably
introduce myself first my name is James
Lewis I work for thought wicks have done
for about ten years I said I describe
myself as a coding architect principle
engineer type although these days I do
tend to do a lot more sort of board
level advisory stuff but in this article
in this
paper we wrote we laid out about 10 or
so characteristics one of which is
componentization competitors ation by
services which is what most I think most
people would kind of understand about it
what micro services are micro services
is breaking things down into smaller
units and deploying them independently
and so on testing them but we call that
as I say many other characteristics and
the two I'm going to focus on today is
this idea of organization around bounded
contexts or our own business
capabilities and this idea of running or
building products and actually services
I'll come to that in a sec rather than
projects so not using projects and
building around business capabilities
that's what this well however long we've
got left 40 or so minutes it's going to
be about I suggest if you're not
interested in that then but you've read
the description this is pretty much what
was in the description first I'm going
to answer a question that always comes
up so this is the first thing and the
first question is always how big is a
micro service excuse me
and there's a very simple answer to this
if you know what how big a normal
services and normal service-oriented
architectures about this big micro
service is this big that's how big micro
services are small smaller than big
services and you can get more of them
for your money apparently or something
and that's the end of the talk so thank
you very much for coming and we hope
you've enjoyed micro services and
Conway's law talk seriously right I mean
seriously
these are the things these are the prof
some of the properties we want when
we're building on with decomposing
systems into micro services you want to
be want to be able to replace them
cheaply and easily somewhere between a
day and maybe two weeks that sort of
size we're gonna be able to scale them
for various reasons throughput available
throughputs availability or even full
team size you wanna be able to scale
people avoiding sidestep in the mythical
man-month thing and and we want to build
them to withstand failure there's been a
lot of talk about resilience today which
is awesome because this is part of the
whole point of what's making teams
building systems out of micro services
six
well they're building for resilience
they're building resilience in and start
and to quote Adrienne carrion Cockroft
we should be able to go with
microservices as fast as we possibly can
right this is the aim we want to be able
to deliver value to our customers to
whether that you know whether that's in
whether that's to make money or whether
that's to save lives or whatever it is
we're doing we want to be able to get
features out in front of the people
using software using our systems as fast
as possible so that we can learn and
change and do it all again this is what
we should get from micro services now
unfortunately many of us will recognize
I suspect this right the 20th century
organization which kind of looks still
in the 21st century like this so how
many people would recognize this kind of
siloed siloed organization have a show
of hands if you sort of either were
called recognize that yeah so you know
you have development and testing and
architecture and all these things are
separate sales marketing etc it's all
separated out and often and I'm quite
lucky as a consultant I get to see lots
and lots of different organizations so I
get to see lots of ways in which they're
broken incidentally there's about 20 and
most organizations have between five and
ten different ways have been broken but
most don't have all of them apart from
something anyway this is a real diagram
from a process flow for the violent
process in this sort of organization
I've obviously redacted names but this
is the sort of thing you sort of tend to
see we've got you know the different
stakeholders down one side business
requirements documents business cases
functional specs okay we've got detailed
estimates there's high-level estimates
there's checkpoints and over here this
is cool we're the ones and zero this is
where coding happens right and I mean
this is not something that is uncommon
this is not something that's uncommon
still but I still think this is this is
the wrong the old way of building
software and it's a bit like this idea
of snakes and ladders right because what
Enders ends up happening is you get you
guess maybe maybe sales give the
architects some some requirements they
do a high level plan a high level design
hand it over to develop them do
Oh this'll never work hand it back to
the architects the architects say yes it
should do hand it back and if you get
this kind of high transaction cost as
work is passed around between different
silos I'm contractually obliged at this
point to mention this book by two of my
colleagues or three of my colleagues
sorry Joe and Jess and buried Lean
Enterprise which is all about this all
about how you optimize your organization
at scale in order to go as fast as
possible to try and address this thesis
snakes and ladders problems I'm going to
take a slight diversion because one of
the things I'm interested in I think
every software developer does it over
time they get into visualization it's
like a visualization I can visualize
everything visualize all the things and
so recently I was using a nice tool
called J debt to look at dependencies in
applications right so this is this is
spring plotted the dependencies in the
spring libraries plotted on a list is
called hierarchical and bundled hugga
rhythm of a quarter diagram or something
along those lines it's kind of
interesting and you can see efferent and
afferent coupling and all these kind of
nice things and I was thinking can you
do that though for the way work works in
organizations could you use similar
sorts of visualization techniques so I
think this was talked about yesterday to
understand how work flows through
organizations so from concept to cash if
you like that phrase my old former MDS
to say from soup to nuts from the start
of the meal to the end and I think you
can write you can plot the pathways you
can plot the way work works in
organizations using these sorts of
visualizations called diagrams so for
example this is this is essentially the
snakes and ladders diagram but plotted
as a chord diagram and where the chords
represent handoffs handovers between
departments and in fact more explicitly
each of those calls on that diagram
rather than representing in software a
dependency they represent delay in the
system they represent the transaction
cost that you haven't to pay and the
interesting thing with this is if we
look at how we're building software
these days a lot of this has been about
reducing these cores removing these out
from from reducing the delays reducing
the transaction cost but we're not there
yet and this is what the rest of the
talk is about
Peter Drucker said this is great quote
there is nothing so useless as doing
efficiently that which should not be
done at all a lot of these handovers are
meaningless pointless completely
pointless I'm sure people I'm gonna be
mean and pick on private clouds as an
example so this seems to be the thing do
you know this this is the the project de
jour of most CEOs we need a private
cloud we don't trust Amazon we'd
interest and any other providers we need
our own private cloud and so they take
off and build private cloud and it's
fantastic and coincidentally when you
ask for a virtual machine on the private
cloud you have to fill in a ticket and
the ticket waits in a queue for days or
sometimes weeks or even in one place I
was at months and then three months
later you get a virtual machine in your
private cloud now the that for me is not
addressing the root causes or or some of
the causes of some of these delays
because you're still having to pay this
transaction cost all right
so for example with private clouds what
we've been saying a lot is everything
has to be self-service reduce the
transaction costs I'll come back to that
in a bit so I did say I talk about
business capabilities what's that got to
do with these these handoffs and things
well this is a mechanism I think of
organizing the way we work in a way that
minimizes these these delays minimizes
these handoffs as well as using Conway's
law to reinforce the design of the
software that we're building to
reinforce the boundaries to try and
ensure that they're the system's were
building are decoupled and cohesive this
is the definition of capabilities a
combination of people processes systems
that provide value to customers internal
or external I'll give you an example
this is a an example from some where I
was working so there was two big teams
one in one in North America one in
Brazil and they were building a big big
software system as a retail site that
sold transportation stuff so you think
of it like bus tickets or train tickets
or airline ticket and on one side of
this sort of divide continental divide
you had a team big team that was
building out the retail capability so
the ability to sell sell inventory
- - that to their customers the
consumers and in Brazil they had another
capability which is kind of looking
after everything to do with a customer
and this was great and incidentally in
between these they had this really nice
asynchronous mechanism for communicating
so everything was done with messaging
between these two capabilities when
something was sold and message was put
onto a bus somewhere onto a bus and the
other capability could pick this up
that's great if you don't know what
messaging looks like this is my attempt
to demonstrate like that and awesome
alright and this is great because this
you know talking about Conway's law
this is Conway's law in effect they were
separated by a long distance and
actually Conway's law acted to to make
the boundaries between these
capabilities actually more more concrete
less porous this is all about
information theory it's all about how
information flows between people between
teams within organizations because
there's a long distance the bandwidth is
is there's there's very low bandwidth
for communication between these teams
even with tools that we have now so this
is good this is Colonel Conway's law
acting in our favor in this in this
example for this company but then when
we sort of peel back the covers and
looked inside these business these
capabilities retail and customers we
found some interesting things going on I
suspect this is happening in a lot of
organizations that dive into hey micro
services let's go microwave is ready TM
etc and it's this it's the trouble with
projects because these capabilities of
both sides of this continental divide
were built by pretty large teams you
know there was maybe 60 in one place and
you know 100 in another place so quite
big teams separated by this by this bus
but they were being these the teams were
using project thinking rather than
product thinking or service thinking to
build these to build their capabilities
I'll give you example of that one of my
favorite questions when we go into
organizations as we asked so how do you
change a single form field on your
website say if it's a web webshop and if
if the answer starts with first we've
got to form a project
so that means we have to talk to the
project management office because it's
going to take longer than six months
that's project thinking all right this
is you know often it's due to other
reasons but things like I've got if you
ask how long does it take you to change
what you need to do to change the single
form filter they say well first of all
we'll need to hear made the change in
the HTML I need to make changing the
JavaScript and we need to make the
change in our views and then the
controllers on the you know the
server-side piece of the web app and
then we'll need to oh well then we go
off to some data services so we need to
change the the met the wife protocol to
go off to the data services and then the
data services they have to change their
did da OS DDT OS and so on and then
we'll have to go into the data basically
devise a new field into the database in
to pull him into a database table and it
just keeps going on and on and on right
and this is this idea of project
thinking short lived teams that come
together to deliver one particular small
slice of functionality then disband
throwing the work they've done over the
fence and it's it's interesting because
what the effect over time of lots of
these projects being run against code
bases is pretty print issues and what we
found in this particular example is in
fact whilst the different continental
that different continents were decoupled
inside these capabilities was this
tangled awful mess of quote
microservices they're all quite small
you know or quite small micro not this
big they were this big which is great
but there were this tangled mess
completely coupled together you couldn't
change one without changing another and
this is not what we're after when we're
trying to build this sort of distributed
system anyone seen this kind of idea
come across these of hardening periods
I'll you know this so complicated we've
had to harden for six weeks before we
push our into production this is a
pretty common thing you see when you've
got these really tightly coupled so for
micro services similarly you get this
idea of having to fan in because we have
to test everything against everything
else we're not sure whether making a
change in one place is going to have a
ripple effect out into the rest of our
software this kind of idea of Fanny
Fanning in for integration end-to-end
testing
and similarly this other problem we run
into quite a lot which is lockstep
deployment
I mean lockstep deployment can get you
quite a long way but when you have a
thousand services having to deploy
everything at once it's not only risky
complicated but costs you money simply
right because what you tend to have is
features that are building up in in as
inventory before you're able to deploy
them and every time you get features
building up as inventory you're paying
the cost of delay for those features so
if a feature takes you know could be in
production in three weeks but takes six
and it could have earned 10,000 pounds a
week then you've lost potentially 30,000
pounds I've no idea where that is in
crimes sorry and again this is this I've
got this idea that there's this there's
this old dude yeah back from back in 68
who's sitting on the side it's sitting
on the balcony of the theater watching
us all going this is this is Conway's
law in action again
because you don't have these stable team
boundaries don't have stability within
these these giant capabilities and this
is what we've sort of taken to call
distributed monoliths beware them
because when you get into this sort of
position this isn't going as fast as
possible this is how to have a nervous
breakdown simply now that's all very
well and I could stop there and it would
be all all be very depressing but maybe
I should give you some ideas about maybe
better ways of organizing our teams so
that we can avoid some of this stuff so
what might good look like and I'll talk
about this obliquely by talking about
Ebola I know it's funny it shouldn't
raise a laugh I mean but it but it does
um and this is actually coming back to I
think one of the themes I've sort of
seen in some of the talks up here over
this conference is looking at size of
end of software engineering for for how
other people are doing things how other
disciplines are working and in this case
it was a it's because I saw a story in
the newspaper back in the UK about about
this lady is early this year who names
Pauline cafe key
and she was volunteering at a Save the
Children Hospital in Sierra Leone where
unfortunately she contracted Ebola this
is the height of the epidemic and she
was evacuated back to the UK eventually
ended up in a hospital called the Royal
Free in London which is the specialist
Center for infectious diseases in London
this is the team miss Susan that this is
in the newspaper and it's got me
thinking right so given that there in
this circumstance where they've got this
near desperately unwell woman to treat
and given that you know in order to do
that they're gonna have to be able to
execute us they're gonna have to be able
to make decisions fast about drug
regimes about fluid about all these
different things and afterwards about
had to rehabilitate it because of course
as a disease Ebola is it practically
wipes out well you are wiped out
afterwards so you need a long long
period of rehabilitation so I was
thinking how how do they organize and
the hospitals turns out in general you
think would look a bit like this right
so lots of different capabilities all
interacting in particular ways
transaction costs between them and so on
and you can plot this in a court diagram
and it looks very similar to the way we
might organize a typical kind of I guess
function II siloed
cause role siloed organization but then
I was thinking maybe that's not the case
in this I read on in the article and it
reminded me of this this particular
diagram I've seen I think Mike Nygaard
showed this a while back and this is a
diagram depicting something called the
OODA loop so this is from a guy called
Colonel John Boyd who was a he was a
well he was a colonel in the US military
and he was responsible for almost
single-handedly changing the doctrine
that the global North News to wage war
pretty much because he noticed when he
was training fighter pilots that if you
have this this loop observe orient
decide act and you can execute that loop
faster than your enemy in in in the case
of a fighter pilot then you will be
successful this is this is how how you
win dogfights is you execute this
particular loop
as fast as you can and when I say he
changed military doctrine he really did
this approach favors agility over brawl
power when he came up with this and this
became popular pop arised within within
the US military it led to planes being
different so various like the light at a
July Taz rather than big twin-engine
fighters it led to things like
reinforced battle groups or I think Eric
was talking about this yesterday when
he's talking about a Marine
Expeditionary Force this is all down to
the change of thinking that came from
John Boyd and this ability to execute
this loop quickly as fast as possible as
I say this sort of came to mind when I
was reading this article maybe this is
what these medics are doing they need to
be in a position where they can execute
this loop quickly in order to make this
make the right decisions but without
paying these transaction costs of going
across to all these different
departmental boundaries this is I don't
expect you to read this this is a list
of all the people involved in treating
Pauline Kalki and in in well essentially
a third of them the ones in bold our
clinicians so they're you know they're
consultants infectious disease nurses
specialists Raza et cetera et cetera but
two-thirds of the months two-thirds of
them are people like pharmacists people
like
Porter's domestic services support
workers security people etc etc so
two-thirds of the people involved in
treating her weren't actually directly
clinicians this was the supporting
network that they brought in from around
the hospital the different capabilities
and it's interesting this is a quote
from the guy who might dr. Michael
Jacobs who led led her treatment if you
imagine all the functions a hospital has
to have they all have to be involved and
they all have to be specially trained if
separate to work in this environment but
all the functions the hospital had were
all put together in one place to ensure
the best outcome for that particular
patient there were two others yeah sorry
Brits who were as frog in my throat he
were infected they were both treated at
the same place and they had a 100
percent survival rate which is which is
pretty amazing and this is how they do
it they get everyone together into one
place so rather than be organized like
this they kind of bring everyone
together right they minimize these these
handoffs these transactions
and essentially this is about you know
creating a cross-functional team that
has one single purpose and in their case
it was a successful treatment of of the
patient I mean our case it would be I
guess if we're focused on the customer
outcome on successfully delivering
features and this is this is this thing
this idea of minimizing handoffs between
teams and we've got some data from a
project in Australia that's been running
a fairly long time it's from a big
telecom telco in Australia and they
found over over a period that so this is
about story cards so features if you
like cards that stayed within the team
we ran we've finished an order of
magnitude from more quickly than cards
that had to leave the team for a reason
this is an order of magnitude difference
in how fast you can go how much how much
throughput you can get that's quite a
lot right that's that's a big deal and
as we've sort of pointed out and others
have this is true for trauma teams and
hospitals my sisters our emergency room
nurse this is exactly what happens when
our critical patient comes in they just
swarm they get all the specialities
they're ready waiting so they can
provide the best possible care
same on Formula One teams it's not just
the drivers who are there testing the
car it's everyone it's all the engineers
and it's the same for this idea of the
reinforced battlegroup so great fine all
very well hospitals do things in a
particular way what does that mean for
us as engineers and people working in
big organizations so this is another
example another story from a place I
worked where they originally started off
exactly similar to this sort of siloed
by role prototypical 20th century
company but they over a period of time
they they created cross-functional teams
and they decided that they were going to
also split up the the application they
were going to work they were working on
in two separate lines of business so as
an example of that this is this
insurance company they had this big
monolith with everything happening in
one place all the different products
they sold insurances home motor pet
panel you get pet insurance
life insurance etc big database and they
decided over time they were gonna split
this up so they extracted each line of
business each product suite essentially
into it into its own application into
his own banded contacts really took the
data with it and they ended up with
couple three completely separate lines
of business so they had one application
which was dealing with home insurance
one application dealing with motor and
one with life with completely separate
data and if I as a customer I wanted to
go to this and buy some home insurance
I'd go to one site and then if I wanted
to renew my car insurance I go to the
next one but that data is completely
separate so they had some cross-cutting
capabilities as well so they put in my
account which listen to messages when I
bought insurance a message would be
generated and they'd be aggregated here
so this is kind of like a fan in thing
and why is that interesting from the
perspective of how we organize well this
is actually enforcing the bat as we saw
with a Continental Divide this is
enforcing these boundaries between these
different lines of business all right we
have these cross-functional teams
working within each of the line of
business and that's the product owner
developers quality analysts business
analysts and so on so this is seems like
a nice idea right we've got these
cross-functional teams organized around
lines of business so Shirley Conway is
saying big thumbs up forged but if you
look at this sort of structure again
visualized on a chord diagram we still
have a ton of these delays a ton of
handoffs between operations a ton of
handoffs to marketing sales and finance
and so on so I honestly think that
Marvin Conway is still up there and he's
still sitting on the balcony laughing at
us he's going you still haven't quite
worked this out of you but that's cool
because then we can thank this dude yeah
yeah Jess humble and they Farley if he's
in the room not sure if he is I couldn't
find it they Farley card from the agile
card game but I could find a Jess humble
card DevOps
I was once told using more than one
exclamation mark is the sure sign of a
deranged mind but I think this needs
more than one I don't really mean DevOps
I mean this idea of continuous delivery
from soup to nuts bringing everything
together from design from you know idea
generation the product general new
product generated generation innovation
through to delivering working software
into production bringing all this
together into one one one unit so you
know we have this idea of
cross-functional teams well we can
subsume essentially the ops team within
these and this doesn't mean necessarily
that you don't have things like platform
teams and so on you don't you don't
generalize some of the infrastructure
tasks as I mentioned earlier with
private clouds that caster all be about
self service again minimizing the cost
of transactions so subsume these this
ops team and again we've gotten rid of
one of these lines the delays decrease
we've got less waste in our process so
the throughput of features increases
hooray and that's what this insurance
company did they also went cloud natives
so they they deployed into AWS and read
a bunch of benefits from that and each
of these could be you know deployed
independently it could be tested
independently it could be scaled and so
on which kind of gets around this this
awful tangled mess we sort of saw
earlier when you have these projects
that sort of pop into you a bit of code
and pop out again so the question is can
we go further right if you imagine all
the functions a hospital has to have
they all have to be involved you didn't
say all the clinical functions a
hospital has to be involved he said all
the functions this is about having the
porters they're having the domestic
staff they're the cleaners having
finance people involved everyone and I
think we can I think we can actually act
to reduce the waste even further by
taking this line of business idea and
expanded on it I actually think the days
of the IT department are numbered I
think it's I think it's a leftover from
how we fit thought companies should be
run the IT department should go away
that we should all work together with
our businesspeople in something that
isn't IT or business and I'm not talking
about suddenly technologists taken over
the world and everything becomes
technology
I'm technology related I mean that in
order to Moore's most successfully
deliver value to our customers get
software out in production we need to
minimize these delays and to do that you
need to everyone in the same place so
what might that look like well that
means doing things like subsuming or
rather not subsuming combining sales
marketing finance continuous delivery
all these things into one stable line of
business and we've been doing this
specifically in Australia actually with
great success as a few companies out
there have been doing this so what
there's one which is a property website
so in that kind of um sells sells houses
essentially so you can advertise on it
you can advertise your house you can try
and buy a house and so on then it has
two different sides or several sides but
simply it has like a residential sides
and it has a commercial business and
they've separated these out into two
completely different lines of business
and what marketing and sales function is
needed by residential they take into
residential so they all sit together
what marketing and sales functional is
needed by commercial they're all sitting
in the commercial line of business along
with the teams along with the managing
director for those lines of business
along with all that support all all
sitting together in one place one line
of business minimizing these delays and
it's been stupendously successful for
them so I guess where I'm going with
this is this idea of having this nested
structure where you have teams of people
who are delivering software but they're
not operating in a vacuum they're
operated within value streams so I mean
value stream this is this is a a group
of people who've got a direct link
direct line to a customer to a customer
act on sort of value stream really is in
my mind and then those value streams sit
within lines of business and those lines
of business sit within organizations and
in terms of micro services each of the
teams owns one or more services one or
more micro services all
one or more microservices and I'm gonna
call this out because I think it's
important how many of those you build
per team completely depends on your
requirements you don't have to have a
million micro-services it's gonna make
that clear and this is an example
actually so it was a project I was on
where we were we had like a users
customer banded context and we ended up
with three different services two
different databases all within the same
banner context within the same
capability but that was because we had
requirements which led us down that
route we had very high bachelors
expected overnight so we wanted the
front it with an event queue so we could
scale competing consumers to process the
queue and then scale them back during
the day when we didn't have as much
traffic a specific set of requirements
that we had if we didn't have those
requirements I don't think we would have
gone to the trouble of building all that
we probably just would have built a
single single service so you've got
these teams in very streams inside lines
of business with everyone together and
this is as I say finance accounting
sales marketing for those lines of
business together and do you get
duplication of function yes you do you
get duplication this is not about
optimizing for cost control this is
about optimizing for value generation
essentially so what in terms of the
number of people while teams sort of you
know the normal XP size of team but then
when you scale up to the the larger
units what does that look like well if
people have come across anyone recognize
immediately the random 160 to 200 and I
wasn't expecting people to this is
Dunbar's number so this is the number of
connections that people can socially
hold at any one particular point so you
scale the teams up to the point where
they reach the Dunbar's number at which
point you break things off into other
units and thought-waves operates like
this we tend to split offices when we
get over about 150 to 200 people so
rather than have a big office of 400
there are some exceptions we'll have two
separate offices scaling around Dunbar's
number and multiples thereof I mentioned
earlier that Conway's law is really from
inner originally it's all about
information flow it's all about hair
the the bandwidth of information between
different parts of your organization so
you can imagine if you group all these
people together the bandwidth is
actually much much greater there's some
original research done around this idea
of things like colocation so this is
from a book from 77 managing the flow of
Technology which which is actually a
really interesting read it's about
information theory it's about actually
R&amp;amp;D departments this is kind of pre-pre
the sort of explosion that were in at
the moment of the web and the Internet
pretty much she's talking about R&amp;amp;D
departments and engineering companies
and how ideas spread between different
groups of people working on different
things did a lot of research and I've
reproduced one of the graphs here so
this is a graph of the effect of
distance on communication specifically
the effective weekly conversations about
work and the frequency of you having
them with someone the farther you are
away from them and after about 15 meters
away from someone you're essentially
completely unlikely to talk
serendipitously to someone about a
project you're on I probably might have
any of these sorts of things clearly
tooling in his broth has changed this
right clearly we've got you know what
are the kids use these days is it
HipChat or slack I don't know whatever
it is I'll see for win um but tool
tooling has changed this always-on video
has changed this but this I think it's a
great demonstration of the effect of
colocation or having really high
bandwidth communication you get this
they get these serendipitous
conversations that occur where ideas can
spread ideas can flow people can share
the problems that they have in the
solutions that they might have so I
guess what I'm saying is that as you
chunk up from team to value stream and
from line of business to organization
then Conway's law is going to be acting
at each of these boundaries right so
each of these boundaries you're going to
get this reinforcing action each of
these boundaries information flow
becomes lesser you have less bandwidth
and so at each of these boundaries
you're going to get more decoupling in
the software you build so if you
organize the way your software's build
around these sorts of structures
Conway's law is going to be working
your favor and the other cool thing is
you can use different practices at these
boundaries as it turns out so there's a
lot of new practices people have been
talked about they're not even new really
but things like tolerant readers
consumer driven contracts conversational
change is a nice and nice idea but lots
of different practices that people have
been adopting to try and help test
integrate micro-services just try and
test them independently to try and
integrate them together and so on but
the thing is with all these practices
they come with an increased cost in some
code or in most cases it takes effort to
write consumer-driven contracts where a
consumer-driven contract is as a
consumer of a service I'm going to write
in executable form my expectations of
your behavior I'm going to hand it to
you so you can execute it as part of
your build that that's great
it works fantastically well but there is
effort involved there's effort involved
in actually implementing these things so
nice thing that I think with this kind
of structure is you get to make
decisions at each level of the structure
as to where it's most appropriate to
invest that time and effort so I've got
this new thing I'm calling the chunking
up from micro services to teams to value
streams to the lines of business to
organizations practice onion so I'm
gonna talk you through I might need a
new name so simply you get to do
different things at different points
different levels of abstraction
so as you chunk up you can do different
things as you chunk down you do
different things so for example between
businesses right you're not going to
want to implement for example consumer
different contracts probably if I'm
Google and I'm on the Maps API team I'm
not going to ask all the consumers of
the Maps API to write a contract in
executable format send to me so I can
run as part of my build but I might but
I'd probably get laughed at if I did
right that's probably not the sort of
thing you're gonna be doing because at
the bat this sort of boundary you've got
this very low change rate you're very
high stability property you don't want
to be making many breaking changes or
hardly any at all so investing in things
like contract testing at this point is
that sort of boundary is probably
not the right thing to do but you might
want to do semantic versioning which is
a pretty popular pretty popular
technique these days practice these days
a semantic versioning is where each of
the three version numbers you publish
has a specific meaning if you bump a
major version it means that was it's
backwards incompatible bumping minor and
point releases means it should be
backwards compatible that's something
you might want to be doing at the
boundary between organizations or also
between lines of business when you do
need to integrate but between value
streams within a line of business
between all parts of your company that
are doing similar things similar ways
it's got a higher change rate you want
to be able to make more changes all
right consequently this it's going to be
potentially less stable so you might
want to invest at this point in contract
testing in writing these these contracts
these executable specifications of
behavior you'll also probably want to
implement something like tolerant reader
so you can go to Martin Fowler's site
he's got the definition of torrent
reader this is this is essentially where
as a consumer the service I'm not going
to directly bind or early bind to to T
or your your wire protocol so this is a
level you might want to think about
surrounding lives in contract testing a
torrent reader and then between teams
within the same value stream we probably
don't want to bother with semantic
versioning maybe you do maybe you don't
but you probably certainly want to do
contract testing agree this is how we
work around here and implement torrent
reader and then within teams you won't
want to be thinking about torrent reader
and this idea of conversational change
so Adrienne Cockroft again he I think
was last year he said his experience at
Netflix was the ratio of changes inside
the team boundary to outside the team
boundary was about ten to one I want to
be going really fast if I'm sitting next
to Carol I can just say hey Carol I'm
gonna make that change is that cool with
you can you make the same one we both
pushing that's the sort of pace I want
to be going at within my team I don't
want to be reliant on having to write
contract tests and all these sorts of
things so that's
pretty much the meter what I'm talking
about so we've got these Muppets who are
sitting up on the balcony laughing at us
but I think actually the laughter is
helping us right it's pushing us in the
direction which is to structure our
organizations in such a way that we're
able to more effectively produce
software not more efficiently so this as
I say it's not about cost control it's
not about grouping everyone with the
same role together and you know pulling
similar similar things necessary
together to reduce the cost this is
about value creation this is about
effectiveness over efficiency and I'm
gonna reiterate when I sell a star you
know a lot of people think that micro
services are all about this top thing
componentization via services but I
think all of these things are important
yeah all brands around business
capabilities products over projects we
call that is the thing we were seeing
successful teams do for a reason rather
than rather than just leave them out so
finally I think Conway's law will often
send a signals in the sense of you know
signal to noise you know if you will
doing things like constantly ordering
work if you're splitting stories across
teams and so on if you're moving people
around deploying in lockstep doing
fan-in for end-to-end testing I suspect
this these are signals from Conway's law
telling us that maybe we haven't quite
got an organizational structure quite
right maybe there's we're paying
transaction costs maybe there's waste in
the process that we can that we can
remove by organizing slightly
differently and also there's definitely
a high cost of work associated with
sorry a high cost associated with work
that leaves your team and goes elsewhere
so if you can organize such that the
work doesn't leave your team you're
gonna get a much higher throughput and
this is things like raising tickets or
the platform team handing off work to
other departments starting and stopping
projects and so on
I appreciate I've been quite opinionated
about this but over time this is how
I've seen organizations structure
themselves in order to really get stuff
done the most effectively so finally
it's a quote from Evan bhature my full
wits colleague who describes what the
inverse commie maneuver says and he said
what it is he says it's designed the
organization you
want and the architecture will follow
kicking and screaming thank you very
much
now for the bum fight I should have said
please write this as well you can log
into the app and please do provide some
feedback because it's incredibly useful
both to me and to the organizers so
please do that yes sorry okay first
question if data is kept separate in
each micro-service how about the impact
of keeping the data consistent okay it's
a great question the question was if you
have data and separate it for each
different microservice how did you keep
that data consistent was it Kent back
who says the answer to any interesting
question is it depends I think it might
be um and it does depend because I mean
obviously if you've got data that
belongs together keep it together but in
this case the Insurance example I was
talking about where we had serve in home
insurance quotes and risks policies in
one place and we had pets in a
completely different data store and we
had life in a completely different data
store we did that very deliberately
because actually when we were generating
domain events that were handed off to
the customer account which is the place
all of these things needed to be
consistent and together the customers
view of them was completely different to
the the actual DeBary context the
business capability for the insurance
products so the home insurance product
for example needs to know tons of stuff
about addresses the previous five
addresses that you've had you know
whether you live in an area that's prone
to the fire risks or floods and all
these different massive this massive
long list of this huge amount of data
rather but then actually the place where
all of this is aggregated across the
products all it needs to know is what
what the what the price was what the
reference was and a link to go off and
find more information now um
that that worked really well in that
case again I'm not suggesting that you
could do that for every single solution
but if you can break things out in such
a way that you can then it's more
effective and avoid distributed
transactions they suck just on the end
one more what do we think about
frittatas idea of programmer anarchy and
self organizing around products and
tasks so I actually missed Fred's talk
I'm gonna be not sure if he's in the
room
I hope not No so the question is how do
I feel about this idea of programmer
anarchy so this is this is genuinely
working for a lot of companies now this
idea that you could completely self
organize your go and work where you want
literally take your desk and move it to
where you want to work so I know valve a
very keen on this the games company I
believe Facebook operating pretty much
in the same way I think Eric was talking
about that yesterday I'm how do I feel
about that
I think that's a fantastic idea if you
can get it to work but I think it needs
incredibly courageous leadership I think
in these incredibly smart disciplined
people executing it and it doesn't
always work either so I've seen cases
where you know it's like oh we don't
write tests anymore because we're all
programmer anarchy
and then you are actually ask the
developers they're like yeah I didn't
work out so well for us we've started
writing tests again they're yeah but you
know it's no one-size-fits-all okay one
last one
colocation is a prerequisite that's a
what about offshoring model does it mean
that we shouldn't do that at all so the
question is colocation is is is is a
good idea if you can if you can do it
does that it mean that we shouldn't
offshore work there are many reasons for
offshoring other than well the main
reason is cost right the main reason you
offshore work is because it's going to
be cheaper to get someone on a different
location to pay to do the work um in
some cases we shouldn't work really
really well actually in forex we tend to
do these things like splits if we're
gonna offshore we have offshore teams in
India and China and Brazil if we can
offshore we'll try and split the
applications in such a way that it's
going to reinforce the system boundaries
so this team over here will take retail
for example this team over here will
take fulfillment and they might be on
different continents and that's that's
that kind of works quite
well in fact that's what happened in the
first story I said it's held because
that was there was an offshore team an
onshore team um is it ideal probably not
probably not unless you organize in that
particular way we have this constant
struggling work actually because you
know we're a consultancy we believe
agile Eric Meyer is not in I hope so we
work we use XP to run our projects
normally and so we've always thought you
know on-site customer being as close to
the customer as possible is is important
and so we try our hardest to work
on-site whenever we can but the problem
is a problem of course and maybe this is
getting I do ramble in these answers
apologies but maybe the I think I think
these days the pressure is so great on
hiring people on retaining people that
we're actually going to have to start
thinking about new ways of working
fortunately the tools that we've got
always on video always on chat all these
different things actually you sort of
start to make a difference with that but
I personally still think that colocation
for the serendipity of the of the
conversations and so on is is best
that's a long invite it depends
okay thank you James thank you very much
you are</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>