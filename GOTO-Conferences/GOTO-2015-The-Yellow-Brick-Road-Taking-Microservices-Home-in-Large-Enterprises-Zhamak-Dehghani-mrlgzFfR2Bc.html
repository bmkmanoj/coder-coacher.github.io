<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2015 • The Yellow Brick Road: Taking Microservices Home in Large Enterprises • Zhamak Dehghani | Coder Coacher - Coaching Coders</title><meta content="GOTO 2015 • The Yellow Brick Road: Taking Microservices Home in Large Enterprises • Zhamak Dehghani - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2015 • The Yellow Brick Road: Taking Microservices Home in Large Enterprises • Zhamak Dehghani</b></h2><h5 class="post__date">2015-10-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mrlgzFfR2Bc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone my name is joe mack i work
for thought works and i like to be able
to introduce myself like james colleague
before me you gave a talk as a coding
architect only if you count whiteboards
and powerpoints as valid programming
stacks so excuse me the last three years
I've been helping our large clients in
australia and united states to implement
marker services and margaret their
architectures so i'm here to talk about
that experience with you it really feels
like it was yesterday can you believe
that it's been already four years that
we've been talking about microservices
microservices is an architecture that
promised us the ability to be able to
compose really flexible systems by
putting small and single purpose
services together single purpose
services that each are built around a
domain or business capability we you
know with their interconnected network
of resilient services beautifully
choreographed we give our users and
uninterruptedly Rian's we have really
felt as a developer community you know
passionate about this grass rudiment
grass root movements microservices has
been a grassroots architecture movement
that came from developer community with
the promise that each development team
can own the destiny of their services
from idea to production we have embraced
the complexity of building distributed
systems we have invested a huge amount
of effort and energy into building
automated delivery pipelines that they
can be federated to you know build and
deploy services automatically and
smoothly and it's probably for the first
time that we can claim we can truly
release capabilities to production
independently it does sound very utopian
doesn't it and from the crowd I can say
that a few of us are heading towards
that utopian target or destination and
yeah
the reality is that the road to this
utopia is not that straightforward and
what I'm trying to share with you today
is you know some of those obstacles that
you come across building market services
especially in large organizations where
you don't start from greenfield you've
got large monoliths and you know a lot
of organizational obstacles along the
way and the good news is that i'm going
to share some of the tactics you can
move to maneuver around these obstacles
and when I was putting these lights
together I realized that how common the
patterns are across different industries
so I've seen them in telecommunications
in commercial insurance in banking
retail and recently supply chain and the
very first one is an organizational
problem how the team's of form how the
money flows within the organization the
second one is the old Battle of Monmouth
how are we going to move our
architecture from large legacy systems
to marker services and once we get over
those obstacles you know how to curb the
enthusiasm of service modelers to not go
to micro too quickly and not jump into
microservices architecture without the
operational and organizational readiness
so if you think that the biggest
challenge you have building
microservices architecture is your
technical capability your DevOps
practices and you have a technical you
know challenge on your hand think again
one of the biggest problems that you
find is an organizational problem and by
that I mean to specific problems the
very first one is this thing called
portfolio planning or annual budget
planning some companies it happens more
than once a year you know where teams
come together and proposed projects that
they want to get budget for to carry out
over the course of the year and that
process in itself is very hard and it's
very with that process is very difficult
for us to be able to sell re
architecture and be able to get money to
do microservices you know goodness and
the second problem is the idea of
ephemeral project problem project teams
Jane
talked about that half of his talk was
about that one so now we're going to go
through a lot of details but it's the
idea that we don't have long term teams
that they can own the destiny and have
the responsibility of the services they
built so let's jump into the first one
portfolio budgeting the story goes like
this and I've seen it in many
organizations around this time of year I
mean depending on how when your
financial learn financial year starts if
it's februari January it's around this
time of year different teams or
different functions within the
organizations come together with a wish
list for the projects that want to carry
out next year so product people business
people they come with a business set of
projects trying to get funding tech come
with their tech initiatives trying to
get funding and what happens next is a
messy sword fight so basically people
are fighting over the same buckets of
money they need to justify the value of
their projects and often they've gone
through some lengthy and artificial
process of that justifying the value and
poor tech guys they have a hard time we
have a hard time to sell the value of
your architecture you know we want to
spend money to go from the money list or
the micro services so there are a few
things we can do to address that the
very first thing is that as tickles we
need to become better salesman we need
to think about why we need to build
microservices architecture and be able
to really clearly an articulate and
clearly articulate the business
incentive behind that architecture so
the organization i'm working with right
now they want twice the speed of
delivery they want to go twice as fast
and they want to do that with
microservices architecture if your
netflix or someone like me like netflix
maybe the scale of operation is your
business incentive overnight you went
from selling DVDs to streaming you know
online videos to millions of users so
expanding that to that scale might be
your business incentive or if you like a
commercial insurance company I worked
with last year you want to have a
business that can pivot a business can
package different offerings and compose
you know kind of different solutions to
your users so in a commercial insurance
you you know you
car insurance housing buildings
employment and so on and you want to be
able to compose these different packages
and sell them online through brokers
call center and so so that composability
it might be your business incentive but
the most important thing is that you
need to be able to sell that idea and be
able to articulate it the second problem
is with this annual budget planning is
that the list of projects are quite
disconnected business has a list of
projects it's completely disconnected
from the tech instead of each of them
supporting each other so with with my
client right now we're trying to go from
a really large ecommerce legacy system
to micro services and what we decided to
do was for the first time get business
and take into the room put them together
for a few weeks run these really
collaborative workshops so they can
align architecture with business needs
and consumer needs we started this
process of top-down okay what are the
consumer needs we try to address what
are the business capabilities we're
trying to build and map that to the
domains and different services that the
market services architecture can build
really be able to you know join those
two different disjointed processes
together and align taken business and
once you do that getting budget for
architecture is much easier because you
can either text the business projects
that are running or you know business
projects becomes a delivery vehicle for
your tech change or tech becomes an
enabler for your business so it's a good
you know kind of feedback between the
two and this is a transformation this is
not a change that kappa can happen
overnight you have to be able to bring
people along the journey and really
plant the seeds of platform thinking and
systems thinking rather than this
disjointed feature thinking so at the
end of the workshop that we ran
multi-week workshop i asked their
leaders of each different functions the
business and the tech to go back face
there you know corresponding team
members and tell them why this
architecture matters to them what's in
it for them
and also be able to tell them how they
need to change their behavior and I was
really surprised and kind of you know
excited and happy at the end when I
heard the head of product management
kind of turned to his team and said you
need to stop thinking about features and
independent features you need to start
thinking about services and API so it's
that you know you start thinking about
how your solution how you build your
business differently the second problem
in an organization is is a team
structure the problem is that we do not
have a team that supports a service as
James mentioned before we have this
project teams you know we get my do you
get the budget for riorca textured
building microservices the first thing
happens organization goes all we need a
project team we need to scramble a
project team together and what that
means is deliberately deliver some
functionality and they dissipate nobody
stays around to own what they've built
there's no incentive of reducing tech
that there is no incentive of you know
building and running services smoothly
because you're not the one getting the
call when the service goes down so the
idea of having long-running product or
service teams is again another
organizational shift that we need to
make happen but what is the path to
making organizational transformation you
know without a big revolution in our
organization it's it's an evolutionary
path the process that we're trying to
apply is very much like the lean
practices and at first it was quite
daunting for me if you had a hypothesis
that you know using micro services will
make your business go faster or compose
solutions you know with more agility you
need to start evaluating that hypothesis
and prove it so you need to come up with
the first slice you know a proof of
concept that you can build to validate
that market services is actually moving
you towards that direction this really
challenged me when I started doing this
work because in my head whenever we said
replat for Murray architecture it meant
an OP front you know investment of
building foundations but the beauty of
mark
services is that you can start small you
can start faster as you know we heard
earlier from Fred that there are lots of
open source platforms and community work
that we can use to start building our
first slice and prove that we can
achieve the business objective with this
we build a small cross you know skilled
team together and once that proof of
concept is validated we can start
expanding and evolving that to the rest
of the organization and you know follow
this kind of evolutionary path the
second problem were the challenge with
Marco services in large organizations is
the the construction of the monolith and
really the problem is not you know how
I'm going to theoretically decompose
this giant piece of code that I've built
over tens of years into smaller services
if the problem is how I'm going to do
this in a financially viable way so to
to give you an example we often really
underestimate how much it costs to
detangle a piece of code that's been you
know in a monolith out into a micro
service and redirect the rest of the
applications to use that and because of
that cost it's we have to continuously
do this trade up off shall I reuse the
code that i have and extracted and clean
up what's left behind or shall i rewrite
a piece of code to implement an existing
capability or shall i buy or get off the
shelf open source and retire and make
redundant and inaccessible the code that
i've got into the in the monolith and
it's a it is a continuous like cost and
benefit analysis the example I wanted to
give you about the cost was a client I
worked with they had to in for 2.5
million lines of code building a big
commerce platform to give you a
perspective yesterday from Anita we
heard that Marse Robert has five hundred
thousand lines of code to land on Mars
so 2.5 is quite a large number and it's
it's kind of between Hubble Space
Telescope you know answering the
universe mysteries with 2 million lines
of code and large hadron collider in
CERN the root suffer for that is 3
million lines of code so we talked about
and you know it
large amount of complexity one might
argue that neither of those take a
credit card payment like an e-commerce
system but um how can we handle this
complexity so there are a few steps we
can take to help us you know along the
way the first one is finding the seams
by the way none of my videos work the
first slide was a video of this utopian
you know moving moving stars and this
one is a video of this elastic star but
doesn't work that's all you can
visualize it that these are kind of
moving what this was was a visualization
of a large dotnet study application and
it was a big you know ball of mud and
what we were trying to do was run static
code analysis to find the package
dependencies and really find the
boundaries of where these lines of code
where we could separate exist
unfortunately in this case there weren't
very clear lines so the cost of getting
you know a package that is nicely built
around the business context like
students or course material or whatever
concept they had was going to be very
costly so perhaps rewrite or copying
code would have been a more appropriate
approach in this particular case again
to help evaluate the you know the cost
and benefit of the reuse we need to pay
attention to the code toxicity so this
once again another analysis we did on a
code base which was supposed to show us
the healthy part of the code that is
lively as in being changed regularly
versus a toxic part of the code that's
hopefully dormant nobody's touching it
so we were hoping to see large kind of
lights blue circles what we saw with
lots of dark circles large circles which
meant basically toxic code that is
constantly on the under change again if
you want to pull out toxic code you
might want to think twice about the cost
of doing that and sometimes we write
those codes and over time you know they
become quite
sake so it's hard hard to let go hard to
justify that let's just move on and
start from scratch right the third one
is Theory of Constraints that is one of
my favorites so with theory of the
Theory of Constraints you try to find
the bottleneck in your system that is
stopping you to achieve the objective of
your microservices architecture so if
you wanted to decompose your system to
move faster you will find out what in
your system is stopping you from
unlocking that decomposition this was a
migration strategy for a monolith that
we were working on decomposition
unfortunately I couldn't name the real
services and the relapse that they were
sitting in the Mun life is it it's a
client app application but I kind of
have everything as services front-end
you know everything's kind of sitting in
this monolith and it was a web
application and I can assure you if
you're building it have built a web
application you know that's evolved over
the last 10 years or so probably one of
the hot spots in your system is session
management the idea of you know various
information that you collect about the
user as a user logs into your system and
this particularly was one of the case
for this one or the web content
management within that so we decided I
see if the transition will work because
none of my turns just yes so we decided
that one of the first hot spots that
were going to try out is building a
bunch of customer interaction custom
authentication customer identification
everything that that session management
was doing as new services sitting in
front of the monolith and then I'm
similarly building a new service that
was delivering the content and then get
these apps that they were kind of hidden
inside this money list or pieces of it
as out as small again micro apps in a
way as well we in some cases the gray
shows that we just left the code dormant
this ain't there instead of extracting
it and in some cases if the code the box
kind of disappears it means that we
decided to in that particular case
extract it so
in some cases the the boxes that we
moved you know ended up being new
services for sodding the monolith and
finally in some cases the services moved
into the system of Records that they had
and at the end of the day once kind of
we have made either dormant obsolete or
moved out the functionality we ended up
with lots of most kind of apps lots of
small services be supporting those apps
and like any other large organizations
we had system of records in a large kind
of enterprise system sitting in the back
end that weren't changing it as often
this one is hot out of the oven I've
just invented it it's called monolith in
the box so what did we found was you
know when you go through this migration
for a really long time you're going to
be leaving with monolith and
microservices coexisting at the same
time in some cases both of them are
implementing the same function some
applications routed to one and some
applications are routed to the other and
a large waste in your value stream
working in that environment is still
playing with that model a sound by
playing with that money like this you
know your developers building it running
it setting it up to running the
integration environment it's just
playing around that it's it's it's
costly so what we decided that we're
going to build you know docker
containers that basically encapsulates
the the monoliths and its dependencies
and we will have the you know latest
version of that always available to the
developers so they can spin it up
without the overhead of you know
traditional kind of configuration and
execution of the monolith so when we
call it monolith in a box we also had
this first principle that keep changing
keep changes to the monoliths to minimum
because we knew every time you change
code in that monitors the cost of
building and integrate and do
integration testing which was the model
of testing for that system was going to
be really high so keep it in a box and
keep it at arm's length and again
because we're going to live in this
hybrid
world we have this idealistic kind of
principle that at any point in time if
we run out of money in this hybrid world
we should be in a better place and by
better place it means I mean towards
your business subject so if you wanted
to go faster we should be able to go
faster if we you know ended up with half
half a dozen microservices and a bunch
of capabilities is still in there in the
modeling so recap you know techniques
for decomposition or some of the tactics
find the seems really pay attention to
the toxicity of the code if you want to
reuse it use Theory of Constraints to
find the bottlenecks first and
essentially apply a strangler pattern to
build the services around it and replace
the serve monolith at the end and keep
it in a box and and most importantly
when it comes to refactoring refactor
what matters if you recall the very
first exercise at the beginning of this
session we said you will talk to
business you will to know where the kind
of where the product is heading where
the business is heading so you have an
idea where the change happens where the
value is in in your system and really
refactor those areas rather than areas
that's not probably going to change over
time service modeling so you can only
imagine at this point the enthusiasm and
excitement in the room that we know we
we solve their budgeting problem we got
money for refactoring we have built
long-standing teams and we figured out a
way to decompose this monolith now we've
got to the fun part designing our you
know shiny new services but slow down we
really need to think about service
modeling service modeling is really
really hard so what I'm going to share
with you is again some of the patterns
and anti-patterns when it comes to
service modeling that I've seen what is
the right size you know this question
that you constantly get asked is this
one micro is micro you know how big
should a micro services bill and we've
we've heard over the last course of last
two talks a bunch of heuristics is how
big it should be you know the the two
Pizza team Amazon's call
except I work in us pizza is quite large
you know the two pizzas can feed a lot
of people build large services six
people six services one person one
service maybe that's too tiny service
doing one thing one thing would be your
HR function quite large James is not in
the room so I can talk about him James's
head size been mentioned he does have
quite a large head so it's just you know
all these heuristics about how big
should the you know microservices be and
my answer is it depends it really
depends on your organizational
organization maturity and infrastructure
maturity how quickly can you build small
services and large number of them you
know automation is important how either
teams come communicate is important so
there's a lot of complexity that comes
with large with small services and to be
honest if I could go back in time and
change the course of human history
probably one of the things i would do is
change the micro to another name it
causes so much trouble and arguments
unnecessarily we get hung up on the size
of the service so if you're starting you
know you and i would say let's go from
macro to micro and start with kind of
larger services and really pay attention
to the symptoms of having having small
services so one of the symptoms that you
would see is a really large
communication overhead between your
teams because you've divided them to
fine grain and to fine grain services
teams are start alienating you know from
each other the big picture is lost
nobody's knowing what is the big picture
they know about this tiny service
they're building but they've lost the
big picture and then last one is I I see
a lot of these kind of simple crowd
services people who used to do kind of
rational normalized database design and
this beautifully designed tables now
exposing those as endpoints over
services and without any business logic
wrapped into those services so what
happens is the business logic and that
complexity gets spread out through the
system and it's pushed to the consumers
so choose the right size for your
organization
speaking of anti-pattern this one this
one is another kind of favorite of mine
is this a concept of shared utility
services and you're wondering why I've
put all these kitchen utensils on this
side so this shared utility or common
services remind me of that special draw
that probably everyone above and
everyone of every one of us has in their
kitchen so is that kitchen that you put
all the utensils that don't belong in
any other in that and when you try to
pull it out is usually stuck it's like
that you put you know things concepts
that don't belong into a nice bounded
context in this one you end up with
generic names right config service
reference data service utility service
have you got one of those ones you want
to want to think again and the problem
with these services is that they've got
all these unrelated information or
capabilities in them they couple a lot
of different services to themselves and
what happens if you want to change that
you remove the ability of independently
deploying those services because we've
now created this tight coupling what can
we do about it well we can try to keep
the reference data as close as possible
to the entities that they belong to so
they're usually you know default values
that initialize some domain entities
will keep them with those domain
entities and in some cases we can simply
duplicate it duplication is not as evil
as we thought it is so for instance I've
seen country codes being placed on an
endpoint on a server some how often do
we change our country's I'm sure we can
manage duplicating country codes in
different domain services and it happens
you know with the best of our intentions
we divide services wrong along wrong
boundaries the cabbage ends up in the
wheat crops sorry I'm just going to go
to water this is one of my favorites
excuse me he also put up with me um what
if my favorite some pay he was a New
Yorker cartoonist cartoon you haven't
seen the rest of it you should go check
it out
farmers are having a lawsuit around the
cabbage but it happens we might you know
divide services around but wrong
boundaries and often the root cause for
for that is that we approach design from
the wrong angle so we do domain modeling
bottom-up we sit around table or around
whiteboard and we have this beautiful
academic discussions as where should be
the boundary of a service and usually
with those ones we may not get them
right because we haven't started from
the top down approach from the consumers
angle so what I often do is use user
journeys go through the user journeys or
consumer use cases and then decide what
services you need to build to satisfy
those you know a new method that people
are using is event sourcing to be event
storming sorry event storming so put all
the events that happens in your consumer
world together and see what services can
be producing or consuming those events
and build services that your consumer
isn't really need look for symptoms of
wrong boundaries some of those symptoms
are confused consumers so if your
consumer of your service doesn't know
which services they have to use to
implement a feature because they think
they've got multiple options available
to them we probably got the boundary
right wrong if they're looking for a
data field and they feel it's duplicated
between two different services we
probably got the wrong boundary another
test that i use to see whether kind of
god the boundary right or not is if you
think about one coherent feature that
you're building for the consumer and you
think okay if i want to build this
feature how many services do i need to
touch if you need to touch more than
three services we probably got the
boundary wrong because we you know we've
removed the ability to be able to
release services independently and have
that you know speed of experimentation
and speed of innovation which is the
foundation you know kind of principle
for for for this and if it happens don't
worry you know haiti us and hyperlinks
and richardson maturity model level
three
can help us so if you've built with
yours your services with a lot of
hyperlinks to different states or
different data sets within the service
or across another service that's a very
helpful technique to move the services
around to split the services or join
them later on I won't have time to go
through details of this but I if you're
familiar with rest maturity model using
hyperlinks give your yourself a
flexibility that to split services
without impacting your consumers because
your consumers haven't hard-coded a lot
of assumptions about you know where they
can get the next set of data or related
data or related States about your
service and the third problem is
production automation so we often jump
into we are so excited about building
market services that we really want to
get building and implementing and
pushing them to production so we jump
into producing microservices without
enough investment into the continuous
delivery of that into automation so at
the bit especially at the beginning of
the project when you start a project you
have to make a lot of trade-offs am I
going to spend my effort implementing
the service itself or am I going to
spend the effort building the automation
of the infrastructure where the micro
service is going to land you know
automation of the landing zone or am I
going to spend the time building
automated pipeline so I can
independently release my services shall
I implement scaffolding you know all
those boilerplate code that you have to
build around your service to do logging
monitoring or not so choose your
trade-offs carefully there has been a
fairly healthy track here continuous
delivery that talks about automation and
animation techniques I won't go through
those but I will try to I guess share
one of my stories with you about a
couple of years ago we were building a
completely greenfield retail or an
application in retail and we were super
excited you know there were a bunch of
us and we wanted to put all the vital
services good
into practice so we started trying
everything and go really micro we made
some good trade-offs at the beginning we
had this principle that we will not
write a single line of service code
until we write a contract test so we
will write a contractors to evaluate to
show how the service behaves what
requests and responses he can get we
build a prototype or mock to demonstrate
that and then we build the service that
was a good decision but what we failed
to do was start with consumer contract
test what we were validating with
contractors was as a service provider
how we think the consumers should be
using our service we were in validating
how our consumers are assuming to be
using our service so look into consumer
driven contracts and that's that's a
good way of kind of testing the services
we did a lot of automation so we wanted
to be able to really push code you know
to through different environments run
different types of tests unit test and
contract test and so on and be able to
deploy automatically we and we had many
like we had about 60 services over the
course of three months and sixty plus
build pipelines we had build pipelines
that were testing our build pipelines
themselves so it was all beautifully
automated but the mistake we made was we
didn't push to go all the way to
production so we were happily pushing to
this integrated or production like
environment but we didn't take that last
mile of going all the way to production
because of you know organizational
challenges the disconnect between people
who actually operate the release and
production environment and that really
hurts us at the end and it slowed us
down so go if you're automating automate
the single piece service the hello world
all the way to production don't stop
somewhere close there and we did make
trade-offs we did implement you know
health endpoints that you could just
ping and either from your load balancer
or a user could just ping it and see if
the services up and down we were
exposing health metrics and we built
these templates
or scaffolding or some people call this
chassis which would really help the
service builders bootstrap quickly be
able to build the you know the
scaffolding around the service and get
all that book code kind of in the
service but we what we fail to do was
investing in debug ability so we didn't
build correlation IDs we didn't have
events that would help us to just you
know collect and see what happens in the
larger system so debugging become became
quite hard so yeah choose your choose
your trade offs very carefully early on
and this it is a slow to start because
there's a whole lot of infrastructure to
build to operate microservices another
thing we did was well we below these
libraries to you know give a slugging
give us authentication of our services
things that were common across services
will be we build them as one releasable
shared library that was another mistake
and that hurt is going forward because
we wanted to upgrade the versions and we
were stuck with one big library instead
of independent small libraries did you
know looking after different aspects so
as we spoke there are many values with
micro services and their complexities
that come with that so we talked about
autonomous teams you know teams are made
of people people build silos and walls
around themselves so it's great to have
a ton of me but with that comes a
communication overhead we love
microservices because they make us go
fast the speed of exploration and
innovation but to be able to go fast
there is a complexity of building
automated build pipelines and how to
execute micro sources we can scale
because now we've broken in a large
problem domain to smaller sub domains we
give allocated teams to these subdomains
to release independently but building
distributed systems that support you
know resiliency and consistency and all
the challenges of distributed system
adds complexity composure
we love api's right API first we build
services we build a POS and he gives our
consumers a way of composing services
into nice applications and solve weird
and wonderful plot problems but with
that comes the overhead of maintenance
because we have to support backward
compatibility now with a large number of
consumers of our services and finally we
talk about tech diversity for I talked
about how you can use different
databases for different services you
choose the right technology for the
right service and now suddenly we've got
this explosion of tick up stacks that we
have to support within the organization
so I suggest that if you were building
market services or heading towards that
utopia get yourselves one of these giant
microbes sliders and find that right
place that give you the net positive
value for your organization's where you
are and tune it and as you become more
you know mature and solve the
complexities that we talked about and
fri talked about then go more micro and
find that niche place going fast but
let's do it so a lot of the problems
that we talked about I talked about our
soft problems our people problems you
know the communication problems we to be
able to you know deliver I think deliver
microservices successfully I leave you
with one last word and that's empathy we
need to I think as a developer community
really take a leap in the evolution of
our empathy so if you're building
services think about your consumers
first build something they need if
you're a consumer of the service give
your test and your assumptions as
executable test to your service
providers so they can run it and
validate it as part of their you know
service bill pipeline if your service
provider produce not only service but
also mocks to the consumers so they can
validate again run their services there
are a whole lot of practices that
come ups from microservices over the
last few years that are based upon
really empathetic development and that's
it thank you we have time for some
questions if you the first one you say
no utility services but how about lock
service provided as a
software-as-a-service think New Relic
right so i guess what i mean by utility
services are utility services that
tightly couple your your services into
that so there are you know standards a
loose coupling between utility services
or logging as a you know you have a lock
service that scrapes locks and you know
it might be reading and aggregating
different logs completely independent of
the different services that's perfectly
fine by utility i meant common shared
services where a lot of services are
pinging and using them with you know a
specific contract and examples of that
or as i said reference data or
configuration things that really tightly
couple your consumer services so there I
guess the difference the different
language I would have used for logging
are more infrastructure services that
exists like service discovery log
aggregation they are infrastructure
services that we would be using ok what
about composite services are they good
or bad who should own those yeah good
question good question so I think with
the kind of advancement of Technology
we're moving towards putting composition
to the to really towards the front end
towards the edge so what I've noticed is
we used to have this kind of composite
or aggregate services I worked at a bank
and they said you know we have this page
on our application that shows all
different accounts for a consumer when
they log into the bank they can see
their loans their credit cards so we
downstream they have different services
for each of those account types but they
put this aggregate service in the front
of it what they're doing with that is
they're penalizing the end user from the
performance point of view or even
functionality point of view with the
slowest moving part of the downstream
service so I think with reactive
programming with event-based the
composition is being moved to the front
end as closely as possible because the
front end has the most context about
their user and they can reactively kind
of get events to that rather than having
very rigid aggregation services having
said that what I've also seen is a style
of composition which is which I mostly
call them experience services and not
aggregate services they sit in front of
your UI and mostly they provide you know
data that is is kind of closely related
to an experience service but I will see
less of those and more kind of push to
the push to the front end okay the
responsibility for consumer contract
testing does that lie with the service
implementers is the question all all
right sure so the idea behind
consumer-driven contract is that you
know the responsibility of producing the
contract obviously it's with the service
provider at the end of the day is the
service provider who's writing the
service so they know what contracts they
can satisfy however the implementation
of that contract test how am i using as
a consumer the service lies within the
consumer so consumer produces the test
and execute the test obviously as part
of their own to produce the contracts
the service provider consumes the test
to run their services so the creation of
it long it lies within the consumer the
execution of it lies within the service
provider
we had this kind of again in that
project that a bunch of idealistic
people were building lots of services
too quickly we had this idea of
self-healing pipelines so we started
using consumer contractors and we said
what if the consumer what if we reverse
this responsibility what if the consumer
could tell us what they want differently
from a service by breaking the contract
they add a field what happens next is
the build pipeline of the service
provider breaks and the server providers
can quickly react to healing that
pipeline by implementing the service so
it's a way of kind of self-healing and I
hope maybe one day we can get reach
there we never managed so the i guess
the responsibility of the contract real
i stayed with the service any other
questions in the audience no thank you
very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>