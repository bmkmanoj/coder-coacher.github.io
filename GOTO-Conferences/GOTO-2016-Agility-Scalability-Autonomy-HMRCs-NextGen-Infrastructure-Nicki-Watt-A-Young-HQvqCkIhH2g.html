<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2016 • Agility, Scalability &amp; Autonomy: HMRC’s Next-Gen Infrastructure • Nicki Watt &amp; A. Young | Coder Coacher - Coaching Coders</title><meta content="GOTO 2016 • Agility, Scalability &amp; Autonomy: HMRC’s Next-Gen Infrastructure • Nicki Watt &amp; A. Young - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2016 • Agility, Scalability &amp; Autonomy: HMRC’s Next-Gen Infrastructure • Nicki Watt &amp; A. Young</b></h2><h5 class="post__date">2017-02-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HQvqCkIhH2g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everyone I'm Alexander young I'm an
infrastructure architect in HMRC's chief
technology officer I'm mainly working
around what our ceiling looks like in
the future for DevOps operational
support services and cry out in general
as nebulosa fat Sam has a tendency to be
and my name is Nikki wat so I work for
open credo we're one of the sponsors
here you can catch us downstairs if you
want more information and we've been
working with HMRC to help them on this
sort of clouds journey and I'm going to
be talking in the latter part of the
talk on some sort of tools and
technologies that we're using in that
space so with that I'm going to hand
over to an Alex start we've also been
asked to remind everyone to engage with
the conference as it laid out there and
awkward lethal corporate presentation
really have a second title slide but
please bear with me so what I'm
intending to go through is a little bit
of history of HMRC's infrastructure
where we've been where we where we are
now and where we're going in the future
both from a technical point of view and
from an organizational point of view and
then I'll start talking about this thing
that we call and boy which is really our
tool of choice for lunch and cloud
infrastructure into the future we're an
organization with a lots of history 400
years if you can't was through different
names so it's always a bit difficult
what to know where to start but the most
salient points of circular conversation
is in 2004 when we signed the aspire
contracts which to all intents and
purposes is a single supplier contract
for all IT delivery within the
department managed by one prime
contractor with some subcontracts
involved when we been around 2010 up our
state was that we had several of our own
data centers across the country and then
we were using some provided by a third
party throughout the twenty ten to
twenty thirteen period we had a number
of programs that were looking at
consolidating our
center infrastructure down from a very
very large number of physical servers to
smaller number getting higher
utilization out the stuff that we had
which enables us by now to decommission
the last of our own bait centers which
was in shipley we're now left with the
three core datacenter sites owned by our
provider and during this time we've also
moved towards consuming some cloud
resources both from our main
infrastructure provider and from some
community providers such as UK cloud and
datacenter I think that's the important
thing to notice about HMRC's business
processes if it's inherently Tiki I'm
sure there are some people in the room
who have the fund of doing ID
self-assessment once a year obviously we
have an inherit peak there around the
search first of January when everybody
realizes oh I should probably file my
taxes we also have another peak in July
around class credit renewals the problem
that we have around that is that our
infrastructure is really quite
inflexible the moment we're still for a
lot of things locked in with that one
main provider so we're paying for peak
load all year round when server
utilization can hit so what six months
of the year around one or two percent
still but that's the cost of doing
business in the later we go where we
want to go however is of course using
what we call hyperscale 12 to any normal
person you consider those public 12 we
accept that on the supplier side of the
only way for us to really really get
value for buying infrastructure in a
utility side manner is if those
providers have scaled the private cloud
services we consume from our main
provider at the moment obviously don't
have scale they are just some racks in
data centers that we pay for spacing the
thing we are cautious of however is
vendor lock-in as I say we've had
excuse me from decent matter 12 12 years
of working with the most part 1
infrastructure provider we don't want to
just jump into bed with the next
provider on the cloud on the public
cloud scale whoever that might be we
want to be careful to ensure that we
have the ability to move as in when we
see fit we're also a bit concerned about
commercial resilience we don't think
that anyone is really too big to fail
even the berm us in the space and corset
standing concern about Geographic
resilience the people at this scale have
data centers all over the world although
we can only use alums in the UK but the
ability to say I have a site in UK North
UK west whatever that's very very good
to us the three big challenges we have
in this space are as laid out security
culture and our concerns about lock-in
security is of course very important to
us we have data on every single UK
taxpayer and a number of non UK entity
see paychecks to us we take it very
seriously if we're going to start
putting stuff in public cloud so you
want to make sure we're doing it right
we're doing it in a secure way culture
is also a big concerns for that 12 years
we've been in this one supplier
contracts we've worked in a very
waterfall very process driven manner if
we're starting to leverage the power of
the cloud in any meaningful way we need
to start being more agile this is tied
in around our organizational
transformation stuff around inculcating
a DevOps culture as well we're an
organization of 65,000 fo and at some
point all of these people are touched by
IP delivery so it's not just a case of
talking to people who are doing delivery
for us its policy people its operations
people they need to understand how this
will work going forward lock in as I've
mentioned previously is also a big
concern of us we accept that some lock
in 15 evitable whether it's merely by
the tools we choose to manage our
infrastructure is nikhil talk about
later or whether it's the features of a
given provider
there is always going to be something
famous 28 flakes we just want to be
careful we want to be doing it fully
cognizant the risk so that that exposes
us to to facilitate this our big
technical transformation piece around
this is changing the way our networks
work I'll take a quick break to say that
Jim net isn't an emergent RFC or
anything it's just an unfortunate side
effect of being in the same room as our
CIO when he's trying to give something a
name the person responsible for the work
is Jim we do have a sense of human no
matter what people say so at the moment
our networking structure is very simple
it's just those three chordates sent to
set data center sites linked by dark
fiber what we want to do is essentially
move to a hub-and-spoke side network
where we have our corporate one
essentially spread over any number of
cloud providers and for at least a time
being our core data center sites as well
it's worth noting because we don't get
much of a chance to brag we're leaving
government in the space looking at the
security of this design we're ahead of
where the ESG guidances but they're also
happy with this you bellisima so we are
gotten the ocean crossing the t's when
it comes to security but it's never just
technical as I say we are moving from
the single supplier we are in sourcing a
lot of the people who currently work for
that supplier they're coming over to us
we're establishing our own delivery
groups which are centered around service
functionality it's an example r textin
accounting platforms are managed by our
core business platforms so delivery
group culture change is challenge
particularly where we're just taking
people from our current supplier
obviously they are used to the way
they've worked for the last decade or so
but I will sincerely say that a lot of
these people have been the most
enthusiastic people I've worked in
worked with energy mercy they're excited
to change they're excited about the idea
of not being hamstrung by a very heavy
weight release process and all the
supplied around that they're excited
about managing their own services rather
than just delivering them and checking
another events to people intestine ops
and having bragged that I think it's
also time for a bit of humility we don't
have off have all the answers we are
learning as we go and I think it's
important that we do maintain that
attitude of being a learning
organization so what is in Berlin how
does it link to all of this employee
other projects was given the mandate of
giving us getting us at hmrc a tool that
will enable the first creation of
repeatable secure environments capable
of running in different clouds and
giving us the capability to say well
this is the right cloud for X job from
any number of those factors listed on
the slide and for our purposes we
generally have two large and by no means
a modulus groups of users we have the
view of em boy for developers what we
want to do here is make provisioning
easier faster more automated at the
moment if I wanted a new server in one
of our data centers I'd be looking at a
three week to three months late and this
includes virtual servers I'd like I'm
sure there are people who know how
quickly that can be done but yeah it's a
very long process and it's very paper
have a very process rhythm it is a
process after all but we're also looking
at empowering our developers to self
serve as I say get rid of that entire
process around having to go to X number
of people to get my approval for getting
one virtual server in Iraq somewhere
along our datacenters just having people
get what they need as they need it we
then also have what will classify
generally as management concerns I want
to be able to know what people are doing
well I guess first I want to know who is
doing something then what they are doing
why they are doing it and what I
expected financial impacts of that to be
again just as with security we know
we're spending public money we take that
very seriously we want to know we're not
just throwing good money after bad as
well as that we want the ability to say
that for the self service for the self
service infrastructure I know what's
being deployed sort of assurance that I
know the right security controls are
being put in these environments and
that's something else you want to
deliver through envoi start talking
about how we've gone about doing this I
think now's a good time to and every
thinking thanks Alex right so the latter
part of this talk we're going to be
talking about this framework called
invoice so it's going to be broken up
into four kind of areas the first thing
we're going to do is have a look at sort
of the functional overview of envoi and
then we're going to have a look at how
it's currently being used within hmrc
we're going to have a look at some of
the sort of principles behind it and
then some of the sort of core
technologies which underpin some of what
we're doing so from an overview
perspective as Alex said envoi is it's a
framework which looks to bring together
a set of different sort of tools and
services which will allow developers
within HMRC to request and provision
infrastructure in different clouds it's
underpinned and it integrates with a
variety of different open source
technologies and tools so we're not
talking to sort of reinvent the wheel
here where there's open source
technologies that already do this we
want to leverage that the way that users
will interact within voyeurs either
through a sort of self saw self-service
portal or there's also an API that they
can use if they want to sort of
programmatically controllers so in terms
of what a sort of typical flow looks
like I think the first thing that we
need to just establish is one of the
sort of key tenants within in voyeurs
this concept of an environment template
so with a single environment template
within envoi is essentially a collection
of a lot of infrastructure as code
templates which are used to essentially
describe the automated way that you
can provision and bootstrap a particular
system or environment in a particular
infrastructure provider or cloud this
will cover things like what are all the
networks that need to be created what
are the virtual machines how do i put
the software onto those machines as part
of the initial bootstrapping process and
this is all kind of version controlled
and it has some sort of customization
aspects as you can hook into so that
sounds a little bit abstract so let me
give you a few examples so one of the
things that the users can do is they can
come to the system and they say i would
like to spin up some environment that's
based on a basic sort of templates so
this will give them the opportunity to
have a more sort of pick and mix style
of approach so i can say i want three
central servers with you know 200 gigs
of ram or i want to windows boxes with
this amount of compute storage and a
kind of pick and mix what they want if
they may be need that environment to do
some kind of proof of concepts so that's
one kind of template definition they
can't they can have but they're all sort
of interesting one is where you have a
template definition that is for a
specific team for a specifically laid
out kind of system so if we take an
example where maybe we have a team who's
responsible for the development and
maintenance of a tax calculator which
needs to be displayed to the users and
let's say for argument's sake that this
particular system comprised of a lamp
stack so Linux Apache my sequel PHP
within the environment template
definition within envoi you would
essentially describe all of the network
layer that your environment needs to
have in order to create that you'd also
for example you so maybe I have two
Apache boxes and I have one sort of my
sequel box you'd also say what is the
bridge drafting software that when this
environment comes up I need to load onto
that system so maybe you're going to
install Apache as a system boots up and
one of the other things that it has is
it specifies what are the target clouds
that this type of environment can get
spun up in you may say in a test
environment you can go to cloud a and B
however if there's certain other sort of
conditions depending what people put in
you can you need to get spun up in some
other kind of
provider so the way this will work is
that teams will come along and they'll
say I would like to request let's say
one of these tax calculator environments
they'll fill in a few details or say
this is a test environment I would like
to Apache servers instead of one and by
the way this is the ssh key that I want
to use to be able to log on to the boxes
once the systems come up this will then
go through hopefully a very lightweight
approval process so the current process
or existing process could take months in
this case it's literally the click of a
button but it could also be Auto
approved but once that's been done
there's in this definition within the
system which will allow the development
teams to so right I now want to
provision the provision change that
environment as they see fit as part of
their processes once the environment is
actually being created so it will
essentially the way it will be created
as it will take all of those all of
those infrastructure as code sort of
templates you'll take the input that the
user provided and it will create the
environments in the particular cloud
provider but then you still need to get
access to it now in the current system
within envoi all of these environments
are spun up and completely isolated
self-contained sort of units and the
only way to get in is by VPN into the
box so the templates themselves are also
designed to be able to have a VPN server
enough to enable this so users will then
need to go to and Roy and they can click
about and they can say give me my VPN
configuration for this particular clouds
that I can get into it then they can
basically download that that connect to
the environments and they do whatever it
is that they need to do when they're
finished with this and this environment
maybe it lives for a month maybe it
lives for a week maybe it lives for a
few hours depends on the use case they
may have said I only need this
environment for a few hours to do my
performance testing or something like
that but it's pretty much it under it
underpins one of the sort of key
requirements for HMRC is that I only
want to be able to pay for the
infrastructure that I actually use
is so unlike in the past where you maybe
had to request your infrastructure
months in advance and even then when the
infrastructure was there you would pay
for it irrespective of whether you were
using it or not here you only pay for a
week or an hour or however long it was
that you actually want the
infrastructure for and this is obviously
helps HMRC from agility perspective but
also ultimately saving taxpayers monies
which is really important so as Alex
said there's the other side of the coin
there's a developers but then we also
have some concerns around management and
the levels of assurance and governance
that these particular environments have
when I get spun up now the kind of
questions that will probably get asked
jurors around some security in the like
so if we have people who are now
defining the actual networks that are
being spun up in these different cloud
providers and infrastructure providers
how do we know that they are actually
secure how do we know we have an
inadvertently punched a hole through
something and allowing things to come in
how can we be sure as well that you can
repeatably recreate this environment in
the same way so that if it gets spun up
and down sort of multiple times you're
also not introducing something kind of
different and also can we track what
changes are made so when somebody
changes in environments they change the
number of machines or the change the
networks around again you want to make
sure that whatever security and auditing
controls were there before that we can
at least kind of track that and make
sure that that's possible because all of
these templates are defined as
infrastructure as code it provides a way
for the people sort of wanting to have
insight and transparency in these
environments to literally go and say
show me the network definitions as
they've laid out show me what the
security ports and things are that have
been opened up and it's all kind of
defined as code they could be confident
that these environments can be recreated
the same time the same way every time
they're spun up and there's also every
time an environment does go through a
change its version controlled and
tracked so they can get an audit history
of exactly how things have changed it
to have a look at that so how is envoi
actually being used currently within
HMRC so it's still in a sort of beta
phase and it's being used with a select
number of teams to be able to sort of
trial this out so as Alex said hmrc are
also going through the process of a
method sort of transformation and we're
using these teams to try and help drive
out how this will ultimately kind of
work within the broader sort of context
and organizational setup currently only
being used for dev and test environments
at present but it has made a big
difference to some of the teams from a
provisioning aspect so we had one team
which came to us and they essentially
had a had a three-month project that
they needed to do and they've gone to
the existing supply and said we need
some infrastructure and they said it's
going to take three months before you
can even get it so they can we please
join the Vita program so that we can get
out infrastructure a little bit sooner
so literally having been on boarded they
were then able to use that sort of basic
sort of template I spoke about in order
to get some servers and play and do the
sort of proof of concept that they were
interested in doing in under an hour in
fact in a few minutes so some of you
will ask why didn't you just look at
some cloud management platform tools out
there there are a variety of commercial
and open source sort of tools out there
that do some of this multi-cloud
provisioning for you or maybe why didn't
you look at a pairs you know and you
could argue maybe you're kind of
building one anyway and I'd say that
there's a few challenges which existed
in terms of this particular project and
the first one is that besides the sort
of sort of typical providers which you
think we'd interact with there are also
a lot of mesh ones and one of the
problems we had is that when we look to
some of the cloud management platform
tools it didn't support all of the cloud
providers and infrastructure providers
we were looking to integrate with so
this already was a bit of a no-go we
also have requirements to support a
diverse range of environments so the
ultimate goal is yes to get to a point
where we can have cloud native autoscale
in containers and everything that sort
of comes with that but the reality is
really that there is infrastructure out
there that's just legacy and some of it
is going to have to stay in the data
center where it sort of currently is but
there's also there's a sort of middle
ground where they're still benefiting
being able to take some applications do
some level of minimal transformation
just to get them cloud-ready and allow
them to be spun up and down in a
different cloud provider context so that
you can actually save money and envoi
needs to cover all of these sort of rent
well the sort of interim step and to the
cloud native setup so if we went with
the pairs that put some kind of
restrictions on us sometimes in terms of
you have to do it this way and you need
to use containers or something like that
more importantly though the cloud space
and the automation space space is
evolving so fast what's available now it
was not available for the six to nine
months ago and with this desire to
mitigate vendor lock-in both from the
cloud provider perspective but also not
locking a not locking HMRC into any big
contracts to begin with the choices made
to rather go with looking at some other
options in this particular space so the
way that we essentially went about going
with this was to say instead of choosing
one of these sort of one size fits all
type solutions let's see if we can
rather bring together a set of tools and
services that will ultimately allow us
to achieve the same objective but in a
more lightweight approach so that sounds
very enough but you might say you can't
arbitrarily throw a whole bunch of tools
together and hope that you're going to
get a cohesive solution out in the end
you've got to think and plan about how
you're going to do this and this is why
they're a set of principles which drove
in voi in the way in voi was ultimately
kind of set up these principles can be
described under what's called and a SEP
excellent the first one is that we
believe we need to automate everything
the goal is flexible recreativo
environments so if there's any humans in
the in the loop they basically slow
things down is manual configuration and
it's just
Eric Rome the other thing we believe is
that you really need to separate your
configuration from code so if you're
going to you know try and recreate
environments in different clouds or if
you indeed want to maybe swap some of
the tooling out because the cloud market
is moving so fast is a new tool is come
along you need to ensure you separate
your configuration and code to allow
this to happen you also believe you very
much need to adhere to the principle of
picking tools in the space that have an
API and also cloud providers so it
sounds obvious but some people tell
themselves with cloud providers we have
to go to their portal and click sings
and just doesn't work if that's the case
but it's very important from a cooling
perspective because if you want to swap
tools out you need to you need to
automate that and an API allows you to
do that now this doesn't mean that it's
going to be simple because the APR is a
probably fundamentally different but the
fact that there is an API means you have
a bit of a chance and although we
certainly don't discount sort of
commercial offerings the preference is
really for modular open source tooling
so let's have a look at some of the sort
of core technologies that underpin this
so as I've described there's kind of two
elements to what I said there's a
self-service element and then there's
the definition of these environment
templates and the way and the
technologies around them that are used
to essentially spin them up in a
different cloud providers and it's the
latter parts of this that we're going to
look at for the last part of this talk
so as I said before the sort of key
cornerstone of these environment
templates this is essentially a git
repository which contains all of the
code and or references to code that we
need in order to spin up the
infrastructure once we've got the
customized inputs from the users there's
three main aspects to this there's the
infrastructure as code templates for the
definition of all the networks of
virtual machines there's also been the
references to the particular base images
within the cloud that need to be spun up
so the example here is if you're going
to spin a machine up you want to make
sure that let's say you're spinning at
the Centers machine that you've got a
senseless machine in cloud provider a
and B that's got the same software
installed on it it has all the same
security
measures etc places that you can be
confident that whichever provider it's
ultimately spun up in you have
consistency there and obviously we have
the bridge strapping scripts that are
needed to install any particular
software that you may want to install on
the on the boxes once they come up so
the first tool that we use in the
infrastructure as code sort of
templating space is a tool called
terraform from hoshiko and we actually
have the CTO of how chic or Pierre who's
doing the next talk not on tariffs all
but to reform is essentially the the
tool that we use in this space so this
will spin up the networks and the
infrastructure in the various different
cloud providers the virtual machines
when they actually kind of come up as I
said before they are going to have to
have a base image which is going to need
to be consistent within the different
cloud providers of the starting point
and for this we use another hash called
tool called pecker in order to actually
build those images and make sure that
all of the appropriate security software
auditing whatever kind of needs to be
built into those base images forms part
and parcel of each of these now the
actual scripts themselves don't form
part of envoi the temperature but the
end result of being able to reference
that base image is and then we
essentially allow the teams to be able
to offload their sort of bootstrapping
process to whatever configuration
management tool of choice virtues so if
you want to install your Apache or your
my sequel if you want to do it with
ansible puppet or chef don't really mind
you just you just kind of pick and do
whatever one makes best scenes for you
in your context and for your team as
long as you use something that's
automated so and finally throughout all
of this process we have some sensitive
data which we need to kind of take care
of so there's cloud provider passwords
that we've got to be able to talk to
there's maybe database passwords and for
this another hash cook tool called vault
is what's being used in this particular
space so these are sort of core open
source kind of technologies that are
currently being used in terms of doing
the
in process and although we don't have
time in this particular talk to do a
deep dive in all of them I'm going to
just go into a little bit more detail
about two of them to explain why it was
a good choice for us in terms of in voi
and and how it works and as I said to
you before the first one is terraform so
terraform after the Box supports all of
the major cloud providers that you can
think of so your Amazon's Google's as
your as well as a variety of are the
sort of smaller ones that you probably
haven't heard of and although
fundamentally all of the cloud provider
ap is are different and they are
completely different terraform allows us
to have the same sort of paradigm and
approach to spinning infrastructure it
up so you have a DSL where you can
describe the resources that you want to
create in the cloud and then you use
terraform essentially to create all of
your networks and infrastructure so this
means we don't need to resort to doing
different things in different clouds so
for argument's sake if you were in
Amazon you would need to use something
like cloud formation or if you were
doing something in an OpenStack type
setup you'd need to use heat but
therefore we have one way one approach
in order to spin the infrastructure up
but not tie ourselves to having a lowest
common denominator and it has this
pluggable provider API which comes in
exceptionally handy when you come across
a particular cloud that isn't supported
so this happened to us earlier on in the
project where we needed to integrate
with a VMware vCloud based provider and
it just wasn't supported as i said in
any of the sort of cloud management
platform tools at the point in time but
with terraform we're essentially able to
basically write the provider ourselves
an hmrc have actually contributed back
into the open source community the
VMware vCloud provider so if you go to
terraform and you made use of it this
was essentially an hmrc contribution so
the thing that made this possible
however is I'm going to come back to the
principles so one of the principles is
we need to choose tools that have got an
API and the fact that terraform has an
API meant that
we came across a cloud or if we come
across the infrastructure in the future
that's not supported we can literally
right provider ourselves in order to
allow that to sort of move forward so
there's other aspects that are quite
appealing to us obviously as it deals
with different cloud providers but it
can simultaneously deal with different
cloud providers so if you had a system
where you said I would like to spend up
half my stuff in cloud a half my stuff
in cloud b and kind of connect them
Sarah form provides a mechanism to do
that in a single court of configuration
and allow you to do that and that's
something that needs to be catered for
in the future as well it has a thriving
open source community and it very much
adheres to our sort of a set principles
so then the last tool that I just want
to briefly kind of talk about is volt so
volt ever said is a tool from hasha Corp
and its really used to do the sort of
Secrets management side of this problem
for us it fits in very well with our
ethos because it's essentially a tool
whose sole goal is to securely expose
and store secrets for you through a very
tightly controlled interface now whether
you use volts or whether you choose to
use any other tool in this space the
lesson I would really say it is
important is don't try and roll your own
security is really hard and trying to
get this right and kind of do your own
thing you inevitably just land up in
trouble so trying to find a product or a
tool framework that will securely be
able to do this for you has gone through
the process of making sure that they've
looked at all of the security aspects is
is really key so besides just being a
place where we can store sensitive data
volk has the ability to have a CL
policies so this means that we can
configure it to say if I have sensitive
data for Team a they can't see those
secrets or passwords that Team B needs
to use likewise you can configure the
tools to say you can only see this
aspect of vault and not another so from
being able to sort of manage the
security perspective
really important the other thing is that
every time secrets are requested or kind
of dealt with there's an audit log which
happens so in the event of a compromise
you can go through the audit logs you
can see exactly what's happened who's
requested white and kind of how and try
and use that in order to assess what's
going on in terms of our setup we are
running a sort of centralized H a volte
kind of setup and we've basically got
all of our tools configured to be able
to talk to our vault provider the
tooling integration efforts very so for
example if you use something like puppet
there's a ruby gem already out there
which you can literally just plug it in
and it will talk to vote for you so if
your configuration management tool will
need to get secrets you can do that
already terraform itself unfortunately
even though the high school product
doesn't actually have native vault
integration yet I say yes because i
believe it is on the way but again come
back to this principle we always choose
tools that have gotten api so the fact
that it doesn't have native integration
we could still write the wrapper around
that ourselves in order to make that
happen and this is one of the sort of as
i said one of the key principles as to
why we kind of choose these tools in the
first place so if we look to bring this
all together we have our users they come
along and they request their environment
I would like my tax calculator system
please i want to Apache servers instead
of one and here's my ssh key it gets
approved envoi would then understand
what the sort of target cloud provider
is that this infrastructure needs to be
spun up in and it would either obtain
and make that password available for
that particular environment and store it
within volts or a reference to it with
involved now they may also be other
things so we had a lamp static example
so maybe you've got a my sequel database
which has also got a password so in that
case it also generates the password and
make sure that that was available for
when the teams come along and want to
spoon the infrastructure up so
the teams will then come along and say I
want to now provision the environments
I've just requested in hville will say I
know which cloud provider you going to
get spun up in let me go and get the
credentials outer vault and let me hand
that off to terraform to start doing the
automated provisioning into the
infrastructure provider obviously using
our sort of based images which were
built by pecker in the first place as
the machines themself start sort of
booting up we then hand off through
something like that in it for Linux to
whatever the configuration management
tool of choice was for the particular
team so in this case maybe they chose
puppet or ansible or something and any
potential so that the configuration
management tool within so let me install
the software so I'm going to install
Apache where we are going to install my
sequel if there are any secrets that
were required in order to do that
bootstrapping process it would have been
stored and referenced for the
environments involved it can then
essentially speak to vault obtain the
secrets and start restricting the system
and the end result is that you you land
up with a sort of fully configured
system that is able to then be used by
the team for whatever purposes they
weren't moving forward so I hope that
this gives you a bit of a sort of
overview in some of the things that are
happening within hmrc in the open source
sort of tooling and technologies that
have been used in this space so in terms
of a conclusion this is the mandates
that was given for the project how do we
go about creating these fast repeatable
secure environments which are capable of
running in different clouds and although
invoice still has a fair way to go in
terms of a lot of things and we're still
learning as well and in working with the
business on this it certainly has picked
I think a few boxes so we now have
developers which can create environments
in minutes instead of three months this
is a massive benefit for the
organization we also have everything
defined as infrastructure as code which
means that it's easier to have a look at
you know there's from a security
perspective an audit ability perspective
exactly how things are kind of laid out
from a management point of view it helps
with a sort of change control process
and we very much believe that in a cloud
space where things are changing so much
and so often rather than nailing your
colors to the mast sort of quite early
you can look to combine the right tools
for the job and as things change kind of
evolve as that moves forward and it
essentially allows hmrc to be able to
choose the right cloud for the job so if
it's better to spend infrastructure up
in cloud a compared to cloud be this
tool essentially allows that and kind of
breaks that single supplier problem that
existed in the beginning so we're using
a lot of open source technologies but
we're also looking to open source some
aspects of this hopefully in due course
as well so hopefully stay tuned for that
so this was made possible because we
stick we believe that we really need to
stick to our principles so I'd say in
any kind of project that you do you
should really have a set of principles
which drive what you do and then you can
be flexible in the tools and the
technologies that you ultimately kind of
use for that and that's really worked
out for us and with that i'm going to
say thank you very much and i hope that
you'll please use the application to
rate this talk and i think we probably
have like maybe one minute for questions
your pre mess ok
so I have a question through the ice
basically it to do what advantage what
advantages do small providers give over
large providers does the lack of support
cause more problems than they're worth
do you want to thank ya so I can take a
historical approach to this two or three
years ago when we were still first
looking in cloud providers for our
multi-channel digital tax platform these
small players for the only people we
could use so that's obviously an
advantage being up seasons for mainly
reasons around her own security in terms
of how that gun for us in terms of
support it's those providers that we
were looking at the vCloud director
contribution to terraform for and we
have found that there is generally for
for the nice providers have been using
there is something that can interact
with them perhaps we haven't been as
efficient as we could have been with
larger providers but we've gotten the
job done I guess make if you have a
m'boy angle yes I mean I think we we so
we to a certain extent each our own dog
food so in voi itself is itself an
environment template spun up by itself
that's a little bit meta but we had a
case where we were on one of the sort of
smaller cloud providers and it had a bit
of a catastrophic failure and we needed
to kind of move somewhere else so we do
tend to see that so yes I think they
certainly are problems in some problems
sort of in that space however for
various political and commercial reasons
whatever some of the smaller cloud
providers do make make sense in certain
contexts but i think the larger ones are
better economies of scale but it really
depends on what the particular problem
is cool we can catch us hopefully
afterwards apologies and we've just run
out of time thank you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>