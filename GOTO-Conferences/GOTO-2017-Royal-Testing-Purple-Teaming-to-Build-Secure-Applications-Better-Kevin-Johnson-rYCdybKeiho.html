<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2017 • Royal Testing: Purple Teaming to Build &amp; Secure Applications Better! • Kevin Johnson | Coder Coacher - Coaching Coders</title><meta content="GOTO 2017 • Royal Testing: Purple Teaming to Build &amp; Secure Applications Better! • Kevin Johnson - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2017 • Royal Testing: Purple Teaming to Build &amp; Secure Applications Better! • Kevin Johnson</b></h2><h5 class="post__date">2017-09-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rYCdybKeiho" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're gonna talk about royal team
testing today can everybody hear me okay
I'm assuming so cuz I have a mic on and
all that kind of stuff but I'm a
loudmouth anyways fat lazy loudmouth so
uh Who am I before I get started I got
to tell you a couple things about me and
there's a main reason for it other than
the fact I get to put pictures of my
kids up and cool Star Wars costumes it's
very important to understand my mindset
as you listen to what I talk about I am
a security nerd I founded and run secure
ideas we're a consulting firm out of
Jacksonville Florida we are 16 people
now which blows my mind
we're not huge but it's bigger than I
ever thought would be because it was an
accident there was never a plan to start
a business I just had people ask me if I
could do some work and I could and so I
did and then next thing I know I have 16
employees I'm responsible for their
mortgages which is kind of scary right
so I've been doing that for a while I've
been involved in IT as a developer and
as an admin for about 25 26 years now I
am a nerd if you don't know it now you
will know it by the end of the talk
basically I'm so nerdy that the guy that
used to take my lunch money all the way
through school still takes my lunch
money quite often but mainly makes a
damn good Subway sandwich so I am also
anions faculty member we're a decision
support company think Gartner but better
and of course I'm biased right so I've
been anions faculty member for about
five years now and I do speaking and
teaching and all that kind of stuff I
wrote the web pentesting and mobile
security curriculum for SANS Institute
teach I've taught everywhere from
Virginia Tech to Princeton the U F which
is kind of funny because I barely made
it out of high school right we don't win
when Princeton came and said hey can you
teach a class I'm like yeah of course
Princeton that's kind of cool right I
got any League I don't really know what
Ivy League means but hell I'll go oh
right so we started doing the contract
negotiation and that's when they came
back and they said hey Kevin where'd
you get your PhD and I said well I can
write those three letters but I mean you
want me to write it on a piece of paper
I don't know I don't have a PhD Oh what
about your master's I don't have a
master's let's be clear I don't have a
bachelor's or an A either oh they had to
get a special exception to let me come
teach a class which I thought was
absolutely hilarious right which is why
I tell you now I'm also I run a whole
bunch of open source projects here's my
recommendation if you've ever thought to
yourself man I should run an open source
project what you should do is go stand
in the middle of a highway and let four
cars hit you and then go do something
else oh it's horrible I mean people have
literally called my house and cursed and
threatened my wife because I didn't
implement a feature they wanted here's a
hint don't ever call the house and
threaten the wife of a guy whose entire
job is to break into companies and steal
 okay just a recommendation
especially not if you use your caller ID
and I know your name oh just just saying
right so I do a lot of different things
but like I said my viewpoint is slightly
different than other people's I my
entire job day-in day-out when I'm not
speaking and teaching I am breaking into
companies and stealing stuff I tell
people all the time that I've got the
best job in the world I get to come in
tell you your baby is ugly and you suck
and go home it's awesome right now it's
not really what I do I test off I
evaluate stuff I help understand risk
and I give recommendations on how to fix
it one of the main things that I think
differentiates secure ideas from other
companies is the fact that we don't hire
security people we hire developers and
admins because I'm a very firm believer
and this may not be something you're
used to hearing but I'm a very firm
believer that if I can't give you
real-world actionable recommendations
then I am useless and for too long as an
admin and as a developer I would get
reports from pen tests and security
people that sucked right oh you can't do
that I
have to do that that's how the language
works right no no no a security guy says
yeah security guy blow it out your rear
um by the way this talk will be pg-13
should have said that at the beginning
right so we try very hard to do this I'd
like to tell people that I am an
international speaker because I spoke in
Australia once in Canada like four times
I'm kind of like the Jacksonville
International Airport it has one flight
to the Bahamas a week so it's an
International Airport I made that joke
at a conference in Jacksonville and you
would have thought that I had peed in
this guy's Wheaties he was so mad he was
like we are to it like in the middle of
the talk he's like we are to an
International Airport like really yes we
are said great answer one question and
I'll agree where is customs and the
right answer is not Atlanta right so
another thing about me is that I'm full
of tangents I'm full of lots of things
my eyes are brown I will try to make the
tangents somewhat relevant I don't
promise that but I'll try so I'm all
over the place the other thing is I have
a sense of humor please note because I
believe in honesty and warning you so
you have time to leave I did not say a
good sense of humor my current favorite
joke and it's been my current favorite
joke for a while is do you guys know why
Walmart wasn't hacked they're not a
target so the best part about that joke
is I got to introduce the see ISO of
Walmart and I told that joke in his
introduction he wouldn't shake my hand
boy like hey and he went and walked
around me and I'm thinking myself I said
you weren't enough had you got the good
end of that joke right I was at another
conference and the CIO of target was
there
I'm started the CSO of target was there
and the conference would not let me
introduce her like no please not here
you gonna tell your joke of course I'm
gonna tell my joke that the entire time
I what reason I want you to do so they
wouldn't let me do it the other thing I
want to point out and it's because I get
a kick out of it right I'm very proud of
this my wife says it's the nerdiest
thing I've ever done I
a very proud member of the 501st for the
people who don't know the 501st is a
costuming charity group we have 10,000
members worldwide last year I believe we
raised 11 million dollars for charity we
dress up in Star Wars costumes and then
you know I like to say realistic Star
Wars costumes what I mean is screen
accurate because there's nothing
realistic about Star Wars no matter how
much we want it to be but and we go and
raise money for charity for example the
picture in the middle there was a five
hour Braille event where they had 300
blind kids and they brought us in that's
me and my Vader costume they brought us
in and let the kids feel the characters
it was the most amazing thing other than
my kids that I have ever done right I
good thing I have a helmet on cuz I
cryed right it is just amazing so I'm
pretty proud of that I've been a member
for a few years now so let's get started
on this and let's be very blunt I've got
lots of slides not true I have 14 we got
some time and we're gonna talk about a
lot of things the slides are just there
to try to keep me on target okay um but
the reality is security is important and
I know I can say that because I'm a
security consultant so it helps my
business right to say haha we're
Security's important everybody should
pay attention to it but the reality is
it is important we have too many
problems today and I'm not gonna sit
here okay I'm gonna sit here and give
you scary stories right because the
reality is what I do for a living is
scary but what I hope is that you guys
leave here with an idea of how you can
improve it
and I want to be very clear that the
idea on how to improve it does not
require you to hire Kevin this isn't a
sales pitch yes
I'm a consultant yes I'm a greedy
capitalist I joke around and say that my
business goal is to be protested by the
Occupy movement right if you have occupy
elderberry court I'm a success whole
bunch of pub tents in my cul-de-sac
right that would be awesome smelly but
awesome right I would turn a hose on
them I know it that's the type of person
I am I'm just mean right I'm officially
an asshole according to court records
I do expert witness work and I had the
defense attorney call me an asshole
during my deposition it takes quite a
bit to get a defense attorney to call
you an asshole in a recorded deposition
make it better when I went to testify in
court against them right the judge
actually said to me as I got so after I
got sworn in I was walking to the stand
she was wait a minute aren't you the
asshole and I'm like yes ma'am cuz I
didn't know what else to say right yes
your honor and she's like oh okay so it
got entered into court records that I'm
an asshole I don't know if that like
gets me a trophy or anything but we we
think security is important because it's
what we do but we also think security is
important because it is and I'll give
you a good reason it matters to me and I
want to be very clear this is not a
think of the children because that's
 everybody uses that thing right
think of the children we'd be TSA
because of the children right y'all know
it's the TSA stands for right thousand
standing around
I'm glad we're paying for that but when
my oldest Brenna
was nine she was diagnosed with a
seizure disorder and OCD right and
that's kind of fun a seizure disorder
that sucks but she'll outgrow it with no
long lasting effects which is kind of
nice right thank God OCD I have OCD so
we can handle that I can teach her how
to maintain herself with the patterns
and everything else like that and she
has the benefit that her father knows
what it's like while it's different for
her than for me as it is for everybody
with OCD right and I don't mean like oh
I have OCD because everything's
alphabetical my cabinet no you're an
asshole
but she was diagnosed a couple months
after she was diagnosed Wolfson's
Children's Hospital had a breach event
now we don't know whether the breach was
that somebody broke in and stole crap or
that they just lost data right because
they don't give you that information I
will tell you that you can google search
Brenna's social security number right
now
it's on the internet with her medical
records or date of birth her address and
every bit of information about her that
the hospital had which means that at
nine years old my daughter got to have a
conversation with me about what it meant
for the rest of her life that her
identity was public she got to have the
conversation that for the rest of her
life she was gonna have to deal with the
fact that other people were using her
social security number
why because security wasn't paid
attention to because I don't care what
the breach was I really don't I mean I
do curiosity wise right but the reality
is that type of breach happens too often
that type of data in a year of credit
monitoring isn't going to solve that for
her as a matter of fact even though they
paid for a year a credit monitoring she
was nine so she wasn't allowed to sign
up for it right feeling that nice that's
a scam right and that type of problem is
something I see all the time and and
I'll give you another example right I'm
working with a developer we do something
we call ride-along pentesting it's
because I watch too many episodes of
cops when I was a kid and so what we do
is we we come on-site or we'll do it
remotely but on-site seems to work right
we come on-site and we actually work
with the developers the IT people the
admins as we pen test the application we
show them what we're doing and the goal
is not just to find vulnerabilities but
to show them how to test so that they
don't need to hire me next week next
month next year right because my true
business goal is to put myself out of
business if I do my job right you don't
need me so we go on-site and I'm working
with this really nice developer notice I
didn't say really smart developer but a
really nice developer right who cared
who wanted to do the right thing and I
start browsing the website and as I
start to browse website I use a tool
called burp which is an interception
proxy and it allows me to see all of the
communication from my client to the
server server back to my client right
kind of nice and I look at this one
response that comes back down
and there is vbscript in the client this
is a few years ago right
there's vbscript in the client that
initiates a sequel connection to a
Microsoft sequel server from the client
and in the connection string is the
username some of you may recognize it sa
and then a password right not password a
password right it's kind of funny even
those years ago you don't know who the
client is you can't use it and they've
changed the password I don't feel
comfortable telling you what it was but
it was weak right so I say to the user
the developer who's sitting next to me
like oh that's bad and he looks at he
goes why like we'll look at that
password is it yeah that looks like a
strong password it wasn't but we won't
get into why he thought it was right and
he goes that's a strong password oh my
god not really but that's really not the
issue
he said well what's wrong with it like
well you can look at the password he's
like I did look at the passport I don't
know the the answer is what's wrong with
it is you can look at the password I
don't care how strong you make it you
can make it four thousand characters
that are untie pible right like unicode
crap right
passwords with emojis I don't know right
it wouldn't matter because I can
highlight it ctrl-c ctrl-v I mean whoa
that's not even hacking that's viewing
source right that's like lower than whoa
hang fruit that's crap falling off the
tree
rotting and the developer honestly
didn't understand the issue and and to
be honest in talking to the guy he was a
good developer I guess but he never
thought about the idea that the user
could look at the content that came down
to it which is funny to me because how
many of you as developers use tools to
view the HTML that comes down to you
write the JavaScript console all like
you
it is part of your daily job yet in his
head that was secret stuff right that's
the type of stuff we deal with we can
talk about advanced attacks right apt
just to clarify apt is two Chinese it's
now a marketing term okay
there is nothing advanced about sending
an email to somebody and having them
click a link nothing so if some company
says we had a breach it was an advanced
attack really how'd it happen
Joe got an email and he clicked the link
not advanced trivial right we want to
think about this because the reality is
as we move more and more forward
security is becoming something people
are actually thinking about when I say
people are thinking about it I mean your
users I have a customer right a company
right now that we are about to stop
using why because we've been using their
service and their service is insecure
now we haven't been tested it because we
don't have permission but we can tell by
using it that they haven't thought
through security right and we've reached
out to them to say hey this is important
and I will recognize and acknowledge the
fact that I am a different type of
customer right I'm probably not the type
of customer you want if you don't pay
attention to security because I do and
we're about to fire them now here's the
problem when I fire a company right it's
sharp spring I now start to use them in
my examples of my talks and I tell them
that hey I told you about these security
issues I told you about the issues you
have they're a marketing CRM so they
have sensitive data they've data about
you if any of you came into my website
before this talk with the idea that way
we go look at his bio and crap like that
John understand my bio is weird right
your data is there because they
monitored that traffic and they
integrate with Google Analytics and all
this kind of stuff and they know people
they send us reports
it's crazy like hey Joe from go to
conference just came to your website and
spent 14 minutes looking at these pages
and here's his phone number his email
address and the company he works for if
I thought privacy existed it would scare
the crud out of me right but they don't
have security
so I'm firing them and making them an
example right that's what happens when
you work with secure ideas right and we
tell people that up front when
salespeople come and talk to us we say
hey we'll try any product out but just
understand we're gonna tell people what
we think of it and I always love sales
because they're so confident oh that's
awesome we'd love you to tell people
about us no you probably wouldn't
Microsoft found that out I always makes
comment if a pen tester like something
get it the hell off your network and
then I also make the comment I love
SharePoint right yeah it's awesome for
pen testers I made their comment at a
conference once a few years ago and
somebody tweeted it out and Microsoft
started retweeting it
they had a bot that every time somebody
said something like I love my SharePoint
they would retweet it so they retweeted
when a pen tester says they like
something get it off your network I love
SharePoint I think that last count they
would read it like 200 times it was
awesome but the reality is we have to
think about security right eight wrong
button we have just think about what the
attacks are right and this is the main
thing I want to talk about today as we
talk about this idea of testing and I
want to be very clear I was a developer
for years I don't consider myself a
developer anymore because I'm the boss
so we were actually having a
conversation this morning we're about to
write start writing a new piece of
software a tool that we're gonna release
and I'm excited because I'm gonna get to
write some of the code and I was talking
to Jason Gilliam one of our one of my
guys it's like basically my right-hand
man
I shouldn't say left-hand man because
I'm left-handed but most people don't
know that so doesn't make as much sense
oh but I said Romeo it makes no sense
for me to write this code because I'm
busy but damn it I'm gonna cuz I miss
doing it so I'm excited but when we talk
about testing right how many of you I
asked how many of you are developers
here I'm assuming the module
if not all of you right how many of you
believe that you have enough time in
your schedule to do everything you've
been asked to do by your company and add
in-depth comprehensive security testing
to what you do how many people believe
that yeah I didn't think so
how many of you people believe that you
have enough resources to do everything
you need to do yeah I didn't think so
right you do wait wait I gotta call you
on that one you work for yourself and
feel that you have enough resources to
do things okay I as the owner of secure
ideas I've never felt that I had enough
time to do everything I need to do but
cool more power to you man oh okay yeah
time Andrey I call time a resource who
doesn't
I mean you sleep right yeah it's like I
know what sleep is I've watched on TV
but uh so I know this my recommendation
is to forget everything we talked about
about buying products like very code and
fortify and whatever AppScan or
what-have-you and running against traps
we can if you want to what I'd rather
you do is stop thinking about security
as security in and of itself I want you
to recognize the fact that security is
functionality you know we talked about
how many people here have seen the
little bobby tables conic security
people seem to pass that around like
it's perfect
okay fine whatever it's funny I giggled
hell I giggle every time I see it
if I put a single quote in a login field
on your application and I get a database
error message isn't that broken
functionality right now don't get me
wrong it's a security issue right as a
pen tester I giggle a little I giggle a
lot in my job right it's unnerving if
I'm doing a ride-along
here's a hint if I ever come out to your
company and do a ride-along with you if
I say huh that's interesting panic I
found out years ago that's my key I
don't know why I don't even think about
it I just that's interesting uh Matt
Carpenter a good friend of mine we work
together he always said that when I said
that he stopped doing everything else
just to see what crap I pulled out of my
hat and it was weird but what I want you
to do is think about these things but as
part of your daily job just does
something right we need to know what our
threats are but biggest question I'll
ask what are you actually worried about
as a security concern what keeps you up
at night right because we need to talk
about random things but I want you to
actually understand what the sensitivity
of your application is right and I'll
use an example coke how many people here
believe that one of the things coke is
worried about losing is their secret
recipe do okay I'll go with that
lots of people do hell if you go tour
the museum in Atlanta they show you the
vault that's where we store the recipe
do you know that the recipe isn't even
on their list of top 100 things to worry
about do you know why because it's been
stolen so many times by the way there's
science it's been reverse-engineered if
you don't believe that Pepsi knows how
to make coke then you're an idiot right
but Pepsi is not gonna make Coke Pepsi
isn't gonna start a a advertising
campaign that says hey guys we know for
the last 150 years we've been telling
you Pepsi's ready better we lied but
don't worry about it we got this one we
got Pepsi coke now right that's not
gonna happen as a matter of fact if the
recipe is stolen right do you know what
happens they call Coke it's happened
multiple times like this administrative
assistant stole the recipe once somehow
she got access to it she took it she was
mad she was a disgruntled employee I
know that all of you are gruntled
employees
she was disgruntled right so she
on Pepsi like is that an option on the
IVR system press 5 if you have the
recipe for Coke right so somehow she got
to somebody and she said to them hey I
got the recipe I'm willing to sell it to
you 150,000 dollars or whatever right
she asked her a lot of money I'll sell
it to you do you want Pepsi did they
called coke and they're like hey Susan
just called us they said she said she
has the recipe do you want us to handle
it are you gonna handle it oh no I don't
worry about it we got it
right and they went to rest in her they
don't care they really don't do you know
what Coke is actually worried about
according to coke do those freestyle
machines you're the I go in I push some
buttons and I get lime coke the best
thing in the world
hi I'm coke I'm addicted doesn't it hey
I'm a fat guy don't don't judge okay
judge they're worried about those
because every single time you make a
selection on the freestyle machine it
sends a packet of data up to an API out
in the cloud for Coke to keep track up
so that they know what flavors are
popular in what areas and you think why
are they worried about that I'll tell
you five guys do you guys have five guys
up here okay so the most expensive
burger you can get at a fast-food
restaurant
five guys have free style machines
they're a public company right if I
could capture that data I know that on
average for every two phillips of a cup
one meal was sold right if you got into
five guys you've done it right you walk
up you buy your meal they hand you their
cup they go sit over there we'll call
your number you go you fill up your cup
you drink it
it's a lime coke so you sort that thing
down fast you finish your meal and you
go fill it up with the lime coke
goodness one more time to take it with
you because for some reason coke is
stupid and it doesn't sell it in bottles
where I could buy it right so my
source is the freestyle machine so I now
know two Philips one meal I also know
that the average cost of a meal at Five
Guys is 87 dollars and 36 cents I might
be exaggerating so if I can capture that
data if I get access to that API and can
pull the data if I get access to that
traffic and can deal with it I know the
sales of five guys I can short or push
or long or whatever the heck the
investment terms are right
don't take investment advice from me not
only that but according to coke their
contracts with those companies coke
takes entire liability for any capture
of that data that's how they got the
machines in place they were willing to
accept liability for that that's why
that API which I'll be born if I have
been the developer that API all it
accepts is lime coke in a location
that's it
who the heck would think that was
sensitive right who would think that's
something I got to worry about that's
what I mean about understanding risk
understanding your threats you have to
understand what's going on because as we
move forward
everything is accelerating I love it
right agile development we push more
apps today then we push last week then
we push last year I was just in a panel
last week and somebody quoted a stat
that I had not heard and I went and
research it and supposedly it's true 92%
of the data that exists today was
generated in the last five years 92% of
the data generated that exists was
generated in last five years that is
asinine
that's mind-boggling right that data is
sensitive that data has to be protected
and we are pushing more and more
applications to handle that data and as
we look at Agilent which i think is
funny don't get me wrong right and I say
this with love but
the stereotypical image of a developer
is a fat lazy neckbeard right and we
called it agile let's be clear agile
does not describe this body at all so I
think it's sarcasm but we see things
like Netflix right who proudly announces
that they deploy code 47,000 times an
hour to production I'm exaggerating
slightly right and I know that they use
this as like a mark look how good we are
we can deploy and deploy and deploy and
I read that as our code sucks so bad we
have to deploy this many times a day
which I know is not what they mean right
but when we look at that how are we
supposed to test that how are we
supposed to handle looking at all those
applications right the only way to do it
is for you guys to pay attention and in
my mind we need to combine red and blue
hence the term purple teaming hence
royal testing I can't do it all you
can't afford to have me do it all don't
get me wrong plus you don't get me wrong
do you have unlimited budget call Andrew
he'll set up an Esso W but if you have
unlimited budget how are you doing here
there are Bahama Islands you could buy
it just hang out at you can fly us all
there for this conference on your dime
if you hadn't a little bit of budget
right I think of these things but you
can't have me test your apps so you have
to do it right you have to understand
and one of the ways I say to do this is
first know what you need to look for
understand the flaws how many people
here know about the OWASP top 10 good it
bothers me a little bit that not
everybody in the room raised their hand
I don't mean that meanly Oh wasp is the
open web application security project it
is a free resource by the way if you
deal with PCI in any way if your app is
anyway related to a pci network you are
required to know what the Olaf stop ten
is period if you don't know what the OS
top-10 is your company can lose the
ability to accept credit cards that
would suck for you but I know you don't
accept credit cards or your app doesn't
write you ever heard of the Federal
Trade Commission have you looked at the
Federal Trade Commission versus Wyndham
Worldwide the hotel chain Wyndham was
hacked three times they'll acknowledge
sorry did I say that out loud the
Federal Trade Commission went after them
and said you suck you did bad and you
affected American citizens and we're
responsible for protecting the consumer
so they sued Windham by the way they won
and I'm not gonna argue the legitimacy
of the case or anything else like that
but I will tell you that what came out
of that case was the Federal Trade
Commission says we are going to hold
every company that deals with American
consumers to a standard and Windham came
back and said whoa hippie you haven't
given us a standard and the Federal
Trade Commission said something that I
thought was smart and let's be clear I
just said government and smart in the
same sentence and I wasn't being
sarcastic they said we aren't agile
enough to generate that standard you're
right we didn't generate one we're gonna
hold you to industry standards and the
industry standard they picked was PCI
they said that they are going to hold or
organizations up against PCI so if
you're breached and the Federal Trade
Commission starts to look at it they're
gonna ask you how you how you match PCI
requirements and one of them is knowing
no hospital right one of them is
understanding the attacks because if you
don't understand the attacks how can you
possibly understand how to fix them if I
say to you putting the single quote in a
field right everybody in this room is
gonna go yeah yeah I know what that does
you're immediately gonna think sequel
injection I know that I'm not even
ask you to raise hands why because if
you didn't raise your hands you'd feel
bad we've known about sequel injection
for 20-plus years that's not an
exaggeration 20-plus years ago we found
out about sequel injection 20 plus years
ago we found the solution to sequel
injection don't have a sequel databases
no no that's not it Oh parameterize
queries permits queries are easy they're
trivial the trivial to implement every
major language supports them they
require no significant resources beyond
dynamic queries as a matter of fact in
some cases they require less resources
then parameter dynamics sequel and
they're easy to implement yet last week
I found sequel injection in an app that
was built this damn year if you're a
developer writing sequel injection I
want to be clear I was a developer
writing sequel injection so I'm talking
about me to you fail and I'm not
standing up here saying oh you idiot
developer but in that case how many
hard-pressed not to call you an idiot
developer because we've known about it
for twenty years and I don't buy the
whole but it's so hard I'm busy yeah you
are but like I said parameters queries
are easier to build than dynamic sequel
I just made your job better your job
easier to do do it understand the
attacks understand what I do understand
the professionally evil mindset that I
have when I look at your app that's all
I'm asking you to do I'm not asking you
to do hardcore pen testing I'm asking
you to think about what an attack could
do understand them and then on top of
that understand context understand where
the attack runs we already said PCI was
a good thing right I want to be very
clear PCI is a very low bar right it's
like you must be this tall to ride the
Internet
that's what PCI is right for the longest
time PCI DSS did not consider a
cross-site scripting a serious issue
which i think is hilarious no no no you
can run arbitrary code in the browser
that can't be bad no I actually said I I
taught a class and I made a joke about
that like how stupid the PCI guys were
for not thinking cross-site scripting
and I had a dude about where he's
sitting yell at me cuz he happened to be
on the board who made that decision and
his answer was no no cross-site
scripting it's not that big a deal it's
a client-side issue it's not a
server-side issue like really do you
want a store if I stand right outside
your storefront and every single person
that comes in I kicked them Wow
as hard as I can in the shin right and
I'm wearing a shirt that's got your name
on it are you gonna come out and say to
me what the hell are you doing stop
kicking my customers do you think it
would be a valid answer for me to say
dude client-side issue not your problem
right that's cross-site scripting you
are kicking your users in the shin every
single time you're vulnerable to it we
need to think about context we need to
think about where this stuff runs where
does the application run right Oh an
example that how many people here have
ever written a calendar app right yeah I
think that like every developer writes a
calendar app at some point in their life
and then they realized it's a really
dumb thing to write and they go on to
something else
it's like crypto don't write your own
crypto you're not that smart unless your
initials or one of the RSA initials go
away right I'm not that smart either
just to be clear my initials are K and J
not in those three but people write
calendar apps and I have people saying
all the time we have a public calendar
and I yeah I found sequel injection in
that calendar app oh it's not a big deal
none of this data in that calendar app
is sensitive so it's okay that the user
could write execute arbitrary queries
against the database you said that with
a straight face
you didn't even giggle when you said it
I think you mean it when we talk about
context right if I said to you I found
cross-site sorry switch the
vulnerability
I found sequel
in your calendar app compared to I found
sequel injection in your calendar app
and I can access any data on the
database and that database also coexist
with your PeopleSoft database context
the first one I know is bad business
might not second one people are
panicking right you have to understand
that context you have to understand
where things are so that you can test
because the reality is the way that you
test is you look 99% and I'm not making
up that number I probably am of testing
is just having awareness of the problems
that exist so as you build the system as
you build your unit tests as you do that
you can solve the problem something I'll
throw out here every single one of you
should go out to fuzz DB tonight fuzz DB
is an open-source project that has
attack payloads that's it and my
recommendation is go out there and take
some of those attack payloads and put
them in your unit tests right you have
automated unit tests right of course you
do let's say you have a login field this
is just a simple example I'm assuming
that you test for valid user name valid
password valid user name invalid
password invalid user name and whatever
password right those are usually the
three common unit tests
now put a payload for cross-site
scripting a payload for command
injection a payload for xse a payload
for LDAP right pick five or ten payloads
that make sense
context in a login field right add them
to your unit test it takes nothing to
write that it's just a payload and all
you have to do is look for an odd
response that's it
I don't even care if you understand what
xxe is I don't care if you understand
what LDAP injection is yet I will but to
begin with if all you do is add to your
unit tests a set of payloads
that run and if those payloads fail or
for those payloads have a problem call
your security person whether that's
somebody on the development team that
knows security or whether it's an actual
security team I don't care but do that
and you'll start understanding I thought
I had one more panel I always close I've
never fallen off a stage today might be
the first time we'll see right but
that'll get you started that's the red
what about blue
let me ask question pretty much
everybody in the room raised their hand
as developers right how many of you when
you think about your app do you think
about defending it and I don't mean
writing code so it prevents attacks
I mean responding to an incident good
got a couple hands that's awesome
when you write your app cuz I'll tell
you as a person who has done I are way
too much IR there's some images you
can't unsee so I don't do it anymore but
when you have an app I can't tell you
the number of times I go in here's an
example how many people here log failed
login attempts to your app right yeah
how many of you logs successful logins I
want to point out with your hands let me
ask you a question I'll give you an
example which is worse a million failed
login attempts against an administrative
account or a million failed login
attempts against an administrative
account and one successful one which is
worse second one of course all of you
that didn't raise your hand about
logging successful logins you'd never
know
you'd know that you had a million failed
logins I'm gonna say yeah but did they
give in and you'd be like I don't
know that's not a good answer when your
boss is like oh we got hacked because in
most states that have breached
notification laws they have a clause in
there that says
you can't prove you weren't breached
assumed you were do you want to do
notification of all your users because
you didn't log whether the login was
successful or not that would suck
because it's made even worse right
because not only you got to tell all
your users hey we were screwed we need
to get dinner first
but you're gonna have to tell them you
don't know what they did we may have
been screwed
that sucks right that's what we say
think about blue think about how you do
it how many of you actually review your
logs how many work eight companies were
somebody reviews your logs now I'll
point at you just because you're close
enough for okay so sorry you say
somebody reviews your logs for your apps
right awesome glad to hear it did that
person ever come and talk to you about
what the app does at the beginning as
you do updates and everything do they
talk to you no of course not right
they're busy we see this all the time
and I'm actually happy to hear that
they've talked to you in the beginning
most times the security people don't
ever talk to the developers they start
monitoring applications and they have no
idea what that app does they've never
talked to the developer I was an admin I
was ran the WebSphere servers for a
BlueCross and uh when I was there we had
an app that died one night and I got the
page yes page I'm old right and I called
in diode I called in IVP ending I'm
sorry okay I dialed in I through the
noise of a modem but I told you I'm old
and I got the logs and I'll admit I was
one of those guys that I deployed
something had no idea what the app did
had no idea what the logs meant and I
got analog message that said error code
42 and it really was I thought not a
Hitchhiker's reference it really was
error code 42
it's like called the developers and like
hey I got an error code 42 in production
in blah blah blah this symptoms
this was going on the developed look
okay do this this this this and it'll
restart the problem will go away we'll
talk about in the morning look great no
problem I did it it's back up right you
a whoo we're good to go I can go back to
sleep
right which is an on-call person is
Michael going back to sleep right that
was awesome
so I put notes in right like if this
happens you get an area code 42 do this
there's this it'll fix it don't bother
the developers just fix it jump ahead a
week literally a week I get like three
o'clock in the morning we go yeah i dial
in i go through the logs error code 42
like I got this one I know this one do
you do he didn't fix anything so I
tried it again because that always works
right if you just like banging the side
of the TV has banging the side of a
modern TV ever helped but we still do it
how many of you blow into your ps4 but
uh so I blew it to my retropie last
night okay I didn't really but it's fun
to say the retro pie is awesome total
tangent it didn't fix it so I called the
developer I got the same exact guy on
the phone I'm like hey dude I say dude
way too often for somebody who doesn't
serve like dude I tried the steps you
know in 42 and then he's like oh you got
an error code 42 I'm like yeah he goes
do this this and that so I did it fixed
it I said did you change the app he's
like no no that's a different error like
they both say error code 42 he goes yeah
yeah but that one has a capital e on the
error so the error code
I like I what the hell right like you
have the exact same error code but
considering the capitalization of the
first letter are you on drugs and now
because he had never thought about it
but in his mind he knew right like it
but he had never considered how the
logging would work when we were dealing
with
incident and in that case that incident
that's an event right it's not a
security thing we were just having an
availability problem which is a security
thing right but he'd never thought about
it do you know how your logs relate to
the firewall logs one of the fun things
to do seriously do this next week when
you get back to your office call the
security team right or the network team
and say hey hi I got something going on
my logs I want to track back can we get
the source IP and all of the relevant
logs from the network infrastructure and
the server infrastructure related to
this log stamp in my like this time
stamp in my logs and see them scramble
see if they can do it can you trace from
the internet all the way in and all the
way back out a transaction across the
board and I will tell you that a hundred
percent of the customers I've worked
with can't when I start working with
them and that's a problem right because
when we talk about application
infrastructure and we talk about network
infrastructure we talk about that kind
of stuff we don't think about what all
that means right which is bringing us to
purple and this is something and I know
we've not gotten into technical hard
core details of do this testing and this
testing of this testing we can't because
this testing of this testing in this
testing is different for you than it is
for you which is different for you right
what I want I throw out the fuzz DB I do
think that works for everybody but
beyond fuzz DB it depends on the app it
depends on how you deploy it so here's
something I recommend how many of you
have pen tests or security assessments
done of your apps and I don't mean that
you have a third party do it necessarily
right if you do that's great right if
you don't that's fine too but you have
somebody do testing of your network of
your apps I meant I'm sorry right work
with them there is there is a few things
I like better than when I come in to do
a pen test then I have a developer say
to me hey do you mind
I talked to you about this seriously and
that's not just me most security people
want to talk to people responsible for
building the systems right think about
it
work with them I mentioned the
ride-alongs and I want to be clear I
call them ride-alongs many security
consulting firms do them most security
teams will let you do them if you have
an internal security team right they may
not call it a ride-along though okay but
work with me let me show you talk to me
if you say to me hey we just deployed a
new version of the app and this is
something we changed here and I'm a
little worried about how it's working
could you focus I'm on it I will I'll
talk to you about it right and while I'm
doing my pen test ask me what I'm doing
and see if you could detect it actually
work it like an incident now don't get
the point we call the FBI could people
kick into my front door is never fun
I've only ever been shot at twice which
is not fun if you've never been shot at
I don't recommend it hey well you know
according to the news I can walk outside
but it's funny I wasn't shot at last
night or today I'm disappointed in you
Chicago so long everyone I realized this
thing's come out of my mouth that I
probably shouldn't have said that but oh
well and uh but mimic an incident go
pull the people in to say hey we have a
pen tester and if I come to you and I
say look I found this I found this flaw
great go to your admin did you detect
that go to your security people did you
detect that can we see what's going on
right and work it like an instant so you
know that your application not only is
robustly protected against my attack but
if somebody performs the attack you can
detect it and respond to it before it's
a problem because I'll give you an
example of this working you guys know
Zappos the shoe company bought by Amazon
you know they were breached right you
first time they were breached a
developer in an admin stopped the egress
of data one of the Oracle admins who was
also one of their developers saw a query
coming from an odd source on their
network requesting data that it didn't
normally wasn't requested and they
killed the transaction before it
finished running as a security person
that is beautiful it really is because
what it told me was that that developer
that admin knew enough about their
system to know what was normal and what
wasn't how many of you know what's
normal in your app Stoppard you raise
your hand on everything good by the way
he's the next speaker so he should but
if you don't know what's normal how do
you know it's abnormal right how do you
know the attacks I'm doing not only did
it tell me that but it also told me that
Zappos has a culture where the
developers and admins and I hate the
word empowered I really do because it's
such a weird I feel like people should
wear capes when they're empowered but I
watched Incredibles I know no capes but
they knew that if they killed that
transaction in the middle of the day in
production and it turned out to be an
important transaction they weren't going
to lose their job because they were
doing it for a good reason that the
company recognized the need for that
level of monitoring recognize the need
for that level of response that's
awesome I don't know another word for it
it's awesome that's where we should all
get to so I'm gonna wrap up now cuz it's
the end of my time what I'm gonna say
please couple things like I said my job
is to put myself out of business we do
lots of training we do developer
training we do all this kind of stuff
and the reason I mentioned this is I
don't want to do this as an ad but I
don't know any other way to talk about
it if you know anybody who is a veteran
active duty military or first responder
or for training is free for them all
they have to do is reach out to me or
the company and say I'd like access to
your free training I'm a vet or I'm a
first responder or whatever and we will
give them the coupon code to use to get
access to our recorded training for free
so if you are or you know anyone who is
please let them know it's very important
to me that we do that right I also want
to say that I'm gonna finish up right
now and then I'm gonna leave I got to
get back right I got work to do my boss
is a jerk but I want to be available for
questions and I mean that truly if as
you're working through something as
you're testing is you're thinking about
security please feel free to reach out
to me email me call me
twittering me I don't know right
whatever it takes get in touch with me
if you need me to sign a nondisclosure
agreement so you can show me your
problem I'll do that right and that's a
free offer that's not a hey call and ask
me questions you're gonna get an invoice
now if you call and ask me and say hey
could you test this then we got to talk
about an s or W and all that kind of
stuff right but if all you want to know
is hey what's this mean or hey I'm
looking into that OWASP thing you told
me about and I don't understand this
attack done let's talk about it right if
you're starting to implement testing in
your system of security call me and talk
to me I'll give you some recommendations
one recommendation don't buy checkmarks
checkmarks is the worst software you
could possibly buy it's got horrible
support and the company needs to be
destroyed them in silence just my
opinion and I've told both companies I'm
doing that in all my talks they're not
happy about it yeah sue me but if you
have any questions please reach out to
me okay I think that's it right thank
you very much everybody enjoy the rest
of the show</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>