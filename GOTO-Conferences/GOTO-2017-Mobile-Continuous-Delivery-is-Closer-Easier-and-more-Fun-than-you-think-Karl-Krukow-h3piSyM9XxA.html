<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2017 • Mobile Continuous Delivery is Closer, Easier and more Fun than you think • Karl Krukow | Coder Coacher - Coaching Coders</title><meta content="GOTO 2017 • Mobile Continuous Delivery is Closer, Easier and more Fun than you think • Karl Krukow - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2017 • Mobile Continuous Delivery is Closer, Easier and more Fun than you think • Karl Krukow</b></h2><h5 class="post__date">2017-12-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/h3piSyM9XxA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thanks for coming to the session I
really appreciate it and I hope to show
you some interesting things today I
would like to ask a question first so
could we do show of hands how many in
here have a nap in an app store mobile
app in an app store that's most people
that's great okay now think about one of
these apps and then think about how
frequently do you release updates to the
app so if it's you know once or twice
per year could you raise your hand yeah
it's like a few people maybe quarterly
three four or five times per year yep
another four or five people what about
every two months approximately a couple
of people there every month one two ish
1/2 what about twice per month this one
here every week multiple times per week
every day multiple times per day anyway
no that's crazy right
or is it that's the question
so hopefully in this talk I want to
convince you that maybe it's not as
crazy as it seems ok and to do that I'm
gonna use a sample app I'll use it
throughout the presentation I'll just
give you a quick intro to the app so
it's called my driving it was released
at the Microsoft build conference last
year 2016 and it's open source you can
go get this downloaded on github after
the talk if you want to see some of the
code and it's unlike an azure IOT mobile
thingy I'm not only going to talk about
the mobile piece - your piece is kind of
interesting in its own right it's using
things like machine learning and
processing but it's not really the topic
of this talk and so the idea is you buy
this device this IOT device that you can
plug into your car it will plug into
you know most modern cars and that
device is going to collect telemetry
while you're driving so how fast you're
going
how much fuel in consuming what's the
engine load that kind of thing and then
that is being transmitted by Bluetooth
or Wi-Fi so you're a mobile app and this
is the my driving up and that combines
this with GPS position so you're a six
essentially as you're driving around the
app is tracing kind of card symmetry and
where you are and then ships that up to
to a ship for processing and then
ultimately you kind of you gather this
data and you get some kind of score
that's comparing you to how how you
drive compared to others so let me just
show you this kind of real quick so
let's get out of this mode here and you
have the nice screen there and I'm gonna
shift this over here so this is my phone
oops so it's kind of live updating here
so here's my driving it's launching I'm
gonna just skip the authentication you
can log in with various tools I'm gonna
run this just in demo mode because I
don't have an actual car here I can't
really show you so here you're getting
now a map of where you are and you see
we're here in Copenhagen and the idea is
now I'm gonna go for a ride in this in
this car and I want to track it so I hit
this red record button and it's gonna
search for one of these IOT devices now
it's not gonna find one because I'm not
actually in the car and I don't have
this device but I can run it in simulate
a mood to kind of pretend I'm driving
around so let's pretend I'm driving
around and I don't know maybe I have to
get to the airport and then after a
while I'm finished driving and I had
stopped I could just save my trip name
here drive in try thing and I get some
basic metrics about the duration and the
speed now it's simulated so it's not
particularly interesting then I can see
my past trips so here again it's fake
data
but there was one of the guy called
James Monson Mack know who's been
driving around Seattle so if you have a
past trip it will kind of show this map
and if you use the slider at the bottom
you can see you know as I was driving
around Seattle what James was
you know how fast is it going at this
given time we can we could see if we
could find him speeding somewhere what's
the speed limit in in Seattle do you
know kita 50 okay so he's doing he's
doing fine so and then the last bit is
kind of a profile this is where you get
your score now apparently I'm Scott
Guthrie which is not too bad
and then I can switch settings like
instead of having this Imperial thing I
can go into the metric system that's
basically the app okay so I'll return to
this later but if you guys bear with me
for a second because I recently switch
from being an engineer to being a
manager and I I just really don't get to
code all that often so if you don't mind
let me just I try to find opportunities
where I can curl somethings let me just
do that just for a few seconds because I
don't I don't get to do it very often so
that the app is written using salmon
technology that's not really relevant to
this talk but that's why you're seeing
see shop code here and since it's so
long ago since I've been coding I think
my skills are going to be limited to
changing the color of the bar so if you
remember you had this bar just a second
this top bar here where it says current
trip that's blue
I I would prefer to have it in black
instead so I'll just do that I'm gonna
change this color here and then I'm
gonna bump the version of the app here
because that's gonna make a new release
okay whoops
I was rebooting my machine prior to this
so I forgot to boot my terminal let me
do that real quick
did I not launch there we go
so what I want to do with this limited
coding session I want to check my change
here yep that looks pretty good smile
say change to black okay I'm happy about
that I'm gonna push that up
it's my git repo oh crap alright great
okay so I got my coding session for
today I guess that's what happens when
you make the switch alright so that's
the demo I'm gonna use it throughout the
talk for different purposes
but now at least you know the
application so the message of this talk
is I just want to get you guys to
release more often ship more changes to
yet so if you had your hands up before
when I said yearly my goal is for you to
go to a quarterly release cadence or if
you were quarterly to get to a monthly
release cadence or even down to
bi-weekly or weekly or even further if
you want to and why what I want you guys
to do that so there is a bunch of
benefits to this notion which might call
continuous delivery or continuous
deployment and the first and most kind
of obvious thing is reduced lead time so
what's the lead time it's the time when
someone gets an idea until that's coded
and actually in the hands of users
providing value to that users now
obviously if you ship on a yearly
cadence and at the beginning of the year
you built this nice feature or you fix
this buck but you wait until shipping
that and you batch it up with a bunch of
other changes that you didn't ship at
the end of the year well then the lead
time is a year whereas if you're
shipping weekly your lead times weekly
essentially as soon as you deliver your
shipping the thing so this means you're
you're getting value you're getting bug
fixes to your users faster and the users
perceive you as being more nimble and
reactive to feedback so that's one
obvious benefit that in turn enables you
to get faster feedback right so if you
have an idea for a feature a change
you wanna make to the application and
you code it up in two or three weeks and
you immediately get it out and then you
realize once you get it out and you get
feedback from users that wait a minute
this wasn't really a very good idea it
wasn't the right thing to build well
then you can go change that immediately
rather than learning that after a year
and then realizing oh crap this thing we
built and then we also built ten other
features on top wasn't actually what the
users want so that's definitely a
competitive advantage if you're learning
faster than your competitors you're also
going to get higher quality and the
reason for that is if you're starting
let's say you're starting with an
application that works and you're making
one small change adding one feature
fixing one bug well then reasoning about
the Delta from that working app so that
working out plus the bug fix it's a lot
easier than if you're reasoning about a
year or a month or two months worth of
changes and it's a lot easier to test so
it ultimately leads to finding bugs
faster and then there's this which I
really like it's a completely made-up
graph it's not based of any scientific
findings but it's true the point of the
graph is true and I know that because
I've tried this myself so this is
depicting the emotional state of the
engineering team as it's going through
one of these yearly release Cadence's so
you're at the beginning of the year you
define a project you're going to ship at
you know December 22 let's say 2017 and
at the beginning is like okay we start
development we have this target ship
date and you start the verbing and
you're probably a bit behind schedule
that's okay we'll catch up later right
and then as you get closer to this
target ship date you know urgency begins
to kick in and as you cross over you
expect that shipping date and you don't
ship then urgency really kicks in and
now your managers are pushing you and
hey we agreed you're going to ship this
thing on December 22 and now it's what
January 15 and you haven't shipped so
you start making shortcuts you start
feeling really bad you start rushing
things and then maybe a month later you
actually go and ship and you feel really
bad because everyone's upset that you
didn't ship on time and then actually
this graph was computed generic
for mobile apps there's an additional
low here so when you finish coding you
have to then publish the app and the if
it's on iOS in the iOS App Store so
there's actually an additional low here
which I call the abyss of Apple which is
when you you deliver this app and then
you just wait for them to go through
this manual review process and then some
point they say okay it's good enough and
then relief kicks in at least we got it
in the App Store but we're not really
relieved yet because what are the users
saying what are the feedback is they're
actually working but hopefully I go as
well and you actually start feeling
pretty good and then I guess a month
later so are you you peek until you
realize oh crap we have to do this whole
cycle again for another year of
development so yeah it's completely made
up but I've tried this and it actually
that's exactly what it feels like I
remember shipping my first iOS app and
most of the time you're like still
feeling bad and then you have this peak
and then BOOM go down again so I like to
say that releasing should be like
breathing so it's something you do all
the time you don't even think about it
it's only once you stop actually
breathing you feel the pain right and so
if it's just flowing all the time so
think about the release process like
that
I'm sure that's nothing at all like what
you guys have today all right so you
might now say well that's great but is
there anyone actually doing that and I I
went out and I researched and I picked
some well-known apps I think it's some
of them may be the world's best apps
built by some of the world's best
engineering teams things like Google
Maps LinkedIn Facebook Twitter that kind
of thing and these obviously obviously
have you know high ratings a large
amount of ratings hundreds of thousands
even millions of ratings and then I
looked throughout the last couple of
years what is the release cadence of
these apps how frequently do they
publish updates and this is what it
looks like
it's either bi-weekly or weekly updates
so it's not like this thing can't be
done but again you might argue well
we're not Google or Microsoft or
whatever
so we can't do it but I hope to convince
you actually you can so I guess by now
what I'm saying is not you know super
controversial you know all these
benefits I guess we've known that if we
talk about continuous delivery for some
time but yet again I you know almost no
one had their hand up at weekly or
bi-weekly releases so what's stopping us
why are we not doing this and I think
there's a bunch of different reasons I
want to look at some of them and then
maybe show you that some of the reasons
why you're not doing this or not
actually ballot they're no longer true
and in fact you can go and do this
okay so recent number one the Big Apple
so we already talked about this the the
App Store review process so at least on
iOS to publish an app and get it all the
way out you have to submit it for a
manual review process right and it's
like this black box that's right there
in your delivery pipeline and it's you
don't know how long it's going to take
to get through and in fact you don't
even know if you're gonna get through or
not so how could you possibly do some
kind of continuous delivery process when
this thing is right there in the middle
well take a look at this graph so on the
x-axis you have time so it goes back to
July 2015 and on the y axis you have the
average review cycle time so how long
from your published nap and so that's
actually gone through review does it
take and yes it's true if you go back to
July 2015 you had one to two weeks
review cycle time but it's also a very
clear trend down right this graph so if
you chart the this red line at the
bottom that's going back a year July
last year that's actually hitting about
one day this means you can work all week
and then on Friday publish your app to
the review and then on Saturdays out
there and this data I don't I haven't
traced it back for another year but I've
heard people talk about what they call
the two-hour review cycle so that from
you publish until it's out there it's
two hours which means you could do a
daily releases on iOS so if you thought
this thing was stopping you that that's
no longer the case
there's actually by the way a different
benefit of the small Delta continuous
delivery model here which is if you have
a year's worth of development and you
publish that for review well then the
probability of one thing in that change
set it's violating some apple guideline
is higher than if you have like a small
feature small bug fix so that means the
probability of getting acceptance is
almost 100% if you're delivering every
single week so it's not really it's just
there it delays you a few hours but
that's about it it's not preventing you
okay so this is not the case
oh yeah that's this thing here does
anyone know what that is this weird peak
so it's I don't know I mean I'm guessing
but it's right after end of December so
I'm guessing it's like a Christmas New
Year's Eve holiday at the Apple reviewer
people and then when they come back
after Christmas they have built out this
huge queue of apps they need to review
so just be mindful that if you're going
to do this just around Christmas time
you may want to not expect to be able to
deliver every two hours kind of
interesting all right so that's one
thing
next problem so if you're going to ship
a quality update and you're going to do
it every week or even every day you want
to make sure you're not spending all of
your time building testing and
publishing your app right so that's
going to require some sort of on
automation some kind of CI set up where
CI servers checking out to change
building the application running some
tests because if you spend all day
actually putting the thing in the App
Store well then you don't have any time
for development now the problem is with
mobile you need essentially max to run
your CI servers at least if you're
building for iOS and in most companies
the existing CI infrastructure is not
typically based on max that I've never
seen that before so what ends up
happening is that engineering teams
themselves need to provision those Mac
minis or whatever you know configure
Jenkins set everything up and then each
team is running their own little CI
thing and spending time maintaining that
and just for fun I looked up an article
online we
is how do I set up Jenkins to build a
samara nap I'm sure it's the same if you
use Xcode and then Swift or Android
studio and and Gradle and so on but
setting up that thing and this is part
one of the article and so what you do is
you look at the prerequisites and then
you watch this video and then you
install Jenkins and then you configure
plugins and then you put in the platform
SDK is like Xcode and Android you need
to put in your signing assets you need
to see a set of CI pipeline you need
certificate signing and this is just
part one of the article right it's not
something we want our engineers or we as
engineers want to spend our time doing
we want to build value for our users not
configure CI servers alright so what if
we could get this SA service someone did
the work like this is all cloud these
days we're all talking about cloud this
morning's keynote about cloud why isn't
this just a service that I can get ok
next problem quality so quality is
really hard with mobile apps because you
have all these devices right there are
thousands of different devices out there
they're running different hardware
different CPUs they have their memory
they have their own hardware
capabilities they have different screen
sizes resolutions thrown in different
platforms running different OS versions
now if you want to be confident that
your app actually works for your users
which have a selection of those devices
you need to test on some appropriate
representative subset of those devices
now what some companies end up doing is
this so they essentially write big word
documents with all the test cases and
then they they outsource the testing to
some company that's you know has the
skills has the devices and they go
through some set of manual test cases by
reading step-by-step instructions and
Word documents and then they write the
results down they take some screenshots
send it back now the problem with this
is it takes a long time so we've talked
with companies that have two-week cycles
for this for their testing results to
get back
and it doesn't exactly fit in to your CI
delivery pipeline so it just basically
takes too long also the process is you
know inherently kind of manual and human
which means that there's going to be
flossed it's going to be communication
errors kind of thing so what if we could
automate a large piece of this so you
may be familiar with the concept of
automated you are testing from kind of
other technologies it's not that common
and mobile yet I think it's gaining a
lot of traction so in case you don't
know automated UI testing it's like it's
like this person testing the app it's
like a program that's using the app just
like a human would so this means you you
you use gestures right you do
tapping scrolling swiping entering texts
rotating device even walking around to
trigger the GPS transmitter now except
with automated testing you're doing it
from a programming language and you're
using a framework so to do that you need
some kind of query language so you can
identify views so here's an example
using c-sharp and a technology called
salmon UI test so for instance you want
to say app please tap anything that's
visible on the current screen which has
to label hello sorry help or app please
tap any element on the screen which has
the technical idea of history button oh
please wait for this element to appear
or please wait for the spinner to
disappear but no more than 30 seconds
because that takes too long then you
manage things like relaunching the
application clearing the application
state things that you would normally do
manually installing it uninstalling it
and then there's their special command
where you can say at that screenshot
which is going to generate a screenshot
at that point in time in the test script
and embed it in some sort of test report
so that's great that means you can
automate a large piece of your
regression testing now it's not going to
eliminate every single need for a manual
testing there are things we can't script
or things we can't program we need a
human judgment but if you can automate
80% of your regression testing using
automation that's a big improvement over
this other scenario I was outlining
outlining
so let's see let's look at an example of
what this looks and feels like in
practice
so we go back here and if you check out
this repo here which as I said it's on
github you'll see that it actually comes
with some UI tests that's written in a
technology called summary new artists
now there's a bunch of different
technologies out there
Apple has its own Google has its own I'm
just using this as one example the cool
thing about this is that it
it is cross-platform in the sense that I
can have one test suite which is running
both on Android and iOS and I can reuse
a large part of the testing logic so I'm
not going to show you exactly what the
tests looked like but I'm going to show
you what the experience of running them
so imagine being a developer having made
a change now before I check that in I'm
gonna just run a set of regression tests
so we go out here so in here we have we
could scroll in a bit so remember the
past trips page where I can drag this
slider around I have a couple regression
test that's exercising that and checking
that things are okay and then there's a
pull-to-refresh tests which is on my
past trips list so let's try and run
this and you want to see here's my
iPhone again I like to race iOS against
Android now granted iOS is getting a
head start I can't run
both of these from inside the IDE so I'm
going to run on one of them from the
command-line I'm in the wrong directory
Oh No iOS is getting too much of a head
start see if I'm in the right one now I
know which one is going to win try again
here we go and just the Android emulator
be sharing screen so now I'm running the
same
test suite on Android and iOS and
automating you know a large piece of the
regression testing that you would
normally do either as a developer or you
would send it to some kind of manual
testing cycle it's pretty cool which one
do you think is going to win this
Android gonna catch up you know I think
I was on the last test case that's gonna
win this time it switches every time I
give this presentation which one is
winning
then they Android I mean it gets faster
then I always gets faster all right so
that's the experience of having a
regression test suite and running it as
part of the development workflow then
you might ask well how do I actually
write this stuff and again it depends on
the technology you use in this case I'm
using C shop it's just one example you
can use x UI test and use swift you can
use Java and use expresso there are
different options you can either just
kind of explore the API gonna read the
documentation here you can go read the
samples and so on but in this case I
want to show you something else which is
called the salmon test recorder so this
is a way for you to get started really
easily and quickly in case you don't
really have any test already and you
just want to play around with the tool
so you have to control the mouse on this
screen and not look down here so here's
the recorder and here is my android
emulator so I can do here is I'm gonna
pick my Android emulator here and I'm
gonna pick the my driving up and it's
going to reinitialize the emulator and
kind of a recording state launching the
application and now I can hit this
record button and I can just start using
the app just as I would kind of as a
human user I'm gonna skip the auth then
I'm gonna hit this hamburger I'm a new
thing and what I want to do is I want to
test it if I go into settings and I
switch
distance to the metric system and then I
go back into my profile now I want to
assert that this thing here is in
kilometers not miles so if I've been
doing automation what I'm doing now is
I'm going to switch into assertion mode
which is this little crosshairs button
and then I just click the thing I want
to assert is there and this is
generating code here which is saying
wait for element with the ID text
distance but it isn't actually testing
that the thing is in kilometers so I can
go customize this here and I say okay I
want to test this ID but I also want to
make sure that the text is whatever the
text is now and you see it's now
generating code which is saying find the
element with this ID make sure the test
okay I sorry I clicked the wrong button
I click total distance but you get the
point
so let's try now we have our test let's
try seeing if this thing actually works
so I'm going to switch into run mode and
it's going to re rerun the application
we launch the application and then try
essentially the script that's being
generated out here tapping finding the
you navigate menu jumping into settings
switching metric distance going back and
then making this assertion so it's a way
it's not going to generate you know
super well quality code but it's a way
to generate and get started real quick
and learn about the api's and then you
can build out a better architect to test
weight from there all right so that was
the intro - let me shut it down the
intro to automate UI testing now let's
go back here and think about what
happens if we take this concept
automated UI testing and woops that's my
demo and then we take it to the cloud
essentially so what if you had a cloud
of devices which are all the devices
that you would want to test on that the
girl is testing on manually in the
picture from before and you could now
get the
in the cloud so take your automated test
deploy them onto devices in the cloud
get your test results back
but then effectively you've eliminated
this step or a large part of the step at
least in your CI cycle you get access to
the devices you don't have to go up by
them you can run the automation you can
integrated in your CI system so I think
that's the next thing that you're going
to need to do to be able to go through
this continuous delivery model all right
so let's look at how we can actually go
do this so what are all the steps you'd
need to do to go into a weekly or even
daily release cadence so obviously
you're gonna need to figure out what you
want to build now I can't help you do
that whatever organization you're in
there's some process for coming up with
an idea getting it approved and starting
the development but most organizations
after that stage if you kind of look at
the technical pieces they look the same
so you have some CI system it's going to
check out and react to this change that
you made in source control build your
application for simulator and device and
run unit tests and integration tests but
that's not really it right you're not
shipping value to users yet so what else
do we need to do well I just talked
about these UI tests you can run on
devices or simulators but even so you're
probably not comfortable shipping yet if
no human ever saw the application would
you put publish that probably not maybe
you would so you may want to have some
manual tests you want to make sure that
distributing the change you made that
build that includes that change to
people who are doing it manually that
needs to be really easy and automated
what else do we need to do to ship all
the way to the App Store shout out it's
not in the hands of my users yet sign
yep so you need to sign build a release
version or resign an existing version
with distribution pressuring profile you
may need to generate new updated
screenshots because you may have changed
the UI and those screenshots are in the
App Store description for your
you may need to add you probably want to
add release notes you may have changed
metadata but even so you're not done you
need to go to iTunes Connect you need to
upload the thing and then push the
button to submit for review and then you
have this Apple review process but now
we know that's only two hours so two
hours later you get an approval email
yep you're good and then you have to go
back and go hit the publish button
but even so your users still don't have
the update right because on mobile apps
they need to go pull the update out from
the App Store unless they have automatic
updates so that's quite a few steps but
then hopefully you have some way of
tracking feedback maybe you have
analytics maybe have other ways getting
feedback about the change you made which
hopefully generates new ideas for
experiments you want to run you see if
you look at all this stuff and you have
nothing today it's daunting right how am
I ever going to do this every single day
in fact it's slightly worse because
there's kind of two loops here there's
an inner loop some of you might call an
inner loop which is the belt makes a
change you build you run the test the
tests fail you go back you make a change
again so that red thing that's running
multiple times for every release now the
next thing I want to show you is
automating that piece the inner loop the
thing that's the most expensive thing
using mobile Center which is the product
I'm I'm working on now within Microsoft
developer productivity service so I'll
do that in demo mode so let's jump out
and open Chrome here so I'm gonna wait
I'm gonna run it in private mode here
because I want to log in from scratch
and kind of show you the experience of
getting started so I'm going to go to
aka.ms/offweb
okay looks like I'm online apologize for
that I had to reboot my machine prior to
this okay ms / mobile center strikin
yeah much better okay so you get to this
page you can read about documentation
and what this thing is all about well we
just want to get started so for here you
you want to go to sign up now we've made
it such that you don't have to go
through a complicated signup flow you
can connect with existing Hoth services
so I'm I used to be a developer and I'm
going to connect with github okay
signing in oh crap okay sorry it's
because I had to reboot this thing just
before the meeting just a moment
five six to nine sixty five okay so now
I'm connected via github and I get to
this page and it's telling me you know I
didn't need to go and set up a new app
so let me do that since we're doing my
driving let's use that driving and I can
pick either iOS Android or Windows I'm
using an iOS app in this case here and I
can use Xcode and Swift a react native
salmon I'm gonna pick salmon because
that's what we were using now it's
creating V app and you see now the app
is configured and it's telling me that I
can add this SDK if I want to get the
full value here in my case I don't
actually want to go do that I just want
to configure a build in the cloud so I'm
going to go to this build tap here and
it's gonna ask me which service I'm
using to store my source code I'm using
github and since I already authenticated
via github it knows which repos I have
so I have a bunch of things here I'm
going to search from my driving and now
it's scanning the repos and finding all
the branches that I have in this code
and configuring that I'll just take a
second that's a fairly large report
takes just slightly longer and you can
find all my branches here and I'm just
going to configure a build here this is
the iOS solution I just want to build it
in debug mode mono and extraversion I
don't care just to pick the default I'm
just going to use a simulator build and
then you can pick either building on
every push to this branch or manually in
this case I'm just going to use manual
so let's save and build this now you may
not realize what's going on here but in
the background what's actually happening
is that it's configuring a build agent
on
a Mac that's already pre-installed with
all the SDKs with Xcode in the version I
picked and it's configuring an agent and
that agent is already checking out my
source code now and building it on a Mac
in the cloud so this means that the
whole you know multi-page Jenkins setup
guide I don't get to go and do this and
you can see it's streaming out I don't
know if you can make this out but it's
streaming out the locks of beginning
this build so checking out gears
restoring NuGet packages and so on so it
took me what minutes to sign up and set
up my first building it's pretty cool
I'm not going to wait for this I want to
jump into the next piece so kind of
imagining that we set up the build so
for that I'm gonna use mobile that
Asscher come here and here I've already
set this thing up so I've set up the my
driving an app for Android and iOS and I
want to look at the next piece which is
testing so I'm going to jump into the
test service we saw how to configure the
build service so here I'm going to see
just a list of existing tests that I ran
in the in the past I'm going to show you
how to configure a new test run so I'm
going to hit new test run now the first
step here is which devices do I want to
run on so the devices you're seeing here
they're about 240 different Android
device configurations and a device
configuration is a model like the Google
pixel and a version of Android so now I
can kind of pick any device that I would
want to set up my regression tests run
on my case my app only supports certain
versions of Android so I'm going to
filter this down pick phone's OS
versions eight seven six whatever should
be fine and then I'll pick a handful of
Android eight oops
I want this Google pixel running Android
seven Android six so now I pick my
devices then I can pick its test
configuration so test series is a way to
group your tests so you may want to
separate your quick regression smoke
tests from your full-blown regression
tests I'm just going to pick master
which is default then I
configure which language should the
device be configured in when I'm running
this test because your app might behave
differently when it's running in Danish
compared to English just pick that and
now I can pick my testing framework I
mentioned there are multiple here we
support the most popular ones in my case
I've been using Samer and UI tests which
by the way works on all apps doesn't
have to be summer in apps and now it's
showing me well how can I actually kick
off these tests running on these devices
in the cloud so to do that I need to
install in a CLI tool which requires
node it's like an in single line install
package to get that I already have this
I'm not going to need that this is the
command that I actually need to kick off
the tests now if you can make this out
but it's saying mobile send or tests run
UI tests and then it's picking my app
here go to Copenhagen my driving for
Android it's picking a key here which is
referring to which devices I want to
test on then I have to give it an APK
file so it builds Android app and that's
called it's the wrong path choose from
that so it's source
sorry it's really slow
you know my completion isn't working
okay we paste in this usually just tap
complete I don't know why it's not doing
that now a pig in my apk file and then
I'll set the path to the built directory
which is normal my driving oh this auto
completion is really killing me you
don't know how much you need it until
you realize it's not there it's like
breathing I guess so my driving my
driving UI tests bin directory I'll just
use debug bills so that's the path I
want this is where my compiled tests are
so now I'm telling it please run the
tests on the devices I picked with this
application I built with these tests
that I built and I just hit enter to do
that and same preparing your tests and
it's creating a new test run and it's
uploading the application files and
that's going to be run in parallel
across these devices in the cloud so I
could take this one line and I can plug
it into my CI system and that gets me to
kind of the last piece of this so once
this is done it's going to take a little
while to actually run this test about
20-30 minutes but once that's done you
get a test report which essentially
enumerates all these tests I'm going to
just jump into one of them and here you
see the test results so when that's
running on all these devices you see our
Google pixel Android 8 device here and
you can see over here every time I did
the app that screenshot command that's
going to generate a screenshot and
insert it into this test report and I
can step through this report and see
what the application looked like at this
particular time it's also tracing some
performance data how much memory CPU am
I using and we even have this
experimental feature where you can
enable it kind of a video playback of as
the test is running what does it
actually look like kind of include
animations I was tracing through those
screens it's fairly low rest but it's
still providing quite a lot of value if
there's a failure you can we just dump
the video you can jump into the locks
you can get the ADB device look at you
get stack trace if there's a failure and
you can get the logs from the test grip
so you can go and debug this if there's
a failure all right so the final piece
I'm running slightly out of time here
but I want to show you the full
end-to-end story so remember I was
talking about this inner loop of make a
change build your application run your
test distribute the tests to manual
users that's the final thing I want to
show you
so I've pre-configured this for iOS so
that's the same app I was showing you
I'm gonna go into the build and you
remember at the beginning of this talk
where I said I don't get to go to a lab
much coding anymore I was pushing a
change up and you remember what that did
that was changing the tint of that bar
to black and as I was talking through
the rest of this talk that actually
compiled my change in the cloud on a Mac
and it kicked off tests we could scroll
down so the build output is quite
verbose here so I'm gonna just search
into the next section let's get through
that here it's compiling it's copying in
the compiled app and here's something
called a post build script so that's
essentially I script I put into my
source control and I take the command I
showed you before which is triggering
the tests inside the test service I
paste that into the post build script
which means that I'm now integrating
this test with my build system so after
I made the change and the build was done
it started running that bill of the app
on an iPhone 6's running ten three three
and iPhone seven running iOS 1101 the
latest one and an iPhone se you running
tend to run that in parallel the tests
passed we can go look at that
it's right here and now you should see
that it has this black screen right
because I made that change it was blue
before let's take the slider one again
we can scan through these results and
you see here on the I was 11 device that
it has the black bar that changed that I
made in the beginning so within 30
minutes I made a change tested it on
real iPhones and one more thing I
distributed it to users so I've set up a
distribution group of beta testers and
once that test was finished it would
send an email to those testers so I can
actually show you this here because I've
set myself up as one of these testers
provided my Wi-Fi works it goes oh I'm
sorry that's ok because I don't want to
show you my personal email yeah it's it
needs to log in again sorry just one sec
continue with the sign up ok so now I
should be connected to make sure there's
no yeah there's a bunch of personal
things so now I'll show you so I got
this email from the mobile sender a
product and it's telling me that was a
new version available I'm gonna click in
to see details and it's saying okay
here's the one and it's see my commit
message that I put in the embassy li-an
sorry in the terminal
that's just default becomes the release
notes of this change just going to hit
install and I'm gonna approve this
install and it's saying go back to the
home screen and you see now it's pulling
down that update so in a minute when
that's downloaded depending on Wi-Fi
quality I should be as some manual beta
tester I should be able to test this
change that I made in the beginning with
the black screen which is not terribly
hard to change I was sorry to test so I
don't know if you guys saw there was a
small pop-up that said something about
hockey app so
how many in here you suck yep yeah so a
few people it's a service that does part
of this so what I'm showing you now you
can think of that as the next generation
of hockey app an integrated service
where we also have built we also have
the next generation of something called
Samer and test cloud which the product
I've been working on you build service
and test cloud and hockey app and then
analytics and push notifications we're
trying to put all these services into
one integrated product however you can
use just the services that you want you
don't have to pick all of them if you
just want to use the test cloud but you
want to set it up with your own Jenkins
build system you can do that if you just
want to use the build piece you don't
want the test piece you could do that if
you just want analytics you can do that
so we're trying to build it as
standalone things that also connect
together really well ok let me just test
the very final thing before we do
questions and indeed we should have
black screen at the bottom so that's it
thanks a lot for listening and let me
just show you the final slide just to
remind you what we're all talking about
oops
here so App Store review cycle time myth
busted that's not stopping you guys
setting up Jenkins and spending time on
that that's faster it's not stopping you
guys you can get it as a service in the
cloud now obviously we're one service
they're also competing services that try
to do this the test cloud piece stop
doing this manual long regression cycle
of testing try to automate as much as
you can and get into automated
regression testing and then keep the
manual piece light and with that release
more often think about going one step to
the right here in this arrow you can
sign up at akms slash Mobile Center and
now I can take questions and please
remember to rate the session using the
app so do you have any questions yes we
have a couple of questions first one
I'll take his could I with mobile Center
create a set up with a combination of
hosted and
promised devices hosted an on-premise
devices so you would be able to do the
following
so you'd be able to let's say you have
your hosted Jenkins machine and you
connect say some devices to that or you
run simulated test on your own hosted
set up and then once that is done you
could combine it and run additional
tests in the test cloud if that made
sense you can get it in that sense you
can't run the tests locally and in such
doubt at the same time there will be two
separate jobs I know who asks the
question but I hope that answers it
what about user feedback in bug
reporting user feedback and park
reporting are features that are in
hockey app we have we have user feedback
coming and we have integration to bug
tracking system coming also within the
system yeah what about you can come talk
to me
what about load testing the app before
releasing it yeah and it's not built for
load testing it's built for regression
testing although I've certainly seen
people use it for load testing just spin
up a bunch of devices and kind of
trigger that the back-end services like
that I don't think it's the most
efficient way to do load testing you
don't need to actually install the app
on a device to do those testing like
that so it's not so that's load testing
of the backend in you could also do
stress testing of the UI you can
certainly do that with an automated
script and then track is the application
trash crashing is it consuming too much
memory so that you can do great thank
you very much ok thanks you're welcome
to come down and yes as Carl some
questions that didn't get asked thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>