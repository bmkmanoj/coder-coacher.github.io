<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2012 • Interview with Ian Plosker | Coder Coacher - Coaching Coders</title><meta content="GOTO 2012 • Interview with Ian Plosker - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2012 • Interview with Ian Plosker</b></h2><h5 class="post__date">2012-08-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zjBRnWY4MIc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome everybody to the go to
conference in Copenhagen my name is chef
innately I I wrote the first to know
sequel books and I run a few you know a
lot of no sequel conferences and I'm
very happy to have Ian plus K here at
the go to conference welcoming in well
well thank you for having me and yeah
just to start tell us a little about
yourself so um I work for a bachelor of
technologies the makers of rioc I'm the
technical lead of international
operations based out of London and um
just here in Europe from talking about
real getting people interested so so
tell us please how did you get into the
database space so previous twerking at
fasho I was working for a company
building nom basically what amounted to
CMS's and also worked on a large scale
bioinformatics project and some
traditional relational databases didn't
believe it the problem so I start to
exploring alternative databases stumbled
upon rioc and the rest is history mm-hmm
okay so we will talk a little about
reorg of course because it's an
interesting database and can it tell us
when I first murder react I learned that
it is a key value database but it can
understand Jason and parse Jason so what
it is a key value or a document database
so it's a key value database but it you
can use it as a document database some
rioc is agnostic to what your values are
to relock it's a binary blob which isn't
a hundred percent true because we have a
feature called reup search which allows
you to do full text index is based on
your values assuming they're either
plain text xml or json so it sort of
blurs the line between key value and
document store one question comes to
mind area also have some use cases which
are little close to the grass
space because you have linked walking I
think yeah so I mean you can build
lightweight graphs using linq some
potentially social graphs but you know
really isn't a graph database our links
are essentially one-way relationships
between objects almost like hyperlinks
in a web page so maybe if you had a
small social network where people had a
limited number of friends you could use
links to express those relationships but
you know you can do the same with our
secondary indexing feature as well okay
I learned from the website that there
are several versions of react like CS
core enterprise can you tell us what
what the differences are so it's a
little bit complicated in terms of
products there's really three products
that passion makes the first one is rioc
Liang is the open source database um
it's you know from the open-source
distributed database that's all of our
other products are built on top of Ryoga
enterprise or rioc EDS are is the the
commercial version of react and we add a
few other features including multi data
center replication as well as support um
leoch CS is a new product we launched
about two months ago and reacts es real
cloud store is basically a version of
reality allows you to build your own
cloud storage service you can build your
own s3 it actually has an s3 compatible
API and you can store large objects in
it but it's actually built on top of
rioc so okay and the discussions with ND
graphs i learn that rig is operational
strong can you tell us why so the reason
why rioc is operationally strong first
off is its tribute a database so losing
one node doesn't take your application
down so it's tolerant to failures you
your operational staff may not even need
to wake up in the middle tonight if a
server crashes they can deal with it in
the morning on top of that when you need
to scale out when you've run
of storage capacity throughput
processing you can simply add a node by
bringing a new server and UV em online
installing ryokan it and telling it to
join the cluster and it's just that easy
I think few other databases out there
have a horizontal scaling story that's
as simple as reacts on top of that so
you know rioc is very easy to work with
especially on from the operational
perspective cluster membership managing
a cluster as well as you know tolerating
the real world failures that you
experience and should be good systems
all sort of thought through in the
product so we really pride ourselves on
on our fault tolerance that that's I
think the key to operationally is
failures or I think the whole point of a
distributed database is that it should
be able to transparently Survive failure
um so um there's several I think
monitoring solutions you advertise like
real control and really no stick who can
you tell us a little bit of a please so
I'll Surma three agnostic yeah idea of
react Gnostic is simply that we've
identified the most common support
problems we have and we built a tool
that just tells users they can run it
against a reactive it will say here's a
configuration issue might have you
should probably fix it for example if
you had mounted a disk with out turning
on know a time meaning that you don't
mark access time every time of files
accessed on which adds simply late and
saved to your database or for example
rioc will use a large number of file
handles ends most operating systems
limit the number of five handles the
process can have open to 1024 so rioc
can use quite a bit more than that
warn you if for example your file handle
limit is too low um so real control is
actually a cluster monitoring tool that
allows you to actually add and remove
nodes from a cluster get some idea of
what parts of the ring they own and give
you some visibility into what reacts
doing from a simple web interface do you
have some feed bags from your life
customers so what can go wrong so um
yeah there's a lot of interesting cases
actually one of the common most common
issues are simply running distributed
systems is really hard and we may even
provide software that helps people run
distributed systems but the hardware
around tributed systems are really hard
and so we've repeatedly run into the
same problems with customers on one
common one is called tcp and cast where
buffers on switches are overrun when one
node sends out messages to a number of
nodes which all sent back messages at
the same time to that original sending
node and Antonio messages ryokan tell ya
the oxtail journalist no Rihanna
internal messages so one node may go out
to three other nodes and said give me
all of the replicas of this piece of
associated with this key and send them
all back or you know for example we have
things that are called coverage queries
if I wanted to see um you know do a
range query with our secondary index
feature um it would go out to actually a
covering set of the key space which
means that you go to a normal eight
configure the configured cluster
one-third of all diodes and all those
messages are routed back and it's very
quick to overrun the especially in cheap
switches the switch buffers and you get
this degenerate case where your tcp or
where your Ethernet performance isn't
being fully utilized where you might
only be using ten percent of it because
you have this weird behavior from both
the UM from the linux kernel's tcp stack
as well as your switches
so yeah that's a problem we've run into
a number of times you know it's
interesting most the time when I
actually see failures with rioc once
we've gotten past them the initial
common pitfalls if rioc starts failing
it's usually a sign of hardware problems
that a disk is about to fail whoo um so
but there are common problems in fact
that's the point of reup Gnostic it's
not buying those common issues that
we've seen over and over again and warn
people before they have to call us and
ask us that's going on earth but I
assume this is this is the valuable
internal knowledge you have gin to me
and you're not publishing these
knowledge already or which on the these
these failure know what what can happen
and how you react in these cases so I
mean you know common sorts of failures
are you know hardware failure this goes
out and you know react should
transparently survive that assuming that
you have enough notes assuming that you
you know have four or more nodes and in
those cases I mean you basically if the
machine is not recoverable then you know
you fix it and you remove the nude from
the cluster saying this machine is dead
it's no longer part of the cluster I'm
never going to be able to bring it back
once you repair that server will bring a
new server in utilities Joan and you
know the cluster returns to to health
move um so if actually um maybe you want
to talk about anti entropy now because I
think that's actually fits in here yeah
this is also one question so yeah so I'm
what is anti entropy what is it anti
entropia anti entropy um so entropy is a
is the concept of things becoming more
disorganized over time in physics right
things becoming more random and and less
organized um so rihanna is an eventually
consistent
it doesn't for strong consistency so
what that means at any given time
different nodes in the cluster can have
a different idea about what a certain
key what its value is um and one of them
is a is more correct than the other one
of them is the value actually want so
for example if you had a node go down
during a right and the right only goes
to two notes and one of the notes missed
it then that node that was down or
partitioned um it's different knowledge
yeah has different knowledge and when
you come back and requests that data and
a read on Rio will ask all of those
nodes for the data and when it finds
that one of them has a different piece
of data an older version it will do
something called read repair which will
update it with the newest version that's
a form of anti entropy the idea of anti
entropy is that it's bringing things
back to an orderly stay anymore as
diversity yes exactly so it's it's brick
it's moving things back towards
consistency so there's a few mechanisms
and Rihanna for anti entropy there's
another called hinted handoff so for
example and it gets partitioned or goes
down and a right comes in actually what
will happen um is another node will take
over for it will spin up a fallback
partition and that fall that partition
will accept the right in lieu of that
other node and when that other node
comes back online the fallback partition
will be transferred will be handed off
to the primary owner of it and it will
get all of the data all the rights that
missed another time so that's sort of a
form of anti entropy as well um so um
those are the two forms of anti entropy
in in open source ryokan the Enterprise
Edition has another form because it
actually does multi data center
replications and you actually put
clusters and multiple data centers and
you can synchronize them so that
synchronization is
form of anti entropy as well so um yeah
so the point of you know having these
tools for bringing the system back into
an orderly state is part of being able
to survive gallagher's it's not just
surviving them but also being able to
recover from them and getting back to an
orderly stay is it a normally operating
real cluster you really shouldn't have
much edge entropy at all you shouldn't
have the system becoming disorderly this
is really only for fixing issues after
some failure happen but very often we
don't even notice failures that happen
in rubbing systems a machine can be
competition temporarily or not rating
system can do something crazy for a
little bit and get back to reality after
a moment and start accepting writes and
reads normally so it's some so anti HP
is only necessary following some sort of
failure okay one question i have is
concerning third-party tools sometimes i
see out there and the open source scene
or and software-as-a-service there are
some companies who offer third-party
solutions for monitor and diagnostics is
there also something for rijeka already
so third-party tools for monitoring and
diagnostics um so there I'm not familiar
with any commercial tools for monitoring
um rioc although there's a number of
tools out there that do integrate with
reoffer monitoring one of them is
actually developed by a community member
it's called the tools called freeman
it's actually designed for monitoring
servers but also monitoring god in a
different piece of software MySQL
Rihanna et cetera when collecting stats
from them and displaying it in autumn
you know through the web so there are
tools out there I mean there are vendors
who will you know integrate our stats
rioc exposes all of its statistics over
that it collects over an HTTP on point
example you can find out what the
average response times forget and write
requests are what the 95th percentile
get and right response times are um know
how many rights were done in the past 60
seconds or since the rioc node was
brought online and all of those are
exposed over an HTTP endpoints you can
pull those into any tool and parse them
um the Enterprise Edition also exposed
to the same stats / SNMP or jmx if you
already have infrastructure that it was
how to use those that so there's a lot
of monitoring tools that are out the
shelter design for react that will
integrate with it but you can use the
statistics so you can use the sadistics
and pull them into whatever tool you
might might use at um so I you know
there's a number of vendors with really
great monitoring tools out there that
can take advantage of rioc some
statistics okay my next question is
concerning a little of the competition
and specifically DynamoDB the launch of
time that I nobody be this January was
was a huge bump I think so what do you
think of this database and what is the
position the specific use cases how do
you value this is a solution so dynamodb
is really interesting I'm blown away by
Amazon's ability to put out new products
on a regular basis it's unbelievable to
see such a large company being so
productive and release new things but
DynamoDB is interesting on you know it
provides a a database as a service it's
really appealing if you're already
running your applications on on Amazon
if you're running on s excuse me on ec2
if you have data and simple DB but need
something a little bit more powerful um
I think the biggest things that
limitations of it that you're running on
Amazon's hardware so for companies that
or people who want control of their
infrastructure one control of there are
two reasons for security reasons um or
just for peace of mind I'm will run
elsewhere i also think amazon
icing is really high because you pay for
the number of requests per second you
want to be able to do and their pricing
in fact there's um someone in our
community and I I'm at a loss for his
name right now it's actually written a
bit about um why amazon's pricing
doesn't actually think their costs for
doing it and you are paying a pretty
large premium for using dynamodb it
would actually be cheaper to run rioc at
some point very quickly it also be the
throat of the rice expensive because
they're writing on SSDs it could be i
think they so part of it as they charge
more for a eventually consistent right
versus a consistent right and the way
they've priced it it probably cost them
marginally more to do a consistent right
that are eventually consistent right so
they you know the pricing is simple but
it may not be the best and paying for
actually usage may not be best for a lot
of applications especially ones that are
high load on so yeah but it's an
interesting product the other limitation
of DynamoDB and i don't remember the
exact size that they have a hard limit
on the size of values hmm i think it's
it's in that may even be in the
kilobytes but i don't really forget
about something out of whereas we are
practically it doesn't have any hard
limit practically you probably wouldn't
want to write something much larger than
10 megabytes for best performance
nothing larger than a megabyte but we
don't impose any hard restrictions so
for a lot of applications 64 kilobytes
is not very much so and I think there
are also some differences in terms of
the data model because Dino DB has some
key value you know you and you have full
Jason and yeah this is something yes
it's a different data model rioc also
offers some different ways of wearing
your data and there are the different
products and i think you know they solve
different problems and I
that's actually common throughout the no
sequel space that everyone gets lumped
into this one category but the category
is really a category of categories and
everyone does something different and
they these databases are an
interchangeable all of them have
particular things are good at I mean
there's some overlap but um you know
none of them solve every problem and um
and it's the same with dynamo dB so I
think ryokan DynamoDB could even be
complementary in an organization there's
consult different problems so okay my
next question is concerning you favor
the consistent hashing model whereas
other databases or competitors do
shouting or do you think of the the use
cases or advances of each of these so
the great thing about consistent hashing
um for example is it allows us to scalp
really easily part of the reason why
horizontal scaling is so easy is because
we use consistent hashing we don't need
to split shards when we scale we don't
need to resize charts and that can be
pretty painful um also hot spotting is a
problem the shards because the data
isn't organized based on its you know
based on some sharp key and the short
key doesn't really take into account
what where the most commonly accessed
data will be consistent hashing the data
is kind of relatively randomly spread
out through your cluster so you much
less likely to get hot spotting now the
nice thing about charting is efficient
range queries um that's really what you
lose so for me you know my favorite use
case where sharding is interesting is
something like Charlotte solar um you
know like elastic search um full text
search where efficient range queries are
really appealing um that said you don't
always need range phrase when you're
doing full text search if you're doing a
mainly single term queries then then you
know you're not doing range and charting
doesn't make it
it's there in fact we actually got some
advantages from doing consistent hashing
is the loads more evenly distributed
around the cluster so you're what you
would say that there are some use cases
let's say five ten or twenty percent
where shouting might be useful say if I
want to have a specific bunch of data on
a specific server then it's easier to
control but so I mean so I think there's
a difference between when you might want
a group data have data col ocala t um
but so you know there's databases that
don't use sharding but do you allow you
to co-locate data so um you know
something like Sandra with column
families you can sort of associate data
in the column family and it's getting
some co locality and you know but it
isn't quite sharding it's you know it is
using consistent hashing still um for me
the charting is is useful yeah it really
when you want those on to maximize the
performance of range where is oh so
that's good one interesting feature
always lacked in reader is having the
pluggable persistence hmm I was very
happy to read that you also support
leveldb yep what are your experiences
with leveldb so um the reason there's a
few reasons why we add level TP um we um
our default storage background is called
fit cast bit cask is great I'm vidcast
the default for good reason it has a
really flat latency profile the reason
why is we can guarantee that for any
reader right you do at most one sink
that's because level excuse me bit cast
is just a log with an in-memory key
lookup table that has a pointer to wear
in the wall that you know the associated
value is so any any lookup is simply
look up in the hash table and then a
secon desk and right it's just you know
maybe you're already at the end of the
at the end of the log pile but worst
case is you
seat to the end of the log file and
append to it so really fast the flood
excuse me flat latency profile the
problem with it is all keys must fit in
memory not all your values all your keys
and remember it's a cluster you can
always get more memory by adding more
nodes but leveldb allows you to have
sort of data sets of unbounded sighs um
it doesn't sort all keys in memory so on
top of that we've added a feature to
real called secondary indexes which are
only supported by my leveldb the reason
why that is as leveldb is actually
ordered on disk so we can do efficient
range queries and at the storage back
end um so I'm pretty excited the next
version of reel which should be shipping
in a few months will add will include a
new version of leveldb then includes
bloom filters and those bloom filters
will actually really improve the
performance of of leveldb especially in
the cases where you might have a key
that's not that either doesn't exist or
you're writing new data so the latency
profile of leveldb is about to get a lot
better so what are the bloom filters and
specifically so um step back a bit on
leveldb i should say in its worst case
leveldb might need to do three or four
seeks to determine that either a key
exists or doesn't exist or return the
value so what bloom filters allow you to
do is in constant time determine whether
or not a key is stored on in a
collection it's basically allows you to
determine whether something's a member
of a collection in a memory efficient
and a pen time efficient way so um the
bloom filter save you from having to do
a bunch of Sikhs when something a piece
of data doesn't exist okay I don't know
in which version you at you inserted
commit hooks yeah what are they useful
for can you give some examples and the
world languages can you
to code to be executed so there's two
types of there's two types of puffs
there's pre and post met hawks
pre-commit hawks fire before um the data
is actually sent out to be persistent on
task so with a pre-commit hook well it
internally yup search does it's
announcing in a pre-commit hook so
actually extract the extract the full
text data and send it out to the indexes
I'm store in a pre-commit hook um you
could also use it to enforce business
say you're giving these conditions don't
accept my each or given these conditions
don't store this data or append this
data transform the data before you store
it so and then there's post commit hooks
which get fired after the data stored so
actually post commit Hawks can be used
to integrate with other tools maybe once
you've done it right you want to send a
message to a queuing system saying that
um oh I've successfully written this
piece of data and so you could fire that
off and a postman hook to you know some
amqp implementation or are you forced to
do this in early or you can write
javascript javascript as well um so
erling or javascript um Erlang performs
a bit better um I tend to tell people
you know if you don't know where lang
maybe you want to prototype your
commitment JavaScript Java scripts more
limited obviously integrating with
something like a queuing system is not
going to be possible because you can't
open you know a TCP connection from
JavaScript you're pretty much limited to
what's possible within a JavaScript p.m.
whereas in Erlang you can do anything
they are lengthy on sports so basically
anything you know pin TCP connections
you could integrate with speak to other
early nodes on anything in or like the
end supports so if it's a simple hook
you can mock it in JavaScript and then
you know translate it to her lang okay
one final quick question is sure what is
the the long road map meaning react and
three
what's rioc in three years that's a good
question i don't know that I'm the right
person to ask that but i think you know
it's all about continuing to innovate
and providing new ways to work with
ryoko you know we react is a yeah sits
on the available favouring availability
over consistency and failure scenarios I
think we like to explore doing something
that's favors consistency or at least
allow users to pick stronger consistency
than we already offer we allow people to
turn up the consistency knob pretty high
but we don't let them turn it to 11 um I
think we'd like to do that I think we'd
like to add different mechanisms for
anti entropy on that are a little bit
more active right now our ra anti
entropy systems are more user-driven
rather than driven by REO so that will
be something that we're exploring and
just improving what we have already
building on query ability I think we
have a ways to go in terms of providing
different sorts of Korean mechanisms or
improving the query mechanisms we
already have beyond the primary key
lookups and making reup search much more
powerful making secondary indexes more
powerful just allowing users to get at
their data and interesting new ways so
it's really building a more robust more
flexible and easier to query database I
think that's where we're going to
continue to move mm-hmm okay thanks a
lot for your time I think it was very
enlightening and I hope we see you next
year thank you thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>