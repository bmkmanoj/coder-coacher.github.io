<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2017 • Automating Security &amp; Compliance (for Fun &amp; Profit) • Nicole Johnson | Coder Coacher - Coaching Coders</title><meta content="GOTO 2017 • Automating Security &amp; Compliance (for Fun &amp; Profit) • Nicole Johnson - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2017 • Automating Security &amp; Compliance (for Fun &amp; Profit) • Nicole Johnson</b></h2><h5 class="post__date">2017-09-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6bZgM6IrMoQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon everyone
thanks for attending this session my
name is nicole Johnson I work for chef
I'm a leader of an awesome team of
people none of them are here to hear
that but they're awesome and I tell them
that all the time so I'm going to talk a
little bit about automating security and
compliance so just want to get a feel
for how many folks are security specific
ok how many people are responsible for
security and compliance ok everyone's
hands should be up if you touch a system
or write a piece of code or write
anything having to do with the system
you're responsible for security and
compliance so when we talk about DevOps
you saw my fake chart there but I'm
gonna really talk about DevOps here so
I'm not going to read you this
definition but really what it comes down
to is delivering high quality working
software faster right so that's that's
our goal sometimes we're on the far end
of not so much sometimes we're on the
end of succeeding but what does it
matter if you're not delivering that
high quality working software securely
and you're not delivering it safely
right so we talked about dev sec ops and
that's inserting security into some of
the practices of DevOps and really
making it part of what you think about
about DevOps so you want to be able to
modernize your applications modernize
your infrastructure without introducing
risk
I can guarantee you there's already way
more risk in your environment and in
your software and your applications in
your code then you probably even realize
so the first step is you know really
understanding
the impact of that risk right so what
what happens if your company gets hacked
what happens if card information is is
breached that's a financial impact
what about individually what's the
impact of understanding that risk what
do you have to do to understand that
risk how much time does it take how much
how many people does it take how much
effort does it take the barriers to
entry so when we think about security
typically the barriers to entry seem
really really high because you look at
those security documents those
compliance documents Oh
they are absolutely intimidating and the
other day I was talking with a colleague
as a matter of fact one of the amazing
folks that I work with who wrote the the
tools that I'm going to be talking about
and we were talking about HIPPA
compliance
so think about HIPAA you've got pages
and pages of hard requirements but then
you've got all these squishy
requirements how do you how do you
account for that stuff the way that you
account for that is considering it from
the beginning so from the inception of a
piece of software you have to be
thinking how do I make this piece of
software secure whether it's
organizational or its regulatory
compliance and you think about that
throughout the process so what do we
mean when we say compliance people throw
compliance around all the time and
sometimes when I'm talking to an
Operations person or a sysadmin they're
like I don't really do regulatory
compliance that's fine but you still
have organizational require compliance
you might have environment policies
right so a certain environment has to
look a certain way because it exists in
a certain place within your organization
right if you're non PCI environment
your PCI environment in anyway
everything is suddenly in scope funny
how that works right organizational
security that's super important because
the standards that we set as an
organization and securing our system
securing our software that's going to be
super important in in creating the basis
for how you secure those systems on an
ongoing basis all the way from the
development process all the way to
production and those processes that you
use to do that those are going to be
what make you successful in keeping your
systems compliant so auditability is a
huge challenge and I'll talk about that
in a little bit so test-driven
development so I'm gonna take a step
back for a second anyone here do
configuration management infrastructure
is code all those cool DevOps tools
alright awesome so you all know what I'm
talking about when I say test-driven
development when you think about
test-driven development part of that is
saying okay here's my thing that I'm
building here's my thing that I'm
changing here's my thing that I'm
remediating it might be an application
it might be a system it might be a
combination of the both that's cool how
many systems does that thing touch
probably a lot so that's why it's
important to have standardization of
processes standardization of tool sets
and you know really be able to look at
this process and say okay here's how
we're going to treat this we're gonna
treat this in the same way all the way
from build all the way to production so
you're building the thing and you build
the platform the infrastructure the
application
and then you incorporate the testing
awesome continuous testing how many
people are doing continues testing Wow
that's awesome
so how many people are doing continuous
testing incorporating security and
compliance so that's a typical answer
and that's fine because we all have to
start somewhere so when when you start
incorporating compliance into the mix
here's where you have to start having
that hard conversation of what are we
not complying in so I've been in
situations where someone said okay let's
run the test and we run the test and
they're like oh crap everybody has to
get out because there's a lot at stake
when we're talking about compliance and
regulatory compliance right so
incorporating compliance all the way
through the process is extremely
important because the way that you build
it from the beginning should be the way
that you put it into production and of
course the process is going to change
you know as you get closer to production
and it's going to change based on some
of the environments but ultimately that
system that you're testing on from dev
QA UAT pre prod those should all look
the same as they do in pride so what do
we do about it we incorporate compliance
through the whole process and
test-driven development and compliance
it's pretty good to start it'll get you
about maybe 70 80 percent of the way
there and it's sort of like that that
story that you always hear about the
developer that says I tested it on my
laptop it should work fine right what
I'm going to show you today is a way to
start doing some of that stuff early
early on enough in the process so that
you are seven
to 80 percent of the way there now once
you incorporate continuous delivery or
continuous testing and compliance that's
when you really start seeing success in
terms of having a good compliance
posture right there's there's always
going to be some things that you're not
compliant in and there's always going to
be exceptions right you know when you do
your you know security architecture
reviews those exceptions should be
things that you can account for easily
that you can test for easily and that
you can understand the impact of and
that's why incorporating security and
compliance teams into the process early
on
along with development and operations is
extremely important so shameless plug
for my colleagues at chef with some hug
ops but when we start to get security
development and operations folks all in
the room and start working on this stuff
and really saying how do we make this
something that we can all agree upon and
how do we make this a process that works
for all of us and that's that's when we
start really getting folks on board so
anybody here heard of inspect okay a
couple folks so in spec is compliance is
code I bet a lot of folks here write
scripts bash scripts whatever to test
for compliance related things right what
version of SSH are we running but using
compliances code is really important
because it kind of takes you back to
that whole concept of infrastructure is
code right so making your infrastructure
is something that you can treat like a
code base and you should treat like a
code base you test it you standardize it
you make it repeatable you make it
modular and by doing that now you have
the ability to take that and apply it
across a large number of systems and get
an answer back so that auditability
piece
being able to get that answer back to
the question that you're asking about
your systems that's what really makes
this extremely powerful so it's open
source so you can start using it today
and it includes a collection of
resources just like chef just like any
other configuration management tool that
will go in names because I don't work
for them just kidding
inspect is it allows you to take a
compliance or security requirement and
say how do I make this declarative how
do I write it in code and how do I run
those tests in an automated way so you
take those tests and you apply them to
whatever systems whatever principles so
you've got this open source dev SEC
hardening framework and and take a look
at this because there's a whole lot of
stuff in here that you can use
immediately that can help you
immediately
and you can understand what your systems
look like so Linux and Windows SSH
SSL docker ansible puppet chef of course
Linux and you know these are just you
know sort of your base requirements so
when you when you go check your systems
and you say okay we need to go you know
make sure that these systems are
compliant here's the checklist I bet
somebody writes a script or goes and
checks it by hand right and typically
that process is long and tedious if you
can take some of those requirements and
say alright here's the thing that we're
testing for but when we get the output
of that script or that command we need
to be able to do something with it and
you wouldn't hand an auditor the output
from a command line like that right
it has to be something that they can
read so by adding the ability to add
metadata to this this is what gives you
that audible auditability capability so
you can see here you've got your control
so the name of your control and this is
this is just from basic CIS benchmark so
you've got your control your title your
description your impact and so the
output of this is all something that you
can report on Windows any windows folks
out here okay
so testing for Windows stuff you know
you probably use something like SCCM
and you might have profiles in there
already that's great you can actually
export those profiles and use inspect to
convert them to inspect code it'll look
a little bit different because we
actually have a converter built in but
you can convert that code as well so you
can't quite see it here I'll show you
something that you can see a little bit
better on on the big screen here but C
is docker benchmarks how many folks
using docker in production okay so
that's super super important right
because docker is one of those things
that you know standards for how to
secure it haven't quite been defined all
that well you know there's some basic
things that you can do and and some and
some guidelines but I don't think it's
all that standardized in terms of
actually putting it into practice right
so being able to start here and say
these are our base guidelines and then
being able to add to this because if you
look at this this is something that you
know anyone can read and you can
definitely easily write it so so how do
you go about testing it you can test it
locally you can test it remotely you can
test a target over win RM
you can test the doctor target you can
actually run inspect in a container is
that actually an inspect container if
you just Google I think doctor inspect
you'll find the inspect container pretty
quickly so when we make this auditable
I'm gonna walk you guys through a quick
example of this right when we make this
audit auditable what we're gonna do is
say all right what is it that I want to
ask a question about what's my sshd
config look like so we go to the
resource page and we say what's an
example anybody else got an example that
they might want to test okay all right
how about SSL what SSL protocol are we
using so that's a that's a resource here
how about a file a config file resource
that's in here so all these resources
are available with references so you can
start writing this right away it's not a
language that you have to learn this is
something that your security team can
also take and say we want to help you
define these standards because part of
this process is going to be
collaborating with these folks on the
security side and you know the seaso
folks who are going to say you know here
are our organizational high-level
requirements customise them as you need
to and leverage them and test for these
things and report back right so being
able to take these take the output of
this stick it into a log aggregator and
send a report to somebody that's
extremely powerful because how many of
you can do that today about right all
right so if I wanted to do this this is
what it would look like so I say my
protocol should equal to how easy is
that I'm also saying that my owner
should be rude and my mode should be oh
6 4 4
pretty easy right I do an inspection and
I test my system extremely
straightforward now if you were to write
a script
prep the output what do you do with it
you have to write another script to
export it somewhere and how do you do
that on a hundred systems how do you do
that on a thousand systems kind of a
pain right you need lots of people to do
that or better yet say there's a zero
day vulnerability how do you find out
what systems have that vulnerability
right so if they're if you're running
version SSL if you're running SSL three
how do you know that you're vulnerable
to that I think it was poodle attack
that was fairly recent how do you know
you're vulnerable you could be sitting
there for hours upon hours and instead
execute these tests against a bunch of
systems in one shot and find out how
many systems have that vulnerability so
when your CIO calls you up and says hey
I read about this thing and the CIO
magazine on the plane can you tell me if
we've got this thing and you can say
sure I'll write an inspect test to do
that and you can do that right so it's
it's not a major event so another cool
thing that that we've got here is
inspect shell so I actually want to you
know dive in here for a second and jump
in here so inspect shell is cool because
it's pry based and you can actually
interrogate your system on an ad-hoc
basis right so instead of actually
having to write the script somewhere you
can actually just do it directly on the
system if you want to you know play with
some resources you know see how you know
see what makes the most
to test something right so as you can
see here we've got our help we've got a
whole bunch of resources that you can
utilize so if I say this is each okay
and I can dive into this and interrogate
the system if I can spell there so see
how I just did that instead of actually
having to write the inspect test you can
interrogate the system and there's
there's a whole bunch of options here
right so if I say SSH oops it'll give me
a whole bunch of operators that I can
actually interrogate against right so so
so you've got this flexible open source
language that you can ask questions to
your system about right so how do we
actually put this into practice that's
the challenge how do you make that part
of your process and because it's an
independent language that doesn't
require a proprietary toolset you know
while we would love for you all to use
chef to do everything I know that's not
the reality right so you asked the
question what's what's the thing that I
need to fix right I build it and test it
locally so for you chef folks this is
going to be pretty familiar
yep so I've got actually sorry about
that
get out of here and I'm gonna bring up
an example here so if you look at this
I've got some code some configuration
code and for those of you who aren't
familiar with chef what I'm going to do
here is build and test this locally so
what I've done is I've created system
I've written a couple basic tests and
I'm gonna use Test Kitchen to test them
right so Test Kitchen is a tool that you
can use against as a test harness and
you can use that against a platform
locally in the cloud but what I'm gonna
do here is say hey it looks like these
tests are failing so all I did here was
run kitchen verify based on this
configuration and based on these tests
so as you can see I'm just saying my
port and my sshd config should be 22 and
my protocol should be two looks like I'm
failing so what is it that I did I need
to fix so I'm gonna build and test this
locally and this is this is a super
basic example you know for the sake of
time more than anything but what I'm
gonna do here is just go ahead and
change these right so I know that my
protocol should not be one and two and
my x11 forwarding should say no
and so I'm gonna go ahead and test my
change locally so as I'm doing this you
know think about how you make changes
right now
anybody how are you however folks making
changes today doctor I assume testing
some of your changes you know some basic
integration tests that's pretty good
what if you can incorporate these
compliance tests into every piece of
code that you develop right so you know
obviously verifying every single little
thing isn't necessary but being able to
look at a thing that you're building and
verify that it's going to be compliant
and also you know sometimes when you
build something it makes a change on a
system that you don't mean for it to and
you get to the end and compliance is
like that's not compliant you need to
change this and then you have to go back
right so what if you can incorporate
this early on in the process right so so
that's what I just did here so to finish
this out darn it sorry about that that
was not supposed to go to the end
alright so for those of you who aren't
familiar with Test Kitchen take a look
at it it's your verifier it's it's your
way to build and test locally for those
systems that you want to do some
integration tests on unit tests without
having to go request without having to
go build a new one every single time I
love it when I walk into a customer and
they say yeah we don't really test
because it's such a pain and then we
show them a test kitchen and it's like
yes we can build stuff quickly and
easily we don't have to go copy the
template and install all the stuff and
do all the things and run all the
scripts in order to just test something
basic so check it out if you haven't
already and so being able to test
locally this gives you a quick feedback
loop right so you break something or
something isn't right you can go back
quickly and change it and iterate upon
it right so so this brings us to
continuous compliance right so you've
gone through this process of now
incorporating compliance testing
throughout your pipeline how do you make
sure that it's continuous you really
have to make sure that you're continuing
to test in production so again your
development systems should look just
about the same as your production
systems you can do that if you're using
config management infrastructure as code
and you should be running the same tests
if not every test being the same most of
them should be the same and when there's
something broken here in production and
you see that it's not compliant you say
okay now I know that I now I know the
change that needs to be made and I'm
going to go ahead and remediated using
that same process right so so now you
have a full sir
a full loop of that test feedback
remediate compliant right so so this is
this is how you get to continuous
compliance and this is how you know this
this is how you can incorporate this
stuff very quickly in the process so
write a couple tests ask a question to
your systems are you compliant in this
regard right you know is your sshd
config correct are you running the right
version of SSL do you have this
vulnerability and just just start small
and start writing some tests
understanding your compliance posture
and then you can figure out what it is
that you need to do in order to
remediate a large number of systems so
that's all I have thank you any
questions Thanks
okay excellent couple live do you have a
hand back there we'll take a few
questions
where are the hands like see a hand
waving so inspect you said anything or
almost anything can be a resource right
what if your infrastructure was
essentially AWS and a lot of the
products that they provide the
configuration that you essentially set
with an AWS can that still be something
that you test to inspect yeah absolutely
so there are actually some resources
available for AWS
I don't know that all of them are open
source just yet I haven't had a chance
to check it out just yet but I just
heard about it the other day called AWS
spec and it's it's very similar to
inspect and I do believe that it's
something that may become incorporated
into inspect so the answer is yes so
like there's some you know VMware
resources out there there's let's see
I'm not sure if there's a j''r out there
yet but there's there's a bunch of
platform
and stuff as well thank you um we use
shelf and then we have audit mode
enabled and yes include our audit
recipes after the you know execution
recipe is run yep where would you put
that into this process is this before
deployment is this at run time in
addition to audit mode is this as a one
off against nodes that may have their
chef client running every half hour
where do you go with this great question
so I'll add a little bit of context
before I answer that
so audit mode that's sort of the you
know not to put you on the spot at all
that's the little bit older way of doing
it so we've changed the way you do it
just a little bit so you can incorporate
your inspect tests into your chef client
run by using the audit cookbook which is
similar in concept to audit mode but
basically what it is is a helper that
says go grab these compliance profiles
from you know wherever I'm storing them
it could be you know our you know github
Enterprise instance it could be you know
the chef compliant server they'll grab
those compliance profiles run them on
the system and report back into chef
automates so that's like the whole
enterprise chef setup but you can do
something similar with sort of an
open-source setup it would just be a
little bit more customer ok this was a
very very very cool very fantastic and
for those of you who want to have a
further conversation with Nicole she
will also be I was just checking the
time she will be on the arrested devops
live podcast tomorrow in the same
timeslot the second one after lunch so
it should be exciting we'll do that
upstairs tomorrow
all right thank you folks thank serving
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>