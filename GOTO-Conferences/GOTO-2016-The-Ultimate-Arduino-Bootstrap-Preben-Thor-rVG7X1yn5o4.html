<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GOTO 2016 • The Ultimate Arduino Bootstrap • Preben Thorø | Coder Coacher - Coaching Coders</title><meta content="GOTO 2016 • The Ultimate Arduino Bootstrap • Preben Thorø - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GOTO-Conferences/">GOTO Conferences</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GOTO 2016 • The Ultimate Arduino Bootstrap • Preben Thorø</b></h2><h5 class="post__date">2016-09-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rVG7X1yn5o4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is me what we are not here to talk
about except maybe the one thing that
I've always been a nerd Robin Hood I
think since I was five years old I've
done the most hopeless things with
rubber bands and anything you could do
with a battery at some point this ended
up with the Commodore 64 is any of you
my generation here with that machine you
could do amazing things if you could
figure out what is going on inside this
which wasn't always that easy when you
were 14 years old yeah I can see the
smile on your face mark yeah the reason
why I'm mentioning this is because it
really stroked me the contrast between
what we were fighting back then and what
we can play with today and met in those
12 14 16 year old kids what they can do
today what they have to play with and
this is basically the purpose of my talk
here it is to show one of the easiest
way maybe the most easy way to do these
experiments and make digital products
it started out in 2004 this student a
rando barragan exchange students
columbian exchange student int in italy
the sentence i had on the previous slide
was actually defining his master thesis
he wanted to make a platform that made
it so easy for everyone to make digital
products he came up with a wiring
platform the wiring platform was the
combination of some simple PCB with a
microcontroller an IDE and some
libraries to program the thing that was
modified a little bit one year later
achieve a chipset and everything was
open sourced and then arduino was born
and by the way the name arduino is
actually the name of the bar where the
community used to meet to form the
project back then and this is what are
we know is this is open-source
electronics with the complete stack
around it it's open source electronics
all software open source it has a huge
community i just googled arduino this
morning and i had 24 million hits a
couple of those could be the bar in
Italy but I guess most of them is
actually lab platform it has a huge
community it's being used for
educational purposes at technical
universities all around the world and as
I said it's open source and I guess all
these things together is the reason why
it has a huge community and it's so easy
to get started with this platform and I
know this may sound like a product
presentation for this it's not meant to
be so this is just one alternative of
what is out there if you want to make
digital products but again it's so easy
to get started with this this is how it
looks looks like
also in real shape they come these spots
come in four or five form factors but
this is by far the most common and what
it has two rows with some connectors the
upper row a serious of digital pins for
digital i/o the lower one for analog
input then it has a USB connector and a
power connector and this is pretty much
standard but this is open source so
there may be a lot of vendors
implementing the thing but they have to
comply with the sizes and a couple of
physical characteristics here so
basically they all look the same though
another one could be red or green those
connectors on the PCB are being used to
extent the board and you can find
extensions for anything or everything
here extensions are called shields and
you stack shields on top of each other
on the board here and when I say you can
find extensions for everything I really
mean everything and I know by saying
that that someone out there is trying to
figure out some very exotic thing which
you could not find a shield for but you
can trust me there's a shield for
everything in this world when you want
to program this thing you go to the
official Arduino website and you
download the IDE which looks like this
and yes this is an IDE but it's not say
a rich ide like what you're used to with
visual studio or IntelliJ it's more like
an advanced editor with a compile button
but it works
so let's figure out how we can program
the thing almost any hello world program
in the arrow in world is using pin
number 13 on the board the reason for
this is that pin number 13 is mounted to
a little lamp a little LED so it's very
easy to see if you actually control pin
number 13 we will do the same without
hello world this is my program and it
shows the structure of all programs no
exception in the Arduino world we have a
setup function call which surprise is
being called once and we have the loop
which is being called even bigger
surprise over and over again so what I
do here is in the setup i define that
pin number 13 is used for output today
in the loop I turn it hi wait one second
it goes low and I wait one second and I
repeat everything and talking about
surprises I guess it's no big surprise
let this is the result so this is our
first hello world let's try to extend it
a little bit on the connectors here we
have not only digital i/o we have a
couple of cereal pins of a serial port
RX and TX they can come in very handy
here because the hello words that we
used too often printing hello world
rather than just turning on something so
let's see if we can do the same thing
here
this is what my program looks like now
as I said there's no rocket science here
those two pins on the board marks RX and
TX if you don't do anything with them
they are connected to the USB port which
you use the program the thing and the
IDE has a console so in fact the RX and
TX pens establish the connection to the
console through USB and this is what we
do here so the serial dot begin actually
just initializes the serial
communication at a certain speed and
then in my loop the serial print
serial.print line I print a couple of
case you cannot call it statements but I
print something to the console as the
lamp flashes and this is a result please
note in my console here I have
configured the same speed as it it for
the serial communication so what we've
seen with this or what we can take from
what we've seen so far is that the
programming language is very see like it
is see at least to the untrained eye I
cannot say that deep down in the motor
of things there's something that breaks
the sea specification but programming is
see and if you have any knowledge of C
or some high-level programming language
you can do your things in our in the
Arduino world here
if we go back to the console it has an
input field too let's try to use that
and this is what we do again we
initialize the serial communication in
the loop as long as some data is
available on the serial communication we
read it and we print it so what does it
do well it actually just echoes what I
type in in the input field is being
echoed to the output field one character
at a time or if we do like this one
string at a time rather than one
character which also shows that yeah we
are program programming microcontrollers
here but the language or the library
availability is pretty rich here you can
actually find methods or function calls
for anything it is pretty rich let's
move on a bit let's try to read an input
in the other words you don't need to
pull up or pulldown resistors does any
everyone know what that is no let's say
I want to reach an input on my boat here
this board is being equipped with 5
volts so high is 5 low is 0 I want to
read an input and I want to do something
when the input goes high so what i could
do is just wait for the input to go high
say 5 volts on the input and i would
react to that on the other hand
the way it works is that if the voltage
on the input is close to 5 volts
three-point-something and above its high
and if it's close to zero like one point
something and lower than that it is
definitely low but anything in between
could be anything so if I just leave the
input waiting for it to go high I cannot
really tell if its current state is high
or low right now because it's just
floating so one way to deal with that is
well I could just put a wire in the
input to ground lane is definitely low
and now can wait for it to go high but
if I do so drag it to ground and then
apply 5 volts to it took took to let it
go hi when I would effectively
short-circuits things so no exception
anywhere where you deal with digital
inputs and this is not nothing to do
with Arduino always you use what we call
pull-up and pull-down resistors so what
I do is I mount a resistor between the
input and ground then it's from an
electrical point of view definitely
mount it to ground but when i apply 5
volts to the thing i don't show circuit
things because now it's high but there's
a resistor between high and low so we
call this i pull it down or if I want
the input to be activated when it goes
low then I pull it high and wait for it
to go low we don't need to use to do
this in the other winner world as I said
you always do so dealing with digital
inputs in fact you do it so always that
it has been done for you on the other we
know board this is how it looks in code
so what I do is I say pin number two
should be my input today in my setup
setup function third line my input
button should go high means I want a
pull-up resistor on that input so now I
can wait for it to go low and then I can
react which is what I do in my loop so
in my loop I say if the input goes low
meaning someone is mounting the input to
ground i turn on my lamp and if not I
turn off my lamp and this just repeats
over and over again and by the way the
default clock frequency of this thing is
16 megahertz so this is the speed of the
loop here so now we've seen digital
input digital output and some simple
serial communication what does list do
sometimes questions are so stupid that
you don't do not there to answer them it
turns on my lamp wait five milliseconds
turns off waits five milliseconds and
repeat the whole thing over and over
again what is the result here the result
is turn it on turn it off turn it on
turn it off so on the average it's
turned half way on all the time and
since the on and off periods are just
the same we say that we have a
50-percent duty cycle here so we make
square brackets on the output and if you
mount a lamp to that as we did on pin
number 13 we will just see that the lamp
is on at a lower intensity as if it was
permanently on so this is kind of analog
output that we have here and in fact on
the board this is supported we call this
pulse width modulation which is
supported by the hardware a number of
outputs have been marked with a tilde
those outputs support this exact thing
and we do it like this so I can figure
this one of these outputs for being an
output and I can turn it permanently off
permanently on or two fifty percent ten
or ninety percent so the board has built
in analog output or at least kind of
analog output to a very slow human eye
if we move to the other side of the
board there are number of pins marked
with a something these are analog inputs
let's try to use one of those which we
do like this and what do we do here well
I configure an input one of the analog
pins to be an input actually it cannot
be anything else but an input but still
I do it I read the value with the analog
read which reads a value between 0 and
1023 always and here comes a little
handy utility thing in the map function
so i can map a value from a certain
range into another range and i do this
here and then i'll write this value to
the analog output so this little piece
of software here actually reads an
analog input and the value of that is
being controlled to set the level of an
analog output
so where does this take us we've seen
inputs and outputs digital and analog we
could have done that with simple wiring
too let's see if we can make it a bit
more advanced here this little birds
nest here mounts this component which is
a temperature sensing semiconductor it's
not a transistor as you thought it works
that way that you take one of the pins
to ground another pin 25 volts and on
the middle pin you can reach a voltage
between 0 and 5 depending on the current
temperature of the thing in software it
looks like this the interesting thing
here is the read temperature function
call here so what it does is it reads
the value of the pin remember let that
is a value between 0 and 1033 it
converts it to the current voltage now I
know from the specifications of little
this little thing that it can measure
negative temperatures too so it has an
offset and 10 millivolts corresponds to
one degree so I have the voltage and I
convert it into a temperature which I
print to the console wait five seconds
and I do the same thing over again
result
here we can see another thing when I
tested this thing I try to heat up the
thing with my fingers which kind of
succeeded but it when I release the
thing again of course it start to cool
off again we can see it ended up at 23
points24 widths magically was one of the
values letterhead before this of course
reflects that we have a very limited
resolution when we read the input it's
only ten bits up to 1033 so it might on
the on the hardware side be real analog
input but on the software side is being
sampled at a pretty low resolution
ten years ago it was a very popular
project called LCD proc did any of you
play with that you did yeah I don't hear
oh yeah LCD proc was a little piece of
software for your PC's let allow you to
mount a certain type of dis place to
your pc and then control it through a
serial port or parallel port which were
both pretty common back then those
displays a certain type type of hitachi
displays which have become an industrial
standard for LCD displays that display
we can control we can control with the
arduino to you can buy a lot of shields
for that so you can just mount them in
my case i didn't use a shield so i had
to do the wiring myself which by the way
i brought here the wiring is pretty
simple in this case it's basically for
data pins a couple of control pins to
control contrast and intensity on the
display and then power supply let's see
how it how it looks in software how many
lines of code to think it takes to print
hello world here
this display is so much a standard let
it is support it out of the box but we
know it has a library to do list so what
I do is I define a variable of type
liquid crystal that structure takes some
parameters which are basically the data
pins and those control pins to control
the contrast and the the backlight on
the display and all I need to do is then
tell the size of the display in this
case sixteen columns two lines and then
I could print to the display which looks
like this I just go back to the previous
slide now let's wave with that sorry
this rather make it a bit more event for
first so now i can read an analog input
and come or i can convert a temperature
to an analog reading that i can print
and i have a display let's combine the
things this is what we do here these are
just those two pieces of software that
we melt together please note in the loop
where i define my string will the
temperature i add a space at the end of
that string this display is actually
pretty intelligent it is a real display
it's a real screen it has a cursor so
when i print to the display it leaves
the cursor at the end and if i print
again it will just append so this is why
i set the cursor back to position 0.0
but it could be that the string and i'm
printing now is one space shorter that
the one that was there before so just to
make sure that the rest of the line is
being erased this is what I do here
and this is a result big surprise
we're in a connected world today so
let's try to connect things that we do
here I wanted to pay attention to a
couple of lines here the software serial
library will become your friend when you
program these things this one works with
a shield that I have here this yield is
actually a can bus so it could have been
used in the term some talked just before
but I don't use the canvas here but it
has a serial communication port to on
which I have amounted a GPS unit so in
fact this is not nothing but a serial
port with a GPS
let's see what we do i configure the
software cereal or a variable of type
software series which i call dps serial
to use those two pins that are used to
mount the GPS here in my setup i
initialize my console i initialize my
gps serial line and i print something in
the loop as long as i have something to
read on the gps serial line I print it
out to my console then I wait and I do
it all over again also please note the
tiny gps + line this is actually a
leftover from an experiment experiment
that I did that may become important
later on this is the output I don't know
if any of you is familiar with the nmea
standard of GPS can any of you read this
not really i can't i have really tried
to find my coordinates here I cannot
let's just go back see I include tiny
GPS at the top here and I make a
variable of tiny gps + called gps I'm
using that here so I have made a little
a little function which like all wait
and read in my weight and read I
basically wait until the GPS has some
data ready for me on the serial channel
and when it has i read the characters
and those characters i gave to the GPS
which was this variable of type tiny GPS
from that library that I included and I
asked this variable or this actually
it's not a real object well this
structure to encode the thing for me and
then I do some waiting which basically
just ensures that i want to read for at
least that long until I'm happy what I
get here is well the GPS encodes my data
so in my loop where I call the wait and
read I can take now I can take out the
location from the GPS variable and print
it so rather than reading nonsense from
the GPS unit this is my output and again
I try to find these numbers in this mess
no forget it
so now we have a little device that can
read the position and print it before we
move on we need to introduce the big
brother of the boat that I had just
before this Arduino yawn as it's called
it has another microcontroller it has a
microcontroller with a little linux
kernel so it has two microcontrollers
the one that we use to what we've done
so far and then the linux kernel and
then it actually has a network a network
clock and Wi-Fi
or from a schematic point of view this
is how it's build up the important thing
here is the bridge in the middle so we
have the say the normal Arduino and the
extension and a bridge in the middle
this is how my program looks now I do
pretty much the same thing as I did
before except I include process does dot
H at the top and if you look at the
setup i initialize the bridge that you
just saw on the schematic drawing in my
loop rather than printing my position
I'm calling an upload method now a
function then I wait for a minute and I
do the thing again and here is my upload
because of the bridge and the process I
can actually make a linux process now so
in the upload I can build up a simple
curl command which I can run as a shell
command in my process so what I do here
is I make a post a curl post with
adjacent structure that contains my
longitude and my latitude and I curl it
to somewhere in the world so now being
in a connected world I can actually
upload my position my gps position and I
print the same thing so it's not a very
movable thing i have here because it's
kind of hooked up to my console through
this
so this is a structure that it could
upload let's figure out what else we can
do then we need another shield which I
have here this shield is in fact a
telephone on the back side here you can
mount a sim card it even has two jackets
for earplugs and microphone this is
called a GPRS shield once again the
software serial library is your friend
here that one happens to define a couple
of cereal pins Rx and TX which I have at
the very top here i initialize my
software cereal which my GPRS variable
of type software cereal at a certain
speed and as long as I can read
something on the serial communication I
print it to the console and as long as
there's something as I type something in
in the console I transmit it to the GPS
yield this is what this software do what
does the result is that I can actually
in my console I can type in commands to
this and the way you control this is as
you did with modems back in the days
simple AT commands so if I type in this
80 command in the middle it would
actually dial that phone number there's
a much better example on this URL here
it actually transform this into a little
call center while you can send SMS and
various things from your console and if
you go to the official Arduino website
you can find examples on how you how you
may
HTTP requests with the thing to rather
than curling my structure to somewhere
in the world I could do it they will
real HTTP with this and when I have this
I can actually make a DP a GPS tracker
which I have here um so here's my GPS
unit my GPS modem and a battery here so
that one I could mount in my car and on
my in the back of my children or
whatever and follow the things so what
have we seen here we've seen a lot of
building blocks all of them very very
simple digital input/output analog input
output GPS Network communication which
actually turned out to be just serial
communication all of it everything you
do with Arduino is a combination of
those building blocks and when you start
to combine these things you can really
do magic like this person list which is
something that I'm playing with right
now I figured out this was a bit too
risky to take this on the plane so I
cannot show it to you but what it is is
is an Arduino board it's an e-ink
display it has a little is SD card
reader for some extra storage and a
bluetooth thing with that I have an
extension to my phone so my from my
phone I can send a screenshot to the
e-ink display and here's a big secret
for you I hope this could be the next
generation of the conference patches
don't tell anyone and with these words I
like to thank you for being here I don't
forget to rate this session yeah the
first question is are there any more
advanced IDs for programming the Arduino
especially for the bed and stuff and
things like that well there's nothing
more advanced that what this IDE does
there are a lot of extensions to
existing IDEs they can do pretty much
the same and since it's open-source
everything that I in fact a lot of
alternative software but it's not I so
far I haven't seen an IntelliJ plugin
for arduino it will come yeah another
question is in what you're one of your
first temperature examples you
transferred the voltage to a specific
temperature yeah how would you normally
go about knowing how that conversion
would work especially with different
types of sensors well when I have when I
by the sensor I have a data sheet will
the sensor so it tells me everything the
range and the resolution and everything
it comes with a data sheet okay thank
you another question is how does the
Arduino compared to a Raspberry Pi for
example the Raspberry Pi is much more
advanced that is close to being a PC
this one is well in my opinion much more
simple I'm very aware of that you could
with a raspberry pi you can do Media
Center's or whatever you can do video
encoding there you cannot do with a with
an Arduino because of the computing
power of things so I think they address
different areas yeah
you talked about you sure there's a
number of shields and he said that there
is a shield for everything okay hit me
and well that doesn't have the shield
question but more how could you how do
you go about deciding which speed shield
use duty all around sixty nine hundred
boats or egg egg egg again there are
technical specifications for every field
so it from the text back of my GPS modem
I knew that this one is running at
nineteen to so of course this is what I
use when I initialize my cereal thing I
knew the GPS is 4.8 and again it comes
with specification saying how to do it
and how do you do it when you combine
multiple shields with one solution well
then from a pure practical point of view
I stack the shields then it might be a
problem if they they require the same
pins on the Arduino but most often you
can actually configure the shields so
one thing may be the default choice that
I used here but you could say that no
this year should use pin number nine and
ten rather than seven and eight and
another one is how do you typically
typically move from an Arduino prototype
solution to a more production ready
solution now would you do that well
first of all one thing I didn't mention
is there was a picture in the beginning
that showed this thing with a UPS
connect a USB connector and a power
connector once I have transferred my
program to this thing it stays here so
when i unplug it it stays so next time I
don't need a USB connector to power the
thing is well the power connector comes
in so in this case this is why my
tracker here works with a battery and I
don't need to have a computer at XP
because the program is already here so
it's meant for working offline but
having said that it is open
source and the bootloader and the
software here is actually is open source
and is known by the IDE the IDE has a
menu point called burn bootloader so you
can you could actually take all my sub
components here make your own pc be sold
everything together and then bootstrap
the thing from the ide and there was one
really smart guide was paying attention
very well he said well don't put the gps
box on the back fifty children because
you won't find them because the latitude
and longer long at you there mix around
your solution yes ok well thank you very
much for your presentation and the deep
dive everybody big applause for prevent
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>