<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native To Do List App - part 6 | Coder Coacher - Coaching Coders</title><meta content="React Native To Do List App - part 6 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native To Do List App - part 6</b></h2><h5 class="post__date">2017-03-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PASgarLoQsU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back and today's video
we're going to be continuing with this
little sidebar that we created from last
video we want to add some more stuff to
this finish it up create some lists so
we can hold multiple to do's so first
thing I want to do is actually create a
log out button and I log out button to
work because we don't really need a
login button unless they're logged out
so we basically have two different menus
menu when they're logged in and menu and
they're locked out so first I'm going to
create the log the menu that happens
when they're already logged in that make
sense they're logged in and then we'll
have like some functionality I'll switch
between them so now whenever they close
this button to actually log them out but
we want to do is take them to the oh we
want to log them out so the rest later
log them out is to clear the token from
I think the best way to do is to
dispatch like a clear action so I'm
going to create an action it's called
explore const clear know which caught
log out actually and so this will take
doesn't need any parameters and that's
just going to spit out type logout
um that's good or properly mapping it to
the witch it's the props so the actions
in the props because we already have it
set up so we're going to log out and
then we actually need to do something
with reducer so token log out the token
is now an equal to an empty string and
then our epic we also need to unsaved
their token
this is going to be a log out I think
before I forget let's put it here and
action is going to be of type log out
and then is there a certain page you
want to take them to after they log out
probably the login page and then we're
going to save the token but this time
the token is going to be an empty string
and then you can map the action log out
I will say token cleared okay so now
let's test it come over here refresh
navigation drawer does the components
navigation drawer doesn't exist and then
we're importing it I think that's our
index folder well maybe in a router oops
I see it so I'm just importing something
that doesn't exist there unexpected
token and this is an hour menu actions
file so if I come over to that menu
actions and I just for up an equal sign
because this is a lambda function lambda
function mid ok so we're logged in you
can pull over to the side push this fun
to log out log out is not a function
so I need to do this stop crops we're
not it's not a actions component okay we
walked out and this cleared
we're moving to the login page I'm not
sure what the problem is if i refresh I
think we'll be in the login page yep and
it works just fine if I click log out
there it works just fine but it looks
like we're going to get in there what I
think the air is is when we clear the
token graph ql is trying to do a query
or something unhandled so successor
redirect add token log out token saved
token cleared I'm actually not quite
sure why would be doing a error for this
I wonder if we should just one way
around this
it is if I think we do actions login we
just go into the login page and then we
log out and now if i go to my epic we
don't have to worry about going to the
login page because what I think it's
happening is removing the token and then
we're going to login page and so we're
just or trying to retrieve like some
graph ql stuff Oh Bob calm but if we
move to the login page we're no longer
requesting graph ql stuff so it
shouldn't be a problem what's going on
now
area I don't know why does that
sometimes where it just goes to the last
panel okay we're still getting this
problem I'm just going to remove if I go
to back to the menu I want to try just
moving to login page and let's see if
it's actually moving to the login page
that is the problem if it's like
clearing the token that doesn't like
okay so it can move to this page fine
it's when we actually log out so I'm
curious I'm pretty sure it's the reducer
that's messing things up so here's what
I think is happening when we do log out
it's going to reducers it's going to go
into this token reducer and it's now
setting the token to just like a blank a
token and now the token prop has changed
so now it's coming over here to the
homepage and it's like oh we have to
rerender this component because the
token has been rendered has been set to
empty string that doesn't do anything
and actually maybe maybe we can tell it
not to rerender see cuz oh not I would
be in actions see how we're grabbing
this token prop so whenever the token is
updated its going to rerender this view
right here and so this view does a graph
ql subscript so that subscription is
going to crash because the token is
going to be empty now I'm curious what
if what if we just do a malformed token
well that just go through regular graph
ql air and then we'll be okay no same
problem
I'm curious though if I and get rid of
this and I just clear it from the
permanent storage so Bob Bob com Bob
login okay now log out okay now if i
refresh I should still not be logged in
cool so setting that token messes things
up so now what happens if I log out and
I sign in with a different user though I
want to make sure i think i created
another bog easier I was just Bob Bob
okay I did okay that seems to work just
fine so actually let's not even update
the reducer here keep it like this okay
so I like that so let's add this to
version control real quick so we got
logout button
before we go any further I want to add a
a little bar at the top here I think
maybe it's the router I can do it in
because i said hi navbar so if i get rid
of the hide nav bar with nothing if i
refresh oh we don't want to do that that
we don't want to go back to loading ever
and notice how this blocks okay I don't
like that at all go back I think you
want to add the nav bar to this maybe
your index page kind of where the status
bar is so navbar yeah I think it's
called a navbar this is kind of what we
want
and we just want the actually you know
what what we're calling an app bar is
really just a view so I can actually
just create this myself instead of
downloading a library so i can just call
this view and you know what this is
actually a component i can make and it's
not going to need any navbar GS is going
to be basically a single thing so let's
actually first go back to want to import
it it's going to be up here just
functionality you're not functionality
design component so we're now i'm not
going to make it into a whole react
class i'm just going to say navbar and
we can import navbar from components /
that bar now should navbar be a capital
B though yeah it's fine I guess and I I
want to full screen nav bar now
basically I want to close this area so
import view and text from react native
and then we're just going to say export
default props you might add some props
later and then for now a real simple
return just going to save you and then
we're going to have a text that says the
name of our app to do is I'll just say
for now now refresh that your stay in
Port react from react whenever you make
a component there needs to be right
react imported okay didn't render
could it be I just need a login now
because this should show it no matter
what okay see it here you don't see it
here this email blocking it
want to come back here also to this we
don't need either of those anymore so we
got it working I want this basically
that's what I want that's exactly what I
want
so how do i add a little band at the top
like that hackathon starter kit let's
use that yak to native hackathon starter
kit let's see how they do it so looks
like they have go on yep
up container okay so this is how they
just do their view at the top it's a
menu component source logo images wait
what I should be when it opens though
this is a different let me see what
their project looks like i want that
hackathon starter one so this is an app
container about apt is your tabs we
don't care about tabs well I wants to
view at the top I don't know why the
view at the top isn't loading for a
login page share the status of our first
thing huh just renders what if I just
say style margin bottom 50 not even
affected it's like it's not even
rendering on this okay let's say fine it
doesn't render for whatever reason let's
try adding the nav bar here that seems
to work a little bit better
and our actual router whoops come back
over here yep now we actually get it
look at that to do ok now let's actually
style it to it looks much nicer ok so
we're going to say flex one that should
expand it to the whole length of this
what the heck really mess that up do I
have the drawer open by default so flex
one is not what we want
no it is open is false okay okay so we
want the width of the phone so get with
ya native get with of phone and style
sheet back native so this is kind of how
you should style your react native apps
here kind of like a style sheet so I'm
going to practice that there we go and I
just need to import style sheet
I think we need to import the dimensions
doesn't say though the simplest way to
set of dimensions are commenced by
adding a fixed width and height to style
all that mentioned in the rack day of
our unit list and represent this the
independent pixels should I actually
just use the grid let's just make the
use the grid from this to make this tile
component slider grid Kabam actually
i'll be super easy to make ok let's use
the grid component
and I one icon so it'll be at the top
so poor icon and now with the triple
bars hamburger menu so we're going to
find the name of that kind of like this
kind of kind of that we only want three
of them
not tilted
das why is it the name of it let me see
if there's any other one menu that's or
so how did they do it they did an icon
icon and then just the name so I con
name is equal to men you then I kind of
want to grey see what that looks like
okay we've got our little menu and then
to do's here I think I think I might
know what that status bar thing did
before I think that might just push the
appt down so you can actually see things
you know if this works I'll show you
what I mean so status bar I think notice
how the status bar is blocking here I
think stood staff are my do is just like
put an element here so it pushes
everything down nope didn't do that
maybe there's react react native status
bar
possibly they can give it something
look
I was to control the app status bar we
don't really need to do much with that
so let's not worry about it okay so
react native status bar on top of you hi
I'm just wondering what the best way is
to like bring my view down a little bit
you guys right now it's the reactants
taskbar us on top yeah how do we get rid
of that
what I usually do is add a two key
properties to the info.plist file
really if it wrapping this control
scrollview it says it'll work I like
that fixed if it actually actually don't
I don't want to make it scroll I'll just
see just for the sake of it scrollview
nope that really didn't work and that
kind of messed up more things give it
some margin I'm just curious with the
best the best way to do it because you
would think there'd be an easy way to
just push under
you can choose Finley a new probably cut
edges for extended layout I don't want
to touch iOS code
you
so this is only an iOS problem for now I
just want to say navbar this will be
style is equal to Styles dot container
just say margin top 20 see what that
looks like alright that looks much nicer
now let's set it to the width of the
screen
the oh I can only expand to fill
available size of his parents has
greater mentioned this from zero here
design any fixed width or height or flex
the parent a lot of dimensions you and
flex will not be visible
okay I need to import it from react
native dimensions so const
get the heightened with and now let's
not do height for now let's just do it
with okay that to do it on a console dot
log with make sure we're getting a
number very fresh clear this stuff up
375 so let's set this to like 500 with
what happens that's better what about
like 700
set the width and set background color
to blue so we can see where it extends
and where the boundaries okay so the
boundaries is this I don't know what
this weird gray thing is coming from is
that just the navigation bar I guess
what about instead of margin-top we say
padding I believe that will extend the
blue all the way up it does and I think
that looks a little nicer now being like
this weird gray thing let's pick a nice
color let's go to are we going to pick a
nice color for app that's a nice color
like that one so I can minimize this and
get color picker
you can copy the color whoops now let's
treat your under this get this weird
baby blue Claire I like I'm not in love
with the color but it's better than was
before so let's just keep that for now
now I'd like to make this into a grid or
have this over here to the very left and
then I have like some kind of title in
the middle so to do that what I think
I'm going to do is we're going to create
a grid and i'm going to say column we're
going to two of them put the icon and
one and the text and the other and then
I think the size we want is just going
to be 75 sorry the text is going to be
safe I've there's gonna be 25 see what
that looks like okay that was not what
we wanted I do the wrong components we
don't need this hackathon starter kit
anymore don't need text input shut down
to these tabs we might add to my console
ater yeah is actually want to look a
good component
was the size of three to one nope that
didn't work either
what if i make grid the container so at
what if i say this is grid
what doesn't like about this okay let's
put that back what if i get rid of the
size the size just throwing it off I
don't understand why it's not working
nicely why is it no longer rendering am
i doing grid wrong they do size 25 25 to
grid call a call Daleks all right
is the grid just not rendering up here
yeah the grid just will not render
that's great actually it should render
why wouldn't it render this is just a
view it's at the very top of the screen
there's no reason it shouldn't be
rendering wonder if the padding I bet
the padding top is just throwing it off
I'm just going to get rid of this for a
second and refresh and now we can't see
at all padding top is good not good but
it it's not affecting it so we're
setting the width
well if we said the Fleck so that maybe
flex one nope
the grid just doesn't want to work all
of a sudden we got the grid working
nicely where did I get the grid working
nicely was it this page let's go see how
I did the grid and what looks like I
figure out where I put it the grid let's
to do that's like it a little title I'm
going to give it a different name so I
don't get this title confused this I
thought I was rendering it but Wilson
let's call this a my twos now if i get
rid of the grid though right it will
render again it will so where did I use
the grid before forget what I use the
grid for oh it's for the to-do item so
let's see how I did that
actually did almost the same thing we do
the size we give it on press alright so
let's see go back to nav bar what if i
put a grid underneath here just going to
like put it right there okay so this
will be C 1 refresh okay doesn't render
it of course does this need to be a row
no whatever reason it just will not
render all right forget about that
that's fine I don't really need it to
render I will just use CSS I guess oops
I got rid of too much we can keep the
icon because icon is showing off so now
we want this to be all over here and you
want to pull this up and I'm actually
really bad at CSS so just on first
glance I'm not exactly sure how to do
this so we're going to do some
experimenting so I've icon and then we
have the title react native CSS cheat
sheet
yeah we want to line a line items in the
cross direction for example options are
flowing vertically lands okay this looks
kind of how we want to do it when we
want to line items flex start flex end
yeah how do I do that flex start a line
items flex start a line items flex start
what does that do nothing I want to
align left I guess
left his number of pixels padding left
top
let's go to this cheat sheet good just
do our exact problem react native text
align left actually maybe our Rick this
has some props that we can use see icons
raise reverse on long nope nothing it
did take us here
text a line so we can use text align
center to get this in the center why
didn't that work this is being very
picky oh haha so my thing could have
been working I didn't actually set it I
didn't actually lie was making styles
and not setting them to the actual
component oops and I mean to pop that up
okay what if i said a line items flex
end nope that's not going to do anything
what if I say left even though you're
not text okay does it do anything react
native align components horizontally
this is kind of what we want to do this
dot toolbar where's his tool bark we
want to see the styling he does on that
come on the show us that what's it
called to our title toolbar title ah
he's not showing us the styles for that
come on this is the exact style we want
further like this
we use flexbox to do this
k
so flexbox align left'
so flex container justify items let's
specify react native flexbox align left'
react native just read the documentation
your normally use a combination of flex
directions in a line items it applies to
achieve the right layout flexbox works
the same we interact is a dozen CSS with
a few exceptions the default so
different and flex Locke's theory column
instead of grill and the flex pay raise
for a single number oh here we go flex
Direction row
flex Direction row flex Direction real
now get rid of these stylings haha
that's beautiful now we want to say you
want this guy to be more in the middle
and you let this guy to be bigger I
think so how do we how do we Center it
justify content a line items Center but
only one of them needs to be centered
can I actually go into one item to a
component storage distribution should be
sure that the start at the end available
options are what if I just put it here
does that work when what if I do
text-align center now okay that doesn't
do it I think it was a line items
flexbox one item in the middle
yeah this is basically what we want
apply position absolute apply position
relatives to the flex container oh
actually that's a good idea so what we
should do is we Center this you say come
back
how did he center where's howie centered
it okay so we're going to Center ours
like that
hmm and then the icon exposition 0 react
native absolute position so because we
went all the way on the left side of the
screen Oh a line self let's do that huh
the line self we were mine self which
shows how to tile lines in the cross
direction overriding the line flex end
do background color black just so we can
see how big this guy is is section okay
so we want to extend stretch maybe okay
I want to stretch the other way
okay it's not working ro reverse how
does that you know what I actually just
had a better idea why don't we just do
these absolute because we know the width
of the screen we should just lay out
these absolute okay let's do that I
don't think this flexbox is going to
work for the type of layout that we want
so how do i set the absolute position
position here we go position absolute
position react native simulator but
everything is set to relative by default
so absolute positioning is always just
relative to the parent if you want to
position a child using specific numbers
11.rulers a parent to set the parent a
present position
okay there it is position absolute we
can still do the Flex row I think
actually and position absolute on left
left is going to be with divide by two
and left is going to be zero for
position absolute okay the kind of work
but now that thing is all the way up
there why did it come up here right to
do text-align center will that do
anything
why is it doing that I'm really bad with
styling okay for now let's say forget by
having a title we're just going to have
an icon right now
so the absolute positions not working at
all because I notice when i Gotter the
flex thing it totally went away so we'll
just leave it like that for now and I
want to make it a little bit bigger I
like the look of the one they had see
where is there's no this icons knows its
side yeah side menu so what was it a
shame there's mine my knees a little bit
padding left padding bottom and then
it's about the same size i think so we
just need to say padding bottom like me
five const will be left bottom padding
left bottom padding heading left gets a
little bit better can we get a little
bit bigger actually i'm just a little
bit bigger size 26 let's make it 30
that will be just this component I think
set the prop directly okay I like that
now
on press what we will do is we will grab
from our props a function that we will
call crops dot should i do it on press
now because i don't want to get that
naming call back see props that menu
button click and now our save and you
save that side now here i can pass in
menu button clicked
constructor props this dots first call
super this dot stay will say is open
pulse and this thoughts data is open and
when that is clicked what we will do is
will say this dot set state is opened
it's now equal to the opposite of this
thoughts state is open okay so refresh
what happened anything
okay console about log click ok so our
on press is not working so that would be
our actual navbar component oh I
actually need to call it there we go
cool now we
to open and close their nap or with our
menu button here that so just look at
that again can do that we can logout
smooth so let's go ahead and save that
because that's a good change um ave bar
with the drawer icon will push later
okay so we have a log out why is there
so much space here I kind of want to put
like the work more on the navbar sorry
nothing I bar the menu Oh padding top
we're just putting it a ton of padding
top times if i get rid of padding top
also there's this weird gray color i can
change that color looks like okay that's
perfect now it's right at the top it
like that and the first list item could
could be there
well they're like username so this will
be negative 2 um title will say this
thought props thought user email and now
we actually need to create that and for
now on press will do nothing it'll just
be show their email so we need to
actually create a reducer called user
and then we actually need to pass that
in user user and actually some map oops
we need to map that user sequel this
your state user so now we have a reducer
export default so the state default
state is going to be an object switch
statement action type default just
return state case um
let's just set user here an action dot
user so we should get the user when we
login so that will be 0 does that mean
we need to persist them persist the user
as well because if they if they're not
logging in or should we just do a call
first I need to come back over here so
this doesn't crash if the email actually
exists then we show it else we just show
an empty string ok now when they login
we can set it we don't need this stuff
anymore I guess it's a fine this still
print up actions because that's helpful
so how do we want to get the user well I
guess we kind of want to just get the
user every time ok I know how we're
going to do this so in the login page
they for when they login get the login
mutation then login succeeded and when
we login right now we're only grabbing
the token right
but I think we can actually grab more
login
gives us an authorized type we can
actually get data and we can actually
get there to dues for not doing that's
fine we really just want the email
so get the user I think it's email as
well so when login succeeded to just
make another yeah sure you can another
action that says set user actually we
should be capital I think and long it
and then email actually no it's going to
be called data because data is of type
user and then email and then set user so
we need to create an action called set
user set user pass in a user set either
okay so now when we login see if that
works that will set the email for us
this stop props a easier evaluating
should have at least gotten an empty
email
console dot log to stop props tight user
where is this the props that user should
be an empty object console dot render
render undefined ok why is to user prop
on to find them should be grabbing it
from that because we haven't logged in
whoops I keep pushing navbar so they're
actually going into menu
so if this stop rob stott user and this
stop props dot user email let email
string email is equal to this soft crops
by user die email care how about that
what
all text once you wrapped an explicit
text component so you're telling me I
can't do that
do I really need to do this really okay
because it's a variable I've never seen
that before okay bug out
oops
login failed I was longing in fine with
this a second ago show you this one
login field all my logins are failing
now authentication token missing what
did I change that would affect this
bah-bah-bah com Bob oh I know what I
mess with the login query that was
supposed to be data Michael
ok now we should see Bob up here because
we getting bulb here so the dot log data
data data log in updated by email ok
refresh log out I need to change that
whenever I push a button it refreshes
and closes the drawer ok that's actually
working ok so then is our reducer not
working possibly we're sending the
action set user so user set user action
I user we just console dot log should
about user setting user and then I'll
get up there problem I forgot to add it
to the Rue reducer
I'm going to get rid of that that's
really annoying me I'm capitalizing by
default should get rid of it and login
to actions let's give you 30 texts and
put don't capitalize react native
capitalize auto capitalized none what's
the default don't auto capitalize
anything auto capitalized none let's
copy that also put in our signup one
cool and let's see if it works over here
cool
nope not seen Bob so let's come back
over here let's make sure our reducer is
being called and reducers getting the
right stuff so console dot log set user
console dot log action values now this
is where automated tests come in where
they'll automatically log in for you I
don't have to type this in every time
okay so set user so Bob is being set
correctly so we hear that our index here
user state died user via
this type products they use your that
email just console dot log this stop
props
user is an empty object that's fine and
you would think I could do this stop
props user email so I work now kit does
now let's log out
when I come back end user is equal to a
string got it that's the problem our
reducer not reducer are all the way back
here login index actions view we don't
pass in just a token just the data we
pass in all the user and all the user in
this case is just that they use the
email but it's a good practice for
further in case when add more things and
we see Bob very nice now when i refresh
and I just come in here I would like to
load the user so but i'll be the home
component that'll do that in actually i
think because we'll need to do a graph
ql query for that actually will actually
be should be doing that and this menu
component i think because this is where
we want it to get the user anyway so
let's actually do that
assuming they're logged in that is which
we will do next so we're going to get a
viewer that's actually a query that
we're going to do viewer actually I
think what I did all that for nothing
because I think when I do add this graph
ql query it'll cover they'll cover both
cases both when I logging in and when
they're just coming to this page because
now we have their token okay so with
this in mind I could delete everything
that i just created fantastic so that's
gonna we really just want to grab the
email and the ID and actually I'm doing
in this in the home page already i think
because i'm grabbing the users to do
beer we can also just grab their email
so now in the viewer query we can set
user this stop props that's set user
next props that viewer top viewer dot
data I think it is what do I call it
here
go to the query viewer viewer just
returns a user which has email
ok so now and we're going to do this for
the home page whether or not they're
logged in actually yeah that's fine I
was thinking for a second when they
login we can also grab them there to
dues that can be like an advanced thing
we do later so log in action
we really want to give this action to
the home component they're going to be
using it now and so we don't need to set
user there because after we login we go
to the home page so we're going to do
that queer you no matter what so now we
see Bob here youryour fresh awesome
that's looking pretty nice um this seems
like a good stopping point for now we
got this nice little menu working we got
Bob showing up we got a login logout
screen up working in the next video I'm
going to be working on setting up the
lists so we have multiple to-do lists
that we can set up so thank you guys for
watching and I'll see in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>