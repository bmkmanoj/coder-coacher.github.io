<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Setting up Storybook with React, TypeScript and Emotion | Coder Coacher - Coaching Coders</title><meta content="Setting up Storybook with React, TypeScript and Emotion - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Setting up Storybook with React, TypeScript and Emotion</b></h2><h5 class="post__date">2018-03-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/06ecEUSGSq4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so Pinterest just released
their UI library that they use for react
and I took a look at it it not was just
really inspired to set up my own UI
library for the project now I'm working
on and to build kind of components like
they do and just as a side note if
you're new to react or if you are trying
to find some good examples this
repository is very good go take a look
at this page packages and just come look
at some of the components for these
they're well-written and they're in
react and you can kind of see how to
build a lot of the components that you
would need for application and react and
styled well too so I've been meaning to
set up storyboard or story book I mean
which is a application to kind of help
you visualize your components and
isolate them off so I tried setting that
up because I wanted to use that for my
UI library to just be able to see the
components I was creating and I had a
real rough time trying to set this guy
up
so here's story book so what I wanted to
show you guys is how do i I finally got
a set up probably took me half the day
to do just to get it set up without with
just like regular JavaScript was
difficult and then I wanted to use it
with typescript and then I wanted to use
it with emotion and that just added
complications but I finally got it so
we're gonna dive in how to actually do
this and now the project I'm gonna be
adding this to is my boilerplate that I
had for typescript and a motion for
create react app but this is valid for
any project you have if you want to just
you can just stop when I get to the
typescript part if you just want to see
how to do this with a motion and
storybook but I'll also show you how to
get this with typescript alright so
let's take a look so first what I did
was run get storybook in my repository
of my project and that'll go and kind of
just
like on Dirk auto-configure some stuff
create some folders and download some
things so here's the project and this is
what it downloads for you these four
packages right here but there's some
other things you need to make sure you
have first thing is types so this is
only valid if you want to use typescript
but download these types right here so
this package for that Elad types for
store book now it doesn't cover
everything which sucks there might be
other packages but I can find anything
else besides this but this covers at
least some of storybook now other thing
you need to make sure have Babel core I
use babel preset if and then I was using
this bridge for Babel core I needed that
and I also needed Babel loader now the
versions of these might change but make
sure at least if you're in this range of
versions
you're gonna need eight for Babel loader
and then for Babel core notice this
one's at beta seven and this is the
bridge and then I'm doing at Babel for
these okay so like this might change but
if you're using Babel make sure all the
Babel things are the right version
because you can run the trouble having
Babel core be different than your babble
loader version it just is it's awful
real fast and then also make sure you
have the babel plugin for a motion if
you want to use a motion okay so once
you have those packages installed what
will happen is there'll be a dot
storybook folder that's great for you
now inside of that there's gonna be an
add-on such a s and by the way when you
run the get storybook that's how this is
added so here's a hat on such a s this
has nothing had to change there and the
config I changed a few things in the
config so first thing I changed dot js2
dot TSX because I'm gonna be writing my
files in typescript and then they had it
a different directory like stories or
something for me I wanted to go inside
of source so source and a folder called
UI is where I wanted it so I just
changed the location of this and I'm
looking for all files that have the dot
stories TSX so here is my story but
we'll get to that in a second
so that's what I changed in the config
now I added a new file to the dot
storybook called web pack dot config dot
GS now this is where I changed some
stuff to get the configuration working
so first off how it works is this gen
default config with the base config and
then what that does is this is the
default web pack configuration that
storybook uses but you can modify it and
as you see here that's what I actually
do so first off off the bat since I want
to use typescript I need to tell web
pack hey we're resolving TS and TSX
files and then next the first rule is
babel loader and now by default it's
only looking for I think JavaScript
files because story book is not using
typescript so I need to tell it to look
for typescript and TSX files as well and
then I just added the preset for some
reason this was missing for me this
might not be missing for you but didn't
have the preset in for babel loader it
does go ahead and load your dot babel RC
so it will pick up the emotion plugin if
you have the dot babel RC next up I'm
adding the typescript loader because by
default it's not in there I'm putting
transpile only H so it doesn't check
types but again if you want it to check
types it could I'm pretty much just
checking the types myself and then I'm
including my source directory and then
just using the typescript loader and you
could also use awesome typescript loader
here as well if you prefer that one
which i think is a little bit better but
I already had typescript loader in this
project so I didn't want to install in
our package just for nothing and then of
course we're looking for TS and TS
files and then just a quick tip if you
guys are having trouble with this I
talked about this before
when I worked on this with the config
overrides I would just json.stringify
the config file and then put that in a
JSON format or to look at and just
console.log this when I was having
trouble to take a look at what the web
pack file looks like so you don't
actually need that but it helps when
debugging so you can see what's going on
and notice I also unshifted this and
rules
what unship does is that at the
beginning of the list and the reason for
that is web pack loads right-to-left or
in this case there's a bunch of rules it
loads the last rule first
so TS loaders the last thing I want to
load I want Babel loader to go first
so Babel loader is gonna be rule number
one
after we unshifted cuz TS loaders gonna
go in front of it so what'll end up
being is we're gonna have TS loader and
then apple loader and then we have some
other stuff like file load or whatnot
but goes right to left so babble loader
will go first and then TS loader at the
very end okay so this setup got me able
to compile stuff okay
so awesome let's take a look this is
kind of how I want to set up my UI
library I'm gonna create a folder for
each component and then in the folder
I'll have like it index on TSX
where in here I'll go ahead and put my
button here or you know whatever
component I'm creating and then in
button dot stories over here this is
where I'll actually have the story for
the button so here standard stuff is
going on here right if you're familiar
storybook and also I've used it too much
but I plan on making a tutorial further
in the future on storybook and how that
works as I get to use it more so other
weird thing is I am having to add these
TS lint disabled lines because by
default
these are not loaded their dev
dependencies so you can either move
these two regular dependencies or I'm
just gonna put TS lint disabled for now
and then notice I am importing a star
react and you'll notice I have no TS
line errors so the reason for this is
one I imported the type or download the
type and then to I create a storybook DT
s over here and a folder called types
and I declared two modules so if you
didn't know you can actually do a start
and your declare modules and this takes
care of these two types for me not one
pack we don't care about what pack index
this so these two were taken care of by
that I had on star and then react in
though so these are the ones that don't
have typescript types so we just declare
module firm but yeah so that's it that
storyboard or storybook and how to get
it set up and then this is what it looks
like and we can see react motion is
making the button read so sweet it did
indeed work and load but yeah you might
get you guys might have some trouble
setting this up take a look at this
repository and use it as a tool take a
look at my web pack config and my big
tip for you guys is to JSON can
stringify in console wallach when trying
to deal with this but yeah that's it for
this video guys thanks for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>