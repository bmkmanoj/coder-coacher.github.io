<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native Tutorial - Silent Auction App Part 11 | Coder Coacher - Coaching Coders</title><meta content="React Native Tutorial - Silent Auction App Part 11 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native Tutorial - Silent Auction App Part 11</b></h2><h5 class="post__date">2017-04-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_LDnq4Eshfw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome back in this
video we're going to be working with
sockets so we all we'd like to do is get
real-time data on the options what
options are currently available and when
they're added we should see them pop up
real time and just see like interact and
you should see the screen updating
without doing anything should be oxygen
coming in and out that sort of thing so
we're going to do is use sockets to go
about doing this so I'll show you right
here how feathers just the socket so
we're going to basically do something
like this where the service we're going
to say auctions here and then on
whenever an auction is created we added
to our list of options and then secondly
we're going to emit in action because at
first we don't want to just listen for
the we want to like get previous ones as
well we're going to socket that emit
right here to find this will retrieve a
list of all their auctions so those are
the two things that we're going to do
and notice here we use an actual socket
object whereas here we use the service
method so if we come back to our code
and we go to modules indexed here we're
going to want to export our socket as
well so we're exploring our socket i/o
app and your socket and i'm going to say
socket app so it's shorter okay so we
have access to both of these now and we
want to use both of these and our few
auctions so let's go ahead and import
both socket and socket back from and
this is our modules folder so if we go
up one and then two modules and then
yeah the index file which will grab
automatically
okay so we have both of these and we
actually need to turn this into a
regular react component that has a class
because we're going to need to use a
component will out so class it was
called you auctions extends this is a
react component component and then we're
going to have a render function here
return oops and we can move that inside
of there so inside of return and return
looks slightly discolored I think I
think usually it's yellow so wonderful
syntax error or something it's real
quick on a refresh and see if I have a
syntax clear we haven't done anything
that would cause the syntax error oops
we should online 28 we haven't done
anything that should mess anything up oh
oh I did this wrong area this should be
a curly brace I'm so used to lambdas or
anonymous functions that I did like that
so component will mount is what we want
to do and so the complain the component
mounts we basically want to set up the
socket connection so here we're going to
say socket act top service auction and
we're going to i think it was low and
then dot on rants infer created and
let's look at what the other on created
and then message so this will be
auctioned
and when we get an auction what we want
to do is basically call an action to
update our restore that we got a new
auction so maybe call it option created
a center auction get this from Vista
props so now that we have an action here
that we want to be calling we actually
need to make this a connect this to the
Redux store because we want to call this
action update the Redux tour so what
we're going to do is we're just going to
add a few auctions oops that needs to be
a folder view options and then we'll
move this guy inside of there and call
it goo jf and then it needs to have an
index folder which we can copy from sign
up speed of auctions ok so now view
options has an index and a view and
we're grabbing the view here we're going
to have to auction created and this is
we're going to create a new module
called auction or we call I guess we'll
call it user so should be auction see so
we'll create that module and this will
be auctioned created so now coming back
to our view we not only you want to
listen for when actions are created
remember how we wanted to fetch all the
auctions at first using this let's just
copy that so for us we're going to do
socket emit it's going to be auctions
find is good we just want to find all of
them so we don't put anything there and
so air and data and let's just for now
console.log it so you can see
found all auctions let's just
console.log this I'm going to comment
out this auction created that way
because we haven't created this action
yet so we can see if we get all the
auctions by running this and I'm going
to go back to index comment you out
comment to you out and we'll do that in
a second so right now all we're doing is
when we load the page we should fire off
the socket can emit a message and we're
saying find these auctions all right
three fresh and see okay modules oh this
needs to be out pull more folder because
we added a folder now you must pass the
component to the function return by
connect instead of nothing poor view
view this needs to just be export a
folder for a class refresh all right and
then lets you there should be something
about auctions here options found all
auctions undefined so maybe there was an
error also saw log air or possibly there
are no auctions let's find out because i
think i might have wiped the database
accidentally all right no auth token not
authenticated okay so doesn't like that
one authenticated so I go into the
modules right here we can add on
education just like we did with our
restack
now let's get out a refresh are we still
getting there found all auctions
undefined feathers here not
authenticated refresh again let's make
sure it care so looks like we're going
to have to add pass in authentication
token ourselves so we can get rid of
that and the only thing I can think of
is to do like access token and pass in
the access token which we can get from
this props that user access token now
because we're giving them access token
from the user and we're adding the user
to the store so let's grab the user here
too oops so when we connect we need to
get the user from the redux store so now
we have the user there but I don't think
we actually passed an access token with
the user when we login / up with acute
response talk yeah didn't I saga right
here see how we do response by user when
we receive the off and we're not passing
in okay I'll do in the API and now this
is bad list in the saga so what I want
to do is I want to get responsible
access token as well so it'll be access
token is equal to response that access
token and then we're just going to
we're going to get all of the user so
this look good yeah okay so instead of
just passing the user what I want to
also pass in as access tokens we have
access to that so vax is token and we
have user here and I want to do the same
we receive the login here so when we
receive log in or receive off we want to
also pass and the access token all right
it looks good to refresh that and see if
it likes it better Cape still not
authenticated let's make sure we
actually are getting the access token
like we think we are so I'm just going
to do console dot log excess token and
then pass it lists all props that user
that access to all right refresh that so
access token is undefined ok so we're
reading undefined here let's print out
what the user is
because look it's coming back with the
access token okay for whatever reason
the user is just empty because it looks
like it gets here the user's empty
interesting it looks like it's coming
here okay so the user is empty right
here right but notice the sequence of
print statement component will mount for
our view auctions is going right here
and then we're printing the response
from the server but we shouldn't even
get to this page before the user is
authenticated like we will not mount
this component until the user is
authenticated so it might be a problem
with our author required console dot log
let stop prob site user auth comp
now look oh you know what and we're
passing we don't need to pass the props
and I wonder if that was messing up
let's see all right on that okay sound
all auctions undefined still let's just
read through how is this good okay so
off comp and we see this sound all
auctions is undefined still okay so off
comp is nothing and then we get access
token okay so this should not be
rendered but it is getting rendered so
object keys this stuff crops that user
is equal to 0 if it's true we should be
loading this so let's console.log about
you this should be false or sorry this
should be true let's see if it is false
it's false it should be true so that's
what our problem is and this stub props
users an empty object ah that length is
what i meant to do i meant to check the
length of the object yeah see if has any
keys all right now
access token has this cool now we
actually are passing max is token so I
was a small bug and our required off or
alt required now our access token should
actually be legitimate and access to
this should actually be giving something
but it doesn't like it i'm guessing
because we're not authenticated oops i
meant to refresh over here ok still
doesn't like that we're not
authenticated so i have to authenticate
in a different way than what if i also
if i do both just past the
authentication token in and I also do
off that way ok still authenticated if
the docs have anything just right off
the bat with authentication they have
off on the side panel here we owe the
good place to loosen their customers are
at authorization
okay i'm not sure why that is i wonder
if we can fix this on the server side so
i'm just going to go to the server code
real quick when i go into my services
and my auctions in the hooks interesting
so for whatever reason there's not even
anything blocking we didn't add
authentication two sockets it's auto
authenticating okay so this looks like
something that's going to require
further research so i think i'm going to
leave this video off here in the next
video we will get this authenticated
with our sockets that way we can get
sockets authenticated and actually fetch
these auctions so thank you guys for
watching I'll see in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>