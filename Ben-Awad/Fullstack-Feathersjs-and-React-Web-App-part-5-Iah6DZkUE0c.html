<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Fullstack Feathersjs and React Web App - part 5 | Coder Coacher - Coaching Coders</title><meta content="Fullstack Feathersjs and React Web App - part 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Fullstack Feathersjs and React Web App - part 5</b></h2><h5 class="post__date">2016-11-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Iah6DZkUE0c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back so in this video
I'm going to be showing you how to link
up these recipes so right now I'd like
to click on these recipes and go to like
a separate page for example like slash
view
slash and then like some kind of ID for
the post and to go visit and just look
at just that recipe maybe get like a a
more in-depth I want to maybe see the
ingredients for this post or whatever so
let's jump right into that
so we're going to go back to our client
application and then we're gonna create
a new component it's gonna be single
recipe doc GS and we're gonna import
react
and we're gonna import some semantic UI
things header image segment container
we're gonna create our class single
recipe extends component
and before I forget let's go ahead an
export
export default you
single recipe
okay so for the single recipe we're in
need a constructor cuz at the beginning
of the load whenever you load this page
what we would like to do is when we go
to for example view and say like this
idea right here what we'd like to do is
a grab the ID of the post which we put
right here and search the recipe I'm
using that so that's gonna be a
parameter and the router so we can get
this by doing this stop props dot fetch
recipe this is gonna be the function I'm
gonna call like it actually fetch the
recipe this stop prop stop params dot
recipe idea okay so we're gonna create
an action called fetch recipe which
we'll do in a second and then this is
the parameter this recipe ID is that
thing right here that we're gonna grab
I'm going to pass and actually fetch
this from the API or feathers date from
the feathers server and and look through
the database and grab that ID you with
that
now to actually you get this working we
need to add that to the router so we'll
do that a little bit later as well so
now for our render function once a
recipe has been fetched
we can actually start doing stuff but
until then we kind of just wait are
waiting on the fetch to happen so we're
gonna try it we're gonna get the recipe
from this props we'll call it caress P
and then we're gonna check if recipe has
property name that means it's finished
loading or if it does not have it it
means it's not finished loading so we'll
just put out a paragraph tag saying
loading we won't actually see this
because it'll load faster
you know rerender below but that's good
to have so we don't get null exceptions
not no exceptions but undefined
exceptions okay so now let's do it's
gonna come to this return statement when
we actually have finished fetching the
recipe because what's gonna happen is
we're gonna make this a saga and that's
gonna happen in the background we don't
know it's done so we're just waiting for
it and when it is we're going to display
a header this will be in each one and
this will be the name of the recipe
so recipe name and then let's get the
image for this recipe and set the source
equal to the recipe
imageurl size equals medium and let's
Center it so centered and then it's
create a signet group
and then in between that we're going to
do all a recipe are all our ingredients
so recipe ingredients map and an
ingredient and index we will be creating
a segment and the key is I
and then in between that will just
display the ingredient
and lastly this is a container for text
we'll just display
the description now what I want to do is
split up the description by new lines
and for every new line I want to map
that to a new paragraph tag that way it
renders nicely on the screen so what's
up the key equal to I and then the
content equal to D oh close to the
paragraph tag as if we just put the
description in one big paragraph tag it
went rap nicely but for every new line
if we split like this it'll rap pretty
nice okay so that's perfect next thing I
want to do is actually
oh let's do a semicolon next thing I
want to do is get into the actions and
actually create this fat recipe action
right here so if we go to our actions
we're gonna create a new action now
we're gonna call it fetch recipe
and it just takes one parameter the ID
of the recipe that we're looking for and
we'll call it recipe fetch requested as
the action
okay now actually let's go to our saga
and implement it there okay so we're
gonna be taking two of these guys so
this will be fetch recipe
so be call
fetch recipe
and then this will be fetcher SP saga
and then we're gonna change this to
recipe fetch requested and then we're
gonna call that recipe or pass it the
feathers app and then we also need a
fork it so fetch recipe saga and inside
our fetch recipe we're gonna do stuff a
little bit differently our API we're
gonna get a new one called fetch recipe
and then we're gonna call fetch recipe
passing in just the ID so action dot ID
and then this is going to return us a
recipe get rid of that
and then once we're done fetching the
recipe we actually just want to put the
recipe in like this and we want to send
it to the reducers that way they can
Sippi fetch done passing the recipe that
way the reducer can go ahead and add
that to the state okay so we just
created that let's go into our API and
create our that recipe so services API
it's going to be very similar to this
one now fetch recipe
everybody gonna get the ID as a
parameter we're gonna do the same thing
we're gonna get the recipe service and
then we're gonna find we're gonna use a
query but the queries gonna work a
little bit differently because we're not
gonna we don't want to sort anything the
first thing we want to do is we want to
limit it to only one result because
we're only looking for one recipe and
then we're looking for to match this ID
that was passed in so what its gonna do
is it gonna look for one recipe in the
database that matches this ID and then
return that idea or that recipe now we
need to make a reducer so good reducers
will call this kur recipe dot script and
call function crispy
stay low keep an empty object if we
haven't fetched yet and then switch
action not type case and we're looking
for recipe fetch has been completed
which is done when it's done we're gonna
return the first recipe found but we
can't just do action not recipe what
it's gonna return us as an array with
all the objects that found we're gonna
do a little bit of error checking we're
gonna check if I found the length so if
the length is not equal to zero then
we'll get the first element if it's
returned us no objects we'll just return
an empty object so and then our default
will just return state
and just export default caress P now we
just need to add this to our route
reducer real quick so your recipe
thank you sp okay that's that
next thing I want to do is actually make
this route so I want to do view and then
we want to take a parameter the recipe
ID so let's make that route in the index
so if we come right here just create
another route
and this will be / view then we're going
to take it parameter recipe ID and then
we'll serve up the single single recipe
okay so we're going to create get that
rock component single or SB
awesome
now we're just gonna go to our app real
quick so components app oops
and we just need to map it to the state
so Caressa P is equal to state Caressa P
that's just getting it this is what we
called it in the reducer and then
finally I just want to add this as a
link to my recipe card so that way we
can actually click on them
that will be you make an on-click
and in this on-click we're gonna do
browser history so let's import browser
history because after we click on it we
want to actually go to that we want to
redirect them to the page of that recipe
so we're used browser history dot push
we're gonna do back ticks
we're gonna go to view slash and then
whatever ID the recipe is so it's recipe
dot underscored idea it's the value and
that should work for us let's go check
it out so if we go to the main page and
click on this one notice how it takes us
to the single page for it we see the
description we see the ingredients image
there and we see takes us to the page
that we want and if we say get rid of
that it will take us we'll just start
loading because we can find it then go
back home click on another one of these
up looks like we can't find it
let's see if there's a different error
go to our console we can check out what
happen you cannot read proper you have
split so in this case we try to split
right here we go to components single
recipe
recipe descriptions split because this
mesquite is not have a description it
crapped out on us but this one has a
description oops refresh the page
there you go because this one has a
description it worked good so we need to
make sure we force users to add a
description
they can't just leave it blank so in the
next video I kind of want to show you
guys how to set up the sign up so you
can create new users and start doing
some authentication so we can have a
login page and we can have a navigation
at the top to show logged in users and
that sort of thing
so thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>