<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native Tutorial - Silent Auction App Part 8 | Coder Coacher - Coaching Coders</title><meta content="React Native Tutorial - Silent Auction App Part 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native Tutorial - Silent Auction App Part 8</b></h2><h5 class="post__date">2017-04-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Lr8wnYWBqJE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back so the last video
at super long so I just cut it off and
I'm going to start right back up where
we were at so we kind of had this sign
up page almost working so we have some
errors in it and if we just run it I
believe it creates the user but if we
have an error that is not working it so
we come back up should have like a
console logged what happened there can
run it again we get in the air like we
expect let's handle the air case real
quick so airs need the first one path
username so the value should be tom so
for whatever reason Const username conf
airfield is equal to air airs 0 path and
let's log and make sure we're getting
the right airfield and then here i can
say airfield um you're not familiar it
putting the brackets around it like this
gets the value of airfield so 3 run that
unexpected token at eleven
oh it would be a semicolon okay refresh
okay QQQ actually now I want I want to
get an air so q all right undefined okay
so it's not actually airs in the first
value and pass airs first value and Pat
what would think you'd be working with
not let's see object got keys just see
maybe I'm getting the wrong one consoles
outlaw oh I was stirring there under
that was the problem it might have been
i ain't don't know if it was so comes
out blog now we can say air airs and
let's just see what that equals so
refresh we have a alright so they were
possible key they're right here one of
the key is airs and when we click on
airs or return this app using oh here we
are user name okay this looks this looks
like it's getting along right thing that
looks actually right alright cool no
more air
so you get rid of that so I goes I just
want to console log the response perfect
either way we should be getting an error
back and the response Oh actions sagres
API here we go we need to say error
false response is equal to this await
and we should probably say a constant
respond equal to that okay there we go
and now this error is equal to true so
this will be um spawns I'm not sure when
i call it's actually about airs get the
first one to the air is true airfield
response is equal to an object and in
that object there is an error alright
this looks nice so basically we're just
passing back whether there is an error
or not and telling them whether the
responses an air response and actually
we want the response to be an empty
object here okay only reason we wanted
to be empty is because we want it to
once you've created user you don't
really stored in this day or anything
we're just passing it back so there's
not an air okay eh eh be cool now we get
an air for that saying we have
basically a do quit one so now if I go
tom tom I get that Tom two is ok right
on that again we get an error there
should have be getting an error though
because we shouldn't be able to have
duplicate emails not sure what's going
on there don't want to cause the log
email out now I think it's time I think
for now we can do is if there's no air
we can say import actions from react
native router flux and then we can just
create a dummy page for now this will be
view auctions saw GF import react on
react actually you know what we don't
even need this page yet take you to the
login page so once you sign up you can
now say actions login so that will take
you to the login page and we can put
that up here ok so basically we create
create a user and we save this in the
heirs we return it back there's nine
years we go to the login page and you
can then sign up with your user ok so
let's try this Bob Bob tongue and cool
take this back here Lucic successfully
made a user called ball now if I do Bob
Bob should turn air cool because we're
you have a user called Bob all right
tell us here we have an email called Bob
alright cool so I login or signup page
is done it's all good so now let's
create a login page and funny enough
where you can actually just pretty much
copy this and call this login because
the logins are basically the same thing
except here we're going to request a
login here we're going to call it we
don't need a username we only need an
email and password and we call this
login and we call this request request
login request login
and here what we doing don't need a pass
there's no and I with this password but
there's no email or sorry no username
can just get rid of that here we can
request login change that and to the
sign up here we can call this log in at
the bottom here we can call it a SAT
login form and this is Lauren so
basically we're just refactoring our
login or sign up to Cullen calling it
again so now let's create the backend
for that so actions this will be a
request and this will be log in and this
will be the same thing and now we're
also going to have a receive receive
login sive login request boggin so
request login risky volume and now from
our sagas here we can copy that we can
export it
you can take call log in this will be a
login saga and then our imports here are
going to be requests login and receive
login quest log in when we get a login
request we're going to call log in we're
going to start a submit for the login
page we're going to call log in we're
going to wait for the response and if
it's good we're going to go to view
auctions and so let's get the login page
few auctions and port react from react
and port text react native export
default and just view options just so we
can see that we're on the auctions page
and can create a scene here view options
view auctions view auctions perfect
looking pretty good here what we want to
grab is the actually do the login so
here we're going to get to get the rest
app so we can do an authentication so we
need to export that and this isn't our
route reducer come back to action on
actions ap I mean and we're just going
to copy that and we're doing pretty much
the same thing so sign up now login
we're going to say ab 0 indicate passing
in our payload but we also need a city
strategy is local so we will just spread
the payload dump our variables and then
return and actually we do want to return
stuff here and we will return to the
response and if there's an error this is
a fine thing to do but we also want to
let's say this is successful we want to
save the access token in local storage
if you will the local storage for react
native is different so local storage
react native they use a different term
for it so and actually if you come back
over here think we can just delete this
because we don't want to do storage
through that way okay
and actually we're still looking at the
API yep and we'll do this set item so
async storage and port async storage
this is from react native and this a
sinc function will be save access token
access token console.log i'm not sure
what would cause they're so we're just
gonna have to console it there Evers and
air setting this and we'll just have to
say access tokens and we pass in our
access token there ok so we save the
item oh wait save access to again access
token which we get from response thought
okay this looks pretty good we need to
do some stuff over here though you know
save to save token looks good I think
okay so after we call log in if there's
not an air and we do this I'll see this
now that we're actually returning stuff
we can't just pass and response near and
compassion and empty object so we need
to stop we also though need to request
not
received login because now we basically
have the user so now we need to say them
so we're just going to save response
that user pass that guy in there now if
I come back here can't go to Redux
actions and we're going to create a
reducer so where's that handle action
here handle action be real so my Creator
do sir sagas actions reducers such as
import handle action from reducer and
this will be Const user and we're going
to import some action an action we're
going to be listening for is receive
login
so we pass out here and we can do stuff
in this next area so basically all we
want to do is return action dot action
huh actually not payload that's actually
just what we want to return so all we're
doing here is we're path receiving
whenever we get the login and we
authenticate all we're doing is saving
the user to the state so what does that
look like we're paying the payload we're
saving it now we just need to add it to
one of our reducers so we say user and
we can import user from users / reducers
okay so now we call our saga let's just
walk through house is going to work
we're first going to call requests log
in when we submit our form what we do
through we call this saga we start to
submit and then we call log in we call
log in we're going to do we're going to
take the stuff from the form and we're
going to try to authenticate and from
the response we should get a access
token we're going to save that into
basically persistent storage on the
device then we're going to return the
response which will be the user and the
access token and actually I don't know
if it actually returns the user it
actually does not return the user right
now now I think of it this when we
program the server it is not saving the
user or passing a user back but we want
to do that so let's add that real quick
but i'll just continue walking goose but
we're supposed to pretend for now it
does if there's an error we return the
air that we're using they
come back to our sagas when we get a
response back so it was successful here
x 2 that's what we stopped the login and
we basically tell our form what's wrong
and they can resubmit it is right we're
going to basically save the user in our
state so what we can get them later and
then we stopped the login process
because we're good and then we go to the
next page okay cool well let's fix our
server though so I just open this up if
I come over here to authentication I can
create a little function here hook and
we can say hook dot data is equal to
cloak dot data and I data params that
user and then we return I think that's
actually all we need to do I'm going to
launch postman and we can make a request
and see if I it's working as we expect
what should happen is when we
authenticate with the user we should see
um like the username the email of that
stuff so let's start the server so I'm
going to come here authentication sign
up with this user name help its light up
yet see how just shows the access token
if you want more than that oh this is
all we should be doing this after yeah
we should be doing this after not before
area
okie dokie you start that make sure
there's no errors there's not okay it
still didn't work that should have I
guess the users non the params I'll just
look it up and their documentation they
have in their documentation how to add
it i thought it's how they did it but i
forgot let's double-check it started
their dogs and believe it's they just
haven't learned their authentication
customizing the response i was taking a
long time to load we don't need this
stuff anymore to keep that one just in
case do with that go with that all right
ok guides indication customized login
response and this what we want to do Oh
result that user not data results I user
they're real I forgot after I figure out
the after hook is a user so when so when
you're using the before hook you see you
change hook data and the after you do
hook that result and you add stuff okay
setproperty user of undefined
let's see if that does anything okay I
did nothing so this is obviously not
correct let's just see how we did the
after hook lot of other hooks this is
about for hugs before work this one's
after hope that data like that data put
that data all or after I guess or before
help so usually when it happens I like
to do just do a console log oh look a
result and see what it's returning to
see the ballot or like you should see
some data in it and we should see what
we can see what it is and notice okay is
returning undefined so hook without
result is not the right thing here so
object keys we can see what I want to
say maybe data values by user is what it
might be both see okay still now okay so
data ok so just data oh you know I is
probably data dot data values try that
in print hook data today there okay on
that still no strategy local email we
should not be seeing oh hahaha forgot to
put the word after as we had wrong now
i'm guessing it should be we like the
example as I say it's weird that they're
example didn't work okay there we go
this is what we expect the user back my
bad alright so now we come back to our
client application sorry to switch to
the server do something to fix that so
now we want to just run the application
and see what happens when we login and
before we actually do when you come here
to our route we can delete the yet of
the login page and we need to make log
in the initial and the first one is
automatically the initial one and then
move typically we have an air unable to
resolve reducer phone okay I do sir plus
you the reducer what words coming from
users reducers okay
yucks actions people stay for reduce
your handling to blogging okay so we
need to pass the default state which is
an empty object alright so now we can
sign up with a nothing happened I wonder
if it just I think maybe it's too short
nope nothing I'm thinking we're getting
in here and I know we all of our sod is
set up so notice time we have to saugus
so this is something I like to do notice
we have two sagas sign up saga and login
saga now what we could do something like
this well I'm sorry but notice how this
is just an array and they called fork on
it so another thing that we could do is
we could say import star so this will be
users sagas and port has user saugus so
now we have sign up saga and login saga
and what we can do is we can say object
thought I believe it's keys so your
sagas now give us all
so basically what i want to do that on a
map fork on to the sagas and I actually
think its object of values let's
double-check object values I want to get
all the sagas and basically a list yep
values values and now we can map fork so
what that's doing is it's calling fork
on all the values of user sagas which we
get from our sagas here so it's creating
a list of the sagas that we have in our
sagas and then it's calling for con
Alden okay uncaught that route
interesting what's going on there signup
has been canceled okay not sure what's
causing that could be our fancy syntax
here I'm just going to remove that
really quick and make sure that's not
what's causing the air I've done this
before but I guess I could be doing it
wrong oh yeah it's not by my fancy
syntax can go back to our fancy syntax
area now I can come over here to reduce
or I think it I think I has a problem
with the API both stay here first
alright call log in to the test where
we're getting this error let's see if
it's before the call
okay I'm not seeing call log in right
here it is so it's getting there so it's
going to be our actual login so I'm
guessing at la authenticate is not
working console a log or uncaught
console dot log air oh you know what I
bet there's not any airs okay so if
there's an error basically it's an
incorrect login to let us say password
and correct login you don't have to
worry about this consider their yeah I
think that's what was causing it is
there was no air this is a different
kind of response from the server okay so
now we're just getting a night and craig
login that's good sagas call log again
all right now let's do a correct login
Bob and actually forgot all the correct
logins yep involved is on i think is a
bob to maybe now huh i actually forgot
all the the logins i created so let's
actually just go through the whole
process summer create or make signup
initial so now i can create a username
Scoob gym all the way down
you can sign up create a gym user Jim
Jim and it's not correct interesting I
just did that so it should be right so
it's what we're going to do just console
dot loggers air let's see what area
we're getting and we no longer need to
go to sign up so let's get rid of
initial okay so Jim Jim and what is
their reading can't find variable app
haha
this should be your rest that area Jim
Jim and awesome we're able to login
successfully and we can see our stuff
here alright so we have the signup page
and the login page done finally what
we're going to work on next is getting
some auctions to show up creating
auctions that sort of thing so that's it
for this video and I'll see in the next
one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>