<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Fullstack Feathersjs and React Web App - part 8 | Coder Coacher - Coaching Coders</title><meta content="Fullstack Feathersjs and React Web App - part 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Fullstack Feathersjs and React Web App - part 8</b></h2><h5 class="post__date">2016-11-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2w0U2ODC-uE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back so in this video I
want to make a little navigation bar so
I can tell if a user logged in or not
and kind of also click on button so i
can add new go to the signup page or
login if i want to so let's create a
component for this we've got our
components and then that bar and of
course this is a react component we're
going to use the menu component from
symantec and we're going to be using the
browser history that way we can navigate
to different pages and create our class
and let's export default navbar and
we're going to be using a constructor
for this and if you think about it we
would like to have two different views
for a navigation bar one when they're
logged in and one where they're logged
out so let's create two different
functions logged in and logged out and
let's go ahead and bind them out
so logged in blog up now surrender first
still overturn and now here what we'd
like to do is first check if the user is
logged in or not so get the cur user is
equal to this props the user has dot has
owned property theta okay so interstate
right now either will have the user will
be an empty object like that or the user
will have an object of data you know
stuff like that it'll have a key and
whatnot or token or string or whatever
um and so what we want to do is check if
the users logged in and so what we can
do is this state is logged in or logged
out this is as user they're logged in so
we can do is we can check if data is
present in the object if it is we know
they're logged in if they're not that
means they're not logged in so we can
just use it like that so basically we're
not actually getting the user so we
could say is logged and it would return
true if it has the property false
otherwise and we can actually have this
above our return so creator menu close
our venue and you dot item add recipe so
no matter what whether they're logged in
or not we would like to show them a link
to add recipes so recipes
we're just going to display the text ad
recipe and close that menu item so
that's doing right here is if they click
on this menu item we're just pushing on
to the browser history the recipe / ad
which navigates them to the address of a
page so next what we want to do is we
want to say is logged in and if that's
true show them the logged in menu item
if not we'll show them the logged out
menu item so let's go ahead and call
both its functions and now let's go
ahead and populate for each one so if
they're logged in what we'd like to show
them is basically their username and
then an OGG out button so menu menu
position we're gonna have this on the
right side we're going to close the menu
deafening you and we actually need you
got menu here as well no actually don't
because this is not inside of the menu
this is fine as menu menu down menu is
when you have a menu inside of a menu
okay so we're actually just fine just
like that so then our first menu item in
this one it's going to be the user so on
click whenever they click on this we
want to navigate them to their like a
profile page but for now we don't have a
profile so we'll just leave it with no
on click right now and then let's close
the item and then just put inside their
username so this stop props that user
got data email so in the property of the
user saved and we have their emails so
can grab that I i believe the email is
safe let's double check if we go to
inspect react and we go to recipe list
click on user data and yes we can grab
the email that way so that will display
the email the user and then also want to
show them a logout button so when you're
not item name out and then when they
click on this when I actually log them
out so this prob stop logout now that's
a function we're going to have to create
in a second here and we'll create an
action and do a song after that and all
that okay so we're going to do similar
format for a logged out except we want
to show them to login and the signup
page so this will be sign up and then
when they click on it we want to browse
our history dog push signup and then we
want to just put the sign up and now
we'll do the sign-in are not sign-in log
in and then when they click will do
browser history push login and then
we'll put a log in here okay so now
let's add this action call log out but
before we do was actually go back to our
main component and just add the navbar
real quickly so we'll add it right there
I've bar and let's pass in the props
to that so we need our own component
import now bar and we're in the same
location so okay now let's add that
action get to the bottom going to be
similar to this one recent recipes so
log out say block out request it now it
should compile okay and yes sure enough
we do see the buttons but nothing will
happen when we push a log out but we
should be able to log in so let's test
that tests at test calm and test sure
enough when i log in we get test at test
calm so that's awesome and we can even
add a recipe if we want to or we can log
out the log out doesn't work right now
so let's finish that function up so
after we do this we'll go into the saga
copy those will have a call log out and
a log out saga let's make sure to fork
it logout saga and the log off Sokka is
looking for log out requested and when
it logout is requested we want to call
call log out and then for call log out
all we want to do is actually call log
out and we don't care about the response
and then once the user is logged out we
want to I guess navigate them to the
home page so this is fine and then we
can just
a log out done this is important because
we want to get rid of the user out of
our state because they're logging out so
we'll add in our reducer this log out
and then right here we wanted to say log
out get rid of those guys so we'll add a
log out and now we actually have to add
that so let's go to our services and add
the log out go down here to export
function log out now this is actually
very simple to do all we're going to do
is go ahead and go into the app and call
log out it's that simple so now and
we're also we can just return it this
will return garbage but it doesn't
really matter and then the next thing I
do is in the reducer once the user is
logged out we want to update everything
so check login we also want to check for
another case when logout is done we want
to make the user equal to an empty
object okay and now our logout should be
working nicely so you go to the home
page click login test test com alright
cool and we're logged in click here go
back here we log out we're no longer
there and if we go to oops if we inspect
and go look at our state we should find
the user is empty
and sure enough user is empty awesome so
you'll notice every time i refresh the
page though for my login so that your
test at test com let's say i refresh the
page it goes away it would I just logged
in I don't want to log in every time I
come to this page I want to save it for
me so in the next video I'll show you
how to basically persist the log in and
authenticate the user if they've logged
in recently</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>