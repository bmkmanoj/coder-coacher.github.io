<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cancel Edit in React Material UI Table | Coder Coacher - Coaching Coders</title><meta content="Cancel Edit in React Material UI Table - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cancel Edit in React Material UI Table</b></h2><h5 class="post__date">2017-11-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WHqd12n2n7M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so you guys asked how to edit these data
points in line and being able to cancel
and being able to validate when we edit
so that's what we're going to be working
on today so we ran out a little button
here so right now when I make changes
there's no going back like let's say I
don't like to change I made cancel we
don't have a cancel button so we're
gonna add that right now we just have
save so we're gonna add a cancel button
and also what happens if I do a bad
email here
oh whoa it lets me so we're gonna add
validation as well to this that way
we're covered now before we begin with
this I'm a little annoyed that these are
all spaced out so we're gonna squish
these together real quick so you can
leave it as is if you don't want them
squished but in table I have a table row
and where icons are and I'm just gonna
put them in the same column and then
down here I'm just gonna get rid of one
of the header columns because we don't
need it if we only have one here okay
cool so now these are gathered we have a
little bit more room here so the way
we're gonna do this is actually create
our form our form right here is
basically what we want right here right
we want the exact same thing but in line
so we're gonna create a new form
component called inline form dot j/s and
i'm gonna copy and paste this it's gonna
be almost an exact copy of this form
except we're gonna tweak things so it
works right here for what we want and so
on our table the only thing we're gonna
change is this so see how we were
checking whether it was come back up
here whether we are currently editing
and then we would display different
things so doing it this way is fine but
we're gonna do it a slightly different
manner so notice how we are displaying
the whole row while doing this we're
actually just gonna pass
the row off to our inline form to handle
this so up here we're gonna say
currently editing if so we display
inline form otherwise we display a table
row format so I'm gonna import import
our inline form from inline form and the
reason I am creating a new form is
because our handle change affects the
actual state and we want to basically
create a buffer and we're gonna create a
buffer state in our inline form so the
changes that we affect there could just
be removed if we don't want them
alternatively we could keep like a
record of what the last value was before
we start editing and revert back to that
but how about this would be a little bit
simpler so we're just gonna like do this
in a different manner so right now we
are conditionally rendering this text
field so we're gonna remove that I'm
gonna pass it over here because we're
gonna be doing something like this put
there for now
so we don't need to conditionally render
we just need to show the prop and then
our table row here since we're not don't
need to make this check we can just do
this and show the edit icon so we're
gonna show the edit icon and the check
icon stop editing is a function we're
going to pass that to our inline form
it's going to handle that so stop
editing
and we're not gonna worry about that
with our check icon okay so we're gonna
move the check icon over to our inline
form we're gonna use it over there we're
also going to be using some of our table
stuff so we're gonna copy our table over
here and we don't need table body header
just the rows and columns because we're
gonna create our rows in here alright so
this looks good so I also want to pass
in basically the the current item that
we're editing which is X so this guy
can't have it so we're going to pass in
the header because you notice how we map
over the header to display this we're
gonna map over the header in our form as
well and then here hoops we're also
gonna pass in our X because X is actual
data point and then I believe we had a
submit I guess our stop editing saved we
have this handle change we're now going
to create a new thing called basically
handle save and I'll save
a handle so basically we can either stop
editing or handle basically save the
values that we create in our in line
form and so we don't need a handle
change anymore
we just want handle save and so we need
to change that here handle and it'll
save and then we're passing it down here
handle save and what we're gonna pass to
handle save so and it'll save is just
the row that we want to change so handle
change so we're now just gonna do the
index I and then also X so X is our data
point where our row we could just say
row and instead of doing this we can
just pass in I'm just gonna say X since
we're using row already so X so what is
alright this should be handled oops
accidentally close that handle safe so
for a handle save we're gonna map over
all our rows and once we find the row
that we want to save so we're checking
it's the index we have here versus the
one we're iterating against so we check
if we do we want to pass in our new row
which we get here otherwise we just grab
the row that we have when we're mapping
over because we're not changing it so
our handle save our stop editing is fine
we now just need to do our inline form
here so we did these errors which is
nice I suppose but we're gonna do it
slightly differently now so I'm going to
group the errors and the values together
so I'm gonna create a values and I put
all my values in there
and then for my heirs I'm going to group
those as well get rid of that put them
here give that a safe so now whenever I
want to submit all I have to do is pass
in the values now the form can have some
default values so we're gonna have to
use a constructor props super props this
is just the default structure of a
constructor and then we're gonna say
this dots state and that's what we're
gonna actually create the state up here
so instead of initializing two blank
values we're always gonna have some
values so we're gonna do dot dot dot
props dot X and we just need to an equal
sign
I believe it's X is what we need to be
grabbing just to make sure let's look at
our table real quick we don't need this
form anymore so X is the data point
that we're grabbing and we're grabbing
here
yep we're grabbing the prop from that so
I believe just spreading that and I'm
just gonna console dot log prop sex to
make sure we do this correctly when we
do this change is fine no it's not so
our change function we now need to
update our values and I like to do this
a little bit differently now where I get
the name and the value from this target
just destructuring it so I grab name and
then value like that and we have to keep
all the other values so I'm gonna do dot
that I could do this dot state values
but we can pass in the state to our
function like so and so we can just do
state values so we keep our current
values and we add the updated value here
for change validate looks fine except
you don't need to pre pen the word airs
to everything are the word air to
everything so grab that we don't need
air and we don't need air so this dot
set state I don't need to keep doing it
like that I can just set my errors like
so
so our air is object we grab here we're
going to set it with a new one so on
submit we're gonna validate that looks
good this is our props dot on submit
clearing the form
to clear the forum we're going to be
doing it differently or we don't even
need to clear the forum if there's not
an air we're just gonna call our soul
get rid of this guy we need to pass in
our index to this as well so we have or
we calling in line I keep losing my
place here we go so I I'm just gonna
pass I in here to our in line form so
now when I call up call handle save in
there we need to pass I and X so we
don't have to clear the form we're just
gonna call this stop props dot handle
save passing the stock props dot I and
then our data which is just out state
values so those are the new values and
then handle save will automatically I
believe handle save here we then we'll
call this dot stop editing after we
update all right so this looks good up
here we can now get this stuff working
down below and the way we're gonna do
that is basically copy this display out
here and we're going to map over it so
in a render function we have const we
have headers not headers was it header
if we're passing the header and then x
are the two ones we're gonna use header
comma X from the stop drops so we don't
need any of this form junk we really
just want to do this
and then here we're gonna display our
text field so paste that sucker in and
so we call it change and why that prop
is good we can just pass in this dot
change we don't need to pass create a
lambda right now so Y dot prop good I
believe this is all good we might have
to do some debugging with this I'm gonna
get rid of this form thingy we don't
need it the value though is going to be
equal to this thought state dot values
and then what was it x iy prop so that's
gonna be this dot state values Y dot
prop give this a save table row we have
a table row let's see what our errors
are oh no closing tag K or L cool so the
icons that we want to show our a check
icon that we had above so check icon and
then for a check icon we just want to
call handle safe and that's this to
handle safe and then instead of a trash
icon we're gonna have a cancel icon and
the cancel icon we're gonna use is I
would just went to material icons and
search cancel so we'll use this one but
you can use any icon you prefer
so copy this cancel icon and that's a
navigation slash cancel come down here
at the bottom instead of handle remove
we're just gonna call this stock props
not and we want to cancel the save so we
just want to stop editing believe it's
called stop editing yep stop editing
step props dot stop a give that a save
the name is the why prop on change we're
calling on change okay let's take a look
at this see what errors we have I think
this is very close I is not defined and
in line that form oh right here this is
gonna be this working grab I from our
props there okay so now when I hit this
pencil I should see I correctly see the
check and then the X it looks a little
funky over here so we have something odd
I'm gonna hit the cancel looks like
nothing happened that's good
I want to see if I got any airs we need
to add a key prop so key writing a key
here so which one does not have a key
this is gonna be table 30 table or in
line form here that's just gonna be in
line form - I okay
so the thing that I thought was odd is
when I hit this little icon we pushed it
all over which makes me think that our
inline form looks different I guess
selectable we have to say false
so tape already we're doing that I don't
need the key here because we already
have the key over there I'm not sure why
it pushes over like that in our table
row table row column worry about that in
a second let's make sure everything else
works so the way we're doing it is we're
validating for errors so let's make sure
that works so if I hit the pencil and
for example I get rid of the email hit
my check mark okay very good
we see it doesn't let us submit it but
it doesn't show the air and that's
because I'm storing I'm not showing airs
here so air text I believe is what you
pass and that's just gonna be this stuff
state airs wide up prop and that'll grab
the air for that prop so pencil get rid
of this hit check and nothing happens so
I'm just gonna console dot log this dot
state airs see if we're getting any airs
and let's just take a look at how it's
working in our on submit we validate if
there's not errors otherwise
we should be setting them because I see
this thoughts that stay here okay
pencil remove save no I'm guessing yep
it shouldn't have a email here so I'm
just gonna say validating console dot
log validating making sure we're calling
the validate and then console dot log
you know lets console dot log errors in
there as well hit enter all right
doesn't look like we even call validate
so on the checkmark what am i calling oh
that's the problem well no I need to
call on Submit I was calling handle save
instead of calling the on submit
function here so that was what it was
I'm getting messed up by oops
okay pencil remove check can a tree
property length of undefined where are
we grabbing length so the username is
now gonna be in values so I'm just gonna
grab username comma email
is equal this dot state values and so we
can just do that and we can just do that
and I don't need to do that any longer
cool and pencil remove that guy cool
requires invalid email my email at email
calm but look at that I just removed my
username save cool so our form looks
like it's working nicely now save let's
make sure the save goes through we see
our weird junk that we just added let's
say I I you know I delete the email oh I
want to keep the email I cancel good or
cancel is working nicely let's make sure
our delete still works it does so cool I
think that everything works as we wanted
to I'm gonna just get rid of these
console logs cuz we don't need them
anymore
we figure out everything that was going
wrong and now I'm curious why it's
pushing over like this because we copied
and pasted I think I'm just missing
something I'm missing this I'm only
missing this little check thingy for
ever reason we lose the check thingy I'm
mapping over the header maybe I just
need a table row here row column I don't
think this will help at least in that
sense day miss ball yep I did I think
this will push it over
yeah it'll line it up at least but for
whatever reason now if I go to the
reactive tools I might be able to figure
this out let's take a look so here's our
table we can find one of the rows okay
so here's what a row looks like so
instead of a table row it is now a form
and then it shows the table row so here
I think what it might not like is that
table row TD check box
all right I'm guessing it doesn't like
that it has the form as the outer layer
so we're gonna hack this real quick and
the way we're gonna do that is yeah so
with react you can now return an array
so over here in our table where we have
our form our inline form I'm just gonna
wrap it with table row oops
table row okay
so now our inline form over here does
not need a table row and I'm gonna
select a set selectable to false as well
so now over here I don't need that but
now I can't just render like this so
we're going to render like so a array so
now I don't need that I need commas give
that a save and I believe we need to add
keys and it's gonna bark at us about
keys no it doesn't warn about keys
yeah
now it says keys a valid react element
must be returned
you must not return undefined I'm
guessing it doesn't like this thingy now
cuz we're returning multiple rows if I
set I'm gonna try doing a key here so
this is going to be the icon row column
and then I'm just gonna comment this out
and see what happens
see if it'll just at least surrender or
not crash okay it doesn't like that
either
surrender we're returning an array and
in our array we have an object I'm
guessing that we're not using react yet
but this was before we were using react
16 so I'm just gonna say yarn and react
to upgrade this because I was expecting
that to work just out of the box so I
believe this will upgrade us to react 16
hopefully this doesn't break anything
else but now if I do NPM start I think
it should be able to render that it's
gonna take a second to boot up and I'm
just gonna uncomment this because I
believe this should work now and we hear
Eddie have keys on this so I think we're
good
but notice how I had to add a key here
because because this is an array now
and model can't
mohandro not found can resolve react out
lib
I'm guessing it's because I'm gonna
remove my node modules and then just
have it reinstall it with yarn
additionally what could be the problem
is react Dom is a different version
so maybe yarn AB react Dom as well to
upgrade this I should just used NC you
to upgrade everything I believe though
when we make these changes it should
work but again you guys saw the main
point of the video getting it to work so
I'm just gonna yarn real quick getting
it to work canceling and adding so good
and p.m. start I might just break this
even more if this is broken what I'll do
is there is a nice M p.m. 9:00 p.m. but
I am p.m. package that allows you to
update all your react applications at
once
and still doesn't like it so I'm gonna
give this a try
so it's called NC u so NPM and see you
if you don't have this and you want to
upgrade it just like me if you you can
come get it here it's called NPM check
updates if you run this command you can
grab it I'm gonna give this a try and
see you what it does it looks through
your packages and it says which ones are
out-of-date and then you can do an
update to all of them if you need to so
here at see some stuff looks like our
react scripts and stuff we're off so now
I'm going to do and see you it also says
you can update everything if you want to
I'm going to go ahead
update everything this might break some
of our es Lent stuff but that's okay
and then I just like to run yarn make
sure everything is installed and then
we're doin p.m. start again and see if
that works if not I might have just
broke it and we're just gonna have to
deal with in ugly form and when this is
done I'll do in pm start and p.m. start
and if I can't get this to work I'll
just revert it back and we'll just have
our ugly in line form which is not too
big of a deal but hopefully this does
work
okay cool so we're in how able to render
that's a good sign so now if I hit that
excellent so now it looks normal like we
expected so I can hit save I can cancel
we're still getting this warning so
that's index table body each time array
I believe it doesn't like this thing
even though I'm adding a key to this the
outside so I'm gonna say Const form Rose
is equal to this
and then I'm just going to a pin them in
here form rows like that so we're
creating an array right here we're
mapping over creating a bunch of columns
and I'm just adding those columns to our
return value here and I believe that
should get rid of our no think you're
the key prop looks like it's something
else possibly maybe in our table it said
1:30 this mapping up I need to add the
key up here so that's good so if you
wanted to you can add you don't have to
do this extra thing I added because it
looks like it was elsewhere that was
having a problem with the key I just
assumed it was this page paste that
sucker in give it a save
I had the comma back here and everything
hopefully works as expected with no
warnings or at least errors we have a
lot of definition for rules stuff this
is es Lang carbage that got messed up
but we don't worry about that and cool I
hope you guys got the idea of how to
edit delete and validate this stuff so
now we can just hit our check make sure
it's all good before we insert it and we
can just cancel now sorry this took so
long to get the extra stuff set up but
I'll give you an idea if you ever run
across these errors how to fix them so
thanks for watching guys and let me know
if there's anything else you want to see
with the table here
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>