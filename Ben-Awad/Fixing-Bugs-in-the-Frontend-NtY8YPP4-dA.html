<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Fixing Bugs in the Frontend | Coder Coacher - Coaching Coders</title><meta content="Fixing Bugs in the Frontend - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Fixing Bugs in the Frontend</b></h2><h5 class="post__date">2017-11-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NtY8YPP4-dA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we're gonna fix a couple of
different bugs that we just have in our
application that we have been sitting in
here that we programmed at first and
said we're gonna come back to and just
never got a chance so the first one I'm
talking about is when I register it
redirects me to the home page so if I go
T at T calm and copy paste paste notice
how it takes me here instead I really
like to go to the login page so I could
just login so this is a really easy fix
it's in a register function a register
component and we're pushing on okay to
slash and instead let's just go to login
so give that a save let this refresh and
now when we register we should be taken
to login a slash register the FBI calm
and cool so then also for our login
right now we're getting taken to the
home page as well when it makes more
sense to be taken to view team right
because they're after login I'd like to
see the team that I can create and so
for example this user hasn't created
team yet so he gets popped over here but
if I log in as someone who does have a
team it just takes me straight to the
team's
so for example Bob at Bob calm and we
see we were taken right here it looks
like a subscription does not fire off
right away that's kind of interesting
oh wow look at that so we must be coming
to this page too fast that this does not
even register that's kind of weird art
we'll look into that bug in a second I
want to fix some other ones first
but notice that's a big bug because look
at this now I can't even type and see my
message here I have to refresh and now
it works
okay so the other one I was going to
talk about first was the channel so when
I'm typing in my form hit cancel
we never reset the form so again that's
nice real easy one if we pop to our
components this is the channel modal we
just need to remember to reset the form
so our reset form actually is in this
sucker I want to say we can also access
it from here we'll see so on close we
want to do do - we're gonna call on
clothes and we're gonna reset the form
now we also want to do that for down
here or on close button but before I do
let's make sure that does work so click
over here click out cool so our form
does clear now so let's add that to our
cancel button as well so we're going to
call the reset form function and this
reset form is coming from our props
which is passed to us by formic so we're
using formic on this form with formic
that higher component it passes that
that's how we have access to this so
we're just creating a little function
here that calls both of them now we'll
test this again cancel the text says
stay there perfect and we just need to
pass in E dude to do E
area that way we don't get that little
message here plus cancel plus cool so we
got rid of our area and we don't see
these here next thing is when we invite
people so I already have Bob to on this
team so Bob to at Bob to calm
let's try inviting him okay
he is Bob to area so nothing happens
when I try to fight Bob - we don't see
any consoles nothing if we look at our
graphic you'll request we can see we
actually have an air so let's go ahead
and display the error to that user like
we did for this one so we're gonna come
over here to our register my register
form this is our in my people modal okay
so right now how we're sitting Aires is
we're normalizing them and then passing
the air is then the right now we're
getting an air called user ID must be
unique so we basically just wanna we're
getting this twice so if we get this
message we want to basically write our
own custom message because this makes no
sense to the user right we want to tell
them hey this user ideas already been
added so this email has already been at
it this user has already been added so
we're just gonna map over the air is so
Const new Aires is equal to Aires map
and we can go over each air
and we kinda actually want to filter
filter these out too so actually yeah
let's filter them out first so let's
look at the path so I'm gonna say Const
air length is equal to air is dot length
and then we're gonna filter them out so
Const
filtered airs is equal to air is filter
and we're gonna say e e dot path is not
equal to the user ID and we could also
actually just look at the message if we
wanted to - that might be a better one
it's this particular message that we
want to change so let's actually do
message and then we're gonna say if air
length is not equal to filtered air is
that length dot length we know that we
got one of these messages so we're just
gonna say filtered airs dot push and
we're gonna say what's the name of this
field here email no it's not email is it
named nope
name is email so here we're gonna say
path is gonna be email and then our
message is going to be this user is
already part of the team okay so we're
getting the initial length of the array
errors and we can call this errors
length that makes more sense
and then we're filtering the air is
getting rid of the ones that have this
cryptic message and then we're checking
whether we filtered any out and if we
did filter some out we know we had the
cryptic message in there so we're gonna
push on our new message that says this
use there's not heard this users right
part of the team so let's do Bob - at
Bob calm hit add user ok that did not
work
let's do console dot log filtered airs
and see what went wrong I'm assuming we
just had this filter method did not work
invite people Bob - Bob calm and let me
copy this I'll have to keep tight being
Bob - and here's a little ray the users
already on is it ready is already part
of the team all right
and the team ID must be unique so we can
filter that message out that makes no
sense either and are we just not showing
now we are showing airs email and we're
showing the first air so the air for
some reason is not oh we need to pass in
filtered airs
I real now I think it should show up all
right so this users are a part of the
team cool and we kind of ignore all
errors so we actually don't even need to
filter this out if we want to we could
just say Aires map and say for every air
II that message is equal to this thingy
so if it's equal to this message we're
gonna return a new object otherwise just
return e so every time we come across
this cryptic message we're gonna add our
own message so give that a save this
might be more confusing but I believe it
will still work
let's do Bob to this user a part team so
it does work so you can do whichever
method you like I think I'm just gonna
leave it how we were doing the filter
method cuz that doesn't look as
confusing okay so the last thing I
wanted to do was add a little plus sign
here so I can click a link and take us
to a new page and the new page is the
create team because I'm gonna be able to
what if I want to create a new team and
slack they have a little plus button
here so we're gonna add that so if we go
over here to channels on our sidebar we
can have that little plus sign and add
it in so what is it I think it's this
team header is it no actually it's not
channels it is teams there we go this is
that little teams thing the teams list
and we're mapping the team ID and a
letter so we're gonna just create a
special one here
I'm gonna copy you and paste you in here
so this guy always close at the very
bottom and the key for this is gonna be
ad team and here we're gonna go to the
create team page I actually don't know
what the URL for that is I don't know if
it's a create team probably is and in
the letter here I'm just gonna add a
plus sign all right so I can click on
that and Colt takes me to my create team
page so I can create new teams so that
was all the bugs I wanted to go over but
I kind of want to see what's going on
with that subscriptions air that we saw
at the very beginning and see if we can
figure that out real quick if it's a
convoluted bug I'll save it to the next
video but let's take a look at it right
now so this has to do something with our
view team route and on our sent message
we are trying to base we're on their
send message we are known on us a
message on the message container
we're subscribing and when we subscribe
it said we're getting an authentication
err
so let's go to register not register
login with Bob - Bob to login no problem
there so not sure what maybe Bob at Bob
got this guy and maybe because Bob - I
need to login with someone who's not
part of the team all right looks like we
connect ok so I think what the air might
be is if I login with someone who's not
part of the team
for example this B guy and now try
logging in
with Bob at Bob calm I think we're gonna
get the error here yeah so we first have
to log in with that BB dude and then log
in with Bob and then we get this you
have to be a team member to subscribe to
its message
so we're authenticated we're just not
part of the team that we're trying to
subscribe to so I think what's happening
is maybe local storage is not updating
let's see what's going on I think it
thinks for the other user when we're
trying to do this so I think when we set
these items here I'm gonna say console
dot log token from login and then pass
in our token and then same with our
refresh token so let's call out our
token refresh token and now we're
passing in our subscription these tokens
and that's gonna be in our index no
that's gonna be an Apollo oh boy we have
a lot of red lines let's see what's
going on here I think I just need to
save it yep and it'll reformat
everything and okay connection
parameters so here the local storage
will do just console dot log connection
params token is equal to local storage
getitem token and then the or that way
what we're going to do is we're gonna
print this out whenever we set it and
then we do that or we set that value so
then the purpose of this is just to see
what the value is every time we set it
and this is gonna be the our token all
right so let's let's give this a check
so here connection parameter your tokens
and so let's try logging in be at be
calm be a be calm and now I'm gonna log
in so give these a clear alright so
there you go that's our problem
notice how we get these tokens here
token from login our token but we don't
see them refreshing here so the
WebSocket link here with these
connection parameters we needed to make
this looks like you can pass in a
function so maybe that will work better
for us that way it fires every time
let's see if that works
we basically need to have it redo the
connection parameters every time we
login
let's see if that does it so be at be
calm it doesn't look like it redid the
toque in there so I think we're gonna
have the same problem if this doesn't
work I think we need to add some kind of
middleware yep same thing see how the
connection prams don't get called again
alright so this is gonna require some
research
I'll look into how to add a function to
this guy or have it run every time that
we call subscribe so that way are able
to actually just do WebSockets still
because this is interesting this is an
interesting little bug here alright but
that's it for this video guys thanks for
watching and as always I will push this
code up
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>