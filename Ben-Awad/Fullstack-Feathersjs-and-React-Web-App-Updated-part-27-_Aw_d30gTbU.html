<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Fullstack Feathersjs and React Web App Updated - part 27 | Coder Coacher - Coaching Coders</title><meta content="Fullstack Feathersjs and React Web App Updated - part 27 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Fullstack Feathersjs and React Web App Updated - part 27</b></h2><h5 class="post__date">2017-06-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_Aw_d30gTbU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome back so in this
video we're going to be fixing this
layout here and fixing this so it will
hover and highlight like that and we
will remove this error we have in the
console right now or this warning it's
about the nested thing so what we really
need to do is for example our navbar
here we need to be able to pass in the
history so that way we can push instead
of using link so what I'm thinking is I
can go into the routes index and I can
just render this navbar as a route and
the path I'm going to give it is just
the home one that way and what I'll do
is I'm not going to put exact like we do
here so it'll render on every single
page instead of component I'm going to
use render whoops whatever I'll just
retype it I thought I had it saved all
right and it'll pass in the props so
first I just want to see if this will
render if it does then we can go in and
add history because now we have two
routes which both are on the home page
up now look like I did work very cool so
now this guy we're passing in the
browser prop in here so now it or the
history props we can get the history and
so what I can do here add recipe is
going to be an on-click so now what we
will do is we'll do history dot push and
we'll do slash recipes slash ad and get
rid of the link
and we're just going to save o0 and now
we need to pass it in history to both
log in and log out that way they can use
it their history so on click and then
yep we are just going to copy and paste
just launch sign and so we're just going
to do this for everyone and we can get
rid of e parentheses so now log in so on
click this straight up push slash log in
and then just two more so get history
here and and then on click a straight up
push slash profile flash recipes and
then we already have an on click for the
log out here so what we'll do we'll do
two things we will log out and then
we'll take you to the next page so we'll
do history push and I think I want to
just keep this on one line actually it
doesn't look terrible I just keep
bumping the button right there up and
just and put my looks kind of weird
maybe when I reformat with GS Lent it'll
fix it all right
and we won't need to link it anymore
let's see if that fixes it so if I hover
cool gives it that shade that I wanted
if I click awesome takes me there logout
cool sign up works login alright all the
buttons are working nice so now we're
going to do the same thing for this card
layout so card layout is what will our
component here so a recipe card so
basically we just need to pass this prop
all the way down so the first one is
going to be prop is going to be the
props and we don't even need I so here
we'll get history and then we'll create
an on-click history doubt push then
we'll do slash view and put in the ID
now we can remove the link and now we
need to add the key back here also just
a quick note if you're wondering why we
were using the key and using the ID here
instead of for example I that's because
I'll say you're rendering let's just do
a comment here let's say you have let's
say the ID of one actually that you have
a list of ABC so those are your three
items and let's say this has is in index
1 this is index 2 is index 3 so if you
use the key 1 2 3 and then a new item
was added to the front of the list maybe
T now this is index 1 sorry 0 we should
start out so notice how all these will
get bumped now um because this was
originally one like this so now like all
keys are changing so all these will get
read rendered even though only one
changed right so if I actually use their
IDs
then only one would rerender so and that
didn't make sense basically if you use
the a unique ID that won't change um
whereas the index will this will save
you it will be faster and will render
less wonder you're entering so media
pass this history prop all the way down
so recipe list basically needed it from
history here and we're just going to
pass it to a recipe card here actually
okay we can just pass it as a second
printer oops not that one third in the
history game passed from that and then
recipe list which we're grabbing from a
single page nope my recipes and home so
and history is equal to stop props
history same for my recipes pass in
history and funny enough here why did I
create a recipe list if all it does is
this and in my single enter my recipes
here I'm not even using that interesting
so let's actually use the component that
we created so now we're going to copy
this so using recipe card here using
recipe list from recipe list
and here all this is going to be is a
recipe list and then will pass in as the
prop recipes the stop props my recipes
then history will pass in as the stop
props history awesome so now we just
need to make sure my recipe and home
we're both getting that are you're
getting history so home it's currently
not my recipes here is currently not
either and this function we basically
okay so what we're going to do just do
render props and we'll put as a second
parameter props and same thing for this
one render props second parameter props
so now we need to fix our get user and
our other ones so the second one we take
some extra props which we then put on
this thing props and the default for
this is an empty object and fix what
worry about that later we do something
linting same thing for this guy props
and props as well
now shouldn't be seeing a link here up
looks like there was their problem
rendering or is that just the log
preserving let's refresh and see what
happened okay a valid react element must
be returned you may have returned
undefined or invalid from reactor inter
so prompts get in like this let's remove
the props okay not not those so
obviously it's not liking this
acquire authentication which should
return
I guess require authentication we need
to actually call because okay what does
require authentication return is a
function that we call and we return a
connected component also we wanted it
looks good maybe I just need to do like
that I think I just needed to wrap this
like that that looks really weird but
that I think I think I needed to just
wrap it with curly braces maybe because
we're calling a function written render
let's see if that does anything up looks
like unexpected token maybe it doesn't
like that why is it unexpected though
there cuz I didn't do that no okay this
is interesting
so render crops we pass in here and then
we were just are displaying get user
theoretically that should work alright
so it's getting mad I'm assuming
particularly add this one I get user
even though get user is just returning a
component it's authenticated which is
odd
I'm assuming is going to have the same
problem I go to the profile page but if
I go to for example login that one works
okay so the problem is with this render
function work it doesn't like that I
call a function to get the component
what if I Const wrapped home and all it
does is called gate user with home and
props that it gets from here
and here what I'm going to do is call
the wrapped home function and then I
pass in my drops okay that might that
might do it let's say my syntax is just
basically a little bit off okay again
we're not returning a valid huh okay
just refresh
okay so valid a valid must be returned
you may return undefined okay so it
doesn't like it what if I did like a div
here maybe that will work yep that's
funny
so the cards are not showing up so I
wonder why that is but at least this is
working so now I can do this same thing
and actually here what we can do is we
can pass in is I was going to say base I
was going to like if we could make this
generic and use it for here too but this
is get user make another one this will
be wrapped profile and we'll call
require authentication on it and then
here we will do my recipes and now you
will do the
wrapped profile passing in the props
I'll be cool refresh this page doesn't
work let's see if the other page is
working okay both of them are not
working now if I come into react we can
look at what should be rendering so if I
come run the home router yep so we
should be wrapped home here div oh well
maybe it's not working get user it's not
liking this higher-order function that
I'm doing okay so scrap this we're just
going to give we're going to do things
slightly differently because the this is
annoying me so we really just need to
give recipe card things so I'm actually
just going to just undo everything I
just did so we're just going to do it
the regular old way we're going to use
component instead of render um yeah okay
that stays the same
okay user stays the same
get user and we don't need to do this
prompting anymore we can forget about
that and then I'm off Tilney that so
don't like that there was another way I
think it was called with data which I
can do on this recipe card
so react router with data um and it
wraps the component and that injects
basically history into it so if I can
find will just go to react router Docs I
know exactly where it is put a web I
left it load load fast okay goes in
redox so now we want to do with router
um after I'm I don't know if I need to
connect it still will see we're going to
try doing this with router so this guy
with router and then we'll call with
router and then from the recipe wrist
this guy we'll leave that for now I
suppose because we don't we don't we
won't pass history and okay that worked
so now we don't have to pass history all
the way down should done that from the
get at beginning that made more sense
because then you don't have to pass
history down from all these different
pages I was I was thinking I had to like
not make it a pure function anymore but
I can even the card can stay up here
function too so now I can just remove
all those things I just added with about
the history ok cool now our cars work
let's make sure when I click on them it
takes us to the right page though and it
doesn't ok so let's see what's going on
there so with okay so with data I got a
little - I jumped the gun possibly
oh he it's going to be a prop passed in
so history
you
cool that's all was alright and now
notice how they're nice verse there's
about nicely now if I go here we should
give you a little work there as well
okay awesome we're good so that's it for
this video that took longer than it
should have to get the history but react
router with the new version has changed
up things quite a bit and made it a
little bit weird so that's all for this
video and the next one what I think
we'll do is let's go through the actions
and just remove all the dead actions so
that's what's coming up next I'll see
you guys then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>