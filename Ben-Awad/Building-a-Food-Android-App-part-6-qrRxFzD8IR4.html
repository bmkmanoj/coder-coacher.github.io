<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a Food Android App - part 6 | Coder Coacher - Coaching Coders</title><meta content="Building a Food Android App - part 6 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a Food Android App - part 6</b></h2><h5 class="post__date">2016-12-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qrRxFzD8IR4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome back so in this
video I want to work on our swipes so
right now we just have toast happening
so here's our application swipe left
swipe right now I want to be able to add
new restaurant show new pictures when
I'm swiping different directions okay so
let's get right into it
so we're now four different methods and
they swipe upwards or on swipe top which
is like this what we'd like to do is
show a new picture of the same dinosaurs
restaurant so let's make a function
called Hut same restaurant new pic when
we swipe down we'd like the same
restaurant but a previous picture so
same restaurant previous picture we
swipe this way
let me type this way to the left we want
a new restaurant so you're asked and
when you swipe to the right we would
like to get the last restaurant okay so
let's implement these methods to create
that create you
if you just if you on Mac if you do alt
and then in turn it will pop up this
little menu and it lets you oops you can
just automate these method stubs or you
can make them yourself okay
so let's do a same restaurant previous
picture but actually let's start with a
new restaurant so the first thing I'm
going to do is first check if we already
have the new restaurant loaded so if and
restaurants dot size is greater than the
current position
or equal to so we gain the current size
of the restaurant so let's say we have
five restaurants if I is equal to 5 then
we don't want to do anything but if I is
it's okay we do we want to strict less
than so if I is strictly less than so
it's 4 or less then we can increment so
I plus plus this can overflow us because
what can happen is let's say we're in
restaurants so first we want to check if
room so we can only want to increment
new restaurants when we actually have
space if you don't space we don't want
increment so we can actually just do
minus 1 so this this makes sure that
there's enough room so if there's four
restaurants I is equal to 3 4 minus 3 it
this will evaluate to false and that's
what we want so if you're at the third
if I zero three that means you're on the
fourth restaurant and then you'd like to
stop when they click when new restaurant
is triggered you do not want to show
them another restaurant but assuming
they're not the end you do I plus plus
and then we're just in do wait for
restaurant being true and I'll just show
the restaurant next what happens if we
do get to the end of the list we would
like to be loading more restaurants as
we're going through so we're gonna do a
little check first thing we want to do
is check when was the last time we did
an update so we're creating a variable
called I last and that's going to be set
to when we do our last up
date so I last is equal to zero because
I'd be our first update so now we want
to make sure because what can happen is
they can swipe backwards and forward so
we don't want to just do counting we
want to make sure they're past a certain
point so let's say I - I last is greater
than five and what else do want to check
when we do an update and restaurants dot
size minus I is less than so so what
this is checking for is it's been at
least five images since our last update
and we're getting really close to the
end of the restaurant there's only like
seven left to get to the end in that
case we would like to load more
restaurants so we're going to create a
new the way we load new restaurants is
by using fetch recipes or fetch pictures
I mean and then we do execute now you
notice in our fetch pictures right now
well you know we're not accepting any
parameters but what we can do is we can
add an extra pram to our Yelp search
that says the page that we want to so
you can put something called an offset
and we can do prams zero so what we can
do is we can pass the offset as a
parameter to our a sink what we want to
pass here is 40 so in our exec we're
passing 40 and the first one we want to
do we're in passing 0 so what this
number is that we're passing in is the
offset so when we get when you pass in
zero this will get the first 40
restaurants
and then when we pass here we want to
get the next 40 restaurants and we keep
incrementing it like that so we need to
do is we want to set it counter art
count we can call it and our account so
our count is equal to 40 and then we
increment our count plus equal 40 and
that'll just keep going to the next
section of restaurants the other thing
we can do is just do make sure we're
getting for your restaurants is to put a
limit of 40 okay so this will fetch us
40 restaurants will get the first 40
then we'll get the next 40 and so on and
so forth
so as we're swiping for new restaurants
we're just swiping through and in the
background we are loading restaurants do
you the last restaurant we first check
if in restaurants or not we don't check
in restaurants
well we check I and make sure I is
greater than zero strictly greater if I
is we say I minus minus and then we do
wait for restaurant
so same restaurant previous pictures the
same thing so if get the current
restaurant so restaurant are is equal to
em restaurant don't get I say are duck
pictures dot size actually we don't need
a cheque we don't even need to check how
many pictures the app just the current
picture say that's greater than zero if
it's greater than zero we can say r dot
decrement parent picture and then we can
say wait for restaurant true and then
the only other thing is we just need to
check in our callback ok we are getting
the current picture cool now for the
next restaurant so this is this this is
covered for the downward case now we
need to go forward for the next one
similarly we need to create an eye last
in here so oops private and I last and
we said I last equal to zero and let's
create some getters and setters for this
guy dinner eight
okay so in this new picture what we're
going to do is we're going to make sure
it's not over flying so if so first get
the current restaurant so a restaurant R
is equal to and restaurants like it I so
if our dot get pictures dot size minus 1
is greater than r dot get pictures get
current picture then what we can do is
we do increment current picture and then
we can wait for restaurant and then
similarly to up here we need to load
more pictures for the restaurant and the
tell when to load it and also we're
gonna check when the last time we loaded
pictures so our dot get career pic minus
r dot get AI last that's greater than
five and art I get current pictures get
pictures dot size minus r dot get
current picture is less than seven
then we want to download more pictures
in the backend and then set art I last
set I last is equal to current picture
and then of course so now the actually
downloading of more pictures will do in
a different video let's just go ahead
and run our code install requires the
platform query
okay all packages are not available
alright let's see what's going on with
this okay it looks like it's running now
okay so we run this on our device and
now if we swipe we should be getting new
pictures when you swipe the Left we
should be getting an old picture we're
sniping to the right and so on so we can
just wait for this in the load and we
start swiping like that we should be
getting a new picture instead of getting
a toast now so we'll just like great
I'll finish building there so things
that we have left to do download more
pictures we also would like to get the
location of the user so in the next
video after this we're actually gonna
get the location of the user using their
phone I'll have to add something to the
manifest file to allow us to get that
and then we can get their latitude and
longitude until the user just you know
is using their phone they're out and
they can get all the restaurants nearby
then okay Gradle build air installing
APK device offline it looks like just
the device is offline so I'm just going
to restart this so I'm using genymotion
ster backup
start that back up and we'll run that
for you guys but we are very close to
finishing this app one other thing I
want to add in real quick while we're
waiting for this to load up this will
screen that is right here just wanna
catch another err like oh it's like area
oh wait let me check the github real
quick there's one other unavailable area
so catch on available location so this
is when we're fetching the location for
Yelp if the area is unavailable I just
want to make a toast real quick that
says your area and looks okay so that's
up when we were to get this building
your area I'll just say no no data
available for your area no data
available for your area
okay so this is was this is happening in
our async tax when we go to fetch
pictures sometimes we can't when we add
in this new location stuff next video
the data we can't help it if they give
us a bad long to your latitude in that
case we don't find anything and we just
want to give them a little toast and let
them know that that we have no data
available for them so let's we want to
catch that okay see if it's running yeah
it looks like it is very cool so I'm
just going to swipe cool shows us a new
restaurant dinosaurs swipe again shows
us another one swipe upwards very cool
we're getting new restaurants if I swipe
the other way I'm going back to that
same dinosaurs picture showing me that
keep swiping Cleese swiping so we're
getting very close look at that it's
working very nicely we're able to swipe
we're getting the pictures new pictures
we can swipe backwards to see the
previous ones and it's keeping the
location so I'm on this like third
picture or swipe site back so this is
looking really nice guys so in the next
video we're gonna get that location
working and finish up this app pretty
soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>