<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native To Do List App - part 9 | Coder Coacher - Coaching Coders</title><meta content="React Native To Do List App - part 9 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native To Do List App - part 9</b></h2><h5 class="post__date">2017-03-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/egBOTPZdOSs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back so we have right
here our to-do list and right now when I
click on these list items I don't really
want this drawer too close and it's not
closing right now so let's fix that so
right now what's controlling that is
this prof right here this thought state
that is open and if the value is true
it's open if it's false it's closed so
we would like to do is close it whenever
we click the button so we can map this
to an action I'm thinking I'm and just
store this in the redox state but I'm
not sure that's the best way to do it
right now we have this nav bar and I
actually I think they could nav bar is
the best way to do it we're not now bar
putting us in the reducer so I can give
this a reducer of its own so this is
going to be sure open da Qi is whoops
and export default and the state for
this is going to be false at first and
action and basically this is just going
to be a switch and default policies
proper syntax here default and in return
state always have that introducer and
now have a case um toggle
drawer and basically we're just going to
return opposite of the state so now
let's add this to our route reducer so
every time we create a new producer you
add it here so drawer open door open now
for the sake of not cluttering up the
routes i think i'm going to put
everything and this so this thought put
every eat like normally i would do um
index actions but i don't really want to
do all that for this so I'm just going
to get this connect these pieces and add
them over here this time we don't need a
view we're not going to have actions
like that
so we are going to be exporting default
this is going to be a router claw
Prout's so maybe d for exporting the
routes and our routes needs to have the
door open what you get from state drawer
open and we're going to have one action
which we're going to call Const toggle
drawer and it doesn't need to take any
parameters and all it does is returns
toggle drawer so now here toggle door so
now toggle drawer should be right here
we will this stop prob stop toggle
drawer will call that whenever the
navbar is clicked and is open is not
depend on the state anymore the local
state but the Redux state drawer open so
now let's refresh and just make sure
that's still working out we switch to
Redux state token index routes index
line 47 let's go line 47 and I just need
out of comments that semicolon
so that looks good pops open closes it
looks good now what we can do is you can
use this over here in our menu so we'll
create an action interaction is actually
just going to be it copy it it's going
to be the same thing
export const toggle drawer and then in
our index we can get actually we don't
need to know the state just nav bar on a
bar our menu so now we're going to do
two things when we press one of the to
do's actually should we we want to do
this in multiple places I was wondering
if we should pass like a function or do
something but this is fine this stop
props thought and what did I call it
toggle drawer so now we want to do this
also like for example when we click
logout we're going to go to the log out
page then close the drawer and actually
maybe we should close the drawer first
and switch the page same with sign up
okay so let's take a look at that open
you up click on l3 we're going to one
our list is changing as we are changing
lists so that's very cool or i mean or
to do they're changing when we change
lists now when i create a to-do lists
for example new list what I wanted to do
is I want to create a new list and pop
up over here so to do that we can do is
so this is going to be in our component
actually so this is going to be in our
submit
so we're going to do two things we're
going to toggle drawer actually we don't
need to do in this submit fun we toggle
the drawer and then we switched that one
so to do this so that's going to be the
last to do list added right because it's
going to be at the end of the list so
create this a function so we submit we
create the value then what we want to do
is you want to bring it toggle drawer
and we're also going to get another one
set current list so current list so
toggle drawer we're going to call an
insect current list
that's going to be an action and we're
going to pass in current list too as
well so current list dot length minus
one give us the last one so come back
there's a few things we have to change
we're going to create some actions
action statue is get the toggle drawer
and the other one was set current list
which I believe we have we have one
change list
okay oops so we pass in the new list
we're not actually passing the new list
we're passing the new list parameter or
index so may I should rename that but
change list I don't like set current
list just say change list it seems like
a better name so set current second list
to change list and one last thing that
we need to do definitely uncomment that
at our actions hectoring creators and
also we want to get the current list now
we don't need the current list we need
the to-do lists stata to do this and I
think I have that wrong in my view it's
not current list it is to do lists all
right let's refresh that unexpected
to-do list view forum 56
what is the problem unexpected token
expected semicolon oh no handle submit
oh area so I just needed to match the
curly or the parentheses so now when I
write another create should pop up here
and to make sure that's working I want
to display the current to do's title
let's do that home just add a text block
to the render oops render name name is
equal to cur to do list dot name text
name
okay so right now on l1 square one
called what and we go to another so I
think what might be happening is we're
not adding what before we're moving over
I think what's happening is what is
triggering or basically we're switching
pages right as we're adding another list
the length of the list is one less and
then we add this and it's one more so
it's going to one before so let's see if
we can change that it's going to be an
hour submit right yeah so create to-do
list this is not happening before we're
changing to do this is not changing
pretty sure this will cause an error if
I just go to the link yeah that's what I
expected to happen so how can we
how can we change this I think what we
can do is we can say I think we can
create an epic so submit we're creating
a to-do list right every time we created
to do list we want to go to the last one
oops
so instead of let's move to do lists we
don't easier anymore we don't need
change lists just need toggle so to
remove it from here I'm not gonna do it
here and we're not going to do this here
okay so instead of putting that logic
there what I'm gonna do is I'm going to
put in the epic cons to create lists to
do this epic scripts and paste it ok so
the type that this is going to wait for
is this is going to wait for see what
sir beak and list now it's good to do
list add to do list so current list add
to do list so after we add a to do list
what we'd like to do is just set the
current current list change list we just
want to change the list we're just going
to map type change list and we're just
going to say so add to do list and we
add the to do list what are we passing
list so after this is done we actually
don't even care so we'll just get the
cons to do list is equal to get state
dot to do list and we can actually do it
like this
here will do new list is equal to to-do
list dot length minus one so what's the
clan of happening here so the point and
let's actually let me add it right here
at first so the important thing to know
about epochs is they have been after the
reducer so the add to do list has
already happened the to do is and then
added to the whole list so now we're for
sure going to have this in there so we
have the size so now we can just change
the list with this correct size get the
state and it'll be at the right place so
if we refresh and huh this is getting
really long right now we don't have a
way to delete those so let's just go
into the database real quick sure just
drop all of them now that will cause an
heir so let's connect to our in to do
and now we're going to drop so I think
it's delete delete from the table is
going to be to do list where name is
equal to say l1 ok
l2 l3 l4 I'd should clear things up a
little bit eyelet refresh another create
and we are still in yellow so let's see
what happened there did not create
correctly refresh this no it didn't I
know it is there maybe I read I think I
had one that already is called another
let's try this again hop ok now worked
now run huh so i can create to do is oh
what happened there we found a new error
I think this functionality worked but
let's focus on this cuz we broke
something let's get out here so let's
you're just refresh was created to do
seems to work just fine come back to hop
tombs are just fine now if i go here i
say hello create it that's very the
problem ok so to figure out why worrying
that problem we've had a similar problem
like this before and it came down to not
passing the ID so i'm wondering if we're
getting the same problem here so i'm
just going to not here and render better
just going to console that log occur to
do list
so when I create one the current to-do
list or changing that to do so it does
not have an ID and what is the reason
for this is it just in our subscription
we're not getting the ID yeah so I'll
just grab the ID we just weren't
grabbing the ID so we're I'm working now
all right so it looks like those are
working nicely now um I just want to add
to let's add deleting these lists to use
because these are really annoying having
delete these in the database so I kind
of just want to set it to a long press
and delete it that way for now because
that's just a really easy way so I want
to see if there's if that's implemented
if it's not we can figure out a
different way on press on long press so
it looks like they have a non long press
on the list item so let's implement the
first deleting in the schema so source
let's just open up Mary they'll be
easier source services graph ql schema
will be a mutation yeah this will be
delete to do list just need to pass the
ID and
token pass that back delete on our
resolver delete we're basically doing
this but for to-do list so delete to-do
list passing an ID so to-do list remove
ID good good this will be to do list
changes deleted pass and the to do list
and okay I think we're good with the
backend restart that come on over here
you're good now now to actually delete
what we're going to do is we're going to
long press all over here so if i go to
view so on press we do that and on long
press do something else and actually we
just want to hook that up to a mutation
right so the stop probs dot to lead to
do list which will just pass in the to
do list like that and this is going to
be a mutation so we can just copy
components to do item not i'll tape a
delete
copy that we're going to do just about
the same thing let's import these guys
you and we're not going to use the
compose function for now so delete to-do
list mutation we're just gonna have an
ID and a token pleat to-do list pass
back the ID that's fine delete to-do
list to lead to do list delete to-do
list mutation delete to-do list wrap it
ok now I think we're going to have a
problem when we that we're gonna have to
fix when we on long press a to do list
that we're currently on but we're just
going to pretend like that doesn't exist
right now just to check if this is
working so we're getting an invalid prop
on press so did I spell it wrong maybe
on long press on
so let's delete a new list carrying a
problem it's hard it's hard to see with
a long press turd so um let's console
dot log long press do that too okay so
let's see if I actually triggered
because I'm curious if another is even
there your new list I mean ok so our
mutations just not working no I'm yellow
that's a bad idea yeah we will really
crash things if we do that ok so long
press triggered delete to-do list plea
to do this delete to do this oh we're
supposed to pass the token to so comma
the stock probs token I believe we have
token here now we don't so let's pass it
to against a token
refresh I forget which one I tried to
delete let's try to leave new list long
press happens okay so it's not working
and what was there we were getting
invalid input syntax for integer okay
it's kind of interesting just stop props
sorry we should be here token we should
be getting the ID not an object I was
doing that wrong okay over here long
press happened okay so we just don't
have it now tied up to our subscription
so let's tie that to our subscription so
add to do list which I have delete to do
list and to delete a to-do list we do
this delete you so we're just going to
go through the state and we're going to
go through each to-do list if the to do
list ID is not equal to action by ID do
down the wrong one flip ergo so now in
our action delete to-do list
lead to do list passing the ID delete do
list now let's actually call this down
here so be an else if else if deleted
delete to do list passing in the to do
list dot ID now let's see if our
subscription is working here of another
gear of what okay cool so now we can
delete these lists I can flip between
them now the one thing I want to do is
this should give us an error right yeah
so the first thing we need to check
you
console dot log I so I want to see if
it'll tell me the index of the one we're
deleting so we can check that so first
create a couple a b c d okay so say to
leave this one okay it does give it to
me cool so oops so if this dog props doc
current list is equal to I else so oh
yeah let's just go to the first one in
the list so we're checking if if we're
at the current list that we want to
delete then we first have to move we
have to change the list and let's just
go to let's check if I go to zero else
go to one so this is assuming that they
should I do something wrong here if this
suck this is coloring quite weird on let
me just see hope this looks fine okay so
what we're doing here is we're checking
if we're trying to delete the list that
we currently have open we're going to
change list and our logic to change the
list is if it's not zero that's what
this is checking if we're on the first
list then go to the first list if we are
in the first list go to the second list
and then delete the first list actually
I'm curious if we delete the so when we
delete a list we also need to down tick'
current list by one
because okay so let's say I want working
right for a Mon yeah I'm on working I
delete working I should move to a be no
I'm on a now while I'm on an a the
current list value should be equal to 0
this is saying yeah if I is equal to 0
go to 0 okay though i mean the logic
work it's not breaking but i don't
understand why it's working because
we're saying if we're if this is not 0
let's see if it is 0 we go to one but
one that means we should be here right
because this is 0 we move to one so it's
just view render console dot log is the
current stop Rob stock current list
let's see asked the value of that change
okay so the current one is 0 right add
some that's more two more two more ok so
we're currently on five I do this we're
currently at zero now if i delete this
we stay at zero how
how in the world do we stay at zero
actions
it never goes to one even though it
should have gone to one okay let's just
say go to zero every time does that work
even if we delete this first one because
i would think before we delete it we
just move okay it works I don't know why
because it doesn't do anything because
if like I get rid of this we should be
crashing no we actually just don't crash
why are we crashing before I guess it
was a different problem we're fine we're
fine deleting the current one okay our
code works cool alright so this all
looks very good I'm going to leave it
leave the live stream for now we are in
a good place we're getting very close to
finishing this up the what I want to do
in the next video is a sharing and
that's pretty much the last feature I
want to add on to this is being able to
share this and have two users use the
to-do list real time so thanks for
watching guys and I'll see you in the
next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>