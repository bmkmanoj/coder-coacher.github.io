<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Pure Component | Coder Coacher - Coaching Coders</title><meta content="React Pure Component - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Pure Component</b></h2><h5 class="post__date">2018-01-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/axppjojlUnw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys you seem to like my last video
that I made on react in performance and
in the comments someone mentioned pure
components which are a great way if used
correctly to optimize your components as
well so I want to talk about those and
how to actually use them but first I
want to show you an example of where
they might be useful it's right here I
have a very simple react application
right here is a parent component cult
app and all it is is a counter so my
state here I have count zero and then
when this increment function is called I
update the state to increase the count
by one and right here I'm displaying the
count and then my button here is when I
called the function when I click this
button this plus button increment is
called increments and I also have a
child counter so this is a child
component that I'm rendering underneath
and child component is just about the
same thing except it also console logs
whenever it renders and it's a regular
component here and it's counting and it
counts by two instead of one so let's
look at what this looks like in the
browser so right now I have my parent
component right here in my child
component right here so there's a small
problem with how this is set up now
there's nothing technically wrong with
the code it's just how react works where
every time I hit this plus sign right
we're incrementing the counter and this
is the parent right but notice something
down here this is me console logging
rendering it rendered 16 times the child
component even though the child so we're
console logging in even though the child
component I didn't push the button on it
I was only pressing the button on the
parent so how react works is it'll
rerender all the children underneath it
so that can be a problem as you're
seeing here's a possible case where
there's really no need to rerender this
component because nothing really changed
right look as I'm incrementing this note
exchanging with the child right here now
when I click this it should be rerun
during these are good renders so what
pure component helps you do is help with
wasted renders so under child component
instead of saying react component I can
say react dot pure component and these
are almost identical the only difference
is there's a function called should
component update and react and basically
that says hey here the state here are
the props here's the context gives you
some information and it's like should I
update this component or rerender this
component so what pure component does is
implement this method for you so you
don't have to write it and pure
component checks without the state or
the props change so you notice how
nothing was changing with their child
counter so we didn't want it to keep
rendering so pure component handles this
for us and says hey if the state hasn't
changed the props haven't changed don't
rerender so now notice how when i hit
this plus sign we only ever render the
child component once until see as till
we actually start using the child
component in the rendering changes so
plus plus plus so pure component can be
really nice to save renders because
rendering is expensive now how does this
do this so what it does is it does a
shallow comparison of your props in your
state so it checks whether your states
and props have changed now shallow
comparison means it just is very fast
and it just checks one the references of
your objects so if you have two objects
a
and Cosby these objects are not equal
because at least with a shallow
comparison because they are two
different variables or they're
referencing two different places but for
example a oops a would be equal to a if
you did a shallow comparison so objects
functions to raise you have to be
careful with because they are actually
checking the references of those look
for example numbers and stuff no problem
you can just do a regular comparison
okay so this is well and dandy so why
don't you use pure component for all
right pretty much all your components
because pure component seems to be
saving renders which is really nice and
it is actually much cheaper to do a
shallow check the check should component
update rather than rendering the whole
thing so it is saving in this case so I
want to show you guys a little quote
from the creator of Redux and he says
they can help your app when placed
strategically but just making every
single component pure can actually make
your apps lower trade-offs so he's
talking about pure components and
whether or not to just use them
everywhere because we just saw how
powerful they can be and it can actually
there's some places where they can
actually make things slower and you have
to be careful and you have to watch and
look at your code and monitor how many
times it's rendering in the time so I'm
going to show you an example where
things could go wrong so here is my
application right here and I let's say I
want to pass in a an options dictionary
and I want to pass it in to say what my
how how much should my initial increment
increment by and what the symbol should
be here so I'm gonna get this from the
props oops
so I must say this prop stock options
dot symbol and here I'm gonna say Vista
prop stock options docked increment so
now I want to pass in a options object
to my component here oops I meant to be
yep so this is a child I should rename
this child counter okay
so then in my app KS over here I want to
pass in and options and I'm gonna say
right here that the symbol is going to
be plus plus 3 times an increment Mount
is gonna be 3 so this is almost you know
we could make this the same thing I had
before let's say so my symbol is now
plus plus my increment amount is 2 for
my child component so let's come look at
look at this options - I call it options
now they're called options so options ok
so now if I hit plus right this is
working the exact same so we've rendered
three times let's clear a console
well what's happening we're now
rendering every time with our component
right even though we're using pure
component and this is our child
component here rerender even this we're
just incurring the parent what's going
on if so this is a case where if you're
not careful you can actually make it
worse because not only are we checking
should component update and doing a
shallow comparison but we are also rear
end during and the reason for that is we
have in this object that we're passing
in so remember how is talking about a
little bit earlier how shallow
comparisons work with objects so here
we're creating a new object every time
the parent is rendered
that's why it's not working so this can
happen in your applications that's why
you need to be careful look at your code
see when it's actually rendering because
if you're not careful and haven't used a
lot of period components you could be
doing this places so now that remedy
this
you could set move the options up into
the state now you may be also thinking
hey maybe I can say cons options down
here as well right but this is also
another place where you can get into
trouble
because it's gonna create a new options
every render exactly like before so
let's show you this is break oops
we forgot to actually pass it in options
so this is gonna have the same problem
as before so incrementing the parent
still rendering so we need to basically
keep reference to this object and only
change it when this object has been
changed so now I'm gonna move it up here
into my state like that so now if I do
this thought state got options
we're gonna keep reference to this
object the whole time and so now notice
we only render one time so perfect
that's what we want to do another thing
that's very common and this is actually
something that I used to do a lot is so
let's say we want to pass in a function
may be like on increment so we want to
do something when we increment so I'm
like this I'm like console dot log
increment called and let's come over
here and we just broke it again
the reason for that is we're creating a
function this actually creates a
function so we're creating a new
function every single time so how do we
fix this you move it up here and you're
like on child
whose child increment I want to console
dot log and just say constant that log
increment bender you know whatever you
want to do here on trial so now we're
not were your enduring because we're
passing the same function here and we're
not creating a new one so be mindful
when you're using peer components to not
pass in things that are constantly
changing even though they're the same
thing right so the value was the same
but the reference was changing so it was
causing it to keep rerender and that's
where peer components can be actually
slower than regular components so that's
the only thing to be mindful about when
using pure components and personally
this is why I don't just use peer
components all over the place is until
you really need the performance
increases I just use regular components
and then I go in and read it's very easy
to go back and refactor things that need
performance increases later and usually
regular components are good enough all
right that's it for this video guys I
hope that helps you definitely take a
look at peer components and consider
adding them where your components are
rerender alot and slowing down
performance
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>