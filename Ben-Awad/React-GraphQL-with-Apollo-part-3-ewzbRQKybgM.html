<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React GraphQL with Apollo part 3 | Coder Coacher - Coaching Coders</title><meta content="React GraphQL with Apollo part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React GraphQL with Apollo part 3</b></h2><h5 class="post__date">2017-02-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ewzbRQKybgM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys in this video we're gonna
be working on the main component on this
component is you'll see on every single
page so it is an important one okay so
we're gonna have to import some things
that we're going to be using for a graph
QL so we're gonna for graph QL and we're
gonna use the compose function this is
coming from react Apollo we're also
going to import g ql from graph QL - tag
and then I'm just gonna rename this to
graph QL so it looks nice
containers text that's good
and we can keep this the same so now
down here we're gonna be having to call
a function on this class so we're
actually going to export default main
we're gonna put this guy down here and
you know this will make more sense in a
second so the next thing we actually do
is we literally just write mutations
that we would like so the two that we're
gonna working on right now are create
talk of mutation and what we do is
you'll notice I use the back tick and I
just prefix this string with g ql and
then in here i can literally just say
mutation and write my mutation out
exactly like when you go to localhost
and write it out here so what I like to
do is I like to just go over here and
say mutation create taco mutation run
that so it's an error then we had in our
stuff meat chicken cheese cheddar salsa
hot so I prayed a fight and first I also
like to run it make sure it works it
does and I'll just come and copy it
paste it in here so we're gonna do that
again
oops for the creating secret burritos
create secret burrito mutation oops
put a capital u then we're gonna come
back over here and we're just gonna say
create secret burrito see sighs huge
just run that auto-populates for us what
we want just paste that in okay so now
we have these two mutations that we
would like to run basically we want to
wire them up so we can click a button
you know run this mutation it'll add a
taco to the database so how we can do
this is we can add these mutations to
the props so if we come back to react
app let me inspect it if we have the
react dev tools which I do I recommend
installing if you don't we can add to
our main a prop that's a function that
we can call and when we call that prop
what it'll do is it'll then run this
mutation on the server so to do this we
say Const
create taco graph QL and then we're
gonna run our taco mutation create
talking mutation and then we're gonna
pass some parameters in here so the
props own props and mutate pass it here
mismatching I want to go that way okay
it's inside props we can create a taco
and whatever you name it here is what
it's gonna show up in the props and I'll
show that to you in a second and we're
going to return mutate and then result I
think console dot log result I'm just
gonna console log it alternatively what
you can do is for example if you want
this in here for our app for ours we
don't need to add it to the Redux store
because it's so simple but notice how it
says we have own props what this
represents is the props that this has
access to and it actually is access to
actions so we could say for example
instead of just console logging the
result we could say own props dot you
know you would create an action let's
say with the action we created was add
taco and you can pass in the JSON it
returns and then you can do something
added to the Redux state update the view
or whatever you wanna do for now we're
just gonna console.log it so now if we
come back over here type main and we
should see container we should see our
prop I do not see it Oh to actually add
it so as you can see this this is not
actually connected to our main prop we
then have to call create taco on me and
now you see why we had to put export
default down here is because we're
actually wrapping the component with our
mutation so now we should see it for you
and sure enough create taco is in the
props now now we don't want to just
create tacos we also want to create
secret burritos so I'm just gonna copy
this paste it below and we'll call this
one create secret burrito create secret
burrito mutation and then we're gonna
say create secret burrito and then we're
gonna do the exact same thing we're just
gonna log the results um so one way to
actually do this is then we can then
wrap it again so each time you're gonna
add a mutation to the props you just
wrap the prop with that function you
create I mean so now we see both of our
functions are in the props and we can
call them and it'll actually run the
mutation on the server alternatively as
this is really ugly syntax and if we for
example have more mutations you just
keep wrapping over and over and over you
can actually compose that's why we
imported that function and you can pass
in the functions you'd like so create
taco and create secret taco I'm sorry
secret burrito and then you call main on
that composed function and there we go
we come back over here we should still
see our props okay so now we are able to
programmatically basically call the
server call mutation on the server all
we have to do is click a button and then
our button will call this function that
we just create in the props and I'll
update the server so in the next video
we'll actually set up the button that
you click that will run this function</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>