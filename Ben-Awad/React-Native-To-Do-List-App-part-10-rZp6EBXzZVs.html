<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native To Do List App - part 10 | Coder Coacher - Coaching Coders</title><meta content="React Native To Do List App - part 10 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native To Do List App - part 10</b></h2><h5 class="post__date">2017-03-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rZp6EBXzZVs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys will come back so in
today's video what I want to do is
putting in like a share button so you
have these like to do list now and I
want to be able to create to-do list
let's call it may be a grocery list and
this is something I want to be able to
share across multiple oops oh my JW
token expired I want to be able to share
across multiple phones so let's say I'm
I'm a family and I want to create a
grocery list and I would like to have
all my family members on the grocery
list so they can add items see it so I
want to be able to share so I'm going to
create like a little sharing widget down
here and it will be able to more
multiple users will be able to look at a
to-do list and update it in real time so
let's get start on this the first thing
I want to do is edit the server in like
set up relationships so we can set up
the database so it looks the way we need
it to so I'm thinking right now we need
to create a new service because right
now we need to basically create what's
called a many-to-many relationship
because we want to be able to share
multiple to-do lists with multiple users
so basically or actually now I think of
it does multiple to-do lists go to yeah
its many to many relationship because
we're going to have multiple users and
multiple to-do list connecting each one
so for example I could have five I can
share five to-do lists and share that
with 20 people and each 20 people is
shared to the to-do lists this is going
to be a many-to-many relationships well
it's called and so to do this we can go
to see equalized and check this out so
this is called an n2m relationship so it
looks like here we go here's one way
they did it
like you can have they do it through
belongs too many it's how they do it tag
belongs too many tagged longs to post
and they sep foreign key so this is
something we can go ahead and add and
now if we look at i just googled a mini
to mini relationship with a feathers yes
and this is what i found is dated this
associate thing and added a mini to many
relationship and that's similar to what
we did with i believe we did something
similar right here with the has many so
thats of 12 it to end so now i want to
do belongs too many to get this working
so okay so this looks like they did it
basically at a user and come back out
i'll show you their services for this so
they have a channel message and user
services and the message and user are
both like connected with the channel and
you can have multiple users and multiple
chain messages in the channel now we
don't really want to do like a three-way
thing we just want it to way so i think
more like this is what we want to do
where we put in both of our models right
here so the first thing I'm just going
to paste this in for reference so what I
want to do is I want to say to do list
dot belongs too many and on do models
user and then we'll say through and then
I think we can just pass in singled
belongs to and if I click on user I
think it was a Zumo okay then I pass in
an object
so the one of them is through and I
believe this is just how what I want the
name user channels I think that's just
like a name and convention that it's
created so let's see it looks like both
of these I use the same through thing so
through this will be will say shared
to-do list that might not be the correct
name i'm not exactly sure if this is
setting up a table or what this doing
but we're about to find out and then we
can set up looks like a foreign key and
so post lungs too many tag taggable ID
tag ID so this will this is coming in
from the two duelists ID so this will be
shareable list idea i think is what we
want to give it and then constraints
false right now copy this and we could
come over to our user and do the same so
not save that there we go and now we're
going to do the same here so user dot
belongs too many and we'll say models
dot to-do lists and again we'll do
through and I pass the strings for all
of them yet so user user channels we
said I believe that we used and I don't
think we actually need to add a
constraint here so I'm just going to get
rid of
the constraints false in turn adding
them so you can copy that over and then
the foreign key is going to be different
this is going to be shareable list and
this should be shared list i believe so
this is taggable ID this is tag ID we
did shareable list ID it should be
shared list ID i believe and say that
close i'm going to just create the
database remake the database so that the
this relation is set up and i'm going to
just go in and look at the table and
database and make sure it looks the way
I want it to that I named these foreign
keys right because i'm not sure if i did
or not because i'm not really sure which
way this is going i could read the docs
but i'll just try it out so I'm line to
actually go over here I'm going to stop
our server clear that i'm actually going
to go into pc equals let me talk to the
database and the first thing i'm going
to do is just drop database and before
we do that let just log out so we don't
mess stuff up over here so i'm a drop
database and the database we're dropping
is Arne to do you know I'm going to
create database are in to do now eat you
should be able to do what's called
migrations to update the database
instead of having to drop the days and
creating it every time I want to make a
change but I haven't looked into how to
actually do migrations so for now I just
redo it so we're getting an air let's
see what's going on there monaco babel
no source and see what's going on
belongs to me call it with something
that's not an instance of the sequel
eyes model okay let's just double-check
that i use the right syntax and stuff
models to do lists that looks good now
two out this 10 user it will be users
they're real just use the wrong up
pronoun I guess plural what not okay so
we created the database i believe so
let's connect our in to do um and now we
can it goes d plus i'm users okay
okay so we have a table called shared
to-do list so let's deep lust that
okay so this says two things share the
list ID and shared list ID references a
to-do list and then shared list ID
reference to the user okay so it's
really confusing i'm going to come back
here and change the wording so here
instead of shareable lists ID i'm just
going to say i'll just ID here i'm going
to just say user ID so now open the
database backup oops did not mean to
open up a new tab we're just going to
drop the database where you create it
mpm start or I can just do babble note
now come back in connect to the database
and now describe our table so now we
have two fields user ID and list ID and
actually I want to use underscore I'm
sorry guys this I want to keep the
naming convention did I actually am i
keeping this naming convention on i
think i'm using camel case actually and
i don't want to use camel case but i'm
not going to go back and change it you
know i'm going to just going to say it's
fine for now i won't be too picky but as
you can see now we have a user ID and
Allah study so they basically this is a
new table that we created called shared
to-do list and the whole purpose of it
is it has a list ID and the user and
this is basically the user may not have
access to this
lyst ID they might have not created it
that if they're in this table this user
can access this list ID that's basically
all we're saying so every row in this
table is going to be a user ID and a
list ID and that user can access that
list okay so we can cancel out that we
can just mpm start leave that going and
actually do we need to create a service
a new service that basically just
creates so I'm trying to think of how
from the client how am I going to access
that that database like how am I
actually going to go and add values to
it because this is a created table I'm
just going to come back over here for a
second so here they actually created a
channel service and actually okay so I
kind of changed my mind am I going to
take my mind of how I want to do this
belongs too many channel belongs to me
let's let's just see how sequel eyes
recommend creating belongs to many
ok
okay creating elements of belongs too
many Association that's what we like to
do now we can create a project with
multiple tags in the following way so
you can mod as the end of the support an
alias as well so when we create a
product we're tagging it yeah I think we
need to create a separate service
because we want to be able we we don't
want to create the shared thing together
like so notice how when they do this
they're creating multiple tags and I
show you're showing it to the product at
once we don't want to be do this we want
to first create our to-do list first
create a user and then later come and
associate them so to do that I'm going
to create another service so the
feathers generate shared well it's going
to be a service will call this service
share just call share to do list it's
fine this is going to use a database and
use postgres equal don't want to be
authenticated to share yes please okay
when you're basically a refreshing area
so it pops up okay so now we want to
alter this slightly so now we're going
to belong to share to-do list and get
rid of that guy here to paginate so yeah
belongs to many models that shared to-do
list I think is what it would be and
here models belongs to so they both
belong to this share to-do lists so it's
kind of similar to this how they have
their setup so both of these are
pointing at the channel I'm creating
foreign key user channels is that
something that they do oops not
education channels here channel model
nope channel model literally has nothing
inside of it and I think our channel ma
are shared to do which is basically the
same thing I'm not going to even have
text so literally just going to be the
point of it is to add stuff later the
store the relationship okay so now we
have this pointing to our mutual on this
guess an other ID foreign key that's
fine okay this looks good
now come back over here let's drop and
restart run the database you know what
before we run this come back over here
make sure this comes just configures up
here and above graph ql as well awesome
so let's kind of look at the database
now let's see what our share to-do list
is looking like um it's referenced by
okay so the table is up to foreign keys
let's see let's see oops we can't clear
how am I going to look at all the tables
possible area um so we have to let share
to do this and what did I call through
shared to-do list so Dorsey's shared
okay so their shared to-do list and
their share to do list that's confusing
so shared to-do list has both of these
things and now share to you this what
does it have ok so we has nothing here
I'll just full screen this is easier to
look at so this is referenced by shared
to-do list constraint
foreignkey sure to do list ID references
on update cascade this is actually not
exactly what I wanted to happen I don't
think okay let's go back to shared how
is it references so so basically it just
added another column for The Share to do
list let's not what I wanted I basically
wanted to serve this up let me come over
here and just like I basically wanted a
service that's attached to this table
okay a new ID new idea what i will do is
so i want to be able to reference this
relationship from the client so I don't
want to have like basically three IDs in
this that's basically those it just on
our ID okay nevermind I don't like this
come back over here
through I'm just going to call a share
to list because that makes more sense i
think then shared sure to do this okay
now now we have to go about just
removing this okay delete that go into
test real quick and actually didn't I
even create a test for it no it didn't
okay that's fine so I i do like what how
the database looks like this um if i get
rid of so in the current schema that
I've set up with my sequel eyes I like
how the database looks the only thing I
don't like is um there's no way for me
to actually do the has many relationship
like actually create stuff so connect
select all from so we have this table
right I want to be able to add a road to
this so how do i add a road to this
because we didn't add a new service that
lets me have access to this table this
is like something that is it's almost
inherited because it looks like how they
do it it's not the way I want to do it
because I want to come back later and do
it
because I don't to create a like this
how I want to create it something like
this I have the user ID and the list ID
and I just want to add it to this table
so I'm wondering if I should just make a
service to do this but then the service
axis is the database or maybe it doesn't
need a schema so how does this work let
me see where do they have any other
services in there has many medication
user index No so let's try something I
want to create a new service that's
going to be like just to try something
and what I think i'm going to do is I'm
going to create something I'm not going
to give it a model is that what I'm
going to do or maybe i'll make a generic
one so maybe let's try generic one so
there's generate service service
so doing generic instead of a database
one and then hook up the database one
myself get out of here so what does that
just do so i added a generic serve oops
generic service so if we go to add
shared to do and this just has these
guys right and it's not connected to a
database now I want connected to a
database and just do the stuff myself
huh actually I just had an idea so
okay this is for it has many
relationship or belongs to many did I do
belongs to mini or did I just do belongs
that's important i think i might have
and i can delete this i have i have
different idea this is not i think as
helpful as i thought it was going to be
come back here believe that delete from
over here okay oh yeah i was going to
check what I did so to do list okay so i
made it belongs too many so this is just
a has many relationship not belongs too
many it's not showing how to do it
belongs to many listeners to do a
project with mini tags getting a ball
could look like as many now create a
project multiple tags in the following
way
so now as multiple tags so I'm thinking
as I could go in and update the product
so so post as many tags tags associated
many posts so what I can do and so I'm
trying to think of how we do the same
thing that they're doing here with our
project take this post tagged and
generalize it so I think what we can do
I think this will actually work because
we have a user they have many to-do
lists that they can see okay I just need
to know what to name it now so item tag
oh I just realize this they create a new
book new model here through this to work
but that's fine we don't have to do like
this I create for us
this
this is a chair categories so we'll
recreate a tag or we create a product we
would be creating a to-do list and
adding users okay so I first want to try
this with a post request and if that
works then we can add this to the app
and actually hook it up the graph ql but
i want to make sure before i go through
all the work of doing this that actually
works so the first thing I'm going to do
is okay yeah we need to post and make a
user so start the server alright so
create a user is ID is one now I create
Bob to these IDs to now just for the
sake of this will login with Bob grab
the token now we're going to make a post
request to localhost 30 30 and we're
going to create a to-do list let's make
sure to do list and if I go to index it
will tell me the route i can go to / to
do list and we'll capitalize it why not
so we're going to post raw JSON
so token oops that authenticate and
actually before we actually do this we
do one thing so I need to create a new
hook for this to do list because what we
need to do is we need to notice how they
include this right here we need to
basically make a hook to include the tag
that way we can get this to work ok so
to do that what we're going to do I'm
going to do feathers generate hook this
is going to be add relationship excuse
me before hook and the service um not
recipe we want um to do list i believe i
named it yep and we want this for patch
and create so we can test it too okay so
what did I just do there what what did
it add so now oops by coming here to
nerd tree we go to hooks and we have a
new ad relationship hook nothing special
going on here just a function that lets
us add some things what we need to do is
we need to say hook dot params dot c
equalized and we're going to give it an
include just like they did we're going
to pass it in here and we're going to
just need to get our model now we can
get our model by doing took that app
that services service that we want is
user and we're going to get the model so
just to make sure that's working I think
I might have had could be a syntax error
here somewhere because I think not sure
if this is service or services i think
its services but one way to test it is
the post are to do this we need text
which i'll say hello and we need
complete which will be true and we'll
see true and was there anything else I
don't think so I mean we'll see when he
posted if we in here looks like your
JSON is messed up comic com oh don't put
a comma at the end name cannot be no oh
the to-do list
there we go okay created okay any
problem here there was a problem but is
that looks oh that was just me okay so i
think this worked so now we can say is
users i believe and pass in a list and
we can say can we say just ID 1 because
i'm not sure if this is creating the
users to because we don't want to create
a user wait we just want to associate it
so that's okay now i want to patch so
okay that is an ID of one so now i want
to patch the to do list and i want to
set its users and I wanted to give an
idea of one I have no idea this will
work it did work it did nothing
so this is interesting does it not even
want me to do users so what we're going
to try is we're going to try posting oh
I'm dumb when I pass it when I do an ID
I need that however when I do a patch i
need to give an ID or we give up on this
let's see if it actually did anything no
what about update patch oh it looks like
there's an update option I guess that
might be put okay let's just do create
okay email cannot be an old password
cannot penal so this is what I'm worried
about it looks like we're creating users
which is not what i want to do i just
want to see if this relationship is set
up
alright so that actually worked but it
doesn't do what we wanted to do notice
how it actually created to users we
don't actually create to users what we
want to do is we want to set the I the
users like we already have Bob one two
three four i want to say i want to share
my to-do list with bob for let's say
what i really want to say something like
this i thought this would work but it
didn't I wanted to patch it and say ID
so I do one let's say set the users I'm
actually curious what this does let's
just run this first I get rid of this
what is patch doing my am I sneah
specify something in a different manner
maybe I'm passing the ID in I oughta
come i think i'm just doing a patch
request wrong and feathers jayus
probably just not doing it correctly I
want to just add the users to this
notice it's not showing me the users for
this when I get it by default
I'm curious if it wants me to do like a
query like a pot I'm way after like
query two things actually get this to
get the users for a specific thing let's
find though I don't really need to worry
about that right now so the problem at
hand I need to figure out how to patch
so patch request feathers Jess oh maybe
I forgot that's how you do it so you
pass ID in like that okay
can't tell if I did anything
patch let's kind of cool
and now what if i create a user so about
that for example Bob five of six maybe
it's like it's not even recognizing my
stuff here what if I do to do list maybe
can object no two lists no I'm curious
what I do for this I should refresh this
because this is old data although this
junk is here need to when you log out
refresh that turn it off okay so this is
quite a dilemma how we're going to solve
this email pop I want to read this
utilize docs a little bit again
because we don't want to create them
both at the same time we want to create
them later I'm curious I wonder if we
have a data model for our shared table
so right here you can print what your
models are in the index folder of
services so I'm just going to print the
models that we have okay so anything of
a way to basically patch this but only
but don't create new users I don't want
to create your users how I'm going to
use existing users and add them I'll see
if there's more docs see equalize look
at Google some examples what is this
called belongs too many example this
let's go start over flow instead
actually this isn't pop up anything
interesting
this is what we want
basically all you want ad projects see
so the user already exists and it's
adding on an existing project cool cool
cool or is it look like it's creating
this project and adding it to an
existing user let's see what
stackoverflow says so that's what we
want to do so instead of doing like a
group create so i think i'm going to
stop the stream for now i need to do
some research on actually how to do this
with feathers GS because we want to
basically add a to do list to an
existing user so i need to figure out
how to do that so this was an uneventful
stream but in the next video i will show
you how to do this so thank you guys and
I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>