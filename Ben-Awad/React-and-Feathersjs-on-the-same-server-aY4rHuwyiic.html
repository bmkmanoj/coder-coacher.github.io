<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React and Feathersjs on the same server | Coder Coacher - Coaching Coders</title><meta content="React and Feathersjs on the same server - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React and Feathersjs on the same server</b></h2><h5 class="post__date">2017-07-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aY4rHuwyiic" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys I'm going to show you how
to combine a react application with a
feathers j/s server so in this example
I'm going to be using my menu monkey
application I have a feather chef server
here and then a react application here
but you can follow along if you have
your own project you'd like to do this
with the only requirement is your react
application is not server-side rendering
it's a static application and you have
an Express server it'll work with this
will also work though with pretty much
any server you have as long as against
reserved static files let me show you
how this works with the feathers GIS
which uses Express and if you don't know
whether your front-end is static can
increase static HTML files if you can
create react app you're good to go you
just need to be able to basically build
it out into static files and I'll show
you how to do that so I'm just gonna
walk you through doing it with these
projects here first I'm going to do is
clone each one I have terminal split
here I'm just going to get clone on my
left one here we call it client I'm a CD
in the client and on type of yarn to
install the dependencies and I'm going
to come back over here and do the same
thing for the backend get clone spell it
right server so also for this project it
uses Mongo so if you are grabbing this
make sure you have a Mongo server setup
and then type your own okay we're
selling a dependencies for both of these
guys when they are done what we're going
to do is our end product we would like
to do is do n p.m. start on our server
here and then our react application
works too normally what you've seen me
do in the past and maybe what you're
familiar with is I'll start M p.m. in 1
1 terminal window and NPM in another so
you got two servers running the server
and the client and they'll talk to each
other so for this we're going to get
them all running on what and how we're
going to do that is
if you notice in the server there is
this public folder and if I look what
the public looks like it's just HTML
files so our server we have a source app
app is you'll notice app dot use slash
Heather's thoughts static and is the
public folder so what's doing is it's
serving these public so static files is
just HTML Javascript CSS that's what
they're considering static so you can
grab those any files you put in public
and if you go there to this index route
you can see it so that's what exactly
what we're going to do with our project
here so I'm going to open up the client
code and Visual Studio code that way we
can make one quick change and that is in
our source folder modules index you'll
notice that I'm actually looking for
locos 3030 but since they're going to be
running on the same server we actually
want to leave this an empty string and
that's important because the empty
string lets us query the same server we
are on so we can close this now we're
good to go so in your project you just
want to make sure to change any you know
requests you make to your server that
are pointed at you know just an empty
string or like slash users and notice
how you don't specify where the URL is
okay so we have that we have our server
here and it's looking for a public
folder right now and it will serve that
so we want to do is we're going to do
MPM run built and what this does is use
and create react act it will actually go
ahead and create this public folder for
you for your react application now they
call it build that's okay what we're
going to do is copy it into our public
and call it public so I'm going to
remove the public folder because we
don't need it
for a server and the copy with - our
flag can be used to copy folders over so
you want to copy the whole folder that
is about to be created with this
optimized production build I'm going to
go up folder you want to client and then
grab a build folder and I want to rename
it public because that's what our server
is grabbing so we grab this and you'll
notice if we do it just a quick LS and
the public you'll notice how there is
there's an index.html file and there's a
static folder and static j/s so there is
one javascript file in the HTML file and
that's our whole react application npm
run build just grabbed all the J's files
for a project and put it into those two
so now if I do NPM start we're starting
just one server now are back in on low
close to 30 30 come over here and now if
I come to low close 30 30 we should see
our application up and cool we do and we
can click on things and we can use their
application so this might look like it's
working but there's one last thing we
need to change - for sure get it working
and that is there's one problem right
now if I go to notice how the URL is
changing up here and you have to sign up
and go login it's changing but if I were
to go there directly right because you
see me clicking these buttons to go to
the different URLs I were just go to
login directly locks you get a 404 and
the reason for this is for you shut down
the server and we don't need this one
anymore so just our server up and
running if I go into source app js4 our
server you'll notice how we're serving
the static files and the index page
that's what the flash means so if we
come
- just the slash our static files are
served but we also want them served in
/login what we really want is them to be
served in any page that is not our
server because right we can access our
server from here - that's the cool thing
about this like regular slash big
recipes it might be oh we didn't have it
up is so well when I start server I'll
show you that guys that but basically
what's happening is it wants to show the
static files when we have static files
otherwise serve the server and to catch
all what we can do is we can actually
copy this line here and we can move it
down here and we just change that to a
star and star is like a catch-all and
make sure you have both because you need
both of them will catch all so when we
go to this other page that will actually
work so if I do NPM start it'll start up
now if I go into login
I can see BAM
takes me to the login page and now
everything is working so that is how you
combine these things together now I'm
going to just try to go to slash recipes
and see if it will show me umm it might
be you might need to be authenticated
but nope okay cool so you'll notice how
this is just a bunch of JSON here you'll
notice how when I go to slash recipes
this server is getting data right this
is JSON data and this is not static this
is actually our fellowship server but
now if I go to this page that service
our react application so depending on
the route we go to it'll serve our
server or it'll serve our react
application but they're all on low close
to thirty thirty so that is pretty cool
so that's it for this video guys as you
can see it's actually pretty easy with
create react app to bundle it together
with your server really you're really
just telling your server it's a two-step
process it's creating this public folder
from your react
application and then pointing telling
your feathers or your Express server to
do the static files so that's it for
this video guys thanks for watching and
I'll see you guys in the next one
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>