<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Redux Form Submit To Server With Redux Observable | Coder Coacher - Coaching Coders</title><meta content="Redux Form Submit To Server With Redux Observable - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Redux Form Submit To Server With Redux Observable</b></h2><h5 class="post__date">2017-04-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JT2F2NQ19o0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys in today's video I'm
going to show you how to set up Redux
observable with redux form that way when
you submit your form you can submit it
off to a server and do a sync stuff so
okay so I just have a basic redux warm
setup if you're not sure how to do this
I have a previous video showing you how
to and I'll look in the description
below and you can follow that to get to
this point and then on what I'm doing
with my Redux form here is I'm just
basically submitting I'm submitting some
data first name last name email and then
that's causing a action to dispatch and
I'm gonna catch that action with my
Redux observable and actually call the
server and send this data so right now I
have like a feathers GEOSS server just
running in the background you can use
any server doesn't really matter and
then I just have this simple react app
that's running and that's basically just
some boilerplate I have set up so the
first thing you want to do to get this
going is to do yarn art at rxjs and
Redux observable
alright added these so I didn't have to
run this you can also do NPM install
that works as well just like that and
get those two packages so you're gonna
have one include rxjs and like one of
your root files for me this is the outer
layer of the index file so source index
and that's where I put the basically
outer shell my app and then you just
want to import rxjs because we're going
to be using some of these functions um
next I'm created a epics folder and I
just put an index that yes we'll get to
their next the next thing is to get
ryuko turrible working is to actually
set it up with some our store so what I
did is I imported create epic middleware
for me to observe Ripple and I imported
root epoch from dot slash epics and
we're getting that root
from here this is something we're about
to actually make and then I just created
the middleware and then I did apply
middleware which is something from redux
right here okay so you just need to add
those things this is what my Redux store
looks like and now I'll be listening for
actions with our epics and I'll show you
how this works
now if we go to epics index I have a
little bit of boilerplate code here at
the top here I have some import
statements we're gonna be using this
from promised this is really nice I'll
explain it when we actually use it we're
gonna be using combined epics that's
here at the bottom it's very similar to
if you've seen with redux combined
reducers where you can have multiple
reducers split up it's just like that
for epics I'm using pine epics we can
have multiple epics and then you combine
them into one and then you pass that off
and put into your store
so for example if I have more maybe a
lot again epic and you have a bunch of
different ones for now I just have one
and this is basically what our root epic
that we were importing in our store so
I'm exporting that here and then start
and stop submit these are actions from
redux form and this just allows us to
pass back errors to our redux form in
case we pass the data and we do it in
the wrong format or something pops up
because the server is gonna do some
validation itself okay so this function
right here is something I made in a
prior video and I'll just explain it
real quick how it's working on this is
an async function and it is using the
new a weight and syntax from the new
JavaScript ikema script stuff I forget
that it gets 2017 is where a weight
comes from it could be wrong though but
here it is so the syntax may look a
little foreign if you're unfamiliar but
I'll explain it so what we're doing is
we're making a post request to the this
you
this is the where I have my server
running and I have a route setup
register so you can see I pass and the
URL and then the second parameter to
fetch is an object this is just saying I
am making a post request with the method
and then I want to get JSON or I'm
passing JSON I put here and then what
I'm expecting some JSON data an object
to be passed to this function and then I
just pass that with my post request and
so I actually make the post request and
then this will wait just Waits
it makes this synchronous so it waits
until the fetch is complete and then it
passes that into response and then all
we're doing is we're returning the JSON
from this response and again we're
waiting for that and then we wrap this
in a try-catch if there's any error when
we're trying to fetch we'll catch it and
we'll return the air and then right here
this is our actual epoch so right here
we're gonna have to write this right now
this is just the start of every epoch so
the name of my epic I call it register
epic and then action dollar sign this is
basically just used for this part right
here this just means I'm listening for
this action so requests event I come
over here to my actions
oops not this action my component
actions you can see your request
submitted right here so when I submit my
form I'm dispatching that action and I'm
listening for that right here and then
the second parameter to this function is
basically just gives you access to the
Redux store so I can dispatch and see
the state of things okay so now what
we're gonna do is we're just going to
basically chain off of this so we're
listening for requests in it whenever
request comes then what we'd like to do
is we'd like to basically start
submitting so start submit and we're
going to do contact contact is the name
of
Redux form dot do is something from
redux observable and it's basically
evening of it almost like a side effect
it's something that doesn't return
anything if you're not too familiar with
how redux observable works basically it
takes an inaction and it returns in
actions so action in action out so right
here we're taking in a request submit
action and then what we will need to do
is at the end we need to actually spit
out an action so what this does is here
we're saying we don't want to submit an
action with here we just want to
basically do something and what we want
to do is we want to start a submit so we
need to chain more things because we
actually need a return in action okay
so we started the submit for a contact
form on this is necessary so we can stop
the cement if we have any errors okay so
next we're going to flat not flatten
merge map this is again something that's
coming from redux observable or rxjs one
of the two I believe it's rxjs actually
and I can just put a semicolon there
because the rest of our stuff is going
in here
so what merge map does is it takes the
return value from here so we're gonna do
some things in here we're actually going
to put from promise this allows us to
call our submit to server passing in
action dot data so we passed in a first
name last name and email and as
parameters to our action and then we
just have it and we can access it with
this dot data we can call this function
so this from promise here what merge map
is doing is it's taking this whatever
this is returned and it's basically
returning it here we did map it would
return it observable I believe and what
we want to return is actually an action
here so
basically takes this observable and gets
the return value of it and gets the
action you can think of this almost very
similar to a map as the name States I
guess so okay so we did from promise we
call our submit to server and now we
want to basically look at the return
value so we do dot map and then we take
and basically the return value so we can
say response from the server and then we
can look at it we can say if response
dot airs you can return type action so
maybe request failed and we can pass and
the air or the errors response that
errors and then we can say else maybe it
didn't and we can return type request
successful and that's pretty much all
you need for a epoch so if we run this
it should go ahead and work I want to
add a few more things though and before
I do though so this return value right
here or right here these actions you'll
notice it's going to go up the chain
it's going to return here and it's going
to return here and that's going to be
basically the return of this function is
either this action or this action so we
took requests submit and then we say
whether it failed or successful at the
end after we make our call to our server
and you'll notice this will wait until
this from promise is complete so I just
want to console that log response so we
can see any errors that we get and what
the response is
and then I also want to dispatch the
stop submit action and so I want to do
contact and then I want to pass in the
Aires which is response dot Aires and if
it's undefined we just want to pass in
an empty object and actually right here
we want to dispatch start to submit
because that's an action as well so you
can see why we wanted to grab dispatch
so we can spit out these acts extra
actions um let's see this running in
action so come on over here
so if you remember how my server set up
if my first name and last name are the
same value it'll throw back an error
this is just for purposes so we can see
an error so if I submit this you notice
we get this tells us it's bad and you
notice we get a bad request to our
server that's what we expect and our
server says last name has to be
different from the first name and you
can see it displays that here exactly
how we want to but maybe I change the
lip a little bit now I submit you notice
we don't get an error and here's the
response from the server it created this
Bob to objects so that is how you set up
Redux observable and you make a call to
a server and get the response and this
is triggered from a redux form now this
stop submit week and you notice how
responses that errors ours is nicely
formatted you know how last name here
matches basically the name of my Redux
form here you yours might not be as
nicely formatted your ear from the
server so you might need to reformat
this and be like last name and then
basically error message do you put your
error message as a string there but we
don't worry about that you have to play
with that to get that to work depending
on how your server is set up so that is
how this is working if you're not too
familiar with rxjs this might look super
foreign I recommend just
it's it's a very different pattern of
basically doing async code I am I'm
actually really liking it but as you can
see it can look a little for and if it's
your first time and it takes some
learning it's a steeper learning curve
that's some of the other libraries so
take a look at this try to code it
yourself
play around with it play around with
these functions I'd recommend if your
first time to rxjs you do some tutorials
online and play around get used to that
if you're if this interests you so thank
you guys for watching if you have any
questions or any trouble setting this up
with your with your app or your website
please let me know I'd be happy to help
and see what the trouble is so thank you
guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>