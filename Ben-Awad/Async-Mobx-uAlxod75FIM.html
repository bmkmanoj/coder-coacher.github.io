<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Async Mobx | Coder Coacher - Coaching Coders</title><meta content="Async Mobx - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Async Mobx</b></h2><h5 class="post__date">2017-08-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uAlxod75FIM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I'm gonna show you how to fetch
data from an API using mob X now for
this I'm going to be using the random
user API which is free and open for
everyone so you can come to this URL if
you want to see the data and use it
yourself so I just getting ten people
and I want to fetch this data load it
into my state and then show stuff on the
screen in my react application so over
here is a little application that I have
that uses mob X I'll show you guys
there's one last function we need to
implement and that's actually doing the
async part and now the thing about mob x
is you actually don't need any other
packages to do async stuff it works
built-in and we'll get to that in a
second but first let's look at what I
have so this is the index file we're
basically just rendering the app
component and then the app component
here is taking a people store which is
my mob X store and it's just passing it
to my people component and if we go to
the people component as you can see
let's look at the render function first
I'm grabbing I have a button here that
you can click to load more people so
this is the function on a call to
basically do the async work go and load
people and you'll notice I'm calling
load people as well when the components
mounting and then I'm also going through
and I'm mapping and for whatever reason
I'm in h1 here the only in h1
okay so I'm going through the store I'm
getting the people and I'm mapping I'm
calling this function right here and
here I'm just basically taking some of
the JSON data and displaying it here you
know I'm using the phone number as a key
because they don't really give a good ID
so because some of the IDS are no so
that's what the JSX looks like right
there let's look at what has happening
with mob X so this is the mob X and
you'll notice I have the people here
that is our data and then I have load
people which is just an action and what
we want to do and when we're going about
to code up
is how to actually fetch this from the
API and update people so let's do that
now so whenever we want to call this
function it's gonna populate this array
here and then that is what it's gonna be
flow through so if we click the button
or when the components loaded or mounted
we're gonna call this function and that
function is gonna be fetched from the
API when it gets the data that's gonna
put it in this person variable and then
we're gonna map through that array and
then we're gonna display a bunch of divs
of the people that we got data from so
the first thing that I want to do is we
can just make this an async function so
and just call async stuff in the
function itself so it's very easy so I
can say Const response and I can say a
weight and I can fetch data now I don't
have to use fetch you can use whatever
HTTP library you want and then here I'm
just gonna call the function I want so
or the URL I want so we're gonna go to
this URL here to get the data let's
paste that in there any notice we're
using a weight syntax and then so we're
waiting for this to finish once we get
the response we can get the JSON so
we'll say response dot JSON and then
you'll notice the JSON I just want to
get the results which is the array of
all the people so what I'd like to do
something like this right this top
people is equal to json dot results but
that does not work because the results
the out results i have as a result for a
second but this does not work and also
we need to have a weight here in front
of json okay so will correctly get json
data here but this will actually cause
an error and the reason for that is you
have to do you have to set so we're
mutating people right here you have to
do any type of mutation of basically the
state before you hit your first two
weight so we can set this dot people to
stuff here right and that would be fine
or if
to say that that's good but as soon as
the first weight function is called you
can no longer do this the way you have
to get around this is by a function that
mob X gives you called run in action so
what you can do here is call this run in
action and then you pass it in array or
not alright and a function and then in
your function you're just going to do
any type of mutation so this dot people
is equal to json dot results and bam
we're done this will work now so this
will actually go into this URL get the
JSON data and then we're updating the
state by setting this die people equal
to our results and we had to use this
run in action that we get from mob X so
you just note when you're doing this
above the mutate above the first time
you call a weight above it you're fine
and you can just mutate but after your
first a weight you have to call run an
action pass in an array or not array a
function and actually do any kind of
mutation inside of this and if we had
more stuff like people 2 or whatever we
could you know set that to whatever as
well like you're not just limited you
can do whatever you want in this
function body so let's see this app in
action now so cool we see the people I
can refresh and we can see them load and
I can click on load people and awesome
we are successfully fetching the data
from the API now there's one last thing
I want to show you guys and that's just
like how maybe a common thing is to show
like a little loading indicator so it's
very easy to add on to this so maybe I
want to say loading is false at first in
my state and when loading is true I show
an indicator when it's false I don't so
we can change that in our people
component so I'm just gonna say
if this props dot store dot loading we
can show loading indicator so I'm just
using basic HTML so I'm trying to say
div loading but you could show you know
a spinner if you wanted here whatever
you wanted for when you're loading so
then I have my people store here and
what I really like to do is that the
start of this function load people set
loading equal to true and we can just do
this dot loading is equal to true and
remember we don't need to use this
because we're about the weight and then
after we're done with this we want to
say this dot loading is equal to false
because we're done loading after that
and that's it so let's come over here we
can see this in action so first initial
load you can kind of see loading dot dot
and it goes away real quick and then we
see it fill in nicely and we don't need
a console so yeah so you can see we can
just keep loaded as many people as we
want and that's it for this video guys
so that's how you do a sync functions in
mob x no need to use another library mob
x has you covered nicely here you don't
have to use a weight async syntax if you
don't want to you can use dot then as
well but I prefer doing it like this but
you can go ahead and make the API call
right inside of your functions like this
and as always this code is gonna be up
on github and I'll put the link in
description below so thank you guys for
watching and I'll see in the next video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>