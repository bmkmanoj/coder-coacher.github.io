<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mutations in React GraphQL Starter Kit | Coder Coacher - Coaching Coders</title><meta content="Mutations in React GraphQL Starter Kit - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mutations in React GraphQL Starter Kit</b></h2><h5 class="post__date">2017-06-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FvftrM5I8Ug" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">guys I'm going to show you how to do a
mutation and graph QL so we can do
create a new user and it show it here so
if you don't know what this is and you
don't know right now I have a server up
and running and I have a front-end react
app this is the react app right here
over here bring on port 3000 I have a
server running so if you don't know what
these are any bug get them set up I'll
put links in description below help you
get set up so let's get right into this
so the mutation that I want to run is
create user to create a new user for
this so I can just create new users here
and I want to see the user new user that
I add there so we're going to run this
mutation and then after we run that
we're going to call all users so we can
see that our new users actually add it
so you can see all of them so the first
thing I want to do is hop back over here
and instead of running get user so I
would get you user mutation right for
sorry query instead of granting this and
only getting you the adds at user what I
would like to view is do all users and
then in our app over here and our graph
QL message now this is an array so get
user should return an array of objects
so prop types dot array of and then pass
it in
so we just fixed our prop types now
we're getting array of user names and
this will no longer we get users will be
all users and then here all users all
users and so this will be an array of
users so really we just need to return
this I guess we should say or an empty
array so I'll use this isn't there so
users and then here we can just do a
mapping of them so users this is an
array of objects with user name so I'm
just going to do all right here we will
do users dot map and I'll do also so I
was going to add a key here so I also
want to grab the ID I'll just make it
easier so X and we'll just let's use you
so for each user we're going to create
an EM tag and here we'll do you user
name inside the EM tag and now we can
get rid of this em tag stuff here I'm
just going to drop this to a new line so
you can see what's going on
okay all right here we go so we're going
to say my username is and I'm going to
go through each user show the M and
we're going to give a key you need to
add a key whenever you're using a
mapping I'm going to you that ID it's
much better to give the ID for the key
then to do the index of an array because
the ID always stays the same for each
object so we have this and then I'm just
going to put like a let's see let's see
how that looks so we come back just see
all right they're mashed together so
let's put a comma comma space and we
should have a comma and that's fine and
looks for the space there too okay so
now we can see if a new user was added
it would be on the end of this list
right space is not really getting added
there maybe we should put a comma here
put a space at the beginning okay that
looks good okay so I'm going to create a
new component and I'm going to create it
well actually before we create the
component I'm going to actually just
grab the mutation that we need which is
this paste that in here now for now
we're going to hard-code the mutation in
the next video I'll show you how to pass
in a variable so we're going to just say
I am a new user this is the crappy
username you know we're going to call
them Bob so whenever you run this
mutation we're going to create a user
called Bob now we're going to come over
here we need to import this and by the
way I just replaced this which I didn't
want to okay I put it back who I can I
did not mean to just override this and
it looks like they're making a folder
for
queries so I'll make a folder for
mutations and the mutation is going to
be create user and this should be dot
gql and real quick let's rename this
because we changed it from all get user
to all users so in our app here if we
scroll up to the top we're gonna have to
import all users so I'm just going to do
search and replace and you know I'll
show you guys how you can do this if you
want to just and this oops did not mean
to push that so search and replace get
user will place it with all all users we
get four ones
and cool thing about this we can just
say files to include op j s and then we
see the four and i'm actually curious
square or okay right there
it looks good we're going to replace all
of them we don't need you and we're good
to go so i just searched and replace
those so we now have all user so all
user is that so back to our mutation
sorry for the Vitor or the detour and
here we're just going to create our Bob
so I pasted the mutation get Bob let's
just get the loops just get the ID since
we're pretty much going to be ignoring
that the return value of mutation yeah
that looks good let's just import it in
here and we can write a self a little
comment graph QL mutations and we're
going to do create user and we're get
this from mutations and it's going to be
create user
now we can create a little component
down here so this is our kind of like
main app so we're going to create a link
here that's actually going to be
American or we can create a button that
we click and just creates a user so I'll
just create this class class mutation
button sends react component and then
our render method and you know what
there's no reason to make this a regular
class we can just make it a peer
function so haunt you tation button and
we we should not have that all right and
then we're going to be getting passed in
a mutation because we're going to do a
graph QL right here and we're going to
pass and create user so we create user
function we're going to be passed as a
mutation to our button right here and
then we can do here is button and then
on click we can say first let's make
sure it's on click I'm just going to do
a console out to make sure everything
renders real quick and if it does render
then we'll add our mutation logic here
create a user we're getting red lines
everywhere
all right experimental support that's
fine okay it just doesn't everything
stemming from this and I'm actually not
sure if you can do a tag like this on a
peer function so we're about to find out
that you can work so yeah sure why not
we'll stick it right here
this will be mutation button all right
let's see if we're getting aired this
model will define leading their careers
must be attached to a class okay
so I was going to do a function like
this but doesn't look like it like fit
so we'll just create class extends and
actually just to show you guys you don't
have to do the decorator either like
this I could actually put it right here
to graph kill create user I think this
works we're about to find out
experimental support it I don't know why
it's saying experimental support should
not be any experimental support warnings
from doing it valid let's be returned
okay didn't like that either but we
could do cons new component is equal to
graph QL create user you know what let
me just make sure my syntax is right
this is how a mutation works because we
were using the Apollo library notice how
when I do a graph QL they wrap their
mutation and then their actual class
they call it so we want to do the same
thing if you graph QL create user and
then we could call that on our mutation
button and now my mutation button you
know let's name these better I'm gonna
get rid of this if this doesn't work
also because it might not I'll just use
the tag but I wanted to see if this did
work because it should if it it might be
configured differently because we want
to use a pure function when we can
that's nicer so I'm going to call this
I'm just going to do an underscore
because it's basically a mutation button
but we just need to name it differently
mutation you know we'll call this M but
and this will call mutation but I'm not
actually let me know in the comments
below if you if you know like what's a
good naming schema for this where I have
my component which I then wrap with a
graph QL what should I call my component
and what should I call a new component
after it's been like attached and now
it's this graph QL wrapper unless I
never never know what the name these
things okay anyway let's let's see if
that doesn't work now it needs to be
returned looks like something's
configured off or I'm doing this
slightly wrong I don't know why it
doesn't like it I've used this in other
when I use create react app I do it like
this and it works so I'm not sure if
it's just being funky or what so we'll
just go ahead and create a class and do
the a crack you'll just like it is above
so create user do a class mutation
button spins react component and then
we're just going to have a render
function and then we're just going to
grab Oh
I was like I could have sworn this
worked right well it's because I never
remove this thing now we might be
working not tabbed over correctly
okay area looks good okay now we're
working nicely now if I go to inspect
console clicked okay because I was going
to say I didn't think this would be just
because I'm using react you else didn't
work because I've done this exact same
thing and create react app okay cool so
we know this works so now I can replace
this with the mutation just like that
and I'm going to make this in async
function so I can do a wait but it
doesn't really matter right we could get
rid of this because we're fine just
calling the mutation we don't need the
return value right but
the return value what I could do is like
I was just doing actually good put a
weight could do an async function await
it can't you know response but I don't
actually need the response to the
mutation I just want to create it but in
a future video I will be showing you how
that works
and we will actually be needing the
response so missing the prop validations
that's fine out care about those all
right so it's create a user mutation is
not a function alright just something
went something did not happen right
because we expect it to be passed in as
a prop so what I'm going to do is I'm
going to put props here and I'm just
going to print this guy so we can just
see what what are the props and actually
no I don't even need to print right I
could just click on this using reactive
tools and I can see what props are
passed because we should be like we have
this Apollo wrapper oh ha ha it's not
mutation to mutate so it's mutate there
so just wrong naming so now we're you
refresh or not really refreshed just
Auto will happens which is nice ok
nothing here so it looks like it works
so if i refresh we should see another
user here and we do we see Bob cool so
that is how you can set up a mutation I
just want to summarize all the steps we
took because I kind of changing stuff
and whatnot so first thing I created a
mutation over here so I created a window
graph QL what the thing I like to do is
I actually just like to like type it out
here what the mutation I want and I'll
copy and paste it over here in my editor
so paste is the mutation over here and I
also should get some plug-in for this
next video what I'll do is I'll get a
plugin for Visual Studio code that's
nice and pretty but anyway so we created
the
right so we then imported it in our
class up here right here so now we have
access to that mutation and then I added
it to my component my button component
using this syntax right here so as you
can see I pass in the component right
here telling it what mutation I'd like
to stab access to and so now I can just
use this mutate function which graph QL
gives me and I can call it and it will
actually call to create either mutation
for me and then I'm doing that when I
click and now I don't use this in but in
button places I use mutation button I
want to have access to the mutation so
that's how that's working if you liked
this video give it a thumbs up and if
you're interested in more graph QL
videos I recommend subscribing because
there's a lot going to be coming out I'm
just going to be keep doing iteration
Zahn this react ul and making it better
and showing you step-by-step how you can
set up the stuff with graph QL and talk
to our server over here because there's
a lot of capabilities we'd like to set
up over here and I want to do an
authentication video because that is a
big topic with crack QL and everyone
does it differently and I like the way I
have set up and one of my projects I'm
going to showing you guys so I recommend
hit the subscribe button now if you'd
like to see this stuff and want to get
notifications when it comes out because
it's coming out real soon guys alright
that's it for this video and I'll see
you guys in the next one
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>