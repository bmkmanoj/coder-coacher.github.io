<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Feathersjs 1 to 1 Relationship with PostgreSQL | Coder Coacher - Coaching Coders</title><meta content="Feathersjs 1 to 1 Relationship with PostgreSQL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Feathersjs 1 to 1 Relationship with PostgreSQL</b></h2><h5 class="post__date">2017-03-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hZ9ES9qrFqo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys in today's tutorial I
want to show you how to set up a
one-to-one relationship and feathers GS
using Postgres as your database now
we're going to be setting up a foreign
key and the way I like to do this is as
so so the first thing you do is you come
into your services index so right here
and you need to add this a little bit
right here at the end this will set up
the relationship this is very important
well this does this is going to go
through it before your models are
created and basically set up the
association's that we're about to create
it'll add the foreign key and we'll
create the one-to-one relationship that
every one so make sure you have this in
your index of your services folder and
then the next thing is I already created
an address service which I want to be
one-to-one with my user so here's my
user model didn't change anything I'll
show you my address model though you'll
notice actually there was one thing I
changed in user model so I want to show
you guys um there was a like user dot
sync you do not need that because notice
and our index we're syncing sequel wise
here and what this does is it syncs it
after we set the associations and that's
important okay so I created an address
model as you can see everything looks
the same except for I added this class
method right here and this is an
important bit and we know so you create
re remove the sink as well here so we're
gonna associate this is where this
associate function is where you're gonna
basically create all the associations
that you want address to be related to
now what we're doing here is we're using
address and this is the same name that
you'll see right here and you'll see
here so you need to use that and you're
gonna say belongs to models that's
passed as a parameter right here and
then users notice how this is plural
that's very important that's going to
reference our user model so that's going
to set up a user ID in this this table
for address automatically so we don't
have to add
like user ID and then tell it's an
integer or along or whatever and create
that field
we don't do create the attribute by
saying address stop belongs to that's
gonna set up a attribute for us it's
gonna set up a user ID field that we can
basically use as a foreign key to user
now another cool thing I just wanted to
show you guys is I like to set up a hook
so I'm the address that hooks just the
index hook I like to create this hook
and they create hook so what this does
is it associates the current user as
user ID now notice this user ID it's
important you want to take the name of
your thing which is user and then just
stick ID at the end this is the
attribute that's equalized is gonna
create for us and when we add it to the
create what this does is it just
automatically adds the user ID and for
us when we create a address so when we
create an address what it'll do is it
authenticate the user and it'll grab the
user ID automatically for us and add
that to our address basically that we're
inserting oops so let's come over here
to postman and I'll show you how this
works
so right here we logged in with the user
so I just create a sample user right
here and I logged in got the token right
here and then over here I'm gonna make a
post request to addresses this is the
text I'm going to use and then I'm
passing in that token now when we run
this what we should see is we should see
a user ID of one associated with this
address because we're passing the token
for Bob so when we send this as we can
see the user ID is one and it worked and
so that's how you setup a 1:1
relationship and other shifts and using
Postgres so I hope that was helpful guys
let me know if you have any questions
below about this stuff and I'll see you
in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>