<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Simple React Form with Formik | Coder Coacher - Coaching Coders</title><meta content="Simple React Form with Formik - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Simple React Form with Formik</b></h2><h5 class="post__date">2017-11-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MuwQdUoNKzg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we're finally gonna get to the
messaging part of our application so
we're gonna start by making this little
input bar we have down here into a forum
so when we type stuff we can track it
and then create a mutation that sends
off to the server and creates a message
and then our messages will pop up here
so let's get started with that
so our send message component here is
what we're gonna be working on first and
that is what's gonna be actually gonna
be the form right now it's just an input
field so we need to change that and to
make it into a form we're gonna be using
formic this is what we used for add
channel modal and we're going to use
this here as well
so I'm gonna add with formic and then
I'm going to turn this into a variable
send message and then I'm just gonna
export default down below so with formic
but the parameters there and then send
message we'll come back and fill out
those we're gonna first add our props up
here get out a comma and we're going to
copy the props that we used here and
paste them here so here I'm gonna set a
name I'm gonna call it message and we
have values so value is equal to values
message and again you want to make sure
the name and what you call here matches
up now we want to do a handle change and
handle blur but every time I try in my
visual studio code type on change and on
blur here it just basically freezes up
so I'm just gonna type it up here and
then copy it over so we want to do on
blur is equal to handle blur and then on
change is equal to handle change
all right so copy that and it's to leave
it like that and I'm just gonna paste it
in there okay so we have two more things
that we want to add here right we have
handle submit and is submitting so is
submitting we basically want to stop
them from submitting if they are
submitting and handles submit is usually
when someone clicks a button right to
submit the form but here we don't really
have a form to submit we really just
want to submit it when the person hits
enter so we're gonna listen for that
keystroke so on key down is what we're
gonna do and we're given an event and
we're gonna say make this into a regular
function I'm going to say if e.keycode
is equal to the key code that is to
enter key so enter key which is key code
13 enter key we're gonna call handle
submit and we're going to say and not is
submitting all right so I'm gonna grab
this prop here and add it here okay
so now we are listening for this key
code when we are hitting Enter but we're
not submitting we're they gonna call
handle submit and we also need to pass
in the event and on change onblur all
that looks good so now we just need to
add our settings to handle this with
with formic so down here we're doing
some stuff we're gonna do a mutation and
the handle submit so we can copy this so
map props the values we're just gonna
have a message here and then our handle
submit we're really just gonna have an
if statement so if I'm gonna say values
message dot so if not that or not values
dot message dot trim so basically they
have a blank message we're just gonna
say set submitting to false and we're
gonna return and that's kind of how
slack handles it so if they try
submitting a empty empty form it doesn't
show it doesn't do anything
you just can't submit an empty form it
doesn't show an error because you didn't
really do anything wrong you just have
to type stuff so that's how we're gonna
handle that otherwise we're gonna mutate
so let's write up here the create
message mutation
and let's import gql from graph QL tag
I'm also going to import graph QL that's
coming from reactor Paulo and since we
have two higher-order components here
I'm gonna use compose from reactor Paulo
to make this easier and if you haven't
seen compose you'll see it in a second
so we want to call this create message
mutation that we have so I'm just going
to come over here as usual come over to
8081
and graphical just to type out our
mutation since it's a little faster with
autocomplete and it makes it pretty so
we're gonna have a channel ID which is
gonna be an int whoops and colon there
and we're gonna have text which is gonna
be a string and then here we're gonna
create a message passing in the channel
ID and the text and it returns a boolean
which is fine so it's pretty fie copy
paste that guy over so now we're gonna
compose
and we can add our graph QL mutation
here so create message mutation and R
with formic it's going to come down here
and we just need to add another curly
right here give that a save so now we
have these two in the compose function
and the compose function calls send
message so now in here we have the
mutation coming from the scrap QL
higher-order component which we're
grabbing in the props here we don't care
about this on clothes we don't care
about a channel ID or a team ID we do
care about a channel ID which let's make
sure we're passing in we're passing in a
channel name right now but not a channel
ID so let's pass that in so that's gonna
be channeled ID same as we're grabbing
up here so now we have that prop here so
now in our mutation we're gonna say
channel ID and we're gonna say text is
gonna be values that message and we
don't really care about optimistic UI or
updating because we are gonna do
subscriptions so on clothes does it
matter
and we can set sets emitting to false
alright so if we come over here we seem
to of like smushed the input bar to the
side I thought it had some padding send
message wrapper oh that's how I get rid
of that oh I accidentally got rid of I
know it's right here
I thought this guy had some padding on
it I guess not should had it and yep
that looks good maybe a little bit more
20 cool so now I can type stuff so hi
hit enter and we actually don't know we
didn't add any response to see if it
worked or not so if we look in console
nothing and we didn't even reset the
form so one of the props here is reset
form so we're going to call that instead
of set submitting to false reset form
here we're in a reset form actually
we're gonna do set submitting there
because we don't want to get rid of the
user's text so set submitting so the
reason cut we're calling reset form down
here is because we want the text to go
to 0 we wanted to clear down here so a
nice type hello and hit enter we want to
clear just like that now we're gonna add
a little component here now so we can
actually see the messages we just
created so interview team that's this
messages component now I'm gonna create
a messin mess in a messenger or message
container and that's what I'm going to
do here so message container that's what
I'm gonna render here and we're gonna
pass in a channel ID channel ID
so message container and then in our
message container that's where we're
gonna do this stuff so up here I'm gonna
import react from react and here we're
gonna create a message container at
first I'm gonna make it just a
functional component and then we might
change this to a regular component later
if we need it so export default message
container I already know I'm gonna be
doing some graph QL stuff with this I'm
not gonna bother exporting up here so
right now we're gonna have messages so
import that import method is from up the
directory components slash messages and
we can get rid of that and view team up
here because we don't need messages
anymore okay give that a save so channel
ID is now a prop that we get and we
actually don't care about it for
messages because that's if we look at
what messages is it's just a styled div
Oh messages area so we are I don't think
we have a query so let's make that so
I'm gonna say type query and I'm gonna
say messages and we want to pass in the
messages for eight channel so are we
want to get the messages for a channel
so we're gonna pass in the channel ID so
that's gonna be an int and what we're
gonna return back is messages so
message it's just gonna be an array of
messages so now let's create that so
that's gonna be in our resolver so
that's gonna be a message resolver so
this is gonna be a query and before we
actually well let's go ahead and put a
stub method so call it messages async
parent args models user and for now
we're just gonna return an empty array
so I want to work on how we're gonna
select this first and then we're going
to come back to that so we're gonna have
a query it's gonna have a channel ID
variable which is gonna be an int and
I'm gonna call messages oops okay so I
need to refresh this
now messages should autocomplete for me
yep
passing the channel ID and so what
fields do we want to select here we
won't need to know the ID we need to
know the text we also kind of need to
know the user so we can display the
username I'm thinking we're gonna use
compiler comment cards similar to this
and I think we're also going to be
needing created at that way we can
display right here like just what time
the message was sent so I don't think we
are showing created at so that's gonna
be in our oh that's gonna be over here
message we need to add this prop so
created at which is gonna be a string
and we didn't actually have it created
at to our model this is something that
sequel eyes adds automatically so
refresh create it act cool and that
should be enough to create a comment
card that looks like this so I'm gonna
copy this and our message container is
going to be the Const messages query
this is the query it's going to run so
import graph QL from react Paulo
and we're gonna import gql from fql tag
and now we're gonna call the message
query now our message query here their
message is query that is notice how it
needs a variable right here called
channel ID and that's coming from the
props so we can say variables
I believe I can't remember if if it's
options it might be options and then we
get a props and then out of that we can
return a variable component and then we
can say here props dot channel ID I
believe it's something like this did we
do this and the sidebar component are we
doing any graph QL requests here nope
we're not are we doing it in what are
these this is the channels component oh
we're doing this in the view team I
forgot
nope or not so we're gonna have to see
if this works if not we'll look it up
real quick but I believe you can get
there's an options prop that comes in
like that to our options which then we
can then create a variables and pass
that in so that's gonna be our query and
then so we get a data prop now right so
data which is gonna be loading and
messages for now I'm just gonna say
loading we're gonna display null
otherwise we're gonna display the
messages which for now I just want to
see what the messages look at look like
so I'm gonna do object dot they're not
object json stringify
messages and see what the JSON response
we get is so let's see I feel like we
made some errors somewhere let's see
what happens all right so we do an error
oh it's in our back-end required was not
provided channel ad was required okay so
we're gonna go to Apollo graph QL comm
real quick oops we're out to zero I
think I did the Apollo graph QL comm I
think I did this thing wrong where I
pass in the props so if we go to client
to react and then queries we just want
to add a prop so I'm gonna look for
props all right so that's exactly how we
want to do it so this is gonna be called
variables so channel ID oh I did this
wrong on a lot of levels so here's
here's how it should be so variables and
then we have a returning an array so
let's see if that that works better cool
and we're actually seeing our empty
array that's exactly what we want so
we're making this request correctly now
and we are passing the channel ID and
the next steps are to actually make our
query here here in our database which is
what we'll do in the next video so here
we go so this we actually need to make
our query and then display the cards
here so we're gonna take the semantic UI
comment cards or comments and display
those so that is it for this video guys
thanks for watching the code will be up
on github if you want to check it out
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>