<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Switching Teams with React Router Dynamic Routes | Coder Coacher - Coaching Coders</title><meta content="Switching Teams with React Router Dynamic Routes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Switching Teams with React Router Dynamic Routes</b></h2><h5 class="post__date">2017-10-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/r9wP__PYgjg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we're gonna work on switching
to different teams in this video so
right now we have these buttons on the
side that represent different teams that
you have created and I want to be able
to switch to this team over here or this
team here now before we get started
doing that I want to address two quick
things so the first is I have this
channel popping up here and I didn't add
the channel and the reason for that is
there's a small bug so you know how I
forgot to add the where clause to all
teams up here when I was doing findall
on them well I have to forgot to do the
same thing for channel so I just need
add aware around the finding the team ID
and now if I were to refresh and regrab
this from the database we should see no
channel showing up so if you ever get
this air connection that just means your
server is off so it was just taking a
second for me to reset sorry so now the
channel is up and that's awesome second
thing I want to do real quick is lo - I
am importing the whole library which is
not very efficient so what I can do
instead is just grab the find index
function so I do lodash slash fine index
and then we can call it like so and now
the same thing should happen we
shouldn't see any difference in our code
but it'll load a little bit faster so
now let's get started with these
switching teams and what we also want to
do is when we create a new team to see
our channel pop up right here like a
hashtag general and a hashtag random
because those two teams should be
default so actually let's do that real
quick so I have my team create team
resolver and really all I want to do is
after this create the channel so I'm
gonna say Const
team is equal to this await the creation
of the team and then I'm gonna say
models dot channel dot create
and for now I'm just gonna create a a
team or a channel that is general so I'm
gonna call it general and I don't
remember what other fields I have for my
channel
there's name and public public I should
have set a default value for to be false
let's do that real quick so type O I
mean to say default value the default
value should be true now this won't
actually affect the database because
we'd have to drop the database for three
but next time we drop the database or do
a migration we'll have this and all
right so back over here we have the name
so right now we have to set public is
equal to true and then I also want to
set the was it owner it would be owner
it's team ID the team ID equal to this
associates this channel that we're
creating to the team which is team ID
now I notice I'm not awaiting the
creation of the channel now we could do
this but and this is if you want to
catch any errors when you're creating
the channel but I kind of want to like
increase the speed at which we hit this
return and return back to the user
a true so to do that I am NOT going to
return or await this create so that is
on purpose but what I could do is await
it oops I could put away here and then
we would wait to return before this is
finished just to verify our channel is
finished creating okay just to verify
that works I'm going to create a new
channel real quick and hopefully we get
a new team there so I'm going to call
this new team
hit submit over the view team and oh and
we have no way to switch to our our team
over here yet so okay when we implement
our switching to team we can actually
figure out whether that one has a
general in it okay so let's do that now
so the way we're gonna do that is
actually in the URL so I'm gonna be
going to for example / 13 / 3 and what
that will mean or / 12/3 well this will
do is I'm gonna put the team ID here and
the channel ID here so what I'll do is
I'll automatically open that team and
that channel given this URL now if I
specify this URL I'm gonna default to
the first team right here in the first
channel which will be general so let's
implement that right now so here's my
route now I told you I want this to
basically conditional I might not have a
channel I might not have a team so I'll
have team ID and I put a question mark
here for an optional parameter and I'm
gonna do the same thing for channel ID
so now if I look at my react dev tools
over here I can search for this
component which is view view team I
guess okay so notice how to export
default here so there's no name
associated to this component so we're
gonna fix this by calling this Yu team
and do export default you team so now
when I search view team I should be able
to find it in my dev tools
okay so butene shows up so we can click
on this these are the props passed to it
so these come from react router I can
click on match and I can see pram so
right now we see no prams but if I add a
two we can see we should get back and
this should be your team we get a team
ID now if I were to do this and now we
need to make sure to parse those two
integers to view team and now we should
get a channel match prams channel ID so
perfect so what I'm gonna do is I'm
gonna grab the match and then the params
from this and instead of passing in the
current team ID as a hard-coded I'm
gonna say prams dot team ID and now my
sidebar over here what I'm gonna do is
I'm gonna basically create an if
statement so first I'm gonna say current
team ID
so we're checking whether this is a good
team ID whether it's undefined if we do
have a good team ID we'll do this here
and we're just gonna do parse int that
way to turn that string into an integer
otherwise we're gonna say zero and we
just need to add a I believe it's a
radix I have no idea how to say that
this is just what base you want to parse
it into so we're checking whether we get
a good team ID if we do we can look up
that team ID in our all teams otherwise
we just grab the first index of our
teams all right let's take a look at
this see if we got any errors okay so
two does not exist so we're getting an
error so we were going to need to add
some error handling them to this but if
I go to seven we open up that and I
don't know what the you know the IDS of
these are but we'd be able to go to it
so what I'm gonna do is I'm gonna make
these links that I can click on and it's
gonna take us to the team ID so this is
what are these that's our teams that's
gonna be our team's component
and all right so this team list item I
basically want to wrap in a link so
import link from react router and we
have the idea so we can build our link
so we're going to say - and we're just
gonna wrap this guy now what our value
is gonna be is I believe I can just do a
slash here is slash view team and then
the ID we want to go to so view team and
the ID is whatever ID is that team so we
have that value here and I have no I'm
not sure exactly what this is lint
warning is anchor tag or is valid let's
go ahead and turn this off this looks
like something that's broken
oops I have Bob copy and pasted um where
was it area
copy that and just turn off all right so
let's take a look at this and we just
need to move the key here to our link
cuz that's the outer component now so
now if we hover here now these look we
get the clickable item so notice what
the team name is here we click we get a
new team new team new team and this new
team actually has a hashtag general here
so very cool so creating the team
actually works now I just thought of a
potential problem that we could be
getting with not awaiting this so right
now when I create a new team it takes me
to the home page right but ideally it
should just take you to this page and it
should direct you to the team that you
just created so in our review team
another view team create team so on
submit we get the response what we would
like to do is yeah so if this is OK
what we really like to do is look at the
team which are we grabbing it no we're
not grab the team grab the ID and let's
just make sure we're supporting that and
our schema I believe we are create team
response so they're not
let's pass back the team so and our team
resolver here I'm gonna pass back the
team so then my front end here I can
grab the team and get the ID of the team
and the reason why I want that is now
here instead of pushing to just their
the homepage I can go to view team slash
and then teamed ID now let's see if that
works so now I'm gonna go to create team
my new team hit submit and my new team
has created the cool and it takes us
here and it opens it up so the thing
that was worried about is that the
hashtag general would not be created
before we actually went to here but we
did so that's that's the only thing so
I'm gonna go ahead and put it away here
so it's basically a race condition right
so did we create the channel before we
actually make a query when we come to
this page and just to be safe I'll wait
that so let's see if we see any any a
little bit slower in our creation so
team three pretty quick still so not
much notice of lag so very good so now
we can switch to our different teams
that's awesome and we have our new
channels our general channel being
created now you could create as many
channels as you wanted here as default
you could do something like this but I
would recommend if you want more
channels default besides just general I
believe sometimes they have a random
channel that's default make sure you do
both create I think it's just models
that Channel dot both create is what
it's called in sequel eyes which lets
you make multiple inserts at once but
that is it for this video guys thank you
for watching and as always the code will
be up on github
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>