<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native Tutorial - Silent Auction App Part 10 | Coder Coacher - Coaching Coders</title><meta content="React Native Tutorial - Silent Auction App Part 10 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native Tutorial - Silent Auction App Part 10</b></h2><h5 class="post__date">2017-04-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5QoJhPXVfeE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome back in this
video we're going to take our
application and basically protect it
with some authentication so right now we
have like this page where you can see
all the auctions but we only really want
to let someone do get to this page if
they're authenticated if they're an
actual user so we want to do is where
this is taking you to this page even if
you're not authenticated so we need to
fixes so first off I was looking at a
react native project that feathers just
actually had we did chat client and what
they did here is they actually just used
a sink storage let me see here it is
notice how with their authentication
they did storage in an async storage so
it looks like fellowships might handle
storing it acing storage for us so I
kind of want to try that and see if it
does do that for us because if you
remember and our API here we were
actually saving active token that looks
like we add a sink storage here it
should add it for us a sink storage from
react native so now down here in my rest
client and this is in modules and our
index I'm going to put storage and I'm
going to put a sink and so we'll see if
I want to test to see if this will
actually add you think the token so now
i'm just going to comment out this line
here and our api and now to actually
check weather we're having these are
authenticated we're going to use on this
example project as are basically as our
use it as an example for how we're going
to do it this is a popular
authentication example has over a
thousand stars here's how they do it
going to copy this and then i'll explain
works over here so on my create a new
folder called components and we'll put
that in here we're going to call it off
acquired ljs paces in here alright so
we're going to use connect we don't need
push state from Redux router yeah we
don't need that okay so what this is
going to do how we're going to actually
get this to work is in a route over here
here we go is we're going to import auth
required from and we need to go up a
folder and two components and to auth
required and any pay any component that
we want to basically have the user
logged in we say auth required like that
so basically we creating a function here
that makes this component authorized
that checks authentication for it now
let's actually get into how this is
going to work so first off we're only
really going to do stuff in component
will mount check off we don't need this
we're just have a render okay and we're
going to rid of this just pare it down a
little bit and for our connect before I
go and explain this I just going to kind
of get it set up it's going to look very
similar to this where we also map
dispatch so just going to copy that and
paste it in here and there we go
we could actually just make this a
function if we wanted to there we go and
we return line action creators so we
could actually just return like that ok
this is tabbed weird since we only we're
not going to have only really going to
have one well keep it like that so we're
going to call something called request
off and dispatch and we also need to
just copy that ok now I can go here and
explain how this is working so buying
action creators and connect these are
just what we're using to basically
connect to the redux store so we can get
access to things we don't need any of
this so what we're going to be getting
is the state we're going to get the user
from the state and basically what we're
checking is whether the user is
authenticated so to do this if the user
is authenticated basically if we go over
here to modules will notice for example
user when the user logs in we have a
reducer here I mean it makes more
sensitive saga when they log in after
they login we call this receive log in
and when we call received login actually
adds to the user to the state and we
should be able to actually see the user
so you get the username and their email
that sort of thing so come back to off
required if this object exists we know
they're logged in so what we can do is
we can say object keys on this dot props
that user so we're checking to see
and cereal we're checking to see if this
is an empty object or not if it is an
empty object and we don't want to show
anything if it is an empty object you
can feel like a loading screen so import
floating from floating so we need to
create a loading component real quick so
loading that is import react from react
and then we're going to import text
react native and we'll just export
default will just make a very basic
function will just say loading or a
component I mean they're real so the
first thing when this component is you
notice how we're taking this component
as a parameter to this function so you
notice when we called the route over
here we passed in few auctions for
example so right here we're going to
check the off which we're going to call
request off how we're going to call it
this is where we're going to basically
go to the server and check whether the
user is logged in or not and then if
they're logged in we get the user and we
add it to the state and right here we're
checking if the user basically is in the
state if it if it has basically zero
keys it's not in the state so what we'll
do oops what we'll do is we'll show a
loading screen but if the user does
exist we can go ahead and show the
component because they're authenticated
and they're good to go so that has how
that is working so this request off is
what we need to create so import request
off from we're going to get this go up
we're going to go up this screen
and we're going to go into modules user
and we're add this to the actions
there's going to be a user action so
we're going to request off we're going
to go to the server we're going to check
if they're authenticated using a sink
storage the token that's saved there
after you login we're going to check if
their authenticated if they are
authenticated then we're going to put
the user in the state and then we'll
stop seeing this loading screen and
we'll see the component but it's the
user for example of authentication fails
we'll actually redirect them to log in
and we'll do that over here so now this
page is for the most part all good to go
so we will oh we actually just need to
interconnect function here AB dispatch
also call this guy ok so now in our
actions we're going to create a request
off and we're also going to receive off
so we can copy those receive off request
off off request off ok so now we
have our two actions set up now we can
come into our saga and start listening
so now we're going to this is going to
be off saga as you're going to be call
off
and we need to import up here at the top
request off and then receive off all
right so now we're going to be listening
or request off and that is what our
component our author acquired component
does that we're going to call off here
when it happens here we don't have to
worry about any kind of form so we can
get rid of that don't need that we are
going to have something like this so if
there's an error will do one thing if
there's not in there we will receive off
passing in the user that's good so here
we're going to call so we're going to
create a new function or API called
authenticate so we're going to call
authenticate and we really actually all
need to pass at any funk any parameters
here it should be getting the token from
a sink storage and okay so we're going
to call authenticate we're going to get
the response will print the response
just so we can see what we're working
with and then we check if there's an
error if there's an error we redirect
you to the login page because that means
you're not authenticated if you are
often hid there's no air we pass the
user to receive off and this is actually
something we will have to handle in our
reducer the receive off which we'll do
in a second but first i want to add this
authenticate function
so authentic eight and we will just take
nothing and nothing is going to go here
literally just authenticating and you
don't really have to worry about
response for the air I guess you can
just show the air air air response the
cool air zoom to Paris and now I mean
we're console.log in there already so we
don't need a console ah get here cuz
we're ready logging the response wait so
our thought authentication function will
try out indicate and then it just
returns the back pretty simple this is
just something we're getting from
feathers jf ok so now let's go to a
reducer so now we're going to want to
add actually so now we're going to
handle two actions right receive login
receive off and notice how they actually
do the same thing they just set the user
so what we can do if we go to redux
actions there's a combined reduce or
combined actions that you can connect
them together I'll show you here we go
to combined action and because they
you're going to map to the same thing so
here we're going to set a combined
actions I think its actions yep and here
we pass combined actions so now whether
we receive a log in or receive off we do
the same thing which is the set to user
ok now theoretically this should work so
let's go ahead and give it a test so I'm
going to pull up my log right here we
can
see what happens when we refresh the
page and we refresh and we might have
some syntax here's two okay unexpected
comma online 19 so go back to earth
required 19 and there's not a comma
we're returning there's not a comma
unexpected token makalah expected comma
19 I just see search for a comma is a
comma here comma there comma there I'll
just look fine
um yeah I don't know why maybe there's
something else because our brackets Matt
matching up yep it's good they're
probably something silly I'm missing
here start props the user object I keys
equal equal zero render this I'll see
under that it is author choir defeating
an unexpected turn I mean we can just
try wrapping this in a view I suppose
see if that does anything maybe it
doesn't like that so now we're going to
import a view from the imac native give
that a refresh I guess it's not
rendering session change anything just
so the same problem up author prior is
not a function funny enough that fixed
it I guess I just didn't like that okay
so looks like we're having a problem
author acquired from up is this the
right path up one component off requires
off required and here auth required I
think it just sign naming their you
change the class name nope okay off
required that default is not a function
return connect
not really sure why it's not liking it
whoops includes modules for a second
clothes all this so let's console.log ah
requires let's see if that's even
existing hello so it looks like it's
undefined there I think so hello yep
it's undefined slew them for whatever
reason are importing of this well it's
got to be a wrong path right crowds
components I left required oh here it is
export default I was expecting export
default and it's not what I was doing a
request off is not a function christophe
from actions oh here needs to be this
stop props refresh all right when it
took us to this login page now we have a
bob i create a bob user now if I login
we should be able to see that one page
and I don't know what page we're
currently on I think maybe this is the
loading screen possibly i'm not sure if
it worked or not because we're getting a
blank screen so just so you can see what
page were on a console logs when we're
here I suppose I guess I'm going to have
to add like something get some soon our
auth required
Oh console dot log this stop props that
users so you can see if we get to use
your not console dot log user Al's tapas
overcome is messed up now when i refresh
we should see a user if it's working ok
yeah so I'll syndication well
authentication working if authentication
is working so notice first time it loads
the users empty like we expect and then
what happens is once we go and get the
access token like we we request this
from the server we authenticate and then
comes down here to user and then we now
have this so I think what's happening is
why this is blank over here and we need
of this I think it's because we're
wrapping it with you and you'll notice
if we go to view auction here a view
wrapped in a container so this is kind
of a hacky way what I'm going to do is
just get rid of this container here i'm
going to add that container over and
that other thing and are all through
quite so now we're going to view
container from native base
cannot find view Oh should be container
now and awesome so it authenticated we
can see our user right here I guess it's
old but you can see it as if such as the
response so we get our user it
authenticates and then we're showing
these but we're not showing external
auctions right now these are just like
dummies so in the next video what I want
to do is I want to actually call the
server and load data from it load the
auction set exist so thank you guys for
watching and I'll see in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>