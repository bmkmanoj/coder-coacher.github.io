<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Many to Many Entities in Typeorm | Coder Coacher - Coaching Coders</title><meta content="Many to Many Entities in Typeorm - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Many to Many Entities in Typeorm</b></h2><h5 class="post__date">2018-03-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RH_es0awU_A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I want to go over how to do
many to many relationships and type
armed I'm first gonna go over the way
they do it in the documentation and then
I'm gonna show you another way which I
end up doing a lot more so here is their
documentation on many-to-many and this
is how you set up a mini to many
relationship so similar to what you saw
with one-to-one or mini to one we're
gonna say Minnie - Minnie we're going to
decorate a type and then you specify the
type you want to have that relationship
with so question we're setting up a mini
to many relationship with category here
now I want to take this and do this for
an example for a user and a post so I'm
going to create a new type called post
that type script and first I'm just
gonna copy this entity and I'm going to
call it post and it's gonna have one
field called title now this is gonna be
kind of like how I want to set up the
relationship how reddit has it so a
users can upvote or downvote posts so
that's a mini to many relationship
because the post can be voted by many
users and users can vote on mini posts
so what I could do is add a table like
this I would need to import Minnie -
Minnie and join table and we're going to
say user and this will grab a all the
users that have voted on this post now I
can name this table so I could name it
for example vote but there's one problem
I don't know whether this vote is a vote
or a down vote so this might be
something I want to add to the join
table itself so if you're familiar with
many to many relationships to relate
post and a user you have to create a
third table to make the relationship
happen
so this will automatically create a
table called vote and relate them for us
but we can explicitly make this table if
there's extra fields that we need to do
and in this case that's what I want to
show you guys so I can create a table
here called vote typescript and I I just
want to copy what we have over here
alright so I'm gonna call this vote and
I'm gonna get rid of all this stuff here
so now with a vote how I want it to work
is it's gonna have one extra field which
I talked about so column and this is
going to be I was thinking I could make
it a boolean but you know what we could
just make it type int so you could just
say like vote worth or value so for
example it could be a 1 for an upvote or
a negative 1 for down vote and then this
way we could increase it by more values
if you wanted to like maybe his vote
counts for 3 so now we we take the value
of the vote we're storing it in here so
now with this vote a this is gonna be
our join table and it's going to be
connected to post and user so it's
really a one-to-one relationship so we
could come over here how they set up
their one-to-one and just copy it so
just like this so now I'm going to
import 1 to 1
and then so on one hand I'm related to
user and join column and on the other
hand and let's say user type user on the
hour hand unrelated to post and I need
to import that post all right so now I
have this set up but with tables or
entities and type warm you also have to
specify a primary column and really
since this is a join table the primary
column is the ID for the user in the
post ID so I'm gonna create a new column
here and you have to specify that is a
primary column and I'm gonna say user ID
which is going to be a number and at
primary column and here I'd want to
specify I think I don't know what the
values ok primary column can be an int
so this is going to be an int as well
and this will be the post ID which is a
number and the reason why I made this as
an int is because this is going to be
the ID of the user which is an int or a
number here so now this is how you can
set up a joint table so vote and then we
can add as many fields as we'd like on
this and now it's related to user and
post and so now we could do queries on
this at least our table is set up if I
were to do NPM start and we could go
look at the database we can see votes
set up and the foreign keys all
connected so PC goal
so now I have a couple different tables
here and we can look at vote and we can
see it's a foreign key to post ID and
user ID so it's set up nicely so this is
what I end up doing a lot more because I
end up wanting to add fields to my join
tables a lot of the times but I want to
show you guys that that's it for this
video and I think I'm gonna be done with
type warm there's a lot more to talk
about but I want to get to some other
things that I've been itching to talk
about so stay tuned I'll see you guys
tomorrow
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>