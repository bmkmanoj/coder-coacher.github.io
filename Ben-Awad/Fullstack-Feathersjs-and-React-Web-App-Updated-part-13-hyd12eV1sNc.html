<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Fullstack Feathersjs and React Web App Updated - part 13 | Coder Coacher - Coaching Coders</title><meta content="Fullstack Feathersjs and React Web App Updated - part 13 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Fullstack Feathersjs and React Web App Updated - part 13</b></h2><h5 class="post__date">2017-05-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hyd12eV1sNc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys so we're going to
continue working on and upgrading the
mini monkey application so I'm going to
be converting over these actions we're
going to be moving them over into the
modules folder for the user and then
also it's going to look like this when
we use Redux actions so you can just
copy this understanding that straight
from my previous project I did with the
silent auction so now we can go into
actions over here can paste that and so
this is how it's going to work so this
will create the action right here that's
going to be basically the type of the
action I'm going to use then we call
create action what it does is it creates
actually a function that we can call now
when I call like for example change pick
here and I supply maybe a is equal to 1
V is equal to what's going to happen is
it actually just creates a function that
lets me do this
and now my action if I do action in my
reducer I can do action dot payload and
payload will be equal to a1 b2 so it'll
just pass in the object I pass in as a
parameter to change pick this will make
sense as we're doing it if this will
confuse so action creators so I'm just
going to take it pick out all the ones
that have to do with the user so for
example sign up we don't need here so
instead of doing like this I can route
it like this so export Const and then
I'll do signup requested see if we'll
just signup requested sign up not
autocomplete there but I'll complete
below and then now we can call a
function called signup and this will be
able to create action and then signup
question ok so now whenever I call
signup instead of doing it like this
I'll just basically wrap it with an
object like that so now that's oops so
that's good for sign up and we just need
this baseball so
don't need to sign up here anymore I'm
finished sign up so and actually I
haven't looked at this in a while so I'm
curious what this is doing
sign up finished because it doesn't
actually just blot any parameters so
we'll see what that's what that causes
to happen you might be reworking the
logic of this a little bit to make it
more cohesive so okay log in will do as
well so here it will do export Const
login requested whoops ah delete login
request it export console log in is
equal to create action login requested
all right so we don't need login over
here finish login as well
login finished is what I called it
login finished ok and also just real
quick to explain why this is good is I
was basically hard coding the strings
over there when you do it like this now
was for example I can add something to
this you can just change what the string
is here and then all the references to
this are immediately updated so that's
very nice okay so we have address be off
good log out so off good and log out is
what we need to add
and you can see this takes a ton of the
boilerplate out and that's why I like
using this um library so X word cons off
good equal to create action off good and
then export cons log out is equal to
create action log out requested and that
should be out like that oh I didn't
create one up here for all good all good
all good okay that's looking pretty good
so now our actions for the user modules
are good so basically these are all the
actions that revolve around doing stuff
with the user so I like to put that all
in this kind of user module so you can
kind of you know separate things we'll
come back to how this is working so
we'll actually put this in like a food
food or recipe module next so I guess
what should we do next the sagas or the
we have oh yeah I was going to do that
last the API the reducers I guess the
next thing is the sagas so I'm actually
just going to come in here oops
Saugus and just copy all of this and
then go into the users saga paste it in
and then we'll do stuff from here so now
you also get take every and the new
redux saga version I believe it's comes
from there okay that's that same thing
so now we don't need to fetch my recipes
or that we need vlog
sign up login so these are the methods
that we need and we're going to be
getting this from the local API folder
the file right here then browser history
from react router that's good
and again just need to make sure that it
imports your in the right order
okay so we don't need this try login we
need sign up we need recent recipes we
do not need add recipe note call log
outs good fetch recipe and don't need
and we don't need the root tier because
the routes going to be elsewhere
so now I just export the logout saga
export a sign-up saga and I export the
login saga cool and now also we import
our actions here so login I see login
succeeded we didn't add login requested
signup requested logout done logout
requested so these all these actions we
should be getting from the actions and
importing them so import from actions
and the ones we don't have yet we need
to add so login succeeded so instead of
doing the type like that we need to make
a function oops actually list okay so
let's go back to the actions and then
just add that so that makes sense it's
happening so login succeeded export
Khan's logins so she did so you go to
login
long again succeeded okay so that's like
a function we could call what else
sign-up requested login requested we
have right and plugins signup requested
logout done we don't have and do I call
it type logout down export Const logout
done is equal to logout done explored
cons logout done is equal to create
option action logout done okay so now my
saga over here I can get login succeeded
we're going to call that action and this
should be two spaces again using spaces
two spaces so login succeeded will use
here login request it will use here your
login requested notice how we're
listening for an action type but here
we're creating action so we'll use the
function here we use an actual type here
signup requested we need as well um call
log out um that'll be from logout done
and logout requested and why is this oh
because I'm not using it yet okay so now
this is how this works so instead of
doing that what I'm going to do is do
log in succeeded passes in the user
these are equivalent these two so now I
can kill that um and then here
I can do login requested here you can do
signup requested and then here's the
equivalent for a logout done logout done
then here the equivalent is logout
requested okay
okay next thing so we're not going to be
passing the feathers app like this
anymore
and we're instead here what we're going
to be doing is action not payload and we
can actually just as you know browser
history action next yeah
new payload so now we're going to be
expanding payload that's going to come
in and we'll pass in halo to our login
function and then the push here is going
to be payload push same thing for here
we don't need this feathers app we're
going to be passing the feathers app in
a different way so we don't have to pass
it everywhere if you remove that remove
that try signup what is try signup did I
eat I just remove that one signup saga
yeah they can move that so we need to
try signup as well
so sign up succeeded I don't think I
have that reactions we have signup
finished export coms signup succeeded
signup suckseed
sign-up succeeded alright now come back
over here we can import sign-up
succeeded and let's report this in a
nice manner now we have those like that
and then here do sign-up succeeded I'll
pass in success don't need the feathers
app same thing here
keep pass in payload we're going to get
from the action payload is the name
that's passed in automatically for us
that's what Redux actions does so to
explain that real quick again if you
missed it is so when I call signup
succeeded I'm going to pass in an object
and the name of this object is going to
be payload automatically so like the
return from this function above it's
going to be like return payload and then
whatever this object I have here so then
I can use that object for example here
I'm grabbing that payload object which
is automatically made alright
so I'm calling that looks like for call
logout we don't even need an action and
we definitely only need the feathers app
anymore
again don't need the feathers app
alright this looks good now we're not
using fork here so we can take that away
and our sagas look good for this now I
guess we can make reducers so now the
reducers look slightly different as well
so this is what a reducer looks like now
so for example if I go into for example
the user module for this application we
can click on the reducers
this is what it looks like and so we're
going to be doing something very similar
so we can just copy that and we can
pluck it and plop into our reducers and
then we're going to change it for the
way it's going to work for us so if I go
into the reducers basically what the
reducer logic for the user looks like is
the check login we're going to be doing
stuff in also caress P my recipes I
should think it's only check login I
think it's these three things we're
going to be doing so logout we do an
empty object auth good okay so logout
done logins succeeded auth good or just
pass the user back okay so the same
thing so basically we're going to
combine so these are going to be
equivalent so I'm going to copy this and
show you guys the equivalent so this
will make sense so these are the three
actions that this is listening for so to
start listening for that up here that'll
be off good
it'll be logout done and login succeeded
and we can combine these actions here
because they're all basically doing the
same thing notice here they're just
taking whatever is passed to the action
and putting it there so here auth good
logout done so like we can do along in
succeed we can combine all of these
actions into one that way um it just
simplifies it a lot more and we don't
have to repeat logic and then we're done
that's it I don't do all that stuff um
see XO it prefers a default um I guess
we can do to you fall for this
I do like that because we're actually
not going to have more than one user I
like for it to be consistent though so I
think I'm actually going to leave it for
export for now I'm just basically the be
fine with having ES linear here okay so
now though in my sagas when I do try log
out call log out put log out done I'm
just going to pass in an empty object
and then what do I call off good good
off good is not being hauled I wonder if
that screen calls from one of my
components or if I missed it
so we can go to sagas here ah good ok
off good is not coming here so it's
probably something that's happening from
a component we might extract how that
works
- okie dokie so this is looking good now
our saga our reducer looks good now we
can fix this actually we should do the
API real quick and then we'll do that
so the sagas there we go it's a little
bit of us here so we're you're going to
need log out sign up and log in so we
can copy all of these and then our API
here we gain and our API here we're
going to import on the user's user cert
we'll call it users service from dot dot
index so notice how I usually would
create the app dot service and users but
I don't really like how that's working
because I'm now doing it in multiple
places for example especially for the
recipes I'm creating a plot service here
in app dot servers here and we don't
really need to do that we can create
that one service once here and then
import
so we're going to be using the user
service and the app so already exporting
that and then export Khan's users
service is going to be apt service users
and we can already do this because we
know we're going to need it for recipes
is do recipes service then recipes here
all right so now we don't need get
recent recipes we loops we do need sign
up and so sign up how sign up is going
to come is we no longer need app we're
just going to be past the payload um and
Const
users ok and also I like to do I'm going
to use the new async/await syntax I much
prefer that to using dot then so didn't
using spaces true okay so try and then
Kant's response is equal to a wait users
users service create passing in the
payload and you don't need any of this
junk anymore and then we're going to
catch there's an error basically we're
just going to return this we don't
actually there's an error we can console
that log the error and then we return an
empty object and see it doesn't like oh
wait oh wait is a is reserved word
export and we just need to make this an
async function awesome
all right now our log in here same thing
we now our just passed the payload which
is an object which has
stuff in here um the only thing is now
type will be strat whoops this is now a
strategy and local and now we're going
to expand payload because payload is
going to look something like this
so payload is equal to and it's going to
have email like Bob for example and
password I pass it's going to look like
that
that's what payload can look like when
it's coming in so we're going to unpack
that passing an email password here and
we're get the strategy local we need to
set that to authenticate so here again
we're going to make this an async
function and then we're going to try if
you do catch or return console.log of
the air and then here we can just return
a weight and then this stuff
at Plath indicate cap it over and what
photon here
all right so that function looks good
now and AB dot log out I don't even
think this needs to be an async function
I think you can just do that because I
think I don't think logout is even needs
to hit the server maybe it we might have
to change come back changes later I
forget whether has a hit server or not I
think it just does local stuff okay
don't need a rest of that so now our API
is done I'm stupid import you know what
I'm just going to look up what this
thing is image has alt image has alt
let's go as a lie yes so we can see if
you whenever you have like something of
Uslan you don't know it does if you do
Google there usually it'll tell you why
will be a nice page that says here's an
example of what it looks like
sure that's what this should be but it's
not working here we go so obvious so
here's how it works
it will show you what a good example is
on a bad example but notice how we don't
even have an image or an image tag at
all okay it looks like it's a bug some
sort or got it it's just like sort of
bugging me that it's here at all so okay
another thing I'll show you real quick
is so this is bugging me I don't want to
see it I'm not using any image tags well
you know what I wonder if it's just
coming because I'm doing an image tag in
one of these things one of the
components and so it's showing up here
that could be it but it's annoying me
now I'll undo it later is so the name of
this is called gsx - Ally slash image
alt if I want to remove this just for
the time being
I can do that right here I can go to my
es lent folder and I can do Jo sex Ally
dot image what was the name of it image
has alt and so it'll no longer lint for
that rule so I'm off to see it so for
now I'm going to put that there let me
remove it later on what we need it and
win it so it will stop doing that I just
don't want to see it up here so that's
how you remove a rule that you basically
don't want to follow okay so we have our
API done now we can fix up this index to
show you what this is going to be
looking like okay so we have the only
thing we really needed is that imports
from the reducers and from the sagas
because we're going to build up our
route reducer and a route saga here
export only one default export we should
not eat none of these should be default
this should be called route slaughter
and again remove this little feathers
app and actually we're gonna do a little
trick here in a second I'll show you
guys um this looks good it can keep this
exactly like it is doing down there and
we can just drop this to a new line so
it looks nicer okay so now instead of
doing these kind of imports we're going
to do we're going to import user and
this is in case we want to import
multiple producers from the user
reducers so now what this lad is a user
to our project so the check if check if
logged in I don't want that junk anymore
we're going to be using this user which
is then
here okay so we have our user here which
we're getting from the reducer and now
we're adding it to our combined reducers
here
so now we'll show up and now again we
don't need to do that we can just export
here and what and for now I'm actually
just going to kill all of this because
we don't need it right now okay this
looks good
any will resolve paths so right here
user up reducers there go okay the other
thing that we need is the sagas that
we've created now notice for each saga
all we're doing is forking each one we
just take and we fork it and you can
forget about this part we're going to
read we're gonna remove that part okay
that's nice
oh I thought it was going to highlight
do it for all of them that's fine
there's probably a way to do it I don't
know what the hotkey is so notice how we
want to fork all the sagas what I can do
is here as I can do import all as user
sagas from users slash sagas user sagas
that should be users so now I basically
have an object of each saga so user
sagas look something like this
user sagas will look something like this
where we have the login saga and then
you have basically the function for that
and then you have like sign-up saga and
what we need to do is we need to fork
each one of these things so what I'm
going to do is I'm going to spread this
I'm going to say user sagas dot values
that'll get all the values so that I'll
get login slaughter at sign of saga it
will get these things I think I use
actually it might be keys
I actually forget let me I'll show you
and I'm using in this this project I
always forget how this works object on
values that's what this and I need to do
it like this okay so object I so I get
all the values from the user sagas so
all that's doing is it gets these these
functions it just makes a list of these
functions and it adds it so now we
basically have a list of these sagas but
they're unformed and what we need to do
is fork it so I just map fork and then
you're good and fork we need import to
import fork from Redux agha slash I
think it was effects so and the reason
why I'm not just like doing something
like say this because you could also
just do this dot map right
notice how I'm expanding this and like
spreading it and that's because this
allows me to then add more so object out
values recipe sagas which will actually
be doing later on when we do the recipe
saga okay but that's good there so now
we actually are up there's some trailing
space okay so we are actually this index
page looks good and we are actually done
with the user module we have we set the
actions for it the API the reducers and
the saga so that's looking nice and
again I want to make this video too long
so I'm going to stop here and I'm going
to pick up where I left off in the next
video and I think what we'll do is we'll
make the recipe module so until then
I'll see you guys next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>