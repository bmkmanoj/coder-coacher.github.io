<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building Sign Up Screen - Part 2 | Coder Coacher - Coaching Coders</title><meta content="Building Sign Up Screen - Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building Sign Up Screen - Part 2</b></h2><h5 class="post__date">2018-02-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bXpuqDOYHGk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we're gonna be working on the
signup screen today and to have the iOS
simulator up and running and we have a
little bit of an error and that's
because we left to sign up and login
blank so we're gonna fill those in and
then start working on our signup page so
before I begin though I want to go over
one quick important thing that I forgot
to mention in the last video so I'm
gonna be using an iOS simulator and that
has access to localhost
on my computer so I can just tell in my
code the link to the server is low close
four thousand but if you're using an
Android emulator it might not have
access to localhost on your computer and
that's where your server is and it needs
to connect to it so what you can do is
there's a stack overflow which I'll put
in the description below check this out
there's a few suggestions on what you
can put instead of localhost you might
have to use this number or this number
and try giving those a try instead of
low closed here if you have a problem
connecting to this server which is what
we're gonna do later in this video
with when we do a mutation all right
that said let's go ahead and get started
so first thing is I'm just going to
create a dummy little hello here that
way we can get our air to go away so I'm
gonna say text
from react native and I'm just gonna
export default and we're just gonna say
hello hello and we're gonna copy that
and paste it in to log in and we should
I don't know if you guys saw a lot
warning over here that warning is gone
no errors and it says hello here and I'm
just gonna say sign up to make sure we
are indeed on the signup page and it
says sign up so we are cool so this is
we're gonna create a form and the form
is gonna have three fields if we check
out our schema graph QL we're gonna be
calling this signup mutation to call it
what we need is an email password a name
so we need to create those three fields
and collect that data from the user now
normally if I was using forms I would
use something like formic I really like
this and it just helps you make forms
faster but since we're using react
native formic doesn't help you all too
much some of the things you can't use so
we're gonna go ahead and build just our
form from scratch and but we're gonna do
it in a formic Eska way but we may end
up using this later if we end up making
some more complex forms alright so in
here I'm gonna use a class so we're
gonna say our sign up component extends
react component and we're gonna have a
render function in here and we're just
gonna return
and we're gonna have a view and inside
of this view we're gonna have we could
have another view and I want this view
to take up the whole page so I'm gonna
say flex one and I'm gonna tell it to
display flex and what I want is to have
the text input centered here so I'm
gonna do is show you guys what this
looks like so I'm gonna have a text
input here and nice it just import it
from react native and I could have a
placeholder and one of the things I want
to say is name and by the way we are
gonna be adding state to keep track of
our form we're gonna have a values and
in errors and we're have is submitting
is submitting we're gonna keep track of
whether we're currently submitting
anything that way we don't submit twice
but we'll go more over that later okay
let's just see what this looks like
we're currently not importing view so
let's make sure we do that
okay so right now we don't see anything
well we see the name at the top right
here and we don't want name at the top
right we'd like to have name in the
middle it's super faint I don't know if
you can see it so I'm gonna say
justified on campus center and now we
have this guy in the middle here perfect
so he's really hard to see and for
whatever reason the default doesn't have
a board or anything so we're gonna style
this guy and we're gonna have a couple
text input so I'm just gonna create an
object up here called field style which
is gonna have the sky
for a field and actually I forgot and
react native you should create style
sheets not these constant objects that
we use up here so I shouldn't even put
up here so Kant's styles is equal to
style sheet dot create and this is going
to be a field so for a field the styling
that we want is a border so a bottom
border so bottom border width and I'm
gonna set to one pixel
let's say the font size is 20 pixels so
we make it a little bit bigger because
it's really small right now and I'll
just see what this looks like so I'm
gonna say style and I'm gonna say styles
dot field um bottom border a border
bottom width is what I'm so say I just
did this backwards border bottom width
there we go and cool so now we have this
black bar at the bottom but he's kind of
fat so what I want to do is in our view
here set the width so I don't know me
width of 200 pixels all right nice and I
don't want them up against the left I'd
like him centered so to Center him that
direction I'm gonna say a line items
Center alright cool so name is in the
middle now and I want a couple more
fields right so I want a email
and I also want a password and that bar
looks a little funny I don't know why
that's going on what's going on there
and then at the very bottom I would like
a button so we can import button from
react native and I forget how this works
I don't know if I just let's say hello
here or if there's a prop for it alright
so the title prop of button must be a
string okay cool
so you don't just say what the text is
you say title and it's gonna be create
account you'll say all right nice the
prop on press is marked as required so
let's add that so on press this is where
we're gonna submit so I'm just going to
create a this dot submit so submit so
now whenever our button is call are
pressed it's going to call this function
and these guys are a little squished
together let's add some margin bottom
maybe like I don't know 15 that's a
little that's better this guy is I think
I could get rid of this the weird
borders they look a little funny on each
one I think I've just have to set a
height me a height of 30 looks better
these look good this one looks a little
weird still I don't know if it's because
of my Hyatt I don't know why this kid
looks different than all the rest of
them but it looks decent right now I
don't know I guess you could add a
background color for this create account
I guess that's the default button than
iOS not sure he looks a little weird
though but we'll leave him for now let's
get started on the functionality of our
form
so values up here we're gonna have some
default values so name is going to be a
name of course use your name empty
password and then over here we're gonna
set the value and we're gonna set the
value to what is state value so I'm just
going to be structured here so Kant's
values is equal to name username and
password and we're getting this from the
state so then value is going to be a
name the value here is going to be
username and the value here is going to
be password and then we also want to do
a on
I think it's text change change text we
want to implement this function and
we're gonna create a function that
handles so on change text and we need to
pass in the string or the key and the
value so the key is gonna be the name of
the field will be change and the value
is the new value and then with that
we're gonna set state and there's with
set state you can pass a function in so
that's what I'm going to do and the
function is the current state and then
you return a new state and the reason
why I'm doing this is I want to keep the
new values or the values we already have
so I'm gonna do dot dot dot state and
then I'm gonna create a new key with
value all right let's say that we did a
lot of stuff let's make sure all this
stuff works so I'm gonna explain how
onchange works in a second I just want
to make sure we get this working so
we're gonna call this dot on change text
so text and here we're going to pass in
the name of the field we want to update
which is name and then the new text
which is that and we're gonna do that
for each one so you can copy what we
have there
oops okay and then for each one we just
want to change the name so now this is
going to be the field username and this
is going to be the name password alright
let's make sure this renders okay so
what is happening why did I do it this
way so we have this function called this
Don change text and what does is it
takes the text so this function right
here just returns the new text as you're
typing so we're going to take that text
and we're going to pass it to this
function and we also pass it a label of
which field we want to change so this is
the new text for the password field so
we take that up here and what we want to
do is we want to insert that new value
into our state so to do that we want to
keep what our current state is so at
least with values so you notice how I
did dot state so this retain ooh we're
gonna do two state values here so this
will keep all the values that we had
before and then we're adding a new value
to that and then key now I don't want
the I don't want this to be called key
right we don't want that so the brackets
here gets the value so if this is
password it's the same as me saying
password value these are equivalent if
the value of key is password so now
that's how I know I want to set the
password to the new value but now if we
should type we should be able to see
text up here I'm good there's a small
problem though because our password is
viewable so to get rid of that we can
there's a property called
secur text entry and now we should no
longer be able to see the password
perfect or at least you know it's doing
the dot dot dot thing and we can just
see the last character we type okay so
now we want to actually create an
account when this button is pressed and
it's actually quite easy because we have
all our fields and values so now we just
need to call our mutation inside of
submit so how do we call a graph QL
mutation from react native well the way
we do it is we first need to import oops
I don't want this and what are we gonna
import here we want to import Apollo
client and well we don't want to import
Apollo client actually I need to check
my package of JSON did we install okay
we installed react Apollo nevermind I
didn't know if I would need to D it it
from this guy which his has all the
packages or if we had to install react
Apollo so from a react Apollo there's
something called graph QL so react
Apollo and this is a higher order
function so we want to call it on our
signup class so export default graph QL
signup and here's where you specify
where you would like or what mutation so
I'm basically injecting my class here
with a prop so that I can call a
mutation this will look a little
confusing but it'll make sense when we
do it so graph QL tag so we're gonna
import this library or this thing called
gql from graph QL tag this is where we
specify the mutation where we want to
run so here we're gonna say Const signup
is equal to g ql and then we're gonna
put the sign up stuff right here and
then you pass in your mutation here so
when you do that you now have access to
this you can call that mutation so
that's what we're doing our submit so
what the heck do we put here
well what mutation do you want to call
if we look at this guy we want to call
these sign up mutation so i need to
write the graph QL to do the mutation so
what i like to do is just go on over to
graphical and type it so for me it's at
low post 4000 and i hope i'm not i hope
i'm not blocked
I don't doesn't look like I'm blocked
that's good do I have a header nope
I don't just don't have authentication
on right now so that's nice
or maybe there's not authentication for
this server by default okay so I want to
do a signup mutation so I'm gonna say
mutation we're gonna have some variables
here name which is a string and then
what else is there username which is
also a string and a password which is a
string and I don't know why this is all
read here oh I meant to put a dollar
sign there we go so this is how you do
variables and graph QL and then we're
gonna use these variables and a sign up
mutation so name is equal to name
username oh right it's just supposed to
be email not username email is email
and their password and then we have a
off payload which we can grab a token
and a user we don't really need to
display anything for the user so I'm
gonna just ignore that and grab stuff
from the token and the token is just a
string which is really all we care about
so I'm gonna copy that so this is what
we want from the response the token so
we're gonna paste that here and I have
no idea why
unexpected tab character no tabs yeah
not sure I guess I have a tab here it
doesn't like okay oh it looks like we
have an error
I think it's because I need to import it
like this is that right yeah cool so now
we want to call this mutation here
passing in the name email and password
variables so to do that we're gonna call
it do it in our submit function which is
called when we press this button and
we're just gonna say this doc crops dot
and I'm gonna make this an asynchronous
function because mutate is asynchronous
so I'm gonna say response is equal to a
weight of this docprops/thumbnail.emf
and I'm awaiting it because it's an
asynchronous function and here I'm gonna
save variables and where the variables
we're gonna pass in these guys which is
this dot state values all right let's
give that a save stuff is read it just
doesn't like the order
so this is just an es lamp thing and
this is red here because we're not using
these too so we need to use those
ideally we use is submitting in our
submit function so at the start of a
submit we should say this dot set state
is submitting is true and then at the
very end we'll say is submitting as
false and the reason we guard the
function like this is to make sure we
don't submit multiple times and to
prevent that actually we can just do it
at the very top we can say if this
thought state dot is submitting you can
just return so we don't want to do
something if we're already submitting we
need to wait and make sure is submitting
is false so we set it to true so we make
sure no one else does anything or at
least the buttons not double clicked and
we're calling the response so I think
we're good to go let's try and try this
out and I oh I forgot to mention you
should have your server up and running
but if you got this far you probably got
that and to start it up you're gonna
need to run NPM start here in my
e-commerce folder and also make sure you
have Prisma server setup as well which I
think if you run Prisma local start
that'll start it up okay so here's my
app and here's the log for the app so
when we console our response we should
see it over here so my name is gonna
meet Bob and we're say Bob at Bob calm
and Bob Bob create account
response not successful ah receive
status code 400 okay so what I need to
do is wrap this with a try-catch so and
we're going to console dot log the air
so now we will see and let's say let
whoops let response and we're just gonna
say responses null by default okay so
now we can actually see what the error
occurs hopefully it gives us better than
just Network err not successful and I
wonder if on our hand over here required
type string was provided variable email
a required type string was not provided
so it looks like we have okay so what we
did not pass the variable email here so
what I'm also gonna do is oh look at me
I did name and username even though I
meant to say email okay I just in my
head I replaced the username with email
for some reason multiple times sorry for
the confusion guys email so let's fix
that right here this should be email you
guys probably were watching and
wondering why I was using user name all
over the place and we're probably super
confused alright that'll fix it we just
need to change that field to email all
right let's try this again Bob Bob Bob
calm Bob Bob
great now we're not clearing the field
so nothing happens there but Wow we'll
get our response we have a token a JWT
token so it did indeed work so we were
able to create a form and submit to our
server now there's plenty of stuff to do
now with this response we're not
handling errors
what happens if Barbara D exists we also
need to clear the form go to the next
screen but at least we got a form setup
we're able to receive a token so that's
where I'm gonna leave this video we'll
do next is what I just mentioned and a
couple other things so thanks for
watching guys and I'll see you in the
next one
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>