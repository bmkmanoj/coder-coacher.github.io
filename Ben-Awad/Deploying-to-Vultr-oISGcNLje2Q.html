<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Deploying to Vultr | Coder Coacher - Coaching Coders</title><meta content="Deploying to Vultr - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Deploying to Vultr</b></h2><h5 class="post__date">2017-12-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oISGcNLje2Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys in this video we are going to
deploy our slack clone
server to voltar now if you don't know
what voltar is is a cloud hosting place
where you can set up a virtual server
and then run code on it so if you'd like
to follow along you can create a vulture
account and I'm gonna show you how to
create a machine and then deploy our
code to it but you could also run this
on is err Google's cloud or AWS setting
up an ec2 instance basically any virtual
server virtual private server you can
set up and follow along because all
we're going to do is SS H into it and do
some stuff now before we get into
setting up our vulture instance I want
to go over a few best practices that's
recommended for setting up our nodejs
image so we want to say that we are in
production so we need to set the note if
we're not worrying about global NPM
dependencies and we want to run the user
as node this is just from the docker
node image just when you're about to go
into production this is what they
recommend
so coming over here we're just going to
say we're going to set the m2 note in
and just call it production so this will
set the environment variable that we
want and at the bottom we're just gonna
set the user to node like they recommend
and then also in a docker compose file
instead of opening up the 8081 we're
gonna open up 280 like so and this is
the file that it's expected or the port
expected by the machine okay so now over
here I'm just gonna run docker build and
rebuild the server because I just
changed the image and notice how I am
using the my public image and we're
gonna push that up to the cloud
afterwards
okay so let's create our machine so log
in to vulture or ever you're using and
just go ahead and create a new server
and I'm gonna select Miami just because
it has the cheapest server still up
they're all sold out for the other
regions I'm actually not quite sure how
to pick the best region I assume you
just picked the one closest to you or
closest to your audience of users that
are going to use your web application
I'm gonna go ahead and just keep the
default four cent OS the other one I
would consider using is a bun - I'm not
really sure what the best OS to pick for
setting up our server with docker so I'm
just gonna go with the default one set
my server size got my location and
alright we'll just call this slack clone
server go ahead and deploy that so when
that's finished deploying what we're
gonna do is SSH into it and install
docker on it so docker has this lovely
guide on how to install it on the OS
that we want and we're gonna go through
the regular install but you can also at
the bottom they talked about you can
install it from a package or they have a
convenience script that you can use or
you can just curl the get docker and
then run get docker and I'll go ahead
and set everything up for you
automatically which is really nice but
yeah we're just gonna follow the regular
installing and docker that it recommends
up here and then after that we're gonna
get docker compose setup and boot up our
machine so let's see where we are on the
process this guy is still booting up
alright so our image finished building
so I'm gonna push it up to the cloud so
a docker push
so now I can pull that and I want to
make sure and change my image here to be
bin Awad slash latest that way I make
sure to get the slack clone off of the
docker cloud okay all right so my
machine is up I'm just gonna click on it
and cool so here I am just going to SSH
into it so we can do some stuff so the
way we do that is I'm gonna copy the IP
address come on over here to terminal
and I'm just gonna SSH as route at and
paste in my IP address we're gonna say
yes and now we can put in our password
so here's the password that they give
you I'm gonna copy the password here
okay so then and cool now we're now
currently on the server so we're just
going to go through the installation
process they recommend here so we're
gonna copy sudo yum and run all that
stuff and here we'll set up the
repository and determining fastest
mirrors we'll just let this finish
downloading and do that and we're just
going to go ahead and we're not going to
worry about setting up an edge or test
repositories we're gonna just do the
regular one camp then we're gonna
install that
go ahead and run that that was fast and
go ahead and do sudo run oops
and I'll loops and I'll link this guide
in the comments below our description
below if you want to follow along as
well yes we'd like to download this so
now we should have docker install it
looks like you can check for duplicates
I think we're gonna be fine we're gonna
start up da core using this so what we
just did before installed and configured
it all and now we're going to start it
up and then make sure it's running and
then we're going to download the docker
compose script and then we're gonna copy
our files so we're gonna copy over
docker compose and I don't think there's
anything else we need
all we need are in Jeanette's template
as well so we'll copy that onto our
server and then we'll just run docker
compose up and docker compose we'll
figure out downloading all the images
and up boot stuff up hopefully if we did
everything correctly alright so I'm
going to start off docker and let's try
running hello world of doctor
all right cool let's set it up so nice
so it looks like it ran it was able to
fetch the image generate the message so
it looks like we have docker all good
that's nice
this is the other thing we want to add
docker as a notice how we had two runs
sudo right there before docker you don't
want to always run sudo so what you can
do is you can create a new user here to
go ahead and set that up to have docker
in a group and let's go ahead and do
that why not now I don't even have I
guess we'll just call our root user
we'll add him to the docker route you
could also create a totally new user if
you wanted to so now I can do docker run
docker run hello world
I'll show you guys that without needing
to run sudo awesome so now we're gonna
set up docker compose so dr. and compose
they recommend installing it like so so
we're just gonna copy that and it says
make sure to check the github repository
I went ahead and checked 1.8 it's the
latest for me every 1.18 make sure
you're installing the latest one paste
that in and we're just gonna follow
these instructions change mod it and
let's see if we can get the version of
it awesome
so now what I had to do is reboot my
machine to just get docker compose
working with docker ok you might not
have to do that but I needed to but now
we have all the dependencies that we
need on our machine and I'm not sure
what the honestly the best way just so
I'm pretty much setting this all up
manually right going in and installing
it I'm not sure if there's what the best
way I know there's ways to automate it
so I'm curious how you guys set up your
machines but now we just installed
software we needed and now we're just
going to copy over the files so we're
gonna use this so we're gonna tell it
wait two files we want to copy over I'm
gonna use docker compose and then also
be my site template I don't think
there's any other files that we need I
think docker compose is gonna set
everything up we're gonna have to make a
files directory and a PG data directory
though and I think other than that we
are good so then I need you to just say
and grab my IP address again so root at
the IP and I just need to put a where
we're gonna copy the files to and we're
gonna call it copy it to the home
directory and copy my password
okay so now they're on the server and
I'm just gonna SSH in there oops I meant
to paste in wrong password alright cool
we're in so now if I do an LS we see our
doctor compose and our my site template
and all we have to do is run docker
compose up and okay so this is the
problem that was talking about that I
would get and that's why I had to reboot
so can connect to docker daemon
but if we run docker run HelloWorld oh
it doesn't look like it's up either I
guess when we set this up
it doesn't start up on reboot so we're
just going to go ahead and run this
again now
now if I dock your compose up okay if
that seemed to work so now it's fetching
all this stuff okay looks like our DB is
set up and running I don't see our
website as our website crash I created
web looks like the web was reconnecting
and nice looks like our website is
booted up okay so to access this it's
gonna be this IP address slash graph QL
which should crash and stuff because
it's yeah get query missing but look see
how we get get query missing that means
we actually did connect to our Express
server we just couldn't connect to it
but that's where I want to stop this
video we have the back end set up the
next thing I want to do is deploy our
front in and then connect the two
together so we can actually make
requests and view slack clone live on
the Internet
but cool we're able to connect to it
that's good and we can see an engine X
over here our connection so awesome yep
but that's it for this video guys thanks
for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>