<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native Tutorial - Silent Auction App Part 12 | Coder Coacher - Coaching Coders</title><meta content="React Native Tutorial - Silent Auction App Part 12 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native Tutorial - Silent Auction App Part 12</b></h2><h5 class="post__date">2017-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OHeyYlVJ7js" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome back so in the
last video I wasn't sure how to
authenticate using sockets but I looked
it up with feathers and luckily I found
how to do it so here's how you do it
right here now this might look a little
weird so I'm just going to walk you
through how this is working so now we
have to do is we first have to admit an
authentic a message and we just pass
enter access token and the strategy the
strategy matches is JWT because we were
passing in a token and then here we're
waiting for the call back and then in
the call back here we authenticate and
then once we're all Senta cated we can
then do auctions find and then how we
were doing it before now you'll notice
we're double authenticating right we
have to authenticate with a socket but
we are also authenticating with the rest
client to make sure this token is
correct right now we're double
authenticating because we're both doing
wrestle quests and we're doing sockets
it's not great but it'll work for now
one way to get around this is the use
sockets for everything and maybe at the
end of this video I'll convert
everything into sockets because that
might be a little better since we're
using sockets anyway okay so but anyway
so now if I just come back over here to
refresh so you can see up to or even
logging at yoyogi are found all auctions
so now if you see sound all auctions
right here let me explain this a little
bit so you should see total limit skip
and data and you just see right now
empty because we don't have any but if I
were to just come over here i
authenticated I get a token so I
dedicated with my Bob user I have this
token now we're just going to create an
auction so we can see it
like oh we're here to auctions the body
here i'm just going to change the toka
down okay so we created token now if i
refresh here we get the ID name current
price a lot stuff everything we want it
awesome so now what we can do is we
could say we can pass an action and
you'll notice right here we're doing all
this socket stuff and component will
mount and that's not really the best
thing to do it's fine to kind of lit
like it's not great to listen but
listening is fine so notice how we're
emitting here and we also want to listen
emitting this is kind of like making a
request so we should probably put this
inner sagas whereas this is harder to
put in saugus because you have to have
it running in the background because
it's just basically a call back it's
what I want to do here they actually
want to just make a function an action
that we can call and just be like
request auctions so we're going to
create this action and what that actions
could do is the socket stuff right here
and then after it requests it and gets
the data what it's going to do is it's
going to plug it into the state and an
update here so let's do that so the
first thing is to create the action so
we have two actions here the first is
request auction auctions and we're going
to receive auctions
alright so now we want to make two
functions here receive auctions and the
quest auctions all right and then
receive auctions and request auctions
all right now in our sagas we can create
another one of these guys and this is
going to be call find auctions and what
we'll do is we'll pass in the payload if
we ever want to find something different
I'll show you guys like a little trick
to make this more generic in a second so
find auctions saga and we're going to be
listening for up here request auctions
and then when we get the auctions we're
going to see them and put them in our
state requests auctions bring a
qualified auctions all right here we're
going to call find auctions pass in
action dot payload and find action this
is something we'll create in the API
find auctions and then the response if
there's an air there's not much we
really do basically just say if not air
actually I'm pretty sure we plug the
response if there's an error there's non
air and instead okay so here we're going
to pass the response in this is receive
auctions it actually it should be dot
data we should pass in all right now in
our API
create our function so we said it was
fined auctions here we'll take in the
parameters for our query and this is
talking about with making it more
generic so we can pass in the params
here in case you want to prove you like
the name and stuff so whenever we call
this action we can pass in the params so
we can always use find it so we pass it
crams in and the rest can stay the same
okay so now we have our five options the
last thing we really want to do is just
update the state oh my gosh and what I
just realized is we needed to make an
auction module and I just put everything
in user my apologies guys so let's
create options so I just you don't want
to cram everything in either we want to
separate stuff that's the purpose of
this modules folder so create actions so
we're just going to transfer everything
over that I just created so copy that
and we'll copy receive auctions and when
we do that we need to also copy that guy
over okay that looks good now when you
create a flash API GS and sagas and
reducers our sagas again we can just
copy
get rid of all the stuff right using not
using this not using this for now and
our API is only going to have those okay
so this simplifies this page a lot and
now we can remove them from these sagres
from the user saugus now reducers I was
about to add a reducer here we don't
need to our API that we need to change
so copy that paste it here and let's
grab all this stuff there we go and we
don't need a sink storage so cool oh I
told you how we're going to use sockets
in here i am not using sockets we're
using an async function and said so we
want to do this with this with sagas air
sockets so we come back over here so
that's how you do it with not sockets
and before since I ray got this all set
up let's see it if it works first and
then we can convert the sockets if we
think that'll be better
so receive auctions so handle action
receive auctions and again here we are
just going to we don't need this we're
just passing the payload in there okay
and this is actually going to be an
array and our index here we need to get
the auctions from auctions / reducers
and we remember we're going to name this
with 1s are not without an s not to
realize it so let's move that there we
go and then here we need to fork these
guys too so we need to concatenate to
get the sagas from auction sagas because
we added auctions and we add reducers
can you add both here to our index file
so we have the user sagas and we have
the auction Cyrus alrighty that's all
set up well and good quest auctions this
looks old jazz few auctions so
comment this stuff out for now request
actions which we are going to need to
map in here request options and then
we're going to bind it here a quest
options all right and of course we want
to get auctions from the state once we
once it load in and we can just console
log in the render function so you can
see once the auctions are loaded and
doesn't exist please options and where
did we try to do that this is our
modules index there we are
ok so we're caught on the loading screen
so also the Kate didn't work maybe see
what the problem was and not seeing
anything in the Wallace refreshing water
if you can see yeah I not seeing what
the problem is so something we call auto
quired so put the solver here so we
should see clock go off and do see fall
off oh I'm not seeing it for whatever
reason it's not calling the saga so i
get rid of the action here request off
good
requests are being request off for
module user action this is unusual I
mess something up oh here's the problem
I mess this up yes so these are objects
and I'm trying to concatenate them
alright so we're going to have to do a
fancier thing here I know the problem is
I messed up this don't need that okay so
the problem is yield where should be
mapping an array and user sagas and
action shot goes there both objects so
we need to get their values by doing
that so the final product should be an
array and we need to spread object
values and we're getting the user saga
and then we do the same thing which the
auction saugus and then we map alright
that should fix it so we're getting all
the values from user and auction so
we're getting both auction the user saw
goes and then remapping alright new air
ok so I just tried to use find on the
wrist app and that's mistake we should
be using the auctions service
and then we can export hero just like
this auctions service and then we get
the auctions service there and let's
refresh cool so now we see in our log
data it looks good so now that I can do
is I can come over here to view option
and instead of calling this each time I
can say this stuff props thought
auctions and actually let's do const
actions and we'll set the default value
as an empty array equal to this prop
will say auctions dot map auction
and now we need to come up here and we
need to add a key so it's going to pass
this an array q is equal by area now at
refresh now we should only see one card
awesome should still be getting the
current price and stuff it's messing
stuff up it's not showing it the curb
prices there so it should be getting the
value maybe I is the second parameter I
didn't think it was let's see so we
shouldn't see the name that we're seeing
from the data over here here we are ok
so now when I create an auction i can
create another one send that in notice
how it doesn't populate over here but if
i refresh populates for what we want to
do is we want to without having to
refresh we want to see that happen we
want to just auto add and so that's what
we'll do with this full service where we
listen for when an auction is created
and then we add it so I think that's
going to be it for this tutorial well
it's i'm going to go ahead and remove
this offset dicate thing because i
actually don't think i want to do it
this way i think i just want to do a
rest to call and do find that way that
weight onto double authenticate and then
all you sock it's for this created so
it'll still be real time and think your
updated and I like that better alright
so thank you guys for watching and I'll
see in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>