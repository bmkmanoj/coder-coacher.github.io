<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Deploying Create React App to Surge | Coder Coacher - Coaching Coders</title><meta content="Deploying Create React App to Surge - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Deploying Create React App to Surge</b></h2><h5 class="post__date">2017-12-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ay2EgGdJ7GY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we're gonna deploy our front
end for our slackline I'm gonna deploy
it to surge but feel free to deploy it
to pretty much any place that allows
static uploads reason I chose this is
because it's easy and free so before we
actually do deploy this there's one
quick change we need to make and that's
the point are our URL or our connection
to this IP address because this is where
our vulture servers running so I haven't
touched anything from the last video
with my vulture server so the way the
way we're gonna be doing this is I don't
want to break basically it locally so
we're gonna store this in an environment
variable so the way environment
variables work with create react app is
you first have to prefix them with react
app so let's copy that we need to make
sure to prefix it with that secondly we
can create these M files one for
development so I'm going to create a
diet of development and a dot m dot
production so when we run this when I
build it's gonna take it from the dot
and of production and I run this from
NPM start we're just gonna get it from
development so dot m dot development I'm
gonna create a react app server URL and
I'm just gonna set that to localhost
8080 one and go ahead and prefix that
with HP ok so this is what's gonna run
when I do this locally and then when I
build this to production we're gonna be
using this and then we just want to
change this
to the IP address that we are given in
vulture basically if you're using
different VPS whatever you URL they give
you to access ax you want to put here I
think that should be the right thing and
now I just need to build it and actually
use it in our apologies so instead of
using this we're gonna use a string
tiblet now and just get process process
that m dot react app server URL so i'm
gonna copy that because we also have
this for our first subscriptions copy
you and the very bottom of our file down
here we have the WebSocket connection
and ooh we don't have the domain okay so
we're gonna do this actually a little
bit differently than I first thought
so since we need to put WebSockets here
I'm just gonna store the host so let's
play HP back there and then copy that
paste it here
so over here I'm not gonna put all this
stuff in front of it
oops Lee the totally wrong thing so we
don't need HTTP here since we're gonna
have that and we're basically gonna say
whether it's a WebSocket or you should
be connection and apology is we just
need to know who the host server is so
when we're developing a little low
closed otherwise so now we just need to
build this I'm in my slack clone client
I can just run npm run build and what
it'll do is it'll take our react project
and build it into static HTML and
JavaScript files um and it puts in this
folder called build and if we look at
packaged with JSON we can see what's
being run so it's this react scripts and
it's just building it for us now if you
haven't already go ahead and install
surge so I ran MPM install global surge
and then when you run surge for the
first time it'll you have to put in your
email and password and create an account
so let's see if this is done building
over here we'll let this finish building
and when it's done we'll go ahead and
just run surge on it it's gonna be done
all we have to do is point our surge to
this build and we can see in a little
bit there'll be a JavaScript file with
all our code bundled and minified it's
pretty cool
okay it's done running and we can see
this is what the output is and you can
see the static stuff and you can look
more into that if you like but now we're
just gonna run surge and I'm gonna point
it to my folder my folder here is just
build so build and I'm gonna hit enter
for this elated paste is my URL I
suppose alright now let's go check out
the project so running here I don't
think yeah we shouldn't see anything but
if I go to register I should be able to
register a new one
okay page not found also something we
need to do I forgot about is in our and
voltar over here I'm gonna just say
docker compose down tell us okay I went
ahead and created a files and Peachy
data folder I forgot to make those looks
like it makes it by default that's good
so I'm guessing the problem with this
and that we can't get the slash register
working is because a react router
because this does work and we even see
our react app here this is a problem
with the redirects and the fixed
redirects on different services is
different so I'm gonna cut the video
real quick and figure out how to do
redirects with search okay guys I figure
out what we needed to do so with surge
we need to call our HTML file 200 HTML
that way that catches any URL the user
puts so instead of index.html we're
gonna call this 200 by HTML and then I'm
just going to redeploy with Serge go
ahead and build responsible honey
and now when I go to slash register or
something it won't get a bad page it
should just redirect to our site and oh
I forgot to confirm that's my domain I
want okay slash register awesome now we
see our register for our accounts so I
can say okay my usual Bob account Bob at
Bob calm and I think I turned off the
server I did a docker compose up boot
this guy back up real quick and then
when that finishes booting up we'll try
registering an account and making sure
WebSockets work and all that jazz so
let's submit again awesome look like
that worked well login creating a team
my loops not now team 1 submit and looks
like team 1 got created testing
WebSockets looks like WebSockets works
ok images should break because we are
not specifying the URL if you remember
that and we can fix that if we wanted to
so under docker compose we can set an
environment variable for our resolver I
believe so if we look at our message
resolver or expecting the server URL
that way we can serve the images good
but we're gonna be I'm gonna be changing
my server URL at least but if you want
to server URL oops
you can create an invariable right here
server URL and set the URL your IP
address that way it would be able access
it but pretty cool so now you should be
able to deploy any of your react
applications with a node.js server with
docker using basically what we just did
so building your static react
application and sending it up to surge
or another place that serves static
files and then your back-end using you
can use docker like we did set up a
virtual private machine and then docker
run so next steps I want to do with this
project is we're getting very close to
the end I want to try to get HGPS
working and also I'm gonna go ahead and
take down my vulture machine because it
costs money to keep it running but I do
want to have this like just a live site
so people can come check it out so Serge
is free and so I think I'm gonna set
this up also on AWS so I'll probably
make another video soon in the future
setting this up with AWS because that's
gonna be free for me at least for a
little bit and then set up a ec2
instance but it's gonna look very
similar to what we just did today where
we ask the sage in to more scene set
everything up and then we're good to go
but pretty cool and now anyone can come
to this URL and check this out but
probably by the time you're watching
this I will have taken this down but
very soon I'll put it back up for docker
or on AWS that's it for this video guys
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>