<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to get Create React App to work with Typescript and Emotion | Coder Coacher - Coaching Coders</title><meta content="How to get Create React App to work with Typescript and Emotion - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to get Create React App to work with Typescript and Emotion</b></h2><h5 class="post__date">2018-03-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gt8x6uODvEQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I was recently refactoring one
of my react projects to typescript and I
really like using create react app and I
wanted to start using typescript and I
was converting it over typescript and
you can actually use create react app
with typescript there's a way to do it
and there's like a project where you do
custom scripts now I also wanted in this
project to use something called emotion
this is something that is really nice
when wanting to style things in
JavaScript so instead of writing stuff
in a CSS file you write it like this so
this is what it looks like
you have a style div and then you set
any kind of CSS properties you want and
then you can use the container just as a
regular component which is really cool
and then the styles will be applied to
it it's very similar to styled
components the reason I'm using this one
is I like some of the extra features
that it has so I wanted to use this and
I also wanted to use create react app
and typescript and this is actually a
little harder to get set up than you
would think because there's this plugin
called Babel plug-in emotion and without
it you can still use emotion but with it
you get a lot of advantages right here's
like a little chart of all the features
that you get if you use this Babel
plug-in with emotion and it's really
nice and I wanted these things but I
also wanted to use typescript so I had
to add a custom babel plugin and also
get typescript working while still
trying to do create react app now I
could just abandon my wish to get create
react at working and set up my own web
pack configuration and that's one way to
do it but I didn't want to worry about
the overhead of maintaining a web pack
configuration so instead what I'm going
to show you today is how I got a motion
and typescript and it's babel plugin all
working together so i found this thing
online this little gist that kind of
walks through the steps but it's very
incomplete and it doesn't
so we're going to go through this I'm
going to fill in some of the gaps that
it has to set this up and yeah so the
first thing is is you just create a
blank project with a crate react app but
notice how we set the scripts version to
react scripts type script and that's how
we're gonna get type script so I've
already done that and I have my project
right here now we're also gonna have to
install some dependencies so here are
the pendin seas that I installed you'll
notice they're the same ones as are
right here but I added one extra one for
whatever it is and he doesn't tell you
to also install the papal plugin emotion
so make sure you install that as well so
this is what it looks like
plug-in react a pre wired Babel loader
and Babel preset and and also I forgot
one you also want to add emotion on to
that okay so after that we have all the
two dependencies installed we have to
use this react app you wired instead of
what the default scripts and what this
thing does is it allows us to basically
change the web pack configuration
without ejecting from create react at so
we're gonna go to package a JSON and
replace the scripts area so we're good
here no changes you need to make there
so next the way you change things is by
adding a config overrides file so we're
gonna say config overrides is now this
is the config overrides that he gives us
and we can just copy and paste this and
I'll put this adjustment link in
description below so you guys can follow
along if you want to but this actually
does not work so we're gonna go through
how to fix this
and then and he has 80s config I don't
think there's really anything missing
from the TS config it'll definitely be
something that we have to change and the
TS config but I forget what it is and it
tells us when we run it okay so this is
pretty much all the steps that he
outlines and it should work one thing
he's missing is he doesn't talk about
adding a dot babel RC so you can add a
dot babel or C and specify any
environment or basically how babbles
supposed to work
so for us we would like to set up a
motion and I'm gonna use the recommended
babble RC that is in the readme for a
motion
so I'm gonna create a new file called
Babel RC and the cool thing about this
is it change is how motion plug-in works
when in production and when in
development so here's some development
settings and here's some production
settings so that's pretty nice
okay so we have that setup let's go
ahead and start it up but actually
before I start up let's actually write a
little example this make sure it
actually does work when it does so I'm
gonna import styles from any motion and
then I'm just gonna say Const pink div
is gonna be style dot div and we'll just
set the color to pink and I'm gonna go
ahead and say flex one the reason why
I'm saying flex one is because one of
the features of the babble plugin
I actually I don't know if this is a
feature of the babble plug-in itself but
they do go ahead and run it through so
CSS with this sometimes you have to do
like WebKit in front I forget what
they're called but it'll go ahead and
add all these little flags to make sure
it works in different browsers forget
the name of them but if we add flex
we'll be able to see you and I'll show
you what I'm talking about when we run
so I'm gonna say pink t'v and I'm gonna
say well so when we configure everything
we start this up we should be able to
see a pink div so I'm gonna say NPM
start and let this start up and we'll
see okay so first thing I am missing a
base URL this is the thing I was talking
about for my compiler options so TTS
config base URL and the base URL is just
the current directory and as you can see
it's for resolving non-for module names
okay so cannot read property loader so
let's take a look at what this configure
override does and this is the main file
we have to fix now so config is actually
a web pack config and just like
everything you would see in a
configuration file for a web pack and so
what he's trying to do here is she's
trying to find the rule that adds the
typescript loader and before typescript
runs he wants to add a babel loader in
so the problem with this is if we print
out the config i'll show you how he's
doing it and actually so this was this
is how I figured it out so first I
printed out the config but you'll notice
you can't really see much at least the
modules for example doesn't go very deep
and I can't see the rules right here
they're just his object object so what i
did as i said json dot stringify this
and then I ran it again and now I have
this nice ugly string but I now have the
whole web pack configuration and we can
modify this in any way so I pasted this
into a JSON format err and I processed
it and we can just go ahead and now take
a look so compare this to what he's
doing
so he is looking for the module rules so
we can close all the ones who don't care
about okay some module rules and then
he's trying to find something inside of
these rules right so he's saying rule
dot loader and he's looking for a loader
that includes typescript
- loader but you'll notice none of these
there's only two rules there's one with
test and there's one with one of and
neither of those happen to be the
typescript loader ok so what are we
gonna do about this well instead of
doing all this stuff really what we want
to do is once you understand that what
he's trying to do here is add babel
loader in front of typescript loader we
can get rid of all of this stuff and
just create a new one and say config dot
module dot rules and the rule that we
care about is this 1 of 1 so this is at
position 1 now I'm hard coding 1 here
you could also do a 5 like this and look
for one of if you wanted to and then in
one of we have to do dot one of and then
we care about the typescript loader so
let's see if we can find the typescript
loader is right here so it's at position
1 in this array as well so I did dot 1
of position 1 and then what we want to
change is this guy right here so use I
want to insert a loader in front of PS
loader so we're going to say dot use and
if I do unshifted adds as it says right
here an element at the beginning of an
array so now what I want to do is just
add the babel loader in front so I'm
gonna copy this and we actually don't
even need to include the plugins here
because we already specified that in our
babel RC so now i can actually get rid
of all this junk right here
so now all I have is one thing where we
go to the module we get the rule that
we're looking for and then we just add
at the beginning Babel odor so let's go
ahead and start this and see if we are
looking better now okay so we're
starting up the development server and
if it does work it should be pink and
also uh
import styled was not oh ok so what I
had wrong is I was using a motion
instead of react emotion to get the
styled component or styled object so
make sure you ahead install yarn add
react motion a reacting motion as well
and then it'll go ahead and work so I
also if you noticed this looks slightly
different because I just got rid of some
of the typescript TS lint errors so
there's not any more squiggly as I turn
this into a Const app and then in
mightiest lint I just changed some of
the rules and added this so it works
nicely with prettier and now that I got
rid of all those errors and stuff it
does go ahead and compile and we see
hello is pink I go ahead and inspect
this I can check out hello and so this
was the thing I was talking about notice
how there's WebKit flex and MS flex so
it's nice that it goes ahead and adds
that for us now that's not specifically
a babel plugin thing i don't think
that's just now one of the nice perks of
reactive motion and so some of the
things that we get from this is instead
of doing style div like that we can do
style div dot div like that so a little
different syntax so we know for sure it
worked because we're using that
different syntax and there's a lot of
other good stuff but I'm gonna put this
project on github so you can check it
out and use this as a starting point if
you want to use emotion and typescript
or you can follow these steps if you
want to get working in your own project
that is it for this video guys I hope
that was helpful if you're trying to get
these things set up
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>