<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Facebook OAuth GraphQL with Node.js | Coder Coacher - Coaching Coders</title><meta content="Facebook OAuth GraphQL with Node.js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Facebook OAuth GraphQL with Node.js</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qjKZYQih288" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys so today we're going to
be setting up Facebook a lot that way we
can log in using our Facebook account
and set it up on a graph QL server so
I'm going to show you how to do this on
any Express server though it doesn't
matter if you're using graph QL if
you're not using graph QL if you have a
no GS Express server and you want to
know how to set up Facebook a loss this
is the video for you we're going to go
the whole process so you can learn how
to do it so the first thing you want to
do is go to developers face book comm
and we actually need to make an app that
we're going to be using and also
recommend installing in grok going to be
using in this tutorial it makes it
really easy to work with Facebook's a
wok system and getting craft to create
what's called web hook and an grok helps
us do that very easily so when you get
to this page make an account and go
ahead and add a new one I'm just going
to call mine graph QL test and type in
this thing and we're gonna have a new
Facebook app so now this is also where
you would go if you want to create like
a facebook Messenger bot but we're not
doing that today all you do is go to
dashboard and get your app ID in your
app secret we're going to use those two
and in your settings you're also going
to need to add an app domain we don't
need these values quite yet but just
have them handy to do the whole you know
Oh awesome we're actually use a library
called passport and the specific
passport librarian is or strategies what
they call them this Passport Facebook
that makes it super easy so we're going
to install this on our server and this
is all the code it looks like so we give
them our current slip credentials and
then we have a callback function of how
we handle the data Facebook gives back
to us and then we can authenticate and
that is it guys that's all you need to
do to get to setup it's actually very
fast very easy so let's pop over here
and actually do this so here have the
code up for my server and
I'll put starter code and the
description below if you want to use
what I'm using but you can follow along
with really any Express server you know
I have a lot of extra code here you
don't need any of it
so first let's install those libraries
though so we're going to do passport and
passport Facebook and then you're going
to come over here and you want to import
both of them so import passport from
passport and import Facebook strategy
from passport Facebook nice and then we
can just copy this we're not going to
put up here but we're going to put it
here Oh actually we should we're going
to need to do this before or after we
make our App cool alright so here is
where you're going to want to put in
your client ID and your client secrets
I'm going to go ahead and just stick
those in here so ideally you want to
keep both of these things secret I will
just I'm just going to delete this
application after I'm done making this
video so it's fine I'm showing you my
secret but normally you do not want to
have your secrets just sitting here out
like this people can basically make API
calls because of it and we also need to
specify an app domain a callback URL so
that's where Angra comes on so this
server is going to run on low cost 3000
so what I'm going to do is in a new tab
so I want to start up the server not
right now but in the future I'm going to
start up the server and then I'm going
to open up on port 3000 so I'm going to
run in rock SUV 3000 because I'm going
to be running in Gras on that port and
what that does if you're not familiar
think rock because it basically gives
you a URL and now you can access your
server that you have on localhost
at this URL and that's actually what
we're going to give
- as one of our app domains so we're
going to use and we need to use for our
callback URL so paste it in here so
instead of locos 3000 what you're going
to put this in grok URL slash off
facebook callback is good and now I'm
not going to worry about creating a
database object right now all I want to
do is I want to console that log profile
so I can see hey what information is
Facebook giving me back okay so and you
it wants you to pass a user back and if
there's an error we can just pass a null
no error and an empty object for the
user for now or if we wanted to you pass
the profile down to either one would
work alright so next thing we want to do
we come back over to the just be readme
is create two routes and by the way
these routes are customizable what's
important is you want this slash off
slash Facebook callback to be the same
as this one this one is actually where
you go to the start the whole process to
slash off slash Facebook but you could
call this slash login with Facebook you
know anything you wanted to call it you
can just call it login if you want to
well maybe I'll just leave that as I'll
call it f logins for facebook login and
then so we go to passport we're going to
authenticate Facebook that's good that
just basically starts hey we're when we
go to this URL we want to make an OAuth
to Facebook and then here we just want
to change you can you can keep this
failure redirect if you want to and
that's just if it like it says if
there's a failure that puts sends it to
I don't need it I don't really want it
but I do not use sessions so it's
important to put session equal false
here
or : both and then I'm fine keeping this
callback that's good and I'm not going
to have a redirect I'm just going to do
response send off was good and you can
console dot log oh good - so we don't
even need a console log we're going to
send it back all right and then we have
our callback here where we're printing
to the console profile so we're going to
see and by the way guys we're all set to
go that with all the code we needed to
do one last thing is just initialize
everything so app dot use and then
passport dot and initialize and then
just note app is what my Express is
called all right so we're all set up so
if I did this all correctly we can give
it a try so what we want to do is we
want to go to this URL slash F login to
start things off so I have it so my year
I and I don't copy this paste and I can
go to s login oh and I need to start up
my server so as you can see we got an
air because the server is not started
now we're actually listening for
requests but you might get this error if
you don't start up your server so make
sure you start your server now if we do
F log in you'll notice BAM it comes over
here to Facebook but as you can see
we're getting a domain of this URL isn't
included in your app domains so that's a
problem you can get if you don't set
your app domains and I think okay it's
just going to take us back come back
over here dang gerak we just mean add
this to our settings here I just didn't
hit save setting Save Changes I think
because we have it right here
please correct these URLs absolutely
must match the domain of Facebook oh I
think maybe we need to do Facebook
website
site URL I believe that's all we need to
do not this app domain because it's
actually not an app let's put it both
places I'm actually not 100% sure
whether it's this or this one that it
needs well let's give it a try see if
it's working now I've log-in and cool so
this is what you'll see if it
successfully worked is how my user
logging in so it's going to be hey this
app this is our app that we would so
name it you know a good name and stuff
because it's what users you're going to
see graph geo test would like to see
your profile then what I can do is I can
click continue has been and will
actually get redirected back to the
fight and say off was good and if I come
back over here to console hey I can see
this JSON object which were console
logging here and you can see here is my
profile from Facebook so as you can see
some of the information I just have it
allow on Facebook but if the user has
filled that out they would see it there
but we have this ID and then we have a
display name and what we can use with
this data is to actually create a user
for them now that we have their you know
their login for their facebook login
basically they click that button we can
log them and using that so that is it
for this video guys I hope you see how
easy it is to add facebook off and you
will try it on your website next video
what I want to do is actually show you
how I recommend storing this in a
database we're just kind of console
logging this profile here the next step
is actually create a user from this
store in the database
and so that's going to be showing you
guys in the next video and also good to
note this is you're going to do the same
thing whether you're doing a Facebook
whether you're doing Google whether
you're doing github any of those all
those have ooofff features that you can
do similar to this and that you can plug
in and passport you can use the same
library with those two weeks it's very
easy to integrate
so I recommend giving those a shot I
challenge you to get those set up and if
you have any questions or trouble tying
those up let me know and I can make
another video for those too but it
should be very similar to Facebook and
you should be able to get them working
pretty easily but pretty cool right we
just got data straight from Facebook so
that's very nice and the same thing you
can get from the other companies so
let's say for this I'll see you guys in
the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>