<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native Tutorial - Silent Auction App Part 1 | Coder Coacher - Coaching Coders</title><meta content="React Native Tutorial - Silent Auction App Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native Tutorial - Silent Auction App Part 1</b></h2><h5 class="post__date">2017-04-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7zvqd7NnJQo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys in this video we're going
to be setting up the back-end server now
for this we're gonna be using feathers J
s and a cool tool out they have it to
help you quickly start up a project is
the feather CLI so if you don't have
that array downloaded go to terminal and
type in this command npm install and
then get yourself feathers CLI so i'm
gonna hop over here to my terminal i
already have that installed so i'm not
going to I'm just going to CD into a
folder called server this is an empty
folder and I'm going to start building
the feathers J s server in here so once
you have that installed it gives you a
command called feathers and they can do
generate app this will basically
bootstrap the whole app and create a lot
of code for you so the project name I'm
gonna call it silent auction no
description folder is gonna live in
source and be using yarn and then you
can see it's downloading everything you
need for the project and create a bunch
of files for you now also if you have
done feathers before make sure you do
update your feathers GOI to before
following this if your CI looks
different because they just did big
update and so this is using the newest
version okay so now if I just do an LS I
can see all these folders were created
for me now just real quick
actually no we will do that in a second
the next thing we want to setup is
authentication so feathers generate
authentication will help you get that
set up and we're gonna be using a
username and password so you can just
push enter or spacebar to select which
one you want we're going to keep the
default as users and then here I'm gonna
be using Postgres as the database for
this if you don't have Postgres
installed you could use in DB or in
memory that might be a little easier to
set up but if you do have Postgres or
you want to learn how to use Postgres do
install that and then you select sequel
eyes and
Postgres and then right here this is the
database connection string basically
this just has your database name you
don't have to worry about changing it
there you do what I like to do is just
keep it like that and then you can
always change it later like for example
I like how my project is named right now
and I want to call my database silent
underscore auction but let's say my
project name I want to be a little
different so let's say I go into config
and then default this is where your
configuration for your back-end test and
if you go to Postgres here you can
change this URL so let's say I don't
want to put my database to call it
silent auction I want to call my
database I don't know Bob or whatever
you want to call it you can change that
there I'm gonna leave - silent auction
for now but if you need to change that
that's where you would change that now
we can go ahead and do NPM start and we
should see an error because we don't
have a database up I don't have a silent
auction in Postgres so we're gonna have
to create this database if you have a
tool a GUI to create Postgres databases
that you can use that or I use something
called P sequel you just type P sequel
it will open up prompt and then we can
say create database and silent auction
and then backslash q gets you out of
that and then we have a database called
silent auction now when I do NPM start
we should see those GS starts up and
it's at localhost 3030 so if I come over
to my browser and I just refresh little
host 3030
you can see this little splash screen
that they have and you know you set up
this correctly so we set up
authentication already I mean I come
back over here real quick we also want
to have so our authentication is with
this users thing and now we also and
then create auctions so I don't
DUS i'ma say feathers generate service
now basically services you can think of
them as tables in your database and then
allow you to basically access things and
your database and it's kind of a way for
you to get this connected so we're
creating a service I called I'm going to
be using sequel eyes so your musings
utilize for all the services I'm calling
it auctions and keeping the default here
is good and we want authentication with
it and it's gonna be in Postgres okay so
this feathers service is what its gonna
allow us to basically make requests to
slash auctions and then create auctions
this will make more sense later okay
so now I'm just gonna set up the schema
so I'm going to open up the project I'm
gonna go into source and then models so
the first model we're going to work on
is the auctions model so now I have a
name if I come back over here I want a
name current price expiration date and a
seller so I'm a string decimal date time
I can copy this you can say current
price and this is gonna be a decimal
value and I'm gonna go ahead two decimal
places
oops and then I'm gonna create one more
expiration date there's gonna be of the
date type and then the notice for this
last one the seller this is going to be
a foreign key to users and we're
actually gonna be setting up a one two
in relationship if we come over here to
the see equalise documentation well how
they recommend setting up 1 to M
relationships is to use this has many
function right here so we're gonna say
in our case we're gonna say user has
many and then auctions
so and we also need to create a username
field for our user so now we want to do
that down here is where you create
associations but we're actually gonna do
this in the users model so the first
thing we're going to do is we're going
to copy email and we're gonna call user
name and again we need to make sure this
is unique so we'll keep that unique
field because we don't want to users
with the same username so then we're
gonna say users dot has many and then we
can get the auction's model from this
models object that passes so we can say
models
Auctions and then you can set up for and
key this is just naming it so I'm gonna
call it seller ID and let's underscore
it and that'll set up the relationship
between users and auctions so this is we
have our schema set up
we now have users and auctions looking
good there's one thing that I want to
add though and that is a hook now hooks
and feathers GS can happen before or
after I'll show you
so figure auctions hooks these are
functions that are run after a request
is made or before a request is made in
our case we're gonna want to do
something before a request is made and
that's when we create an auction what we
want to do is we want to get the seller
ID right but what to get the seller ID
you don't want to post that you want to
authenticate with a token and then you
want to be automatically added so
feathers Jas has a hook that you can use
feathers authentication hooks so I'm
just going to copy this and we're gonna
install that
so it's called associate current user
here it is
what this is a hook that we can add to
the create method so every time we
create an auction what's going to do is
it's gonna add the current user to the
auction object and this will make more
sense in a second but just follow along
for now so I'm just gonna open up a new
tab in my terminal and I'm in the same
folder as you can see they got all my
server stuff here I'm just gonna be yarn
add than this if you don't have yarn you
can use NPM too and do NPM install okay
now I have that and I can just come back
over here and I can copy their example
okay
I'm gonna call this off instead and I'm
gonna say off and we're gonna bring that
down here and we're gonna add it right
here oops I mean get rid of this stuff
this is we don't need that okay so every
time we create an auction what we're
gonna do is we're going to add the
seller ID of the current user so there
we're not a user has to authenticate and
then when they're authenticated they can
then create auctions when they create an
auction we know their user so we grab
their ID from their user and we put it
in the seller ID attribute for auctions
and notice how seller ID here matches up
with our model over here the foreign key
we created I'm now gonna do like a
little example of how this is working so
we just set up a lot of stuff so I'm
going to go to the root of this
directory and just do NPM start and then
we're gonna come over here to postman
and I'm just going to show you what we
just created so just with those few
lines of code and
all that stuff and creating the models
we now have most of our back hand done
so I can create a user by posting to
slash users so their base URL and then
slash users and make a post request and
then I'm going to pass in this JSON here
the user name is Bob emails Bob at Bob
calm and the password will say is Bob so
if I send this request up and the user
name of relation users does not exist
okay so this is a good example of an
area you might happen when you are
programming in feathers yes so you
notice how it says a column doesn't
exist
but we just added that column right over
here in our model right here and if you
start the server before adding columns
like I did to show you at the beginning
it then creates the schema and then
adding on to the schema you have to
basically do a migration or drop the
database so if you go back to P sequel
you can drop database silent auction and
then we can recreate it so basically you
just need to refresh the database and
now if I do NPM start again and then I
come back over here I can now create my
user ok so we create a user called Bob
at Bob Hall now what we'd like to do is
to log in and to get a token so now we
can post make a post request to slash
authentication now when we pass in a
username or in this case an email and a
password need to make sure we put
strategy local um this is known as a
local strategy when you pass in an email
and a password so this is the same
credentials we created with our user so
we can send that in and we then get an
access token now any time we want to do
something with the auction's we need to
pass in this access token because this
is basically connected to our user
and it says we are logged in and we are
authenticated user we're not we're
legitimate and the server knows about us
so you can come back over here so now
we're going to make a post request to
auctions and create an auction so here
is an access token we're gonna paste in
the one we just got over there and then
we're gonna create a new auction for a
blueberry so the current price is
thirteen seventy seven and here's the
expiration date and then I pass in this
access token now notice how I'm not
passing in a seller ID because we added
that hook what's gonna happen is it's
gonna read this access token it's gonna
thought authenticate us and it's gonna
understand which user we are and it's
gonna automatically add the seller ID so
if I send that notice how we need to
sell our ID of one we come back over
here this was the same ID as the thing
as Bob and that's how we know that these
guys exist and I can also come over here
so we created a one auction I can find
all the auctions right now we only have
one but as if we give more we can make a
get request to slash auctions and now we
again have to pass an authorization to
show that we're logged in so we have to
add a header called authorization and we
pass our token over here I'm gonna paste
my token in for the what we got when we
logged in I'm gonna say send and we get
this guy that we just create it and if I
come back over here create two more I've
come here get it you can see they
populate here so this is we just created
this API basically that we can now use
with feathers yes now there's one more
thing we want to do and that's notice
how when we just display an auction what
we'd really like to show is the sellers
name so we want to basically get the
user and say instead of seller
underscore ID here you know Bob Bob
created these three auctions and we want
to show who created the auctions for
example so in the next video that's what
we doing we'll be setting up we'll be
finishing up the server and adding the
seller name right here alright so thank
you guys for watching and I'll see in
the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>