<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>LocalStorage Next.js | Coder Coacher - Coaching Coders</title><meta content="LocalStorage Next.js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>LocalStorage Next.js</b></h2><h5 class="post__date">2017-07-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Jz-zJ7lA4io" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">woke up guys want to do a quick last
video in regard to next years and it
just wrapping up with this token storing
it in local storage so this is just a
new generic video on how to store local
host or local storage in next j/s and to
grab a query from the header so the use
case being for us we're going to pass
the token and a refresh token we want to
store that in a client so here's what
the code looks like I was really close
to getting this to work right what I did
wrong is when we're going to just do it
like this where your component will
mount little mount and that should be we
should be using did real quick quick
query is giving us the query headers
here so when we pass it here LS access
this top props and then we can say dot
token or dot refresh token you're using
component did not here instead of
component rule mount component will
mount this call on the server component
did mount well component will mount is
count called twice we only want this to
be called once on the client side and SP
console.log client side we'll see we'll
see it there and that's important so
we're going to grab is key token and the
Refresh token to do this top crops query
and then all I do is local storage
that's set item token token and then
same thing free foods same thing for
your fresh token and we're good
so grab it from the URL store it and the
token in local storage if I come over
here good application you can actually
see what local storage looks like here's
token from before actually look like
token it was getting stored before but
if you go to application tab and then
local storage you can see it gets stored
here so I'm going to refresh the page
passing in those tokens notice it yells
client-side here only once that's
important
and then you can see your token is saved
here and then what I would do is I would
pass these tokens every time I want to
make a graph QL query and also last note
that's all I want to do for this video
just the login page now works full
circle I click on this we go home we
grab our tokens and then you can do
whatever you want that's it for this
video guys now you know how to I had to
learn this myself I had to not know how
to handle the next yes that's how they
do it using this static async initial
props you can get the query props pass
it in and then you can get in component
it now and I'm actually kind of curious
let's do a little test so this does work
for sure let's see if this works
so not using component did now I Chi I'm
guessing it will work so let's put two
because we saw the other thing we saw
token in there so if i refresh cons
query of undefined so it's not in props
yet we're grabbing the query straight
from there so refresh okay local storage
is not defined if local storage maybe
yeah okay there we go so this is what I
recommend I like this way better because
then you don't have an extra method here
and you don't even need to return stuff
here if you don't want to either way
work it's really just preference of what
you like better performance is not
really going to be any different but
make sure you do this if local storage
if you want to put it up here alright so
that's it for this video guys we've got
little storage up and running thanks for
watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>