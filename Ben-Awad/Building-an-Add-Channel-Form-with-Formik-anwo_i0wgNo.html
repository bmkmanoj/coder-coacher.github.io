<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building an Add Channel Form with Formik | Coder Coacher - Coaching Coders</title><meta content="Building an Add Channel Form with Formik - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building an Add Channel Form with Formik</b></h2><h5 class="post__date">2017-10-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/anwo_i0wgNo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we're gonna be working on
adding channels so right now we can
switch different teams by clicking on
our little icons that we created on the
side so now we want to be able to switch
to different channels but to be able to
switch the channels we need to be able
to create multiple channels so we're
gonna have a like on here that we can
click on and a little modal will come
down and we can type in our details for
a channel and create new ones so start
us off we're gonna go over to Samantha
Qi and get an icon we're gonna be using
this add circle icon I'm gonna copy it
and then I'm gonna be adding this to the
channels component so if I come down
here I can see I have the channels
header here I'm just gonna create an
icon and the name is add circle and I'll
just add us a little icon there and I'm
gonna import vikon from semantic UI so
we can see that pop up over here so now
when I click on this I want a little
modal to drop down so since this is just
a view component we're gonna have a call
back or a on click that we take as a
prop so here we're going to say on
create on add channel click so on add
channel click and we're gonna say on
click we pass this on add channel click
so now this prop we want to pass in our
sidebar over here so on add channel
click and we want to create something a
function to handle this and really what
we want to do is add state because now
we're going to be creating a new modal
component and one of the props is open
so we're no longer gonna have a pure
function but something that requires
States so I'm going to make this a class
and this is gonna be the render function
now and these are gonna be coming from
the props so I could say this stuff
props and get rid of this and then this
is going to be a class I'm going to say
export default class extends react
component and we have this and then our
state will have open create will say
open add channel modal and the default
state will be false so oops I need add
channel the stuff down here so close
that off get rid of that and we'll get
rid of that prop for now and let's just
make sure all our curly braces are
lining up so that goes here and that
goes here that looks pretty good but
it's not audio formatting so something's
wrong and it's because we are exporting
default so we don't wanna export default
up here because we're doing it down
there alright cool
and then down here we're also going to
return a modal so we're gonna create a
new modal I'm gonna call this the add
channel modal and for now we're seeing
port react from the act
and export defaults will just export a
div that says hi and we're gonna fill
this guy in a second so we'll import
that in so add channel modal channel
Moodle and we're gonna render this guy
at the bottom here so add channel mu and
we're gonna pass a prop that says open
and we're get this prop from the state
so whenever this is true what we want to
do is open the modal so we'll handle
that and our component over there and
then I also want to pass a key and this
is just going to be sidebar add channel
modal and then we want to create a
function that says handle add channel
click
and all we're gonna do is set the state
it says open add channel modal is true
so this is gonna be this is gonna be
coming from our channels right here so
on add channel click we're gonna call
this method that we just made the handle
add channel click so now when I click on
that we should see a modal pop down so
let's implement that modal which is
coming from semantic UI I'm gonna copy
this and we can delete what we had
we don't need an image for our modal so
we're gonna get rid of that we're gonna
save this and instead of having a
trigger we're gonna have an open so one
of the props is open and we can get this
from the prop right here and now let's
see when we click on this button if it
pops up awesome so we pop up the button
and our modal comes up but now notice
when I click away nothing happens right
because we have no way to close this
modal now so on our little channels over
here and they're not our channels our
sidebar is gonna be controlling this
we want to be able to basically have a
call back to update this state so we'll
say handle closed add channel modal and
what we're gonna do is we're gonna set
the state and we're gonna say we're same
state but we're gonna call it false and
then here we're going to say on clothes
we're gonna just gonna call that
function handle clothes add channel
modal it's now over here I believe
there's a prop that should tell us we
can take a look so on action click I
think it should be clip clothes on
dimmer click whether or not the modal
should close when the dimmer is clicked
I believe that's exactly what we want
and we do want it to close but we don't
want to control it we want they the on
click so I think it should be on clothes
on action click let's give this a try
this only this might only get affected
when it's actually closed not when I
attempt to close it so on clothes so
we're going to grab that prop
so it does take a function so pop that
awesome so it now closes we also want to
put a form in here now so a lot of
description in here that's fine
actually we're just gonna make it
content and the header should be ad
channel and then here we're gonna just
grab an input and a button and I'm gonna
have these as fluids which they should
have here somewhere there we go so copy
that so we'll put that here we'll get
rid of this search and we also want to
grab a button okay and we'll just say
we'll make this fluid for now we're not
gonna have an on submit and stuff we'll
handle this in a second we're gonna have
an icon all for put four placeholder
channel name and we'll say submit or
create channel so let's take a look at
what that looks like now so click on
that there's not really any space here I
think we just need to add a form
so I rap this guy and do our form da
fields and that should give us some nice
spacing around everything so click on
that and we're gonna worry about public
and private channels in a different
video we also really want to have like a
cancel button and I would like these
guys to really be in the same thing
cancel like I want them side by side so
right now they're on top of each other
I'm gonna head it over to semantic UI
and just look if they have in their form
section I believe they have a way to
make this side by side and here we go
just like this so you do a form group
with equal
and I don't know if I actually do a
field as well so I copied that right
yeah
no I didn't I thought I copied it I
think I can just do a field oh and we're
gonna have it down here there we go and
do form dot group and see what that
looks like I actually don't think this
will work because yeah the form group
needs to be like this and we might have
to do form dot button I don't know if
that's a thing they actually might just
have a side by side buttons I don't see
any side by side buttons but that's okay
awesome this is exactly I wanted side by
side just like that so this looks pretty
good for our form now we actually need
to add state and actually keep track
when users are type and stuff so
normally we can do this with for example
just the state that comes with react or
mob X which we saw in the last two but I
just tried out this new library that I
really like called formic for creating
forms so I want to show you guys how to
use this so we're gonna create this form
using formic and I'm gonna just call
this add channel modal okay
so to have this library we just do yarn
add formic and then what this is is a
higher-order component that's gonna wrap
our form so we'll see how this works in
a second I'm just gonna hop over here
and say yarn add formic and now we can
add this guide to our form so this is
how we import it and then we add we wrap
our component right here with with
formic and now we add all the options
right here in an object and here are the
different options we can have so the
first thing is this is basically the
initial values of your form let me get
rid of these the initial values I want
here I don't really care about the props
we're only gonna have a name field and
it's gonna be a string so the initial
value of name is gonna be a string and
the name that we use here we also want
to put up here and we use the name
prompt so if we were to use email if
this wasn't in an email instead of name
we would put email here an email here
it's a little confusing because it's
both called name okay so now validate
this is whenever you're typing it'll
actually validate the input looking up
the values that we have in our form for
this we don't really need to do any
validation so I'm just gonna get rid of
this handle submit so on submit we can
do stuff I'm gonna get rid of this we
don't know what we're gonna do on our
submit yet we're just gonna say console
that log submitting
and then set submitting equal to false
and what this does is this allows us to
just disable our buttons so we don't
submit twice and we're not really gonna
have any errors for this form because
it's so simple so I'm gonna get rid of
that and we also have access to our prop
which we'll be using later okay so then
what do I put here and I also want to
just console dialog values so I can show
you guys what's going on there so these
are basically little functions that
we're doing to control our form and
because we're putting this our component
on this we actually are getting past
props that we can use to control our
form here and then when we submit it's
going to call this handle submit
function for us so if we come up here
these are the different props that form
it gives us pesos in so values is all
the things that we have here as our
initial so it's gonna be name and then
as we're typing it'll update values for
us so you want to set the value of your
inputs here so values and then whatever
you named it so this is called name and
then on change you pass it the handle
change and then handle blur you say on
blur oops
and we passed the handle oh this is
lagging area handle blur and this is
submitting and handle submit are when we
click this button down here and then
this cancel the on click for this we're
gonna have we're gonna call on clothes
because we really just want to close it
we're not gonna worry about airs for
this guy so I'm gonna get rid of that
and then our button our button only
really affects these two guys so
disabled I believe that's a prop for our
button here for semantic UI we can
double check though yep disabled so we
want to disable these when we're
submitting the form
so is submitting and we'll say disabled
when we're submitting an on click for my
create channel is when we call this
handle submit function so now let's take
a look at what is happening we actually
just pretty much completed our form so I
can type as I'm typing it's keeping
track of the values so when I say create
channel we see our values right here if
I click cancel we can get out we can pop
it back up so very cool and here's what
we're gonna do next we're gonna actually
handle to submit so now we only really
want this to be a we could just keep
this as a view so right now this is I'm
basically calling this a view component
but I think it's very simple and
intuitive to make this a graph QL
component because what we want to do is
submit this to our server over here and
call this create channel mutation but we
would need to pass it the team ID
so what we could do is we could either
submit the form here passing in the team
ID or we can put the graph QL call and
our sidebar and for this I think it's
okay to just put it in our modal because
this will not bog down our sidebar as
much so this add channel modal it's
going to need to know the name of the
channel and our current team so the
current team if you remember we're
getting right here so current team ID so
we're gonna pass that down so team ID is
equal to current team ID so now I'm I
add channel modal up here we're going to
import gql from graphic you'll tag now
scrap QL tag and import graph QL from
Apollo react Apollo and then with formic
is one higher component and we want to
add another higher-order component our
graph QL tag here now they give you a
compose function which just makes it a
little simpler to do multiple
higher-order components so I can wrap
this with compose and what I can do is I
can just pass as a parameter to this
function the graph QL so now what's
going to happen is this channel modal is
going to be wrapped with two
higher-order components and now we're
going to create a graph QL for create
channel mutation
and we're gonna pass that into our graph
QL here and I'm just gonna come over
here and create it in graphical so 8081
and we're gonna have a mutation and it's
gonna have two variables team ID and
that is going to be an integer and the
name which is gonna be a string and here
when I just create a channel pass the
values and we're also gonna be passing
in public in the future or whether it's
public or private for now we're
defaulting that value so we don't worry
about it so name and here we just need a
boolean that's gonna come back to or
false so we don't need any kind of
selection for our return value so paste
that in there
so now in our props we actually have two
things that are gonna help us out so I'm
going to expand the props here we have
team ID and mutate so team ID is coming
from our sidebar and mutates coming from
this higher component there so now I can
say okay I can make this an async
function and I can say Const response is
equal to mutate and we're gonna await
the response and we're gonna pass in
variables and our variables are gonna be
team ID name a name we're getting from
this values here
and then I'm just gonna console that log
that response all right so let's take a
look at what we just made so I'm gonna
hit channel and I'm gonna say channel 1
so create the channel so you can look
here it says create channels true
nothing's getting closed here and the
reason for that is we just have to call
on close and that should close and work
at it getting that from our props and we
wanna make sure we can we can why don't
we close first and then set set
submitting to false that's fine we're
not doing anything with this response so
I'm going to get rid of that and we
noticed our channel popped up there so
that's pretty cool so let's create
channel to call create channel and whoa
what happened our channel is not here
well let's see when i refresh hey our
channel popped up what's going on there
how come our Channel pops up late well
what's happening is we're basically not
recalling or reef etching the data so
the data doesn't know we just created a
new channel so what you can do to
basically make it show up is do an
update function and update the cache so
our channel 3 that we just made was
really mated
we're actually created we just actually
need to update the cache so that's we'll
be doing in the next video is actually
once we actually make this call to our
graph QL server to update the cache and
reflect it here then also be able to
click on these channels and switch
between what the messages are shown so
that's it for this video guys thanks for
watching and as always the code will be
up on github
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>