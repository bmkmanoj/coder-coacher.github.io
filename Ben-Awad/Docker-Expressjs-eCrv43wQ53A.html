<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Docker Express.js | Coder Coacher - Coaching Coders</title><meta content="Docker Express.js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Docker Express.js</b></h2><h5 class="post__date">2017-12-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eCrv43wQ53A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys a lot of you seem to be
interested in docker so I wanted to do a
quick hello world with docker using
Express j/s so if you don't already go
ahead and go to talker calm and get it
installed on your computer come over
here to get docker and then for pretty
much every operating system you can get
docker setup now once you have docker
setup we're gonna be starting just a
blank project I have empty folder over
here in Visual Studio code and here I
have on the folder that I want to code
in open in the command line and first
things first if you want to see if you
have docker installed correctly you can
do doc or V to get make sure the version
comes up and then you can do docker run
hello world and I'll make sure you have
everything set up now I've run docker
run HelloWorld before so it's not
pulling from a repository but this is
your first time running it what it will
do it'll just make sure docker is set up
and good to go now if you get any error
messages make sure you get those fixed
and then you can start doing this so
four things first I want to set up a
quick Express application so I'm just
going to do NPM in it and I set this up
here and then I'm gonna just create a
source folder and then inside my source
folder I'm in create an index a J's file
and then here I'm just gonna say Kant's
Express and we're gonna say equal
require and I'm just gonna use to
require syntax so we don't have these
babble and I'm gonna say Express
and let's go ahead and just yarn ad
Express and then I'm gonna say Const app
is equal to Express
and here I'm just gonna say app dot get
and I'm gonna create a quick route so
rec and res and we're just gonna say
read us and hello and I'm gonna do this
on the home page and I'm just gonna say
app don't listen and here I'm gonna pass
in the port number like usual so I'm
gonna do 8080 but you can do any port
number you like and here you can also
supply a host name for a docker you need
to put this four zeros just like that
let me get it working and good it's all
set up I believe so I installed Express
now I'm just gonna run this project
regularly without docker and then I'll
show you how we can run this with docker
so Jake all app dot listen yeah I did go
so now I'll just refresh we see hello
cool
so our app is good it's running this is
just you know your generic color world
for express so now I want to run this
with docker so to get this dry docker
what docker is is a bunch of containers
and so we need to tell a docker how to
set up the container so we create what's
called a docker file docket file and
this project and in here we specify how
we want our project to get set up and
now when we create a docker and what
we're doing here is it's gonna create
what's called a docker image and then
from a docker image you can create
multiple containers you can kind of
think of it like in Java you create a
class and then once you create the class
you can create multiple objects very
similar to that so I'm going to go ahead
and stop running that so first thing
here
dr. files are pretty cool you can set a
working directory and we're first going
to say from so what this means is docker
files can inherit basically from other
images so I want to use nodejs so I can
just say note here and I can say latest
if I want and what that means is I'm
gonna be using the latest node in my
container which is what we want next you
need to set a working directory and this
is a working directory inside the app so
I'm gonna say slash app as my working
directory and the next thing we're going
to do is we're gonna copy our code
inside of this app now at first when I
was doing this I was thinking all you
need to do so copies the command you use
dot will have all your files right here
and then the destination you can just
put dot and so dot is relative
directories so dot this is on your
computer so that's these files here and
then we're gonna copy it to slash app
because that's what the working
directory and this is equivalent to
saying these two statements are
equivalent that and this because we set
our working directory here but this is
not optimal and the reason for that is
after we caught me what we're gonna want
to do is run npm install and now if this
is in a production environment you also
want to do production here but where you
won't worry about that so running npm
install to install but you can actually
cache your npm install and that's what
people recommend and the way you do that
is by copying over your package.json
first and then running npm install then
copying everything else and everything
else for us is just the source so I'm
going to say source and then I'm gonna
copy that over here and then also you
can set environment variables so for
example I can say and
and said note in to production if I
wanted to well again or worry about that
for now and then we're just gonna say
command and we're in the same node
source slash index ojs now in our
package JSON usually what people will do
is they will create a start and what
start would do is call node on source
slash index dot JSON a this is how I
have set up my app right here should I
do command NPM start instead but it's
actually better to do notes or slash
index and the reason for that is NPM
start masks some errors sometimes so it
can be harder to debug so it's
recommended to start it up like this so
what we've just described here is how to
set up basically this is how to set up
our container and what our containers
image should be so now what I can do in
docker is I'm in the current folder
where my docker file is right we see
docker file here I can run docker build
and I do dash T and what that does is
you can name it so you can call this
whatever you like
and then you pass the directory where
your docker file is and for us that's
this current directory what this does is
go ahead and build the docker file now
air response from demon cannot locate
dr. o and this should be a lowercase F
here there we go
so don't miss spelt like me doc or file
or case F there so we'll run this again
and what this does is you can notice
it's actually running each command and
it's caching it and this is fine it just
said we didn't see a package lock now if
you're using NPM 5 you can also copy
over the package lock as well okay so
what it did is it just created our image
or a class so now what I can do is I can
do I can create an instance of this
image
an instance of this class and I can say
let's clear this docker run and I need
to tell it which port to run on and so I
can run this command here so I need to
open up port 80 so this can be anything
we want here this is gonna be our
localhost so I could put 30 30 80 81
whatever I want and then the 8080 over
here needs to match what we have in our
source index so we have 8080 here so
that's gonna be matching up and then you
want to put the name of your image I
called my an example Express right no
example nodejs example nodejs
and we'll say docker run and cannot find
module app source way so we did
something wrong let's see did I mess
with the docker file Oh nope we are in
ok copy source there we go
and I need to rebuild it I also want to
show you guys so you guys just noticed I
messed up the path with this I believe
it copied over the source folder I'm
gonna have to do it like that what I
think just the error happened was I
copied over index ijs instead of the
source file - and what I like to do to
verify this is just run an LS in my
docker file and we can actually see what
the contents of the working directory
and we are in and we can even do a
current working directory as well so if
you get an error like this you can debug
your containers like this that's what I
recommend so we can see that I did copy
just index J s so we don't have this
source wrapper like I expected so we
just needed to get no jazz-like
okay so if you have a problem with it
not finding the command that's how I
recommend doing it I forget how to copy
over this entire folder and not just the
contents of the folder it might be like
that or something
but now if we do a build and notice how
we're rebuilding this every time we make
a change here and then I'm gonna come
over here and I'm gonna run it and we
don't see any output and you'll notice
it's hanging my terminal that looks like
it's running it so if I come over here
refresh we see localhost:8080 is running
so it worked now I can change we want to
get rid of this and okay it's hanging in
docker it's not listening to this I'm
gonna control Z it oh wow
controls these not even working that's
interesting so I'm just gonna open up a
new tab jobs you can see PS we can see
docker here we go we see Dockers running
right here I'm just gonna go ahead and
kill that sucker
14:51 I didn't have to kill docker like
that though I don't know why I did
because you can do docker container LSC
which docker see this guys running right
here we can see it and we could have
killed him like that and I'll show you
how to do that in a second anyway so I'm
not sure usually I'm able to just
control see out I don't know what I'm
doing differently this time but what I
wanted to show you guys is we can
actually run this on a different port I
mean I actually run this in the
background using - and eat like so so
this is basically the ID I don't know if
this is the actual ID the pit or this ID
for the container
but now we have it running on 3030
instead of 8080 but notice it's still
grabbing it from the docker container
from 8080 okay so let's come over here
to 3030 and we see hello world still and
if we go back to 8080 will notice it is
not there at all well I thought it
wasn't I'll see what's going on is there
docker container still running okay so
we have two docker containers running
for whatever reason so this one the
status up about a minute ago so we're
gonna copy this container ID and I'm
going to say docker container and gonna
say stop we can pass ID and it should
stop the container I have no idea what's
going on with my docker it's just like
Nala sink to me all of a sudden there we
go
took a second to stop now if we do LS we
can see only one container is running so
here you notice we ran multiple
containers at once from our single image
and we can see 8080 is not running
anymore and you can do 30 30 and so what
you can do is over here I can start
another one on 30 31 consider another
one 32 32 you can just keep creating
instances of your image now which is
really cool so 30 31 32 and I can see
these these images or what's running by
doing docker container LS and I can see
all these guys running here so that's
pretty cool so that's it for hello world
with docker you kind of see the
different ways you can start up your
container and visualize the containers
see it over here and when you want to
stop it like I said you can use this
docker container stop I don't try
control seeing it because that doesn't
work I thought ctrl C worked I feel like
I've used that before so I'm just gonna
come over here and stop my containers
and they do take a second to stop as you
can see but yeah docker is pretty cool
and I'm gonna be doing more videos with
docker in the future doing some more
advanced stuff than just no js' so thank
you guys for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>