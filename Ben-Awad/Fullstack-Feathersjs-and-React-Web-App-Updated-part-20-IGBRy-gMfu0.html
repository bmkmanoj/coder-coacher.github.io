<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Fullstack Feathersjs and React Web App Updated - part 20 | Coder Coacher - Coaching Coders</title><meta content="Fullstack Feathersjs and React Web App Updated - part 20 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Fullstack Feathersjs and React Web App Updated - part 20</b></h2><h5 class="post__date">2017-05-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IGBRy-gMfu0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome back so I noticed
there's actually a lot of problems going
on with the application right now so the
first one is this right up here
basically sagas are not working right
now and I need to fix that so there's
just a few things I forgot to edit while
we were in the sagas the first is to get
rid of that warning in our modules index
you'd wrap this within all and that's
coming from the same place fork is
excuse me
then the second thing is in our sagas
whenever you're doing a saga you don't
need this star thing anymore
ghosts are there ghosts are there good
and same for recipe so you said you
don't know I'm going to need that cool
alright so slaw guys are good now just
wanted to fix that real quick okay so
now I want to try logging in and making
sure that is working so when I was doing
that though I clicked on this log in it
knows hey login page doesn't render but
when i refresh a login page is working
so the history dot push is not working
and with doing some more research I
found out it's actually not going to
work whatsoever programmatic history
like this is a no-go so rip we're gonna
have to do this a totally different way
so they pretty much removed it so we can
just like kill that store and then
create store we're basically going to
have to do some pretty jank stuff now to
get to get the same functionality we
could try doing with the lots of oils we
could try doing with the connecting the
history to the redux how we're doing the
other day with the connected router but
that one looked experimental so I
wouldn't I
really want to get into experimental
stuff so this is what we're gonna do
we're going to use browser history no
history here and then oops and our items
here
history dot push so history dot push
here are actually in a pass get history
in the props here so the way we're going
to do this is I was always to actually
deciding whether I wanted to get history
I want to do a link and let's just do
history so history is going to be passed
to us by a prop so and the way we're
going to get that history prop is get
rid of home so we need in our nav bar Oh
Ian or a nav bar
oh okay so uh for a second I was
thinking this was a route but this is
actually not a route we need history so
we should actually just make these links
okay it's harder to get history here so
the better idea is just to import link
from back router dawn and now we have
blink
oops actually I guess we should put the
link inside here and then to and then we
can grab that and now we can get the
curative on clicks
okay and looks like that needs to be
double quoted area so on click log out
that's fine you can link up here as well
and remove the on click and same here
and then when we do get this working
you'll notice there's one other problem
so kill this on click oh look there's
one more
so slash espies slash recipes slash at
ok cool so now notice how there's this
little divider thing here when i click
on login
oh well note notice how the divider
doesn't go away and we get like that
little error that's because what was it
this the path this is matching on that
route and we have to use the exact
keyword there and what that does is it
says if we're exactly at the slash like
that that's when we match but when i
click login now you notice how there's
not the error in that but you notice how
these now are links could we link them
and they work that one doesn't work well
to fix that one later but i'm just
curious about the functionality one or
do we want notice how there's not like a
button hover anymore because there's no
on click so did we want just like so
like if I put an on click here
I gave it a hover I think excuse me
okay so now if I hover think should I
let cannot be this another link okay see
how it gives it that hover so I kind of
like to hover for now I'm going to leave
it as is um the Keith's hover basically
ft is on click and so we would have to
get history working here which I may
come back and do for now we'll keep it
as link but I like the on click better
so I may come back and fix that but ok
cool
we're able to now click on this and log
in so actually first we should do sign
up because we need a user uh any cracks
you create a user here so two happens so
Bob Bob and looks like we crash
everything
oh good browser history doesn't exist
okay so that was so that was the other
thing guys
browser history no longer exists so
we're gonna after oh where I was
yielding this I'll deal that but excuse
me sorry I'm sorry I'm seizing so much
the browser history here no longer
exists so what we're going to have to do
is not just for this page though all the
users here as well and that's actually
the one that we're talking about so I'm
just going to comment that out so we're
really going to have to do is this
payload object I'm going to put like a
callback or pass a callback in and then
we can actually just call it here
so so payload I'm going to actually
expand and maybe I'll do not read is
called redirect so a couple create a
function we'll pass it a function called
redirect and then data and then data is
what will pass into sign-up and then
when we're done here
we will redirect okay so now this try
sign up what we call that we will do and
that's going to be in our login page is
data is going to be this but now we also
need a redirect which is going to be a
function and here we're going to your
history dot push the push date maybe it
is but anyway we're going to get this
history actually from the props so we're
going to this stop props that I hit a
straight-out push and we're going to go
to wherever we were supposed to go login
so we'll do that so but how do we
actually add history to the props here
because that's what we like the other
thing is this could be a pure function
again so I need to come change that in a
second maybe at the end I'll come back
and just change everything to pure
function instead of doing them
in-between not sure I'll maybe I'll
change my mind so okay so we have how do
we get this history to the props we come
over here to routes what we can actually
do as instead of doing a component here
what we can do is we can say render and
then here we get some props and the
props here are actually one of the props
is history so what we can do is we can
actually just render this login page
here and then what we can pass
and here are the props and one of the
props that we pass is actually the
history so that allows us to push now
when I sign up
oh sorry we're not doing this for login
well we'll need this for login as well
so I'll keep it there but this was
actually for the sign up page that I was
talking about sorry
so same exact logic here for the sign up
page we would like to be able to use the
history so all right now and we have an
air first pair for create must be an
object okay so let's see what the
problem is could be data console out log
data yep it's an empty object so
redirecting data redirect try sign up ah
I'm a noob I'm doing this login my bad
I mean we're gonna have to do this for
login as well so I'll keep this here I'm
just a little scrub okay we'll go to
home which is just that we login alright
we're doing this on signup
my apologies guys redirect this whole
time I was doing on login but I really
should be on the other one okay
all right and then again we're just
literally doing the same thing here so
copy it put it over here
this stop props history history is
missing improv validation push that's
fine and let's go to the login page now
we'll come back here and I can sign up
and awesome we create a user and look it
actually redirect us to login so now
let's try logging in and interesting it
just put it up there so let's go see
what tech our login page is doing here
prevent default is what we're doing and
that definitely did not prevent the
default what boots put that at the top
doesn't matter but that I mean that
should have been problem I usually will
keep it down here we don't even need to
OH
next this is next
so actually do here is we can actually
have a little pair logic here so we can
do if this stuff props thought location
oh actually this is super simple will do
next
mmm for a second I thought would be
simple what I have we can redirect this
so okay so what I want to do is I want
to do slash here or we want to grab what
the next is from oh okay Const
next is equal to this type Rob stop
location dot query dot next or empty so
we don't need to pass that in okay so if
next else okay so if there's not a next
there is a next will go to next alright
let's try this again
authentication not found okay
interesting so the feathers if you earn
aware feathers just actually did a big
overhaul of the big new version change
and a bunch of new features came in and
so everything because has kind of
changed so one of the things is how you
authenticate so our thoughts indication
is currently not going to work because
we're at the most upgraded client so
what I think I'll do is stop here in the
next video we will we'll start upgrading
the back end and get that up to par and
then that way you can continue upgrading
the frog debt
so in the next video that's all go ahead
and do we will get our new feather
server up and running so that way we can
authenticate so that's it for this video
I'll see you guys then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>