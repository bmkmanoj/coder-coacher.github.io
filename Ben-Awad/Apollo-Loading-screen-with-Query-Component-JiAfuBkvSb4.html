<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Apollo Loading screen with Query Component | Coder Coacher - Coaching Coders</title><meta content="Apollo Loading screen with Query Component - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Apollo Loading screen with Query Component</b></h2><h5 class="post__date">2018-04-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JiAfuBkvSb4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so in yesterday's video I
showed you how to add a little spinner
or loading screen in front of your
queries and it looked like this so you
would add a component loader or some
kind of higher-order component that
would handle it for you and you would
put it after your graph QL component or
higher component and you just pass in
the loading of how you get it from the
props and then it will display a spinner
like I have right here and then we can
see we don't put any loading logic in
our colors but this is with higher-order
components the new rendered prop which
looks like this you'll see this is how I
would normally do it I just would check
if loading and then I'd return null for
example or I return the items once
they've loaded in so I'm going to show
you how you can do the same thing that
we did yesterday with this rendered prop
component or this query component right
here
so this works just fine we can see if i
refresh it'll wait and then once it's
finished loading this data will actually
have the data we want the colors and we
can render them here so next let's take
a look at how you might simplify this so
here is what I call I called it a null
query so I'll show you how this is
created but this what this allow you to
do is notice I don't have to add any
loading logic whatsoever here all I do
is I grab the data and then I display
the data based on what I wanted to
display so let's look at how null query
works this is no query so I have a query
component and this is coming from react
Apollo so you'll notice I'm basically
just taking whatever props that are
given to me and then get passing them
right to the query and then after that
I'm just checking if or loading and if
we're loading I return null otherwise we
were just returned
the props of the child so this might be
a little bit weird if you haven't seen
this before but this is how rendered
props work on your cranium component so
what this is is this is how you have
over here this little art 6 this little
function right so this component returns
inside of it the children are a function
so the parameters here is what I pass
right here so other props is it let's
give into that component over there and
so what is other props well whatever
they queried it's gonna have their data
inside of that so that's why I'm just
over here able to say grab my data get
the colors and I don't worry about any
type of loading so my index touch is I
can render color 6 and we'll notice just
a blank and the stuff will show up now
I'm sure you kind of get the idea of how
you might convert this to using a
spinner for or pretty much anything else
right instead of a returning null you'd
return the component you would want so
here is a just component query is what I
called it and it's the exact same thing
except you'll notice I am accepting an
extra pop up here called loading render
and then I'm returning loading render so
there's lots of different ways you could
do this you could hard code the loading
component you want but here I'm
basically allowing the user to pass an a
function that returns what the loading
screen will be and again I'm just
passing any of the props down so all the
same props are supported on this query
component so that's what color's 7 is
doing and we can take a look at this so
you'll notice on my component query I am
now passing a new prop called loading
render which is a function and it just
returns a spinner so that is what's
going to display and the loading
then we have a query here as you would
any other use the regular query
component and then here we don't worry
about the loading we just display it
okay so let's take a look at how this
works
so we'll de color seven and we can see a
little olive spinner here and then it
shows up so we could also handle for
example the null case in our component
query too if you want
so we can make this basically cover all
the cases you don't really need two
components like I currently have so I
could check if they pass in a loading
render if they do I call the function
otherwise I return null so now this
component that I have here basically
covers all of our bases so in color 7 if
I wanted to I can get rid of the loading
component all together and our loading
render and you'll notice that just shows
blank and then displays this otherwise
it displays whatever you want here and
it doesn't just have to be a spinner
this can literally be any component you
want to so I could have a div that says
loading or I might show an image
whatever you want but it's super
versatile so now every single query I
used now I can pass in this prop or
leave it blank if I want to and I have a
little thing that'll show up while it's
loading and then I don't have to worry
about right in the same logic every time
in my component so I hope that gives you
an idea how you could do this with
rendered props so really it just comes
up to what you prefer and you might end
up using both in your project if you
have some places where you use the query
and you might use something like this if
you're going to use the query component
other times you won't use the
higher-order component and you might use
both but both work and that's when a lot
of times you can get the same
functionality with a higher-order
component as you do with a rendered prop
they're both very similar and can do
very similar things but some cases they
just change up a little bit and you
notice in this case the code looks quite
a bit different to like get this to work
now
we're not using any library like
recompose to do this check so this might
make this might be there might be less
magic here because you can see exactly
what's going on
whereas recompose you know is doing some
stuff under the hood for you that's it
for this video guys thanks for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>