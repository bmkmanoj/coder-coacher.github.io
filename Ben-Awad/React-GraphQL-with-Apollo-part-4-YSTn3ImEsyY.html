<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React GraphQL with Apollo part 4 | Coder Coacher - Coaching Coders</title><meta content="React GraphQL with Apollo part 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React GraphQL with Apollo part 4</b></h2><h5 class="post__date">2017-02-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YSTn3ImEsyY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome back in this
video we're gonna be working on hooking
up these guys to buttons so we're
actually gonna be doing this in the home
component so top up into there and start
adding some things so for this component
we're gonna be using grid and button
from semantic UI and then we're just
gonna import our graph QL things same as
in main so react Apollo and import gql
from graph QL attack alright and again
we're gonna have to export default below
cuz we're gonna be adding some more
we're actually gonna be adding some
queries later on that are gonna need
that so let's work on that render
function for now let's just add two
buttons so we're gonna create a grid and
we'll have a critter row close in a row
we'll have to call X yeah let's do two
columns grid column width is equal to
eight
oh and I did this wrong so we're just
gonna make to make two columns and our
first one we're gonna put one button so
button we're gonna make it fluid wine on
click in a second I first want to just
make sure this renders okay
and looks semi nice so create taco so
I'm gonna create another button here and
our second grid we're gonna me create
secret burrito and let's just come back
over here and see unexpected token with
oh my bad
alright alright so we have our two
buttons and they look like they're in
the right place so sorry if I if I
change stuff real quick I just removed
with the air that I was having as I had
with here and that was just a syntax
error you can't have within a closing
tag it needs to be up here okay
so let's create two on click handlers so
this dot handle taco button and on it's
giving on click for this guy as well
this dot handle secret burrito button oh
man that's a long name okay and let's
create them up here so handle taco
button and well also in here for now
we'll just call this dot props dot
create talking okay
and down here handle secret burrito
we'll just call that prop we stop crops
touch create secret for you so these are
the two functions that we talked about
in the last video that we created and
I'm just gonna in the constructor props
this is just one way to bind it because
we're using the this keyword and these
two functions we just need to bind it
here this handle taco button this but a
little taco button without buying to
this and this handle secret burrito is
equal to this tie handle robot find this
so we've binded those and now when we
click the buttons they should run that
code but how do we actually know a taco
is added how do we know it successfully
worked well we should see something in
the console and we should also see it in
our server so let's first create a query
to get all tacos and as you can see
there's only one talk right now
from when we added earlier if we click
create taco we can see we get an object
back here
data create taco and we can see it has
this ID wji so if we come back over here
we run this query we can see wji and we
see our taco in here now if we do create
secret taco that will not work because
we have no authentication yet so I'm not
gonna bother pushing this button yet
because we we haven't logged in yet so
in future videos we'll work on the log
again but I want for now I want to work
on displaying the create tacos here I
want to see some tacos here so notice
how we saw the tacos is we made a query
here right and we were able to see the
tacos so we're gonna do that exact that
exact same thing in our code so what
we're gonna do is we're gonna copy this
back over here and we're gonna create a
query so const get tacos query is equal
to jaql paste that in there we're also
going to be making a get secret taco
query but we'll worry about that later
Const get tacos is equal to graph QL get
tacos query
and props data and tacos data now this
is slightly different than how the
mutations work right here
whatever you see how we one click this
button it gives us this object here this
object this data object here is gonna be
passed back to that function so the data
object is coming right here and then
we're binding this to the props so as
we'll see soon when we make when we make
this query what will happen is it'll get
the tacos which would return all this
data and then we store that in a prop
called tacos so it gets us JSON from the
server and saves it in a prop called
tacos and come back to the bottom here
compose get tacos we only have one
function right now so we can just wrap
it but we're gonna be adding some later
so I'm going to leave it like that okay
so let's come back over here I'm just
gonna click react right here and we
should see oh and there's one other
thing I should mention to you guys which
you're about to find out if we click on
home we see tacos so notice how we
didn't find look all like get query
happens whenever home loads so we loaded
this page and so it calls that query and
it gets the tacos if I click on tacos
here that's the property called it and I
click on all tacos the variables no just
all tacos you can see it gives me a list
of the tacos so now that is something we
can actually put
right here in display so we come back up
here we can actually do that so I say
Const tacos equal and we're gonna grab
that from the props let talk a list and
we're gonna do it like this
tacos talk all tacos because for right
when the component loads this query is
going to be take a second to load so
when the component is loading it makes
this query but the render function runs
first so all talk goes is actually null
or undefined and then it fills it in
later so we actually need to check and
we say talk a list is equal to talk
those dot all tacos so once all tacos
exist we then say talk the list is equal
to all tacos but if Taco list doesn't
exist yet we just show an empty array
and that's fine and then down here
underneath our tacos button we can just
have an h3 tag names three tag I say
talk a list dot link and that'll show
the length of how many tacos we have and
then we can just do a pre tag and then
here we'll put in our JSON so json dot
stringify taco list and then we're gonna
pass in null and then - this just makes
it spaced nicely so we can see it and
cool take a look at this we see all our
things here all our tacos but look when
I click create taco nothing happens I
have to actually refresh the page and
redo the query so how do i regrab
queries
well there's this thing in the object
that we put in our props so if I go here
go to home look at tacos it actually has
a refetch function and the refetch
function actually updates the data for
us so what we can do is right here and
the handle tacos button is after we
create a taco you can say this stop
props tacos refetch now what's really
cool about graph QL is it caches the
data so this will probably this will be
one network call it'll create the taco
and then it knows it create another taco
so when it goes to refetch it just looks
at the cache and it speeds up quite
nicely so if you refresh mhm
great taco you notice I can click as
many times as I want as I click it it
adds more tacos and I can see them
expanding here so that's very cool we're
making this query we're creating the
taco we're doing the mutation and then
we're getting we're updating our query
in the next video we'll work on creating
the log in and logging in with graph QL
and then creating secure burritos after
that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>