<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Fullstack Feathersjs and React Web App Updated - part 19 | Coder Coacher - Coaching Coders</title><meta content="Fullstack Feathersjs and React Web App Updated - part 19 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Fullstack Feathersjs and React Web App Updated - part 19</b></h2><h5 class="post__date">2017-05-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DVjMexJPVXw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back guys I figured out what was
wrong with the router we were doing a
couple things wrong the first is require
authentication this guy was causing a
problem we going to off here
I'm not exporting default and we're
going to be changing this later don't
worry about that
but for now that should no longer cause
a problem we could uncomment this
because I know what the problem is now
we look at just the documentation of
react router they are using a new
library called reactor 'adam they
basically split things up a little bit
so we're going to copy that and add that
to our project and then we're also
history is in a separate package as well
so we're going to add both of those and
then if we want to like change pages now
what we're going to be doing is we're
going to create history like this and
then we're going to do is we add the
history to the router like that and then
we push history like this instead of
using browser history and notice how
this is a browser router now so so react
router Daum now has a route and a
browser router so I'll have my browser
router here and we no longer need that
react Redux thing and we can still
create history in this store here so
we're just going to import to create
history and just make sure I have this
right and copy that so we import it and
then we can put at the bottom and then
we just create a history export taunt
history equal to and then we have to
actually create it and now here we
import history awesome
now if we come back to the application
and looking console up router may only
have one child so this is something
we'll add later but we're basically
going to copy the main and put it here
that way everything looks nice and not
sure what happened there
reload I'm noting a div around
everything for now and looks like we are
out of errors and cool gray we'll see it
looks like it rendered the homepage I
think um all those enroll so let's test
this so let's just put a h1 that says
hello because I can't tell if just like
there's a problem with the recipe list
or not actually rendering home right now
alright cool we are rendering home that
looks nice and actually before we
continue we can actually basically do
the same thing that main does so we can
copy this and put that here so we're
going to have a container around
everything instead of this div and we
have a header and then container and
then the navbar
and we're not going to be passing any
props to it at least not right now
so let's import navbar and then link
header link is coming from react router
and you can get from react router down
now some that I'll link cool now header
in container those are coming from
semantic UI copy paste those over as
well alright now we can refresh we
should see stuff here the navbar might
be a little messed up so up to see how
that looks
looks like via the product console okay
so I'm assuming the navbar as a problem
are using has own so browser history is
something that's no longer being used so
instead you just get history from the
store which is going to be up and the
store now we just do history so find and
replace history or browser history with
history okay so we're expecting the user
to be here because we're using user data
we're also expecting to be have access
to logout so notice we really need to be
connected to it looks like we need to be
connected to what so called the Redux
store so we can get all this information
also looks like there's a problem are we
are we assuming oh I guess I guess
because user is not even defined here
okay so how we're going to do that is
actually very similar to how we're doing
here so new folder
bar we're going to put a nav bar inside
of nav bar and rename it to view and
then we'll can copy index put index into
here now for example we can get logout
and think that was only one it needed
I'll double check and then here it
needed the user so if I view the recipe
here it's the user ok email and actually
has own property data that's not really
a thing so doc values so basically want
to check if the current if there is a
current user right I'm assuming that's
what it's doing yep so we're checking if
there if there is a current user one way
to do that is to check how many values
that if it's check if it's an empty
object so you can do object dot values
dot length so if it's an empty object we
noticed evaluate to zero and then then
we'll show a logged out view so it looks
like log outs the only function we
needed don't need that anymore awesome
now we can put down the props ok so now
now bars connected to redux state and
now can get all this information that it
needs so let's refresh the page cannot
read undefined property so it looks like
the user is undefined even though we're
passing in the user here so it
console.log this drops so let's just see
what look the props look like um and
let's export Const sorry not export cons
export default up here and this is
actually another class that can be a
peer function so I might change that in
a second before I figure out why the
props are getting messed up okay do you
even print this oh it's not even getting
a problem there where am i calling has
owned property way cannot read property
has own probably undefined inside of nav
bar it says and then has own I'm not
even doing it here that's super weird
and said now but oh you know what you
know what's happening guys because I've
changed this now we have to reset the
server so that is this happens where it
doesn't read this thing it doesn't
because I change the folder that I
changes to a folder and then we're
grabbing that sometimes it gets messed
up because it used to be a file now it's
a folder so I think that was the problem
yes yes okay so now we can't find store
so you go up one up we should be going
up to now
okay cool now we see this nice
navigation bar and the first thing I do
is just see if it'll take us to a
sign-up page yes it does awesome
I'm going to take us to login page up
all right so it will take us to all the
pages that's good so now we just work on
each page being rendered so the first
one we'll work on is the home page so on
the home page we should see seeing
recipes here and we're passing this top
props and that's not what I really want
to be doing I want to say recipe is
equal to this top props
also I want to move nav bar to become a
pure function which I'll change after I
do this so what I like is using the dev
tool here and I can just see if it's
getting the props it should be so the
this route here home route it's just
getting an empty array of recipes and oh
that's because the server is on so that
would be the back end here yep
I take a yarned everything in your NPM
start okay cool
how's the server running I can refresh
this now so I guess we should get a
dressed few working and because this it
looks like this could be working
correctly we just actually don't have
any recipes but actually I'll do next is
I want to convert this to a peer
function so unless you really need it
any of the components you should be
using pure functions so that's what I'm
going to be doing so this will now be
that
and by any of the functions I mean like
Capone will amount or maybe the
constructor is something like that and
that's we don't actually need any of
that
so the props that we'll be using is
we're going to be need access to the
user and really what we need access to
yep actually is just the user and then
logout I believe so will be some other
functions that we need which we can just
put up here this will be Const logged in
do an arrow function here and put that
there look at tab everything over all
right you can do the same thing for
logged out Const logged out
all right and notice how this one
doesn't use any of this but this one
needs to have the user and the end
logout so here we'll do email and log
out so we'll just do email log out now
down here what we really want to do is
now we can actually just say so we can
check the length of the user and if it
is we do logged in logged in needs both
the user email and was the other thing
log out and log out doesn't need
anything and give it a give of that so
you can notice how when comparing this
to a peer function we're actually um
taking simplifying it a lot okay oh and
we don't need this component so let's
make sure it renders the same and looks
good
take still takes us to sign up login you
can notice it's changing up there okay
that's good the navbar is good I think
the next thing we want to do is get the
auth thing working because we really
need the auth thing to work to be able
to then make sure user is logged in and
then we can start creating recipes to
make sure that functionality is working
so we'll be messing with this in the
next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>