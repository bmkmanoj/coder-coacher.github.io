<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React GraphQL with Apollo part 1 | Coder Coacher - Coaching Coders</title><meta content="React GraphQL with Apollo part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React GraphQL with Apollo part 1</b></h2><h5 class="post__date">2017-02-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XBd6b_UlEDI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys in this video I'm going
to show you how to set up the project
now the first thing I'm going to do is
set up a back-end that has a graph QL
server basically set up with it now I've
done a project before sing up graph QL
server he's going to look at that I'll
put a link in description below and for
now we're just going to clone that
project and use it for this one
if you have your own graph QL server
you'd like to use that works too if not
go ahead and clone it I'll put this link
in the description below
I already cloned it after you clone it
you're just going to CD and do it so CD
and then you're going to just say yarn
to install the dependencies and just hit
enter I reinstall all the dependencies
selector on that you can also do NPM
install but yarn is faster if you don't
have yarn you can install it like this
it just makes downloading things a lot
faster so I switched using yarn down to
NPM so make sure you have that installed
and then once you install the
dependencies so you can just do NPM
start and now our server is good to go
and we'll just leave this running in the
background while we work on the front
end okay so now switch to a different
tab on your terminal or here and I want
to create in the different folder we're
going to start working on the front end
so I'm going to clone based off of my
react template so right here and we're
going to call my front end you can call
it whatever you like and then I reclone
line so after that you're going to CD
into that folder and then again we need
to install some dependencies so you need
to add Apollo client Dracul tag and
react Apollo
these are the graph QL libraries that
we're going to be using and then after
that i readed them so i'm not sure on
this just type yarn hit enter and it'll
install all the dependencies for you so
now if you do I'm just going to open
this in our tab if you can PM start
you should pop up and it should look
like this should see little title home
stuff working correctly if you got
everything
since he's installed correctly okay so
now let's start setting it up the
project so if you just look what's
inside we're going to go into the source
folder and then you'll see a folder
called sagas for this we're not going to
need that so if you want to just remove
that folder you can and the first thing
we're going to work on is store that jf
so as you can see here we have a couple
things already we're just going to add a
few basically going to swap you can see
we have Redux aa guy here we're going to
swap that out for Apollo things so we're
going to use the compose function to
also set up the Redux dev tools because
I just like to use those in my project
and I'll show you what this does too
okay so we're going to keep everything
here we're going to kill that so you can
create get rid of that we're going to
we're not using sagas whatsoever and
we're going to import route reducer and
client from reducers index and this is
what we're going to be creating next so
here it of that their default state is
fine our store now is going to be
slightly different so let's move this
down so apply middleware we're going to
compose two things together compose
we're going to apply middleware and
we're going to do client dot middleware
and this client is the Apollo client and
this is what's connecting to the graph
QL server then after that we're just
going to do a window dev tools extension
it's exist no doubt the tools extension
otherwise 2f okay so right here this lad
the allows us to use the Redux dev tools
which I enjoy using so I like to add it
to my projects now and then we're just
adding the middleware to the store now
we can kill a saga here and then we
don't really this is basically a
one-page project we don't need to sync
history with the store but we can for
now and we can just say default history
I actually don't want to export yeah why
don't we export on export both of these
because I also want the history ok so
we're going to export both the store and
the history as regular exports ok so now
our store is set up next thing that
we're going to do is create this client
guy right here so if you go into
reducers and an index reducer is what
we're going to play with next okay so we
have combined reducers up here every
reducers that's all going to stay the
same and we're going to import the
Apollo client we're also going to import
network interface and this is what's
going to be connecting to our server so
const network interface is equal to
create network interface and then here
we're going to play yuri and we're going
to put a URL to our server
so for us we go to localhost 3030 / graf
iql we can see that we have it running
of the server if we get rid of the I
this is our end point to actually send
draft ql messages to it we can post here
as it says it only accept post requests
so we can start posting to it so the URL
we're going to use so copy that paste it
here so it will co-star you 30 slash
graph key L and that's the endpoint that
we're going to be making basically API
requests with graph QL queries and
things next we're going to say network
that interface that use so this is an
extra thing that I'm adding because I'm
doing authentication with my project so
I need to pass in basically a token so
apply middleware so I know if the user
is authenticated or not next and we can
do this by adding some middleware so the
first thing we're going to do is and we
can do comma because it's just an object
okay and next we're going to just say if
rect option headers if it doesn't exist
then we're going to add an empty object
because we need to add something to the
headers rect options oops
recta options the header is dot
authorization is equal to local storage
dot get item and this is something we're
going to like once the user logs in and
we get a token we're going to save in
local storage so that way this can
access it so we're going to get the
token if it exists if not we're going to
pass an empty string and they're not
indicated if there is a token in the
local storage we're going to get it and
put it in this header and we're going to
use that to authenticate on our server
and then we're going to call next okay
so that gets that going
and then export Const client is equal to
new Apollo client and we can pass in our
network in our face that we just created
wonderful and now for a reducer I'm just
going to drop this down to in your line
we got routing Apollo client dot reducer
and that's it for now and also our other
notice if you're newer to react in our
story here
notice how we exported both of these
with curly braces so that's why we're
now exporting two things so I don't want
to export default in my index so on both
my client and my reducer here so what we
created right here is then being passed
here and we can apply some middleware
and get that working all right so this
is a good set up for our project let's
see it
I think Watson errors right now yep the
props door is marked as required and
provide with values undefined which
we'll be fixing in the next video we
have our store and a reducer setup we'll
be working on the main core of our app
next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>