<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Variable Mutations in React GraphQL Starter Kit | Coder Coacher - Coaching Coders</title><meta content="Variable Mutations in React GraphQL Starter Kit - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Variable Mutations in React GraphQL Starter Kit</b></h2><h5 class="post__date">2017-06-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oE8fQeWTFEQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys so as promised I'm going
to show you how to do mutations with
variable parameters so we were hard
coding the user remember you're creating
users in a previous tutorial and no
one's actually going to do that for most
mutations sub mutations maybe most time
we're going to add variables so in this
video I'm going to show you how to
actually put in variables and how all
that stuff is going to work so if you
don't know what any of this is
Appling contrition below basically we
have a graph QL server setup and a react
front end that is communicating with it
I have both up and running two servers
I'll show you terminal real quick hop
over twice I got my server running got
my for the back for the graphical server
then right here I have the react
front-end which is running on a starter
kit called react QL all right it's going
to be details of this thing so to do we
have to change kind of what our query is
right here our mutation excuse me
they're going to be so the first thing
is we're as creative variable this
variable is going to be username and we
can set equal to I don't know Bob
whatever whatever you want to pop on I
forget I always forget how to do
variable down here maybe I just get rid
of this I sworn it was a JSON style so
just okay it doesn't like it hasn't been
used okay then up here you put your
crammed here and we couldn't user name
this is the expected variable that
you're going to get and then you put the
type of it so in our case it's going to
be a string and it can't be null and
then just pass it in here
so this mutation expects to get a
variable called username passes and here
we'll pass it in a different place
it wasn't provided not sure what Oh
better okay well actually okay cool
I was thinking you had to put dollar
sign here cuz the dollar sign there but
I forget so that's how that's working
passes the variable in and we just do
like some type checking there so we're
going to copy this and we're going to
actually replace what we have here with
that so this is the mutation and then
create user mutation so we're going to
kill that and now this is what it cannot
look like and now we have to change some
stuff over here or actually change this
up a little bit now we actually have to
be able to input what we want our user
to be so I create a new class called
create user and those we're going to
extend react component and this we're
going to have a state and our state is
going to be username and it's going to
start as an empty string and then we
have a render function and in our render
function we ran out button and it's
going to be this stop props foo crops on
mutate now and see how we're just
refactoring this if you can tell luke's
we're going to basically where now we're
going to have a button and a field input
field so now we're going to put graph QL
create user here and we hear that and so
down here we're going to do create user
whoops slag undo area create user now
create user class we're going to take
the crash QL we want booze mutation we
want to run we're going to keep track
whatever they input here we have to wrap
everything in a div and we're not
returning anything in this right now so
it's not even doing proper react so
let's change that put stuff and let's
actually return this JSX
cool and now that should render maybe
let's see what our problems are
expression Oh should not have that maybe
it doesn't like my state maybe direct
the word static I forget if this is this
doesn't work what I'll do is I will I
forget if you put static or if you just
put like that looks like I might put the
word static I'll just put in a
constructor cool so input value is equal
to this dot username and then and on
change now if you're not if you're not
sure what I'm doing right now this is
just classic react for when you're
taking just like keeping track of the
value that they're inputting through an
input field
so stop target dot value this is the
value that they're inserting so we're
gonna have to do this dot set state and
then username is equal to that value and
who is not how syntax works there we go
and wrap everything and let's drop these
guys getting lines so we can actually
see what's going on that looks good
so whenever someone types in this input
field where you get the value which is
this and then we set this value here to
whatever is in the input field so our
username is always whatever they have
typed in here
now whenever they click on this button
we would like to pass the username in
and mutate create the user so what we do
is we can pass in a little object here
if we pass in an object with a property
variable and actually I think it's
variables and then inside here we pass
in the username variable because that's
what we're expecting and then we get
that variable from this top state top
user name because that's the value now
we're getting red lines div has no
corresponding closing okay I think I've
I think we have some syntax here I have
a closing div now and it doesn't
recognize it input oh I don't have a
closing input I know it doesn't like
that okay cool so I was just waiting
usually my editor doesn't like reformat
everything until it's correct syntax so
I know it's correct when it does that
okay I'm thinking this looks pretty good
doesn't like mutate right now because
they don't have an prompt validation and
let's try this out and again it should
work we have a semicolon right there
just move that you should see that go
away in a second awesome so now let's
create table 99 nine or whatever create
and let's go to our Kampala see if
there's any errors there wasn't now if i
refresh we see Bob 9ni we could create
Bob one two three you can create
whatever user you want now
so the cool thing about graph QL because
you can pass in all your variables when
you mutate just like this so we're
actually getting this from the state but
you could also got this from crops you
know whatever scope this has right here
you could grab so that is it for this
video we set up variables so now you can
pass in variables you want to the
mutations that you create
so if you found this video helpful I
recommend subscribing because there's
gonna be more graphical videos in the
future I think in the next video what
I'm going to show you guys is how to
actually get it to pop up here right
away
so for example you saw me refresh the
page every time I want the new user but
when I type Bob whatever whatever I want
I'd like my username to just pop up here
automatically right there's a few ways
we're going to do this I'm going to be
showing you how to set it up with just
some optimistic UI and so it pops up
right away it's some pretty cool stuff
and that's what's coming up in the
future so subscribe so you get a
notification when that comes out so I'll
see you guys in that next video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>