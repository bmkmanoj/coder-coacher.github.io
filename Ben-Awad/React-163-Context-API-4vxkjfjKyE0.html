<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React 16.3 Context API | Coder Coacher - Coaching Coders</title><meta content="React 16.3 Context API - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React 16.3 Context API</b></h2><h5 class="post__date">2018-04-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4vxkjfjKyE0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I wanted to take a look at the
create context function this is new and
react 16.3 and it's a new way to do
context so I have a little example right
here that's gonna show you how it's
working and then we're gonna take a look
at a few of the things that can be a
little bit tricky so first off I have
made a separate file called count
context where I am just calling a react
create context and you can actually pass
in as parameters what you want the
default value to be so right now I have
no default value but if I wanted to I
could say Bob if I wanted to be a string
I give it a number give an object
whatever I want
I could set a default value there so
then in my index J s I am importing the
count context and this is basically the
entry point to my application so here I
am wrapping my entire project in this
thing called count context dot provider
and so what this does is now anywhere my
application anywhere between these two
providers I can then access the value of
the provider no matter how deep in the
tree structure or how many how far away
it is so this is kind of an alternative
to like just passing the props so I have
like container one here and container
two I'm not passing it any props but I
could pass it is for example the count
if I wanted to but this allow you to if
I have a child node or child component
that's really far away I don't have to
keep passing the props down okay so what
is this example right now so I have some
state here in my application I have text
for my input and account what you see
right here so I have two functions
increment to increase the count and then
on change which is handling when I type
so here you'll notice I am passing in
the value of count in the value of
Kermit or the function increment so now
anywhere in this application I can get
what the current count is or I can call
increment to increase the count so I can
call from any child I can call the
increment function which will update the
state so now I'm also rendering here in
input and this is just a regular input
there's nothing special about it we'll
get to what why I have that here and a
little bit displaying the count which is
right here and then I have two things
container one container to container one
is this increment button container two
is this thing right here so let's look
at container one real quick so the
purpose of this is to just show you
container one is just a div and then we
have count button at the very bottom and
see how I'm able to access the increment
function two components down right so
this is not directly rendered inside of
index it's rendered in container one but
I can import the count context and
notice how I have basically a central
count context which I import from both
and then I say count contacts stock
consumer so instead of provider so this
is how you access it and this is a
rendered prop where we get a function
here and the parameter is the value of
the provider
so I'm destructuring it to just get the
increment but you could just have a
variable there and access it and then
you can see I'm just rendering a button
that has increment so now if I were to
click about an increment you'll notice
it will increment the counter right here
it also increments the counter there
because if we look at container two I'm
rendering a count value and count value
is getting the value of count using the
same method the consumer so these are
two components and other sides basically
they're not close together all are both
being able to access the count context
and I mean the value of count and
displaying it now I'm also console
logging right here so we can see
whenever this function is being rendered
okay so that's a basic idea of how
context works I kind of want to go into
some things that might cause problem
because a lot of people are now are
jumping to remove redux or mod X in
their application to use this instead
and I like the idea of that too in
places where I'm using graph QL heavily
and I don't need Redux a lot or I don't
need mopix a lot I don't have to install
another library I can just use context
but the thing about it is redux and my
bucks are optimized to not rerender or
at least only render when they need to
or rerender when they need to whereas
you can get into some problems with
account or with the context if you're
not careful so take a look how I set
this up so I'm actually rerender
encountered one and count container two
because their regular components every
single time I update the state so if we
look at the console every time I
increment here you'll notice container 1
and container 2 are being rendered every
single time so what's happening is it
just causes a chain reaction so it's
rerender and then a tree rendering down
and count button and so on so I'm going
to change these to pure components now
and that will solve at least these guys
rerender but if you're just using for
example local state you can easily have
some components in here that are not
pure functions or pure components what
you have to be careful about because
then they're gonna be rear end during
every single time you update the state
or in this case I'm updating the context
really just my count value but because
it's in local state it rear Enders
everything
so adding that though that will solve
that next problem but notice how a count
value well is rendering still which is
completely fine right because we're
incrementing but there's a particular
caveat that they mentioned in the
documentation for this that I thought
was quite interesting so it says do not
do it like this pass an object in as the
value because it'll cause unnecessary
rear Enders and that's exactly what I'm
doing right here this was basically just
my initial gut instinct to code it like
this and it's bad and let me show you
why it's bad so I'm typing here right
and this has no effect or should have no
effect on the context value and it
doesn't notice how count is the same
increment is the same nothing has
changes but I'm rerender Ingush
component because I'm calling on change
and on change call set State so what's
happening is because I'm passing in a
new object its rear end during count
value because it's gonna be a new object
every time which is kind of interesting
I was thinking about how I would get
around this how would I be able to pass
an object in like this that also
includes a function like this because it
makes sense to just pass in this set
state or this thought state if the value
is you know an object that has just
values in it like count or whatnot so I
was wondering if I should now keep this
function in the state as well to avoid
rear Enders so maybe something like this
where I have my constructor
and of course we'll say super and now
I'm gonna create my state in here and
we're gonna say this dot state but now
instead of count like this maybe I say
context state and then I put inside of
there my count and then also increment
which is equal to this increment and I
don't know if this actually even works
we can try right now or if this is a
good way to do it
but I would want to say now context
state and I'm gonna be updating the
count and I'm gonna keep dot dot dot
sorry keeps jumping to the bottom for
some reason I guess it needs to have my
text there when typing so this dog state
contact state okay so let's look at this
so now every time I increment I am
updating the contact state
I'm keeping the contact state that was
there before and adding ink or incurring
the count now I'm spreading this
afterwards which is bad I should have
that at the beginning okay and then now
instead of this dot state dot count
I'm gonna say this thought state context
state and then instead of account here
I'll say context state count as well so
now I'm gonna try incrementing okay that
did not work because this needs to be
context state count as well and I'll and
current and okay so it seems to be
incrementing fine but the real test now
is clear that so it's rear-end during
which it should be because count is
increasing but now if I start typing
notice how it is not rerender it worked
exactly how I wanted it to because it
really makes no sense why count value
all the way down here would rerender if
we're just making local changes here so
these are some things to keep in mind
when using the context you can easily
add in extra renders which can be
damaging and really slow down your
application if you're using redux or mod
X before you might notice performance
hit when switching to this if you're not
careful so I guess how you want to do it
now is the story here like context state
in the state and then also even your
functions like this so yes this is just
some things I was trying out with
context but all this stuff is on code
sandbox if you want to come check it out
let me know what you guys think of the
context API or if you had trouble with
it or what your thoughts are I think
it's pretty neat but as I said it's
getting kind of mess you up sometimes so
I might still just use Redux or mob X
when I need it but that's it for this
video guys thanks for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>