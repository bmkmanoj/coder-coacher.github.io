<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native Tutorial - Silent Auction App Part 16 | Coder Coacher - Coaching Coders</title><meta content="React Native Tutorial - Silent Auction App Part 16 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native Tutorial - Silent Auction App Part 16</b></h2><h5 class="post__date">2017-05-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UzvBjwfWC84" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome back this video
we're going to be working on this view
some more
right now we have seller and top better
blank
now what still does in and the other
thing is if I add a new post so to a
watch will say is $20 create a new one
you see a pop up over here but let's say
I make a bid on this watch so it was 17
degrees ID so if I bid this five more
dollars should go up to $25 and our
database it does the notice interview
over here it still says 20 I don't say
if I delete this
it'll still be I won't show I won't show
it go away so that's what we're going to
do today and the first thing is we're
kind of seller and top builder
so now seller is now nested and you can
get the username so that's a real easy
fix
so we're going to come on over to our
view auction and routes your auction and
then view and then sell our username we
can go into seller and then we can grab
the username and we're going to have a
top bidder and a seller so actually
let's just expand it like that and do
seller dot username and now if i refresh
we can see Bob Bob Bob and now top
better there's not always going to be a
ton better because what it's knowing big
but if we go down to one that does have
a top bid doesn't look like there is so
if I limit this and go up to like 20 up
just like 15 so give me some more items
go to 17
and here your top bidder and then use
your name and so I can just do that
username like that and refresh some of
these are not going to have top bidders
so chair at 123 could be this I could
bid on this
can I get one still nap now if i refresh
notebooks not the wand can I find a
chair that I bid on here
secure the interesting prize it's now
128 dollars
ok here there's a chair for $12 how many
do we have see if we can find that we go
has an idea of 12 so it's a bit on that
five more dollars so now we're still
chair for 17 dollars hopefully and maybe
I just have multiple chairs we knows how
this doesn't show all of them that's
because we paginate right now and we can
actually ask the database for more the
way we do that is this go to modules
auction API and we're just passing and
find options here so we can actually
change it here request auctions and we
can
I believe limit so now it should give us
20 values back if I didn't mess it up
and I don't think it did I think maybe I
have to wrap it with a query now let's
see yeah looks like there's some more
okay here we are now we can do that
chair that I bid on for five more
dollars at the bottom here so I mean we
were pulling in a couple more bids
so just to recap real quick what I did
was I pass it into request auctions and
I asked for 20 items that's what this
limit does I'm asking for 20 items at
least okay so now we have top better as
we saw here the bottom but now I also if
I bid on an item I want to see it change
here and so what we're going to have to
do is we're going to add we're listening
right now on sockets for created we need
to listen for updated and delete it as
well so I'm going to say Const options
service equal to service options and
right here select it back now we can do
auction service and we do that three
times
and now this is going to be updated this
is going to be deleted and now we need
to create some new actions I'm going to
say auction
akshay updated
auction deleted now if I go an index
here can create some more auction
updated auction deleted oh and yeah okay
and then we bring it down here actually
buy in so we're importing them here and
then we're adding them to the props here
then we need to actually create these
actions here so auction updated auction
deleted updated okay and now you create
them here auction updated and then
auction delete it and I just missed all
update of David option of there and then
we just need to affect the II reducer
here so now we need to listen for two
more and the auction is auction updated
an auction deleted all right
auction updated option okay okay so
auction deleted is really easy right so
we're just going to filter the state so
we're going to say state that filter and
X or X is not equal to payload ID so
we're basically just checking the IDs
and we remove so filter I believe will
show me returns almost array that meet
the condition okay so the ones that are
not equal to the payloads ID we want to
keep so the payload is the auction that
we deleted so we're checking if equal
tidy and if it's not then it's not the
auction we deleted so we should keep it
in the list and then up here from
updated how I like the update is to do a
map and do state map and I should really
be using a for auctions of X okay so for
each auction we check if the auction ID
is equal to the payload ID if it is then
we know payload is the one that actually
it's just ranked we're going to do
ternary here so we're checking if the ID
is equal to the payload ID if it is we
know payload is the new object and we
want to replace it el pelo else we just
want to turn a and let's see this is not
like raising a in both filter error
function used ambiguously with
conditional expression
so just one area okay
the only problem with this right now is
we need to add moment to this payload
and we're good
I believe we have been air right here at
sea lion exceeds max link I guess we can
drop it to in your line here so the best
way to do it does it like it drillings
oh it's just trailing spaces aren't
allowed area all right so now our
reducer should be able to handle it so
let's test this out so first I'm going
to add a new one so I'm going to post a
bike sell our username oh you know what
guys so notice when I create a new item
here
okay so celery I use your name is not
defined and that's because seller is not
defined it's actually weird the we we're
doing fine with create I'm not expecting
this error actually so the error the
problem we reason we're getting there
because sellers undefined so
Celer should be defined always so
basically the problem is okay I think
the problem is is when we create a new
guy our new auction notice how its
returned doesn't have a seller here so I
think we need to do is actually go to
our server code so I have a server run a
I'm going to close that just going to
open up I think the problem is with our
service auctions or auction hooks so
notice how we're we're adding the seller
in here so we go on to debug anymore
notice how our adding we're populating
it on find and get we're not populating
it on create update and remove you don't
need it on remove going down we do need
an update and create though so we will
add populate here and populate here and
then add Todd bitter cool I believe this
is good
let's start it up and see oops we don't
want to start up react native just gonna
do NPM start alright
so now when I create a new auction like
for example a robot and we can refresh
this what we'd like to see is the user
field here or the seller field I mean
and we still don't see it
the problem and is there a problem here
we should be saying it auctions can go
back into the code real quick so
services auctions function hooks we have
populated right here and we're removing
if we're doing sequel eyes draw on all
of them so I'm not sure why when I'm
creating yv auction and why this is not
being added so users seller getting the
seller ID I understand why there's not a
top bidder because it does exist but you
would expect seller ID so what I'm going
to use the debug flag here and see
what's going on so now it will print out
I'm just going to open that in our
window do NPM start on the server now
when I create a new robot over here
they'll print out on the server before
and after and oh there you go that's the
problem see all this other stuff here
should not be seeing supplies object
seek wise raw for some reason it's not
working I could try adding this to the
after hook to
oops adds my token from Augean so it
needs to be we need to see just regular
JSON for the populate hook to work so
you notice how its passing back thus
equalized object and that's what's
messing it up then post that still
getting the sequel is object so we need
to find out why that's happening so
we're creating even though we said that
let's look at what's utilize for all
hook maybe we have an errant params were
all true that looks pretty
straightforward
just going to try basically stripping it
myself so I'll say I'm just going to
create a new hook basically so come back
over here
so there's generate generate hook and
this is going to be pop beta values
could be after it's going to be four
options and we'd like to tap it for
everything so and we can refresh though
okay so now this pop value should run
before these and so what I'll do and pop
data values is I'll just say hook dot
result is equal to hook dot result dot
data values so I'm basically just
grabbing the data values from it and now
you can run our server see that works
then I can post again folks is not
defined out that should be helped
then post again haha now we can see a
cellar is being added so work so now we
can stop the circuit well we don't start
pop stop the server bum and remove these
debug okay so what I what I did is for
some reason it just had a lot of extra
junk in the return value so I added this
pop date of values hook and then in that
hook this runs before all the other
after hooks and it just basically
removes all the sequel eyes object
attributes and just grabs actual data
which is what we care about okay so now
we can look server run and now that that
is returning correctly I think our app
should stop throwing airs refresh get
this error when the server's off what's
going on here cannot set properly if I
defined type area oh looks like looks
like pop data values might mess up some
other things so go into auction block
instead of running this on everything
I'll just run it on create and update
because I think it's messing up the
finding get there we go restart good and
we can refresh this alright cool so now
when I add this we will option out some
chocolate awesome now if you chocolate
here and it didn't explode and now if I
update chocolate so what was chocolate
chocolate was id24 so I'm gonna do a
patch to ID 24 and I'm going to raise
the price by $7 so we should see this go
to $27 and updated here but we do not
see it here okay so our reducer did not
work so let's see why state that map and
ID Oh nope that was good this looks good
so what I want to check is that what's
getting returned by updated here so
well it's console dot log a and see what
that looks like so react native
log Iowa and we can refresh that all
right so now we can send an update and
notice how nothing is happening
okay so updated to do not returning
anything I believe so console dot log
updated socket and refresh that alright
so that's how I keep bidding on this and
we get nothing here okay so it looks
like our socket is what's broken um so I
would like to check the deleted socket
now see if that bit work is broken as
well so to delete can make a new one you
can copy this so we'll delete 24 and
what I want to do is the same thing here
so we can see if the delete is working
console dot log deleted and it's just
complaining because I'm not wrapping
this and parentheses okay
so now the body of this request is going
to be JSON actually do we even need to I
actually think you don't even need to I
think I just gave you authorization
header and a pass in my token so the
nose I'll authenticated
complete that cool so to look at that
and see see if there's a deleted and
there's not okay so both of those are
not working I'm assuming because it
doesn't like the name that I'm using so
I'm going to do some little research and
I'll figure out what names that we need
to use for these I figured it was
updating deleted since we just created
here and then we'll fix that in the next
video so see you guys then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>