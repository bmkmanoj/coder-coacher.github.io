<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Why I Am Using LocalStorage Over Cookies | Coder Coacher - Coaching Coders</title><meta content="Why I Am Using LocalStorage Over Cookies - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Why I Am Using LocalStorage Over Cookies</b></h2><h5 class="post__date">2017-09-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/f4ZKNLmMpL4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I've been doing lots of
different stuff with authentication
lately and I'm very new to the subject
I've been trying to figure out where the
best place to store a JWT token is on
the client side and the two main options
I see is in local storage or in cookies
and I'll kind of wanna just talk about
what I think of each one at the moment
and why I'm kind of leaning towards
doing local storage so from what I've
learned I believe local storage one of
the disadvantages of it is it's
vulnerable to this attack called
cross-site scripting whereas cookies is
vulnerable to something called
cross-site request forgery and for one
it sounds like you kind of wanted to
pick whichever one you want to protect
against so if for my web application
it's easier to protect against
cross-site scripting I would want to
store it in local storage if it was
easier for me to store to protect
against this vulnerability I would do it
in cookies and so let's just go through
what each one of these is real quick and
then what this is a really good site to
by the way called a wasp I just read
through both of these vulnerabilities
they have a nice page on them I kind of
explain how it works and how you can
kind of get around it or not be
vulnerable to it so I thought this was
some good examples here basically what's
happening is the user is able to inject
JavaScript into your website and they
can do stuff with it so for example this
is the particular one that would be
dangerous to us we're on air basically
what happens is they alert and they will
basically take your cookie now this of
course I said this was a vulnerability
to local storage but it's also
vulnerable to cookies and that's if your
cookie is not HTTP only if your cookies
HP only that is
and this problem comes up and you're
protected against this if you're having
HTTP only cookie but if you have a
regular cookie you're vulnerable to this
too but this could be document dot local
storage right they could be alerting to
local storage but the idea is someone
can grab local storage and just send the
data to their site so for example in
this image tag here they could send as
the source they could send some
JavaScript and they could grab the
document dot cookie or the document down
local storage and get the token and
basically send it to themselves so
because they have access to local
storage any JavaScript does that's if
you have a some malicious JavaScript on
your website maybe you have an ad banner
somewhere maybe you're using a bad
library that uses a bad some bad
JavaScript and it has access and injects
this stuff or a user can actually add
this as well so that's kind of the
problem with local storage is users can
actually get access to not users but
JavaScript has access to it and so they
can get the local storage token and then
send it to a malicious website and that
malicious website now is your token and
has access and can do stuff as your
account
which is not good so to kind of defend
against this what you can do is I don't
know if they I think they had some they
have a nice little page here I saw the
prevention cheat sheet that I really
liked they had a bunch of different ways
to do it but the biggest thing is to
basically if you get user input you
should escape it so the problem is is
when you take some user's input and then
put in your website the user can put
JavaScript tags and that can do bad
things with that so that's kind of a big
problem with local storage and you want
to protect the inset so I recommend
taking a look at this if you're using
local storage look at all these
different things that you can do to
basically protect
yourself from this now cross-site
forgery request forgery is slightly
different this one's actually kind of
interesting I found this very
interesting exploit or basically because
your cookies are sent on every request
you make the attacker takes advantage of
that so for example they could send you
an email and I specifically like this
one this one's really neat and even if
you open an email you don't click
anything they could have an image tag in
that email and it could send the source
let's say you're logged in at Bank comm
and they just have this source tag this
will actually make this request for you
because your cookies are sent along with
it at all authenticated automatically
for you and then Murray will send what
is this under thousand dollars and
you'll send Maria thousand hundred
thousand dollars when you just opened an
email so that's really dangerous so
there's ways to protect against this as
well I think in general this one's XSS
is a little bit easier to defend against
and because if you're not putting in if
you don't you use trusted libraries
you're not doing ads or that sort of
thing and you are escaping data like
they suggest here it's pretty easy to
protect against this one so that's why
I'm kind of leaning towards using local
storage because I think it's in general
easier to protect against this than it
is to protect against this but again
they have more information on this on
how to protect against it as well
so I highly recommend you looking at
both of these when you're trying to make
the decision of whether to pick local
storage or cookies when storing a JWT
token or any type of authentication
mechanism I really like these two sites
I'll put in the link in description
below to come check them out and you can
make a decision for yourself so that's
kind of where my head's at with storing
stuff in local storage and cookies I
could change my mind later and do
different stuff but at the moment I'm
leaning towards local storage to storing
the token
and it's one of those things where
there's not a perfect solution
everything has its own vulnerabilities
and you kind of have to just pick per
application basis what's best so I can't
say overall local storage is always
better but that's what I would lean
towards when starting an application and
maybe I would switch depending on some
factors so thank you guys for watching
that's it for this video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>