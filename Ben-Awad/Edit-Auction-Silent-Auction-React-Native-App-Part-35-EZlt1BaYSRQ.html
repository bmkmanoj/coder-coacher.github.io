<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Edit Auction - Silent Auction React Native App Part 35 | Coder Coacher - Coaching Coders</title><meta content="Edit Auction - Silent Auction React Native App Part 35 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Edit Auction - Silent Auction React Native App Part 35</b></h2><h5 class="post__date">2017-07-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EZlt1BaYSRQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so we're going to be adding a
little edit button to our auction card
that way we can as the auctions change
the price the time or the Texas one two
so I have like a little icon right here
we click on it we go to reform we make
the changes and we submit that to the
server we see we update here so yeah so
we're going to work on right now so
here's the code right here and I'm gonna
through quired but we're going to start
on this page right here which is in view
auctions and view you don't have the
code for this and you want I have it
below in the description and for this
one we are going to create basically
another icon here and it's going to say
icon name is great I couldn't find a
great icon but this one will work good
enough it's kind of a pencil looking
thing I also don't know how to rearrange
and design this to make it look nice so
I'm going to leave that to you guys try
to figure that out I'm not a designer
I'm not good with styling but I do know
how to get the functionality to work so
that's what we're going to do click on
the X it'll work we click on this we'll
be able to edit and so here's what I'm
thinking when we click on this what I
want to do is actually just kind of like
navigate them to a page that looks a lot
like this alright our create one I want
to look almost identical to that so I'm
thinking I just I don't know maybe
refactor this and like make it so we can
like put in values and like get that to
work really easily so if I confirm if
you have pop here so let's go I'm
thinking
so let's I'm going to try doing and see
how that goes so to do that when we on
press what we want to do is switch to
that page and so this is the auction
form page and now what we can do is we
can actually pass in a prop here that's
going to be like the title so then we
get the title and display that so we
want to show ad auction or we're going
to say update auction so that everything
reformatted let me get rid of this right
get rid of that we're not going to use
it and you're right here alright but
importantly we're going to add net
another we're going to accept another
prop called title and grab the title
here now and view auction when I call
call it down here actions form page I
want to actually pass in the title add
auction and then it'll actually display
it now if you were to run this it would
actually break and the reason for that
is if you go to our index page here not
this one for our routes our seams you'll
notice how we're doing this auth
required and so the props the scene
props are going to be passed to the offs
required component and this component is
not passing the props to the component
so we just need to do this props so what
that will do is okay so it's expanded it
and by the way when you guys see my code
just like whip out and like change like
that
it's just formatting not none of the
code actually changes I just had to use
a plug-in called prettier that formats
it so the component here we're passing
the props and these props come from the
seam and so that's important we need
those and that's how we can do the title
so now if I come over here you'll notice
the title is now we get from here and we
still see at auction okay so the write
was actually formatting I got rid of
right but I think we should keep that
because I didn't realize I was
formatting it I forgot I think it was
here and as he goes like that
the real we'll see if that worked in a
second now I want to do the same thing
I'm doing here right
we call this function but I want to call
that when we click on the create so now
instead of we create I just said dummy
remove we don't need that
alright so now when we click on our
create icon the on press is going to be
take us to this page and now instead of
ad auction we're going to say update
auction so now let's test make sure that
works when i refresh I'm going to click
on this icon and bam we see update and I
will be coming out here we click this
you can see that auction and I really
mess things up with adding that right
oops connect it's probably right here if
that doesn't work we'll move it here and
I can always do a diff of the file if
this doesn't fix it there we go
we're getting a dot dot dot because it's
getting too long that's kind of awkward
at auction is not longer it is not that
long but update auction is can we get
rid of this body tag maybe that will do
it there we go it looks like it's kind
of off kilter but good enough to now I'm
not going to mess with getting the title
look perfectly okay so now what we also
need this change being a specify the
function whether it's create so let's
pass in a boolean for create and we'll
set the default to true and then we're
going to pass in two things request
create option and request update auction
so if create is true
so if create we pass and request this
else we're going to pass and request
update and then we don't need the body
here anymore so then our props which was
in our index here we can add request
update auction which we get from here
and we need to add this we're going to
add this right now I want to go through
and we can add this we need to make a
few more changes to this guy both go
through and create the basically the
Erie Ducks saga stuff that we need for
this
so in auction actions we can create
another one here request create action
request remove and now we need to
request updates oops
I don't know and I'll play here this
really should say request remove at
auction but that's okay request update
auction I forgot I was using that naming
pattern and then here we do update so
then in our juicers we also change
anything
again in our view here we're listening
for a roasting for patched not updated
that's fine
passion updates basically the same thing
they're slightly different but what
we'll do is we'll patch it'll be okay so
we have our remove auction here and
let's call let's rename this for update
so update auction saga call update call
update auction then here this will be
update option this will be call update
option and here this will be request
update alright it doesn't have it
memorized update option zero and we just
need to import those two functions
request update auction and then here we
need to do update auction okay and now
we need to go into our API and actually
update now we have some red I think
that's just from heirs
so with our delete cool
sit down our API here similar to remove
and literally copy and paste going to be
the same thing and then we're just
patching and now but here this is going
to be the object going to be passed to
us is an auction so we're going to patch
and give it an auction and I believe it
is the I the auction and then the ID of
that so we need to also pass in the ID
somehow so auction comma ID so we need
to fix how we're passing data through
community the auction the updated data
for the auction and the ID so we know
which one we're changing but okay so our
back ends all good and why is export Oh
update option area so now we're all are
we're able to handle the action when
it's called and actually update it we
just need to correctly call it now
that's going to be here yes so here is
going to be auctioned there going to be
a function and we'll pass an auction
here and here we'll pass an auction and
be idly as an object what's going on
here Oh ambiguous I think if I wrap this
with quotations does it go away it does
cool and we'll pass in the ID here
ID and it's fine it's undefined at first
okay it auto took those away I'm fine
with games there or not so there the
theus lint okay so we have the ID which
we need to pass and and the request
update right so let's come in over here
and pass the ID
so create is going to be fault
oops it's going to be false and the idea
is going to be ID an ID we're getting
from here and I think that should be
good
I love them forgetting anything which
we're about to find out let's try
running this so I'm going to try
renaming this so click on this you'll
notice how these fields are populated
we'll fix that in a second this works
Bob - and then just like a date pick
tomorrow submit and then nothing
happened and let's see why react native
log Iowa make sure if you want to run
this to your inside of the silent
auction application and ok nothing hit
submit oh you know what
err no data provided for patch no data
provided for patch I'm not sure what
that's about but something I forgot is
we're actually going to need to redirect
in the browser so if there's not an
error you see how we so this is when we
create an auction which we do on that
form we check there's not an error if
not we redirect pages and then we reset
the form so we should do that when we're
updating - so where's our update here
and we print out the response console
dot log update response
so let's rerun this and see what happens
and when we refresh this okay so it did
not get patched so I'm just going to
call this Bob 232 next day submit
now coming over here we see update
response no data provided for patch so
what we can do to verify that we're not
getting any data is I'm going to come in
here and console.log auction
so if auction is an empty object or
something we know this is true so coming
here refresh pencil icon and I'm just
going to type one letter and hit submit
and see what I thought okay right there
yeah toko does it go through oh I need
to put a time too I forgot we're
validating this there we go submit and
here's auction there is auction auction
oh that looks good so the data is
actually being passed so what I'm
thinking is I actually have this
reversed you pass the ID then you pass
the auction is probably how it works um
if this does not work I'm just going to
go google search what the feathers API
is double-checking so Bob to date
confirmed submit and cool looks like
it's working so Bob tube pops up here
our new price and I think the price was
adjusted for bids I actually didn't I
forgot what number I put here let's do
that again real quick Bob 311 dollars
select date confirm Smith okay so our
patch actually updates or patch you know
doesn't work exactly let's just make
this an update so I'm going to change
this to update so the difference guys so
on let me back up and explain what's
going on so the reason patch is not
working is because when we patch
something that array exists we said we
basically are just reassume at the bid
which is not the case all the time with
winter
regular update right so like when I
click this here that's we're calling
patch and patching it here but what
happens if you wanted to do a regular
update and change things we will do will
do an update instead of a patch
now what patch does is let's say you
have an object called and the value is
let's say we have a name which is Bob
and then a price which is $13 if I were
to patch this and I pass it the object
price 14 the new object created is price
14 but if I were to update the new
object would just be price 14 so if I
updated price 14 the object it creates
is price 14 the reason for that is
because there's not the name value here
now if we add the name value here Bob 3
then you would see both those things pop
up here so patch keeps what you have
before it only changes the stuff you
have here Update assumes if you don't
add it you don't want it so now for
update we need to make sure we pass all
the fields so let's rerun this I'm going
to update now so Bob 99 and he's going
to have a bit of $99 and set that
confirm submit ok
so we don't see it out that's ok because
we all have our web socket set up for
updates but if i refresh we should have
seen it if it did work so that means it
did not work and let's see no data ok so
let's scroll that all the way down all
the way down and see what happens I just
have to run again because I don't see I
don't see it update response
ID is no all 9999 created that is no
update original seller ID is no yeah
that's going to mess stuff up we really
actually just need a patch actually it's
not this is not as simple thick now that
I think of it okay screw this we're
patching because update is going to mess
stuff up because we're going to get kill
these fields and I don't feel like
fixing them
alright let's patch we're going to
basically okay it's a patch we're going
to patch now the problem is is when we
patch we've always assumed it was a bid
so now we want to patch and not assume
it's a bid and to do that what I'm going
to do is do pass and bid fall da da so
we're after change our back end now to
handle this what we'll do is we'll patch
it
we'll check if the bid is false and if
it is then we don't bid so here is my
server I'm going to open up visual
studio code and we don't need to front
it anymore it's all the rest of this is
back in work so it starts to go back up
and alright guys so this is going to be
a couple more seconds and then we'll be
done we just need to do place bid right
so here so we're running this hook on a
patch and we're basically saying do this
if it patches I think let's double check
so services auctions hooks you can see
what's going on and if we go to patch it
looks like we're adding the top bit top
bidder and then we're placing the bid so
and top bidder so we should only do this
if hook data dot bid actually we should
do we should say update if update if not
update area
so actually let's open the front in real
quick I thought we were down to the
front end but I actually want to say
update into the bid false so instead of
passing in bid false here I want to do
update false
I'm sorry true ok now we're going on the
front end alright so if it's not an
update then we do a regular biz logic if
not we pass right through same thing
here so let's say oops
if hook got data that update returned
just returned the hook we don't even
need to do the promise thing I don't
think and I think of it I think it
should just work now let's see if it
does
oh we're not actually done with the
front end by a way I forgot there's one
thing I'm going to do with our form -
okay Bob 99 the bid still happened let's
double check why so we don't it's
definitely not our hooks doing this
garbage hook data update oh I didn't I
need to rerun start restart the server I
was like I think our code is good now I
was surprised it did that so it'll say
Bob one cool it's cold now let's go
forget Bob let's do Bobby Bobby one you
1.11 bid and sure Sunday cement Bobby
11.1 did sweet guys and least time left
for scoring my least time so that's why
Bobby went down here we could update
Baldy again and say one minute from now
and he should be at the top Bobby
cool now Bobby's at the top so I want to
add one last thing before we quit here
and that is with our edit I'd like to
see Bobby pop up here while Bobby popped
up there I was on Capote I think I
accidentally click the X there let's
refresh yeah looks guys sorry what I was
saying is I'd like to see Bobby pop up
when I update like the previous values
what they were so okay so Bob is up here
I click this right I type stuff I go
back I type stuff okay it keeps it there
that's fine now it's like a small bug we
will fix that maybe at the end of this
video - why the heck not but okay when I
click on this if I'm refreshing when I
click on this icon I would like to see
the word Bob 123 in these fields I'll
add that and that's going to be all
fronting we are done with back in now so
close this come back over here open up
my code to the front end and let's jump
right into things so we need to pass in
those values right so I'm going to do
name current price and time left will be
difficult so this is going to be
actually a little bit difficult well
you'll see why in a second so okay
so this is a really really long line
let's bring it down so now we're passing
a lot more information over here and
maybe time left we don't yeah actually
it makes more sense
not even to worry about time left time
left we won't pass in we'll just pass in
name and current price so then in our
form here we can say name current price
there you go and then in our auction
form we can say we can pass a name name
current price is equal to current price
and then if we come into our form here
we need to set the initial values of
this thing oh and I'll be fun actually
I think I can pass the initial value it
would drop but I don't remember it gets
initial values name current price or we
can't do it like this anymore figure out
we're using Redux form I believe Redux
form gives you has this prop it looks
for and I'll Redux forms so we can
actually pass as a prop here so now if I
go like that
cool starting price Bob Bob shows up
starting prices not what it is so what
I'm thinking is it's named something
else here it's called price so a price
current price refresh no all right I
thought I thought price would line up so
you need to make sure the name lines up
right now the name is name prices price
the name is price current price the
or that lines up correctly what could be
going wrong as current price here
current price here current price could
actually just be null but we're showing
the current price I believe right yup
we're showing current price so the
current price should be 123 we pass
current price and when we click which
goes here the initial values price price
auction form creation here we call it
price so it should just show up so I'm
just going to refresh through this again
and see because it look like it the
chain looks like it should go through
looks like there should be a value here
we're not doing the date which is fine
because that one's a little harder to do
value of numbers supply the input
expected string okay so we just need to
cast this to a string it looks like so
easy way to do that just like that
there's a ton of way to cast integers to
strings that's just one way and awesome
guys we got the value to pop up so now
you just add one to the end add my date
confirm submit and bam and now if we
wanted to we don't even have to you
don't even have to patch right come back
here but we don't even have to change
every value I could leave wait the value
of this is 124 Oh initial values an
issue values doesn't change so there's a
small little buggy bug and the reason
for that is we need to add here re and
initialize value there's some kind of
thing let me go to google Redux form
reinitialize values
because we're initializing the values
there's a special prop you have to pass
it and I forget what it's called so it's
at the bottom
initializing from state re it's not
going to be here it's going to be on get
help maybe reinitialize values
I think it's called reinitialized values
let's see if it works it's going to be
true reinitialize values that's spelled
right ok so now I click this I had a 5
here I submit it doesn't like because it
in selected date selector date confirm
submit all right now if I click this I
should see a 5 at the end which I don't
I didn't spell it right specialized
values from container component enable
reinitialize here we go I just forget
what that called so the reason why is
this doesn't pop up to 5 here is because
the values are already there right we
didn't reset them and actually me we
should actually just do a reset that'll
fix our problems too so that shows up 6
select they submit now if I hit this we
want to see 6 there and we do so we're
good so but one last thing I want to fix
is when I click this comeback it should
reset the form right and it does a look
there's still a little slow okay there's
an error if you get the plus sign
because the plus sign doesn't reset it
doesn't set initial actually maybe a
will now let's see we might have fixed
your problem we may not even need to
reset look at that the emulator is just
crapping out right now okay now hit the
plus sign if everything is blank we're
good I actually think it will be blank
because we're
reinitialize we're initializing the
values and it could be undefined and it
is auction form page that's not the name
oh you know what I can get the name
let's reheat let's rename this I think
it gets the name of what we called the
same goes to auction name and then let's
say name is equal to action name or an
empty string and the same with price so
pasión auctioning and bam I think we
are all done with this video guys we
have our update working now I think so
push this button add an A at the end
come back here with the plus
everything's clear looking good at this
and yeah we're good to go I think now so
that's it for this video guys I hope you
guys enjoyed we added the edit button
there finally to go I'll work actually
we had to update the server a little bit
um and I'll put this on github and yeah
that's it for this thanks for watching
I'll see you guys in the next video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>