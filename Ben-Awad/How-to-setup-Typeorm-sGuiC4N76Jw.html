<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to setup Typeorm | Coder Coacher - Coaching Coders</title><meta content="How to setup Typeorm - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to setup Typeorm</b></h2><h5 class="post__date">2018-03-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sGuiC4N76Jw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I want to do some videos about
type ormm I've been using it the last
couple weeks and really enjoying it it's
been much nicer than using sequel eyes
and integrates really well with
typescript and Visual Studio code and
the auto-completion is really sweet so
what I want to do in this video is show
you how to do go through the getting
started to set up a database and then in
future videos kind of show you how I
like to use it and get some things set
up relationships and how to do all the
crud operations and all that fun stuff
so first off I want to get this started
with the the project that I set up
yesterday the boilerplate so I'm gonna
add it to this project if you want to
follow along and add it to this project
as well I'll put the link in the
description below but we're just gonna
follow along with the getting started so
first off let's take a look at how you
create tables so with type warm you
create these things called entities
which are basically classes where you
specify the column now notice when we
specify the name of your table and then
all the columns in it notice how there's
this thing here and there's this thing
here so this is this typescript
type so this is a number this is a
string and this is the column and at
when you do at column like that you
actually you can specify the type that
you want the column to be so you can
have it as a text you could have it as a
varchars they're not doing it here
they're having it just inherit or
interpret what the type should be based
on colon string here but we'll talk more
about how to specify the column types in
a little bit so if we scroll down a
little farther we'll find the
installation and to install this is
actually a little interesting these this
thing called reflect metadata so we need
to install not just tie form but type
warm reflect metadata and the driver now
I'm gonna use Postgres sequel but feel
free to use any one you prefer so let's
go ahead and install
add Postgres tie form and reflect
reflect metadata and I don't have types
for note I don't think installed yet
nope I don't
those are good to have cannot find
metadata because I spelled it wrong and
I'll go ahead and also install this and
I'll install the type as a dev
dependency yarn ad okay so next thing is
to set up see right here they have some
things we have to change in our type
script file so I am NOT omitting
decorator metadata or adding this
experimental Decker experimental
decorators right now but we're about to
run type or a knit which will actually
do this for us so they have this so you
can go ahead and still type or m--
globally if you like and then you can
use the CLI to auto create a project I
already have type worm installed so I'm
not gonna run this but if you'd like to
go ahead and do that I'm gonna copy this
though this is actually gonna over ate
some of the things in our code but after
it overwrites it I'm just going to grab
it with git so this is a dangerous thing
to run if you already have a project set
up but I have this using git so I can
revert some things so here's how it's
gonna work so I just basically reverted
my types for a config file right but
really I only need these two lines from
it so I'm gonna just say git checkout
and then TS config and this will go
ahead and check it out at the last
version so now I have it back to where I
like it
and I'm just going to paste these two
options and
okay and the reason why I did were on
that is and I don't care about the
readme just delete that it adds an
entity and migration folder and it's set
up and arm config this is the most
important part the orme config is I
won't wanted them to set up entity
migration is good you'll notice that
they messed up index that type script as
well so I'm just gonna do get check out
source index type script and now you can
add this manually if you prefer as well
okay so this aura config is gonna be how
we access the database so it's gonna be
we're gonna create a connection to the
database and it's gonna know that
information from right here and let's
take a look at the entity created so has
a user now I noticed that it was giving
the this error about the constructor and
that was because I have these two rules
stripped and stripped property
initialization when I get rid of those
the lines go away so I went ahead and
just remove those rules since there's
really no reason for these to give me
heirs okay so I want to now actually
create a database and create this one
table in my database so to do that and
they actually had that we're gonna need
to pass all these things in so let's add
that to orme config so these are my my
things so for me this is how you access
the database so I'm gonna do Postgres
and it's on localhost it's on that my
username I'm gonna say oops I went back
one too far
Postgres my username I'm gonna say is
Postgres I actually haven't set up a
database for this yet so we're gonna
find out if this actually creates a
database for you or not so I'm gonna say
tester - okay and you'll notice how it
points to the entity folder right here
that's how you know where your entities
are and the reason why you do or config
is for two reasons one I now don't have
all my password my usernames on
github because I can just change my get
ignore to add a or is it
I should have warm config in here but it
doesn't dot arm config there you go
so we added dot warm config to this and
now my arm config will not go to Oh aura
config JSON I just totally typed the
wrong thing I'm used to doing dot in
files anyway so now I won't have this
exposed on github when I sync up and
also this is good because they have a
CLI that you can use our command-line
tool so when you run that it will read
from this warm config ok so we have this
setup how do we actually create a
connection and have it create the tables
now notice I have the word synchronize
true here so that will that tells a type
arm to actually create the tables if
they don't exist and all that fun stuff
so here and there's an important thing
we need to add to the top you know that
weird thing we just installed reflect
metadata we need to import this at the
top reflect metadata it uses this for
something and has you do that so here I
want to start a connection so I'm gonna
say get connection and this is what I
sock them out with Auto completion
notice how I haven't imported it yet and
I can just type get connection and it'll
go ahead and autocomplete for me and add
it which is really sweet so here you can
specify all the things we specified a
norm config but it'll go ahead and read
or config automatically so that's how it
knows where all your stuff is and then
I'm going to say dot then so after it
goes ahead and reads that I'm gonna go
just start the server and this will
actually have a connection if you want
it and oh I want to create a connection
not get a connection
I just did the wrong thing I was like
why didn't have a dot then ok so we're
creating the connection not getting the
connection and then after we create the
connection we're just gonna start the
server alright so let's go ahead and run
this and see what happens so I'm just
gonna do NPM start and see if it creates
a database for us
ok cannot read property name of
undefined okay so I figured out the
issue I was just being a noob and forgot
to change the port the correct port is
four or five four three two and just
changed a norm config so now if I go
ahead and run NPM start it'll tell us
our database is does not exist right so
I just need to add that so I already
have Postgres installed and all that
stuff on my computer so to create a
database I can just say create DB and
the name of it which I'm gonna call
tester to so I'm gonna do NPM start
after it's created and the server is up
running a book host 4000 so I can go
ahead and do piece equal on test or two
and if I do backslash T it'll go ahead
and tell me all the tables and database
and we can describe user itself and very
cool so this is our table we see first
name last name and age so let's play
around with it real quick so over here
so this so I mentioned earlier about how
this is where you specify the type you
actually pass what you want it to be
right here and then this is the type
script type so for example this could be
text right so there's this thing in
Postgres called text and that is the
field for and we can make both these
text right now they are character
varying but text means they I think can
be as big as they want so if we just
describe this again I don't know if it
auto sinks or not and
it didn't restart I'll have it run again
all right so let's see if it changed the
database and we go ahead and we see that
these are both texts and now we can also
specify for example the type and notice
you can see all the different to tell me
it was telling me right here you can see
all the different types that you could
possibly have for your column and so I
could save our char and you can specify
the link and let's say I want the link
to be maybe two 30 and now we can add
more columns and this is where you
specify any kind of special things you
want default values so for example I
might want to set the default age not
the default age but confirmation so
common thing is like confirmation email
so I might have a type of boolean and
I'll set the defaults to false and this
is going to be confirmed right so they
have not confirmed their email yet and
I'm gonna create this as a boolean type
and so here I want to create an email so
that's gonna be of type I'll make it a
text you could make it a bar chart ooh
and then here so to call it email maybe
the column and I want it to be unique so
I'll say unique is true and one of the
nice things about this being integrated
with typescript is let's say I do a bad
column it'll tell me right away like
instead of boolean let's say I did
bul-bul might actually be accepted but I
randomly put an e at the end it'll be
like hey that type doesn't exist so
that's really nice so it catches things
really early so now we can see unique
and default will be added now I don't
know why
node demon is not just listening this
doe demon not getting started oh you
know what did it
override package shot JSON it did I
didn't even realize that it went ahead
and well it didn't overwrite it it just
disappeared
so maybe what's it called when I did
that initialization of the project it
also changed package JSON and got rid of
node name running okay we got that so
now we have our new user which has
confirmed which is boolean the default
false so pretty sweet so this is how you
go about and create just the table in
the database and change up the columns
next what we'll do in the next video and
Oh real quick you can also change the
name like look at call Bob that's really
bad name for a table never call it Bob
but I don't know what it's gonna do
actually let's see what happens all
right so now we have Bob so it kept user
but now we have a bob table with all the
columns you would expect so that's how
you can specify the user or not the user
the name of the table I'm curious
whether it will go ahead and just drop
Bob okay it does not drop Bob even
though Bob no longer is being used so
that's pretty interesting okay but that
is how you set up your tables and how
you specify the types of each column and
how you might change any variables you
want to pass into it change it and
modify it well do in the next video is
look at how you can do create read
update delete with all these things
that's it for this video guys thanks for
watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>