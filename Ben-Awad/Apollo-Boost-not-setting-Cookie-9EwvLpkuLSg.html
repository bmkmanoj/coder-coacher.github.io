<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Apollo Boost not setting Cookie | Coder Coacher - Coaching Coders</title><meta content="Apollo Boost not setting Cookie - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Apollo Boost not setting Cookie</b></h2><h5 class="post__date">2018-04-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9EwvLpkuLSg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I mentioned yesterday that I
was having some trouble getting a palo
boost and the file link that i was using
for the slack clone to work with cookies
for some reason the cookie doesn't get
set the only way I've been able to get
this to work is by using the Apollo link
HTTP so what I want to show you guys is
what I think is equivalent code but once
it's the cookie one doesn't so here is
me setting up the Apollo client and this
is in a react app Lakai ssin and this is
actually an example that i use the other
day and then I have my server which uses
an express session middleware and
whenever I fill out this form over here
so just type out this form and hit
submit a cookie is sent back so it'll
work with this setup so I've been
passing in a cache I'm passing in my
HTTP link and I'm sitting in credentials
include that way it actually sets the
cookie so let's see this working so I
can type whatever I want I can hit
submit and I can see two requests so
first our options and then our post and
in our post request we can see a cookie
would need to be set or it tells it to
set a cookie and if I go to application
I can see this cookie is set and if we
were to clear it and we submit again we
see that the cookie is added back it is
for sure being added so if I clear this
again and now I comment this out
and I use Apollo boost instead
so here's Apollo boost and you'll notice
same thing I have the same location for
the server I'm making the same request
and I set credentials include again now
for a second I thought maybe this was
wrong but here is the readme for Apollo
boost and if we go down to the very
bottom we can see they create a Paolo
client from Apollo boost and they are
using fetch options credentials include
so we're doing the exact same thing
there but now when I run this the
request works so we submit and you'll
notice no cookie was set but if we come
in the network tab we can look over here
the response header is 6 it was
successful and it says to set the cookie
but it doesn't set for some reason like
if i refresh the page it's not there no
things there so I don't know what is
wrong with Apollo boost I think I'm
gonna try jumping in and reading the
source code for that and seeing how it
differs between the Apollo link HTTP but
for whatever reason the cookie does not
persist or it's not stored correctly
when using this and so that was the same
problem I was having with the one that
we were using with the slack comm but
yeah I'm gonna look at the source code
if you guys know what the problem is
please let me know because I would love
to use a palo boost it makes it easier
to set this up and if I can't figure out
I'm gonna go ahead and create an issue
on just the palo boost github page so
that's it for this video guys I just
want to show you that problem I'm
running into I'll post the source code
for this and the server so you can took
a look at that take a look at this if
you'd like to as well
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>