<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Apollo Codegen | Coder Coacher - Coaching Coders</title><meta content="Apollo Codegen - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Apollo Codegen</b></h2><h5 class="post__date">2018-03-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mfjFF7bYWTg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I want to show you how to use
Apollo Cochin
this is a really cool library that
allows you to take a graph QL schema and
turn it into types for flow typescript
scala and swift now I'm gonna walk you
through how to do this on one of my own
graph kill schemas so you can get a feel
of how this works so the one I'm gonna
be running this on is the boilerplate
that I've been working on but here's
what the schema looks like and I have
the server up and running so it's on
localhost 4000 right now and we're just
gonna go through the readme of Apollo
Cochin so the first step I still go
ahead and install it which I've already
done so make sure you do MPM install
Paulo Cochin next I'm going to
introspect the schema which means it's
gonna look at your schema and then grab
all the type definitions from it and
basically create a giant output so I'm
gonna run this command and I'm gonna fix
it so localhost is running at the right
one so I'm gonna point it at where my
server is my server is running on low
close 4000 and then here's the name of
what it's gonna output schema JSON is
just fine so when this is done running
we're gonna get a file called schema
that JSON and we can take a look at it
and what this is is a giant dump of our
schema with a bunch of information now
this is what it's gonna use to narrate
the types and you can see this goes on
for quite a while and notice our schema
is not that big right this is a pretty
small schema so I can imagine if you
have a couple files for schema that the
schema about JSON output can be quite
big but after you do that and by the way
so I had to give have the server up and
running because it actually makes a
request to the server to get the schema
from it but you can also point it at a
schema that is in graph QL files like
this ok so next we're going to tell it
to generate
types based on that schema now here we
can give it four different choices
whatever language we want personally I'm
gonna choose typescript but feel free to
choose whichever one you want now if I
run this right now nothing will happen
and the reason for that is you need to
tell Apollo cogent which queries to
generate types for so automatically it
does not type the entire schema it only
creates types for the queries you plan
on running or the mutations you plan on
running so what do I mean by that notice
how there's this star star dot graph QL
in this Apollo cogent generate what it's
doing is it's looking for all the dot
graph QL files and generating types for
that so what I'm gonna do to get this to
work is say queries and I'm gonna say
hello dot graph QL and in here I'm gonna
put my query that I have so here's my
hello query this is as basic as it gets
and now we're gonna run this and when
this finishes running we're actually
gonna get an error and the error we get
is does not support anonymous operations
so a lot of times I don't actually give
names to my queries but you can name
them so I'm gonna call this hello and
it'll go ahead and fix this so that is
one annoying thing if you have a bunch
of queries you're gonna have to name all
of them to get this to work okay so I
have it runs successfully and this
output is the file that it generates so
I have operation result types and you
can notice it made this little interface
right here
hello query so not much but we can
notice it is proper typescript and we
see hello string and this is the
expected output from it but you'll
notice it only did this query right so
if I wanted more what I'd have to do is
add more so let's say I want to do this
for mutations as well maybe to create a
user
oops dot graph kill and so I'm just
gonna grab this in my history because
I've run a create user before and we'll
just say use so I'm gonna copy this and
let's go ahead and create one for this
I'll call it create user and notice how
the names correlate to what the types
are called so now if I run this we
should have an extra type now and the
types over here when it's done running
because we now have a create user query
so notice how it created this and you'll
notice how I created this profile object
and it could be null so it will go ahead
and generate all the types for this but
notice this is actually really the
result of the mutation we'll talk about
more about that in a second so whatever
I named this so I could name this Bob
for example the name of that is what the
type name over here is gonna be so
you're gonna want to make a name that
makes sense for this so for example we
have Bob mutation there okay so what I
like to do is actually just name it the
same thing as the mutation in here or if
you have multiple mutations in there
because it makes it really easy to know
create user I just look for egg and
usually it capitalizes this so if it
doesn't I'm gonna just create capital
create users and that way the type now
is a capital C that I can use okay so
this is not super helpful though here's
how you can get more information so
let's say I have a profile which is
gonna be a profile input and we're just
gonna pass that in here so profile this
is passed in a variable so this is just
passing in a variable and notice in my
definition over here I have a profile
input so if you do specify specify
variables and a profile input like this
it'll go ahead and add those in the type
as well so if we come and look at the
types over here we'll notice we have a
profile input which has basically the
type for the input and also the type for
the variables itself so profile is the
only variable that it's expected for
this query now you may wondering why
this is helpful at all and this looks
super limiting right well as far as I
can tell it doesn't seem to have any use
on the server itself like it does not
help you type Apollo server whatsoever
the resolvers or any of that at least
apollo Cochin but when using this in
conjunction with your client for example
if you're using this with react and
you're using typescript and react and
you're wanting to make requests to the
server
Apollo Cochin is actually super helpful
because you can create these type
definitions over here which you can then
use in your react application so that's
what I want to do in tomorrow's video
I'm gonna show you guys how to actually
take these types and use them in react
and actually use them and make them
useful because right now they're kind of
useless in their current form and really
they're supposed to be used with a
front-end or whatever client is gonna be
using these as far as yeah let me know
if you guys have are able to get this to
work on the server as well there does
seem to be some other projects which I'm
looking at not made by Apollo that will
also create other types will basically
create a type for this whole schema here
that we've generated and then you can
use it for example in my resolvers so
right now these have like type of any
and that sort of thing
we would like to get the exact type for
the resolvers and so really we don't
need to do that it should be automatic
and picked up from the graph QL schema
so I'm gonna be checking out some
libraries about that but stay tuned
tomorrow we're gonna be going over how
to actually use the types you generate
from this and make these actually
useful so that's it for this video guys
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>