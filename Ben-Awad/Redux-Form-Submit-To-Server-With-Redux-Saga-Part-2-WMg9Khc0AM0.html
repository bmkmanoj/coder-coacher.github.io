<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Redux Form Submit To Server With Redux Saga - Part 2 | Coder Coacher - Coaching Coders</title><meta content="Redux Form Submit To Server With Redux Saga - Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Redux Form Submit To Server With Redux Saga - Part 2</b></h2><h5 class="post__date">2017-03-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WMg9Khc0AM0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys when I left you last
stuff was not working my Redux saga was
getting messed up
and I figured out what was wrong was it
because it wasn't liking this async
function I'm using create react app for
this and I'm not really sure how to
change the presets to actually get Redux
saga to like async functions so if you
know how to set this up to get async
functions working with Redux saga please
let me know I've done it before but I
think because I'm using a create react
app for this project for whatever reason
the configurations for this it's not
liking it I'm not sure configure attea
to work so if you've used your create
react app and you've gotten Redux saga
to call async functions okay please
leave a compliment show me how you did
it because I would love to know but for
now to get around this issue what we're
going to do is we're going to get rid of
async instead of using this cool stuff
that we were doing we'll just do a
regular old function and do fetch the
old-fashioned way so let's get rid of
that we'll do return return fetch and
then comment that over and then do that
then and then response and then we can
return response dot JSON and if it
doesn't work let's put that there
actually should we now let's type it
over once you dot catch air we're in a
console dot log air
okay so we just changed the function
from being async to being regular and
then doing basically the old-fashioned
way to deal with promises so now if we
come to our server over here looks like
it renders okay now let's test it out
so you notice it prints it okay so it
did work now but you notice how that
worked nicely and there's nothing we
really have to do if it submits and it
works right we can then just like
redirect them to another page so like
here we could say redirect to another
page but if they fail what we'd like to
do is for example if we get Bob Bob
notice how it doesn't show the error
anymore and we want it to show the air
so to basically add that in is we need
our redox saga to talk to our Redux form
so to do this we're gonna say start
submit stops emit these are two actions
that come from Redux form and the first
thing we're going to do is whenever we
make our call we're going to start
submit and then we just say what form
we're submitting and this is going to be
the contact form I'm and at the end we
say stop submit and then we pass in any
errors that we have so I'm going to say
let airs is equal to an empty object and
then if we get an error
what we do is Ayers is equal to result
dot errors and that way we fill it so
now I believe if we do Bob at Bob oh and
it did not work are we updating this
so console dot log will say air console
dot log errors let's make sure we're
updating it so Bob Bob Bob so we get an
error and we're passing the object back
and it's not showing it here okay so
stop submit is not working we're
starting to submit that is working okay
but then we're doing stop submit and
we're passing it back it is not updating
it for whatever reason so why would this
be if we go to Redux form Redux one
bring up their menu real quick and I go
to action creators this is the action we
wanted to use starts omits oh is it
because we didn't call it contact
possibly I'm using the wrong name for
the form let's double check them using
the right one
I hope I called it contact just look at
the code real quick here I see if
there's anything I'm seeing that could
be off
nope submit action looks good this looks
nice so it should be working
start submit flips the submitting flag
to true populates submit error for each
field so notice how I write here errors
and it passes that back so we should be
seeing the heirs so to debug this what I
like to do is whenever there's anything
with a Redux that is not working a
reducer of some sort I'm just gonna do a
test export default State sure
action return state I like to set up the
dummy reducer I like just to print the
actions to see if they're even happening
alright and then we can go to our route
deucer import test from test and then we
can have that guy here so now we open
this up we come back over here notice
we're getting all the changes and now
when I type Bob you can see all the
change is happening and let's just clear
that now when I submit let's see what's
happening here so request submit set
submit succeeded all right so this is
what's happening err false
I don't know what's happening do you
guys see how that rendered really weird
let's reopen nerd tree okay stuff is
rendering weird I'm just gonna get out
of them reopen it alright so this is a
sequence Oh expected reducer to be a
function this is a function
it's for default function here action
returned state wait what doesn't it like
so something just broke oh we messed up
this file this file has been corrupted
export default route through scenario so
I guess when I even messed up it just
messed up that file
okey-dokey back to what I was talking
about so we have Bob Bob Bob at
gmail.com so clear the console submit so
here's the sequence of actions you
request a submit we set submit succeeded
and then we're pretty much ends right
there so what I need to do my components
I go to my form I want to do a console
that's down here is this console dot log
submit function done I want to see if
this request submit is happening for my
saga or not
so submit function done request submit
so this request submit actually think it
is happening so if I come back to
actions sagas field if I get rid of this
stop submit I'm curious if I found the
one stopping it or not Bob Bob clear
that I'm not so I'm gonna put start
submit down here clear that so set
submit succeeded so this is not working
at all so let's console.log start submit
okay so start submit okay so the Oh guys
I'm being so dumb right now that's what
I'm doing wrong I'm being so dumb I
apologize for this so much
notice how I'm doing start submit right
now well this is just an action that's
doing absolutely Duffing to actually
dispatch it I have to yield put and I
was not doing that I apologize
now I believe it should work that's what
it was clear that all and sure enough it
populates here okay so what I was doing
wrong is I was calling this function
start submit but that doesn't do
anything start submit just basically
returns an object to actually dispatch
it to the and like change the Redux
state which is what we wanted to do I
needed to do yield dot yield put and
Redux saga and so when I do that for
both of them it now works so I can get
rid of all this debugging code so if I
come back here nerd tree can destroy yes
please test does not exist anymore
come back to my saga so we can talk
about those for a second and we can get
rid of all these console statements so
now we're able to pass the error back
and the error that you pass back here is
then given to redux form and it updates
this right here so that's how you get
redux all go working it's a very similar
fashion so just to summarize what
happens is we start in our component
we call submit action so this this
function right here we submit an action
this dispatches a Redux action to redux
we're passing in all our data this is
gonna call this function right here
which is the dispatched it passes the
data that we want and then our saga
which is listening for actions it picks
up the request submit action and it
calls our call submit function it passes
in the action we grab that data um that
we get passed in here from the component
and but before we do that we call it
start submit because we're basically you
don't want them to keep submitting while
we're making this async also we start to
submit did we actually make the let's
make this bigger so you guys can see it
better we make the call to the server
which we have up here then we get our
return value of what the server says we
check if the server returns any heirs if
it does return an error we set up a
reducer and we don't really need these
because our our app doesn't support them
but if you wanted to you could for now
all the important one is right here when
we stop submitting and it's important to
stop submitting whether or not you have
an error and if there's no error we're
gonna submit basically an empty object
and that's fine
but if we do get an error we submit
there right here and then that when we
submit stop submit and we pass an error
it'll go and update this field that has
the air so I hope that makes more sense
and you understand how to setup redox
Agha with redux form it is a little bit
more complicated as you saw if there's a
lot of quirky things that can stop
working and it's not an easy thing to
set up so if you have any problems let
me know in the comments below and I
would
going to help you figure out and get
this set up so thank you guys for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>