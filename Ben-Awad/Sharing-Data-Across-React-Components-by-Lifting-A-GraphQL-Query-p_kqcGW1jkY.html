<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sharing Data Across React Components by Lifting A GraphQL Query | Coder Coacher - Coaching Coders</title><meta content="Sharing Data Across React Components by Lifting A GraphQL Query - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sharing Data Across React Components by Lifting A GraphQL Query</b></h2><h5 class="post__date">2017-10-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/p_kqcGW1jkY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we got our channels working we
can click on them and we see how in our
URL up here we are actually changing the
current channel or in but right here
we're displaying it but we don't
actually see the channel there and the
reason for this is our sidebar is not
passing the data over here so if we look
at our code our sidebar is kind of
encapsulated and we need to in our
sidebar we are fetching the data the all
teams query and that's how we're knowing
what getting the data for our channels
but then over here I'd like to know the
channel name for my header in my send
message component that way I can see
those so this is usually known as
lifting up the state but since we don't
have any state this is really just us
lifting up craft QL query so instead of
putting the graphical query and sidebar
we're actually gonna make it and view
team so we're gonna do a quick refactor
and add graph QL here and then we can
pass the channel name is and so we're
gonna copy this paste it in here and
instead of sidebar we're gonna do view
team and we need to import these guys so
import graph QL and that's coming from
react Apollo and we can grab our import
for our graph QL here so now we're going
to be pulling in the query up here so we
can grab the props so before we're
grabbing what loading in all teams so
I'm gonna make this
a regular function now with their oops
with a return statement and that way I
can do some extra stuff at the top so
I'm gonna say data we're get-- loading
and then all teams oh it doesn't like it
groups it doesn't like it cuz i didn't
put a comma save there we go
and i'm just gonna undo an add right
here if loading we're gonna return false
any null that way we do a blank screen
so now we have all teams so basically
the stuff we were doing here we want to
do over there so i'm just gonna copy
this and let's see it all teams i can
just pass in all teams to this component
too so the current team ID is really
just params team ID so let's grab const
team ID from params and really what we
could do is just actually Deacon
structure it up here so team ID
and use that here and now find index
we're getting from low - so let's copy
that move it up here so now here to our
sidebar we're really gonna pass all
teams and we're grabbing that straight
from our prop and then also the team the
current team and maybe we can just pass
in the teams we can actually create this
object here because I'm trying to see is
there any place else for use old teams
no so let's just pass in team and teams
and then here we can actually do the
same the same thing we're doing here or
we're creating the or mapping and we're
grabbing the first letter there we go so
now teams and team and so in my sidebar
over here I'm gonna get Const team I
just come from the props now so we can
delete all these teams and team so past
the teams in here and then the team
we're already using here so I can get
rid of the graph QL now we can just
export default up here and we don't need
any of these things and we don't have
this anymore
and we don't have loading we still are
gonna check out while we check out the
token Oh to get the username yep all
right so the rest that looks good so now
this should work the exact same clicking
on these variable a switch we see our
team's still here or sorry our team's
here and our channels here so everything
still seems like it's working let's
create a new team and make sure it still
shows up here so
we'll say see yep and I can switch
between the two teams okay so notice how
we just took all our our actual graph QL
request and add it to this view team
component and took the actual choosing
which team aidid are with the team or
grabbing so now that what this allows us
to do is here to just get the current
channel name so the way we know what
channel is actually from our parameters
so we have up here a given channel so
channel idea I believe this is a
parameter and that's coming from our not
that index but here yep we call it
channel ID and if we see if we click on
that we can see it pop up though notice
when I first change channels we don't
have a default so that can be null so we
need to be careful and cover the null
case for a null channel ID so now we
want to do basically find the current
channel so current channel is equal to
so we're gonna check if we have a
channel ID if we do and let's cast this
tuple in and I'm gonna do the same thing
here I haven't so you notice how I that
casts this to bully and I haven't been
doing that but someone made a comment
about how it hurts performance and also
it's it's basically better just a better
style to cast it like this so I'm gonna
start doing this mainly for the
increased performance too because it's
kind of sloppy not to cast your your
variables to ants we're not in stably
and so I'm gonna be started doing that
so cast this guy to a boolean so if the
channel is undefined we're gonna handle
that over here otherwise let's grab the
channel from our team so channels and
we're gonna do fine index again so we'll
say Const
channel idx and we actually can follow
the same logic we use up here to choose
it so I really just copy this except
instead of doing all teams we're gonna
do team dot channels and I believe let
me just look at the all teams query we
are grabbing the channels yep
and we're looking at the channel ID and
we want to find the ID and otherwise we
just get the first channel is that what
we want I'm trying to think if the first
channel will always be the general I
guess grabbing the first channels fine
so let's do team dot channels and grab
the first one oh we're ready
I was I was grabbing the first one we
really grabbing that here so we're good
down so now our current channel we're
gonna pass in the name and stuff here
actually let's just call it channel
since we're calling this team a new
channel name and we're gonna pass that
to our header as well
okay so now we should see as we switch
channels of the names here so now we're
currently in channel 1 and channel 2 c9
and awesome so now as I'm switching
we're aware of what channel we're in
very cool so now when we get to the
messages we can just pass in what the
channel ID is down like this and do
channel dot ID and that way we know when
we're typing a message down here I'm
like Volvo and hit enter we know which
channel to actually create the message
in so that's important so when we have
multiple components that are on the same
level that need to know the data we need
to lift up where we're actually getting
the data from and not put it down in our
sidebar but bring it to a shared
component like mu team and pass it down
across all of them so that's pretty good
we in the next video what we're gonna do
is actually start adding members to the
team so we'll add a little link button
here I can click on we'll get a little
modal pop down and we can start adding
users and then we can finally start
chatting to users once we have other
users in our Channel so that is it for
this video guys thanks for watching and
as always the code is up on github
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>