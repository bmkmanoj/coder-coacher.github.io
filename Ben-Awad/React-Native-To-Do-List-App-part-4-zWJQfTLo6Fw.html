<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native To Do List App - part 4 | Coder Coacher - Coaching Coders</title><meta content="React Native To Do List App - part 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native To Do List App - part 4</b></h2><h5 class="post__date">2017-03-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zWJQfTLo6Fw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back so what I left you
last you actually got our to do list
kind of working a little bit on and I
just broke it inter on the server so we
were able to add to do's and we saw it
live update in real time so that was
really cool but we also wanted to see
all the to do's previous so you can add
stuff but we would like to be able to
see them before before adding them for
example there's a bunch of to do's in
this to-do list I'd like to see this
list populated with all of them so to do
that what we're going to do oops not
this is we're going to go into our
routes that's our homepage and we're
going to mess with the view so this
query we actually need to get the result
of this query and set our update our
redox state using a reducer sending an
action so what we're going to do so i
actually just look this up you can get
the result of the query by waiting for
query to be added to the props so notice
down here I name this viewer then right
here we're adding it to the props right
oops actually I just had an idea ready
the props right here we could actually
just do it right here so it was going to
say we wait to see till this is add the
props and then we do stuff we can
actually do can we coming to an action
right here own props props yeah we can
so I'm going to do props dot own props
dot set to do's and this is the action
we created and now I do props top viewer
taught and I just need to get the to do
list I'm actually not sure what the so
I'm not sure at on the path to actually
get the to do's from the viewer so I'm
just going to console.log props be real
quick to see it and also I can get rid
of this because I just had this idea so
refresh ok so this dot props viewer
viewer and introduce
and three fresh undefined is not an
object so props that viewer dot viewer
to dues I did prop stop viewer right
prop stop viewer printed this for me I
believe dot viewer I'll just see what
that prints on solo dot log viewer okay
so this is an object and then we did up
to dues right
why is to do is I don't understand why u
dot to do's is undefined IC to do this
right here so this is very weird viewer
undefined oh okay I see what's going on
so for whatever reason at first it's not
so if oh and what if this query gets
called multiple times we need to have a
flag so I'm going to make a flag up here
but set to do's set to do's called is
equal to false let me say if prop stop
viewer dot viewer dot to do's and not
set to is called and we can call this
function and it's set to do is call it
is equal to true and then i'll let you
run that still still going to give me an
error
I'm guessing that prob stop viewer talk
here is not a thing possibly yes that
was what the problem was so we're
getting this warning set state cannot
update during an existing state
transition I'm curious why you're
getting this little air we're getting
this pop-up so that's nice I'm guessing
it doesn't like us doing this here so
I'm going to comment out real quick and
make sure okay so we're getting that
warning so I want to try doing this and
the will receive props so X props top
viewer dot loading so if it's not
loading it should be there so I say next
props first I call this top drop stuff
set to do's and next props and I also
need to set the state or a flag set to
do is called 0 false set is called this
stuff prop set to do next props viewer
viewer not to do
and this dot said tues call is equal to
true that the correct syntax method
called coin will receive home has a
method called component will receive
props did you mean oh it's spelled wrong
we copied and pasted this and comment
out this alright that look like it
worked so just then we don't get a
warning so let's just do that there and
now when I create more I'll last let's
scroll doesn't last scroll okay let's
create on a little X here so we can
actually delete what's that deleting to
do's so let's go to that element yeah so
by default has this little flag thingy
what if I don't want the little flag
then you know a different icon list item
key title left is there a right icon yes
that's what we want so let's set a right
icon
oops and we want to set it to an X which
we can do we have to give it a name I
believe this uses what kind of icons
does this use icons take the name of a
material icon as a design okay as a prop
so if i can find an X here and I can use
that I believe you would think an X
would be pretty commonplace so you
delete cancel maybe remove okay just go
through real quick
there we go clear that's what we wanted
so named clear fresh that nice so now
how do we set like an on-click for that
icon
we actually might not be able to do this
let's see on press on long press rate
icon we might not be able to put like a
little button that's unfortunate I'm not
seeing something that like let's just
put a non press on the right side so
we'd be able to know if they like just
clicked on this X rather avatar on press
I'll just put on press to see what
happens on press
you
doesn't have like a nice little clicking
thing
I'm actually not liking this list view
very much I think we might not do a
listview to what our other options are
maybe we'll do like a card view what's a
linked list element oh it's just a list
avatar tile component grid component
card component pricing tab bar think
card view is kind of over wanting oh can
we do a list view of cards I know it's a
card that has a list inside of it okay
let's see what else they have before we
start making the card grid component we
might need to actually use that later
slider component tile component I don't
understand what this tile oh okay it's
kind of like a card with an image thing
able to use a card and we want cards in
like a scroll view
so let's get rid of this list let's like
it actually get rid of it quite yet we
want a bunch of cards I'm not seeing
like just a card a list of cards what I
want I think we're just going to put in
a scrollview then scroll view yeah
neither we don't need this anymore okay
so scroll view
on scroll weapons if we just do like a
plain-vanilla scroller so what if I just
do too far so if I just do school get
rid of the list we can keep the map
because we're basically going to map and
then let's put cards
so import card
and ours is only going to have a title
for now and we can add icons and stuff
if this works so we're going to have to
give it a key there's a key of I and a
title of a lot text it's good tea
because it's really a to-do item okay
three fresh that cannot bind variable I
it's right here oh I need to wrap
everything and curlies area okay nice
we're not able to scroll yet I don't
know if that's just because ok area
that's a nice scroll we're not seeing
stuff at the bottom still but that's
fine I think this will give us more
control because then we can put icons
and stuff on the side so let's just try
adding an icon is so card
mid font family okay so what if instead
of doing a title we just put a text in
here so get rid of the title let me just
say text T dot txt I mean let's just
using the card as a container then see
how that looks okay that looks kind of
nice now I like to add a icon just a
head at the top so import icon and we
let an icon button we need to make there
we go that's what I want
so I con oops come on my clipboard is
being difficult okay but in and I'll
just see what that looks like woohoo the
cool looking icon alright but we want a
clear icon and we don't want it raised
oh that's cool i really like look at
that icon I was if we don't raise it
okay we can keep it read for now I
actually kind of like the Rays I mean it
looks goofy it just looks so clean them
and I like how it it hovers does it do
that when i get rid of the raised does
it fade a little bit see it does a
little bit you can you still get the
button click feel okay so we're gonna
have to do we have to do no we can do
that grid styling we could do a grid in
here grid grid grid grid grid grid
component okay so grid and column
this is what we want something like this
now we want the text and the big column
and the smaller column or you want the
icon and why don't we make this a
component so it's not just like this
dysfunction to norma's so let's copy
this I just want to see if this renders
first and if it renders we're going to
move all this stuff to a separate class
that way it just gets a little bit less
chaotic nice
alright so create another component so
this will be to do item and okay how are
you going to do a to-do item so I want
to make this a peer function so export
default and then the props I actually
want to enforce the props that the user
passes in so go back to the view
I think we're going to make this
actually a class still oh I'm going to
call it to do item extends rack dot
component render return
there you go just take this whole card
care copy our imports
and we're also put those together and
actually I don't think we're using
button on this page actually we might we
actually are so actions we don't need
we're going to need some react native
stuff I think and then we do need to
react okay now we do the map we're now
going to be mapping do we just give it
the text item the text object no we want
to actually give it ok so it's wondering
if we should just pass in this object
the T object or should actually pass in
the values and I decided we should pass
into values so if we go to the top here
you ever to do form to do form which
we're importing from that and we also
want to import to do item from
components to do item and just it's good
to put your local stuff your local
components at the bottom of imports
alrighty so we have the scrollview you
have this now I want to create a to-do
to-do item text is equal to t dot txt
completed is equal to t dot completed
and the reason i want to do it like this
is in case I ever change the name of the
to do object
to come and remap it or comer you map it
in our component I just change it here
so for example I want to change this to
maybe content someday I would change it
here so we pass in text completed and r
give it a key we don't need to do
anything with that component I think
that's fine for now okay so I think
we're fine with that so now we're just
messing with this page so the first
thing I want to do is require prompts so
scrollview would keep up you can change
this tab so require props oops react
type checking with prop types so we
basically are enforcing that they pass
some props in like apodo prop types
default prop types
so we're going to say to do item dot
prop actually we can just pass that in
right here so just put it right here
static prop types static static
uppercase me okay prop types is equal to
so these are the props you have to pass
into my to-do item for it to work you
need to pass it some text so that'll be
text and then I'll be copy this it'll be
a string dot is required is required
forces you to provide it and then so we
need text and we need completed which is
a boolean those are the two that we need
so now down here I can say this stop
props text and I'll grab the grab that
and I might be messing up the syntax of
this terrific try it and see
line 19 oh there should be commas
undefined is not an object prop types
boolean okay it's a bull zero cannot
find variable I oh we don't need this
key anymore please refresh prop types
was defined as an instant profit use
static property okay there we go now
we're getting the syntax highlighting
that I was expecting warning field prop
the prop completed is marked as required
to do but whose value is the value is
undefined okay so we're not passing in
completed do I say complete maybe over
here complete
I think everything is called complete
all right now let's refresh let's value
is undefined so I'm wondering if T dot
complete so let's just come up here and
console dot log this dot next props dot
viewer got viewers aptitudes and let's
just see if any of the completed is um
undefined oh there we go we're not
asking for it there we go now should be
defined there we go okay now let's just
mess with our to-do item so this is
looking quite nice and when i press this
icon it says hello right very nice now
instead of saying hello what I'd like it
to do is I'd like it to delete itself so
to delete an item we just need its ID so
let's implement on the server first I'm
just going to hop over here to the
server and what's up nerd tree to hear
i'm liking nerd tree okay so let's touch
the schema first
this will be a mutation this will be
delete to do and I guess we can return
the deleted to do nope we all want to
turn anything I don't think so graph ql
mutation that returns nothing i'm not
sure with the sin taxes
not respect I'm not expecting anything
to be returned from the mutation how do
I ok we'll just try it and see if we get
an heir and so we're just going to pass
in the ID and it'll be a string a
required string and this will be
resolvers create to do delete to do Oh
eat we also need to pass in a token so
ID token context and we're actually just
not going to return anything we're just
going to do the deletion
and let's just see if this compiles
loops and actually I'm going to just
visit our resolvers I was consis we have
our tree up there our index where we
console logging we don't need any of
these console logs anymore okay this one
is fine resolvers console viewer oh yeah
now let's start server
okay as I we expect to be in error well
just okay oops the wrong thing schema
delete I guess let's return the to do we
delete I guess index now revolvers turn
just an empty guy for now
now i'm not expecting air so i'm not
sure what this is parce so is there
something wrong with the schema again
delete to do oh area they could I think
it was just I didn't put a comma and
actually know what maybe our schema was
fine let's maybe your schema was fine
not returning the to do oops not that
one that one now does that give us an
error yeah it does okay we need to get
to do this resolves nicely now so let's
actually delete this so that's going to
be returned to do saw it gets delete
let's uh array it might be removed
there's one easy way to finds out
feathers rest and actually like the
documentation better here we go remove
and then we give them the ID so we pass
an ID and we just need to pass in our
context so provider context top provider
token and actually i'll also need to add
a subscription for we just like for
example when we delete this to do we
need to add a subscription for deleting
the to do on the client side too because
the way I
click this X we're going to delete on
the server but we're not going to update
our UI so let's fix that I guess first I
want to make sure this works though you
have delete to do here that looks fine
so let's try calling it I guess I
actually I'm gonna have to pass a token
in let's just call it from the client so
restart the server make sure that's
working and we are now let's create that
graph ql mutation so we can give this
export default so now we're doing graph
ql gel and let's just copy and paste the
template i have
okay paste that this will be oops delete
to do mutation mutation and if we just
go to graph ql we can get the actual
vacation that we need to do delete
should i refresh civil area ID token
oops okay and we actually want to pass
in two parameters the token and the ID
so be delete to do passing in a delete
to do mutation and then this will be
delete to do return mutate and then I we
don't actually need to do anything after
because we don't actually need to update
we're not going to update this state
this way we'll just do that will delete
the to do so on press 0 we also need to
pass in the ID and that's going to be a
string and then on press this dot props
dot delete to do passing in this da
props thought ID so now that view pass
an ID to our map ID load tita idea
alright let's refresh and see if the
delete works oh you need to just copy
those imports over oops too fast
I element type is invalid expected a
string for built-in components or class
got an object tita ID pass an object
that looks good to me is something else
no oh export default default delete to
do to-do item we just grab to export and
when the export we also need to wrap it
with our graph ql mutation prop IDs
marked as required the value is
undefined alright let's go see why
that's undefined ID reactive sring
required that looks good from this side
that means when we're passing in we just
need to get the ID there we go delete
data wrapping to do items expecting a
variable oh we didn't pass a token to do
and we also need the token hey actually
string put it down here because it's
kind of different so we pass an ID and
this props thought token um and then the
mutation variables and then when we call
this how do we pass in variables here
maybe
passing variables in a different
component the login page I think we did
it yep variables email password okay so
it's going to be ID in token ID alright
let's see if I could still eat it now oh
yeah we need to pass in the token from
this side now so go to map um and then
token this stop prob stop too I don't
like how we're just passing this token
around okay so notice how nothing
happens but when i refresh it's gone we
need to set up a subscription so now
when I delete this it a we see it update
live so deleting is working that's good
so let's add this subscription so should
we make this a new subscription yeah we
should make this a new subscription so
go back to we're going to go back to the
server I made up to the schema here i'm
going to say to do deleted and then
we're going to pass back the to do that
was deleted
whoops whoops whoops whoops that mean to
close nerd ringing in so to do deleted
and we're actually literally just going
to pass and the to do there oops nothing
special happening or Lou is going to be
the same and then you remove dot then to
do that was removed I'm hoping it's
returning it to do anyway now we do
pub/sub I'll publish to do deleted and I
pasion it to do ok and now can we
subscribe on a mutation call let's see
so the back end is set up and let's get
out of here just to get status get at
all git commit add delete to do mutation
and subscription sub description get
status I don't you just ask to get push
and then restart the server to make sure
that compiles ok or runs without error I
mean keep saying compile and then from
this side we need to basically do the
subscription thing that we did here
subscribe to new to do's props thought
you were it's
kind of like a query and actually maybe
I changed my mind again I feel like we
should just use this as a controller
okay okay I changed my mind guys we're
going to change things up a wee bit
we're going out one subscription it's
going to give it two things though so
then schema we're going to call this to
do changed we're going to pass it to do
so we're just basically going to do
actually not we're just call us to do
it's a to do because we also want to
change it on update possibly later and
the other thing so you're just
subscribing to do let's go back to do
changes will call it anytime but to do
changes in any way you're getting a
subscription for it so you see that this
happens it on our resolver because we're
doing the same thing here to do changed
we should pass in a to do and actually
go back to the schema this will be a
Type B crud operation crud operation so
type so it's going to be a operation
which will do you're just to a string
yeah they'll probably easiest the
operation that happened and then of
course the to do which is of type to do
both of these are necessary I'll just
call it to do crud
this returns it to Duke red which is an
op-ed to do so this is our to do then we
also return the op
thank you can maybe only pass one thing
so ok so to do deleted right so we're
going to do pass in the to do and off is
going to be deleted deleted now up here
to do added both of these to do change
now and let's just console dot log
deleted I I want to make sure it
actually is passing me to do back that
was deleted not something else ok so the
operation here is created and we pass
that to do ok so now back to the let's
run the server before we go back to the
client I will source does that work it
does it doesn't figure out a comma
somewhere it looks like did you changed
up that looks ok here it is so calm I
missed I put the comma here and I did
save that
scheme air something to do change to
find the resolvers but not to do changed
to do changed so what I call in the
schema
actually a two changes sounds like a
better word for subscription you changed
alright that works so let's add that git
commit make subscription general all
right now we work on the client ok so
now subscription data to do added so now
it's going to be to do changed so now
it's going to be up to do it's going to
be subscription data data to do changes
so if off is equal to triple equals I
guess created show you a switch nests
which grains are kind of gross op is
equal to deleted and should you an else
and console error some stuff yeah
and we really only need to pass the ID
back so to do that ID to delete delete
to do so if it's created we're going to
add the to do if it's deleted or
deleting what to do that looks good now
we need to actually create this delete
to do action delete to do passing in the
eye dee dee delete to do now we need to
add this to our reducer the to do's
reducer now we have a delete and now we
want to filter so let me just look up
the syntax for filter JavaScript write
JavaScript arrays what we want to do
is big enough value is greater than 10
okay so we're going to return state dot
filter and then we're going to say to do
where to do is not eat to do dot ID it's
not equal to actions ID so okay so if
this returns true then it keeps it
filter for this is big enough so filter
for to do we want to keep the ones that
the ID is not equal to the one we're
deleting gal looks good unhandled grab
kill subscription air cannot query field
Oh to do at it that's right to do at it
is not a thing anymore to do at added
added to do changes oh and to do changes
is different because now we have a just
go to graph i ql so this is subscription
to do changes now refresh buddy we have
to do changes okay
go and get the OP and need to do can't
read property to do of undefined this is
the server error usually it returned to
null oh no that's fine I think that's
fine this might be a problem anyway
we're getting into an operation we're
also getting it to do and put the to do
we'd like to get the ID you text and the
completeness of it pretty five please I
believe this query is correct but that
the server just like crapping out like
that and not working is worrisome that
kind of makes me think this won't work
I'm just kidding it just straight works
beautiful beautiful we just delete all
that garbage mmm new problem that's fine
undefined is not an object evaluating
tid
you
when passing this dot props and that's
it to do form this stuff t the distal
ttid to the ID we are not doing tita ID
here why is it saying undefined is not
an object evaluating tid get rid of this
you know that works I mean we're doing
tid here guess let's console dot log
this stop props thought to do is and ID
work when we create it we're not getting
the ID it looks like comma undefined
comma undefined looks like oh there we
go
I was just doing something kind of noob
so I had had the old code there from
copy and pasting but now we just have to
distract it to do ok so to do this is
coming along quite nicely so now we have
the delete and the create future working
let's save this so get status well our
files did we change good commit so we
went from a list view two cards and
implement delete ok what do we want to
do next why don't we do should we do an
on-click so we can cross out ok let's do
complete next let's do let's do that so
this will be an on-click for our two up
to 40 I just closed no treated so it
will be source routes I'll be in our
to-do item are wondering if card has
just an on press I'm hoping they do
because it'll be very nice for this on
press and then we're going to console
log complete for now ok so let's refresh
that nope
doesn't have it so let's go to the
documentation real quick maybe it's
unclick
you
yeah it just did not do one I guess we
can do an on-click for the text that's
not as cool though syntax error on press
0 what I would really like is a nice
little like animation when i click that
would be nice so the only thing i don't
like about if we did the button click
there is like for example if I click
right here nothing we get complete when
I do that nothing nothing if I do flex
one this flux makes it expand basically
me if I just give the padding equal to
the or better idea guys what if I do it
on click for the column under if it'll
let us do that so grid just grid have an
on-click yes it does that's beautiful
so this will allow us to get a much
nicer click yes yes that's better that
triggers it that triggered no it doesn't
maybe more in the middle but it's I want
to see what this size of this is can
give it a color size container style
container style color blue that did not
work background color maybe nope how do
i set the color
go past the container style react native
set background color we don't need these
guys anymore this is background color
huh glue works comma flex one what does
that do that break anything don't do
anything at all note that doesn't seem
to do anything at all I want the
background color to change so I can see
it why does background color not work
styles or style maybe ha I'm being dumb
flex is one on our string note that
doesn't do anything there we go ok so I
want this to be a little more squishy
the card the card has like patting
itself
so card where your props here we go
container style outer container style
doesn't seem to have what we want I
don't like how narrow this this is I
don't like help the card does i have it
on click square knowing it's nice
looking um so how do i do that i'm just
going to leave it for now I'll i guess i
can come back and make the where we
actually click the button better so now
instead of complete what we want to do
is we're going to be doing in some more
server work first we don't need to touch
the schema yeah actually we do need
touch the schema we're going to create a
new mutation called update to do so
we're going to take a to do as a
parameter
and we spit out the new to do that looks
good so delete and we don't need these
because we know it worked so update to
do and again let me just look up the
syntax for this feathers j/s would I
just look up rest update
there was a nice little chart that I had
that showed me the area update takes an
ID and then the new data okay so it's
going to be ID token text and complete
is going to update and the new object I
don't know if I should drop that to a
new line this looks a little awkward but
we'll keep it so the new data is going
to be having we don't touch the ID I
don't think I just give it text and
complete then don't need this to do
changes updated and then we have to do
and then we pass in the to do the
updated to do back to the server all
right that looks good it and let's run
that first before I commit this i can
add all just in preparation nope doesn't
like it looks like i again forgot to add
a comma to the resolvers update no
just read the air then possibly in the
schema we're having a problem update to
do passing in a to do and a token oh
listen resolvers to update update this
is all under to do area this isn't
freaking unwieldy function drop it to a
new line that's really looking ugly I'm
gonna have to throw your on the server
I'm gonna have to lent this whole
project we can clean up the space and
stuff okay still a problem I was
thinking it was because I did do and it
doesn't let me go up I was thinking it
was because I didn't have to do here and
grabbing the text and stuff would be a
different problem though see what it
says expected input type what's an input
type and variant
node modules expected input type that is
graph ql just has amazing errors to do
we should have that stuff just for a
second I want to comment you out return
nothing
so I just want to see if it's my
deconstruction of the object that
doesn't like or if it's something else
nope still doesn't work so let's I don't
think it's what i have here update to do
think it's something with a schema oh
shoot it's going to be fun I just switch
pages so I can't undo so update to do
update to do
passing in a to do in a string I'm
guessing it doesn't like that i use the
to do type may be here I don't know why
let's try a string oops yeah okay so
that's not what it that's what it's not
liking okay so what I can do to the
update is I can pass in an ID which is a
string pass in text which is the string
get rid of these comas and I could pass
incomplete which is a boolean all these
are required should keep that required
for now so I'm a defaults resolver now
we can go back this is fine now we
deconstruct the way we did before we set
ID text complete token oh shoot I didn't
do this right there are
okay we've got that running git commit
adds support for update alright so we
got our update on the server looking
good hop back to our client and do it on
the client side now so how are we going
to do this so it's going to be mutation
similar to this so we'll just copy that
so update to do mutation you rotation
and let's do the graph iql mutation
update nope you know update update
refresh sometimes the graph iql is not
up-to-date stuff so that's the ID text
some other stuff and then what else is
there content no complete which is true
we'll say and what is the last thing the
token that's right
copy that so we have a lot of variables
so the first one we have is the ID which
is a string then we have text which is a
string we have complete just a boolean
and then we have token which is a string
i D whoops text complete complete and
token grab the token ok and then when we
update we want the ID we want know when
the update we want actually what we
don't need anything we update because
we're going to again update it through
our subscription we could update it
through the callback from our mutation
but we're just going to let everything
do go through subscription because that
seems to be a very nice way to do it
update to do update to do mutation
update to do so pressing the ID text and
complete ID text complete and token now
let's grab the compose function because
I don't want to stack these too many
times explore default compose compose
lets you instead of wrapping these guys
i can basically your call a function so
delete to do and update to do it's like
that and now when I press we're going to
do is we're going to say this stop props
that update to do this stop props the ID
this stop props dot txt this stop props
that complete and we inverse it
and this dot prop stop token alrighty
now I want to come back to over here now
we have to do an else if is equal to
updated we pass an update to do so our
new to do and to do that and they can
grab it from this so update to do
passing in it to do so create an action
update to do update to do passing in the
to do and now I go to to do item sorry
we're not doing to do item we're going
to the reducer update to do okay now
this is actually an interesting thing of
how we're going to do the reducer
because we need to find the item that
we're no changing and then basically
mutate one of its values but we want to
it functionally so update do sir update
array object reducer because we want to
keep it here I'm just seeing if there's
like a nice way to do this because we
basically want to find the new value and
then change it
updating the value or is the payment
okay here's one way to do it I don't
like this way because it requires a for
loop but it's um maybe it's fast enough
okay so this is how how I the this is
the algorithm that when i use so let
this will be left and this will be right
so we're going to do a for loop we're
going to loop for and i actually we
don't need a light right we just need to
do left so const i is equal to 0 I is
less than state length length i plus
plus so if I'm going to do this if state
ID ID is equal to action dot to do that
ID then we break else what we do is we
say left left up push state I the value
okay so we're basically looping through
the array until we find that to do that
we want to change and the to do we want
to change we break out and then we want
to return
an array where we get the values of left
and then our new o to do which is action
dot to do and then the leftover values
which is going to be state dot slice and
then I think the rest of the values are
I this this might be this mutation might
be wrong we might have to fiddle with
update to do let's refresh and see I
feel like we have a buttload of errors
okay can't find variable I let I equals
0 I real ideas marked as required to do
item values undefined text prop okay so
that did not work that I don't think
it's anything it made to our reducer we
have different problems will come back
to her reducer update to do we just cut
the ID we needed also text and complete
okay so it looks like we deleted those
guys
huh we're just like I don't know what oh
this is not working our reducers causing
problems huh now now our reducers
causing problems I need to do dot I
didn't do dot dot no items dot alright
so this needs to be i plus 1 because we
don't want to include this value okay
looks like that's working it's just
alternating between true and false I
wonder if there's a nicer way to do what
we did here let's see if I'm update
single value in size physically idol yep
that's exactly what we had to do Oh
reacting mutable helpers react import
update from update state although i'd
imagine probably be doing some things
like this update state contents state
content state map oh I like I like this
I like doing this map that's beautiful
okay alright see how we can do it now so
return state map um and we get to do and
the first thing we're going to check is
if to do dot ID if the ID is equal to
action that ID then we return action dot
to do else we just returned to high so
much less code I like it okay so check
out what's happening here guys this is
really cool so we're mapping over the
state and we're looking at each to do
when we get to a to-do item we're
checking if that ID is equal to the hv
to to do we're checking if that's equal
to the updated to do if it is so does
our true condition then we're replacing
it with action not to do if not we just
return the value so it's refresh create
why is that not permanently creating by
the way ok it is permanently created so
why would i press that does it delete it
huh it's deleting it on the server
that's interesting ok we will look at
into why it's doing that in a second
first I just want to make sure this
works true-false true-false okay that
looks good so when I create another one
it's just doing there the first one
right yeah and then just do a second one
okay that looks good so our actual
update reducer looks good but something
else weird is happening when i refresh
these items are disappearing let's see
if there's anything happening on the
server here token missing that's not a
problem per se
actually i'm very curious why this is
happening when we up when we click on
the item is our is our delete reducer
being called see let me create ad to do
add to do update to do delete to do
okay but if I just add it I don't click
on it it's fine but the moment I change
its value from complete to false it
actually just wipes it okay interesting
so what's happening there why is it
praying authenticated we need to relog
in possibly bob com maybe our token
expired I think I just double click
there nope let's not the problem so for
whatever reason what if i click it twice
is that do anything for it no let's just
see if it's in the database first so PC
will connect select all it to do let's
create this is called will call this one
taco so we create taco okay
we're text is equal to taco we're text
or worse than I syntax error from where
text is equal to taco no oh select from
all we're to do is text is that what it
once no not sure what's wrong with my
query I just wanted to select where text
equal to one will say all right that
looks good there's need single quotes
maybe ha needs single quotes okay so we
see our talk over there if I click on it
we still see our taco there we see
complete is now true and when i refresh
taco is gone taco is still the database
aha check it out guys we're wiping the
owner ID so let's come back over here
think think maybe it's them so what are
we going to do to solve this so when we
update we basically want to keep the
owner ID we don't we won't want to
update do we have to pass the owner ID
through all of this I don't want to do
that because what if we wanted to keep
that a private field so the user can't
query that
this is an interesting dilemma okay so
we need to update I'll see if there's
just a built-in way with fetish yes so
there's just update some value oh maybe
patch is what we want ice is interesting
patch and update let's see
okay partial modifications I think what
we want to do is patch update have
update goes on ok let's try patching so
instead of doing an update let's do a
patch now let's restart the server okay
build okay
good keeps it so patch looks like it
just modifies the value but doesn't
basically override it okay hatch is what
we wanted very cool let's commit that
because that was an important change
update to patch and I just want to if
you guys didn't catch what happen there
i'm going to i want to explain update
and patch the difference so this wasn't
very important so notice how so i have a
field called owner ID for the to do so
you know which user owns the to do now
notice how we don't have the owner to do
here or the owner ID here so when i was
doing update it just takes whatever
object i put here and replaces the
object in the database with it so it's
removing the owner ID we didn't want
that we just wanted to update the text
and the complete value so to do that we
just needed to patch instead patch just
updates these two values whereas update
replaces so patch just does these values
update as the whole object so that was
important okay now on this side now we
want to do a slight style change to the
text so we want to to indicate that it
is crossed out so it's going to do item
text we're going to say
CSS now let's do react native
strikethrough
strike nope nowhere that's basically the
property that we want to do strike there
gives you this /
text decoration underline the flying
texture works on iOS but not on Windows
why would it work on Windows I don't
understand let's see if that works for
us very nice so we're just going to do a
little if statement it says so const not
cons what text style equal to this and
we're going to say if this stop props
dot complete then we would like to say
text style dot text decoration line
is equal to line through and then the
style tech style refresh nice so one up
they look like they're both false so let
me add an item hot dog I create the item
hot dog which is false click it nothing
happened did the cliq not go through
maybe maybe the the cliq didn't go
through because it looks like it's
working looks like the click is now good
so now we can change this style to
anything we want but I think this is a
good stopping point for now we got the
update function working so now we can
update the value of this are complete
and we may it's a general case so we can
also update the text we just need to
make a UI input for that and we've got
deleting to work and so our app is
really coming together now it's looking
like a real to-do list of course it's
really ugly right now so I want to style
this but the functionality is coming
together so I'm just going to commit
this I'll git commit UI for updating for
clicking on the eye to do and completing
it right so we're all done for now thank
you guys for watching and I'll see you
in the next video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>