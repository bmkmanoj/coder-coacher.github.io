<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native To Do List App - part 4 | Coder Coacher - Coaching Coders</title><meta content="React Native To Do List App - part 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native To Do List App - part 4</b></h2><h5 class="post__date">2017-03-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zWJQfTLo6Fw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back so what I left you
last you actually got our to do list
kind of working a little bit and I just
broke it I'm gonna turn on the server so
we were able to add to Do's and we saw
it live update in real time so that was
really cool
but we also wanted to see all the to
dues previous so you can add stuff but
we would like to be able to see them
before before adding them for example
there's a bunch of - dues in this to-do
list I'd like to see this list populated
with all of them so to do that what
we're going to do oops not this is we're
gonna go into our routes that's our home
page and we're going to mess with the
view so this query we actually need to
get the result of this query and set our
update our Redux state using a reducer
sending an action so what we're gonna do
so I actually just looked this up you
can get the result of the query by
waiting for query to be added to the
props so notice down here I name this
viewer and then right here we're adding
it to the props right oops
actually I just had an idea
ready
the props right here we could actually
just do it right here so I was gonna say
we wait to see till this is add the
props and then we do stuff but we could
actually do can we can we do an action
right here own props props yeah we can
so I'm gonna do props dot own props dot
set to do's and this is the action we
created and now I do props top viewer
taught and I just need to get the to do
list I'm actually not sure what the so
I'm not sure that I'm the path to
actually get the to dues from the viewer
so I'm just gonna console.log props stop
be real quick to see it and also I can
get rid of this cuz they just had this
idea so refresh okay so this stop props
viewer viewer and then to dues
and it's refresh undefined his
non-object so props thought viewer dot
viewer dot - dues I did prop stop viewer
right prop stop viewer printed this for
me I believe dot viewer I'll just see
what that prints until about log you
were okay so this is an object and then
we do top two news right
why is to dues I don't understand why
you got to do is is undefined
I see to do this right here so this is
very weird viewer undefined oh okay I
see what's going on so for whatever
reason at first it's not so if oh and
what if this query gets called multiple
times we need to have a flag so I'm
gonna make a flag up here set to do is
set to news called is equal to false let
me say if prop stopped viewer dot viewer
dot to dues and not set to use called
and we can call this function and it's
set to do the call this is equal to true
now let's rerun that still still gonna
give me an error
I'm guessing that prop stock viewer talk
here is not a thing
possibly yes that was what the problem
was
so we're getting this warning set state
cannot update during an existing state
transition I'm curious why you're
getting this fool air we're getting this
popup so that's nice I'm guessing it
doesn't like us doing this here so I'm
gonna comment out real quick and make
sure okay so we're getting that warning
so I'm gonna try doing this and the will
receive props so next prop stop viewer
dot loading so if it's not loading it
should be there so I say next props
first I call this stop crops that set to
dues and next props and I also need to
set the state or a flag set to do is
called is equal to false set is called
this stop prop set to you next prop stop
you were dot viewer not to dues and this
dot said to call is equal to true
that their correct syntax method called
phone will receive home has a method
called component will receive props did
you mean
oh it's spelled wrong we copied and
pasted this and coming out this alright
that look like it worked
so let's just and we don't get a warning
so let's just do that there and now when
I create more I'll last less scroll
doesn't let us scroll ok let's create um
a little X here so we can actually
delete what's that deleting to dues so
let's go to that element yeah
so by default it has this little flag
thingy what if I don't want the little
flag and you know a different icon list
item key title left is there a right
icon yes that's what we want so let's
set a right icon
oops and we want to set it to an X which
we can do we have to give it a name
I believe this uses what kind of icons
does this use I can take the name of a
material icon as it's designed okay as a
prop so if I can find an X here and I
can use that I believe you would think
an X would be pretty commonplace
so you delete cancel maybe remove okay
just go through it real quick
there we go clear that's that's what we
wanted so named clear fresh that nice so
now how do we set like an on and click
for that icon
we actually might not be able to do this
let's see on press on long press rate
icon we might not be able to put like a
little button and that's unfortunate I'm
not seeing something that like let's
just put an on press on the right side
so we'd be able to know if they like
just clicked on this X rather than
avatar on press I'll just put on press
to see what happens on press
it doesn't have like a nice little
cooking thing
I'm actually not liking this ListView
very much I think we might not do a
ListView see what our other options are
maybe we'll do like a card view what's a
linked list element oh it's just a list
okay avatar tile component grid
component card component pricing tab bar
I think card view is kind of over
wanting oh can we do a list view of
cards I know that's a card that has a
list inside of it
okay let's see what else they have
before we start making the card grid
component we might need to actually use
that later slider component tile
component and I'll understand what this
tile oh okay it's kind of like a card
with an image thing able to use a card
and we want cards in like a scroll view
let's get rid of this list let's like it
actually heard of it quite yet we want a
bunch of cards I'm not seeing like just
a card a list of cards and what I want I
think we're just gonna put in a scroll
view then scroll view yeah neither we
don't need this anymore
okay
so scroll view
onscroll weapons if we just do like a
plain vanilla scroller so what if I just
do too far so if I just still rule get
rid a list you can keep the map cuz
we're basically got a map and then let's
put cards so import card
and ours is only going to have a title
for now and we can add icons and stuff
if this works so we're gonna have to
give it a key there's a key of I and a
title of a lot text it's good at T
because it's really a to-do item okay
let's refresh that cannot find the
variable I it's right here I need to
wrap everything and curlies there you go
okay nice we're not able to scroll yet I
don't know if that's just because okay
area that's a nice scroll we're not
seeing stuff at the bottom still but
that's fine I think this will give us
more control because then we can put
icons and stuff on the side so let's
just try adding an icon I guess so card
image font-family can so what if instead
of doing a title we just put a text in
here so get rid of the title let me just
say text T dot text I mean let's just
using the card as a container then see
how that looks okay that looks kind of
nice now I like to add a icon just ahead
at the top so I import icon and we let
an icon button we need to make there we
go that's what I want
so icon
oops come on my clipboard is being
difficult okay
but in and I'll just see what that looks
like
woohoo the cool looking icon alright but
we want a clear icon and we don't want
it raised oh that's cool
I really like the look of that icon I
was if we don't raise it okay we can
keep it red for now I actually kind of
like the raise I mean it looks goofy it
just looks so clean them and I like how
it it huggers does it do that when I get
rid of the raised does it fade a little
bit see it does a little bit you can you
still get the button click feel okay so
we're gonna have to do we have to do
know we can do that grid styling we
could do a grid in here grid grid good
good good grid component okay so grid
and column
this is what we want something like this
and now we want the text in the big
column and the smaller column you want
the icon and why don't we make this a
component so it's not just like this
dysfunction is class is getting
ginormous so let's copy this I just
wanna see if this renders first and if
it renders we're gonna move all this
stuff to a separate class that way it
just gets a little bit less chaotic nice
alright so create another component so
this will be to-do item and okay how are
you gonna do a to-do item so I want to
make this a pure function so export
default and then the props I actually
want to enforce the props that the user
passes in so go back to the view I think
we're gonna make this actually a class
still though I'm gonna call it to-do
item extends rack dot component render
the turn
there you go just take this whole card
okay copy our imports
and we're also huh
put those together and actually I don't
the grazing button on this page actually
we might react you are so actions we
don't need we're gonna need some react
native stuff I think and then we do need
react okay now when we do the map we're
now gonna be mapping do in just give it
the text item the text object no we want
to actually give it okay so it's
wondering if we should just pass in this
object the T object or should actually
pass in the values and I decided we
should pass in the values so if we go to
the top here
you know our to-do form to do one which
we're importing from that and we also
want to import to-do item from
components to-do item and just it's good
to put your local stuff your local
components at the bottom of imports
alrighty so we have this scroll view you
have this now I want to create a to-do
to-do item text is equal to T dot txt
completed is equal to t dot completed
and the reason I want to do it like this
is in case I ever change the name of the
to do object
to come and remap it or come remap it in
our component I just change it here so
for example I want to change this to
maybe content some day I would change it
here so we pass in text completed and
we're gonna give it a key we don't need
to do anything with that component I
think that's fine for now okay so I
think we're fine with that so now we're
just messing with this page so the first
thing I want to do is require prompts so
scroll view would keep up can change
this tab so require props oops
react type checking with prop types so
we basically are enforcing that they
pass some props in like a pod of prop
types default prop types
so we're gonna say to do item dot prop
actually we can just pass that in right
here so just put it right here
static prop types static systemic upper
case me no okay
prop types is equal to so these are the
props you have to pass in to my to-do
item for it to work you need to pass it
some text so that'll be text and then
I'll be copy this it'll be a string dot
is required is required forces you to
provide it and then so we need text and
we need completed which is a boolean and
those are the two that we need so now
down here I can say this props dot text
and I'll grab the grab that and I might
be messing up the syntax of this
terrific after I didn't see line
nineteen oh there should be commas
undefined is not an object prop types
boolean okay
it's a bool zero cannot find a variable
I what we don't need this key anymore
refresh prop types was defined as an
instant coffee use static property okay
there we go now we're getting this
syntax highlighting that I was expecting
warning field prop the prop completed is
marked as required and to do but whose
value is the value is undefined
okay so we're not passing in completed
did I say complete maybe over here
complete I think everything is called
complete all right now it's refresh
let's value is undefined
so I'm wondering if T dot complete so
let's just come up here and console dot
log this dot next props dot viewer dot
viewers out to do this and let's just
see if any of the completed is undefined
huh oh there we go
we're not asking for it there we go
now should be defined there we go
okay now let's just mess with our to-do
item so this is looking quite nice and
when I press this icon it says hello
right very nice now instead of saying
hello what I'd like it to do is I'd like
it to delete itself so to delete an item
we just need its ID so let's implement
on the server first so I'm just gonna
hop over here to the server and let's
not a nerd tree to here
I'm liking nerd tree okay so let's touch
the schema first this will be a mutation
this will be delete to do and I guess we
can return the deleted to do nope we all
want to turn anything I don't think so
QL mutation that returns nothing I'm not
sure with the syntaxes
not respect I'm not expecting anything
to be returned from their mutation how
do i okay we'll just try it and see if
we get an error and so we're just gonna
pass in the ID and it'll be a string a
required string and this will be
resolvers create to do delete to do Oh
eat we also need to pass in a token so
ID token context and we're actually just
not going to return anything we're just
gonna do the deletion and let's just see
if this compiles oops and actually I'm
gonna just visit our resolvers I wasn't
supposed to close this because we
haven't heard tree up to our index where
we console logging we don't need any of
these console logs anymore okay this one
is fine
there's augers console viewer okay
now let's start server
okay as I we expect to be in error well
just okay oops wrong thing schema delete
I guess let's return the to do we delete
I guess index resolvers turn just an
empty guy for now
you know I'm not expecting air so I'm
not sure with parse so is there
something wrong with the schema again
delete to do oh there we go they kick I
think it was just I didn't put a comma
and actually know what maybe our schema
was fine
let's maybe your schema was fine not
returning it to do oops not that one
that one
now does that give us an error yeah it
does okay we need this but to do this
resolves nicely now so let's actually
delete this so that's gonna be returned
to dues
I think it's delete let's uh or maybe it
might be removed there's one easy way to
find this out feathers arrest and I
actually like their documentation better
here we go
remove and then we give them the ID so
we pass an ID and we just need to pass
in our context so provider context
provider token and actually I'll also
need to add a subscription for we just
like for example when we delete this to
do we need to add a subscription for
deleting that to do on the client side
too because I mean
you click this X we're gonna delete on
the server but we're not going to update
our UI so let's fix that I guess first I
want to make sure this works though you
have delete to do here that looks fine
so let's try calling it I guess I
actually I'm gonna have to pass a token
in let's just call it from the client so
restart the server make sure that's
working and we are now let's create that
graph QL mutation so we can give this
export default so now we're doing graph
QL gel and let's just copy and paste the
template I have
okay paste that so this will be
oops delete to do mutation mutation and
if we just go to graph QL we can get the
actual mutation that we need to do
delete and refresh civil area ID token
okay and we actually want to pass in two
parameters the token and the ID this
will be delete to do passing in a delete
to do mutation and then this will be the
lead to do return mutate and then we
don't actually need to do anything after
because we don't actually need to update
we're not going to update this state
this way we'll just do that will delete
the to do so on press o we also need to
pass in the ID and that's going to be a
string and then on press this stop props
dot delete to do passing in this dot
props thought ID so now that view pass
an ID to our map ID little t2 idea all
right
let's refresh and see if the delete
works oh you need to just copy those
imports over it oops
too fast
element types novella expected a string
for built-in components or class got an
object tita ID passed an object that
looks good to me it's something else no
oh
export default default delete to do
to-do item we just scrapped the export
and when the export we also need to wrap
it with our graph QL mutation prop IDs
marked as required the value is
undefined
alright let's go see why that's
undefined ID reactive string acquired
that looks good from this side that
means when we're passing in we just need
to get the ID there we go delete data
wrapping to-do item is expecting a
variable oh we didn't pass the token to
do
and we also need the token hey actually
string put it down here because it's
kind of different so we pass an ID and
this props
token and then the mutation variables
and then when we call this how do we
pass in variables here I think you're
passing variables had a different
component the login page I think we did
you know variables email password okay
it's gonna be ID in token ID all right
let's see if that gets deleted now oh
yeah we didn't we need to pass in the
token from this side now so go to math
and then token this stop prob stop - I
don't like how we're just passing this
token around okay so notice how nothing
happens but when i refresh it's gone we
need to set up a subscription so now
when I delete this it we see it update
live so deleting is working that's good
so let's add this subscription so should
we make this a new subscription yeah we
should make this a new subscription so
go back to we're going to go back to the
server let me go to the schema here and
I'm gonna say to do deleted and then
we're gonna pass back the to do that was
deleted
whoops whoops whoops whoops that mean to
close nerd trading in so to do deleted
and we're actually literally just gonna
pass and that to do their oops
nothing special happening or little it's
gonna be the same and then I remove dot
then to do that was removed
I'm hoping it's returning it to do
anyway now we do pub/sub I'll publish to
do deleted and are passing in that to do
okay
and now can we subscribe on a mutation
call let's see so the back end is set up
and let's get out of here just to get
status get at all git commit add delete
to do mutation and subscription sub
description get status I don't think
it's to ask to get push and then restart
the server let's make sure that compiles
okay or runs without error I mean I keep
saying compile and then from this side
we need to basically do the subscription
thing that we did here subscribe to new
- dues props thought you were it's kind
of like a query and actually maybe I
changed my mind again I feel like we
should just use this as a controller
okay okay I changed my mind guys we're
gonna change things up a wee bit we're
gonna have one subscription it's gonna
give it two things though so them schema
we're gonna call this to do changed
we're gonna pass this to do so we're
just basically going to do actually no
we're just call us to do it's a to do
because we also want to change it on
update possibly later and the other
thing so you're just subscribing to do
let's go back to do changes we'll call
it any time but to do changes in any way
you're getting a subscription for it so
you see that this happens sit on our
resolver because we're doing the same
thing here to do changed
we should pass an a to do and actually
go back to the schema this will be a
Type B crud operation crud operation so
type so it's gonna be a operation which
will do you're just to a string yeah
they'll probably easiest the operation
that happened and then of course the to
do which is of type to do both of these
are necessary I'll just call it to do
crud this returns it to do cred which is
an op ed to do
so this is our to do and then we also
return the OP
thank you and maybe only pass one thing
so okay so to do delete it right so
we're going to do passing it to do an op
is going to be deleted delete it now up
here to do added both of these to do
change now and that's just console dot
log deleted I want to make sure it
actually is passing me to do back that
was deleted and not something else okay
so the operation here is created and we
pass that to do okay so now back to the
let's run the server before we go back
to the client that will source does that
work it does it doesn't forgot a comma
somewhere it looks like did you changed
up I looks okay here it is it's the call
I missed I put the comma here and I did
save that
schema here something to do change to
find the resolvers but not to do changed
to do change so what I call in the
schema actually a to changes sounds like
a better word for subscription you've
changed all right that works so let's
add that get couldn't make subscription
general alright now we will work on the
client okay so now subscription data to
do add it so now it's gonna be to do
changed so now it's gonna be op to do
it's gonna be subscription data data to
do changes so if off is equal to triple
equals I guess created should we do a
switch nests which greens are kind of
girls op is equal to deleted and should
you an else and console error some stuff
yeah
and we really only need to pass the ID
back so to do that ID to delete delete'
to do so if it's created we're gonna add
the to do if it's deleted or deleting
what to do that looks good now we need
actually create this delete to do action
delete to do passing in the ID ID delete
to do now we need to add this to our
reducer the to do is reducer now we have
a delete and now we want to filter so
let me just look up the syntax for
filter JavaScript array JavaScript
arrays what we want to do
is big enough value is greater than 10
okay so we're gonna return state dot
filter and then we're gonna say to do
where to do is not you to do dot ID it's
not equal to actions ID so okay so if
this returns true then it keeps it
filter for this is big enough so filter
for to do we want to keep the ones that
the ID is not equal to the one we're
deleting yeah it looks good
unhandled grab kill subscription air
cannot query field Oh to do at it that's
right
to do out it is not a thing anymore to
do at add added to do changes oh and to
do changes is different because now we
have a just go to graph iql so this is
subscription to do changes no a refresh
buddy we have to do changes okay go get
the OP I need to do can't read property
to do of undefined this is a surveyor
usually it returns to null
oh no that's fine
I think that's fine this might be a
problem anyway we're getting into an
operation we're also getting to do and
little bit to do we'd like to get the ID
you text and the completeness of it
pretty five please I believe this query
is correct but that the server just like
crapping out like that and not working
is worrisome that kind of makes me think
this won't work I'm just kidding it just
straight works beautiful beautiful you
just delete all that garbage mmm new
problem that's fine
undefined is not an object evaluating
Teta ID
we're passing this stuff props and
that's in to do form this stuff T is it
this salty tid tid we're not doing Tita
ID here why is it saying undefined is
not an object evaluating tid get rid of
this you know that works I mean we're
doing tid here guess let's console dot
log this stuff props thought to do is
and ID work when we create it we're not
getting the idea it looks like comma
undefined comma undefined looks like oh
there we go
I was just doing something kind of noob
so I had had the old code there from
copy and pasting but now we just have to
distract it to do okay so to do this is
coming along quite nicely so now we have
the delete and the create future working
let's save this so get status while our
files did we change mmm good commit so
we went from a list view to cards and
implement delete okay what do we want to
do next
why don't we do should we do an on click
so we can cross out yeah let's do
complete next let's do let's do that so
this will be an on click for our to ugh
ooh
I just closed and retreated so it'll be
source routes I'll be in our to-do item
I'm wondering if card has just an on
press I'm hoping they do because it'll
be very nice for this on press and then
we're going to console.log complete for
now okay so let's refresh that No
doesn't have it so let's go to the
documentation real quick
maybe it unclick
yeah it just did not do one I guess we
can do an on click for the text that's
not as cool though
syntax error on press Oh what I would
really like is a nice little like
animation when I click that would be
nice so the only thing I don't like
about if we did the button and click
there is like for example if I click
right here nothing we get complete when
I do that nothing nothing what if I do
flex one this flex makes it expand
basically I mean if I just give the
padding equal to the or better idea guys
what if I do it on click for the column
I wonder if it'll let us do that so grid
just grid have an on click yes it does
that's beautiful
so this will allow us to get a much
nicer click yes yes that's better that
triggers it that trigger no it doesn't
need be more in the middle but it's I
want to see what this size of this is
can't give it a color size container
style kind of Taner
style color blue that did not work
background color maybe nope
how do I set the color
active opacity container style react
native sub background color we don't
need these guys anymore this is
background color huh
blue works , flex one what does that
dear that break anything don't do
anything at all nope that doesn't seem
do anything at all I want the background
color to change so they can see it
why does background color not work
styles or style maybe huh I'm being dumb
flex is one on our string nope that
doesn't do anything now there we go
okay so I want this to be a little more
squishy the card the card has like
padding itself
so card where your props here we go
enter a container style outer container
style doesn't seem to have what we want
I don't like how narrow this this is I
don't like how the card does I have it
on click it's quite annoying it's nice
looking
umm so how do I do that I'm just gonna
leave it for now
uh I guess I can come back and make the
where we actually click the button
better so now instead of complete what
we want to do is we're gonna be doing in
some more server work first we don't
need to touch the schema yeah actually
we do need touch the schema we're gonna
create a new mutation called update to
do so we're gonna take a to do as a
parameter
and we spit out the new to do that looks
good so delete and we don't need these
because we know it worked so update to
do and again let me just look up the
syntax for this feathers je s what I
just look up rest update
it was a nice little chart that I had
that showed me the area update takes an
ID and then the new data okay so it's
gonna be ID token text and complete just
going to update and the new object I
don't know if I should drop that to a
new line this looks a little awkward but
we'll keep it so the new data is gonna
be having we don't touch the ID I don't
think I'll just give it text and
complete then don't need this to do
changes updated and then we have to do
and then we pass in the to do the
updated to do back to the server
all right that looks good and let's run
that first before I commit this I can
add it all just in preparation nope
doesn't like it looks like I again
forgot to add a comma to the resolvers
update no
just read the air then possibly in the
schema we're having a problem update to
do passing and a to do and a token o
resolvers update update this is all
under to do area this isn't freaking
unwieldy function drop it to a new line
that's really looking ugly I'm gonna
have to throw you're on the server I'm
gonna have to lent this whole project we
can clean up the spacing and stuff okay
still a problem I was thinking it was
because I didn't do and it doesn't let
me go up I was thinking it was because I
didn't have to do here and grabbing the
text and stuff would be a different
problem though see what it says expected
input type what's an input type
invariant
node modules expected input tape that is
graph QL just has amazing errors to do
we should have that stuff just for a
second I want to comment you out return
nothing
so I just want to see if it's my
deconstruction of the object that
doesn't like or if it's something else
nope still doesn't work so it's I don't
think it's what I have here update to do
think it's something with a schema oh
shoot that's gonna be fun I just switch
pages so I can't undo so update to do
update to do
passing you know to do it a string I'm
guessing it doesn't like that ie was the
to do type maybe here I don't know why
let's try a string whoops yeah ok so
that's not what it that's what it's not
liking ok so what I can do to the update
is I can pass in an ID which is a string
pass in text which is the string get rid
of these commas and I could pass
incomplete which is a boolean all these
are required should keep that required
for now cuz we don't have any defaults
resolver now we can go back this is fine
now we deconstruct the way we did before
or we set ID text complete token oh
shoot I didn't do this right there we
are okay we've got that running git
commit adds support for update alright
so we got our update on the server
looking good let's hop back to our
client and do it on the client side now
so
how are we going to do this so it's
gonna be a mutation similar to this so
let's just copy that so update to do
mutation you rotation and let's do the
graph iql mutation update nope you know
update update refresh sometimes the
graph iql is not up-to-date stuff so
that's the ID text some other stuff and
then what what else is there content no
complete which is true we'll say and
what is the last thing the token that's
right
copy that so we have a lot of variables
so the first one we have is the ID which
is a string then we have the text which
is a string we have complete which is a
boolean and then we have token which is
a string
i D whoops text complete complete and
token let me grab the toca okay and then
when we update we want the ID we want no
only update we want actually what we
don't need anything that we update cuz
we're gonna again update it through our
subscription we could update it through
the callback from our mutation but we're
just gonna let everything do go through
subscription because that seems to be a
very nice way to do it update to do
update to do mutation update to do so
we're passing the ID text and complete
ID text complete and token now let's
grab the compose function cuz I don't
want to stack these too many times for
default compose compose lets you instead
of wrapping these guys I can basically
or call a function so delete to do and
update to do it's like that and now when
I press we're going to do is we're gonna
say this stop prop stop update to do
this stop props the ID this stop props
dot text this stop props that complete
and we inverse it
and this thought prop stock token all
righty
now I want to come back to over here now
we have to do an else if is equal to
updated we pass and update to do so our
new to do and to do and they can grab it
from this so update to do passing in
that to do so create an action update to
do update to do passing in that to do
and now I go to to-do item sorry we're
not doing to-do item we're going to the
reducer update to do okay now this is
actually an interesting thing of how
we're going to do the reducer because we
need to find the item that we're
changing and then basically mutate one
of its values but we want to do it
functionally so update deucer update
array object reducer because we want to
keep it pure I'm just seeing if there's
a a nice way to do this because we
basically want to find the new value and
then change it
updating the value or is the day long
okay here's one way to do it I don't
like this way cuz it requires a four
loop but it's maybe it's fast enough
okay so this is how how I the this is
the algorithm that I when I use so let
this will be left and this will be right
so we're gonna do a for loop we're gonna
loop or in alright
actually we don't need a light right we
just need to do left so Const I is equal
to 0 I is less than state dot length
length I plus plus so if I'm gonna do
this if state ID ID is equal to action
dot to do that ID then we break else
what we do is we say left left up push
state I the value okay so we're
basically looping through the array
until we find that to do that we want to
change and the to do we want to change
we break out and then we want to return
an array where we get the values of left
and then our new of to do which is
action dot to do and then the leftover
values which is gonna be state dot slice
and then I think the rest of the values
are I this this might be this mutation
might be wrong we might have to fiddle
with update to do let's refresh and see
I feel like we have a buttload of errors
okay
can't find variable I let I equals zero
era no ideas marked as required and to
do item values undefined text prompt
okay so that did not work that I don't
think it's only knit to get made to our
reducer we have different problems will
come back to our reducer update to do we
just cut the idea we needed also text
and complete okay so it looks like we
deleted those guys
huh we're just like I don't know what oh
this is not working our reducers causing
problems huh now now our reducers
causing problems I need to do dot dot
dot I didn't do dot dot dot there no
items dot all right so this needs to be
I plus one because we don't want to
include this value okay looks like
that's working it's just alternating
between true and false I wonder if
there's a nicer way to do what we did
here let's see if I'll update single
value in science physically I know yep
that's exactly oh yeah I do
Oh reactive mutable helpers react import
update from update state although I'd
imagine probably be doing some things
like this update state contents state
content state map oh I like I like this
I like doing this map that's beautiful
okay alright see how we can do it now so
return state dot map and we get to do
and the first thing we're gonna check is
if to do ID if the ID is equal to action
that ID then we return action dot to do
else we just return to hi so much less
code I like it okay so check out what's
happening here guys this is really cool
so we're mapping over the state and
we're looking at each to do when we get
to a to-do item we're checking if that
ID is equal to the that needs to be to
to do we're checking if that's equal to
the updated to do if it is so does our
true condition then we're replacing it
with action not to do if not we just
return the value so its refresh create
why is that not permanently creating by
the way okay it is permanently created
so why would I press that does it delete
it
it's deleting it on the server that's
interesting okay we will look at into
why it's doing that in a second first I
just want to make sure this works true
false true or false
okay that looks good so when I create
another one it's just doing there the
first one right yep and then just do a
second one okay that looks good so our
actual update reduce there looks good
but something else weird is happening
when i refresh these items are
disappearing let's see if there's
anything happening on the server here
token missing that's not a problem per
se
actually I'm very curious why this is
happening when we up when we click on
the item is our is our delete reducer
being called see so when you create add
to do add to do
update to do delete to do
okay but if I just add it and I don't
click on it it's fine but the moment I
change its value from complete to false
it actually just wipes it okay
interesting so what's happening there
why is it praying not authenticated we
need a real log in possibly Bob calm
maybe our token expired I think I just
double-click there nope that's not the
problem so for whatever reason what if I
click it twice does that do anything for
it No
let's just see if it's in the database
first so PC will connect select all it -
duze to create this is call we'll call
this one taco so we create taco ok where
text is equal to taco where text or at
worst a syntax error from where text is
equal to taco no ohh
select from all where to do text is that
what it wants no I'm not sure what's
wrong with my query
I just wanted to select where text equal
to one will say all right that looks
good
there's neat single quotes maybe ha
needs single quotes ok so we see our
talk over there if I click on it we
still see our taco there we see complete
is now true now when i refresh taco is
gone taco is still in the database aha
check it out guys we're wiping the owner
ID so let's come back over here
think think maybe it's them so what are
we gonna do to solve this so when we
update we basically want to keep the
owner ID we don't we won't want to
update do we have to pass the owner ID
through all of this I don't want to do
that because what if we wanted to keep
that a private field so the user can't
query that this is an interesting
dilemma ok so we need to update I'll see
if there's just a built-in way with
Fedders yes so there's just update some
value
oh maybe patch is what we want I said
patch and update let's see
okay partial modifications I think what
we want to do is patch update have
update doesn't okay let's try patching
so instead of doing an update let's do a
patch now let's restart the server
okay build okay
keeps it so patch looks like it just
modifies the value but doesn't basically
override it okay patch is what we wanted
very cool let's commit that because that
was an important change update to patch
and I just want to if you guys think
catch what happen there I'm gonna I want
to explain update and patch the
difference so this wasn't very important
so notice how so I have a field called
owner ID for the to do so you know which
user owns the to do now notice how we
don't have the owner to do here or the
owner ID here so when I was doing update
it just takes whatever object I put here
and replaces the object and the database
with it so it's removing the owner ID we
didn't want that we just wanted to
update the text and the complete value
so to do that we just needed to patch
instead patch just updates these two
values whereas update replaces so patch
just as these values update does the
whole object so that was important okay
now on this side now we want to do a
slate style a change to the text so we
want to to indicate that it is crossed
out so it's going to do item text we're
going to say
CSS now let's do react native
strikethrough
strike nope nowhere that's basically the
property that we want to do strike there
gives you this slash
text-decoration:underline the flying
texture works on Iowa's but not on a
windows why would it work on windows and
understand
let's see if that works for us very nice
so we're just going to do a little if
statement it says so Const
not Const what text style equal to this
and we're gonna say if this stop crops
dot complete then we would like to say
text style dot text decoration line is
equal to line through and then the style
Tech style refresh nice so one up they
look like they're both false so let me
add an item hotdog I create the item
hotdog which is false click it nothing
happened did the click not go through
maybe maybe the the click didn't go
through because it looks like it's
working looks like the click is now good
so now we can change this style to
anything we want but I think this is a
good stopping point for now we got
the update function working so now we
can update the value of this are
complete and we may its general case so
we can also update the text we just need
to make a UI input for that and we've
got the leading to work and so our app
is really coming together now it's
looking like a real to-do list of course
it's really ugly right now so I want to
style this but the functionality is
coming together so I'm just going to
commit this get commit UI for updating
for clicking on the I thought to do and
come leading it right so we're all done
for now thank you guys for watching and
I'll see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>