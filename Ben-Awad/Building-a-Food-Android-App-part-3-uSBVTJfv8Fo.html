<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a Food Android App - part 3 | Coder Coacher - Coaching Coders</title><meta content="Building a Food Android App - part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a Food Android App - part 3</b></h2><h5 class="post__date">2016-12-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uSBVTJfv8Fo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome back so in
today's video I want to show you guys
how to actually start getting some
pictures so I don't want this crappy you
know little thing here I want some
actual food pictures going down so right
now what we have is we're able to call
the Yelp API and get businesses now from
businesses like we can get a bunch of
different ones like we can get the first
one and then from there it'll give us a
URL so that you're really just all there
that points to like a Yelp business like
right here they'll give you this
business you're right here what we
really want is URLs to all these little
pictures right here which is not what
they give us which is unfortunate
because that's what we need so what
we're gonna do to get around this is
first off notice this is the year that
URL they give us notice how this is
structured and watch when I click photos
what happens so notice how the only
thing that changes in the URL is this
part here so if I go back if someone
gave me this URL and I want to get to
the photos URL for the same business I
would just do underscore photos and I'd
be taken here so that's what we're gonna
program is we're gonna go straight to
this page get photos and then once we're
here we're gonna do a little bit of
scraping and we're gonna get all these
image sources now another little thing
that we're gonna do now if we inspect
the source on one of these guys what we
want to I'd like to get is the source
right here you know for each one of
these guys get the source for it which
is you can see there's a div with the
class photo box and then there's an
image inside so that's what we're gonna
do to select it um this is what's called
as web scraping we're gonna be using a
library which I'll show you in a second
before you do that I wanna show you a
little something else if we are just say
take this URL and put it in our bar to
see what it looks like I just put one
here beforehand that's how this picture
is kind of blurry and kind of ugly
because what it's doing is it's the
source for the
a little image right here but what we'd
really like is a nice crisp image and
what I noticed was as you can see with
this URL it's like it has this code and
then has this weird thing but if you're
a place right here with the just an O so
slash o dot jpg it'll give you the
original picture and you get a nice
blow-up of the original picture so what
we're about to code is to get these nice
images we're gonna get all these image
sources right here and then what we're
gonna do is we're gonna go and replace
just the end right here where it says /
2 5 8 s we're gonna replace that with a
zero are not zero a lowercase o and that
will go us the original and it'll look
nice just like this okay so how are we
gonna do all this stuff well first
things first
we are going to be creating we're gonna
be needing to do some web scraping and
when you're doing web scraping J soup is
the way to go for Java so I'll put this
in the description this link and it's
for J soup and this is the Gradle Hylian
the compiled that you're going to need
there's an add the strap resync and now
let's create we're gonna create a
separate class that's all its gonna do
is it's gonna be scraping can your java
class this is gonna be a restaurant
scraper not scraper parser
so what we'd like is to give it this the
HTML for this page and then what it's
going to return us is a list of URLs or
sources to each one of these files so
we're gonna pass it some HTML which the
HTML corresponds to this page so we're
gonna create a public static get
pictures and this is going to return a
string a list of strings which will be
our URLs and we're going to pass in a
parameter as HTML so this is just part
of how it's gonna work we're gonna
actually get how we actually get the
HTML is another story how we actually
get to this page and get the HTML will
work on in the next video in this video
we're just gonna work on we have this
HTML and how are you gonna grab it so
first thing we're going to do is create
a new document
oops not that one make sure you click on
JC version is in and we're gonna just do
document dot parse oops it's not
document document horse nope it's not
document let me double check what it is
JC parse J suit parse and passing the
HTML this creates a document object
which allows us to then look for as I
said we now have this document kind of
basically it goes in and allows us to
select different elements using select
so we can select images that have divs
so elements will call these images is
equal to doc dot select now what we can
do is we can
div dot and then we can use this class
right here photo box photo box a greater
than sign and then image so what this
does is it looks for a div with the
class photo box and it looks for an
image inside of it so it's going to get
all images that are inside a div called
photo box so now we have it have all
these images selected so we're just
gonna do a for loop and grab the sources
for each one so let's create a list to
store these so this will be a list of
strings and their URLs new ArrayList so
for we'll do a for each loop so for each
element E and elements or images so we
could also say for each image what we're
gonna do is we're gonna grab the code
string up here be source so source is
equal to URLs night Orioles image dot
attr source and then we're gonna check
and make sure the source is not null and
source and let's set it up it actually
doesn't matter
make sure it's not null and source is
not empty that we call and you'll see I
just made a small error you can't
actually string comparison with that so
it equals not okay if it's not then
we'll do URLs dot append sorry not pin
to add and then we'll add the source to
it and all we're going to do is that
we're in a returned source
sorry URLs
okay so now if we would call get
pictures passing the HTML on this page
it would return us every single turn in
a list of the sources right here but
that's not exactly what we want we don't
want this source we want to modify it
and put a OH right here to get the
original image so we're just gonna
create a little helper function right
here called it's gonna return the string
get original and you pass it in a string
the URL and it will change it like how
we said so we'll just pass in get a
original so first we have to check where
this slash is so we're gonna go for
create an eye up here and I I is equal
to URL dot size that size link is 1 I is
greater than equal to 0 I - - so we're
gonna go backwards until we find a slash
so if I is equal to equal to slash we
then break and then all we do is we
return from I semicolon we're gonna
return URL dot substring from 0 to I
plus 1 and then all we're gonna do is
add OH dot jpg okay so how this code is
working is you'll notice we're starting
at the end of the URL and we first check
this character and then that character
in that character and we should be doing
char at you're a lot Chara
so check each character and if it's
equal to this slash we know we're at the
right point where we can
break and then we get the substring
which would be the URL to here and then
we're just appending ODOT jpg on top of
it so that'll give us the original
string okay so this allows us to parse
this page right here and this is this
allows us to scrape all the images off
this Yelp page right here so this not
might not be making total sense right
now but in the next video we're gonna
hook it up and actually make a web
request get this HTML and it'll make a
lot more sense so stay tuned to the next
video and hopefully you know it'll make
more sense Thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>