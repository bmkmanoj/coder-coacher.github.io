<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Simple Pagination in GraphQL with Node.js and Postgresql | Coder Coacher - Coaching Coders</title><meta content="Simple Pagination in GraphQL with Node.js and Postgresql - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Simple Pagination in GraphQL with Node.js and Postgresql</b></h2><h5 class="post__date">2017-07-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kG5RQHhYEto" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys so I have my graph 12
server template up right here what I
want to show you today is how to add
page nation to it we're going to a
really fast really simple way to add
page nation to pretty much any mutation
you want or any query if you will that
makes it super easy so before we get
started I'm going to check out a
different branch I'm going to check out
14 just because on branch 15 I have some
other stuff where I'm also running a
react server from it and I don't need
that and I just tried to create a branch
with this - beet but we just need to
check it out and then from here I'm
going to go and get check out 16 simple
pagination all right now we can get
started so what I first want to do is
paginate suggestions now if you don't
have this template I'll have in the link
in the description below you go ahead
and grab it from github and there's also
a video series along with this your IP
address was made so create suggestion we
have mutation for creating it and look
like you can get user suggestions I want
to create two queries here suggestions
which literally returns all the
suggestions in the database
and then another one suggestions like me
and basically us another name for it
let's say some suggestions and we're
going to give it two things for
pagination the first is a limit which is
going to be an empty half day of that
value and an offset which we also need
that value and and we're going to turn a
non know list and nominal suggestions um
so this we're just going to literally
grab all the things in the database for
some suggestions we're going to limit
how
we're showing by this field so if we say
when we want five we're only going to
get five in the offset is how far we
want to go in the list so that lets us
paginate so now I'm going to come over
here to resolvers and have these two so
we have query right here so first I'm
going to just do suggestions and I'm not
going to worry about author any of that
sort of thing we have parent args and
models we don't actually need art from
us a model dot suggestion dot find all
right and then that will go ahead and
give me all of them but now what about
if I want to get some suggestions well
it's actually super easy so graph QL or
not graphical sequel eyes is what we're
using to grab these actually have a
limit and a whole zero an offset I'm
built in to sequel eyes so I can just
say limit offset right here um BAM and I
can even you know I'm expanding these
and putting them right here so what I
could do is equivalent is just say just
again what I could say instead is right
here I could just make this args and
pass the arms in here all right so let's
go ahead and test these functions
outside we just created when I come back
to terminal and just do NPM start start
server and I'm going to come over here
to Chrome and get a little code through
thousand slash grapple now if we did
making Ayers server should start up and
we can come and check this out okay so
the first thing we want to do is go
ahead and create a user and a board that
we can use to actually we need so the
way the server set up you need to use
their in a board or creative session so
I'm going to create these so we can do
it so I'm going to call this guy Bob to
so I feel like I already have a bald
probably here and don't need anything
else nope just looks like they just need
username this might be your broken nope
it's not okay
so now whatever I do you get it we're
going to remember what that is and then
we're going to create a board as well
great board owner this is the owner to
this guy which set the five and then the
name is going to be Bob Bob two board
I'm not authenticated so we need Malcolm
decay to create boards I'm going to get
rid of that restriction that way we can
make this example so just came down to
the mutation create board and then got
rid of that now fire you're on it
good we can create a board one so now I
can create suggestions and I'm just
doing this that way we can go ahead and
see you if I create so that way I can
create suggestions and show you guys I'm
just entering data into the database but
I can assure you pagination is working
so let's create one two three four up to
six nodes do seven five six there's
probably better ways because there are
definitely better ways you can just
insert data if you want to let's go
ahead and now we can get all the
suggestions like this right now this
works for the small example I have but
if you have like say a million plus this
is not a great way to do it and that's
why you you would use some suggestions
here I can limit it I can say I just
want one back right offset of type int
is required and not provided though and
we said we need to provide an offset and
offset of zero so now we get the ID one
and we should also do the text so that
makes them get rid of the idea actually
so now we get a back if I do the limit
of two we get a and B um but I can come
here and this offset is how you paginate
so if I want to I move to see a grooving
back down to one will go to be in with
three this will be D you just page
through and now you can say you know
what size you want so I could do two at
a time so grab a B now let's say I want
to get a B C you'll notice we get B C
and that's because we're just offsetting
by one so today we offset by go up to
three we should get the receipt de here
so that's just a super simple way to add
pagination using graph QL you can see
how easily we added this and so you only
get some results back and you can have
it filtered now this is not the most
optimal way to actually do pagination
and graph QL but this is super simple
and it'll work if your data is not
ginormous but like when you get into
like the millions of the five million
plus of data and you have tons of rows
this is not very performant it's
actually better to do cursors so I'm
going to talk about that in a future
video how to add do pagination with
cursors and also I'm going to show you
guys how you can actually use graph QL
in the rack native app so we can
actually use this as a nation that we
just created with women offset and
actually see it pop up in our list view
that we created because it this is how
we implement the backend right and I'll
show you how the fronton works too so
that's it for this video guys thanks for
watching I'll see you guys in the next
one
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>