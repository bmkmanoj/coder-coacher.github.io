<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Testing React Components | Coder Coacher - Coaching Coders</title><meta content="Testing React Components - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Testing React Components</b></h2><h5 class="post__date">2017-07-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yjVhldDwiNE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I want to talk about testing
today so personally actually hate
testing
I don't really test any of my react
stuff at all except for one testing
technique actually want to start doing
more because I think it's pretty useful
but what I thought I want to talk about
today is the type of testing I think is
decent and if you wanted to test what I
would recommend doing and just some
libraries to check out and to use if you
want to test how you can test so I
actually really like what create react
app recommend for testing and this is
their little bit on testing right here I
recommend checking it out it's
interesting and I like their what they
recommend and it is first thing they
recommend is what's called a smoke test
and I'm going to go over how to test
react components for create react app
it'll be similar for most act
applications so they recommend doing a
smoke test which basically means they
just renders a whole application and see
if it breaks which i think is a decent
test requires no work right this is
super easy to run and actually I have a
create react app open right here and it
actually comes default because the
default test it gives you so that's nice
and also recommends using enzyme and if
you don't know what enzyme is it
basically lets you render just one
component so you can see shallow and
then we get the app so it's only
rendering the component on a single
level if you have components within
components it's only getting that first
level and you can do this just what
smoke test to make sure it works with
any number of components so I'll show
you that real quick so I'm going to add
this is my project through yarn add
enzyme and real quick actually before I
even show you guys
enzyme I want it if you do not know how
to run a test if you just go to create
react app in the folder of your project
if you do npm test will actually run
just oh dad broke I think it's because
this is running but what's what's
happened is just runs and will actually
run all tests that add the dot test so
anything you see with dot test in your
react application or additionally app
dot speck a jf these are all tests and
when you run npm test it will run these
tests that are in those folders and i
think it talks about it and create react
app what exactly you can name them i
don't see it here but there's a whole
list of what you can name your files
that way they can get tested personally
i like either using the name test or
spec for testing components and i would
do this naming convention app an app dot
test such is if you're testing app ok so
the enzyme is done let's see if m p.m.
test it goes and cool so this is what
the runner looks like it will run the
test and i'll tell you whether or not
they pass and then it gives you some
options of here of what you can run if
it doesn't have a but if you type a it
will actually read on all of them and
then just queue to get out of it and so
that's how you run the test you Curie
and so i can create another test here if
i wanted to i could say
shallow renders without crashing and we
can import shallow from enzyme and then
instead of doing the whole dom we will
do let's just do shallow
and then we can rerun it our test and
you can keep this window open so I'm
going to give this up now and I can just
do run off so it's failed so something
broke
shallow we're doing shallow just like I
do here and shallow is imported from
enzyme cool so let's see what what's
happening react Dom and react test
render aren't posted dependencies when
using this please add the appropriate
versions oh so I just don't have a
dependency looks like you need react
dalam which I should have in react test
render okay so looks like an you install
that when you do an enzyme as well so
let's add that but after I get this done
what you would do is for example if I
create another file like my component
and then let's say my component it
imports react from react and then real
simple expertise fault and then let's
just say it says hi if I wanted to make
a test for this I would create a new
file here and I would call it my comp
dot test and in here I would just copy
what is in that to start off with it
like how I copied it how did I just copy
that area and so I would import you
wouldn't want to do either of these guys
you need to have react in here so I
would do my comp and have my comp here
so we're importing our function and now
let's say this is not the root right we
can't do like this Dom render thing this
is where a shallow render is important
so we can shallow render our component
make sure
works and I love to do NPM tests to make
sure everything is good and it is so you
notice we ran two tests test three total
it ran a test in my comp and everything
passed now what you can do is you can
actually say you know you can render
this and then you can check for
different things like checking whether
it has different properties and if we
come on over here to enzyme they have
more the enzyme to read me they have
more advanced things but basically you
render your component and then you can
check for different things they're
checking for properties href different
attributes on components and stuff you
can do that I don't think it's that
useful though personally I don't really
like testing this way that much but if
you're interested I recommend looking
more into enzyme and this library here I
believe it's called sin on don't know
how to say for sure but what this is
good for is spies so it's looking at the
values of functions and mocking stuff
and getting what the value of different
objects are I actually have not used it
before because I don't like testing but
I've heard good things about this and
you can see an enzyme they're using as
well so I recommend checking out those
too but personally what I like doing is
snap snapshot testing this is something
by Jess that makes it super super easy
to test so I'm going to show you that
right now
so how it works is we're going to come
into here we can copy and paste and
we'll put our render at the top so we
import render here and what we can do is
we can do render create and then we pass
in our components so app is our
component and then we can create a
snapshot we can check it against the
snapshot and now we don't have a
snapshot so you can see it just created
one cool thing about just is when it
makes changes that automatically
runs it so you can salt I didn't come
over here and change it and stuff but we
ran four tests now because I just added
this one how the snapshot works is it
just created a snapshot of what my app
looks like now if I come and change the
snapshot or my code I can save go rerun
the test and be like hey something
changed
welcome used to be like this and now
it's like this and tells you hey
something broke so you can take
snapshots of what you want your
component to look like and then if
something changes you know about it
right away so now if I put it back it
matches the snapshot so you know if you
like introduced something that changes a
different component you didn't think
would have changed it so you can create
a snapshot like this of each one so I
can also add a snapshot of my component
so we can copy the renderer to and then
it renders correctly and here is my
component and you'll notice if you look
under it will create a new folder called
snapshots and here is actually where
it's taking a snapshot of what your
component looks like now let's say I
actually make a change like instead of
welcome to react I want to change it to
welcome to react 3.30 4.13 or whatever
I'll know some version number we're
getting air but this is we want to
change it to this this is not
accidentally changing the component what
you can do is you can quit out of this
and you can run NPM actually you don't
you need to go into package.json and add
a new one here so we need to run just
you and that will update all nap shot so
maybe update snapshots then I can go npm
run updates snapshots and just
is not found I thought it would find you
just as a dependency okay do I have just
installed globally oh yes I do
let's see I ingest you okay I don't even
have just installed here okay so I
thought I had just as a dead defense eat
I don't so I'm into yarn dev just to
install it so now I can run that command
hopefully run update snapshots and just
is still not found I just added it as a
dev dependency and I'd only actually
what happened oh I didn't do add I just
did too and we need to add here that's
how you just install a death dependency
my bad okay when that's done we should
be able to rerun this but what that will
do is with the - you command it should
say so you can do - - update snapshot or
you can do - - flag that will regenerate
the snapshot like it says and so will be
updated here so then your tests will no
longer fail when you run it so let's see
if we can get that going npm run update
and just failed oh I think it didn't
like it that's fine
let's do NPM test I think it was still
updated snapshots maybe and no snaps are
not fail same thing it doesn't have a 30
for you I don't know how to so actually
create react app uses is using chest I
shouldn't use this as actually installed
enzyme here but enzymes should be a dev
dependency same with this one some of
the yarn
add dev so first I'm going to do yarn
remove enzyme and was this one called
react test render react test render
I'm going to reinstall them as dev
dependencies and then so I this I you
just saw me run jest and it failed like
NPM update snapshots failed and I think
the reason for that is because we're
missing these as dev dependencies and
but I'll make sure but so basically
create react app installs just for you
with react scripts so that's why you
didn't see just here before so I'm not
sure how to tell the chests that Cree
act or react scripts uses to update
snapshots maybe if I do test which yeah
I don't know actually let's see if this
works now or if it fails we'll see what
the failure is test suite failed to run
oh you know what I think it's just
syntax yeah
it doesn't recognize it as JSX that's
just cuz just as being you need to
configure just to work so I'm gonna try
this may not work at all
NPM tests with - you flag and that
didn't even go so you notice how when I
ran that I think if I run maybe like
that I'll pass it in by scoop Oh BAM
guys at work I was not expecting that to
work but it does okay so forget what I
was telling you about installing just we
can do yarn remove Jeff don't do this
update snapshots here
what you want to do if you want update
snapshots notice however the tests are
all passing now if you want to update a
do NPM test - - - you so you'll notice
when I ran an PM test what really gets
run is this so if you don't push the - -
here it will not add the - you flag -
this command we want the - you flag the
- you flag is not for NPM test right it
is for this right here and that's
important so if that if that doesn't
make sense either way you want to run
this command update snapshots so now if
we just do NPM test we're passing and
just to recap if I'm accidentally
changing something it's going to get
caught and tell me hey you mess this up
and now if I want to like make it
permanent like maybe I want upgrade to
14 get it wrong here
- NPM test you and then we're going to
be passing our test so BAM that's it
guys just want to do a quick thing on
test sorry that did not work right away
but that's how coding works so yeah so
I'm going to be using probably snapshot
testing a little bit but even then I'm
not going to use it a ton personally I
just don't like testing I don't like
using it that much I find it slows me
down and a lot of times I just keep
changing what my components going to do
and I'm constantly changing the tests
and the tests don't feel like they're
useful so if something feels useful test
fit but so far I haven't been in a
scenario where it feels useful to test
the components close kind of where I'm
at with testing but if you are
interested in getting more involved with
it I highly recommend these two
libraries look more into that you can do
some interesting tests with those so
thanks for watching guys and I'll see in
the next video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>