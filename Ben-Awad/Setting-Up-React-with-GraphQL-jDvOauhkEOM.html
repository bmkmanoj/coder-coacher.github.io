<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Setting Up React with GraphQL | Coder Coacher - Coaching Coders</title><meta content="Setting Up React with GraphQL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Setting Up React with GraphQL</b></h2><h5 class="post__date">2017-10-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jDvOauhkEOM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we're gonna be setting up react
and graph QL on the front end to do this
we're gonna be using create react app
and Apollo for graph QL so create react
app you can go ahead and just type this
into your command line and then the name
of your application I'm gonna call mine
slack cloned client I ready did this I'm
rating that folder you wanna have CD
into the folder when you're all done and
if you do not have this what you can do
is install it by saying NPM - or MPN I -
G this globally installs things and you
can say create react app - go ahead and
install that and then when we're in here
we have dual LS we can see we have a
react application up and running I'm
going to open this up in Visual Studio
code and I have it right here I'm gonna
go ahead and start up the server and we
can see what we have here is basically a
little starter kit for react so it gives
us some files here it's basically a
little introduction to react and I have
this I have something running on my port
so I just say yes when it says do you
want run on a different port and here's
our react application this is what the
starter kit comes with just some basic
HTML okay so there's a few things I want
to do with this we're also going to set
up react router but first I want to step
yes link cuz I'm a big fan of it so I'm
gonna do is learn to knit and again if
you don't have eslint um you can install
it using NPM so I'm going to be using
Airbnb and we are using react and I'll
take JavaScript so that I'll go ahead
and install that and then what this will
do is it will add a DSL in our C file on
here and while that's loading I'm gonna
go ahead and get started over here so we
don't need some of this stuff like I
don't need app dot CSS I don't need a
test file
I don't need this index of CSS but we
can keep index ajs in a plot J s so this
just calls our app that's cool
we can put more stuff here though which
we will here we're getting no document
so these little lines is when es lint is
working
unfortunately yes lint with Airbnb has a
weird problem so they recommend running
this command right here I'll put a link
to this NPM package so you can run this
as well basically after run this command
to install the right packages and
because among fish I need to bash it so
I run that command and it installs the
right versions and then these errors
will go away so we don't need index J s
for this and I'm actually gonna
basically configure my react application
or my Apollo stuff in the index folder
and then I'm gonna create a folder
called screens so screens is kind of
where I'm gonna put all the things and
we can call the screens we can call this
routes
I guess routes make soups routes makes
more sense we'll call it routes since
we're doing a web application and so
we'll put index in there and I'm going
to create a index file so here I'm
basically going to put all the pages of
my application so I'm gonna import
routes from dot slash routes
and I'm gonna create a Const app and
here is where I'm gonna put all my
Apollo stuff and we're gonna render our
routes and we're just gonna pass our app
in here so we're not gonna import it
this way and definition for function per
in new line
I think that's okay so that didn't work
this thingy I guess I guess the copy and
paste is not working or maybe it did
work I don't know if this worked or not
but this page right here mayaaaa cellent
we can see if it's working file was not
validated okay this looks like now it's
working so I got a little thingy here I
just need to reload my window which I
actually don't know how to do with
Visual Studio code I'm sure there's a
hotkey to reload this but I don't know
it off clock my head so I'm just gonna
close and reopen and then yes lint
restarts when I do this and we're good
to go
so I'm gonna put it over here okay and
we'll notice all those weird errors went
away so now there is a couple other
things and I don't know if my server
might have stopped running - yeah cuz I
was running it in the terminal of right
here but what about that in a second
what's actually get rid of this real
quick so this is lint warning is telling
me that document is not defined this is
a global so if I go into dot e Iceland
are see this is where we see the
configuration file for yes lint I'm just
gonna say Global's I believe is what's
called and we're gonna say document
one to say it is a global and I'm gonna
save calm there we go and then prettier
cleans everything up and makes it nice
it might be global or Global's okay
Global's worked okay and then I'm gonna
get rid of this rule right here because
that we're gonna call everything J s so
to test this a a rule you don't want to
follow create a rules object you paste
oops
you paste in a rule oops I thought I
copied that you paste in I really don't
want so I don't want this rule and I'm
gonna say zero and now that error goes
away so an IV Aisling configured pretty
good let's go ahead install two packages
that we want so I want react Apollo
which allow us to do graph QL stuff and
then react router Dom which is what
we're going to use to switch pages so
I'll show you guys real quick the this
is the setup and getting started for
react Apollo we are installing it with
yarn and then what we need to do is this
guy right here so we need to create a
client point it to our graph QL endpoint
and then create a provider and do that
jazz so let's copy this
and I'm gonna go ahead and put this here
and we need the Apollo provider as well
and this URL is our graphical endpoint
so it's currently running at localhost
and I have mine at 80 81 this is when we
set up the server and we put in our port
number we wanted you're going to put
that same one all right we're gonna
click create a client here and I'm gonna
get rid of this since this is just the
same thing and I'm gonna wrap this with
the provider Apollo provider and we pass
in our client and what this allows us to
do is anywhere between the Apollo
provider we can do graft Cobell things
so in all our routes and oh it just
wants absolute first there we go all
right so our routes here where it's
configure react router so we installed
react router down like we needed to and
we're gonna copy this here's our imports
and then we're just gonna do router
stuff so this will look pretty
self-explanatory they have this router
here's a basic example so you have a
router object I'm also going to use a
switch which I'll explain how that works
but then you have your routes and you
say what the URL is and what the
component you want to render so here
I'm gonna get rid of all this stuff
and we're just gonna render a regular a
functional or a function for a component
and we're gonna paste paste that at the
top and we don't have to rename it
that's fine we're saying link we don't
need a link here but I'm gonna use a
switch and switch all that does yeah we
need to put stuff here whole switch does
is say render only one round at a time
so I'm gonna say browser router and I'm
gonna have a switch in here and we'll
have one route so I'm gonna make it
exact and I'll set a path and exact
means it matches this exact thing so if
I go to route so if this is my route and
I have the component home which we will
make in a second import home from home
so let's say we have this route set up
here and we don't need this to path if I
didn't have the keyword exact the path
slash Bob matches this right because
there's a slash here and there's a slash
here also it would match / beat and /bo
and slash ball but if I push exact and
not push if I add that as an attribute
then it only matches this it doesn't
match slash Bob so that's what we want
so let's create this home component and
just make sure everything is working and
we got graph QL working so we're gonna
do just a sample query
or yeah sample query to make sure
everything's working so here's our home
component I'm thinking let's run a query
let's do all users and just show their
IDs why not that's super simple okay so
I'm gonna copy this so we're gonna say
haunts all users query is equal to gql
that's something we're gonna grab from
apollo client so import gql and graph QL
from react Apollo and down here we're
gonna say graph QL this is a
higher-order component that's gonna wrap
our component we say the query we want
to basically handle or give to our
component so I want to run the all users
query with the home component and it's
gonna be passed in with a data prop and
we're gonna get a loading and we're
gonna get a all users object which will
be the array so what I'm going to do is
I'm going to say loading then we're
gonna show null if we're not loading
will actually show stuff alternatively
we could say like a little loading
indicator and then here I'm going to say
all users dot map and we'll have a user
here and we're just gonna render an h1
with the key of you ID and
UDOT ID and you know what it makes more
sense why we share their emails so let's
select that field right here so give
that a save everything formats and we
can take a look at what this components
doing so we have a home component it's
taking the props data which is given to
us by graph QL higher-order component
it's running this query and then it's
putting the data into our home component
and while it's loading loading is true
and when we get the data puts in this
variable called all users so the reason
why it's called all users here is
because it matches the name of our query
so our query here is called all users so
we're gonna be given a prop call to all
users there so when it's loading or
returning nothing when loading is false
that means their data has been loaded
into the component we can actually
display something on the screen so you
can say all users dot map and h1 and the
key we're just grabbing so we're mapping
through each user and we're displaying
an h1 for each user using the key which
you have to use when you're mapping
through an array this is a unique
identifier for each element in the array
ideally you want to do some kind of ID
and then here you have just the value
that we want in h1 so now I'm gonna open
up the console for this and I'm gonna
say NPM start if you have console open
over here you can do NPM start as well
okay and I'm gonna say yes to run this
on another thing and let's see if our
home component loads and it should get a
1 we should expect to see this response
property map so all users all users is
undefined
okay
so we're getting a response the
pre-fight orifice doesn't pass
okay so I've had this happen to me I
wonder if it's okay so we don't have
chorus setup I'm gonna try this with in
cockney you know if incognito doesn't
work we'll just add Coors real quick
okay course this doesn't work so let's
go add Coors real quick okay so here is
the back end I have up in Visual Studio
code we're gonna close this I'm gonna
close some of these files so we're
getting an air with basically saying
we're not allowed to access the server
so what we need to do is we need to use
a Coors library so I'm gonna see the out
of here and go into my slack server and
I need to install a package called
course so I'm gonna do yarn add cores
and so what I'm gonna do is just import
cores from the cores and then I just say
app don't use cores and then star so
what that's saying is we're allowing all
websites to access our server
it's ideal for you to just specify the
single server that should like for
example we know localhost 2001 so you
can put localhost 3001 here I don't know
if you have to do HTTP or not I forget
but I'm just gonna do a star so we make
sure everything's working and I think
we're just getting this cuz I don't know
why it says that oh I just miss spelled
from
okay so let's see if we still get that
air okay we do and the reason for that
we're now we're getting a new air I
forgot to do slash graphic you all here
so you need to make sure to point to the
actual graph QL endpoint for your
network interface and BAM so we have
both our emails showing up so our query
is working so our front-end is all set
up then our home component is able to
make graph QL queries that means we can
also do mutations and we have a router
set up so now we can have lots of
different pages I'm real quick before I
end I want to show you alternatively one
way you could handle this is instead of
doing loading null I could just ignore
loading and set the default value of all
users to an empty array and this will
work and not crash because when it's
still loading the array will be empty
and we won't render anything so that's
just an alternate way to handle this as
well because notice I'll show you what
happens if I get rid of the default we
get an error because when it's loading
this guy is equal to undefined so need
to have a default value or don't show it
when it's loading
all right cool so that is it for this
video guys I'll put the code up on
github and the link in the description
below and I'll see in the next video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>