<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Nginx Docker | Coder Coacher - Coaching Coders</title><meta content="Nginx Docker - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Nginx Docker</b></h2><h5 class="post__date">2017-12-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/P4Ld3eYDwu4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we're gonna be setting up
engine X in this video it's really easy
and it's nice because instead of having
our Express server open up its ports
like so we'll have nginx handle all
outside traffic and then it can route it
to our Express server so because we're
gonna set up that way we no longer need
to actually open up the ports for our
Express server and our docker compose
file so we can actually just remove that
and we're gonna hang create a new
service called nginx at the bottom here
and this is gonna handle outside traffic
now and I'm gonna come over here to
engine X documentation and we're gonna
just come down here and it has a nice
default for docker compose what they
recommend so we're just gonna copy that
and use that and I'm just gonna tab it
over real quick okay so what is this
doing so first off we are grabbing the
engine X image and then we're setting up
a volume we're creating a my site
template on our computer so let's create
that my site template and you can call
this something different if you like but
I'm just gonna follow them and they're
setting up this volume so it's gonna be
there on the container and then they're
opening up a port we're gonna open ours
up to 80 81 because that's what our
client record our react server a react
client is making requests to and we
don't worry about any environment
variables but you can use them if you
like
and then here they're using this M sub
set so they can use environment
variables but you'll notice they're
really just taking this my site template
and setting it as the default
configuration for nginx and then they're
starting up engine X that's what the
command that's getting run so now we
have nginx running and we can connect to
it at port 8081
by default it's already listening on 80
in the container so we're good and then
we just need to set up our configuration
file for
nginx and we're all set so i'ma come
over here and I'm just gonna do setting
up a simple proxy server and beginner
guide and we're just gonna copy this set
up so right here we're just gonna route
all traffic to our Express server we're
not gonna worry about this right now and
for us this is gonna be called web
because we have this guy right here
called web so you want to make sure that
matches ought to set a localhost and
make sure you change this to 80 81 or
whatever port your Express servers
running on so for me it's 80 81 and then
because we want to connect to web we
need to make sure we set up a network so
connect it to the web net network and
I'm just gonna go ahead and set up the
pins on that way the containers start up
in the right order
so this is gonna depend on the web and
I'm going to just go ahead up here and
say web depends on the database and
Redis and the reason to add depends on
is it just changes make sure that
database in Redis start up first then
the web container starts up and then the
nginx container starts up last because
they need each other to work so now that
we're running on the same network we can
access the Express server and then we
can route all traffic to it so that's it
that's it's very easy and fast to set up
let's see this in action now I'm just
gonna come over here and run docker
compose up and everything will boot up
and then as soon as our servers running
and nginx is up we can make a request
and see if it goes through correctly
we're still reconnecting looks like our
database is taking a little bit longer
to set up but sure enough we reconnect
and now I can come over here I have my
app I'm on just the alright just on the
home page but we load our users and we
can see it does load in so it is working
and we can come on over here and I can
see who is connected so I can see
someone has made a post request to graph
QL and you can see this is coming from
nginx
vlog and you can see some information
about my computer and whatnot so that's
it that's how easy and fast it is to set
up engine X and now we have it proxying
in front of our Express server and we
can go ahead and change this template to
whatever we like you can add more
configurations in here but this is just
a real basic one and as you have we
could route this right if we were
sitting up at micro-service setup we
could have multiple websites and route
different traffic to different ones
that's it for this video guys
and thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>