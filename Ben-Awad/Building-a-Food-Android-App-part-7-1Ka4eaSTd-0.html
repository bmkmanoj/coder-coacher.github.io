<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a Food Android App - part 7 | Coder Coacher - Coaching Coders</title><meta content="Building a Food Android App - part 7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a Food Android App - part 7</b></h2><h5 class="post__date">2016-12-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1Ka4eaSTd-0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome back in this
video I'm gonna be wrapping up the app
and getting it working with location so
location is a big one we're gonna be
getting it from straight from the user
so that first off let's jump right in
and get into our Android manifest and
add a permission so we're gonna want
find location done back internship
tivity and then we're gonna be editing
stuff and the oncreate right above our
execute so we're gonna be using a
location manager so go ahead and import
this in that and then we can get
last-known location manager dot GPS
provider this will give us a location
and now you'll notice we get a little
red line when we try to get the location
basically and nougat you have to ask for
special permission D at the users
location so we'll add that code so this
is when you create the location manager
I believe does it use the location
manager no it doesn't all this code
doing right here is just checking if the
user has basically allowed for me to use
the location of their device so if they
don't then basically a little pop-up
will pop up and be like can you please
allow location and then
depending on what they say we act on
that so we're gonna do on you it's
called request permission on there so
this has a bunch of basically so we can
just carry that stuff have an else or we
don't we don't have an else okay
so this big long line this big long if
statement that was auto-generated for us
is checking if our location is active if
not it goes right in here and it's like
sorry you do not have location and I'm
just gonna copy this straight over for
my github page right here and all we
want to do is request permissions this
is a lot of boilerplate code that is
just taken straight from the Android
documentation of how to ask for
permissions and whatnot so we're using
requesting a permission for the access
of fine location and then we're actually
creating this my permission request this
is just a random int that we're using so
private final and and then you set it to
some random value up here I like to do
103 and then you create this function
right here
just paste that in so this is on request
permission result so when we actually
request permission what it's gonna do is
it's going to prompt the user with a
pop-up and then depending on what the
user does allows or denies is then given
back to us so let's say they grant us
permission that's great we don't really
need to do anything we're gonna then
grab the permission we're gonna create
an it location function um if not we're
just saying oh I'm sorry you didn't give
us permission we're gonna be using
setting their default location to San
Francisco so we're going to knit the
location and then we're gonna load it
and we can get rid of this and then we
can do the same thing here so else so
let's say they array gave us permission
like this is not the first time loading
their app we're in it location they're
going to wait for restaurant and true
don't give her this and get rid of that
okay so this an it location I'm again
just gonna copy it straight from my
github because is a long and annoying
I'll explain how this is created yeah
application just copy that paste that
right in there okay
so I need to create two variables up
here oops
doubles longitude and latitude come down
here don't worry about the session oops
what we call it pictures touch worry
about these guys you hear that location
listener and coordinate okay so down
here we have this coordinate right here
delete that instead we're gonna create a
variable up there called M coordinate at
the very top here create a coordinate
and this is a Yelp coordinate will
import the class come down here and this
is where we're creating the in
coordinate we're just gonna fetch
pictures change okay so we fix that so
now let me explain what's happening here
so for an it location what it's doing is
its grand new location manager now the
first thing we check is if we have
permission if we don't have permission
as we told them right here we set the
default location to San Francisco which
is right here and then we start loading
stuff if we they do give us permission
what we do is we get their current
location but notice that this how this
says get last-known location so they
might not have a last-known location so
this can return null so we're checking
if it's not null great get the longitude
get the latitude then go ahead and
execute we're done else you don't have
their location so we have to actually go
get their location and to do that we
have to do request single update and
what we do is we pass in a criteria we
create this criteria right here taking
accuracy fine power high this is just
parameters teeth location and then we
just listen for a location change so
right here all we're saying is
you know if we get a location change
fantastic then we actually build this
coordinate basically even though on tune
latitude and then we fetch our pictures
if not we just say GPS is needed and
then we cannot just like do nothing
hopefully we know this doesn't happen
hopefully we get a location and then
down here we're just building the
coordinate if it works out so this is
how we're actually getting the location
so we're knitting location here and as
you can see up here we're just calling a
knit location Internet a location is
getting the basically location if it's
not there so if we come over here to our
app and click on GPS and turn it on and
let's just say 37 a 122 this will be San
Francisco and let's just restart the app
and let's just watch it so when that's
finished a building we should see the
app pop up here we should see it load in
and depending on whether it has a
location already it might fetch a
location if not it'll just go ahead and
post it all right so it's loading in no
location was had so it went ahead and
split location in and then it went ahead
and used the coordinates and got San
Francisco so I'm gonna swipe through and
it's working quite nice so that's the
app guys this is pretty much everything
that's on App Store right now you can
see the full code in my github which
I'll link in the description which is
pretty much everything I showed you in
these YouTube videos I'm gonna I'm gonna
leave this downloading more pictures for
you guys to try on your own I'm also
having the github if you want to see how
I implemented it if there's if you guys
really want to see me I can explain how
that works on another YouTube video
we're gonna leave it off for now and
then I do some randomization and have
algorithm for making the recipes new and
fresh so if you want me to talk about
that let me know but this is the gist of
how the app works
we're going through getting the location
using a GPS and a phone we're calling
the Yelp API and then we're just going
through and we're swiping listening for
the swipe showing stuff that's the app
so thank you guys for sticking with it
going through the series and creating
the app with me I hope you like it so
thank you guys for watching and I hope
you guys enjoyed</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>