<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Redux saga tutorial | Coder Coacher - Coaching Coders</title><meta content="Redux saga tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Redux saga tutorial</b></h2><h5 class="post__date">2017-01-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dOqhOg4ekRk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">guys in this video we're gonna be going
over how Redux audio works so opening up
the directory go into sagas and then
sagas j/s you'll see something that
looks kind of like this
I mean if yours looks slightly different
don't worry about it just go ahead and
comment out are uncommon all this stuff
and let's go over how a saga works so I
like to think about it in a kind of a
few different ways the first is down
here you'll have all your sagas
so each there's usually your group what
I like to think of as a saga is
something that makes an API call is
usually what I use it for so one API
call will usually have two functions us
something for example a something saga
and a call saga and then you'll always
have a route down here that we'll be
forking off different saugus if that
doesn't make sense
basically what's happening is down here
you'll just call the sagas that you put
here a simplified version of this is the
first thing you wanted to call for
example we're gonna be using a get
weather so I would call this get weather
saga and I would call this call get
weather this is just like the style
format that I like to make my Saugus in
and then this the get weather saga this
is like a listener this is listening for
an action and to make it actually listen
you have to fork it so get weather saga
this function tells tells you what it's
listening for so take every and then
right here you put in what it's actually
listening for the in the route here this
actually starts listening this is what
actually is lazily listening for the
action
this is what it's listening for and then
once it's listened and heard what it's
listening for it will then call the get
weather function which is this function
right here call get weather now we just
need to fill in what this guy right here
well should we be listening for well if
we just hop back over real quick to our
components and then our simple form or
remember we created this little submit
guy here and there's a little dispatch
and has the type fetch weather
well what get weather saga is listening
for is different types of actions so
it's looking for example we could look
for this and that's what we're going to
be doing so we're gonna be looking for
fetch weather now you can have multiple
sagas what you I usually do just copy
and paste I can have another one I could
call it call get tacos or something and
maybe this this one is called to get get
tacos saga and then I would fork it down
here get tacos saga and then maybe I do
fetch
tacos so that's how you would add
another saga and as you can see you just
basically follow the same procedure okay
so we're listening for fetch weather so
whenever this action is called it's
going to come to our saga over here it's
been listening for fetch weather and
then when that happens it's gonna call
get weather also note this is all
happening in the background this is an
asynchronous call which is important you
also notice the syntax is very weird
it's got these function stars yield
don't worry about that stuff just kind
of follow what's you don't really have
to worry about how it works the you can
you can get it too
without understanding the background of
how it works it's a generator function
if you want to look worn to it google it
but to get Redux I'll go working and you
use the power of it you don't really
have to worry about too much how this
works just know to follow the syntax you
do function star for these two and then
you'll have something that looks follows
this template you'll be yielding take
every and then up here it'll look like
this
now this call get whether what this does
is it will then do something now what
would we like it to do well in our case
we would like it to call the Yahoo
weather API and give us a some weather
for the location that we specified so
also real quick again it takes in an
action here I'm gonna use the notation
to break that down and just notice right
here we can get location resolved reject
location it's all reject okay okay so
notice I have yield call call right here
is when you'll pass in the function this
is the actual call to your API so this
will be get whether we can create a
function called get whether it takes a
location and will create the full thing
of this in a second this is what's gonna
call Yadu API for or weather and we pass
that into our call get weather and then
we pass in location as a parameter
notice we do comma we pass as a
parameter to call and then call passes
get weather location okay then whatever
is returned from get weather go for now
we'll just return that is passed to this
result and then result once you get the
results so we can just
console.log I if you want to see when
this happens I find that it's pretty
helpful once you get the result what you
want to do is you want to update the
state and also we can go back to full
screen what you want to do is after you
finish calling the API you now have data
you now have this whether you want to
show it on the screen and to do that is
you dispatch another action and you're
gonna pass in the result and this is
going to go to Redux and it's gonna
reduce it we'll just set that up in a
second and that will actually set up the
data put it in the state and this allows
us to actually use the data and show it
on the UI and use in a reactor plication
use the data so we can say fetch weather
done and right now there's something
listening for this we'll add that later
and this is just a regular reducer we're
gonna add to listen for that guy okay so
now we just need to fill out our get
weather instead of having a dummy
function here we actually need to make
an API call to make the API call we are
gonna be using super agent this makes it
a little easier to make API calls I like
it it's pretty neat I'll show you how it
works it's a little library that does
post request get requests and makes that
stuff easier but let me show you how
we're gonna be using the Yahoo API
I'll leave this link and the URL that
we're gonna be using and the description
below but basically what's happening
here is and if you come to this URL you
can check out the Yahoo with along with
me if you just click on weather in
Greenland it gives us this URL and we
can go here and it'll give us data and
jisan or not chase on a JSON format that
we couldn't in parse in this case for
whatever reason it's not giving us the
data I might be over my rate limit is
probably what it is
or something but we're gonna be using
this URL right here and just calling
that and changing the URL so if we go
back real quick is how we're going to
actually change it for different
locations well if we're gonna copy this
URL paste it here Const URL if you
notice this is a Greenland right this is
for Greenland if we just search
Greenland you'll notice right here this
is a pram where you pass it to the URL
so instead of Greenland we'll just put
in whatever location location that was
passed in to us we'll search that
location instead then we'll actually go
to that URL and get the JSON data so to
do that we're gonna make a request to
make a request you just talk later and
do what type of request you want to do
we're gonna get request where are we
going to this URL and after we go to
that URL with your dog then what do you
want to do with the data all we're gonna
do is we're gonna parse it and then
return it back data dot txt okay so it's
going to return that parse data back to
the result and then we're gonna put the
fetch to whether done now what we'd like
to do also is check well remember when I
went to this URL here I got in air we
were you know getting we're I don't know
out a rate limit something didn't want
to show us this stuff I don't know why
and actually did we want to do Greenland
actually that might have been why I
think we actually wanted current
conditions was that that one that gave
us fair results what's not giving us
fair results maybe it was a different
link No
either way we're getting bad data right
okay here we go
oh that just disappeared you saw for a
second that there was more data I don't
know why it's not showing it now but you
see it's not you giving us the full
weather and when it does this we would
like to throw an air and just home hey
we can't get the data right now and
we'll update that in our UI but we don't
have to touch our UI because we set up
with Redux forums nicely to handle when
we throw a request so we're gonna do is
we're in check if results dot query dot
results exists then we know we got a
good request and then we'll just we're
gonna yield that and then we're gonna
also call resolve and that just results
the promise that we did in our Redux
form and then here we're gonna call
reject because we got a bad we got bad
data back from our API the Yahoo data
API so no data for that location or
maybe our rate limit is has been
exceeded or whatever something has gone
wrong so we're gonna display an error
I'm gonna say no data for that location
okay so this is our Redux saga it is all
done so just to recap of how it's
working is we're listening for the fetch
weather action and the fetch weather
action happens this is happening in the
background we call get all weather or
call get weather we this function is
called we take the location that was
passed in and we called get weather now
get weather then goes to Yahoo and gets
the weather for that location using this
URL it parses the JSON and passes it
back here I'm using the JSON we check if
we got a valid response if we get a
valid response we pass we call another
action
which we will then make a reducer for
right now to handle this and update the
state otherwise we reject and we do no
data for that location through an error
back in a redox form will show an error
I want with the message on the screen
like oops explode out the wrong location
like I showed you before so real quick I
just want to hop over here see if we can
show you that an error message submit no
data for that location nice
let me pass that so that's exactly what
we want to see and you know what real
click let's see if we can get a good
location working is it loading it looks
like it's loading and I don't know if it
got data we can look at it here I had
consoled the results and it looks like
we did get weather for New York awesome
so next we need to add that to the state
and then we could then once we add to
the state we can show it on the screen
to add to the state we're gonna make it
that reducer that I told you about so
we're just gonna go to reducers and
create a weather reducer so function
whether the initial state is just gonna
be real are all object I'm gonna make a
switch statement and we're just gonna
look for the type of the action that we
want and what is the type that we want
oops we don't need you oh thank you it
was in our sagas it was fetch weather
done just gonna copy this right here and
we're gonna say case fetch weather is
done when we get that we're just gonna
return action dot result and then we
have our default case
we just returned estate and we're just
going to export the fault with it okay
that's our reducer that's gonna add the
result that we get from the JSON to our
state now to finish off that reducer we
just need to add it to our reducer so
we're just an import weather from
weather and we'll say we'll just pass in
weather to our route reducer right here
okay I'm gonna come back over to the
components and then the app yes and add
it to our state so weather is equal to
state weather
okay now if we come back over here and I
type in New York see if I get some data
and query results I do get some data now
if I come to react this is a chrome dev
tool that I have and I recommend you get
it I'll put in description below the
link to it it's very helpful it allows
us to look at this state and the props
so I'm just gonna come to the let's look
at Main and we'll look at weather you
notice this is what we added and it has
all the data that we can use to get
weather and gives us all this data so we
have now all this data available for us
and our props and then we will be
showing that little thing right here in
the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>