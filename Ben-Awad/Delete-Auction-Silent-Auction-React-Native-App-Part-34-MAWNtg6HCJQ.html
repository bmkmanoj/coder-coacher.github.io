<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Delete Auction - Silent Auction React Native App Part 34 | Coder Coacher - Coaching Coders</title><meta content="Delete Auction - Silent Auction React Native App Part 34 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Delete Auction - Silent Auction React Native App Part 34</b></h2><h5 class="post__date">2017-07-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MAWNtg6HCJQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so I have my silent auction app
up here and what I want to do is show
you guys how you can delete an auction
so this will be pretty easy what I want
to do is add just a little X here so
there's basically two steps to it adding
the icon here and then when we click on
the icon actually having an action occur
and delete it from the database and if
you're new to this project or haven't
heard of it I'll put links in
description below and we're using a
feathers just backend which makes it
really easy to add this functionality
because we already have delete coded for
us because of the feathers we just need
to call that end point so let's go ahead
and get right into this thing so I have
up the code for this and I am in source
route view auctions and the view page so
this is our card view and you'll notice
at the top where you display the name of
the auction now on the other side I'd
like to put an X so we can copy that
instead of left we can say right and
then instead of text and having the name
here we can actually have an icon and
now the name of our icon is going to be
close and the reason for that is that's
just the little X icon so for your
refresh this we a see a little icon here
and nothing's going to happen we click
on it and it's quite small so let's fix
both of those to make it bigger we can
add a style I'm going to do font size
and let's say I don't know like 48 might
be too big so it looks like font size
what makes it bigger now looks good
let's make it clickable so I want to do
on press and then on press what we'd
like to do is delete it so we have
requested we're passing in a function
called request bid let's also pass in a
function called remove auction so we're
going to call remove auction whenever
this is pressed
through the auction so now we have to
actually pass remove auction into this
function so wherever we're calling
auctions which is down here believe
auctions map we need to pass in this
prop dot remove auction and now we need
to add remove auction to our props that
we actually have this function so let's
go into our index page let's add that
action remove auction and then we're
going to have to add remove auctions to
our actions for all our auctions so
remove auction and now if I come over
here to the actions we can create a new
one so we have auction were deleted
we're going to have down here ProQuest
auction remove and then we're going to
create another auction so remove auction
and that's going to call our request
auction remove all right so now we
actually need to do something and our
saga when this happens get rid of that
so I'm going to copy this paste it here
and now we're going to say call the move
auction well call remove option is good
kazoos only removing one find auction
saga this will be removed auction saga
and then here let's do request auctioned
removal that doesn't make sense it
should be removed request remove auction
and move auction that's that's better so
let's actually change that to remove off
because that just makes more sense move
auction the auction okay so now back to
our saga so we have color move auction
remove auction and here is where your
request to remove auctions and we call
call or move auction
all right so we're listening for this
action to be called whatever the action
is called
we then call it a saga here this saga we
want to call is a remove auction and
then grab the payload the payload will
actually be the ID of the auction we
want deleted and if we go back to our
view we'll notice we're actually not
passing that in we're passing nothing so
let's change that we're grabbing the ID
of the auction up here so I'm just going
to pass that in nice so now in our saga
we can use that the rest of this looks
good we don't actually have to yield
anything we can count the log a response
in case something wrong happens but we
actually don't to do anything when we
get response for a move and the reason
that is in our view function here we
have a listener since we're using
WebSockets we have a listener : and
oxygen when we oughta actually remove
that so we don't have to handle it we
just say remove it from the database it
will automatically alert us all right so
removing auction here and now remove
auction we need to actually add to our
API so add that import and then come
over here and we can copy find auction
okay so then we remove auction so
auction service dot remove passing in
the prams crams here will be that
payload which is an object with the ID
which is perfect I think can just pass
an object in like that we might have to
strip it like this I actually think it
is like that I also pass an object in
I can't remember if you pass in like
this or if they want it just like that
we'll try both I'm guessing it like this
if this doesn't work we'll go back to
the other one and this looks good let's
see this is my terminal and I have I'll
just show you guys where I ran I ran
react native log Iowa oh I can have this
log and I can see what's going on so now
I'm going to come back over here refresh
I'm gonna try clicking this X and
nothing happened so let's come over here
and see
looks like Generic ER air ID for a move
cannot be undefined only null and
removing multiple entries okay
so what I'm going to do here is I'm
going to console yeah actually in my
saga what I'll do so it looks like the
ID is no and to double-check this on a
console dot log auction there's not
oxygen action and see what the values
are so action so I'm going to rerun this
and see what the values are BAM come
back over here so let's see scroll down
okay so we have payload payload is one
so it's not undefined at all
so payload payload 1 so we know it's not
a problem with things being undefined so
knowing this passing 1 to the function
here so coming back to our API we don't
actually have to undo that we're
actually just passing the ID in so I
thought this was an object with the ID
but it's actually just we're passing an
ID directly so we're good so let's try
this again
now clip X and bam it's deleted so cool
so now we have delete actions working
real quick before I wrap up this video
what I want to do is only show X's
for auctions you create so I'm going to
create another option here called Bob's
option because I'm currently logged into
Bob starting price will say $13 select a
date
let's do tomorrow and we can confirm
that date let's submit the auction so it
shows the X here because I'm Bob but I'd
like this X not to be here if Bob is not
the user if he did not create this
auction so I'm going to show you how to
do that so if I come over here to my
view and I just show you is we're
actually passing in the user prop here
so the user will have an ID and we also
have this seller ID here so we can
compare against so if we just pass in
here B user ID as one of the props and
looks good before we call this function
what we can do is say the sub props that
user to ID the stop props that users ID
and pass the user ID in and then I put
back up here and R so we called this
function down there and then we pass in
a user ID so now we have a user ID and
we can compare it against seller and
what we're going to do is we're going to
say ID is equal to seller and then ID
being user ID and so this right icon
will only show up if user ID and seller
match so if we refresh this X is not
there because they're different and they
should not be different so I don't know
why they're different
let's console.log this Vic we're logging
here we are so the seller of the seller
we have to get the ID of the seller
we're passing back the object not just
ID sellers the whole user so seller ID
all right so
shows up and now I'm going to create a
new user column 10-10-10 sign up now I'm
going to log in as ten weeks come down
here cool and I login and cool we don't
see the X here but if I create an
auction Tim's auctioned now price we're
going to be 14
set the date till Saturday hit confirm
and submit that all right Tim's auction
10cc X wait doesn't see the X for Bob
very nice and if I log back in as Bob I
should see the inverse so I see Bob's
auction with the X and Tim's auction is
I am FX so awesome so it looks like we
got that functionality working nicely we
can delete now and we have this X only
showing up for the auctions that we own
so that's perfect so that is it for this
video in the next video what I want to
do is show you how to edit an auction so
we'll create maybe like a little pencil
icon and be able to edit the sky so yeah
that's it for this video guys thanks for
watching I hope this was helpful and as
always the code is up on github if you
want to check it out so see you next
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>