<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Splitting in React | Coder Coacher - Coaching Coders</title><meta content="Code Splitting in React - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Splitting in React</b></h2><h5 class="post__date">2018-02-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/d_Ak1pn-n4k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys there's this thing called codes
bling that's gone really popular lately
and what it is is a technique to help
improve the performance of the first
time your application loads so sometimes
it can take a while and the reason for
that is when you build a react
application it takes all your react code
and puts it into one javascript file
called bundle a j/s and it can get quite
big depending on a number of third-party
libraries you install and we can
actually look at that so here I have my
slack application up and we can inspect
it and go into the network tab and if we
click on j/s we can see all the
JavaScript that gets downloaded so if we
refresh the page we can actually see
this bundle dot GS so this is our react
code right here again and it can get
quite big so the idea with code
splitting is instead of having bundled
Jas where you install a big boy like
this so this contains your entire react
application now the reason why code
splitting works is because you don't
really need your whole react application
if you load this first page right
there's lots of components and libraries
that are not in use on this first page
right and so the idea with code
splitting is you split up your bundle so
you might have bundle 1 and bundle 2 and
you load bundle 2 later when you need it
so instead of loading everything upfront
you load it in pieces and so this really
just helps you with the initial load
time of your application so this is
something I'd really say only take a
look at code splitting if your initial
load of your website is you're wanting
to speed that up and one of the reasons
for it and you can see right this is it
took 62 milliseconds or actually I don't
know if it took 390 or 62 I don't know
which one but you can see the time it
takes for it to download the bundle and
so the lower the size you get the faster
it loads the bundle and the faster your
webpage loads so it's something to look
at so with react there's a really nice
library
it makes it super easy to add code
splitting tor to your application it's
called react loadable and there's really
the readme is super great I recommend
you come check it out I don't think I
even need to make a video about it
because it's really great I'm gonna show
you guys how I added this to my project
and what it looks like so here is what
the after-effects of code splitting is
so now I don't just have a bundle dot
yes but I have this four chunk GA s so
it splits things up so I've downloaded
these two and now if I go to a different
page log in you'll notice I'm now
downloading bundle and one dot chunk so
you notice I love different things
depending on which page I go to so I'll
go back to this page I'm loading chunk
four so it changes to paying on what
page am on because I need different
JavaScript files and functions so let's
take a look at the code that makes this
possible so here is the routes file for
me so I'm using react router for this so
I just imported react loadable up here
just like this and then I made every
single one of my components asynchronous
so how it works is it waits to load your
component until it's needed and then
that's when it'll fetch the bundle so
here's me turning what five components
and async versions of them so here's how
it works you specify the loader so this
is the component you'd like to load and
so you have a function here and you
return an import statement and this
dynamically imports it right so it waits
to import it until this function is run
and here I just specify my component so
dot slash home I have my home component
over here and then it takes a second to
load right because it's asynchronous so
you can have a component that pops up in
the meantime
so I have a loading component here but
you could have a pretty spinner or
anything else and you specify that as
loading so then I can now use async home
as any other component
so here's a sink home and you notice it
works just fine with react Apollo and
graph QL stuff so that's nice so there's
really no other code changes needed so I
pretty much just split my application
into five different chunks doing this
right now it's not necessarily the best
way to just split it up like this I just
split up by routes but really you can
slip this up whatever makes sense right
you can't want to split up with chunks
of code and split up the libraries that
you're using so you can split up by
component and these are just components
so I can load them anywhere I want and
you can actually code split inside of
components right because you could just
create the component so if we look at
for example home well it's not a good
example because we have nothing in here
I'll see View team yeah so we could make
sidebar and send message asynchronous
and header and message container and
load those in chunks as well but okay so
this is the code that does that and so
now it splits into chunks now what I
want to show you guys is actually what
this looks like when you build this so
on the right here this is how what the
Bill books like when not using code
splitting so I have one main file or one
main J's file this is what bundle Jas is
now when you build it with a crate react
native app it does you know name it
differently and give you a little hash
here but you'll notice it's 222
kilobytes here over here this is what
looks like with code splitting so my
main dot j/s right here is 83 kilobytes
so you'll notice immediately that's
smaller but then you have some chunks
and you notice the chunks can add up to
be more than main dot Jas now I haven't
done too much code splitting myself so I
don't know if this is because I just
split the code poorly but we are loading
it will load it faster because you're
loading it in chunks of hundred
kilobytes versus 222 kilobytes
so that's something but for example if
we take a look at this home page no
sweet download bundle and for dot chunk
so I believe for dot chunk is so this is
for dot chunk at six kilobytes and right
here I believe bundle maps to main so
this would be about eighty-nine
kilobytes we download on that page
versus 200 if we didn't use code
splitting but alright there's places
where if I go like slash login we're now
getting bundle and one dot chunk so now
my bundle here I have a hundred and
chunk is 84 not chunk this main is 83 so
about 187 compared to 220 which is still
better but we're getting quite close
right to what we had before so it's
something to measure and see how much
code splitting is actually helping you
look at the load time I can help if you
have a lot of libraries and do it
smartly this is something I kind of
haven't spent too much time with doing
just because I feel like my react
application is fast enough as it is I
don't feel like the initial load time I
don't know how many seconds are really
gonna get shaved off with the bundle so
that's something I'm still deciding
whether or not I'm kind of waiting until
the initial load time is you know at a
point where it's it needs to improve and
then I'm gonna look into code splitting
more but yeah if you guys are having
trouble and you want to improve that
definitely look at code splitting and
see if it and prove it
it's a very interesting concept and I
can see working make a lot of
improvements especially if you have some
big third-party libraries I bet this
will work really well with like lodash
and stuff so yeah that's it for this
video guys check out react loadable you
saw how easy it was for me to add these
and there's a lot of other good
functions or not functions but options
you can pass to loadable so do check it
out and that's it for this video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>