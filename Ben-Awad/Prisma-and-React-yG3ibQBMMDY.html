<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Prisma and React | Coder Coacher - Coaching Coders</title><meta content="Prisma and React - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Prisma and React</b></h2><h5 class="post__date">2018-01-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yG3ibQBMMDY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I just ran the react
boilerplate for Prisma and it looks
really familiar so the server is set up
so this is what the folder structure is
like this there's a folder called server
and this is just like what we did before
or the other Prisma boilerplates for
just setting up a server this is there's
not really anything different there it's
just in a folder called server and then
there's some other stuff and while the
other things is source and we can see
there's some JavaScript files here and
this is just some react code and this is
actually very familiar you know we see
some apollo code so they're using apollo
client to connect to Prisma or the
server and then Prisma they're using
HTTP link so this looks very familiar
and one thing that might look slightly
weird is react fragments that's just a
new feature of react though it's not a
prism a-- doing anything weird this is
this is actually a recent change you can
also do I believe it's like that to do
fragments but there looks like to me it
was using a crate react app if we look
at package.json they're using react
scripts I don't know if that means
they're using different react scripts
and create react app but if you look at
the package of JSON for a create react
app they use react scripts too so I'm
thinking it's just create react app and
this is if you've done some reactor
followed my stuff this looks really
familiar because we've done some of
their stuff like this before and so they
set up Apollo here and then they just
have some components that they pre-made
and then also if you're unfamiliar what
this stuff is that's just like a CSS
library that they added but this is kind
of interesting to go through and just
take a little cat but honestly there's
nothing that's special and nothing
really to talk about as at least with
like the boilerplate being different so
I just want to talk about kind of how
this fits in with Prisma and how it's
gonna work
it's kind of interesting they're using
react fragments a lot I'm actually
curious if create react app has react
fragment so when you need to check on
that cuz I actually really like
fragments I want to give them more try
if you don't know what they are you know
I'll make a separate video on react
fragments all touching those later
that's kind of a tangent but anyway how
does this gonna work with Prisma so I
made this little diagram of what it
looks like and this is our react
application right here and it's actually
gonna work exactly like if you followed
my slack series or some of my others
where we're gonna make a react client
it's the one they use is not a
server-side rendered but you could do
server-side rendered if you wanted to
I'm not I'm just gonna do regular create
react app and that's what they use here
and they have basically whenever they
want to do a mutation or a query they're
gonna hit the server so the server is
the one now this is some server
boilerplate that Prisma gave us so
that's in the server folder here and we
see the index J s we can see they gave
us graph QL yoga and then we can work
hang a new Prisma instance and now our
server here is then gonna make a request
to the Prisma service so this is
basically handles the my sequel database
for us so we don't have direct access to
it and all of this is running in docker
these two guys right here I running in
docker
so our server here is gonna connect here
and make a request and then it's gonna
handle the request grab the data from my
sequel and then it's gonna fulfill it
over there so this is very similar to
what we did before but instead of us
having an arrow you know directly
pointing to like Postgres sequel over
here all right so that's another
database so instead of just our server
directory accessing Postgres with I
don't know like library called sequel
wise that's what I've used before
we're now interfacing with Prisma and
then Prisma interfaces with my sequel so
we're hitting another server instead of
directory hitting a database with this
so that's pretty much it and you may be
wondering so this is a graph QL API -
and so is this guy right so you may be
wondering why why do I even need this
intermediate server why can't with my
react I just go and pop right out over
here to my Prisma service why do I need
this in between first off you need it
because sometimes you want to add extra
stuff right so this Prisma service is
only gonna cover crud on your models or
your any type of types you create so if
you need to you know change the data
anyway before you send it back to react
or do anything extra that's when you're
gonna need a server here so that's why
you have this server the next question
is how are you preventing people right
from just hitting the Prisma service and
making sure they go through this right
and that's a great question and actually
they have that covered already so if you
follow along with my other prism of
videos you probably saw how I got this
message your token is invalid and you
might have gotten this as well and you
might be wondering why you're getting
this or how to get rid of it so in your
server in your prism animal there's a
secret right here you can disable off if
you want to but the secret is on by
default and this is probably a good
thing because it keeps your endpoint
here protected so like I can't access
this right now unless I know the secret
and I do know the secret so I can access
it but someone with a random you know if
they're just using our react application
they don't know the secret so they can't
access this so how do we you know now
that we know the secret how can we
access it well we need to set a HTTP
header and grab a JWT token with this
secret over here so Prisma has a token
that we can create in
there we go I don't know why that looks
so funny but I can type Prisma token and
it is gonna create a token for us which
we can use now if you're on Mac you can
pipe this to PB copy so it'll go right
to your clipboard or you can copy and
paste the token that comes out from
Prisma token but with this token you can
come on over here to ACP headers and
notice how I'm directly interfacing with
the Prisma this is the Prisma service
playground graphic you'll playground I'm
doing right now so I'm gonna say
authorization paste in my token and then
I'm just gonna give this a refresh and
let's see I can see my posts now here
and create posts and we can just create
this guy so posts run it and now we
can't run this thing now if we fudge up
this token we're gonna get deauthorized
again just like chop some stuff off
there we go
so if we have a bad token you'll notice
how we can't authorize we can still see
our docs it looks like but as you can
see we can't access it so you need to
pass in a good token so this is a
protected endpoint automatically this is
not a protected endpoint automatically
so we're gonna have east setting up
authentication and permissions on this
and we can do it just like we have I
have an express server before and you
pretty much are given total flexibility
with it and I'm feeling pretty
comfortable with how prism is working
now so I want to do a series with it a
like little mini series with it so stay
tuned for tomorrow I'm going to announce
a new series and we're gonna work with
Prisma and create a Prisma backend we'll
create the server and then also a react
front-end
maybe we'll do react native I don't know
either one works you know what everyone
seems to be doing since the boiler plate
is already 4 react
let's do react native since they'll be
less stuff there'll be less content out
there four react native and I've done
more react stuff anyway so yeah and
you'll see that how this actually works
in practice having these guys talk to
each other but check out the react
boiler plate it's pretty cool and we'll
do something very similar to it in our
series well that's it for this video
guys
thanks for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>