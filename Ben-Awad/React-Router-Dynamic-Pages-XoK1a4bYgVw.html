<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Router Dynamic Pages | Coder Coacher - Coaching Coders</title><meta content="React Router Dynamic Pages - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Router Dynamic Pages</b></h2><h5 class="post__date">2017-08-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XoK1a4bYgVw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys I want to show you how to
create a dynamic route and react router
now what I mean by that is creating a
route these are what I would call static
routes they just match to like login
that's it right what I mean by dynamic
route it's something like this so if I
did like book and there's a variable in
the route so for example the ID so or
maybe something else like a word ok this
is this is the title of the book or you
know there's something here that makes
it dynamic right and we render
differently depending on what the value
is so that's when we talk about today
and to the backend I'm going to use for
this this is the code I'm using is one
project i have created called jello
world starter kit the starter code is in
the link description below for this I'm
also going to be using the backing
attached to this is a graph QL server
but this the react routers part will
work whether using a REST API or graph
QL server so what we're going to do is
we're going to render a book component
which we need to create so import book
from dot slash book so we're going to
create this and what we're going to do
here is such different books depending
on what the ID variable we get here so
I'm just going to show you I have and
graphical right here this is the graph
QL that we're going to run so we're
going to call gift book and we pass it
whenever I do we get from the URL and we
get that data that's what we render on
the screen ok
so can't find module where it's go ahead
and create our new route called book
let's look Jess ok sjf ok so here we're
just going to import react from react
and of course let's just render static
stuff so we're just going to say hi h1
so any route that matches we should see
how
summons a book and I'm just going to put
in some garbage right react router
doesn't know what an ID is so we know
that we need an integer for our ID so
like that is a valid ID but like this is
not right so what we'd like to do is
actually through a 404 first off if they
give us an invalid ID and now how do we
know though how do we get this value
right in our component well react router
actually passes it to our props
so let's come here I can show you guys
um it comes here at the Cleve it's user
component here and match we can get the
params and then the ID value and I'll
give us whatever we type here so if you
won I was hoping it wasn't redo it but
it did the pram would be this value so
we can say match gonna get the params
and you want to get the ID so let's just
show the idea here and bam so now if I
change this here you get different value
here so now if if the ID is not an
integer then we would like to throw a
404 message basically so let's create
our routes over here just a new hat this
is called 404 and then we're just going
to render component called page not
found so which way the component is
equal to page not found and I'm just
going to create a very basic page for
this but just as page not found so page
not found create a new route here is
called page not found is so here we're
going to just import react from react
and all we're going to say is because we
can
find the page write that they're trying
to plus so each one page not found so in
our book here we're going to say we're
going to try and then we're going to
catch actually we don't even need a
catch
I think parson so I was going to say
we're going to do part sent on ID said
Const ID is equal to this if not ID so
we're just going to return and we're
going to a redirect tag here so copy
this from react router Dom and we want
this redirect and we here's example
redirect that reasoning here so I'm just
going to copy that and we're just
specifying the task name so for or for
so here we still need a return stuff
here we're just we'll just go ahead and
still return the ID if it's valid and
we're quick we have a small error so
this looks good so we're going to try to
parse the ID it's an integer we should
get about integer back the only thing is
if the ID is zero that could mess us up
so let's say ID not equal to zero and ID
the reason for this is zero evaluates to
false so if we did this we get
redirected I think so we're checking if
it's not equal to zero and the ID does
like it's not it's no lor it's undefined
we're trying to parse it so we redirect
to this 404 so say that cannot find page
not found so page not a pre spelled
wrong zero duplicate Declaration of ID
oh so this will be a good ID we'll say
good idea
so for example this
alright cool takes us to 404 not found
but now if I go to book slash to take
this here and let's do that educational
talking about 0 still show 0 here
perfect so if there's anything else you
know your ID can't be then you could
redirect here the next thing to do is
actually do a fetch right so we have the
ID we want to fetch some data from our
API so for us we want to call this graph
QL get booked so let's do that so I'm
going to import graph QL and gql from
react Apollo so we can do some graph QL
things
so here's going to be our both component
book and we're going to export defaults
we're going to call graph QL on it so I
say cons book query this is where we're
going to put our graph QL we're going to
call so we're not attached our book
query to our book component and then
here we're going to do our query so the
query I said we're going to run is this
guy right here and we actually want to
have a variable right because ID is
going to change so ID be dollar sign ID
is just an int and we have to get an X
here so the dollar sign ID I could fetch
more per field from gift book but I'm
just going to keep it simple by just
getting the title so I'm gonna get the
query here and now
something about graph QL is ill notice
okay so we have the ID here and we need
to pass this and as a variable well we
only know what the ID is by this prop
that we're getting here we're actually
not you know there's we can't we're not
calling the query here the query gets
called automatically for us from reactor
polyps Venus
Hotel reactor Paulo that we want to use
this ID that we're getting right here
and the way we do this is by actually
the second parameter here can be a
function so we can save props and the
function it I'll actually pass
props to it so we can actually have
access to these things and we can return
an object back and the object here is
going to be our options one of the
options is variables here is where we
pass in the ID so when I say ID equal to
props that matched up grants ID and
we're going to squiggly error expression
expected I think it's fine we'll see if
we get an error over here the operation
data wrapping block is expecting a Devo
it was not found in cross pass to pause
okay so I guess is totally wrong then
let's go it up Apollo data I thought I
thought it was props and then used
passing the variable here but I guess
it's slightly different and for us what
I'm also thinking is you know how we're
redirecting and the right here I'm
wondering if this graph QL query is
getting called first so admire we might
actually just get a graph QL air at CID
is that so all right so query where is
queries here you so we want to do this
is what we want to do okay so this is
what I did wrong so we I need to do
options the chimp is not a function here
but it was just a function here we need
to say options is equal to a function
there we go that looks better so the
second parameter is a object with the
options here you're passing the crops
and all right this looks better
missing rate radix that's fine we should
be doing a triple equals though it wants
us to just
put it in here so that's here those two
warnings all right so I think we're
getting the data now let's see what
happens when we put a bad one
okay page not found and read a bad
request because we're still doing the
request okay so I wonder if there's a
way to tell graph QL not to do the
request if we get a bad one but we'll do
that wage to that at the end because I
actually don't know how to do that we're
going to look in the docs for that I'll
just finish the rest of this so if they
give us a good idea we want to now
render this on the screen but that's
easier from this point because all we're
doing is getting the ID right there's
the data that it passes in now I'm not
going to put this redirect logic here
because I think we're a put down here
but if you're using a rest a regular
REST API you would do this stuff here
and do your book query in the component
will mount all right so let's get rid of
this since for us we we actually don't
even need to get the ID here right it's
just data that we're getting from the
query so data and there should be
something called book query so book
query and then we should also get okay
before I do this let's actually look
yeah let's look in the props so refresh
tag crash ID I did ID is not defined so
comment this out comments of talents
someone just look in the props and see
what the keys that we need to grab are
so in react called book so data so all
right we need to check the loading and
the get book so data loading comma get
book and we return null from get book as
you'll notice so like if the ID is too
big like if the book doesn't exist it's
like BAM or turn null so we need to
check that too and redirect so that's
the read type of redirect we'll do
here so we'll chess a if loading if
we're not loading and get focus null
they're going to redirect to four okay
otherwise we can go ahead and render our
data so just for this what I want to do
is just say in here for loading so so if
loading and it won't say we don't we
actually not to do all this we can just
do if they return h1 devoting all right
so if we're loading will just put cut
this out if we're not loading I think we
need to wrap this because why is this
all read now okay I did something oh I
forgot to close the tag and so it messed
up everything so if it's loading will
say loading next we'll check if book is
null or redirect if it's not null then
we'll go ahead and just do an h1 and say
get book dot title ensure the title of
the book now for your guys's code you
can go ahead and put any data you want
to hear that you're you want to show for
the book or for whatever data you're
getting ok so let's see this just
another book pretty one we see loading
and then the most boring book ever
all right so now we're dynamically
loading the titles of these books like
three I am a book and now if I do like a
really big number I don't have and we
get pH not that cool so our codes
working and that's pretty much all I
wanted to show for this video I'll meant
right to now do some extra content for
you guys and see if we can figure out
how do we redirect you know enter props
here I want to check whether the
variable is if the ID here is an integer
if it isn't a jerk go ahead do the graph
QL but if it's not like if the user
comes up here like
this junk I don't even want to do a
graph joke query right now we are right
and we get an error so I believe there's
a way to do this I've seen it in here
somewhere I feel like it might be called
can actually can remember what's called
Oh skipping an operation there we go
so okay oh this is super easy so what we
want to skip if there's a prompt okay so
this is skipped it looks like we put
right here and so props we're going to
say skip is equal to true if not Carson
crops match crammed ID
I'm sure why that's red I think that's
just saying so all right let's try that
so CH now if we do the graft well query
all right so now we skip the query and
all right nothing is going to get loaded
though right so how do we tell it's as
if it's getting if skipped is true we
want to know it's true in our component
here and then redirect so I guess we can
keep what we had before with doing the
prop dot match thing so we can say match
grams and then ID and then right here
I'm just going to say if so not parson
ID then we're just going to go ahead and
redirect all right I didn't I should
wrap it up now so now this should
redirect to 404 I said work and it
didn't oh and the reason for that is
because we didn't go to book so book
slash garbage and can't read
property loading of London five-o so
data is undefined okay so it looks like
if we skip the data is undefined so we
don't even need to do this so instead
what we're going to do is we're going to
wait and say conch blowing and get the
is equal to data and here we're just
going to grab the data and then here
we're going to check if data exists all
right there should be a comma okay so if
skip is true it looks like data is null
so when you can tell us we skipped and
if we skipped we know we didn't get a
good idea so we should redirect so if
not data all right oh cool so we
actually get redirected correctly so but
if I go to books one we should still
render most boring book ever into just
another book BAM works all right that's
pretty cool guys so we're able to
dynamically show you know the title the
book depending on what the route is and
we can redirect to 404s if we get bad
data or bad you know the user posing
crap we can check it with skip using
graph QL so we don't actually run the
query that's super nice and waste you
know a server call so that's it for this
guy's it codes going to be up on github
thanks for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>