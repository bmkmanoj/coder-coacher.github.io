<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to create a Typescript npm module | Coder Coacher - Coaching Coders</title><meta content="How to create a Typescript npm module - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to create a Typescript npm module</b></h2><h5 class="post__date">2018-03-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1aucQqkt-PM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so I just released my first NPM
package it's called pick cache or as I
like to say epic achi and this is the
component that I built in the last few
videos that takes a URL and it caches
the image for you that way it's faster
on previous loads and also works offline
so pretty sweet now I want to show you
guys how I did this because I made this
with typescript so I had to get it
configured so that way I could generate
an output that would be acceptable by
NPM but it is on NPM now I went ahead
and did publish it I'll put a link in
the description below and I also have it
on github and if you guys want to make
issues if you find bugs with it or if
you want to make pull requests I'm open
to all of that ok so once I got the code
in order also I just followed this guide
to publish it's actually really easy to
publish an NPM package once you have it
up and I'll link this in description
below as well so here is what my package
looks like or the source code for it so
first I want to go over some changes I
made to this code if you guys were
following along now this is doesn't have
to do anything with making an NPM
package but I made some changes so it
works first change I made so in the path
I added dot PNG at the end because on
iOS devices it needs to know that the
file is trying to read is an image so
I'm not sure if the file is actually a
jpg and I put dot PNG at the end if that
will cause problems I'm kind of just you
know waiting to see it doesn't for my
testing it doesn't look like it has but
I don't know if there's certain images
that'll get messed up basically I just
want to indicate to iOS that is an image
to go ahead and read it because before
this it was not working
without the dot PNG but now it does
secondly we're having problems with the
type and so I did about that is I
changed how I did making my props
interface you know notice I have a whole
bunch of junk here now and you're
probably wondering how I came to this
well if you remember last time I had at
props and it was extending some type and
I was like you know what the reason was
causing a problem is because the regular
image type and we can actually see it so
if you see the image right here what I
did is I peeked the definition and I
just saw and here we want to get the
type of it so go to type definition oh
it can't find it maybe it was a
different thing that I looked at but I
was able to peek it and it looks sort of
like this this is better so when I
peeked the definition for it and this is
whatever type I had I was extending
before I can't remember which one it was
but I saw basically the definition for
it and I just copied over everything so
this is a nice feature of Visual Studio
code that lets you check the types so I
really like that so then I was able to
just copy and paste all this I copy and
pasted so I'm extending these three and
then all these types here come from the
type that I was extending now I remove
the source so with a regular image
component and react native it expects a
source and our case we're using a URI
string instead so I will needed to
remove that from the type so this is how
I did that okay but this is my source
code right here and so I put it in a
folder which I called source and now I
put my type my short hash type because
this is the one library I'm using that
needed a type so I have that my source
as well now I didn't use any type of
boilerplate or anything to start this
off I just did MPM in it and a folder to
get this set up and then we can look at
what dependencies I installed so I went
ahead and installed Expo and react types
as regular dependencies and also react
native
and the reason I did this is so anyone
who installs this package will also have
the types for these but I'm not sure I
looked at some things and people had
their types and the dependencies this is
my first package so I'm not quite sure
the best practices on some of these
things but for one I could understand it
we want to have the types that you're
using in dependencies but that could be
wrong and then I'm also using short hash
so that's there now you'll notice the
interesting thing is my peer
dependencies here so I added a peer
dependency if Expo react and react
native and I just put stars for now to
indicate that this works for any
versions of all three of these now the
reason why I made them peer dependencies
is if you're installing this package I'm
pretty much just making the assumption
that you're using all three of these and
so this just make sure you have those
installed when you're using it and then
real quickly I setup TS lint which is
like es lint so it's for checking the
types and then the only other package
i'm using is typescript and that's to
compile things so you'll notice with my
scripts i am just removing all the
things from Lib Lib is where the output
of typescript when you build it it goes
but we'll talk about that in a second I
want to show you guys my TS lint real
quick nothing special except I'm using
the TS lint config prettier which allows
just so when I'm doing things I have the
prettier plugin it doesn't collide and
cause problems with TS lint okay so
here's my TS config i don't know if all
these are necessary i just kind of had
looked at all the rules and picked out
some like pretty much all these are just
like in relation to checking and all
that these here the important ones up
here are this one so the outdoor
directory i'm specifying i want when
so my typescript files here I have to
compile them right to regular JavaScript
so these are the rules of how it
compiles it basically and checks things
so when I compile it I want it to go to
a folder called Lib so who knows how I
have a catchy right here with Jas
instead of TSX and so I another
important one is I made this in
typescript so I want anyone who installs
my package to also have the types that I
used already and so by saying
declaration true here it's gonna create
a folder in the Lib called pikake dot
DTS and that's where my types are so we
can actually click on that and we can
see hey look this is my props and here
is the component and the props in the
state so that's awesome
so now when you guys use or if anyone
uses this in typescript they have the
types but in package JSON which you have
to do is make sure you tell them where
the types are located so here's me
specifying the location of the types
alright and then I don't think there's
anything else really happening I
specified that rillette it was react
native and then for the module I did
common j/s so it works with four NPM
packages and oops
I'll just gonna give her this space is
gonna mean anymore and then here I'm
just including all the tsx and
typescript files inside of source so
it's taking all of them putting them
inside of a Lib and that's pretty much
it so I just run right here if we go
over to package out JSON I just do MP
and run build it clears out the library
and then it runs this is typescript that
it'll compile everything put it in this
folder and then it's important to add
main to your package JSON this specifies
the entrance to your file like basically
your main file so the main file here is
this one Picacho GS
yeah so that's how I got set up
basically all I had to do was install
typescript and then get my type strip
config the way I like it the important
bits are the out directory JSX and
module and then what I'm including and
that spits out the library which I then
just publish and one other thing might
package shot JSON I specify the files I
want the file I want is the Lib file and
I don't think there was anything else
let me know if you guys have any
questions in the comments below
with how to create an NPM package with
typescript so this is indeed a component
a react native component that was Bill a
typescript that is now on NPM so if you
have any questions about that feel free
to leave a comment below I'd happy be
happy to answer any of your questions
well that's it for this video guys and
actually I actually wanted to do a quick
demo I forgot about that this is how it
works if you've seen my last two videos
you very seen this but this is just a
regular pretty much you can replace this
with image and use source instead of
your eye and this is what it looks like
and so we're just importing it here and
I'm using typescript so and I can just
import it directly like that and then I
use it like this so here's an example
and I have an example in the readme as
well yeah that's it for this video guys
thanks for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>