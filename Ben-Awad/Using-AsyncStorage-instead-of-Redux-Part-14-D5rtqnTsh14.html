<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using AsyncStorage instead of Redux - Part 14 | Coder Coacher - Coaching Coders</title><meta content="Using AsyncStorage instead of Redux - Part 14 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using AsyncStorage instead of Redux - Part 14</b></h2><h5 class="post__date">2018-02-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/D5rtqnTsh14" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I'm gonna be showing you how to
pass the user ID to the products
component without using any state
library so I am starting off with the
branch 13 base if you'd like to follow
along you can clone that basically what
this branch is is without redux without
appalling state and we have another
check token or just fetching a new token
and a user ID and currently doing
nothing with this user ID so the first
approach with this that we can take is
just store an async storage another
thing and I think there is a way
actually to set multiple items at the
same time but this is a temporary thing
so we can set a user ID here and then in
our other component we can just grab
this user ID so we're setting that and
then over here and my products now I'm
gonna have to make this into a regular
component to be able to get that user ID
because it's gonna be an async all that
we have to make and you don't want to
have those at least like that inside of
your component okay so let's make this
into a class and this is gonna be our
render function here
and this is going dicks and react out
component and then we're gonna say Const
and we get all these items from the
props and we're just gonna close our
component and let's make sure we're not
missing anything I think we're good I
don't know why I'm King read return I'll
be of that there you go
give that a save so now what I can do is
I can store in this state what the
current user ID is so at the wing it's
going to be null so user ID you know and
now in my component I'm gonna say
component did mount and we're gonna make
this into an asynchronous function so
now I'm this async function we can just
say Const user ID or we only on half 2
we can just say this does set state and
we're gonna update the user ID
and oops and we don't want a semicolon
there and then this is gonna be a sink
storage I get item user ID so we're
waiting it cuz it's asynchronous and we
just need to import it from up here a
sink storage alright so then in our
render function we can now conditionally
render it now the other way we're going
to do this is with using a library
called JWT decode but we'll talk about
that in a second I'm just gonna copy the
code that we had before and we can just
paste it I think I pasted it was it
right underneath the text yeah so this
is the code we made in the other video
and we're just gonna say this stuff
state that user ID so if it's equal to
the seller's ID then we display right
here that item and we can also grab the
style for it because we don't have that
right now alright let's gonna save and
now we correctly see the edit and the
delete just on the products that we want
so nice so alternate way we didn't do
any type of state management library we
just got it from a sink storage right
because we're storing it in that the
reason why I like the using a state
manage event at least in general is
because you don't have to then do this
async and then wait and be component it
out update like this and it's easy you
can add it to any component just by like
connecting to Redux store so that was
the reason but in this case this is
probably a cleaner solution because we
don't have to update our only one
component really needs this right maybe
if we needed another component it's
worth adding Redux or Apollo link state
when that's fixed but here's the other
way you can do this so we made another
token here right around our token but
another item an async Sorge
and this is kind of redundant because
we're already storing the user ID inside
our de WT token that's kind of the cool
thing about JWT tokens is they also
store information so we can actually
delete that and we actually don't even
need to request this the user ID anymore
we can just get rid of that from the
graph QL request so we can get it from
our token so I'm gonna say Const token
is equal to and we can just say a weight
and here and now we have to say token
here token key and we have an air right
now because we don't want the user ID so
how do we extract the user ID from a
token well that's when this library over
here comes in called JWT decode what
this does is just takes a j2g token and
as you can see does that to it right
makes into the object or decodes it into
the object that is stored in there and
then we can grab the user ID from it all
right so let's download this library so
we're going to say you are an ad and
then we can just add this to the top so
I'll import jout decode from j over te
code
and now I can say Const user ID is equal
to J or Z decode and we just decode the
token and there should be a semicolon
there and I think we're good to go for
this as well it's format this give it a
save let's see what it looks like over
here and nice so notice how we get the
same result edit and delete is now just
on those and not on these items but now
we don't are not also adding in a user
ID to our anything storage and coloring
it
we are just extracting from the token
and I would say this is the solution I
like slightly better than just storing
the user ID also an async storage
because it's a redundant thing but the
disadvantages we did have to install
library right we had to install JWT
decode but I don't think that's too bad
alright so this is how I'm going to
continue the rest of the tutorial from
here but feel free to replace this with
the redux code if you prefer that or if
you can get apollo link-state working
you could follow along from that pick
your favorite solution i'm gonna go from
here cuz i think it's a little bit
simpler than the redux version because
we didn't have to set up a store and all
that stuff and i agree we don't need it
in any other components at least right
now no need to add it alright so that's
it for this video guys thanks for
watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>