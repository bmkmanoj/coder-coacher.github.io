<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Loading screens with Apollo and Recompose | Coder Coacher - Coaching Coders</title><meta content="Loading screens with Apollo and Recompose - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Loading screens with Apollo and Recompose</b></h2><h5 class="post__date">2018-04-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WoUd9RoXrWk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I wanted to show you how I've
been using recompose to show a loading
screen while I'm fetching data with
Apollo so I have with me a little
sandbox right here example where I am
rendering this colors component and
colors over here is very basic and this
is how I usually have been doing things
so I have a component called colors and
then I have my query here and you'll
notice how I'm doing a graph QL query
and I'm checking that into the colors
component and then I check whether I'm
loading here and if I'm loading I return
null and then otherwise I display the
colors over here so if i refresh that we
can see just a blank white screen after
this reloads of course and then the data
will appear so it's kind of annoying to
have to put this loading logic here
every single time since pretty much
every single one of my career components
is going to do something like this so
what I've been doing is creating a
function called null loader so what no
loader does is it uses something by
recompose it's called the branch
component and what branch does is it
takes a function called loading and
loading will result in either true or
false if it's true it will do whatever
is here so in this case it'll render
nothing which is the same as returning
null otherwise it'll continue and render
the regular component so let me show you
how I would use this null loader so
right here I have colors too and with
colors too you'll notice I'm no longer
checking for loading in my colors
component but I am importing the null
loader and compose from react Apollo so
here at the bottom you'll notice I'm
composing these two higher-order
components first I have the graph QL
opponent higher-order component that
runs and what that does is that I'll put
in the props a data component and in
data they'll be loading and all speak
colors so here is my no loader so what
happens is I check for props and the
function gets the props and these props
are given to us because we have the
higher or component right here this
would not work if we put no loader up
here so if I had it
for example above graph QL that would
not work and you can already see hole
that's because I don't have a comma
there but it also just wouldn't work
logically because we need these props
that the graphical higher-order
component gives us what this does is we
now check proxy data loading if that is
true then we render nothing and that's
what we saw right here
what branch does is if it's false so
we're no longer loading it'll just go
ahead and render this colors component
so if I come into index GS and I render
colors too and I save this will see the
exact same thing happens where the
screen is white and then we see it show
up but now we don't have to worry about
putting an if statement to check for
loading we just can directly get the
data
so this basically lets our component
focus on what we want our component to
do so I really like that and usually you
don't want to just return null write a
blank screen that's easy to do but a lot
of time you want to do like a loading
indicator is some sort and you can also
do that with recompose so I can use
another loader call it a component
loader so what I do is I take a
component as my second prop now and I
branch so if I'm loading what I do is I
call the render component from recompose
so instead of rendering null I now
render this component with it and ever
this is true so let's see this in action
so I'm using react spin kit here so this
is what I'm using for to display this
spinner you could use pretty much any
react component
you wanted to be your own custom one or
this library and I'm importing the
component loader so now instead of no
loader I'm using component loader I'm
grabbing the props and then I'm
returning a boolean whether we're
loading so if we're loading is true then
we display this spinner so if we come
over here to index such yes I can change
this to colors three and colors three is
what has that stuff in it and we can see
you now we get this dot dot dot before
and then it loads in so now you can see
this is very easy we can pretty much any
component we want it doesn't even have
to be a spinner right will be loaded
while it's loading or displayed while
it's loading and you can even pass and
for example so here is react spin kid
over here we can see all these different
loaders so the one I chose was this guy
right here so let's say I want to pass
in these props you can do something like
this
so here's colors for is I just did my
spinner and then it's a function that
renders the spinner with the props I
want and then I just use component
loading to render that spinner so you
can see I can very easily and that's
colors for let's load that and you can
see it so you can very easily add lots
of different loading spinners or things
that happen before your component with
these two functions so component loader
is really nice and no load or if you
want to just load nothing so I recommend
checking these out and this also allows
you to separate just your component code
with your you know so it's not in the
same file so I no longer have to do a
check in this so now this function could
just be or this component could just be
a view where it doesn't have any
business logic right so we had some
business logic up here to check whether
we're loading it just is a
presentational component or
presentational piece where it just
renders the data so that's very
important that's it for this video guys
I hope that was helpful I recommend
checking it out
I've had been really enjoying this it
makes it very easy for me to add it and
then what I want to do tomorrow is show
you how to do this exact same thing with
a new query component so this is using
higher-order components but you can also
do a similar type of thing with the
query component so we'll look at that
tomorrow
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>