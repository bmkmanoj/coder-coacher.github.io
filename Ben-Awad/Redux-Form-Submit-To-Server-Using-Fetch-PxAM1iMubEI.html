<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Redux Form Submit To Server Using Fetch | Coder Coacher - Coaching Coders</title><meta content="Redux Form Submit To Server Using Fetch - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Redux Form Submit To Server Using Fetch</b></h2><h5 class="post__date">2017-03-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PxAM1iMubEI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys in today's video I want
to show you how to basically submit your
form to a server using redux form so
right over here I have a Redux form all
set up if you don't know how to set up a
Redux form and basically call a submit
function when your form is submitted so
this is my submit function right here
just a little bit of client-side
validation and I'm calling it from
handle submit here in my little context
if you don't know how to do this I have
a prior video showing you how to set
this up and I'll link that in the
description below but what I want to
show you now is how do I send this data
to a server and basic answer validated
and like if the server says there's an
air show that error on my client so the
first method of doing this I'm going to
show you is with a sink and a weight so
this is just basically making a fetch
call and this is something that react
recommend so this is actually a newer
addition um you can see if you're more
familiar with doing fetch and then doing
then and caches and that sort of thing
we're going to use some of this new
syntax and I'll show you guys how this
works so we're just going to copy this
this is from Facebook networking and
I'll link this in description below as
well if you want to check out some
different ways to go about doing this so
we're not going to really need that
stuff anymore so I'm just going to put
it to the side so we can paste this up
here or create an async function and
we're going to call this instead of
movies unless say submit to server and
we'll just say pass in the data that we
want and now I basically have right here
you want to put in the URL to your
server I just have a server running
locally HP / Opel host 3030 and
going to post to the register route and
then I'm going to pass it some data I
first have to pass the method which is
post and then I also need to pass in a
body and we just need to parse it
because it needs to be it's going to be
JSON so I'm going to pass and stringify
data and then I also need headers
content type
we just need to specify as application
slash JSON I believe is ver since we're
passing JSON so I just have a feathers
je s server running right now and the
only thing it does is accept all
requests to this route posts except if
the first name and last name are the
same it'll basically pass an error back
so I'll show you how to basically show
that error on the form so this allows
you to do a post request right here I'm
posting to this URL and if you're not
familiar with how a weight and all these
things basically in JavaScript you're
used to callbacks
a weight allows this this is basically
synchronized scoops this is a
synchronous so response is we're going
to block until this fetch is done and
it's going to return the value right
here so it's going to basically sit here
until it's done so it's going to fetch
this URL it's going to post this data
this JSON data that we're going to pass
in to the server and then we just have
to specify as a header that we're
passing in JSON and then right here we
wait for the JSON to get the JSON and
then we just can return response dot
JSON and then we can consult log if we
get in air so this is how we're
basically going to call the server right
here and now we can actually call it
from our submit so now we can say get
rid of this submit to server
and then I'm just going to pass in our
data so first name last name and email
and then we do dot then see what data
and just console dot log the data so now
we can move this back over here and we
can come on over to our form and it
looks like we just have a syntax error
let's go back to our guy up here and I
just need to add a comma to the JSON and
then last name needs to be uppercase
oops I'm sorry I just hopped around the
way too much last name right here needs
to be uppercase okay so now Bob Bob -
Bob at ball comm I submit this we get a
response back and it looks nice it looks
as though we expected we get an ideas
object and certs into the database okay
it's valid so in that case at the client
you could now if you get this data back
and it's okay you can put that here
you could dispatch an action if you
wanted to and update the Redux state or
you're pretty much fine if it submits
okay you could then maybe go to the next
page if you wanted to but if you're
doing if you get to this point and it's
um it's okay you're good but what
happens if we in the air let's say I say
my first name is Bob and my last name is
Bob Bob calm so if I submit
oh no we get an error bad request object
and we see errors so and you can see
notice how this is last name this is
matching up with the name there it's
going to be important and allows this
basically easier air so we're going to
do is we're going to say if data dot
errors
so basically we get Ayers elf console
dot log server added data to database
we'll say if we're getting an error what
we want to do is we just want to throw
new submission air and passing data
errors and so what that's going to do is
after it gets messed up it's going to
come over here to last name is going to
say you cannot be the same as first name
bring your Bob Bob Bob Bob
and we submit loops and looks like
uncaught promise submission air audit is
this like the wrong see what we'll see
what happened here last name has the
uncaught and promise because we're
throwing a new air and the promise ended
like that so if we come back over here
oh we instead of the row new I think we
just throw so this is very on me ducks
for Miss example for async subha that's
Bob
okay it still does not like it let's go
back here and just look at their example
so they're doing n dot then so that
looks okay
Oh uh-huh I need to return this promise
all right so I believe in now it should
work okay
Bob Bob I hate how it cuts off the B at
first submit still doesn't like it so
let's see what our differences with this
example so a new promise they do that
returning a promise then they are doing
dot then and they're throwing this
server do we need to return something if
it's correct maybe async validate
want to do this on submission the
Rindler field handle cement handle
submit if we come back over here we can
go to some net validation
unless see if they have a a sink submit
over here just have a regular submit
validation oh no here they do okay so I
do throw a new throw new submission air
I think I just have the syntax slightly
wrong Bob a and there we go okay so this
is working now so as you can see Redux
form is a little tricky so this is what
you need to do to make sure it works so
we need to return our call to this async
function and then we need to check if
we're getting any errors and if we are
we throw a new submission air and we
pass in the object and now you want to
make sure now my object is nicely
formatted so if we console dot log data
airs it gives us a nice object that's
already formatted to the last name say
Bob and Bob Bob so you notice how it
already says last name here let's say
you wanted just the throw the air for
the first name all you would do is say
first name is equal to data errors last
name and then this would move the air
from happening here to happen up here so
now if we do Bob all
now the air is up here now if we change
it resubmit submits just fine so that's
how you can do server validation once
you submit so you go ahead and you we
have some checks on the client side that
I'm doing it once the client side is
approved we basically make a call to our
server for posting this data and then
we're saying we check the response from
the server we say if there's any errors
and the response that the server gives
us we throw the submission error so we
can show in our form else it's fine and
we can do whatever we want so that's how
you do this is one way to do server
submission there's also other ways to do
it we were using an async function up
here but you notice async function is
inside of the component we could
basically put this in our file but
they're kind of muddled together and you
don't want your async code and your
component code together this is actually
not a great way to do it instead I
recommend using a library like redux
form or not react form Redux saga or
redux observable which are sub libraries
to help you integrate this with redux
and I'll be making some videos showing
you how to do it with those but this is
a fine way to do it if you're just
starting out and you want to do some
async coding and make calls to the
server so I hope this helps you guys
have any questions or have trouble
setting this up because as you saw even
I had a little trouble setting this up
please leave a comment below and I'd be
happy to help you guys out and I'll see
in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>