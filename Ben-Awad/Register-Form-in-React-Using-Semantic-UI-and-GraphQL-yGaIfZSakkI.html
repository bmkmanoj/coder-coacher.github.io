<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Register Form in React Using Semantic UI and GraphQL | Coder Coacher - Coaching Coders</title><meta content="Register Form in React Using Semantic UI and GraphQL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Register Form in React Using Semantic UI and GraphQL</b></h2><h5 class="post__date">2017-10-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yGaIfZSakkI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we're gonna be adding the
functionality to register users on our
website so first thing we're gonna do is
set up the backend for it and then
create a register form whether they call
the graph QL mutation we're about to
create so the first thing we're going to
do is head over to our user schema and
instead oops
user schema and instead of create user
we're gonna call this register and it's
going to take a user name email and
password and we can return a user and
then in our user resolver what we're
gonna do is instead of create user we're
gonna say and you know we're just return
a boolean for now I just whether it was
successful or not and over here in our
register function we can't just return
we can't just create a user and the
reason for that is we don't want to
store the password as plain text we want
to first hash it so hash passwords it's
recommended to use a cryptic crypto
library and the one we're going to be
using is called be crypt so this is what
it looks like right here and we can see
we can call be crypt dot hash it'll hash
the password and then we're gonna store
that in our database the hash password
so to install this I have in the server
folder and I miss a yarn ad beat crypt
and I'm just gonna copy this right here
so hash is the function we're going to
be using and right here you can notice
they have compared that's what we're
going to use to log in and compare the
hashed passwords so paste this guy in
here
and we're gonna import bcrypt
from the Crypt and let's make sure we
spell that right area so beaker cash I
like to use a sink and a weight so we're
gonna use that instead of a callback
because I believe it should return a
promise if not it should yeah actually
we're trying to promise or just be
synchronous which we're good either way
so here's where we want to put her
password so in our arguments we could
say password and then other arguments
and so we're gonna await kant's hashed
password so we're gonna hash the
password here passing in their password
and then this is salt rounds salt rounds
basically is how many times I believe it
hashes it or and the more salt you add
or salt rounds the longer it takes
I heard 12 is like a good standard
that's not too long but is also because
the longer you put here the longer it
takes to hash the password so you don't
want to make it too long but the longer
you make it the more secured as I
believe so what I've heard general
advice is you want to make this number
as high as your server can afford it to
be and that is without taking too much
impact so I'm gonna put that twelve I
think that's a pretty good number and
then once we have the hashed password
now we can go ahead and insert our user
into our database so we're going to do a
try-catch statement
begin air we're going to return false
and we're gonna put the cash password in
here as well if you have a problem
hashing the password for any reason we
should return false and then after we
hash the password we're gonna call a
wait on models dot user create we're
gonna pass and um the thought thought
other arguments and then also the hash
password so that would create our user
if we wanted to we could say Const user
and do something with our user but we
don't need to and then we're just gonna
return true if that works
so our back end should be good to go
here's the log I don't see any red I
don't see Ayers so it looks like we're
good
I'm gonna first come over to graphical
and see if I can create a user so and
refresh and they're gonna say mutation
register user name gonna be Bob email
it's gonna be John at Bob calm and my
password is Sox and we'll go ahead and
run this it return true so it worked and
now in our database we're not storing
Sox I'll show you so if I sit type P
sequel I can connect slack database and
I can select all from users and we can
see all our users so the password before
you'll notice we were storing and looks
like something got messed up so select
password
from users well we should see for this
third column is a oh here's the problem
we need to actually set password equal
to hash password so we don't have a we
don't have a property called hashed
password
it's called password in our database so
we need to set that to this property now
that already run and we can try creating
this again so this is Bob to created it
okay now let's do a select and you
notice we don't see Sox as the password
we actually see this hash so now we're
protected we don't just expose
everyone's password if we get hacked or
something it's leaked awesome so we're
done with that and our back-end is all
set and good to go with registering
users so I'm going to switch over to the
client because we're gonna be doing a
few things with that so I said we're
gonna create a register form to do this
we're gonna use a UI library we're gonna
be using semantic UI there's a lot of
other ones I use interior UI sometimes
but I really like this one so we're
gonna use it for this tutorial it's
really easy to use and to install it
we're gonna just copy this command right
here which says yarn add semantic UI
react and we actually need to install
two things so I'm not gonna hit enter
quite yet we also need to install the
CSS we can either copy this link and put
it in our public directory but what I
like to do better is actually just
install it using this installing the
package and importing it this way this
is just a better way you'll bundle your
basically your react application with
this semantic UI CSS so you don't have
to fetch it for every single time you
have it already bundled okay
because this link has if it goes to this
URL to get the semantic UI every time
otherwise all right so we have those
installed how do we actually do stuff
with them
well first we want to import the CSS
that we just added
so in our index file here we are just
gonna add an import oops
we're not import so now we imported this
CSS and now we can use it wherever you
want so I'm gonna create a new route
called register and we'll put it at the
path register and we're gonna call this
guy register and now in my register
component here I'm gonna import react
from react and what we'd like to do is
create a class called register which
extends from react component and we
don't use from keyword there and we're
gonna be rendering so the reason why I
am making this a class instead of a peer
function is because we are gonna be
doing so export default register we're
gonna be doing some state things in this
so we're gonna keep the state of our
application so in our form we're gonna
have a couple things a username field a
email field and a password field so as
the user is typing these fields out we
are keeping track of them in the state
and we need to make this a class so we
can keep track of this all right so now
in our render function what we're going
to do is we're going to return our form
and so here's gonna we're gonna put our
form and we're gonna get this from
semantic UI so the first thing I'm gonna
do is get a container I kind of like how
you have a bunch of white padding on the
side so I'm going to use this text
container so if you click this little
thing on their website it'll show you
the code that you use
and it's just a container and we can add
a little register if we want to so you
can copy this we can also use a header
and say this is our register form so
register and then here we're gonna put
our actual components so input component
at the top here all the props we can use
and then here are the actual fields so
we're just gonna use a standard input
field nothing fancy so we're gonna copy
that and I do think I want it like a
full width one let's see if they have
that here we go it's called fluid okay
so I just had the fluid 2 input so we're
also gonna import in here the input and
I'm gonna say input placeholder is equal
to email
Asha's do username first and this is
gonna be fluid so now let's just see
what this looks like I'm gonna just run
NPM start in this directory and that
should start everything up
okay yeah so now I'm gonna do slash
register and also we see our first form
field and now I'm going to close this
and put this three more times so email
and then password now with the password
we want to put the type of passwords so
no one actually sees that we're typing
in a password and then we want to Const
grab the username email and password
from our state and now we're going to
set the value so value is equal to
username but this guy is gonna be email
so as the values are changing in our
state we have to actually before this do
a non change function - oops
there we go
and then here's gonna be our own change
so this is gonna take an event and we're
gonna pass in this ston change so as
we're typing in this input field our on
change function is going to be called so
this guy's gonna get called as I type in
the username field it's gonna come to
this function up here which it's passed
an event the event tells us we can get
event target that name this will tell us
the name so I can put a name is equal to
username and the name here and the name
oops
here a name password and here is gonna
be email okay so we can get the name
field and we want the names here to line
up with our state names here so that way
I can say this dot I can say Const name
and value is equal to e dot target so a
value is the current value that is in
the input field and name is this thing
right here so then I can say this dot
set state name and then value now you'll
notice how I put curly or brackets
around the name so the reason for that
if name is equal to for example
email we want to use the prop name here
email and not name so really this will
get turned into email is equal to the
value or if this is the user name it'll
be username now we can leave the common
in and then the value is going to be
given to us here and this this basically
the reason why I'm doing it this way is
just to save on having to write three on
change functions so that saves a little
bit of
okay so let's see if this works so I'm
typing stuff is getting entered and if
you have reactive tools we can we notice
our type password work we're seeing that
if you have reactive tools you can go to
the register component and we can just
see the state and we can notice all our
stuff is recorded there awesome so the
last thing we want to do is add a little
button at the bottom where they can
submit alright and let's do just a
regular old button so button button
and I'm gonna say submit and then when
this is clicked we want to call a
functions let's call this on submit and
all we're gonna do for now is
console.log the state so we can see all
the values as when we submit and we'll
pass that function in okay so come back
over here we see our submit button I can
see the username so we can say Bob won
Bob - at Bob calm and some password and
when I hit submit we get the JSON email
password username so really that's what
we want to use to make our graph kill
mutation to our server so the rest is
super easy so I'm gonna just import gql
and graph QL react Apollo
and we're gonna just do a mutation here
so register mutation is gonna be equal
to GQ GQ l and here's where we're gonna
put our mutation I'm gonna go ahead and
write this in graphical because it just
makes it a little bit easier cuz it
autocompletes a few fields and purifies
it so we need to pass in variables so to
do variables you add a little
parenthesis here next to the mutation
name and then you do a dollar sign so
user name and then the name of it and
then you have to put the value and this
needs to match what the value is of the
parameter down here so user name is a
string that is not null we have email
and you make sure you need to do a
dollar sign so string there and password
there and now to pass it in you just
pass in your variable username email
password copy this paste it here now we
just need to inject the mutation into
our component so we use the higher
component graph QL and we tell it we
want to inject it with the register
mutation and then we pass in our
component here which is called register
so then this higher component we'll pass
a mutation mutate prop so here you can
say this stop props dot mutate and then
we can pass in any variables we want to
mutate with so variables was gonna be
this dot state and because we did the
same naming convention on our server we
don't have to make any changes we can
just submit like that and we can do make
this an async
and await the response and we can
console that vlog that response okay so
we'll call this Bob three Bob three at
gmail.com and Bob three as a password go
ahead and submit this we get data back
that says the register is true now I can
come back here I can say P sequel can
connect to my slack database and see if
my user was correctly added so select
all from users and an ID of five so
select all from users oops
we're ID is equal to five we can see our
Bob three user was successfully added
here we see the username email we just
added so that's great so we finished
creating our little register form here
at least the mutation works it's not
quite done but that's where we'll leave
it for now we're gonna make a few
changes to it in the next video we're
gonna be handling errors also clearing
the form when we submit and going to a
different page because usually when you
submit and you get a response of good
you want to direct them to another page
on your application so that's it for
this video guys thanks for watching as
always the code is going to be up on
github
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>