<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Apollo New Rendered Props Components | Coder Coacher - Coaching Coders</title><meta content="React Apollo New Rendered Props Components - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Apollo New Rendered Props Components</b></h2><h5 class="post__date">2018-03-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gF-peiFjG0o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys recently react Apollo came out
with a new version 2.1 and they
introduced some new components so I want
to take a look at them show you how they
work and then give you some my thoughts
on what I think about them so in this
example I'm going to be using a
graphical server to make some requests
and the one I'll be using is this one
right here this is a simple one I made
on launchpad a few videos ago and I'll
have a link in description below if you
wanted to look at it so I'm on code
sandbox and we're just gonna take a look
at how you would do it first it will
refresher the old way without any of the
new versions and I have a really simple
example here I am fetching an ID and a
name and that's just showing some colors
so we don't even need to look at this
we're really just gonna look at the code
for now okay so this is how you would do
with the old way you would use this
higher-order component called graph QL
coming from react Apollo and you would
wrap your component so my component is
called colors you'd wrap that with your
query component and what that would do
is now in your props you have something
called data and you could rename this if
you want but the default is called data
and inside of data we have the loading
which will tell us if it's floating the
query and then we also have colors which
actually gives us the data so we can
check if it's loading and if we want we
can return null or maybe we return some
kind of null and not Noah but a loading
spinner or whatnot and then once it's no
longer loading we actually have the data
and I'm just here mapping through the
data and displaying as you saw two
colors but this should be all familiar
with you if you've used react Apollo
before the new version now has this new
component you use call to query now
don't don't be worried they didn't
change it and break it so you can still
use this old component too but if you
want to use the new one it's called
query this is using what's called a
rendered proc so notice I have my graph
QL query up here but before we even dig
into the return statement of colors we
know
we are not wrapping a higher component
anymore that's gone so these are
equivalent so the one I have a new query
and this old they're doing the exact
same thing so you can compare and
contrast them so we pass our query as a
prop in and to this query component and
then what it's going to return is
actually a function so this might look a
little rewrite here if you haven't seen
it before what this is is a function but
it's wrapped inside of curly braces so
there's a curried lace there
curly brace there and then here is just
a regular function this is basically a
render function and you'll notice there
is two props here loading in data so
this is very similar to what we had
before but you'll notice one difference
right off the bat I'm not sure why I
didn't keep the same thing as they're
doing with their higher-order component
but they took loading outside so loading
is inside of data here but in the new
component loading it's outside so you do
not grab loading outside inside of data
anymore so we can check again do the
same exact check to see if we're loading
and then I just do data dot colors so
this colors is still inside of there so
this looks the exact same but this is
relatively intuitive and makes sense if
you've used graph QL before in graph QL
queries this looks pretty familiar and
it's pretty easy to grasp how this works
you just pass your query in and then you
put inside of here basically a render
function for it and to gonna do the
exact same thing again I don't know why
they added just an extra loading so
let's take a look at mutation this one's
actually a little interesting too so
they made them slightly different than
the higher-order component here is a
mutation where I'm removing the first
color I imported mutation from react
Apollo I pass in my mutation and then
again I do curly braces and this is a
rendered prop and then right here I have
my function so the first parameter is
the mutation function which is usual and
how you would do it before
the higher component would pass a mutate
prop in and here are two new things that
you don't get with the higher-order
component loading and air so these are
passed in as the second parameter and so
if I wanted to I could check whether the
mutation is loading and if there's any
errors I could display it and you could
return something prettier than this but
I'm just dumping the air and then at the
very bottom here's just a button and I'm
you calling the mutation function so
this is a little weird though you don't
get loading in air when using a regular
higher-order component but that's pretty
nice I actually like that but note
loading is not going to be true right
when the component mounts right it's
gonna be true whenever you call this
mutation function so that's gonna be a
little different than how loading works
with query so whenever that's actually
making the network request loading is
gonna be true okay so a lot of people
have been asking me what I think about
these and whether I'm just gonna be
using the query and mutation component
all the time anymore and does this
pretty much you know basically make this
depreciate and like no one's gonna use
this graph QL higher-order component
anymore so I don't think that's the case
at all and I think there's a lot of
times where it makes sense to use the
higher-order component actually over
both of them so let me show you an
example of this so let's say we want to
do a mutation and a query in the same
component which is a very common thing
to want to do so here's how you might do
it with a rendered prop and there's not
really a great way to do it and maybe
I'm doing this in the wrong manner but
this works and I don't think there's
anything that they with the components
that we currently have that you can do
better so here I have mutation inquiry
from react Apollo and I'm basically just
stacking them so first I have my
mutation component and then I have my
function for it and again same thing as
I had before I return null if I'm
loading have my error here but notice
now in the return statement of the
mutation I am however enduring a quick
and inside of query I do the same thing
I check if query is loading I can return
null and then again here's the very
bottom where I returned both the data I
get from the query and then also here's
the button I can press the fire off the
mutation so you notice how you stack
them like this and you can see how ugly
this would get really really fast if you
have a couple mutations you want or a
couple just rendered props don't really
stack very well this gets really ugly
and really hard to code so contrast this
with what would look like if you did it
the old way and I find this way more
readable where you could you'd use the
compose function coming from react
Apollo and you'd grab your graph QL
mutation in your graph QL query and you
inject it into your component and then
we have mutate and the data props just
like that and I think this is a lot
easier to read and a lot easier to use
so when using multiple I'm definitely
going to jump to the graph QL
higher-order component and also pyroar
components are more composable so what I
mean by that is you can use it across
multiple different components very
easily and I'm gonna be getting more
into that in the future and showing you
how you might take advantage of that but
because of that I actually really like
the higher-order component I might use
these like maybe just like a one-off
where I just need to do a quick little
mutation or a quick little query I think
these are great they're really simple
for I think just one offs if you don't
need if it's a very simple component I
would probably do it like this maybe but
honestly I don't really think you need
these two components too much I don't
think they add too much maybe they'll
come up with some better uses for this
and I'm sure they're gonna be developing
these out more since there's these are
brand new and maybe there'll be some
people watch show some really good
patterns that you can use these with
that make them really strong and really
good like for example these are really
nice having loading an edge
in there for the mutation so and I
actually like having the loading outside
of data because then I don't have to D
structure it it's a little weird they
just made some stuff different from the
higher component but I like the
direction they're going with it
so those are the things I like about
them and I'll be using them more on
seeing how I feel
so those are my impressions just of the
query and the mutation component but
there's actually some more components
that have come out the subscription
component and then I believe there's
something called the Apollo consumer so
I'm gonna be going over those very soon
as well and let you know let you guys
know what I think about those but I'm
really happy and excited
Apollo is doing some very cool stuff
with graph QL lately but that's it for
this video guys come give this a try
come try out the new components let me
know what you guys think in the comments
below and again if you want to check out
any of this code or the launchpad it
will be links in description below
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>