<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React Native Fetch Data From API and Render FlatList | Coder Coacher - Coaching Coders</title><meta content="React Native Fetch Data From API and Render FlatList - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React Native Fetch Data From API and Render FlatList</b></h2><h5 class="post__date">2017-07-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IuYo009yc8w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys this is a fresh react
native application I have in front of me
and I'm going to be showing you how to
add a flat list to it now this is a new
component and react native that is
supposed to be a more performant list
you should pretty much be using this all
the time over list there's no reason to
use list anymore so I'll show you how to
add this I'm starting from a scratch
react native application so I'm going to
walk you through the whole process of
adding it so here's my project is just
has the default when you do react native
an it from the command line and I'm
going to go ahead and get started
showing you how to do this stuff now I'm
just going to be working on the iOS one
but it's good practice to actually
create a source folder and then create
an index file and then have your index
iOS and your index that Android point to
this I'm just going to copy and paste
and get index here and then my index the
iOS what I'm going to do is give this
get rid of this comment get rid of this
component scared of app registry and
then we're actually an import app from
source and then we can go all the way
down here and now we're going to have to
start up here so now instead of having
our code for our project and index iOS
and Android we're just going to point to
this app which is in source here and
we're do the same thing for Android and
copy this so now any changes we make iOS
will be reflected and Android and vice
versa now we're going to make all our
changes and index here I'm going to run
way cut off the comment at the top get
rid of app registry and I'm going to
call this guy app so I'm going to go
ahead and keep this view here this
container view I'm going to get rid of
the rest of the stuff we have here and
get rid of average here at the bottom so
rerun it
and go ahead and just do a hello and
make sure everything is good so text and
if I come over here we should see how
well rebuilding and awesome you say well
so now we're ready to start with our
flat list so I'm going to go ahead and
import file is from react native and
we're going to give it two props data
actually three props but the two
important ones which is data so this is
whatever you want this is going to be an
array of objects and whatever your data
to be I'm just going to say name Bob and
name em and then I'm also going I'm also
going to add an extract key extractor
what this does is it is and we have acid
a function that takes in two arguments X
and I X is going to be this object as
iterates to the list and I you can view
the index and we just return unique key
and X had an ID we could do X ID here
from Chinese the index of I or use the
index for the unique key if not you'll
get a warning about it and then we're
going to do render item now this is the
function this is going to be a function
as well and this is what you want your
actual each item in this list to be
rendered out to be so we're actually
passed an object with an item property
and then we actually each item is going
to match up to an object so I just want
to text new item dot
and then we can close our text tag and
close our flat list all right now our
flat let's have some data what we will
how we want to render each data item and
then a unique key for each data item now
we should see this guy rendered then we
see Tim we see Bob with gloves
I can add some margin top to the style
here say 15 when I come back we should
see Bob and tip displays better and we
do so that's cool we have a list here
but most oftentimes you're not just
going to have data like this you're
going to be fetching it from an API or
something so we're going to show you
Max's how to actually like fill this
flat list with a API call and the AAP
I'm going to be using is random user
this is an API that just gives you like
it suggests random users so this is the
URL here you'll need an API key so if
you want to come and follow along you
can easily I mean I'm asking for 10
users back and they have the name field
which you're going to use you get the
first name last name and show that and
you can change this if you want to get
more users so I'm going to go ahead and
copy that URL come back to the code so
now instead of keeping the data here I'm
going to keep the data into state and
initially the data is just going to be
an MD array so I can just go ahead and
get rid of this stuff here
and we're going to take this stock state
data so any anything we add to the state
the data state is going to be reflected
in our flat list so we can do now is we
can say a component will mount now this
function is called whenever our
component is mounted and then we can
actually fetch data here so I'm going to
create a function called fetch data and
I'm going to make this an async function
that way we can use JavaScript async
await syntax this is very nice for doing
asynchronous
work so I'm going to use the fetch
command and then pass in the URL so I'm
gonna say Kant's response is equal to a
weight edge so just like how you saw in
the browser over here when I go to this
URL I see this JSON data if I call fetch
where in this response we're going to
get a response of that now I can say con
chase on is equal to a weight response
JSON and now we're going to have the
JSON you saw on my Chrome browser in
this object right here so we want to do
is actually update our data here for our
state and so if you come back and we
look at our JSON data here you'll notice
how it's the results objects entire
result object where we really care about
the name first and last so results is
what we want to store in our state so
I'm going to say this dot set state I'm
going to say data is equal to json dot
results and then down here we're not
going to say item dot name anymore we're
going to say item dot name dot first and
then I'm going to actually just put this
inside string and I'm going to say first
name space item dot name dot last so I
get what's the first name and last name
of the user and display that so all
right so let's refresh and see this guy
and see if we render the name an awesome
so you can conceive you're rendering ten
names here that we're getting from the
API let's just recap what our code is
doing we have a flat list here that is
getting its data from the state
rendering each data item by saying first
name space last name and we're doing a
string template here so the fact is and
we're putting these variables in here
we're getting this data from this API
here the random user API we're using
async function
here that way we can use this a weight
which makes both of these synchronous so
when I call fetch I actually get their
spots back and then I can call a JSON to
get the JSON data and then we're putting
this JSON data that we get from our API
back into our state which then renders
it and then we're calling fetch data to
actually fetch this guy and component
will mount so this is being called once
when the component is about so is it for
fetching data being into flat list I
kind of want to show you guys adding
some more you know data into this how
affects the load time so you can see 100
is pretty instant I can scroll down and
scroll oops I can scroll through this
and it's very smooth not lagging at all
but I mean we're only displaying text
right and only 100 if I come back over
here if I go to 500 there's a little bit
of a lag you'll notice so see how it's
blank right here it'll come and load in
a second here I believe you and it was
in but again no lag when scrolling but
you can see 500 is a little slow to
initially load all these rivers and so
what I'm going to be showing you in the
next few videos the first one is how to
style this so you can see this is quite
an ugly flat list so I'm going to show
you how you can make it look pretty and
a real list view with pictures and stuff
and then seconds after that I want to
show you guys how to basically lazy load
data that way this we actually can show
500 but it's not this initial slow load
and we just load them as they're
scrolling and this is how Twitter and
Facebook and all feeds you see work so
I'll show you how that works as well so
that's it for this video guys thanks for
watching the code will be up on github
and I'll see you guys in the next video
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>