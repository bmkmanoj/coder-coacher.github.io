<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Fullstack Feathersjs and React Web App - part 7 | Coder Coacher - Coaching Coders</title><meta content="Fullstack Feathersjs and React Web App - part 7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Fullstack Feathersjs and React Web App - part 7</b></h2><h5 class="post__date">2016-11-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PULuIcbCYF4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back so I want to work
on the login page now we just left it as
a just a header now I want to actually
create a login form and authenticate
users so we'll go back to our components
and go ahead instead of the login page
so now we want to create a forum for it
we're going to have an on submit and
we're going to handle the submit
similarly to the signup page and we'll
have our form fields for the username
and password or email in this case
now I'll get them put
name username and this is actually the
same as our sign up so I'm just going to
go ahead and copy and paste
hear that
let's format that
nice
so now let's get the constructor
we're going to set the default state the
username password being blank
and password
and then our handle submit function
which we're about to add we want to bind
it to this do handle Smith
and before we do that let's just make
sure this is working nicely cool instead
of sign up we want to say log in
and the login form is looking nicely now
let's make it actually work so in our
handle submit what we'd like to do is
very similar nearly tore sign up we
would like to make an action to verify
this time of action is going to make a
saga and the saga is going to connect to
the API the feather server that we set
up either authenticate the user or tell
us the users not authenticated they put
the wrong password or something and if
they put the right password will
redirect them to the home page so it's
going to do that so our action will call
login will create this in a second and
we'll just pass in the username and the
password
and then we're going to prevent default
and then afterwards just set the state
username
blank password blank
awesome and we're exporting so let's go
ahead and create this log in action
go down to the bottom here export
function login username password I
return an object and login requested
and just passing of the username and
password let's go ahead and get into the
saga now
similar
to our sign up we're going to try login
Allah the login saga we list it for
login requested and when requested will
you call a try login so go ahead and add
it here login saga and in the try login
we're going to log in passing and
username password and then whether it's
successful or not we do need that but we
we want to store the user and the state
so we're going to pass back the user and
then what we'll do is then we'll create
once we get the user we're going to
actually put him in the state so similar
to how we did fetch recipe and we put
the recipe in the state we want to put
the user in the state so we'll say login
done it'll pass in the user so we can
store them we'll go ahead and log him
still so we can see it then we're going
to assume the login is successful and
when it is we'll just go ahead and go to
the home page which will be empty string
ok
so we just need to import the login and
add that to our services
and it'll be kind of similar to this one
so login we're going to give app the
email password we're not going to be
doing it like this though instead we're
going to authenticate so app dot off
that decayed we're going to be using a
store it in the local storage so what's
going to happen is we're going to
request to the server the server is
going to give us back a token and that
token is going to be saved in local
storage so if we already have that token
we don't need to put in our username
password we just save it and this is how
will authenticate later and then we'll
have just have email
and password
we'll do dot then
and then this is on
the first one this assumes that the
logging went correct filling correct
will just pass the user back which is
the response if it did not go correctly
we'll catch it grab the air
will log there and then will return an
empty object which we can basically say
if there's an empty object they're not
logged in okay now we want to go to our
reducer and actually add the user to the
state so we go to reducers we create a
new reducer called check login oops
check on
so I'm just going to be function
check login
initial state is just going to be an
empty object to action and switch action
type and then we're just going to check
we want login done
when the login is done we're going to
return action dot user
and the default case just returned state
let's go ahead and export that check
login and then we need to add that to
our reducer our route reducer because
we're going to be passing in a user so
check login
check login and now because we updated
the reducer we also need to update the
app so we're just come here and we'll
say user the Google state check very
nice
so didn't make
any mistakes that should let us log n
submitted test with that tests log and
then I'm a before slog in let's see if
we got any air in our console we didn't
help something was printed okay so I
printed it back and objects it looks
like it might have worked let's see if
it was added to our state
go to connect main we can check our
state and we see a user and that's
exactly what we're looking for so we can
see that a user is currently logged in
because we have the data here and we can
use that to basically tell if a user is
logged in so that's our login page what
I would like to do next is create a
little navigation bar at the top here so
we can actually tell when a user is
logged in and then prompt them to logout
and that sort of thing so that's what
we'll do in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>