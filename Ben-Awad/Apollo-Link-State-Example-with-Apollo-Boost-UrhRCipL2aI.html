<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Apollo Link State Example (with Apollo Boost) | Coder Coacher - Coaching Coders</title><meta content="Apollo Link State Example (with Apollo Boost) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Apollo Link State Example (with Apollo Boost)</b></h2><h5 class="post__date">2018-02-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UrhRCipL2aI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I wanted to show you an example
of getting a puddling state working with
Apollo boost I actually had a little
trouble setting up Apollo link-state at
first because I tried copying the readme
of appalling State verbatim using their
is connected example and there seems to
be a few things that are not matching up
that had to change to get things working
so I wanted to show you that and I just
kind of adapted the colors just a little
example that I made the other day and I
made it working with Apollo boost so
here's the first thing I did so I have
Apollo Boost installed and I have a
react Apollo and I also installed react
Apollo the newest version so it has the
query component so here's the thing with
Apollo client now you actually don't
notice how I don't have a Paolo link
state up here I don't import it or
anything I set up a polling state with
this client state so this is where you
put all your stuff so you see where it
says resolvers right here this is where
you would put all your stuff your
queries your mutations for Apollo link
state and then here at my default values
so my default value is my network status
so this is the one that and their
example and is connected is true by
default and then I have one mutation
that just changes it right updates the
network status okay and then over here
Apollo provider same as usual you pass
the client in alright so let's take a
look at some of these other files so
first off we'll take a look at colors so
colors over here is pretty interesting
it now is using the query component from
react Apollo I went ahead and mute
remove the mutation because we'll talk
about that in a second and then gql from
apollo boost so i define my query and
you'll notice I'm getting the network
status from the client and to specify
that I have a client here I'm getting is
connected and I'm also fetching colors
from the API that I'm
good - and I don't know if you guys
noticed that but on my index over here I
just you know added this on to Apolo
client I still have my URL here so
pretty nice alright back to colors okay
so with colors I am using the query
component so here I am passing in the
query and I get loading and data I check
whether we're loading I'll display no
otherwise I'll display this fragment and
this fragment I have my colors as usual
and here I'm checking the network status
and displaying connected or not
connected now I wanted to also keep my
mutation for the other one but the
mutation component doesn't will seem
like it's in the NPM package yet I took
a look at all the things that are being
exported from the NPM package they have
not released the mutation component yet
so only the query component is available
so this went ahead and remove this and I
have this little button another
component that actually controls this so
notice how they're just nothing changing
Network status in this component right
so this is what I really see a strength
of using Apollo link state is being able
to do this so I'm updating this color
query right because I am saying
connected or disconnected just by
clicking this button and the way I do
that is in my change connection over
here so in my index I am rendering
colors and change connection so if we
take a look at change connection what
this does is I have my query component
which I didn't actually end up using for
this because I wanted to show you guys
how to do this with just a writer higher
or a component two and show you that
both still work so here's my change
connection so I have to graph QL things
going on here first I'm querying the
network status because I want to just
invert the network status if it's
connected I want to be disconnected so
in two places I'm querying the network
status right and another component and
in this component and so I connected it
to this component and the way I did that
is I compose these two higher-order
components like you've seen before if
you've used Apollo client
and I also have my mutation here notice
how I used act client again with the
mutation and here I'm passing in a
variable and everything else should look
the same mutation here it's a named
mutation we could get rid of that that's
not necessary you could have it just
like that that's usually how I do it now
and then this is how do we update
connected so I take whatever value I get
from query and I just invert it here so
here are the props that I get from this
mutate coming from this and then here's
my data that I get from because it's a
query so I check whether we're loading
if not I display this button and then I
mutate so let's go look at the resolver
that gets this to work right so I send
this mutation off I pass in my variables
of you variables that I'm using are is
connected and I just invert network
status and that allows me to control all
the queries across all my components
that use this so anyone who's querying
network status is gonna get updated from
this so that's pretty sweet and has a
lot of use cases so I like that a lot so
here's what my resolver looks like we
just take the variable they pass in and
we just write it to the data now notice
this is important I matched up the
defaults here all right so my network
status curly brace here and we have type
name type names very important it gets
stuff gets messed up if you don't have
that now I want to see this is something
I noticed with Apollo link state for
whatever reason it has a missing field
Network status and this happens on my
colors query even though it actually has
a network status right because it's able
to to get it's disconnected but every
time we can clear this every time it
loads in this warning pops up so I think
a polling state still has a few bugs in
it and I believe I was able to crash it
let's see if I can still crash it by
coming over here and removing query so
just not passing in the query see it
just
chosen for some reason even though I
don't have any queries that I want you
need to specify that so there's a few
things that are tricky with this so I
wanted to give you guys a working
example with this I'll put the link in
the description below if you want to
check this out I think I'm gonna let a
Pauling State be let them iron out some
of their bugs I'm glad I got this
working and I see a lot of good
potential for this especially because
it's integrates really well with Apollo
boost I was able to set this up very
quickly and it seems really nice
so check out a Paul link State I'll be
probably using this in projects in the
future when it gets a little bit more
established and there's not as many bugs
with it because I think it is still very
new that's it for this video guys I
think I'm gonna step away from Apollo
all the new Apollo stuff and let them
just develop it and finish it and get
out of beta and stuff because all this
is gonna be changing so fast
no no point in having it be obsolete and
the next week or so that's all for this
video guys
thanks for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>