<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Getting a better understanding of Prisma | Coder Coacher - Coaching Coders</title><meta content="Getting a better understanding of Prisma - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Getting a better understanding of Prisma</b></h2><h5 class="post__date">2018-01-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gDWw4RtiKeU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I know I said I'd talk about
prism s full-stack react boilerplate and
I didn't want to check that out today
but I ended up actually venturing into
some other things that I want to share
with you guys first and then we'll get
to full-stack react tomorrow so first
things first
yesterday I was kind of confused about
what this endpoint thing it was I was
thinking we would like connect at least
so this is the server we set up right
graph QL server and stuff and then we
have this Prisma I was thinking me send
Prisma to a my sequel database but I was
just straight wrong about that we
actually send it to another server and
it's literally this server right here so
we're giving at the end point of our
other server and thanks you guys in the
comments - you guys helped clarify this
there's actually two servers running I
didn't realize this
there's our server and then there is the
server that Prisma creates and that's
this thing so when you run Prisma deploy
it starts up this server that's running
here and basically there's two different
graph QL schemas being set up the one
that we have here where you see feed
drafts posts this is ours and then this
thing is going to basically create all
the crud operations for you and we can
so this is auto-generated this guy but
all the stuff here we do ourselves but
see all the places where we make calls
with this DB mutation all that doesn't
work unless our server is running right
here unless we've deployed it and I'll
show you guys that so I have to do NPM
start to start up the local server and
I'll be running on localhost 4000 and
now here I have my dev server or the
deployed one you know it's off right now
so here is that and notice we'll take a
look at the network tab so if we don't
connect to a database or anything they
actually make in our network call so if
I run this
you'll notice hey and we make we see the
network all right here and even tells us
you try to make a request to hullo three
dev which is this guy over here and it's
down sorry we can't create the draft for
you so every time we see this DB
mutation we're actually just making a
call to Prisma server so that's kind of
interesting I didn't realize that so we
were actually running two servers so
when we do Prisma deploy we've only
really deployed one server we also need
to deploy our own server I was thinking
it was like bundling them together or
something I was still pretty confused
but now I realize we have to actually
deploy this kid all by ourselves
prismo only takes care of deploying its
own server which is kind of interesting
so second thing is and I'm gonna turn
this kid off this doesn't matter anymore
I figured out what at least I mean I
didn't figure it out but I just disabled
off in my prison amel so what I want to
show you guys the other server so I'm
just going to say there's no deploy and
get that started up I think so my
clusters off right now the cluster has
to start up all dead start up but this
was swapped I think we have to run like
Prisma token or something to create a
token to then get this working so for
now I just did disable off and just not
worry about authentication so I could
actually take a look at what this other
server look like cuz last time I was
blocked but yeah suit this and I don't
know if you're less cuz I just turned
this off okay cool
notice how right here this is only the
things queries and mutations those are
all in our schema that graph QL they
didn't create anything for us at all
nothing is created on our own server but
this other server which we're deploying
to is okay so it is up to date and it's
deployed so I can take a look over here
so this kid take a look at him now he
has all this things all this is
auto-generated so we can't actually
touch how the mutations and queries work
over
this is just all auto-generated and then
we can access him from our own server if
we want to by calling this update post
delete post and this is where we're able
to hey if we want to front run create
poster in the back change what's
happening before after we do one of the
mutations we can right because I could I
don't know whatever you want to do
before so that's how you have access so
now this thingy we can access ourselves
if you want to just hit over here or we
can access it from our other server and
directly but this is kind of interesting
how this stuff works
so I created one post let's see if it's
there okay I actually created two posts
so this is the other thing so I was
playing around with the humor how
yesterday I was talking about migrations
and whether you can auto migrate and how
unfortunate that is but also very nice
for development it looks like I was
there is a way to migrate regularly so
take a look at this this is one of their
Docs you can add a temporary directive
or basically you can migrate stuff so
here's them renaming a column now they
don't show all the other temporary
directives so I'm not sure where you can
find those if there's other ones you can
run besides rename but yeah so there's
that so I I was just playing around with
this and kind of gotta wanted to get a
feel for how it worked
so I'll let's say we want to add a
column to this like public and this is
gonna be boolean
now if we add a bang sign it's kind of
interesting because that means there has
to be a for example it has it to be a
public right but what's gonna happen cuz
I already created a two posts so what's
the value of public going to be right
and they actually default some stuff for
you cuz look you know it's no problem
nothing broke it created the field
public of type boolean and the database
for us and it's running over here so if
i refresh I can now say public
and we can see what the value of this so
by default boolean is false so this is
something they just added for us now
this gets kind of interesting so I was
like alright that's kind of cool so what
happens if I have like a field we're
like a default value is not like easy
for them to do so let's say if I want to
create like a pot type I don't know I
just created a random thing actually you
know what let's be on theme with these
posts let's say when I have an author
which is an author here and I say you
have to have an author for a post and I
say author and I say name and it has to
be a string and here we have to have an
age which isn't it all right so we have
this other data type which is how
related to post right because we have
this author is inside of a post and how
are they gonna default this for us right
so if I say Prisma deploy it's gonna go
ahead and run the changes so anytime I
change this I have to redeploy and I'll
notice it'll spit out all the things
that it just changed so this created
some stuff and notice how I didn't even
specify ID or updated Act created that
it just Auto adds that that's pretty
nice
I like that but then it created a new
relation between these two guys but
basically it syncs up this so it auto
migrated that stuff but we'll show you
guys how to use the I'll show you how to
do the manual migration to at least the
semi manual so now what happens if I run
sorry my recording software just crapped
out on me but what I wanted to try was
author cuz I now have these posts in
here so what is the value of auth
they're gonna be we have an age in a
name field and if I run this o cannot
return null for not knowable
so it couldn't default author for us so
basically it corrupted those two items
because in the database they are null
well I don't know if it actually looked
corrupt to the database itself but we
have a problem right because author is
now no but it can't be null because we
told it it can't be null here so we need
to set it like a deep to get around this
right you can
set a default value up there ourselves
but I have that was kind of interesting
just playing around with it and of
course we can fix all this by just
bleeding it and now it will sync up
again so if I say clear and I say I
don't want to stop I want to deploy you
if I redeploy will notice that actually
deletes all those fields and we come
back into parity again so it deletes all
this stuff so I actually do like that
that it does just delete that stuff for
you when you're all done so now I'm
gonna refresh and now we will see some
errors because these fields no longer
exist and we're fine again so
interesting I like how fast it is to add
and delete fields and how things are
just Auto added that's really nice
and I like that they're trying to give
us some control of what we can so notice
I want to rename this kids text so we
see text here T 2 T 2 for both of them
found what this kid instead of being
text to be I don't know Bob like if you
just want to totally rename this I think
I forgot what was call I think it was
renamed old name is equal to and they
say what the old name was so it used to
be called text so make sure I actually
did that right
not an equal sign though they're real
so rename and then we specify the old
name good so now text or rename Earth's
text is now going to be Bob just forgot
to deploy so deploy that guy
okay and so now we no longer have text
we have Bob which should be t2 for both
so that's how you would rename your
field and there's some other migration
things which I guess we'll see if
there's any Doc's come out about that or
if I'm just missing it I'll take a look
see if there's any place else but kind
of interesting as you update your posts
here be mindful if you're calling it
from you know your own server over here
that stuff does not keep up the date
right so if I rename that thing from
like it might not be called delete post
anymore with this mutation so gotta be
careful about that just making sure you
keep it up to sync because it's gonna be
automatically synced up here but the
graph QL is gonna change itself but I
don't really like that this is running
in two different servers I kind of see
so this is actually just like post graph
QL now but basically they have post
graph QL is this thing and it's running
on this port so this is basically a post
graph QL server and they basically just
made a utility to access the post graph
qlu server from your own server so now
I'm creating two servers this kid over
here he accesses that it's fine I'm not
in love with this idea of having to have
two servers what I think I would have
preferred is if there is some way to
merge them into one server and then have
and then I can point just point this to
my I like having I like the idea of
being controlled and being I like the
idea of having controlled my own my
sequel database and that way I can do
things the way I want to have it set up
and I don't like that they it's it's on
one hand it's nice that they have it
pre-built right with docker and I re
like you saw how fast it was a deploy
out server I did nothing and we have
this full-blown server right here that's
production ready I believe I haven't
checked I assume it's production ready
you might have to do like run proc but
other than that it's much faster than
saying you're
but I think I'd rather have the control
or at least the option of control so I'd
like to see if prismo gives you an
option to instead pointing at this if we
could point at like a database but I
don't think it's built like that but
that would be a cool thing yeah so that
was just some things I discovered today
I'm gonna be trying out react tomorrow
or at least react with the boilerplate
of Prisma and see what it's like well to
give you out of a box I'm curious to see
if it's a server-side rendering or if
they literally just have a react
application that talks to a Prisma this
Prisma back-end which might be the case
which we'll see that's it for this video
guys thanks for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>