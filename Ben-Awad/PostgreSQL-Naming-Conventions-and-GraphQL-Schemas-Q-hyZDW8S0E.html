<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PostgreSQL Naming Conventions and GraphQL Schemas | Coder Coacher - Coaching Coders</title><meta content="PostgreSQL Naming Conventions and GraphQL Schemas - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PostgreSQL Naming Conventions and GraphQL Schemas</b></h2><h5 class="post__date">2017-10-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Q-hyZDW8S0E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys we're gonna be going over two
things in this video the first is naming
convention with Postgres and the second
is we're gonna start setting up our
graph QL schema so the first thing I
want to talk about was using camelcase
so you'll notice and some of my foreign
keys I'm using a camel case like team ID
this is actually something that is not
recommended for Postgres and I'll show
you why so if I come over and I connect
to my database called slack I can select
all from channels and we notice we have
team ID all uppercase so I can do select
team ID from channels right wrong team
ID doesn't exist you'll notice what it
does is it lowercases all the IDS so
what you end up having to do is double
quote this like that and now we can
select the team ID and that's really
annoying I don't want to put double
quotes on every time I have a property
like this or a column so a lot of times
you'll see people camel case like this
and camel casing works really nice
they're not camel casing snake case I
mean but you'll notice I didn't do that
here and then the reason for that is I
like how it matches up with my graph QL
schema so my graph QL schema I want to
have team ID for example on how to type
called channel we may or may not have
team ID in here at the end but I want to
have camel case in graph QL and I
actually don't think it uses I don't
think you can do snake case in craft QL
I could be wrong I don't think you can
and you see all the time using snake
case I'm sorry
camel case you don't see snake case and
graph QL I don't think you can but camel
case is what you see and in JavaScript
you use camel case too so I wanted my
Postgres database to match my graph QL
schema and that's why you see me using
camelcase even though it doesn't work as
well with Postgres but there was a
school little option here where we can
say underscored true and what this does
is is supposed to convert all our
columns over to underscores to using
snake case to automatically convert this
guy right here into this for us but as
you can see I went ahead and put
underscored here and I changed in my
index file force true that way the
database would drop and remake and
you'll notice how we can disconnect
reconnect select all from channels for
example nothing is underscored I have no
idea why not I don't know if I have a
setting wrong or what but doesn't work
so then I was like okay what you can do
is you can come in here and as a setting
put underscored as true so on my model
so on the actual channel database your
not database but a table and now I can
select all from channels you notice it
dropped Cree made and we have created
that and updated at or now underscores
perfect but you'll notice now our team
ID that does not have underscores it's
not snake case it's that's a problem
there's also there's actually two
problems to this the first is usually
created at an updated that will come out
back to us with underscores which is
usually a problem but worry about that
later
but the other problem this team ID here
does not have an underscore what I
really want is this here as well so what
you can do is you can specify you can
pass in an object instead of just a
string and set the name as team ID in
the field as team underscore ID now I
haven't actually tried this for sure I
mean I know this does work so we can
come over here select I should have team
ID now um so how this is supposed to
work is my database has team underscore
ID but when I pull it from the database
sequel eyes will automatically Kimber
- camelcase for me now we'll see if this
actually happens when we test this out
later hopefully it does successfully
converted over L so it'll be super
annoying trying to convert these over so
it fits our graph QL but the idea of
using this field is to name our database
column and here is what we get back in
JavaScript so this should be the ideal
solution so I'm just gonna go through
each one real quick and set underscored
so underscored it's gonna be equal to
true and then our foreign key here I
miss it a name and then I'm gonna set a
field and we're gonna do the same thing
with this guy
all right and then our team as well and
now when we go back and select all these
things and Postgres we should see
everything nicely named with camp with
snake case so field team ID and do it
right here with what am i doing I don't
need to with owner okay I would just
went into I went to autopilot mode we
don't need to change owner because it's
already a does it have two words to it
okay just user ID this should be the
last one I did set underscored here good
and let's do it here underscore this
true
oops and we're gonna set the name and
the field user ID all right so let's
select a couple tables and make sure
everything looks good so channels looks
good users that looks good teams and
then members yep everything looks neat
case was there any other tables I missed
messages that one looks good too all
right so now we have our tables nicely
named in Postgres and we get the camel
case back in a Java Script and we can
work with that so I'm going to go ahead
and close all this so next what I do for
the remainder of the video is just
create the types that we're gonna be
using for graph QL so I'm thinking we'll
just do a one-to-one mapping of our
types from over here our models in here
and then in the next video we'll
actually create the resolvers for these
types and the mutations in queries so
the first one will create is let's say a
user so user has an ID which is an int
and you can put a bang sign if you want
to be nominal and I want the ID to be
nominal and I believe we have a user
name email and we don't want to be able
to query the password but we want to be
able to create the email just a string
and the user name
so all of these should be nominal and if
you want to you'll notice how there's a
created that and updated at so if I go
to users there's these two fields I
don't really care about them right now
this might be something we need later
and we can add to the type but for now
I'm not going to I'm also going to add a
few other things to this so the user is
a part of actually channels I forgot
about this this is something I forgot
which I guess we can add on later but
channel if it's private there's a
certain users that can access it so we
need to have like a member as well but
we'll worry about that later when we
actually get to channels because that's
all way down to the road but here we
have messages oops this could be and
this is gonna be the message type which
we haven't created yet so let's put that
up here and I don't think we ever have
to get all the messages a user has so
maybe we don't have to use this but we
should have a message which is going to
have what text and then maybe the
channel and user so it's gonna
definitely have an ID it's gonna have
text which is a string and it's going to
have a user which is a user
and a channel and both of these are
non-null and let's do the type channel
you might want to add more to the user
these are just gonna flush out the basic
attributes I think each one needs and
then as we build the UI we might come
back and add things so the channel
channels have messages and of course it
has the ID and the name and the messages
which is an array of the type message
message not be null in the whole array
should not be null we should be able to
get the team as well right I actually
don't know if we'll need the team or not
for the channel that really will be
referencing the the channel through the
teams I'm gonna for now leave team off
we'll see if we're gonna need that later
I'm gonna say type team so a team is
gonna have an owner which is a user just
gonna have members which is an array of
users it's gonna have channels - which
is an array of channels
and then I forgot we have a public which
is a boolean okay so I think that's
everything the thing that's all the
types we need we have a user which I
don't think we need to get all the
messages the users has are all the
channels the user has we probably need
the teams because you should be able to
see all the teams you're part of as a
user so team probably will probably need
to set create a channel for the user
eventually we'll do that one later when
we actually create the the channel table
you know what let's create that right
now actually so channel here needs to
have a a so users can be a part of many
channels which are public so is this it
does can I guess users can create many
channels but it's only a one-way
Association so kind of how team have a
lot of channels channel has a lot of
teams it has a lot of users I mean so
let's do channel dot belongs to models
dot user actually I think we actually
stick this on the user not the channel
let's put this over here
so this is going to be a 1 to n
relationship or M if you want to and
we're going to say channel and we'll can
say foreign key actually the user can be
part of a ton of different channels not
just one so we actually need this to be
a into M relationship now that I think
of it so let's copy this just like with
teams where they can belong to a ton of
them they can belong to a ton of
channels so this is going to be a
channel I'll call it channel member will
call it and this is channel members only
for private channels because everyone is
a channel number by default in here we
can actually just do this same thing
foreign key user ID and underscore user
ID so in our channel over here
and here we're gonna do channel adopt
belongs to user so many users and then
here's gonna be channel ID
so let's look real quick at the table we
just created so this is gonna be a
channel member so we're gonna create
basically a roster of members where this
user can see this channel and the
channel IDs are only for private ones
because we don't need to keep a list of
the users that can access public ones so
now my scheme over here type user so a
channel can have users so these are the
users that can see it so both of those
are not null so the array and the
objects inside of the array and then the
user can see the oh this is interesting
so the user can get the team's which
then can get the channels so you don't
need to be able to select the channels
from here but we should only select the
channels we have to be careful this when
we make the query make this later so we
have the user can select teams and then
from the teams they can select the
channels so when we select the channels
here we need to be very careful not to
select or to select the ones that they
can't access so we need to make a note
of that and then our channel we can also
get the users that are in it if we need
to so this looks pretty good these are
the types and then I think that's good
for this video and the next one what
we'll do is we'll fill out our query and
we'll also create a mutation type and
then put stuff in that and that's where
we will see your credit read update and
delete all these different types and
then I think we're gonna be doing some
interesting stuff we have a lot of
relationship ear so we're gonna be doing
some interesting joins and stuff with
Postgres so it's gonna be fun so that is
for this video guys thanks for watching
the code is going to be in the link in
description below and it's gonna be up
on github so thanks for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>