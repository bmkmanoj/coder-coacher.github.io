<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Fullstack Feathersjs and React Web App - part 2 | Coder Coacher - Coaching Coders</title><meta content="Fullstack Feathersjs and React Web App - part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Fullstack Feathersjs and React Web App - part 2</b></h2><h5 class="post__date">2016-11-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/etq_vv_RVcU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back we're going to be
in this video going over how to set up
the client side of the website so we're
going to be doing this and react and
Facebook has a really nice set up tool
called create react app that makes it
super easy to set up a react app
Legation so if you just do create react
app and then I'm going to call mine
client it'll go ahead and run I'm not
going to go ahead and enter this because
it takes a while to download some of the
dependencies but when that's done it
will create a folder called client and
I'm just going to go into that and it'll
install all the dependencies that we
need for react but there's some
additional ones that we want to use for
this specific application so if you just
do NPM install we're going to install a
couple of other packages we're going to
need these three feathers packages for
communicating with the feathers server
and when you use that later to log in
and then we're going to be using redux
so we're going to get download redux and
react and redux we're using react router
to serve up the different pages the
login to sign up to create a recipe page
and then also Redux saga which I'll talk
about later which is how we're going to
actually make API calls to our feather
server and then lastly super-agent we're
going to be using with feathers that's
how we're making the API calls as well
and semantic UI is going to help us make
the website look nicer and use some of
the components
semantic UI so I'm not going to run this
because I really run it before but once
you're done with that you'll have all
the dependencies we're gonna need for
the project so if we just look at what's
inside this folder that they made
we have readme node modules a package
and then our source code is in source
but what we can do is just go ahead and
start up the server so if I do NPM start
they'll start up the server that the
create react app created for us so if we
just go to should open it for us
go to localhost 3000 and here we go I'm
just going to switch this over here okay
so we have this nice little popup window
here that we can build out our app in so
I'm just going to let that run in the
backend and the switch to a different
tab in my terminal so if we go into the
source we see a bunch of different files
now they have some CSS and other things
which we're just we get rid of and start
all ours all from scratch so you can get
rid of app dot CSS you can get rid of
app test index dot CSS and then the logo
svj so if we go into Apogee is where
you're not going to need any of the
stuff
we can just make to make sure it's
working we'll just say hi
so curating h1 and we'll get rid of that
stuff I don't need those imports now if
we go to index we can get rid of we
still need the app but if we can get rid
of this CSS right here now if we save
that the cool thing about this
application or this server that was set
up for us is it Auto refreshes the page
for us and loads in the components so
now we see hi there perfect now we can
start actually putting in our content in
so first we kind of need to set up the
infrastructure of our application and
start setting up kind of our components
Redux our routes and that sort of thing
so we're gonna create a couple folders
actions which will be the actions for
Redux components which will put all our
components react components the home
page recipes that sort of thing then
while the reducers for Redux then a lot
of sagas and sagas will be we'll talk
about saw goes a little bit later we'll
just start with these for now now I'm
going to move the app KS into the
components and then I'm gonna work on
index J s so in our index such a s what
we want is we have we're going to keep
these imports here but now our app is
actually in components and then we also
are going to be making a another
component called home which will kind of
act as our home page so we'll go ahead
and import that which will create later
and now we're going to get some react
router components we're going to get
router route
index route and we're getting this from
react router
and now we want to get the provider
and this is for redux and then we get
also the store
history app and we're going to create a
local store file which will get this
stuff from now store is the Redux store
history is for the history of the react
router and then this app guy is
something we're actually going to add
into the store this is going to be our
feathers application which we actually
don't need for now so we can actually
just get rid of we'll use that later for
authentication purposes so we'll add
that to store later okay so now what
we're going to do is we're going to
create a router so conce router go ahead
and then we're going to do a provider at
the top level this is going to keep our
store
we want to do curlies
and we're going to close it
and now we have a router and we want to
keep the history
and now we're going to create a path so
that will be a route and we want this to
just be basically the home page or the
index the first page and when they do
that we want to load up the app this
will have some configuration things in
it which we don't really have to which
we kind of want to happen on no matter
what route they go to so when they come
to the home page basically whenever they
come to any page on our website we would
like this app to be run and so now we
want to set up our index page which will
be our index route and this will be the
component we're going to use as home
so what's happening here is it's going
to load the app component and then once
the app component is loaded it'll then
search and figure out which route at
once if we're going to the just the
homepage will give us the index route
and serve up the home component ok
awesome so now instead of app here since
we have app being loaded here we
actually just want to do the router ok
cool so now our index page is all set up
and we can go into setting up the store
next so if we're going to store dot yes
create one in the folder air in and now
let's go ahead and import some functions
we're going to be needing so we're going
to use create store apply middleware
we're going to do this from redux
and we're going to sync this up with our
router history
and here's where I want to start talking
about Redux saga we're going to be using
saga to make API calls from our
application and how that works is Redux
uses pure functions so how your
functions work is they have no side
effects or they're not they're not
talking to a database they're not making
API calls like we want to there you put
in an input they spit out an output and
that's all there is to it
but how do we actually make API calls
then for Redux and the way you do it is
with sagas it's a library that helps you
do this and what happens is it'll make a
call to whenever you want to make an API
call you would call the saga saga makes
a separate thread runs it in the
background and when it gets the result
calls Redux and Redux can update the
state with whatever value that the saga
got from the API call now that might be
a little confusing right now it'll make
more sense later so right now we're
going to get we're going to just set up
the saga so we can write that later but
we're going to connect everything up and
then I'm going to create a saga and a
little bit and create that in a sagas
folder so we haven't actually created
this yet but we're going to do it in a
minute we also can get the route reducer
which we have not set up yet but what's
going to be in our reducers folder we're
going to create that I like to set up
kind of a reducer for each part of the
application it kind of separates things
and then combine them all together so
you'll see what that is it makes it a
little bit easier to write your code
next thing we want to import is super
agent get this from super agent and this
is we're just basically initializing the
feathers client that we're going to be
using so it's import some the stuff we
need for that feathers wrist
and we can create a default store which
for now we'll just leave empty and we're
going to create some middleware and this
will be our saga middleware this just
allows saga to be called through actions
this will make more sense later this is
basically just wiring everything all up
so let's create the store and pass in
our reducer our default state and then
our apply our Millah we're on the saga
middleware that we got right here
awesome so now we're going to set up our
application because you'll see in our
application later we're going to have to
be using our feathers app in multiple
places so basically you want to keep
this object and pass it every time we
make a saga call so for this our host is
going to be a local host 3,000 or 3030
that's kind of where our back-end is
running we're going to want to change
that if we put this into production now
we're going to export this app this is
this this is the app I was talking about
earlier in the index that we are
importing we're actually not going to
need an index right now but we'll need
it later so we're just going to
initialize feathers and we need to
configure it
get it with the rest we're passing in
the host and we want to connect super
agent that's the HTTP client that we
want to use configure again just makes
it really easy to use setup hooks
and then lastly authentication we won't
be doing authentication now but we'll
need that later in application so let's
go ahead and just add it now and for
authentication we're going to use local
storage
okay all our Curly's and prints these
are matching up excellent
and then we just need to actually run
the middleware and we'll call our saga
and then we're just going to pass in the
app and this app will be passed into our
functions now we're just going to export
the history
passing in the browser history and the
store and of course exporting our store
awesome so our store is all set up now
you see we have some other things we
need to set up we haven't done the
reduced this root reducer we haven't
made this my saga yet so let's go do
those so we created let's create a sagas
folder so now we have actions components
reducers and sagas to do let's actually
start with actions because those are
relatively simple and straightforward so
let's create a file in our actions
folder called action creators top j/s
and we're just going to have one now
when we come on to the home page of our
application we would like to see the
most recent recipes so let's create a
function called recent recipes and all
we're going to do is create a type
recent recipes requested and so what's
going to happen is whenever a recent
recipes is requested we're going to go
make an API call to our feather server
that we set up get the recipes and then
serve them on the home page and that's
the only action that we need for now so
we're done there let's go ahead and
tackle the reducers actually let's do
the sagas first because the sagas
influence the reducers so if we go into
sagas we're going to create in sagas
we're going to be creating a file called
sagas dot GS and in this file first we
need to import some stuff we're going to
be importing I believe it is um sagas
from Redux saga and
down below oops we're going to be using
also take every
and actually I don't think we're going
to need this for that we're going to use
fork call and put instead from redux
augo's slash effects and import get
recent recipes now this is something
we're going to be creating this is going
to be a function call that actually
calls our API
so let's we'll create a folder a
services folder and an API file which
will store that in so we need to create
this guy still create a browser history
and react router
awesome and actually four will be using
browser history later I'll leave it
there for now when we're actually making
some authentication things and
redirecting pages so let's create the
root default function root
feathers app yield and we're going to
fork recent recipes saga which we need
to create this function and then
feathers app now this feathers app you
see right here is the so yeah we don't
need that semicolon this is the function
that we passed in the store so if we go
back to our store real quick you can see
right here we're passing in this app
this app right here is going to be
passed into our route we're done with
that so this is what we're going to use
we're going to pass this on to the API
so it can make its calls so let's create
this recent recipe saga so function star
recent recipe saga and you'll notice
these functions have stars next to them
because they're using the yield keyword
and this is happening asynchronously so
we want this to be called whenever the
action recent recipes requested is
called and when that's called we would
like to fetch recent recipes this is a
function we'll be making and then we'll
pass in the feathers
app
now a
you notice this is the same as in our
action so whenever that action is called
it'll trigger this right here so let's
create this fetch
fetch recent recipes others app con
stress appease is equal to yield call
get recent recipes passing in the
feathers app as a parameter and then
once we are done with that we're going
to create an action recent recipes
instead of requested we're going to
assume it succeeded and then we'll pass
the recipes okay
so what's happening here is first we are
listening for this action to be called
whatever this action is called we will
then call this function and this
function is called we're going to create
a call to our API get recent recipes
return that here and then we're going to
dispatch another action which we're
going to handle in our reducer with the
recipes so we're all done here so
there's two things we need to set up
next the reducer which will be using for
both our action and when the succeeds so
if we we can do that next and then also
we need to set up this API so we go to
reducers we can create a
recipes reducer wage wheel export
function now we'll call this recipes and
let's actually let's see let's export
default at the bottom let's do this at
the bottom
and then at first we're going to have no
recipes you just set a default state so
how these how you setup Redux functions
or reducers is you have the state as one
parameter and the action as the other
and remember when we write here in our
action we have this type whenever an
action like this is called it will come
over here and pass this here so we can
do action type and check what type of
action it is and then we're also passed
the state now the state will set by
default as just an array and then we'll
fill that array once we get recipes so
first we want to check and make sure the
action is the right type so we'll check
the type of the action if it's now we we
don't care if it's requested because
that's when the saga is called we only
care when it's succeeded so we can also
get rid of this now
and we will call recent recipes
succeeded okay so if it's equal to that
then we are going to take the recipes
and put that into the state and we can
put it into the state by just returning
the recipes now if we do go to default
we can return state you always want to
add this so there's something being
returned okay so we're done with this
reducer now we can create the route
reducer which we'll call index at J s
and in this guy we are just going to be
tying all our reducers together in this
case we only have one reducer right now
but later we're going to have more so
we're going to use combined reducers
from Redux import router reducer from
react router oops
and the only other thing we're going to
be needing is the actual recipes
function that we just created and now
let's create the reproducer
it's going to be a combined reducer and
right now we're just going to have the
recipes and then the routing and this
will just give us some routing
information cool
now just export that so other functions
can use it default route reducer okay so
we're almost done we have the reducers
all good to go the things that are left
to do are the action and not the actions
the components and the API so let's do
the API next so let's create a folder
called services and then that's folder
will queue up create an API and this
will where our API calls will be so
let's create a function and export it
called get recent recipes and this is
that same thing that the saga will be
calling pass in the feathers app and
then we're going to be looking for
recipes so if we do app service remember
how we created a recipe service the app
knows about this and grabs it and then
we will just return recipes find and
then what we're looking for is the most
recent recipes so we're going to query
and when I sort
by created at by negative one this is
how we would like to find it so and then
do then data err we can just we're not
going to worry about errors right now
data data so that we're just going to
return the data given back to us so this
is how we would like to find the recipes
but right now we don't have created that
in our objects so if we just going to
open our tab and go look at our back-end
that we set up so if we go to our
back-end and if you go to data that's
kind of the data stored in the database
so if we go to recipes we can see if you
remember follow along in our last video
we added these two to our database and
you'll notice there's no created at so
they actually cannot be soared by that
so we're gonna have to add that in as a
hook later on so for now we are not able
to do this we're just going to be using
get and not worry about that
and we'll be coming back to five all
right awesome so this should be it all
set up so lastly let's set up our
components these are the actual views
and what they're going to be looking
like the first thing we need to set up
is the app dot GS and now we're going to
be changing this up a little bit this is
going to be called every time are it our
function or not our function our website
is loaded so it's not really going to be
a component it's more of like a thing
that's getting loaded before everything
else so we can get rid of all this stuff
instead get read some import statements
we're going to be needing bind action
creators this allows us to call our
actions that we created in our actions
folder and we're going to get connect
from react Redux this connects all the
state and as action this is actually
getting all the actions which we put in
our actions folder action creators and
we're going to be creating a main
component in a second which will kind of
wrap all our components and then we're
going to map state to props state now
what this is doing is if you remember in
our reducer we said we're going to be
passing in actions dot recipes we're
past that right in well we can that'll
be in state dot recipes and basically it
just allows you to put this inside and
have all your components be able to
access it and we could name this recipes
and write this is in our state right now
this guy right here is going to have all
our recipes that we want and we're
destroying this in this object so this
is just taking out the state putting in
a location where the components are
going to be able to touch it so we're
also just going to set up a dispatch
function
this allows a to call the actions from
the props which you'll see in a minute
when we set up the other components so
passing action creators and dispatch so
const
app and we're just going to connect
everything together map states props app
dispatch and then we're just going to
call that main component so let's set up
that main component next which will be
using ever to tie everything together
opponents that's yes so this is kind of
like an outer this is going to be a
component it's going to be like the
outer layer of our application so
opponent from react this is kind of
where our header is going to be that we
want every page let's create a link this
is the route allows us to make basically
anchor tags router and we get the header
container this is just some things to
make it look nice
now create our class and hear it from
components
opponent and our Creator render function
we're going to return we're going to
just wrap everything container and then
we want a header
and we want to be an h1 I'm going to
call this and of course make it in the
center and then I want to wrap this in
the inside I want to put my text and I
want to put my link so we can click on
and go to the home page and I'm going to
call this menu monkey you can call this
whatever you like / link and now the
last thing I'm going to do is every come
I want all the other components to be
kind of inside of this main and to do
that we're going to do react dot clone
element
this dot props the children Alma stop
drops
okay so what that does is it grabs alt
like for example we would like the home
page so if we go back to our thing right
here we're not actually calling main
anywhere when we call app we're then
connecting it with main and main is
going to be on top of home so by doing
that a copy thing that we just did the
clone what that actually does is passes
the props to home so props can now call
actions and see the information that it
needs so let's set up home next
so components home j-f so of course is
going to be a react component
on it
from the act import recipe
list this is going to be a custom
component that we're going to make and
this is just to divide everything a
little bit you're going to get a divider
from semantic UI all right awesome so
home extends component and we're just
going to render return we're just going
to create a div to wrap everything and
then a divider
and then we're going to do just show our
recipe list on the home page and this is
going to be that list of recipes and we
just want to export default home okay
so let's set up our recipe list now
creator s Poulos file on our components
it's going to be rack component
we're going to be using a card view from
semantic UI
and
what we want to do is we're going to
show like a big group of cards and you
might want to use cards everywhere so
what I'm going to do is I'm going to
actually create a custom recipe card
component which we'll set up next
um I'm here what we'll just do in this
one is create a group that I'll have a
bunch of cards so in the constructor
construct our props super props now what
we'd like to do is whenever this page
loads we would like to uh or whenever
not the page loads because we could add
other stuff in the home for this recipe
list to load we need to actually fetch
recipes now remember how we actually
trigger recipes to be fetched is we call
that action so if we go to props the
stop props we had a recent recipes
action and this will dispatch that
action and then our saga will be called
and it'll make an API call so this is we
want to happen whenever this is loaded
for the first time so we're going to
just render turn
we're going to create a card group
and I'm gonna say five per row
and now I'm just going to map recipes so
remember when we did this dot state
recipes in our app so right here we're
going to be using this it put it puts
this in the props so then we can do this
dot props at recipes right here I'm
going to map that and we're going to
create a little function so we're done
with that so the first thing we'll have
the recipe for each one and the array
and then we'll get the index and we're
going to create a recipe card for each
one passing the props props and we need
to keep give it a unique key so Redux or
react knows when to refresh it refresh
it and then we're just going to pass the
recipe and awesome so basically what
it's going to do is it calls the API it
gets the recipes and then for each
recipe it's going to be creating a
recipes card on the page showing that so
let's create the recipe card now if you
just go to components create a
recipe card the GIS so this react on it
from react is anything else we need
import I don't think so
so check your SP card and that extends
on it
we're just going to
create a
oh this is going to also need if we're
going to be creating a card forgot about
that from semantic UI let me use that to
render so in the constructor well we'll
set the constructor in a second-- we're
going to create recipe we're going to
render return our the first thing we
want to do is get the recipe from the
stuff props
and if you're not familiar with the
syntax this is the same as doing con
stress opee if you go to this top recipe
and then we're going to be returning so
they're just getting the recipe from the
props so I can use it easily you're
creating a card it's going to be
centered
it's going to have an image this would
be recipe dot image URL
header we equal SP
dot name
Mehta equal description
we for now we're not going to have it on
click will add that one later
description recipe description
dot substring in case the descriptions
kind of long we'll cut off at 100
characters and why an ellipse okay
so we're all done with that export
default recipe card I can't remember if
we exported your recipe list let's make
sure we did nope we didn't
so export default recipe this awesome
now let's go back over and see if we
have any syntax errors which looks like
we do so was it saying it does not like
unexpected token and let's go figure out
what that is so that's in our store so
fam store
so we have
an unexpected token apply middleware
I don't see
why Oh
that's why that shouldn't be there
okay and look at our recipe card and
recipe card
what does it it like oh we need to close
our card there yeah
anything else browser history is not
defined in storage a s
oh you're right we did not do browser
history so let's get that
import browser history from react router
very nice
you load module not found' Redux sagas
oh looks like as promised our sagas
scooter saga is one more time
um
see
I think it doesn't like our oh I had an
extra s that's it it's Redux saga not
sagas and again there
oops
see every four refreshes okay awesome
so now it's actually loading if we look
at the console we should be getting air
because we have not we don't have our
server running right now so we're
getting a warning type should be null it
should be a string for react cache check
the connect I'm called error element
type is invalid create a string for the
built-in components got an object check
render method okay so we're getting
different errors than I thought
so let's look at why we're getting these
so main is never used is defined but
never used in main j/s let's look at
that warning first components up so
that's a problem we didn't export
default through x4 default main and
browser histories never you oh yeah
that's not used okay so this is the air
I was thinking we were going to get so
we have our server is down
and
that makes sense because it's getting
air what you can do if we go to open up
a new tab in my terminal so I'm going to
go back to the backend tab I'm just
going to start it up now we should still
get an error because if we go back to
our recipe card we said the recipe image
URL the recipe name and all this stuff
and if we go back to our back-end oops
and we look at the data we don't have
any of that stuff we have a name we have
ingredients but right now we don't have
a description we don't have an image URL
so if we go back refresh the page maybe
Sogang an uncaught property because we
don't have this description so we could
do we can just delete that for now
forget about the image and just see if
we can show this name right here
okay it looks like that's showing up now
if we go to connect to react we can
actually see
if we click on leave main will have it
this is a Chrome extension for react so
you can see it adds this other react tab
right here so it allows me to look at
the props for each component so I'm
looking at this main that we created and
I just want to show you guys that the
recipes that we fetch that are in the
Redux store so if we click on recipes we
can see the first one we have directions
cook for 10 minutes we have ingredients
as their broccoli sauce you can see this
is broccoli sauce there you see broccoli
contain we can see broccoli sauce olive
oil broccoli there okay very cool so
that's showing up and it looks like my
semantic UI downloaded kind of funky so
I'm going to look into why it's not
rendering nicely in the next video we
will set up the rendering of this so it
looks nicer
assuming yours also looks like this it
might look nice and then also I will set
up the image images looking nicely and
we'll sort them by date and that sort of
thing so thanks for watching we setup
the basics of the redux saga and the
react router components now it's going
to be easier to add on for future videos</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>