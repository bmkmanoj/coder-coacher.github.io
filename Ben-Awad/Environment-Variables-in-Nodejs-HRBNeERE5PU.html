<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Environment Variables in Node.js | Coder Coacher - Coaching Coders</title><meta content="Environment Variables in Node.js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Environment Variables in Node.js</b></h2><h5 class="post__date">2017-08-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HRBNeERE5PU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so I have a express server
right here running in no js' and I have
some secrets right here I have my
username and password for my database
and I don't want to put these in my
actual application because if I want to
put this code on github around the world
I don't want everyone to have my
username my password so how do I share
this code without revealing what my
username my password is and that sort of
thing how do you basically take these
out or hide it
it's what I'm going to be talking about
and the best way to do this is with
environment variables now if you've seen
you for what you can do is just do come
into terminal and export an environment
variable like I can just say user is
equal to Bob and then that is made so if
I were to echo user it see Bob show up
right and I can actually use that in
node so that's what we're going to do
but you don't want to have to come over
here and export all your environment
variables every single time that you
want to you know setup your project
right and start running it so there is a
package called dot and that helps with
this it's a nice module it's really
small super simple so I'm going to show
you how you can put your secrets in a
dot so how this works is you put in
what's called a dot and file it talks
about here and then the file will look
like this so whatever you want to be
called here so this is the key this is
the value and then this key here is what
you reference in your node application
so when they do process that em it'll
look it up in your diet and file and
grab it
input localhost here you'll put that
value so that's we're going to do so I'm
going to create a new file called dot
end and now this is very important when
you create a new file called dot end
make sure you go to your dot get ignore
and do dot in because you don't want
this to be shared because we have all
your secrets in it
so for example all in my index holder
here this is where my secrets are so I
would like to do process dot and what
was the process so now you get here I'm
going to copy that that's how you get
your environment variable putting in the
name so I'm going to say DB name is
going to be this one so that I'm going
to grab it what value is and then come
over here and say DB underscore name is
equal to that value
I'm do the same thing for this guy we
process that is DB username we're going
to delete it over here DB username
oops area so I'm you can do this for as
many variables as you want I'm just
going to do it for these three so now I
have my DB username DB password not
everyone in the world can come see it
right so I'm a little bit protected so
DV underscore password and now you can
share your code and have it all this is
this is what everyone else is going to
see DV is a DB password and so on let's
use your code on the Internet and what
they do is they create their own dot and
file putting in whatever they want their
values to be now let's see this in
action we create our M file we actually
need to we have you know we're reading
from them we actually need to set up the
UN's module so we're going to import dot
F from em and then just call you want to
do this at the very top ends config and
then we're gonna we're going to go ahead
and do download this library for this
project so yarn add dot in and it's
important to call config as soon as
possible because if any of these other
things use excuse you know the
environment variables
then acted a bit messed up so you like
placing it here is actually a mistake
and here's why notice how I am importing
modules here
well my modules if we see what's
happening in modules like income modules
we're importing this index file then
this index file actually accessing these
environment variables so if I did like
this they would be null so like go
everything set up I did npm start i
think it's going to crash
unless i have those environment
variables for some reason nope okay cool
so roll bak does not exist oh I guess
when I put the user here as Bob that's
actually an environment variable let's
equalize uses so if you need to get rid
of the environment variable so you see
how I did I had Bob set the user you can
unset that like this and now if I were
to echo user oh just kidding
I think after that maybe there you go
and now I'll go this is it unset some
variable okay so let's do NPM start
again
we shouldn't see Bob here aperio notice
you guys user name specified and start a
package so it basically doesn't know
what to do right because it doesn't have
the right thing that's because we call
it config in the wrong place so make
sure you're doing config at the very top
it does not gonna like it right my is
lint is like we should be importing
before you're doing any kind of
configuration but it's just going to
have to deal with it so get rid of this
restart the server and now we should be
reading our diet and clouds and bam it
does not work well okay guys so I went
ahead and looked at my process instead
of having anything helpful but we did
everything correctly something which is
wrong with my terminal window or
whatever I just opened a new one and now
it works fine so if I echo I'm dollar
sign DB name it doesn't exist but if I
do npm start it will now go ahead and
read the dot ends Wow
you're getting the DB name incorrectly
working so this is how you should do it
if this happens to you where it just
does not work for some reason some kind
of weird setting is wrong in your
terminal just go ahead and open up again
and it should work for you so dot end
import it call config and then
afterwards process ends and then put all
your keys and dot ends that is the
correct way of doing it so you're good
to go
that's it for this video guys thanks for
watching
code will be up on github
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>