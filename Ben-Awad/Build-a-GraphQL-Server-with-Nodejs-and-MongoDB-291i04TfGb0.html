<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a GraphQL Server with Node.js and MongoDB | Coder Coacher - Coaching Coders</title><meta content="Build a GraphQL Server with Node.js and MongoDB - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ben-Awad/">Ben Awad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a GraphQL Server with Node.js and MongoDB</b></h2><h5 class="post__date">2017-08-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/291i04TfGb0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm going to show you how to set up a
graph QL server using now also of a
video doing this with Postgres sequel
they'll put in the link in description
below if you want to check that out now
to do this I'm going to use a cool
different things I'm going to start from
scratch and walk you through how I set
up and everything so I like to use babel
so i can use the nice es6 with async and
wait also going to show you how to set
up
I like the Airbnb style guide we're
gonna set up no demon or server will
automatically restart and we're going to
be using a pillow for the actual we're
going to be using Express for the server
and it's going to be hungry and then
lastly we're going to be using Mongoose
to connect MongoDB stuff so let's get
started with configuring babel I'm just
going to go ahead and open up a terminal
window here I have an empty folder
starting totally from jamming it and go
ahead and start this guy off Rena sleeps
and then we can start installing stuff
so I'm going to say yarn add that up a
dev some dev stuff we're going to say
babel CLI babel preset latest and you
set stage to our latest in stage 2 stage
2 will give us the spread operation and
us the import size alright and we're
going to create a new folder i have this
up in visual studio code here i'm just
going to say babel RC like it shows
right here i'm going to add these
presets then here and we're going to use
latest and also ok now let's set up yes
lint so i'm going to come over here if
you don't have yes let install on your
computer you can do npm GES lint but I
already have it so I can just say yes
lunch in it and I'm going to set this up
with a popular style guide and I'm not
using react now this is work all the way
it just configures the yes lint file for
you also have to come to their NPM
package here a command you can run to
basically fix it's not appear
dependencies properly so you have to run
this so I'm on a Mac so I'm in Windows
you need to use this install peer depths
for here paces
then I'll install the dependencies yes
lint stuff and you can see it created a
slim file this is good all right
so when that's done sewing we're just
going to come into this package of JSON
and we're going to set up so we're going
to install node daemon and then we're
going to be called we're going to create
a new start script to automatically call
it so add this is in our dev dependency
no demon and we'll let that finish
loading and pop up in our dev
dependencies here when it's done so now
we can go ahead and our scripts I'm
going to say start we help and we're
going to say exec and we're going to
call Babylon the GS so we need to create
an index of GS file next so and that's
we're going to put our all our server
code so this is perfect we have babel
setup ok babel node we're getting for
both CLI and then our presets it does
what to transpile and then we're you
have any mid so all our tooling is good
we can now start developing the server
so i'm going to be using the apollo so
here's the little code snippet here and
this is literally all we need to set up
our dry super-quick
you'll notice we need to install express
body Potter Express so I'm going to
paste those in here and come over here
and do yarn is not dev dependency
Express body and I think it was Apollo
Server Express Express alright and then
change the port if you want to I'm going
to run make a change up and we're going
to run this on slash crack ul that's
good next thing we need to do is set up
our schema now follow this simple Mongo
or mom got a little model that creates
here with the kitty cat so at schema so
I'm going to come over here and say
schema Jas and here is where I'm going
to a string and the string is just going
to be is so I'm going to make it type of
cat and the cat is going to have two
properties an ID which is a string
MongoDB automatically adds this for you
and then a name of string or
B string as well so and make one query
and one mutation the query renews and
all it's going to do is return a array
of all cat mutation this is going to be
a create give it a name which is a
string and we're going to return a cat
right and now this is our schema you can
go ahead and add as much as you next
thing we have to do is create resolvers
for the schema and then so in our schema
right here we need to create it make it
create the type desc
that's that string that we just created
so import this go ahead and pay sleep
alright so and now we have death from
dot slash schema no graph QL tools so
let's go ahead and install that yarn add
tools and then our resolvers wares from
dot slash resolvers so that's eat all
right you know you're getting from here
typed up here and then our schema we
need to pass right here alright and we
don't need to export this so when you
create a resolvers is our resolvers are
going to call mongoose or the database
so we should probably set up the
database first over here we need to
install the mongoose package and then
we're just going to copy their little
example here so paste this and meet the
schema here so first come we're here
yarn add and then we also need to
install graph QL we're not but other
packages are so we need to go ahead and
stall that doesn't button alright so i'm
going to go ahead and use em from syntax
and we're going to move this up to the
top and then i'm going to connect to
just a test database um a cat const and
then we don't have to worry about here
that's going to go in our resolver now
we want to pass our model which is cat
to our resolvers so we can actually call
new and create new cats so there is a
property called class to our resolvers
and we can put anything we want in this
object
there's over here so I'm going to pass
cat in so come over to resolvers now we
can now say export default we're going
to have a query mutations and now our
query would so this takes I'm going to
make this an async function have a
parent args and this is the context that
can go ahead and D structure and get the
cat out of there and then here I'm just
going to create a object or not an
object function we're going to go ahead
and call the stuff that we want to do so
for all cats to find all the cats and
then return them so that's cats is going
to be equal to cat find wait that
because this is an async function cats
is what's going to return is an object
that looks something like this
underscore ID and an ID and the name is
going to be whatever but the ID here is
actually an object and not a string but
we want it to be a string so we just
want to map through the cats and change
that so we're going to actually instead
of just returning cats here when I do
cats map X I'm going to take X like
function called two string on that
object and just come to string and then
we're going to return X all right so go
ahead and say that me it's lint that's
just because we're using an underscore
here not because their sex is bad but
all right now we can get all cats that
should be an a here we can create cats
so I'm going to go ahead and copy this
because it's going to creating cats so
create cats async function parent args
are going to be the same Arg is going to
be the name right so we could expand
that if you wanted to taking it as args
and we're just going to say we're going
to wait new cat and we're going to call
save on that and so this is going to be
our kitty and same thing as before our
kit our cat is going to know it's going
to look like this so our ID we need to
change so we kept underscore ID is equal
to kitty
- wide ring alright and then we get rid
of this return
and here we can return coupes one return
all right same thing as before it
doesn't like to underscore ID other than
at our resolvers these look pretty good
so you notice all we're doing here is so
the MongoDB and then returning the
response of it and of course just
changing the IDs so start this server up
and see if it runs
we haven't seen it with it yet right
because we just have a graph QL endpoint
we're going to use something called
graphical but we'll set that up rivers
good so I'm just going to run NPM start
it's going to shin and execute babble
node and it looks like it's started up
okay so up here I'm going to also import
a server called graph QL or graphical X
proud just uses creates graphical for us
but use the input we're going to use as
graphical is this before all of this is
I forget okay endpoint URL and we do
slash call ok so here we tell what our
endpoint to our graph QL is and that's
the same thing make sure these match so
now we can go to graphical end point out
our graph QL endpoint that we just
created so coming over here I'm going to
go a low cost 3000 slash graphical and
cool so this allows us to play with our
graph dinner with our resolvers and
actually execute stuff so I'm going to
create and create a gap so name is going
to be I am the first we're going to go
ahead and return the ID and the name run
that and cool so we created our first
cat I am the one we have two cats now
and if we want we query them with all
cats getting the ID and the name alright
so that's it
we set up our pretty fast right we have
Express and then we're using monkey
stuff now this is just the beginning
right for basic model there's a way more
you can add on to this ending from here
is just adding more models I'm gonna
pass it into the context here you could
then in your just create update do
whatever you
want with the models that you are
trading so you can expand this and do a
lot more stuff and add to your schema
starting template
it has Babel setup useless and Express
so all that stuff is good to go so thank
you guys for watching please feel free
to leave a comment below
and you'll
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>