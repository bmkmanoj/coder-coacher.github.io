<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>&quot;Relevance of ClojureScript&quot; by Jearvon Dharrie | Coder Coacher - Coaching Coders</title><meta content="&quot;Relevance of ClojureScript&quot; by Jearvon Dharrie - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Strange-Loop/">Strange Loop</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>&quot;Relevance of ClojureScript&quot; by Jearvon Dharrie</b></h2><h5 class="post__date">2015-09-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pX6tUpgktxo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Jovan thanks for coming to
this talk
the original title was relevance of
closer script but I have since changed
it to land of closure script I will
probably discuss why that happened later
so this is the second to last talk of
the day so I figured you guys would be
fried or tired so I put some jokes in
here so if you know the answer to this
joke don't yell it out yet let some
folks have some time to think about it
so it's what do you get what do you
merge a rhino and an elephant
does anyone know you shout out nut self
hell if I know
you gotta say it fast and I'm loud and
then my coworker gave me this
scrambled word the other day it's py te
and you have to unscramble it it only
matches one word in dictionary type you
guys are smart it took me a while to
figure that out
cool so this is a quote by rich Hickey
who made closer and closer script it's
programming is not about typing it's
about thinking and I think a lot about
why you would pick closer scripts or
something that composited JavaScript
kind of resonates with this quote just
picking the right tool for the right job
so about two years ago I got introduced
to closure and I tried it and it was a
little difficult and I didn't play with
the list before and then I stopped by
David Nolan our closer script I was like
this looks interesting he showed off
some really cool tools and I was like
I'm gonna play with this but when I
started looking there was only this book
which was kind of old a little outdated
and it was like that for some time and
then recently clojurescript started
picking up traction
with things like ohm and just bigger
companies starting to use closer script
now close script has more stars on
github that enclosure itself I'm not
gonna say this number means anything but
it definitely shows that closer script
is picking up some momentum so first we
start with a tiny demo so a couple weeks
ago I was introducing a friend to closer
script and he's like well if it has to
if you have to ship the entire library
isn't that going to be huge I'm going to
be a pain for the end user but closer
script being pragmatic has compilation
modes and this is a hello world example
let's just just consult that log and you
can see maybe not that it's not that big
it didn't even register in chrome and it
took one millisecond to load and that's
just how the world there is a lot of
code in here for just hello world but
that's just what comes with with closed
script and I think the benefit that this
provides closure skip provides outweighs
the any disadvantage that you might get
with weight off a library cool so nice
cool JavaScript so how many people use
JavaScript here
sweet and how many people use closed or
script or a closure cool and what type
of apps they all build you can just
shout it out it's like what does it do
no takers shout out what your app does
alright
Fleiss RealPlayer cool all right so
javascript is everywhere
javascript is on the back end with node
you can do node bots with javascript and
it's on the front end there are lots of
legacy apps that run javascript and the
javascript core team has to support all
this so they're not going to get to all
the warts that are in javascript and
they are doing a really good job to fix
it but it's going to be a slow process
also javascript isn't going to satisfy
all of your needs right so if you need
immutability closure scripts is a good
choice if you need types on the front
end of your script is they can chase and
there has to be a reason that all these
people are building something that can
pass the JavaScript so I think that we
should start treating JavaScript as a
runtime so things that compile down to
JavaScript and provides features that
you need so what is quote script close
script is a compiler that for closure
that targets the JavaScript that targets
JavaScript so what that means it'll take
a closure code compile it down and you
get JavaScript in the end why did I pick
closure script well it's a list but I
really wanted to learn her list it was a
it felt like I would get the most bang
for my buck I could probably get hired
during closure and so have something
that's older closure script is well
designed a lot of times when you use
JavaScript you might put that gif in in
Hipshot or slack because what's
happening and if something has a book
that says the good parts it's probably
has some bad parts in it or lots of bad
parts all the parts and clothes are
awesome at least I think so so you got
namespaces I'm just going to list some
things right off the bat you know you
don't have to wait for es6 or all that
stuff macros I get great library support
on Google closure which is super
confusing but it's closure with a s not
RJ
so now we're gonna go through some
basics just everyone has a baseline of
what clojurescript looks like this is
how you would call a function so we have
a list of lists and the innards will get
evaluated first so 2 x 3 and then you'll
have plus 1 so it's inside out
and in JavaScript this would be 1 plus
parentheses 2 times 3 this is how you
would define named functions this is a
function named square it takes one
parameter X which is in the square
brackets and the body of the functions
below that and that's what that converts
to in JavaScript you can do anonymous
functions and that's how you do it
basically FN instead of giving it a name
and since javascript is hosted awesomes
close script is hosted on in JavaScript
yes great Interop support so everything
inside of JavaScript or if you're using
a JavaScript library will be in the jas
namespace and so here we're calling out
document get bit by document dot get
element by ID and in the bottom we're
getting a value of a property so that
would be like if you have a name and a
person object or something like that can
everybody see the code cool an enclosure
script we don't do variable assignments
we have local bindings and this is how
you would do a local binding with a lip
so everything in the left scope has
access you have access to everything in
the let's go and then the last thing we
need to know about is an atom so since
closure script is immutable they realize
that you will need to manage state at
some point and you do that with an atom
so think of an atom as a box and you
have things in the box and you could
think you could take things out of the
box but you can't change the thing that
you're taking out so you can take your
shoe out of the box when not change the
shoelaces or anything like that
so javascript is a synchronous language
right
it supports this this type of workflow
and the world is built on processes and
JavaScript handles that so like when you
when something happens do this
so like when you water the plant the
plant should grow but the problem with
callbacks is it just hides all your
logic or it allows you to put all your
logic in this callback that's hidden and
it kind of encourages you to hide
certain things or mutate state in there
and then you might be thinking to
yourself that you know I don't write
that code but someone else will on your
team or someone else in another codebase
will and you still have to use it and
it'll be hard to parse and hard to
understand and bring up bugs and stuff
so you can actually end up having this
this might be a really bad case but code
similar to this and I googled callback
hell and there's a site dedicated to
callback hell describing what it is so
it's definitely a problem so closure
provides this library called core async
and it's an implementation of
communicating sequential processes and
what this means is just message passing
via an idea of channels and a channel is
similar to a blocking queue and it
responds to events and talks to
processes so in closure script this is
how you would new up a channel and we're
gonna go through an example in a bit so
you could put things on a channel or you
could and you use the keyword put the
sugar off the greater than Bank sign and
you can take things off a channel and
then there's a skill block and this is
the magic of the core async library it
turns all your code in the go block into
a state machine so you don't have to use
a callback to do inversion of control so
inversion of control just means that
when you click a button and it
finishes javascript knows to go back to
your callback and do the handle the code
in your callback but the go macro does
that for you so you don't have to handle
that so here's an example
so with Cory I think you write
sequential logic so here we're saying we
have a channel already set up somewhere
in our code base and we're gonna print
we're waiting for something and then we
have a listener and a button which is
the clicks channel and we click so we
take something off the channel and then
the code continues so it's a state
machine so what happens is the goblak
starts looks for all your code all the
channel code in your in your block and
it parks it when it's waiting for blocks
when it's waiting for something and then
it parts so blocking would be if waiting
executed the first line and then
no clicks came through so you can
imagine something like a credit card
form if you click Submit you could pause
all events on that channel and not let
anything it not let anything through so
you don't have to look for the Dom look
through the Dom for State or anything
basically you just pause your channel
and Park it or if you have a video
player or something like that any
questions our encore async yeah all
right so I'm going to I have some tiny
demos but I'm going to show a bigger
demo
of how I'm using this
so can everyone see this fine okay so
this is ohm and we're gonna talk about
this later
so um has an app state and the way you
could use Cori is sync with it is you
set up a channel as part of the state
trying to find all right that's right
here so over here in the state we give
the state a delete key and we give it a
channel and then when you click the
delete key or the delete button we send
this event to this channel and basically
what this allows us to do is encapsulate
all our delete logic in one spot into
our app so if you were to have another
delete button somewhere else it uses the
same channel you don't have to have any
duplication or anything
so with Coria sync you start thinking
more in processes and less in callbacks
and things start talking to each other
in processes so it allows you to think
differently so that's pretty much Cori
sink and now we're gonna go on to state
and mutation so in JavaScript
it also supports you to do mutation on
your objects all your objects from
mutating so say you're using a library
and you call a method you can't rely
that your your object that's coming back
is the same that you sent down so this
also leads to bugs and all sorts of
silly cases so you can't do this in
JavaScript right even though they're
it's the same value and the object it's
still a different object because they
point to different parts of memory so
this returns false even though it should
be true and if you wanted to do this
equality you would have to walk the
object and check its values but in
closure script closure script treats
everything like a value so these are you
get this
equality check for free similar in
JavaScript like you know that number
five is never gonna change it's always
going to be the number five so that
gives you a safety this is what I was
talking about earlier using some
external abric that has a mythical
process maybe your objects we're gonna
come back with the same values and you
could keep using it but probably not so
this is what that code looks like in
closure script so we call process on
ages and we've guaranteed that ages will
still be the same so there's this cool
tool called react developed by Facebook
that's been getting some traction a
little bit of traction and react allows
you to build user interfaces you can
think of it as the V in MVC reactors
known for very quick rendering and
components and this is what this is how
it works so basically when you load your
app who give react this components and
react builds a virtual Dom of JavaScript
objects and then when you make a change
in the Dom react will build another
virtual DOM and do it a different those
two and only send down the subset of
those changes so here are we saying
before a P tag up before and a
photographer after do a diff and only
send down that P to the real Dom so the
magic of react is it doesn't do anything
with the browser Dom because the browser
Dom is a little slow so it gets this
really fast rendering from the virtual
Dom so for those of you that are paying
attention you might think well this
probably will go great with with closure
scripting someone the core maintainer of
closure script
David Nolan create this library called
ohm and there are other things that talk
to react but this serves the purpose for
a demo and this is an interface to
closure scripts Facebook's react and I
think omen react go together like
chicken and waffles which
one of my favorite finger foods so let's
walk through this real quick so this is
a tiny app that I built using ohm and
closure script so there are some
components on the page the undo button
is a component the form is a component
and the list of contacts is a component
and each contact is also a component and
I showed you some code earlier with the
delete button using Akari sync so a
client came to me and they said I have a
list of movie stars and I want to track
them but sometimes I get really angry
and I will delete them but then I regret
it and I want to bring them back so we
have you can see I deleted Johnny and I
can hit undo and get Johnny back and
we're not doing that through the Dom or
anything we're doing that by tracking
the application state
so with ohm and react you're allowed to
track state through time so basically
you can think of basically a function
and you give it a state so this state
has three contact or four cut three
contacts and then if I delete it it has
two now and then I could just undo or go
back to the the last state and this is
handled through closure scripts and
meetable data structures so below you
can see I'll make it bigger I'm logging
out the app state and this is the entire
state of the app and you can see there's
a key contacts and how this works is so
you have a structure which is a vector
and it represents each state and then
when you want to undo you pop the last
value and you go back and that's all you
need to do for undoing so you can
imagine that with this
you can if you have a bug in your
interface or something someone could
just
you can keep saving each state of the
app and you can say well when did you
have it and load that state and you can
see the users interface at that point in
time or things of like you know if you
purchase something and you want to undo
it or rendering lots of information
things like a CI tool would be good for
this which has a lot of state any
questions around Oh more react okay so
I'm not sure for that specific case but
you can't serialize closure script
objects to JavaScript objects using
there's a macro called clgs t.j.s and
you can go the opposite direction to
JavaScript to close your script cool any
other questions yeah all right moving on
feel like I'm blowing through this so
there are supposed to be a talk
I've strangely pabout transducers but
it's not happening anymore so I forget I
should mention it being part of like the
awesomeness of closer script so a
transducer is just a composable
transformer so think of how many of you
use like rambo or underscore Jas so you
can have you have functions like map and
filter you could build up those things
without passing in a collection so so
that's so you have a list of users and
you want to map you want to filter them
by role you would have to map over them
and save that collection and then filter
over that new collection with the
transducer you build up the
transformation first so let's step
through it so here you have an is admin
function and we're just gonna check if
role is admin and then we map over it or
we get a full we've given a record we
generate a full name so the the record
has a first name and a last name and
then we compose a list of
transformations so first we check we
filter out only admins and then we map
over and get a full name so basically
this is a very powerful tool because so
say you wanted to find all the red cars
that were like BMWs you could pass in an
argument and build up these
transformations slowly and not have to
pass in the collection at the point in
time or anything like that it also does
a performance benefit because you don't
have to build a collection on every
iteration it uses the same one that's
pretty cool while preparing this talk I
had a wild I did not really a wild idea
but I was like if you one really likes
closure they probably won't build a
command line tool in it because of the
JVM startup time but closure script
supports nodejs so you can build a tool
with no js' and then make an executable
and have a command line up so I both the
tiny little one it's not impressive but
it does it gives you a fake credit card
number so when you're testing credit
cards you don't have to like go to
stripe and get the number and that's
basically just a fix you see and give it
a credit card name and it's pretty fast
no JB I'm sorry of time and you get to
still live enlist land Lisp land and if
you give it a not real credit card I'll
give you a friendly message now we could
look at that code so this is basically
all that needs to happen I'm using notes
process library using the js9 space
getting the the arguments passed in from
the command line and then just doing a
case statement and you have a command
line now using node that's fast and you
could probably use Cori sink CoreLogic
and all the other closure script
libraries that supports on the command
line so I'm probably going to explore
this some more after this talk any
questions around yes I will be going
through that all right so I'm gonna go
through like three questions that people
have asked me over and over so debugging
usually the biggest complaint or one of
the biggest complaints of using
something that compiles to JavaScript is
the code is all mangled and you don't
know where the bug is
but closure script has great source
mapping so let's look at this so earlier
in the app that I was showing you I left
a logging statement when I add a contact
so I'm gonna have add myself please
don't call me
you can see this this is tiny but I'm
logging out building a contact and I'm
like where did I leave this logging
console that a lot statement and I could
look for it using like get crap but if I
just click the file name it takes me
directly to the closure script file in
the browser and to the line number and
you can see see what it is
so that's source Maps and it works for
more clever examples too and then Trevor
asked about well first we're gonna go
over this big wheel so how many people
went to Bruce talks Bruce's talk
yesterday yeah so fake wheels pretty
awesome it's basically hot code
reloading so let's see if I could do
this so here's the browser and here's my
shell and then let's see so I have a
repla open well let's look at the code
first so we have this button add contact
and let's pretend I spelt it wrong I
could come over here and delete the word
contact and you see it refreshed without
me doing anything and add it's now
changed to add so imagine like building
a game or something you just split
screen and have it going and it also
works for CSS so if I said style.css my
CSS a little messed up so I have to use
the word important so don't judge me
please
and it turned red alright so imagining
just like a real-time feedback workflow
he also mentioned a tool called def
cards which is pretty cool
it allows you to kind of visualize your
state and your interface at the same
time alright so I use Emacs and I have
our built-in repple here so this is the
running app the running server so I can
type browser apple and now I'm connected
to ripple I just have to refresh the
page and then I could basically
communicate with the Dom or the page in
any any way shape or form from the
repple so you can think of like if
you're writing a component in ohm you
can basically evaluate it in the repple
and it'll show up in the browser without
checking anything or if you're writing a
function and you want to see what a
evaluates to just run it in the repple
from from your editor and there's rebel
support for IntelliJ like table and some
other vim other editors so whenever
browser Apple so integrating with
JavaScript so I have not tried to
integrate clear script into a JavaScript
app yet but I have tried using
javascript libraries with closure script
and the way you do this is through
something called an extern which is
basically a file that tells Google
closure which is the tool that compiles
your closure script not to mess with
those functions so you have access to it
so basically if you've had like a user
library this is what the file would look
like so you could say leave the user
object alone and the full name function
and then in closure script you can
access it in the jas namespace so J s
slash user and any phone
and that UX turned and there's this
awesome site called clj SJS which is a
movement to port all the popular
JavaScript libraries to be compatible
with closure script so if you have one
and it's not in there it should
contribute and give back to the
community what's the next sort of
summary I'm done that was quick
so I think we should start being able to
be okay with saying it's okay not to use
JavaScript because yes javascript is
awesome and but there are other tools
that provide different functionalities
that will be useful to you so yeah I
will post these slides and these are
some links that are very useful that
helped me and yeah we should pair
program if you want to get into closure
scripts or closure or anything if you
want to teach me something or want me to
teach you something you can find me on
Twitter at your Vaughn and I have this
little podcast I'll turn that cool with
some friends if you want a sticker feel
free to hit me up so yeah I will be
happy to answer any questions I think we
have how much time lots of time so any
questions of use cases or things like
that
No
is that the stuff for like running it on
dotnet and stuff no okay no I have not
used that I have been wondering about
that though have you okay okay what are
you using close your or closer okay
okay interesting cool and the other
there's an open-source book that there's
a link to hold on sorry it's by fun cool
I last time I checked it wasn't finished
but there are two closer script books
closure books that came out recently
closure applied which was free earlier
and living closure by Karen who gave the
chemical computing talk
they have mentions of closure script and
if you know closure you pretty much know
closer script you just need to be aware
of like the kind of JavaScript the world
a little bit and closure script now sort
of supports a react native but we'll see
how where that goes which is building
iOS apps with clipper scripts so it can
be difficult but with the CL Jas and the
X turns the power is pretty much in your
hands okay okay for certain libraries
yes so recently a friend and I were
trying to implement something with three
Jas and three Jas mutates everything and
it was just going against how close our
script does things and the way we solved
it well though this specific problem is
just wrapping the thing that happened
like putting like an immutable layer
between closure scripts and JavaScript
3jf so all the I guess the advice I
would have for you is sort of put all
your mutation in one spot so you know
how to isolate it basically closure
scripts is really hard to get started
with at least when I started basically
like I think closures people are really
smart and they don't write documentation
or things that relate to
alright at least back in the day now
there are tools like my eyes I think I'm
saying it right which you just say you
use the build tool line again say line
mais and you have a JavaScript project
or running so yeah there's also a closer
slack that's pretty helpful yeah
any other questions I'll go back there
first
yeah so I do not using in production
this is basically a toy for me but on
the closure script github page - who
uses that why is it my thing working
I'll just talk so circle CI which is a
really big CI tool it's fun to use they
use it their front end is open sourced
and you can look at it and github
there's a company called prismatic I
think that is like a reader app and they
do it
there's just startup that does like a
real-time drawing app I forget the name
but they also use closed script anything
that has a lot of state management and
mutation would be a good choice I think
so or at least more traction into the
world
I do not I stick to ohm but I know there
are other talks that I'll talk about the
differences between like region and
quiescent and oh yeah really have an
opinion on that
anything else yeah who's gonna use it
who's convinced sweets and usually you
can you have free reign to steal my joke
on sir it's not jokes fine
alright thanks guys and everyone</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>