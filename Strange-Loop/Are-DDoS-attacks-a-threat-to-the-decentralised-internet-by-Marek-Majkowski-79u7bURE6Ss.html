<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>&quot;Are DDoS attacks a threat to the decentralised internet?&quot; by Marek Majkowski | Coder Coacher - Coaching Coders</title><meta content="&quot;Are DDoS attacks a threat to the decentralised internet?&quot; by Marek Majkowski - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Strange-Loop/">Strange Loop</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>&quot;Are DDoS attacks a threat to the decentralised internet?&quot; by Marek Majkowski</b></h2><h5 class="post__date">2016-09-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/79u7bURE6Ss" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone welcome to the after
lunch sessions and I hope it won't be
too sleepy after lunch and so this is
the leaders presentation and I always
struggle to talk about d-does because
many people mean very different things
when they talk about leaders so some
people mean they're slow Ruby up which
cannot handle five concurrent users now
that's the dose that does dealer to
thumb absolutely and so this is not what
this talk is going to be about more
specifically I'm going to focus on the
nitty-gritty technical details of pretty
low level attacks that we see which I
believe are particularly dangerous and
okay so let me first give you a quick
roadmap of this talk maybe that will
help to follow it through so first I'll
introduce the denial service attacks or
distributed denial several acts which is
the attacks which are the attacks on the
internet which you know consists of
multiple machines attack him some serve
some servers in order to take them down
to disturb their services and then I'll
try to convince you that the really big
attacks the really big threat to the
Internet to the Internet infrastructure
it's caused by a spoofing and that IP
spoofing is behind all of this major
things IP spoofing is basically faking
the IP addresses in the packets then
I'll go to the to conclude that this
this the IP spoofing a name enables
untraceable and sophisticated attacks
which is pretty bad and that leads to
centralization in the Internet and
that's not the only force in the
internet that leads to centralization
but I believe that's one of the
important ones and finally I hope I'll
be able to present you the solution like
what should we do about it how can we as
the Internet community and participants
on the internet actually solve the
problem long-term and so let's start by
explaining leaders and explaining kind
of where where they come from so my name
is Mark and I work for a performance and
security company called culture and at
clouds were we operate a global
distributed to very reverse proxy
we have plenty of servers around the
world
I think our account of points of
presence is right now 86 so we are
pretty much in every major city on the
globe we have plenty of customers from
all different backgrounds different
places in the world from government
agencies to dating portals and but
what's most important we are trying to
be content-neutral we try not to
discriminate customers based on what
they do what content they have and this
leads to issues because if you are
operating in the Internet these days and
if you are if you have any kind of
serious scale then you will be attacked
people some people dislike some content
they try to take it down and they do it
by launching DDoS attacks and we see
that all the time we are the middleman
we receive this attacks on our site so
on this chart you can see daily attacks
that we've seen over the last 90 days
and on the y-axis you can see just daily
attacks like one one kind of spike per
day and time line on the exact axis so
as you can see in most of the days it
was quite quiet between 50 and 200
attacks per day but on some days we were
very busy with up to thousand or a bit
more than thousand attacks per day and
so this is a serious problem
the attacks happen to us all the time
and and we don't fight the attacks
because we we like it it's because we
have to do it in order to keep our
customers websites online we have to be
able to survive the attacks of very
different kind very different natures
but we we don't take any particular
pleasure from from you know from from
serving these attacks from from harming
this this is a destruction to us this is
not what is that what we choose to do we
have to do it and so long-term we would
like to contribute to actually solve the
newest problem in the internet okay so
and over the years we've accumulated a
number of kind of record-breaking
attacks that you made I may not have
heard from news if you've heard about
like spam house attack which was dubbed
also as the attack that almost broke the
internet things like that so basically
helped headline-grabbing attacks and so
in this talk I'll I'll go over three
types of attacks that we've seen
over the years if you don't know know
the names here and they only stable
don't worry I'll explain that but it's
important to emphasize that these
attacks don't kind of come out of the
blue they are not like random things
that happen just because someone
invented something they usually they
always this big headline-grabbing
attacks have two things in common they
they always have two things in common
one is they are big and if they are big
it means they are they consist of many
many many IP packets and these are
usually kind of layer free attacks so
basically it is just straight packets
hitting the server you cannot generate
it or it may be differently it's very
hard to generate a really big attack if
you are doing that one kind of HTTP
layer so most of most of the big is all
of the big kind of record-breaking
attacks just are just kind of packets
hitting the servers it's just a big
number of sheer IP packets and it's not
uncommon for us to see situations when
only one in about 10,000 packets that we
receive is valid all the other packets
are our dust belonging to the attack
this is pretty common so I can imagine
the scale and the second thing that
these attacks have in common is that
they all consist of IP spoofing in each
and every single case of these the
attacker the attacker was able to drive
is proofing and so it again it's
important to understand that this is
this is kind of the cause so what is IP
spoofing so IP spoofing is a fairly easy
thing to grasp and so in the internet
there are you know the data is chunked
into packets and they are transmitted as
packets over the Internet and the idea
of IP spoofing is to basically rewrite
this source IP address of the packet
you know packets are just series of
bytes you can stick whatever you want
inside the packets
it's like it's the buyer that you
transmit it's your bytes like pick a big
piggy I know and I think you chose and
IP spoofing is exactly about writing
this source IP address and this is
pretty bad
it's pretty bad because it can call it
can confuse the destination so on the
receiving side if you receive packets
basically on the internet there is no
way to figure out whether the packet
that you received is actually coming
from the host that is source IP address
or is it coming from someone else who is
just faking this packet who just proving
it and this is the secret about because
this enables impersonation
on the Internet in kind of the history
of the internet it was recognized fairly
early on that this is a problem that
this can cause attacks that this is
problematic and in May 2000 so 16 years
ago there was a famous document
published called called BC P 38
basically is like RFC but a bit less
formal so kind of RFC published with
basically said you know guys on the
internet we have this big problem people
are faking the IP addresses people are
sending spoofed traffic we have to fix
that because this can this can grow this
can actually become a real issue and the
Internet community kind of had that
document had this had the guidelines for
years and as for now according to
spoofer that kind of Oracle project it's
still about 25 to 27 percent of networks
on the internet that do allow a bit
booting so in the developed world it is
most likely that your network does not
allow moving and in the US and Europe
most networked not to that but in the
world overall overall e according to
this project about 25 to 27 percent or
10 o'clock still do allow their
customers to basically send arbitrary
packets to the internet so you may ask
okay why this is why this wasn't fixed
why this this last quarter of networks
on the Internet haven't fixed the issue
what was so hard about that and
unfortunately this is kind of a typical
tragedy of the Commons think it's like
if there is one network on the internet
that does allow it is proofing there is
little incentive for the others to fix
that and moreover fixing IP spoofing
requires active action from the ISPs
unfortunately the only way to set to
stop IP spoofing is to do it very very
close to the source to the device is
actually transmitted the packets so if
you have a DSL the IP spoofing filtering
would be done close to your machines on
your probably on your on your DSL modem
or on the closest router if you're
operating in the server room it's most
likely that's the closest switch or the
call this router will actually be able
to do the filtering and forbid you from
doing IP spoofing and the internet is
created in such a way that it's very
hard almost impossible to filter spoofed
IP addresses within kind of the Internet
backbone so basically the only place to
do that is cos the source okay so I
explained that
spoofing enables impersonation which is
pretty nasty and then I said that it is
still not a solved problem even though
IP spoofing was is in the internet
history for years 20 years since the
beginning and it's still there it's we
still haven't fixed the problem totally
okay so let's move on to the the main
two kind of subjects of this talk which
is that tracing back the IP addresses
the attacks is impossible if they are if
they have they have spoofed IP addresses
and then that the attacks that the IP
spoofing allows sophisticated attacks
okay
so the first point why do I say that
tracing back the attacks is impossible I
would like to show that on an example so
let's say that cloud R is being attacked
let's say that we are being attacked
what do we do what is the procedure that
we do in order to understand who is
attacking us who is behind it know who
is transmitting packets
okay so what do we do if we look at the
attack we see okay there is something
weird going on it's usually in some
charts this is a chart of number of
received packets per second and this is
a this is a per server chart and this
server usually received I think 50,000
packets per second and during the attack
it jumped to 400,000 packets per second
so clearly something happened clearly
clearly big attack you know it is
happening so what we do is we try to
identify what is inside these packets we
login onto the machine we run TCP dump
do yes a favorite tool and we look at
the packets we try to identify them in
this case it was a syn flood so TCP
packets with sin bit set and and if you
look at the IP addresses they will look
pretty random because most likely the
source IP address actually are random
okay so having this data what do we do
next how can we react how can we how can
we stop the attackers
so generally we need to identify where
the attack comes from on which of the
tables on which of the physical wires
the attack is coming to our network so
we need to log in to a router and look
at some charts and investigate the
charts and figure out okay on which of
the cables the attack is originating
from in this case it's the bottom-left a
chart which you may or may not see the
big spikes of in most traffic it's like
a it is usually was quite flat and then
it spike went up to 10 gigs so basically
it filled the pipe for two short moments
okay so this most YPD sort of the attack
so who is on the other
this cable who actually know where is
this cable on the router connected to
and generally we have three types of
connectivity we have three type with
categories of cables and our routers so
the attack could have come from three
different kind of places so one is what
is called direct peering or also called
PN is which is basically a wire that
goes between our router to some other
router on the internet which belongs to
like another entity on the internet it's
usually a big entity like let's say
Amazon or Google or lineout or digital
or some kind of other big Internet
player the other type of cables that we
have connected to our routers goes to
local internet exchanges local internet
exchanges are things that are switches
which which basically are a community of
local ISPs so this kind of localized
traffic usually a local to a major city
or a major hub and finally there is the
Internet transit or Internet couriers
type of connectivity which is a paid for
service you cannot reach the internet
over direct peering or internet
exchanges so in order to reach the
internet you have to pay for that and
that's the kind of internet courier
traffic okay
so let's imagine that the attack was
coming from the wreck peering and so
what do we do in such a case this is the
easiest case because what do we do if we
know exactly where it was coming from it
was coming from the guy on the other
side of the cable there's no other
entity involved usually they they don't
allow kind of third party interred
entities to send traffic over this cable
so it's pretty simple so we pick up the
phone and we say you know guys you are
sending us malicious traffic can you
please fix your problem and if usually
works and we usually have direct
connectivity only to rational and and
technically competent parties on the
Internet
and it's in the interest of both parties
to fix the problem excuse the MS
configuration and for example Amazon has
a very good policy and is very nice to
work with Amazon they close the attacks
very quickly ok so in the other
remaining two situations so what if the
attack was coming from an internet
exchange or what it was coming from the
internet courier
what do we do in such a case
unfortunately there is not much we can
do this is pretty bad and let me explain
so I first need to
disabled internet exchanges internet
exchange is basically an layer to
Ethernet switch it's like big very big
fancy switch which is usually in a big
data center in a major city so this is
this is a pretty picture of I think
Seattle's internet exchange so you can
see big switch and know plenty of cables
going out of it and what's connected to
those cables is other other people's
routers so basically it's a switch
connecting routers and these routers
mostly belong to local ISPs so if we see
attack coming from an internet exchange
from our router point of view it would
be a spike on this cable connected to
the internet exchange and unfortunately
that's it unfortunately we cannot
recognize who actually sending the
packets we don't have much better better
visibility this is because routers
operate on the IP layer so they look at
the IP frame and that and there is not
any data like who actually sent this IP
frame on IP layer and if you look
carefully this data actually originated
this packet is available it's in the
ethernet frame so it's no layer but
unfortunately the normal routers the
major vendor routers do not really
cannot really inspect Ethernet frames so
basically we have no visibility
whatsoever so all we know is yep the
attack came from this internet exchange
that's it we don't know we don't have
any much data that's pretty sad
okay what about Internet couriers what
if the traffic is if the attack is
coming from kind of the real internet
maybe they can help us maybe they can
help us identifying the attack source
and let me give you an example and so in
March this year we published a story
called winter of attacks it was pretty
nice pretty fancy pattern of attacks
that was hitting us every I think week
sorry weekend and and we published this
particular chart this chart shows
packets purses sorry gigabits per second
flowing to over one of our cables it was
a pretty big cable it was a hundred
Gigabit link and the attacker east about
80 gigabytes per second so it was pretty
sizable attack just going over one cable
so as you can imagine this cable was
particle in this case was connected to
an Internet courier to our no paid for
service that we paid to live a traffic
and but what we knew more is that the
source IP addresses of this particular
attack
we're coming from a hurricane Electric
hurricane Electric is a
another big internet provider okay so it
was Hurricane electric attacking us as
simple as that
well no and we are actually fairly
confident about that it's we are
confident because actually we have
direct connectivity to Hurricane
electric in a very in this very
datacenter so basically this router has
direct cable going to Hurricane electric
so there is no way that that could have
actually originated from Hurricane
electric and so we're pretty confident
the attack was coming from somewhere of
our some customer of our internet career
so we called them up and said you know
guys one of our your customers is
spoofing IP traffic it's sending us 80
gigabytes of junk can you please fix
that and their answer is actually no and
it's no for two reasons one is that they
cannot actually preemptively know that
the attack is spoofed from their point
of view it's Huracan directly pockets
it's like legitimate traffic maybe it
was actually her electric they don't
know that we have this connection on our
side it didn't I don't have to know and
the other thing is that they actually
don't have good visibility into their
net network so basically they do not
know over which cable over from which
customer this traffic was originated
from so that's pretty sad and that leads
to the conclusion that if the attack is
with spoofed IP addresses basically
there is no way to attribute that attack
there's no way to trace about who
actually behind it okay so let's go to a
second major point of this talk which is
that I I P spoofing allows very
sophisticated attacks and I'll show you
three examples of sophisticated attacks
and I'll show the spam heart attack then
we'll go back to the winter of attacks
which I mentioned already and finally I
speak about kind of the new trend did
the direct sublet attacks okay so let's
start with these palm health of X so
what they were is they were they were
amplification attacks and so what is an
amplification attack what is this
category of attacks and so imagine and
UDP server and UDP client like for
example a DNS server or maybe an NTP
server I think my CL also has some UDP
backends anyway kind of frequently
request response UDP based protocol so
you send a request and the server
answers with some response for example
the request could be a DNS server
give me the resolution of google.com and
the server politely responds peers ERP
address here's the resolution so this is
kind of how UDP request response
works the idea of amplification is that
the attacker fakes the requests so fake
is the request and convinces the server
to give the answer to the target okay so
far so good
so basically the server will receive the
request which is fake and politely
answer to the to the target today in
today's to the third party okay so why
is that interesting it's interesting
because in many of the UDP request
response protocols the response is way
larger than a request so this allows you
to basically magnify the attack so if
you if you if the attacker has say one
gigabit of capacity then by using by
kind of bouncing off of this UDP servers
that ever can generate much bigger
bandwidth and let's say ten times more
than it has obviously bouncing of a
single UDP server will not be very very
good single UDP servers don't do good
traffic than the traffic traffic but if
you distribute the attack against 10,000
of open servers on the internet you can
generate quite substantial load and this
is exactly what happened in 2013 with
the spam attacks when we estimate that
the attackers had only about 30
gigabytes of capacity they had access to
free machines with ten gigabits cables
and and they were able to bounce off
open exposed DNS resolvers and basically
generate 300 gigabits of traffic going
to our servers so pretty substantial
load I'll argue that this is not the
biggest threat in today's internet still
amplification exists these attacks are
still fairly popular and they can be
pretty and unpleasant to smaller
providers but I'll argue that they're at
least fairly easy to block if you
receive some unwanted dns traffic well
it's like simple a firewall rule and to
fix that that's not that bad and also
the internet community tries to
proactively fix the problem and we they
try to close down the servers that are
that could be used for amplification and
so there is the open resolve a protocol
or which truck is down to the servers
there is open ntp project.org which
dramas down trucks down the open and to
be servers and then there is certain IO
database which is very helpful to find
these things so basically we try to
close down amplification okay let's move
on to the next one so let's go back to
the winter of attacks history from
this year it was a different type of
attack which was different pattern in
this case we received packets directly
there was no bouncing of any
amplification the packets went straight
from the attacker over the public
Internet to our servers okay they were
pretty big so the attackers were able to
generate 400 gigabytes of load and at
the bottom chart you can see that it's
peak it was about 400 gigs and and at
the top you can see number of packets
per second received which talks at about
150 million packets per second so you
can imagine what would happen to your
server if it was flooded with 150
million packets per second it would most
likely boil and so in this case as I
mentioned the attack the packets were
sent directly without any amplification
in the middle and that means that the
attacker was able to generate any packet
they wanted they could pick and choose
they weren't bound to like using DNS or
NTP or anything else they could pick any
package they wanted so what they did is
they basically attacked us with syn
flood and synthesis are pretty nasty to
defend because you can't just drop on
the firewall all the same package that
you receive and because this is the full
denial services because no sim packets
are a part of TCP handshake and
basically you need in order to have TCP
connections going for your servers you
need to you will receive the syn packets
so how do we did did we defend that how
are we how are we surviving that well we
found the BPF feature on IP tables on
linux firewall to be extremely efficient
and effective against this type of
attack
so what EVPs so here you can see Nike
tables example and the PF is this
numbers in the middle what are those
numbers what can they do
well this numbers can be decompiled kind
of more like assembly code and this
these numbers can basically represent a
program so you can run a program inside
the firewall inside IP tables and this
is extremely effective in this program
you can do deep packet inspection and
you can look very deep into the packet
and figure out you know whether the
packet is fault
or whether it belongs to the attack and
you have full program ability there so
it is really really really good and we
published our tools open source and so
there is a github project with EF tools
and there are a couple of scripts to
generate BPF for both DNS attacks and
syn floods so maybe that could be useful
for you
and okay so I already mentioned that on
this attack the source IP addresses
belong belong to Hurricane electric and
that we believe they were spoofed how
about different attacks maybe you can
tell and something exciting about
different attacks patterns and different
attacks no source IP addresses what is
in the source IP addresses and so in
order to explain that I need to first
show you the xkcd from 2006 in which
randall tries to attempt it to draw a
map of the internet so this is basically
it shows the all the IP addresses on the
internet drawn on a two-dimensional
space fairly nice eye candy the feature
of this particular type of graph which
is called hilbert curve is that the IP
addresses which are close by will be
close by on this two-dimensional space
okay it looks pretty nice so what did we
see what attacks do we see this is one
of the examples of the source IP
addresses that we saw and so every black
pixel here represents you know a packet
with source IP address belonging to this
particular subnet okay so this looks
like you know some distribution okay we
got some some some packets why do we
claim the rest post how do we know there
is proof we actually don't but what we
do know is that this is the pattern of
all IP addresses belonging to China
Telecom once again this is the attack
this traitor at all this is the attack
the cantilever okay but the conclusions
are actually not obvious so there are
two ways to interpret that one way is
that someone has a very big botnet of
physical machines doesn't do any IP
spoofing and just you know have big BOTS
the bug net by the way this big botnet
is in every single net block belonging
to this particular provider this is
possible I don't know that and the other
option is that someone was just going
over the IP ranges of this particular
provider and just spoofing them you know
with fairly uniform distribution okay
how about different patterns maybe maybe
there's something more exciting here
this is my favorite one in which the
attackers just went uniformly across the
whole IP space from IP address 0 0 0 0
to 255 285 and and if you see here also
the kind of the hashed out blocks which
are reserved also here so if you ask us
do we receive attacks from local hosts
absolutely every couple of days every
talk about it is our local host attacks
or someone with from a local house and
there are a couple of different patterns
that we see this is a bit more sane in
this case the the reserved blocks are
not used part of the tag but what's the
interpretation where the attacker
smarter we don't know maybe there is PS
was blocking the unrelatable IP
addresses okay let's go for next one you
get a different pattern why this pattern
I have no idea and let's go to the final
one this is particularly interesting it
may you may it may look like an you know
like an attack launched from a couple of
very big is piece which has net blocks
all around the world or maybe some
European eyes a IP addresses know what
this is is the exact opposite of the
Internet map so this basically shows the
IP address is belonging to sorry the IP
addresses which are not routable so
basically someone looked at the IP
addresses that are routable in the world
that actually exists in the world and
inverted them and look only for IP
addresses that are not routable and
spoofed only these so this is fairly
sophisticated effort to only create no
attacks from IP addresses which don't
actually exist okay so let's go to the
final attack example what i called iraq
subnet this is a fairly new thing we
encountered only in june this year so in
order to explain what why this is
dangerous why this is why this is worth
talking about I need to first tell you
what are the usual mitigation techniques
for really big attacks if you receive a
really big attack and if it congested
congest the network unfortunately your
network will be unavailable because no
normal packets will not be able to fit
in the pipe so the usual mitigation
technique that pretty much everyone uses
is to remove the attacked IP address
from the internet you can do this via
BGP now routing sometimes called BGP
block calling the idea is that you use
BGP the kind of router protocol to tell
to your ISP by the way this single IP
address it receives attack please don't
don't send any packets to the SEC
addressed to me like forget about this
IP address this is very effective
obviously this IP address will not be
available and but at least the other IP
addresses your other servers will be
available if you want to keep your
services online during the all think you
need to use DNS to point your legitimate
customers to different IP addresses okay
so what attack did we see well we saw
attack egg
it's not a single IP address or a couple
of these but against the whole subnet
against the whole 255 IP addresses at
once uniformly distributed this was a
pretty big attack and it's a
particularly nasty because that means
that the usual technique of BGP na
routing will not work it will not be
effective against attack it it would it
you cannot do it technically you can't
technically now route 250 IP addresses
and also you actually don't want to lose
that many IP addresses at once so this
is pretty nasty and unfortunately this
leads to the conclusion that the only
way to defend to keep online during such
big attacks is to absorb them is to have
enough capacity to not cause congestion
and to be able to actually receive the
packets then this is called scrubbing in
the leaders world and the idea is that
basically you have very very very fat
pipes more than 400 gigabits of wipes
and you know plenty of servers capable
of filtering the traffic unfortunately
not many people can afford that and so
everyone that is serious about having
good uptime in the internet I would say
that means pretty much everyone everyone
needs to use kind of third-party DDoS
mitigation service services just because
the user cannot afford to have their own
mitigation stack their own no expensive
hardware an expensive bandwidth and this
causes centralization it means that
there are only couple of big DDoS
mitigation provider that can afford the
bandwidth and the hardware and this is
pretty bad it is pretty bad because it
means that these mitigation providers
have very big leverage in the internet
and it also it kind of erodes the
principles of the internet you know
internet was created as a collection of
equal peers everyone could know if you
are connected to the Internet you could
be had the IP address you could have an
a server you could have you could
consume content you could talk to anyone
you could everyone will speak what was
very democratic it's not possible
anymore it's not possible because in
order to exist with good uptime you need
to hide behind DDoS mitigation services
ok so what's the solution how can we how
can the Internet community long term fix
the problem what can we do about it so
first we need to understand that I think
that the technical solutions that is
perfect are kind of done I think we
can't do much more about that and
basically technical social status
failed so we need to learn how to live
with IP spoofing we need to just
understand that you cannot use source IP
addresses for attribution source IP
addresses will almost always not be a
good evidence because they just could be
spoofed so we need to figure out how to
identify the attackers how to identify
the attack sources without looking at
the source IP addresses as simple as
that so basically let's not focus on
solving data spoofing we tried that the
Internet community tried that for last
20 years we should now try something
different you try to solve that
tribution we try to be able to actually
trace back the attack what I'm proposing
is that we should ask our internet
exchanges to help us if there's a type
going over an internet exchange maybe
they can either identify who actually
sent the packets you know where the
traffic originated who would of the
localized piece actually transmitted the
buckets and for internet couriers the
same story maybe the internet couriers
should help us out and figure out which
of their customers send the traffic and
and the big question is how di Speas
sorry how the internet exchanges and and
interest carriers can actually do that
it's technically fairly hard to know
have good insight into network so the
solutions to is net flow and nettle is a
pretty funny pretty nice protocol
supported by all major router vendors is
fairly easy to set up and basically it
allows you or whoever's operating the
routers to collect traces of connections
in a central place and then in the
central place you can do analytics
aggregations and you know exactly have
very good insight exactly what happened
on network you know exactly what
connections were from where to where
with what bandwidth and so that method
is very nice there is a very good open
source stack around it it scales well
and it scales well up because you can
really increase or reduce the sampling
rate so basically in net flow you are
specifying how much of the data should
be actually logged and you can set the
sampling rate to something like one in
64,000 connections you can really load
not much data so you can have really
many many many routers with very big
bandwidth and still use net flow and if
you are worried about the privacy
concerns that your connections will be
tracked their metadata of the
connections will be monitored yes on the
other hand the probability that your
connection will actually be tracked it's
very low because as I mentioned
this sampling crate could sampling crate
could be set to something like one at
64,000 connections and so I think this
is kind of an acceptable risk
furthermore actually we don't care about
historical data at all we only care
about last 24 or 48 hours of attacks we
actually really want to identify the
currently flowing attacks so I think the
privacy issues are not addressed fairly
well okay let me show you an example so
this is the net flow command command
line tool called an F dump which is used
on our servers and it's a very simple
query which answers what was what attack
was happening over the last five minutes
on this particular cable on this
particular router you need to learn how
to read this it is fairly know plenty of
numbers but there are much nicer
backends to actually view this this data
so anyway network contains all this data
so basically if your internet courier
please do upgrade please start using net
flow it is really really important for
us okay obviously using net flow will
not solve the problem the DDoS attacks
will still be there there will still be
threatening the internet but at least we
will solve the attribution at least we
will be able to have a discussion saying
okay now we know now we know that this
attack is actually a real botnet how can
you solve that or now we know that the
attack is actually know a state actor or
some data center hacked or someone else
on the internet and profiting from
hauntingly doses right now there is no
discussion like that we just don't know
who is behind it and we cannot
technically know right now so that's it
so I hope I was able to convince you
that the DDoS attacks and DDoS fred's
are one of the forces that causes
centralization the internet and that the
only way to fix it is actually to fix
DDoS and we can fix DDoS by doing
attribution right to be able to figure
out where the attacks are originated
from and if we can do the attribution
hopefully the internet will better for
everyone not only culture but every
single participant on the Internet
thank you
any questions
please
so the IP spoofing so in May 2008 ABC
p38 and conclude that the internet
community should basically fight
actively fight IP spoofing unfortunately
we make the inter community made some
progress and over the years know 60% of
ISPs do not alike we must still their
students percentage the big question is
how do you convince the remaining 25% of
ISPs to do something about that I don't
think you can this requires the request
money described investment they need to
fix their configurations they need to
figure out their stuff how they convince
them I don't know so at least for
foreseeable future I believe we have to
assume that people think will be with us
and that basically IP addresses cannot
be used for attribution so if you want
to if you are under attack and if you
have monetary damages if you want to sue
someone for the attack who you don't
know there's no way to find out
that's answer the question please
no and we don't see too many
sophisticated attacks over ipv6 but
technically speaking is the same story
there is no technical difference please
I don't know about ISPs I do know that
on the kind of big Tier one internet
couriers internet transits it's a fairly
significant percentage i know only about
one that actually has a good mental
setup and is fairly fresh thing for them
the big issue is that with your buying
bandwidth from some Tier one provider
the service you're buying is you're
paying them for delivering traffic like
not to discriminate not to do much more
that's that's the service you're buying
them and also you pay for the stability
of the service so they are not really
incentivized to upgrade to new air you
know Cisco IOS versions and to actually
set up anything it's not in it isn't
they were interest because they can get
get a better insight into their network
but that's not like historically what
they were good at and so the answer is
still this is still a problem and still
big Tier one providers do not do that
very often
that's exactly the problem so the
question is who has the interest in
upgrading that that's exactly the
problem so there are in the internet
according to my knowledge and there
isn't any significant force that tries
to kind of solve this issue people see
attacks people see headlines know in
news but there isn't there isn't anyone
that actually wants to solve it it's
it's it's the the problem affects mostly
big providers like so if you're a small
provider you'll quickly understand like
I know that's more a media provider
you'll quickly understand that you needs
in order to survive in order to keep
online you need to use these mitigation
servers services okay because there's no
other way you don't have technical
capacity and from the big DDoS
mitigation providers that then actually
receive the traffic they use is a silent
silent they usually don't really there
aren't we in the Indus discussion
because no it's it's a sticky point if
you cannot move off my services no
that's good for business I guess for
some so basically there's no single
internet force in the internet that
actually wants to tackle the big attacks
I want to emphasize here that this talk
was only about the really big things
they're really big attacks not about
small things they answer the question
this is this is the backbone under the
internet this is how the internet works
I don't know if anyone actually kind of
cares okay any more questions please
absolutely so the question is about dpi
byte code in IP tables how do we
actually know whether which packets are
valid or not I highly recommend looking
at the github people you'll find all the
secrets austere yeah but but my claim is
that generally speaking it is reasonably
easy to distinguish pockets that are
that belong to the attack do not this is
yeah
I think we can get one more question
the question is is there a way to verify
if the pockets are actually originated
from and real IP address yes this is any
any stateful protocol so basically you
need to have a handshake need to be yeah
I'm here this is my magical number yeah
I hear this like a magical number and
then you're convinced that you're
talking to this other guy this is how
DTP works so basically if you don't have
this kind of trust establishment first
then the UDP protocol will most likely
be could be used for D for amplification
good examples are DNS which is yeah
firefire forgets parent report
corresponds and ntp there are a couple
of more like TFTP and jargon would that
require changing IP layer and no it's
just the data is just how do I know that
you are you like how do I like it maybe
someone Fitz don't like me like we need
to have some days some content some
state exchange it ok one more question
maybe
the question is do I see attacks that
are more global or more regional and
this goes very deeply into how my
particular service is created depends
some of the attacks are nicely
distributed all around the world and we
see them everywhere but then they are
smaller and some of the attacks hit only
one particular datacenter and then there
are much more dangerous and so I showed
especially the Sabbath attacks because I
believe this is a fairly new trend and
this kind of this this means that the
usual mitigation techniques will not be
effective and I believe this is a fairly
kind of big threat and very new thing on
day on the Internet is from what I see
so that's why it was worth emphasizing
ok thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>