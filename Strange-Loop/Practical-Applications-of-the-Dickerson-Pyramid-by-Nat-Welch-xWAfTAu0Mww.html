<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>&quot;Practical Applications of the Dickerson Pyramid&quot; by Nat Welch | Coder Coacher - Coaching Coders</title><meta content="&quot;Practical Applications of the Dickerson Pyramid&quot; by Nat Welch - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Strange-Loop/">Strange Loop</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>&quot;Practical Applications of the Dickerson Pyramid&quot; by Nat Welch</b></h2><h5 class="post__date">2017-09-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xWAfTAu0Mww" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning everyone this is practical
applications of the Dickerson pyramid my
name is nat welch I'm I go on get up and
Twitter and I'm a lead site reliability
engineer at first look media in New York
this talks history of sort of be
applying the Dickerson hierarchy through
a bunch of different jobs
some of them that I'll be talking about
company called iFixit which I worked at
many years ago in San Luis Obispo
California is a software developer
punched which was a very small start-up
in San Francisco Google which you've
probably heard of as a software engineer
on Google Offers and a site reliability
engineer on to Google cloud products
Google Cloud storage and Google compute
engine and then my most recent past job
I was a site reliability engineer for
all 2016 at Hillary for America in
Brooklyn New York a quick aside is
context
sorry liability engineering means a lot
of things to a lot of people or a small
number of people maybe I learned sre at
Google and so all of my views are
heavily tinted by working for a large
web company I'm hoping that you can take
some of these practical applications and
apply it to whatever sort of software
type job you do if you have questions
about how to maybe apply this to
somewhat something else that's unusual
please talk to me afterwards so point of
the talk
what is this Dickerson pyramid thing
this is I was originally published in a
summary of nori hiked ins sorry if I
mispronounced that talk from Q Khan New
York 2015 it's originally by Mikey
Dickerson
who was a engineer at Google and then
also at the United States digital
service he worked with nori plus many
others on the healthcare.gov thing and
came up with this hierarchy pyramid as a
way to explain so
the things you need to make a service
reliable I've redrawn it in green put a
little circle around it because you know
it's my talk and the the circle is
supposed to mention communication which
i think is sort of the main thing that's
missing from the pyramid
sree as a role as I've experienced it
requires talking to a lot of people
while as a software developer I could
maybe spend 70% of my time coding and
30% of my time talking to people I find
essary is a much higher ratio you know
50 50 or higher depending on the service
and company so I'm hoping to show how
communication applies to all of these
along with the practical applications
that I'll be mentioning so the bottom
level as you saw was monitoring often
those little graphs that spike sometimes
for better for worse this is a list of
software that I've used it a bunch of
different some companies point here is
that you can use whatever tool makes you
know works for you I fix it we use like
cactus and ganglia and it works
punched we just use Pingdom because like
really all we cared about was if the
software was up and our customers could
you know get to it
google has a large internal system
called Borgman for monitoring color for
America we used a large installation of
data dog or hosted version of data dog
first look media right now we use
Pingdom and cloud watch how does
communication fit into monitoring
monitoring is the thing that you use to
find out if things are up or working or
doing the thing you expect but every
business is different and what you
actually want to watch and pay attention
to is very different and so you need to
talk to the people you work with and
what monitoring tools fits your business
needs and what metrics does your
business care about and also what
metrics do you care about to actually do
your job as either a software engineer
or sre your ops person or whatever and
making sure that not just your job but
all of the roles that you have to
support
can actually get to those metrics that
they're being recorded my first
practical application of monitoring
comes from my current job for slick
media we're a growing media company we
only currently have 10 or 11 engineers
but we support a bunch of different
websites and right now our current
metrics you know things are up most the
time but we're starting to realize that
we're having outages that we're not
noticing august's we had three outages
we're better malingering would have
improved downtime we had about 10 to 15
minutes of degraded service for each
outage that if we had had monitoring we
are better monitoring we probably would
have discovered those outages earlier so
right now we're working through plans
and the big thing that's cost evaluation
we don't have a lot of money because
we're relatively young and so figuring
out what you know what the tools we need
versus how much money we're willing to
spend and what solves the business
problem so these are large conversations
that are ongoing but the bigger thing is
right also figuring out how to change
our engineering culture so that people
actually are you know think to look at
the metrics instead of just like well we
could add a cache layer or we could just
scale it and oftentimes there's no data
to support that but we're still figuring
all that out and so it's a culture shift
along with sort of starting to ask the
right questions picture of our hierarchy
again monitoring at the bottom now that
we have monitoring we can talk about
Incident Response because as soon as you
have a monitoring you're going to start
noticing that things are not working as
you expect the sort of two categories I
think of when I think of Incident
Response are alerting along the lines of
who gets alerted and one get when do you
get alerted and how quickly does that
person need to respond an incident
communication where's communication done
and who is in charge there's a long
topic that someone else could probably
cover on DIMMs which is how most US
Incident Response groups deal with
delegation when you come to a large fire
or Nash
emergency or some things like that it's
often adapted which basically is like
the first person who shows up is in
charge until they delegate it to someone
else it's the thing to think about the
communication part is what is an outage
for your business what's worth waking up
for what should you be investigating
first thing tomorrow morning those are
very different topics and oftentimes you
have to decide whether you know the
business is like actually accurate that
you should be waking up for you know a
five minute outage or if it's something
that you can wait till tomorrow and a
common problem is do people know where
to go when there is an incident you know
if something's down is there a place
they can check to actually know that the
way you know this is being actively
worked on and they're not the first
person to discover that you know
something's not working like my example
here's from Hillary for America is a
very dramatically growing organization
and in June 2016 we decided to redo all
of our alerts we had been given a bunch
of alerts from the ground work which is
an organization we were working with
plus we had written a bunch and we had
changed as an organization greatly we
used in the summer of 2015 we were like
six people and by the summer of 2016 or
2015 to 2016 we were like 60 or 70 maybe
80 engineers and while the alerts were
great they were waking us up probably
two or three times a week when we didn't
need to be and firing a lot throughout
the day for things that weren't actual
issues and you know we were now the
Democratic nominee for or for the
Democratic Party and so we had much
different concerns than we did the
previous year so we started documenting
all of our existing alerts and we wrote
down a doc we had
by then for SOE ops people inside of H
FA and we wrote down a doc of like these
are the rules of how we're going to
evaluate into our three buckets which
are wake me up send a message on slack
or just make sure we have a graph and we
went through that we broke up our one
hundred some-odd alerts that we had
among the team and then we came back and
discussed each alert and made sure that
like the suggested bucket by the person
who went through that alert worked
we went from pages being about 30%
actionable to about 85% actionable and I
started sleeping a lot better which I
was a huge fan of we explicitly left
some noisy alerts in because that's what
our business needed we had a few
occasions where 404s would spike on our
site because people would link to URLs
that didn't exist either due to just you
know late night communication someone
missed a step in a checklist or people
that aren't associated with the campaign
making up urals and so we needed to
figure out like pretty much all in all
cases we'd wanted to be woken up for
that and that tended to be a very noisy
alert as an example but for the most
part we slept a lot better pyramid next
step is post mortems we've had incidents
and now we need to you know go over what
the incident was and try to make
ourselves better the whole point of post
mortems in my mind is the document an
outage and discuss them you you know
often something you hear is will there
be a post mortem and I'm a big proponent
of if someone asks the answer is yes to
also explain this picture this is my
post mortem of a breakfast sandwich it
was delicious
the communication aspect of post mortem
the only reason a post mortem exists is
to communicate so there's a lot here but
right you're writing a doc document for
future reference you're communicating
with people you haven't met yet you you
know very possibly may never work with
but you're trying to document everything
that happened and what you know what
what went down and how you fixed it and
why you made your decisions appoint us
to write a document that communicates
stall with all parties associated with
your business can like your do you have
a customer service team can they
understand that so they can communicate
with external customers can do you have
other engineering teams can they
understand it so that they can make not
make similar mistakes can your boss
understand it so they know what you're
doing all day
those sorts of things example comes from
when I was working on Google compute
engine there were a lot outages in 2013
2013 was the year Google was computing
are changing Google compute engine from
being a sort of beta service
she'd been launched in June of 2012 to
the external world to December of 2013
when it opened it up to the full public
and so there were just a lot of outages
there were a lot about six different
product teams and one essary team and we
were running into the issue where
escalation chains weren't working so
people would have outages and not tell
someone and then another team would
notice the outage because they were
dependent on it and then they would have
an outage and there was no like
collaboration going on and then also
people would break for similar reasons
like a store the storage team would
break for one reason and then the
networking team would break for this a
very similar reason so we started doing
two things for the most part we spent we
brought everyone into a biweekly meeting
force purely on communication is get
everyone into the same room at the very
least all of the technical leads
site reliability engineers the product
managers and see your leadership to know
like this is what you should be telling
the people under you of like how we
communicate how we do post mortems and
the types of outages that we're having
across our different sub teams
and then we would also bring in usually
the engineers of associated with the
actual outage and then share the
post-mortems
widely because this was also a
distributed team we had engineers mainly
in Seattle but also in San Francisco
Mountain View and a few in New York and
Dublin
next up is testing and releasing so
we've sort of dealt with the immediate
fires right like the monitoring was to
make sure we know what's currently going
on or has gone on recently incident
responses to respond to things that we
discover in our monitoring post post
mortems to go over those incidents have
just happened so now we can start
looking forward and usually the way that
engineering teams move forward is by
writing code and releasing it
testing releasing is like my favorite
area for automation because there's a
lot you can do to sort of improve
developers lives oftentimes people look
at like how long their build takes or
how long their test run takes and
there's many ways that there's a reason
like there's an entire release
engineering field into making this
faster but it's very dependent on your
team I think more so than any of the
other categories because every team
writes software so differently depending
on your stack depending on your
environment that you're supplying it to
but the overall key is improve people's
lives by catching bugs and other issues
before they're you know available to
every single user that uses your product
so conversations that you can start
having around testing releasing testing
and releasing our tests being written do
tests actually test how customers use
your product how often does your team
want to release like can you release
without an outage does that matter to
your organization what will happen to
the service when you release these are
all sorts of things that sort of
thinking about is because often times
you know people just write a slew of
unit tests and like yeah the codes
tested
you have to have those sessions with the
you know with the engineers that you're
working with two quick stories around
this mainly because I've personally made
both of these mistakes the first
engineer I worked with at Hillary for
America and Amy hails Amy
saved the day basically by automating
our fastly config vastly is a CDN
service and they let you push varnish
config straight to them so you can write
VCL and send it up and as long as it
likes compiles you're good to go it's
live on all of their edge notes and we
were running into the problem where a we
had a different environment like a
different config and both dev our
development environment in our
production environment and also we
weren't really testing things so Amy
automated our testing across all of our
systems to a make sure our varnish
compiles and it met like a basic set of
tests and then she also automated the
deployment so that anything that got
deployed dev also got deployed to prod
and vice-versa so we had a consistent
config across both environments and
considering that she did this in June or
July and from there for those of you
follow the u.s. political elections our
presidential election cycle like July is
like a calm moment with lots of people
talking and then you sort of keep going
crazy from there the next is an engineer
named bill at Google he was sort of my
main code reviewer on a project I work
on called the Google Cloud status and I
wrote some very basic unit tests and my
build would just be green I was like
Bill it's just auto deploy hungry like
it'll be great like every time you
review my code or press submit and
and why five minutes later it'll be
running for everyone and it'll be
amazing and I wanted this because it
would allow me to develop faster and
since this was sort of a side project to
not my like normal day gig I want it to
you know use that those like you know
thirty minutes here and there that I got
to work on it to actually you know
quickly iterate on something bill said
no because bill is a santur person that
I am and you know Bill pointed out that
you don't based off of the user the unit
tests I didn't actually know if the code
was working and he actually wrote a unit
test for me that a lot like basically
this whole site was broken but the tests
were all green as just an example to
prove that I was wrong which was nice
and it sort of just reminded me that I
didn't actually know how people are
going to be using this because right now
my internal customers were basically me
and so we started walking through and
actually doing user tests and starting
writing up integration tests and so then
we had integration tests that turned
green so that we could automate
deployment to get it out there it was
nice because we had also meant to do
user tests at some point so it like
forced our hand
so thanks bill didi alright so testy
releasing we sort of know what the
impact of our changes is because we're
monitoring our system and we're also we
know when we're testing or we know when
we're releasing things the next sort of
thing is to figure out how we're going
to grow over time
soften called capacity planning
graph of growth of cost over time but
the idea of capacity planning is a plan
for infrastructure growth it's easy to
ignore now that like a large number of
web companies run on other people's
computers but it's still something you
have to think about you can help your
business out a lot by figuring out the
costs of what your infrastructure how
your infrastructure is going to grow if
you know you know the next year like
give or take where it's going to cost
this $20,000 that's a lot different than
you know five thousand dollars or a
million dollars or whatever your scale
is it also helps your engineers think
about how they're going to engineer
things and design you know an architect
if you're you know if you're saying we
need to stick to only growing our
cluster by 10 machines their
infrastructure decisions will hopefully
be different then like yeah you can add
whatever you want and it's just
something to think about the
communication is basically you know the
first step is how much money you have in
some cases you don't have a real budget
I've worked at places you know like
Google where there's someone out there
managing a budget but you know your
capacity planning for the most part is
not there yet you know Google Offers for
example for a long time we weren't
thinking about that it's like oh we're
just going to push this feature and
doesn't really matter how it affects
things but working at a small business
when we were an engineering team of six
it punched like you know $50 was dinner
for the whole team and you know that's
like a so there was a lot of money
because we were you know like
20-something and how much does the
business expect to grow over the next
time period and does that match with
your plans
you know if the business is expecting
for you to double your number of users
over the next six months are you do you
have the money to actually scale to meet
that and are you making the engineering
shoes decisions to meet that
justyou need to have those conversations
early but only early enough that you
actually have the data to support what
you're going to do example of this from
Hillary for America is a piece of
software called pogo stick pogo stick
was built by Alex Burke she built a tool
that was a URL shortener for tracking
email metrics basically when people sent
emails political campaigns send a lot of
emails at least in the u.s. so it would
get large sprites of traffic because
people get this email that's like
Hillary Clinton wants you to donate as
much money as you possibly can to us so
that we can like you know keep the
lights on and she can win and so that
would cause a lot of spikes of traffic
to as people click these links and so we
would want monitor for these spikes
these spikes would grow over time as
people signed up for our email lists so
as the list grew the email team would
reach out to Alex and basically be like
hey you know this week were planning X
number of sends which is an increase
from last week and like our email list
has tripled in size or something like
that completely arbitrary metrics and
she would then you know decide like do
how much of that growth are we prepared
for that growth and she had access to
all of the metrics and she had built a
dashboard that met her her needs
explained us how the system was working
and you know sometimes you'd be like
well our last send which was half of
this you know used 50 percent of our CPU
or something like that so if we double
it and last time we doubled we saw a
similar CPU jump but we should increase
the number of cores we have or something
like that she would then reach out to
the ops team saying like hey I'm going
to you know I'm going to need more
machines and so we didn't be able to
have this sort of conversational loop
but she also since like it was basically
based on user signup she didn't have be
able to build as much of a plan as sort
of a be able to react
relatively quickly to say like hey we
need to grow this amount because over
the past you know day we've had to react
in this way so she had the tools to
basically initiate the conversation so I
didn't have to do anything until you
know Alex sent me a PR or said like I'm
going to do this is that okay and be
like yeah fine like spin up you know for
four more and for excels or whatever she
needed to do which was really great both
removing you know lowering the amount of
energy we had to focus on each
individual application but also letting
her plan for capacity over time based
off of the conversation she was
happening with the email team so the
next is I guess my favorite topic which
is development I love the phrase
automate yourself out of a job
I think like that's why I like got
really attracted yessiree is like I can
work on tools so that I don't have to do
the same thing in six months it's my
memory is horrible and like I'll just
often forget how things work and so if I
oughta mated it I really don't have to
worry about it
and I have said that quote before and
and also quit because of that so I feel
like I'm at least sticking to my mantra
for whatever that's worth so I this is
another like another commerce
communication thing is how every I think
most software engineers feel free to
correct me if I'm wrong after the talk
but most of us want to build the cool
thing and that has a cost to it both
your time and your energy there are a
lot of things in most organizations I've
worked at there's been one essary to
every ten to twelve developers and
that's like that's a lot of incoming
problems and things that think about of
just like those you know 10 to 12 people
is it worth like me basically ignoring
those people for a month to build the
next cool tool that I think well will
make everyone's lives
better versus what's out there you know
can I use terraform instead of writing
my own you know change config can I use
a hosted monitoring system besides
instead of like inventing my you know my
own time series database or whatever or
is there like a script that does this
thing instead of spending the 30 minutes
to write it these are conversations you
have to have with yourself and your team
knowing their priorities you know I go
to the sprint planning meeting my
current job of all of our engineers I go
to both of them and like I basically
lose my Wednesday to it because you know
there's lots of planning and people
talking about all the work that they're
doing but it lets me know like these are
the priorities of the teams that I'm
supporting and what they're doing and
whether or not I can like take the time
to go work on the tools that I want to
work on or if I need to focus on making
sure that they can be successful at
their jobs yeah and then I think the
other aspect of this is how are other
companies solving these problems essary
isn't done in a vacuum as I've sort of
been mentioning over and over is you
need to have conversations but not
necessarily always within your company
you know networking I have a coffee with
someone who works at another startup
just down the street and we talk about
all sorts of like engineering problems
he's been harping on me for weeks for
not checking out this new monitoring
system they thinks it's gonna solve all
my problems
but it's it's a good way to share you
know what other people are doing and how
they're solving their problems
you know this conference and many others
are great to actually figure out like
you know how do we how can we solve
these problems in ways that you know
either save us time or energy or money
and then this is my personal problem is
I often think that things are much
larger problems than most other people
you know I think we all have our like
little pet peeves on things that I that
you want to fix right now and really
they can sit for six months often or you
know at least a day I highly recommend
stepping back before you know diving
into your neck
like coding projects and being like do
we actually need to solve this right now
I've definitely lost a few days I've
been like that was a waste of time
BAE yeah examples these are also from
Hillary for America just two tools that
I personally bought are built they were
built like in August and September
because that was when you know I felt
that we had the other layers sort of
taken care of first was edge party once
all of our deployment to fastly was
automated we were running into the
problem that like a lot of people wanted
to add redirects across applications in
a sort of weird way so we moved all that
to basically a slack bot and an API that
people could use so that anyone could
write redirects in slack assuming they
were like part of a whitelisted group of
users and then Pokemon we wanted to test
every single URL because we thought it
was a good idea and Pingdom got
expensive so we turned off our Pingdom
account and basically like just never
stop tossing us for ourselves for the
next three months but it provided
response metrics for both time and I
guess like validity of all of our URLs
which was really helpful for us
measuring growth over time and yeah they
were both built at the last quarter of
the campaign you can now talk about I
guess an area which I feel like s3 teams
at much larger companies realize and it
seems to be lost on sort of operations
and necessary groups at smaller
organizations which is user experience
when you like often talk I think I think
Google personally like talks a lot about
how SRA is a customer service role and
that's because I think their
organization has gone with a point where
they've solved all of their other
problems I guess but the point is for
all of this is to make sure your users
have a good experience
system both in terms of like can they
load the page etc and we as people who
tend to focus on the infrastructure we
have a lot of effect on that because you
know sure there's the feature aspect but
how those features are delivered to our
users can be like a make or break
situation if your page takes you know
five seconds to load before it's you can
click on anything it's a much different
experience than you know the
instantaneous sort of flash of you know
Twitter or Google or something like that
and this is sort of the conversation you
need to have and there's hopefully
someone who knows the answer to these
questions your business but I've also
been in positions where no one's been
able to have just like figure that out
yet because you know you would just
started monitoring or something like
that
so how are your users experienced your
product you know are they coming in
mobile or they you know doing it all at
once is it like they stay on the page
for 20 minutes or you know do they only
come when they you send them an email
and they click a link where users
experience your product you know are all
of your customers in New Zealand like
you have much different networking
latency and New Zealand to like Virginia
versus like New York to Virginia and
when are your users experience your
product my like classic example of this
now is once again Hillary for America
because most of our users were in the US
and like you could follow the us like
diurnal cycle cycle Google compute
engine is running VMs for people all
over the world and like does not have
that like a night off time a way that
I've purchased a slightly mentioned this
product or thing earlier in the talk
which is status cloud cool calm before
the product had launched this was our
before compute engine launch this was
something I think yessiree team was
starting to think about but no one else
had really gotten around to it because I
was mentioning in 2013 like people are
still kind of
fractured and working as independent sub
teams and I sort of went out like who's
going to build status tut
cloud.google.com and first of all like
at the time the technical infrastructure
organization said Google didn't have any
designers or like some anyone thinking
about that so there was no like person
that could even like start marking this
out and then also most of the other sub
teams were like working to make sure
that they had all of the features that
they needed to launch in like June I as
like a relatively new SOE like had some
bandwidth so we started basically
building up the thing and the whole like
building actual website took you know in
reality like two months of time but the
next two years were spent talking to
engineers product teams customer service
teams you know deciding like who would
actually update this thing how often
does it get updated I'm personally very
proud of that because now I think
Google's post-mortems and and status
updates are some of the best in the
industry
but that takes a lot of time to make
sure that like people know this thing
exists and that they can talk together
and that improves your experience
because as someone who's like using one
of the cloud services now you can go and
like my websites down is at Google's
fault and if the answer is yes hopefully
there's like a little yellow or red dot
on the screen it's not a guarantee but
it's a if it's constantly responding it
the way that you expect them to be
telling the truth then you can at least
start focusing on your own service and
you know not blame other people and
actually have like a reasonable answer
to why something's not working so those
are pyramid it's again I you know hope
that it came across that you know
communication is really important in all
of these and that you can apply it to
many different levels of companies
whether you're like six people or you
know 70,000 please talk to people
I have these slides will be put up
somewhere but there's lots of references
in future reading there's a long lots of
stuff I'll be here standing over here
for questions if you don't feel
comfortable talking in person you can
DME I go on Twitter or that's my email
address thank you so much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>