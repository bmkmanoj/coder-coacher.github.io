<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a Chatbot w/ an API - ML for Hackers #9 | Coder Coacher - Coaching Coders</title><meta content="Build a Chatbot w/ an API - ML for Hackers #9 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Siraj-Raval/">Siraj Raval</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a Chatbot w/ an API - ML for Hackers #9</b></h2><h5 class="post__date">2016-06-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/c6R3EjMQ7H0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">directions of the nearest water source
watch zero geology he knows the way
hello world welcome to Terra geology in
today's episode we're gonna build a
chatbot with an API in a previous
episode we talked about how to build a
generative model chatbot by training it
on your own data set with no hard-coded
responses whatsoever this time we're
gonna go the API route because let's
face it it is the year of the chat BOTS
in the past few months countless
companies have released chat BOTS api's
so that you can integrate it with their
service chat BOTS are like the new apps
if you think of a startup idea there's
probably an app for it but no chat BOTS
we're going to build a flower delivery
chat bot so I need a little API shopping
and there were four services that really
stood out to me with nuance
sirikit and api let's talk about the
pros and cons of each of them wit is a
chat bot API that was acquired by
Facebook's they've got the benefit of
the Facebook marketing machine behind
them it's free so you can spend your
money on things that matter speech
recognition is included the thing I
really like about this service was the
use of open instances if someone else
designs a bot you can just fork it and
use that fork as your new chat bot
backend but the problem is when I
attempted to build a bot with this it
was super annoying and bugging the
documentation isn't dense enough so
there's a lot of ambiguity I got
frustrated because there was no option
to create synonyms for entities and I
also just didn't have time to learn how
the story model worked more time for
Minecraft another service I looked at
was nuance mix you guys remember Dragon
NaturallySpeaking from back in the day
yeah these guys made that so they
definitely have speech recognition as a
capability right out of the box and it
seems like they really pay attention to
that feature because they have a bunch
of spec papers on their site detailing
their speech recognition technology 40
different languages are supported in 80
different text-to-speech voices are
available reading their Docs they use
terms like literals and concepts that
add another layer of abstraction or
doesn't seem necessary I tried to sign
up and they say they get back to me in
two business days ain't nobody got time
for that
nuance has been known to stick to big
enterprise deals if you're an
independent dev probably not the best
fit then this Sirikit Apple announced at
WWDC this year that they open up Siri to
third-party developers the extensions
finally it's got great documentation but
that's really the only Pro I found by
the way WWDC this year Apple what though
Siri kit is limited to just six
different app types so you can't tell
her to make you Soylent just yet
and those limitations are already baked
into the API with functions like in book
restaurant intent and it only works with
Apple devices
so yeah the garden is quite walled
finally there's a PRA I this was the
easiest service for me to use I built a
pretty useful chap off with this in just
two hours the documentation and
interface are just way easier to
understand and any other service I found
it's got this integrations feature where
you literally just flip a switch and
it'll integrate with your service
provider of choice be that slack or
Tullio you just build your bot once and
then deploy to whichever platform you
want also they have the most client
libraries and SDKs I found for a chatbot
API that makes me a very happy day
speech recognition functionality is
built into the SDKs the only con is that
while it is free as you scale there are
pricing tiers but hey if I were going to
build a production grade service quality
is a number one metric I'd be optimizing
for and it seems API to AI is leading
the charge so let's build this baby
we're going to build a flower delivery
chat bot using API the eyes console in a
Python client we'll start by writing up
an ideal conversation with our bot the
user let's the bot know they are
interested in buying flowers then
specifies the type of flowers followed
by the color and then the address they'd
like it to be delivered to they can exit
the conversation or ask for more flowers
in the process loops we need to codify
this conversation and the a piata AI
console makes it relatively simple to do
this will create a new agent click on
domain and turn on small talk-- now our
bot is already capable of very basic
conversation then we'll see the intense
and entities tab an entity is a model
object that you refer to in your
conversation at some point so we want
three entities flower color and address
we'll create the flower entity we'll
define three synonyms these will be the
types of flowers we want we'll do the
same for color then for address
it's cool now that we have our entities
let's build our intents an intent is an
abstraction of a specific request a user
makes which then maps it to an action
and a speech response we'll create our
first intent and call it proposal we
want to think of a couple of possible
statements a user can say the system
will be able to recognize not just these
hand-coded possible statements but
statements that are worded differently
and have the same meaning once the
system has recognized what the user has
said it can perform an action an action
is an event that fires once an intent
has been recognized will then type out
our speech response and this will fire
when it recognizes the intent of the
user statement finally we'll add an
output context context or how the system
keeps track of what is being said it's
what makes the bot conversational we
know that after this proposal intent we
want our chat bot to then ask what type
of flowers so we'll set the output
context to our next intent called type
specification for type specification our
output context is color specification we
are looking for a one-word answer from
the user at specifies type our system
will detect the word if it's of type
flower and performing yet undefined
action will call save flower type we'll
add in our speech response asking for
the color and do the same for color
specification the output context is
address specification the user will say
a one-word answer which will determine
to be an entity of type color will
perform the save color action and ask
for the address lastly in address
specification write out an example
address and it will recognize it of type
address by using the address system and
it will perform the create order action
and will use the address variable name
to repeat the address back to the user
we can set the output context act to the
proposal in case the user wants to
continue buying flowers now that we have
our back-end setup let's write our
client in Python well import our
dependencies a JSON parser and the API
dot a ipython wrapper then initialize
our agent then create functions for each
of our actions leave these blank but you
can add any kind of functionality you'd
like then in our main method will create
a while loop and retrieve the user input
from the command line then post it to
the agent and retrieve the JSON response
the parse the JSON to display the bots
reply if we detect an action will fire
one of our action helper methods hey
what's up I want flowers tulips well
color blue one infinite loop order
created I totally get why everybody is
raving about this service on Hacker News
check out the links down below please
subscribe for more ml videos I've got to
go fix a race condition so thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>