<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Smart Blinds using Facial Detection | Coder Coacher - Coaching Coders</title><meta content="How to Make Smart Blinds using Facial Detection - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Siraj-Raval/">Siraj Raval</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Smart Blinds using Facial Detection</b></h2><h5 class="post__date">2017-04-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YKtbO6iW9-Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello world it's Suraj and I'm here with
my friend Eitan hey I'm a time I make
interactive multimedia art and we're
kind of Robotics projects together yeah
so I had the idea for a hardware video
and it's on came to mind so anytime you
want to say what the project for sure so
it's this idea that I've been thinking
about for a while how the internet is
very voyeuristic and we're constantly
sort of looking through our screens at
other people but what happens is now the
screen looks back we're going to take a
screen with a camera and put it behind
the venetian blind and then if the
camera picks up a face the blinds will
close and then as the blinds close they
won't see your face once a little open
so what happens if our screen is look
back at us instead of us just looking
through our screens yeah this is going
to be awesome so we're going to show you
the hardware first and then the code so
shall we get started - yeah good there's
the Raspberry Pi we're going to use
photos so we have the Raspberry Pi
camera 8 megapixels alright we have a
case for the camera also so it doesn't
get ruined nice then we have this board
over here which is a which is going to
be a hat we put on top of the Raspberry
Pi which will let us control the servos
and the servos or over here I got an
extra one just in case because I didn't
want to I didn't want to messed up while
we're doing it and then finally here is
the power supply for the servos I'm
going to configure the the operating
system to be able to talk to this
particular display so you can put a
special config dot text file on the chip
in a particular directory and then when
you boot up the Raspberry Pi this
display will work and not just display a
bunch of like random white lines okay so
we the new config on the SD card and
we're going to put it into the into the
best berry pie and then now when we plug
in the Raspberry Pi with the screen over
here it should
turn-ons piece of work work oh there we
go okay
so I have everything working and Mouse's
working and my keyboard should be
working in a second so we get open up
the terminal and start start typing
alive so right here we have the
integrated circuit which will let us
control these servos and why this is
important is it's a PWM PWM controller
so it's for pulse width modulation so
the servo which is over here is
controlled via a series of pulses from
the from the computer or the integrated
circuit the problem is raspberry PI's
integrated circuit the Raspberry Pi is
GPIO output which are these pins over
here which send signals to periphery
devices there's only one I think that
has the precision that we need to
control the servo that we have so
therefore they created this hat which
just as a sort of which is a device
which will sit on top of the Raspberry
Pi once we solder it in it will sort of
sit right over here and once and what
this hat allows us to do is have much
more precise control through a series of
libraries on the Raspberry Pi to
actually control the servo as we desire
so once we have this working we'll be
able to and these are designs not in
just yet once we have this working we'll
be able to take the input from the
camera when it detects a face and sends
an output signal over the GPIO pins
through this hat to control the servo
how we want adds it and we'll turn the
blind accordingly now we're soldering in
the connections - that's very fine
I'm going to look at that to make sure I
don't like to solder any of the pins
together because that would mess it up
just making sure that all the soldering
is done well so we'll put these
characters in this way and then we'll
show you once once we solder it in we'll
be able to take the servo and just slot
it right on top slide it right on top of
these connectors and we should be good
to go so we're taking the Raspberry Pi
camera and now we're going to put it
inside of the Raspberry Pi case just to
protect it and make sure that when we
sew it gives us a nice clean servant
surface on the back to be able to stick
it to the wall perfect so just pop out
the case I don't want to break it up
there we go
there we go so on the camera there's a
little blue cabbage pull it off so we
could actually it's the camera we don't
ruin the camera so the camera could see
out slide it in over these little spokes
and the buttons so it sort of sticks
nicely and then find the the and then I
think other than oh yeah the divot is in
here so just sort of this the tab which
which powers the camera sits in nicely
and we slip on the cover and and that's
it there it is the client camera is
protected so now we can play around with
it and note it to worry about bumping
into it in any weird way and we'll be
able to install it efficiently so now
we're going to install the camera
through the Hat these we finished all
the soldering we've done our single set
of output pins and by this so we have to
slide the camera right through here so
we don't so we don't and we didn't want
to do a ball soldering so we didn't want
to solder the camera so we want the blue
side of the of the of the camera facing
the black side of the of the Raspberry
Pi the
the connecting pins over here go up
against the connecting pins on the
inside of this connection all we do is
we slide it in gently
and it should just slip right into place
clip in there it goes
so now now the camera is in securely so
if you pull on it it shouldn't slide out
and we could add now I'm going to add
back the the top of the of the Raspberry
Pi case we're sort of kids right over
there first thing so it slides in nicely
and this guy this top piece also slides
in really really nicely and once once
after I've attached all the screws this
camera this hat will slide in and it
will attach into the GPIO pins on the
tie it should just slip in really nicely
up and there clicks in and now the Hat
is attached and it's not not going
anywhere and we'll be able to control it
from the Raspberry Pi the question now
that I'm with Suraj about is like how do
we install OpenCV on the Raspberry Pi
because we're going to need to use
OpenCV to determine if we see a face or
not the problem I pad is that OpenCV
three is there's no precompiled binary
on Debian so it's like such a pain to
compile it from source especially on
this Raspberry Pi it's a relatively slow
it's quick but compared to the original
Raspberry Pi but still relatively slow
computers so I think what we're going to
do is we're going to install an older
version of OpenCV so that we could just
get it precompiled and sort of work in
Python 2 instead of Python 3 even though
that's what I would love to do but so
Suraj has been videoing me so I'm going
to video Suraj back video section there
we go that oh my god camera is working
so there are two modules you'll need to
install onto the Raspberry Pi open CV
will let the camera detect faces and I
GPIO will control the servos and then
for the code will look at main dot pi so
other than open CV and numpy we've got
two helper libraries here I video stream
will read in our video stream and blinds
will open and close the blind by issuing
servo commands so named window will
initialize the frame that we can get the
images from and then we can start the
content of the video stream using the
start method of our helper class then
we'll initialize our blinds object which
we use to open and close our blinds in a
second and in this while statement we
can continuously get the images from our
video stream and we'll use the EM show
function of open CV to get the image
from the frame and then using the
redirects function we can detect if
there's a face for not and store that in
the rekts variable if the rect is not
empty that means that we've detected a
face so the blind can close else they
can open close all what we're doing now
is I'm up to the stage where I want to
attach the blind to my wall so I'm just
going to put it right it right here on
the wall nothing special because the
screen is going to be behind it and in
order to do this we're going to use
these handy mounts that come with the
blind we have the set of venetian blinds
nailed to my wall correctly on the studs
so things don't fall down then up here
we have the servo which is sort of
gently attached to the turning motor the
turning mechanism of the blind so in the
servo turns will turn the blinds
mechanism instead of the standard like
stick that we turn then attached to the
servo it goes directly into the
breadboard so I broke the little the hat
I had last time and what this is is just
the breadboard which has the 5 volt
connection connected to the red
servo line the ground connection to the
Browns servo line
the data connection to the 18th pin on
the on the Raspberry Pi and this is
bachelors the pin I've chosen to do the
pulse width modulation the PCM output on
which will then control the server
accordingly and I'm using the pig the PI
PG i/o library which works really well
it must be do effective pulse width
modulation then that connects to
Raspberry Pi with which which controls
both the camera which will look at us
when we're in the frame and the
Raspberry Pi screen we will see
ourselves and our picture now we'll
close the blinds and get everything
working gently very very exciting so
we've got to make sure all the blinds
are correct sweet cool so now they're
closed and we'll just run the the main
program so OpenCV should start working
and my face is on the screen and it
doesn't recognize me just yet but if I
take a step back camera now sees me and
the blinds closed now it won't sing
anymore I mix it blinds open so now my
face is here so it closes again so the
top knee will go back and forth blinds
opening and closing while I stand in the
frame if we if I step out of the frame
now both Suraj and I are outside of the
frame the blinds should stay open
because there's no there's no face but
if we peek in they close yeah it's
working please subscribe and for now
we've got to clean up some hardware so
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>