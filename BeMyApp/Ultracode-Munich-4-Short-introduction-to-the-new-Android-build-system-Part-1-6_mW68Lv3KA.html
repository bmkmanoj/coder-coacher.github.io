<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Ultracode Munich #4] Short introduction to the new Android build system - Part 1 | Coder Coacher - Coaching Coders</title><meta content="[Ultracode Munich #4] Short introduction to the new Android build system - Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/BeMyApp/">BeMyApp</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Ultracode Munich #4] Short introduction to the new Android build system - Part 1</b></h2><h5 class="post__date">2013-11-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6_mW68Lv3KA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">and we're doing that then it will be
installed in what was named director
directory if we packaging it put it with
maple install then there's the packaging
which is basically okay for anyone can
purchase of course here we can specify
our dependencies and we don't need
anything by now we can just start with
the platform itself so we get the
platform as a dependency here which we
didn't need when we were using art but I
was just hard coded this one is quite
flexible so we can change the platform
whirring Bell here and it's really easy
and then we got the planning itself
which we can configure down there and as
you can see I can change the assets
directory I can change a resource
directory sauce director is also
possible and I can change the platform
version everyone so this is not that
time and this is a real bomb fire from a
sample project which i was using at
first okay so this was the tennis ball
for let's say a few years now but with
the google i/o
and google introduced a new build system
which is using the third good system on
the market which is great and of course
they did it with a greater plugin
greater is based on grew beyond a groovy
psl so you you have no more velocity I
think it also got a built-in dependency
management systems of this is also quite
flexible and it's using standard Java
patterns so you don't have this source
directory where you can put your source
and a Tesla recruiter could put your
test but it's using as a standard Java
wait so we're putting our source and
sauce my java and putting our earthly so
test job i were putting our
instrumentation source intro instrument
test and melbourne java but if you don't
want to do this it's flexible enough to
change just want to stick to our out way
this is possible awesome yeah that's
there are some more plugins coming with
it so we got a unit test plug in which
you can use
and which we can just apply it if you
apply it you can just do our unit tests
instrumentation tests for the first time
are also within the same project so we
don't have to implement another test
project this is really a great thing
that comes with it new good system so
let's see you one of the first basic
examples computed so here up there we
just configure our build script then we
have the dependencies which is basically
we have to load the android plug-in
itself from main central because we got
here then we can just apply the android
plug-in and this one uses all the
switches which are located down here so
here we just configured all the decay
versions but it could do more around
here and then we got some tendencies
which we don't need you can see we have
two dependencies here one from both
group and 146 application itself and
then that's the android party and that's
it so no more clutter and everything's
arranged in a pretty nice way so this is
my opinion great new development and it
even better because with it who be
introduced the android studio so before
we had a
listen ta keep pluggin but this one is a
really cool way to implement your
applications so the basic facts are it's
based on intelligent which is way better
than eclipse of course and and then it's
also ready to use so you don't have to
download eclipse first then download the
adt plugin then download some extra
plugins everything's built in you can
still add some more plugins if you like
but the most important ones are already
installed yes there's also some
shortcuts so the apt and sdk manager are
at hand with you like i can show you
where we can just start the AVN sdk
manager with these buttons up here and
it also brings its own sdk version with
it so you don't have to install it for
yourself and and what's even better
there's out-of-the-box support for the
legal system so you can start using the
new build system today and you don't
have to rely on stuff like whim for
programming you can use an a real ID for
it and and what's even better is that
there is a possibility to migrate out
projects old applications so if you've
just got an old app which is using
and a half its application then you can
afford it and bring it to the new easy
three easily bring it to the new billing
system if it's not to customize but
that's a really great thing and I think
that's okay okay so you're not about
build system itself next thing I'm going
to talk about is this robert juice so
what is rogers we got this long down
here which is downloaded for me that
page doesn't show anything so robot
chips basically is the dependency
injection container so if years never
got into touch with dependency injection
the next few sections will be more
confusing it's an implementation of the
jsr 330 so the java requests for
dependency injection and it's a form of
the famous juice framework for the jdk
so it doesn't only run on is also
everything you're developing does not
your Android you can easily pop your
code to the change k also and it's easy
to configure and to use so it's quite a
simple
a limitation of this jsf so who hasn't
used dependency injection before okay
whew for those of you I'm gonna be the
rotten introduction the basic principle
of dependency injection or inversion of
control the bigger and phrase four it is
instead of taking so here we are taking
our location image any entree measure so
basically the last loads getting system
service out of some system and puts it
in its own location manager app arrival
instead of this we want to be given the
location manager so we just put in a
detect here and robo juice the system is
taking care of it so we don't have to
take our objects anymore we are giving
them and these are this is the most
important principle of di so in short
it's never let a class created objects
for itself except for a really simple
object
and it's that it should be passed
through the objects and the provider we
do is we got a lot of experience and is
experienced or something like that with
a given we've taken a chance on itself
well it's because we can change the
exchange the objects isn't it so we can
put in other objects where the
placeholders for a month so we can pass
and test doubles for a unit test for
example or we can exchange real
objective so if we got an interface you
can easily exchange this implementation
with another implementations this way so
all that dependency injection is about
is just cuddling so we're trying to
bring this coupling to life yeah and
that's the basic parts of it how do you
do it now and using robo juice well
basically yells close it so
couple chart before you had put it in
macro we have yeah Kathleen jackets yeah
this reason this is a java annotation
and what Rob juice basically does is it
searches for these annotations and then
uses some reflection magic to put the
objects in that it thinks belong there
and so basically all it's about is just
as finding the places where is that
objective annotations are and then
putting the right objects which means
calling get system service if we are in
production state and normally in
directly after the constructors have
worked but yeah directly after
okay so how can you inject this yeah you
can also do it with the Constructors or
you can inject the constructor itself so
we don't have to call the instructor
anymore you can a constructor anymore
you can just put the an eject annotation
here put in their location manager in
this case or anything else you like and
then assign it to feel you want to do
you can inject into fields itself so we
can just put the ad inject annotation at
the field or you can use the setup also
a proper gear is fine for it you can
just put the ad inject here yeah so what
can be ejected yeah well there's a lot
of objects they can be checked first of
all this sirach constructor objects so
and every time we got an object that as
a constructor we can directly call it we
can inject it you can also inject all
the objects that I'll NH by Robert ruse
itself so if we got an ad inject at an
object we can inject this one awesome we
can eject views so this is really cool
because and before we had to find the
news
so my view by idea blah blah blah and
now we can just put this annotation on
there now oncreate method gets a lot
less resources are as possible so
instead of using at inject you because
you can use that eject resource here and
just provide the IES we good up there
and in this case it's a rollable body
inject every resource that we have and
there's also a lot of stunts then at
Android objects and most of all there's
all kinds of managers like patient
manager the asset manager blah blah blah
the NAM manager notification manager so
everything that this its manager I like
can be injected and as always yeah and
as always a Bible that can be injected
okay this yeah it was a better okay no
okay so how can you enable your
application to do some and the
dependency injection you just have to
implement the robot dance so instead of
using the standard classes and you just
extend the robot ones so there's a robot
activity instead of an activity there's
a robust activity there's a service
fragment na ba for everything that we
got we got a robo implementation of it
and with it dependency injection is done
for free so what is if you
don't want all the objects created at
start up so I need some objects which
are dynamically created this was a real
problem for me at first so I need an
object at runtime this can be done using
providers so provider is basically just
an interface that has a get method but
if you implement it you can also inject
objects in this which I'm doing another
chick is injected and then within the
get nuts that we do the what you would
usually do so we calling you some object
pass in the injected objects and object
and then we can get dependencies out of
it and every time I call some optic
providers but get this one is invoked
and it you can get a new instance of it
and i'll have to say this is not done
every time but there's there's the
scoping thing i'll talk about scope of a
little bit later so if you're using a
singleton scope it's only provided one
time for you
application but I get to it okay if we
want to get even a little bit weird we
can also inject eject us so if we want
to get arbitrary objects out of our
context our robot roots context we can
just put the ad inject at an injector
and then we can use injector get
instance and where this injector get
instance we get the class an object of
the class we pass it and it's doing all
the magic behind the scenes so it's
injecting all the necessaries very stuff
in there so everything is done for you
but I wouldn't like you to just use the
injector because it's a little bit
redundant like I would say and so if you
can better do it without injecting
injectors don't do it if you have to
it's pretty nice but and maybe I was
wrong to tell me about it and yeah and
that's basically it everything else that
can be
can be done using configurations to do
some configuration you will just have to
extend the abstract module and then you
will have to override a configure method
and what can you do with in the
configuration you can bind an interface
to an elimination this is only necessary
if they are more than if there is more
than one implementation foreign entities
and if you bout it to a specific
implementation you can then easily
exchange it by just putting in the other
implementation here and you'll get the
other limitation objective you can also
bind providers to the classes they
provide so this is again for when you
have more than one provider everything
else comes out of the box and there's
also this thing with the scope so
basically we're gonna choose one
you did all the scope declaration down
here now you can do it at the class
itself you can put an at singleton
before the class and it becomes a
similar so it is only injected once or
you can inject a context signal which
means there is just provide one for
context so one activity service or
something like yeah and once you get
that you can register by putting a
resource and so the resources robotics
modules XML and you just have to put a
fully classified last better qualified
translate in there and all the modules
you specify there are registered that's
it so to sum it up what do you have to
do to integrate robot choose first of
all you have to put it in the
dependencies so the dependency section
that we saw before we can just pull in a
compile dependency for properties to dot
anything then you will just have to
extend the robot classes instead of
normal classes then you can inject your
dependency
the added check that eject you or
energetic resource and annotations then
you can configure module you don't have
to configure a module but if you need it
you can do it you can register the not
your man this is important if you have
and then you can start writing unit
tests so how do you write in the tests
this is what it is is going to talk
about okay I first I would like ready to
put our questions how many of you
already had some experience with angular
to go so we will go into some problems
you may get them i will talk about my
testing how many of you have to urge to
do some tests
the requirement the experience we have
so far we ask that you can order you to
testing and most of music don't test
their much develop certificate maybe
it's their experience you have a swim
the problem is interesting is that if
you are developing Java modern your
future budget for business purposes
don't use a unit 3 usually because
genuine for Assad has Thomas Edison
since seven years in drug testing if
you're talking about I know Jesse much
as possible by the Android system has
had to be done more has to be done with
genuine sweet this is a protest by which
now was removed listen you go systems
almost like a gang but still if you want
to do instrumented test or Android based
test you always have to use the emulator
or hook up a real device to run the test
it also test only run in the real
androids around and the program there is
that there is not there are something
like that or you started to bring in
some modern possibilities but it's much
they're so with this initial support and
that's really impressive so easy if
you're interested in Java and if I wanna
just like my reputation is it so
difficult and a lot of people so
concerned they were just looking into
the but what is the problem there and
why can't I run chase just locally like
I do when I'm just doing a java
development i have my separate test
sources directory and I protest in there
and I just play around press run tests
and which is fun very short time because
they compile and running the local
machine sewn or emulator no real device
needed and unfortunately if your status
bear and development it's not possible
just tell you why if you try to run
tests which you some kind of Android
functionality you will very quickly end
with this kind of rental exceptions that
just say stop the problem of the other
thing behind is that the SDK charts
which is usually used when developing on
your computer they are on this size but
they don't have any functionality of
angular that just look like in my
channels but they're in principle empty
and
I work around us and luckily people did
they develop robolectric which around
for 47 years now and this is the logo
from electric and I'll just would like
to take the opportunity to show you some
details of the use of electric or to
integrate it may be as I'm the new bit
system what is relatively in principle
some kind of weapon which works on top
of the Android SDK you to make Android
SDK somehow usable on your windows king
your mic or whatever you develop and to
use it it's just another dependency for
the approach so we can add it as the
dependency of photo juice and a crowd
course uses magic to an hero to run look
tests on top of the SDK channels and in
fortunately so that was a little change
going from version 12 rushing to and at
the moment it's that's quite a huge
framework base not to all edges of yet
complete but you can we run most of
things without doing anything and the
next slides i would like to show you
what do i get if i use your electric
very good things that just a running on
your local machine which means they are
very fast they don't need to start up
the emulator you don't need to look up a
device I could sing the air is you can
also test the project for example on
continuous integration system like
Jenkins of the need for that's very
difficult to decide on a manager you can
use of course current January for for
doing the testing so if you're used to
breakfast in uniform you don't have to
go take James 3 for testing and the next
good thing is that you can just use the
mocking framework like eternal which you
are used and only eligible
no need to turn down a new thing you can
also check your knowledge from there and
you can also go but sometimes you would
require to do instrumentation
fermentation test in special cases that
you're going to really want to have a
look at the behavior of the you high but
there are a lot of cases where you just
want to test functionality of classes
however how to calculate and this is the
application of just a local dentist in
your machine how do i even Rome electric
that's also quite easy not an easy
compound ro ro juice but luckily some
people already tried to integrate prob
electric into the new bit system and
that exists the low 0 episodes at is the
version of a test plugin so you add the
hell the dependency so the sense plugin
and language thank you then you add so
ya penzi here and add the line to apply
this plug into your project and then you
are at least for the great plant you are
done and what is the
what's waitin commander test it's just
an example and you have some test class
you have button at the test class we
have the annotation to set up the tester
and sanitation for a test method you
have some assertion inside that's what
you know from playing for testing the
only difference is what you see up here
you just run this test with a special
rubber liquid toscana which does all the
magical so if you see this it's also
very easy to just a copy existing Java
code and the test to an android device
people to just have those
the circus
so this is something that you don't find
very quickly when your google it that's
classy and just a little bit about the
basic concept the basic concept of
robolectric put the total shadow and
it's just a short example how these
shadows are used what you see in the
first night just normal Android code
which you have to use when you don't
inject the view so you'll find the view
by Eddie you have the idea of the New
Year passage to the tiger type which I
have to know and then the text view and
the problem there when you want to do
some tests it's difficult to to get the
text from text view because the texture
has no get method and robolectric has
the possibility to create a shadow
object of this text view which is just
for shadow text you you just put a row
in front and then you have this is
starting to be some kind of locking
ourselves and better access to object
properties you can ask the shadow text
view what is the text of this text you
and you can
right for example so i usually it is
also always running in the back after
special I'm ready you to testing how
this is method
hose
so this is the assertion is a special
feature which has developed over the
years that it's easily readable so
usually to remember testing former times
and had assertequals and you have two
values and was a certain of these values
are equal but the colonel devs you don't
know is what is the reference and what
you so what do I want to have were so
ready I change and therefore people
improve the system that you have this
type of assertion and principles is a
kind of measure stuff but I'm probably I
kind of explained in total here that
it's a little magic but so this is this
dependency or boots comes off j unit and
i think this is a matter static method
for improving our Empress Dowager and
Empress measures it's about standards
package are implementing these kind of
matches which are provided by j unit to
make magic staff here you can also if
you have a collection here you can also
observe that collection contains log on
somebody's to include toggle barriers
very precise tests we could talk about
this later on that's that's
and this is the implementation
robolectric it's it's not interesting at
the moment because this had to be done
in versions before too will you ready to
do this on your own sometimes in
virtually seismic to rob electric comes
with a lot of shadows for different
purposes and just what to take what you
can take with you the shadow always has
some kind of real object with it which
is right so the real object is contained
in the shadow and then accept more stuff
as it could do this original object
again for some basic concepts of her
electric to make Android testing
possible Rob electric also builds a full
application context so you can also
example it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>