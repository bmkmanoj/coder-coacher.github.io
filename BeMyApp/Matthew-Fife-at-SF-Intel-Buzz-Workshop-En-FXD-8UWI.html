<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Matthew Fife at SF Intel Buzz Workshop | Coder Coacher - Coaching Coders</title><meta content="Matthew Fife at SF Intel Buzz Workshop - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/BeMyApp/">BeMyApp</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Matthew Fife at SF Intel Buzz Workshop</b></h2><h5 class="post__date">2015-07-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/En-FXD-8UWI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Matt 5 i'm a developer on the
graphics performance analyzer tools in
the indie sweet and seth shy
also here today he's our technical
consulting engineer we both will be
available afterwards and giving demos
afterwards and answering questions so
we'll go ahead and move to our next page
so there's a lot of tools out there
today to help you as a developer intel
has its own set of native tools that can
help you optimize and get the most out
of your applications currently these
tools are all collected into the Intel
integrated native developer experience
or sometimes known as the indie sweet so
our tools are unique because we write
them to be aware of our special hardware
features of our platforms so they work
on wide variety of development platforms
and development environments and also
work on the whole host of range of GPU
and CPU are aware that we currently make
we also but today we're here to just
specifically talk about GPA so for those
of you who have not used GPA before GPA
stands for the graphics performance
analyzers it's a suite of individual
tools that you can run on your favorite
development environments we run on mac
OS x in a boon to so these allow you to
analyze applications on windows ubuntu
or android platforms as well we help you
isolate and fix any of your performance
problems so as developers we've all had
the experience that once you have your
primary functionality in place you start
testing it on a number of platforms and
then you might discover performance
issues so most of us have performance
goals for the different platforms that
we have but these goals are even more
difficult to hit on the wide variety of
hardware that we have out there today
lag low FPS stuttering these are all
serious issues and we as developers want
to provide the best experience when
people player games and apps no matter
where they use them so GPU can help you
identify your hot spots and reach your
performance goals no matter which of the
targets that you're targeting so how do
our tools work
um because we run on such a wide variety
of platforms our tools have a host and
target architecture system the reason
for this is twofold first everyone has
their own favorite development
environments and nobody likes to have to
switch and second because small handheld
devices don't lend themselves to
interactive debugging tools also when
developing on low power low compute
devices the monitoring tools themselves
can actually get in the way of getting
accurate measurements and affect the
performance themselves so in order to
get the best results we run small
collectors on the target systems but
have our powerful analysis tools that
run on your development system so but
even if you're just a purely desktop
developer this mechanism actually gives
you the ability to remotely debug and
remotely collect data on platforms that
you might be developing on as well so
what platforms do we run on as you can
see we have a wide variety of them we
currently support collecting your
favorite versions of DirectX on direct
on Windows hosts for android gaming you
can use a Windows boon to our Mac OS X
to collect data and you can see the
various android OS is that we support
there we also support a boon to this is
new kind of a new feature for us so this
has also come online and where this is
constantly updating so if you have
suggestions for platforms that you would
like to see please do let us know
whoever yells loudest gets theirs first
so what are the tools that are inside
GPA so there's four tools for primary
tools the first is system analyzer up
there in the corner which allows you to
connect to your applications and not
only monitor real-time metrics but also
override the state and trigger frame
captures and make traces and we'll talk
about captures and traces here shortly
graphics monitor is the next one it's a
lightweight monitoring tracing tool the
component allows you to launch
applications monitor them via simple HUD
again click collect frames and traces
trigger events
and then managed the various
configurations for the apps that you
want to capture the third application is
platform analyzer over in the left so
this tool allows you to visualize GPU
and CPU load at the same time it allows
you to see spots that are difficult to
spot if you're just using a CPU analysis
or GPU analysis you actually see how
they're interacting with each other
there's definitely a whole class of
problems that just arise from
interaction problems and then finally
there's the frame analyzer tool which is
my favorite one out of a lot and it's a
power really powerful frame analysis
tool you can capture individual frames
of your game and inspect all aspects of
them and find performance issues at the
individual called draw call level so you
can capture a whole frame and just dig
right into it alright so this site don't
let this slide don't you too much
there's a wide variety of ways to
provide to find performance bottlenecks
in your application but one of the most
most methodical ways to isolate what
you're looking for is what I'll show
here especially if you don't know where
to start at a high level our first
objective is to find out if we're CPU
bound or GPU bound after we discover
that we can start making the right kinds
of performance optimizations after all
you don't want to spend your time
optimizing CPU code if your problems on
the GPU or optimizing your GPU code if
it's if your problems on the CPU so
first we do what we call real-time
analysis or online analysis over on the
left let's say you have a performance
issue in your game and you start your
analysis either use either on the system
you're using or don't connect to it
remotely for Android you use our
development you use your normal
development system and connect to your
Android application on your actual
Android device then you run your game
under analysis using system analyzer or
the monitor and then you can capture
frames and traces so now we'll talk
about frames and traces a little bit a
frame capture collects all the graphics
ap is
for an individual frame a trace capture
howre captures both the cpu and GPU
activity and give you an overall picture
of what the system is doing we can
capture any number of frames or traces
during a run of an application or a game
if one particular level is causing you
problems you can go to that level and
just capture frames and traces from
there after you have your frames and
traces we can then use the analysis
tools over on the right to figure out
where the problem is we probably first
analyze the traces with platform
analyzer see there this will quickly
tell you if you're spending the majority
of your time on the CPU or the GPU after
you find out if you're if you find out
that all your work is happening on cpu
you can keep using platform analyzer or
use another tool that intel makes called
vtune and really dig into the to what's
using up all the time on your cpu if you
find out that your GPU bound that's when
you can go to the top right route and
use frame analyzer and that allows you
to in the same way break down your frame
and find out exactly how much time
you're spending on every single draw
called it you're making in your frame so
this all sounds great but how is easy is
it really to use it turns out it's
amazingly easy so when analyzing any of
your applications it requires absolutely
no code changes at all you can take your
game as its billion bill right now and
run GPA on it you don't need to
recompile you don't need to fill your
code with instrumentation macros nothing
for analyzing Android applications you
don't even have to route the Android
device you can use it as is you don't
even have to connect to the Android
device directly you can do it over the
network with ADB so it's extremely
flexible and extremely naana to sip
there's really no you should try it
today so so now that we've seen the
overall workflow let's look at the
individual tools so system analyzer
frame analyzer platform analyzer as we
mentioned before system analyzer is
probably the application you're going to
use first so
what a system analyzer allows you to do
is connect your application and gather
real-time information as your game is
being run you can view highly detailed
CPU and GPU activity power metrics and a
host of other platform to platform data
all captured in real-time the grass help
you quickly see if you're not only if
your CPU or GPU bound but if there are
any activity spikes if you have
stuttering or lag issues with certain
actions in your game you can very
quickly reproduce them and see where the
spikes are coming from and figure out
where which side of your are wearing
your compute that that's happening the
real-time power analysis is actually
being has actually become even more
important on mobile platforms sometimes
the biggest power hogging activities are
not at all what you expect when we
analyzed a lot of android applications
we were trying to find out where the
power was being used up and what we
found was that it actually happened on
the menu screens and on the pause
screens and the menu systems that popped
up and the reason for that is because
most games run with no FPS limit on them
and because title screens and menu
screens are very easy to draw they draw
really fast you're drawing it usually
like hundreds of frames a second and all
that flipping is actually extremely
power intensive on this system and you
didn't realize it because what happened
was when you put the device you know you
just clicked it off or whatever it was
sitting on a menu screen or a title
screen and just chewed your battery up
while your ad so these kinds of
real-time analysis are really important
because it helps you actually have real
data and know exactly where you're
actually spending your time or using up
all your power without making
optimizations without on the wrong
things so here's a little bit blown up
view of a system analyzer you can see on
the left hand side all the different
kinds of metrics that you can gather out
of the system there's also the ability
to run real-time overrides you can see
them there in the bottom the state
overrides so when you're running your
game and app you can actually turn on
off the state overrides and quickly see
what effect they have on the frame rate
on power on cpu GPU load so it allows
you to really quickly see if your draw
call bound texture sampling bound or any
number of other common problems also
last but not least this is kind of neat
at the top you can see there there's a
pause and single step you can actually
pause your application on any frame you
want and then step frame by frame while
you're playing it through through the
game that you're running that turns out
to be really good for catching like
single frame glitches one other thing
that system analyzer has this is really
neat so not only do you get like frame
rate and the current fps and things like
that but we also have this neat setting
down on the bottom if you run the tool
on Intel platforms you can actually
change the frequency of your CPU and
bound it and then try your game on a
host of you know pretending that you're
slowing the system down or speeding it
up to see how your game runs on
different environments this way you
don't have to buy your own host of
different machines to try this on
alright mmm here we are more details
continued yep here's here's the
experiments that you can run as well you
can kind of see visually what they're
doing down there wireframe is one
disabling draw calls if you have
particular draw calls that you suspect
are or if you have if you suspect that
your draw calls are your limiting bit
you can disable all the draw calls and
you can immediately if your framerate
doesn't go up you know immediately that
your CPU bound not GPU bound so each of
one of these little experiments can
usually help you start tracking things
down and you can do them within seconds
to start tracking down what you've got
so system analyzer is great but what if
you want to analyze full screen
applications don't want to connect to it
you can certainly monitor your
application remotely but what we also do
is internally we actually pop up a HUD
inside your game and this happens
automatically once you start analyzing
it you have these almost the same set of
controls as in system analyst
you have just a few a fewer number of
grafts that you can track but all the
same activities are there you can run
all the experiments that you wanted you
can trigger captures or traces in game
doesn't require any code changes on your
side you just run it and then you get
this heads up display automatically we
should note that on Android platform
since form factor so small you usually
can't read them so we just disable the
hood on Android but you can still
trigger the same things using system
analyzer here's an example of the
metrics that we get on real time on
system analyzer and the HUD obviously
not as many as you can pick in the
system analyzer but it does give you the
the probably for most common or for most
popular ones that we use how much load
is your CPU and GPU how long each frame
is taking for duration in microseconds
and then the number of pixels you're
actually I rendering again you can
trigger any of these in real time so
while you're playing your game like you
say over the right you just trigger wire
frame immediately everything pops into
wireframe mode so again all within no
code changes so as we mentioned before
we have monitor monitor is an
application you can use to launch and
use the HUD inside inside your
applications that you want to analyze so
one of the neatest features of this
however is the ability to select
triggers you can actually see the but
the tab up there called triggers based
on any of these parameters you can
actually set triggers that capture
frames capture traces so let's say you
have a game that every now and again the
frames per second drops for some reason
for like two or three frames and you
don't know why but it only happens every
now and again it's really hard to
capture that sort of a activity with
just the keyboard or pressing a but you
know like catching it so you can
actually set triggers and if the
framerate drops below a certain rate or
the CPU frequent or the CPU load gets
too high
we'll automatically capture that frame
so that you can go back later and
analyze what happened to it all right
platform analyzer next tool the platform
analyzer tool is great for monitoring
CPU and GPU activity at the same time
this tool helps you figure out exactly
or it helps you figure out how
efficiently you're using your CPU and
GPU resources often there's cases in
early development where we have
unbalanced workloads we either have too
much work going on on the GPU and the
CPU sitting idle or the CPU is doing too
much work and the GPU is sitting idle
this tool really quickly helps you
figure out which one of those situations
you're in as you start optimizing you'll
find that you can start correlating the
data and finding out if you're causing
interactions that cause either the CPU
side or GPU side to pause and hopefully
I can give you a little example of that
here's a good example so so there's a
ton of information this tool there's not
enough time to go over it but here's a
little overview and some like really
quick like things you can catch for
example here you see the GPU and thread
usages over the timeline if your capture
so you can see the app running in the
bottom and in the top you see the CPU
GPU see the GPU usage going on so in
this case we have a frame that has a GPU
bubble that shows an area of poor GPU
utilization there's nothing going on on
the GPU maybe there's something we could
do about that if we even if we notice it
on the CPU side if we notice lots of
concurrent activities and we know we're
running on very on few core machines or
no core machines we might recognize that
as an area where we might start having
contention there's a whole lot of other
information threading is on here and we
can give you a more in-depth demo of
this a little bit later if you're like
but a very powerful tool for helping you
figure that out and now finally the
final tool in the suite which i think is
it's my personal favorite which is frame
analyzer so frame analyzer runs up both
direct x and 0
GL es frames if you discover that your
GPU bound like we did before if we run
through our tools and we find out our
problems on the GPU you can do a deep
dive into the frame you want to capture
so you capture a frame and now you want
to figure out what went wrong in there
why is this frame so slow not only that
but the cotan can it not only kind of
tell you where your bottlenecks are but
it's in a great debugging and diagnostic
tool you can inspect any texture render
target geometry shader buffer graphics
API call that you made in the entire
frame and see if changing them or
inspecting them for errors makes any
difference to your applications
tremendously powerful so this is what
frame analyzer for DirectX looks like
OpenGL the OpenGL version obviously
since open jail is slightly different
has a slightly different workflow but
the elements are very similar and the
functionality will be nearly identical
there's a lot in this tool so we'll take
it one little piece at a time kind of
how you to see give you an idea what it
looks like so usually people start with
these areas right here at the very top
you'll see the bar chart there so the
bar chart shows what we call ergs so as
people who program in OpenGL and DirectX
know not every single DirectX or OpenGL
call you make actually results in GPU
activity and so consequently we came up
with this term called Berg which is any
GPU or any command that's issue that
actually generates activity so you
select your egg or a range of ergs and
then you can you'll notice that right
here the herbs that you selected
actually show up in pink so you can tell
exactly which herb that you selected we
also have a histogram mode in which you
can actually pick an item on the screen
and then you'll give a list of draw
calls that hit that pixel and then you
can go backwards too so if you want to
see if you're like hey how long does it
take to render the staircase I can click
the staircase and go backwards and find
out which herbs are up there and then go
that way you'll also see these high
precision
metrics for the data collected that
rendered that frame and if you select
different ranges of herbs you'll
actually these numbers will change in
real time and show you how much time you
spent on that so if you find issues
again it would be great to test them
right away so just like in system
analyzer you have experiments you can
select certain herbs and then disable
them we have this thing called simple
pixel shader you can replace the pixel
shader on the fly and get a simple pixel
shader and see how long see if that
makes any performance tips distant
difference and again you'll get the data
right away in real time all right
texture analysis so probably the biggest
thing we've passed around in our system
is textures for any draw call you can
see what textures are bound and inspect
them you get the formats and the sizes
like that this is really good for
catching problems where you're like oh
why am I binding a 2k by 2k texture I
really wanted a 512 by 512 another
useful feature is the geometry inspector
you can pick an ERG or two and then see
all the geometry that was rendered for
it again another common problem is
sometimes the geometry you're rendering
is just far too highly tessellated for
what the purpose of the the draw call
should be this can help you figure out
if you have any issues there or if
you're using a strange format that you
shouldn't be using also handy let's see
ah the shader editor itself yes so this
is really powerful as well you can
actually pick herbs and you will get the
actual shader code that was generated
for that shader and then edit it in here
you can actually replace the shader
itself with another file if you wanted
and load another shader and yeah and the
results immediately appear on your
screen you get a brand new render target
with the new shader output and you also
get new metrics for what you used in
there it's the same process as using
simple pixel shader but you can edit it
in there
the fly if the hsl hlsl is available
it'll you can edit it hlsl it also shows
the assembly if the source is and
available so again we also provide this
for opengl opengl the layout is a little
bit different and there's a slightly
fewer features just because OpenGL ES
doesn't have as many features you can
also pick the one of the neat features
you can pick the color layout like you
can in Visual Studio you can go light or
dark layouts if you like again some of
the features have moved around a little
bit but they're all there so we have the
familiar bar chart at the top we have
the API log on the left the metrics also
get reported for the type of bars tell
you how long they took obviously on
Android devices or sometimes fewer
metrics captured so your metrics may
vary by the device that you're you're
capturing from let's see experiments
again available in OpenGL as well the
texture viewer this is probably one of
the most handy ones 40 for running on
Android and small OpenGL ES form factors
because textures matter so much one of
the things that can commonly happen is
your game runs fine on one platform you
run it on another Android platform it
runs terribly it might be because of
your texture format isn't optimized for
that particular platform so checking
your format checking which parameters
you're using when you're binding it all
can help you figure out and you can
change those use dropdowns just drop
down and say let's try linear linear
filtering for a change and see if it's
the filtering or if it's the actual
texture itself so also very very
powerful again geometry viewer is also
available in OpenGL ES again shader
editing is also available so you can
inspect the shader make changes in the
editor in real time and
the change shader will actually show up
you also get the shader uniforms and
OpenGL ES so you can check what's bound
where and what the values are so we were
going to do a little demo but I think
we're going to cut it short today we can
take a few question we're at a time okay
so we're at a time but we will be doing
a demo of this over here please come by
and check it out it's a powerful tool
and we'd love to see what you guys have
to suggest for features and things like
that so we have a long list of features
we want to add and you guys get to pick
so thanks a lot</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>