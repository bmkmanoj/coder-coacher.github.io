<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to make money on your React Native app w/ Mike Grabowski | Coder Coacher - Coaching Coders</title><meta content="How to make money on your React Native app w/ Mike Grabowski - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/BeMyApp/">BeMyApp</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to make money on your React Native app w/ Mike Grabowski</b></h2><h5 class="post__date">2016-10-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AQyIG7dBJng" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys welcome I'm sorry for the
technical issue we were having we're
here with Microsoft's key and let's just
jump right to it and get started and
learn how to make your apps react native
Mike how are you good thank you thank
you very much so shall we start them
yeah go for it yeah so hey guys thanks
for joining means to say again sorry for
the delay I'm pretty happy that we've
managed to get it up and running somehow
this is going to my first webinar so I'm
really hoping this is going to be an
exciting time together topic today it
was how to make money on your native app
but there has been a small change to the
topic itself
instead of talking about SZ now apps
will more focus on specific SDKs and and
show how to implement not only native
ads but also other kind of ads by going
through all the aspects of writing
native modules oh let me introduce
myself am I gonna react native code
contributes R I'm also a CPA at cost a
guy which is a start of attack founded
that's all about reading written is if
you're interested in learning more about
today's topic or just looking for some
help in general let us know so although
the topic for today's talk is about
making money on our real native apps we
are actually not going to talk about the
money today it will focus on what's
probably most interesting to us as
developers which is how to actually go
ahead and implement native SDKs are
within our wraps so before we start we
need to have an app that we will be
testing this theme zone and of course
the easiest way is to use drag native
image command which is a standard
process after it finishes we should be
presented in iOS simulator or Android
simulates to with an app that's more or
less similar to that one alrighty so
let's get started
before we actually you know go ahead and
write a native character that's
responsible for sure
we have to decide which network we are
going to use and there are plenty of
them to choose from I'm not going to
dive into much details about lock
processes you know it's often decision
made by the rest of the team based on
you know the proposed revenue or
conversion rates Facebook audience
network or the Google AdMob seems to be
the most popular amongst our clients so
for the purpose of this webinar I
decided to go with the former it's not
only the easiest one to set up API
documentation but also offers consistent
API across iOS and Android however you
know it's important to emphasize the
fact that we are essentially what we are
essentially going to talk about today
are patterns and approaches another
exactly implementations and that means
if you know by any chance you won't sync
on an admin for instance it's going to
be a matter of just replacing few native
methods we have audible counterparts so
we've done that in the past it's been
rather reason I'm really hoping that
you'll be able to see that later on we
want to link from the very beginning is
you know how we'll actually use and
render ads or even interact with native
SDKs given that there are no built in
but if we do a deeper search to quickly
find out that you know we have native
SDKs for iOS and Android and all you
know all these apps that we that were
done natively how these play these ads
that we see every day the big question
is how we can use them like we are in
fact making a napkin creative using
joyous react not objective-c or some
other sort of platform specific tooling
right so app is just like any other
native app differences that already use
and logic are expressed with is where
where the view part is represented by a
set of fully fledged 90 peers and that
means you know we can follow the
installation steps from all the above
SDKs just like our app was being done
without pregnant if at all so let's do
it then now for the sake of speed we'll
be doing I was only showcases during
this webinar
however you know the code presented at
the end will work cross platforms
you should be able to just copy Android
part or use it inside early so to get
started you know we will have to
download the latest iOS SDK from the URL
above you can find that URL by just
checking the Facebook documentation and
then the general second step is to unzip
this file into the Facebook SDK folder
that's usually in your documents if you
have ever worked with any other modules
that were you know requiring Facebook
SDK chances are you already have so you
can skip that step well as we have you
know preferred Facebook is the case on
our laptops it's time to link it with
our project and this is the trickiest
and longest part of the installation
process so I have decided to break it
down into smaller steps first thing here
is we'll open our Xcode project with
Xcode this is what we shoot more or less
see for the first time if you haven't
done any you know iOS development before
your first experience with Xcode and now
as in this example we will have to
create a new group will create a group
which is actually a folder as you can
see these files in the left sidebar we
have the example libraries example tests
and products so these are groups they're
for the purposes of organizing your code
and since we are going to add Facebook
SDK framework we are going to create a
group which is called a framework that a
group would place all the Facebook
related violence and maybe other
frameworks in the future as well
so next after we create a group as in
this case we'll have to drag and drop
the frameworks from the documents folder
that we have created previously and
unzip the Facebook SDK inside in this
case I have just drag and drop bones
framework at the oldest Network
framework an FPS DK Crockett framework
which are three essential parts of the
Facebook SDK that has to be added to
your product project in order to make
everything working
you will have to tell or to look for
these frameworks so that when you import
them within your native code
require them moving your native code
Xcode will be able to locate them we are
pointing to Facebook SDK folder inside
our documents which is a recursive path
that means it will look as deep as
possible just to find the files that you
are importing next after we have
finished adding frameworks cool have to
open the info.plist file which is you
know more or less like a package.json of
our iOS app and inside that file we will
basically store an example chunk the
only thing here is that we'll have to
replace the Europe ID with the real app
ID of our Facebook application that we
will create and finally after all these
steps are made attached the above goes
into our app delegate which is like a
main file of our iOS app and this line
of code will just turn on the Facebook
SDK so this is the final result this is
how your app delegate should look like
after you have finished working well
after you have finished all these
installation steps so what we can do now
is we can hit the Run button hopefully
we all will build succeeds without
errors which is a success and that mean
is that our Facebook SDK is ready for
our ads were to start now the problem
that we have now is that you know we
have linked native SDK but it's actually
call it or interact with it from within
our virginias code all in all in fact we
have only a set of native native API so
to interact with but we still have an
interface for the JavaScript to work
with that so that's the moment where you
know native modules come into the
business get about zero other recently
many mainly as I'm still being impressed
by how many cool things we can add to
react native it is dived imagine to
details how you know the entire
communication were works in react native
between J's and native but if you are
interested I'll be posting some
resources after after the webinar so
that you can read more about internal
you know internals of react native and
how's that working in general taking
away
is that native modules enabled to wear
beige is too native communication which
in most cases they sink actually control
native does the case and enhance react
native features so how we can actually
start writing native modules because for
people that have no experience with iOS
or Android this is often and I'd well
and it comes down to writing native
module is to look at the native API
first and try to bridge it as closely as
possible making a small adjustment when
necessary so what I usually do is
document ation and I check out all the
things that are related to what I'll be
about to implement in this case I have
found free most interesting to me
aspects of advertisements on on mobile
platforms and these things are FB
there's still a lot which is an API for
disclaim interest if you lots and these
apps are the ones that covered entire
screen of our app in order to display
either a video or an image content we
also have the NBA 80 VAT which is a
native app that integrates with the
interface of our application and is up
to you to prepare properly rendering and
the last one is the FDR view which is a
standard banner ad I guess the most
commonly seen in the ass so put
Pinterest it collapse because of the
fact that to me they are the easiest one
to set up and I didn't want to start
with things like native ads because
these things are complex plus there is
still quite a lot of things to serve out
in terms of how to actually write a
native module so there's now tweak
integration here because interesting
lots are actually just covering the
entire screen of our app so it's just a
matter of a single imperative call as in
this example we just have to call the
show ad from root view controller so
that's everything we have to do app will
be to create an edit module that will be
about to do
let's start with them per step will be
to create a new file and we do so by
right-clicking the group we want these
files to live in in this case we have
already a group called example also
we'll just put all these fillings inside
it are you creating a new after you
click a new file from from the
right-click menu you have a list of you
know types of files you want to create
all selection here dica cottage class is
the one you want to go with so we just
click Next and then you get the menu
where you can select the name of your
class us and the specify the subclass
which in this case we just want to
specify a name I'm I like to call these
files managers because to me they manage
native code and usually have some stayed
so that sounds like a perfect you know
name for that in order to make it
organized all these things are done we
just click Next and we get two new files
one of them has an age extension and
that's a header file where you know
declarations about your class and its
properties are limiting and these are
public to be interrupt occasion and
there is also a second one with an
extension and this is the file where the
implementation of your file is living in
stuff now these are just two native code
files so we still have to tell the react
that these are you know native modules
that can be called for allegan j/s and
in fact a native module is just an
objective-c class that implements the
RCP bridge module protocol
if you are wondering it's an
abbreviation of react and we specify
protocol in objective-c so we do that we
use click Save button
and we go to the implementation file but
we see that there is a warning warning
saying that there is some module name in
protocol which is not implemented this
is because on the previous slide we have
specified that our class conforms to the
IRS's bridge module protocol but the
truth is that for now
doesn't so it's missing and that's what
this world is telling us we can declare
it by attaching an RCT export module
macro an optional argument specifying
name of the module and if it's missing
as in this case a name of our
objective-c class is used instead now
that we have finally created our module
our native module we can just go ahead
and you know cancel like it firm from
within DJ s utterly useless because
there are no refunds we can call so I
think it's a perfect time to start
adding some methods let's go ahead and
try implementing the show out of effort
so we do so by wrapping our method with
our city export before and that macro
actually available today has to be
called so now if we will save that and
click run and console.log the ad manager
again will see that there is the show
add method that we can call layers if
you'll take a closer look at the
commented line
initiate the FB intercept of our
instance it requires a placement ID and
separates so we'll have to go ahead and
change it so that it accepts placement
ID and we have also made it promise and
and now let's stop here for a second and
the explain two things prep the
placement ID actually is so when you
create your Facebook app in the Facebook
dashboard a placement ID is like a
unique identifier which is identifying a
single ad unit inside your app so you
create placement IDs in order to group
some certain ad types and do some other
you know interesting ad targeting
concepts the second thing to explain
here is that what these two extra magic
resolver and rejector arguments are so
you want your related method to return
the promise you have to specify two
additional arguments they're always at
the end of your move
decoration and these are the results
block and the reagent block
boots take a closer look again there is
still a warning in there and it's saying
that you know that we are trying to
assign self to property that it's income
that is of incompatible type and that is
because our object self like which is
this which is interesting to our manager
doesn't conform to the FB interests if
you lab delegate protocol I was twirled
that's a very common pattern of setting
listeners on an object in this case we
specify itself because we won't be cold
when uploads or when it closes so we
will just go ahead and intercept the lab
manager confirms that this protocol in
order to make it fully working in order
to avoid crashes in production we have
to really implement all the methods this
delegate protocol is specified so if
we'll go to the documentation and we've
because there are there for me first
describe the interest if you are deep
load interstitial at it failed with
error click and it closed so these are
the four methods that are specified the
first one did load is called as soon as
your ad is returned by the Facebook
audience Network and is ready for
display because the process we've played
it with ads in general is that as soon
as you initialize your instance like as
soon as you've initialized at be
interested I'll add or have been
anything that you have to call an ephod
load up and that means what
asynchronously talks to network servers
in order to get like or whatever that is
to display so access and we have a field
from server the dead load method will be
called from the server there's that word
Gerindra
or for some reason there is nothing to
show the detail with era will be called
the league click method method on the
other hand is called as soon as your
user start since arrived
with your ad unit so for example click
set swipe cetera and the lead close
method is called always every time user
dismisses or closes the ad good for now
is we'll just play and define all these
for me floods and leave them empty but
as you can see the problem here is that
that are cold but we want to perform
some actions most typically what we want
to do for example inside a deed closely
for but is we want to resolve a promise
we want to resolve the promise that we
receive in show and we thought let's
that there is no way to call these
resolve blogs because they are living in
a body of a different meals right so in
order to make this working we have to
create a class properties and stop these
promise meatballs on a class is promised
blocks time the pin values in the show
up methods as in this case and we also
have to add the ersity assert which is
an assertion that makes sure that we
can't call show up more than it once at
a time and that is a very very important
trade of because you can't call you
can't call sugar concurrently but on the
other hand if you will do on the ring
like I'm wondering what would be the use
case for this anyway it's something to
remember about in the future because
there are cases with other modules where
it would make sense so you have to think
twice before actually going with this
pattern another extracting here that we
have changed is that we have also
created a city lat class property
reference to the FBI case of the
objective-c way of managing memory and
storing references important thing is
that holding FB ad on a class property
God the allocated as soon as the need
for the returns so in order to actually
make it load and on screen we have to
Poynter pertinence so that Objective C
does removes it in order to optimize
memory usage the initial bootstrapping
double-booked that had to be done in
order to actually start thinking about
delegate methods that we have bootstrap
so now we can go through them one by one
and just logic so as I said the it load
method is the method that's called when
our ad is ready for display so all we
essentially want to do here is we want
to call the show at from root view
controller which will make the other
pure fullscreen over entire our
application to use the RCD presented
view controller util which which is a
special util back into react native that
always returns the outermost root view
controller so that is basically it now
you can probably just save your app make
it running and in most cases you should
see your ad appear but still we want to
get some feedback when something happens
so we will have to implement all the
three other defaults as well so when an
fails to load reject the promise with an
appropriate error code and message in
this case we'll just pass an i/o and the
original description of an error however
important thing to note here is that
after rejecting we are not actually
clearing up cleaning up the promise
blocks that we have stored previously in
the show up method right so if we will
be about to call the show our before
once again because there is still a
reference to previous blocks
I live in on a class so in order to make
it working will have to create a clean
up last call me phone that will do it
for us we have to remember about is to
just touch me thought inside the
relevant other
delegate methods like in this case
inside detail with error we'll just call
the queen of last call the deed click is
rather simple because we are just
setting a boolean did clicked to yes you
think about did click delegate me for is
that when you
like another when you swipe another when
you interact with it this delegate will
be cold I'm from a chuckle you can
resolve a promise because did close knit
what will be cold anyway so we have to
somehow just update state of current so
that when we are about reasonable
promise from deed close we know actually
whether user was interacting with our
other on that Oh
as I said this is just a simple boolean
left yes no value and it was going to
resolve it with that value and clean up
last Co and clean up last call is also
setting did click to know so that when
we are about to call show at once again
everything is having an initial state so
that's all in terms of native code with
the interest it'll yet manager and I
think it's time to test things out so
the first thing to do is we'll just open
index J yes of our demo wat which is
usually the only file we have after
initializing a brand-new app to find the
touchable call the show full screen a
method that will be defining on the next
three and the show ba screen add method
will just call the interested you'll add
manager we can do some console log in
indeed an and catch handlers just to see
whether there was a success or whether
there was an error getting ads from the
server after after it saving these
changes and running the app what we what
we should see now he is our tweak
default reg native app we have it
touchable we'd have defined so after
pressing that Boogaard
but if we get to this point and if we
see the ad that means our entire
Facebook SDK integration works well and
all our native modules are working well
that's very important like some of you
could be wondering probably why we
haven't started
things like native arts or banner ads or
stuff like that so that's all about
iterating of its time like interstitial
ads are the easiest one to set up but
very important if you don't have pure
experience with native modules and if
you just want to learn some concepts or
if you want to learn how to actually go
about writing well that's the best way
to start have some you know they issue
with basic features it's time to dive in
deeper and you know go about creating
name implementing native ads which we
will do thanks to native ad manager
native ad manager like interested gilad
manager so the first step will be to
create files and apart from the manager
files will be also creating the view
files in this case we have created a
native ad view and interesting llama
sure this time instead of declaring that
we conform to the ersity breach module
protocol we will extend the RCT view
manager case of the bridge module that
manages a native view whoever you know
the implementation is still the same we
have to export it instead of you know
exporting in methods like show up this
time we'll declare a special method
which is called and that method is used
by react native to get an instance of
the native view to use so if you render
your native view of the JSX tags from
javascript this method gets executed in
order to get a brand new instance of a
native ad view we already know that for
most of these things you know FBI
audience network we need a placement ID
so we can declare a prop placement ID
which is a string so that next time you
will be about surrender your view you
will just have to pass a placement ideas
prop so create at sewer additional props
one of them is an all uploaded
calling as soon as native butt is loaded
from the server held back which we will
call in case of no feel of that worker
and again we could just go to JavaScript
obtain an instance of our native of you
and just console.log it / it still
doesn't do anything so open up denied
890 that view file and start actually
defining the real functionality yes
we'll have to define properties that we
will be passing the prod mapping the
props to because on the previous slide
we have defined that we are exporting
some progress but we are exporting
placement ID and these two callbacks but
in fact we haven't defined them yet so
in the header file will be defining them
so that when react is about to set them
won't crash the app because of you know
missing properties that's a bootstrap
native add variety or for placement ID
it is because with the interesting event
manager we had a me photo show ad so we
were imperatively calling this before
with a placement ID and we knew that we
have a placement ID and we can not show
an ad but in this case we don't have any
default to call we just rather our
component so what we can do here in
order to know about placement ID as soon
as possible is to override its setter
and that's how we do it as you can see
it looks very similar to be interested
to a lot that we've been implementing
there is also the init with placement ID
default and we are setting a delegate
and we are calling below that so this
block is exactly the same as with the
interstitial ad manager design native
ads class as a property so that it
doesn't get the allocated that's exactly
the same case example starting small
you know these concepts with you know
easy interest if you'll API examples and
now if we are doing native ads we
already know them so we can focus on
another things to sir
instead of you know going for these
basics so we had the warning about you
know missing delegate so we have added
the protocol I've been aided but
delegate and we have added two new
thoughts native a big load and native
update fate with era and again these
methods get cold under exactly same
circumstances the deep load method will
be called as soon as we have a native
app to show move with era will be called
as soon as there is there are no
internet there no field from an ad
server as soon as we know about native
ad what we want to do is we want to pass
it back to JavaScript so that our react
components can in fact render them
because you know the whole idea of using
native ads with react is to actually
render them we have standards react
native components so that you can be
more expressive about how you want to
lay it out or how you want to make it up
here we have the dead load default and
we have the unloaded blog do is we will
just pass back an object containing all
the properties of like title subtitle
body social context all these methods
all these properties are described in
the EPI documentation so we can check it
out we some some more stuff to export
but this is only this is all I've needed
for the purposes of demo and other apps
we've been doing so I'm not saying this
is everything you can actually read or
get to know from the native app let's
line we call register view for
interaction and this is the answer why
we are creating a native add view that
just passes a callback because we want
an aid we want to have a native view as
a parent of our so that we can register
it for interactions and that means as
soon as you tap in the view or start
interacting with it
this will capture all these interactions
and will you know all will do all this
Facebook key things like
you know saving interactions sending
inputs and servers taking user out of
your app or presenting some stuff so
this is all done have to register learn
nothing like that it just works
automatically and this is also
similarity in other words the case so if
you will be about to add mob it will be
literally the same ok so they fail we
simply call a callback for the sake of
demo I'm just resolved looping with an
empty object because there is that much
however if you will be about to do
something more advanced you can you know
and stuff like ever curl their
description to present something to
users but in most cases if your native
app cannot be shown under some roads
usually want to do is to just hide so
that is fully transparent to your users
so like galleries very very simple
narrative implementation is not ready
for JavaScript code and finally so let's
go
I switch to JavaScript part because we
have done native one and to test our
changes we'll create a small component
called Maya native at it render as a
native ad wrapper which is the native
add component we've been implementing
all the time and as we have already
checked out it accepts a placement ID
prop and an uploaded product we also
pass like the purpose of this on
uploaded callback is so that we can
actually store an ad on a state soon as
our ad is loaded we can set state and
then we can update children of native ad
in this case we are just trying to
render a text which is going to contain
a description of our ad we can save this
file it ran and hopefully what we should
see is that our rod integration works
which means that we have successfully
managed to implement native ads
so it's kinda tricky you know to explain
all these things they're a conference
talk webinar or even like a hands-on
video tutorial because there is always
some stuff to show there is a lot of
there is a lot of code to follow and
there's a lot of concepts to follow this
is even tricky to follow you know with
coding is someone speaking what we have
I think that we knew at the beginning
and also we knew that super interesting
things like banner ads or at settings
and you know ways of optimizing these
ads these are the things that we won't
be able to show including Android as
well so actually gather all the zippers
into one place and make it open source
it's been live for like a couple of days
already and you can you can see it there
you can download the react native FB ads
package from NPM the the official
example that you can see inside this
repo is exactly the app that we've been
creating today and the iOS
implementation is the same as shown on
the slides so if you want to and do the
implementation from scratch slide by
slide in order to practice you can
pretty much do it and you can compare
your reference to this code or going to
use it without even check it out but the
thing is that it has a lot of additional
features that I was unable to show
during this webinar example one of the
biggest concerns with native ads was
that during them like in our example
it's okay we have just a single negative
ad but in case of like a waste view
where we have to render like 100 ads
inside a huge infinity scroll these
kohlberg things might get pretty messy
and in case of fellows you know it might
be kind of tricky to debug it so the
implementation that we have in this repo
is perfectly optimized for these use
cases it's slightly different
from what we've been doing today but
it's also more complex so if you'd like
to so if that sounds like a use case for
your app that's the faulty something
you'll be then check it out so again
thank you very much for joining in today
and if you'll have any questions just
shoot me and me on Twitter or open it
choosing to eat a burrito I'll be happy
to answer them and guide you through
other art related things perfect I just
want to make sure that we don't have any
questions from anybody and well thank
you Mike
for such a great presentation on react
native and thank you guys for joining us
in another webinar series would be my
app but don't forget to stay up to date
with our newsletters by registering at
community dot B my app comm see you next
time guys cheers thank you hello</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>