<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to create JWT (JSON web token) using pure JavaScript (and Crypto-Js) | Coder Coacher - Coaching Coders</title><meta content="How to create JWT (JSON web token) using pure JavaScript (and Crypto-Js) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-CBT/">Tech CBT</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to create JWT (JSON web token) using pure JavaScript (and Crypto-Js)</b></h2><h5 class="post__date">2015-09-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oneCuYkWz0c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we are going to create
JSON web tokens using pure JavaScript we
are not going to use any kind of node.js
here but we will try to create plain
jason web tokens using pure javascript
so if you are not familiar with GWT or
JSON web tokens or any of its basics
please refer to my previous video which
explains JWT
in depth to begin with we need to work
with any of the existing cryptographic
libraries available for JavaScript while
there are a bunch of those such kind of
libraries in this case I would like to
go with crypto jeaious so in order to
search for crypto jeaious just go to
Google and say crypto j/s so as part of
crypto J as you can see in the third
link it is actually going to NP MJS so I
go to that link so once I go to NPM you
can see crypto j s is already made
available there but I as I mentioned I
do not want to use a node J s so for
that purpose I directly go to github so
you can see this is where the entire
library exists so I go there and
download all the necessary JavaScript
files which are available as part of
source folder so in this case for my
hashing algorithm I am going to use a
char 56 sorry char 256 so this is the
file I am going to use together with H
Mac so for that purpose the first thing
I'm going to do is get the core so this
is the most important file I would like
to use why because this is the main file
which has got Proteus inside it so let
me get that version first as I go there
and right-click and save as and for now
I just wanted to save in on the desktop
or let me go directly to the test itself
so this is the file I would like to
store so I say cold dodgy ass so once
you have completed a core you need to
have the base64 encoding and decoding
capabilities for creating JWT for that
purpose you need this file too so I go
in here I click a bra get the source
code save as and I just save to the same
folder as above and on top of that as I
mentioned I would like to work with H
Mac and sha-256 so that is the algorithm
I would like to use for hashing my JWT
so you need to have both of these tool
so I save as and similarly I save the
other one too
which is chateau 56 okay so we are done
downloading the cryptography related
libraries and if you open your webstorm
now you can see I have all the four
right here so these are the minimum
things you would need and of course
there are a bunch of other libraries you
can use but in this case I would like to
go with pure JavaScript and that too
would like to learn and how the Jade
ability is going to be created from the
scratch so there are other libraries
which may make your life easier by just
providing the necessary header and the
payload and it knows how to create the
signature and gives it back to you so
there are other straightforward
libraries but the goal in this video is
to really learn on how to create a Jade
ability from the scratch so once you
learn the basics of how the JWT works
then probably you can move on to much
better libraries which does all of those
whatever we are going to do now in just
one or two statements but for now let us
start from the basics I just right click
here and go to new HTML file so in
yes I would like to create something
like test for let us start importing
this ASCAP library so I'm going to say
script source equals in the first thing
is that I would like to have order just
to be added and immediately after that I
would like to have a and C base64 Rogers
and after that I would like to have a CH
Mac and after that I would like to have
chateau 56 so now that we have all the
script libraries we need to have the JWT
token to be created so before even
something to JWT
we need to understand on how to convert
a string to base64 encoding and
similarly decode a base64 encoded string
so as we can see like each of the JWT
sections have the strings encoded in the
form of a base64 we need to have an
understanding on how a particular string
can be converted to base64 so for that
purpose I am going to have a simple text
box and a button to actually convert a
string to basics to 4 encoded so let us
start with the table here and on top of
that I would like to have a table row I
mean inside the table so inside the
table row I would like to have a TD
which says enter string to base64 encode
so this is just a label and in another
TD I would like to have an input tag
with type as text box and I need to
provide an ID for this so I would like
to have something like
txt and cord so now that I have two TDs
one for the label the other for the test
box I would like to have another which
is for a button so in this case I would
like to say button and click execute and
code that is do encode is the function
which I am going to write and the
caption for the button will be something
like encode so the first row contains a
label the text box in the button and the
next row is going to have two T days the
first one will simply say result and the
second one will say spam re equal to
result encode so that is the span I am
going to have which contains the result
of that particular string once converted
to base64 so which means I click on this
encode button and once I click that this
particular function will be retrieving
the value available inside this textbox
and that value needs to be converted to
base64 and the result needs to be placed
as part of this resultant code so now I
need to have my own script to be
returned I'm going to say function 2 and
so this is nothing but the function what
I have already provided here so which
means on click the same function needs
to be executed and as part of this
function first of all I need to get a
handle for textbox so I'm going to say
document dot get element by ID and I'm
going to say txt and code similarly I
need to get a handle for the span as
well so now that I have the references
for both of those inputs I would like to
have a generic function called get
base64 encoded so that is a generic
function which
accepts any string and it has to return
the basics to for representation of it
so in order to convert a raw string to
the base64 representation first of all
we need to convert that one to N word
array so I am going to have a variable
called Waddell Dre and I am going to use
my crypto JS library which I have
imported and it has got utf-8 and that
parse so once we do this this particular
library this particular method paths is
going to read whatever the value
available instead rostering and converts
to avoid array once we have word array
the next thing is that we can have the
result exactly so the result we can say
we can get by actually using approaches
dot encoding that base64 dot stringify
so that is the method which accepts a
word array so yes I already converted my
string toward air in my previous
statement I am using the same variable
here which essentially gives me the base
encoded result so all I had to do is
return whatever the result I have in
place there so now I am going to use the
same function here and use it as part of
resultant code dot inner text so I am
going to place the result in as a text
inside this span so as of now I all I
have to do is just execute this function
and while executing it I need to get the
value available inside this text box by
writing txt dot value so that is the
test box dot value so once I have that
we should be having the base64
representation of any value provided
inside the test box
so let me test this guy and go in here
so I would like to say this
test and click end Gorda so let me try
to decode this using any of the online
tools available and once we decode this
particular representation we should have
the value in the normal string so let me
go to something like decode ok base64
the code.org ah so I can provide the
value whatever I have encoded earlier
and try to decode them so now you can
see I got back this is test which is
nothing but whatever I try to encode so
again I just wanted to explain here
encoding and decoding is entirely
different from encryption and decryption
encoding is not encryption encoding
means you are just changing the format
of one string to another and in this
case we are changing the string to a
base64 format it is just a format and
everyone can read it and everyone can
decode it using just the online tools
whatever I have provided that is not a
true encryption and first of all we
cannot call it as an integer at all
ok so getting back to my previous string
just like base64 encode we can also have
something for decode so let me copy the
same table whatever I have in place here
and now I am going to have another table
and in this case I would like to call a
decode everywhere so this is going to be
decode the code the code and decode so
this is pretty much about what I am
going to have for decode so in order to
have the decode I need to write a
similar function for decode as well so I
am going to say give base64 decoded and
there will be couple of differences here
like the word array in this case I have
to get from the base64 so that is I have
to say base64 that part and it is not
going to be a row string it will be an
encoded string right here
so I'm going to pass whatever the
encoded string I will be providing here
and I get the base64 result out of it in
the form of a word array and I am going
to use the same word error here and now
instead of using this stuff I can say
word array dot to string and now I can
say crypto jazz dot psi dot utf-8 and
now I can just return the result so I am
going to use a very similar function on
how I wrote for the end code in the form
of do decoder so as I'm using decode
here I have to translate everything to
decode so that I am going to use the
text box decode and span the code so
once I get everything instead of get 64
encoded here I am going to use get
base64 decoded and at the same time I
had to use the code here as well okay so
let us test if this is working fine I go
again back to my browser and I have two
sections one is for encoding the other
is for decoding now let me test it so I
am going to say this is test I encode it
I get the value copy the same value
paste it here and try to decode it and
now you can see I got the value back so
in that way you can use pre-existing
libraries of JavaScript in order to
simply do base64 or base64 encoding and
also decoding according to are necessary
okay so now that we have completed the
base 64 encoding and decoding using pure
JavaScript now is the time actually to
do the real GWT creation so in order to
accomplish the JWT creation as you know
you will be having the Jade ability to
be provided in the form of three
sections header payload and secret so
let me provide all that information in
the
stable so I would like to have TR and
here I would like to say something like
end up JWT related header information
and I would like to gather that
information in the form of a text box I
mean using a text box and I am going to
say text box and a txt head out so that
is the name of the text box I would like
to use okay so similarly I would sorry
this needs to be inside TV so that is a
mistake so let me add a TD and get this
guy right inside the TD here and let me
do some cleanup so similarly this needs
to be part of TD - okay so let me create
another row exclusively for payload so I
have the first section header and the
second section I would like to say
payload and this one I am going to call
it as payload so similarly I would like
to have another row for the secret or
password so I am going to provide that
one in the form of hash secret as the
label so this could be password or
whatever you would like to use to hash
your particular header and payload
together using sha-256 methodology or
algorithm whatever I am going to use as
part of this video but you can use other
algorithms based on your necessity so in
this case I would like to call this one
I was something like secret okay so I
have all the three text boxes and now I
would like to have a button so I would
like to have the button in the second
column so that it looks much nicer so I
would like to say something like button
on click create' JWT that is a function
I am going to write and
the captain is going to be show JWT so
once I have the button I need to have
another row exclusively for the result
so I'm going to say a result and as part
of the result I would like to have a
deal so that you know the reason behind
devious I would like to control the
overflow and braking and width and
everything instead of using span why
because the token can be very big so I
do not want to use span here so instead
I would like to use the deal so I would
like to say a result JWT and provide
some styling so that we can see all at
one place so I would like to say 600
pixels width and the water flow let me
provide wrap so that it can't break
onward so just wanted to make sure that
it could take okay so I did not write
the code for create JWT yet but let us
see the layout if that is looking fine
so you can see now I have the layout
here so these two are from my previous
things so for that is forget about those
two for now here I am going to provide
the header in the form of JSON object
payload in another JSON object provide
any kind of password and the moment I
click on this show JWT
it has to give me the JWT right here
that is JSON web token so for that
purpose I am going to write that method
what is that that is create JWT so let
me include the script for that one so it
is going to be function create JWT so
that is the function which needs to be
executed so let me copy and paste so
that we are not missing anything there
so that may collapse in my previous
tables and make myself some room there
okay the first thing is that I need to
get handle for all of these particular
elements so let me copy and paste
whatever I have earlier and use the
textbox header here and similarly I
would like to have the extra payload and
similarly I would like to have the ext
secret and similarly I would like to
have result JWT which is supposed to be
our main token so once I have handles
for all of those particular objects
nothing but the UI elements the first
thing is that I need to convert header
to base64 the second step is convert
payload to base64 so let us do that one
by one so I am going to call right now
base64 header so this is the variable
which contains the base64 representation
of the value available inside this txt
header so as I already have my previous
function called get base64 encode I am
going to use the same method here but I
am going to send that value or directly
from txt header dot sorry it is going to
be value so I provided the value there
and similarly I need to have for the
payload as well so I need to convert the
payload also to the base64 okay so now
that I have the representations of both
header and the payload in the form of
base64 now is the time to create the
signature as I mentioned to create the
signature we need to have some kind of
hashing algorithm to be used in this
case I would like to use hitch Mac sha
to
the six algorithm and that particular
algorithm will be taking two values as
parameters the first thing is the
message which needs to be hashed and the
second one is the secret so all I can
use just using crypto dejay s dot H Mac
shuffle 266 sorry 256 that is a matter I
am going to use and it is going to take
two parameters as I mentioned one is a
message the other is secret so these two
are the things so of course I need to
provide these two values so what this is
going to return is directly a signature
so that is the signature I am going to
receive and again this signature is not
a base64 encoded it is just the
signature of the hash or say signature
or hash whatever comes out of this
particular message based on the secret
you have provided here so here your hash
of this message will be automatically
created based on the secret you provide
and that particular hash will be
returned and that is what we are going
to call it a signature once we get the
signature the cygnets are also needs to
be converted to base64 that we are going
to do that as second step but which
message or what message needs to be
hashed out as I mentioned I need to have
basics too I mean the header and the
payload of both of these two need to be
hashed so in this case all I am going to
say is in base64 ples the sections need
to be separated with the dot and I go
with payload so that is the message so
the message is nothing but this header
that is 64 header and page 64 payload
separated with a dot that is the J's JWT
representation and I covered that as
part of my previous video anyway so once
I have the signature now I need to
convert this signature to base64 again
so
I am going to say whatever I have lips I
am going to use whatever I used here and
I'm going to say base64 signature and
whatever the value I have in place here
so just use the same thing and now I got
the base64 representation of whatever I
provided and in this case actually the
signature is already in the form of word
area so I don't really need to use this
guy so instead I can just use just this
I don't really need to have the entire
get base64 encoded to videos I can just
use this one why because signature
itself is a word area so I can just use
that one instead okay so now that I have
the base64 signature now the complete
token is nothing but header concatenated
with payload and of course separated
with dot again concatenated with this
separated with dot so I can say wearable
JWT which is our final JSON web token is
nothing but base64 header separated with
dot concatenate again the payload and
again separated with a dot again
concatenate our base64 signature so this
is our final jet ability so which is
having three different sections
once I have JWT created all you have to
use this result JWT which is nothing but
our do dot innertext
ii say JW so let us see if this is
working and again test our JWT for its
authenticity and also the correctness or
say valid valid DT so we will be testing
the validity of that particular JWT
using JWT dot IO website so we'll do
that later but let us see if it is
generating energy readability first
okay so as part of the header as I
mentioned I need to provide the JSON so
how do I need to provide the header so
usually for the header you need to have
two parts the first thing is that you
need to provide type and that is going
to be GWT always and the second thing is
you need to foil algorithm and this is
going to be H us 256 so in this case
that is the algorithm I am going to use
so you need to provide both of these two
in the form of JSON object so you need
to have this one in place so this is
essential so I am going to comment this
just to make sure that we know what we
are working it okay so let me use
whatever I have in place here so just
copy this I go back to my website I
provide that one and now the payload so
payload is also very similar that is
also going to be H is an object and
inside that I can provide all the
default claims which may be available so
I can say in this case ABC service and
at the same time I can say the user name
or whatever you would like to provide so
I can say user name in this case it is
jag so similarly I would like to provide
any roles information like eight minutes
or something of that sort so let me
comment this one also ok so now that we
have even the payload in the form of
JSON let us just copy this guy directly
into our particular website and now I
can provide a password so that password
you can just provide anything in this
case I would like to say password one
you can provide whatever you pound
click show JWT so there is an error so
let me open that ok secret is not
defined okay there you go
so I forgot the secret
the secret has to come from our DXT
secret so I forgot that so I need to
provide txt secret value so I need to
take the value from the textbox so let
me save this
let me a five let us copy this whole
thing again for JWT header and this one
for payload and this one for password so
password in this case as I mentioned I
would like to have something like a
sword 1 and click show JWT and now you
can see I got the JWT that is JSON web
token and it should have three sections
so there should be a dot somewhere so
you can see that dot the first dot is
right here so this is the header and
this is payload so till here till here
is the payload bar so this is the
payload information and this is nothing
but our hash so in order to make it
valid or in order to test the validity
of this Jade ability you need to copy
this whole thing go to JWT dot IO and
let us come here let us face this and
now you should be able to see our header
type JWT it's just a 56 and you can see
our payload data which is nothing but
from here to here you can see ABC
service jag and false which is fine but
it says invalid signature because even
though I could see that you cannot
really say this is valid information
until and unless the information
whatever you have provided in the hash
is the same as the other two so in order
to check the validity you have to make
sure that whatever the signature you
have provided should be matching with
this information now by default JWT that
IVA website is providing the secret
secret and of course our signature is
not passed with a password secret so we
need to have this one to be changed to
pass or the one which is nothing but
what we have provided here so that is
the same thing I need to provide and
once you provide that and if you come
down you can see it says signature
verified if you modify the password to
something now you can see it says
invalid signature why because even
though the data is shown to the public
it may not be valid data until and
unless the signature is valid the
signature can be made valid if one only
if it is provided with the respect to
correct password which has been hashed
previously whenever that particular JWT
has been created so in that way we used
some existing libraries and in this case
were use of crypto JS exclusively to
create a JWT using pure javascript in my
coming up videos we are going to use the
same technique using node.js to actually
go with rest based applications and
securing the rest based applications
using GWT</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>