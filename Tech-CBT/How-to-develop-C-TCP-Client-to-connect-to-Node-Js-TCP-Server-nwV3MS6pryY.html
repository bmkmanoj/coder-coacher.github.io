<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to develop C# TCP Client to connect to Node Js TCP Server | Coder Coacher - Coaching Coders</title><meta content="How to develop C# TCP Client to connect to Node Js TCP Server - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-CBT/">Tech CBT</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to develop C# TCP Client to connect to Node Js TCP Server</b></h2><h5 class="post__date">2015-07-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nwV3MS6pryY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we are going to develop
c-sharp a tcp client which consumes the
dissipate server developed using node.js
so I already covered developing node.js
TCP server in my previous video we are
going to use the same service in order
to have C sharp line to be developed and
on top of that right now we are just
going to see or developing just a simple
console based application which acts as
the TCP client in order to consume a TCP
server develop using node.js so let us
quickly see and what the DOJ's TCP
server looks like on the machine so once
I execute this application you can say
my TCP server or say node.js basic TCP
server is currently listening at
localhost and the two at port number
9000 so in order to test this I am going
to use a simple application called
packet sender which is freely available
so as part of this I am going to send
the data to my service so to the node.js
service so that is Jack and to which
server it needs to connect oh so I am
saying that local host so it means it
has to connect to the same machine and
to the port number 9000 and after that I
can just say it is TCP based
communication but not UDP so I still
make sure that TCP selected here and
click on send so the moment I click on
send you can see this is the request and
this is the response from the server
itself so I sent Jack and in return it
has responded back saying that hello
jack and after that the connection has
been closed automatically so you can
also see from the server like what
client has been connected and what kind
of data we received from the client and
when the connection has been closed so
all those details are automatically that
boast as part of TCP server itself now I
just wanted to keep this one
this and wanted to develop a c-sharp
client instead of using a packet sender
application so my HR client or c-sharp
tcp-based
client will be acting very similar to
packet sender however I'm not going to
use Windows Phone application I'm just
going to use console application for now
so however that it not be any difference
on communicating with the tcp/ip server
whether you are using Windows forms or
console application as because we will
be still working with the same libraries
regardless so the only difference will
be the UI elements and how you are
actually taking the input from the user
and how you are displaying the input to
the user
sorry output of the use of so let me
start off starting a new solution from
the scratch and I am going to create a
new project and instead of using Java
Script node.js and so on I am going to
selectively Joe's c-sharp and in that
I'm going to select console application
and I am going to say something like say
TCP client so for the I can also say
console so it is a console based ECP
client so if you would like to develop
using windows forms or WPF or for that
matter asp.net MVC all the code whatever
I am going to right now will be same
except that how you take the input from
the user in this case I'm going to use
console dot readline and how you display
to the user the output itself which is
going to be consulted right line of
something so those will be changed but
internally the communication how you do
with the TCP server will always remain
the same so I click OK
so I have static void main so this is
the starting point so in this case I
would like to start with something like
console dot clear I just wanted to clear
everything on the screen and I would
like to say a line drive down so which
means whatever the land line of
information the user has provided will
be always placed in this variable line
rather so I am going to have it do
widely and I'm going to say Y in it the
Lee dry line red equals it is not equal
to number for option it has to proceed
so this is what I am going to say so
something like whenever the user
provides some input put the application
in the form of a string of line usually
it will be numbers like 1 2 3 4 in this
case
so for main squid one means something
else to mean something else so 4 is the
last option I am providing in order to
quit from the application so for that
purpose now I need to display some sort
of very simple menu to the user where he
can open a connection he can send some
information and they can close the
connection and finally quit the
application so I would like to do
something a console dot reset color so I
am going to use some kind of colors as
part of my console application so that
it looks something different
not very much boring console dot right
here I am going to display the menu
options something like this interruption
so I am going to provide all the options
the user can provide so one for open to
force and data three for closing the
connection and four for quit so these
are all the options I give to the user
so the user can provide any information
I mean any option and whatever the user
tries to provide will be through console
dot readline so I just wanted to make it
simple here
which means once this line is displayed
to the user then it will be waiting for
the user to actually have some input
from the user so now the user can
provide editor one two three or four so
any of those values whatever the user
types in will be taken into the variable
line read and now based on whatever the
user has provided as an option I am
going to do my logic so first of all if
it is case one I would like to call a
method called open connection and after
that I am going to break it and
similarly if it is lab case two which
means send some information to the
server so which means I need to prompt
for the user to send what kind of
information to the server but that
purpose I am going to say consult right
enter data to send or so which means I
am going to say please enter data
whatever the user wants to send to the
TCP server so I need to get the data for
that purpose I am going to use the
variable data which takes some kind of
input from the user in the form of a
string so the same data I am going to
send it to the server using a function
called send data and I am going to pass
whatever the data the user has provided
and finally break so similarly I'm going
to have one more case called case three
so as part of this I just wanted a close
connection so I'm break so this is
pretty much what I have in place of
course I need to write open connection
send data close connection I need to
implement all of these three methods
other than that you can see on how my
particular menu structure is in place so
once main gets executed which is the
starting point of our application it
clears the screen displays the menu
takes the input from the user
nothing but the option he might be
selecting and once the option has been
selected
one is selected we are opening a
connection direct connection to our TCP
server if he Sue's us three we are
closing the same connection which has
been opened earlier if it selects two we
need to accept some kind of data from
the user which needs to be sent to the
node.js server by using send data so if
the option is not one two and three it
needs to be four in order to quit the
application if it is not any of those it
just simply returns back and ask for a
new option so this is pretty simple with
respect to the implementation of console
application however as I mentioned I
need to implement all of these three
methods unlike open connection send data
and close connection so let me quickly
see on how I can write the open
connection supply to that I need to
connect to my node.js server in order to
connect to the server I need to have the
server details like which server it is
currently running and to which port it
is currently listening so all of those
details I need to provide usually you
will be getting all those details from
app dot config or any of the
configuration file but yes this is
demonstration I just hard code the
values so in this case I would like to
say something like string or equal to' i
can say 127 that 0.1 you can also
specify localhost there but to be more
specific i just mentioned 127 0.01 and
the port number in this case we would
like to connect to a 9000 so as you know
we are correct i mean my server is
currently listening at 9000 and at
localhost so that is the reason i just
wanted to provide those details
currently a hard order them but you can
make them configurable anyway and on top
of that I just wanted to maintain my
entire socket related connection of type
CCP client into a variable called client
itself so this is the class I am going
to use TCP client so if you come down
you are going to see the TCP client is
the class available under this names
so you need to import that namespace you
can see this is the namespace I'm using
and inside that namespace I have a class
called TCP client and this is my
instance all right now it is null so now
I'm going to have open connection so
that is the method which is going to be
executed
in order to have a connection to be
established to my node.js server so you
can see this is nothing but the one I am
writing here so under this first of all
I need to check whether the client is
null or not so if it is not novel which
means you are trying to open a
connection which has been already open
but yeah for which way we should not so
I'm going to check a quick sanity check
here saying that if my client is not
equal to now so which means it has been
already opened earlier and I wanted to
say something in red a console dot
foreground color equal to console
clutter I'd say in red I would like to
mention something like console dot write
line and inside that I wanted to say
connection is already open so this is
just a message to the use of saying that
the option is already open which means
the connection is already open we cannot
establish another connection on top of
the existing but imagine the connection
is not open so this is where we are
trying to create the instance of this
particular TCP client so for that what
was the first thing let us ensure that
no problems occur while connecting to my
TCP server so if any kind of error
occurs here the first thing I am going
to do is that let us make our client to
know which means no successful can
connection has been established so
whatever the instance I created I just
wanted to be deleting that instance and
garbage collector
so next thing is that if and of course
we are going to have something in error
here so that is an exception so
display that error in the fall of light
so I'm going to use the same statements
whatever I have in place so I'm going to
say all right and as part of this one I
need to display the error itself so I'm
just going to say error connection could
not be established and there on my
search the other message is going to be
the X dot message so this is the quick
exception handling if for some reason
the client is unable to get in touch
with server so first of all we need to
open the server here so which means I
need to create an instance of TCP client
after that I need to connect to this
whole stern to this port and after that
if it is successful we should be saying
that the connection is successful so
that is pretty easy so I can say client
equal to new TCP client and I can say
client that connect so I'm trying to
connect now so as part of this
connection I need to provide hostname
and port number so my host is available
in whole and port is available in port
so these two are the variable which are
already mentioned earlier so I'm just
using those two variables in order to
establish connection so if for some
reason this statement fails which means
it could not establish any connection
then automatically it is going to jump
into our catch block and it is going to
say what it is supposed to say so
imagine if it is connect if the
connection is successful it is going to
the next line so in this case I am going
to display something in green saying
that the connection has been established
it successfully so foreground or equal
to console' color dot green so inside
this I'm going to say console dot write
line and say connection established
success
fully so that's that is pretty much it
okay so this is what I have as part of
open connection so opening connection
means you are just opening the
connection and placing all those details
into client so if open connection is not
working we are going to have the same
kind of message to be handled in this
section so as the open connection is
complete the next thing is close
connections of course we need to still
have send data but let us work on the
close connection for now so I am going
to have one more method static wired a
close connection so in this close
connection I am going to use the same
wearable client just to close the
connection itself so before even closing
the connection we need to ensure that
the connection is already established
and we need to close it if the
connection itself is not established
there is no point of closing the
connection so it's just a quick sanity
check here so I have the client so if it
is already now so which means the
connection has been not established at
all so if that is the case I just wanted
to display an error message to the user
saying that the connection is not open
yet something similar to that so I am
going to say connection is not open or
already closed and I'm just going to
return after that so if it is not then I
need to close the connection which has
been established or they observed the
first thing I am going to say is
connection data flows and then I'm going
to say connection equal to now the
client itself I am setting it to now and
then I can say it has been closed
successful
so I just wanted to provide a different
message to the use of saying that the
connection is closed right in hello
it's a using hello I just wanted to say
it's connection closed successfully of
course we can also put this one in a fly
cache block so for some reason if it is
having any problems while doing this I
do not want to worry about any handling
of cache but inside finally I just
wanted to ensure that the client is
always set to null no matter what so
that is a better way to handle things
here so for some reason if it is having
some problems with the connection and if
it is a an exception we don't care all
we really need is close the connection
so whether or not this statement is
executing successfully we simply need
our client to be closed and a removed
from memory so that is what finally
which is going to be done and here we
are suppressing there or without doing
anything so this may be a better idea if
you really wanted to handle in a much
more better effective manner so now that
we have open connection and closed
connection we need to write a send data
so which means we need to have this
particular data whatever the user has
sent needs to be sent to TCP server
using the same client object of what we
have earlier connected so I am going to
say static wired send data and I'm going
to say string data so which means
whatever the value we are going to send
here is going to be reached in here so
as part of this the first thing is that
we need to ensure that the connection is
open and I just wanted to have a quick
thing like if it is not at all open it's
not a suppliant it is our client actual
so if the connection itself is not at
all open then we have to say like
so our foreground color I just wanted to
say in red saying that the connection is
not yet open console color that red ok
so inside this I'm going to say console
dot write line I can say something like
connection is not open or closed so I
just wanted to written after that so
imagine the connection is open and it is
working fine so now I need to send my
information to the server so sending the
information to the server is usually
done through streams so I need to get
the stream from the client in the form
of the network stream so I need to have
something like network stream and I just
wanted to have a reference variable
called network stream to be created and
I wanted to use my client dot get stream
so using this particular stream now I
can send all the information whatever is
supposed to be receiving by the server
itself so in order to do that I need to
send bytes so the data is in the form of
string but you need to send in the form
of bytes in this case so for that
purpose I wanted to hold all the bytes
to be sent in the form of a variable
called by its to send which is nothing
but a byte array so all I'm going to do
is using ASCII encoding I am going to
say please get by it's from the string
data so that is the easiest way on how I
can convert string into a byte array
once I get the string in the form of
byte array now I can use network stream
to actually send this bytes to sand
variable which means all the contents of
the bytes we have in this variable to be
sent across through network stream
so while it is doing I just wanted to
have something like a console dot let me
put something in foreground color here
so consoled our focal color here so I
just wanted to mention like and soul
colored yellow so just okay let me put a
different color here so I just wanted
ACS Yan so which means whatever the data
I am going to send to the user sorry to
the server needs to be put in cm after
that now I okay sending the data so let
me put this one in yellow after
receiving I wanted to put in the form of
scam so in the Aloha I am just going to
say something like console dot write
line and just wanted to say sending and
whatever the message you are trying to
send to the nodejs also in this case it
is data so I just wanted to send that so
once I have that now I really need to
send it so I mean now you going to use
network stream dot write is the method
which we are going to use and the bytes
to be sent so in this case it is bytes
to send and so that is the bytes array
and what are all the bytes I need to
send I start I say from 0 till the by
its length so which means all the bytes
whatever we have in the air needs to be
sent across so that is the easiest way
to send all the bytes through the
network stream so this is what is called
as sending so once we send we are going
to receive two why because in our case
you know it is a duplex kind where we
send it and we also receive it in order
to receive it we will be receiving in
the form of bites again so I would like
to have something like a byte array by
its in this case instead of sand I would
like to mention the sooners bytes to
read so
yes you bye daddy and I'm going to use
client dirty supersize so so that is the
default buffer size whatever we can make
use in order to get the receiving amount
of bytes right there
and once we know how many number of
bytes to read based on the server it is
returning back now we need to read all
of those using the same network stream
object we created earlier so in this
case I am going to say something like
bytes right of course we can make use of
bytes right available to really see how
many number of bytes did we receive in
theory so I would like to say networks
frame dot reader and then read all of
those into bytes to read array
starting from 0 to whatever the buffer
size we are going to receive so which
means the exact size on how much of
bytes or how many number bytes from a
ratio so that is the same size I am
going to use for creating the array and
reading the byte array itself from the
stream so once I read everything now I
would like to display some message to
the user and the form of Aeon and I'm
going to say instead of sending I would
like to say that receive so what kind of
data did with SEO so all the data
whatever we received is available in the
form of bytes to read so I am going to
you also in coding dot asking dot get
string so this is from the bytes to
string so I am going to say bytes to
read by storied comma 0 dot bytes read
so in that way put there one more
bracket here so bytes read is nothing
but this variable so I am using this
variable to know how many number of
bytes actually be really read and I'm
using the same thing here and I'm saying
that please get all the bytes available
in this array from position 0 to how
many number of bytes are rather convert
that to string and finally display it as
part of consulted right line so this is
pretty much it like we have open
connection close connections send data
and we have all of those three and we
have completed our application hopefully
this works with no problems so ensure
that our server is still working here
and you can see it is still working no
connections have been established from
the client till now so just to run it
and let me have the server this is still
the server and now we are going to have
the client so now you can see this is
our client and this is the server so
this is develop using c-sharp anthesis
develop using node.js so the first
option let me try to connect to my
server and now you can see it says
connection established it successfully
from the client and if we see at the
server you can see it has connected
successfully from the server too so that
so the server is currently handling or
maintaining the connection to this
client now I am going to send a
particular value or some kind of message
to the server by selecting 2 which means
I need to send some information to the
server so when I say 2 it is asking what
kind of data or what data do we want to
send in this case I'm going to say jack
and press enter and now you can say I'm
sending dragged and instead I received
hello jack from the server itself and if
you see from the server point of view
the server received
Jagr so similarly if you would like to
have something else like when or and
plus enter you can see how the second
option or second message has been
received by the server and how the
client has received from the server so
similarly I can send one more
like Scott similarly Schmitt so you can
see I always have the same kind of value
to be returning and the same kind of
values are reflected on the server
though finally I can close the
connection by sending three say here it
says connection closes successfully and
you can also see from the server the
connection from the client has been
closed by the client itself so if I try
to send it again without opening the
connection so let me see - and trying to
send and I'm sending Jack and now you
can see the same connection is not open
or closed so finally I quit my
application by pressing 4 and there we
go so while this particular application
is so simple it just explains the
concept on how to really communicate
with the TCP client but we certainly
have more effective ways to develop it
using asynchronous communications better
event handling and a better application
using windows phones or WPF so it all
adds up on top of what we already have
developed here so this is pretty much a
very proof-of-concept saying that a
dotnet based a TCP client can really
work with node.js base it is a Bissel</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>