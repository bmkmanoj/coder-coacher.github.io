<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to develop TCP Server (Network) application using NodeJs | Coder Coacher - Coaching Coders</title><meta content="How to develop TCP Server (Network) application using NodeJs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-CBT/">Tech CBT</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to develop TCP Server (Network) application using NodeJs</b></h2><h5 class="post__date">2015-07-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HyGtI17qAjM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we are going to develop a
simple tcp-based network server
application using node.js in order to
develop node.js applications using
Visual Studio you should have no GS and
no J's tools for Visual Studio already
installed on your machine if not please
go through my previous videos which
cover the same so let us start with file
new project and as long as you have
node.js for Visual Studio installed you
should be able to see JavaScript banj
and inside that you should be able to
see no GS click on that and you are
going to select blank node.js console
application for this video
I click OK so this is going to create a
node.js console application and you can
see I have after GS so after GS is the
beginning point of our particular
node.js application which is going to be
executed so the first statement I would
like to write here is wearable net equal
to require net so what exactly we are
doing here using require net so require
is very similar to using or import
statement in Java so you have using
statement in say char so essentially the
using statement means we are trying to
import certain modules or certain other
logic which may be available as part of
other files so even in this case net you
can just consider that is nothing but a
JavaScript file or ember JavaScript
module where we are trying to import
that particular module executed and once
it executes it it is going to return an
object and that particular object is
going to be stored in my own variable
called net it doesn't need to be the
same name as of net but that is just the
common practice so you can also go for
10 in this
so whatever so the main understanding of
required here is that it is going to
load an external javascript file and
that particular file once loaded is
going to be executed and once it is
executed it is going to return an object
to exports usually and once that
particular object is returned we are
going to hold that object inside
available reference or reference
variable called variable net so no J's
has got several built-in modules so net
is a built-in module similarly we have
HTTP and several other modules on top of
that we can have our own new modules to
be installed by going through this NPM
so NPM stands for node package manager
so we can always right-click on that and
say install new packages so packages or
modules mean the same here so in this
case we are saying that please get net
module which are which is already
available as part of default
installation of node.js itself so now
that we have reference of net module we
are going to create a server so I would
like to have a variable called server
and say net dot create server so this is
as simple as that I am saying that
please create a server and that
particular server instance is going to
be made available inside a variable
called server a server usually supposed
to listen somewhere and for that purpose
I will say that this particular server
has to listen at certain port number so
in this case I am saying that please
listen at port number 9000 so you can
provide any port number above thousand
24 to 65,000 something so in this case I
would just chose a random number as nine
thousand you can just put in like nine
nine nine and whatever so after that I
am saying that once it starts listening
I would like to provide a message to the
developer
at the server has started listening for
any of the requests so that is usually
provided in the form of a callback
function so in this case I can just say
console dot log and I can say so
listening to 9000 port so this is just
for our understanding here so we created
an instance of a server into the server
variable and then top of that we started
listening at this particular port number
9000 okay now that we have server
already started listening at 9,000 let
us consider and the moment it started
listening we are going to get this
message which is fine but its server
whenever it is listening obviously
should be able to handle the connections
or equal data and so on and at the same
time the server needs to respond with
some data whenever necessary so for that
purpose I am going to have a type with
an event called connection so this is
not connections on so on essentially you
are registering an event and in this
case connection is an event and that
whenever that particular event is fired
I would like to have a separate function
to be executed so let us see how this is
going to work so in this case what I am
saying is that whenever a new connection
comes in please execute my particular
function so that is essential so what I
am saying is I am going to listen at
9,000 port which is fine but whenever a
new connection comes to my server please
execute this particular function again a
connection is different and a request is
different from TCP perspective so this
is different from HTTP HTTP usually we
work with requests and response but from
the TCP point of view
first of all we make a connection and
once the connection has been made then
we will be trying to push some data
through the same connection and receive
the response based on the server it is
responding so in this case whenever a
connection has been made this is the
function which gets executed so in this
case I do not want to write much so all
I would like to say something like
console dot log and I can say something
like new client connection is made so
nothing much special saw just a simple
message so let us start what I mean let
us start executing this thing and make
sure that whatever the code we have
written is working fine so just execute
this and now you can see I got the same
message whatever I meant earlier server
listening to 9000 port so that there is
the same number I have in here but I did
not get this message new client
connection is made so that message is
not available here so let us test this
so which means in order to have a
connection to be made to do to my server
I need to have some other application
usually called as a client application
so the client essentially tries to
connect to this server and whenever any
client connects to this server it is
supposed to display this particular
message so in order to test that I need
to have any of the client to be
developed it could be another node.js
application or a c-sharp application
working with TCP sockets or whatever our
java application or asp.net MVC
application talking to node.js TCP
server it could be any other client
application but that particular
application should have TCP based
communication mechanism or communication
libraries support supported in order to
have certain connections to be made to
my server but in this case I'm not going
to develop any clients but I have
special tool called packet sender which
is freely downloadable so which means
you can just go to web and you can
download packet sender so you have that
and you go in here and once you go there
click on download and you are good to go
from there
so once you have that all you have to do
is open that package sender and you are
provided with very simple interface like
now and here you can just try any kind
of message which needs to be sent to my
server so in this case I just say test
nothing much special and IP address so
to which server you would like to talk
to in this case it is localhost so I can
just say localhost or i can also say 127
dot 0 dot 0 dot 1 so either of these two
mean the same so 127 dot 0 dot 0 dot 1
means it is a loopback adapter or you
can just say localhost so either of
these two should work and what is my
port number it is 9000 at this moment
sides just say 9000 and use in which
protocol you would like to connect using
TCP or UDP so in this case I developed
TCP based application or TCP based
server and I would like to have TCP to
be selected and click on send so the
moment I click on sand you can see I
already received or I can see the
message from the server saying that new
client connection has been made so you
can also see this is your request or the
first request to the server in order to
connect to that and these are all some
kind of responses whatever we're good
going to receive from the server so that
does not focus much on the responses at
this moment but you can see that from IP
which is nothing but EU or which is
nothing but myself in this case from
this port number so currently this is
working on a different port call this is
trying to connect the local hole
first to this port number using this TCP
and this is the information it is trying
to send and this is the hexadecimal
version of test so in that way you sent
a message the message has been forwarded
successfully to our server but we did
not handle the message yet but in this
case what we did was you know we simply
the made sure that once the connection
has been made we just wanted to have a
message to be displayed imagine I am
trying to send one more message
something like test and in this case
instead of test I would like to say
sample and click send and now you can
see there is one more connection which
has been made so which means once you
click on send for some reason this tool
actually opens a connection sends the
message and once some kind of response
has been received from the server it
closes the connection so all of this is
actually two things so we are making a
connection sending the message and once
you receive the message from the server
back you are actually closing the server
as well
so that is important but imagine you
would like to have a continuous
connection to be made so let us consider
I would like to send demo now I can say
persistent TCP so which means the
connection will be always made and it is
not closer unless you ask it to close so
that will be open forever unless you
really ask it to close and as long as it
is open you can send messages to the
same connection over and over again
without really having the overhead of
reopening the connection and closing
every time just like the HTTP does so
let us see whence I enable this and
clicks and you can see a new connection
has been made which is the third
connection now and from now on I can
send as many messages as possible
something like a clicks and and now you
can see I am actually sending a and
again I can say B
beebee so let me minimize this a bit and
click set and now you can see you are
using the same thing but no new
connections are being made it is still
working with the same connection over
and over again so I can send one more
and click send so it is not really
making new connections so it is working
on the same connection and sending the
messages using the same connection which
has been opened earlier ok so let me
close my node.js application for a
second now that we understood on how to
create a server how to make it listen at
a particular port number and how to make
sure that you are executing certain
functions or event handlers whenever new
connections has been made now is the
time to enhance actually this particular
application to the next level ok the
first thing you always have a property
called address or it is not a property
it is a functional function which is
going to be made available as part of
this server instance so you can always
say something like server dot add rows
so this is a special kind of method
which gives the current server related
address along with that particular port
number so let us see if this is working
fine in our case so let me execute this
and test it so forget about the first
line but the second line it says so
we're listening to something so it
returns something and it is called as
object and it is just saying like server
2 as this is returning an object it is
just concatenating directly to the
object so so this really doesn't make
sense in our scenario so what I would
like to do is I would like to have that
particular object whatever it is
returning to be serialized it to JSON
and then respond back or display back to
the user so for that purpose I can make
use of see kind of semantics here like
percentage s
desire for something like that and I
have percentage a so I can say comma now
so which means the first parameter here
I mean it is expecting a particular
value from the first parameter s because
this is the first one just like the C
programming language so whatever the
object I am getting here needs to be
serialized to Jason that is what percent
is J stands for and that what Klee jason
information has to be directly placed it
or inserted here at runtime so once I
press f5 now you can see it is totally
giving that entire object representation
in the form of jason like currently
address so it says : : which is nothing
but localhost and under what IP address
or relative information and the port
number is all so we do have certain
other methods which are going to be made
as part of this server that address now
let us try to understand server that
address in bit more depth how did I know
that there exists something like address
method which is made available as part
of server so the hint is dot creates our
so we already knew that this is the
method which is made available as part
of the module that is network module and
once you execute this particular method
we are going to get an instance and I am
calling that instance as server so let
us quickly look at the documentation of
create server and what it is returning
so for that purpose I can just open
browser and type in node.js Docs and let
us go to manual and documentation here
so inside that you are going to see API
documents and inside that you have all
of the table contents with several
modules and information and in that you
are going to seen that so this is the
module we are trying to use so you can
see there are four I mean
further other modules like HTTP HTTP and
you know file system and so on we are
actually concentrating on only this
module in this case so the moment I say
net so I click on that net and now you
can see this net essentially gives us
all the information related to what are
all the module I mean whatever the
classes or whatever all the methods it
has and how it is going to work the
entire documentation is available right
here so what we were using is net dot
create server this is the method we were
trying to execute and the moment we
click on that you can see you are going
to have more and more information about
it and even a sample about them so let
us again go back to the top so whenever
I execute create server which is a
method it is going to return an instance
of this particular class net dot server
so we are actually receiving an instance
of this class so this particular class
internal has got a method called address
so this is the address I am I mean this
is the method I am actually trying to
execute so if you would like to have
more information or more methods to be
learned this is the way to go you have
other methods like closed address I mean
and even the events tour you can see
this is the even time using connection
right that is the event I'm really
asking my particular event handler to be
handling that particular event so this
is my event handler which actually
registers with this event so if you
would like to register another event for
error you can see there is something
like error so you can have another event
handler which will be looking in the
same fashion like I can have so this
could be something like error so
whenever I get any error I can say like
some error has occurred so this is how
you can actually trap each of those
particular events and assign the event
handlers or any s even handlers in the
form of anonymous functions or you know
callback functions or whatever you would
like to call it as okay
so now that we have some understanding
about the create server we need to
understand the connection here so let us
look bit more depth into the connection
itself so let us open this and I have an
event connection so if I open this guy
you can see this event connection can
send a parameter of type socket so this
is pretty important so for example if it
is an even error I can have an error
object as parameter so which means if I
have an error I can get a particular
object straight from the event which
could be handled in this format so which
means this is the parameter which is
going to be instantiated by nodejs
itself and thrown to our function so all
the error related information whenever
it has occurred is going to be made
available as part of this particular
object similarly I am going to have
another object here called socket so
this is exactly what the documentation
says you're so connection event is
likely to throw a particular object for
more information so that particular
object is called socket object and do we
have any documentation for this socket
certainly as so if you go to the same
page at the top you are going to see net
dot socket so in fact it is going to
throw an instance of net dot socket
directly to our particular parameter so
this is nothing but an instance of net
dot socket and the instance is
automatically created or instantiated by
node.js framework itself so once I have
that again I will have the luxury for
all of these methods so for example let
us consider I would like to have a
remote address and remote port to be
accessed using the same socket object
so I go back here and I would like to
say wearable remote address equal to
socket dot remote address plus and they
can say socket dot remote forth so I'm
accessing these two properties remote
address and remote port directly using
the documentation itself so I have
remote address and remote board so I
would like to access those two
properties concatenate them into one
single variable remote address and I
would like to use that straight here so
in this case I would like to use
percentage s so instead of person is Jay
as be cut is a et it is of type string
so I can say a remote address okay
so let us see what is going on here so I
just execute this okay now it is
listening at nine thousand which is fine
so I go back to my packet sender so let
me close everything let us start
everything from the scratch for testing
so I open my packet sender and now I
would like to send a message
something like test which is going to be
sent to our particular server but it is
not going to be honored as because we
did not write any code for that so again
this is going to be localhost and I
would like to say 9000 and TCP flex
click send and now you can see I am
saying new client connection is made and
it has been made from this IP address
and from this port number so it is Doe
colon colon 1 or colon colon which is
nothing but localhost so come the
localhost from this port number a
connection has been made so if you look
here you can see it is nothing but for
nine two five six I have the same port
number
so we are trying to communicate which
means this packet sender application is
trying to communicate from this port
number to this port number so this
packet sender is trying to send the
message test to this port from this port
so we have a connection made between
these two ports on the same server as of
now so in that way we can have more and
more information once we have the
connection made and again the whole
point of this one is to get an
understanding about the socket so this
is this socket is not a request
just like HTTP so HTTP will always have
the requested response but in this case
it is the complete socket socket means
it maintains the connection once it has
made made until and unless it has been
asked to close so this is pretty
important so as long as the client does
not close the connection nodejs works
with the same socket object okay
so now that we have some understanding
about the socket now let us try to grab
whatever you are sending so here you
were sending test even though my server
is receiving it we are not handling it
so let me handle whatever the data it is
being sent so let me quickly jump to our
documentation here and let us see what
are all the events we have we can see we
have the events like data error close
and so on so let me register all those
events as part of my particular
connection so which means as part of
this one I can say socket that on I
would like to register for data and
similarly I would like to register for a
couple more events so in this case
whenever I have close event and
similarly whenever I have error so
usually close means once it has been
closed it is gone to the socket itself
gun so which means the socket gets
completely destroyed once a connection
has been closed if the connection is not
closed the socket will never be
destroyed and the same socket will be
used for subsequent communications so
yes close you know we can just handle it
only once so here in this case I can
send the data multiple number of times
but I can close only once so it is it is
not necessary actually to have the on to
be mentioned for a closed event so close
event is usually fired once only for the
socket so for that purpose we better go
with once instead of all okay so now
that we have three of those particular
events we need to handle data event
first so which means this is the
function which gets executed the moment
we have any kind of data related event
okay
and this particular data event let us
see what it does let me go to the data
event here and this particular data
event is currently having a parameter
called buffer okay so to make our life
easier I just wanted to put something
like D so D is what the user is going to
send or the client is going to send so
just let me have this particular D it
would directly displayed as part of my
console and see what's going on so in
this case I would like to say something
like okay connection data from where it
is coming so in this case I would like
to say post as s okay and what is the
data so I would like to have another
person is s here and I would like to say
a remote address
and D okay so what I'm saying is that
the data from so let's say data from so
okay so data from this particular
connection so this is what I'm saying
data from this connection so what is
this percentages there is nothing but
remote address what we already had
earlier so the remote address will be
displayed here so which means whatever
the data received from this remote
address is going to be displayed here
and this directly resembles D whatever
it is going to be sent so this D is
automatically created by nodejs and will
be thrown to all function so let us see
how this is working so I just execute it
okay let me close this packet and
restart it from the beginning and it's
the our server started listening so let
me now say test and two IP address
localhost 9000 and click send and now
you can see I actually got test
automatically so I am saying that data
from this particular remote client I
received test so imagine I am going to
send something else so in this case I
would like to say demo and click send
you can see for each and every click I'm
actually having a new client connection
being made and that is important and you
can also see how I am having the
respective information here so for the
first time I am sending test second time
I sent demo and you can see that is what
I am displaying at the server similarly
I can say something like sample and
clicks and and every time I click like
that it is actually creating a new
connection and then that particular
connection is being used I mean the new
connection is being used to actually
send that information imagine I would
like to select this own
and then I would like to say AAA click
sand a new connection has been made you
can see 2 6 3 &amp;amp; AAA has been sent and
now let me say BBB click Santa and now
from now onwards it is not going to make
any kind of connection but instead it
uses the same connection over and over
again without closing it or without
recreating the new connections so if you
switch back to our log you are going to
see all of the information I am actually
sending across ok now let us modify this
a bit so let me close everything
whatever I have in here so let me close
myself as well now currently I'm just a
receiving data from the client let us
consider I would like to send some
information back to the client so for
that purpose
this particular socket object has got a
method called right so if you go to the
top and let us quickly examine the
socket class here it has got right so I
am going to use this one and as you can
see it is actually accepting some kind
of data whatever you would like to sign
and once this data has been completed if
you would like to have any function to
execute you can have that function to be
provided and it is optional so which
means once the data has been sent to the
client if you would like to have any
callback function to be executed you can
still provide it but for now I just
wanted to go with the only data which
means whatever the information I would
like to send to the client you can just
send it by using right and the data you
would like to send so let me use the
same thing here so I would like to say
socket dot right and I can say hello
with the same data whatever I received
through the client so I am using the
same D here so which means if I send
something like Scott it is going to say
hello Scott and that is going to be
written directly to the client itself so
let us make even these things clear so
on close I would like to say
console dot log connection from
percentage s closed so I would like to
say this one as remote address so which
means whatever the remote address we are
currently working with the connection I
mean socket is going to be displayed
here so I just wanted to mention to the
user something like the connection for
the current socket has been closed
similarly if I have any errors here I
would like to say oh I would like to use
the same kind of message here and I just
wanted to mention something like
connection error
so connection just give me the name of
the remote address there and a error and
now I would like to have the error
related details to be displayed so as I
mentioned error can have an object like
ER R so I can use the same object here
and that particular object internally
has a property called message so that
particular object has a property called
message so where is that okay I don't
have it here but I am pretty sure that I
have the message property which is made
available as part of this particular
object to get the error message so this
makes our particular socket complete so
which means you have created the server
here you are listening to the port here
once a connection is being made you are
saying that all these operations need to
be working for that particular
connection so whenever I say connection
you are talking to its socket a socket
is one single connection or persistent
connection between the client and the
server so as long as the circuit socket
is in place you are actually working
with those events on
earned on so sorry events data clothes
and error so this is the event which
gets fired whenever the client sends
some information to the server and that
information whatever the client has sent
to that server is going to be stored in
D and we are using the same D to display
the server and add some message and to
the same D and sent back to the client
so we are going to see that one
and if client for some reason closes the
connection or closes that particular
persistent connection the server is
going to raise again event called close
and we are going to display that
particular message at the server for
some reason if the client abnormally
terminates it or it doesn't close in a
regular fashion which means the socket
is not closed in a regular fashion or
having some problems in the network or
whatever those errors might arise and we
are saying that please display that
particular remote address with the
respect to error message start at the
server so let us test all of these
together so I execute this and now it is
listening so let me open my packet
sender and now I am NOT going to use
persistent TCP so if I don't use
persistent TCP you can see how it works
so I am saying that please send Jack to
localhost 9000 and again I am not using
persistent TCP so if I am not using
persistent TCP it opens the connection
sends the message and closes the
connection immediately so let us click
send and see what's going on now you can
see a connection has been made at the
server received the data and the
connection is closed so you can see the
same connection has been opened the
message has been received and the
connection has been closed by the client
immediately and let us see the log here
you can see I
Jagr however from the server I received
hello jaga
select mcclee at the log and test it
once again so instead of jaga I would
like to see Scott and sis and and now
you can see I'm actually having a new
server opened you can see that four nine
two six eight it's not new server it is
new connection what's a new socket which
has been opened and in return after
sending Scott I am returning I am
getting this one straight from the
server so in that way I have all of the
necessary information to be actually
handled at the server where I am going
to handle how the messages are going to
be received and how I can send back how
I can handle closed and how I can handle
error if you would like to have any kind
of colors or whatever to be added to
these particular messages we can
actually work with some external module
called colors so for that purpose you
can just go in here right click and
install new NPM packages so in here
search for colors and let us take the
first one which is get colors in your
node.js console so if you would like to
have any kind of colors to be made
available as part of your console we can
just make use of this and make sure that
add the package is always checked and
click install package so the moment I do
that it is going to get that module or
say package into our particular
application and you can see I have
colors module installed colors package
installed as part of my project and if
you open package dot Jason you are going
to see the dependencies right here so
which means I have installed something
like colors so that is the dependency
module or dependency package so my
particular node.js application or
package is currently depending on this
module that is all this one says ok so
now let us close this and now I would
like to have all sorts of color
to be added for this one for that
purpose the first thing is that once a
particular module is made available to
your node.js application we need to
import it and ask you to execute it and
in return we are going to have an
instance after the execution of that
particular JavaScript file so in this
case I would like to say colors equal to
or require colors so what this one means
is please go to this javascript file
called colors executed I mean loaded
executed and once the execution has
finished please get the returnable
object in two colors so this is the
object which holds everything related to
the colors module so now I can say
server listening to so currently I just
wanted to leave it as white but I would
like to give better things for new
client connection is made and I would
like to say dot green and you can see
the intelligence is quite powerful here
so it automatically knows like we are
going to have these particular members
to be made available as part of the
respective strengths here and similarly
if the data is has been sent then I
would like to have something like C on
that is the color I would like to have
and if I'm actually closing a connection
from the client I would like to have
that one to be displayed in the form of
ello and if there is an error I would
like to have that one as it right so let
us see how this is going to work so I
execute this and now you can see as I
did not put any color for server
listening it is just like that right
there
so I clear everything and now I am going
to have the same Scott to the localhost
to 9000 to be sent and now you can see I
have the connection which has been made
and at the same time displayed in the
form of green and similarly I have scan
I also have everything in the form of
respective colors to what I have defined
so right now I do not have any kind of
errors here so that is the reason I
could not demonstrate the red color here
so otherwise we are going to have the
error messages which would also be
displayed in the form of red color</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>