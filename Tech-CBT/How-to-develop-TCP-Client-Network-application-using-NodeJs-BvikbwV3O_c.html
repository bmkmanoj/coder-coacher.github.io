<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to develop TCP Client (Network) application using NodeJs | Coder Coacher - Coaching Coders</title><meta content="How to develop TCP Client (Network) application using NodeJs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-CBT/">Tech CBT</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to develop TCP Client (Network) application using NodeJs</b></h2><h5 class="post__date">2015-07-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BvikbwV3O_c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we are going to develop
nodejs based the TCP client which
communicates with node.js TCP server in
my previous video I already covered on
how to develop and test a simple node.js
based TCP server application I am going
to use the same TCP server application
whatever I developed earlier in order to
develop this new TCP client let us
quickly check on what TCP server
application I currently have so if you
see this I have a project called node.js
console application so in fact this is
nothing but the TCP server application
we developed as part of the previous
video so let us quickly run this and see
what's going on so this is my server
currently listening at port number 9000
so I can quickly check and test this
particular TCP server using a packet
sender utility so this is the utility
which I am going to use in order to test
my TCP server application so I am going
to say that this is the message or this
is the name I am sending to the server
so jag this is the string which is going
to be sent to the user sorry
sent to the server application and what
is the destination so I am saying that
my TCP server is currently listening at
localhost and that at port number 9000
so you can see the address is currently
localhost here and the port number is
9000 so this is the utility which tries
to communicate with any of the TCP
services available so as long as you
have access to that so you can say it is
localhost indirectly and I am saying
that I am going to send this string to
this TCP server which is listening at
port number 9000 in localhost and you
can see currently I'm using TCP IP
protocol instead of UDP so I select ACP
IP here and click send
and the moment is sent you can say first
of all there was a new client connection
which has been made by four nine four
five seven so you can see that is the
front port and the data the server has
received so it has received the data
from this port which is four nine four
five seven and the data is Jack and the
server has responded back to the same
port number and the response is hello
jag in this case so you can see it is
from nine thousand to the current port
so it has sent hello jack in reverse and
once that whole part is done this
utility has immediately closed the
connection which is fine so I just close
this for now so we developed the TCP
server earlier and we tested it using a
third party utility called packet sender
but now I would like to have a new TCP
client to be developed which actually
communicates with the same server and
tries to communicate or pass messages
just like what we did earlier so there
are various ways to develop TCP clients
you can develop using C sharp or Java or
nodejs itself so in this video I am
going to develop a nodejs based TCP
client application so let me close this
first for now so this is the server
application I just wanted to minimize
this and let me start a new solution
altogether so let me start right click
run as administrator click ass and I am
going to have a new visual studio
solution instance opened and now I am
going to start creating a new TCP client
using no gf so I click on file new
project and then here I am going to have
sorry
inside this JavaScript we are going to
have the node.js and in this case I am
going to select a node.js console
application and I would like to call
this one as no
Jazze TCP client whatever you would like
to mention so I just look okay for now
so we are ready to develop the node.js
based the TCP client so first things
first
node.js is completely based on the
pattern of asynchronous programming so
which means any kind of communication or
the methodology to connect or to work
with various other processors towards
the communication or i/o or file or
database or anything else is usually
done using a synchronous programming
methodology so even in this case in
order to communicate with the tcp/ip
server we are going to have the
asynchronous model to be started I mean
developed so initially imagined I would
like to have a function menu to be
developed and would like to get it
executed so first things first even
before starting with the menu we need to
have certain other things to be done for
example I would like to have the user to
be providing some kind of value which
needs to be sent to the TCP server so
which means our node.js TCP client has
to prompt for the user to actually type
in some information and take that
information into account and pass the
same information to TCP server so for
that purpose I would need some kind of
string to be read directly comes from
the console so for that purpose we can
use a third-party module or node package
called the redline sync so in order to
do that first of all I'm going to add
that one saying that install new and PM
packages okay
so as part of this just type in read
lines sync and you are going to see this
so this is a synchronous
lines which means no js' will be
literally waiting for the user to type
in some information it will not proceed
anything else other than waiting for
your particular input so that is called
synchronized red line so it will stop
for the user's input so I select this
and I would like to add that one to the
package dot Jason in this case and
finally click install and click close
and in your node.js modules you should
be able to see a red line sync and in
your package dot Jason you should be
able to see a red line sync after
installation so in order to use that I
would like to have a variable to be
declared called red line sync which is
going to use the same module called
require I mean red line sync so that is
the same module I would like to use so
that is the first thing and the next
thing is that in order to have a better
look and feel towards colors like you
know that's the color whenever you sent
a message the color whenever you receive
a message the color whenever any error
occurs like if a error
it has to be read something of that sort
so that it will be much more what is a
better from the visual perspective of
your console application so for that
purpose I would like to add one more
package called colors so I'm going to
use colors one point one point two for
now I am not quite sure about others but
I frequently use this guy so it's just
go for this one and click install first
make sure that I had two package is
always on so I installed this one too
and we should be able to see in package
dot Jason colors is also added so let me
get the instance of color also here so I
am going to see require colors so that
is the next module
I am I
and as we are working with TCP client
obviously we are working with networking
module so in order to have the network
related stuff so I would like to import
even the networking module tour so which
means we are going to have the net which
is the module exclusively dedicated to
have PCP based communications so I am
getting the instance of that mentor in
the form of a variable called net so now
that we have everything we need to have
a couple more variables so that you know
we can connect to our particular server
so in this case I would like to have two
variables called the host and one more
called port so which means to which host
you would like to connect and to what
port you would like to connect as part
of your server so I am going to say like
I would like to connect to 127 dot 0 dot
0 dot 1 so which means it is nothing but
the local host and to which port II I
would like to connect it is going to be
9,000 for now so this is a client
application so we are developing a
client application which is going to
connect to my server which is hosted at
localhost and listening at port number
9000 so that is what I am going to
provide there and all of the
communications I would like to have
which means the TCP client instance I
would like to maintain an available
called variable client and currently it
is going to be null for now so which
means whenever I create an instance of
TCP client connection and so on or the
socket especially the client socket that
is going to be stored in client so
anyway that is going to be null for now
and going further as I mentioned earlier
I would like to have a function called
menu so the main responsibility of this
function is to display menu to the user
or to prompt a kind of menu and at the
same time wait for the user to provide
some
value and based on that particular value
it has to do on its own so I would like
to provide a couple of options for the
user like opening opening a connection
sending data closing the connection or
quit this client application altogether
so I would like to have four options to
be provided to the user and based on
those four options the user can select
any of those options by providing one
two three four one means opening the
connection to means send data three
means close connection and four could be
like exit our application something
similar to that so I just wanted to make
this one as simple as possible
so I would like to have a function menu
to be developed so as part of this
function first thing I would like to
read a message or say read an input from
the user so for that purpose I am going
to use a red line sync which is nothing
but what we have instantiated earlier
and while reading a line of input from
the user I would like to provide a
question so it is nothing but our menu
so I would like to say ass and like
enter option so I am going to say the
first so when the user types one it is
nothing for open opening a connection to
means send data three means close for
males with my application and something
similar to that so I would like to have
a particular input from the user
so all this particular line does is it
displays this message first
to the console so this whole message
will be displayed to the console and it
waits for the user to provide input so
that input could be any value between 1
to 4 so 1 2 3 4 whatever the value and
again we are not validating the values
here it accepts any string so
as long as it is one two three four we
need to provide a certain operation to
be performed otherwise we just keep on
reading the new option forever so once
we have the line read so which means we
already got the input from the user the
user must have selected by providing one
two three or four so once I have the
user input I would like to say switch
line read so which means based on
whatever the input we have in here I
would like to say if it is case 1 so
just for our sake I would like to say
console dot log option one selected so
just wanted to check if this is going to
work as we want it to have it so break
similarly I would like to have case two
and I'm going to say console that log
option two selected similarly I can have
two more cases case three and case 4
so in this case I would like to say case
three which is nothing but option three
selected case for which means often four
is selected on top of all of these if
the user provides anything other than
these four options I would like to say
default so within the default I would
like to say again go back to with the
same function called menu say reacts
acute the same function menu and get the
data again okay and then I am going to
say break so this is why this is a
simple thing I would like to accomplish
okay now that we have everything in
place like the menu is going to be read
and we have you know this particular
line which essentially prompts for the
user to accept some value and everything
is in place but there are a couple of
things
there is no asynchronous model currently
made available as part of this one but
as I mentioned we need to have all of
the programming pattern to be always
developed by having a synchronous model
in your mind so for example in this case
menu it is synchronous which means this
nice to execute this and again after
this this is going to try to execute
this and this and this and this forever
so that is not how I would like to
accomplish the things here so why
because if this is always synchro's
which means this menu is going to be
nested forever so which means it will be
always added to the stack or and/or and
over again and it will never come back
and in an unless our application is
finished so that may lead to memory
leaks as well so we need to have many to
be executed however the calling function
should automatically execute but the
called function should proceed as usual
so which means I call menu it has to do
the menu however it should not wait in
order to complete that particular
execution so I do not want this card to
be waiting forever in order to complete
this call it has to complete immediately
however once this is called it has to
take on to the next one so for that
purpose I am going to use a simple
option here with a set timeout of course
there are other better ways of writing
this
as part of our node.js but I just wanted
to have things to be made simpler here
so there are more efficient ways and in
fact this is not quite efficient way
usually we use process dot next tick so
that is the method we are going to use
but I just want don't want to go into
that that much depth here as because we
need to cover all the event loops and
everything the theory behind it so I
just wanted to make this one simple I am
going to use say timeout so similarly I
am going to use the same thing here okay
so which means I am going to have menu
to be executed but it is not going to
wait for us so once that is called it
will be waiting but the function will be
waiting for the user input but not the
previous function which tried to call
this so now I save this and let us try
to execute this
okay so you can see it is waiting for
the options now let us consider I am
trying to give something like this and
now you can see that it is going to do
some yes because I did not provide some
value 1 2 3 4 it is not going to provide
any of the message here but instead it
is going to return back to the same
thing and it tries to ask for new input
but imagine if I press 1 and press Enter
you can see it says option 1 selected
and the menu is out automatically but
imagine I would like to have this menu
to be repeating forever which means
after option 1 selected again I would
like to have enter option to be prompted
so these options need to be prompted
forever even though I select a proper
option so for that purpose I am going to
use whatever I have in here even here so
which means immediately after the option
has been selected I would like to have
the same menu to be called over and over
again so let me execute this now I say 1
and you can see option 1 selected but
you can see after some weight why
because it has to execute the sign said
timeout and everything so it has come
back so I say to and you can see it says
option to select it and after a couple
more seconds it is going to give one
more as I said this is not the most
efficient way but there's there are
other efficient ways to accomplish the
same but I just wanted to make this one
simple so I say 3 and you can see it is
still waiting for option 3 selected and
after this if I select something like
this you can say it is going to simply
skip the message and go out but 4 is
supposed to be quitting but instead it
is not going to quit as because I
actually put in 4 also to be calling the
menu so in this case even after option
for has been selected it is still opting
for the
saij also the opting for the input so
let me close this and remove this option
right here so I do not want the menu to
be executed if option 4 has been
selected so let me test it once again so
I go here I click 1 I mean I select 1
and you can see option 1 selected and I
have option 2 selected and if I select
option 4 now you can see options for is
done and it is never going to give this
message enter option again so it never
prompts for the user the application is
already done so I can just press ctrl C
to close everything so this is a very
simple menu I have all I really wanted
to express or explain here is about the
red line sync and our asynchronous
programming model so as I wanted to make
it simple I am using set timeout so if
you would like to make it more robust
there are other options which are
available as part of node.js framework
and we really need to have those kind of
implementations rather than set timeout
ok so now that we have some
understanding about our menu so let us
go to the implementations so default I
just wanted to leave this one as usual
so if option 1 is selected what I am
supposed to do so I would like to call a
function called open connection so that
is the function I am going to write and
if option 2 is selected I would like to
say please get some data from user by
using the same red line sync and I am
going to say question enter a data to
send so this is the question I am going
to provide and on top of that I would
like to have another function to be
developed called signed data so this is
the function which access whatever the
data we receive from user which is
essentially nothing but some string
so if option three is selected I would
like to call another function called a
close connection and if option four is
selected all I really want to have is
just return so nothing much so we have
our menu related function completed
successfully however we still need to
implement open connections and data and
close connection let us start with open
connection so I need to implement a new
function called open connection so let
me copy this
let me collapse this whole menu
altogether and I am going to develop a
new function called open connection so
what is this supported supposed to do so
this is a function which is essentially
supposed to open a socket so a client
socket so we have the socket which means
it is nothing but the endpoint either
from the client or from the server so in
this case I would like to create a new
socket and always make it available as
part of the client so that other
functions can use the same socket
connection what we might be already
having so for that purpose before even
opening the connection I just wanted to
make sure that we do not open multiple
connections by using the same socket so
for the I mean we do not want multiple
sockets to be opening from the same
application so I would like to have this
particular application to work with only
one single instance of socket at any
moment for that purpose I am going to
quickly check if my client which is
nothing but this variable if it has
already operators which means that
socket has been already created so if
such is the case I would like to say
something like an action is already open
and I would like to have this message to
be displayed in red as because that is
not supposed to happen or if the user
selects the wrong choice and if he has
already opened the connection and we are
trying to reopen the same connection
that is not that good
so for that purpose this is what I am
going to provide as a message and after
this all I would like to say is that
immediately we execute this menu so
which means whatever I have in here
I'm just saying like please show me the
menu and return immediately after this
so which means it displays the error
message connection is already open and
then it again goes back to my menu and
tries to ask the new option from the
user and I'm saying please do not wait
till dis completes but you just go out
by going return so which means it will
not stop here if it stops it is
synchronous if it doesn't stop goes to
the next line it is a synchronous so
which means this will be accomplished
but in a different way however this does
not stop
while that particular way is being
accomplished anyway so now that we have
this sanity check whether the client is
open or not if it is open it is going to
display message but imagine the client
is not populated so which means it is
not null in this case I am going to
create a new socket client equal to new
net dot socket so as I mentioned we are
using net here and you can see at the
same time using the socket class which
is made available as part of node.js so
I created the new socket and now on top
of that I would like to have all kinds
of events to be registered so which
means if any error occurs or if we
receive any data from the server or if
we actually connect to the server what
should happen on all of that particular
stuff so currently I would like to just
register only for two events which is
error and data so I would like to say on
error so I have on and
this intellisense is giving me some
trouble so I do not want intelligence
here and I'm going to say on if I
receive error just call this function
that is the callback function I am going
to give and I'm saying that please
populate that particular error message
into the object er and I'm going to say
if there is an error I would like to
have the client to be destroyed
altogether so which means I am closing
the socket
I mean I'm destroying the socket
altogether and on top of that I would
like to also say client equal to null so
that the socket connection or the socket
instance is completely lost in memory
and to be garbage collected eventually
and on top of that I would like to
display message like a connection error
exists here so I would like to say
connection could not be opened and let
us provide some message like percent is
s so I would like to provide that
message in the form of Fred and I am
going to say error message so I am going
to use this particular er r dot message
to get the real message out of it and if
there is an error all this happens and
immediately I would like to have the
menu to be displayed so that is how I am
going to have it so whenever I receive
an error this is the function it is
trying to execute I display the message
of course ID I nullify the client
whatever I have or remove the socket
first and then I'm going to have that
particular message to be displayed and
redisplay the menu for connecting again
ok now that we have completed this error
event let us register for data event so
let me go further on and data event so
which means this is the event which is
going to be fired whenever our client
receives a message or any kind of
information back from the so
so this is the receiving event so which
means if our client receives any
information from the server this is
going to be hit and I would like to have
a callback function to be made available
here so all the information I would like
to make sure that it is available as
part of this object and as part of this
one I just wanted to display the same
message I am having so instead of error
message I'm going to display something
like receive and I would like to give
percentage yes however I would like to
have this one with color scan and I'm
not going to have error dot message here
I just need data so again once the data
has been received and it has been
displayed I would like to read display
our menu back so those two are the
events we are going to handle for now so
how did I get those two events those are
directly from the socket class so we can
quickly check the documentation so let
us go to node.js manual documentation
here okay so in this we are going to see
the net module so if you open that we
are going to see socket net that socket
that is the class and in that you are
going to see the events so you can see
right now I am using data and error
events so you can use other events as
necessary so all the information is
going to be made available whenever you
click on the respective events so if I
go to the error you can see it is
actually going to pass a parameter
called error object so this is nothing
but the parameter we are using right
here so this is going to be discussed as
they provide here so similarly we also
have data here so say it is actually
sending power we actually put that on as
data in our case so that is quickly
about how the documentation is with rest
2news dots I'm in that dot socket so now
that we have both of these we have not
connected to the server yet we created
the socket we are handling the events
but we did not connect to the socket or
we did not connect it to the server
socket yet so we need to connect to the
TCP server so we already have host and
port numbers made available at the top
so we are going to use those both in
order to connect to the server using the
same socket I have in add the client so
I am going to say client dot Connect
so while connecting it first of all it
needs port number which is already
available at my I mean which is already
available at the top in the form of
available here so similarly after the
port I need to provide a host which is
nothing but where the server is
currently listening at what IP address
or the server name whatever and the
callback function so which means if the
connection I mean after this particular
connection happened this is the function
which is going to be executed so I would
like to have something to build it on
once it is connected so for that purpose
I am going to call the same message or
something like console dot log I can say
connection opened successfully and I
would like to have this one in green for
now so that is the message I have and
once the connection has been successful
I again would like to have the menu to
be displayed so the user might have
selected the option one which means open
connection so once the open connection
is executed we will be ending up with a
connect to the server once the
connection has been accomplished
successfully we still want our menu back
in order to send some
later so that is the reason I am
selecting menu here so once that is done
we the user can select send or closed or
whatever so this is pretty much about
what we have in open connection okay now
let us go to the send data so we need to
implement send data right now so that is
going to be straightforward so let us
start with send data and user as you
know send data accepts a parameter that
is nothing but whatever the user has
provided it is also called input or
input string or whatever so I currently
called it as data so let me use the same
variable here you can also use other
things so just wanted to use a variable
data there
so whatever the user has typed in after
this prompt that particular line will be
made available here so we already have
our socket opened so imagine that socket
is not opened but the user is trying to
send the data so we need to check that
option so which means if the socket is
not opened but we are trying to send the
data so which means the user has
selected directly option 2 without
really selecting option 1 so let us
quickly check that option so I am going
to say if the client itself is not
populated which means if it is now then
I am going to say console dot log I can
say connection is not open or closed
something of that message and I wanted
to have this message in red color and
immediately after that I would like to
have this menu to be displayed back to
the user and I am going to set it all so
if the client is not connected which
means the socket is not opened it is
going to display that message and
redisplay the menu so that the user can
select open the connection first
and if the client or save the socket is
already open all we have to do is just
send this information to the server in
order to send information to the server
we are going to use the socket dot right
we have only one method simple method
say a light which can essentially accept
data and in this case I am going to have
data here so I just wanted to make it
simple here I do not want to go with
other options available but if you need
more options as I mentioned this right
is going to be made available in the
documentation in the same fashion as ice
I have drawn earlier so if you go to API
and if you go to net you're going to see
net dot socket and you are going to see
the right so this data is also having
the encoding style together with
callback so which means if it has sent
successfully if the message has been
sent successfully to the server it is
going to execute the callback for now I
am NOT going to use that but if you want
it you can use it so that is pretty much
about send data as I just wanted to
collapse this one and the other one what
we are missing is post connections
let me implement that window so I am
going to say close connection so which
is another function so in this case I am
going to say again the same thing
whatever I have earlier so let me copy
and fish paste this one first so if the
client is not already open I don't
really need to close it so I just wanted
to give that message or I can say
connection is not open or already closed
somethings better than the previous one
so that we will understand which option
is being selected so during the closing
of connection all I have to do is socket
destroy first and then socket needs to
be nullified so that it can be garbage
collected and on top of that I would
like to
with some message to the user that the
connection has been closed so I would
like to say something like connection
closed successfully and I would like to
have this one in the form of hello and
once everything is done again I had to
give this option back to the user saying
that you know the that particular user
has to still work with this one so
similarly I have open connection here
which is already doing that part and on
top of that what else we have so this is
pretty much it whatever we have okay so
after send data it is going to have all
that but yeah we forgot one more thing
actually that is we need to ensure that
after sending the data again it has to
display the menu back and similarly
after opening the connection we still
want to have the same menu back to be
shown to the user so we need to have all
of these things I forgot all that stuff
so let me execute and see if this is
working so prior to this okay let me
execute this first okay so now I am
trying to open the connection but the
server is not listening yet why because
you can see I did not execute my server
the server is not listening but still I
am trying to connect to my server let us
see what's going on and now you can see
it says error connection could not be
opened and this is the message I
received from the error object directly
connect a connection refused so that is
the error message whatever I have
received and as is as we are using set
timeout it is going to take some time
there and it is going to return back to
our menu back so I keep this like this
and let us switch back to my server
application
and let us start missile application and
let it start listening now you can see
the server application is listening now
and let me get the client application
where is this guy this is my client
application so I have my server
application here and my client
application here so let me select option
1 now okay I have some trouble here so
let me stop this I still want to have my
server to be listening as usual let me
stop here I think I did have a mistake
here once I opened the connection so I
don't really need this option actually
it is already opened and then it is
going to be returned back and similarly
I don't need this one either so I need
that only for the close connection okay
so let me execute this and now I have
this ok my server is closed so let me
execute this I have my server and I have
my client so let me select one now and
now you can see the connection has been
open successfully so which means the
socket has been created and you can also
see to which port number it is connected
so a new connection has been made and
you can see this the client connection
is not closed yet so the moment I say
closed which is 3 and say yes and you
can see connection close it successfully
and you can also see the same port
number 4 9 5 to 6 that is how I
connected through my socket is saying it
is closed as well so until and unless
you ask it to close it is not going to
close it so that is how I can have the
options to be selected so either I can
have the connection to be opened or
closed by selecting 1 or 3
and now again that is open the
connection
which has been open successfully and now
I would like to have some kind of
information to be sent to the sower so
select option two and once I select
option 2 it is asking for some data to
be sent to the server so I'm going to
say Jagga and press enter
and now you can see the server has
received my message jack and the server
has replied back with hello jack so this
is what my client has received and he
concerned he has many strings as
possible I can say Scott and you can see
scott has been received and similarly I
select the same option and say Smith and
you can see Smith has been selected and
we will receive all those and finally I
say three so which means the connection
needs to be closed and you can also see
the services the connection has been
closed from the same client and finally
I quit so once I quit you are done there
and finally plus control C so that he
will be closed so in that way we
developed a particular tcp/ip client
application using node.js before closing
this session we need to have a quick
understanding on why I actually wrote
set time out menu as the last statement
in the close connection but I did not
write that here and I did not write that
one here as well which is supposed to be
part of open connection so you can see
in the open connection I did not have
menu as my last statement send data I
did not have many as last statement but
for close connection
I said menu is my last statement so why
the other two doesn't have don't have
but the latest one does have so we need
to understand the flow of execution so
let us start from here so the open
connection has been made so which means
at some point after this open connection
has been made this function menu needs
to be called in one way or another right
now I am not calling immediately after
open connection so that is not being
called here and after this statement it
is going to break so it means out of
switch so I do not have any menu here so
which means this function has been
completed successfully once open
connection has been made so we are not
calling this menu over and over again as
part of open connection so that is for
sure but ends at some point after
opening the connection we are still
getting this prompt so which means this
menu is getting executed at some point
after opening the connection and where
is that happening that is actually
happening right here so after the
connection has been made I am saying
that please display the menu back so
this is where I am saying please get the
menu back so we don't need another menu
here so in fact even if you write a menu
here it is trying to get that menu even
before it is trying to get it connected
way because this connection is
asynchronous so the connection is trying
to be made and while it is going in its
own way to try to make we are saying
that please get the menu and option from
the user immediately so those two are
going to be clashing to each other so we
should be very careful where we are
writing or developing asynchronous based
applications we should really do or code
at the particular point where the
particular flow really stops and starts
we cannot simply think in the terms of
synchronous programming or synchronous
execution so in fact even though the
open connection automatically terminates
first so which means I have all of these
statements once I call open connection
in my menu you are saying that please
execute this function the execution of
this function may terminate much earlier
however this particular connection may
take a while to execute or say to get it
connected imagine this connection is
actually taking 30 seconds to connect to
the server but open connection function
will not wait that much longer
it immediately terminates the moment it
has passed through this statement which
means it says that please connect on
your own take your own time but I am NOT
I am going to finish on my own so this
open connection execution will not wait
for this particular statement to
complete it is this connect methods job
to execute this function once it has
established the connection but it is not
the job of open connection function to
really wait for this particular method
to complete this is very very important
to understand as part of asynchronous
and synchronous executions similarly let
us consider the send data so all I am
doing from here is I am just calling
send data so after getting the input
from the user I am saying that please
send some data to the server and I'm not
calling menu immediately after this it
is going to complete immediately just
like open connections so this menu once
it calls here this part is done it is
going to break immediately and if you
see send data I am not calling any menu
here except in this case whenever the
client is not available so that's the
different case but imagine the socket is
already open all I am saying is just to
write to the server that's it
but the menus again getting back I did
not call menu in this write but someone
is calling this menu otherwise it will
not prompt immediately further my for my
next option to be provided so who is
calling it once we write to the server
the server is going to respond back with
some message and that particular
response is being handled right inside
this particular event handler so you
right here but you receive here once you
receive here you are saying that please
display the message whatever you are
received and get the set timeout again
so which means our menu will be
displayed so you are not displaying
immediately after right but what you are
saying is you are displaying once you
get any message from the system or from
the server back this may not be
appropriate in all the cases but in this
case it makes sense but usually you can
also say something like after the
successfully writing if you would like
to have this menu to be displayed then
you can have the callback function
something like encoding I think by
default you can say in alpha now you can
say within this particular function I
would like to have the menu to be
executed even that is valid so which
means what you are saying is send data
do not wait for this particular
statement to complete just ask it to
execute on its own so send data says hey
right go on your own way try to write to
the server once you are complete go with
this function but I am NOT going to wait
for you I am going to complete so send
data goes on its own way but right it
tries to write to the server it may take
30 seconds to write for example once it
completes the right then it tries to
execute this function so then you can
have the menu tow but in this case I am
not using this as because I am
definitely expecting a response back of
this particular right and I would like
to get the menu only after the response
has been received so for that purpose in
this data which means in this response I
am having the menu so that is the reason
I did not have menu as my last statement
in open connection or in send data
let us come to close connection close
connection is a different story
nothing is asynchronous here everything
is synchronous forget about this part
I'm saying that destroy this is
synchronous which means destroy that
socket immediately from my client side
there is no interaction with the server
here so it is not a synchronous it is
synchronous and this close connection
function will wait until and unless the
statement is complete it will wait till
the statement is complete will wait till
the statement is complete and then it is
trying to execute menu if you don't need
this here this close connection after
this we will never get a menu why
because there is no other callback
function which displays this menu in the
case of send data we have right which
essentially we are expecting the data
back from the user I mean from the
server and there we are saying that
display the menu so we have a callback
function which has said we have a
callback function which essentially
displays the menu whenever we write
similarly whenever we open the
connection using connect we are saying
that this is the callback function to be
executed once the connection has been
made successfully and as part of that
callback function you are saying that
please display the menu so you can
always display the menu as part of the
callback function as because callback
functions are the ones which get
executed after an asynchronous operation
has been performed so as you are do is
doing asynchronous operations in open
connection and send data you are not
really using menu to be used immediately
after that as because we need to have
these operations to complete first and
then only display the menu and in order
to know that those have been completed
the only way is through the callback
functions but in the case of close
connection we do not have any of the
asynchronous executions here all of
those are synchronous so which means the
next statement will be executed if and
only if the correct statement gets
executed successfully or completed
successfully so that is the reason we do
not need to have
menu in any of the above functions but
we need menu in the close connection</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>