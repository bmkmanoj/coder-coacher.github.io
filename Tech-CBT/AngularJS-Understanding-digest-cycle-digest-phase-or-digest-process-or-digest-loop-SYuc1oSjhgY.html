<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AngularJS - Understanding digest cycle (digest phase or digest process or digest loop) | Coder Coacher - Coaching Coders</title><meta content="AngularJS - Understanding digest cycle (digest phase or digest process or digest loop) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-CBT/">Tech CBT</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AngularJS - Understanding digest cycle (digest phase or digest process or digest loop)</b></h2><h5 class="post__date">2016-10-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SYuc1oSjhgY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we are going to take a
look at one of the most confusing and
critical concepts of angularjs called
digest cycles or digest loops in order
to understand the inner workings of data
binding or Watchers in angularjs it is
essential to understand on what exactly
the digest cycle is furthermore in order
to work with a dollar
apply and dollar digest methods
available in angularjs we still need to
have a sound understanding on how digest
cycle really works in simple words if
you don't understand what exactly is a
data cycle or say digest cycle inside
angularjs you won't have a good
understanding on how the angularjs
really works being said that let's jump
in and the first thing we need to
understand about is the watch list in my
previous video I already covered what
exactly are Watchers to wrap up a watch
is simply nothing but keeping track of a
scope variable along with its values so
which means whenever you have some kind
of data binding for each of those
particular data bindings you maintain in
your markup and if those data bindings
are related to your scope objects or
scope related variables we are going to
have that respect to Watchers created as
part of the angularjs framework so which
means angularjs framework maintains
watches behind the scenes for each of
the scope variables you use inside your
data bindings a bit more all the watches
together will be stored inside something
called watchlist
so this watchlist again is nothing but a
simple reference to all the list of
Watchers maintained in the memory so
whenever I call watchlist which means it
has got a group of Watchers which are
essentially nothing but all those data
bindings being monitored behind the
scenes inside the watchlist
so this watchlist is a memory variable
inside the angularjs context or angular
JS forever itself
okay so we did not really speak about
Watts list at the scope level in simple
words every particular scope is going to
have its own watchlist associated with
it so which means if you have two or
three scopes as part of your controllers
or your templates or whatever we are
going to have that aspect of what's a
list being maintained for each of those
scopes individually so if you have three
scores you are going to have three
watchlist because every scope is
different even though they might be
inheriting some properties from the
other scopes still every scope can be
maintainable and independent based on
whatever the criteria you might be
mentioning in your programming so every
scope maintains its own watchlist and at
the same time that particular watchlist
whatever it is really bound to is
automatically maintained by angular JS
framework itself based on the data
bindings you specify in your markup
furthermore if there exists a watchlist
even at the root scope level so no
particular scope in general will not
have a watchlist but again a watchlist
will be created if and only if you have
certain data bindings or you use your
own Watsa lessness if you do not have
any kind of watch variables or watch
listeners or anything then you are not
going to have watchlist at all so even
in your root scope there might be
possible tease like you might not have
the watchlist because sometimes you may
not really have the variables or routes
cube based data bindings at all in your
applications but if there are you are
going to have the watchlist even at the
root scopes level as well now that we
have some understanding about watchos
watch lists under the same ten the
scopes associated with some kind of
watchlist we need to jump into the
concept called digest process so digest
cycle or digest process or digest loop
is a huge topic in angularjs but let us
start with very simple words in general
what exactly is a digest process so we
know that a watchlist we
contains a list of watches which will
have all the scope variables and the
respective values being cracked now a
dices process in simple words means a
digest process is responsible to walk
through the entire watch list for
modifications so which means as I
mentioned in my previous video there
will be angular JS framework or angular
JS process which keeps track of all of
these variables about their previous
values and current values and based on
the modifications whatever the user
might be making these watches I can
update the UI or say Dom so there is a
process which actually continuously
monitors these Watchers and updates or
informs the UI to update or render the
Dom so that process itself is nothing
but dices process and that digest
process is responsible to walk through
the list of all the Watchers available
inside your watchlist it's only job is
to just go through each and every watch
available in the watchlist and check
whether a vertical scope variable is
dirty or not so whenever I said dirty
weather it has changed from the previous
value to any other new value and that
process is usually called as dirty
checking so which means digest process
does a dirty checking again is to each
and every watch and as I mentioned the
process of checking the current values
of the scope variables is with their
previous values is nothing but dirty
checking as I mentioned just watches for
the variable values next if dad's
process finds or figures out any kind of
modifications work done to any of the
watch variables then it tries to execute
any of the watch listeners which might
be associated with the respective achos
again I already covered watch listeners
in my previous video so I do not want to
explain much in this
so if you have any kind of watch
listeners associated with any of the
Watchers then those watch listeners are
going to be automatically executed the
moment the digest process figures out or
identifies that that respect to watch
variable has been modified or mark dirty
next it is the responsibility of the
digest process to keep note of all the
modifications which might be done to
each of those watches available in the
watch list and inform the angularjs
framework to update the Dom that is
important so it is this process the
digest process itself which takes care
about all the modifications which have
been done to the Watchers will be
directly informed to angularjs framework
or the process inside the angularjs
framework which actually does update the
Dom and finally gets rendered as part of
the browser and the in general the Dom
gets updated only after the digest
process so which means this process has
to complete first before even updating
any of the yawa Dom markup so if you
have the scope variables and if you
happen to modify the scope variables
related data then before even the data
binding or the updates using the data
binding occurs to DOM that that the
digest process really it gets executed
behind the scenes once the digest
process gets executed once it has been
dashed successfully all of the respect
to watch listeners being executed if
there exists any and finally it informs
all the modifications to the angular
process of the angular JS framework to
update the Dom and then actually our Dom
gets updated this is one important topic
that is angular context we should be
understanding that all of this actually
gets executed as part of something
called angular context in simple words
just consider angular context is nothing
but the runtime environment of angularjs
framework so angular JS framework as you
know your actual
attaching the source of the angularjs
called some script tag and you use
angularjs or angular Minjae s so what
happens is that whenever this angle disc
framework comes into the picture
just like jQuery runtime it will have
its own runtime which means it
instantiates all the angular related
objects it does all the dependency
injection it loads all the necessary
scripts and everything and instantiates
itself and keeps a complete memory and a
processors are related to that
particular memory independent of other
JavaScript objects or other JavaScript
frameworks and that is exactly what we
call it as angular context and all of
these digest processes along with
watching lists or watch variables
everything all of this process will be
actually carried inside the angular
context so now that we have some
understanding about digest process and
that - in very simple words we need to
really go into the depth of this digest
process on how it can really serve the
angular applications much better so
imagine I have a digest process which is
having a watch list with four watch
variables and just imagine there are a
couple of watts listeners associated to
a couple of watches so the first thing
is that the digest process will be going
through all of the watches available in
the watch list and it performs a dirty
check so which means it tries to figure
out if the values have been modified
behind the scenes and if not this is
important if no modifications still it
does the second round this is very very
important whether or not it figures out
any modifications which might be
available previously it still goes
through the second cycle of the same
digest process so this is pretty
important why it has to do that because
a watch or a particular variable which
might be modified by the watch might
actually modify
by some other watch wearable so there is
a probability of having multiple other
scope variables or scope watches to be
modified as part of the first cycle
itself so the die this process while it
is actually going through each of those
Watchers and executing those virtual
asanas there might be a possibility that
during the execution are going through
all of these Watchers the variables of
the same Watchers could have been
modified by some other external source
or as part of the wats listeners too so
to keep track of all the modifications
to the latest it always does the second
one so this is pretty important for
every digest process we are going to
have at least two minimum iterations to
be always performed and again not just
to you can only have a maximum of 10
iterations and if your digest process
cannot stop for 10 iterations as such it
is going to throw an error so so this is
in overall like every particular digest
process whenever it does the performing
of the Watchers I mean the list or going
through the list of all the watches it
does at least twice ok
next let us see how the digest cycle
really works whenever there exists any
updates with respect to the scope
variables so imagine I have first level
watch updates and at the same time how
the digest cycle really works at the
first level so I have the watch B and B
value has been changed it to three so my
controller or some other ng-click event
or whatever the event might have been
modifying my value of variable B to
something new called three and now the
digest Persis is going to kick in and it
is going to I mean it it is going
through each of those particular
Watchers then it figures out oh there is
a particular new watch variable here or
a new
value being associated to that
particular watch so that needs to be
informed to angularjs framework in order
to update UI so it keeps track of that
notification so which means it notes
down the modification of this update to
the scope variable called be once noted
it will be normal and now it does the
second iteration again so once it keeps
note of all the modifications of all the
watch variables as part of its first
iteration it just goes to the second
iteration and checks for any other new
modifications if there aren't any then
finally it goes back to updating of Dom
by informing all the nodes on what are
all the modifications it found as part
of its parsing process or going through
process so this is pretty important next
let us see if the watch listener itself
is modifying some other variable so that
is the second case so we call that when
a second level Watts updates and how it
performs as part of digest cycle so the
same story in this case I'm having
something different instead of variable
B I am actually having variable C so
which means C has been modified to seven
but I just wanted to explain like the C
the watcher for the C has got a
watchlist node and that watch listener
is actually updating the scope variable
ei to ten whenever the watch listener is
going to be executed so this is very
important so the watch listeners is
going to be is not going to be executed
automatically it will be executed only
by the digest process so which means
whenever you update the value of C to
something new value you cannot expect
the watch listener to kick in
immediately that will be executed by the
digest process so how it does execute
simple
so whenever the digest process kicks in
it actually goes through every variable
or every watch are inside the
list goes through a B and C now it found
C has been modified then it executes
swats Lazlo
which in turn executed a 210 and okay
now it understood the value C has been
modified to C but it did not note
anything about a it might be just having
only of value I mean only noted the
value of C to 7 now it goes back ok C
has been modified 7 I keep a note of it
but it doesn't know about EA ad so now
it does the second iteration now during
the second iteration it goes through all
the watches again and now it found oh
there is one more new thing available
there so I need to keep note of this one
too so now it keeps in order this one
too and executes for the third time so
if there are no modifications in the
third time then finally it is going to
update the Dom so this is one of the
situations where I might be having more
than two iterations but again it is not
fair to say it is always going to be
three or four but a maximum of ten is
allowed but beyond ten angular JS might
think you are really running into some
infinite loop or something and it might
throw an error so that is pretty
important so the second level or the
third levels are usually performed
whenever you are having some
modifications being performed as part of
your digest process iterations
themselves okay let us have a quick demo
on how this watches either and even the
digest cycles to be actually seeing in a
practical way so okay I have a very
simple HTML here where I have variable a
provided in the form of a textbox and it
is going to be data bound here similarly
where it will be being having a data
binding
I mean two-way data binding and one
one-way data binding here similarly C so
all of these three variables are
actually associated with scope a and B
and C respectively with value
one two three so now I just refers this
and now you can see I actually have one
two three so if I modify a value to ten
you are going to see automatically those
values are being updated by angular JS
frameworks through data binding and we
don't we need to understand on how this
data binding is performing behind the
scenes and how this digest process is
really going to be kicking in okay for
our understanding let us have or let us
add a couple of scope Watchers
so I am going to watch by the way if you
are not familiar with dollar watch or
watch please go through my previous
video so this is my watch for variable a
and I am going to test if new value is
not equal to old value then I am going
to display message to the console saying
that a got modified to a new value okay
so similarly I am going to have even for
B and even for C so let me go to B and
let me go to C so this needs to be B
this needs to be C so I added three
watches and each of those watches are
actually watching their own variables a
B and C respectively so I need to modify
this one to see sorry
this needs to be C as well okay so let
me refresh and you can see the console
right now nothing but the more the
moment I modify a value to ten you can
see my watcher is getting executed for
those modifications whatever I am trying
to do from the
data-binding perspective okay so let me
clear this so now that we added a couple
of watches we know when a is getting
modified and when B is and similarly
when C es
so now I'm going to have a new watch a
new watch it to be added to the route
scope and by the way I'm using route
scope here because I already imported
route scope in the form of dependency
injection there so I'm going to watch
and in this case I'm not watching any
variable so if you do not have any
variable then angularjs is smart enough
to actually execute your callback
function whenever your particular digest
cycle is going to be executed so this
function is going to be executed for
every iteration of your data cycle so in
this case I just wanted to say something
like console dot log digest iteration
started something like this okay let me
see so just let's just refresh this and
you can see the digest iteration has
been started and it actually completed
twice so as I mentioned whenever the
digest process kicks in it excuse at
least two times and that is the reason I
got two comments there so let me clear
now I modify the variable a to ten and
now this is important now you see I have
the first digest cycle executed and
while it is executing it found that the
variable a has been modified and then it
has executed the watcher of EA which
actually printed this message and then
again after executing the watcher it has
done the second iteration of the same
digest process so you can see our digest
process has been executed twice and
after the first iteration the watcher is
being executed so now it is confirmed
that the watches are going to be
executed only by the digest processes
okay so let me clear everything
and I go to tan and you can see okay let
me get everything again let me clear
this one tool so I modify this one to
ten you can see a has been modified I
cleared everything and now I go to B now
you can see even for B it is actually
doing twice that nuclear and even for C
and you can see it is done twice
okay so similarly I go to this and any
number of times you modify it is going
to do all that respective watch our
related messages and it is going to kick
in new or digest pasta sauce and based
on the modifications you do so now that
we understood this process we need to
even test this process as well where I
am going to have my one watch listener
which actually updates the value of a to
something new so for that I just wanted
to be a bit more creative here saying
that if dollar scope dot C value
whenever it is greater than fifty I
would like to have the scope value of a
to be modified to something like
thousand so let us see how this is going
to work for us so what I am saying is if
the value of C gets changed by the user
to something new it checks whether it is
whether the value is greater than 50 if
so I am actually modifying Skopje which
means it is supposed to kick in this guy
when our a has been modified so let me
save this and refresh this okay so let
me clear this and now I modify C value
to thirty and you can see nothing has
really been performed here as because
this value of C is still less than fifty
no modification so let me clear
everything and now I go with 300 so this
is where the interesting thing happens
first time you can see the first
iteration goes through and it understood
C has been modified so our watcher has
been executed and as part of that
watcher we actually updated the value of
a now the second iteration is being
performed
then it has understood all the value of
VA has been changed so let me execute
the water of a which in turn showed the
message a has been modified and further
the third iteration has been performed
and as there are no other more
modifications then the digest cycles
ended right there so in that way you can
see that you know even though you might
be having one or two iterations at the
very beginning it might really go beyond
two or three based on the structure of
your programming how you are trying to
accomplish but again it is always
recommended to minimize the digest
cycles as less as possible or as to the
minimum as possible as because it will
have tremendous effect on the
performance with respect to your
angularjs applications okay now let us
jump to the next one so we are done with
demo so the next topic is same digest
process are digested but how it is
really related to the scope so till now
we haven't figured out what exactly
scope on on how it is a very only going
to work with digest process so I already
mentioned every particular scope will
have its own Association to watchlist
and that Isis process is not just for
the Watsa list the digest process is
actually available at further higher
level beyond the scope or beyond the
watchlist that is there will be only one
digest process which actually goes
through all of the watch lists available
and what are all the watchlist
associated with the respective scopes as
well so you can see during the first
iteration the digest process goes
through the first route scope related
watchlist and if it doesn't find any
modifications it tries to find any other
scopes or child scopes available and
tries to figure out if there exists any
watchlist alerted to those scopes and
goes through those Wachtel is available
there so in that way it the digest
process always kicks in or starts at
root scope level and further it
we'll be identifying all the scopes
nested as part of the root scope or the
nested further into the existing scopes
goes through each of those watches list
and figures out if there exists any
changes and if there are any changes it
actually jumps to the further successive
iterations of the digest vs. so in this
case as I mentioned there will be at
least two dices process cycles it is
going to execute twice as part of this
and finally there uir update of Dom
happens so there is one important topic
here there are only two points the
digest process always starts at the root
scope and if the digest process figures
out that a watchlist has got a certain
modifications or it is figured out like
this watchlist is dirty then it actually
skips from this watchlist and goes to
the second per iteration automatically
okay this is pretty much about the
digest process and how it is really
related to the scope and where this
digest process really sets whenever it
is trying to execute all the watch lists
available okay now this is the last
slide that is a complete picture on how
this digest process is really going to
be working behind the scenes as part of
angularjs now we know that digest
process is always going to be executed
as part of the angular context and
digest process will be always going
through all the watch lists and it
actually goes through at least twice so
this is what we have already covered in
my previous slides
there is no difference till here and of
course this is straightforward the
angular context is always going to be
running within the JavaScript or your
JavaScript runtime so if there is no
JavaScript there is no angular context
at all so yeah as part of the JavaScript
runtime we are going to have the angular
context runtime or say angularjs runtime
so angular context will be always
working hand-in-hand with the JavaScript
so all your JavaScript code might be
available here all your jQuery code or
JavaScript code might be available in
this gray
area but if it is something related to
the angular it will be actually executed
as part of the angular context so this
is important so prior to even getting
this there is one thing we need to
understand who is going to kick in the
digest process to execute or to go
through all the watchlist so there
should be something which actually says
like ok dices process now you go through
the watchlist please start your job so
who is saying that command to the digest
process in order to go through all the
Watsa lists it is not automatic or it is
not configurable it is automatic in
certain ways however there is no
frequency or a particular interval on
how the digest process will be kicking
in there is no continuous intervals
there are no poles nothing and that that
die this process will be always kicking
in based on the events which happen as
part of your application and those
events could be any Dom events like if
you actually provide ng click or
something those Dom events can actually
kick dices process so if you happen to
have your ng click return you should
understand
after the ng click execution it is going
to have the digest process to be
automatically kicked in whether you know
or not this process gets executed behind
the scenes when our ng click gets
executed similarly whenever you perform
any Ajax operations using dollar HTTP
and if you have any call backs yes that
edges processes will be kicking in so
that is the reason you will see like
after the ajax calling or your ng click
or Dom events the data bindings are
automatically going to happen because
this digest process is going to be
kicked in for almost all of these events
available including Dom events Ajax
events and if you are using taller
timeout with a callback and if your
browser location actually gets changed
or if you use dollar apply or dollar
digest as part of your application I am
going to cover dollar apply and dollar
digest in my upcoming video
but just forever understanding if your
Cordy uses any of these you are going to
have this digest process to be
automatically kicked in and I just
mentioned only five here but there might
be a couple more instances but other
than these instances usually you will
never have that Isis passes to be
automatically kicked in so this is
pretty important and of course even for
the data bindings and so on it is going
to have the digest forces to be kicked
in but there is no particular interval
which actually says okay there is PI it
is time now let's do the digest process
that's not going to happen okay now that
we understood like when this digest
process is going to be kicked in we need
to understand about how the browser
really works with our application - as
you know browser is the main responsible
person to actually render your down so
if there is no browser your DOM is not
going to render or will not be render so
your Dom gets rendered and that is the
process which will be carried or it is
the responsibility of the browser itself
and again browser is going to have its
own events like the Dom events like on
click it might have its own timer events
like using set timeout and so on and you
can see I'm using dollar timer so which
means this is related to angularjs
dollar apply angularjs dollar HTTP
angularjs but these are different these
are related to the browser or say you a
JavaScript kind of a deal so the browser
can have your on click events or based
on the timer or the intervals you set up
as part of your JavaScript the browser
is going to kick in all of those events
and you call all of these events to be
performed in the form of an event queue
so the browser maintains an event queue
of all of your events and executes them
one by one and it maintains the message
queue and an event loop right here and
that is one important thing there is no
relation between this event queue and
these events which actually kick in the
dices
so that is one of the most confusing
things where the developers will try to
understand so if you happen to write
handle these Dom events in your own
JavaScript jQuery without using ng click
this process is not going to be kicking
in that is very important so imagine I
am writing jQuery dollar sign using a
button on click do something yes it does
even if you modify the scope variables
yes it does
however this digest process is not going
to be kicking in this process is going
to be kicking in if and only if it falls
into the category of these so if you are
writing your Jake or events or down
related events it is your job to
actually invoke that I just process
manually by using dollar apply or dollar
digest which you are going to cover in
the next session anyway but we got some
understanding like the browser is put
responsible for Dom rendering processes
and accepting all the events from the
user including clicks the timer events
or whatever it does and those events
will be actually further transmitted or
sent to our JavaScript and our
JavaScript further based on your
programming model it will be invoking
the respective events of the angular and
you can see all of these will be acting
as a bridge between your JavaScript
program time and the angular runtime or
angular context in this case so if you
do not have these bridges angular
context will have no idea about what are
all the changes happening in the
JavaScript or browser and it will never
keep keep this process so angular
context solely depends on these bridges
and if these bridges are supposed to be
automatically called based on how you
have configured using ng-click or dollar
HTTP whatever you might be writing as
part of you JavaScript and so on
and whenever these bridges receive the
respective events or the callbacks it is
going to inform the angular context that
this digest process needs to be kicked
in and once that ices process completes
its job it informs
the Dom that there are some
modifications which need to be rendered
and that process will be carried out by
the browser and once the rendering
process has been done the browser will
be still waiting for the user for more
and more events and once again the user
clicks on something or if the timer
actually times out or any interval
carries again this process goes on so
this is what we will be calling it as
event loop together with how the angular
context related digest cycle loops work
so this is the digest loop and this is
the event loop so those two loops will
be working hand-in-hand based on your
particular application development
whatever you might be doing including
jQuery or other frameworks all of the
other frameworks will be sitting inside
the JavaScript area and those are
completely independent of angular
context and if you need to kick in dices
process or whatever those outside
JavaScript frameworks need to go through
these bridges and finally ask the digest
process to automatically kick in by
itself so this is a complete picture
about how the digest process of subtler
digest loop whatever you call it as
really works behind angularjs</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>