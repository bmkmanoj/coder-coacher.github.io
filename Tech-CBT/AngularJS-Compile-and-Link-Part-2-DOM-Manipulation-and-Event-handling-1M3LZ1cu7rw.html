<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AngularJS Compile and Link - Part 2: DOM Manipulation and Event handling | Coder Coacher - Coaching Coders</title><meta content="AngularJS Compile and Link - Part 2: DOM Manipulation and Event handling - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Tech-CBT/">Tech CBT</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AngularJS Compile and Link - Part 2: DOM Manipulation and Event handling</b></h2><h5 class="post__date">2016-09-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1M3LZ1cu7rw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is the second part and extension to
my previous video which covered a bit on
compile and Link features of angularjs
in this video we are going to see a bit
more on basics of how to modify Dom how
to set some data using scope how to work
with events etc during the compiling and
linking process available as part of
angularjs so you can already see that we
have the compile a link and post link
along with the controller so these are
all the things which we have already
covered in my previous video and we have
some basic HTML which actually tries to
render our directive in a nested format
like we have the message inside message
and we also have another message so we
have three levels of nesting and once we
have executed this we are going to see
something similar to this so we have all
the compiles to be executed first then
followed by all the controllers with pre
that is pre link and once all the
controllers with the pre links have been
completed you can see we have the post
links to be executed so this is what we
have already seen earlier now we are
going to just extend this a bit and see
on how to modify Dom at what level we
can modify Dom and how to set some data
how to work with events as part of
directives so while we are working with
this we are not going to concentrate on
something advanced features but just
wanted to go with some basics on how we
can accomplish few things and to
understand better more better more about
compile and Link it is not a focus on
advanced directives but it is more of
kind of focus on compilation and linking
process ok so just for our understanding
in this case I would like to modify the
message related template so I just
wanted to remove everything whatever I
have in place and now you can see I have
a directory called message which is
which is attached to this template
and I just wanted to have some dynamic
values to be displayed here so you can
see I am going to have ng-repeat to be
added and as part of this ng-repeat all
I would like to say is something like 1
comma 2 comma 3 comma 4 color 5 and I
would like to display eye which is
available so what I am accomplishing
here is I am actually asking the
ng-repeat
to go after all of these values and for
each and every iteration of these values
place the respective value in I and the
same I mean and send the same value I to
the attribute called text so text is
going to have the evaluated expression
value of I and at the same time we are
actually trying to display some kind of
expression based data binding here which
will be automatically displayed as
content inside the deal so this is our
template and as you can see this
template is going to be instantiated
always whenever the compilation has just
completed so which means after the
compilation the template gets
instantiated in this case we are using
ng repeat so which means this template
gets instantiated five times as because
I am using five values here ng repeat
iterates for five times and thus the
same template gets instantiated for five
times and let me change my a zero one
dot J s accordingly so as part of this a
zero one dot yes I would like to have
three attributes dot X so we are using
the same text so we are still good no
issues and we are trying to display text
here and we need to do something for
this one but we'll come back here so let
me save my files here and also let us
check how the cycle of say lifecycle of
our directive template is currently
being performed so I go back here and
just refresh this
okay you can see I have one two three
four five and all of these values are
actually instantiated so if you go to
inspect you are going to see the deal
which is being instantiated five times
so you can see this is the first one
this is the second one third one fourth
one and fifth one so if you go back to
your source you already have a template
defined but you did not define this one
five times it has been instantiated
fighters just because you use the
ng-repeat
and while it is being instantiated it
knows that it needs to fetch the value
from this list for the respective
iteration and the value will be
automatically sent to text as attribute
value and of course it is going to
display the content of I I mean the
value of I in the form of the content
for the deal and that's exactly what is
happening here so we are good till there
and let us see on how this is being
performed from the execution perspective
so as we know the compilation has to
take place and in this case you can see
we have only one compile as I mentioned
once template gets compiled it never
gets compiled once again so compile is a
process which gets accomplished only
once so even in this case you can see I
have compiled which performs some
compilation on our particular template
to actually pass all the existing
directives or child directives and so on
so the compilation is being performed on
our detective and that too on the
template and that too happens only once
and in this case it is not evaluating
the value of I so if you go back here to
our a / 0 1 dot G as you can see I have
the compile and I am trying to access
the text attribute through three
attributes and at this moment it is not
really evaluating the value because
during the compilation of a template
there is no scope available scope is
made available only through controller
pre impose and as there is no scope
there is no way it can really evaluate
any kind of expression you might be
providing as part of your attributes and
thus it directly gives whatever is
available in the form of a string which
gets displayed straight in the form of
the same whatever the user has provided
okay and next you can see I have the
controller pre and post controller pre
and post so this is the first deal this
part happens for the first deal this
part happens for the second do the do
forth do and finally fifth to do so
these are all sub you can see post is
happening right after immediately the
pre in this case because these are not
nested in my previous example that is in
my previous video we have been nesting
the directives if you are nesting the
directives then the post will be
happening at the very bottom or at the
very last if you are not nesting the
directives each and every directive is
individual on its own and they will have
their own life cycle so the controller
the pay link the post link will be
executed and each of those instantiated
templates individually by themselves as
because no instance is really related to
the other and they are not nested as
well okay so you can see I have one and
two and three and four and all of those
values are currently available through
pre and post so if you go back here you
can see in the pre I am actually trying
to access the text from the instantiated
element related attributes called
I attributes so this is template
attributes this is instant attributes so
from the instance perspective you can
see I have the evaluation done
successfully and even in the post you
can see the evaluation has been done
successfully and you are having the
values to be displayed here 1 &amp;amp; 1 but
for controller this is bit strange even
though the controller is having its own
scope it is not really really evaluating
so in order to evaluate it you have to
actually include dollar interpolate
which means you are manually doing the
interpolation of this particular string
so which means interpolate me
you are providing the string with some
kind of evaluation of expression and
that needs to be performed as part of
the same scope so in this case you are
trying to evaluate your particular
expression which is available inside
another string or mix mixed up with
string and variables and so on called an
interpolated string so interpolated
string means it is just a constant
string which has got some values or
variables which need to be evaluated at
runtime so that is called an
interpolated string and in order to have
that whole expression to be evaluated
you we would like to use dial or
interpolate so in this case we don't
need it but if you really wanted to use
it then we need to inject it so we need
to use this interpolate and use the same
module I mean that particular
interpolate and you can see the first
thing is that it is asking for the text
so in this case I would like to evaluate
the text valuable in the form of
interpret interpolated string and that
actual okay I am missing one thing
we also need to evaluate again is this
particular scope so we have the text
which is nothing but this one so this I
is the text and that needs to be
evaluated again is the scope and once it
has evaluated the scope I would like to
have the value out of it or say once the
evaluation of the expression has been
completed the result needs to be stored
as part of V and I would like to have
that way to be displayed so in this case
I just wanted to say this I would like
to have we to be displayed instead of
the attribute directly so once I say
this let me refresh this and now you can
see I have the controller also
displaying the value 1 1 1 so we have
controller pre and post links doing
their things successfully with no issues
at all ok so
this is pretty much about you know the
controllers and I mean the director
related controllers the pre and post
links on how the work ran out you use
ng-repeat okay let us switch back to our
javascript code a bit and enhance this
to actually include a few more things
the first thing so let us let me go back
here so I have the deal with all the
values displaying and I would like to
have each of those deals to be having
some kind of border at runtime so I do
not want to provide those what is a
characteristics or the formatting right
inside the template so if you really
wanted to have the template to be
maintaining its own border it is easier
to like I can provide style equal to
something like a border 1 pixel and sure
a border 1 pixel and solid and at the
same time imagine I would like to have
some gray there so this is the easiest
way where I can directly provide inside
the template itself so let me see if
this is working and there you go so you
can see I have the border to be
displayed for every do so that is still
valid but my intention is not to modify
the Dom right inside the template in
this case so I just would like to
explore on how I can modify the Dom at
runtime and the to during the process of
compilation and linking ok we know that
we can always modify the Dom in compile
or pre or post and the each of those
have their own restrictions on how you
can really modify so let us come back to
our javascript file
we know that compiler is having access
to the template directly so this is the
template element compiled does not have
access to instead I mean instantiated
elements it has direct access to the
template element so in this case this T
element is nothing but a reference to
this guy directly so this whole part is
actually is made available as part of T
and now I can use this one which is a
jQuery element by the way so this T
element is a jQuery element so I can say
T element dot CSS border and I can say
one pixel solid and at the same time I
use a C 0 C 0 C 0 for the gray and what
I'm doing at this moment is I am
applying this CSS style for the template
when you apply for the template it will
be carried over to all the instances
later so anything any functional thing
you right inside the compile function
will be always be available for every
instantiated element so if you modify T
element once it has been modified it
will be cloned and instantiated for each
of the iterations so each of the
iterations will have the instantiated
elements with exactly on how you modify
your done so let me save this and let us
ensure I do not have the CSS here so I
do not have the CSR psyche click Save
here go back here and now you can see I
still have my borders to be applied
automatically so let me change the color
a bit so in this case I would like to
have something like red let us consider
okay I do not need this and let me
refresh this and now you can see I have
the red border to be displayed
everywhere so let me get back to my
previous one okay so let me refresh this
I have the gray border which has been
accomplished through modifying the Dom
inside the compile function okay so now
that we have some understanding on how
to modify Dom template or say template
Dom during the compilation we need to
understand on how to modify the Dom of
the instantiated elements also so let me
come here so let us imagine I have a
strange requirement where the third one
should should be actually having the
border red so what I am saying is that
whenever I find the attribute value as
three I would like to have that
particular do to be having a border with
read the rest of the bills or rest of
the element should be still working with
gray except the one which is having the
value three to be mentioned as read I
mean to be rendered as read so for that
purpose you can see we are really
working with instances there's nothing
we can work at template way because
template applies to all the instances
but in our case we are working with the
logic with a very specific evaluation of
the instance so we need to check every
instance values or elements here and
modify the Dom and as I covered in my
previous session post is the best
location where you can really modify
your down by because everything has been
already done by the time and I would
like to take advantage of post link
function here so in this case I would
like to check the attribute value that
is text and if it is equal to three I
would like to say go to my instantiated
templated element and then apply the
border so in this case I would like to
use the same board or whatever I used
here except that I would like to have
this one to be right there so I am
applying red border if and only if that
particular attribute value text is
always three if it is not three I am NOT
going to apply any border which means it
contains the default border which is
always gray in this case so let me save
this go back here and press refresh and
now you can see only the third one has
been highlighted because we applied the
logic only for the value three and the
rest are still having their own gray
backgrounds so we have seen on how to
modify the Dom using the compile
function and at the same time post link
function we have not really added any
kind of event in here so let us consider
the moment I click on these particular
deals I would like to have
a simple message to be displayed to the
user based on the value we have selected
here so which means if I click on this
fourth day oh I would like to have a
message for to be displayed if I click
on this day oh I would like to have
message five to be displayed
so in order to accomplish such things
the easiest way as I mentioned in my
previous video post is the best location
to attach any event handlers as because
at that time we have the instantiated
element and it has been completely ready
for the rendering so I still make use of
my eye element to actually add event
handlers okay but as we know we can also
have some kind of data or any kind of
functions to be added to the scope right
inside the controller so if you have any
functional logic to be actually
maintained at scope related stuff should
always be available or made available
through the controller so if you have
functional stuff it is always better to
write as part of the controller and that
too related to directive so in this
course in this case I am going to go for
scope and button click and I would like
to say whenever I click on here I would
like to have the value of V to be
displayed so you can see this controller
works for every instance so which means
every instance of the template is going
to have its own controller its own scope
and this is the instantiated element so
I'm actually working with the scope of
the respect to instantiated element only
so which means if I have five divs
created by this template each of those
particular deals will have their own
scope on their own button click event
along with their own interpolation in
the values as well so I am currently
attaching something like button click
function to the scope or which I am
going to access that right inside the
eye element so as we have seen in my
previous video we are not supposed to
access Dom of the element here we are
always supposed to access the Dom right
inside the post function
so here I am going to say I element dot
as I mentioned previously t element is a
jQuery element similarly I element is
also a jQuery object so I am going to
say on click I would like to say go to
the scope why because we have access to
scope here which is nothing but the one
which has been carried out from the
controller so from the controller
related scope what we have I just wanted
to mention please execute the button
click so you can see I already defined
button click through the scope which is
exactly available through the scope of
post link function so I am just
accessing this guy right here so I am
attaching the event handler for the
click and once I click that it is going
to execute this guy thereby I am going
to have the alert to be displayed so let
me save all of this and refresh this we
are not going to have any difference
here until and unless I click on here
which exactly gives the current value of
the do whatever we are clicking on so
these are all the ways I mean it is the
basic ways on how we can really
manipulate Dom at runtime at either
compilation level or post level or post
link level you can provide some data
here if you want to using the scope and
provide all the event handlers where you
can attach all the event handlers right
inside the post so in that way we can
use our compiled pre and post so there
are a couple more things which we need
to understand like not every example you
find on the net are going to have
compiled pre and post there are some
shortcuts on how you can really make use
of these particular functions so if you
so let me come let me comment this a bit
so I just cloned it so just wanted to
check on how we can have other ways of
doing the same thing so imagine you do
not have anything to be provided as part
of your compilation functionality which
means I do not really want these
statements to be provided so you can
remove this all together including the
compile and all you have to do is just
provide only three and post which might
be required so you might not really need
to provide compile if you are not
providing any functional part of the
compile so in this case I can get rid of
this whole thing of course instead of
this whole thing I still need to provide
link so if you are not providing compile
you just need to provide the link object
which essentially says that you are
returning the link which the link has
got these two functions and those two
are okay this is related to this and I
don't need this guy so I can just get
rid of this one yeah this is the one so
I have the link which essentially
returns pre and post and we do not have
compiled here and the controller will be
working as usual so I just save this and
it just around this and we should be
still be getting this two four five and
so on you can see as I remove the
compile related functionality we are not
going to have the gray border right
because we just removed it so this is
another shortcut if you really want it
to work with only pre and post but not
really compile okay there are there are
a couple more ways on how we can achieve
the same thing so let me reduce this
quite a bit okay so now another flavor
so imagine I am going to have only post
which means there is nothing I am really
writing as part of praise so I do not
really need to help pre in here so if
you would like to have something like
that but imagine you would like to have
some compile also to be provided then
you can still make use of your compiles
I can still get
to this so let me use this Sam still
make I'm still making use of the
compiled however I do not want the per a
but as part of the compiled I would like
to execute my previous stuff that is
console and the T element so I still
need some compile related functionality
to be introduced here but I do not have
read here all I really have is just the
post so if such is the case the simplest
way is just return it so if you see a
compile with the last statement as the
return which means this you are
returning a post function this is
essentially a post function this is very
very important or say post link function
for that matter so even if you do not
specify post but if you are returning a
function as part of the compiler
essentially you are returning the post
related function so that is very
important so let me save this and return
this and you can see still it works with
all of that stuff and we do not have pre
here all we have is the controller and
the post along with the compile so this
is just another shortcut so most of the
time whenever you are searching for
online samples you are going to see
something like this so do not get panic
with that all you are really writing is
the compile along with the post function
as as this and further let me reduce
this further so imagine I do not want to
have any kind of compile related
functionality in this case yes you can
still get rid of this whole thing and
all I can really have is just the post
function and I do not need anything else
and imagine I do not want to have the
controller tool you can just remove the
controller as well but in this case I
will not have click anymore as because I
remove the controller as well so all we
are having now
just the post function and we do not
need even these return as well so now we
have a very simple directive with just
the post link function so this is just
another way to write your post function
so most of the online samples will have
this kind of what is a syntax if there
are not related to any compiled or pre
or controller so if your particular
application or your directive doesn't
have compile and if it doesn't have the
controller and if it doesn't have the
pre link function and all you are
working really with this is the post
link function you just return directly
the post function that is good enough so
in this case I have everything so let me
in dentists and now I returned here and
still you can see my post linking is
function I mean working but I do not
have my event handling to be performed
here as because I removed it directly
from the controller and does all we
really have is only this one so these
are all the various ways on how you can
simplify what I said the boilerplate of
coding which you have in place by the
compilation and pre linking and post
linking and the controller so we do not
need each and every of that step in
order to develop the director you just
focus on whatever you really want to if
you have force just return only the post
if your controller just have the
controller in post in place you might
not really need compile or pre or so on
so that is pretty much about on how the
compile and linking really work as part
of angularjs and in my upcoming videos
we are still going to go in depth about
the scoping and so on which will be a
bit different whenever you are working
with detectives</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>