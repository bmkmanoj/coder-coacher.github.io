<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Set username as comment message author in PHP - PHP tutorial | Coder Coacher - Coaching Coders</title><meta content="Set username as comment message author in PHP - PHP tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/mmtuts/">mmtuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Set username as comment message author in PHP - PHP tutorial</b></h2><h5 class="post__date">2016-06-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/68mm2qQY-O0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today we're going to talk about how to
use the login system in order to teams
up the author name of every single
comment we have down here in the comment
section as you guys can see right now
every single author is named anonymous
and we don't want to have that we
actually want to have to use the name of
the person who wrote the post so the
first thing we're going to do is we're
going to go ahead and login because
right now we can actually see the
comment form so we're just going to go
to the top here write admin 1 2 3
login and now we can actually see the
comment form now anonymous is the value
that we actually pass into the database
through our form that we have here so we
need to find the form inside our index a
PHP file scroll down to the bottom and
here we have it inside our form we have
an input that's named UID and this is
where we have the value set to anonymous
we actually want to change that so that
one will actually logged in and we can
see the comment form it actually takes
the IDE about user rather than this
piece of text here so actually going to
go and delete anonymous write double
quotes dot dots and then we're going to
insert the session ID that were actually
logged in s as a value because right now
if I do actually write a comment it's
going to insert the value of the user
who actually wrote the post here as the
ID that the user actually have as he is
locked in if I actually go back to my
page here refresh
go down and write a comment you guys can
see it actually says the day that the
author is named 1 and we don't want it
to be named 1 we actually want to have
the user name up the author so we need
to go ahead and do some changes to the
function that actually goes in and gets
all the posts inside the database so now
what we're going to do is that we're
actually going to go ahead and go into
our comments that Inc the PHP file where
we have all the different functions for
our website here and we're going to go
down to the one called get comments now
in here as you guys can see we're simply
echoing out the row called ID from our
comments table and right now we actually
told it inside our index page to insert
the ID of the user
the username so when we actually display
the post want to change it so that we
actually go into the user table and
match up the ID with the username so the
way we're going to do that is first of
all we need to actually have access to
the actual user ID or the ID from our
comments table that we just created and
after we've done that we can actually go
into the user table and fetch the right
user so inside our wild statement where
I actually go in and fix all the results
I'm going to go as the first piece of
code inside the wild statement and I'm
going to create another SQL select
statement just like we have up here I'm
going to copy it paste it in and I'm
going to go and change the names of
these variables because we don't want to
have the same SQL variable as up here
because then we actually overwrite the
code and the same goes for the result so
we're going to go and call this one SQL
two and result two which is a really bad
way of naming things because then you
suddenly don't know what's name what but
just for the sake of this episode we're
just going to name it - now that we have
this we actually need to make sure we
also change the SQL in here - - and wax
are going to go out and write an if
statement inside this if statements
we're going to do the same thing as we
did inside the wild statement here we're
actually going to go in get the results
and make sure we rename everything as
well so it's called row two and result -
all the code we have below here we're
going to copy at these two echoes and
we're going to paste them inside the if
statement just going to go ahead move
everything out so we can make sense of
things and now we actually have access
to the user that matches this from our
comments table actually we don't have it
yet because we didn't actually change
the Select statement yet so let's
actually go and do that right now
so inside our SQL - you want to change
it to select all from user where the ID
is equal to the ID that we get from the
comments table so a baa-baa is
sentence here we're just going to go and
write another variable called ID and set
it equal to the row result we get from
the comments table called UID there we
go
then we're going to take this variable
ID and use it inside our select
statement so our ID from the user table
needs to match up with the ID from our
comment now that we've done that we
should actually be able to gain access
to our username using this piece of code
so what we're going to do is we're going
to go down to what we actually echo out
our use ID down here inside our website
which said anonymous before and we're
going to change it so that now we're
echoing out row to UID
because now we're not selecting from the
comments table anymore now we're going
into the user table and selecting the
UID
if we save this go back to the front
page refresh section to a heart reset
you guys will notice we only have one
comment now the reason for that is that
we actually told it to go into the user
table and get the user that matched the
use ID from the comment table and
because we had some old comments that
had the UID as anonymous it wouldn't
make sense that it could find it because
we don't have any users that has a ID as
anonymous so it actually automatically
deleted all the posts that had anonymous
inside of it so let's actually just go
ahead and delete those we don't need
those anymore
delete and yes so now we can actually go
ahead and just write a couple more
comments as you guys will see we have
another comment by admin not anonymous
and if I go ahead and log out and then
log in as my second user called Daniel
1-2-3 this now says I'm logged in as
Daniel I'm going to write another
comments and now you guys can see that
we actually have admin admin Daniel so
now that actually gives us the right
user for the actual posts down here and
now that we have this we can actually
use this to go in and change
buttons over here so it only displays
with the user that has the same session
ID as the author of this comment so
we're going to do that in the next
episode but for this episode I hope you
guys enjoyed and I'll see you guys next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>