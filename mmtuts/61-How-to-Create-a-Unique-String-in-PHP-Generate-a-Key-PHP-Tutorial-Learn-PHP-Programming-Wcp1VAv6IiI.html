<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>61: How to Create a Unique String in PHP | Generate a Key | PHP Tutorial | Learn PHP Programming | Coder Coacher - Coaching Coders</title><meta content="61: How to Create a Unique String in PHP | Generate a Key | PHP Tutorial | Learn PHP Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/mmtuts/">mmtuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>61: How to Create a Unique String in PHP | Generate a Key | PHP Tutorial | Learn PHP Programming</b></h2><h5 class="post__date">2018-03-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Wcp1VAv6IiI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">how's it going everyone and welcome back
to next episode on how to create a
random key or a random set of characters
using PHP now this is ax is something
that one of you asked me to do the
question was will you make a video and
how to generate a random string as
YouTube does to generate a random link
for any new uploads so you know when you
upload a video to YouTube
the link for the video is going to be a
randomly generated key that is that
specific video so what I'm going to do
today is I'm going to go ahead and
create a couple of different ways that
you can do it and show you how we can do
depending on the purpose that you might
have for this specific key and even if
you don't plan to create a key for
anything it's still a good exercise if
you're learning how to create a PHP
programming so what I want to start with
is just showing you how to create a
random key that is not going to do
anything special it's just gonna be a
random set of characters that are
randomly generated so what I'm going to
do to start with here is I'm gonna go
and go inside my script and I'm gonna go
ahead and create a function that I can
call on and once I call on it it's going
to go ahead and create this random key
so we're gonna say we have a function
called generate key you can call
whatever you want if you want to call
something different and inside this
function here the first thing I'm going
to do is I'm going to define how long I
want this key to be so can say we want
it to be eight characters so we can say
variable key length is equal to eight
then afterwards we need to create the
actual characters they want to include
inside our key so we want to allow for
numbers or letters or symbols we need to
include it inside this next variable
here so I'm going to say we have a
variable called string that's going to
be equal to a string and inside this
string we just need to include all the
different characters and such they want
to include inside this mix that is going
to mix together a key for us so we can
say we have all the numbers we can have
the letters in the alphabet and we can
also include a couple of different
special characters like parentheses
forward slash
maybe a dollar sign if you want to and
after doing this we then need to just
mix together these and shuffle them and
then cut off the tail of whatever we
have shuffle together because then we
can tell it they've just want to first
eight letters or the first eight
characters up the specific shuffle and
then we have a randomly generated key
now the next thing I'm going to do is
I'm going to take all these characters
from inside the string variable and I'm
going to mix and shuffle them together
and then cut off the detail part of it
so we only have the first eight
characters so I'm going to create a
variable I'm gonna call it R and string
which stands for random string set it
equal to a function called STR
underscore shuffle which means that
we're going to shuffle together a string
now just to point it out we do also have
a function called shuffle the shuffles
together arrays instead of a string so
there are two different functions for
strings and arrays so inside this string
shuffle function here I'm going to
include the string variable then what we
need to do next is we need to after it
has shuffle all these together we can
actually go an echo it out just to show
you how it does it I'm gonna return the
random string and then we're going to go
ahead and echo out the function so we
can say echo and then the name of the
function here and then it connects to
see inside the browser when i refresh it
we get a long mixture of all these
different characters so it mix them all
and shuffle them so what we can do now
is we can actually go ahead and take
this long string of mixed and shuffle
characters and cut off part of it so we
only have the eight first characters
from inside this shuffle here so the way
I do that is by going inside my random
string variable up here and around the
string shuffle we're going to go and
include another function called
substring so I'm just gonna wrap it
around now the first parameter of the
substring is going to be the actual
string that you want to do something to
and the first string is what we have up
here or at least a shuffle version of it
mean that we can just go ahead and
include the string shuffle inside as the
first parameter then the second
parameter is going to be where we want
to start cutting off
including specific characters from
inside the string do we want to do
something too so I want to start at zero
which means that I started the first
character meaning that right now if we
were to look at this specific character
b-m inside the browser now this doesn't
really matter that much if you just have
8 that's length but we just started zero
because it's it's better then the next
thing I want to do is I want to say how
many characters do we want to include
before we cut off the rest of them and
we already created that up here which is
the key length so I'm just going to
include that as the third parameter now
if we were to go back inside my browser
you can see if you only have eight
characters from inside the mix and
she'll have a string now I just want to
point out that this might not be the
best way of doing it if you want to
create a unique ID for all the different
users inside your website because
technically it is possible for two users
to get the same key when you randomize
the keys now this could be used if you
want to send a code to someone in an
email where they can reset their
password inside the website perhaps but
in other examples where you want to
create something unique then you can't
do it this way so in example two I'm
going to show you how you can create a
unique ID based in the current time
stamp in microseconds so I'm just gonna
go ahead and copy the function here and
comment it out because I want to save it
for later in case you want to see it
again and I want to paste in the
function underneath here then I want to
change or delete most of what I have in
here I just want to lead the first two
lines and I want to delete the value of
random string like so now what I want to
do is I want to create a unique ID which
means we can use a function called
unique ID so I'm gonna go and write
unique ID parentheses and if I were to
just go and run this inside the browser
just so you can see what exact is going
on you can see that we get a certain set
of characters do believe there's about
13 characters in here that are going to
be randomized now this is going to be
unique each time you click the button
you're never going to get the same set
of characters because it's based on the
current time format so as you can see
when I do actually start clicking again
and again and again this knob here keeps
changing
and goes up and once there's no one
numbers gonna start using you know
letters so it's always going to be
different now if this is not specific
enough there is a way to do it even more
specific if you if you want to create
them even more unique ID and that is by
going inside the parentheses and we can
create something called a prefix as the
first parameter meaning that right now
if I wanted to start with something
specific like my name Daniel I'm going
to save it
refresh the browser and as you can see
we get Daniel and then whatever unique
ID is behind here so if you have users
inside a database where you take their
username or the first name or something
and you then generate a random number
behind them then you're definitely
assured that nobody's going to have the
same you know complete string of
characters here that are going to be the
same now if it were to go inside my
unique ID function again create a second
parameter and set it to true because as
a default this one's going to be false
then I can also go ahead and create a
not a unique ID based on this timestamp
but also going to add a punctuation and
then a random string of characters
behind it to make it even more unique
just in case you're needed to so as you
can see when I do actually refresh the
browser we do get an even longer string
which adds up to three six seven eight
eight extra characters because it's
always going to have two punctuation in
the same place when you refresh the
browser so this is one way you can do it
and you can actually use this and it's
not a lot of code I should also add that
if you want to create a unique key for a
specific user inside the database now if
you don't want to do it this way because
there's a downside to doing it this way
which is the fact that right now we have
a lot of characters inside this ID but
let's say I still just want to have
maybe eight characters and I want it to
still be unique and not be the same as
other characters inside or other users
inside the database then there is
another way we can do it which is
slightly more complicated so let's say
we don't want to do it this way but
instead I want to decide just like
before
how long I want this specific ID to
actually be for each user so I want to
set it to eight characters and I want to
decide what kind of characters I can
include inside the ID because down here
in the second example we also couldn't
add special symbols like dollar sign
parentheses that sort of thing so in
this last example which is going to be a
bit more self-made we're going to create
a unique ID that is going to be unique
and not the same as anyone else inside
the website so we're going to go down to
the bottom here and we're going to
create two functions we're going to
start off by creating a function that's
going to be called check keys now I do
actually have a database I do not have
it on this screen here I'm just gonna
drag it over and inside my localhost you
can see that I do have a database called
PHP 62 because that's the name of this
lesson and I do have a table called key
string inside the key string I do have a
ID set forward two different rows and I
also have a key string key which is
going to be the actual key that I'm
going to insert it into the database now
right now I can see it just as ABC but
that's because I just want to do
something to test this out because it's
going to make more sense to you when we
create the actual functions because it
were to just immediately create the
entireties then you can't see the effect
of what we're doing here so for now
don't think about the fact that there's
going to be a B and C as the value is
inside the database here so just forget
about that so inside my script again I'm
going to create a function called check
keys again if you here dog in the
background it's because my my dog is
sitting behind me and he's sort of sick
right now so he's coughing and and
saying weird noises so he's okay he's
just making noises just in case you can
hear me inside the microphone after
creating this specific function we're
going to include a connection to our
database outside the function because we
need to actually connect to a database
so I'm going to just do it in the
easiest way possible by creating a
variable Conn set it equal to MySQL i
underscore connect
and then include the different
parameters inside the connection here
now the first parameter is going to be
the server name do we want to connect to
so in this case since I'm using
localhost I'm going to write local host
the second parameter is going to be the
username which is going to be root the
third one is going to be empty and the
last one is going to be the database
name so in my case I called it
PHP 62 and again this is my personal
connection to my local host database if
you have something different because
using something different than exam boy
if you're using an online server then of
course you need to change whatever you
have in here so and that should be basic
so if you don't know about this then I
recommend you go back and watch the
previous episodes how to actually do
things with databases since it's it's
pretty basic things what we're doing
here so you should know how to do it so
after we have this connection here what
I'm going to do is I'm going to connect
it or not connect it but added inside my
check Keys function as a parameter and
I'm also going to go ahead and include a
parameter called random string and I'm
gonna explain later on why we're gonna
include that now I'm just gonna go and
create it so we're gonna say R and
string and inside this function here the
first thing I'm going to do is I'm going
to create the SQL statement that it's
going to run inside the database I'm
going to say we have a variable called
SQL set equal to double quotes then
inside the double quotes I want to say I
want to select all from and we call the
database table key string at least I did
so if you've called something different
you will need to put that specific name
in here and after doing this we can then
go ahead and go to the next line and
create a variable called result set it
equal to my sqli
on the school query I can spell that
correctly there we go
parenthesis I can't see my keyboard
that's why I keep miss typing the first
parameter is going to be the connection
that we have up here called variable
cont the second parameter is going to be
the SQL state
they want to run using the connection
inside the database and then afterwards
I'm going to create a while loop because
I want to say while we have results from
the database I want to do something so
I'm gonna say while we have dollar sign
Rho is equal to my SQL i underscore
fetch underscore a suck parentheses then
want to grab the result put it in here
so while we have results rows from the
database I want to do something inside
the while loop now the next part inside
the while loop is not really going to
make a lot of sense before we create the
second function so before we continue
with this specific function here I'm
going to create the second function just
so don't want to confuse you guys so the
second function is going to be called
generate key like so then inside this
function here the first thing we're
going to do is we're going to go ahead
and create the specific string that we
want to mix the the difference what you
call the key together with just like
within the first example in this episode
so I can actually go ahead and go up to
the top here and just sort of copy what
we have so I'm going to get the length
the string and the randomizer down here
so the first three lines inside the
first function we created just going to
go and paste it in and just for now just
for testing purposes I'm going to change
what is inside the string then we're
going to mix together two a-b-c-d-e-f-g
because I just want to test it out and
show you what exactly does want to do
actually get to that part so for now we
just have these letters and I want to
change the length to one again just for
testing purposes then afterwards we'll
want to do here is I want to go ahead
and go beneath the random string
underneath here I want to create a
variable and I want to call it check key
and I want to set it equal to the
function we have up here called check
keys including the parameters and
everything so whatever result we get
from tech keys is going to be inserted
inside this variable here so now we need
to get back to the while loop again
because what I want to do is I want to
go ahead go into my database table
called keys
and check if we do have any rows or
columns that matches up with the random
stream you generated from inside the
generate key function because we're
going to generate a random key then
we're going to go ahead and check the
database if it exists and if it does
exist then we want to get a specific
answer back if it does not exist then we
want to get another answer back
depending what then happens we're going
to generate a new key what we're going
to keep the same key because nobody has
it so going back up here inside the
while loop I want to go ahead and create
a if statement I'm going to say we
haven't if statement parentheses curly
brackets and I want to set it equal to
the row the dust in fact have the key
inside of it inside the database so I
want to say if we have a dollar sign row
brackets I just forgot what it was
called but it's called brackets single
quotes and then the name of the column
from inside our database so it's called
key string key with a big K so we're
gonna say key string key like so just
have to take in the dog because he was
making weird noises but he's okay so the
next thing I want to do here's we want
to set it equal to a random string which
is up here and just to explain what
exact is going on here when we run the
first function down here called generate
key which you can see we do actually run
we're going to create a random string
which we then pass on to this function
down here called check keys so jumping
up to this function here and passing it
into here then what we're doing inside
the while loop after connecting to the
database is that we check if the random
string which is created does exist
inside one of the rows from inside the
database now if it does exist then we
want to do something as something
specific inside the if statement down
here so I want to say if does actually
exist
then I want to first of all create a
variable called key exists
I said equal to true and if this happens
and we do actually get a match then I
want to break whatever while loop I have
here because if I do get a result from
inside the database the match
is the random string then if we were to
continue taking the rest and result from
the database and these are not going to
be true then it's going to change the
value from this variable here so I want
to create a break that is going to break
the while loop and just jump out from it
and not continue it so that's very
important
afterwards I want to create a else
statement that is going to say that key
exists is going to be equal to false so
again what we're doing is we're first
taking four errors meaning that if the
the key does exist already then go ahead
and set this one to true and break
because now we need to create a new key
that does not match the database but if
none of the database results matches the
key then it's going to run the else
statement that will return false so back
inside to generate key function down
here I'm going to say that check Keys
either going to result in true or false
and based on that we either want to keep
the random string because we had no
matches inside the database or we need
to create a new string and then again go
into the database and check if the new
string matches anything inside the
database and again if it does then it
needs to create a new one it just needs
to continue like that until we have a
string that does not match anything
inside the database so I'm gonna go and
create a while loop parentheses curly
brackets and inside the while loop I
want to check if check key is equal to
true because if it is I need to generate
a new key so I'm going to go ahead and
say inside the while loop want to create
a new random string but just copy
pasting from up here pasting it in and
then afterwards I want to rerun the
function that checks if it's actually
inside the database or if there's
something similar to it inside the
database so we're just going to copy the
check key function here as well and
paste it underneath here so what is
happening now is that the while loop is
going to continue to generate a new key
inside the while loop and then check it
inside the database until we get a key
that does not exist inside the database
when that happens it's going to continue
down the script and then return the key
that did not exist inside the day
so we're going to return this random
string variable here like so so now we
can actually do is we can go ahead and
first of all we need to include another
parameter inside this function here we
do actually need to include the
connection because when we do refer to
it down here inside to check Keys
function we do also need to pass the
connection inside the general key
function otherwise it's not going to
find this connection here now before we
check this out inside the browser
there's a couple of errors I made inside
the code that I need to fix I did
actually make three errors which is
quite a lot at least I think so so the
first one is that I need to include
variable con inside the echo down here
when we echo out the function called
generate key and we need to do that
because I do have variable con inside my
function up here when I did I created so
that's important now the second and the
third error I made is inside the first
function we made called check keys the
first error is that I did actually
include a single equal sign inside the
if statement that had to be two equal
signs and the third error is that it did
not return any value from inside this
function here which is pretty important
to do because otherwise the second
function is not gonna work so after a
while loop I'm just gonna go ahead and
return key exists so we can actually use
it inside this function down here so
right now check key is not actually
equal to anything because we didn't
return anything inside the previous
function so now it should work so if we
were to go inside the browser after
saving you guys can see that when I keep
refreshing the browser we never get a B
or C inside as a value and that's
because if I were to actually choose a B
or C inside the randomly generated a
string then it's going to create a new
string until we do not have a B or C
which is good so again just to test this
out with one letter so you guys could
actually see what I meant about you know
not generating the same key because if
it were to actually have eight
characters then it will take forever for
me to prove that we would never get the
same key so what we can do now in order
to actually make this answer something
you
Cybil is I can go in summer generate key
function change the length to eight and
then change the string back to what we
had before
so I can just go ahead and go copy it
paste it inside the string and there we
go of course now we do not have anything
inside the database with eight
characters I could just create that
really quickly set eight one two three
four five six seven eight
there we go now we have eight characters
now if it were to ever hit this specific
string of characters inside the website
it's going to skip it and create a new
key so were to refresh you can now see
that's going to create eight characters
but if I were to have one of these
inside the database it's going to create
a new one so these are some of the few
ways you can create a random to generate
a key of course there are other ways you
can do it as well but these are the ways
that I found to be a ways to do it so I
hope this was something you found useful
if not then there's a lot of great tips
and some of these different examples are
made for you that you can use for other
examples such as I don't know creating a
unique ID using the function unique ID
for something else that's something
that's useful so I hope you guys enjoyed
and I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>