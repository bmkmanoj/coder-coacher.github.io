<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Change comment settings on login - PHP tutorial | Coder Coacher - Coaching Coders</title><meta content="Change comment settings on login - PHP tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/mmtuts/">mmtuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Change comment settings on login - PHP tutorial</b></h2><h5 class="post__date">2016-06-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/I6s6Vmk4KeE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today we're going to continue work on
our comment section and for this episode
we're going to focus on trying to get
the buttons down here inside our
comments to only appear if we're
actually logged in and therefore logged
in is the same person who actually
posted the post so the first thing we
need to do is first of all as you guys
can see we do accept the buttons here if
I were to log in because right now we're
not logged in you guys can see that I
have two users down here I have the
admin and I have Daniel so right now
because I'm logged in as admin we should
only be able to see the buttons inside
our admin comments so that's what we're
going to fix in this episode now the
first thing we're going to go and do is
we're going to go into our code and
we're going to go into our comments that
link the PHP file where we have all our
functions now inside our functions we're
going to find the one called get
comments because that's the one we use
inside our front page essentially to get
all the comments showing inside the
website now inside our get comments
function we first of all go into the
database we get all the comments we
actually run the query we have and then
we spit them out after we've done that
we actually go in and we get the ID from
the user was actually inside the post
and spit them out inside the post so we
can see who the author is so we need to
make sure we actually go in and first of
all check if we're actually logged in if
we're not logged in we want to disable
the buttons we have down here if we're
logged in but we're not the same user
who actually posted a post which we
actually do have right here then we want
to tell it that we shouldn't show it
either so the first thing we need to do
is first of all we're going to go ahead
and make sure we can actually disable
the actual buttons down here if I'm not
logged in and in order to do that we
need to rearrange things a little bit
because right now as you guys can see
the closing P tag we have here and our
form or both forms and our closing dip
down here actually all of them inside
one echo which is going to give us a
couple of problems later on so that's
actually go ahead and just close off the
echo up here maybe have the P tag and
we're going to go head and open up an
echo right before the form
I'm also going to go ahead and close off
our echo right after the forum as well
and we're going to go ahead and include
another echo right before we close off
the tip tag so now we can actually go in
and take the entire echo that only has
two buttons in it and tell it to disable
this echo when we're not logged in so
now that we have this we can actually
save and as you guys can see didn't
actually change anything inside the
website which it shouldn't and now we
can actually go ahead and create our if
statements so right before we have the
form or like the buttons down here we
want to create an if statement now this
if statement at least the first one is
going to check if we're locked in
because if you were to just go ahead and
check if our current locked in ID
matched up with the ID from the user
inside the post then it's going to give
us an error message if we don't actually
check first if we're logged in at all so
inside our if statements we're going to
say is set and inside our parentheses
we're going to check if we have a
session called ID so now that we checked
if I actually logged in we can go and
create another if statement inside here
that's going to go ahead and check if
the author of the post message out with
our current session ID so the way we're
going to do that is we're just going to
get in copy our session ID then we're
going to write equal equal which means
we're now checking if our session
matches with something and then we're
just going to go ahead and get the
actual ID from our user that we got from
the database now we did actually get it
up here but the road we have down here
that we actually spit out is actually
the user name not the user ID so we want
to actually take the user ID from inside
the database by instead of getting the
UID we're going to get the ID so now
essentially we're matching up the users
that's actually logged in with our
Comment user now that we have this we
can actually go in and copied anti-eco
we have down here with the four minute
or the forms plural because we have
- and we're going to go to insert it
inside our if statements and just make
sure we move everything out so it looks
nice like so now that we have this we
can actually go back to the website
refresh as you guys can see the bottom
buttons under Daniel user actually
disappeared so now we can only edit the
information of the post of the ones who
actually logged in as if I were to
actually log out right now you guys can
see we have no buttons which is what we
want now if you have to think about
future users let's say I want to be able
to reply to people who I'm not logged in
as then we need to include a reply
button but as well if we're not logged
in at all we need to put something to
indicate that you need to be logged in
before we can actually do anything with
these posts down here so inside our code
again we're going to go ahead and make
sure we first of all add the reply
button so after the last if statement
created inside will be checked if we're
actually logged in we're going to create
an else statement inside this else
statement we're going to go ahead and
just kind of copy one reforms you have
up here because I don't see a reason to
write it again
which could possibly be just this one
it's not going to look like this form in
the end but we're just going to paste it
in here for now so we have a template to
go from so now essentially we do
actually have a form we have a delete
button that shows if we are not the user
were logged in as so we're going to go
intense this one to reply like so let's
actually as well go ahead and change the
class name because right now if we do
actually refresh the website and login
we need to make sure we do that first
you guys considered the reply button is
not on the right sides actually right
underneath the delete buttons so in
order to move it we need to have the
same styling as the actual edit buttons
so we're going to say class it's going
to be edit form instead of delete form
as you guys can see now if we refresh
it's now on the right side now it is a
bit too big it's touching aside but you
can always change that into styling so
you could also have
apply button styling instead over apply
form now the next thing we need to do is
if we're not locked in we want to come
with an error message so I'm just going
to go and log out so we can see what
we're doing
and if you go back to the code we're
going to create an else statement for
our first if statement which is the one
that we have right here
that goes down to here so I'm going to
write else now there's a lot of ways to
do this either you could just not do
anything because if you're not logged in
you should be able to do anything but
just for information wise I would like
to tell people that the need to be
logged in in order to actually reply so
I'm going to go to an echo you need to
be log in to reply like so we're going
to go and include some P tags around
this because otherwise it's going to
look weird because the styling is going
to be off and we can actually go ahead
and give this one a class so I'm just
going to copy a class tag from up here
change the class name to let's create
comments message it's probably not the
best name to choose for this but just
because we're having an exercise I'm
just going to go ahead and call
something we're going to go into our
style sheet go to the very bottom here
create the class and we're going to go
ahead and say float right because we
need to make sure this text is actually
on the right side what needs to be let's
actually go and refresh the browser just
to see what it looks like if I actually
go ahead and log out there we go you can
see it's at the very bottom so let's
actually go and change the styling here
if we actually go up into our comment
message I'm going to say
position:absolute top let's say 10
pixels right 10 pixels
and let's actually check if let's just
check what class it is notice our Dib
call comment box just make sure it has
some position attached to it otherwise
this is not going to work it does not
actually yeah it does right here so this
should essentially work if we refresh
you guys can see we now have a message
up here that's basically all we can do
for now if we want to you know change
out the information here as you guys can
see if I do actually log back in maybe
as Daniel this time now you guys can see
that we can reply to the admin instead
and now we can delete the comments from
Daniel so we can actually write
something and as you guys can see now we
have to post from Daniel that's
essentially how we change the buttons
over here depending on who you are again
like I said the reply button so we can
always change with styling I want to
answer one question that I got in the
comments a few days ago some people
asked me about when we used our session
ID inside for example here we want to
take a for logged in if it was possible
to also just save the username inside
our session variable and it is and the
way we could do that would actually be
if we go down to where we get our login
down here you guys can see that our if
statement when we log in saves the ID of
our user inside a session ID called ID
if you want to save the username as well
we can just copy this line change it to
UID and then the row should be UID
that's basically it so now we can also
say the username inside our session
variable which can make it easier
sometimes you know like when we had to
create our would you call it somewhere
if you want to get the username like we
did up in there get comments we actually
have to go into the user table and
actually get the username of the person
with the ID that we had so in order to
avoid having to do that we could also
save the user name inside our session
variables
that's basically it I hope you guys
enjoyed this episode and I'll see you
guys next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>