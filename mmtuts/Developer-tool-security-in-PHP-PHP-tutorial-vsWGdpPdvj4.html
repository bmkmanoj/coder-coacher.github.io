<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Developer tool security in PHP - PHP tutorial | Coder Coacher - Coaching Coders</title><meta content="Developer tool security in PHP - PHP tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/mmtuts/">mmtuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Developer tool security in PHP - PHP tutorial</b></h2><h5 class="post__date">2016-07-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vsWGdpPdvj4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so for the past couple of episodes have
been talking about security when it
comes to websites and one of you guys
sent me a message reminding me of a
mistake that I made a few episodes back
when we created our comment section
episodes so I figured since we talked
about security for the past couple
episodes it would be a good idea to show
you guys how to fix the mistake that I
made even if you didn't follow along in
these episodes regarding the comments
section because this is a mistake you
will run into if you make a PHP website
that has any kind of form inside of it
so we need to know about this little
security breach here so as you guys can
see I do have some code in front of me I
also have the website in front of me
that we actually made with the comment
section now the basic idea behind this
mistake that I made is that inside any
kind of browser these most browsers
today you have something called a
developer tool meaning that right now as
you guys can see I can actually right
click on anything let's actually go to
find a comment here I can right-click on
a comment inspect the elements and then
we can actually see the actual code at
least the front-end code of this website
now the problem here is that I can
actually change the code inside my
developer tool meaning that if I want to
change the look of this website because
it's front-end only I can actually go in
and change the background color or
whatever I want to do and it will
actually change inside the website as
long as they don't refresh the browser
because when we refresh the browser
everything is going to go back to normal
again
so the error that I made happens when we
didn't make a second security check if
the user who posted these posts down
here what's the correct user now the
place that I needed to do that tick
which one we actually edit it or delete
it any of these posts down here now of
course right now as you guys can see I
can actually do that because I'm not
logged in so just to show you guys what
is I'm talking about let's actually go
ahead and login so I'm going to go and
login Staniel
and as you guys can see it says you are
logged in as Daniel if I go down to one
of my comments down here you guys can
see there's two comments from admin and
two from Daniel now I shouldn't be able
to edit or delete these comments down
here because I didn't make them
but because we have to develop a tool
and we haven't done a second security
check I can actually do it so what I can
do is I can actually right click on my
delete button for example on one that
comes that I made inspect the element
and inside my developer tool which is
quite tiny here we can actually see the
entire form of this delete button we can
even see the hidden inputs and this is
where we have our problem because right
now we used our common ID from database
as our value which some people can argue
you know sure to use the ID of you know
specific tables from your database
because we shouldn't let you know users
know about the IDS or should we use two
pieces of data and match them together
to find the correct post so we can
actually take the author name or the
date the post was submitted and then
that way find the correct post so
there's some pros and cons to doing both
ways if you actually do use the author
and the date then there's a greater
chance of something you know wrong
happening when you actually want to find
the right post but by using the common
ID which is the actual primary key of
our table
you tell the use of some information
they shouldn't know so you can argue
which one is better and it depends on
you guys but what we can actually do
here if I do actually go in here I can
actually see my input that's hidden that
has a common ID of six and now if I were
to go down and right-click on one of the
other people's posts and inspect the
element of their post I can actually go
in and try to find the common ID of
their post so I need to right click on
the reply button which is down here
inspect the elements and as you guys can
see we get another form where we can see
that the common ID of this specific post
is seven which is not a post that I made
it's somebody else who made this post
but if I go back to my post up here
right click on the delete button inspect
the element and change the value to
seven inside the developer tool and
because I haven't refreshed the browser
yet it's still going to see this as the
correct info I can actually close the
developer tool
ever hit the delete button notice that
the admin posts down here that's called
asd asd asd will disappear so now we
only have one admin post we should not
be able to do this so there's a couple
of ways to to fix this the best way to
do this would be if we actually check
for the current use ID when we want to
do something either deleting or editing
from the database so we need to check
when we load the browser if we're the
person who actually created the post
which we've done right now this is
actual we're doing here but we also need
to check if it's the correct user ID
when we do actually click the button so
going into our code we're going to go
and change a couple of things just minor
changes which is the fact that we're
going to go back to our index of PHP and
then what we have our delete button
which is actually not inside the index
ID would you actually need to go into
our comment studying the PHP file and in
here we need to go down to where we have
our get comments function which is the
one that actually displays all the
comments inside our website and we need
to find the delete button now do bear in
mind you need to do this fix for both
the edit and the delete button but I'm
just going to go and see regards with
the delete button so you know how to
actually fix it so our delete button is
actually right down here up here and
what we need to do is we do X need to
bring in our session ID inside our
function as well women to actually you
know perform our action to X delete this
comment so inside our delete comments
function that we were going to run as
soon as we hit the delete button we're
going to add a comma and then another
variable which is going to be the
session ID now right now we do actually
need to take what we call our session ID
I don't actually remember I guess we're
just going to go and create a variable
from the session ID so I'm going to go
ahead and say dull assign ID is equal to
the session ID and then I'm just going
to go ahead and copy my double assign ID
and insert it inside my delete comments
function down here
so now we're actually bringing the
connection and the current ID of the
person I'm actually logged in us right
now now you might ask why don't we
include it as an input like we've done
down here why don't we just make an
hidden input without comment or current
session ID that is because you can
change the inside developer tool we
don't want people to be able to change
both of them so we're going to go and
bring it in side our function instead so
now that we have this I'm going to go
ahead and save this information and what
we need to do now is actually go down to
delete comments function and change the
information accordingly and do our
second check to make sure that it's the
right user who actually clicked the leak
button so if we go down to our delete
comments down here we need to make sure
we include our new variable inside the
parentheses we're going to say variable
ID and we're going to go ahead and use
it down inside our SQL statement because
inside here we just simply say you know
delete from comments where the comment
ID is equal to the comment ID but we
also want to check that the user ID is
the same as the person who actually made
the post so down here I'm going to go
and include a and and then I'm going to
go ahead and say that the ID or at least
let's actually go and check what the
name of the column was just going to cut
and open up my PHP myadmin here comments
section comments and inside here we can
actually see that the ID of the user is
inside a UID column so that's the one we
need to check for so we're going to say
and you ID is equal to variable ID and
that's basically all we have to do so
let's actually go and save this and go
back to a website let's actually go
ahead and do a hard reset like so and
let's actually see if we can delete the
other person's comment well we do
actually get an error message here but
but that's actually going to tick what
this is all about line 42 which is ah
for some reason I didn't actually
include this in here I thought I did
let's actually go ahead and take why
this is happening
ah okay that's because our the leaves
comments function is also down inside
our reply button which it actually
shouldn't be so let's a go and delete
that one that's because we didn't
actually create the reply button in the
previous episode so it will give us an
error inside the reply button so let's
actually just go and delete that
don't worry about it that's not part of
this episode now i refresh and as you
guys can see no errors if I go down
right click on the reply button of the
second post inspect the element and
right now we'll actually say that the
comment ID is eight which I can tell
right here so let's go ahead and do the
same trick as we did last time I'm going
to go and change the value to eight
directly inside the developer tool like
so and try and delete and as you guys
can see the post is still here and
that's because we're doing the second
check will we check if we're in fact the
same person who actually made this post
down here when we also click the submit
button or delete or edit button in this
case so this actually fixed it just to
show you guys the other thing that I
mentioned about comparing the author and
the clock instead of using the comment
ID and this is sort of a bonus thing we
already fixed a mistake that I made so
if you guys want to follow on this part
it's a pretty good thing to know so if I
go back into my comments that link the
PHP file and go down to five seven my
delete form you guys consider right now
we're using a hidden input with the
comment ID in order to find the right
comment when we go down to delete
function search the database inside the
comments table where common ID is equal
to common ID so if you want to use the
author name and the clock instead what
we can do is we can go actually go ahead
and delete this line of code because we
don't need it and instead we're going to
reference to the UID up here and a date
what you also have up here so I'm just
going to go ahead and say
what we do actually need to have an
actual input down here so we do actually
need to keep this but we're just going
to go and change the name and the value
so right now I'm going to change the
name from CID to UID then I'm going to
go ahead and change the value to what we
have up here which is Row 2
UID then we need to include a second one
because we need to match up two
different pieces of data to see if the
both exist inside the right row inside
the table so we're going to go and
change the second line here from UID to
date and as well change the value and
that was row date without the two so now
that we have this we can actually go
back into our delete function which is
down here and we need to make sure we
bring in not the common ID but the UID
and the date and now we simply need to
replace these inside our SQL statements
so red right now waxey checking for the
common ID we need to check for the UID
I'm just going to go ahead and go after
UID say and and then we're going to go
and check for date and I do believe if
you go into the database that it is
called date so that's actually what we
need to go in and look for so we'll say
date should be equal to double quotes
variable dates and for some reason we're
getting a small error that's because
these do not need to be double quotes
that need to be single quotes there we
go
and that's basically it and this is all
we had to do in order to change this
this should work essentially so if we do
actually go in and try to just simply
delete one of our comments here the max
will refresh the website just to make
sure delete and it does not delete for
some reason let's actually go ahead and
double check why that is okay so I made
another mistake here I made quite a lot
of mistakes today so we don't actually
check for the UID here you know with the
actor you are Deva tapped in
at the input because right now we're
taking for the UID to different places
we're taking photo session ID which is
the same as the UID and instead of a UID
down here we do actually need to take
for the author name not the UID
so we're going to go and change all
these do IDs that we wrote here into
author instead because if you actually
go into the database you guys can see
that we have UID inside our comments
table and we have author and we want to
check it with author and with the date
not the UID and the date so knowing that
let's actually go and change the code so
all the UID is down here are going to be
author except for the one we met is with
the session ID and we also need to make
sure to change this inside our form up
here with the delete button so instead
of UID we want to check for author I can
actually spell out correctly there we go
now we need to make sure this is
actually wrote to author that we need to
write here let's actually go ahead and
check I do actually believe this should
be row without the to author so now that
we've done this let's actually see if
this works if it doesn't work it's
probably with Row two and not you know
again with the bad naming I sort of
named it better last time so if I try
and delete you guys can see it's been
deleted so now it works so that's
basically how we can fix this and I hope
you guys found this useful it's
definitely something you should know
about when you make websites I don't
know why slip in mind when we're
actually making the comment section
there's so much things I have to say it
once and English is not my native
language so sometimes I slip up so I
hope you guys can forgive me on that
part so let's see you guys next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>