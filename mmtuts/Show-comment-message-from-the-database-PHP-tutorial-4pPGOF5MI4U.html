<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Show comment message from the database - PHP tutorial | Coder Coacher - Coaching Coders</title><meta content="Show comment message from the database - PHP tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/mmtuts/">mmtuts</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Show comment message from the database - PHP tutorial</b></h2><h5 class="post__date">2016-01-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4pPGOF5MI4U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today we're going to continue working on
our comment section inside our website
and for this episode we're going to
focus on actually trying to get the
comments from inside the database and
showing them inside the website so we
can actually see them underneath our sub
midsection down here now before we get
started the actual coding I do want to
mention that I did actually went ahead
and created just a couple more comments
so as you guys can see inside my
database I do actually have six comments
inside my comments table so if you guys
don't have more than one I recommend you
guys write a couple more comments jesse
has something to test out on so the
first thing we're going to do is I do
actually want to get rid of this white
background because right now we can
actually see a lot of things inside our
comments section so let's actually go to
a stylesheet first at the very top here
I'm going to go ahead and start my body
tag and tell it to get a background
color as some kind of like grade so I'm
going to say hashtag DDD and as you guys
can see now everything is a little bit
great so now we can actually see the
comment section underneath here so the
first thing we need to do a no tax to
get the comments showing is we need to
create a function which goes into the
database and gets the comments and then
shows them inside the website so if you
go to a common studying - PHP file we're
going to go underneath our function
called set comments and we're going to
create a new function now this function
is going to be named gets comments with
a big C and you don't have to call it
this it's just it makes sense to call it
gets comments because we're getting
comments from the database a typical
coding habit is when we want to set
something inside the database or insert
something from the database we want to
use set if you want to get stuff from
the database you want to use gets you
know when we name stuff so now that we
have get common so it's like to go and
open up the code and make sure that we
do actually remember to include the
connection this time so we're going to
say variable conn and include it inside
our parentheses otherwise we can
actually get a connection to the
database so now inside the function here
the first thing we're going to do is
we're actually going to go ahead and
write the
EQL code you want to query inside the
database so i'm going to write variable
SQL equal to a string semicolon inside
the string we just need to write a very
basic select statement so I'm going to
write select all from comments so now we
just need to run this piece of code
inside the database and we use the exact
same code as we have on top of here but
we just create a result variable and say
we want to create a connection and then
we want to use a method called query
where we run the SQL code we wrote on
top of here now if you asked about using
the same names for the variables as we
did up here right now this would not be
an issue because we're inside different
functions so this would be okay now if
we were to actually have these just to
show you guys underneath this code up
here because we need to create two
different types of connections then we
would need to name these something else
because right now it would actually go
ahead and if I were to write this it
will actually go ahead and overwrite
whatever we have up here and say okay
we're going to replace the value of SQL
and result with this instead just FYI so
now that we have the connection going
and we actually run the SQL code I'm
going to go ahead and create a variable
called dollar sign row set it equal to
our dollar sign result which points to a
method called fetch underscore a Suk
which basically goes in and gets all the
different results from the database and
allows for us to equity amount because
its inserts them into an array so if I
go below here I can access a dollar sign
row which is now an array create the
brackets and give it the name of the
column that I want to spit out on the
website so I can actually go ahead and
say single quotes message
and now that we have the message I can
actually go ahead and echo it out I'm
just going to write echo first so now if
I go into my front page I can actually
go ahead and just simply include this
function here right underneath our form
semicolon so now if I go to the website
you guys will notice that I do actually
get hi there
underneath here and that's because right
now we're just echoing out the first
data that we get from the result if you
want to get all the comments because
like you guys can see hi there is only
the top one I want to get all of them
equity out at once we do actually need
to go inside out function and echo them
out using a while loop so right on top
of the dollar sign row variable we
created down here let's actually go
ahead and create a while loop and inside
the parameter of this while loop we're
going to say well we're actually going
to copy this entire line except the
semicolon at the end we want to leave
that out and paste it inside our
parameter so now what we're basically
saying is that every time we have a
result from the database we need to spit
it out so it's going to loop through all
the results until there's no more left
and for each time we have a result I
want to echo out the message of that
piece of of that row that we get a
result from so now if I go to the
database or go to the website you guys
can see we get all the comments from the
database now of course right now they
are all pretty much going on right next
to each other so you can actually tell
when the next one starts so right after
my echo here I'm going to go ahead and
create a break like so let's actually
see if I can spell this correctly there
we go
let's actually go and include two of
them so I'm just going to go into copy
paste this in twice and now as you guys
can see we do actually get different
comments from our database so what we
can do now is we can actually go ahead
and say well we echoed out the message
but I would like to get the username and
the date as well so I'm going to copy
this line of code like so and I'm just
going to go ahead and delete the breaks
because I don't think we need them
anymore I'm just going to go ahead and
delete those as well actually
keep the last ones and instead of
methods I'm going to go to echo out UID
which is to use the name of the person
who posted the comment I'm going to copy
this paste it underneath and I'm going
to go ahead and echo out the date so now
that we have the date we should probably
include another break so let's just go
ahead and just copy one break like so
and now if we go back to the website you
guys will notice that we get the
username the data was posted and the
message from the post so now what we can
do is we can actually go ahead and just
style this a little bit so we do
actually get some styling going on as
well so right now I do actually want all
my comments inside a box a white box
underneath each other so inside our code
here I would like for us to go in and
before we start echoing out all the
information I want to echo out a div now
just mention it right now I'm actually
echoing out each line individually you
don't have to do that you can actually
just include everything in one echo
which is actually how I usually do it
but for the sake of this episode let's
just go and do it this way so I'm just
going to create a dip and I'm going to
copy this echo paste it underneath our
message and then close the div again now
I'm going to move out my middle echoes
just a little bit so we have some order
a net and not only have this I'm
actually going to go and delete my
breaks after the message because we
don't actually need those now do we have
this we can actually go ahead and say
well let's actually go ahead and give
this div a class set it equal to
comments - box because I'm very creative
in my naming here and then we can go
into our style sheet now at the very
bottom here where we have the button
we're going to insert our class called
comment box and we're going to say width
is going to be 800 and
50 I'm guessing it's probably going to
be less let's say 45 pixels and we're
going to go ahead and give it a padding
as 20 pixels we're going to give it a
margin bottom as 4 pixels a background
color as white and let's just go and
give it a border radius as well just to
make it look nice for the desk radius as
4 pixels so let's actually see what we
have here now somewhat okay it's a bit
too long so that's actually going to cut
it down to maybe 15 that was actually
pretty spot-on so 815 pixels white and
now because we have the padding our text
is not touching all the way to the side
of the box so I'm just going to go and
include some spacing underneath my
comment button so I'm just going to go
into my button here and say margin
bottom as 60 pixels like so so now you
have all the comments down underneath
each other we can also go ahead and give
the text of styling now we're not just
going to do styling from now on we're
actually going to do one more fix which
does actually fix the fact that some of
my comments inside the website here I
actually supposed to have line breaks in
them if you go into my database and that
you're actually going to edit just to
show you guys I do actually have some of
my comments not this one I think this
one which does actually have a break in
between the lines
if i zoom in for you guys and we can
actually see that inside the website
right now and that's because it does
know how to interpret the breaks
properly so we do actually get them you
know going down to the next line but
we're going to fix that after we style
it so now we have the div let's like to
go ahead and create a paragraph tag
right after the div starts and then
we're going to close the paragraph tag
right before the tip closes
we're going to go into our styling we're
going to say we have common box and
inside comment box we have a paragraph
now we're going to go ahead and give a
font family as Arial which I really
don't like but we don't have any pretty
fun so we just gonna use Arial for now
we're going to say font size set it to
14 pixels we're going to say line height
- I'm guessing 16 pixels and let's say
color has tagged - 8 - 8 - 8 which is a
very dark grey and let's give it a font
weight as well just so we make sure it's
not a bold font and there we have it so
now we have some very basic styling of
the text here we could also go in and
just style our date and our username
differently if you wanted to but you
guys not to do that so we're not going
to do that now in order to fix the
breaking issue that I talked about we do
actually need to go back to a comment
function and need to include a building
function inside PHP around our message
that we do actually echo out because
right now it just echoes it out and
because our line breaks inside the
database I actually seen as a PHP line
break called
an L which means new line and we need to
take this an L tag and interpret it as a
break instead because then when we do
actually echo it out on the website it
will understand the break and create a
new line so inside our function right
before the message you notice I wrote
message we're going to create nl2br
parentheses then we're going to make
sure that the dollar sign row message is
inside the parentheses and now it
basically goes in and checks for any
kind of ML tags and converts them to
break since then so if we go and refresh
the website you guys will notice that
now we get line breaks so for words are
going to write a comment create a color
line breaks
write a comment again refresh it or
submit it you guys can see we get all
the line breaks
so this is quite a nice feature that you
guys should know how to do so not only
did this we basically have all we needed
to to basically show the comments I will
probably do just a tiny bit of styling
after I'm done with this episode just to
make the use ID and the date look a bit
nicer but that's basically it for this
episode for the next episode we'll
actually talk about how to edit our post
inside the database you know where you
actually have an edit button that you
can click and edit them well also in the
next step is so after that one going to
talk about how to delete comments from
inside the database by having a delete
button so for now this is all we're
going to do so if you guys enjoyed now
see you guys next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>