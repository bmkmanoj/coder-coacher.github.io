<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Virtual Memory - Part 2 | Coder Coacher - Coaching Coders</title><meta content="Virtual Memory - Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Dave-Xiang/">Dave Xiang</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Virtual Memory - Part 2</b></h2><h5 class="post__date">2016-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WO7HaxdfSmU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's going on guys hope everyone
had a really really great week technical
video this week and we're gonna talk a
little bit more about virtual memory if
you need a refresher please just watch
my part 1 video on virtual memory that
was more of an introduction and
intuition type video but this week we're
gonna get into a little more guts behind
virtual memory but please please watch
this first and I think this video will
make a lot more sense
all right tech video today getting into
some more details nerding out a little
bit hope you enjoy it let's do it every
single process running on your computer
right now sees the exact same layout of
memory obviously we know that that's not
the same physical memory but they see
the exact same blueprint a virtual
memory every single process sees it and
everything works and the system just
runs it's it's crazy and we should just
appreciate it a little bit so last video
we talked about this blueprint idea well
what exactly goes inside that blueprint
and that's the topic of this video there
is a really good blog post about this
and I'm gonna put a link to the blog in
my description but I'm just lifting the
picture from that blog post I'm gonna
put it right here for the duration of
the video and we're gonna take this
picture and dissect every single section
of the memory blueprint so we're gonna
start from the bottom go all the way to
the top I'm gonna keep this picture here
it's probably not gonna make a sense
right now but by the end of the video
you're gonna know about every single one
of these sections alright starting at
the bottom first section of this memory
layout is where the processes program
code and data are stored and what
exactly does that mean remember that
every single process of running in your
computer right now as you're watching
this video there's hundreds of processes
running on your computer each one of
those came from source code that
somebody wrote at some point in time you
wrote a program spend a hundred hours
10000 hours compiled it built it down to
an executable and those are the
executables that are running on your
computer
think of all the stuff that goes into
writing a program write all those
millions of lines of code
you wrote all those lines have to be
translated into machine instructions and
where do those machine instructions go
where they go in this section of the
memory second section you're gonna see a
section called the data segment and the
BSS segment but I'm gonna actually group
this into one section this section of
memory is gonna hold static data from
your program if you're a C or C++
developer the word static might pop up
in your head but static variables hold a
special place in this section for anyone
that doesn't really know C or what the
word static really means I think a good
way to intuitively understand what
static means is to think about not
dynamic let's just talk about dynamic
data a little bit all right if you're
watching this video on Chrome you can
just hit new tab a hundred times right
you could hit it one time you could hit
it two times the programmer would never
know how many times you're gonna hit tab
so every time you hit tab it's gonna
take up more memory Chrome's gonna take
up more memory every time you close a
tab Chrome might free up some memory
what's another example let's say let's
say you programmed the to-do list right
you programmed to-do list and you give
it to your friend well you don't know if
your friends gonna make one to-do item
or ten items right it's all very dynamic
memory so dynamic memory is something
that the programmer can't control right
you can't control as a programmer how
many tabs the user opens in Chrome well
static memory is just literally the
opposite of dynamic you know exactly
which data you need and how much of it
so if you're a programmer let's just say
you need ten megabytes of data and you
know you need 10 megabytes of data
nothing more nothing less it's just
static my program needs these 10
megabytes to run where are those 10
megabytes going to be stored well
they're going to be stored in this
section of memory for static variables
all right third section going up from
the top third section if you can see it
right here it's called the heap and this
is going to be a really easy section to
explain based on what we just talked
about the heap that
Heep is actually where all that dynamic
data goes and is allocated all those
chrome tabs all those to-do list items
any data that's really dynamic and
determined that runtime is gonna go in
the heap so you can imagine that the
heap grows and shrinks all the time it's
very dynamic right if you keep making
tabs in chrome you're gonna use more
memory and that heaps gonna grow if you
close tabs in chrome the heap might
shrink so this is all very runtime
specific and what does runtime really
means it just means that the allocation
happens when the program is running if
you program than see before I'm sure
you've used the function malloc which
allocates memory in the heap for you if
you use C++ there's a new which does the
same thing but mostly any dynamic
runtime type of memory that you need is
gonna go into this heap
all right so heap hopefully it's
intuitive just a very dynamic space to
allocate memory all right we're on to
our fourth section going up from the
diagram just follow the diagram up the
fourth section of the layout is called
the memory mapping section
it sounds really complicated but it's a
really really simple idea the memory
mapped region of this virtual memory
layout is actually a very special
section where the program or the process
can access files on your computer that's
pretty crazy if you think about it right
it's just a file it's sitting on the
computer on your hard drive on your
flash drive it's just a file persisted a
bunch of bytes persisted in your
computer somewhere so why would you ever
want to access files in your program but
one major use case of accessing files
inside any running program is to utilize
shared libraries I made a quick video
about shared versus static libraries
that I'll link to right here but you
should definitely watch that if you need
a refresher but shared libraries is
implemented in this section quick
10-second recap on shared libraries to
remember that a shared library is a very
special file that sits somewhere in the
computer is actually a file but the
program can access that shared library
at run
I'm exactly what it needs it on the flip
side of shared libraries remember that
we had static libraries and static
libraries are actually code and
functionality that are included in your
program at compile time
so they actually make your program
bigger and if you use a lot of static
libraries your program itself grows and
all that static functionality would
actually be included in the bottom
section where all the program data is
stored the major takeaway of this
special section is that this allows your
program to actually access files just
anywhere in your computer so it's pretty
cool all right
fifth section going up from the top
fifth section if you can see it right
here it's called the stack this is a
very simple very cool section and
hopefully it's easy to understand so a
stack is used to manage function calls
in a program and every single program
uses a lot of functions or a lot of
methods or a lot of routines
what-have-you but deep down inside it's
all implemented the same way so you have
function a it goes into function b
function b goes into function c function
c goes to the function d but oh crap
function D is done so we have to make
sure we know the right place to return
to in function C but all that management
all that function calling and returning
all that stuff is managed by the stack
so you can imagine that the stack kind
of like the heap it's very dynamic right
if your program if the program you wrote
uses a lot of functions you call like
100 functions the stack is going to be
utilized a lot if your program is one
huge function it makes no function calls
it's like 10 million lines then you
might not use a stack very often if you
never use functions all right so that's
the stack
hopefully it's really clear managing
function calls throughout a program ok 6
6 this is the last section that we're
going to talk about for this video but
the sixth section all the way at the top
you can see that there's a special
gigabyte of space reserved for kernel
memory this one gigabyte of space for
the kernel is actually a very special
area of memory and it's kind of a
privileged section
of memory privileges meaning that no
matter what you do as a programmer you
could never access this type of memory
is kind of like off limits if you ever
try to manually write a program or write
some code to access or read data from
the privilege section your program will
just crash the important thing to know
about this kernel space is that remember
all software that runs on your computer
sees virtual memory right all software
that you write or actually any software
that's running on your computer sees
memory sees the virtual memory of layout
and that includes kernel software
because at the end of the day kernel is
the software to the kernel that special
part of the operating system that is
also software that someone wrote
somewhere so this special reserved
section for the kernel software is
always present in the layout of every
single process every single process
their memory layout they're gonna see
that kernel code at the top and there's
nothing a programmer or a user can
really do about it all right guys that's
the end of the video
definitely glossed over a lot of
itty-bitty details but all the sections
that we covered are really important
sections of any program or any process
that's running on your computer so just
take a moment and maybe again we
appreciate everything the operating
system does virtual memory is just one
out of ton of that the OS does
that's just magical all right guys so I
put a link in the description that goes
to that blog post but that blog post has
a lot more details than what we talked
about in this video I try to hit the
very top level like core concepts a
virtual memory but if you want to learn
about some more details and cool stuff
check out that post google it some more
and just read about it alright guys so
that's it virtual memory the memory
layout that every single process on your
computer sees magical stuff hopefully
this was a fun video even those a little
bit technical but hope everyone enjoyed
it please leave me a comment ask me any
questions do your own research and oh
yeah subscribe I forgot about that
but anyways have a great week kill it
all that's
and I'll see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>