<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Unity3D] Floating physics objects In Unity3D | Coder Coacher - Coaching Coders</title><meta content="[Unity3D] Floating physics objects In Unity3D - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Unity3D] Floating physics objects In Unity3D</b></h2><h5 class="post__date">2013-12-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mDtnT5fh7Ek" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I've got a new tutorial for you
today and this is about I'm actually
knocking sort of physics objects into
water and then making it flow now I did
a couple of other physics tutorials that
which is about pushing an object and
then making sort of impact sound when
you hit the ground and things like that
so I'm going to follow on from there so
my scene is just my you know general
scene with a character controller I've
got a plane of water and upset the Y
value of the water to Fox going to use
that in the script now on the barrel
that we've actually got we've got what
had before so an impact effect and an
audio source now for this what we're
going to do is on the impact effects you
can download these from a website and I
just add the water splash sound effect
so when it hits the water that script
doesn't need to be changed and it'll
work just the same and your object if it
didn't already needed a rigid rod rigid
body with use gravity and needing a mesh
Collider which is tagged as convex or
because we've got a more cylindrical
object and on our first-person
controller we've just got the object
physics so we'll be able to push it into
the water now we're going to start off
by making the script which is going to
control you know when the barrel hits
the water and making it do something
when it's at a certain level so what
we'll do is we'll go create JavaScript
and we'll just call this flat and what
we'll do is I'll prop in monodevelop and
when that so open I'll delete these two
functions I'm going to say variable
water level as type float make that
equal to far obviously you change to
whatever height of your water is from
your Y value then we're going to have a
variable called float height as type
float and set equal to two now you can
change this depending how high
you want your object to float in the
water you can always change this in you
expect in the inspector once you've
written the script but you just need to
mess about with what works for you we'll
have another variable called bounce dump
and set that as type flow equal to
naught point naught 5 and that's almost
how you know rapidly it bounces up and
down then we'll have another variable
called buoyancy Center offset and set
that as type vector 3 with a semicolon
then we're going to have three private
variables one called force factor set
that as type float another private
variable called action point as type
vector three and then one more private
variable called uplift as type vector
three as well and then we're going to
begin by saying function update and then
add in two curly brackets then we'll say
action point is equal to transform dot
position plus transform dot transform
direction in brackets buoyancy Center
offset width so we'll copy it from
whatever we set up here so I'll expel it
make sure we spell it right close the
brackets add a semicolon then we'll say
force factor is equal to 1 F - open up
two brackets will say that action point
dot y - the water level close the
brackets /
float tight close the brackets
semi-colon and then we'll write a new
statement and say if the force factor is
greater than zero F then we'll add two
curly brackets underneath and say that
uplift is equal to minus physics dot
gravity times by open brackets force
factor - rigid body dot velocity dot y
times by bounce
damn close that bracket at a semicolon
then we'll say rigid body dot add force
at position and we'll say uplift comma
action point and then we'll save that
out so all we're saying really is that
in the update we'll set an action point
to where it's going to move or where
it's going to sort of pivot from and
we're setting it to the position the
direction that we set the offset to be
and then we're setting fast factor but
I've actually missed out the equals in
fast factor is where you apply the force
at the action point that we've set by
the water level and we're just dividing
it by the height at which it will then
move up and down and as long as the
force fact that we've set is greater
than zero then it will apply some
physics based on gravity and make it you
know as if it will bob up and down
accordingly so we'll save this out and
we'll go back into a monodevelop
and then what we'll do is we'll click on
our barrel that we had and I'll add the
float value here now we have the watt
level set to fall
the height of the plane will have the
flat height about two you know you can
change all this and we can have the
center offset so we can maybe add one to
the x value and this you know you can
change this depending what you want I'll
change it and show you as we go through
so if I press play you'll see my barrel
there I can push it off and it lands in
the water and you know it floats about
and we can push it whilst it's in the
water you know we can push it around and
do whatever now what I'll do is I'll
play this again actually and I'll push
the barrel in again I'll push the barrel
in and what I can do if I can try and
change this without it moving too much
it will change this one to one and that
to one you'll notice that the position
of the barrel slightly changes so if
I'll knock these two to zero you'll see
that it moves differently because it has
a different offset depending on what
type of bowel you would have so if I now
set this to five you'll notice that you
know it changes appropriate late - you
know however you want it to actually
look so this could be you know something
with um somebody inside and you know for
a fun game but as I say you know this is
just a sort of simple way and to
actually get this to work so if you
liked the tutorial as ever thanks for
watching and like comment and subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>