<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating a Survival Game in Unity: Part 6 - Respawning Berry Bush | Coder Coacher - Coaching Coders</title><meta content="Creating a Survival Game in Unity: Part 6 - Respawning Berry Bush - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating a Survival Game in Unity: Part 6 - Respawning Berry Bush</b></h2><h5 class="post__date">2014-09-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VjENsh5ONdY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to part 6 of my
survival series of tutorials and today
like I said in the last tutorial it's
still going to be a part of sort of the
infantry but it's going to be a little
bit of aside from that because it's not
going to be dealing with too much of an
infantry it's going to be making a berry
bush or something along those lines that
you can pick the berries from obviously
add that to your infantry and after a
certain period of time that bush will
then really stock with the berries
obviously when you collect the berries
they're going to disappear from the bush
the tree or whatever you going to have
and then as I said you can set a certain
amount of time then they'll reappear and
you can do that again and obviously that
might work with when we get to do a day
to night cycle and things like that but
for the sake of this we're going to make
it simply and we're just going to start
off right away so you can see in my
scene here the what I've got is I have
got a it's called my berry bush object
here and all this is is one of the
plants that I've got in the pack that
I've used for this entire forest so I
picked a plan which looked like it could
have berries on it so it couldn't be
anything could be just a cube but for
the sake of this a visual element to how
we're going to do it so what I've got is
I've got my berry bush it's named berry
bush for now and what I've got is I have
got the berries themselves you can see
here if I click on the berries inside it
you can move them out all they are is
just a series of spheres that I made in
3ds Max and just bunch together so as
you can see I grouped all these spheres
together inside one game object an empty
game object and I named it berries so my
berries is just an empty game object
with all those spheres group together
act on that a bit about wearable for the
sake of this you can create those in
unity by going
object.create other and you could create
a lot of spheres and then just create an
empty game object to group them all
together then make your grouped berries
a part of our child of the berry bush so
then because we're going to reference it
and get rid of them as we're going
through and then what you need to make
sure is that your berry bush has a box
Collider around it so then we'll be able
to do the rare cast so we can detect the
collision so we can then you know do the
things that we want to do with the item
that we've got so what I've done is that
I've even made a prefabs up just
prefabbed the bush so I could drag it
out as many times as I want so we'll
stick with this for now so we've got our
berry bush with the berries as a child
and then we've put a Collider all the
way around the actual original object
that we've gone so what we're going to
do is we're going to start off by
writing a new script we're going to
start by writing a new java script and
then what we can do is we're going to
call this Bush controller and then we're
going to open the up mod develop and
once we've opened that up will delete
the to begin functions and what we'll
start by writing is variable berries
taken as type boolean equal to false
then our variable called berries as type
game object then I love another variable
called berry timer as type float equal
to 5.0 just for now we're going to have
5 seconds then below that we're going to
write function update with two brackets
then two curly brackets below we're
going to say that if berry berries taken
is equal to true then we'll close open
add two curly brackets below and say
that berries dot active equals false so
that means it will be able to turn off
the actual full game
the game object our component which is
what we're going to set to berries then
we're going to say berry time - equals
time dot Delta time so it's going to
count down from our five seconds that
we've set then we're going to set this
dot game object dot tag is equal to so
one equals and then in quartz we're
going to pop bush empty and then I
descend McCollum because what I want to
do is change the tag so we can reference
it in our air cast script so obviously
we don't want to keep on picking up
berries if the bush is empty so we're
going to change the tag to easily
distinguish between the two then we're
going to say that if berry timer is less
than or equal to zero then we'll add two
curly brackets below then we'll say
berries dot active equals true then
we'll say berries taken is equal to
false then we'll say this dot game
object dot tag is equal to bush full and
those are in credits again and one other
thing we're going to need to reset the
timer again so it's as it was at the
beginning will pop berry timer is equal
to five so we just need to match it up
with the initial timer that we have to
want to set it back to its initial
amount so that's it for the bush
controller what I'll do is if we have
collected the berries then we're going
to turn the actual berries off so we
obviously can't see them
then start making the timer go down
changing the tag and then when the
timer's hit zero so when we want the
berries to then respawn it could be a
hundred seconds it could be whenever it
could be when we've done a full cycle of
the game world but for the sake of this
we're just going to say that when it's
equal to zero we're going to just reset
everything back to how it was normally
so one thing you want to do is when you
go back into unity if you go to your
berry bush that we've got the collider
you
to make sure that you've got two tags
one as Bush fallen one as Bush empty
because if you don't have them tagged
already you'll never be able to create a
new one it has to be already available
to switch so you make sure that it's on
Bush full to begin with then what we'll
do is we'll add the berry bush script or
the Bush controller script to our bush
that we've got and then we'll add ill
have empty sort of ops base another
object so we'll add the berries in there
so then that's ready to go
now we'll open up our rare cast collect
script and then in here the last thing
we talked about was a coconut so what
we're going to do is scroll all the way
back up to the top again and then we're
going to add in two new variables right
at the top it's going to be one variable
called bush and have that as type game
object then another variable called
player and have that as type game object
as well and then we'll go down to
underneath where we're talking about
with coconut and on the curly bracket
which isn't capsulate in the if
statement so we'll discard just below
there the more key to do is copy this in
taste
if stem for the coconut we're going to
paste in because we're we're going to
use I'm going to use this to be our
thing that we find the bush with so
we're going to change the tag from
coconut to bush full so it's only when
bush is full we're going to look for
that tag then we're going to make sure
that GUI shows true then what we're
going to do is that Cena's only might
have multiple berry bushes all around
our world we don't want to have to set
them hard-coded in the script so what
I'm going to say is like we created
before we create a bush variable which
we're going to fill now so we're going
to save bush equals hit dot collider
dark game object so what that means is
that for every rare that we cast we're
going to set Bausch equal to the game
object that we find if we found bush
full so it's just going to find what
Evers whatever
objects are rares hid which has this tag
so which means we'll be able to find
every single bush no matter how many we
have in our scene so then it will say
that if an input is e then we'll keep
GOI false as show GU is false will
delete the other two things in the
script there will tab across and then
we're going to write bush dot
getcomponent and all our bush is going
to have exactly the same component on
bush controller dot berries taken equals
true so that means it's set in our other
script so berries taken is going to set
it to true every time we press E if the
band the bush is full I'm going to make
sure the GUI is false there so we don't
want to see it when we've collected it
then we want to say player dot
getcomponent over brackets
inventory close the brackets and for the
sake of this tutorial I'm just going to
say cooked fish plus equals one so
that's just going to add one two cooked
fish obviously it's not a cooked fish
but it doesn't really matter because
it's merely a name that we using so what
we're going to do is we'll make sure
that the raycast
collect is on our main camera so you can
see it here what we're going to do is we
want to add player to that script so
we'll just drag our player and for Bush
you want to leave that because that's
going to find it and whenever we
actually do something so my berry bush
here has the object what we'll do is
we'll duplicate this a couple of times
so I'll put it there and I'll put it
here
then what you'll see is when I start my
again you'll notice that it says pick up
on the bush you'll notice that when I
bring up the infantry with I cooked fish
is equal to three then when I press E to
pick up when I press I again you'll
notice cook fish is now or equal to four
and obviously I can press this again you
see it appeared after the five seconds
and we will have five press it again
will have six I can press it as many
times as I want and we'll never get any
more until it's back and we can go over
to our other plant collect some we've
got seven go over to the other plan
collect some we've got eight obviously
they're going to come back every second
so we can have a constant sort of game
mechanic where we can always collect new
berries and obviously you want the timer
to be a little bit slower because we
have berry bushes that produce the
berries very very quickly so that's just
the entirety of making yourself a
responding berry brushing away with your
objects and with adding to what we've
already got so hopefully that helped
everybody out and that was what some
people have been looking for so thanks
very much for watching as ever don't
forget to Like comment and subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>