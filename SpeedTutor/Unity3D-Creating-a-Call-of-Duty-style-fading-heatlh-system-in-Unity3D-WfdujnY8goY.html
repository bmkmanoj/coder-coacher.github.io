<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Unity3D] Creating a Call of Duty style fading heatlh system in Unity3D | Coder Coacher - Coaching Coders</title><meta content="[Unity3D] Creating a Call of Duty style fading heatlh system in Unity3D - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Unity3D] Creating a Call of Duty style fading heatlh system in Unity3D</b></h2><h5 class="post__date">2013-08-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WfdujnY8goY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so today I've got a nice
tutorial something that I think you know
it's quite acceptable for a lot of games
and most primarily might be seen in such
games like Call of Duty and stuff like
that where you don't really have a
persistent health bar or anything like
that
you might have an actual visual element
and most common lads they used in FPS
games but you see a sort of a blurring
or a red sort of bloodshot effect around
the side of your screen so it's actually
all the codes in the background and it
manages it like that it doesn't have to
put any specific GUIs for taking health
down
we'll start off and I'll go in my scene
is a plane with some grass texture I've
got a torch which is just going to be my
fire to symbolize when you get hurt and
that's just from the simple particle
pack which you can download from the
unity asset store I've got our first
person controller which is tagged player
then I've got a directional light now
what I want to start off with doing is
actually I'll add in a cube and I'll put
this with my actual fire so I'll just
quickly move it down and I'll scale up
so it's going to acts as a Collider but
really for this portion of thing I'll
just get rid of the mesh renderer
so without veteran mesh renderer anymore
so we'll make it bigger so we can
definitely walk into that we'll make
sure it is trigger because when we walk
into it we're going to want to actually
trigger something that happens and we
can do that but that's someone named
this maybe damage trigger just so we
know what we're talking about and that's
pretty much it for now so we're going to
really we're going to need to write a
new script so if we want to do we're
going to create a Jarvis we'll call it
fading health or something like that
just anything you want doesn't
so double-click it open when I develop
monodevelop pops up now and what we
don't know I'll just get rid of these
cuz we're going to we're going to need a
few variables what we're going to have
is we're going to have a set of actual
this is dependent on how many images you
actually have for you damage so what
we're going to have is for image text
just saw text 1 and we're going to set
that to a texture what we're going to do
is copy that and Pierce ups and paste it
three other times then we're going to
name it text to text 3 text for and I
just quickly save that so what I'm going
to actually do you know to make this
visible on the GUI
is I've actually made some her images so
you could see here that's her 100%
that's her 70% that's her third percent
and that's just normal and all these
were created in Photoshop if you want to
know how to make something like these
because they all have a transparent
background and with the transparent
background if you didn't have it you
need to see white over the screen and
that'd be no good and you just want to
settle you text your types to a GUI
because you do not text you're just on
screens they need to be as normal
resolution so we'll go back into the
script now what we'll do is we're going
to create another variable called health
I'm going to set that to a floor we're
going to set it to 100 then we're going
to have two private variables one called
max health and set that to flow again
and that'll be equal to 100 and then
we're going to have another private
variable called enter Collider because
this is going to test whether we've
actually entered the collider I'm going
to set to boolean and say it's false to
begin with so there we go
we've got all our variable setup so I'm
just gonna see as though this is more of
a long script I'm just going to add some
comments so you can go back if you need
to so this is going to be our damaged
Collider
so we're going to write function
ontriggerenter open up our brackets and
you can name this whatever I'll just pop
coal as film a Collider Collider and
then I want to open up my curly brackets
and I'm going to put if call dot game
object dot tag is equal to player then
if we open up up curly brackets again we
can put enter Collider is equal to is
equal to true and we've gotten to
collider up at the top here so that's
just our boolean that we've set so if we
actually I put that I capital if we
actually enter the collider what it's
going to set is it's going to set enter
to Collider to true if you need to test
this you can write something like debug
log and then open up your brackets and
say is inside Collider and put a
semicolon in or save that I'll go back
to unity and if I go to my damage
trigger and add the script while do with
a fresh player I'll go towards this and
you'll notice that when I've actually
gone inside the collider so this is
inside Collider so that's okay for now
and then what I'm going to do is I'm
going to actually create a function on
trigger exit so I'm creating these
trigger enter and exit is you'll go
inside the trigger enter and it'll equal
true when you're taking damage and when
you exit you won't take damage anymore
so what I'll do is collect call collided
just like what we had before open up the
curly brackets and
what we can do is just copy what we had
there and paste it here so I'll - I'll
take that away that where I need to add
my curly bracket so if that we want to
set it to false now so when we enter
that collide and to collide is true if
we exit that collide that we've set then
enter Collider is false this doesn't do
anything until we actually call the
enter Collider so first of all what
we're going to do is we're going to
actually write something our update
function so we're going to write up
function update two brackets and if we
had two curly brackets
what we're going to say is that if
health is greater than zero and then we
need the two an and end to collider is
equal is set to true then what we're
going to do is health minus equals time
dot Delta time which means that if the
health is greater than zero so when
you're not pretty much dead and the
collider equals true and you're actually
in the collider then health which is set
to 100 will just count down and time
double time just means it'll count down
in seconds then I'll put a little tag
here so you know what I'm talking about
I'll put health count down whilst
in the damaged Collider and then we're
going to just create a couple of line
breaks we're going to put if health is
greater than or equal is greater than or
equal to zero and and the double end
and to Collider is set to false then
we'll put two more curly brackets in a
Morse air health plus equals time dot Oh
make sure it's capital time dot Delta
time which and we'll cold will say this
is normal health regeneration so when
we're not in the actual hurt the hurt
Collider and it's set to false a health
regenerates like it would do in Call of
Duty and things like that because when
you're not taking damage you're getting
healed are you just health is
regenerating and then we need to
actually set something to make sure that
health never goes beyond a certain point
so it never heals so say our health set
to 100 if we didn't have max health we
could actually could go on to you know
hundreds of thousands F I don't want
that so then we'll say if health is
greater than max health then health is
equal to max health and all that means
is as it as it seems to say is if your
health ever gets greater than the max
health so if 100 and it ever goes past
100 then we'll just set the health to be
equal to whatever max health is and
we'll put a little comment on here just
say that when health reaches 100 we want
to just set to max health which is quite
simple and what we're going to do now is
going to actually add the GUI elements
that will appear on screen so we can
write function on GUI we need to make
sure that's capitals for GUI add the
braaap the bracket to the begin and then
add my curly brackets and set if
health is less than or equal to 107
then we'll say add the curly brackets in
between G Y dot draw texture will pop
rect and then we'll put 0 0 the right
screen dot width comma screen dot height
then we'll close that bracket put a
comma and say Tex 1 then close that and
enclose the actual semicolon off so what
it means is if the health is less than a
certain amount it will actually just
draw the GUI that we set as texture 1 to
it so what we're going to do is we're
going to copy we're going to actually
copy this we're just going to paste it a
few more times so in there in there in
there and then what we can say is if
health is less than or equal to 90 95
here or is it less than 90 or less than
85 then what we'll do is we'll change
the textures accordingly you can keep
all the code the same but only these
bits are actually changing so we've got
these so on GUI works like this because
you normally put it in update function
because function updates every frame but
GUI does this as well
oh but one thing I did forget before we
do anything is make sure you've got a
comma here because when I started in
loads of commas I start getting a lot of
me confused with what I've added so we
save this out then we can go into unity
or go into unity and our damage trigger
we need to add our her images so the
first text one we set to whatever was
normal text - we got the sin text 3 70 %
and then follow her so what I'm going to
do is I'm going to make sure that
maximize on play is not ticked so when
we play the game we can see this side so
as you can see when we play the game
health is set to 100 nothing's appeared
now if we go towards this fire and
inside the trigger you'll notice that
health starts going down it's less than
95 you'll notice that um um help you on
the GUI is are appearing less than 85
and get more and so on and if we walk
away out of the collider you'll notice
health goes back up health regenerates
now you can make this dependent on can
make this you know the health is 10 and
it counts down for 10 seconds or
something similar to that but as I say
when we get to 100 it's numb but now
it's counted down again counting up so
that's pretty much it that just shows
you how to make a simple sort of fade in
health system simply like you would in
sort of any game that you'd find without
sight system so thanks very much for
watching and if you liked the tutorial
don't forget to Like comment and
subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>