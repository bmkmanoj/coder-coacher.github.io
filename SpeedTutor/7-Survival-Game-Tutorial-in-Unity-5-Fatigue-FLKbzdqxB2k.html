<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>7. Survival Game Tutorial in Unity 5 - Fatigue | Coder Coacher - Coaching Coders</title><meta content="7. Survival Game Tutorial in Unity 5 - Fatigue - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>7. Survival Game Tutorial in Unity 5 - Fatigue</b></h2><h5 class="post__date">2017-08-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FLKbzdqxB2k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to another unity five
to total today and this is going to be
the part 7 to the survival series in the
unity 5 now I've upgraded this project
to 5 point 6 point 2 now it work it will
actually work in any version of unity
that you've got but I just like to
mention that last time we were looking
at creating consumables and this time
we're going to be looking to creating a
fatigue sort of bar meter what everyone
looking
sostay it down here in the bottom corner
we've got and the health first hunger
stamina now fatigue if you've replayed
again like long dark that has some soft
fatigue and when you're awake for so
long you fatigue slowly decreases and
may have an effect on stamina and then
you have to sleep to you know change and
get you fatigue back because you might
be tired now I'll move on to in the
video after this about sleeping and how
to restore your fatigue but for this
we're going to create a fatigue meter
that we're going to make it go down like
a lot of these other bars that we've got
and then when it reaches a certain value
we're going to cap the stamina so we
don't get a full stamina back depending
on where your fatigue is so so we've got
half fatigue then we might only have
half stamina so it can you know lend
itself to you can run as fast on us for
as long you wouldn't be able to do as
many activities and it would just you
know add more layers to your survival
game now thanks to some people who
commented in the comments from my last
video and they just helped me change a
few things in the script to sort of
optimize things so I'll just go through
these really quickly and you I will
upload these to my website so you can
download them if you wish but within our
raycast script originally made we just
made a local variable for the item
properties which would go on all the
consumable objects we originally found
the rare casted object using the rare
cast and the soft collider we find with
a particular tag
then we'll just fill the item name with
what you know we've already specified in
the item properties and then when we am
left click we actually go and once
you're left click on an actual object
and we will then run this function here
in the interruption in the object
properties and it will do whatever we
need to do so an added value to
whichever of the consumable you've
picked up and it just uses these two
parameters in here to reference the
original script that we had so it's just
some little ways to sort of need some of
the script but like I said buildings my
website so we're going to get straight
onto adding our new bar to the scene
here so what I'm going to do is I'm
going to go to the scene view and I'm
going to go to our panel that we created
and I'm going to get the you know the
rect transform tool and I'm just going
to sort of scale it all up a little bit
like so then what I'll do is what we'll
do is I'm just going to grab at the
stamina UI and I'm just going to
duplicate that and then just call this
fatigue you I don't know what I'll do is
I'll grab the normal and move tool and
just pull it down a little bit so we can
see here I'll zoom in so everybody can
see what I'm doing and then I will drop
the fatigue UI down I will change the
stamina text to 50 and what I'll do is I
will also copy the word fatigue and just
paste it over the stamina text and the
stamina slider and change those both to
fatigue we will open up with that they
open up the fatigue slider and also you
will have a background and will go
inside the fill area and will look at
the cell and it's currently yellow what
we can do is maybe set it to a perp if
we close that up and go back to the
fatigue slider and we just adjust the
slide of our you can see that it changes
and we can see the red behind it so
that's all well and good we've cited
that out for now we could potentially
grab the panel again and just we could
just scale this Bend to fit in more
neatly now we're going to go into our
player vital script and you will see in
the player vitals and you'll see a lot
of things closed up here and I've used a
lot of regions and these are regions
used hashtag region and you name your
region then you end the region and it
does help you sort of shunt everything
and sort of hide it away when we don't
need to use it because there can be an
awful you know you can get a very long
script and it will be quite daunting to
look through so what we're going to do
is I'm going to create a new set
underneath the actual stamina --get
we've currently done so what we'll do is
we'll use a hashtag a tunnel type region
and that will call this fatigue region
and then under here I'll just use two
square brackets R right space then in
brackets 10 is just to organize the
variables but we've got and then what
I'm going to do is I'm going to write
public slider and call this fatigue
slider with a semicolon I'm going to
call this public integer for MUX fatigue
with a semicolon public integer 54 irate
with a semicolon and that's all I need
from now on the line below we can just
get the hashtag and we can you choose
end region and if we serve that out you
can see I can then close that up nicely
and that also fits well and nice in
there we're going to adjust stamina
because we're going to need to sort of
control how much stamina I'm going to
affect so we can open up the stamina
variables unless you've got the mouse of
you know floating around we can leave
the public side of first on the slide
that we can leave everything the same
except we're going to adjust this max
stamina so we're going to actually
create one and we're going to call this
norm max stamina and then we'll create
another variable below as another
integer and we'll call it fact my
stamina and what this means it's going
to be there the norm X stamina is going
to be our just our normal maximum
stamina and the fatigue back stamina is
the thing that we're going to change
based on what the fatigue is so the
normal will always be if it's out of 100
it will always be a hundred but the
fatigue one is what we're actually going
to change one we're going to change it
in the code so I'll close everything up
for now
what we're going to do is in the
starting sliders that we've got here I'm
going to create a new set of yeah I'm
just setting variables here so I'll say
fatigue slider
don't max value equals max fatigue with
a semicolon
and again is fatigue slider dot value
equals max fatigue for the semicolon and
that's all written there nicely because
we're going to be at work I'm going to
want to Silver's to the maximum values
for the fatigue of which we're going to
use okay so I'm get what we're going to
do now is actually write to start doing
what we need to do for the fatigue so be
extremely similar to the things that
we've already done we're going to have a
few changes so again what I'll do is
I'll write a region and call this the
fatigue region and I will start by
writing everything in between here so we
can start off by saying what will say
that if fatigue slider dot value is less
than or equal to let's say 60 for
instance and we have two curly brackets
below so if the value ever goes below
sixty and we could maybe create
variables for these if we were concerned
with how many we wanted but it's okay
for this then we'll say that the fat max
stamina is equal to 80 with a semicolon
then we'll say that the stamina slider
dot value equals the front max stamina
so what this is going to do is the text
when the fatigue is less than 60 so when
it's fallen below that or set the
maximum stamina for the current moment
to 80 and then we'll update the actual
stamina bar so it updates straight away
so we can actually see the visual change
and then we might want to add a few more
statements to detect one we're going to
want to do something else so you can say
the health if and fatigue slider top
value is less than or equal to let's say
40 this time so if we go down to that
and also that fat max stamina is now
equal to sixty and then also against a
stamina slider dot value equals the
max stamina and then let's say we could
create one more and then we'll say that
else if if the fatigue slider dot value
ever drops below let's see are equal to
20 then we could say that fat max
lambda is equal to then let's say 20 and
then we'll again update the stamina
slider value and set equal to V so max
stamina again and now we also need to
make checks just to make sure that the
actual values don't go above and below
the maximum amount so under here the
last outfit else if statement we can say
that if the fatigue slider dot value is
ever greater than or equal to zero so at
any point it's actually above the zero
will say that the fatigue slider dot
value minus a equals time dot delta time
times by the fatigue fall rate so that
we've got solids going to do is count
down in depth time times by to sort of
speed it up at the actual fall rate that
we set then we can also set else and the
fatigue yet again the fatigue at slider
dot value is now less than or equal to
zero we'll add two curly brackets below
and also the fatigue slider dot value is
equal to zero so if ever reaches zero it
will just automatically be always set to
zero and then else a fatigue slider dot
value is ever greater than or equal to
the max fatigue then we'll add two curly
brackets below and say that fatigue
slider dot value equals max fatigue so
we can never go above the maximum amount
that we've got so this might have been
quite confusing but in the end of we're
doing is were looking at the fatigue
slider seeing if it's ever below a
certain value and then we'll set the
fatigue maximum stamina to a certain
value and then just updating the stamina
slider and then if we ever go above the
lower zero we're just going to set it to
the correct amount or if we ever go
above the maximum and of summer
we just keep it at the maximum amount
that we can actually go to so what we
can do is I can close it up now and you
can see that encapsulated that nicely
we're going to need to just change a few
things in the stamina portion just to
make it work effectively so the only
thing we need to generally in here is we
get your check enough stamina and we're
saying that if this time gonna slide
adult values have a greater than equal
to max stamina but we don't have max
stamina anymore we're going to say that
we're going to change it to max stamina
and the other one is also going to be
flat max tamia because we only want to
be able to check it against the fatigued
max M&amp;amp;O that we might have cus we don't
know check it against the maximum we can
have because it might not be that at any
one time and you could go back and we've
go back to the top into the in the start
function that we've got we need to make
sure that the stamina slider max value
is now equal to the norm
max stamina and again norm max stamina
because it will have a problem
understanding it otherwise I'm one last
thing we're going to do in our fatigue
region is we be able to make a check or
a change of boolean every time we've
here certain value so if we check the
system and we're saying that the fatigue
has fallen below 60 we need then we want
to check if it's below 40 it will always
below 60 at this point so we're just
going to set some billions to make sure
that it will to ill not check this one
again if we're below this certain value
so what I'm going to do is I'm going to
write three billion to the top here
public bool and we can call this fatigue
stage 1 for instance so that equal to
true and again public ball fat Stage two
is equal to true and then public or hat
Stage three is equal to true so then
we're going to write in the fifth step
if B it is and it's it's below 60 and at
stage 1 is equal to true and that's okay
we're going to write on this one here
with
take slider value less than 40 we're
going to have fatigue Stage two and then
in the last statement was going to have
fatigue Stage three is equal true now
every time I want to do them or want to
set them to false just so that they
don't get in the way of each other so
we'll just and in each one set below or
say fatigue stage one two and three
we're just going to set them all to
false so we'll say so to stage two equal
to false because what it's essentially
going to do is it's going to check if
it's below or equal to sixty it's going
to check if the boolean is true for the
stage that we're in we're going to set
the fatigue value we're going to update
the stamina side of it we don't know
update the stamina slider every time so
we're just changing this variable so
we're setting now fatigue stage 1 -
false so now it won't do this we'll
check this and we'll go I can't do this
now I'll move down here and it will now
check if it's faulty and it will look at
stage 2 it'll go yep that's true because
we left it through the top and it will
do the same again and that will set HAP
stage 2 to false so then it will go back
to the top and go is it this now is it
this note and then it I'll go to down
here is this you know two of these
things true then it will do that again
so what we can do is go back into unity
again click back on our first person
controller you want to make sure that
you add your fatigue slider in the
fatigue slot there we'll set the Maxima
to 40 to 100 we can set the fatigue rate
to 10 to make sure it goes more quickly
we'll set the fat stage 1 2 3 all too
true not already and then we should be
set to go and if we press play we expect
to see you can see that the fatigue bar
is going down when it hits 60 you can
see that stamina goes down hits 40
someone's moved down again and hit 20
Salman is at its lowest point then you
can see that I can walk around and I
start running we use of stamina and when
we've used it up we can actually sprint
anymore and we have to wait for stamina
to regenerate and then it will only go
to a maximum value that
originally was at because it's currently
there and you can see that what we can't
spin any further exam holding shift and
I can let go of shift to regain the
stamina again and then we look in spring
for a little bit longer and they'll stop
and then we'll have to wait so in the
next video I'll show you how to
incorporate some U is to incorporate
sleeping and adding a mechanic like that
so you can adjust pretty much adjust the
setting as you see fit
now if anybody's got some hints or tips
for everybody who watches these
tutorials or you've got some solved
ideas for me and to optimize this code
and make it more efficient I'm always
open for ideas so by all accounts please
leave a comment if you know you've got
some tips for me so I'm always looking
to learn new things and learn better
ways to write the code and as I always
say in all my videos you know these are
just tips from me to sort of give you a
helping hand in doing something like
this so take what I've shown you and you
can make it as answers you need to so
just to sum up this video you can see
that we added in some fatigue variables
and we just added in regions from it we
added in some you stamina variables so
we can control the normal and the
fatigue stamina we just in our starting
functions we added to set the max
fatigue and the value of the fatigue we
added in our new sales statement to
detect when putting is below a certain
amount then we'll adjust be fatigue
stamina been up there the actual stamina
value and then set them to false sort of
we'll do one after each other we also
say that that if their fatigue is ever
above zero or count it down or go down
by the amount that we choose we'll also
say that if the value is ever below
there or fatigue it will always be set
to the error and then we want to say
that if the fatigue slider the value is
ever great and the maximum fatigue that
we can actually have it'll always be
except the maximum so it can't go any
higher and then we just added changed a
tiny bit in the stamina slider dot value
we just changed it to never go above the
actual the fatigue max understand the
note that we've got unless we specify
otherwise and we will
specify when we change it for being able
to sleep so that pretty much sums up
what we've done today we just added in
the fatigue and meter and just adjust
settings accordingly so thanks again for
watching don't forget to Like and
subscribe Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>