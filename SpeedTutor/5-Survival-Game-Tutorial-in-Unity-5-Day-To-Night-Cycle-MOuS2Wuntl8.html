<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>5. Survival Game Tutorial in Unity 5 - Day To Night Cycle | Coder Coacher - Coaching Coders</title><meta content="5. Survival Game Tutorial in Unity 5 - Day To Night Cycle - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>5. Survival Game Tutorial in Unity 5 - Day To Night Cycle</b></h2><h5 class="post__date">2017-03-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MOuS2Wuntl8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so
hey guys welcome to another unity
factory channel today and this is going
to be the par 5 to the Survival Series
and this is going to be looking into a
day a basic day to night cycle or a time
per day type of thing where we're going
to just transition directional light in
the scene and you don't make some
changes so it's going to go through the
things that I found things that might
make it easy for you and the things that
we're going to look at today so there's
a few assets on the asset store which
actually are for free and then you can
type in day/night cycle and you can get
the time of day system free by AC and
it's got very good reviews and it has a
lot of different features which include
air tonight' cycle you can gradient the
actual sky the stars moonlight night
color and the support there's a few
other systems on the star but today I
found something on online from a Twix
net and it's a simple way to do a sort
of data night cycle within unity 5 and
like I said it's just about solved
rotating directional light we've got and
making up some values to sort of
simulate this and I'm going to go
through that as we're going through this
here so I'll leave all the links in the
description and I'll let you know what
assets that I found so we're going to go
back into unity today from the scene
that we had previously if you've used
any assets or anything like that
depending on what asset you might have
from the star it's always best when you
use the default skybox that comes with
you 85 and you can change that on the
lighting tab and if you don't have it in
your window lighting and you just want
to use the sky default which comes
directly with e.b unity and you'll see
that within the scene if I got out of 2d
view and I sort of go back down to my
FPS controller and I make sure I enable
effects on the directional light that
I've got if I grab the rotation tool and
I just have a look at my directional
light here I can rotate
ground and it will transition between in
ourselves atmosphere eight times a day
so it automatically adjust depending on
where what sort of aim your directional
light this is what we're going to
transition today really with what we're
trying to do so with that in place what
we'll do is we'll create a new script
we'll call create a new C sharp script
and call it time control and then what
we'll do is we'll open up in model
develop or Visual Studio and the more we
can do is drop this curly braket end
here get rid of the two sort of starting
functions and what we can start by
writing is a public light and Sun
because we're going to want to reference
our directional light we're using or you
could actually write it and like this so
you could write in square brackets
serialized field and we're just going to
keep this to a private variable and
serialize feel just lets us see this in
the inspector but keeping the variable
private because we don't really need to
be able to access it from other scripts
we can do the same here we can go in
square brackets area lights field we can
have another private variable and have
this seconds in for today which equals
120 F what we'll need is we need this to
be a flat value and what we're saying
here is that we're going to be M looking
for our particular things so we're going
to be saying that how many seconds do we
want in a day you can adjust this in the
inspector which is fine we're going to
say that we want 120 seconds in one day
and obviously like I said it's up to you
to change that I connect to your game
and then what we can do is we can add
and two more square brackets and we can
type in at range
open brackets not comma one close up the
brackets and what this allows us to do
is create a little slider in the
inspector so we can go from not up to
one in the inspector with a little sort
of slide about we can do the same again
and say serialize field and do a private
float
current time of day is equal to zero I
like to just keep it all online usually
just for the sake of ease so I don't
have to go all the multiple lines and
what we can do is we can add one more
private variable and call this a float
and have it ask the time multiplier
which is equal to 1 F so this is all
going to be what we're sort of timing
Tanjung the time by to make it sort of
act you know somewhat realistically and
we can have another private float and
son initial intensity with a semicolon
and then what we're going to do from
here is you're going to write voice
start to brackets into curly brackets
below I'm going to say that the son
initial intensity is equal to son dot
intensity so we're just saying that
whatever our son is for that
bi-directional like that we're going to
use we're going to make sure that the
actual the intensity of that son is
based on whatever directional light
we've given it rather than having to
give it a specific value then what we
can do here is start by writing void of
set two brackets two calligraphic fill
of and we're going to sort of do the
calculation for the actual time that
we're going to use and we can have we
can create a variable function sorry in
advance which is called updates on which
we're going to use in a little while so
we can actually rotate this on a round
based on what values we give it we're
going to use current time of day plus
equals
and then in brackets time dot delta time
divided by the seconds in at fall day
and then we're going to times the whole
thing by this time multiplayer with a
semicolon
so what we're literally saying here is
we're saying that we're going to have
the current time of death which starts
off at 0 we're going to over time time
what Delta time is done every frame and
we're going to decide that value by the
seconds that we've got in an actual day
as we're going along and then times it
by the multiplier that we've got so
which is going to add a sort of
realistic element so it sort of counts
up in a decent amount of seconds like I
said you can read on the website if you
need with your more details we can then
write an if statement and we say that if
current time of day is ever then a
greater than or equal to one then we'll
say that and current time of day is
equal to zero again because what's this
meaning is that if it ever goes above
one which is our maximum value based on
you know the range that we've given it
up here we're saying that we wanted
second to zero so almost restarts the
day again now that's all well and good
for just creating sort of that there's
120 seconds in a full day based on you
know the sessions we've got an hour
again but what we need to do now is we
need to actually transform the direction
of light so we actually get some changes
that we can see so we can create a
volume which is called update some have
two brackets and then two curly brackets
below that when I stab by writing in
this function so we're going to say that
Sun dot transform dot local rotation
equals
quaternion dot volula and then we want
to brackets
I'll bring the brackets when we say
current time of day times by 360 F and
then outside the first bracket we want
minus 90 commerce 1770 comma zero and
all this is doing is here is getting and
transforming the rotation of our of a
local rotation of our Sun so we're not
transforming it all the way around the
world we just saw were just look on its
local axis and we're rotating around
based on the current time of day times
by 360 based on changing 60 degrees that
we can actually turn around and based on
what we've what you can read in the
actual cost and better person developed
this is that we have the minus 90 degree
just so that we can set the basis of the
sunrise and where it would actually fall
on the rotation of the x y&amp;amp;z axes and we
have this one set to 174 the actual
horizon of where the height will be set
and then we have 0 because the z-axis
doesn't actually do anything invest on
this and then what we're going to write
is a float and in10sity multiplier which
is set equal to 1 to begin with then
what we're going to do is have a few if
statements which control based on where
the actual position is of the
directional light is how we're going to
produce the actual fading of the light
which the direction light is going to
produce so this controls the rotation
but if we don't actually control how it
fades in and out based on the script
it'll never actually in change its
intensity so it will actually be a full
Sun even when it's looking away and can
sometimes cause some issues
so you don't always need this that's
going to come up but it may well be
beneficial so we can say that if current
time of day is less than or equal to not
point to 3f we want two large lines in
which is on your back flash key which is
just between Zed and shift and you can
just hold shift and press the back
flashing will create those and it just
means this or that so if the timer the
current time of day is less than or
equal to minus not 0.23 F or current
time of day is greater than or equal to
minus not point five nine point seven
five s what we're going to actually do
is set the intensive m the intensity
multiplier equal to zero so what this
means if the current time of day is ever
less than or equal to not point to three
which is just before the sunrise and the
time of day is above this which is just
before sunset we're going to set this
multiplier to zero because we're going
to use it after to solve fed the
intensity of the directional light that
we've then we can say else if current
time of day is less than or equal to
minus 0.25 F we will then have two curly
brackets below and say intensity
multi-player equals mass F dot clamp not
one which means that it will clamp a
value between naught and 1 will have two
opening brackets and also that current
time of day - not point two three F
and then we will go outside of that
bracket and say well times in brackets 1
divided by naught point naught to s and
close that off with a semicolon so like
I said what it's going to do is it's
going to check that if it's below not
0.25 we're going to then set the
intensity multi-player equal to and a
value between not 1 but it's going to be
the current time of day minus the value
which we've given which is just before
sunrise I'm going to time it by the
value which is going to allow it to fade
in and we're going to do a similar thing
with another else if statement or word
source or said if current time of day is
less than or equal to naught point 7 3s
then we're going to have two curly
brackets below and say that intensity
multiplier equals
laughs F dot clump not 1 again and then
we're going to open up the brackets and
say 1 minus and open up two brackets
this time and then we're going to say
current time of day - not not point 7 3
F outside of that bracket we'll say
times by the 1 / not right not not point
not to F again and then we're going to
have the three brackets afterwards and a
semicolon so what this is going to mean
this is a term of day is ever greater
than or equal to sites getting to the
actual sunset we're going to set the
multiplier based on its value and then
have something so we can allow it to
fade the intensity out and then what
we're going to do just below here we'll
say that son stop
intensity equals Sun initial intensity
times by the intensity have multiplayer
that we created above so that every time
we observe some we're going to just say
that there's Sun intensity equals B the
Sun intensity which is the value which
is it it which is it when it was
originally given times by the intensity
multiplier that we've given it based on
the values that we've worked L and based
on the current time of day so if we
minimize this and then what we can do is
create right-click in the hierarchy
create new empty game object it can be
whatever we can go back into the
inspector Frank of the time controller
in here then we need to put a
directional light into this and you can
see that and the seconds in the day is
120 and the current time of day is zero
he knows what a lot of slider where we
can change that and what we can do is
press play and you'll notice that when
it starts off you can see that because
the time of day was zero at the time it
wasn't actually do anything so it was
technically simulating nighttime and as
we're moving up the actual values we're
getting towards the sunrise period which
is not point the 2 3 to 5 value and some
will be rotating around on its local x
axis and it will then increase the
intensity of the Sun back to its normal
value and it will rotate above the
entire game see
and all the way above until it's above
these to read and if I have moved
towards the Sun as it's getting to war
and it's getting towards the naught
point seven three and the seven five
value is going to be rotating the Sun
away decreasing the intensity of the
entire Sun and we can see the
directional light there the intensity is
currently zero because it's rotating
beneath us all the way until we get back
to the point that we're looking for
which would be the not point to value
again which would be simulate the
sunrise and you can see that as the
current time of day will be about to hit
one it will reset the current time of
day and almost do the rotation again so
we get the nine times this will grab the
things that go into my scene because you
can see some of the bushes and BM
environment isn't actually I'm changing
because I need to sort of remove some of
the baking bag done and reduce the
ambient light so then we could see a
difference in some virtual objects that
we've got in the scene and you can see
as it hit the value again we get back to
the morning I'm rotating the directional
light all the way background and you can
see by the directional light we've got
the intensity back to where it
originally I started and we can use that
over and over and over and depending on
what you want to do with the game you
can you know a decrease in temperatures
based on what time of day it was whether
it was you know sunrise sunset or you
know generalize through the day so
that's just a basic way and others say
you can take a look at website take a
look at the scripts that I used but all
in all and compared to probably a lot of
things that you will find it's fairly
simple to just create and using the Sun
were set in the time of day we're
setting the current time that we are
based on and tender Delta term divided
by the seconds that we've gotten x in it
by just and multiplayer we'll check and
see if the current sound ever hits one
will reset it which
be another day almost then we're
updating the transform of the Sun based
on the day in a 360-degree Martian we're
setting the horizon 270 Cassatt's and
the person who wrote the script found
out that was good for their scene you
might want to adjust that accordingly we
create a simple intensity multiplayer
which will adjust the intensity of the
overall Sun based on whatever current
time of day we have so if we are less
than and not 0.23 and greater than our
points and five were not sunrise or
sunset so almost in the night so
intensity should be zero but if we are
between these two values what we're
going to do is we're going to and do a
fade so we can bring the intensity back
in as it gets to the Sun right and fed
the intensity back out when we get to a
sunset so hopefully you know this helped
you have a look at stuff on the asset
store which might be more complex and
might give you more the things that
you're looking for and check out and
that website that I showed you
originally to make dotnet for looking at
a simple day to night cycle so thanks so
much for watching don't forget to Like
comment subscribe Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>