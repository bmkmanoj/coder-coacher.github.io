<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating a Survival Game in Unity: Part 10 - Respawning | Coder Coacher - Coaching Coders</title><meta content="Creating a Survival Game in Unity: Part 10 - Respawning - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating a Survival Game in Unity: Part 10 - Respawning</b></h2><h5 class="post__date">2015-02-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pW_eJBrlj_Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to the next tutorial
and this is gonna be all in about
respawning and I get asked this over and
over and over again and there's there's
gonna be one set where that we're gonna
do respawning for a survival game but
there's many ways that you could
possibly do it if you've got a
persistent loading saving game situation
you can use that so you save your game
and you can load back everything that
was previously within the scene but if
you wanted something more persistent
just based around how are you playing at
the current moment you can obviously say
your health reaches zero then you can
just when it reaches zero you can load
up a new scene and then from that new
scene which could be a menu saying do
you want to restart the game you could
load up this scene again from the
beginning
say you wan if for instance you wanted
to start afresh every single time now
that's not always very good because if
we start off fresh every single time
we'll lose everything we've collected
everything we've built everything we've
done within the game but the way I'm
going to show you to do it is like I've
done with another tutorial which was
about teleporting it's gonna be a
similar sort of way so if our health
reaches zero we're gonna be able we're
gonna teleport to somewhere else so say
we have a comment fire which is gonna
act as our every time you build a
campfire it's going to act as a spawn
point if you die and you'll spawn back
there or in Minecraft you've got a bed
which is a certain sort of thing and
what we're gonna do is we're going to
spawn at that position and we need to
make sure that we reset all values that
we want to reset so think about it if we
got our first person controller and
we've got our player GUI which is all
these things in the top corner now
obviously when we die we don't want to
keep everything as it was because
everything will be down at the bottom
and you'll be dead and you're just a
continuous loop of dying so we need to
set everything back to its normal amount
and also within your infantry system
you need to be able to show but unless
you don't want to you want to set
everything back to its default values so
this is gonna be a few things to just
keep in mind but it's gonna be the sort
of basis to getting around doing this so
first of all what I'm gonna do is I'm
going to create a quick game object and
that's just gonna act as our let's say
that this is the campfire for now and
we've crafted that because you know how
it's a craft stuff and you could give it
a tag or a name so that right there is
gonna be our come fire I'll rename it
for the sake of this tutorial right so
that when we die what do we need to do
now we need to go back on the
first-person controller and open up the
player GUI script now once you've opened
up the pledge of your Y script we want
to scroll on down to something within
the update function it said that if
health display is less than or equal to
zero safe health is equal to zero we're
going to die I'm gonna rename this
function and call it respawn doesn't
really matter you can keep it scary to
death or respawn it's up to you then
what we're gonna do is if it rich say
we're going to ask it to call the new
function so if we go all the way to the
bottom of the script we'll have the old
function which was called character
death which is here so I'm going to
rename that to respawn and make sure you
have two brackets after it now before
what it did was load it up in a new
level we don't want it to load up a new
level we want to do something sort of
different we want to spawn a position
while still playing the game so we never
have to exit the game so what we're
going to actually want to do is
initially save this dot game object dot
transform dot position equals and then
we'll say destination dot position with
a semicolon now if we save then go we're
back to the top we need to create a new
variable so what we'll do under here is
we'll add a new
variable and call this destination and
have that as type transform with a
capital so that's going to be where and
we actually decided to transform to I'll
respawn in that position so this game
object transform lock position is
talking about the game object that has
this script on so it's gonna be the
first person controller we're gonna
transform its position on move its
position to the position of the
destination so there which is going to
be our campfire so we'll test that in a
minute so remember I said that we need
to make sure that will reset all the
values so all these player GUI values we
need to set them back to with the normal
amounts so what we're gonna do is going
to say health bar display is is equal to
one cuz ones are hundred-percent you
could have a variable called maximum
display but for the sake of this we'll
just keep it as this is now then we'll
say just from the standing sick and then
hunger bar display is equal to one first
bar display is equal to one and stamina
bar display is equal to one so that's
going to reset all up player gol values
so when we respawn is gonna set
everything back to one so we're gonna
have four bars again now there's one
thing that you want to do is everything
within the infantry needs to be changed
as well so what we need to do is on our
first person control we can collapse
play a GUI again it'll add a little
thing so we can drag in our destination
slot we can open up by infantry now and
we'll open up that in monodevelop
now what we want to do within our player
GUI script first off it's gonna write a
variable in here and if we write instead
of writing a variable up at the top but
that makes it public to the whole script
we just want it specific to this
function we don't need to call it again
so we can say variable inventory script
equals getcomponent
open brackets capital's inventory with a
semicolon and that just means we've set
a variable called infantry script and
make an equal to the gear mob the game
I'm trying to find and we're trying to
find this script which is called
infantry with a capital I and then what
we'll do is we'll say inventory script
dot reset and then two brackets and a
semicolon and what's that going to do
that's gonna call a function within the
inventory script so we need to actually
create this function in the inventory
script so if we go to the bottom and
scroll our way down this script after
the function is talking about he'll
drink and eat we're going to want to
create a function called
reset with two brackets two curly
brackets below then we want to save that
wood so we've got various things that we
created for the infantry we've got wood
we've got stone you can check these all
at the top we've got Clare we've got
fish we've got cooked fish a bottle
bottled water
and a bandage and now what we could see
is they're all the things that we need
to reset if we scoot all the way back to
the top
we had a minimum value which was zero
was so we could like I've said before
that we can't ever go below a certain
amount now we can use that variable
because we want everything set to zero
unless you specify things otherwise so
when you die you lose everything from
your infantry so we can say wood is
equal to minimum value so what we'll do
is we'll copy that whole thing at the
equals a minimum and we'll just put them
straight after each other home I'm just
pasting it all in
and that just means that when we die
we'll reset everything to its normal
amount
so I'll quickly show you within unity
what we'll do on our first person
controller we'll open player GUI back
and destination is here now we could use
aware you'd maybe want to find it so if
you've got multiple campfires or when
you create a campfire
after runtime you maybe want to find a
way to put destination into this slot
you could possibly find the game object
that you're looking for with game object
find later down the line because here
we're actually telling it there's a
campfire already and this is what we
want it to do or where we want it to go
so you need to obviously make sure that
if you making a campfire and build it in
game you need to make sure that you
somehow procedurally put it into this
slot for yourself so what I'll do is
I'll drag campfire into there and you
can see that it says count failure
transform now what we're gonna do is for
this campfire specifically I'm gonna
take away the box Collider so we don't
collide with it this time and then what
I'm going to do is on the fire I'm gonna
press play and you can see all the bars
are going down right now
and we'll move away from the box itself
now what I'll do is I'll make sure that
it falls a little bit more quickly you
can see the bit falling only notice that
we appeared with inside box and if you
check the infantry now we've got nothing
in there health and everything and
thirst or respawned
now you'll watch again if we die will
respawn where that campfire was and will
respawn with all the correct sort of
units now that might not be the best way
and you need to make sure that when I
was testing this I had it too close to
the ground and if you can see on some
times on your character control if
you've got a big
sort of character controller collider
and you put it too close to the ground
if you're spawning on this position
you'll fall through the map so you just
want to pull your object up and I got
rid of the box Collider because
sometimes if you spawned I really in
this position you get stuck within the
box Collider and that'll be no good cuz
you'll never be able to move now
obviously you'll be able to go back into
the script and say transform dot
position and then you could say probably
post plus vector three and wicked up and
bracket so we could say not five no so
what that's gonna do is instead of
having that trouble of falling inside or
getting trapped within the box if you
needed a box client or VR campfire oh it
could be any sort of object that you've
made
doesn't have to be account for I'm just
giving an example it'll actually be able
to spawn us slightly differently again
what I'll need to do is I'll just take
the health fall rate down so it falls a
lot quicker now you'll notice that in
that instance I didn't really think
about what I was doing but what we could
do we could set that that's x y&amp;amp;z axes
so if we set that to vector three and
then five along the X there along the
way we'll just spawn a little bit back
from the actual come fire itself but
that's just sort of simply explaining
that we're just transforming the whole
character position resetting the player
GUI values then resetting everything in
the infantry so you just need to sort of
think to yourself what do I need to do
with him again this may be not the best
way obviously a serve and load system
would be the best option but until I get
round to doing that this is gonna be
well second best where we'd say so
thanks again for watching and don't
forget to Like comment and subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>