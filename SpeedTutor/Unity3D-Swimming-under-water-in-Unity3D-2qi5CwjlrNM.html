<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Unity3D] Swimming under water in Unity3D | Coder Coacher - Coaching Coders</title><meta content="[Unity3D] Swimming under water in Unity3D - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Unity3D] Swimming under water in Unity3D</b></h2><h5 class="post__date">2013-07-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2qi5CwjlrNM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so today I'm gonna follow on
from a tutorial that always making last
time which was about when you went
underwater it had some water effects so
give the illusion that you're actually
underwater but today I'm going to show
you how to add some swimming mechanics
and things like that I've not found
anything like this and it took me quite
a while to piece together this script so
it's it's it's remedial in a sense but
it works efficiently for what you need
it to do and you can adapt it as you
need to but it's just a basis to what
want to start with so before in my other
tutorial we had just this with the
first-person control terrain and water
and directional light and what I did is
I may have attached the script to the
main camera last time but this time I
just added it to the first-person
controller because we're going to need
to access some other scripts that are
inside on this game object so I've just
added my underwater script to the
first-person controller and I've just
set the water level to 35 so if we
remember when we jump in the water
because the water is set to 30 far we
jump in we see the color change but we
can run about as we could on the surface
which is not quite like water so it
doesn't work very well but we're going
to change some things and to make it act
as if it is underwater and you can swim
so what we want to do is open and water
script so as you can see you may
remember this from the other tutorial
we're going to first of all add a
variable because we want to access
something else inside this character
entry so if we click on the first-person
controller we want to access the
character motor script which is going to
affect our fall speeds our Mac side
sideways in forward speeds and they're
going to give the actual illusion that
you're actually swimming in the water
and you actually got some force there
so if we go back to our script what we
want to do is we want to make a new
private variable we want to call this CH
martyr it doesn't really matter what
your right CH right is just short for
character water
and we're going to call this and
variable by the character Mart script so
we're actually referencing this variable
from that I want to what what to do in
our start function is actually write
that CH MARTA so our variable but
require created is equal to and we need
to get the component which is called
character mater which is attached to our
first-person controller and then we save
that we've got that in Stan so we're
referencing to a reference in this one
to do now is in our set under what so
when we're actually underwater once I
should do some things so what I like to
do is add a few things CH martyr dot
movement dot gravity equals to two now
normal gravity in the character matern
martyr script is 20 but for this this is
what I liked you can change all these
values and things but you can see in the
character mod script you can see what
gravity is set to and you can reference
all these actual learn components but
we're going to copy and Pierce this
another three times and what we want to
do is change each of these so then want
to change this one to max fall speed I
want to set that equal to five and then
we want to change this one to max
forward speed I want to make that equal
to four and then we want to change this
one to max sideways speed now all of
these as a say can be seen in the actual
character mode script so you can see
what how these are actually spelled so
if we save that we go back into unity
you can see if you want to access the
character Mart scripts is just there
double click that and you can find all
the references and what we can do is
when I
I don't want maximise on play on is when
I run the game and we can see but when I
run the game and you can see all my
options down this and this side and what
I'm going to do when I jump in the water
it's going to change all my values so we
actually fall because the max fall speed
has been lowered we actually fall slowly
when we can't move very quickly either
way so it gives some sort of value to
being underwater now that's that's a
very basis to what we're going to do but
the main element to how we're going to
be able to swim and go up and down in
the water is on this first-person
controller we're going to have to add
something called constant force modifier
so if we're going component we go
physics and we had a constant force
we're going to do we get rigidbody and a
constant force what if I are attached
what first of all want to do is on tick
use gravity because we don't want to
tell it to use gravity and we'll just
leave these like this so these are the
two components that we need if we go
back into our underwater script what
we're going to do now is we're going to
actually use this constant fast cuts on
some force just if you want a value in
the y-direction even- are positive it
will you know make you go up and down
respectively so what we're going to do
is in the update function because we're
going to base these on key presses we're
going to now write this in the update
function so we're going to say if is
underwater and we write undone input dot
get key
key card dot e and we need two brackets
at the end because we're referencing two
different things if we are underwater
and we press this key not either not all
then what want to do is add two curly
brackets and right constant force
because that is what we've got attached
to our character and we want to write
relative force and that's the force that
going to use to make it rise up and down
vector three then we open up the
brackets right in zero for the X minus
200 for the Y and then zero for the Z
and then we'll close that off so what it
does is if you tell you if it is
underwater and you press any at the same
time when you under are it will make you
actually go down it will put force
downwards then won't want to write his
else then we want two curly brackets and
then I'll just copy this same line so
you'd have to see me type it again
constant fast relative force is that if
one underwater and we're not pressing a
button then we're just going to stay
still and then we're going to write
another if statement which is going to
be exactly the same as the top one but
we're going to change this to Q and then
add two curly brackets again and we're
going to again take this constant force
component and we're going to put
positive of 208 so really when I play
the game in unity
you'll notice that everything stays the
same I'll jump into the water it's as is
affected by the going inside down in the
water now for press Q we rise up if I
let go of Q with just a constant
constant rare Q again makes your
resinate if you can hear my taps now if
I press tap in E makes its go down now
you can change all these variables so
you can make forward speed faster you
can make it slower you can make
everything change so essentially that's
just showing you how it you can do a
basic almost thrust and decrease when
you're under the water and some basic
swimming now what I like to do is just
give an effective maybe been in there in
a suit or exhaling in the water is in
where the two toilet I showed you how to
create bubbles or a bubble particle
effect so I'm going to do is I'm going
to add this to a script and make it the
bubbles only appear when we actually go
in the water
so if we see we'll just attach the
bubbles to the main camera we'll click
on the main camera we can see them there
I'll just move them slightly further
forward so if we go back into our script
again we want to write a new variable so
I'll write at the top to keep everything
together variable and we can put
anything in here we could put my
particles and then call on particle
system with a semicolon and then in our
start function we want to say my
particles dots top of up and closed
brackets then semicolon which means as
soon as the script starts we don't want
that particles particle system to play
because we're not underwater yet so
there's no point and then what we want
to do is if we go down to set underwater
want to say my particles dot
lay open closed brackets semi-colon so
when we're actually underwater it
players that particle effect for us if I
go back to unity now you'll see my ball
was playing in the scene
press play actually I just if you get
that an error you'll notice that on the
first-person controller you'll notice
that my particles it doesn't have a
reference to that variable so we just
need to add the bubbles to the actual
variable slot in the inspector so now if
we play we don't see any bubbles and if
we jump into the water you'll notice
that you see bubbles apparent actually
in front of your screen and then we can
use our keys to go up and down in the
water and swim around all right well
then that's pretty much it so I hope you
enjoyed the tutorial if you did don't
forget to Like comment and subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>