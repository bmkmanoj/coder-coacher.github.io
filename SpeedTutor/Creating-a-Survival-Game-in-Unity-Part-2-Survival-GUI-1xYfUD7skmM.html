<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating a Survival Game in Unity: Part 2 - Survival GUI | Coder Coacher - Coaching Coders</title><meta content="Creating a Survival Game in Unity: Part 2 - Survival GUI - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating a Survival Game in Unity: Part 2 - Survival GUI</b></h2><h5 class="post__date">2014-07-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1xYfUD7skmM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to part 2 of my
Survival Series and I apologize for
taking so long to get this one out but
being really busy I did promise times
maybe last week that I would create the
video but as I said I apologize for the
delay and hopefully I'll get back on
track from now on but so this is what
we're going to focus on today I know a
lot of people have been asking about the
tree chopping but that is going to come
next time because I'm going to need to
still work on the the arms and the
animations and stuff and I just haven't
had a great deal of time to work on
those things so the thing I'm going to
show today in the meantime is I'm going
to show thee the more advanced player
GUI so I had a GUI Survival tutorial a
while back which showed numbers going
down but as you might have seen in my um
my original video my update video that
I've got the GUI which you'll see in the
corner with the colored bars that will
go down so we're going to learn how to
do that today
so once we've learned to do that then
we'll be able to link other things in
because I can't just stick tutorials
randomly in the middle because a lot of
tutorials link in with each other so if
we need to chop down tree we'll have to
use stamina and without the player GUI
stamina we can't link those together we
could obviously do it after but it's
just easier if I've got this in in the
meantime and then you can try and
experiment with things yourself so as I
said to everybody last time the island
design was just a basic sort of lay on I
said I'd retweet and things so really
I've not really done anything crazy I've
just added the the water solve edged out
the terrain with the beach and then the
little engine of the sort of water
effect on the sand and then added the
forest and add a few image effects so
really we're not focusing on the island
today we're going to be focusing on the
actual GUI elements but you can see now
we get a sort of visual look of a jungle
ish island and then I'll be showing you
how to cut down the palm trees so right
first of all I'll get straight
to expand a bit too long talk about it
and if you didn't want to skip this I'll
put a little thing in the description to
skip on so right we're going to start
making the script today what we're going
to do is going to start by writing a new
java script and then we're going to call
this player GUI but actually whilst
we're on the subject of the GUI I'm
going to shift a career a set of GUI
objects if you want the bass to change
color so what I've done in Photoshop is
I've created a series of GUI objects
obviously you can change these colors to
however you want but all I've done is if
I go to the canvas size oven I've done a
240 width by a 40 hi canvas and then
I've just added a color I'll put a
square in or pin bucketed color in and
then we'll save each of these hours
whatever color so I've got an empty so
that the white is going to be fun it's
empty and Reds going to be for health
yellow is going to be for hunger and
just save those out as PSD Targa PNG
whatever file format you want and then
what we're going to do is I'll show you
that I've got an empty image I've got
health
I've got hunger I've got stamina and
I've got thirst and the roll down here
so what we're going to do is we're going
to open up player GUI because you know
you can create these and I'll put all
the GUI objects in a little pack when I
upload them to our website so I'll start
off by zooming in so we can see a bit
more what's going on then then what
we'll do is we'll start by writing the
script I'm gonna add some comments to
this script it's going to be fairly long
so we're going to set this as size of
the textures so what we're going to do
is going to set variable size as type
vector to equals new vector to open
brackets to 40 by 40 and what that means
is that's the actual size of our
textures that we're using and then we're
going to set a section for health
variables and what we're going to do is
write variable health position
as type vector2 equals new vector2 open
brackets 20 comma 20 closet upper
semicolon the recoverable health bar
display again as type float equal to 1
and we'll have another variable called
health bar empty and I have that as type
texture 2d with a semicolon then one
last variable for the health is health
bar full as type texture 2d so we're
going to set these all for the health
the thirst the hunger and the stamina so
what we'll do under here is we'll copy
that whole section first thing I'm going
to then call this the hunger variables
so what I'll change this is I'll change
this to hunger position because we're
going to change all these games to keep
them constant so I'll just copy hunger
and then I'll hunger bar display hunger
bar empty hunger bar full and we'll keep
the tip texture to DS the same and the
float to 1 but then we'll change this to
60 so it's going to be the position is
going to be 20 along 20 down for the
health and 20 along 60 down for the
hunger so we cannot fit it all in nicely
and again what I'll do is I'll copy
those variables paste that in and we're
going to then change this for the thirst
and as I say like before we'll just
write a new one so we'll call this first
position and I'll just copy thirst and
I'll just paste them in over the top
like so and then what I'll do is we'll
set this to 1 20 comma 100 and then
again
we'll set this so it's then the last one
for stamina variables so then we'll
create stamina position then stamina bar
display stamina bar empty and stamina
bar form and then we'll just change this
to 140 we'll serve this out now right so
once we've got all those in place then
what we're going to do is we're going to
have another comment saying fall rate
and then we're going to actually add
some variables so we can actually set
how quickly your health or your thirst
or hunger is going to fall over time so
health fall rate is type integer equal
to 150 variable hunger fall rate is type
integer equal to 150 variable thirst
fall red is type integer equal to 100
and variable stamina fall rate as
integer equal to 35 and these are just
some values that I've set up and you can
test this so realistically the higher
the number in here the slower it will
actually fall okay and then what we're
going to do is we're going to set a few
variables to control when we're going to
be able to jump and when we're going to
be able to actually I haven't do some
things so what I'm going to do is write
a private variable and call this CH
martyr as type character
motor make sure you spell that right and
then another private variable called
controller and have that as character
control this is just so that we'll be
able to sprint and do different things
once we were in the game then we're
going to write variable can jump let's
type boolean equal to false and then
variable jump timer let's type flood
equal to not point seven now this might
be confusing so far but I'll go through
it as we're going along so we're going
to have to be able to jump and use up
stamina we're going to have a timer so
week we can't jump over and over and
waste a lot of stamina we'll only be
able to jump every so often and
obviously we're going to control the
variables accordingly and obviously it
might start be confusing but we'll go
through and we'll learn each bit as we
go along so in my front at in the
function start what we're going to do is
add the function standard the two curly
brackets below and we're going to as I
do with many scripts we're going to
reference a component that is actually
on the object that we're going to add
this to so we'll add this to the first
person controller so chmod R equals get
component in brackets character martyr
because Garrick tomorrow is the thing
that drives the character a lot and then
we're going to set controller equal to
get component open brackets character
controller and then we'll close that up
save it and that's going to be
controlling the rigid body and the solve
things that we're going to need to do
this is going to be as I said similar to
the other tutorial but I did but we're
going to create a lot of elements on the
GUI so we'll say function on guy2
brackets then two curly brackets below
and then we're going to start by writing
GUI
dot begin group open brackets new rect
open brackets health position dot X
comma health position
dot y comma size X comma size dot Y
close the up add a semicolon then we'll
say GUI dot box open brackets rect open
brackets again 0 comma 0 comma size X
comma size dot y plus the up add a comma
and then we'll say health bar empty Plus
up add a semicolon so what we're doing
here to close create this is we're
creating an actual GUI group so a group
is just when you group you can group as
many boxes you want inside a group as
you want and it helps you hold ugu eyes
together so I'll give you an example we
go to the first person control now right
add the player GUI you will notice that
we have a box here which is just at the
top and then we're going to be able to
have many groups of things inside one
box so encapsulates it all so what we
could do below here is obviously what
we're going to do is create another GUI
dot begin group and then we're going to
create similarly with this line here
what we're going to do is we're going to
piss this in so we'll delete whatever is
in the brackets will do 0 comma 0 size X
x by health bar display then we'll say
comma size dot y and add the two
brackets closed and the semicolon and
then one day they will say gee y dot box
open brackets 0 comma 0 comma size X
comma size dot y pause the OP add a
comma and then health bar full close up
and under semicolon and then what going
to do below here to close off the gy m
group we
say GUI dot end group and then two
brackets in a semicolon then again GUI
to end group close the brackets in a
semicolon and that's going to close
those two groups up so that's just for
health so what we're going to then do is
we'll copy the whole section of
statement then we'll paste it in below
and then we'll just write a little note
saying health GUI and then a little note
below here the same hunger Hunger GUI
and then what we're going to do like we
did before is we're just going to take
the name that we had at the top and what
we're going to do is we're just going to
literally change all these Health's to
hunger so everything that says health
we're going to change to hunger so
that's done for the second section so
then we've got the actual hunger Bible
move up or down accordingly to whatever
the value is then again what we'll do is
we'll copy the whole statement pissed in
and then what we'll do is we're going to
write for the thirst GUI so I'll go back
up so we've done health hunger and now
our copy thirst and what we'll do is
we'll paste that in sir thirst position
first position thirst bar empty first
bar fall and thirst bar display and
we'll save that and then we'll have one
more which is going to be for our
stamina we'll pass that in knock that
across and we'll change this to stamina
GUI and then I'll go back up and we'll
copy it
stamina go back down and I'll change
this to stamina position stamina
position
stamina bar empty stomach by displayer
and stamina bar form and we'll save that
so it ends the group so all is doing is
we're going to create initial group and
then we're going to have a GUI box
within that group then we're going to
have another group which is then go over
the top of what we already had because
it'll be in the same position and it'll
just move up or down displaying the
actual size of it going across in
whatever time we've set but one thing I
did forget to add it here in the GUI box
is open a bracket and make that four
rectangle and we'll copy this in and
we'll paste this in front of each of
these and then we'll save that out and
then where we go we have the four boxes
ready to add the images at this side so
now we're actually going to control the
rear which the health and things fall
because it doesn't do anything at the
moment it just holds the actual objects
until we tell it what to do so we're
going to start by writing function
update add two brackets then two curly
brackets below and then we'll add a
little section and call this the health
control section and we'll say that if
hunger hunger bar display is less than
or equal to zero and and first bar
display is less than or equal to zero or
close to brackets add two curly brackets
below and we'll say that health bar
display - equals time dot Delta time
divided by the health fall red times bye
- and then underneath the two curly
brackets will set else and then I had
two curly brackets below there and will
said that if open brackets hunger bar
this blair is less than or equal to zero
and then what we need to do is we add
need to add two lines and for me these
two lines are located next to my shift
and the z key and it just means either
are so if it's this or if it's that or
if it's our first bar display is less
than or equal to zero close the bracket
had two curly brackets belong and say
health bar display - equals time dot
delta time / health fall red so which
this means is that if health bar display
so if your health or if you thirst is
zero we're going to actually make the
health fall quicker so health rate and
times it by two to make it quicker but
if the thumb ger are the thirst or at
zero so if one of them is in we're going
to just fall by a slower rate you can
obviously change the values up at the
top for the thirst for it then what
we're going to do under this statement
under this stem in here will say that if
health bar display is less than or equal
to zero we'll add the bracket add the
two curly brackets below will said that
character def two brackets and a curly
bracket and that'll call a new function
so we can actually make it so the player
will be able to die and that pretty much
controls that section so then under your
if statement will move to the hunger
control section
then we'll say that if hunger bar
display is greater than or equal to zero
and then we'll say that hunger bar
display - equals time dot delta time
forward slash hunger follow it with a
semicolon so that just means if we're at
below zero so if we've still got some
hunger bar left
we'll just keep dropping it by
time.deltatime / The Hunger fold right
and as I say you can obviously change
all of these values and then we need to
make sure that we can never go below
zero and mess anything up so it will say
that if hunger bar display is ever less
than or equal to zero what we're going
to do is we're going to set hunger bar
display to zero and then we're also
going to obviously do the opposite where
so if hunger bar display is ever then
greater than equal to one and one being
the maximum that we can have hunger bar
this blair is actually equal to one so
you can never go any higher
and obviously that do to be the case if
we're too much food then I'd obviously
never will never want it to go higher
than what we've originally set and now
all move on to the first control section
and thus terse control section is going
to be exactly the same as the hunger
salt we'll do is we'll copy that one
we'll paste in and what we'll do here is
we'll change this to thirst bar display
is ever greater than or equal to zero
we'll make sure that thirst by display
is minus equal to ten
that's I'm / first fall rep and then the
hull of the first baddest Blair if it's
ever less than it is always equal to it
and if thirst is ever greater than equal
to one it's always equal to one so we're
making sure that thirst and hunger
because they're going to be the ones
that move the mast for the survival
system we're going to make sure they're
controlled for the most part now we're
going to move on to the sort of the more
complicated section but with not far
finishing with the script will check
will actually write down that this is
the stamina control section and what
we're going to do is we're going to set
if controller dot velocity and make sure
this is lowercase controller dot
velocity dot mag magnitude is greater
than zero and and input dot get key down
sorry if get key brackets keycard dot
left shift close to brackets add two
curly brackets belong on wall succe eh
martyr dot movement dot max forward
speed is equal to 10 then CH martyred
movement dot max side where speed is
equal to ten and then we'll say stamina
bar display - equals time dot Delta time
/ stamina fall Red Claws the up
controller dot
velocity dark magnitude right so what
this means is that if we're actually
moving so if we're moving if our
magnitude of the control is actually
greater than zero and we're pressing
life shifts so left shift it left shift
is for sprinting so if we're sprinting
we're going to increase the movement
speed to ten and one it might already be
I think it's six and then when we're
sprinting we're going to count down by
whatever read the wants count down by so
we using up stamina so then what we're
going to want to do is write else for
that statement and say what we'll do is
we'll copy all of this paste it in and
then we'll change it so if we're not
moving on and we're not sprinting then
we'll count up with by the same amount
so we'll say plus equals time till time
divided by the stamina fall right so
that's just controlling sprinting and
that's going to cause that stealth and
our stamina to move up and down
depending if we sprinted on and then
here we'll add a bit for the jumping
section so when we jump we'll want to
use up some stamina so what we'll start
off by saying is that if import dot get
ki down open brackets keycard
dot space clause that upset and and can
jump is equal to true then under here
what we'll say is the stamina bar
display - equals not point two so it's
going to use a naught point two of the
stamina bar to jump then we're going to
call a function called weight and then
what we're going to do below here is
we're also going to say that if can jump
is equal to false close that up at two
curly brackets below there and then
we'll say jump time - equals
time dot delta time add a semicolon then
we'll say CH martyr dot jumpin dot
enabled equals false and also we'll say
below the edge um timer is less than or
equal to zero then we'll actually say
can jump is equal to true CH martyr dot
jumping dot enabled equals true then
we'll say jump timer is equal to not
point seven and then we'll also control
that when we actually if we don't have
enough stamina or that not points with
the stamina left to jump we'll make sure
that we cannot so if stamina bar display
is less than or equal to not point to
close that up add two curly brackets
will say can jump equals false and then
we'll say CH martyr start jumping dot
enabled equals false so what this all
means that if we've press space and we
can jump will actually take away a
portion of time
a portion of stamina and then we'll call
another function and this helps us just
get around a little dodgy area that we
get but I'll show you that in a minute
and then if can jump is equal to false
so if we can't jump anymore
we'll set the timer to start going and
we'll make sure that we can't jump if
the timer ever equals zero which means
that we can jump again we'll set can't
jump to true and then we'll make sure
that we can jump again and reset the
time into not point seven and then if
the stamina bar display is ever less
than or equal to not point two which is
the jump in amount that we can use we'll
make sure that we can't jump again
and also like I did before with the
hunger and thirst if we ever got below
zero or above one we don't want to be
able to so it one and
affect anything salsa stamina bar this
player is either the creator than equal
to one then we'll say stamina bar this
player is equal to one and also will say
stiff stamina bar display is less than
or equal to zero
Plus that up at two curly brackets then
we'll say stamina bar spamming and bar
display is equal to zero and we'll also
make sure that we set the character
mater so we've got normal speed so we
can manage to sprint anymore if it's
equal to that much and then before I
tell you that we'd make a new function
for character death so we'll write
function character death with two
brackets then two curly brackets below
then we'll write application load level
open brackets name this whatever you
want simple level with a semicolon and
then function weight like we needed to
add so I said we get rid a from a silly
bug then we'll say yield we're four
seconds and then brackets not point one
then we'll say can jump is equal to
false so what that means is we're just
going to wear an op on one of a second
which you wouldn't even notice and then
we'll make sure that we can't jump so
I'll go through the entirety of this
script again just quickly go through I
know it's been a fairly long tutorial
but it's hard to explain a script that's
fairly long so what we're going to deal
with we've set the size of the GUI
objects that we've made we've set the
position we've set the display amount
and we've set two objects for
each different element that we're going
to use then we've just referenced the
controllers that we're going to need to
affect for sprinting and jumping and
then we're going to make sure that we
have a boolean and a counter for jumping
then on the gy to display the different
elements on the GUI so for the health
the hunger the thirst
we set a group and we set a box in this
group so we set it the position and the
health that we already had along with
the sizes that we already set at the top
and then we make sure we create a box at
the same size and then we can add the
health or the GUI object that we want to
add and again for the second part we do
the same thing but we times the position
by the health bar display so that's the
number that we can affect that I said
that can only go as high as one or as
low as zero and then we don't change the
Y position it always stares assemble
change the x position so it looks like
the a bar moves aware or forward
depending which way you need and it's
the same for each then in the update we
control the health by if the health and
the thirst bar zero will count the
health down faster and then else if the
the hell our hunger or the thirst over
zero or count down a set rep then we'll
make sure that we can't let the health
go below zero if it does will cause the
character to die in the hunger we if the
hunger is ever above zero which means
that we have to look up some hunger left
will always count down
if the hunger is below or greater than
one we'll set them to the max amount
again with thirst is exactly the same
stamina if we're actually moving and we
press left shift we'll be able to sprint
and it'll take aware the stamina
depending on what we've set at the top
then if we're not pressing any of those
normal speed we'll be done and we'll be
able to count up the stamina so we're
getting stamina again along with jumping
if we press space and we can jump and
we'll be able to take a little bit off
and we'll have to wait so we call this
function which where it's a couple
Ekans and says now we can't jump so then
the second part gets initiated if we
can't jump anymore
we'll start the timer for not 0.7 of a
second and then we'll make sure that we
can jump from the controller and then if
it the timer ever equals zero
we'll make sure then we can jump we've
reset the timer and we enable jumping
then what we're doing here is do if
we're ever below an amount which is
needed to jump so we need a not point to
amount the jump will say we can because
we don't want to waste the stamina or go
below a certain amount then we'll say
that we make sure that stamina doesn't
go higher or lower than 1 or 0 the
maximum amounts and we make sure that we
set normal speed if ever goes below zero
and then obviously in the character
death we'll say we can call the new
level so if we do die you can add a
check and load a death scene or whatever
you want to add but one thing that I did
make a mistake on is that needs to be
lower case C hitch mortar and there I'll
save that now I'm back into unity go to
my first-person controller then what
I'll do for my elements here is that I
want to be able to add my GUI objects so
here will empty empty empty so we'll add
the empty image here like the health
fall there empty image here
hunger fall there empty image here
thirst fall their stamina empty and
stamina bar form so what this means is
we can keep the white image the same
because it never changes so it only
changes the other bars of the amount of
time that we have so you can see that
the green is the thirst and it's
counting down slightly quicker than
hunger obviously you can change these
and I'm walking around normally if I
hold shift you'll notice that my stamina
starts to
Creason as I'm running about obviously
have to take away you can see I don't
sprint anymore
if I jump you can see that it takes down
a good portion of stamina I can't jump
over and over until the timer counts
down and if we ever get to a certain
amount I won't be able to jump again
while I remember add a little section
here because if we set this here
to not point to we'll never be able to
jump again so then we want to say that
else can jump is equal to true and CH
Marta dot jump in da table equals true
so you initially you saw the things to
the object stick down and you make sure
that you set the size to the size of
your GOI objects you can change the
positions to the health the hunger the
thirst keep the displays up one you can
obviously change these fall rates so if
I put the thirst to a higher amount say
like 600 for instance you'll notice that
it probably will take a long time to
ever disappear so if I pull this back
down
so now three obviously sewing twin - -
figures it doesn't know how to deal with
it very well so we can you can adjust
change that accordingly and I apologize
for this being such a long tutorial but
with a quite long script it's hard to
bring it down to a short time so as ever
I said that I'll be doing tree chopping
next time hopefully next week but as
ever make sure you keep a lookout thanks
very much for watching and don't forget
to Like comment and subscribe</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>