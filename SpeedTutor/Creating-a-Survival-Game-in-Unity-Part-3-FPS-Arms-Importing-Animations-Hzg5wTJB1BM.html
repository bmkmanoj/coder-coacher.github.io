<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating a Survival Game in Unity: Part 3 - FPS Arms / Importing Animations | Coder Coacher - Coaching Coders</title><meta content="Creating a Survival Game in Unity: Part 3 - FPS Arms / Importing Animations - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating a Survival Game in Unity: Part 3 - FPS Arms / Importing Animations</b></h2><h5 class="post__date">2014-07-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Hzg5wTJB1BM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys this is going to be part three
of the survival series of tutorials
which have been showing you to work
through now hopefully this one is more
in keeping with the time that I said I'd
bring it out I will hopefully actually
bring out a tutorial tomorrow which will
be everybody's been after the tree
cuttings I'm ready to do that but for
this one I need to have this tutorial
but important animations and arms and
controlling the player so that we can
then move on to the tree cutting so it
all follows along nicely so this is
going to be a hopefully a shorter video
and I'll show you how to import some FPS
arms and control the animations with the
legacy system that I've already done and
I'll obviously package these up ready
for you to use so what I'm going to do
is I've just created a new folder called
animations and what I'm going to do is
that I'm going to import a new asset for
my desktop so I'm going to import
something called FPS underscore FPS arms
underscore acts at idle and now you
always use the sort of prefix at idle or
at Sprint or at swing or at jump so that
you can reference it quite easily and
keep everything constant within unity
and it worked with the old legacy system
so I'll show you how to make this work
and I'll also empower sprint and I'll
empower
swing so now what we're going to have
here is we'll have all the different
animations that I've created in 3ds max
I'll obviously as I sell blood these
files so you can edit it and have a look
at it so what I'm going to do in each of
these is convert the rig to legacy and
hit apply because I don't want to use
Meccan in or whatever it's called and
then I'll hit apply for each of them and
that's what you can do if you want to
follow along doing this now on the idle
or on every single one what I'm going to
do for my scene is scale this up to
naught point naught 5 on each of the
assets so the slightly bigger in my
scene so it matches up with my
first-person controller now you'll also
want to do that yourself but you might
want to
what size you want it to be when you
impart into your scene so once we've
done that we can leave everything sort
of as it is and what I'm going to do is
actually just drag one of these into my
scene so I'll start with the idle and
I'll just drag it in and what I'm going
to do is I'm going to sort of drag it so
it's next to my first person controller
and what you want to try and do is match
up with your main camera if you see
camera image there there might be a
better way if anybody does have a better
way of looking at the camera and having
you know selecting another game object
because if you see if I select the arms
now I can't see a camera preview so it
gets a little bit awkward positioning it
but I'll pause this video so that you
don't see me trying to reposition it in
a way in front of the camera so there we
go for the sake of this I've roughly
roughly sort of placed it so there you
can see it's sort of floating around in
the scene then obviously you can change
your clipping planes in there and close
clipping plans to adjust it I'm not
really going into too much detail
because obviously you can change this
and mess about yourself it's just for
the ease and the speed of this tutorial
now what you want to do with the FPS
games underscore acts idle is you want
to parent that to the main camera so
I'll always follow your main camera
around so you know model no matter where
you go I'll always folio now what we
want to do then to be able to reference
our other animations that we're going to
use we want to make sure once we've
clicked the actual mesh what you can do
is untick play automatically because we
don't want our we're going to control
that via script and we're going to
change this array size to 3 so we can
add in the other animations that we're
after so if we go to the idle on this
side and we got onto the sprint open up
the sprint and what we're going to do is
we're going to add that to the second
slot and we're going to add swing to the
third doesn't really matter which side
they go but it's just to show that we've
got three different animations within
this animation for this match and
they're all from the same mesh because
I've tested this and it works ok so now
what we're going to do is actually
create the script to control each of
these and this part the tutorial will be
good for anybody who's trying to import
animations and use it for legacy because
we're going to actually control loop
because if you try and if I go on here
and you try and go to the old fashioned
where and go here to change the rap mode
to loop is grayed out for some reason
and I tried to research it but couldn't
find anything but we can control this
via script sorting to do is going to
create JavaScript and we're going to be
able to create and control our
animations so what we're going to do is
we're going to create this and call it
player control obviously you can name
this whatever you like and then what you
do open up the monodevelop and then once
i've done that what we're going to do
delete the two functions there we'll
start by writing very private variable
has ax type boolean equal to false and
then we're going to write another
private variable called can swing as
type boolean equal to true now I hate
when unity keeps auto correcting well
monodevelop gives all to correcting
these for me private variable is
swinging as type boolean equal to false
and then we're going to have another
private variable called controller and
set that as type character controller
and then another private variable called
player GUI and add that as type player
GUI now has ax is going to control the
hem what weapon we've got so we've got
an axe and while are we actually care to
mention the axe that you can see with
the model that you've imported with the
animations that's only of players hold
off so we're going to change that then
we have a variable for if we're about if
we can swing because we don't want to be
able to swing am lessly want to make
sure that if we're swinging because
we're going to control idle animations
and swinging and if we don't control
that will art will never be able to
swing because we'll always be idling and
then we're going to have controller
which is the character controller so we
can tell where we're moving or not or
sprinting so then we can have a sprinter
animation and then we're going to play a
G
why is just the script that we created
in part two so first of all what will
write its function start to brackets
then two curly brackets below and we'll
say has ax is equal to true so we've got
an axe and a hundreds of staff would say
now will say controller equals game
object dot find open brackets first
person controller and then close up get
component open brackets character
controller and close that up and put
semicolon then we're going to save put a
layer GUI is equal to game object dot
find and in quotes first person
controller again close that up dot get
component open brackets player GUI now
you see how these differ I've got a
lower case player for the actual
variable and the upper case for the name
of the script so that's okay for now now
we're going to control the actual
animations ourselves now we've got all
the cell so now will say function up
there and then two brackets two curly
brackets below and then we're going to
set as a write a comment say an idle
section so we're going to do is we're
going to set if controller controller
dot velocity dot magnitude is less than
or equal to zero and and is swinging is
equal to false then we'll close up add
two curly brackets make sure that this
controller is a lower case because as
the same one or develop sometimes change
it when I don't want it to then we'll
say that animation dot player open
brackets in quartz and we'll name the
animation that we're looking for so idle
with a capital then add a semicolon then
we'll also set animation and then we
want to put in square brackets
time in quartz Idol like we did people
say dot rap mode equals rap mud dot loop
so this is just as I said before with
the bit was gray down we're actually
setting the idle animation to loop every
time we're not moving and we're not
swinging then we'll actually actually
show you how to change the speed so
again just like this one at the top
animation in square brackets then we'll
add idle again and we'll say dot speed
is equal to not point two now obviously
you can change this to whatever speed
you want but not point two I thought
looked okay below here we're going to be
able to control sprinting and then what
we're going to do is we'll say that I'll
just copy this section here so if
controller dot velocity to that
magnitude is greater than zero and then
we'll say and and input get key open
brackets keycard dot left shift and then
we'll add another bracket to close those
two off and then we'll add two curly
brackets below and that means that if
the magnitude or the velocity of the
character is written zero so if we're
running and we're pressing shifts just
to be able to spring we'll set that
animation dot player open brackets
sprint and then obviously like we did
here we want it to be able to loop for
as long as we're sprinting so if we
pierce that in and then instead of
having idle we change that to sprint and
we keep the wrap mode to loop then now
we're going to check control the axe
swinging so we're going to say that if
has X is equal to true and and can swing
is equal to true
which is the case at the top we can
swing them we do have the accident
beginning
we'll say that if in pop dot get mouse
button open brackets put zero to close
those up so zero is the left mouse
button then we'll add two curly brackets
below there and we're going to actually
reduce stamina from our other script
so we'll say player GUI dot stamina bar
display and you can see these in that
other script - equals not by one so
it'll take off not by one stamina for
every time we swing whether we hit a
tree or not and then what we're going to
do is going to talk about the swinging
animations now we'll set animation dot
player up and brackets swing close that
up semicolon then we'll set animation
dot well animation and then as we did
before in square brackets in quartz will
put swing then we'll change the speed
because man emission was a bit slower
I'll set that equal to two you can set
it to whatever you want on what if you
feel then we'll set is swinging is equal
to true and can swing is equal to false
so what this means is that if we've
actually pressed the left bottom to
swing will take some stamina aware and
will actually make sure we play the
animation at a certain speed and we'll
say that we are actually we are swinging
now and we can actually swing again
until we've done an actual timer so now
below here what we'll do is we'll say
that if can swing is equal to false
plaza up add two brackets then we'll say
swing time is minus equal to time dot
delta time so up here when you try to
another variable and call this variable
swing timer as type float equal to we'll
say one
and then what we need to say is that
when we actually swung we're going to
count down from one and then we'll see
if swing time is ever less than or equal
to zero we'll close that up then we'll
say that swing timer is equal to one so
set them back to one again we'll see a
can swing is equal to true so we'll be
able to swing again because it'll set
the top bit back to true and then we'll
say is swinging is equal to false so
that just means that scene as though
that's already cooled down well
obviously not swinging any muscle will
be able to do it again so realistically
quickly go through it
we've got ass a can swing on his
swinging variables were just referencing
the controller so content movement and
previous script for control night GUIs
now we're saying that if we're not
moving and we're not swinging we'll beat
just idling so we'll just sat there
doing nothing if we're actually moving
and we press left shift will be a pod
play the splint sprinting animation if
we have an axe and we can actually swing
at the moment and we press left-click
will actually reduce some stamina and
play the swinging animations then we'll
set the boolean's to opposite so this
means that if we can't swing anymore
we're going to count down so we're going
to have a little cooldown and then if we
ever reach zero will set the swing back
to what it was originally and be able to
do it normal again so then what you want
to do is go on the model and then you
want to add you play a control this time
because you want to be able to control
it so now what we'll do is play our C
and you'll notice that my hands are
moving very you know slightly for the
idle so we're idling at the moment and
you know it Lydell forever and if I'm
moving what's still idle until I press
shift and we'll do some sort of
sprinting obviously as I said
nations are not the best and then when
we stop we'll go back to the idle and
then what if we left click we'll do a
swing of the axe and it will go back to
idle and then what we do is took a
portion of stammer down and even if I
carry on clicking I can't until it's
called down and obviously it's not the
best but obviously you can change these
and it just shows you how you can
control it very easily and obviously
like I said what we can do is in
hopefully tomorrow I'll be able to
create the tree chopping so you can use
all this together to create something
that you finally want to see so
hopefully this was helpful and it helped
you import your animations and things
and I'll upload all this to a website so
thanks very much for watching and don't
forget to Like comment and subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>