<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Unity3D] Opening doors using raycasting in Unity3D | Coder Coacher - Coaching Coders</title><meta content="[Unity3D] Opening doors using raycasting in Unity3D - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Unity3D] Opening doors using raycasting in Unity3D</b></h2><h5 class="post__date">2014-04-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/faejZI2m19w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys I've got new tutorial fees
today and this is going to be one of the
ones that people have been asking for a
very long time it's probably one of my
most requested tutorials and now what
it's going to be as you can tell is
we're going to be open and closing doors
but as I've done in many other tutorials
I'm going to be using a rare cast and
that just makes it easier so that we can
detect the distance at which it's out
and show a GUI and do whatever we need
to do so this just a disclaimer at the
beginning it may not be the best way to
do it but here's aware that I find quite
easy and straightforward and easy for
everybody to understand I love getting
my scene is my first birth controller
and then a cube which is going to act as
our doll now I could have changed this
in 3dsmax to make the pivot point over
here so we'd be able to rotate the doll
more easily when we come to animate it
but for the sake of this we'll leave it
like this and everybody can see so
initially what I actually want to do is
create two animations so if I select
whatever object you want to put
animations on you can do this in an
external program or you can do this in
unity so what we can do is go component
miscellaneous and then choose animation
so and then what we're going to do is
we're going to have an animation size of
two and then what we're going to do is
go to window animation so first of all
we're going to record a new clip and
we're going to call this door open and
then we'll scrub across to say 30
seconds and I'll just grab the rotate
tool rotate back here and just shift
that to there initially it's not going
to be exactly like a door maybe I'll
move it a little bit over so that far
because obviously I've not changed the
pivot point so it doesn't rotate and
round properly so then what we're going
to do is we're going to actually record
another clip so we'll create another one
by clicking that little drop down and
choose da clothes so you might think how
we're going to match this up but what we
can do is go to door open what we can do
is copy the frames ctrl C to copy the
frames that we've already got go to the
dark clause what we'll do is paste does
in instead of just trying to manually do
it what we'll do is pull these frames
across and then pull these frames back
so you go to 30 seconds there and select
all these frames and put it into the
star so what it is is the exact copy but
just reversing the frames so then what
we'll do is we'll close this it's
created another two so I'll just take
that out and what I'll do is add door
open to the top a doll one two there and
doll close to here obviously need to
mess about about because I just changed
a few times for me so all we've got and
you can test your animations if you
click on your emotions at the bottom and
you click and you might need to drag
your object in from the hierarchy over
to this panel here if it doesn't already
display so what you can see is that it's
my doll closing looping over and over
and that's the door opening looping over
and over so we can check that it works
fine so initially what we're actually
going to do is make sure the play
automatically is on ticked because we
don't want to be able to do that so
we're going to get straight into the
script now so we're going to create a
new java script and we're going to call
this opening doll or whatever you want
to call it and then we'll open up in
monodevelop and then want to rope him on
develop I'll zoom in a little bit so
everybody can see then we'll start by
writing private variable GUI shell as
type boolean equal to false then private
keep these together private variable is
open column boolean equal to false again
gotta be careful sometimes you want to
develop changes that then will have
variable called doll and have that as
type game object with two capitals at
the beginning of each word and then
variable
rare lengths set a equal to 10 so
initially we're going to write an update
function so function up there and then
two curly brackets below I'm going to
start by writing the raycast like I've
doing other tutorials so variable hit
call on ray cast hit with a semicolon
then variable FWD for forward then we'll
say it equals drums form dot transform
Direction open brackets vector three dot
forward close the brackets up add a
semicolon then below here we'll say if
physics dot rare cast open brackets
transform make sure this is lowercase
transform dot position but it's changed
it again hold on transform position
comma FWD comma and hit comma R a length
close that up twice then below there
were like two curly brackets and say the
if hit dot hit dot Collider that just
changed automatic lift me hit Collider
don't get checked but this time a
lowercase G dot tag is equal to dawn and
then I'll add two curly brackets below
there and before we carry on what I'll
remember to do go back into unity we
need to make sure your dog's got a tag
of da so you can add a new tag there and
then what we'll say below here is that
GUI sure is equal to true then add a
semicolon and then what we'll do
underneath here we'll set if input dot
get key
down open brackets in quotations e or
whatever you want to open your doll with
will close that up then we'll set and
end is open is equal to false and we'll
close that up add two curly brackets
below door dot animation dot player up
and brackets dot open in quotes close
that up put a semicolon then we'll set
is open is equal to true and GUI shell
is equal to false so I'll explain this
briefly so what we're doing now is we're
making a rare cast and within the
forward direction and based on it from
the length of which we've set the top
subs you can change this so then what
we're doing if we're in range and the
collider in front of us is tax doll will
actually set the GUI to true so you can
see that you can open the doll whatever
you want to do and then when we're in
range and the tag star if we press E and
the boolean is false which is at the
beginning it means that we can play the
animation to open the doll and then what
we'll do is set the animation
that is open to true which means then we
can set another condition for when it's
open we'll be able to close it again if
we press E so then what we can do is
that we can set if input dot get key
down just similar light before in course
we'll add an e close that up and but
this time we'll set and and is open is
equal to true then we'll add two curly
brackets and what we'll do this time for
Speed sake we'll copy these two these
three lines paste that in said our
animation dot dot close and that equals
false and false and then finally what
we'll do right at the end almost this
third curly bracket in will say else
with two killer brackets underneath GUI
sure is equal to false so this just
means that if we're not in range
then we'll turn that off so the last
little bit that we want to achieve here
is to make a GUI appear so what we'll do
is we'll go function on GUI two brackets
then two curly brackets below zoom out a
little bit then we'll set if GUI sure is
equal to true and and is open is equal
to false close that up add two curly
brackets below there and so that GUI dot
box open brackets rect close that screen
dot width divided by 2 comma screen dot
height divided by two comma 100 comma 25
and then we'll put a bracket in there
add a comma and say use da in quotes and
then we'll close that up and then a
semicolon so we'll save that out but
just before we actually go back into
unity what you can do is make sure that
you're right else if after this if
statement so in this if statement just
write else before the F and then what
we'll do is save that out we'll go back
into unity make sure you add your script
to your main camera and then add the
doll object over into the inspector so
you just drag it all the way over to
there
what we'll do is we'll play it again and
now you'll notice that when we're
getting range obviously you can change
the rail length amount and we look aware
the GUI goes we look back we could do it
now if we press E you'll notice that
there was man emotion obviously wasn't
very big so you might have to adjust
that and do that icon lit what you want
but obviously if we range again and we
press E the doll Clause now so you can
play it as many times as you want and it
will open and close
was depending how close you are now the
thing is the GUI disappears is because
if we set that is open to false it will
only show in that instance but if we
delete that they'll actually show it and
when you want to now you don't really
have to do with our clause you can just
have it so it opens it doesn't really
matter you can have it either way but
we're just showing you that for both
types of opening and closing you can do
that easily with an animation so that's
pretty much it for that that shows you
how to use a rare cast to open and close
a doll so thanks very much for watching
and as ever double gods like comment
subscribe Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>