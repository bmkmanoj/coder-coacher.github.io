<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Unity3D] Fall Damage In Unity3D | Coder Coacher - Coaching Coders</title><meta content="[Unity3D] Fall Damage In Unity3D - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Unity3D] Fall Damage In Unity3D</b></h2><h5 class="post__date">2014-04-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ebYMDLfdeFg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so I've got a new tutorial for
you today and this is going to be about
what a lot of people have actually
suggested and it's going to be about
fall damage so I'm going to show you a
really basic simple way to calculate
fall damage based on your player's
position in its last position and then
you're doing setting some values to say
after we for fall on a certain amount we
take off so much health and we'll just
be doing this really quickly today all
of god is my first-person controller
which you'll need and just a box to
stand on so we've got some height
so we'll do initially we'll start off by
creating a JavaScript file and what
we'll do is we'll call this fall damage
I know put up in monodevelop once you've
done that zoom in a little bit and then
what we'll do is delete these first two
functions and initially what we'll say
is variable last position Y as type
float equal to zero f with a semicolon
then another variable called fall
distance as type float equal to 0 F with
a semicolon then also variable player as
type transform with a capital T and then
a semicolon and then we'll actually have
a private variable a private variable
called controller and set that the type
character controller because we're going
to reference the character controller to
make sure they were actually on the
floor or grounded in terms of this so
we'll have one more variable which is
called current health set that as type
floor equal to 10 point or F with a
semicolon then we'll start by writing
function start 2 brackets two curly
brackets below and we'll say that
control equals game object dot find open
brackets in quotes first
person controller plus that up dot get
component open brackets character
controller and then what we'll do under
here that's okay we can write a start by
writing function update and then add two
curly brackets below here and we'll
start by saying that if last position Y
is greater than player dot transform
which is lower case dot position dot Y
then close that up
then we'll add two curly brackets below
and say that fall distance is plus equal
to last position Y minus player dot
transform dot position dot Y with the
semicolon and then underneath those two
curly brackets will say that last
position Y is equal to player dot
transform dot position dot Y with a
semicolon and then what will say under
there will leave two line breaks and
will say that if fall distance is
greater than or equal to five and and
controller dot is grounded close that up
but then one like two curly brackets
below there and so that current health
is minus equal to five with a semicolon
and then we'll say apply normal and what
this is going to be is going to be a
function that we're going to create to
make sure that we can reset all our
values so when we're not actually
falling anymore then we want to write
another if statement so if we'll do it
very similar if the fall distance one
thing that it's made a mistake is a dull
and that just want that to be named
controller so what we'll do is we'll cop
this line again Pierce the end if Falls
distance but this time is less than or
equal to 5 and is grounded what we're
going to do is just apply normal so I'll
add two curly brackets under there and
just apply normal and then the last
thing we'll do is we'll add a couple of
line breaks and then we'll say function
apply normal with two brackets then two
curly brackets I'll just zoom out a
little bit and then we'll say fall
distance is equal to zero the semicolon
and then last position y is equal to
zero with the semicolon so the bone what
we'll do they say about our script and
I'll quickly go through what this all
means is that we've got a set of
variables which you're going to help us
calculate the actual distance that we've
traveled and then we've got a health
what we're going to do is we're finding
the controller so we can tell where the
foot players on the floor are not with
what we're doing in the update function
were checking if the players last
position so if we're falling and we're
changing the Y position which is here
every time we're falling we're going to
be updating this last position so where
we were a friend before when the update
updates and then fall distance is going
to increase depending on how far we fall
down and then here if we M if we fall
with a greater of distance of five we'll
take damage if we don't do much damage
we'll just apply the normal values to
make sure that we're not falling more
than what we need to take off and we're
actually on the floor so if you want a
really quick health GUI what we'll do is
under here we'll write function on Gy 2
brackets than two curly brackets then
we'll say G y dot box open brackets rect
bracket 10 comma 20 comma 50 comma 20
close that up add a comma at two courts
and say plus
current health close the up add a
semicolon then what we'll do is we'll
save that out what we'll do is we'll add
this fall damage script to our first
person controller and you can see the
last position and this and all this is
set to what we initially set we need to
add our first US controller to the
player slot and now what we'll do you'll
see if I start the platform you'll
notice on this side and up here my
current health is equal to ten now if I
fall you'll notice that last position
and things update and see I took a
distance that was more than five of a
fall it took five damage off my player
so obviously you can see down the left
that the fall distance that we're doing
and when we hit the floor we'll serve it
in 2-0 so we can't particularly damage
any more so realistically that's just a
basic where you can obviously add more
values in here so if you take more than
ten damage then you take it you get
killed whatever and if you want to load
a new screen all you need to do is that
you need to make a knit four same so if
current health is less than or equal to
0 then application download level and
you can load a new level up but that was
just a very basic way of making sure
that we take two positions take them
away from each other make sure we add
that to a fall distance and then apply
damage accordingly so thanks very much
for watching and let's ever don't forget
to Like comment and subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>