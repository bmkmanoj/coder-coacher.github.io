<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating a Horror Game in Unity - Part 1: Creating a sanity meter | Coder Coacher - Coaching Coders</title><meta content="Creating a Horror Game in Unity - Part 1: Creating a sanity meter - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating a Horror Game in Unity - Part 1: Creating a sanity meter</b></h2><h5 class="post__date">2013-11-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ECd2a8c0Vco" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey I saw a new tutorial today and this
is going to cover something that
somebody suggested which was something
you could use in a horror game so sort
of like a sanity meter or something that
when you get scared in game it makes you
vision got blurred and then you know it
goes down depending on if you blink or
you know due to a matter of time so
really what we can do is you know cover
in sort of four different stages so I'm
going to use four different scripts to
control each different thing but Mia
it's going to be quiet
you know simple in each case so in my
scene I've got my first person
controller which has got a camera which
has got my blink blink elements up from
another tutorial and all my cameras got
on is a motion blur components if you go
component image effects and then you go
to motion blur then you want to add that
and you can follow my other tutorial
which is about blinking and get that and
I've got a lot of boxes called scare
with a box Collider on so that's going
to produce the actual scare that we want
so what we want to do is create a new
script and call this insanity manager
and then we'll open up this in
monodevelop and then what we'll do is
going to write with three variables one
called current sanity as type flow equal
to twenty point O then we're going to
write another variable called Max sanity
and set that as type float which is
equal to 100 point zero and then
variable min sanity let's type flow
equal to zero point zero and then we're
going to write function up there and
within the update of two curly brackets
and then we'll set if current sanity is
ever less than or equal to 100
then when current sanity - equals time
dot delta time and then below that we'll
also say if current sanity is greater
than or equal to 100 then we'll add two
curly brackets and say the current
sanity is equal to max sanity so we can
never got both 100 and all sorts for
going for below if current sanity is
less than or equal to zero then we are
to another two curly brackets and say
that current sanity is equal to minimum
sanity with a semicolon and then we'll
do is other quick GUI at the bottom
it's alright function on GUI add two
brackets add two curly brackets below
and say that gy dot box robin brackets
rect open brackets again 5 comma 5 comma
55 cover 25 close the brackets add a
comma put quotes right sanity close that
up
add another GUI dot box rect open
brackets right 65 comma 5 comma 55 cover
25 close that up put a comma right
current sanity dot 2 string open that up
what 0 in the core has closed down add a
plus in courts had slash add another
plus and then right max sanity so that's
just going to show our current sanity on
the screen and that's just going to hold
the case for each of our values and
never let it go above and beyond what we
want it to do
so next what we'll do is we'll cover
when we actually hit certain amounts and
how it creates the dizziness on the
motion blur so if we create another
JavaScript and call this busy what I'll
do is add these two to my insanity
folder I'll open up the dizzy script and
once that's open what we'll do is delete
those two functions and then I'll say
private variable M blur as type motion
blur and under there I'll have another
private variable called sanity script
that we've just created and of that type
is insanity manager and then under there
we'll write function start add two
brackets at the two curly brackets and
then say the M blur is equal to game
object dot find open brackets and we'll
add what we've got the motion blur on
the main camera close up right
getcomponent open the brackets and then
type in motion blur and close that then
we'll write sanity script equals game
object dot make sure that's capitals dot
find open up and we'll add it to the
first person controller and then write
get component open brackets in the
sanity manager and close up then we'll
write M blur to begin with dot enabled
equals false and then we'll actually
start writing the update function and
within the update function so we'll
start off of function up there
then within here or say that if sanity
script dark current sanity so it just
referencing another variable from
another script we just created is
greater than or equal to 20 then M blur
darn abled B equals true and then M blur
dot blur amount and I found this from
the actual script which creates the
motion blur equals not point 2f with the
semi colon so what that means if current
sanity so the base amount is 20 so
you're quite sane at the moment that's
20% shall we say then
it's only a lower amount of blur
obviously if it was 0 we wouldn't have
anything you can set that yourself so
what I'm going to do is I'm going to
copy these values again and I'll pass
this in and again and again and again so
what we can do is change the values so
if we're 40 percent scared 60 percent
scared set 80 percent scared and then 90
percent scared so each time it's equal
to true but we're going to change the
amount that we're putting so we'll fight
get scared will I fought not point four
percent of the motion blur enabled then
we'll put not point six and then they'll
of not point eight five and not point
nine nine because we can only go up to a
value of one with the motion blur so
that just means the more percentage that
you were scared the more motion blur
which will be added and depending on
what the current sanity is in the other
script so you know as I said whatever
your current sanity is it will change it
depending on this so now we actually
want to be able to sort of have a scare
action so I'm just going to use boxes
for this example but you know you don't
have to use this you use it whatever you
way you're going to have it if you're
going to use in your game
but we'll call this script scare and
I'll just add this to my insanity folder
then we'll open up this new script
delete these two functions and what I'll
do is we're doing like we did before and
we're doing a private variable called
sanity script and a type in sanity
manager and what I'll actually do is
copy it from my dizzy script so if I
copy this start function and just paste
that in we'll get rid of the motion blur
because we don't need it now we've got
the Sun at your script referring to the
insanity manager now that we're going to
say function on trigger enter open
brackets call call on Collider cause the
brackets add to curly brackets and set
if call dot tag is equal to player then
under there are two curly brackets and
so that saniti script dot current sanity
and plus equals and we'll say scare
percentage wither and semicolon so what
I'll do is that under variable called
scare percentage set that as type floor
and say we're going to set the scared
cause twenty percent of a scare so we'll
just add this you can change this in the
inspector when you do it and then what
I'll do is also destroy the object so
destroy open brackets then game object
with a lowercase G what that means is
that when we enter the object it will
destroy it and then it will also add 22
whatever our current sanity currently is
and thus you know changing the motion
blur amount so that's that and what I'm
actually going to add the last element
and well if I do that I'll add all the
scripts to it so what I'm going to do is
add insanity manager so you can see
their maximum is 100 you can change all
these values you
 you can add the dizzy script and
then what we'll do is we'll select all
the scare boxes and add the scare amount
so what we can see is that if we play
the game now sanity is currently going
down so we're getting you know more
saying more percentage soon and if I
walk into a box you know the Martian
blood picked up and again and when we
get to 50 if it starts picking up more
80 it's quite heavy and then you know
100 we can't really see what we're doing
until it falls down below those values
that you set so we're going to actually
also create whether you can make it go
down quicker by blinking so we'll create
another JavaScript and call this the
link click and then I'll add this to my
insanity folder and then open up and
then we're going to have this very very
very similar to what I created for the
blinking for my other tutorial so
obviously we're going to have the same
elements that we had before so the two
variables for top lid and bottom lid
then we're going to have a variable
called regen sanity as type flow and
we'll set it equal to something like 15
so every time you blink it'll let you
regenerate by 15 then we're going to
have a private variable called can click
so that is type boolean equal to true
then we'll have variable timer as type
flow equal to 3.0 and then also for my
other script I'll copy that sanity
script so we can refer to it and then
while actually do is I will pay I will
get this start function that I wrote
elsewhere so it refers to the insanity
manager script and finds both the top
lid and bottom lid game object so the
only different thing I'm going to do
this time in the update function so
function up there add your two brackets
add your two curly brackets and say that
if we can click so if can click is equal
to true then we're going to go to
brackets and set if input dot get mouse
button down or bracket zero closer to
bracket so if we left click then we're
going to add another two curly brackets
and say that timer is then equal to 3.0
again can click is equal to false so we
won't be able to click again then wall
so actually say the two things that I
had from my other script so top lid
animation top plane bottom lid animation
dot play and then we'll say sanity
script dot current sanity minus equals
regen sanity so whatever amount what we
did and then what we're going to do is
we'll leave those to clear the brackets
below or set else add two curly brackets
below that and so that timer minus
equals time dot Delta time with a
semicolon and then we'll say if timer is
ever less than or equal to less than or
equal to zero then we'll add two curly
brackets and say that can click is equal
to true so what this does is if we can
click so if it's true at the beginning
it's true and then we left click I'll
set the timer m23 if it's not already
and then we can click again because it
says can click who's equal false so we
won't be able to it'll play that
animation one region stamina and then
what it does it runs through this if
statement then if it can't do this it'll
run to the else statement
and the time will countdown if the time
a equals zero will be true again you can
click again and you know it just keeps
running through as many times as you
want so then if we save that out and go
to the first person controller again add
the blink click and you can set the time
into whatever you want and regen to
whatever you want but make sure you want
your top and bottom lids if you followed
the other tutorial and then you'll see
that it's a current current amount we'll
add - we'll just I'll collect all these
boxes so it's quite heavy so now if I
blink it went down by ammount of 60 and
after wait till it counts down I do it
again and it's gone to 60 you have to
watch on this side again forty twenty
five and you know so on so you can
change this up to however you want to
use it but in the end all you've got is
three four different scripts the first
script that controls how much sanity you
have and it displays the GUI the second
one depending on what your current
sanity is it will change the blur as
long as you've got a new main camera the
third one is whatever is going to scare
your character or create the change in
the current sanity and then blink click
is about blinking it and reducing that
amount you've collected also when you
walk into these Qaida's make sure the
first place controller is tagged as
player but that's pretty much it and
that sort of concludes what I was trying
to show and it could be used in a horror
game or something similar so thanks very
much for watching and if you liked the
tutorial don't forget to Like comment
and subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>