<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Unity3D] Creating an RPG GUI Health / Mana / Stamina system in Unity3D | Coder Coacher - Coaching Coders</title><meta content="[Unity3D] Creating an RPG GUI Health / Mana / Stamina system in Unity3D - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Unity3D] Creating an RPG GUI Health / Mana / Stamina system in Unity3D</b></h2><h5 class="post__date">2013-08-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/teaMf4hC16k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so today I'm gonna show you
something quite special and it's gonna
be something that it's gonna be quite
complicated because it's quite a long
script but in the end I think it might
be quite worth it for a lot of people
one of my subscribers mentioned it to me
in one of the comments and it's about
creating health mana and stamina system
all within unity and it's all gonna be
pretty much in just one script now it's
gonna be written in JavaScript and I've
taken a few days an hour to research
this and I think I've got it pretty much
dead on so I'm going to comment all the
way through the scripts so you know
what's going on because it's gonna get
quite confusing when we go through but
I'll make sure that I explain every step
and try and go through as best I can so
realistically you may have seen this
scene before just my test scene I've got
two boxes one red one green this is for
later so you don't need to worry about
this now I've got my first place
controller nothing fancy just um that
sat ready to go so what we're going to
do is human mainly in undeveloped so
we're going to be script in Java so what
we're going to do is going to create a
script called we'll call it GUI manager
and this is going to be the thing that
manages all our GUI is that we're going
to right now for the health mana and
stamina you could change these up to
whatever you want but for this I'll show
you this for my example so we're going
to first open up monodevelop
and we're going to get rid of these two
functions and what we're gonna do here
is we're gonna write a few variables so
I'm gonna write two variables to start
one called current health I'm going to
set that as type flopped and make equal
to 100 then we're going to create
another variable called max health and
set that to an integer and make that
equal to or 100
then what we're gonna do is create
another two variables I like to give a
little space so I know every thought
I've written so current manner as flow
and make that equal 100 point zero
doesn't really matter but I like to burn
it this way and then variable max mana
as integer say equals 100 leave another
space write a variable called current
stamina and set that as type flaw and
say to a 100 point zero make sure you
read you semicolons another variable
called max stamina
I'm going to set that to type integer
again so you can see the running trend
current always is set to floor and then
the max is set to an integer then what
we're going to do is set variable bar
length
I'll do is leave this lowercase so we
keep all the variable names consistent
and we'll set that equal to not by not
and put a semicolon and for now that's
all fine and what we're going to do is
write function start and then we're
going to put two brackets in add two
curly brackets and say bar length equals
screen dot width and then we're going to
say divided by eight now I'll explain
all this once we start getting through
it but and that's it for now for that
bit so then what we're going to do is
write function up there I'm going to put
two curly brackets in then I'm going to
leave that for a second just while we
get this on the goal and then what I'm
going to do is write function on GUI so
capital L and then capital GUI
put the two brackets in and then I have
two curly brackets so first of all we're
gonna write the GUI icons so I'll leave
I'll put this so icons for GUI so what
we're going to do is write G y dot box
open bracket new reps for rectangle and
then say 534 - 20 close the brackets but
a comma and then we'll put in quarts HP
close that and set a semicolon so this
means it's going to create a box GUI box
as a rectangle and it's going to set it
so it sets it five across 30 down it's
actually space of 40 across so the full
length of it so these are just the
actual parameters so how far down it is
how far along
how long is this determines how long the
bar is so we just need to worry about
this for now but what we're going to do
is we can copy this line and then we're
gonna paste it two times then we're
going to keep everything the same except
we're going to change these values and
that's the Y value that makes the GUI go
down we're going to set that far to keep
that as 20 but now we're going to change
that to mana and then we're going to
change this to stamp and I have to save
this out and I go out into unity and I
actually got the first person controller
and add the GUI manager and you'll see
all the actual variables at the start
and what you'll see you'll see
HP man and stamina there as GUI so
that's it for now for that then then
what we're going to do I'll write
another comment and say health health
mana stamina main bars
in bars and then what we will do is say
GUI dot box open bracket new rectangle
so we're going to set that to 45 30 and
then we're going to set this actual
length of it to bar length comma 20 and
then we'll comma after that say current
health dot to string in brackets quote 0
close the brackets and we'll say plus a
back forward slash plus max health and
then we're gonna put a bracket on and
put a semicolon and then what we're
gonna do is we're going to copy this and
say and just like the other two that we
mention for both we'll change that to 50
and we'll change this one to 70 and then
what we'll do is we'll change this one
to current manner and then we'll change
the lower one to current stamina as you
may have guessed and then we'll also
change the min and Max values min and
Max stamina here what we'll do is we'll
save this out and all this does is as it
did the two it draws the box where we've
positioned it with the length that we
set and then it displays what we're
trying to display so what was this plane
is the current health sort over the
current health is at the moment and what
we're doing is converting it to a string
because when it's a floor it's actually
a decimal place so if we convert to a
string it'll always be a whole number
then it'll also display I slash and then
the max that your health will ever go
and so with the other stuff so if we go
back into unity and we press play you'll
notice that there's my edge the HP mana
and stamina
and if I go back into monodevelop
as we're gonna add something into the
update function so if I go to the update
function and we say I just current
health and then we'll put 0 in brackets
with a semicolon and then I'm gonna say
adjust current manner and then I'm gonna
do the same thing and then from there
I'm going to actually create two
functions so as you may have guessed one
of my function here is here and it's
gonna become function a just current
health and we're gonna put a DJ inside
there and then I'm gonna create another
function underneath there and we're
gonna call that a just current manner
and then inside there we're gonna pop it
DJ remember in each of these functions
we need the curly brackets and what I'm
gonna say in a just current manner is
current mana plus equals plus and then
equals and then whatever value we've put
in here so that means that when we do
something to adjust the manner we can
actually call this function and just put
a number into a so we put minus
2002-2003 we just pop positive 20 it'll
add to the and to the manner should I
say and it makes easier for reference it
another script and similar with a just
current health we're gonna say current
health plus equals the air DJ for this
this is where we're going to start doing
the more complicated stuff so here we're
going to say if current health is
greater than or equal to max' health
then or at the two curly brackets um
we're gonna say current health is set is
equal to myself so that just means that
when we were just in health if we adjust
it beyond a certain point if we get
healed if the current health
so whatever the month we have on the
left is more than number having the
right which is set to 100 if it ever
gets more than that will set the health
so whatever maximum health is just so we
can't ever go any higher and similarly
if we don't want to go the other way I
so will say if current health is greater
than or equal to zero and then we'll
close the bracket and we athlete to
curly brackets will say current health
is equal to zero start in the other
senses if ever goes to or past zero will
set the current health to zero because
we never want to go any lower I saw that
sort of care for now we've done those
two functions that we needed to do and
we've done the on GUI now this is the
bit that we're gonna have to start doing
right in the up dem and it's probably
gonna get him a little bit confusing so
to start off I want to add a private
variable at the top and call that C hich
Marta and set that to us type the
character Marta and then we're gonna
write in our start function c h Marta
equals getcomponent
character Marta we're going to scholars
that openpaas semicolon and we'll save
that out so that just means that we're
going to be able to change our FPS
control values because we want to be
able to sprint and slow down and switch
when we're moving so under here what I'm
gonna write is I'm just gonna make a
little note here so we're gonna put mana
control section and we're just going
put a star in the brackets this just so
you can see what's going on and then
right here
normal mana regeneration so what we're
gonna say here is if current
mana is greater than or equal to zero
and then we'll add the curly brackets
and so that current mana plus equals
time dot delta time which means if the
curl I forgot to put a bracket there so
if current mana is greater than or equal
to zero it will start regenerating and
counting up and then we're gonna say
here is we're gonna say don't let mana
we've got up above 100 and then we'll
say if current mana is greater than or
equal to max mana then with the curly
brackets will say current Moana is equal
to max mana so again like we did Bill
bill on here because the reason we're
doing it up there for mana is cuz man is
always changing whereas health is not
going to regenerate in this instance if
you wanted it to regenerate you could do
it similar to this and you'd have to add
it's the update function but here is if
the current manner ever reaches the max
mana we'll just set it to the correct
value and below here we want to say one
spot a new line break in there I once
said if mana reaches zero never go below
then what say if current mana is less
than or equal to zero at the curly
brackets we want to say current mana is
equal to zero and from here now this is
one we won't do something once which
they do a spell that do something
anything that you want to do but for
first simple sake all set if import dot
get ki down get key down of them
brackets F clause and applause the two
brackets will say adjust current manner
and then we'll put in brackets minus
twenty close that up and put a semicolon
and that just means as I said before if
we press F we're gonna adjust the
current manner with whatever value we
gave to it so minus twenty will take -
20 minor off so that's it done for the
manner
so if we say Val what all do and when I
look back at my script I don't know why
but on my function at huck simply put
semicolons and the end of these they
don't need them so you won't say Val
open unity buccal and also remember when
we start this script in JavaScript and
if we go back in to unity and we press
play you can see that you know
everything's normal
now we press F you'll see that when we
press it well it'll take 20 off and when
we not do anything it just the manner
slowly regenerates
so as you could tell that when we
pressed f4 we actually got the minus 20
but say you wanted the mana to
regenerate faster what you can do is do
the time.deltatime
and times it by a certain amount so if I
times it by 2 it will regenerate twice
as quick and times it by 4 6 8 whatever
you want doesn't really matter the more
you do them faster will be now onto this
of salmon a section and this is where
I'll start getting a little bit more
confusing so if I just tag this as Stumm
in a control section with a star and
then backslash and what I'll do is I
will say what we're gonna do is set but
add another coordinate and say set and
find character controller because what
we're going to have to do is actually
find the character controller so we can
work with the actual character
controller which is the rigid body which
we can detect whether we've moved on not
so what we're gonna do is say variable
controller call on character controller
what we'll say is equals getcomponent
then open brackets character controller
close brackets semicolon up and then
what we'll do we'll write another note
and say then we'll say if you're moving
and pressing shift and then speed up and
take from stamina bar so what we're
going to say is if controller that we
set up here dot velocity dot magnitude
is greater than zero mo / and and and
and input dot get key open brackets key
code dot left shift close to brackets
then we'll say it by adding two curly
brackets will say current stamina -
equals time dot delta time timed by ten
semicolons that just means if we're
actually moving and then we'll say I've
been pressing the input which is the
left ship's or moving and pressing shift
at the same time
stamina will decrease what
say is like above we set a private
variable called CH martyr for the
character martyr and that will change
natural speed at which we move so or say
CH martyr dot movement dot max forward
speed is equal to ten and then we'll
copy this same line and say the same
thing but we'll change this to max side
what is speed and set it to equal to ten
and that's okay for that but then below
that we're gonna actually put another
knot and say if not pressing anything
then normal movement speed or we'll say
else then we're like two curly brackets
and say so in the else will copy these
two lines here just needing the mountain
we'll put six and six because that's the
normal value that we set and then we're
gonna put another note and say stamina
regeneration and then what gonna say is
here if controller dot velocity don't
magnitude so this again he's set to zero
and two ones open the bracket current
stamina is greater than or equal to zero
close the two brackets then what we'll
do is we'll say that current stamina
plus equals time dot delta time times
two so what we're doing there is if
there can philosophize eros or naturally
moving and current stamina is greater
than zero
we're actually gonna increase or
regenerate stamina
then we're gonna add a couple more
things and say that I'm no saint
if stamina the generation set to 100
never got past that amount so we'll say
if current stamina is greater than or
equal to max stamina then we'll say
current stamina hope stamina is equal to
max stamina and then we'll add another
no I'm saying that if got to zero then
set to zero I will say if current
stamina is less than or equal to zero
close the bracket then we'll say current
stamina is equal to zero
I'll get rid of just these line breaks
and we'll have to actually add one thing
in between here so in between what we
added we're gonna say if moving pressing
shift and stamina is zero then you
cannot sprint so we'll set if controller
like beautiful velocity delt magnitude
is greater than zero and import dot get
key open brackets key code
dot left shift
close that brackets and we say and
current stamina is less than or equal to
zero then we're also gonna do these two
same lines so if we copy this pass those
in so we'll say if control if the
velocity so if your characters is moving
yeah in Yahoo you are pressing the left
shift and your stamina is zero then
you're just going to move at normal
speed because you can't spin because
you've run out but we'll do is save this
and go back into unity and when we run
the script now and notice that
everything is normal we can move we
press F so playing with Cassie to spell
or something like that you'll notice
that it starts generating now when we
move for a moving at normal speed now if
I hold shift like I'm doing now you will
see that movement speed increased and
the stamina is going down say I let go
of shift which I'm going to do now and
I'm moving that's just normal speed what
I can do is let go of everything stop
moving
stamina regenerates now if I start
moving hold sprint you'll notice that
when it reaches zero we'd go a normal
speed and we have to wait for the
stamina to regenerate again and then
I'll employ this and what I'll do is
quickly run through the whole thing
again so I've got all my variables
wooden which is the current amount of
moon that is max about 4 health mana and
stamina I've got the length of the bars
I'm referencing the character murder
here and then I need the star I'm
setting the length of what I want if you
create if you actually change this and
division by a heat to something like
division by 10 you'll notice that the
bars at the top will get smaller so it's
depending on what you like then we're
setting the component that we want to
find and in the update we can adjust the
health and mana depend
on what we want to do and then we'll say
in the magic money regeneration
if your current manner is greater than
zero then you will generate if current
mana is more than max so he's more than
this current max amount it will always
be set to the max amount so it can't go
above if you current mana it's less than
zero then it's set to zero so can't go
anywhere below if you press f you using
up mana then for stamina regeneration
we're just getting the character control
a Collider which is acting as a rigid
body so we can detect the actual if
we're moving or not so it detects if we
move in I'm pressing shift we're gonna
lose stamina a rare you can turn this
down so you can get rid of the x in by
that just makes it deplete faster and
then we're going to set the martyr speed
something faster so we can sprint if
we're not doing anything pressing any of
the buttons are whatever we'll just set
normal speed if we're actually not
moving and stamina is bought up but
above zero then we'll regenerate at a
certain rate you can set that number to
higher so now if we're moving we're
pressing shift and stamina is less than
zero we can't sprint anymore if stamina
like above if it is greater than the max
amount then we'll set it to maximum so
it can't get any higher and that got
below up these what we set for the GUI
so we could see everything going on in
here we've just got the function and
we'll managing the same things here but
we don't need to check this every frame
because we're only up there in the
health and search when we need to and
then we can adjust mana here if we did
it in a different script so that's that
for now now you may want to do something
so you may want to actually create some
objects which actually hurt and heal so
if I career and a script called heal
JavaScript and I create another script
called damage
what I'm gonna do is open heel and open
damage you can skip this part of the
video if you don't want to see it but
what I'm gonna do is actually get rid of
these two function for heel and I'll
write function on trigger enter open
brackets right call set column and it's
a Collider at curly brackets and say
variable GUI GUI
manager : as GUI manager and set equals
game object with two capitals dot find
and then you put in here first-person
controller close that up and say dot get
component open up and then what's a GUI
manager close the brackets and such and
then wall said GUI manager dot adjust
current health and we'll say this one's
heal so we'll put positive twenty and
then we'll say destroy open brackets
lowercase G for game Papa kiss for
object I'm all set about then what we'll
do for the damage will put the same
thing in but we'll say this time we'll
put minus twenty or save that say of
that so what this means is it finds the
script that we're looking for in the
first person control of the GUI manager
and then we're going to say it like
before in the GUI manager the adjust
current health and then it adjusts it
accordingly so it's doing adjusted by
positive 20 so what we'll do is go back
into unity
and you'll notice that I missed out of
tea in here so if I just add a tea and
tea and I'll just save these scripts
back into unity and while do is my red
box will be my damage and my green box
will be my heal and then make sure that
the set boss set is trigger we'll play
the game and you realize that when we
walk into the damage you'll notice that
I took 20 points of damage we can cast
some spells just while we're here and
then if I walk into my green box you'll
see we got health back and we actually
destroyed the objects when we'd use them
so there was my tutorial bit of a long
one and a bit complicated in some ways
but it shows you how to create a health
mana stamina system so you can sprint so
you can take health take damage and you
can change these scripts for um enemies
attacking you explosions bullets hitting
anything like that or mana you could
cast a particle effect that then hits an
enemy and does damage to them but this
is just a way of controlling your health
on GUI and doing stuff with it so thanks
very much for watching and if you like
tutorial as ever don't forget to Like
comment and subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>