<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating a Survival Game in Unity: Part 13b - Hunting / Trapping Animals | Coder Coacher - Coaching Coders</title><meta content="Creating a Survival Game in Unity: Part 13b - Hunting / Trapping Animals - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating a Survival Game in Unity: Part 13b - Hunting / Trapping Animals</b></h2><h5 class="post__date">2015-05-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/joNULSRZWe4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to part 13b of the
Survival Series tutorials now this is
going to be a continuation from the last
one that we made and we were creating or
instantiating a bear trap or a trap that
we could use to trap animals now I said
in this video what we're going to do is
be able to control the randomization of
possibly being able to catch an animal
and then once we catch the animal I'll
do whatever and we can then collect it
and add the whatever it is to the
inventory so say we catch the animal and
it adds 10 food to the infantry and
that's what it's going to do and then
it's going to get rid of the object
accordingly it's going to swap out the
objects depending on if you catch
something or if your trap is destroyed
say there's a chance that you could
catch something or there's a chance that
the animal could get away and you trap
could be just useless so let's get
started really and there's going to be
one script and a couple more assets to
import today now with the I made a
crafting folder and I use the
miscellaneous folder to add some stuff
now this time I'm going to add a
right-click and I'm going to import a
new asset and I'm going to import bear
trap Brock and FBX and you can see it
there smelly quick you know mock up with
the model to show that it's broken you
can obviously change these if you don't
like it or use a model so it's more
independent then we're going to import
the bear trap cart and this is just
going to signify that all up we've got
something within the trap obviously you
can have your own animal models anything
like that for the sake of visual and the
sake of ease for these tutorials I'm
just giving you this and you can get
these off my website so now we've
imported those what we want to check is
the previous bear trap we scaled it up
to not point not three or four whatever
you need for your scene what I'm going
to do is scale the other two up to not
point not three as well and once we've
done that what we're going to do is open
up the prefabs folder
where you've got the trap prefab now
we're going to do a few things to this
in itself what I'll do is we'll bring
this in and we'll just bring it into the
scene so we can see it now right now
it's got a Collider on now this Collider
is going to be used as our trigger so
well if we've caught something we're
going to be able to walk into the
trigger and then it'll add to the
inventory now what we're going to do is
we're going to make the if you can see
the box Collider
bring it up a little bit and we're going
to scale it down almost to the bottom so
that's big enough for our player to walk
into now from there what I'm going to do
is I'm going to go a game object create
or the cube or however and you're going
to want to create a cube what we do is
I'm going to put it at the very base of
the trap itself and what I'll do is I'll
scale it up and then I'll scale it back
down so we make a thin little box and
it's going to act as a Collider so it
doesn't fall through the fly it can be
pretty thin and we'll just place it
underneath our object and if we need to
we can just scale it out so encapsulates
the whole thing so that'll be fine
we can get rid of the mesh renderer so
now you can just see it underneath our
object and what I'm going to do is I'm
going to call this trap Collider what
we're going to do is we're going to pair
and trap Collider to the trap prefab so
that's there that is all well and good
and you can see on the trap free for
particulate we can still see the big
Collider that we're going to need and
then what we're going to do is I'm going
to bring in the broken trap and what I'm
going to do is we could select the trap
prefab and set the position to zero zero
zero if we were starting this afresh and
would be able to get them all exactly
perfect but I'm just going to select the
entire object and just roughly place it
where the other one is so we don't get
any particular problems there that one's
here and then the cart one is roughly
that will do now what I'll do is I'll
add both of the
parent those two the trap prefab again
and then what I'm going to do is on the
trap prefab on the hierarchy I'm going
to click apply at the top so I'll put
the top corner here hit apply and you'll
notice that if I close my miscellaneous
folder I got a trap prefab now you'll
notice that it updated within my project
so now we've got the trap Collider we've
got the two objects that we may or may
not want for now so what I'm going to do
is I'm going to make sure that the two
FBX is that imported I'm going to
uncheck them so they're not visible and
then we'll hit apply again on the main
prefab hit apply and then you can see in
your project panel you can see that they
are on ticked and they're not active at
the minute so first of all we'll go to
our scripts folder in the crafting and
we're going to write a new script folder
right click create new java script and
we'll call this trap controller and now
we'll open that up in monodevelop
and we're going to start writing the
script which is going to control what
the trap needs to do and I'll explain it
as we go along so I'll delete the two
starting functions and then below here
what we'll see is variable timer as
float equal to thirty point o with a
semicolon now you can change this index
inspector if you need to so you can
change it to whatever time you might
want it to be you might want to wait two
minutes five minutes five seconds but we
can change that later on we're going to
have a variable all might have a private
variable called count down type boolean
equal to true now with these variables
we could have them all to just get rid
of the public at the beginning and then
we can be able to see them in the
inspector if we need to change them but
for this we'll keep that like that we'll
have a variable called player as that's
how that is typed game object a variable
called kart model
this type game object variable broken
model as type game object also with a
semicolon now we're going to start
writing the things that we need for our
array and in a rare is something that we
can give a list of objects to or a list
of values and then I'm going to want to
strategically say to it out of these
values I've given you I want you to find
a random one based on whatever we've
added so we've got a variable called
choices and have that as type integer
then two square brackets to indicate the
array and then inside that will set
equals then another two square brackets
will say one comma two then we'll add a
semicolon so what this means is in the
choices array that we're going to create
we're going to have a choice of one or
two one's going to signify that we've
caught something two is going to signify
that we haven't and you could obviously
add more if you really wanted so three
couldn't mean you've caught a bear far
could mean you've caught a rabbit five
could meet you've got something else but
they're really up to you to go with
whatever you are trying to create now
we're going to have a variable called
result and have that also as type
integer with a semicolon then we're
going to have a variable called has
chosen as type boolean equal to false
and then a variable has caught type
boolean equal to false again okay so
we'll start writing everything that we
need to write so I'm going to start by
writing function start two brackets than
two curly brackets below let's say
player equals game object dot find open
brackets in quotes first person
controller close that up and add a
semicolon and then that's okay for now
so that's just going to set our variable
here to find the first person
now this is a little bit of slowing so
if you wanted to you could add this
yourself in the inspector later on like
we've done further down in the tutorials
then we're going to write function
update to brackets two curly brackets
below then I'm going to say that if
count down close that up so what this is
doing it's saying if this private
variable count down if true which it is
then we're going to say timer minus
equals time dot delta time so what this
means is the timer will count down
according to the delta time or the frame
rate that we've got in our camera then
we'll want to say is if timer is less
than or equal to zero and and we'll say
exclamation mark has chosen add the
bracket afterwards then two curly
brackets below and we'll add and we'll
create a new function called choose
number two brackets in a semicolon then
we'll say count down equals false with
the semicolon so what we're doing here
is we're going to count down until we
reach a bit a specific value and then
here we'll say that if the timer reaches
zero and and has and it has to be zero
and and has chosen is equal to false
like it is now because if it's anything
else that we need to be it will make
sure that we can run down anymore we'll
choose a number and then we'll say that
countdown is equal to false so if
countdown is then equal to false so if
count down there is equal to false it
will not count down anymore because we
don't want it to I want it to stop once
it's reached zero then what we're going
to do it
is that under here under the update
function we're going to create another
function called choose number like
without their two brackets two curly
brackets below then we're going to set
variable so this is going to be a
variable specific to its own function so
we don't need to worry about declaring
at the top I'm going to call this
variable how many things and have that
as type integer set that equal to
choices dot length with a semicolon then
we're going to have a couple of line
breaks we're going to say another
variable called my random index as
integer with a semicolon now my random
index equals random dot range open
brackets 0 comma how many things with a
bracket and a semicolon then we'll say
result equals equals choices add two
square brackets and the square bracket
will write my random index with the
semicolon then we're going to say that
has chosen is equal to true so I'll
explain here so if the timer equals zero
and we haven't chosen a value yet we're
going to call function and choose number
now new function nu number creates a
variable called how many things and it's
going to look at the length of choices
so we've got a length of two because
we've got two items that we added here
now in the index we're going to create
an index and we're going to look at our
we're going to create a number that
chooses a random range chooses a random
value from what you've given so from
zero to how many things we've got so
we've got zero to two so we've got two
items in there and we're going to say
the result variable what we've got up
here
is the choices that we have so the
choice is out one and two and then of
how many spaces that we had in our array
that we made so it will either output
one oil output two then we're going to
say that has chosen is now equal to true
so if has chosen is now or equal to true
we won the update function 1 then choose
another number because we only wanted to
choose one number one time I would do it
forever
and it would mess up the game now what
we're going to do now is have up here
back in the update function will say
that if result is equal to one and and
exclamation mark has caught close the
brackets two curly brackets below then
we'll have another variable called oops
called cart animal two brackets and a
semicolon so that's all well and good
for that them under there we'll set else
if result is equal to two and and
exclamation mark has caught close that
up add two curly brackets below destroy
trap with a two brackets in a semicolon
so that's all well and good for there so
now we need to create those two
functions so we need a function called
cart animal two brackets two curly
brackets below and in there what we're
going to say is this dot game object dot
getcomponent open brackets mesh renderer
dot enabled equals false so what we're
saying here is we'll look we're just
going to find the game object this
script is on so it's a trap prefab I'm
going to say it's mesh render so we
can't see it's mesh anymore because
we're going to want it you know use the
other mesh that we've added then we'll
say car model dots active in brackets
true with a semicolon so now we want to
enable the other
object that we've got because we've
actually caught something then what we
want to do is save this start game
object dot getcomponent
open brackets and now this time box
Collider and then said dot is trigger is
equal to true now because to do a
trigger enter or to collect the items
that we need to once it's done we need
to be able to do that so if we set it to
his trigger a Collider will be able to
walk into it and do something with it
and then what we'll say is in there
we'll say has caught is equal to true so
then if that is the case it will do the
opposite in here it will check this
boolean and see oh we've caught
something so now I don't want to do any
of these two again because we don't want
to be able to you know show and hide
loads of objects and stuff oil mess up
once again so like before we'll set up a
function called destroy trap two
brackets two curly brackets below then
we'll save this dot game object don't
get component oops
open brackets mesh renderer close that
up dot enabled equals false like we did
at the top so we're going to hide the
initial trap object then we're going to
say broke and model dot set active is
true with semicolon then for this one
we're going to say again has cart is
equal to true because this one is not
we're not going to activate the collider
because we're not going to be able to
collect anything now there's one last
function we're going to create and that
is the ontriggerenter so we're going to
write a function on trigger enter open
brackets call call on collider plus it
up add two curly brackets below and
we'll say that if call dot tag
our cold doc compared tag actually in
brackets and in quarts player close
those two up at the end then add two
curly brackets below them and say that
player dot getcomponent urban brackets
inventory with a capital as long as
that's what your infantry scripts called
dot fish
we should really name that to meet our
food to make easier book dot fish for
now plus an equals 10 then we'll say
this dot get component box Collider dot
is trigger is equal to false and then
we'll set this dot game object dots
active false now I've only added in that
top line there just to make sure that it
sets it to false straight where before
we disable the full object if we go back
to unity now and go on to our prefabs
and the prefab is called trap prefab as
you know and we're going to add trap
controller to that and then I'll close
up the scripts folder you can see on
there on in the game it's updated as
long as we update it our pre fell on the
right on the project then on the trap
prefab what we're going to do is we're
going to add to the broken model so here
then we're going to add the cart model
and you can see that in our choices
array we've got one and two we've got a
size of two we've got one and two the
result here that we can show you can
obviously hide these variables by making
them private we have has car and has
chosen we've got a timer so if I set
this timer to two for the sake of this
and I will delete that out of here I
will play them again and we'll pretend
that we're playing it properly now I'm
going to craft myself a trap and I'm
going to place it I'm going to see that
after two seconds this
time we managed to be able to catch the
item and now if you check my inventory
I've got no fish at the moment and then
what we're going to do is going to be
able to walk into it nothing happened
there because my player wasn't tagged
play six select your FPS controller and
make sure it's tags player some reason I
don't know why that's happened but we'll
test again only to make sure that we're
inside you'll notice that up this time
Ede got broken so we can't actually do
anything with it
now this time if we walk into the object
you'll notice that I've walked into it's
disappeared and if we check the
inventory we've got now a ten fish so
all in all things that you've got to
remember for this is we've got the
prefab that we started with we've got
the collider underneath it to make sure
it doesn't fall through we've got one
Collider on it which we're going to set
to is trigger when we need to we've got
two other objects that we added to our
prefab to make sure that we enable
disable to look like all we've caught
something or we haven't then we've got
one script which I'll quickly whizz
through that we've got our selection of
variables at the top we find the player
depending on its name we start to count
down as long as we can do that by the
boolean we'll say that if the timer
equals zero and we haven't chosen a
number yet we're going to call the
function choose number and set countdown
to false so we can't count down anymore
so it stops where it is when we go to
choose number or set the a rare length
will show that how many items we've got
the choices which is of two we'll find
the length of that which is a value of
two we've got the index that we're going
to find and we're going to set that a
random number between zero and how many
items we've got which is two the result
will be between one and two and then one
set has chosen equals true so now that
has chosen equals true we can choose a
number again so then we'll say that or
if it's result one or if it's result two
will say that is result one as a result
to have we caught anything no we haven't
we'll leave the catcher animal or
destroy the trap then we'll disable the
mesh render in both cases activate the
object in both cases if it's one or the
other then well if we've caught animal
will activate the Box collide it or the
box clatters is trigger component so
then we can walk into it and if that's
the case we've got this function here
which is on trigger into it if the
player enters that will find the
infantry script which is on the play and
sir
I intend to that and then we'll set the
trigger to false and disable the entire
object now he you could in this destroy
trap you could have a yield and wait for
five seconds
then destroy it or something like that
book just for visual sake we're showing
that it all works and it all works
nicely so realistically that's just a
simple way of adding yourself some new
traps and components are a basic where
to justify catching animals and things
like that in a bear sort of element so
again thanks very much for watching
don't forget to Like comment and
subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>