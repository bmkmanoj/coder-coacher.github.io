<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Unity3D] Creating under water caustics In Unity3D | Coder Coacher - Coaching Coders</title><meta content="[Unity3D] Creating under water caustics In Unity3D - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Unity3D] Creating under water caustics In Unity3D</b></h2><h5 class="post__date">2013-09-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GHYUJO8P4_Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so today I've got a new
tutorial for you and this is about oh
it's going to extend my underwater set
of tutorials now somebody asked me a
while ago to do if we could do like
underwater coup sticks and that sort of
represents the light which shines at the
bottom of sometimes when you see it in
on the sea on the floor I'll give you an
example if I open up this program that
we're going to use acoustic generator
now if I just adjust this actual depth
so if I you just click art I'll render
on on this and then I choose that but
you can see the sort of the fact that it
gives and it just sort of the reflection
from under the water which you get
sometimes on the floor maybe in the
bottom of a swimming pool that you'd see
but that's going to be what I'm going to
be showing you today and it's going to
be showing you how to make so getting a
set of images which will be projected
underneath your actual sort of them you
know water plane that you've got
anything so this can be a way to add a
little bit more depth to you see now
this is only going to be a sort of base
to what you can do because the
projectors needs a bit of playing around
to get the settings that you like so you
might not go right first I might not
make it not get it right in the video
but it's just about playing around with
it so first of all what you want to do
is you want to go to this website on
here and it's called acoustics generator
so it's Joule hi SC /qu Stix
now what you can do is I'll leave a link
to this in description what you want to
do is go all the way to the bottom and
you can download acoustics generator
3.84 winders so once you've actually got
that generator and you want to install
it in just on your computer then when
you open it up you'll get this you'll
have to agree to a license if that
doesn't matter that's alright because
it's free and um
what we want to do is one church legal
come on this program in each frame we
want to change it to 512 so because the
free version of this program only gives
it 512 by 512 pixels that's as big as
texture we can get so if you bought the
other version you could get in something
more and make sure you take art I'll end
up at the top so you can see what you're
doing so all we do is click on one frame
we click art over and remove the depth
to a certain amount and then what we'll
do is well you can actually change your
background color to the actual color
that you'll see you know under the water
and then what you can actually do is
then click frame to just move it a
little bit and keep doing that for each
frame until you've done 50 and then what
you'll notice if I actually just move
down you'll see the sort of displacement
that you get on the maps so all you need
to do is do you know as I say about 15
different ones you can change all the
different settings to see what you might
you know like on your room maps
whether it's intense how much the depth
is and all this so all you want to do is
do about 15 once you've got to 15 you
click render animation and then it'll
just save it to wherever you want uq6 to
render to and when you've got that
folder you can close that down and you
can just import that fold it into unity
and I've got all my cout sticks here so
you can see them there so they just vary
they just differ I've got 16 because I
did that earlier and that's pretty easy
to do so once you've actually putting
them in you're going to have to bring in
a projector into unity so when we go
into unity we need the standard a sex
pack so if we right click if you don't
already have it press import and choose
projectors then when you've got your
projectors you can open projectors and
you'll get two types of projector
prefabs so then you can import your
projector in and you'll notice that you
know we can just move it around in the
scene and have it up and down and things
are them we don't really need to change
much on it now we actually need to
create
script which lets you you know use your
actual acoustic generated images what
we're going to do is right-click sikri
I'm going to create a c-sharp file this
time because I actually found this
script online for helping with this
because it's easier to do when C sharps
what we're going to do is we want to
create this called animated projector
and then we'll open up in monodevelop
make sure you name it that and then what
I'm going to do is I'm just going to
delete go ahead to leave those two here
and just need to leave you two curly
brackets there we're going to write
public float FPS equals 30 point or F
with a semicolon then public texture 2d
and then we're going to put two square
brackets and then we're going to write
frames with the semicolon so there we're
going to do an actual and a rare I'm
going to say private integer frame index
with a semicolon we're also going to say
private projector as type projector and
then what we're going to do inside here
will say void oops
void start with two brackets and then
we'll add two curly brackets under there
and I'll say projector with a lower case
equals getcomponent and then we'll put
two triangular side brackets I'm not
sure what the cold offers up there and
then what type projector with a capital
and then we'll use two brackets at the
end and a semicolon then under there
we'll say next frame with two brackets
and a semicolon so that's going to be
our new function then I'll write in
Volk repeating in brackets open you
similar be quartz and say next frame and
then close the speech marks comma one
then have a slash backslash FPS comma
one
backslash fps close that I'd you
semicolon and then we'll go underneath
those two kala brackets and write void
next frame add the two brackets than
Educare Lee brackets and then write
projector in lower case dot material dot
set texture open brackets then
quotations then you want to do
underscore shadow Tex and then put the
quartz in there comma frames in lower
case and then what we're going to do is
add two square brackets and inside there
will write frame index and then we'll
put the bracket on the end and put a
semicolon and then under there we're
going to write frame index equals open
brackets frame index plus one plus the
brackets then we'll put % and save
frames dot length semicolon and then
we'll save that out so what this does it
just it finds the projector that we're
looking for and then this is at the
start of the function so we'll find the
projector that we're looking for then it
will find the next frame straight away
so every next frame that it finds it'll
set a different texture depending on the
index and the index adds one for every
FPS that we go through so if we minimize
that and what we can do is go to this
projector and we can add the script to
our projector and then what we can do
here is add how many images was that
we've actually got in our KU sticks of
yours you'd be 15 or how many of us at
and then what we do
we can add each of our images on each of
these different lines I'll just pause
this and speed this up so you don't have
to see me do and once you've had all the
images what you can do is you can press
play once and take it off again and your
actual light material textures will have
changed for your projector and what you
can actually do is you can move your
projector up and down in the water so
what you do is if you have it too high
or project it on top of the water now if
you have it underneath the water you'll
see a small length square so if I move
this about you'll see it move and if you
place it in a particular place you will
actually get it so if I jump into the
water now I'll jump into the water here
and my fogs on a little bit high in my
script
I'll show you how to change that but you
see now when you go underwater although
it's not the greatest effect ever you
can change this by you know making your
textures different colors and obviously
reducing the actual fog that's in the
water but instead of is actually having
you know no apparent KU sticks in the
water we get something that has that
sort of you know very effect now what we
can do is to make this actually follow
the player now what you can do is you
can actually get this light projector
and get it to follow the player but the
problem is if you do that and you jump
in the water you'll notice the player
actually I mean um kou stick actually
just Gotham's of the the Flass or what
you'll need to do is going to make sure
that it's as high as you player to begin
with so then when you play a jumps in
you'll notice the change now you'll you
think to yourself well that's going to
reflect on the water but we actually
need to change the script that we've got
in our on our first-person controller
from it from the other tutorials so if
you go to the underwater script what
we're going to do is we're going to
actually do something within this script
so in start we're going to say game
object and this is a java script this
time find
open brackets course and then we'll say
whatever you have you run projectors
made are called and we'll say blob light
projector you can remember this of
course and then we'll say getcomponent
open brackets projector close that
bracket that enabled equals false so at
the beginning of the actual game or the
actual scene it's false because you
don't want to see it project anything
and then we wants it when it's normal so
when you normally book the water it's
false and then we'll aren't we answered
to do when we go underwater
we'll set equal to true and then you can
also remember that you can change your
actual fog distances so if I change it
to that point not 8:00 and then that we
jump in the water this time you'll
notice there is no projector at the
moment until I jump into the water then
you'll notice that this effect actually
starts up but the only problem with this
it is a little bit and it could see a
little bit dodgy when you moving your
camera a certain way but it's something
you might want to mess around with
yourself but I'm just showing you you
know what sort of effect you can achieve
within unity just making a simple you
know cou stick on the floor and you can
actually see some reflection from the
surface maybe if your water isn't
actually too high so that was pretty
much it for doing it what you want to do
is you just want to mess around with the
settings in the light projector if it's
not projects on the place you want just
move it about you see and try and get
things to work if it doesn't leave me a
message I'll try and work out but this
is just a start for everybody to see how
you can now you can add a bit more depth
to your underwater scenes and thanks
very much
and if you liked the tutorial as ever
don't forget to Like comment and
subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>