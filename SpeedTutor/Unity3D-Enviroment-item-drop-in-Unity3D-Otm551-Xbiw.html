<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Unity3D] Enviroment item drop in Unity3D | Coder Coacher - Coaching Coders</title><meta content="[Unity3D] Enviroment item drop in Unity3D - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Unity3D] Enviroment item drop in Unity3D</b></h2><h5 class="post__date">2013-10-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Otm551-Xbiw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so I've got another tutorial
today and this is gonna be about
creating something where you may have a
tree in you you know you could have a
weapon your hand or an axe or something
and you hit a tree or something like
that and then items dropped from the
tree I suppose it could be something we
could almost swear I'd say it was
something from Minecraft but maybe will
lay itself towards if you create a
survival game so when you hit the tree
you know something falls off like an
apple so what I've got in my scene is
I've got my first-person controller all
my first-person controller has this time
is it's got an axe
you know I modeled it really really
quickly because it was only just to show
you know a visual element to something
and I've got a tree in my scene which I
created with the tree creator and all
that's got on it if it doesn't already
isn't it needs a Collider so if you want
a box Collider too and just make it so
we actually encapsulate the assault
trunk of the tree and that's all you
need for that and then what you want to
do is you want to actually create a
prefab so a prefab we're gonna happen or
something you want to drop off the tree
so what all my Apple is is just a sphere
that I made in unity to create over
sphere and then I added a rigidbody to
it and made sure it had a Collider on it
and just handed a red color and then all
I did was right-click here
career them prefab named Apple and
dragged it from this side onto here to
make prefab suck you know drag it out as
many times as I want and it keeps all my
elements that I was after so
realistically we'll get straight into
creating the scripts for this because
we're gonna use a simple bit of rare
casting so rare custom just means it you
know it detects the distance the you are
aware from a certain point which is
forward from the actual position so what
we're going to do is we're going to
create a script and we're going to call
this
hits tree and then we're actually gonna
create another script and call this tree
script so we'll open up hit tree and I
lost love but not tree script as well so
whilst we run hit tree we'll just delete
these two functions for now because we
don't need them well for now anyway then
we're going to create a variable called
tree hit set as integer equal to 25
variable distance as type float and then
variable mucks distance as type float
equal to 1.5 just make sure that's such
a lower case just for this then I'll say
it will also function update to brackets
then add two curly brackets right in the
if input dot get button down open
brackets in quotes fire 1 which means
left click then we'll add two brackets
add two curly brackets and say variable
hit call on rare cast hit and then put
semicolon then we'll say if physics dot
rare cast open brackets transform dot
position comma transform dark transform
Direction open brackets vector three dot
forward close the bracket comma right
hit and then add two brackets the end of
that and then under there we'll say
distance equals hit dot
distance watch they have that as a
lowercase make sure I keep everything
consistent make sure the semicolon and
then say if distance it's less than max
distance close that then I like to curly
brackets and say hit dot transform dot
send message open brackets quartz and
then we're gonna actually quartz in here
one function in the other scripts gonna
be cold so I'll call it tree hit and
then close that up comma and then write
a lowercase tree hit because that's
gonna be what damage we're playing up
here then comma send message oops
make sure it's send message options dark
don't require receiver close brackets
add a semicolon and then under there we
need to make sure we under when he to
make sure to add a curly bracket facing
they want the last one that we put and
also another that's facing passing the
actual same way so we'll just sort of
add these in there and make sure that
this curly bracket here is facing the
same way as the first one so you can see
if you click on each of the curly
brackets that matches up with this one
and that'll match it with that one and
that much zone at the top and we'll
click Save there so we've actually got
this working now so what this will mean
is that we've got a hit so every time we
hit the tree we're going to do 25 points
of damage it's got a variable foot so
the distance at which we are from it and
then a max distance so it will tell us
and let us hit it from a certain
distance away so if your to find where
you want hit
so it's gonna say that if you press left
click then we're going to put a rare
cast forward from the your characters
position and then if the distance that
when you've collect is equal to the hit
distance so the distance at which you
clicked from and then if the distance of
which you clicked is less than the max
distance so if you could in range then
we're going to send the message to the
script
to do the damage that we want to do so
in the other script we'll take away
these two and then more so variable tree
health call call on integer equals 100
and then I'll say variable Apple as type
transform variable tree as type
transform we're going to try and spawn
some objects then we're going to say
function tree hit with capitals like we
wrote in the other script and then tree
hit with one lower case that I'm gonna
say integer close that off and two curly
brackets here and we'll say tree health
minus equals tree hit so that just means
that as soon as we call this function
we're going to take away 25 from natural
tree health then we're going to write
under here that if tree health is less
than or equal to 25 there are two curly
brackets and say variable position call
on vector 3 equals vector
three open brackets random-dot range
open brackets minus 10.0 common mind
10.0 close the brackets put a comma but
0 comma random range open brackets minus
10 point 0 comma 10.0 close the two
brackets add a semicolon then we'll say
instantiate and I missed out at t
actually spelling sonship poplar then
we'll add a bracket and put a right
apple comma tree dot transform dot
position plus vector 3 in brackets comma
0 comma 20 comma 0 close the brackets
then we'll say plus position comma
quaternion dot identity close without
semicolon then we're gonna finally write
then free health is equal to 100 atoms
so what this actually means now is if we
save this out and so we're gonna say
that if in this script we managed to be
in the range we're gonna call the
function in this script and what this
does is every time we actually here will
take damage from the tree so it'll take
25 for each time if the tree health ever
reaches 25 so after three hits also
we're gonna create a variable called
position and what position does here is
it creates a random range between minus
10 and 10 across the x-axis and actually
will spawn the items will actually
create a random position based on these
random ranges so from negative 10 to
positive 10 so around the world and then
what we're going to do we're going to
say we're going to instantiate so I'm
going to create an apple at the trees
position
then 20 units above the tree which you
know so it's in the leaves of the tree
if you were gonna you know create for
the game and then plus the position that
we just created here so it would Korea
the Apple in the tree at the top of the
tree and then ten spaces around it and
then what we'll do is little set tree
health to 100 again so we can you know
carry on hitting the tree and spawning
more and more apples randomly around
well you know every time you hit it but
watch out because I forgot one quick
thing in here and that just means I
forgot a little bracket at the end so
make sure you save that out and we'll go
back into unity and what we'll do is we
will add on the first person control
will add tree hit so we'll leave a max
distance 1.5 and then we'll select our
tree and add the tree script to that now
what we need to do is actually add the
tree to the inspector here and then what
I want to do is add the Apple prefab to
that and then if I keep the tree
selected you'll notice that if I play
the game now take where the stats cuz
you don't need to see it you'll see that
you have to make sure that yourself in
the middle of your screen in the center
and when we're close enough you'll
notice they went to 75 over here then 50
then 25 and it went all the way to 100
and you'll see on this side that an
apple clone just spawned now you'll
notice when I click all the way from
over here the health doesn't change I
have to be in a certain range so if we
keep on just doing this load so we spawn
in a lot of different apples
this is just to show you that the you
know the fall from the actual tree
itself and the just fall in a random
location then you could you know pick up
the items and do whatever you want with
them so that just covers the basics of
doing a rare cast and you can use that
for a lot of different things with the
European inadar you know going through
trying to do from bullets anything like
that but this shows you basically have
you can instantiate objects in a random
position when you do something and make
it work you know as I say for a survival
game or something like that but I think
it could help a few people out so
hopefully you like this tutorial and as
ever if you if you did don't forget to
Like comment and subscribe thanks very
much Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>