<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>6. Survival Game Tutorial in Unity 5 - Eating/Drinking | Coder Coacher - Coaching Coders</title><meta content="6. Survival Game Tutorial in Unity 5 - Eating/Drinking - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/SpeedTutor/">SpeedTutor</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>6. Survival Game Tutorial in Unity 5 - Eating/Drinking</b></h2><h5 class="post__date">2017-05-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GrUn4AoBTKM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to part 6 of the
Survival Series in unity 5 and this is
going to be showing you how to take some
food water and health maybe pickups and
use them as consumables and we're going
to have a simple rare cast which will
let us see the items in front of us give
us a little UI to show what we might do
we'll create a script which will allow
us to change the different objects and
give them different names and specify
what the objects on what values are what
health our thirst values if it will give
us when we you know decide to pick it up
so I've got three boxes to start with
and I've just renamed them health water
and food and the different colors but
we'll go through as we start along with
this so from here these are the things
that we're going to want to click on and
we're going to want to affect the bars
that we created in our previous sort of
tutorial so what we can do straightaway
is right click in the project panel go
cria I'm going to choose c-sharp and
then we're going to choose a new name
and we can call this rare cast manager
it doesn't really matter you can choose
whatever you want but I like to keep it
like that so it's nice and organized you
can open that up and once you're in this
script we can get rid of the sort of
starting methods that it gives us all to
start afresh so realistically you know
what we're going to need to do so when
we do our rare cast we want to be able
to specify an object that we're looking
at but we don't want to hard-code in
what the object is we want to just find
it with whatever is in front of us at
the time so what we can do is we can
create a new private variable and have
this as a private game object and have
this as rare casted obj with a semicolon
and that's going to be the object that
we're going to find in front of the
camera then what I like to do is create
some headers just to make this nice and
organized so we can see it in the
inspector so if we write in square
brackets header then add two brackets
and two quotes and then now we can just
call this rare cast
settings so then in the inspector we can
see everything that's going on then
under there what we'll do is have two
more square brackets and write
serialized field and this just helps us
to show private variables in the
inspector so I'm going to write private
float array length and set that equal to
ten for now and what I like to do is I
just like to keep my sterilized fields
on the same line and sterilized field
just means that like I said that you can
see a private variable in the inspector
because we don't need things to be
public if we don't need to access them
from elsewhere now we're going to do the
same thing on another line so we need
two more square brackets and we can
write serialized field in it again then
we can have another private valuable and
have this set to layer mask and we can
create a new layer mask and we can call
this new layer mask you could member
whatever you want but this is just what
we're going to allow the rare cast to
find we only want to find items on a
specific layer so it helps us not have
any problems with other sort of objects
that might exist in the scene then under
here I'm going to add a new header in
square brackets so header brackets then
in here some quotes and we'll just use
call this references and then from there
we're going to do we're going to do two
square brackets do the sterilized field
again and have private
will have player vitals which is a
capital I went back into unity so you
can see that this is the play a vital
script that we created before so in this
variable that requesting we're
referencing the and object of the script
that we've got and we're just going to
name this player vitals with a lowercase
P this time and now what we're going to
do is we're going to want to create a
crosshair to go along with this so what
we can do is we can at the top say using
unity engine dot UI so we can get all
these things learn related to DUIs so
then we can have another serialized
field and have that spry the image of
the capital and have this lend as cross
and then similarly with here we're going
to have a Miller sterilized field and
have this is private and this time we're
going to have a text element and we're
going to name this item name text and
this is going to be the actual text name
for the items that we're going to have
and make them appear on the UI so once
we've got the basics of the things that
we're looking up we're going to go back
into unity again and then we're going to
create the things that we're looking for
so on the canvas that we previously had
we had a panel so on this compass we can
right-click the compass in the hierarchy
and go UI and choose text I'm going to
our canvas again right-click it UI and
image and from here we'll go in top
corner top left to the 2d view and we'll
select one of these objects just press F
to solve them zoom all the way out and
we can see the canvas here now on our
image this is going to be classed as our
crosshair and now we can actually change
the image that we want on the crosshair
so ivory on this side on the source
image click on that and you can select
lead one of the default icons which is a
knob and you can set the width and the
height maybe two twenty and twenty and
then we'll make sure that the anchor is
just in the middle and then we can click
on our text element and you can see that
we can drag this around wanting to do is
I'm just going to sort of put this over
maybe where our panel is over here and
maybe scale out a little bit so it fits
nicely on the page I will change the
font color to white so we can see a lot
bit better and maybe scale the text up
so it's static let's say and then the
game view you can see it there and you
can see our crosshair here visually you
can it thing you know just these
accordingly but I've just kept the nice
and big so you can see them visually
what we can do is we can go back into
you know editing our code and we can
start by writing our very Kastner so we
can use avoid update to brackets two
curly brackets below there I'm going to
start by saying break ask hit and then
hit with lowercase with
Macallan on the end and then we're going
to save vector3 and then FWD two classes
forward and we're going to set equals
transform or the lowercase dot transform
direction both uppercase then in
brackets vector three dot forward and
then on the end of that we want to
semicolon then below here we want an if
statement which is going to say that if
physics with the capital don't read cast
then open brackets transform with a
lowercase dot position comma FWD comma
out hit comma R a.length comet layer o a
new layer mask dot value and then below
here we want another two curly brackets
so here we're just doing a simple ray
cast a fold rare cast and then we're
looking to see if the rare cast is from
our position forward from what we'd set
from the camera we're looking for the
hip we're checking the length of which
were firing out so you can adjust this
to make the red shorter and then we're
just specifying what layer we only want
to look out so from here in our
statement we want to now say that you
know what we're going to look for we
going to look for a specific tag so
we'll say that it's hit dot collider.com
pair tag open brackets in quotes will
write consumable and this can just be a
general name for all our items but going
to consume then we can create two
brackets below that and now we want to
actually be able to do something
specific so first of all when we look at
a consumable we might want to change the
crosshair so we can say we can create a
new method called crosshair active and
have two brackets and a semicolon what
we can do on our almost our very last
semicolon we can go down here and create
a new void and call this crosshair
active just like we do at the top add
two brackets then two curly brackets
below then we can say that our
crosshairs that we could be
we referenced up here crosshair drop
color equals color with a capital dart
let's say red so that's all well and
good then what we can do is we can
create another method which can be
another one I'm going to use later is
crosshair normal let's say add two
brackets than two curly brackets below
there and do the same again or say that
crosshair dot color equals color with a
capital dot white with a semicolon so
that's going to be our highlighted
cursor which is red and then our normal
cursor or crosshair which will be white
so that'll be perfect so when we see
consumable we're going to say well we're
going to change the crosshair to red
because that's what we want to do now
we're going to actually find the object
we're looking for so you remember for
the top we looked for the rare casted
objects that's what we're going to look
for so now we're going to say that rare
casted object equals hit dot Collider
don't game object and G is a lowercase
so what we're saying is the game object
that we'll want to look for is whatever
we've hit in the rare cast so we're
looking for the collider and then we get
the game object and it will just fill
this variable in for us depending on
what we find in another bit or them need
another script to control all the things
that the object kind of does we're going
to want to you know update the the UI
that we made which was for the update
the UI name that we want it to appear on
our canvas then what we can do just
below these two we can create another if
statement we did say that input dot gets
mouse button down and then we can say in
brackets zero which is left click and
then we make sure that there's another
bracket on the end of there and two
curly brackets below then again we can
choose to select the object properties
and script Li we're going to create and
we're going to do something in there so
realistically we've done the bases to
our rare cast so far it sort of looked
for the consumable okay
across here it's going to find the
object that we're looking for and it's
going to fill in our variable for us and
then if we left click it's going to do
something but we need to make sure that
the crosshair goes back to no of them
and not looking at a consumable so what
we can do from there is we can select on
our on our if statement that's related
to the and this one here which is
related to the top one up here we want
to create a space in between here by
dropping down and we want to set else
and then below there are two curly
brackets and we can say that crosshair
normal we can call that method and then
here we want to set the item name back
to normal then this is for later on so
I'll show you this as an example we'll
go back into obviously we'll go on to
our at best controller select your main
camera and just drag the rare cast
manager on here from there you will see
that all of Erica settings is set to 10
and then we've got our references that
we need to fill in so from here we can
go to our layers and you want to click
Add layer from there you want to go to
the user layer and you could type
something like interact interaction
whatever you might want so we can go
back onto the main camera and we can go
on a tag and add a new tag and we can
click the little add box and call this
consumable like so then what we can do
in our scene view we can go back to all
our cubes that we created
make sure your outer 2d view and you
press F to zoom in you can see that
we've got a food water and a health cube
we can set there layer to interact on
each and set
each of them if you select all three and
select the tag is consumable and then
you can cycle through them and see that
they've all got the same tag to the
Volvo tag and the vulgar interact now so
now back on our main camera you can see
that in our rare car settings we need to
specify the actual new layer that were
looking for so you can click the
drop-down which currently says nothing
and we can set that to interact
now there's three references that we
need to fill in which is the player
vitals the crosshair and the item name
object so we can do is we can add the
FPS control to the player vitals because
that's where that script lives we can
add the crosshair to the crosshair box
and then the text which was going to be
item name which are well doing them just
to make things more coherent and drag it
in over there then it will recognize all
according so we can hit save and we can
now press play and you can see when I'm
in the scene you can see that when I
look of an object it will change color
accordingly to what I'm looking at as
long as we're looking at a consumable no
malware else and ugh we don't get any of
the and the interaction so what we can
do now is we can create a script which
will control you know what each of our
objects is going to do and so it's good
sort break up your scripts into
different managers or different items so
you can keep all consistence and not get
too confusing so we can right click in
the project and create another c-sharp
script and call this we can call this
item properties if you so wish and then
we can open that up what what you do is
we can knock this curly bracket down get
rid of the first two static methods what
I'm going to do is create a square
bracket and then I'm going to add a new
header like we've done before
then two brackets then in the quartz
we're going to call this and your
consumables and then from there what
we'll do is we will add make a public
string and I have this is item Lib and
now we're going to have a selection or
variables which I'm just going to have a
serialize field again and I'm just going
to have four different ones of these
I'll skip one just to make this and
quicker and what we're going to have
it's going to have a private bull as
food the semicolon a private for water
and a private full as health and then
we're going to have one last one which
is going to be a private float and we're
going to call this value what that
public one meant is we want to access
this and public name that we're going to
set in this script which is going to be
you know added to each of the items that
we've got and in the other script so we
need to make sure it's public whereas
these private ones they don't need to be
and then we need another reference so we
can have another a serialized field and
call this private now I wanted to create
the player vitals which is we want to
access the player vital script again and
have this as player vitals we did
actually create a variable in the rare
case manager for player vitals but we
don't actually need that so you can just
get rid of that and save it back out
because we're going to use in this
script so from here it underneath the
player vitals that we just created we
can create a public void and call this
interaction fluid to brackets and to
color back it's below and then we're
going to sort of say that depending on
what the food is
I mean what the consumer board that
we're going to use is we're going to add
the value to one of the you know sliders
in the player vitals so we're going to
add some to health food or water so
we're going to say there is food so if
the food equals true so if we take the
box that now will that item is going to
be a food type we're going to say that
player vitals with a lowercase P dot
hunger slider dot value plus equals the
value that we stay where we can stacked
up here then underneath these two
brackets we can say else if and we can
put in this brackets of water so if we
take that it's a water consumable we
will do something some
so we'll say play vitals dot first
slider dot value plus equals again the
value and once again you might have
guessed else F and we can say health in
that brackets and you can add two curly
brackets below and so that player vitals
with a lowercase dot health slider salt
value plus equals V found you that
within a set you can check all the
different sliders in your script or on
the actual object itself but you can see
that we're accessing the value of the
slider each time and then in here all
we're doing is literally going to be
adding the value that when it's set then
it's different for each object so I've
made it in different script so you can
make it for as many different objects as
you like really easily then in the
raycast manager like i said before we
need to make it so that you know we
could access these things else one so
from here we necessarily wanted to
update the UI name based on what we had
in the item properties so what we can
see say is the item name text which we
add up here we can say dot text because
you have to give the name of the UI
element dot text because we're going to
write text into the box then we're going
to say it will equal the rare casted
object don't get component and then we
one angle brackets and then we're going
to say that we're going to put in there
item properties then we're going to have
two brackets then put a and pull stop
and write item name with a semicolon so
what this means is the item name dot
text so this is the UI element that
we've got we're going to say that it's
going to equal the rare casted object
that we found which would be anything
that we might have set it's going to
find the script on it which is item
properties and we're going to set the
item name to the UI element so it can be
it can change according to whatever you
know itÃ­ll we could have 200 items in
the scene and each time when you look at
them
and on the UI according to what I've
written in that script and we need to
access the script to get that item then
from it and the item name is a string
and so is the actual text box because
text is a string and then in our left
click we need to be able to say that we
want to run this and public method here
which isn't going to do something
depending on what type of item we've got
so we can get rid of the comment that I
put in and we can say that rare casted
object don't get component angled
brackets and in those amiable brackets
you might guess we're going to use item
properties and then we can use two
brackets and then call the function
interaction and then add two brackets
and a semicolon
which is just going to call this public
function and dependent on the thing that
we clicked in the specific script so
whether it's food water or health it
will run one of these and each time we
click on it so now what we can do is we
can close up and visual studio you can
add item properties to each of these and
different cubes that you've got are
items you might have so you can see the
honor our food item that we've got here
we might want to say that this item here
is we can write that I am food with an
exclamation mark and we can take the box
to say yeah well we're food and then we
might want to say that it gives back a
value of 10 when we click on it we can
do it similar with water we can say that
this is bottled water we can then say
that tick the box of water and then
maybe that would give us back I don't
know to each term we take you can check
how much everything's worth by if you've
gone to your FPS controller or what have
you of your player vitals we set the
maximum thirst to 100 so it will start
at 100 so you can avert anything
I'm you know going up to 100 to give
back to the player in terms of things
like that we're gonna do the similar
thing for health but it would go down
because we don't have any way to take
the health down unless m1u lee did it
but we can tick those if we want to so I
will save this out and you need to make
sure that you've added the reference to
the player vitals so you can just add
your controller and do the similar thing
for the water and then from there what
we can do is we can press play you will
notice that the bars that will go down
as normal thirst hunger will move down
and we've got the new text element and
you can see that I am food is there we
can see that the UI text box wasn't big
enough but that's his bottle you should
say bottled water and we haven't got
anything for the third and you can see
that when I went away it didn't move
anything so what we can do is we can go
back into our script and you see at the
bottom when in our else statement
we didn't say what we wanted to do when
you know weren't actually looking at
anything so you can see that the
crosshair went back to normal we can
then say that item nem text dot text is
equal to null so it means that it's
equal to nothing then when we're not
looking anything so we can go back on
the canvas you can close the panel back
up or you can go to the item name go
back into 2d view and scale out and what
I'll do is I'll just make this text box
a lot bigger and then we press play this
time you'll expect that now that to
bottle watch and it fits on if I look
away it updates it so it's not showing
anything then I am food bottle water and
if we had something filled in for this
side that's what it would do you can see
that the hunger and thirst are
decreasing if I select you can actually
see the colors of this box but you can
tell because this is bottom water if I
left click you can watch the blue thirst
bar and that will increase by two each
time and you can click that
forever and ever until you need to do
something I unfold you could do a
similar thing that will give you 20 food
back and then the bars will continue to
decrease all the time what you can do is
and say in our object we want to get rid
of it once we clicked on it once you can
see here in our rare cast script you can
say that rare casted object dot set
active and then you can say in brackets
false with a semicolon and I'll just
mean little second to false and make it
go away and turn it off so let's give
you an example is that say I'm looking
at the food and then I eat the food now
that's gone I have a look at the water
take the water that's gone as well so we
can instantly sort of use an item as we
go so all it required it was really a
few simple things required a basic ray
cast at which just took an object which
used a consumer so we had a tag of
consumable and we gave it a layer so it
wouldn't get in the way of anything else
we've set up as crosshair tool active we
looked for that rare cast object and we
found it based on the collider that we
hit and it fills that into the inspector
forms are sort of behind the scenes
we're filling the item name text so that
UI text box with the name of the item
that we set from in this script when we
add it to our object then when we left
click we're going to add the rare casted
object so we're going to find the
component item properties again and
we're going to say to it run the
interaction function so based on that
it'll say whatever you've set if it's
water and health or food it will add a
value of whatever you set for per object
on a per object basis you can choose to
get rid of the object if you so wish say
it's a large body of water and you can
just left-click it infinitely you don't
want to destroy it we've got an L stem
or which turns our crosshair back to
normal and it just turns the item name
text to know what we're not looking
anything and we just change to crosshair
using a basic color change so the
that's pretty much it for just creating
yourself a very basic sort of look at
consuming some basic items changing
across hair and you know creating some
things that pop up within your sort of
UI so thanks very much for watching
don't forget to Like comment and
subscribe
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>