<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Immutable vs Mutable Objects in Python | Coder Coacher - Coaching Coders</title><meta content="Immutable vs Mutable Objects in Python - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Python-Training-by-Dan-Bader/">Python Training by Dan Bader</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Immutable vs Mutable Objects in Python</b></h2><h5 class="post__date">2017-05-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/p9ppfvHv2Us" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey there this is Dan and in this video
I want to talk about immutability in
Python so in this video I want to show
you what immutability means what does it
mean when an object is immutable or we
refer to an object as immutable and then
I want to talk about the specifics of
immutability in python because there are
actually some aspects of it that are not
that intuitive especially if you're
coming from a different language
background and I want to cover those so
that you know what's going on and you
know how to handle these situations when
you encounter them in practice alright
so let's get started so to demonstrate
what immutable or immutability means I'm
going to create a mutable object and
then an immutable object and I'm going
to show you the difference so for a
mutable object which means an object
that can be pretty modified an example
would be to create a simple list so I'm
going to create list and I'm going to
put some values into it or actually
let's go with a B and C and with a
mutable object I can freely modify this
object so I can go in here and I can say
let's change let's change the value at
index 1 and when we look at mutable
object you can see here that this
mutation was applied so we modified the
contents of this object now with an
immutable object we can't do that an
example for an immutable object would be
a tuple here so I'm going to create a
tuple with the same contents and now
when we try to apply the same
modification we're getting a type error
tuple object does not support item
assignment and that's really the key
difference so a mutable object can be
freely modified and an immutable object
can't now what are some examples for
mutable objects so a typical mutable
object would be a list like we have
before can also be a dictionary so we
can change those after the fact or it
could also be a set those are all
mutable then if you have a custom class
that's also mutable by default and can
just
in and change attributes on the class
now what are some examples for objects
that are immutable that can't be freely
modified in Python one typical example
would be a string so the string 1 2 3 we
can't actually reach in and modify
characters in that string so it's
immutable another example would be the
tuple that I just showed you or another
example could be a frozen set so I'm
going to create a frozen set here and
the frozen set well it's frozen so we
can't really modify it so those would be
examples of immutable objects or
immutable values in Python now this
seems pretty straightforward right if
you have a mutable object you can reach
into the object freely modify it with an
immutable object you can't that seems to
be a pretty clear definition so I want
to go a little bit deeper into some of
the oddities that you might encounter
when it comes to immutable objects in
Python but before I do that let's talk
about when you want to use mutable and
when you want to use immutable objects
and what they're good for
so the great thing about an immutable
object is that it is sealed it can't
really be modified once it's been
created and that can be a really helpful
property if you want to write code
that's easier to the bug so essentially
when you create an immutable object you
will know what its value is going to be
in that its value is going to be
constant after was created so when
you're debugging code that works with
immutable objects it's much more easy to
find out what the current state of an
object is and immutability is also
helpful when you're working with
parallelism in your programs because
then you can pretty much guarantee that
there won't be another thread reaching
into your data and modifying it when you
don't expect it now it's extremely hard
to write all of your code in a way that
makes it completely immutable at least
in Python and I'm going to show you why
in a minute but the general idea of when
you want to apply immutability or want
to use immutable objects is when you
when you want to seal objects you want
to guarantee that their value and their
contents are not going to change
now with mutable objects you would
always use them if you need to modify an
object or a container as you go along
right let's let's say you wrote an
algorithm that collects a bunch of names
in a list then you would obviously have
to keep adding these names to the list I
mean you could implement that algorithm
in a way where instead of modifying the
list by adding an element it would
actually create a completely new list
from scratch and just overwrite the list
object which could be a good thing from
a debug ability perspective but
generally that will be a slower approach
than updating the list in place so
that's another trade-off you need to
look out for right immutable objects are
I guess you could say safer and easier
to debug but the downside is it will
always be faster to just reach in and
modify an object in place so there can
be some performance trade-offs that you
need to make so that's just a quick
overview of mutability versus
immutability and actually what I want to
do now is I want to talk about some of
the quirks when it comes to immutability
in python so what I'm going to do now is
I'm going to create a tuple which is
immutable and I'm going to put a list
into it which is mutable and we're going
to encounter a pretty interesting
situation here or well I guess almost
paradox depending on what definition of
mutable and immutable you use so I'm
going to place some values into this
tuple and at index 1 I am going to add a
list ok so now we look at this tuple
we've got the tuple here starts with the
value 1 and then we've got this list
which sits at index 1 and we've got a
string here at index 2 the tuple now if
I try modify this tuple and I go let's
say I want to try modify the first value
we can't do it right because the tuple
is immutable the same thing is true when
I try to let
say change this string here word change
it and make it uppercase so if I wanted
to do that that doesn't work because
strings are immutable - right now you
can already see here the type error
didn't say hey you can't do that because
the tuple is immutable or does not
support item assignment it said the stir
object does not support item assignment
so can you guess what's going to happen
when I try to modify the list at index
one so let's say we're going to do the
same thing and I'm going to modify this
list and so the surprising result here
is that this actually worked we modified
the tuple or it depends on your
definition right Python says we didn't
modify the tuple all the tuple cares
about is well it points to some values
and one of them is a list and you can't
change what list is tuple is pointing to
but because a list is mutable you can
very well reach in and modify the list
so in a way
pythons definition of mutability and
immutability is non transitive so it
means if the tuple is immutable that
doesn't guarantee that an object
referenced by the tuple is also
immutable or that all objects referenced
by the tuple are also immutable so the
mutability it kind of stops after the
first level right that guarantee stops
after the first level so we can't modify
the tuple itself but we can reach in and
modify objects that the tuple holds this
can be a little bit confusing when you
see the first time or when you just hear
the word immutable and I've you know
I've seen this over and over again
working with people and also people
commenting on my blog posts and
tutorials it is just a point of
confusion for new Python programmers so
that's why I decided to do this video so
what you can see here is we were able to
modify this object even though it is
immutable this all comes down to pythons
definition of immutability and the fact
that immutability in Python is not
transitive
right it stops after the first level
there's no guarantees that further down
in the object hierarchy there isn't a
mutable object so that's something to
keep in mind and that's what I meant
earlier that sometimes in Python can be
a little bit hard to actually write code
and use data structures that are always
immutable
you really have to be careful not to
introduce something like this where you
have an immutable data structure that
then contains a mutable data structure
and that means it can be freely modified
and there's no immutability guaranteed
because immutability is non-transitive
all right so not everyone is going to
encounter this and I don't want to
discourage you with this video and
confuse you but if you do encounter it
then you're going to see you know why it
happens you can understand why this
happens so this is just something to be
aware of when it comes to immutability
and mutability in python all right so I
hope this video helped you out if you
enjoyed this video and you want to see
some more Python tutorials just like
that one then subscribe to my channel
the button is in the lower right in this
video talk soon and happy pie singing</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>