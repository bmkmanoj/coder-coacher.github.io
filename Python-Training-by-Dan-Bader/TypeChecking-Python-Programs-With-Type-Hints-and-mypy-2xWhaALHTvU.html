<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Type-Checking Python Programs With Type Hints and mypy | Coder Coacher - Coaching Coders</title><meta content="Type-Checking Python Programs With Type Hints and mypy - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Python-Training-by-Dan-Bader/">Python Training by Dan Bader</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Type-Checking Python Programs With Type Hints and mypy</b></h2><h5 class="post__date">2016-10-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2xWhaALHTvU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone so this is going to be a
quick intro to using the mypie type
checker to type check your Python 3
programs if you're wondering type
checking and Python it's it's kind of a
big deal right now a lot of people are
talking about how this could potentially
be the future of the language and just
to give you a feel of you know what type
checking is actually good for so this is
a new feature that was added in Python 3
5 and what it allows you to do is let's
say you write a simple function let's
call it add this and just give it two
arguments a and B and it's going to
return a plus B right so in kind of
stock Python we don't really have a good
idea of what the types are that this
function deals with and then also what
the return the type of the return value
is going to be I mean you could imagine
that I can call this with two strings
and I can also call this with two
integers and I could call it with a
bunch more things and some of them might
not even make a lot of sense so what
type hinting does now is it allows me to
specify the expected types for these
arguments and then also for this
function so I can say okay you know I
expect these two arguments to be
integers and then I expect this function
to also return an integer and the way
this works is that these guys here these
type annotations they are a syntax
extension that was added to Python 3.5
so this is not going to work in older
versions of Python there's a way to do
that in Python 2 as well and it involves
I think it works with some some comments
in tax are basically putting these
annotations into comments you can look
that up on your own let's for now let's
focus on the Python 3 syntax and
basically what these type-ins allow me
to do is like space
by the yeah like I said the expected
types for these arguments then also the
expected return type so right now when
you look at this it doesn't actually
guarantee that this function can rehand
'el these argument types it's just a
type hint or it's just these three type
hints and you know I could just do this
where I just force this function to
return a string and a wouldn't really be
an error right like matter of fact if I
save this and then just run it through
the
the Python interpreter well it's
actually you should probably call this
and call this function
then the program still works even though
it doesn't really follow this contract
for for the types that we gave it now
the way that types are going to be
working in Python is that they're just
type hints and then you need an external
program almost like a linter but now
it's called a type checker you would
need that type checker program to
actually look at your program code and
then give you feedback on whether or not
your program code actually follows the
the type annotations right so in this
case this function would be violating
its type annotations and I'm going to
show you now how you can actually run a
type checker on this program so a really
popular type checker right now is my PI
so let's install that for a second pip
install my PI lang
you want to make sure you install a pi
PI pi PI pi PI - Lang because just my PI
without the - Lang is something else
entirely so or not gonna be happy with
that cool so let's install my PI
just going to take a second here okay
great and now what I'm going to do is
just run my pie on my types example dot
pie
cool and we actually got an error
message here which is great right
because we we knew that our program was
wasn't valid in the sense that it was
following the type annotations and so
here my PI tells us types example of Pi
in function at this incompatible return
value type got got stir expected int and
this is pretty much exactly what we're
saying here right and so we can fix that
by changing it so it returns an int
right like we could either do something
like that where we hard-coded and that
would cost the type checker to pass or
we could well actually make it do
something useful like return the sum of
these two and then that would still pass
and you could see that you know having
this a plus B is the return value is
actually little bit more complicated
just saying return 23 because it's kind
of easy for for my PI to figure out that
23 is an integer constant but when you
do actually when you actually do
something like a plus B then my PI has
to go and check the type off a and check
the type of B and then actually figure
out that if you add these two you end up
with an integer as well so therefore the
the tie pins are accurate and we don't
get a type error so you can imagine that
this technique can be scaled quite well
and it actually already goes far beyond
just that little experiment that I
showed you right because you know if you
look at this like this wouldn't be
really interesting it where it gets
interesting when you have thousands and
hundreds of thousands of lines of code
or millions of lines of code and you can
use a tool like my PI to actually find
find some really big bugs that were
previously undetected the type in ting
stuff is going to get more valuable as
you have more and more code and ask you
you're able to kind of automatically
find bugs that would be really hard to
detect for a human in a ginormous
codebase right and kind of the make or
break thing for this to work is
having these type hints already already
there for let's say large parts off the
Python standard library or third-party
libraries and so you know just to give
you an example like let's say I import
the random module and I'm going to
change my add this function to do
something terrible which is we're going
to go and just make it return a random
integer between a and B so now the still
type checks cleanly which means that my
PI actually understands that random R
and int returns an integer and and you
know it seems like really really
straightforward for a human because we
have the the Python Docs and we kind of
you know we're told this thing returns a
random integer in range a B but in a lot
of cases like in some cases my PI might
be able to infer that type and just
figure it out on its own but in a lot of
cases it's going to depend on people
adding these type hints to functions in
the in the Python standard library and
also in other third-party libraries so
like a big bulk of the work is not just
writing the type checker which is you
know difficult enough it's a big project
but also like a big bulk of the work is
adding these type hints everywhere so
that my PI and other type other type
checkers can be as effective as possible
because if they if if a type trigger
doesn't know what the the types are
you're dealing with it doesn't really
add a lot of value right it could still
function as like a basic linter but it
gets really interesting when you have
all of these type checks so there's a
big project right now it's I believe
it's called the type shed project where
people add these annotation to
annotations to the standard library to
cover kind of as much of that as
possible and then also people are
starting to incorporate third-party
libraries like Django and kind of the
big popular ones
and so well kind of how can I wrap this
up right so because this was just meant
to be as a small like intro video so I
think I see a lot of power in in just
having the possibility to to do type
type checking in Python because because
like I said in the beginning is going to
enable a lot more use cases for Python
as a language which i think is awesome
and on the other hand it's going to take
a lot of work before this is really
going to work seamlessly right because
if you do this stuff like that in a
statically typed language like Java then
you're going to have to provide these
types like from the get-go right so that
never was a Java that didn't already
have all of these types and that's why
the compiler can work with it and can
give you all this this helpful feedback
but for Python it's kind of the unique
challenge is that the type checking
stuff is going to be bolted on to Python
and so now we're we're in this situation
where you can already use this on a
small scale like for small programs but
it's going to take a little bit more
time before actually all of the you know
all of the other code is going to be
covered well with type hints so you can
actually really use this on a larger
codebase without actually getting tons
of warnings and errors that that aren't
real errors that that just you know
happen because the type hints are
missing or are ambiguous so all in all I
think this is going to be a really
interesting direction Python is going
into and you know if you're interested
in this stuff today or like now is
probably a good time to get into it
because then you're going to be at the
forefront off this new language feature</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>