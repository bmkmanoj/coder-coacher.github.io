<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Code Review: Debugging and Refactoring &quot;Conway's Game of Life&quot; +  Automated Tests | Coder Coacher - Coaching Coders</title><meta content="Python Code Review: Debugging and Refactoring &quot;Conway's Game of Life&quot; +  Automated Tests - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Python-Training-by-Dan-Bader/">Python Training by Dan Bader</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Code Review: Debugging and Refactoring &quot;Conway's Game of Life&quot; +  Automated Tests</b></h2><h5 class="post__date">2016-09-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Tf70szZwWgA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hayla beep first of all I hope I
pronounce your name correctly
la beep that's a really cool name um I
took a look at your code I just clone to
repo right now and is like literally the
first time I'm looking at this I just
checked it out and I've got the the test
file and your your grid-tie file open
first of all I want to say it's really
awesome that you're writing tests and
then you're you know splitting this up
into separate modules and it actually
seems kind of clean house really
impressed by that so good job with that
um you can see here that I've got it
open in my sublime text editor and I
hope you can see that in the video but
it's highlighting some some stuff here
so these are warnings from a linter a
code linter tool that I use it's called
flake eight and I just wanted to show
you what what that does because I think
could be a really helpful tool for you
to you know avoid some of the common
mistakes and just to get your formatting
consistent
I mean honestly with the formatting if
you're just working on a pet project for
yourself then it doesn't matter as much
but I think it's good to build a habit
and just kind of you know stick to some
style guide and there's some really good
tools for that available so I wanted to
show you this one it's called flake
eight
and you can just install it through pip
so I actually already got it set up and
it's really easy to run so even if you
don't integrate this with your editor
you can just go like 8 and then just
give it all your Python files and you
can see here that it actually finds a
couple of things right in in your grid
pine and your test live PI most of them
are formatting related for example here
in this case there would be missing a
new line between these two functions or
methods here you know that stuff isn't
too terrible I still believe it makes
sense to clean it up but you know it's
not going to affect sort of whether the
code works or not like it's the same
with this stuff here you know I'm
missing a space if you want to go with
that go all the way with the formatting
stuff that that's all ok
the cool thing however with a flake 8 is
that it also does some static analysis
on your code so it can detect you know
syntax errors and it can also find
things where you're not following the
the Python best practices so for example
you know in this case we're comparing
we're checking for truthiness with this
equals equals true and typically what
you do in in python is you would either
use the is operator because that's going
to make sure that you're checking for an
instance of true you know not just a
specific instance of true but your
you're kind of you looking for something
that is true itself or some subclass or
you know some other instance of true so
usually you want to check for truthiness
like that and actually you could even
simplify this and just say if self is
alive and then the the if statement here
will kind of check that for truthiness
right so I mean it's it's just the
little things is not going to affect the
the way your code works but stuff like
that I find really helpful in you know
in finding place where you can simplify
the code so I just want to go through
this like you know
skim through this and see see what we
can do here so okay so I think this is
interesting or having the global here
probably the first thing that stands out
for me here is this comparison so we're
saying okay itself live grid live grid
and they were checking that so that
makes sense here then you want to return
true or false so you can actually
shorten this and you could just say
return
and what that does you know it's it's
basically going to evaluate this
statement here letter this expression
and then if it's equal to one then it's
going to return true and if it's not
equal to one and it's going to return
false so you know you can just get rid
of some of these lines and then what
I've found interesting here about the
the life great stuff I don't really
understand why we would do it like that
so I'm seeing you've got this create
grid here and I saw this over there
where you're you're creating an instance
of your grid class so that makes sense
and then you're calling create grid on
it which assigns the grid to life grid
so my thinking here would be whether
whether that's the best way to do it
because really you're you know here with
create grid you just get basically
giving this guy a new name here right
just giving it another reference so we
look at this test here for example when
you change your modify IP that would
also affect the live grid here in this
class and Sime that could be you know
that could be what we want but it could
also be a little bit dangerous if we
actually just assign it and don't copy
it over so I would maybe think about
that the sign choice um
okay so you know what let's let's just
go do a pass unlike the formatting stuff
here so we can get that out of the way
right so it's saying okay I want space
in here you know and that stuff doesn't
really matter all that much it's also
going to complain about the line length
being too long stuff like that we don't
really have to worry about that too much
make sure we're actually kept 8 clean
and I really like what you're doing here
with the
with your your print statements I think
this is a pretty good way to debug you
know a lot of people say oh you
shouldn't use
shouldn't use wait let's go in here
you shouldn't use print statements to do
your debugging you always want to use a
debugger but honestly I don't believe in
that you should use whatever gives you
the best result so okay so it's I don't
know why it's complaining about these
what we're going to do is just clean up
these I okay probably a bit missing
space or something
too many blank lines yeah so you know
this seems maybe seems a little bit like
anal retentive doing this but I really
like following pep eight because it
makes it a lot easier I find just to you
know mentally parse the code and
understand what it's doing so with this
guy here you know you could think about
formatting it slightly differently
because then it becomes clear that this
is a kind of two-dimensional structure
um I think is nice because it makes
makes a little bit more obvious what's
going on so I think these two are the
same so I'm just going to select all of
them and do a oops
you
oh that's weird okay I thought that
worked okay so let's
just to -
then it'll be easier for me to
understand
kind of what's going on here
okay I think that one's the same too
and here it's also reformat that guy
so now we're getting rid of all the the
linter errors here and just kind of
normalizing the way our code looks okay
so now it's complaining about a couple
more things so here for example again
we're comparing to true or false with
equals equals want the is here it's fine
for for the numbers so with these
messages what you could actually do is
you could move them into the assert
right so if you do a comma and then you
could say left edge neighbor missing or
something like that and in if if that
assert fails you would actually get that
as a print out on your console so um you
know you don't have to do it but could
be a neat trick to just kind of make
that a little bit easier for you because
otherwise you have to go back manually
and kind of check check these so so this
is a bit weird that they're that they're
just strings right like if might be
easier if you're just or you know what I
would do be something like this where I
put just a regular comment instead of a
string there's also the comments are
going to get stripped and then the
string is going to be processed by the
Python interpreter so you know it's not
going to make a performance difference
really
but in my mind this this should be just
a regular comment okay so this is
definitely something you could look into
with the the boolean comparison here
other than that I mean here you could
also just do you know assert is alive
and you could
it can actually drop that right so
instead of doing this you could say okay
assert not is alive that that's probably
actually what I would do unless you want
to absolutely make sure that it's
returning a boolean but um honestly like
with these I would probably just say
check that their truth er not truth in
and it just makes that a little bit
easier and I feel like it makes the
tests a little bit easier to read
because you're stripping down some of
that that extra
verbiage here okay so this one we want
to be true okay I hope this still is
still going to work at the end when
we're done okay okay so now you know now
all the linter stuff should be clean so
let's let's run flick eight again okay
line to long
the complaining about well weird I don't
get that in my editor yeah so I mean you
know technically that line would be a
little bit too long um we could simplify
that a bit let's actually leave it like
that that's okay and then what's
happening here oh yeah okay so it
doesn't like this print space stuff so
really this is just a regular function
call and you don't necessarily need that
space I mean you can put it if you want
but you know it wouldn't really be the
recommendation okay let's actually try
and like cut this line down a bit
so we're just whoring all of that
together so what we could do here is
this and probably split it up here like
this because I feel like that's that
splits it out pretty logically I'm not
mistaken okay
yeah so we need to indent it like that
right
and now okay so this actually flate
flake ate clean whoop nope that was too
much soap I test and then test life okay
let's see what happened
it's going to bump that up a bit okay so
you
okay so we've got test creator
all these worked test numbers so this is
actually a bug that I introduced I'm not
sure
where is this happening
for the cell in the
make sure I didn't I didn't screw this
up
test again yeah okay so I definitely
definitely broke this here for you so
let's undo that
just jumping back
and forth between between worsens in
and so what I edited in what was in my
get yeah okay so it's probably copy and
paste right so accidentally when I when
I copy and pasted that formatting change
broken okay so now we've got this
cleaned up
got this cleaned up I'm just going to
make a
met here just to take a snapshot off
this cleaned up version right and we can
dive in into making some change changes
to do okay so create that
okay all right we're going to commit
that
and okay so now we run this or at this
point where tests apply rules blows up
and we're getting that error here so now
actually before we go into that I have a
suspicion
we look at this up
my rules function
so what we're doing here so we're
creating a new grid B then we're calling
create grid right when you look at
create grid what this does is it really
just assigns the live grid variable so
at this point
um
at this point a live grid
and be live grid are pointing to the
same list
right so we're not creating a copy which
means if I change a dot live grid we're
also going to change B dot live grid and
so my suspicion would be that you know
as we're iterating over this thing that
we're creating new cells and killing
cells in B however what that actually
does is because they're the same thing
it's also modifying a which means that
your your neighbor counts are are not
going to work
right so what I would probably do is I
would try in terms of debugging this
let's not do this in terms of debugging
this I would try to actually make a
proper copy of your life grid with the
copy module so let's give this a shot
and just see where we're getting with
that so I'm going to import the what's
happening here import the copy module
and then here instead of just assigning
that we're going to say copy deep copy
right P that's going to create a new
copy of that list now if we run this
it actually passes so the problem here
was you know like I said said they were
both pointing to the same list and as
you were iterating and making changes to
be you were actually affecting the live
grid in a because they were one of the
same thing you know there were not two
different copies or one in the same
thing so this was really screwing up
your algorithm which was otherwise
correct it was just this this piece here
that was missing that you needed to make
a copy of the live grid so so this fixes
that one problem right in the apply
rules so now all of your tests are
passing so now I would probably make
another commit
you
and then what there's one more thing we
can take a look at and that is um so
it's a I'm not exactly sure what you're
doing with the with this here global
life grid so probably what my gut
feeling would be on this stuff um
probably get rid of that and I would
introduce a proper constructor here
right um
I probably do yeah probably do this
right so where instead of calling create
grid explicitly I would just say okay
we're introducing here the introducing
this Thunder init method and then I
would just say self live grid basically
this do this and actually get rid of
create grid here we don't need that
basically don't need these Global's
because you know this is just a class
level a class level attribute now or
like this is just an attribute on on on
that grid class here so we don't need
the global here so I'm not sure why that
was in there but we were not gonna need
that for now um yeah this I think this
is pretty neat actually what we're doing
here were you just you know giving the
offsets and then and then adding up the
count this is pretty cool man this is
this is nice yeah well done okay you
know there's probably a way to simplify
that with the some function and some
crazy like generator or whatever but
this is this is pretty cool yeah I think
this is a good function okay so here
you're just setting that to zero and one
potentially you could think about making
these constants right having having like
a special value for dead cell and a live
cell or something like that so that
they're not like these magic values but
you know I think it's fine for for a
small
small piece of code
yeah and then okay so what I introduced
here was the constructor right so I got
rid of the create grid so what you get
what that means now we can just instead
of calling create grid
we just be calling grid and I want to
update the tests here as well
um
because really what that does is it
makes it a lot easier
to work with this class
I think or I think you know I think this
the other way to do it would work too
but it's really powerful if you can just
yeah that's my timer is really powerful
if you can just work with with the grid
directly right like the whole point of
this of creating a class in my mind is
that yet you can just create a new
instance of that and if you pass
everything it needs to this constructor
so really what what this allows us to do
is we can say we can say my grid equals
a new grid and then pass it something
and it's going to create a copy of that
that's going to create a new a new grid
class for us and then everything you
need to actually pass to the constructor
right and this is really similar to the
way you would what's a good example this
is you know if you're if you're thinking
about something that's built into Python
if you're just doing lists for example
well maybe maybe list is not a good
example but if you're creating a new
object you really want to give it
everything it needs for it to create
itself and so you don't have to remember
calling like a special create grid
method and stuff like that so I think
this would be the you know the more
pythonic way to do it and okay so where
was I getting distracted here okay so
basically what I'm doing now is
refactoring all of that stuff
to not use the create grid method
anymore because we won't need it and
that you know that makes the code bit
shorter as well
okay now because we have your awesome
tests here just make sure it still works
okay so we're still you know tests are
still running clean which is which is
great and probably what I do here yeah
okay so I think this is a bit dumb I
don't like this line because it can
really lead you know to all of these
weird issues where we're assigning we're
updating a live grid but kind of by
swapping it out which you know that's
okay but then it's it can get a little
bit dangerous here
so you know I'm wondering okay so at the
moment this apply rules function it
returns the grid itself right it returns
a dot live grid so
what you could think about doing first
of all is
making this guy here a method on the
class this is probably what what I would
do so just say self and then
what this would do is it would create a
copy of itself
you
create a copy of itself and then instead
of okay so so let's let's call this some
let's call this state
okay let's call this current grid right
let's call this guy current grid and
then
we could say okay
grunt grid
and then we're checking everything on
the current grid
and we're updating ourselves right and
then I think
it becomes more clear what our intention
is it's going to get rid of that so
we're updating ourselves
and we don't return anything because
we're modifying our own life grid here
and so I would say okay if you're
running this I would just say okay so if
you know we want to use that code now so
I would just say a apply rules
and then I check what this does yeah
so in that way you know
um
we no longer need to do this
reassignment because we're taking we're
creating a copy of the current state and
then based on the current state we're
updating ourselves in the supply rules
method here and I think that makes the
code a little bit easier right because
you can just go a dot apply rules and
you know it's it's going to compute the
next state and kind of update itself and
that's probably how I'd do it all right
so this is a bit of a long and rambly
video but I hope it helps you out man I
think you did really well with this
stuff I was really impressed by how you
actually split it up into separate tests
code and it was you know you were so
close
it was almost working was just as one
thing with the copy and you know what
this was tripping me up as well a couple
years ago as well I was banging my head
against the wall trying to figure this
out because it's such an easy mistake to
make in Python so um yeah you were
really really close and I think this
looks good
so what I'm gonna do now is some I am
I'm gonna probably going to create a
pull request and send you this video and
then yeah and you know maybe you can
learn something from that from it if not
that's also cool and I hope that helped
you out right I got to go back to work</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>