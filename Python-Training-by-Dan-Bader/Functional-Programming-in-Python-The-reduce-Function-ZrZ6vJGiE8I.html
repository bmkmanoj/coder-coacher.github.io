<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Functional Programming in Python: The &quot;reduce()&quot; Function | Coder Coacher - Coaching Coders</title><meta content="Functional Programming in Python: The &quot;reduce()&quot; Function - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Python-Training-by-Dan-Bader/">Python Training by Dan Bader</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Functional Programming in Python: The &quot;reduce()&quot; Function</b></h2><h5 class="post__date">2017-09-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZrZ6vJGiE8I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey there this is Dan Bader and this is
another part in my Python functional
programming series where we talk about
what is functional programming anyway
and where you can learn some of the
functional programming primitives in
Python like the filter function the map
function and in this video we're going
to talk about the reduced function so if
you haven't seen the other installments
in the series then you may want to go
back to see what we're talking about
like especially I would recommend you
watch the first part in a series so you
can see the the data structure that
we're using in these examples or in this
tutorial and that we're working with so
we're working with a simple data set of
scientists and their birth dates and
stuff like that and we're transforming
it in interesting ways using functional
programming principles so in this video
I want to talk about another functional
programming primitive that is the reduce
function and because I'm on Python 3
here I need to first import the reduce
function from the standard library I
believe on Python 2 you'll be able to
just go reduce and that function will be
a built-in that's available in the
global namespace but because I'm on
Python 3 I need to actually go from func
tools import reduce and then we can take
a look at the doc string here again and
so I love the stock string because I
still remember you know the first time I
was learning how some of these
functional primitives work in another
programming language at the time and
just reading the definition of the
reduced function in in like my first
year of computer science education
versus sitting there like I have no idea
what you're talking about
and well I hope you don't feel the same
but if you do then don't worry because
you know you can figure this stuff out
and hopefully that tutorial will be a
part of it alright so let's go over this
so the reduced function it takes a
function and then it takes a sequence of
stuff so I believe for the for the map
function and for the filter function
those were called iterables so kind of
the naming is a little bit inconsistent
here I guess but basically the reduced
function politics takes a function a
sequence and then
initial value that I believe is optional
and it reduces the sequence down to an a
single output value by applying this
function repeatedly to the items in this
sequence so the way that's expressed in
the dark string is a little bit more
complicated but we're gonna take a look
at some examples here that actually go
back to to our data set alright so just
to make sure you see what I'm talking
about here so this is the original data
set that we're working with it is an
immutable data structure so there's a
tuple of other name tuples so each item
here's a named tuple and that way we can
make sure I can't reach in here and
actually accidentally modify any of
these items or the whole structure
alright so we're gonna take this and
we're gonna do some experimentation here
with our reduced function so the first
thing I want to do here is I want to
calculate in the total age of this group
so if you remember what we did in the in
the last installment of this series we
did something like this where we
calculated this derived list that had
the name and age of all of these
scientists in 2017 and so I'm actually
going to use this derived list for the
first example here for for using the
reduced function so what we want to do
here is we want to calculate the total
age and for that we're going to use the
reduce function and we're going to
define a lambda function and I could
also do this outside with a regular
function but here with the lambda I
think it's appropriate because then you
know it could be really declarative and
it could could all just fit into into
one short expression so here what I'm
going to do is I'm going to define a
lambda that takes two arguments the
first one is the accumulator and the
second one is the value I'm gonna let me
type this out and then I'm gonna talk
about what these individual parts mean
and what how they work maybe you can
figure it out as I'm tied
this function so this lambda function is
gonna be applied repeatedly to to all
the items in this list and so Val will
always be the latest item that we're
looking at and the accumulator will be
sort of a running variable that gets
updated repeatedly the return value of
this function will be the new value of
the accumulator so I know this sounds
crazy but this allows us to do something
like this where we can say okay reduce
this names an aegis thing down to a
single value using this rule here this
lambda and we're gonna start out with an
initial value of zero for the
accumulator so let's run this and then
let's take a look at the output okay 807
so this should be the sum of all of
these ages here and let's talk about how
this worked what you can see here is we
have this lambda function that is the
the function that the reduced call
applies to all of these items and the
way does it it picks an initial value
for the accumulator that I set here so
initially the accumulator will be 0 and
then it calls this lambda here with the
first item and you can see here that
we're returning the current value of the
accumulator which is 0 plus the value 4
or the 8 plus the age field off this
item here that gets passed in and then
in the next round well the value of the
accumulator was updated so at this point
it would be 202 and then in the next
round we're taking this item here the
value of the accumulator is is 100 is
202 and val is this item here its
dictionary and now we're adding together
the value of the accumulator and the
value of the age filled in in this
dictionary here and we're returning that
and so on so this is how we boil down
this whole list into a single
integer that represents the sum of all
of these names now in Python again there
are other ways you would represent this
particular calculation for example I
could have gone like this and said sum
of X age for X in names and ages and
that would have done the same thing in
an even more concise and nice
representation so at this point you
might be wondering okay why do I even
need to use the reduce function in this
case at all and the reason is that the
reduce function it can actually go far
beyond what you've seen here so we we
can talk about some pretty crazy
examples here why don't we look at some
more interesting uses of the reduced
function all right so one interesting
thing that I thought we could do with
the reduced function is grouping
scientists by field so basically I want
to have some output like this I want to
fill this up this dictionary here and I
want to populate it with the scientists
grouped by their respective field and we
can do that by creatively using the
accumulator field all right so what
we're gonna do here is we're gonna
define a function that we can pass to
reduce to reduce function that will take
our existing list scientists and assign
it to these fields and kind of group
people that way and so the way we're
gonna do it
there is actually a way you can do this
in a single lambda expression but I you
know I just started recording started
recording that example it was like man
this actually really detract from from
what I want to show you here so if you
want to do that as a fun exercise then
put it in a comment below if that'd be
cool alright so here I'm just gonna
define my reducer function and it's
gonna take the accumulator and a value
I'm just going to say okay in the
accumulator well you want to look at the
field that the scientist belongs to and
then we're just gonna append the name of
that
scientist and then of course we need to
return the accumulator so you might be
wondering what would what is that what
does that do you're gonna see that in a
minute so here I'm now typing out the
reduced function call so I need to pass
my reducer function and I need to pass
my scientists and then I need to
initialize the accumulator and so here
this is where this thing comes in
because we need to make sure that this
dictionary here actually has slots or
has has these keys in here for all the
different fields so that the reducer can
go over it and it can update the
accumulator according to the individual
field that each of these scientists
belongs to right so now once I've run
this let's pretty print it out and yeah
you can see here it worked so for
astronomy you've got Vera Rubin
chemistry math and physics they're all
kind of sorted in that way and assigned
to the right categories and I hope you
can you can see how this worked here
with this reducer function and the the
main thing you need to figure out is how
the or what what I was struggling with
the most was how these names like
accumulator and value how they they
correspond to actual items and what the
accumulator looks like as it gets
updated right so that that's like the
biggest thing you need to wrap your head
around and it makes sense to play
through this maybe even on a piece of
paper or certainly here in the Python
repple one thing that I really don't
like about this is that I have to give
it a list of categories up front that
then gets populated that's kind of
stupid and if I make a mistake you know
I have a typo here then it's just all
gonna blow up but there's a better way
to do it and that is the default date
class in the collections module so I'm
gonna gonna have to import collections
and what we're gonna do now I'm gonna
override this scientist by field object
here again
I'm gonna pass it my reducer function
I'm gonna pass it the scientists and
instead of initializing the accumulator
I'm gonna go collections not default
nicked off list and then we'll that will
do I'll show you that in a minute what
that will do is it will lead to the same
result because this collections dot
default list thing or default dick thing
is pretty magical so let's just create
an instance of that class so there's a
default dict and now this thing every
time you access a key that doesn't exist
it it will be created and it will be
populated with whatever you pass in here
whatever factory function you pass in
here right so now I can go and I can put
all these crazy these crazy keys here
and the dictionary will be updated so
you know I can now I can do stuff like X
Y Z dot append and this will work
because it's gonna create that that's
slot for me you know just in time and I
can keep doing that and it will keep
updating because now from the second
call on it knows that it has this field
in there and the default date and it
doesn't need to recreate it so this is
like a little trick you can use to get
around having to manually define the
accumulator here but of course it's also
adds more complication to this this
function call and I'll bet you like this
would actually take you know many people
a while to figure out and to read that
and so maybe that's not that's actually
a pretty good reason to not use that in
production code however I think it is it
makes for a really interesting thought
exercise in Python and I think it's
pretty cool to work with these different
kinds of programming paradigms and
programming styles like functional
programming object-oriented programming
more like a procedural programming and
it makes sense to be comfortable with
these different styles because even if
you don't always stick to any one style
you know hundred percent of the time
you're gonna learn a lot about when
these things have their strengths and
when you should apply them and I think
that is really valuable and that's gonna
put you above and beyond what most
people what most people do when they
learn programming right so I think
there's a lot of value in in exploring
these things all right so I want to end
this this reducer example with another
well arguably more pythonic version of
what we looked at previously and you can
see I played with this a bunch because
well this this here is called scientist
by field five is basically trying to
come up with ways to to do this grouping
in better and more readable ways and so
now this is based on a dictionary
expression and this kind of fits the
theme that happened in the other other
videos in a series as well where i
showed you kind of the classical
functional programming approach and then
showed you a more pythonic version where
we often using list comprehensions or
generator expressions to to get to the
same result but kind of do it in a more
pythonic more readable way not sure if
it if that's the case here like I'm not
sure if this is more readable but you
know you can do it and there's actually
a helper function in Python that is the
eater eater tools not group by function
it it does stuff like that it can group
things by a key func
so here I'm grouping these items by
their field and then you know you have
to do some some fiddling here too to get
the keys and the value set the right way
so I mean arguably this is more pythonic
because it uses a dictionary
comprehension but you know I'm not sure
if this reads much better but you know
it gets around the need for the default
date so you know I showed you a couple
ways to do it I'm sort of tempted
actually to drop the to drop this crazy
lambda expression here
you but I also want to see what people
come up with in the in the comments for
for doing this reduction but you know
what the hell with it
I'll just do it here ok so this is what
I came up with scientists by field has
the same result and it it uses a lambda
function instead of a separately defined
reducer function and it also uses this
dictionary merge syntax available in
Python 3.4 but you know this code this
is pretty gnarly and crazy code I mean
it works but when you look at this it
gets very very arcane so please don't
write code like that when you're working
with other people it's sometimes it's
fun like that you know to sit down spend
some time to try and come up with I
guess like a single line solution for
this problem but this is more like a fun
exercise rather than something you
should do in in in practice and in for
production code but anyway I hope this
gave you a better idea of what the
reduced function could be used and maybe
also some ideas on how it could be used
in more creative creative ways to
achieve that grouping for example and
not just for the classical examples
where you know you have this here where
we're adding out adding up a bunch of
values and kind of boiling it down to a
single integer or something like that so
I hope we achieved that I hope you
learned a bunch of things about
functional programming in Python here
and at this point you should have a
pretty good understanding of what
functional programming is what the
filter map and reduce functions are kind
of the core primitives of functional
programming how they work in Python and
how you should probably not use them in
Python or use them in different ways for
example by replacing them with list
comprehensions or generator expressions
all right if you have any questions
leave them in the comment below and be
sure to subscribe to this channel for
more Python tutorials happy pi thinning
and have a good one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>