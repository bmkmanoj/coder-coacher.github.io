<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Tutorial: List Comprehensions Step-By-Step | Coder Coacher - Coaching Coders</title><meta content="Python Tutorial: List Comprehensions Step-By-Step - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Python-Training-by-Dan-Bader/">Python Training by Dan Bader</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Tutorial: List Comprehensions Step-By-Step</b></h2><h5 class="post__date">2017-04-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1HlyKKiGg-4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone it's dan Bader and I'm
super glad to have you here join me with
another Python video so in this tutorial
I'm gonna talk about list comprehensions
list comprehensions are actually one of
my favorite features in Python I know
they can seem a little bit arcane at
first or a little bit strange but they
are actually super helpful that can help
make your programs easier to read and
easier to maintain once you've actually
wrapped your head around how they work
and when you break them down to sort of
first principles they are relatively
easy to understand so behind the scenes
it's pretty much all just for loops and
that's what I'm gonna teach you in this
tutorial so I'm gonna show you exactly
how you can take an existing for loop in
Python and then transform it into a list
comprehension and also do the same thing
the other way around
alright so let's jump right in so here's
a simple list comprehension that I just
defined and you can see here it looks
kind of similar to finding a list
constant right where we would just put
in values between these some square
brackets so I defined this list
comprehension here and then assign the
result of it to the squares variable and
the reason I did that is so you can see
what the output of that list
comprehension is and I also wanted to
give it a name because it's small it's
computing all the integer square numbers
from 0 to 9 and of course I could have
just taken the same list comprehension
and run that immediately right now when
you look at this list comprehension the
syntax is fairly human readable I want
to say and really what this syntax is
it's kind of a shorthand for a regular
for loop so I'm gonna clear my screen
here and I'm gonna bring back the list
comprehension and now I'm gonna write a
for loop that runs the exact same
calculation so we're gonna start out
with an empty squares list and we're
gonna populate that list as we go along
and in to start the for loop I'm gonna
take this part here from the list
comprehension I'm just copying and
pasting it over and now what I need to
do is I need to update square so I need
to append something to it and for that
I'm going to take this part of the
calculation here right so you can see
where I copied these parts from
the squares one is that one and in the
for loop is that one here that part here
in the list comprehension in any actual
calculation that I'm running here or the
expression that I'm evaluating that I
took that from here to calculate the
squares alright so when I take a look at
how this squares list was populated by
the for loop solution you can see it's
exactly the same so when I rerun the
original list comprehension you can see
it has the exact same output so that's
how you transform a very simplest
comprehension into a for loop now if you
try and generalize this structure so the
transformation that we just applied if
you try and generalize that for any
other kind of list comprehension you
might end up with a pattern somewhat
like this so what I've done here is I've
taken the list comprehension up here
that I used in the example and I've
replaced parts of it kind of the parts
that you would swap out that are not
part of the there's the skeleton for a
list comprehension and I replaced them
with these markers here right so in this
case the values which is our output
values would correspond to what was
called squares in the example and then
the expression would be the x times X
operation that we're doing here and then
of course like this four part would be
exactly the same and then we're taking a
value in this case it would be called X
from a collection in this case it would
be the range of integers from zero to
nine and this is sort of the template
behind this list comprehension and as
you've seen we can take this template
and transform it into another template
so this list comprehension if you wanted
to transform it into a for loop it would
look like this so this is pretty much
exactly what we've done in the example
right so again our values here that's
just squares and we're creating an empty
list and then we're iterating over each
value in the collection you can see how
these correspond here and then we're
updating the output
values that we previously initialized
right we're just appending stuff to that
list and we're not just taking the value
from the collection and adding it but
we're running we're evaluating some kind
of expression based on that value to
calculate the actual output value so
this is how this transformation goes
down and the cool part is that it works
in both directions right so you could
apply the same transformation to
actually take a for loop and turn it
into a list comprehension again and and
that's kind of the powerful thing about
these list comprehensions because once
you're getting tired of writing loops
that look exactly like this well now you
have a tool in your toolbox that you can
apply to make these parts in your
program a little bit more readable and
basically turn these three lines into a
one-liner that does exactly the same
thing which can be pretty powerful and
can be great for improving readability
it can also be horrible for improving
readability but I'm gonna talk about
that a little bit at the end all right
so we just looked at this fairly simple
pattern here and what I want to talk
about now is how you can expand this
pattern to actually include filtering
and filtering is going to make the list
comprehensions that you can write a lot
more powerful and a lot more flexible so
let's take a look at that so I've
updated my example here by adding
filtering and you can see here that this
looks very similar to the previous
example all of the parts that you are
already familiar with are still there so
we've got our output list of values
we've got the expression we calculate
and we've got this for value in
collection part that we run and so this
new stuff here at the end that's where
the filtering happens so in this case
we're calculating the same set of values
but we're only keeping the values where
this condition here is true and in case
you haven't seen the modulo operator
before it divides two numbers and then
gives you the remainder so if I go 31
modulo 2 the remainder of that is 1
because it's an odd number right we
can't cleanly divide it by 2 so the
remainder of that is 1 and if I go 30
modulo
- then the remainder is zero and I'm
taking advantage of that here in this
filtering expression to only include
values in this even squares lists that
are actually even so this is a great way
to find out if a number is even or odd
right you can just use the modulo
operator for that alright so let's take
a look at the output here that we've
generated and as you can see this
filtered down the previous list of
squares so that it only includes the
even squares so remember this is what we
had previously before the filtering and
that also included odd numbers and now
those are all gone because we filtered
them out with this if part in the list
comprehension now let's take a look at
how that affects our template behind the
scenes or our how can we transform this
into a standard four loop template
behind the scenes so if you wanted to
generate the same list with a for loop
you would probably do something like
this again you would start out by
creating an empty output list and then
we would iterate over this range again
and now what we need to add is the
filtering so in this case I would just
add the filtering condition here inside
the for loop and then if the filter
condition is true only then am I going
to append the calculated value to my
output list this is exactly what I've
done here so hopefully we'll get the
same result yeah that looks pretty good
so you can see here how I took the
initial list comprehension with
filtering and transformed it into an
equivalent for loop all right so I've
got the updated template here and pretty
much all that I've added is this if
condition part and we can take a look at
how this would transform into a for loop
alright and this is how it would
transform into a for loop so again this
is really similar to the previous
template but now we've added this if
condition line that applies the
filtering so you can see you know if you
built these if you build your
understanding of list comprehension step
by step then I think it becomes much
easier to actually see what's going on
because the
to jump from you know from the previous
list comprehension and then adding this
if condition here is is relatively small
right it's relatively easy to wrap your
head around that but if you have seen
that for the first time if you had seen
a more complex list comprehension you
know like this one it would seem it
would seem a little bit overwhelming to
be honest because it's it just helps to
break things down into these little
steps and hopefully that example showed
you how these list comprehensions break
down into these relatively simple four
loops now there's a lot more to say
about these list comprehensions or
comprehensions in general because there
are also dictionary and set
comprehension and I'm gonna put a link
into the description of this video where
you can learn about this stuff if you
want to but before you run off and jump
into refactoring your programs to add
list comprehensions to them i want to
talk a little bit about two things so
number one is formatting how should you
format your list comprehensions so they
look nice and clean because one downside
here is that they can get super long and
can kind of go past the the line length
limit that you might have set for
yourself or if you're using peppy you
know it's really easy to go over that
limit so I want to talk a little bit
about that how I like to format my list
comprehensions and then also I want to
give a bit of a caveat here where list
comprehension seemed like a really great
tool and they are but there's also a
danger of overusing them so I want to
give you know just my opinion on that
and when it makes sense to use or not
use the list comprehension alright so in
terms of formatting what I like to do is
if I have a slightly more complex list
comprehension and it doesn't fit into
one line often what I'll do is I'll
align my comprehension that way so that
I've got the expression on the first
line and then I'll put the four part
below that and I'll put the filter part
on another line and I feel like that
reads pretty well and looks pretty clean
and it's a good way to format your list
comprehensions if they run the danger of
spilling across the line boundary right
so that's that's the way you could do
this and so to show you an example of
what this would look like with the even
squares example that
previously I might do something like
this or actually in this case because I
have enough space it would probably do
something like this and actually leave
the filtering down there or even put it
on a single line right because it's like
that's that's only 56 or 55 characters
here so this is not gonna hurt too much
but I hope this gives you an idea of
what you can do if you have you know for
example if you have a longer function
call here then it might make sense to
format this differently and actually
move this down or do something like this
like basically what I wanted to say here
is that I like using these parts here in
the template as my breakpoints if I need
them and that can help you break it down
if you're getting close to the line
boundary all right so the other thing I
wanted to talk about is that you want to
be careful with how often you know what
under what circumstances you use these
list comprehensions so one downside of
list comprehensions is that well they
are more terse than for loops they can
feel or they can get a little bit
overwhelming if someone is not familiar
with them so with this feature I think
it makes sense to balance it with for
example who you're working with if you
want to introduce Python to a new team
maybe kind of blasting them with a bunch
of list comprehensions isn't the
greatest way to do that because a for
loop is probably gonna seem more
familiar to them than hitting them with
a list comprehension right away so
depending on the developer audience
you're working with these list
comprehensions might be a good feature
to use or they might not be so this is
something to keep in mind the other
thing is that these list comprehensions
can also be nested so you can have list
comprehensions inside list
comprehensions and this is something
that i would encourage you to stay away
from that it's much better to turn that
into a loop or actually even move part
of it into a separate function call
because it's going to be a lot easier to
read and a lot easier to maintain so you
can write some pretty gnarly list
comprehensions and usually you know it's
tempting I know it's tempting but
usually it's not a great idea to do that
because it gets super confusing really
quickly and it gets extremely hard to
maintain and so it makes sense to really
you know spend some time to think about
it where it's
to use a list comprehension and specific
use case or not so that was a word of
warning here at the end but I think it's
definitely something you want to keep in
mind like all code is communication and
you always want to make sure you're
communicating your intent clearly and
that you're not writing code just for
the sake of making it extremely tours or
concise or overly concise right because
I know it's fun you know and I've done
it in the past and I've done it to other
people and really it just kind of sucks
so I would recommend that you don't do
that and we definitely use list
comprehensions they are awesome I think
for something like that in my mind
that's much cleaner than using the
equivalent for loop but be careful with
deep nesting and and some of the crazier
list comprehension so you might want to
write alright well I hope this tutorial
helped you out if you enjoyed learning
stuff like that then check out the
article in the description that has a
little bit more background info on list
comprehensions on other types of
comprehension like dictionary and set
comprehension in Python
so you can learn about that and also
check out my book called Python tricks
the book a buffet of Awesome Python
features that has many many more
tutorials and introductions to topics
like the one you just saw and I think
you're gonna get a lot out of it if you
enjoyed this tutorial
alright so happy python inge and talk to
you soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>