<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A Crazy Python Dictionary Expression ?! | Coder Coacher - Coaching Coders</title><meta content="A Crazy Python Dictionary Expression ?! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Python-Training-by-Dan-Bader/">Python Training by Dan Bader</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>A Crazy Python Dictionary Expression ?!</b></h2><h5 class="post__date">2017-01-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7TL1x3PO8iQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey and welcome to the next video in the
Python tricks series so Python tricks is
a new book that I'm working on and it's
kind of like an a buffet of Awesome
Python features so the goal with the
book is to give you you know a really
quick overview with a simple code
example and kind of a guided walk
through through one really cool aspect
of Python that you might not have heard
about and this could be you know a
little-known syntactical feature a
little-known feature in a Python
standard library and it's it's all very
practical stuff that's gonna help you
get better in your Python coding and so
today I want to cover a particular
Python trick that I guess it's a little
bit more quirky but it'll still lead to
some really interesting considerations
and so what I want to talk about today
is a really crazy dictionary expression
and so I'm gonna move this out of the
way here and yeah so this dictionary
expression is pretty surprising at least
it was really surprising to me when I
saw it for the first time and so let me
just type this out here real quick so
basically what we're doing here is we're
putting in creating a new dictionary and
we're putting in a bunch of keys and
keep like keep those keys in mind just
kind of look at those keys and and maybe
you'll know what's gonna happen when I
hit return and evaluate this expression
so I'm just gonna wait for a second like
think about this what what you think
this is gonna what do you think is gonna
happen when we evaluate this expression
what do you think the outcome of this
would be like actually pause the video
and think about this for like a minute
or two and then come back to it
okay ready I'm gonna run this now boom
okay so the result we're getting here is
a dictionary with just one key it has
just one key true and the value is maybe
and actually when we look at the
original expression here that's kind of
surprising in my books right because
well the true key well that that was the
key we put here and actually the value
was supposed to be yes and then that no
and one doesn't show up at all and here
we have 11.0 the float value as the key
and and this may be value for that key
now actually shows up here so this this
seems like a complete mess and this
seems you know this is a resizing result
so I want to untangle that now because
it's going to show you I think it's
gonna help you to a better understanding
our deeper understanding of the Python
interpreter and how Python Python works
like certainly helped me with that well
the first thing we should do here is try
to break down how Python processes our
dictionary expression here and I'm just
gonna play through that now so basically
what happens here if we create a new
dictionary just call it X's we create a
new dictionary right and then we'll just
grab the key and the value and we'll
assign the value to the key right didn't
want to type value I wanted to type yes
to match that up with the initial
example so what happens here is that we
just add all of these keys here and
these values and as we do this we should
end up with exactly the same result
right so there's nothing crazy or
special about this dictionary expression
it's it's just getting evaluated like
any other old dictionary expression that
you can come up with where Python does
exactly this so
I think that gives us a hint right
because it kind of makes us realize that
well as we're assigning these keys there
we're overriding them right like the key
one the integer one overrides the key
true and the integer one point the float
one point zero overrides the other key
and well I mean it doesn't really
override the key but it overrides the
value right so we we end up with like it
seems to be taking the key from the
first time we set this particular key
and it seems to take the value from the
last time we set this particular key I
mean at this point we don't really know
like why are these considered all the
same key but it kind of gives us a hunch
right like what could be wrong here like
let's play Python detective here so if
we're actually try and like validate
this assumption or test this assumption
let's just compare all the keys that
we're using here and actually Python
tells us that true one and one point
zero they're all considered equal
they're all considered to be the same
key and so that's the case because
Python actually treats boolean's as a
subtype off the injured integer type and
you can dig that up in the Python
documentation here in the standard type
hierarchy so when we search for bool
here you can see here that the boolean
type is a subtype of the integer type
and boolean values behave like the
values 0 and 1 respectively in almost
all contexts with the or the exception
being that when converted to a string
the strings false or true are returned
respectively and that's our explanation
right that pretty much explains what's
going on here it doesn't really explain
why we're not ending up with the key 1.0
at the end but it kind of explains how
these keys are getting overridden
so what we can see here that as we're
building up this dictionary we're
overriding the value for that key and
because you might be wondering why we're
still ending up with true as the value
or like the name for tap key that is the
case because if the if the keys are
considered equal Python doesn't actually
have to update the object right if
they're considered equal it can just
keep the initial object and update the
value and so what you end up with if we
play through this again let's play
through this again let's actually that's
let's start with a new with a new
dictionary here so if we play through
this again we're gonna say okay Y is
true equals yes and we print out wise
okay that makes sense right
and now we're gonna say Y is one equals
no all right what do we expect now well
we expect the key to remain the same and
it to be overwritten with with a new
value and now if we set the key one to
maybe then again we expect to end up
with the results that we've gotten out
of this dictionary expression very early
on so this seems to confirm our our
theory here all right and that dispels
most of this magic here now there might
be you know at the back of the Year head
you might be thinking oh aren't Python
dictionaries hashmaps or something is
that like is that what a hash collision
is um sort of and actually I've got a
lot more to say on this topic to kind of
really dive down into the hash map stuff
and really untangle where that that
comes into place so you can either check
out the book for that or you can read a
blog post that I wrote about this
earlier so that that there are going to
be some pointers for you to dive more
deeply into this and they're gonna be
linked in the description for the video
and
again if you enjoyed this video or this
video series and please check out my
book called Python tricks and I hope I
see you soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>