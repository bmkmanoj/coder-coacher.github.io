<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Authentication | Web Push Notifications with Firebase (2/6) | Coder Coacher - Coaching Coders</title><meta content="Authentication | Web Push Notifications with Firebase (2/6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/bitsofcode/">bitsofcode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Authentication | Web Push Notifications with Firebase (2/6)</b></h2><h5 class="post__date">2017-09-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cnwuYeCqni0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so before we actually start sending
notifications we need some sort of
authentication so we want to make sure
that anyone who's sending a notification
has signed in and we're gonna use
firebases
inbuilt authentication and it's really
simple and really easy and we're gonna
make users just sign-in with Google
the first thing we want to do is go to
our project on firebase and go to
authentication and all we need to do is
just enable users being able to sign in
with Google and its really easy as
everything is just click setup sign-up
method then we think Google edits and we
just click enable and save and that is
it so people can now just sign in with
Google but obviously we need to you know
do something on our end so let's go back
here and let's go back to our code the
first thing we want to do is just create
an actual Watson that people can click
to sign and we go to our index if we
just come here and all we have to do is
create a simple Watson just give an ID
of sign in and then I'll just say sign
in then we can go to our main javascript
file which is over here and let's just
create a reference to it so sign and
very simple then let's create a function
to sign in so function sign in and what
this function is going to do is just use
the sign-in function on firebase off so
we have the reference the firebase off
here so all we have to do is sign it in
I'm going to do it with a pop-up right
so what we want is that the window will
pop up so that the user can sign in and
then when they close it will go back so
sign in with pop-up and we need to pass
in which provide everyone so we want to
use Google sign in here we pass in a
mean firebase
oh go on provider and that just says
that we want to use sign-in with Google
now let's just talk about these things
up together so addeventlistener sign-in
function so now let's go and actually
test it out so let's just refresh the
page now we have our sign-in button then
we click this and then we have the
pop-up that happens so let's just take a
little bit of time and then we choose
what comes that we want to sign in with
just gonna use this account and then it
goes back here so we've actually signed
it and we just open up the console we
didn't console.log anything they haven't
actually done anything to check that the
user has signed land but it's actually
been successful so how do we actually
know that the user has signed in and
what we need to do is listen for the
authentication state has changed so
there's actually a special event
listener that we can do which is on this
firebase of variables so let's just add
this here by this earth on earth state
changed and when authentication stage
has changed we need to do something so
I'm gonna create a function that says
handle all the state changed so let's
just add that here and what is passed is
a user so what we can do is just consult
world user so let's just go back and see
that anything has happened so let's
refresh the page and we can see that we
have a user object that's now being
console.log here and you can see the
screen name is Erie and then this is the
email that is being passed but let's
just change this a bit so this all state
changed is called
if the user has logged in or not logged
in so first we just need to check that
if there is actually a user then can you
say console or user and if not
I'm sold well no user let's just leave
that and we're gonna add some more cool
to just handle the difference between
like user being signed in or not later
but let's just go back and refresh yeah
so we still have the user of course
so let's actually just add a sign out
button so we can just test the
difference and of course we have to let
the user be able to sign out as well
let's go back here and let's just create
another button I'm out I'm sign out
let's go back here sign oh you have to
create it first of course equals two
we're gonna create a function called
sign out sign out and this is really
really simple all we have to do is call
sign out on firebase boss profile is off
dot sign out and that will lock out the
user let's just go back and test this
page so we already sign in as we know so
you have to do is click the button sign
out and there's no user anymore if i
refresh the page it will just say no
user so this date right now isn't really
ideal we don't want to show both sign-in
and sign-out buttons when the user is
signed in or when the user is signed out
we want to show them conditionally so if
we just go back we can just hide and
show the elements based on the state so
I'm gonna go back to the HTML here and
let's just put a hidden attribute here
so if you're not aware the hidden
attribute can be used to just hide any
element on the page it essentially just
adds display:none so if you go back you
can actually see what's going on here
so we're just gonna hide the signup
button by default and just change the
state depending on if the user is logged
in or not so here we have if there's a
user what we want to do is sign in
button set attributes so we want hidden
to be true and then for signup button
I just want to remove that attributes
I'm hidden we can just copy this and
then if the user is signed in let's just
change that around so let's just go back
and see how that works here so there's
no user so the sign-in button shows so
let's click Sign In and this should just
probably automatically take me back
cause already signed in so when there is
a user you can see that the signup
button is there so pretty simple for
just managing the states so that is
authentication with firebase</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>