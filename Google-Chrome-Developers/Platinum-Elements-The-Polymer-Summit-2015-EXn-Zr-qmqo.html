<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Platinum Elements (The Polymer Summit 2015) | Coder Coacher - Coaching Coders</title><meta content="Platinum Elements (The Polymer Summit 2015) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Platinum Elements (The Polymer Summit 2015)</b></h2><h5 class="post__date">2015-09-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EXn-Zr-qmqo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everyone so I'm Matt scales as matt
said and I'm here to talk about the
platinum element the platinum elements
are our way to help to make using the
latest and greatest web platform
features easy with polymer so the web is
getting a lot of really cool features
recently and this is great for users
straight for developers and it's also
great for businesses that want to be
able to do exciting new things without
tethering themselves to a closed
platform um but it's also getting
complicated there's a lot to learn now
and realistically you can't learn all
this stuff anyway now these these new
features are actually they're so
powerful because they're very deep so
what can we do about this well luckily
there's an element set for that so what
we've done is we've created the platinum
element set and the idea here is that
these elements wrap these complex ap is
and provide the most obvious use cases
simplified out so that you can just drop
them in so the Platinum elements most of
the features that were wrapping here are
only implemented in a few browsers
pretty much just chrome actually
but the the platinum elements themselves
if you drop them into your page they
will just gracefully degrade if you use
them in a browser that doesn't support
them all of these features are
enhancements the traditional web has
always happened in a tab and these
features are allowing you to break out
of the tab and do things outside of that
environment so we're going to talk about
offline push messaging and device access
so first up offline so when I say
offline really what I mean here is
removing your dependency on the network
so in order if you're apt to work
offline you need to have all the
resources for your app on the device and
this is a huge performance boost even if
you actually have a good connection
there are lots people who have no
connection for various parts of the day
I commute through London on the
underground train and I I don't get any
connection there they're also lots of
people with just bad connections and so
there's another part of my commute I go
to the countryside on a train and I have
pretty bad 2g for big portions of my
commute and I live in a near first world
country in a huge City so this problem
only gets worse when you go to remote
places or emerging markets and I say
this actually will improve the speed
even on a good connection you don't have
to go to the network at all for a lot of
these things now a lot of people they're
not quite sure how this will work for
their app surely it's on the web because
it needs the network and that's a good
point so offline takes different forms
for different applications so here we
have a simple this is actually google
doodle it's a crossword this can be
entirely offline there's no online
component here at all you put all the
resources in a local cache blowed them
all up and everything will just work
this is a very good case something like
Gmail obviously that's that's
network-based right but there is there
are things you can use you close the app
shell all of the user interface the new
message box here and obviously you can
cash messages that have already been
downloaded so the user can still read
them even while offline the same here
applies to hear something like a chat
app or something like that and then
worst case scenario your app really
really just needs to be online to do
anything you at least can control that
offline experience you can put your own
branding your own message you know maybe
you so if you by default are you in
chrome you get the little offline
dinosaur and if you click it you get a
game you could put your own game yeah
something something to do with whatever
it is that you're your business remain
what does this have to do with polymer
well there's an element for that
specifically platinum SW or the set of
patent esta hbu element the SW here
stands for service worker as matt said
and it's a new feature implemented in
chrome but it is coming to other
platforms mozilla have their
implementation i believe pretty complete
and it's in light leaves and they're
just waiting to make sure it's
absolutely stable and other browsers
have shown great interest in
implementing this so how does this work
normally you have a page and request
resources it just goes to the network to
patch them with serviceworker you add a
this intermediary this script that
you've written and any time the page
requests a resource this could be the
initial page navigation it could be
images scripts CSS or xhr or fetch the
service worker gets to say what to do
and it can go to the network and go to
the server and fetch that if it wants to
but there's also a cache API built in
with service workers and that stores
request and response /
so you can seek that cash with the
requests for your resources and then the
response that you need to give for all
of those resources and just return those
instead and never go to the network and
now thanks to platinum story you can get
the benefits of using service worker
just by adding a couple of elements to
your page so platinum has to be register
here just says I'd like a service worker
in my app that's not really going to do
a great deal in its own but we can
figure it by adding some elements inside
no no I happen Phil formatting error so
platinum SW fetch allows you to say how
to handle certain kinds of resources so
you see here that we've got this path so
anytime a resources fetch that matches
this path or this path pattern we're
going to handle it in a particular way
you can set these up for as many
different parts of your site as you like
Platinum SW cash just going to point out
this bit here first the pre cash this
says to the to the app as soon as the as
soon as you load this I want you to put
all of these things into the cash
straight away these are the critical
parts of my application so as soon as I
load put them into the cash so that they
are there for the very next time that
the page is loaded so here I've just got
as an example index 2.html and the CSS
file but you'd put in JavaScript and
images and whatever you needed to show
probably your homepage and maybe they're
the shell of your app and I kind of
skipped over this for the so there's a
handler in the fetch and there's a
default cash strategy in the cash
element the both set here to network
first but that in there you put in what
you want to happen for these resources
the one in the the default cash strategy
is what should happen when the current
resource being loaded doesn't match any
of your fetches
so what's all that about so there are a
bunch of different cash strategies
built-in network only is the simplest
one to explain because basically the
service worker doesn't do anything it
just lets it go straight through to the
server network first will so for that
resource we try and fetch it from the
server and if that doesn't work for some
reason then we'll look in the cash
instead this is better than not doing
offline at all but it's slightly
problematic because the that network
connection if it's just a bad connection
it could take two minutes for that to
timeout which would be terrible
performance so better performance cash
first if we have that resource in the
cash load it straight from there don't
even consult a network that one's always
going to be much faster for stuff that
you've got in the cache if it does go to
the network then when that's fetched it
sticks in the cash for next time so you
can use this for or call read through
caching and then my favorite one is
called fastest it's basically you go to
the cash go to the network whichever one
comes back first use that usually for
anything that's in the cache this will
be whatever is in the cash not always
apparently but when that network
requests because the network requests
always happens and it always updates the
cash when it comes back it means that
you're always you're only one refresh
behind so you're still you're slightly
spell perhaps and the the even better
one I guess is your own thing you choose
the behave that you need for your
application so we had one that was
network if fast enough so it would it
would try the network and then there'll
be a set time out just after 500
millisecond said no you're too slow go
to the cash instead so you try and get
the thing from the from the network
okay so with these building blocks we
can build all sorts of different
applications or ways of dealing with
offline in your application so so simple
read through caching you could set up so
you don't have any fetch handlers you
have a default cash strategy of network
network first or cash first whichever
you like and that will just every time a
resource comes through it will try the
network that you have to go to the
network first but then it will stick it
in the cache and then next time you can
get it from the cache so it will build
up the cash as the user goes around but
you don't do any pre catching you can
obviously precache all your resources as
i said before so that most of your app
works offline straight away some
resources you'll have like a huge header
image or something like that maybe you
don't want to store large resources
videos and things like that in the cash
so you say those ones are network only
and you can implement fallback media
instead so that you by creating your own
handler you could say for these
resources if the network is available
get it from the network otherwise we're
not going to bother cashing these things
just new send back a thumbnail saying
you're offline you can't see this click
to try loading it again something like
that and you can also have user-defined
caching so if you're browsing blogs blog
articles for example then maybe they'll
have a little button that says cash this
to read later okay so next up we have
messaging push notifications in
particular so these are notifications
that appear on your device because
something happened on a remote server
some trigger that completely outside the
application now so here we have an
example of this there's a this demo was
created by Monica who's actually
speaking later so here you you these are
for people who want to receive
notifications about
and who wouldn't so you you toggle the
button on say I would like to receive
notifications you get a little
permission dialogue and chrome which is
actually important we don't allow
applications to show notifications
unless you have that permission and
that's why we have this UI element so
that the user clicks it and then they
get permission notification permission
dialogue because then then there's
context for that decision the user knows
why they're having to click that button
say though on notifications later on
someone comes along and clicks the send
caps button and then later notification
arrives and this could happen while a
device while chrome is completely closed
and it could happen a long time after
and you get a notification you click it
and in this case you get a picture of
account which is perfect now how did we
achieve this magic there's an element
for that obviously platinum push
messaging as well as sending cat you
could use it for more serious things
breaking news chat messages new email
that sort of thing anything you get a
notification for on your phone already
platinum push messaging allows you to do
the configuration of all this right in
your application the the server side
here is more complicated and I'm going
to just gloss over and pretend it isn't
there but for anyone who is implemented
push messaging on Android the chroma set
up for dealing with chrome is exactly
the same as using google cloud messaging
and android little bit of client
configuration at the moment and we hope
this will go in the future but right now
you need a web app manifest file and in
there you need to have at least this GCM
sender ID which you get from the google
developers console again kind of gonna
got over that here
so here's the actual the actual element
so here we've just defined statically
what that what those notifications are
going to look like so we've got a title
a body and imaged show and a URL to go
to when we click you can actually set
all sorts of other things on this
notification like even the pattern of
vibration that should be the device
should use when the notification is
shown which is pretty cool but it's a
bit boring to have the same message
every time so instead we have this
configuration option this message URL
this URL will be fetched when it's about
to send pop-up notification and that
will instead have a bit of JSON that
describes what the notification should
look like has all the same options and
this allows you to dynamically make
those notifications based on whatever
data or server has at the time here I've
got a simple URL it's just jason bit
obvious you could put in query
parameters or something like that that
are specific to the current user so that
you can get message details that way
there is actually in the future you'll
be able to just have the element with no
configuration because they'll you'll be
able to send a body with the push
notification that isn't actually
implemented yet and then as I say you
want to you don't want to actually start
subscribing for push notifications
without asking the user so a couple of
things to do there I've written this
code snippet in es6 style as you can see
so we get a reference to the element and
then we hook up the toggle but too
little function just says if you just
enabled it run the enable method if
you've disabled it run the disabled
method and then finally when the
subscription information changes we get
an event and we can send that
subscription information up to the
server which one then how to send
messages to you
okay so final thing and I whistle stop
tour features is device access this
one's a bit more experimental it's
actually it's not even only in chrome
it's only on Chrome OS at the moment and
it's behind a flag in Canary but this
one's this one's a bit more interesting
so I wanted to give you a sneak preview
so web bluetooth is the api behind this
and allows you to connect to nearby
Bluetooth low-energy devices also
sometimes called Bluetooth smart and
while it is only an experimental API
thanks to my colleague Francois in Paris
as an element for that already the
platinum blue to that one and this is a
game pretty simple you create a advice
element platinum Bluetooth device
element you say you give it a services
filter it's just says I want to connect
to some device that has that is
advertising these services so here we're
just looking for something that
advertises heart rate and then inside
that we configure it and say we'd like
to know a particular characteristic of
those devices so we say the service is
the heart rate service characteristic
body sensor location which i believe is
where on your body you're wearing the
sensor and then we hook up the value of
that of that characteristic just using
normal attribute binding so we can just
take that data and put it somewhere else
in our app in this case in a spam now
these these names further services and
the characteristic heart rate body
sensor location they look pretty nice
unfortunately not every device has the
services and their characteristics with
nice names so you may have a uuid a long
string of hexadecimal digits but you can
probably find those in the documentation
whatever device you connecting to and
then similar to the notifications you
don't want to actually pop up the dialog
that says hey I'd like to
to choose a device to connect to unless
the user is trying to do that so you get
a reference to the device element and
then you call request say that you'd
like to actually talk to it and then
when you want to read because bluetooth
low energy is usually for passive
devices the the values aren't like
screamed to you so you have to call read
to make that property update but you
could do that in a set time I out or
something like or when a button is
clicked Bluetooth does a bluetooth low
energy does have the concept of
notifications which will mean that you
can get an event when the values change
that isn't actually implemented yet in
in the Bluetooth API so it's not haven't
implemented in the element either not
all ble devices are passive there and we
there was a cool demo produced by a
googler with the Bluetooth API I just
wanted to show you a little bit so any
day is he got he got this grumpy cat toy
and he attached some helium balloons to
it so that it would fly and then he took
it put a little Bluetooth chip inside a
little bluetooth module and stuck a
rotor in its backside and then with this
little control panel he then just made
it fly around his apartment we apologize
for the quality
it's not as smooth up there as I hoped
but let's just the appreciate that from
him so that was a whistle-stop tour of
new features coming thanks to polymer
thank you very much you can learn more
about the platinum elements at this link
here and there is actually a web
bluetooth code lab available in the code
lab area I believe we have some chrome
books up there if you want to try it out
so thank you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>