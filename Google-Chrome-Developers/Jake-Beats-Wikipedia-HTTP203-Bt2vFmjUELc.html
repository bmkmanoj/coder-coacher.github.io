<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Jake Beats Wikipedia - HTTP203 | Coder Coacher - Coaching Coders</title><meta content="Jake Beats Wikipedia - HTTP203 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Jake Beats Wikipedia - HTTP203</b></h2><h5 class="post__date">2015-11-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Bt2vFmjUELc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we did right how is how's your aim well
not great in the middle of the night but
I sometimes just sit down I say I meant
yes snooker you pool
or in this case your billiards ooh we're
going to a billion hole that we are sir
so I made a thing
that's unusual fear I know of like 2
mins as many months or something yeah
yeah it's a new thing it's it's a little
yes it is a web app is a website yes the
difference I will say it's an app flip
the coin it's it's an app no it's not
it's a site it's it's it's a Wikipedia
article viewer okay which I realize is
what Wikipedia does already yes but this
was more of an exercise in looking at
like performance like page load time
performance but you think you can beat
Wikipedia at a server-side render yeah I
did well so this is a thing so I was
posting on github so I was doing it
client-side render I know that all you
said it seemed like a nice simple way to
get into it and I so yeah I was serving
it just you know JavaScript down the
wire then javascript is going getting
the content put your on a page and I was
seeing you're looking at my official
figures 2.6 seconds for the first render
okay and 4.7 seconds for content which
even at that point was faster than
Wikipedia's actual official site but you
know I knew it could be better than that
okay what was in that first render first
render was just like the top toolbar
that said like Wikipedia and a spin okay
but you but from a user's point of view
they've got something they know they're
on the way okay and then I think it was
four point seven seconds to let the
actual Wikipedia article came down so
you actually got to see a good couple of
seconds there where you're spinning up
where you like your app doesn't seem to
be like Seidel is saying yeah I know
you're pulling your side face but don't
worry that's not a face I'm willing go
okay
okay well pulling your moving face I'm
actually I can tell you what I did
there's a happy man my other fated okay
so yeah I made the jet make the
JavaScript async and put some markup on
the page for that first render yes and i
inline the CSS for that first render
good and all all normal well you say
normal when I first heard that rule is
like I'll take some of your CSS out and
put it in the head I was like oh that's
a it's a big ask for those really oh
it's a request pal yeah I know oh my god
I hate you become Ellison say that yeah
next time you'll be asking to reason
about things or using modulo to reason
about I hate that one because it is just
developers not wanting to say they don't
understand why she did like modulo so I
do agree that it's too hard to a single
of CSS this is something that we have a
problem with on the platform yes I tried
it it's rubbish yeah we've got load CSS
from the filament group but it's a bit
it's more script than you shouldn't it
should just be async on the line should
be declarative yeah but more moreover I
think what Firefox and ie do at the
moment is actually really good it's a
bit of non-standard behavior if I really
like it put the link element on the page
in the body just before the content that
needs it and it will block the rendering
wait for it it'll block the rendering of
the subsequent content until that CSS
loads it's not blocking all page
rendering okay it's just the elements
after don't go into the render trigger
further we should do that yes the we
should take that one and we should also
have a sink as well
okay so right so we had a parallelizable
thing last I understood of where you had
the JavaScript that went off to get the
Wikipedia page and that's bonkers
and so yes I came to the same conclusion
I thought and this needs server and wise
man yep thank you this is the nerdiest
chair so holy looking at my calculations
once I introduced server rendering
things got slower right my eyes a bit
annoying my content render actually sort
of came down
a little bit not much but my first
render why it was slower because
connection goes off to my server yes my
server calls off to Wikipedia gets the
data comes back to the page sends it on
you're looking at a white screen for
longer now because you've got the
bottleneck of your third-party service
you know by taking that just the
JavaScript CSS the basic page shell yeah
down to nought point one seconds they
are as good as incident yeah for it for
that first render because it's all
offline and but here's an interesting
that happened is my content render went
because I'm now back to doing
client-side rendering yeah
content renders gone up again because
it's even though it's coming from the
cache there's two problems there's one
that it was the request to Wikipedia is
a little bit delayed because it has to
pass the JavaScript a wiki at pedia to
read it's delayed I like I was like hey
I didn't do that on purpose
nearly but yeah it's like cut that delay
by as soon as the request went to the
serviceworker had the service what could
go off and yet fetch a stuff for working
okay so how do you how do you then
because you still want to send your
response back with the the app shell
stuff yeah what you're talking about
there is chunked encoding ah okay so
this is the art of being able to being
able to quickly send data back like
without knowing your whole page content
so so I was able to send back like the
header in the first render stuff
essentially so now the browser knows
about the extra CSS and JavaScript needs
meanwhile or like that the first
possible opportunity my servers gone off
to Wikipedia and it yeah okay Havering
that yeah and then as it arrives it just
screams it through and and and that
slashed the rendering time we talked
about - well so we were at 1.4 seconds
for first render and I get the official
figures out so that's that with it down
to 2.4 seconds for content and that's
like the two-second saving completely
transcript does go 80 yeah yeah it's
pretty huge and can't really get any
better than that can you oh you can sir
by using a little technology you might
not heard of before serviceworker but as
soon as you take the content the page
shell offline that's that you can get
set of first rendering like no point one
second say the measurement came out this
is instant
really yeah
it was it took 9k of the content down
the wire and once I had that wrote it to
the page and then wrote again once I had
the rest and it was a total hack to do
that and this is why the my next wish
for the internet for the web web
standard is streams because I want to be
able to take some content that we're
downloading pipe it into an element and
it appears as it and I think once we
have that that kind of rendering as it
goes along I think that's when we can
see client-side rendering apps become
competitive with server I'll drink to
that
Cheers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>