<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Asking for Permission: respectful, opinionated UI (Chrome Dev Summit 2015) | Coder Coacher - Coaching Coders</title><meta content="Asking for Permission: respectful, opinionated UI (Chrome Dev Summit 2015) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Asking for Permission: respectful, opinionated UI (Chrome Dev Summit 2015)</b></h2><h5 class="post__date">2015-11-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4QQyjqtHwlY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone uh my name is Elizabeth
marant it's not that hard uh and I am a
product manager on Chrome where I work
on security so today you've heard about
a few new web AP is like notifications
and Bluetooth that allow you to make
amazing web experiences that are more
engaging than ever before and Owen
alluded to this example earlier beyond
the rack recently implemented push
notifications which resulted in a twenty
percent CTR so twenty percent of these
notifications users actually click
through and of those users who are
visiting beyond the rack through
notifications the site is getting a
twenty-six percent bump in revenue this
is huge notifications and other
permissions and other api's like it
allow developers to create new levels of
engagement but in order for users to
actually take advantage of these
features when implemented on your site
they actually have to say yes first they
have to give you permission so to set a
baseline what do you think is the opt-in
rate for geolocation on the web now this
number is specifically Chrome for
Android 28 days on a certain milestone
it's of every time that we show the info
bar what percentage say yes someone's on
zero well that is pessimistic what
twenty percent 25 well we're pretty
close to that three number hahaha our
opt-in rate today is six percent and so
we have a few guesses as to why this
opt-in rate is so low and and our
biggest bet is it's because sites are
asking for this permission at the wrong
time and now this isn't you know your
fault this isn't developers fault the
geolocation API is built in such a way
that in order to query whether a site
actually has the geolocation permission
a site has to actually request it first
and so there's no way to check without
annoying a user with a prompt and so one
of the things I me talking about today
is how to use the permissions API which
is a new standards API that allows
developers to ask for permission not
just your location but
permission at the right time and to
round it out the opt-in rate for
notifications is a little bit better at
seventeen percent but still we can do
better so we've seen examples of runtime
permissions models in the wild that work
really well so an example of this is iOS
there are certain apps on iOS that just
asked for permission in a really
respectful way so this is a set of
screenshots from the iOS school photos
app and during the install flow they
show an interstitial saying get
notifications and they don't just
immediately show the system prompt
saying you should opt in to get
notifications from your cool photos app
instead they give you a reason why and
the reason being they're going to do
some magic in the background with all
your photos and then after a while at
random points in time they're going to
create awesome videos and then let you
know when they presented you with this
gift right and so every notification is
basically like a present um so I opted
in to getting notifications and so did
eighty-eight percent of users who saw
the system prompt to opt into
notifications and now this is smart for
another reason to not only does it
manage user expectation but it also
means if the user doesn't hit turn on in
the app UI at this moment in time the
app still has the ability to ask for
this permission again later when it's
had time to prove value and so this is
iOS but we've also seen good examples of
this implemented on the web but
Financial Times recently launched a new
version of their site where they send
you notifications when exciting news
happens on topics that you care about
and so the idea is that you switch
notifications on and then you can choose
different categories that you want to
know more about like arts and
entertainment or World News and then the
Financial Times will send you a
notification when something interesting
happens in that space and with this you
why because they explain the value and
they act on the promise that they
display in the in this flow they have a
ninety percent retention rate so of all
the users who opt in to receiving
notifications of the Financial Times
only one in ten end up revoking the
permission later
so we all know especially now that not
every user is going to say yes to a
permission when you request it so why do
we have them at all right why don't we
just let any developer or any app use
whatever API they want well this is for
two reasons the first is usability
giving users control over what sites can
do and can't do with their data and the
second reason is for security I'm going
to walk through examples demonstrating
both so say that you use gmail or
Twitter on the web these are good
examples of sites that you engage with
pretty regularly daily if you're on
Twitter during the summit probably
pretty regularly during the day and for
that reason when you open the site it's
really nice when you have all the
content pre-loaded um and so native apps
do this today you know you open up gmail
and all your your inbox is refreshed or
you open up Twitter and your feeders
refresh because they have background
sync and background sync is an API that
we're working on for 2016 and it works
great for these two cases the background
sync is not a fit for every site that
you visit on the web and as we learn
from Darren earlier people averaged
around a hundred different sites a month
so imagine if every single site you
visit has access to background sync well
then your phone would functionally be a
brick because you'd run out of battery
pretty quickly so that's one reason why
we have permission prompts it's that
users can have control over what sites
can and can't use given aps so the
second reason and probably the most
significant reason why we have these
permission prompts is for security so
say that these hundred sites that you
visit every month all get access to your
camera right that's a pretty fast track
towards a dystopian future you know the
movie rights itself and so it's really
important that we give users control to
grant camera or other sensitive api's to
those websites that they implicitly
trust and this is also the reason why
we're deprecating the support for
powerful capabilities over insecure
origins so starting in verse
47 of chrome sites that are served over
HTTP no longer can request a camera or
mic and likewise we're planning to
impose the same restriction for
geolocation later next year in all new
API is like notifications and others
coming soon have a strict HTTPS only
requirement and the reason for this is
because even if you have the most
trustworthy site in the universe like
you are the best arbiter of sensitive
data if you serve your site over HTTP
then you lose all guarantee of security
for that users data right like I could
be accessing your site in a Starbucks
and just because I trust you to handle
all the photos I'm sending you over the
connection it doesn't necessarily mean I
want everyone in starbucks to see the
photos that I'm sending using camera on
your site and likewise htps is important
as eight Emily alluded to earlier for
preserving the integrity of your site so
without htps there is no guarantee that
I know oh sorry I know who I'm talking
to and there's no guarantee that you can
prove it to me all right so permissions
are great and they're here to stay um so
how do you actually build an app that
ask for permissions in such a way that
users say yes so for the purpose of this
talk I am working on a demo app and the
premise is simple if you live in the Bay
Area then you probably know that there
are two types of whether there is
sweater weather and then on the rare
occasion there is t-shirt weather and
because of the rare occasions when you
gotta wear a t-shirt because it's so hot
every morning you have to wake up and
you're like look at your window or check
the weather and just confirm that what
you're wearing is fine so I'm paid an
app that eliminates that friction uh
it's pretty simple uh you just go on to
the site it's one page it tells you
whether you should wear a sweater or not
you opt into giving me location and when
and whether you want to get
notifications and if you get the site
both
then every morning it does a check and
it sees if it's above a certain
threshold to be sweater sorry t-shirt
weather and on those rare occasions when
you want to wear a t-shirt it will send
you a notification so i mentioned i'm
working on the site so it's worth
mentioning that I have all the
permissions stuff down the notifications
won't actually send but you should
totally opt-in anyway and crew improve
our global option rates um where you can
you can play with it and see how to ask
for permission and that's really what
the demos for and I'm working on
finishing it up soon second thing to
note is that for this app to work i'm
using a couple of features in the
permissions api that haven't actually
been fully released yet and so the
permissions api is an open standards api
implemented by chrome and opera and
there are just certain features which
i'll call out during the talk which are
only available if you are visiting the
site on canary or death and if you have
this flag flipped on okay so the purpose
of this demo is to show you some
principles to follow when requesting
permissions on your site so i'm going to
walk through five key principles the
first is communicate intent and provide
clear value so when you're requesting
notifications say it's really important
to say exactly what you're going to be
bothering the user with so my example I
say notify me when it's t-shirt weather
it's very clear that the only time users
going to get bothered is when I actually
have something meaningful to share and I
know that I personally as a user I'm
very stringent with granting
notification privileges apps there's
some messaging apps I don't even give
Commission's to and so explaining
exactly how it's going to be used is
super important and so you can imagine I
could have said something like send me
notifications and it would likely get a
far far fewer user saying yes or
toggling it on and
second set point here is images are
always going to be better than words and
this is because images localized better
if you're trying to have if you have an
app and you want it to work cross locale
it's much easier to communicate value
your user experience or through images
rather than actual text and so here for
location I use this location icon that's
shared with a number of other location
focused apps like Maps it's also
important because even if your app is in
a language that the user speaks people
don't always read the manual right
people like to play with things and so
the quicker you can get to communicating
intent without actually using words the
more likely a user is going to
understand how your app works and
whether they should opt in or not second
principle is ask at the right time so
Owen mentioned this I mentioned it
earlier with geolocation the absolute
worst time to ask for permission is on
load and now you don't have to do that
anymore right the permissions API allows
you to query for a permission state at
any time so let's just stop doing this
better practice is to ask on user
gesture so if you give the user and
affordance an ability to indicate that
they actually want to use a permission
or I use an API then that's the right
time to ask for permission you can
imagine an example this being like a
camera app where you take a photo and
then you oh no add some effect to it a
good time to ask for permission in that
example would be when the user tries to
take a photo because you know they
really want your site to have access to
the camera in my example for
notifications I use the switch of the
toggle as that user gesture the
indication that a user wants
notifications so the way I do this is I
just add an event listener to detect
when the toggle state has changed so if
the toggle is switched on then I request
notifications
and when a user toggles it back off i
revoke a third principle is only ask for
what you need so say you have this
amazing camera app well it just because
you can ask for every permission that's
available or every API it's available on
the web doesn't necessarily mean you
should write your camera app probably
doesn't need bluetooth it probably
doesn't need notifications unless there
is real reason for you to have it that
being said we do make it pretty easy for
you to bundle permissions requests and
so one of the new features of the
permissions API is a disability to
request all and so there are some points
where it's absolutely appropriate for
you to ask from multiple api's at the
same time so the example I have pictured
here is you there's a button that says
notify me when I'm near coffee in this
case it makes sense you do need to give
up your location and the know Kate
notifications permission so that the app
can tell you when you're near your
closest I know Starbucks or whatever
that being said do not take api's
hostage so it would not be appropriate
for me in this case to add bluetooth as
a permission request just for the sake
of it and the reason for this is because
I haven't communicated in my app what
I'm using bluetooth for and it lands
users into this weird state of confusion
we're not only do they not know why
you're asking for this third permission
but they also now don't know if you're
not being totally honest with what
you're using the first 24 so what your
request should map what your UI
communicates alright fourth principle oh
sorry this is what it looks like
it's pretty simple you just add the
parameters for the permissions you want
to request use request all that's it
alright fourth principle is give users
control so in a world of progressive web
apps where users are adding your website
to their home screen and they open it up
in full screen as a service worker weird
users actually manage permissions with
no chrome you i right today it's pretty
simple if you have the URL and you like
hit the overflow menu and you go into
permissions and that's where you do all
your management but in this world that's
not as not as clear and so that's why if
you have one of these awesome full
screen apps you should give users an
ability to manage the permissions in the
app itself and so in my app I use the
toggle and the location icon to allow
users not only to indicate that they
want a permission but also indicate when
they don't want it anymore and I do this
with revoke which is another
experimental feature and so this is the
code snippet from the first example
where I waited until the toggle was
checked and when it does is if the
toggles in the checks position then it
requests notifications and if it's in
the revoke or sorry if it's in the
unchecked position then I just revoke
okay and last principle is handle
failure gracefully so the absolute worst
thing you can do when a user goes in and
manually revoke the permission or
doesn't give it to you in the first
place is to crash and the second worst
thing to do is to not communicate what's
happening and so in my app what I do is
if a user changes a permission state
then the UI updates accordingly to
communicate why something might not be
working so in this case if the idea is
that like the app would default back to
set location and if this isn't updated
to your location you see that you've
declined the note the location
permission which means that it's not
updated to your location like
Minnesota or wherever so you want to
design for resilience so that when users
go in and do wonky things that you're
not expecting or you don't want your
site kids should continue to work and
communicate why it might be behaving
differently and so what I do here for
the location example is I query for the
state of geolocation permission using
the Commission's API and then when that
state changes I update the UI and I
update the functionality of the app to
reflect the new state of the permission
so it's if it the geolocation
permissions denied either through the UI
you're through Chrome settings I disable
the button and I fall back to default
location likewise if a user goes back to
the ask defaults then I enable button
and fall back to default and then if the
state is granted then I enable the
button it's big and blue and a query for
the current location so taken together
when asking for permission you should
provide clear value ask at the right
time only ask for what you need give
users control and handle failure
gracefully and now there's clear
incentive for you to do this on your own
site it enables users to know what
you're using your given API is for and
it just creates a better experience
overall I'm going to add two additional
incentives for why it's wise to follow
these principles and the first is chrome
is working on a way to moderate the
abuse of certain api's on the web so we
don't have an app store we can't take
down sites but we can do is monitor and
make sure that they're being used
effectively and so this is still we're
still thinking about it it's still
mostly conversation at this point but
we're hoping to create some sort of
policy for for abuse on on the web and
now this isn't the first platform that's
thought about this Facebook actually
does a really great job of managing
abuse of notifications on their own app
platform and
so if you're a developer and you send
over 50,000 notifications a week a week
in your through your facebook app then
you have to meet a certain minimum
threshold of seventeen percent CTR in
order to continue having the full
functionality of your app this is a
great example of how a platforms are
thinking about allowing the use of these
powerful features while also managing
the risk of abuse and spam and now the
second incentive and the one I want to
leave you with is asking for permission
at the right time doesn't only help you
but it helps the web ecosystem on the
whole so what you're seeing here is
we're doing a net we did analysis on a
small subset of Chrome users to see the
effect of seeing multiple geolocation or
prompts across the web on their tendency
to interact with or accept a given
request and I say this is a subset
because the CTR is hovering a little
under twenty percent and again the total
CTR is six percent this graph in reality
looks like this so if you are more
stringent with when you actually ask for
permission whether BG location or other
permissions then this means that the
next site that a user goes to they're
also going to be more likely to say yes
there and there and it perpetuates
across a user's experience on the web at
the hole so I hope this was educational
and you're excited to use the
permissions API if you want to get your
hands dirty we have a code lab available
it's at the bottom of the code labs on
the CD s site and i'll also be outside
taking questions if you have them after
the talk thanks
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>