<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Alerts! -- A11ycasts #10 | Coder Coacher - Coaching Coders</title><meta content="Alerts! -- A11ycasts #10 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Alerts! -- A11ycasts #10</b></h2><h5 class="post__date">2016-12-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5lzAj1ahRSI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey buddy what's up it's Rob Dodson
welcome back to the alley cash show so
in the last two episodes we were looking
at screen readers voiceover and in VTA
and getting you up and running with
those and recently there was sort of an
internal thread that I was a part of
where someone was asking you know if I
have users who are using a screen reader
but I want to dynamically like add some
new content to the page like maybe I
want to display like an alert banner or
some sort of like info banner at the top
of the screen how do I do that in a way
that gets properly announced by a screen
reader so I thought today would be kind
of a cool time to dive into how to build
alerts and how to build these things
called Aria live regions so in a
nutshell on an alert in Aria there's a
specific role that you can use and what
it does is it transforms an element into
what's called a live region a live
region is sort of like part of the page
where we've told the screen reader sort
of ahead of time hey we're gonna update
this thing we're gonna add some new text
content to it and when we do you should
go ahead and you know announce that to
the user either spoken through a screen
reader or through like a Braille display
of some kind so follow me over here to
the Aria authoring practices guide what
I'm going to do is I'm going to try and
build a really quick and dirty alert
just to show how live regions work so
over here on the side bar I'm going to
find my alert pattern and the
description for alert is pretty simple
it's something that displays a brief
message it's used to provide important
and potentially time-sensitive
information to a user so for instance if
they were looking at a weather website
and suddenly you know terrible weather
was happening you might drop that into
an alert to make sure they know about it
the main thing we want to do though is
we want to make sure that if you're
making an alert that you don't make
something that has to like you know that
disappears off the screen really quickly
because the user might not have time to
see it or interact with it so when we we
make alerts on screen it's really nice
to have them sort of stick around so a
user can go over and click on them to
close them if they need to or so screen
reader has time to announce it via the
aria-live region what we're gonna do
here today instead of actually even
needing to mess with any Aria attributes
like like Aria live or anything like
that all we have to do is use one role
attribute and that's going
give us a lot of the kind of the cool
magic of creating our own live region so
if you look at the pattern here it says
an alert needs to have a roll of alert
and what that's going to do is
implicitly basically set up the thing is
an already live reach in and give it
sort of an assertiveness of assertive
there's two assertiveness that you're
gonna have Authority alive assertive and
polite assertive means it's gonna just
interrupt whatever the screen reader was
talking about and go ahead and just say
what's in the alert and assertiveness of
polite means that if the screen reader
was already reading something the live
region would you know wait to finish and
then go and say you know whatever the
alert content was in this case using the
role of alert is going to make this
thing assertive so it'll interrupt
screen reader and just like say whatever
we give it now they do provide an
example here which we can check out and
this example has a little bit of CSS
analytic of JavaScript associated with
it but I noticed when I was trying to
use this example that it doesn't seem to
work in voiceover on Chrome and in
Safari on a Mac though it did working in
BDA so for instance I'll just show you
what happens when we try and use this
using voiceover it should announce the
alert box but let's see what actually
happens so it opened the alert but we
didn't actually hear it announce
anything now my rough understanding of
the way that live regions work is that
the the browser or it might actually be
the assistive technology I'm not quite
sure who but one of them is sort of
pulling the document at certain
intervals since of checking to see like
Hayes is their new content inside of a
live region in the example that they've
provided here what they're doing is
they're just sort of inserting the alert
with the role of alert just at runtime
right and so if the screen reader or if
if Chrome if one of those two was
needing to sort of like pull the
document ahead of time to look for live
regions it might not see it when it you
know if it just gets inserted
dynamically like that so one workaround
that I've seen people use is to go ahead
and have the alert element just sort of
like in the document already and then
just sort of pipe new text into it so in
the document it's maybe not visible but
there and then we need to alert the user
of something we just add some content to
that so let me show you how you can do
that let's go over to jsbin
and uh let's say I'm just gonna go ahead
and create like a section for my site
and I'll give this section a roll of
alert okay so now I've kind of
implicitly created a live region if the
screen reader is polling for the
existence of live regions it should see
this thing because it's in the document
already but it's not displaying anything
right it's just sort of this empty thing
at the top of my page and then I'm gonna
drop in a button and we'll just say you
know show alert or something like that
and let's give this button an ID so we
can grab with some JavaScript later also
gonna give a section here an ID so I'll
say it's ie is alert and then what I
want to do is I'm gonna create a
template and template element it's
something that is not going to display
its contents on the page where we can
grab with JavaScript later and insert
that into that section so I'll create a
div inside of here called notification
and you know maybe we can give it some
text content so we can say your account
is active or something like that let's
give this template an ID as well so
we'll call this notification all right
and then we'll just write a little bit
of JavaScript and what we're gonna do is
we're going to say when the user clicks
on the button grab the content of that
template and drop it into that alert
section so we'll say button is document
query selector mmm button we will do the
same for our little alert area so we
have a reference to that and we will
grab a reference to our template so
we'll say we want notification template
alright and then any time someone clicks
on that button I'm just gonna use one
click here some work and kind of like
quick and dirty so say any time someone
clicks along that button
let's go ahead and clone the content of
our template so I'll say template dot
content dot clone node is true so clone
note if you haven't worked with it
before if you haven't worked with
templates really when you call template
content it's going to give you sort of
like a document fragment representing at
the content of that template you want to
clone that
you don't want to modify the template in
place or anything so you want to make a
clone of the template content and he
passed out the true flag and what that
does is that says make a deep copy of
everything inside of the template so you
know if it's if there's a ton of nested
Dom inside of there you'll grab all of
that alright so I've got a clone of
everything inside of my template and now
I'm just going to take my alert and I'm
going to append child batch clone so if
we test this over here and we say show
alert we should see your account is
active so let's save that let's go over
to our output and now let's try this
version using voiceover and see what we
get your account active voiceover off ok
great so now we have our alert showing
up which is awesome but you know we can
do a little bit more we can make this
look a little bit nicer and maybe we can
make this function like reusable too so
that way any time you know we want to
alert the user of some new content we
can just pass in a string and have that
display so let's start by making it look
a little bit nicer so I'll drop in style
tag and I've got some styles that I've
just gone ahead and saved so for our
notification I'll drop in these styles
right here okay so we're just gonna like
make the text look a little bit nicer
we'll change our body font family to
Helvetica because we're like total
hipsters so Helvetica arial sans-serif
and let's also make sure that that alert
section has like a like a bottom margin
of like 20 pixels or something so it's
not like pushed right up against the
button so now if we look at this when we
click show lurch let's save it refresh
here click shoulder there we go so now
we've got this with like big green
active banner at the top of our screen
let's see what we could do then also
instead of this like you know hard coded
message right here let's get rid of that
and instead when someone says oh hey you
know I've clicked the button we'll just
say we'll take that clone and we will
query selector inside of it and
we add some spaces to the bottom so you
can see us well query selector inside of
that clone and look for this
notification class right here so we'll
say give me a TIF vacation and then
we'll set its text content equal to you
some other message like you know you win
awesome so you try that and now I got
that working yeah we try that over here
screenreader voiceover on Chrome you win
voiceover off nice so that is a quick
and easy way to get alerts and you know
notification banners and toasts and
things like that working in your
application it is a little bit of a
workaround but so far what I've seen is
that this works consistently on Macs in
Chrome and Safari voiceover and in
Firefox on NVDA on Windows so this could
be a really useful solution if you want
a sort of a cross-platform cross browser
way to notify the user of new content so
that about covers it for today if you
have any questions you can always leave
them for me down below in the comments
or hit me up on a social network of your
choosing
as a link you so much watching and I'll
see you next time
hey if you enjoyed this episode of alley
cat you can always catch more over in
our playlist or click the little
subscribe button and you'll get an email
notification whenever we launch new
stuff on the channel as always thanks
for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>