<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lighthouse, Totally Tooling Tips (S3 Mini Tip) | Coder Coacher - Coaching Coders</title><meta content="Lighthouse, Totally Tooling Tips (S3 Mini Tip) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lighthouse, Totally Tooling Tips (S3 Mini Tip)</b></h2><h5 class="post__date">2016-10-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6LQJtH90-aA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today we're gonna talk about
lighthouse a tool for auditing your
progressive web apps and just your
general web apps for performance best
practices general you know web dev best
practices I kind of think of it as like
PageSpeed insights but the new more
fanciful version it's PageSpeed insights
on steroids yeah that's a nice series
okay so the first thing we're gonna do
we're gonna dive right in
here we have a progressive web app and
we're gonna use the lighthouse Chrome
extension on this so as soon as you've
got it installed you can go and click on
the extension and run generate report
and what this is gonna do is it's gonna
run through a number of different
gathering passes
I'm gonna check a bunch of different
audits out and it should hopefully
generate you a nice cool looking report
like that
right off the bat now this is useful for
a few different reasons um it'll check
different features like you know do you
do you have support for something
meaningful when you're offline or on
flaky network connections you know is
your page load performance fast it's got
nice tracking for things like first
meaningful paint input latency time to
interactive interactivity is sort of
really important these days because a
lot of times when we you know when we're
using libraries or frameworks to ship
apps we're shipping large JavaScript
bundles down the line perhaps not
chunking those out as much as we can
meaning that you know you can you can
render something on screen but it's not
gonna be something the user can actually
interact with yeah and it's also got
things like it checks whether you've got
a web app manifest whether you're
defining certain parameters in there
which would allow people to add a time
screen and stuff like that one of the
really nice things with this is as the
web kind of grows and this new API is
being added lighthouse is a nice way of
keeping up to date with those because
they'll actually add in checks for those
things and if obviously you haven't got
them it'll highlight it for you so it's
also a one way of just making sure that
you're a good solid web app following
best practices but also helps you stay
up to date with new things as they land
exactly so lighthouse also tracks you
know best practices checks on
accessibility but it's also possible to
run your own to write your own custom
audits for checking you know your own
best practices because your team might
have some of those that they want to
keep an eye on but lighthouse is super
sensible easy to write your own audits
now although we've been using it as a
Chrome extension it's totally also
available as a CLI tool so let's go and
check that out so here I've got
something I'm going to show you a little
bit later but first we're gonna run
lighthouse against you know basically
the nautical nautical W a Earhart or
comm I think Paul Kinlan owes us some
affiliate money for this now but
basically we're running this at a CLI
level what's going into running the
exact same tests you can see chrome
running in the background and off the
bat you have this like really nicely
formatted report that has all the same
info tells us you know what our time to
interactive score is like you know do we
have a serviceworker registered are we
you know responding with the right
responses when are offline and so on
this will also output the report to a
file locally so you can go and you can
check that out if you want
SuperDuper nice it's also possible to
sort of use lighthouse as a node module
in case you want to write your own tools
on top of it and maybe you know one
thing that as we're showing is another
little tool that Paul Irish wrote that
reused as lighthouses data called
progressive web metrics so what we're
gonna do is I pull down the latest worst
of that just gonna go and run it now
this is running the exact same tests
that's spinning up Chrome in the
background but what should output here
hopefully if everything goes okay is a
number of different like really nice
prettily formatted
graphs that show you you know what is
your first meaningful paint look like
when are you visually complete what's
your time to interactive score and how
long it's been since navigation started
so you just want to keep an eye on that
because you don't want your users having
to wait forever and ever and ever never
never before they can see and interact
with your experience so the nice thing
about this is it's just highlighting the
fact that you can pull in lighthouse as
a node module yourself run exactly the
same test but if there's particular
rules that you care about or like for
example maybe your team is just working
on Service Worker support and you just
want to track offline over a period of
time or other things around that nature
you can use lighthouse and just rip out
the particular rules that you care about
and show it in any way that works for
you yeah totally so another thing I'm
gonna show you so let's let's open up
lighthouse really really quickly once
again I'm gonna
open up airhorn accom and I'm gonna use
a little flag called save assets on that
so we're gonna go and we're gonna do
another one of these gathering runs
collect all the data okay so it's done
and now if I open up this directory I
probably shouldn't have n using that
directory for it I can go into Chrome I
can open up a brand new timeline I can
go and I can load my timeline data just
need to pull up my projects or or what I
can do here cuz you know yes surely
chrome supports this is I can go over to
here and drag this into time I know it's
okay okay so what you can see here is
that the trace generated by lighthouse
is totally open the bullabbai time line
in case you want to go and inspect this
further super duper nice lighthouse can
also be used as sort of a post processor
for any of your traces so super useful
for like making the best use of this
data ya thing I like about this if
you're if you've got a CI you might want
to save some of these assets over a
period of time so if anything does
happen we'll start going wrong you've
actually got the traces to go with it as
well so you start debugging straightaway
like how the airhorn was doing amazingly
looking at this timeline just because
there's basically nothing in the app
other than like one button yeah which
surprisingly has had a number of bugs
over a long period of time you're
talking about it just it just does one
thing it's great so we've talked about
you know using lighthouse as a node
module but you know we've been talking
also lately about the importance of
testing on real world devices focusing
on interactivity focusing on network
connections like 3G where you know
that's probably what people are using
out in the wild Matt he's going to show
you what this looks like on a real
device when you're trying it out would
like yes so if you go to the lighthouse
readme there's a small section like
lighthouse with mobile devices and the
real important command is this ADB
forward TCP and they're basically all
that's doing when you run it is it opens
up a socket between your device in your
laptop so once I've done that I can just
go ahead and run lighthouse with - -
mobile and once I run that I'm just
gonna stick it on my site you're gonna
start seeing exactly the same thing as
you've seen on desktop where the website
is reloading it's being doing all of
this auditing we've got the CLI going
crazy pulling in a loaded random bits of
information but at the end we end up
with the same report as we saw from a
day before and CLI that you
also get from a Chrome extension so we
start seeing scores I'm not doing great
in some aspects but others are fine but
yeah it's super handy because it means
if the device is on 3G the tests will
actually be running on 3G and if you've
got a slow device if anything like the
scrolling test that I think they're
looking at that probably going to be
affected by the performance of the
Android device itself so you can start
getting regular testing of these kind of
aspects cool so Matt's not doing great
in some aspects but as lighthouse scores
are also you know and on that note he
just released case just released a brand
new guide on Auditing web apps with
lighthouse over on developers.google.com
please feel for you to check it out it's
using the canonical yeah of course go
check that out try out lighthouse let
you know you know let us know what you
think if you have any feedback at all
please feel free to file issues oh yeah
that was my house yeah check out the
links in the description</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>