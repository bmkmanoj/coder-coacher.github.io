<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learn Web Security with Google (Google I/O '17) | Coder Coacher - Coaching Coders</title><meta content="Learn Web Security with Google (Google I/O '17) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Learn Web Security with Google (Google I/O '17)</b></h2><h5 class="post__date">2017-05-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tgEIo7ZSkbQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">module my name is Ellie Bilson I work on
auntie abuse and security research and
today with you on work on web security
research and Eric who work on webmaster
relationship we're going to tell you how
you can learn about web security with
Google but before we get started let's
do a quick show of hands how many of you
had their website compromised or know
someone who has a website hacked come on
don't be shy raise your hand
yep this is not super all most of you
raise your hand this is not surprising
in 2016
hacking has never been so prevalent we
found 32% more website compromised than
ever
so hacker good try to hack your website
for many reasons from attacking your
user by sending malware to them or
trying to fish them to using your
resources as an attack platform to hack
other websites to try to steal your data
and expose them in either way when you
get hacked the consequence is operated
here you are losing the trust of your
user and potentially severe financial
loss some of the lasting effects such as
user trust can take year to recover so
this is why it is essential to keep
security at the forefront of your web
strategy and make sure that you invest
in security constantly from when you
develop a new thing so when you maintain
it so when you upgrade it I'm pretty
sure you already know that because
otherwise you will not be there today
right so today what we're going to do
we're going to walk you to the resources
that Google provide to help you secure
your website and defend against hackers
more precisely we're going to go into
two topics first Eric will cover how you
can get help on Google when you get
hacked
what are the resources we have to help
you clean up and to help you we secure
your website then which you want we're
going to give you a sneak preview of our
upcoming what security courses and we
are very excited to release later this
summer
to make it very practical and give you a
sense of what
going to learn we're going to give you a
short overview followed by a sneak
preview of one of the lecture the SQL
injection lecture and of course because
we want to add something which is really
hands-on would have a lot of demos today
that is that works of course and let's
go and - right jump right in Eric
they're all yours thanks Ali so first
off hi mom I'm on livestream right now
and my mom's watching so I'm super
excited I always want to do that so hi
mom okay let's jump right in so what you
should do if your site gets hacked
you're most likely going to get some
type of notification from Google's
perspectives that notification is this
read interstitial that you may have seen
it could be some type of notification in
search results
now notifications don't only have to
come from Google right if your users are
emailing you and they're saying I'm
getting redirected there's something
wrong with your site or if you're
monitoring your web traffic and you see
some spikes those are all early warning
signs that your site might be
compromised and you'll want to check
those out as Ellie said if your site is
compromised this financial burns brand
reputation it's really annoying and
worst of all your users are trying to
get to your site and they can't get to
your site so it is in your best interest
to clean up as soon as possible now the
process of cleaning up it can be quite
daunting it's going to take some time
but if you follow these steps
methodically there's a really high
chance that you can clean your site and
so I'm going to walk through these
really fast the first thing is the
quarantine your site that means taking
on your site offline or if you can
isolate it to certain parts take certain
parts of your site offline in this space
you'll want to change any usernames
passwords user permissions the whole
point being you don't want to be hacked
while you're trying to fix your site
right and also you don't want your users
trying to get to your site while it's
compromised so taking your site offline
temporarily it's usually the best move
you also want to start building your
team here talk to your hosting provider
they may be able to help you talk to
your wider team let them know that in
these next few steps you're probably
going to need their help
identification this is probably the most
difficult part and the most time
consuming hackers are constantly trying
to prevent you from removing the hack on
your site and so they'll do weird little
tricky things like cloaking
you'll go to a page and you'll see oh
this page is showing an HTTP 404 but
it's still serving spam to your users
and search engines so identification is
really important but it's going to take
some time at this pace you'll also want
to identify the vulnerability because
you want to understand how hackers on
your site cleaning up is just about
removing those files and then testing
making sure that your site is running
well again that's that's the main part
of cleaning up and that's really all you
need to do patching is about closing
those vulnerabilities that you
identified earlier to make sure that
hackers can't compromise your site again
this is super important a lot of people
miss this and their sites do get
compromised again so don't forget to
close those vulnerabilities one of the
easiest things you can do is just to
update your site software your CMS is
your plugins things like that just make
sure that they're updated and that'll
close a lot of vulnerabilities finally
if your site was flagged by Google you
saw those retirin or socials on your
site or you saw some warnings and search
results you'll want to tell Google that
your site was hacked or that your site
is cleaned up so that they can remove
those flags the steps we talked through
just now they'll work for most types of
hacks on your site but we've been doing
a lot of research and we've realized
that a lot of hacking campaigns they
work in very very similar ways and this
helps us understand how users are how
attackers are scaling their attacks how
they're trying to fly under the radar go
against detection and this also helps us
build better detection systems and
better documentation for our users we've
identified three major hacking campaigns
so far the cloak keywords and Link hack
where they create cloaked pages they
dropped keywords and links on those
pages the gibberish hack the gibberish
hack creates a bunch of longtail
keywords and then uses a domains
reputation that will rank well and then
when users click in they get redirected
to the spammy malware bad sites and
finally the Japanese keyword injection
this target specifically Japanese brand
name goods and sends users to
counterfeit websites and attempts to
sell them fake goods we've been able
because we've been able to cluster these
sites in this way we've been able to
create really great documentation step
by step guides for each one of the
attacks and I'll link you to these
documents
in a second because I think it'll really
help if you your friends or someone that
you know as you sit as you shown in the
show of hand has been hacked or will be
hacked in the future first though I want
to talk you through the gibberish hack
understanding how these hacks work are
super interesting because it will help
you with remediation in the future now
this is what the gibberish hack looks
like it's really plain again longtail
keywords trying to use the domains
reputation or rank well redirects users
the underlying mechanics behind it are
also pretty simple when you you know put
it into three separate pieces the user
clicks onto the site they're redirected
in some way or fashion to a spam th to a
PHP generator script and then those
users are then redirected to the spam so
the first important part of this whole
chain is this redirect if you can
identify how that redirect is happening
where it's happening you can identify
the other parts of your site's that have
been compromised as well in this example
the htaccess file has been compromised
three lines of code it's going to
redirect your users coming from major
search engines and then send them to
this page right here the spam dot PHP
page generator page so you can see right
now that you've identified the other
piece of the chain right and so this is
the piece that you want to identify
later it's not going to be called spam
dot PHP that's way too obvious we've
seen hackers call things horse duck too
we've seen them try to mask as core
files like W key underscore config
instead of WP dash config they're really
trying to trick users from accurately
and quickly fixing their sites okay so
from the redirect we see that your sense
of the page generator page now you're
probably going to open this file you
want to figure out what's going on right
you're curious you're curious how
they're is they're they're doing all
this damage and you're going to get
something like this this is just pure
gibberish they've obfuscated they've
encrypted they don't want you to find
out exactly what they're doing it's
really difficult to understand what a
lot of these scripts are doing even if
you do the office gate you take the time
to figure out you know this is exactly
what the code is it's still not really
human-readable this is not coding best
practices your CS professors would be
appalled by looking at this luckily for
you all you really need to do is remove
this file I would ask that you backup
these files just in case just in case
they are good files and later on if you
do want to do some forensic work it
could be helpful having these files as a
backup so just backup just in case you
can see these two files they've done a
lot of damage to a website and so that's
why you don't even want to be in the
phase of cleaning looks like the
cleaning a website is difficult it's
financially costly it's annoying if you
have brand reputation your brand
reputation on the line and that's why
the key takeaway here is that prevention
is key so let's talk about a couple
quick things that you can do today right
after the session in order to help with
prevention first off back up your site
there's a lot of people that don't back
up their site and that's actually a
little baffling to me I'm definitely
back of your site as often as possible
if you do get compromised one of the
easiest ways to recover is just to
restore a backup version of your site
remember that even if you're restoring
the backed up version your site that
vulnerability that the hackers initially
got - probably still exists so you want
to fix that vulnerability secondly sign
up for search console if Google does
find that there is compromised on your
site we'll send a notification via
search console this is this is one of
the ways that Google communicates with
webmasters about not only security
issues but a lot of search issues as
well and finally update your code your
CMS your plugins or themes like I said
before this is one of the most common
ways that attacker is compromised site
and I know this is difficult because
I've talked to a developer before and
she said my client they don't want to
update their site because if we update
the core CMS bill files they're going to
mess up a whole bunch of plugins um yeah
that does happen right but it's really
in your clients best interest to update
and you have to convince them you have
to talk to them about making a site that
is both secure and still works for them
so that's a really really important
piece
as I said earlier there's a lot of
documentation that Google can give to
help you our webmaster have hacked Help
Center is that geo slash hacked
webmasters and that's where our security
guys are though the ones for the
specific hack campaigns that we've
identified and where we're constantly
building more of these guides for
different types of hacking things that
we've identified the second thing is the
webmaster help forums we have a lot of
awesome top contributors experienced
webmasters and Googlers in these help
forums to help you remediate your site
fix your site identify any
vulnerabilities and finally follow us on
Twitter we give not only security
updates we'll give you updates about
search now I'm going to hand it back to
Ellie to talk to you about the second
part of securing your site and that's
building a safer website thank you Eric
so as Eric said when it comes to
security provision is key and so far at
Google we don't have much of a public
course to help you out so we decided
over the last year and a half to develop
a new tickity course which is meant to
be very hands-on so you can have a very
practical knowledge you can apply to
secure your website the core idea behind
the course is to a very short focused
lecture on core concepts that you can
apply immediately and the log exercises
so you can build on hands-on experience
and have this knowledge that you can
help to protect your site so let's look
at what the course look like and then
we'll do a few team along the way the
course will be a set of 12 lecture which
will be grouped into three main
categories the first thing we're going
to discuss is how to handle user data
safely from how do i authenticate my
user how do I maintain session with them
safely and finally of course how do I
encrypt my communication such as when
they interact with your website your
user are safe the second thing we're
going to cover is web attacks these are
attacks which are specific to web
security and that you need to know to
make sure there you are not vulnerable
to that we're going to cover the four
big ones which are XSS
CSRF SQL injection and click jacking and
finally but not least we are going to
tell you how to enter
sexual research body content whether you
would logically embed the widget from a
third-party website and make sure that
when you do that you not get hat is a
guitar - how do you deal with User
Content how do I make sure that I don't
have toxic content on my website or they
don't post any famous picture into my
beautiful stream and finally because as
Eric said when you get tagged it's
really difficult to recover would have a
lecture dedicated to investigation and
show you concrete case of hacking so you
can learn how to investigate them and
clean up so in the event you get hacked
you already prepare so for each lecture
we're going to provide you a few
material first we're going to give you
slides where you can review the lecture
we'll do a video of the slide with some
explanation and the most important part
we'll give you exercises you can do and
the quizzes so you can know how well you
doing and if you have understood the
concept so exercise was really a key
development point we have built a ton of
those we have over 50 exercises for you
they're going to be in multiple aspects
and multiple aspects web security first
you have attack exercise where you wear
your black hat and you try to attack
website so you get into the mindset of
the attacker and understand how they go
about attacking your website then of
course we go to defense where you know
how to apply the best set of your
techniques to protect your website and
you really understand what is the
security mechanism are and how you can
apply them successfully and finally for
some other things specially for hacking
will cover investigation where we give
you some puzzle and some interesting hat
to look at and whilst and if you can
figure them out one of the essential
challenge we had to overcome was it's
not easy to teach web security because
you managed to lie tunable code right so
we call put it online and because going
to get hacked so how you do that you
originally people come up with the idea
of using virtual machine or happy for
installation of packages and you have to
run a roasting this is not very ideal
because it's very visual intensive just
don't know the stuff it's on your
computer it also limits the amount of
device you can use there is no way you
can use a tablet for example so about a
year ago we were thinking of the problem
and we say well web technology
has so much evolved let's try to do
something different let's try to use web
app technology and the crazy idea we had
is let's build a web server directly
into web page I know that sounds crazy
but the idea was we have web service
worker so we can make it offline we can
make it intercepting the request and
just respond to it so let's build up and
you know what let's show in a web SQL
injection SQL database and maybe a PHP
interpreter and see if it works it was
crazy but we try then it actually works
really well so now what we have for you
is a testbed where you just go to the
website and then everything happened to
your browser nothing to install you get
started very easy and it's all happened
as you want a wheeeeel website so that
being said this is all word right and
you probably want to show it to see it
yes all right so let's jump to our first
demo which will show you the framework
so we're going to do a simple website
which going to allow to log in our users
so to do that we're going first to need
to have a server system so as everything
and it's like really look like nude with
xpress so if you're familiar with not
yet you will recognize the sin tax we
need to declare our route so because we
are doing your login page we need to web
page first we need somewhere where the
user would land and we have a form so
let's pray that then let's add a second
fruit which would be processing the
logging information and decide whether
or not you authorize you logged in so
we're going to create two routes one is
a gas as you can see and the other one
is a post and which for now we're just
going to say hello world just to see if
it works
remember this all is local as you can
see it on the bar this is all local
no connection all offline and we hope
it's going to work all right so let's
load the exercise we load the framework
and go to the page and see if it works
and here you have it we have a working
web page into our browser now let's add
a little bit more things because you
know it's a login page so we need a form
so let's have the form
fortunately our framework authorized and
support templates like any normal
webform work so let's add a little bit
of CSS so it looks pretty a password and
a logging field and let's reload to make
sure we see our login form so to add the
template I forgot to add thank you one
we have to add the index.html so we're
going to load the template return the
template reload and hopefully you have a
nice Google i/o form yes so that's right
but it doesn't do much right now we have
a form but we need to process it so
let's have a bunch of users so here what
we're going to do is we're going to add
a database so I think the database in
the framework is very easy all you have
to do is create the database one line of
code or the framework do all the magic
for us then we're going to add a user so
let's create a user table which will
just contain a login on the password
alright let's add the user a Google IO
user for the demo and by the way do not
do that for real do not store your
password in here do not do this right
the moves I chose for demo please don't
do that it's insecure but for the demos
will do so let's add that and let's add
a little bit of JavaScript code to check
where the database and check if it's
happen it is so we get to variable from
the environment run it into a genetical
query that's if it's correct and we
should have everything for now with the
table right so let's try it we reload
now we have the page let's write with
the wrong password so Google i/o and I
don't know password one two three
yeah user not recognized website
intended now let's copy the thing which
is insecure and let's try again Google
IO as a user and the password and click
on it who we are logged in so we have a
fully functional login system with the
database website few lines of code this
is the framework we built and this is a
framework we use two criteria exercise
pretty cool
yes alright let's go back to the slide
and talk a little bit more about the
content right so we show you the
technical framework we have behind it so
but I'm working quite content is better
right you needed so let's jump into one
of our lecture the SQL injection lecture
so we show you what kind of content
you're going to learn so SQL injection
is one of the most deadly attacks you
can suffer from and so I'm going to tell
you a little bit about why like an
injection vulnerability and of course
how to prevent them and then after that
you want to do a few of the exercise to
show you how you can learn it handle so
why do a second injection exists well it
turns out that during our little demo we
introduced a vulnerability until YouTube
in ability because when you have an SQL
statement an SQL contains both keywords
which tell you what to do and also
parameter will tell you what to look for
if an attacker is able to control one of
those parameters you can actually inject
keywords and the server have no way to
distinguish between the two
we actually has its own ability in our
very own code so this is the mix between
keywords and parameter which make edge
injection possible so what an attacker
can do with that where an attacker with
the ability to control SQL query will
bypass any type of security check you
have and we'll do it unexpected query
from reading sensitive data to deleting
your database encrypting it and do all
the forcing more properly the
consequences of such an attack if you
have it is it bridge the confidentiality
integrity of your website because
everything is at the database and also
it also to authenticate without knowing
the password for example because you can
defeat an attacker check so
there is minty broad type of extra
injection there is a plastic one we're
going to demonstrate today and there are
more advanced one such as a blind date
injection and a second-order injection
I'm not going to talk to them about
today because we don't have time let's
just focus on the classic one so the
classic one as I explained work very
simply the attacker instead of sending
what you expect will do the unexpectable
and we try to manipulate the s-curve way
by sending specific payloads then it
will reduce on the next etiquette query
and then your database will just happily
do whatever the attacker wants and
potentially extra price sensitive data
here is a concrete example right if the
attacker can inject the username then
you can decide instead of a username to
say let's say Google then close the
field and then add - - which commands
around as a result of that as you can
see on the screen well you are basically
bypassing authentication so to make it
more concrete legend to our second demo
so we'll show use the attack live
hopefully demo please all right so we
back to our demo and if you remember can
you go back to the zoo code if you
remember we took the username and
directly input it into our query right
you can see it on the screen right so we
didn't do any checks we like okay we
charge the user input which you should
never do and the result will be able to
log to the website without the password
so let's demonstrate that so the way to
do that is as we train is you user
username so that Google i/o but then
instead of doing well expected we're
going to add a quote to close the
parameters and then we go into a sketch
and to come escape in SQL you Joseph how
many of you believe that's going to work
one person you have very no faith in me
man come on all right so we don't you to
do it do it let's try all right so here
it is we were able to log to the website
without any password because we let the
attacker manipulate the input which you
should never do all right let's go back
to the side
so how do you prevent that there is a
simple way to defend against that this
is called parameterized query also known
as preparedstatement the idea is instead
of using the variable directly into your
query you're going to actually write
your query and specify where the
parameter should go and then input them
afterwards that would prevent SQL
injection you should also always escape
the user input because you should not
trust them it's open you to minimal
other attacks such as XSS so that
concludes our short explanation by the
extra injection you want is going to in
a few minutes to show you how the
exercise works and all the front works
works but before that how many of you
would like to get early access to the
course all of you that's brilliant so
Ron is going to tell you that before the
exercise you want to all yours
alright so signing up is very easy you
just have to register using the link on
the screen starting today
judo / learn web tech ok let's switch to
the demo and we'll show that slide again
at the end of our presentation so since
we're familiar with sequel injection
already we'll just skip to that as Elly
mentioned each topic will have material
so that you can learn on your own
so slides the lecture related reading
lists quizzes and of course the
exercises that are going to give you
some hands-on experience so that you can
reinforce what you've been learning
you'll be attacking defending and
investigating sites and to make it a
little more fun we're taking inspiration
from the pie verses cake war to craft
some of our scenarios so in our world
the pie syndicate is a little worried
that a new cake shop has just opened up
and so they're going to try to attack
their rivals website and then the cake
guys are going to be defending
themselves and investigating these
attacks alright so we'll be speaking
with the basic exercises today and since
we've pretty much done attack number one
already with Ellie we'll just give to
number two and for this
I'll need my black cat okay all right so
we have our objective on the left K pine
minion that cape shop is still in
business
we can't keep losing slices of our
territory to rival industries they still
have a mostly online operation for now
but we must act quickly where it is that
they're so vulnerable to sequel
injections
we've gotten unleashed copy of their
server code but unfortunately no idea
who any users might be we need you to
batter down the defenses and get their
customer list get to it hi boss all
right so very helpfully we have a direct
link to the page that we're going to
attack and we have a copy of the server
code so we have the same vulnerability
as before but because we don't know the
user name this we our previous bad input
won't work so let's take a look at the
code and on line 12 we see that actually
it doesn't really matter what the Select
statement returns as long as it returns
anything at all and so this is where
we'll be targeting our our new traffic
query we just need to get the where
statement to return true at all times
and to do that we'll just add let's see
an or 1 equals 1 and this has the effect
of saying to select from users where
username equals admin or true and so now
we're going to force the statement
always evaluate to true and now we have
access to their customer list and that
pop-up means that we succeeded so we can
move on to the defense ok
okay for this I am back on team cake and
I got my white hat for that so our
mission
once again greetings fellow bakers as
you know there's been chatter of an
upside up sport pie maker with crusty
connections we suspect they've been
trying to attack cake shops for some
nefarious and no doubt a rational
purpose your site has been identified as
one of these targets in particular it
seems your login page leaves you
vulnerable to sequel injection please
fix it at your earliest convenience
take five okay so this time we're going
to use the editor and see I'm going to
refresh and let's see a refresh again
sometimes the service workers need to
get updated properly so takes a little
bit of time okay there we go and let's
verify first that we are still
vulnerable to this sequel injection
attack and indeed we are okay so all
right we're going to use our editor to
fix things and this editor comes with
syntax highlighting linking all the nice
stuff and we'll also need these three
buttons on the side so the first one
will run our code against the test
framework and make sure that what we're
doing will succeed will not succeed
you know it just helps us when we've
finished the exercise in this case we
failed because we haven't actually fixed
anything the second button is going to
give us a hint and finally the third one
will reset everything and so that we can
start from scratch so to go about
actually fixing this will just use
parameterize queries or it's also called
a prepared statement so remember we're
not supposed to use in user input
directly so instead we'll tell the
people prepare a statement
that has specified exactly when to
expect external input so here this is
the parameterised statement and then
we'll give it the username and password
here let's see if that passes our test
okay so this should be good
now let's refresh and double check that
we've it actually worked
and we've successfully defended
ourselves against this particular equal
injection attack so remember that this
is just the basic exercise so in
practice and creating actual websites in
the live you would also sanitize user
input as Ellie said and it can't be said
enough times never trust external input
so that's it for the demo today let's
not tempt the demo gods any further back
to the slide sweet ok so thank you for
attending our session you can sign up
for early access to the course which
will be released this summer
and if you're interested in more about
learning more about web tech or math or
whatever hand over head over to some of
the sandboxes I think there's one by
Stage six that's going to talk about
progressive web app and thank you again
and enjoy the rest of i/o</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>