<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code-splitting your way to better perf with Webpack in Totally Tooling Tips (S3, E15) | Coder Coacher - Coaching Coders</title><meta content="Code-splitting your way to better perf with Webpack in Totally Tooling Tips (S3, E15) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code-splitting your way to better perf with Webpack in Totally Tooling Tips (S3, E15)</b></h2><h5 class="post__date">2016-12-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QH94CXVv3UE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we previously did an episode on
JavaScript module bundling lies and then
you spent three weeks crying in a corner
because we did that show mm-hmm and then
someone actually brought out the thing
that we said was a joke I can't remember
what it was was like roll up what pack a
fight or some weird mix of stuff and
then it became a thing
Frankenstein's JavaScript monster it was
great I would actually love it if a
module came out that was Frankenstein
jeaious or something it probably
probably is it's probably a library yeah
anyway sorry what where you going today
I wanted to talk a little bit more about
web pack and specifically giving people
three tips I've been doing some research
recently in to react and sort of web
performance on real world devices and
this is sort of backed up by the survey
that I did where I asked people you know
what are you doing with reactant
production are using webpack what pac-12
browserify they were bundling or not and
how they were picking it yeah yeah what
I discovered was a lot of people a lot
of people confused by code splitting
but concepts like code splitting some
people are using it some are not some
are using it and then not entirely
understanding how to do it right so I
wanted to quickly cover some of the
concepts there in case Elves so do you
know what code splitting is that's the
way you basically this this window or
this bundle should consist of these
files right and then you kind of say so
that's going to be bundle one that's
gonna be bundle two this can build a
three said right splitting is the act of
deciding where those lines are right and
if you're doing it intelligently maybe
you're just going to you know ship down
the smallest amount of JavaScript
necessary for a route or review to your
users and then lazy load in the rest
this isn't this isn't a new idea Gmail
did it like a million years ago in
webpack it's pretty I would say that
once you know how count splitting works
is pretty trivial to do on every project
but it's getting to that point that
requires you to read like a bajillion
blog posts so I'm going to do it in this
510 I'm going to cover in 15 seconds so
in webpack if you're using required I'll
ensure in your web pack one code will
basically allow you to apply code
splitting if you're using webpack two
you can use systems on import to do the
same thing so if it detects that you're
using that it'll allow you to basically
split up
bundle based on that particular blob of
JSP used so every time it runs into a
require done ensure for say a view it'll
put that code into a new chunk um and if
you navigate to that chunk so if you
happen to be using webpack with things
like react router for example it plays
in really really nicely you can just
load in the j esses arey for a route and
then lazy loading the other pieces is
needed where people get tripped up here
is either they'll um you know they'll
use code splitting although think
they'll use code splitting because web
pack also supports this other idea
called the commons chunk plugin so the
comments don't plug in so normally in an
app let's say you're using you know
libraries or frameworks or whatever
right you can have multiple views some
of which are going to have similar code
right and that's sort of your vendor
bundle right and that's code that you
may need to load up up front in order to
get you know the route useful in any way
it might be your lodash or you react or
whatever have you this is kind of the
stuff that has to be loaded no matter
what and it's common enough that it
should just even if its large it's kind
of like okay take the hit because every
single page is going to buy it
exactly so the comments chunk plug-in
helps you basically split out the stuff
that's common between your different
modules into okay into a common vendor
bundle right so that's tip two now where
people are running into issues Co
splitting is that they're splitting
their code but they're still in many
cases shipping down a huge blob of
JavaScript that they don't necessarily
need for just the stuff that routes
gonna do so I'm what I was seeing in the
traces I was profiling was um some
people are shipping like up to a Meg of
JavaScript just for a single route and
is this because they've got a large
vendor JSL I have a large common vendor
jeaious or is it just a mix of things
sometimes it's a large vendor bundle
where they're like just happening to
ship down
you know libraries that that route
doesn't need in other cases is where
they're loading in stuff for other
routes by accident or just not not being
particularly diligent about what they're
including in the main chunks for each
view so that's a good thing to stay on
top of just keep in mind you know what
size web pack has got this way of like
summarizing all of the chunk sizes when
you're doing code splitting and they're
a point of view just keep an eye on
those sizes we're currently we've been
working on an RF
see for webpack to maybe try providing
you like performance inside some
performance budget of some sort and if
something like that lands I think it'll
hopefully make it a little bit easier
for people to this is know that they
have an issue thing ice what you're
looking at where it might show like a
red line going this is X amount of like
kilobytes or megabytes and you should
seriously consider breaking out the
other tip was if you happen to be using
hb2 there is another web pack plugin
called the aggressive splitting plug-in
just sounds really violent yeah I said
that doesn't sound like something I'd
want the aggressive splitting plug-in
basically gives you a way to split up
your chunks with a maximum and minimum
size so you can specify exactly what
it's like upper bounds you want and it
will figure out some magic around that
to make those those work sounds very
risky I don't know why just the idea of
light oh you've reaches and maximized to
chop in half and don't worry about it it
works in practice I think it's
definitely something that people need to
spend a little bit more time on but it
it's supported it's good to know that
why packer sort of exploring the ideas
around h2 I think that in addition to
sort of so we talked about three tips we
talked about code splitting common
Strunk plugin aggressive splitting
plug-in as always because we're all
about the serviceworker if you're gonna
if you're gonna use all these libraries
and things in your bills these days it's
great to not have to pay any you know as
much cost to the user to like load them
up again on repeat visit so you know
there are plugins like serviceworker
precache web pack plugin yeah um which
let you use service pre cache which we
work on then this beautiful just build
to service work before you have to think
about it saves you users time when it
comes to that repeat visit so check that
out as well plenty more web pack tips
and some of the articles that we've been
tweeting about lately and writing so
check those out because i believe you've
been writing a lot on medium lately i
have been writing a lot on medium anyway
people can check that stuff out if they
so please those are just a few web pack
tips and hopefully they will come in
useful</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>