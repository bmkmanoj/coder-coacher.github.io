<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Supercharged CommitLog WordPress: Routing | Coder Coacher - Coaching Coders</title><meta content="Supercharged CommitLog WordPress: Routing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Supercharged CommitLog WordPress: Routing</b></h2><h5 class="post__date">2018-03-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fFRZhTSVQ5c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so at this point we have built what you
can actually call a blog we have design
we are respectful of the users bandwidth
we load pretty fast it's looking pretty
good but something that gives a little
more cohesion is some polish you know
some some showbiz
if you will and so I thought what we
could do is we could build a Rooter that
does nice transitions from for example
the overview page to one of the
individual blog posts and back and this
Rooter that I wrote is actually a single
self-contained JavaScript class so let's
figure out how that's going to work and
I said the Rooter is a standalone
JavaScript class but isn't really tied
to anything except click events so the
first thing the Rooter does is add a
click event listener on the document
level and once I click happens it checks
if a the click is on a link tag and B if
that link links to one of our own
documents and if both of these
conditions are true that's where the
Rooter actually starts doing something
it checks if the document that that link
tag links to it's a document and if a
document is one of our own and if that's
the case we're gonna fetch that content
use push state to change the URL in the
address bar and then pass the content on
to an animator that will fade out the
current content on the page and then
switch it out with a new one and faded
in giving a really smooth and nice
transition for the user so that they
know what is actually going on so this
approach has a couple of advantages on
the one hand we are what I call
hijacking a link tax so that means that
link tags are still going to work as
they should
even if javascript is disabled or a
ruler code for some reasons throws or
just doesn't load that means that links
are still going to work they might not
have a transition but the user will end
up where they wanted to end up the other
advantage is that link tags emit click
events even if the event was actually a
tap on a touch screen or even someone
pressing the
in Turkey if for example they are using
a screen reader this is very important
because this means that our transitions
become a progressive enhancement and
that all our content stays accessible
the Reuters constructor adds a couple of
event listeners one for clicks and one
for pop stay the one for clicks as I
just explained is for the link tags and
the one for pop state is to react to the
user pushing the back button in the
browser
it basically triggers the same logic it
just grabs the target URL from a
different spot the Rooter also loads a
spinner and the spinner is supposed to
be shown when loading the next view
takes longer than 50 milliseconds to
show the user that something is in fact
going on it's just taking a while note
however that I'm loading the spinner
dynamically if I load it it statically
it would have to complete loading the
spinner and still my Rooter could even
start running and that's a bit backwards
because the spinner is only ever needed
once a click happened
so really the Rooter should run first
before the spinner is being downloaded
and that's exactly what dynamic import
helps yourself the navigates function
responsibility is to download the next
view and transition it into view it
makes heavy use of async/await because I
think it's a really nice pattern to
start an animation and a wait until it's
done and then you can start the next
animation so you have a really nice and
imperative way of dealing with these
kinds of animations if you want to know
more about async and a weight I did a
micro tip on that a while ago so we're
gonna link to that in the description
and in the next commit log we are going
to talk about the message bus which is
something that I implemented and it
turned out to actually make loading even
more efficient and it made my life
easier and I found it really interesting
so if you want to watch that you should
subscribe and I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>