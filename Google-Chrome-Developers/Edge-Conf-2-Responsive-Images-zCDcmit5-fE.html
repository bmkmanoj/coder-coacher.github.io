<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Edge Conf 2: Responsive Images | Coder Coacher - Coaching Coders</title><meta content="Edge Conf 2: Responsive Images - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Edge Conf 2: Responsive Images</b></h2><h5 class="post__date">2013-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zCDcmit5-fE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yeah this is your place and I'll try to
keep everything very brief as we get a
stylist so you have been doing quite a
lot of work with responsive images of
late he's a really involved in the
responsive images community group and
then we have a Peter Miller so Peter Mel
is a developer works on a lot of heavy
content heavy websites image have a
website so great experience and robson
rights also works it works for Yammer
sorry forget as rain fantastic stuff
about web performance has some great
ideas about how we can address some of
the responsive memories problems using
progressive JPEGs and it's still well as
I one heard of the clown car technique
the Creator so we're going to hopefully
talk a little bit about that and John
Mellor works at Google and John Mellor
is really the only person on earth who
can tell you the difference between a
device pixel the real pixel a CSS pixel
and all sorts of other pixels so and he
can do it all in his head it's pretty
crazy so first up we have the author's
going to give a 10 minute talk basically
outlining what the current solutions are
that we've been basically discussing for
for the last two years trying to come up
with a solution for responsive images
take it away so we'll swap seats
so hi um as Marcus said I'm advice i'm
here to talk about the responsive images
i'll try to sum up two years of
discussions into 10 minutes talk so bear
with me so first in the mid two thousand
all we had was mobile only sites there
were kind of lame with the very slim
content highly optimized images it got a
little better with the iphone but it's
it wasn't that hot then responsive web
design became a thing and which was very
cool one codebase to rule them all you
can serve all the devices for a single
site but the problem is um it was kind
of slow it became a synonym too slow
mobile website um which is a problem so
um the reason is that most sites deserve
the same resources to both mobile and
desktop and most of that data is images
so there are a lot of savings to be made
um what i wrote a utility which kid Tim
catholic-run Tim Cadillac is a developer
sorry for name dropping but basically we
saw that up to seventy-two percent of
the image data can be saved for some of
the viewports in some of the cases there
so there's a lot of savings to be made
and retina only makes things worse
because the gap between the smallest
viewport smallest images you want to
send at the highest resolution images
you want to send is getting bigger and
for with most devs owning retina devices
most devs are sending high resolution
devices to our high resolution images to
all device
so this is the responsive images problem
which we like to divide into two major
use cases the first one is resolution
switching serving different images to
different devices different dimension
images different devices the images are
the same images same proportions they're
not cropped but basically the quality is
different this is one example of that
and it can be further divided into DP
are switching serving retina only emit
retinal images only 2 retina devices and
viewport switching which is adapting the
image dimensions to the actual display
to to the size then in which they will
be displayed then the other major use
case is our direction basically its
content optimization without wasting too
many bytes it's matching the images to
the layout in a way that makes sense so
either a crop or different proportions
or something that works according to the
actual responsive break points from a
survey you ran a lot of developer a lot
of developers are already doing that
using hacks so this is a major use case
and so we've talked about the problem
let's talk about the solutions there are
several proposed standard solutions
there's the source attribute picture
element client hints header and I put a
question mark in because it's not really
a standard solution is just a proposal
at the moment but the responsibility on
tanner I'll talk about each one in
detail so sore set basically it's the
same old image tag now with new
attribute that can include multiple
resources according to the DPR and the
viewport it's a slightly controversial
statement but it addresses mainly the
resolution switching case and much less
the art direction case some people
disagree with the current implementation
source that is currently implemented in
WebKit and in blank it's behind a flag
and blink and it's not yet shipped in
WebKit but it's there in the codebase
Firefox will soon follow and basically
it looks something like this there's the
you specify the 1x or 2x or one and a
half X or 3x qualifies for each image
resource you add to the head to the page
the entire spec also includes viewport
switching which looks something like
this it's for each resource you specify
the max viewport for which it can be
applied to and the x factor that's
enough to do it the problem with that it
gives you a lot of expressive power but
you also have to in some cases like you
can see in the example I put up you have
to define the you are a single URL
several times because it fits several
DPR and viewport combinations then we
have picture which is mainly targeted at
our direction it specifies it has it's
an element with multiple source children
each one of them is specifying an image
resource based on media queries and
possibly type and the first matching
resource is downloaded and displayed it
looks something like this and as you can
see it can mix source set into the
source
elements so you can define an hour
directed image with multiple DPR
versions of it and the the media
attributes you use here are most
probably the same media media values
that you use for your layout break
points unlike resolution I'm viewport
resolution switching which can be
independent of the layout view port then
we have as a third contender or third
proposal we have client hints that is
unlike the two others it's not a
market-based solution it's an HTTP based
solution and basically the client sends
out its capabilities it sends out hence
to the server saying this is my DPR this
is my viewport width or height or the
the actual values are still debated but
this is the general spirit and the
everything is done on the server side
it's server logic that serves one
resource or the other and one recent
change to that proposal is that it's
opt-in only the hints are not sent on
the first HTML request on the other hand
it saves up from it saves us from adding
data to requests where the server is not
going to do anything about it so that's
a recent compromise that may be able to
push the spec forward then I have
something I I'm proposing as more of a
long-term solution this is not something
that's on anyone's immediate radar but
it's a long-term solution I'm proposing
that file format based approach or
basically each resolution each target
resolution that we want to serve is
represented in a layer and some sort of
a container and these layers are
building up
one on top of the other so that the
browser can download a certain number of
layers then and then add more layers on
that enhancing the quality of the image
it can address both resolution switching
and art direction and I'll just show you
a bunch of examples so basically for
resolution switching we have this photo
that if we look into the layers that
compose it it's a thumbnail then an
enhancement layer which is basically the
thumbnail upscaled with a diff from the
original image downscaled so an
enhancement layer and another one that's
basically used to recreate the original
image with without adding many bytes to
the process there is no the over it is
very small and for other direction the
same can be applied so this bigger image
that's used everywhere for our direction
can be split into a crop then an
enhancement layer and another one the
advantages are the is that our that
markup is not touched you have a single
file per image so it's easy to maintain
and the best one for me is that the
browser can just download diffs if they
had downloaded one image and then the
something in the browsers environment
have changed you can download the diff
the disadvantages are that it's
complicated to implement and basically
the coding performance and network
performance without HTTP two is
currently a mystery we need to further
investigate that in order to know if
it's feasible or not without HTTP two
and with in terms of the coding
performance and last minute slides added
by John Mellor here maybe you wanna
talk about that so a possible way of
making this responsibility former
container load more efficiently and when
you're making saw several range requests
or something and you don't leave leave
gaps between wait for round trip each
time we'd load all the images on the
page in parallel purgative Lee so I've
taken our website I've stolen this so um
on the left you see images being loaded
one by one sequentially on the right you
see the image is being loaded in all in
parallel and it's the same progressive
JPEGs on both sides just on on the Left
I'm truncating the stream of images so
that you get the first image and then I
drunk at some point there on the right
to truncate all the images at the same
percentage so this is five percent of
the image image bytes and you can see
that on both sides page it'll look great
but by the time you've got to ten
percent of the image bytes and already
on the right you can kind of see what
the page looks like orgams is really
blurry and so on but that least fulfill
their space well where's on the left you
can see sort of the top left as you can
see the star to the top left image but
all you have images haven't even started
loading it as you gradually load more
say you're on okay so you get a
25-percent for example now the page on
the right and we've only loaded a
quarter of image bytes but it already
starts to look okay Jim you don't Chris
but they're still perfectly usable
whereas on the Left we have this super
crisp lovely image on top left but do
you have images haven't even started
loading but the time you gets a little
fifty percent the page on the right now
looks perfect you can you can almost not
tell that it hasn't finished loading
images where's on the left again we've
only got half the images and then as you
load more bites the paging a right
gradually becomes like a super
Chris Brett in a beautiful page but it's
a very subtle difference between that
and 1x image well under on the left you
only now one hundred percent do we
actually have all the images at all
visible this is great I love that you're
you're giving something you know to the
users like while they're waiting that's
that's brilliant that's what I love
about progressive JPEGs is that it'll
download the first scan as soon as
possible so I think that that's kind of
a good lead-in to the first question
that we have which is from Jake at
school hope I pronounced that right Jake
do you have your question with you yes
Mike runner please there goes Pete it's
gonna be really slim by the end of the
day hey okay so I currently send like a
2 x or 2.5 x image and just compress the
hell out of it and the file size is kind
of roughly the same as a 11 x image and
that seems to do the job why do work why
do we need all these extra markup
examples and if in the future John
solution come in and and stop the down
at at some point surely that's all we
need so great to start them so should we
start with difference between fixed
width and flexible which images and so
this ties into what y'all was saying all
you about with Lucian switching there's
two kinds there's DPR switching where
your image is a fixed size like a logo
on icon and it's gonna be the same which
say 32 pixels on all devices and all you
need to do is switch switch it out based
on the devices pick screen density so
you might need to X image on the retina
screen a free x image young like samsung
galaxy s4 like anything but all you're
doing is changing it based in the device
pixel ratio we're flexible whip image so
you've got weight hun percent then
suddenly do it for the viewport the
device matters and so your phones your
tablets you'll get your laptops the old
different way to stay only different
images and here a simple technique which
gets you up to double the resolution of
an image by compressing it more heavily
isn't going to scale to sort of an eight
times bigger image cool so what do you
think one more thing regarding the
compressive images hackling yeah what
Jake was talking about basically taking
the high-res images and compressing them
extremely compressing them so that they
will be when downsized to 21 X display
dimensions they will still look good and
and also for retina they look quite fine
because the actual display dimensions
are again sir I'm singular I'm doing a
few kind of people look nigra so let's
see if we can find a little better does
anyone have a gonna have a go ahead
explaining a little better so many hello
somebody discovered that if they like
keep the resolution really high in an
image but they put the compression down
to I think 0 is that correct that's
correct so they'll actually get a
smaller file size that is higher
resolution and it looks good on retina
images as you have a smaller file size
for you know for your speed so it's
actually best of both worlds and it's
kind of like an amazing discovery yeah
so we're just going to wait like I'm
sure if we like go back to like 1996 we
might find the same thing but who knows
it's just we were like doing it from
modems and stuff anyway so I guess what
what I'm wondering is you know what
might be some other side effects because
we're sending like you know like four
times the data right like basically the
setting it means just two times or even
more bigger than this size might be like
three times yeah so can the browser
really handle that like you know do we
know if their side effects within the
browser maybe it's maybe Johnson a good
position because it's closer to two
chrome we don't have to research yet um
so yeah it's going to take four times
memory on the image of every page that
might blow your memory budget and
suddenly things like painting and
scrolling my get slower it's hard to
know um we need more research basically
right yeah we need to experiment
but it's a super interesting idea yeah
basically it's on the agenda to do
something to get some real hard data on
the implications of that but on the
other end of who on the agenda on the
responsive image because images
community groups agenda you get some
hard data on that for the DPR switching
case but exactly as John said it doesn't
cover all the cases and it can cause
decoding performance and memory issues
so if you're using that you need to to
test it well to make sure there are no
problem so okay we don't have a jam
session talking about the question 2 2
Peter Miller because he's kind of like
you know he's working on a lot of like
it work on some fashion websites and
give them like which anyway for
whichever ones like obviously you'd have
access to the very high resolution
pictures that are coming straight for
photographers what would this mean for
maybe you guys would it mean anything
well I think that and well first of all
I think I've looked at the solution and
I've got a retina MacBook and i think
it's it's still a matter of subjective
opinion maybe about whether this does
look as good as real retina images or
yaks images and but i think possibly
thinking about it even today is is the
bigger problem that okay we can send
these kind of pseudo 2x images down to
be shrunk down at fifty percent but what
happens when we maybe want to expand
those images or have them be more of a
percentage with and then suddenly we're
actually showing those highly compressed
2x images yeah at their 1x size at their
physical 1x yes and then maybe they look
even worse okay I think whenever we have
this debate we also still have to
remember people who are who have metered
bandwidth because yeah on your macbook
pro on your Wi-Fi it's going to be great
but someone doesn't want to download
that when they're paying nineteen
dollars for so yeah absolutely so let's
hold on that one because someone takes
us off to like
the following questions I want to not go
into like those exact concerns because
what what n originally said was like you
can make a larger image that's actually
smaller in kilobytes then so in a sense
it it doesn't really apply but it does
but we're getting to exactly to the
point I think about Android 2.4 an older
androids which are still being sold
today because i don't have the memory
capacity right even firefox OS is like
250 megabytes of ram on that and it's
like you know its struggles you know so
absolutely so anyone I think we should
probably move on to the yes next topic
so the second question is there a George
Crawford this is one of the anonymous
questions from google moderator is DPI
negotiation only a stopgap bandwidth
keeps growing exponentially LCD prices
dropping GPUs benefit from Moore's law
in several years well it makes sense to
just send high-resolution images to all
users so I mean the implications are you
know this goes back you know if we look
at all the computing history right you
know well 64kb enough and you know more
slow computers just get faster and yet
we kind of seem to find ourselves in the
same situation over and over again like
back in 1996 like I was saying before
it's like we had modems and we had to
send compressor crap out of images then
as well to cater to users that were just
getting cable and who didn't have cable
in store on 54 k and fit for Vaudreuil
modems blah blah so thoughts yeah should
we really worry that much should we stop
caring who I know everybody's excited so
make it let's let's let's do around but
and bounce back if we can but let's keep
it short I mean I think that it would be
nice if we could just send super large
images but I don't think we can do that
quite yet I think that the the
responsive images it's such a topic
because we're getting smaller and slower
and we're getting bigger and faster at
the same time right so this is spreading
out so so yeah I have obviously my
opinions but I think that we need
responsive images container could be
possibly a progressive jpg that has like
really small scans and really large
scans and possibly the browser only in
downloads what it needs sweet we have a
delegate in the queue I'll just get Mike
petrodes ready well if you can jump to a
mic mic and so ppl on ur quickly jumping
on i think i'm staying in a hotel room
in New York City it actually feels like
we're quite a few years away from being
a part very fastly connected across
everywhere yeah but also you know you've
got to think data plans roaming you want
to give the users may be an option have
a low resolution mode but if we're just
always sending that high resolution but
also allowing for and the art direction
case I don't think this caters for that
um I think that and started to say I
think that Moore's law is not giving us
and then expanded been with I mean we
get a larger range of devices we have
capable smaller devices and and the
bandwidth coverage is naughty Bicket
this so basically it's a question that
asks us whether we can look into the
future and unfortunately we can't but I
don't think it made it move away 20
years it may be irrelevant well we can
leave I mean we can't look into the
future but we can see what the trends
are right you know we know like that we
have now like Google glass and you know
Samsung's watch and things like that so
exactly in a sense
we know a little bit where machines are
going and again we're going to see the
same cycle so yeah and really the
problem is getting worse yes we found
Mike yep do you agree yep gonna jump in
yeah just quick question about so I'm
one of you mentioned what if you have a
small image I mean using high
compression at a large size that was
initially seen small but then expanded
it seems to be a consequence of the
actual form the JPEG format what about
new formats such as web p that and using
things like that so maybe I'll get John
to respond to that one so not an expert
on my p but yeah it tends to give it
seems are two things that are nice and
it gives slightly better performance and
come compassion performance ranging from
like 25 to 60 or depends what you're
doing with it but it also when very
highly compressed you get less of those
little blocking artifacts you get a JPEG
so you can actually afford a greater
compression ratio than you would use of
JPEG and so that can help but there is
your browser support and so on of course
also with web p perceived performance is
like slower than progressive jpg right
because you're actually you know getting
asked an earlier than a web p even if
the even if a wet p is a smaller file
size progressive jpg is gonna beat it
every time it's my right to I making
correct me here but it doesn't support
progressive loading you know that's a
good question there's no can support for
presentation so I think that's or like
at least from a sales perspective
following the bug about YP that's a real
showstopper for us we correct yeah so so
just I'm not sure a future progressive
web you can answer that or progressive
jpg but basically I think that it's not
a question of image format because we
have progressive image formats or we can
easily come up with
the responsive image container stuff we
can easily it's a prototype but it's not
something it's not complicated to get
this done the problem is that currently
there are no fetching mechanism in place
that can download only the start of the
image for low resolution devices and
download the entire image for
high-resolution devices that have the
bandwidth and have the capability to
decode it and I think that getting the
fetching mechanism in place is would be
an enabler for such a for such
optimization for such formats do you so
I want to useful I want to quickly get
those thoughts only so I was you know
going back to the original question I I
think we're never going to be able to
just have one image solution which is
why I think I because you don't want to
have the same image if your device is
this big versus if your image is this
big for those listening to audio you
don't want to have the same image if you
have a 20 inch image versus a half inch
image who we actually could do that
right because with a progressive jpg you
have you can have a variable number of
scans and the scans are of increasing
quality so you could have say 40 like
this expand our minds about this like is
that is the correct like we could okay
don't so if you're getting into 40 times
beggars own you will get color
distortion what I'm talking about the
art direction if you're going to so I'm
yeah I'm putting the art direction topic
aside for a second you actually can have
like a progressive jpg that has a very
small scan and then you know the very
high resolution so you can't have a tiny
image the downloads very quickly and you
can have a super large HD image for yeah
but I think we can't put the art
direction aside because we are serving
so many different devices so I think to
answer the question the answer the
question is I don't think serving one
image will be the solution in the end
because we are reaching such a I mean
it's we're going to kind of continue to
the next question is very much
related to this so I'm gonna further do
that i'm going to queue up Kyle cause
you have a mic already where's Kyle
that's right sorry Kyle Simpson so I'm
going to queue up Carl it's right there
so just do a quick question okay so a
lot of these solutions seem to be sort
of art direction centric like I want the
best possible images that can be there
but responsive seems to respond to maybe
the screen size maybe to the bandwidth
but it doesn't seem to react to the
environment say if I start out loading a
Flickr page that the battery power is
that you know fifty percent I've got
plenty of processing power but if i'm
now at two percent maybe the device
should start you know choosing not to
render these higher things so can't we
have solutions that allow apps to
respond to more complex situations than
just the screen size so a quick we're
going to cover that as well so but
somebody wants to make a quick comment
just a quick comment that's something
that certainly should be possible with
the when we're talking about resolution
switching when we're talking about
things that won't break the layout but
just would give the the the user a lower
quality image when it can't download the
high res quality image and this is
something that should be your wrist
a'kla possible with sore set so the
browser in source it basically the spec
contains a an asterisk saying eventually
the browser can do whatever the hell he
wants so so the browser can decide based
on user preference based on
environmental battery but batum not
download the high-res images but the
lower yeah so it's kind of a good thing
and a bad thing but it does mean it's a
declarative model you're handing over
control you're saying to the browser
this is what I got deal with it do it
best for the user yeah I don't think
this should be something decided by the
by the web developer
because I don't think they have this
kind of information we had we cannot
have this kind of information available
to the web developer this is something
that you can see done by the browser
with the user preference but I'm an
intern I'm going to be moderator here
and I jump over to the next item because
they're all related anyway so we
basically those are the points Calvin
Spillman your question so runner yeah I
was wondering about if we are fighting a
losing battle by continually generating
all these different image sizes
different resolutions up front when
there's constantly devices constantly
different sizes we're always going to be
constantly catch up and generating one
more images as opposed to having some
server-side solution that does it
dynamically and optimizes the set of
images we have so I think this ties in
can be referred to the stuff that John
was presenting before and also to their
progressive jpg Walter to having those
multiple scans so John with the kind of
work that you've been doing you know
what are you seeing whether the numbers
basically telling you there so I guess
it's tues aspects of this question on
the server side I'm sure you don't want
you don't want the artist to be manually
saving out like 20 different versions of
every image it's not scalable so i guess
on the server side you kind of have to
be at a moat at the moment dynamically
creating these images by automatically
resizing them but then i guess i can
like as well it would be nice if there's
only one image of to save like you just
you just told you but your your
photoshop whatever saveur1 ultra high
resolution image and the pearls
downloads just the beginning of it and
like however much he needs yeah that's
perfect I think that's the most elegant
solution I think that the second most
elegant solution is like with client
hints and having the server like serve
up different resolutions different
versions of the image but it has to be
automatic like we should not be creating
you know X number of images you know to
to to serve two different devices and
and we are losing you know we are like
fighting a losing battle in that in that
case I think the quick audience did you
have a question but if you have that
situation out you end up in the thing
that all the developers were complaining
about when the operators started to
compress your images on mobile networks
and they said they just get out of my
way I don't want you to touch my stuff
if you've got some automated system that
sits between the thing you're creating
the same problem that three years ago
you're all whinging about my thought was
that this would be I think it should be
server side so that the developer is
actually deciding what you're sending
over not the browser should not be
altering images is my thought the
developer doesn't let a bandwidth above
the client no I mean with client when
we're all said and done with when we
have client hints and everything else it
should be the server that's making the
20 images and serving the correct image
based on the client hints or the source
set not the browser that's taking an
image and deciding that the upper left
hand corner should be shown instead of
the middle of it it seems a lot easier
for the boat for the browser to take
users preference into account o like if
the user decides that they want they
want their roaming or something and they
only want to fail it the resolution
image then you want like an extra client
in saying i'm roaming ex-client hint
saying these kind of things no the the
browser can say you can change like when
you have client hints I guess I'm should
we ask the question my client hints that
we're going to ask later I mean we are
talking about like nothing to move to
that question yet because we are kind of
dealing with or discussing a very
serious problem which is you know a how
can computers really decide this how do
we set the breakpoints or not even the
breakpoints but there you know this
looks good here so send days and so on
so having that level of control which
was so as Steve was saying before it's
like that was pissing people off
developers because it didn't look good
in to some degree you know well that's
what we really need to look at can we
computationally do that and John's
resources to suggest that it can because
you do get a at least the user gets the
initial layout with the nice images or
beginnings of a nice image and then from
there you start progressively improving
it so how much you need to push it and
what does that mean on the server it's
kind of hard to know my opinion on this
is that basically you need all solutions
to be autumn I zabal so you can do
either dynamic or a build step or
something on the server side that does
all the grunt work for you as a
developer but I don't think at least we
must have some solutions that don't
require it so in today's I've got two
questions from the floor I got one from
your name I'm sorry okay I thought you
that's okay there go ahead so I thought
you were going to ask a question no
problem go ahead so if we start
generating 20 30 different versions of
files on the server side and start doing
very client headers or whatever are we
gonna have problems where the edge
caches just can't keep all of these I
mean we're going to be blowing out 20
different times the number of files on
all the edge caches our CDN is going to
be useful anymore at that point how's it
going to scale I think edge cut since
the very very would work since the
client hints is a one hint / header so
very would work but i think the edge
caches will have to adapt to the new
reality of much more images than before
but since i don't think this will be a
it may be exponential but there will be
time to adapt i mean as far as the edge
caches go that's my opinion and
and don't speak without the the mic so I
was going to jump to so I'll go to Matt
I think you had a question no you're
good ok cool so Peter you're looking
like you want to say something well I
mean when the originally when the
original question was first asked the
the case that comes to my mind is still
the art direction case because it is
very important for publications that I
work on and the crop has to be right and
when you're and that's why we do do up
front generation we have picture editors
and they are in charge of setting when
this image is displayed at this size
then there's a crap i won but I've
worked with content management systems
in the past that will define that given
coordinates so yes we can automatically
resize images dynamically but maybe we
could allow picture editors to to
dynamically come in and draw some
coordinates for different use cases in
different contexts and about the the
question about whether it's the browser
that decides it or it's a developer the
designer absolutely I think it has to be
the browser decides it it's not just the
the resolution of the screen it's not
just the size of the screen it's not
just the battery power it's actually
everything else to do with what's
rendering that's that image element and
it's not just the HTML to style sheet as
well so this I mean this leads
beautifully to the next question which
is by Jeffrey selman is he here there is
thank you
so this is an annoying theoretical
purity question supplied by the
moderator and I have a complicated
relationship to it because since 1998
I've been beating the drum for
separation of presentation and structure
but I'm also a big supporter of Matt
Marcus and picture hey buddy is it
problematic that we describe the
presentation of images in markup against
our typical mantra to separate
presentation from content and if so does
the specification of a myriad of sizes
make this worse so we saw this hopefully
you had the same kind of gut reaction
when you saw both source set and picture
and went when like when you saw the code
up on the screen and you kind of went oh
really we have to type all those x 1 and
x 2 and you saw picture like blows like
all over the place and it has media
queries in it as well so this goes
straight to you know I know Jeffrey the
next the question specifically but like
you said it's like it's bad because we
are putting media queries into our
markup you know what can we do there is
there possible solutions so the reason
that there's a difference between images
and background images is because the
image tag IMG is a foreground image its
content versus all the design that we
have on the web page so yes we do have
to keep it it the image is actually
content right but what about the media
query component the media query should
be I mean that's why we're trying to
come up with all these different
solutions yeah and why the picture
element and the source set looks so ugly
and actually why I like the clown car
technique is it it actually separates
out the content go ahead so just for
people who don't know the clown car
technique just like a super super
Twitter sighs okay three tweets and it's
basically instead of using pulling in an
image it pulls in an SVG and inside the
SVG that's where all the media queries
are so it pulls in the correct image
based on the container of the SVG
and it works fairly well it's basically
a stopgap solution while we're trying to
figure out the correct solution but the
reason that i liked the clown car
technique is because it actually
separated out content from presentation
from behavior from images i think it
absolutely is a problem that we're
defining the media queries in the HTML i
don't think it's a problem of bloat
that's fine i think we can give the HTML
all the sources of the images are saying
before but it's that I think the problem
is illustrated in the case where let's
say on a 500 pixel wide screen virtual
pixels and you have an image one hundred
percent with on a 700 pixel screen you
might actually have that image at fifty
percent with because you've got a second
column come in and okay fine when I'm
writing HTML maybe I'll take that into
mind or if it's not an HTML generation
problem what if it's a render problem
where and I if when the users logged in
then you have a sidebar but when they're
not you don't in CSS I can have the the
column at fifty percent one hundred
percent if it's got a sibling with the
logged-in sidebar and but I'm going to
want a different image to us to apply to
that element and that's why I technique
that takes into account the actual width
of the image element rather than the
width of the screen i think is
absolutely essential and that's why i do
still have a problem with the picture so
they think you are will be coming and
yeah this is so this is this is alluding
to some people might have heard about
element queries which I kind of like CSS
applied to a particular container
element and it's like it's pretty cool
it's a cool other problems it has its
problems so so actually there are
several questions here first for the
separation of content and presentation I
think it's a problem I think that this
is something that can be resolved by
drying out the media queries out of HTML
and into some sort of a media query
variable to drying out being don't
repeat yourself
just basically creating variables thats
a mobile or whatever that means or
basically create named media queries and
use them instead of the actual media
queries wherever you have media queries
in your markup it picture or external
style sheets and or in the CSS as well
there is work in the CSS working group
regarding that I have no idea when it
will go in but people aren't working on
it and so regarding that I think that
will resolve most of the issues from
this separation of concerns point of
view regarding outside like questions I
have like okay so with you know picture
is probably the main offender here you
know should we you know to even bother
continuing work to work on it innocence
I don't think picture is the most
visible offender but again there are
style sheets there will if i'll have my
way media attributes will be everywhere
which i probably won't have my way but
but i think that there are a lot of
resources that can be downloaded based
on media and i don't i think we need to
have some some shortcut for media
queries that we don't have to repeat
them everywhere including in CSS because
in CSS we repeat them as well and
regarding the element queries stuff
first of all I'd like to say that the
main advantage of the clown car
technique versus basically anything else
is that it's basically emulates element
queries the media queries there refer to
the viewport of the SVG not the viewport
of the document so while it it creates
some delay in download it's sometimes
necessary to I mean there are cases
where it's useful extremely useful
but the problem with element queries is
that you cannot start downloading the
resource before you have layout which
means you add a significant delay and to
the entire page load so and you have any
any comments about I mean yeah I'm still
a fan of progressive JPEGs and I think
that no I think that there's definitely
like you know the our direction case it
doesn't really handle obviously but I
don't think that we should forget about
it as a file format that we might
explore and we often do forget about
progressive JPEGs I think we forgot
about progressive day fix for like ten
years what is the reason we forgot about
them all right who's browser doesn't
really support them well oh um I mean I
think that you know in general is
there's pretty good browser support i
think that i think that the reason
browsers don't support them is because
we stopped using them and I think we
stopped using them because because
things changed we had you know faster
connections but then things kind of
reverted with mobile and we went back to
where we were where where speed turned
out to be an issue again um so so yeah
so there's one question from the
audience go ahead sound like the best
solution for the picture element is to
move the basically to move the rules to
CSS you can go back to regular IMG and
has something that says in CSS like for
all images which have a path that looks
like this then apply these rules to add
2x to the path this allows you to move
the more presentational parts of it to
the CSS while still keeping the content
namely the fallback image in the HTML
and if you have it can do something like
a reg ex to not have to write this 2x
that 2x something else 2 X 4 2 x
versions of every single image you have
so you can sort of do this right now
getting attribute selectors and the IMG
tag using what selectors you can sort of
do this now using attribute selectors
and three selectors yeah but once once
per SRC which will be annoying
right so yeah so it's kind of like a mix
of things so I'm sure one of these other
guys were able to talk about the
concerns there I can give it a little
bit it's like some of the main problems
that we're trying to solve with
responsibilities as a whole is
integrating nicely into how browsers
load images and performance wise so to
block and wait for a stylesheet to
download that will give you the
instructions to then be able to fetch
the files that you need will probably
cause issues part of the stuff that
you're was talking about before about
these css-based variables that you can
put in is that you would need to insert
them at the top of the document in line
so then they would actually parse before
anything else so there's like big
performance issues with all this so like
it's cool solution but like the now I'm
not saying that it wouldn't work but
it's like working out how all the
dynamics work there within the browser
it's pretty crazy does anyone want to
add road fully one vanilla I just want
to add that it's basically violating the
separation of concerns from the other
side of the spectrum you're putting
basically your your content is now part
of your presentation and in a way
because you the content URLs rely on the
on the CSS so you would have to either I
mean for CSS caching if you would
content images tend to change often
everything that's in CSS usually changes
well I mean less less often the net so
it can be cashed for for a while for a
long while so it yeah they ate it it
violates the delayers as far as I'm
concerned in a way so let's let's take
that one up often so I got another
question from the audience and another
one from so I got a couple here I don't
go there first and then i'll talk about
bands too sorry already have the mic so
go ahead and
just just to counteract that you say if
you need to download CSS first in order
to display the image but the CSS
modifies the size of the image which can
modify the art direction and the actual
one that you want to use isn't that
important it is like I said like it's
all like a trade imbalance kind of thing
because you really you know we we are
trying to keep the performance high so
there is going to be a penalty for
everything so where you defer like you
over saying the separations are concern
it's going to have issues with how the
images are loaded and one so if the
things have to be deferred then you know
you might differ layout and that's going
to impact and they use the perception of
whatever application you're trying to
run so it again we need to test a lot of
this stuff we don't know it's still like
even though we've been talking about it
now it's like really time to start
testing someone I guess I just had more
of a direct question for Peter sorry to
put you on the spot but given the kind
of art direction perspective I was
wanting to talk a little bit about from
your standpoint what is best practice
right now I'm given that it's not all
just programmers trying to do stuff in
an automated fashion because every time
I've tried to do that I fail and the art
director looks at me and is like no we
need to cop it this way instead so I'm
gonna I want you to answer that but I
think this is a great question because
it's really about you know watch the
developers be doing today and I think
like John has some ideas answer we
talked about you know let's try this
progressive JPEGs you know and you have
and I kind of been working on the
standards trying to you know look
forward still it's been kind of
experimenting with the client current
techniques so by all means so we have
five minutes so like one minute each
what can developers do today starting
with Peter ok well here's what we're
doing we're sending and lots of the JPEG
sources into the HTML as Jason and
string on the honor data attribute and
we've got JavaScript running that will
after the CSS is evaluated layout will
pick the right source and applying on
resize change it yet the performance
isn't great for that and that the talin
sir a little of what you are saying that
I think that having a default source
their low res your kind of your best
guess is I think an okay way to go for
what we have now okay what do you
recommend for developers I mean I think
that yeah what we have now is is a bunch
of hacks right so wait that's what we
have and I think that we should try in
focus I love that we're doing this and
we're actually I think what we're
talking about are like big wins and
solutions for responsive images i think
we should really be forward thinking and
you know not forget all the different
options and all of our different paths
and and explore them all i think that
current all current tax have performance
trade-offs all current hacks basically
you're deferring the loading of the
image to a later time in order to
download the appropriate appropriate one
i think that the things will look up
soon I think we'll get better soon with
the there's where there is currently
work in the responsive images community
group on an X picture polyfill that will
use web components yeah that uses web
components in order to emulate picture
it won't work with a freeloader but
assuming if you don't have any blocking
scripts at the pages top it should have
similar performance characteristics as
image so current hacks I'll have
problems future hacks will get better
and hopefully and then there's a source
set hopefully it will ship soon in a
default brow I mean in in a release
build release build soon enough okay so
I guess the question is what developers
should be doing now and what developers
should be do now is being concerned
about what they're sending over
wires and making sure that they're not
sending huge assets to limited bandwidth
devices and in terms of what we should
be doing or or the spec author should be
doing is we should also I think what I
haven't heard and I just thought of
while I was on stage so I don't know
maybe it has been there is some CS says
there's the image element you can clip
and pick certain areas so maybe figuring
out a way to do that on the back end or
through client hits so that you're
actually just downloading based on that
instead of downloading the whole image
just expending 11 so it's basically just
taking your normal image and then you
select the area that you want to crop
out and basically you just pop it out
with CSS it's a good way of doing our
directions and it fits quite well with
compressive images as well and so will
give us several answers for CSS you can
just use media queries switch out to our
image it's in a better state these days
for HTML there's three different things
for fixed size images which are
switching based in device pixel ratio
compressive images like serving a double
size but highly compressed image is
reasonable source that will be nice but
only once browser support it for
viewport by switching where you need to
take into account flexible images I
think the best solution these days is to
load a very low quality placeholder
which you embed directly in your what
would you would you directly reference
from your HTML and then that later on
using javascript you swap it out with a
appropriate resolution image based on
the actual image size i would use the
the classic everyone's that's were clear
about like there was like a low source
low SRC attribute on HTML I just use SRC
so I put the low quality ball in slc and
use JavaScript to replace that with a
better called you want once you've
loaded that in the background so you get
kinda like this progressive thing right
the page loads and low quality quickly
and gradually becomes high quality and
so actually stood library for this
yesterday it's on github com / John
Mellor / resp swap is very early stages
finally for art direction where you
actually a different image rather than
just a different resolution the same
image you can't little low quality
placeholder because you don't know what
image is going to be
and so for that you can use something
like picture fill autox whatever but
don't use picture fill for viewport
switching the picture field just for
people who don't know what that is as a
picture Phil is a poet you can google
you'll find it pretty quick and it's
basically the similar syntax to the
picture element but done with dibs and I
think divs and spans Republic but it
basically works but a downside is that
game just don't load until the pages
fully finished loading and which don't
content loaded and so your images will
start loading much later than if you've
got like a placeholder or something and
just do em fit that emphasized on that
yeah picture feel should be used for our
direction and not for not for resolution
switching I might add one comment is the
picture feel the reason that it's an
issue is because it's on Dom DOM content
loaded we should make on DOM content
loaded much faster it shouldn't be
taking ten seconds to download your page
so and that's one thing we should
definitely nice challenge I think we'll
hopefully covered in one of the other
sessions because as part of the
performances so the race work around
that that we would basically say and I'm
just wrapping up here for decision but
basically would just say my page is
ready now see as an author you say
forget dumb content loaded but pages
done and you send like a fake dumb
content loaded event that indicates to
the browser you know now I'm ready to do
other stuff so please join me in
thanking the panel here
you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>