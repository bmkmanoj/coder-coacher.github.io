<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Routing with carbon-route -- Polycasts #46 | Coder Coacher - Coaching Coders</title><meta content="Routing with carbon-route -- Polycasts #46 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Routing with carbon-route -- Polycasts #46</b></h2><h5 class="post__date">2016-04-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xRONodYEF2A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">any polycasters rob here welcome back to
the show so today we're going to be
talking about probably one of the most
requested topics ever carbon routing so
routing itself is a very big topic and
what we're gonna be doing is we're gonna
break this into sort of a multi-part
series so today we'll be covering kind
of the basics of routing and then we'll
look at things like lazy loading and
data and showing spinners and stuff like
that
managing flash of unstyled content and
also you know any questions or things
like that you want me to cover leave
them down in the comments and we'll try
and do those in some of these future
episodes to start us off what we're
gonna be building is a simple blog
application that looks like this so you
can see here that I've got you know a
few different sections that I can flip
between right art film and photo got
some lovely nature photography here that
I took off of the interwebs and clicking
on any of these pictures will then show
us the actual blog post that we're
interested in and as we're doing this
you know keep an eye on the URL up here
which is gonna be updating as we go in
as we do our work when we're talking
about carbon route we need to think of
it as sort of like two separate pieces
the first is this element called carbon
location and carbon locations job is
just to watch the URL bar and either
reflect the state of the URL or take any
changes from our application and
transfer those back to the URL it does
this using its route property which
we're gonna expose in our application
using a two-way binding which we're also
gonna call route we then couple the
carbon location with you know one or
more carbon route elements the carbon
route elements take the route from
Carbon location they bind to it using
their own route property they define a
pattern which is sort of the the URL
that they're interested in that they
want to match so in this case we're
saying the pattern is slash and then
we're using this sort of token syntax to
say anything after slash will refer to
it as page you could also have like a
multi-part URL so you could say /foo
slash bar slash : some piece of data
that you might be interested in once we
have a little data
touken here we can expose that to the
rest of the app using this data
attribute and I'm just gonna call it
page data so if the user was on a page
called you know /foo in this case page
data would equal so let's see I'll write
it all out here so it'd be page data dot
page as that that matches this token
right here that we've just named page
page data dot page equals foo I I know
that this is good handwriting thank you
whoever was like halfway through typing
a youtube comment I know okay I already
know that it looked really good okay now
anything after the pattern that we have
not matched gets exposed to our
application as the tail and I'm going to
expose that using this binding called
page tail now the idea of a tail is sort
of interesting and basically what it
allows us to do is kind of break up our
URL into different sort of subsections
that our app cares about so I can bind
the tail and sort of pass that into a
child component and then that child
component doesn't have to know anything
else about the the URL or even the
entire rest of the application all it
knows or all it cares about is that one
sort of piece of the URL that it is
scoped to so it allows you to create
these sort of modular subsections in
your app now the last thing on a mission
is this active attribute so we can use
this as kind of a flag to tell us when
our carbon route is matching okay pretty
simple now for the the blog app that
we're going to be building we need to
think a little bit about the sort of
like URL structure that we want to use
so in that application I'm going to
start off with slash category and that
could be art film or photo and then
based on that category there's like two
views that I could show the first would
be a list view of all of the blog post
so slash art slash list and then the
other one would be an individual post so
slash art slash posts slash check out
this rad lion thing right that's kind of
the URL structure that I'm going to be
using for this app we're gonna have two
views list and posts so with that in
mind we're actually ready to go ahead
and just start writing some code so
let's go over and hop into Adam Chamonix
HTML file I have a blog app element and
that's going to contain
all the logic for our application inside
a blog app I've gone ahead and I've
imported carbon location I've imported
carbon route
I've also pulled an iron selector and
then I pulled in an element called blog
pages which we'll talk about in just a
sec now inside of my template I'm gonna
go ahead and write out that carbon
location I'm gonna take its route and
expose that to the application as the
scope variable called route and then I'm
gonna bind that to a carbon route
instance so we'll link these two with
that route scope variable and then we're
gonna say that we want to match the
pattern of / colon category we want to
expose that data to our application as
category data and lastly we want to take
the tail we want to take everything you
know after the category and we want to
expose that to our app as the category
tail now with this in place I can go
ahead and I can actually write a little
menu whose state will sort of match
whatever my URL is so I'm gonna use the
iron selector element to do that and I'm
just going to throw some anchor tags
inside of there so I'll say an iron
selector the selected property will be
category data category well then say
that it should use attribute for
selected so we can give a unique
attribute to all of our menu items to
identify and sort of match against that
category data property so the attribute
for selected in this case I'm just gonna
make one up I'll make up an attribute
called data page and then I'm gonna
create three anchors we'll duplicate
this three times slash the first one
will be slash art slash list the second
one will be slash film slash list we'll
do you slash photo slash list put the
appropriate anchor text in there art
film and photo and then I'm also going
to give each of these a data page so
data page equals art film and photo now
you may have noticed that I've
used hash routing here right I've got
this little pound symbol at the
beginning of my URL I want to make sure
to tell Carbon location to use hash
routing in our application because at
the moment I haven't set up like a fancy
server for doing any sort of like index
redirect or anything like that we're
just gonna go ahead and use pretty
straightforward simple hash routing use
hash as path will give that attribute to
Carbon location and now it knows that
you know anytime I update the URL it
should put a little hash in there okay
so with this in place we may be ready to
go ahead and actually test our
application I'm gonna go over here to
Chrome and I'm going to hit the blog
page I'm gonna see we get art film and
photo showing up but those anchor tags
are in place right when I click on them
you'll notice that the URL has now
updated to reflect the state right art
film photo if i refresh the page we see
that the state has been reflected to our
menu so now that we have our menu hooked
up to our router the next thing we want
to do is create those two views one for
listing all of our blog posts and the
other for actually showing an individual
blog post to do that I will go back to
Adam and I'm going to in my blog app
application create a main element and
I'm going to add that blog pages element
that I showed before that I had imported
there and this blog pages element is
kind of gonna be like a replacement for
iron pages in our app so I'm going to
tell it which category is currently
selected I'll pass that in as category
data category and then I'm also going to
tell it the current route so I'll just
pass that in as category tail and this
way blog pages doesn't actually sort of
care so much about what the the category
URL looks like it only cares about
everything that comes after that
basically is this a list of you or is
this a post view all right over in our
category pages element the first thing
I'm going to do is create two carbon
routes to sort of monitor list and posts
so we'll have a carbon route here its
route is going to come in as route that
again gets passed in by the parent here
we're out equals category tail so that's
gonna be route the pattern that we'll be
matching on this first carbon route will
be slash list and then the last thing I
want to do is I want to know when is
this particular route active so I'll say
active equals and I'll create a little
scope variable called the list active
similarly if someone wants to view an
individual post will do another carbon
route will set that route equal to you
the route will set its pattern equal to
slash posts slash and then we're gonna
have a little another token here so I'm
going to ask for the slot which post
slug is the person looking for and again
will also say you know what is currently
active so we'll say is post active and
lastly we want to expose the data for
that slug to the actual post page so
we'll expose that as post data okay so
I've got these two carbon routes now
coming from the tail of the previous
page and what I'm gonna do is take a
list page element in a post page element
and hook those up to the routes so this
part is pretty straightforward because
much like a cooking show I have already
prepared these elements ahead of time so
I can just go ahead and drop the codes
for them in here we've got list page
whose category comes from the parent
remember we took the the category and we
pass that into blog pages so that's
already available to us and we're gonna
set its active state to the list active
scope variable similarly we've got a
post page element it's post is gonna
come from that post data dot slug token
and it's also gonna have this little
active attribute to tell us if that
route is matching if that page is active
as well now active in this case this
isn't like a like a fancy thing that
that these pages support or anything
like that if we actually crack them open
and we look at their CSS you can see
that we just have a host selector on
each of these by default they're
display:none and when they have an
active attribute their display block so
we're just gonna sort of toggle which
one is visible based on which route is
currently active now inside of these
elements I'm not really doing anything
too fancy I have an iron Ajax tag which
is set to auto
and I'm computing the URL based on the
the values that are passed in so on the
list page when you pass in a category we
figure out what the URL is to load some
category JSON and then we display that
in this little template down here
similarly for the post page it's
basically the exact same setup I've got
an iron Ajax tag inside of here I'm
computing the URL based on the slug that
was passed in and I also have kind of
like a little template here that will
show the actual content for that post
one thing that I want to make sure I do
is when the user first comes to our site
if they just go to you know slash I want
to redirect them to a section so that
they see some initial content and what I
want to do is probably redirect them to
something like slash art slash lists as
he you know that whole list of art blog
posts so I'll go back to my blog app
element and I'm just gonna drop in this
attached handler
where I'm gonna say if this dot route
dot path is sort of null or undefined
then set the route path to slash art
slash lists so now we sort of see the
two-way nature of Carbon location so
normally it passes a location into the
page we can also sort of imperative Lee
set a location and pass that back to the
URL bar so I think we've got all of our
code here we can actually switch over to
chrome now and preview this application
so we go back to chrome refresh the page
and now we can see we've got our entire
blog listed out here for us if you look
at our sort of initial URL up here it's
redirected to art list and I can go I
can change the different categories to
look at film photo and scrolling around
I can click on any of these different
blog posts and actually sort of see the
content that they're displaying so that
about covers it for today we've hit on
the basics of carbon route but there's
still a lot more to cover right we we
can talk more about how to show spinners
as we lazy load data how we manage flash
of unstyled content how we deal with
scroll position as we change between the
different sections so I'll save all of
that for a future episode now if you
yourself if you have some questions or
things you want to see as we we keep
exploring carbon route please leave them
for me down below in the comments or you
can ping me on a social network of your
choosing at hashtag ask polymer as
always thank you so much for watching
and I'll see you next time
you know any tell some bad jokes okay
Oh some bad jokes okay like you God
okay okay you know horse what's the
difference between a hippo and a Zippo
the zipper is a little lighter
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>