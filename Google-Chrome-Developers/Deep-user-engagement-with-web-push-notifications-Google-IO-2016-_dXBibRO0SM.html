<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Deep user engagement with web push notifications - Google I/O 2016 | Coder Coacher - Coaching Coders</title><meta content="Deep user engagement with web push notifications - Google I/O 2016 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Deep user engagement with web push notifications - Google I/O 2016</b></h2><h5 class="post__date">2016-05-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_dXBibRO0SM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">push notifications aren't something that
are new they've been around on native
platforms for pretty much ever but
they're new on the web and it's a
powerful feature that we think is going
to be really useful but we need to be
responsible about how we're gonna use it
so I'm going to talk about some of the
ways that I'm gonna ask you to be
responsible with using it and some of
the ways that we're going to be
responsible and using it Jumma is a big
company in Africa they're kind of like
there's a leading e-commerce company
there and they were seeing a lot of
people come to their site go shop on
mobile and then they would abandon their
cart and so their way to try and get
people to complete their purchase was to
send them an email
well one getting them to actually give
them their email address didn't work so
well and to if they did nobody was
opening the emails so they decided that
they were gonna try using web push
notifications so they added web push
notifications recently they're seeing a
38 percent open rate on their web push
notification so think about that
compared to email it's right there
people are seeing it oh hey you're you
abandon your cart there's something in
here do you want do you want it well
okay so that's good but they're seeing a
9 times higher conversion from people
who are getting web push notifications
so it's working phenomenally well for
them there are lots of other companies
who are doing it but that's just one so
let's take a look at what makes a
notification engaging what's useful
users want to have notifications and
there is a point to the seal I'll get to
in a sec users want to have
notifications that are timely that are
relevant they want things where they can
say hey look okay I'm gonna look at this
and not necessarily have to open the app
but make a decision and do something
without having to open it and that are
day altering so for these penguins
getting a notification that their mortal
enemy who's going to try and eat them is
nearby kind of helpful like this is a
day altering thing
so as you start to build notifications
ask yourself one big question is it
important enough to warrant an
interruption is this something that you
want to get at your desk when you're at
the office maybe you're at home with
family having dinner or out with friends
is it important enough to warrant an
interruption and if it's not think about
ways that you can give users options to
be able to say well I want these ones
but not these ones so I think there are
three key things that make a good
notification so let's take a look at
those the first one is its timely I feel
like I need it right now I want to look
at it I want to go okay yes this is a
notification that I'm going to do
something with think like calendar
notifications hey ah I should probably
be on stage that'd be a great calendar
notification thankfully I got that one
synchronous communication so I've got a
chat going on lol oh you know that is a
perfect use for somebody sitting there
waiting for that notification or that
response for you don't send them things
that they're not going to reply to or
that will fix themselves
right so oh hey I'm backing up your
files who cares right like users don't
care about that kind of thing so keep it
timely the next one is be precise
notifications aren't emails you can only
fit so much text and one image in a
notification give them information that
they can look at figure out how they
want to use it and act on it alright the
next one is it's relevant tell them who
it's from what it is specifically that
they should care about in this
particular thing if it's a chat
notification tell them hey you got a
chat notice from this person and here's
what it says and the other little bit on
this one is if it's already on screen
don't show a notification for it right
like imagine
chat up again we seem to have a lot of
those it's easy to keep going back to
those examples um if there's users
already in the chat up they don't need
to see oh they just got a message
because they probably already saw the
message and there's one special one for
web and that this one doesn't really
apply for native applications because
you're probably already working offline
but for web apps make sure that whatever
you're sending to the user is going to
work whether they're online or offline I
live in New York City so sometimes I
have a cell signal in the subway or in
the station and sometimes I don't but I
definitely don't have it in the tunnels
so if I look and I get a notification
and I click on it just as I go into a
tunnel and lose it that's a useless
notification to me I'm going to throw it
away I'm gonna get cranky at you and I'm
not gonna be a happy happy user so let's
try a few notifications and see how they
work flight UA 875 it's delayed new
departure time 7:35 all right this one's
good it's timely because I'm probably
sitting there waiting for a flight right
and I want to know that my flight is
there it's precise because it's telling
me what I need to know it tells me the
new flight time it tells me who it's
from and it tells me where I'm going in
terms of the flight number and all that
kind of stuff so this is a good one I
like this one credit card your credit
card has been compromised yet not so
good right like I get a new credit card
probably every couple of months because
somehow my credit cards been compromised
so this one yeah it's timely but it's
not precise I don't know what credit
card number or what credit card it is I
don't know if maybe uh just a whole
bunch of credit card numbers were stolen
or somebody's cloned it I don't know
what's going on well then it's relevant
because it is telling me it's my credit
card but with a few small changes we can
make this one useful right so did you
make a 1 million dollar purchase at dr.
evil Inc with Visa one two three four
right it's relevant I know which card it
it's timely and it tells me what's going
on and I've also added these action
buttons to be able to say yes this was
me or nope this wasn't me
I'm I'm nice I'm sweet I'm innocent I
didn't do that so Google Plus Jane just
posted a new message yeah I'm not a big
Google+ user so I probably don't care
about this all that much but it's not
timely cuz it's just a message it's not
like it's just something going up
there's no action that I'm gonna take on
this right yeah okay it tells me who
it's from but what am I gonna do with
this there are ways and Google+ does
have some really good relevant timely
precise notifications but this isn't one
of them awesome chat app you have a new
message mmm yeah no right so it's timely
because yes it's synchronous
communication it's something somebody's
sitting there waiting for it but it's
not precise I don't know what the
message is and I don't know who it's
from it could be some spam bot it could
be you know my mom could be anybody else
I don't know if it's my mom I'm probably
gonna look at it depending on my mood
maybe it's you know a co-worker and I
need to reply to this so with a little
change Jake says I hurt service workers
probably something he'd actually say so
yes now tells me who it's from it tells
me what he's saying
I can then excuse me choose to reply to
this or not ignore it however I want all
right
goober your self-driving car has arrived
at one two three any Street I like this
one it's timely because my car has
arrived I'm gonna be going somewhere so
it's good on time to precise it tells me
what it is
that's arrived and where it's arrived
and it's relevant right well yep I asked
for a car so good so this is a good one
ah super cool app thanks for installing
me how many people have seen apps like
this notifications like this yeah yeah
love these don't ya
you're gonna have lots of ways and
already have lots of ways hopefully to
monetize your users don't use
notifications as a way to monetize your
users or just be like hey I'm still here
come please come visit me not gonna make
your users happy they're going to say go
away and they're probably not going to
do it as politely as I just did right so
question a new imaginary social network
mary has just answered your question
this one's pretty good it could be a
little bit better it's timely cuz I've
got the information that I know
somebody's answered my question it's
precise it tells me who and what's
happened with it now it could be a
little bit more precise of it answered
if I got the answer right if I knew what
the answer was but it's a notification
maybe I asked a long question and Mary
gave me a long answer so I want to
balance those kinds of things so
clicking that would take me directly to
the question all right so now that we
know what makes a good notification
let's take a look at how it works I'm
gonna give you sort of the high-level
overview to start and then we'll dive
into the actual code and get really fun
and technical notifications are built on
service workers so all the stuff that
you're used to with service workers
today if you've started playing with
them you're gonna need to use that
technology so that means your site needs
to work on HTTP and you need to set up
that Service Worker on the page and
register handlers for it and then what
happens is your page says hey or your
application so your server which is that
example.com sends a notification to an
endpoint and we'll dive a little bit
deeper into endpoints later sends that
to the browser the browser gets it gives
it to the service worker and the service
worker shows the notification so let's
walk through the flow of how a user gets
subscribed so the first thing we want to
do is check to see if the user already
has a subscription if they're already
subscribed to notification so that we
can update any UI on our page right
because we want to be able to give users
a way to say yes
I want these or no I don't want these so
we want to check to see if they're
subscribed if they aren't subscribed
we're gonna ask them to subscribe
they'll subscribe gais awesome and we're
going to get a subscription ID and this
is sort of like the address that we're
going to use to send the notification to
the user and then we send that up to our
server and we save that in our server so
that way we can get to that user later
we know how to address them for sending
a message on our server we say all right
great I want to send a message to this
user and so you go and generate the
message and you send it up to the end
point and the end point goes okay great
I just got this message for this user
veritable I'll send it over there but I
want to talk about end points for one
sec end points are pretty cool in that
right now there are essentially only two
of them we'll start to see more as other
browsers support notifications but right
now there's one for Firefox and there's
one for Chrome and what they do is they
act sort of as a clearinghouse for all
of the message that goes through so that
way your web app doesn't have to sit
there and listen to your app and your
app and your app and your app by keeping
it through all one central channel it
means that we can keep the user's
browser from killing their battery you
don't have to have service workers
resident memory the whole time the
browser just handles all of that stuff
and most of the platforms have good
notification delivery services already
the one for Chrome on Android is built
on fcm or GCM FCM I guess it is so it
means that you can get those things very
easily done with low power consumption
so then in the browser when the
notification comes in the message comes
in we go oh great okay browsers got it
and the browser spins up the
serviceworker says okay this message
goes to that serviceworker and it spins
up that serviceworker the serviceworker
handles the message and shows the
notification
that's the flow let's do it all right
there's a little bit of setup that we
need to do for the end points for Chrome
unfortunately right now chrome doesn't
support the web push protocol that's
coming so there's a little bit of extra
work that we have to do for Chrome today
this will go away probably in the next
three to six months I'm going for three
months probably but I'll give myself a
little buffer space and this will
continue to work after that but the web
push protocol just means you have one
thing to do so you need to go in to the
cloud console create yourself a new
project and enable firebase Cloud
messaging it may still be labeled as
Google Cloud messaging and then you need
to get the project ID and you need to
get an API key and just break those down
put them around for later
then we need to go into the manifest and
add the project ID to the GCM sender ID
at the bottom again this is only for
Chrome only for the next little while
but this tells chrome when it gets a
message who that message to go to which
serviceworker should get that message so
you just need to add that one little bit
set up for Firefox
yep awesome done so Firefox uses the web
push protocol already so there's nothing
special that you need to do and one of
the cool things about the web push
protocol is that you can talk to any
other endpoint without ever having used
it before so when opera spins up there's
you won't have to go and set any project
up or anything like that you can just go
communicate to it right away if
Microsoft sets it up as far he sets it
up if they're using the web push
protocol you don't have to do anything
you just have to do a little bit of us
create a signature that says hey this is
who I am so if there's any problem you
know how to get ahold of me later
all right helps if I hit the right
button okay so let's talk about how we
subscribe users and unsubscribe users so
checking for subscriptions this is
something that we want to always do
we're doing progressive Web Apps so we
want to do this progressively check to
see if service workers are actually
supported if they are supported we go
and get the registration and in the
registration we call the push manager
API and push manager API only say get
the subscription to see if the user has
subscribed or not if the user subscribed
will get something back in that
subscription if the user hasn't that'll
be no and we can use that information to
set some browser UI so that we can say
oh yeah you're already subscribed thanks
yeh or you know you're not subscribed
and please subscribe then to actually do
the subscription we're gonna say ok
serviceworker registration get
subscription and get that registration
and again we grab the push manager and
subscribe and we need to say user
visible only true what that does is that
says alright hey if we're gonna send a
notification we must show something that
is to prevent people from sending tons
and tons of notifications that it's
gonna wake up that service worker and
keep the service worker alive the whole
time
draining people's batteries and make
sure that you're doing something useful
with each notification so when the users
then hits yes I want to subscribe we get
back this subscription object this
subscription object is a object that we
can do unsubscribe on it's got some
information about how to contact the
user and we need to take that and send
that up to our server because again
that's the address
to go talk to the user but if the user
does deny the permission or the users
like now I don't want you to get I don't
want notifications from you we just want
to make sure we handle that gracefully
the subscription object is when you JSON
affiant this is what it looks like and
there's a couple of things that I'll
point out specifically in here the first
a little bit is the first bit of the
or else so that tells you when you send
a notification to the endpoint where
that goes
so in this particular case I did this in
Chrome so this is going to send to
Android Google API slash GCM send the
second bit is my unique ID if you think
about it as sort of like an email
address the first bit is the domain the
second bit is is my name or whatever the
case is and then the second bit here is
keys these are the users public keys if
you're going to send any kind of data in
your message it has to be encrypted and
the reason for that is we want to make
sure that from your server to the end
user no matter who the endpoint is they
can't see it so if you send something up
to a chrome user Google has no idea what
that message is there's no way we can
see it
Firefox can't see it whoever else is
running those endpoints there's no way
for them to be able to see it so
messages must be encrypted when you're
sending them back and forth or when
you're sending them out to the user so
when do we prompt users generally we
don't want to do it on page load right
like the page loads and all of a sudden
you get a hey do you want to subscribe
this site wants to send you
notifications that feels spammy that
feels annoying I don't know what kind of
notifications you're gonna send me I'm
gonna tell you to insert not appropriate
staged words here right so we want to
make sure that users understand what's
going on if for whatever reason you
decide that doing it on page load is the
right approach for you
jalen ticka s-- has done it and they've
done it well what they do is on the page
load they dim down the page they put a
dialog and they tell the user what kind
of notifications they're gonna send and
they give them the choice there so
they're pre prompting the user they've
done this well if you're gonna do it on
page load this is the way to do it don't
actually just straight-up prompt and be
like hey subscribe because they're gonna
hit know the weather channel has done
probably I think the best job of all the
places that I've seen so The Weather
Channel has a specific page for signing
up for notifications and they do it in a
specific contextual and user-initiated
way they've tied the subscription or
signing up for notifications to what
users want
so there's have a place where it says
hey activate browser notifications they
tell the user what kinds of
notifications they're gonna get and so
when the user goes and says hey yes I
want these notifications and they asked
for the subscription object and that
permission dialog pops up you already
know that the users gonna say yes to
that if the user sees that without any
contextual information right they don't
know what kind of notifications you're
gonna send or why you're even sending
notifications they're gonna hit block
now if they hit block the only way to be
unblocked is for them to go into their
browser settings and change their
browser settings and unblock you right
how many people think they could get
their family and friends to go into
their browser settings and unlock
unblocked something not gonna happen
so we want to be really careful that we
don't accidentally get our users to go
block our sites so we don't want to
subscribe ask them first then do the
dialog the permission prompt all right
and the other thing about whether com
they give users lots of options I can
say hey I want breaking news or
government issued alerts they've got all
sorts of other things and I can choose
the ones that I want so I'm not getting
every single thing that they send out
which is probably going to get a little
bit annoying right alright so how do we
unsubscribe a user if the user says nope
I don't want this anymore
rather than them going and finding a way
to hit block because with every
notification that pops up there is an
opportunity for them to hit the dialog
and be like block I don't want this
anymore
we need to make it easy for the
to unblock so again we've seen him some
of this code before serviceworker
registration get registration get
subscriptions get the subscription again
and then we just call subscription Dobbs
I could I'll try that one again we call
subscription dot unsubscribe and that
unsubscribes to the user so that does it
on the browser side but the thing that
we have to now do is go update our
server right because we have to tell our
server don't bother sending to this user
anymore
because if we try and send it to an
endpoint and the users own subscribed
we're gonna get essentially nope don't
know that address
sorry go away and it's just gonna fail
so we just want to make sure that we're
not sending annoying messages to the
endpoint we've got some sample code up
on our github repository that walk you
through a lot of this process of how to
sign the user up some good prospectuses
there it's a good place to start
it's not something that you necessarily
want to use in production code but it's
a great place to start so when we want
to send a message we want to get a
message out all right
remember that JSON off' ID endpoint
subscription thing keep this in mind cuz
we're gonna need this right there's the
endpoint in the keys there are two
different types of messages that we can
send one is called a tickle that has no
data and the other one is payload with
data tickles aren't really all that
useful but you might want them if you
don't have a lot of stuff that you're
ever gonna send most likely you'll be
sending with data so we need to encrypt
those messages so we take the keys that
we got in the subscription those are the
users public keys we take our payload we
do some aes-128
encryption on it sign it with our keys
and we suddenly get an encrypted message
now I could probably spend the next 20
minutes plus the next talk walking you
through how to do the encryption and
it's not fun and I wouldn't recommend
that you do that yourself so we have
another block of some sample code that
you can use
firefox has one as well I'd actually
recommend you use the Firefox one
because the Firefox one supports both
GCM right or FCM right now and it
supports the web push protocol and
they've said that they're going to keep
maintaining it as a library as opposed
to ours just being some sample code so
check those guys I use that it's
probably a little bit easier to go so to
send a message via firebase cloud
messenger messaging they changed the
name late in the game as after I started
rehearsing makes it all that much more
fun to make sure you're saying the right
thing we do a post message both the
firebase cloud messaging and web push
protocol use a REST API so for that
we're just going to do a post to the URL
that we got earlier we're not going to
use that extra sort of string bit that's
the one of the key differences here we
use an authorization key that's the API
key that we got from the cloud console
we then have to include our public
encryption keys in the salt that we use
to encrypt the message so we're doing
public private key encryption right and
then the message that we want to send so
we want you don't have to include the
time to live but the time to live is
useful that says I want this message to
be delivered within the next 120 seconds
if it's not delivered in 120 seconds
abandon it right so imagine my phone is
turn and what my phone is in the back
turned off right now so I wouldn't get
that message because it would exceed the
120 so that's just how long the endpoint
should try to deliver the message to
your device then the registration ID and
the raw data the web push protocol is
pretty much the same instead of doing a
post request request we do a put request
and we use the whole endpoint right so
we put the whole
point up in there and instead of putting
the time to live inside the data we put
the time to live as a header we then
have to say hey our content type is an
octet stream because our content is
actually binary data encoded and we give
it the encoding type so that we know hey
this is all good and then we need to
include our public keys just like we did
before here's the message great alright
and finally we need to include the
authorization bearer we're using a
protocol called vapid and vapid I really
wanted to have some fun photo but I
couldn't find anything that worked and
would be somewhat appropriate but vapid
essentially says hey I am a server that
is sending to you endpoint and I am a
real person if I'm sending bad messages
here's how you can get ahold of me later
and so it just is a way of signing these
messages to be like yes I'm not trying
to cause a denial of service attack or
give you bad stuff and then finally the
last little bit is the encrypted payload
so we stick that on the end all right so
when we handle the message coming in we
need to add an event listener to our
service worker so in the service worker
we want an event handler that listens
for up push and we're gonna wrap
everything in a wait until the wait
until some people get a little bit and
even I got a little confused with it
several times on why I'm using it and
what's going on and especially all the
wonderful brackets wait until tells the
service worker that you want it to keep
working stay alive until the promise
that it's that's inside it returns and
you must have shown a notification at
that point all right now the reason that
you want to do that is say for example
in your notification you get some data
that's come in and you need to save that
in an index DB database or you need to
say
that somewhere maybe you need to go and
do a fetch request well you don't want
the service worker to shut you down
because the service workers like well I
think you're done you don't need to work
anymore before you've shown the
notification or before you saved what
you need to do wait until tells the
service worker you need to stay alive
stay alive until I'm done with you so
then self dot registration show
notification and that says to the
notification all right hey I want to
show a title and a body and a message an
attack well that's not exactly the most
exciting notification in the world right
and it kind of goes against everything
we talked about earlier in terms of
notifications because it's pretty boring
like it doesn't tell me anything I need
to know so what about that payload stuff
like how do we get that well what we do
is say event dot data and if there's
data in the payload that gives us the
data and we can say dot jason or
whatever to turn it into some kind of
format that we want to handle if there's
no data there are still some things we
can do and we only got data in chrome 50
I think it was so you might need to do
some other things in that case you could
use a FET and go get something back from
the server right in fact in terms of
data size you can only have about 4k
it's just I think it's just a couple of
bytes over 4k so if you're actually
trying to send something more meaningful
down right and you want to make sure
that the page works offline or you've
got a new email and that kind of thing
it might be more than 4k so in that case
you might use fetch here to go get that
stuff and then once you've done that you
can then call the notification and say
notification dot title body icon and tag
the tag is there what the tag does is
that allows you to group similar
messages so that if you've got three
messages three messages that come in
with the same tag only one message with
that particular tag I'll show so that
way you can group messages together you
have multiple things or you could have
three messages if they have different
tags one of the other things that you
can do is make it easy for the user to
complete a task without actually having
to open your app by adding action
buttons so action buttons you can think
of is like hey I want to like this or
retweet this or I want to confirm or
cancel reservations maybe for I i wrote
their name down because i keep
forgetting it Gellin tikkas who has the
shopping cart thing hey do you want to
just finish your shopping cart yes take
it straight there no I want to abandon
it and just throw it out or maybe it's
yeah save it for later I don't have time
to check out now right so giving users
an ability to be able to do additional
things in their notifications so to add
a notification or add an action we just
need to add this actions a tribute to
our notification and we need to supply a
couple of things the action right and
this is just for us internally so we
know what the user clicked a title so
that you get something that's going on
and then an icon so what image that you
want for anytime both on here or on the
icons that you're using within your
notifications I strongly recommend that
you cache those with your serviceworker
that way they're always gonna show up
right like if the user goes and clicks
on gets a notification just as they're
going into that subway tunnel or
whatever place where they have no
network connection you want to make sure
that they're not seeing an notification
that they don't know what it is so
having that title there is really
important all right so the user just
clicked on like or they clicked on yes
or they clicked on something how do we
know what they clicked on well we need
an event listener in our serviceworker
that listens for notification click and
the notification click says all right
hey you clicked on this great and in the
event we can look at the dot action and
that's gonna tell us whether they
clicked on an action or it'll be blank
if they didn't click on anything so
they clicked or they clicked on the main
part of the notification they clicked on
that it'll get that so you know they
clicked on like in that case event dot
wait until again cuz we want to keep the
service worker alive well we go do our
thing and I just did this one as a fetch
and I was like alright
hey go like this notification maybe they
clicked on the main thing and you just
want to open a web page right so then
you can say client open window and open
the web page that they're using so you
get nice way of getting them into your
into your app alright would be nice if
we can get notifications to dismiss
across all devices right how much fun do
you have when you come home and you look
at your tablet or a phone or something
else and there's dozens of other
notifications showing you can do that
with the notification close event so by
listening for the notification close
event you can say okay great
alright when that happens I'm going to
go get the data out of my notification
and do a fetch and close that in this
particular case one way you can do it is
by when you send your notification down
you add some an ID attribute to each
notification so the you know what the
user clicked and when they closed it
you're good to go
alright I blew through that I talked a
little fast I hope not too bad so you
can build really great engagement with
users by using push notifications it's
not terribly hard to do if you start
building things with a serviceworker if
you've used a serviceworker before you
don't have to go all crazy right and
make everything work offline and do the
whole progressive web app piece you can
add push notifications to any website
today as long as you're using HTTPS you
can get that get notifications at it as
you build out your notifications make
sure that your notifications are precise
that they're timely and they're relevant
you know do that
do I want to be disturbed by that don't
tell your bosses you know about
notifications that you think you're
gonna want not want so that they get
great ideas we want to make sure that we
keep good control over them keep them
really solid and helpful to users ask
permission in context right so don't do
it on page load don't go and just do it
completely randomly make sure the user
understands what they're doing so that
you ask them first and then do the
permission dialog so that they know why
that notification dialog that says this
site wants to send you notifications is
showing up we don't want to lose them if
they block things and finally the last
one I always like to close this be
awesome build stuff that's fantastic
build stuff that it's really great that
you're going to like that your users are
gonna like and we're all gonna like so
with that there's a few things here that
you can use there's the web push
notification getting started guide this
getting started guide and there's a code
lab that does this same thing I believe
in the code labs area so if you want to
go try writing some web push
notifications in a code lab you can do
that today if you if you're really kind
of curious about how the encryption
stuff works we do have a post up about
that if you just go some of these links
are kind of long but if you go to
developers.google.com/startups lash
updates and just look for the data it
explains all the stuff you need to do
it's not terribly complex but it's I'm
just always afraid that if I screw one
thing up I'm gonna like bleak everything
and security scares me because I just
don't want to be that guy and then
finally the last one is the vapid speck
that explains how to go set up the
authorization key so that when you send
your message to a web push protocol
server that message gets through the
browser is all good so with that I will
say thank you very much I hope you've
all had a wonderful i/o
thank you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>