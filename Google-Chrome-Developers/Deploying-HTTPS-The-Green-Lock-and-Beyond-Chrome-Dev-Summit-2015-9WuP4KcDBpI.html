<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Deploying HTTPS: The Green Lock and Beyond (Chrome Dev Summit 2015) | Coder Coacher - Coaching Coders</title><meta content="Deploying HTTPS: The Green Lock and Beyond (Chrome Dev Summit 2015) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Deploying HTTPS: The Green Lock and Beyond (Chrome Dev Summit 2015)</b></h2><h5 class="post__date">2015-11-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9WuP4KcDBpI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">fun fact I recently actually changed my
name so I was hoping I would not get any
more Game of Thrones references so
thanks guys I just get excited um so I'm
here from the chrome security team and
I'm here to talk to you about HTTPS and
why we think HTTPS should be everywhere
and what we're doing to help you migrate
your application I want to start with a
scary story so imagine that you're a
developer working on the Google Search
homepage cool job and Google is famous
for being such a perfectionist about the
search homepage down to every pixel down
to the shade of blue for the best user
experience maximizing conversions
maximizing the number of eyes on ads so
if you were a developer working on this
project imagine how horrible it would
feel if this is what your users saw so
what we're looking at here is some
iteration of the Google homepage with
this really ugly third-party ad injected
and this might be injected by some
unwanted software on the user's machine
or it might be someone on the network
like a Wi-Fi provider or ISP injecting
ads and how horrible would it feel if
this was your site that this was
happening to I mean this is this is
terrible it's bad for your business
because fewer users are gonna search
they're gonna get distracted by this
ugly ad they they may not have as many
impressions on the legitimate Google ads
and is a terrible user experience it's
distracting it's ugly and it can
actually cause direct harm to the user
because they're gonna click on this ad
maybe even thinking that it's from
Google and as a result they might end up
with unwanted software on their machine
for example so this is pretty bad and I
can imagine that if you put all this
time into your user experience this is
not what you want to happen but you know
maybe you're thinking ok it's just like
an ads
it doesn't matter that much there's this
ridiculous disclaimer that I'm sure like
two people in the universe have read and
you know and actually made sense to them
so the question is what what other harm
can come from a lack of security and
privacy guarantees on your site let's
look at another example here this is a
famous demo from a security conference
called Def Con
what you're seeing here is an attacker
you've dropping on an on it on a Wi-Fi
network and displaying for all the world
to see all the sensitive user data that
goes across the network in the clear in
this case its passwords you can also
imagine it might be credit card numbers
or even the content that a user is
reading can be sensitive and something
they wouldn't want broadcast you know if
you're if you're reading about a
sensitive medical condition you don't
necessarily want anyone on the network
to see that that's what you're doing so
today what I'm gonna be telling you
about is a protocol called HTTP which
can help you guarantee the security and
privacy of your users and also the
integrity of your content and I'm sure
you all have seen HTTPS before when you
go to Google and you see HTTPS Google
com in the address bar and you see that
green lock I'm gonna be talking a lot
about the green lock today what we're
doing on Chrome is trying to make it as
easy as possible for you to migrate your
site to HTTPS because we think it's
important that every site today uses
HTTPS let me tell you first about the
properties that HTTPS gives you to help
motivate why you want this on your site
first an attacker should not be able to
read the data that goes between the
browser and the server this is a pretty
straightforward property that hopefully
all of you want for your users you know
if your user enters a password into your
site an attacker shouldn't be able to
see it a credit card number and an
attacker shouldn't be able to see the
content that a user's reading on your
site in other words no snooping
everything should be private between the
browser and the server
the second property that HTTPS gives you
goes back to that ad injection I showed
and it's about tampering with content
when you use HTTPS an attacker can't
modify the content such as injecting ads
that goes between a browser and a server
without that being detected and the
connection being closed and the third
property that HTTPS gives you is that
you know who you're talking to so if you
type HTTP google.com into your address
bar the server presents a cryptographic
proof of identity saying this is who I
am
I'm Google and it proves that you're
talking to Google rather than some
attacker who's trying to impersonate
Google so these are the three properties
that HTTPS gives you and hopefully I've
convinced you that these are properties
you want on your site whatever type of
site you may be running it's good for
your users privacy and security to
protect their private information it's
good for ensuring that the content that
you deliver to users is what they
actually see not some modified or
tampered with content by someone on the
network and increasingly as Alex alluded
to it's what you're gonna need to do to
use the increasingly powerful web
platform so what I mean by this is new
powerful web platform features within
the next year or so chrome is going to
start requiring HTTPS to use those
features and this makes sense if you
think about it because using these
features can compromise users privacy
and security which is why we do prompts
like this to make sure that you know the
site that you're talking to is the site
that can you have access to your camera
not just anyone on the network so in
order for questions like this to be
meaningful we need to require HTTPS for
using these powerful web platform
features
now you're all web developers you may
have even set up HTTPS before I hope
some of you have and these days it's
actually not not too hard you have to
the first step you do is you buy a
certificate which is that cryptographic
proof of identity and you configure your
server to use that and there are a
number of tools out there today to help
you with this so I'm showing you one
here called SSL mate that is a really
easy command-line tool to help you buy a
certificate and configure your server
with it and this is not what I'm gonna
be talking about today because there are
these great tools out there and it's
hopefully not too complicated to get
HTTPS set up out of the box what I'm
gonna be talking about today is the next
step because it turns out there are a
number of things that you actually have
to think about after you get that out of
the box HTTPS deployment it's easy to
look at this list and just feel totally
depressed it's easy to think it like why
should I do this I have no hope of
actually getting a solid HTTPS
configuration that's gonna give my users
the privacy and security benefits that
they need that's what we're working on
in Chrome we're working on projects from
developer tools web platform features
reporting mechanisms to help you
discover problems that your users are
hitting in the wild all of these
projects are designed to make it easy to
migrate to HTTPS because we want every
site to do that so this is what I'm
gonna be talking about today the
projects that we're doing to help you
get set up with HTTPS with a solid
configuration and I'm gonna divide this
into three sections first I want to talk
about that lock icon the overall
indicator of the security status of your
page because if we want developers to
migrate to HTTPS they have to understand
what they're shooting for and I'm going
to tell you about browser tools were
building to help you understand that
next I'm going to talk about some web
platform features that help you migrate
your application in a way that you get
the green lock because especially for
large-scale sites it's not just a matter
of turning on HTTPS it's very much a
matter of migrating your application and
the web platform can help you with that
finally I wish I could tell you that the
green lock is all you need to think
about but it turns out there are a set
of best practices that we recommend you
follow even after you get to the green
lock and so I'm going to tell you about
some of those and what we're doing to
make it easy to roll those out so let's
start here with understanding the lock
icon and first I want to show you that
it's hard to understand because you
might think oh it's just a lock it's
green or it's red or it's there it's not
there but it's actually really
complicated and I get confused about it
all the time and I work on it for my you
know for my full-time job so first of
all we have the neutral state so this is
what you see when you visit an insecure
HTTP site it's this kind of neutral page
indicator icon and there's really no
indicator of security or lack thereof at
all so right off the bat I hope this is
a little confusing to you because why is
it neutral like there's no security here
why should why should this be neutral
it's things to the user you know
everything's fine don't really need to
think about it but in fact it's not fine
there's no security or privacy
whatsoever so what we're doing and you
may have heard about is that over the
next year or so where you are going to
be gradually introducing a negative
security indicator for this state so
that when you don't have HTTPS your site
will be marked as kind of a negative
State rather than a neutral State
because we want users to expect HTTPS as
the norm and see insecure HTTP as an
exception so that's a little bit of a
tangent I'm showing you the the neutral
state as it is right now
then there's the green lock state this
is what you're shooting for this means
you have HTTPS setup everything is good
from Chrome's perspective we can mark
this as a secure
connection alright then there's this
kind of intermediate state and this is
when you have HTTP
so the the page was retrieved over HTTPS
but chrome noticed some problems with it
that is stopping us from marking it as
fully secure and there are a number of
conditions that can lead to this state
you might also be used to seeing this as
a lock icon with a yellow badge that was
how it was shown until recently but we
recently um we recently started marking
this as a neutral instead of that yellow
badge because we thought it was less
confusing so this is this kind of
intermediate compromised security state
a number of things that can cause you to
fall into this state and then a
similarly confusing one is what we call
the red flashy lock icon of Doom and
this means that something is really
wrong so in this case your certificate
might be expired or you might have the
wrong certificate or there might be some
some really insecure content on the page
there are a large number of things that
can cause this to happen so
understandably when developers see these
lock icons they get confused they might
not know what the what the lock icon
means and they might not know why that's
showing up on our page when they expect
to have a nice shiny green lock that's
why it we are introducing a whole new
panel in developer tools whose sole
purpose is to help developers find and
fix problems with their HTTP
configuration understand what's going
wrong and get to a shiny green lock so
this is on canary now and on on dev
Channel and I'm going to show you a
little sneak peek here this is what it
looks like you can see it in its own
panel and developer tools and let me
just walk through a few of the things on
here first we have the overall security
status of the page kind of lining up
with the lock icon in this case we're
looking at a page that's in that kind of
intermediate state where the the page
was loaded over HTTPS but there are some
problems that chrome notice that prevent
us from marking it as
now another thing that we're really
excited about that we can use the
security panel for is helping you keep
up to date because as much as we wish
that HTTPS were something you set up it
was you know something you set up and
then you kind of forget about it and
you're good for the rest of time that's
not the reality you have to keep up to
date because there are constantly new
crypto systems being broken new
algorithms being standardized and the
security panel is where we're gonna help
developers keep up to date so that their
configuration stays modern another thing
we see here is information about the
security properties of sub resources and
this is really important because if an
HTTP page loads sub resources over
insecure HTTP that can compromise the
security of the whole site so we're
gonna use the security panel to show you
information about sub resources that
might have been loaded with different
security properties than the main
resource of the page load and you can
see there's that link there at the
bottom to to click into the network
panel so that you can see more details
with the network panel that you're
familiar with so as I said this is on
canary now and also as I said it's whole
job is to help you figure out this
landscape and make sense of it we really
hope that you try it and if you do feel
free to shoot me an email or a file a
bug if you have any feedback at all
because you're the audience for this
feature so the security panel is what
we're doing to help make HTTPS more
comprehensible to developers help them
understand what the green lock icon
means and how they can get there but
especially for large sites the security
panel is not gonna be the whole answer
so imagine that you have a site with
hundreds of thousands of pages of
content many of you probably do and
there may be problems on some of those
pages maybe just a few of them and it's
really hard to track those down when you
migrate your whole site to HD
yes you're not gonna open every single
page and look at it in the security
panel for plump for problems so I want
to tell you about some web platform
tools that can help you hear what we
hear from developers especially on large
sites is that a problem called mixed
content is one of their main challenges
when migrating to HTTPS mixed content is
this problem I was just talking about
where you have a main page loaded over
HTTPS but you have sub resources loaded
over insecure HTTP which can affect the
security of the whole site so those
insecure sub resources are called mixed
content what you're seeing here is the
chrome UI when the page is loading say
an image or other what we call passive
content / insecure HTTP so you can see
you're in this intermediate state you
don't get a lock icon we don't give a
lock icon when you have passive mixed
content on the page
and we have these strings to help tell
the user that there's something wrong
maybe they shouldn't trust this site
fully because there's a problem with its
security so this is what happens for
passive mixed content and you can
imagine if you have hundreds of
thousands of sites with other site pages
with a bunch of images on them it can be
hard to track down any image that's
loaded over insecure HTTP here's another
type of mixed content active mix it's
not dead so if your page tries to load a
script over insecure HTTP Chrome and
other modern browsers will just block it
out right because it's just too
dangerous to run and insecure script on
the page so you'll still get the green
lock icon and you might not even notice
that anything is wrong here but a user
might run into some subtle way that your
that your page is broken and they might
click on this shield icon because users
are curious and they click on things and
if they click on this shield icon
they'll get an option to load the
insecure script and if they do that then
they're gonna end up in the red flashy
lock icon of doom and this is what you
don't ever
on your site because it means something
is really broken and chrome can't make
any security or privacy claims to the
user this is the case of active mixed
content and again it can be hard to find
this on your site if you have a huge
site so the web platform offers you a
way to get notified of mixed content
whenever it runs on your site and this
is handy because if your user runs into
any of these situations you want to get
notified about it so that you can find
it and fix it the mechanism for this is
called content security policy and
content security policy is actually much
much more general mechanism but I'm just
going to talk about a few specific uses
of it here so content security policy
it's a header that you send on an HTTP
response from the server to the browser
and what the header says is that you
want to receive reports whenever content
is loaded from not HTTP so you can see
it has this report only in the header
name that means it's not gonna actually
affect how the page is loaded or runs in
the browser it's only going to mean that
when non HTTP content is is loaded
you'll receive a report about it in
other words if a user lands on mixed
content on your site you will find out
and you can fix it I want to give a
shout out to this cool service called
report URI IO and this is a service that
can collect and help you analyze your
mix content reports so you can sign up
and then you get a URL and you can put
that URL in your content security policy
header and then your reports will go to
this site which will help you analyze
and collect them so you don't have to
run your own server infrastructure
yourself to handle these reports
okay cool so we have a way to find out
when a user runs mix content on our site
there's one step further that you can go
suppose that you actually don't want any
mixed content to ever run on your site
you wanted to be blocked entirely but if
that content is loadable over HTTP even
if the even if the URL itself in your
HTML is HTTP wouldn't it be great if the
browser just loaded it over HTTP and
didn't wait for you to go find and fix
and update that link to HTTPS yourself
it turns out you can use content
security policy for this too so in the
same way you can send a header from the
server to the browser and this header
says that you want to upgrade insecure
requests so you notice it doesn't say
report only anymore because this is
going to actually affect the behavior of
the page as the browser loads it what
this is going to cause the browser to do
is anytime it sees a sub resource with
an insecure HTTP link it'll
automatically rewrite that to HTTPS and
you can imagine this can be really
helpful so for example you have a huge
site and you don't want any mixed
content to run on your site but you load
a lot of your sub resources from a CDN
and if you know that CDN supports HTTP
you can just send this header to make
sure that those sub resources
automatically get upgraded to HTTPS
because it can be a massive engineering
effort to go actually find and update
all your links so these are some web
platform tools that can help you get to
that green lock and we want to make it
as easy as possible for you to get there
because the green lock is kind of the
bare minimum saying that you have the
security and privacy guarantees of HTTPS
for your users but as I warned you at
the beginning it doesn't end there there
there are a number of best practices
that you can use to get even stronger
security and privacy guarantees or to
avoid kind of loopholes in your
application that allow an attacker to
get in so I'm going to give you a little
grab-bag of the
of these tools and tell you how chrome
is making making it easier for you to
use them the first tool in my grab bag
is super simple protect your cookies if
you run a site where users log in the
session cookie that you set on log in is
among the most sensitive data that goes
between the browser and your server
because of an attacker steal fat cookie
as it goes over an insecure connection
they've basically stolen your users
entire identity on your site so it's
really important to protect your cookies
and prevent them from being sent across
insecure connections and this secure
attribute on cookies basically does
exactly that it says to the browser this
is a sensitive cookie don't ever send it
except over and it says secure HTTPS
connection so once you've set up HTTPS
you should add the secure attribute to
all your cookies it's super simple trick
from grab-bag number two also really
simple I call it always HTTPS imagine
that your user lands on a site and that
site links to your site but the link is
over insecure HTTP if the user follows
that link it's kind of game over because
an attacker can intercept the response
and do whatever they want and at that
point basically all bets are off what
you want is for that link to always go
over HTTP so anytime a user visits your
site its https only and this header
called strict Transport Security is
exactly how you guarantee that so you
tell the browser I want to be always
HTTPS and the browser will remember that
and any time a request goes to your site
it'll be over HTTPS even if the user is
following a link that says insecure HTTP
in the HTML also pretty simple right
there's one more problem that I want to
tell you about instead of best practices
to address it but it's a little more
complicated so
so let me explain the problem here way
back in HTTP 101 I talked about buying a
certificate that cryptographic proof of
identity that your site is who you say
it is what is a certificate
it's a cryptographic key pair which has
been signed by another cryptographic key
pair which has been signed by another
and so on chaining up to what's called a
root certificate authority and this
chain is a certificate chain and that's
what we call it the problem that we're
trying to address here is that there are
actually hundreds of root certificate
authorities that are trusted by every
single laptop and phone and browser and
OS and so on so if any single one of
those hundreds of trusted root
certificate authorities its compromised
goes rogue has an evil employee that
rogue CA can actually issue a
certificate for your site and by default
it'll look just as legitimate as the
real certificate for your site so
basically what I'm saying is that
there's a large attack surface here if
any trusted root certificate authority
is compromised that can start issuing
certificates for any site and we call
that a miss issued certificate what we
want is for the browser to be able to
recognize a miss issued certificate from
a legitimate certificate it should see
this certificate which has been issued
by an evil CA and it should somehow be
able to know that this is not the
legitimate example.com certificate this
would be great this is a real win for
security and google has two efforts
underway to address this problem I'm
gonna tell you briefly about the first
because it's a whole talk in itself and
then a little bit more about the second
the first project is called certificate
transparency really cool ambitious
exciting project and the goal is to log
all certificates publicly in a way that
can't be modified or tampered with or
removed later
so the end goal here is not necessarily
that a browser would be able to
recognize in real time a Miss issued
certificate from a legitimate
certificate but if you're a site owner
if you're the owner of example comm you
can monitor these logs they're public
anyone can monitor them so you can
monitor them and watch for site
certificates that have been missing for
your site and then you can take action
on that like revoking asking the CA to
revoke the certificate so this is a
really big project if you want to kind
of take matters into your own hands now
there's another tool that we have called
public key pinning which we tend to
recommend for more security sensitive
sites sites that have a little bit more
operations experience with HTTPS and
it'll become clear why that's who we
recommend it for in just a minute so let
me explain what this is and again the
goal here is to get a stronger form of
HTTPS by allowing the browser to
recognize a miss issued certificate from
a legitimate certificate public key
pinning is a way for a site to describe
to the browser this is what my
certificate chain should look like and
if you ever see a certificate chain for
my site that doesn't match this
description then that's bad close the
connection don't allow it something
fishy is going on it's pretty cool uh
it's it's like many of the things I've
talked about today it's an HTTP header
that the server sends in a response to
the browser and it contains this kind of
syntax that describes the certificate
chain what the certificate chain should
look like now the problem is that
unfortunately this is a little bit hard
to do right and it's quite easy to to
make a mistake so this way that you
describe a certificate chain it's hard
to do it in a way that all clients will
reliably match your certificate chain to
that description
and what happens if you get it wrong if
you get this description wrong it's sort
of like performing a denial of service
attack against yourself because users
are gonna see these pins they're gonna
say oh this is what the certificate
chain should look like and then the this
actual chain is not gonna match that
description as they see it and then
they're not gonna be able to access your
site so that is a sad situation and
that's why we tend to recommend public
key pinning for sites that have more
experience operating HTTPS and our
particularly security sensitive so they
will really benefit from the added
security that public key pinning
provides however recently in chrome we
rolled out a new feature that helps make
this more accessible to sites that don't
have giant Operations teams for example
so this new feature is called violation
reporting for public key pinning it's
sort of like a practice mode so instead
of rolling out with this public key pins
header you roll out with the report only
version of it and you specify it like
with mixed content reporting you specify
a URL what this means is you're not
saying this is what my certificate chain
should look like and close any
connections that don't match this
description instead you're saying hey
I'm in practice mode this is what my
certificate chain should look like but
if I've messed up and there are clients
who can't actually validate my
certificate chain in a way that matches
that description then don't close the
connection and just send me a report
about it so I don't know that there's
something wrong and I need to make an
adjustment before I roll out for real so
this makes it easier to deploy public
public key pins without fear of tossing
your site and even after you go into
enforcement mode so you can see I've
dropped the report only here this is a
real pin that will be enforced and cause
connections to be closed you can leave
the report URI in there so if something
is going wrong you'll get a report about
it even after you've gone live with real
public key pins
all right I've talked to you about a lot
of things today about developer tools to
help you understand the HTTP landscape
about web platform features to help you
get to a green lock and about a set of
best practices to make sure that your
users are really getting the best of
HTTP I want to pop back up a level
because even though we're trying really
hard to make this easy for you it is
gonna take time and energy on your part
so I want to remind you why it's
important so I showed this scary story
about some injected ad just totally
messing up your user experience and this
is terrible for your business it's bad
for your site bad for your users
experience and it can directly harm your
user because they might think that this
content is coming from you and take
actions or make decisions that they
wouldn't otherwise moreover it's the way
the web is going chrome is going to
start requiring HTTPS for powerful web
platform features because it's the only
way for your site to use these features
without exposing your exposing your
users to harm so that's why we think
HTTPS is the future we want to see it
deployed on every site and we want to
make it as easy as possible for you to
migrate all right thanks so much for
listening if you have any questions feel
free to contact me on email or Twitter
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>