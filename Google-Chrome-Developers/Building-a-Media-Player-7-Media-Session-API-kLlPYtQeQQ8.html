<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a Media Player #7: Media Session API | Coder Coacher - Coaching Coders</title><meta content="Building a Media Player #7: Media Session API - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a Media Player #7: Media Session API</b></h2><h5 class="post__date">2017-02-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kLlPYtQeQQ8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">right let's have a little chat about a
brand new API that's just coming out on
the platform called the media session
API I heard about it when I started
doing this out it was mentioned to me by
a couple of the chrome engineers but
Francois who's on my team there's a
brilliant Google web developers update
where he explains in complete detail
about how to set up the media sessions
API so check their notes below we're
going to pop in a link for that but I
will just show you briefly what it
actually looks like in the context of
the app on the phone here in fact
because you probably can't see it let's
switch across to the direct screen cam
there you go and that's what it looks
like on the phone so as I start playing
a video like this and a lot you see that
if I swipe down from the top we actually
get a notification which has an icon
here and it has play rewind and
fast-forward buttons and you get to
configure those yourself right let me go
into another one of these videos where I
think I've actually set up to load some
custom album art as well so there's me
and Jake and you can see here now we've
got custom album art which is the
picture of Jake and the previous and
next the flash forward and rewind
buttons are actually set to be skip
forward 30 and go back 30 so it should
be able to tap that and go forward 30
which you can see there oh it's just
skipped it right to the end looks
amazing but I can replay the video don't
worry the other thing that it actually
does which I really like is if I turn
off the screen then on again you
actually see that the picture the album
art is actually the picture for my phone
in the background it's very exciting
isn't it let me show you a little bit as
well since we're here let me show you a
little bit of the code it's very
straightforward we have a quick check
whether we support the media session API
which is basically looking for let me
show you it is just simply looking for
media session in navigator and if we
have media session in navigator then we
consider ourselves having the media
session API and today what we do is we
say media navigated our media session
metadata and we create one of these new
media metadata thingamajigs very
exciting
excellent doesn't like it doesn't think
it's a real thing it is a real thing you
can totally use it and you give it
things like the title the album the
artwork I've only set the 512m to 256
but very much like your manifest files
for progressive web apps you can set as
many of these as you need and the user
agent will choose whichever one it
thinks it makes the most sense for the
device that it's on and it will upscale
and down scale as necessary but I
currently am just setting a couple of
them I may need more as time goes by and
then afterwards after we set up the
metadata we set some action handlers for
things like the play the pause the seat
backwards and the seat forwards the
thing to bear in mind here is that any
that you set will have the buttons
appear in the notification if you don't
set one because there are other ones
that you can set as well I forget which
ones they are but check out France Wales
postie explains the whole caboodle any
that you don't set won't appear any that
you do set will appear in the
notification and then somebody can
control your stuff from the lock screen
or by just dragging down from the top
all very good at it that and very
straightforward code to be writing so
brilliant little progressive enhancement
thing that you can check on and that I
have checked on my meteor up cool dude
loo hey folks thanks for watching don't
forget that there is more content that
you can find kind of over here ish and
if you want to subscribe it's probably a
button oh maybe there may be somewhere
around there click that if you've not
done that brilliant</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>