<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Debugging The Web (Chrome Dev Summit 2016) | Coder Coacher - Coaching Coders</title><meta content="Debugging The Web (Chrome Dev Summit 2016) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Debugging The Web (Chrome Dev Summit 2016)</b></h2><h5 class="post__date">2016-11-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HF1luRD4Qmk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so today I want to talk about
debugging the web and really this is
about I want to share with you some of
the work that we've been doing in the
chrome developer tools we've been
working hard on a lot of stuff and I'll
share with you today and just a sit back
for a moment I just want to point out
that that really our goal here with the
chrome dev tools is that we want to
maximize your productivity as a
developer we want to make sure that you
are as effective at developing
experiences for the web as you want to
be not just that like I think we all
enjoy web development because we get to
craft these experience that users
consume and we get to like bring them
joy and we want on the dev tools team to
make sure that you have kind of that joy
too so we want to maximize your delight
as a developer so I'm going to be
sharing with you a few things today some
big features that I'm really excited
about also some smaller things that just
are smaller subtle changes but all
targeting your experience in your
workflow as a developer so we're going
to go through a few things from
debugging and authoring purgative web
apps and then some auditing stuff and
we're got a lot to get through so let's
get right into it debugging I'm talking
about JavaScript debugging and so
JavaScript debugging is how we
understand the execution flow of our
code and it's how we remove all the bugs
that we added to our code by accident so
it's a really important thing and we
spend a lot of time doing it so we want
to make sure that it's good so let's
start out small this is the call stack
is the humble call stack this is what it
looked like about six months ago and we
spend too much time here that we want to
make sure that it's as good as possible
so we've done a little bit of UI refresh
here the right hand side is new call
stack some small changes just a little
bit more clean not as much zebra
striping the asynchronous hops are a
little bit more obvious the weird
execution sits is very clear and up at
the top of course you'll see exactly why
you're paused and this is called out
very clearly because sometimes you're
not really sure also sometimes you just
pause on a breakpoint it's kind of clear
but other times your pause on
so it tells you exactly what the
exception message is right up there at
the top so you don't have to go and
figure out and open up the console or
you're in a promise rejection you're on
an xhr breakpoint add-on breakpoint
whatever the reason we want to make sure
it's very clear to you on why you're
sitting there pause on execution so some
changes there but also on the call stack
of some other things now here I have the
dev tools uh fairly me bring that back
uh yep uh-huh mmhmm uh-huh it's good
it's great the dev tools in this case
are pretty big you know like it's not
all the time that we have the dev tools
maximized on the screen and sometimes
it's all over there squish to the window
but we still want to be effective so
this is what the cross act like a while
ago as you kind of reduce the size of
the call stack everything's good shrink
down my function names like I can't even
read them anymore so navigating between
the call frames when I'm debugging is
kind of rough we decided we could make
this a little bit better so this is the
experience now so just as you have less
screen real estate
we go in we kind of stack the function
name in the location and when we run out
of space we just elide at the location
and take the text away from that so
making sure that whatever the screen
orientation and you know we're always
changing it it's going to be readable
and usable for you so so again these are
small changes but important now a lot of
us are authoring not just in kind of
plain old JavaScript but we're using
javascript next exe es6 es 2016 whatever
and we might be using tools like babel a
typescript to transpile them down to
code that can be deployed across a
variety of runtimes and I just want to
point out the dev tools works great with
all these new language features in fact
we use them ourselves this is the dev
tools inspecting the dev tools I'm using
the black dev tools to view the other
one and this is just some of our code in
some of our lair profiler we use a lot
of these new language features ourselves
in our dog
script in here is a bunch of stuff
there's promises and arrow functions
template literals the new array methods
good stuff and this allows us to make
sure that the experience of working with
this new language features whether it's
debugging or in the console is great
great for everyone who uses them so the
console itself it's actually a really
nice thing so if you're like using a
Babel or something to transpile if
you're like what exactly is happening
here just come on over the console and
try it out
in place here works great with all the
new features and constant let here in
the screenshot we can see I'm using the
async await this stuff is great you can
toss in a little debugger statement
right there and understand exactly how
it's moving this is a lot of fun so
while we're talking about the console I
spend a little bit more time here and
talk about the console read line now the
console read line is how did I do this
yeah you know okay coming on over here
so I'm opening up
dev tools on my favorite site
example.com
it's a good one the console read line is
this thing here that we type on and so
usually we type things that you know are
just like fairly like just one-liners
but not all the time sometimes you
actually want to a few more than just
one line that you want to type out and
this has been kind of pain before you
have to hold like shift-enter to avoid
to write in new lines in kind of tough
so I'm gonna write out just top of a
function and as I hit enter now we just
immediately say oh actually I don't
think you're done here
now this some folks call a smart return
in fact Safari kind of paved the way on
this one they have this this feature and
and where we really like it it's
fantastic so not only let me just finish
the rest of this guy I'm just gonna log
out my args I'll enter again we still
knows that we're not done yet
out of brace and it's like oh yeah I'll
reinvent that for you back there and
I'll hit enter again and it's like yeah
you're done we'll execute that cool so
yeah so as I had that too you'll see
that we're we are matching the braces
too so very clear brace matching and in
fact this is now syntax highlighted
whereas that is pretty new even things
like multiple cursors and select next
match all these features that you and
these keyboard shortcuts that use in
sublime text or whatever they also work
here too so some nice upgrades to the
console.readline now the other thing is
that we use the console as a way to
inspect objects and kind of understand
what's going on with them so actually
having the completions as we type
explore things is really important so on
this site let's see document it's yeah
document ahead and I'm just going to
look at child nodes real quick so as I
open up the square bracket I do actually
see immediately all the indices that I
can use in child nodes so I know that
there's 11 child nodes and that's kind
of cool
I'm choose one and one pain point that's
happened in the console before is that
anytime that you have an array and you
grab something from the array and then
you hit dot and you're like am I not
seeing a I don't I can't yet what is
there and I want those completions and
it didn't work anyways it works now so
we're all happy
so in addition to that you kind of want
a little bit more power and you've only
been able to see what starts with what
you typed and so now like if I want to
see what the content is of this child
node I might type content and then Oh
text content yeah actually that's the
text content so substring completions
work now - in fact the substring
completions work not just here but also
in elements panel so in case you forget
something like border color you can type
color and you'll eventually see where it
is all right so some nice improvements
there on the console again small things
but nice alright
sometimes you're writing some code and
to be honest like three lines of code
isn't cutting it you want a little bit
more room and you could go over to
something like jsbin and that's great
for sharing but sometimes you just want
to play around the snippets inside of
sources it's just kind of place where
you can noodle around try out a few
lines of code put breakpoints try things
out execute it
these are persisted into your chrome
profile in this case I was just playing
with the the battery API seeing how much
battery I was discharging and how much
time is left there's cool stuff just
save it there's a few things like little
debug helpers that I keep around and if
you google dev tools snippets you
actually find a bunch of great like
debug helpers and performance monitors
that people have written just take them
save them throwing it into your snippets
it's good stuff all right now one more
thing to kind of finish up debugging uh
yeah
so this line of code that we're looking
at here a a synchronous code I got
promises and some Den's
this is actually a really tough thing to
debug currently um in fact if I place
this breakpoint here on line 16 uh I
pause like before any of this but
there's really no way for me to like
pause inside of my error functions and
see like what's happening inside of them
and if I try and pause here because this
is chained it just doesn't work all
right that's not great we want to make
sure that debugging in asynchronous code
is as
easy as debugging synchronous code so
we've been working on this and thinking
that there must be kind of a better way
so let's see I'm going to open up a
snippet that I have here and yeah yeah
okay this is good so we've been thinking
about this and working your bring that
back here there we go
working with the v8 team to see if we
can improve this experience so what I
have here is some code and we are going
to ask the github API for some data
we're going to fetch it and then you
know turn into Jason and then get some
stuff and hopefully log it out and let's
try this real quick um okay well looks
like there's a problem okay yep great
problems are good now
before it's been pretty hard to
understand what's going on because again
I could only pause in the very first
line of this but so now what I want to
do is I'm going to place a breakpoint
here in addition to that we've also
found all the candidates along that line
of code where you can place in line
breakpoints
all right yeah nice so now that we have
that let's see uh I'll run this again so
what just happened is I ran it again
right now we're paused right here at
this first guy but I'll let that
continue all right now cool
we're paused halfway down the line right
after Jason now I do see that this
response up here is their whole
forbidden that's going to be fun to
figure out and I even see the return
value this promise this is actually the
return value of this call right here now
I think I can go for yeah okay yeah go
for it again and well to be honest it
looks like data here is coming back so
problem with this demo is that I'm
hitting the github API and turns out
that for whatever reason our IP in this
building has already exceeded its rate
limit which is like kinda breaks the
demo so thanks for the people that are
using a github API on Authenticator
right now luckily I have a backup piece
of Jason this is you know what the
payload was that's just sitting there so
let me just you know shut not burn data
into Dean did it it uh okay how we
looking let's clear off these guys uh
uno momento okay okay great so run that
again uh I do have a problem and we can
inspect exactly what is going on I kind
of think I know we go forward I was
asking for data avatar doesn't exist
avatar URL yeah that makes sense let me
finish this off so that we don't have to
worry about it anymore and uno momento
all right there we go out our URL enter
really
what did I do huh no guys I really good
there we go yeah so yeah console image a
little-known thing you know just tosses
an image until your console uh why not
okay to be honest the implementation is
down here is some cool stuff yeah
alright uh anyways inline breakpoints
I'm really excited about this really
introducing a much better double
experience for asynchronous code at all
sorts of code just really break anywhere
you need to huh alright moving on to
authoring and we're gonna start with the
front end and I'm gonna head back into
the browser over here we have a PWA that
me and Sam Saucony have worked on it
it's called Caltrain schedule as you can
imagine it shows the schedule for the
Caltrain and now we've been developing
this um and it's always find when you
want to make changes now a typical way
of making changes like we can try out
some new colors and if we like them you
know usually the method is shift
selection and copy paste over in your
editor now we don't really like this
this workflow and we think it can be
better in previous talks you might have
heard us talk about features like
workspaces and workspaces allows you to
bind your local development folder with
the actual site that you're looking at
in the browser allowing you to save to
disk the things that you're working on
and there's some powerful stuff but to
be honest there's been some
configuration about it getting it set up
if you've tried it like you know it's
kind of like they're working I don't
know so we wanted to make sure it's
really straightforward and simple so I'm
gonna come back over to sources and
clear this out of the way and so in
sources we see ok yeah this is
the code of a service worker here and
some JavaScript and CSS great but I want
to be able to process the disk so the
new experience now is a lot easier so
I'm going to take actually just my
development folder this is my Cal train
schedule folder locally just going to
drag and drop it here and say yeah you
can access that and then immediately you
see a little like green check box light
up and it says oh yeah that's the SS of
the file yeah that's I know where that
is that's right on disk and over here
I'm going to show you on the file system
here's the entire folder like my editor
config and things my service worker but
everything that is coming in from the
network has a little check mark to it so
this is a nice thing because we
automatically find out for you how
things map in fact it's not just uh just
the basics but if you have a more
complex setup like your transpiling in
your JavaScript or your compiling sass
to CSS that should work too without
configuration so we've like I could
explain how we you know made I depend I
don't it's like magic
so things like you know this typescript
we were able to map it back forth as
long as you have a source map for the
actual compiled code we will figure out
where it goes and map it so that any
changes you make persist so let's make a
change or so this title could afford to
be bigger that's nice it's a little too
strong I'm gonna change the foreground
color a little bit dial it back
get in the grey that's good need some
shadow I'm gonna use the new shadow
editor mmm little too black but if we
clean it up ooh that is some classy
stuff yeah I'm liking that now one thing
that you might see right here this green
check it knows that this CSS is actually
the one on disk and if I click through
to view it back in sources we have the
diff saying oh yeah I know you actually
change these lines right here and if I
come back over to
see my editor or my terminal and I just
check my diff oh yeah that's the deaf of
the changes that I made so automatic
okay hole so I'll CSS is looking good
but I really talked about CSS so the
original styles of the site Sam actually
was like pretty responsible for and but
I don't even know if I were like there's
like a lot of styles here and I don't
even know for using all of them like I
imagine that we've all been in the
situation you're shipping an app and
you're just like are we even using in
these these one like you I don't like
I'm not gonna try and remove them cuz
that's crazy but I would like to know
mm-hmm
this is hard uh the browser kind of
knows right where like maybe we should
hmm
so actually yeah as of today in the
canary near you you might find this well
checkbox up here called CSS coverage now
I'm gonna try it out and just hit record
and in fact it's just that's it it's
kind of done I'm gonna head back to
sources and now in a CSS we mark on the
left hand side if these styles were
never used
yeah so actually this is pretty good
down here at the bottom looks like
there's all this animation stuff that
wasn't used I just want to like verify
that like you know this is good the
animation is like actually these little
bars that animate out looks like there's
just two here wonder if I can yeah I'll
try and trigger all of them to dance
just switch this over there yeah it's a
few animations and come back oh yeah
okay so we are using all those not that
but I yeah see this is looking pretty
good so excited about this cuz it gives
us much better tools to understand like
whatever the code that we're shipping
are we actually using uh yeah some good
stuff okay okay coming back now talked
about authoring in the browser a lot of
us are full sack developers we write
JavaScript for the back end too
and at Google i/o we showed some work
that we've been doing to bring profiling
and inspection and debugging to know GIS
we've been excited about this and but
there's always more work to do so let's
show a little bit of that so coming back
to this Caltrain schedule i'm actually
been working a small little feature to
get like the live position of every
single train there's like an API for and
I could get that live on location so
you'd see down here at the bottom of my
JavaScript is uh I'm asking my local
server for the position of a train and
I'm just like polling for it because
I've just started the feature I'm very
early on this one
okay so let's kick off the node right so
we'll come over here this guy and what
we can do is we can hit node - - inspect
and the app and roof nor that for a
moment we got this URL right here
and this is your own we can just
actually copy paste it into our browser
and start debugging but in this case
it's kind of awkward because you know I
already have a tab open with dev tools
debugging the front ends it'd be nice to
be able to like look at the backend - so
I'm actually yeah just gonna allow this
to run but I'm going to come back over
to the sources panel
and now when I open this up and it is
just the main thread and the service
worker down here is note and it's like
oh yeah you're running note aren't you
you want to like want to debug that -
yeah yeah actually I'd be done with that
okay good so now we're connected to node
and I know this because if I switch over
here and I'm looking at just the node
context that error that I was getting
you know over full over here is still
also exploding my screen over here so
that's great okay train is not defined
apparently so let's see what's up all
right so coming down there's my app
Gaius this is my my node code and
apparently there's an error let's just
pause on uncut on exceptions it just
paused right here train is undefined
right yes good and train train train ID
yes mistake I bad train ID is just train
now I'm just gonna hit ctrl s and I
think that takes care of it and we'll
know if we see sending API requests Shh
it's paused who said that Big L I can
like two extra points on the quiz okay
pause all right yeah yeah good sending
API yes okay
and in fact coming back to my other
context my page I went from a bunch of
yeah five hundreds internal service
errors to to hundreds and that's what
you like to see oh good okay
so we're really excited about this
because this allows us yeah sure
I got a clap on the 200s we're excited
about this because this allows us to use
a single dev tools and speak to both the
front end and the back end at the same
time keeping your attention in one place
while managing multiple contexts just
good alright moving on
tried a bit about progressive web apps
today and there's some nice tools in the
dev tools to tackle that now briefly
just review some of them opening in the
application panel there's some great
stuff first up the manifest view will
tell you what's in your manifest and in
fact if if the browser finds anything
it's like not so sure and it issues a
warning or an error you'll see them
shout it out right up here at the top
then the service worker pane tells you
everything the state allows you to
manipulate your service workers and then
I really like this the clear storage
pane allows you to not only unregister
your service worker with one click but
take care of your cache storage your app
cache your in your local storage just
wipe it out and kind of start fresh I
use that all the time I do want to spend
a little bit more time on the
serviceworker panel itself and there's
two things that I want to point out for
you really helpful tips when you're
doing this debugging up at the top are
some check boxes the check box in the
middle update on reload this is a super
helpful guy you can think of it kind of
as like a disable cache but for the
serviceworker JavaScript itself like
it's great for when you're working on s
wjs the serviceworker dot j s and yours
making changes to it you want to make
sure that you load in the new version
every time it'll just make sure that as
you reload it pulls in the new version
don't have to worry about some the cache
and stuff
the other check box bypassed for network
basically says hey serviceworker I
believe you love to like intercept
requests and like server from the cache
and all this stuff but like I'm working
on my site right now and I'm like
updating my styles and my pages
JavaScript and so I really don't want to
like you to be serving things from the
cache and intercepting so it's just like
just chill with the network stuff so
this allows you to iterate on your pages
content your styles and JavaScript
without the serviceworker getting in the
way so definitely check those
and as you keep on as you work with
these tools and and and find things that
are like mmm making you question stuff
feel free to just holler at us and ask
us if there's a better way that the
tools can represent what's going on
because we'd love to make sure we can
help now there's a lot of things in
doing progress web apps that you kind of
have to keep track of and especially if
it's your first time just getting your
your manifest in your serviceworker set
up the right way is a little tricky and
so we've thought of been working on
better ways for us to understand if
we're hitting all the right marks and if
there's anything else that we can do to
make sure that what we're building is
great a lot of that work and that
investment has gone into a project
called lighthouse and lighthouse is a
guidebook for helping you turn a web app
into a great progressive web app and
more than that it is you know any web
page in any website and not only
collects performance metrics but helps
identify all sorts of dilip or best
practices that you could be doing and
making things better so like as an
example it audits for a number of
different things as far as can the user
be prompted to add it to home screen
does it have a custom splash screen but
other things like are you using event
passive event listeners when you should
are you avoiding mutation events and
document right and over 40 different
audits checking for just developer
Excellence on the other side it also
does a great job of having performance
metrics that capture kind of the user
perceived performance in the most
accurate way possible so you've heard a
little bit about first meaningful paint
and time to interactive and lighthouse
measure those and helps give helps
illuminate what is actually happening
when things are slow so lighthouse is
available as a Chrome extension let's
see a little bit of a here see over here
yeah I can run it from the command line
it'll just kick off a new version of
Chrome itself and just run all of its
tests the same tests there and this
works well lighthouse is just a node
module and in fact a number of other
tools are already using lighthouse and
building on top of it so
feel free to check it out like that it
works well with a headless Chrome in a
continuous integration environment so if
you want to set up regression tests for
performance or audits you can definitely
do that and the other thing is that the
we've really been happy with how doing
these checks to see like this one along
the right path this has been working out
for us well we want to make sure that's
even more available so I want to show
you another new thing I'm gonna come
over to our Cal train schedule and I'm
here in the dev tools and we're like
maybe we should have it available not
just here as a Chrome extension but what
if I open this up and more tools and we
have a new audits to point out so this
audits 2.0 is powered by lighthouse so
as I always make this tip yep there we
go so I'm just gonna go ahead and this
is using the same lighthouse that is in
the extension the command line running
all the same checks so it's looking for
things like usage of document right
usage of blocking style sheets and
helping you understand what's going on
so pretty soon it'll give me a report
I'll be able to browse that and yeah ok
looks pretty good fast sighted fast good
job Sam ok but scrolling down this was
this is interesting check this out
site opens external links using rel nope
and in fact there's we have two lengths
on the site which are external open a
new window and not using this guy you'll
have to read about this and this like
I'd saw this I like honestly we really
need to do this so this is super yeah so
I'm going to fix that like right after I
get offstage but yeah I encourage you to
check this out and the nice thing here
is that because this is using lighthouse
lighthouse is just sitting on github
it's a bunch of JavaScript so if there's
anything that you're interested in
auditing for just want to check just
please come by drop by we've had a bunch
of people collaborating on the project
so far so come check it out talk to us
if you have any ideas we just love to to
work on it with you so
what do we see here today a few things
we walked through looking at stronger
debugging with modern JavaScript and I
got to show the inline breakpoints mmm
love it the parallel de bugging with
nodejs and the brows at the same time a
single window the persistence same into
disk really painlessly
automaticall mapping between everything
the CSS coverage to find what CSS you
are not using and new auditing
functionality available in all the right
places
if you're not follow us on twitter our
doctor there and just yeah please grab
canary turn on some of the dev tools
experiments if you want and if anything
you know bugs certainly but even just
feedback or ideas go to see our bug
it'll be like do you want to report a
bug don't file future requests but just
ignore that and just like file if each
requests are just like hey guys what
about what do you think that's fine we'd
love to hear from you that's it for me
thank you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>