<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>HTTP2 - HTTP203 | Coder Coacher - Coaching Coders</title><meta content="HTTP2 - HTTP203 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>HTTP2 - HTTP203</b></h2><h5 class="post__date">2015-12-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CSjL1lrNAx4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">
PAUL: Oh, oh.
JAKE: Whoa, Jesus, man.
PAUL: Sorry.
[LAUGHTER]
How do you fancy a
game of football?
JAKE: Well, as long as
it's not you playing,
mate, because that
was ridiculous.
PAUL: All right.
Wa!
[MUSIC PLAYING]

JAKE: What time
does the game start?
PAUL: Uh-- Tuesday.
JAKE: Hmm.

That was a wasted journey then.
PAUL: We got nice
ponchos out of it though.
JAKE: Mhm.
PAUL: That'll work
fine for England.
JAKE: It's going to
be tough, isn't it?
PAUL: Why?
JAKE: HTTP2.
PAUL: Why?
JAKE: Well, we have to
turn around and say--
PAUL: LOL, no.
JAKE: Sorry, guys.
PAUL: Yeah, it's
all broken isn't it?
JAKE: You know
that stuff we said?
We were lying.
We've got to change
everything that you do.
With HTTP2, the
rules all change.
PAUL: Yes.
Because well, let's think
this through, right?
Because the requests, they're
not as expensive anymore,
are they?
Because you've got, what is it?
One TCP stream or whatever?
JAKE: Yeah, yeah.
With HTTP2, you've got one
stream, one connection, even.
So requesting new
files, it does not
have to open a new connection.
It's just all part of
the multiplex stream.
PAUL: So now you what?
Like, you can send down-- or you
send all these separate files.
So spriting goes away.
Concatenation goes away.
You still in line?
No, you probably wouldn't.
Would you?
JAKE: Well, probably not, no.
I mean, you're still going to
have the request and response.
But all those headers
are compressed.
PAUL: Oh yeah, yeah.
JAKE: Because
they're a big deal.
Like, in HTTP1, you've got,
like, a K and a half of headers
sometimes with cookies and that.
If you multiply
that by, like, 18
requested a page,
that really stacks up.
PAUL: Yeah, yep.
Yep.
Yep.
JAKE: And compression
just takes care of that.
Because you don't have the slow
start for most of it as well.
Because you're on that
single TCP connection.
Yes.
And so I guess you're
probably the same as me.
When you write CSS,
do you have, like,
a CSS file for
components and stuff?
PAUL: Yeah, pretty much.
I'd say so, thereabouts.
JAKE: I think we
can get to a point
where we just serve all
of those files separately.
PAUL: That sounds really,
really nice, actually.
Because it reduces that build
step quite a bit, really.
You know?
You just, sort of--
here's the thing I made.
Push it up live.
That's good.
Actually, talking
pushing, that's
another thing about
HTTP2 as well, isn't it?
And you know, you can request
one file and get all those.
JAKE: Yeah.
You could say, oh,
you want the page?
Well, I'm going to
give you the page.
But-- special bonus
prize-- here's some CSS.
Here's some JavaScript that
I know you're going to need.
And it will say,
like, here's what
your request would look like.
And here comes the response.
Just going to throw it at you.
PAUL: Downer-- what if
you've already got it?
JAKE: So yeah, I
was looking at this.
The client actually can
send an RST_Stream packet.
PAUL: Oh, wow, that's catchy.
JAKE: Yeah.
And that's going to tell it to
identify a particular stream
and say, could you not, mate?
PAUL: Could you just back off?
Yeah?
JAKE: Could you stop that?
PAUL: I've already this--
JAKE: Already got it.
PAUL: Yeah.
JAKE: And you can end up with
a situation where you know,
by the time you send
that to the other side,
it's already sent you
an entire file anyway.
So there's going to
be some wasted bites.
PAUL: And we don't know
that's too bad though, right?
JAKE: We don't
think it's too bad.
Yeah.
PAUL: It's probably
better that way around
than having to request
everything over and over
and over again.
So OK, you decide you're going
to ignore Paul and Jake's
advice-- wisely-- because
say, HTTP2's kicking off.
But the thing is,
not every client
is going to be HTTP2 aware.
Right?
You still got HTTP1 clients.
So how is a developer
gonna kind of handle both?
JAKE: Well, I mean, the servers
are going to take care of that
automatically.
But I take your question.
I take your point.
We've got this issue of
do you, as a developer,
play to HTTP2 strengths?
Or do you kind of
fudge it for HTTP1?
PAUL: I reckon if
you built something
that only works in
evergreen browsers,
you're probably safe
to be like, oh, I'm
just going to do HTTP2, right?
JAKE: Yeah, so multiple CSS
files, multiple JS files,
everything's sweet.
PAUL: Well, I reckon,
oh, the HTTP2,
it sends an upgrade
header, doesn't it?
JAKE: Yes, it does.
PAUL: So you could
differentiate on that.
You could be, like, uh, if
I get that upgrade header,
I'm going to send you
the HTTP2 version.
JAKE: Oh, I see what
you're talking about.
PAUL: So then you might
build two versions in your
build scripts.
So like, concatenate in one,
not concatenate in the other,
and then, basically,
differentiate
based on that header, whether
you're going to-- which one
you're going to serve up.
JAKE: So you cater for both?
PAUL: Ah ha ha!
Winner, winner, chicken dinner.
JAKE: Oh, that's a good idea.
PAUL: I like it.
JAKE: One of the things I'm real
hoping for is the edge caching
services, like CloudFlare,
Akamai, the CDNs, I mean,
they're already supporting
things like SPDY.
I think Akamai
supports HTTP2 already.
What I really want to
see from those guys
is for them to understand
particular headers
that our service would send.
So even if you're
running HTTP 1.1,
you could send along, like,
a link prefetch header.
And it would interpret
that as an HTTP2 push.
PAUL: So that's kind of
like a halfway house.
It's like, my server's not
ready to go HTTP2 entirely.
But if I give you
these additional bits
of a nudge, then the people
who do understand it,
you're just giving them just
that little bit of an edge
over what you're doing.
JAKE: Yeah.
PAUL: Yeah, I like that.
JAKE: So you can even send,
like, an x-header say, oh, you
know, x priority or something.
That would be the signal to
the HTTP2 part at the end that
can sort of do the right
thing with that stuff,
send the right frames
in the data stream.
PAUL: In any case, I'm sold.
I think it's going to be great.
I suspect we probably just need
to issue an apology to pretty
much every developer
that we've misadvised
over the last few years.
JAKE: Any performance
talk before this time
is null and void.
PAUL: That's-- yeah.
JAKE: Going to make us look
pretty silly, isn't it?
PAUL: Well, that's
going to be awkward.
[MUSIC PLAYING]
</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>