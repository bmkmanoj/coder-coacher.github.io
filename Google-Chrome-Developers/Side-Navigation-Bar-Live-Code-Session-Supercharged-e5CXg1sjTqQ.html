<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Side Navigation Bar: Live Code Session - Supercharged | Coder Coacher - Coaching Coders</title><meta content="Side Navigation Bar: Live Code Session - Supercharged - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Side Navigation Bar: Live Code Session - Supercharged</b></h2><h5 class="post__date">2016-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/e5CXg1sjTqQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to supercharged this
is the live stream version and today I'm
gonna watch my watch the chat on YouTube
hey wait look so um there's no one to do
this side nav is because it's quite a
commonly occurring UI component people
do this
so dive straight in is set up a page and
already throw in some styles in there
just so that I've got a header and a
menu icon in there already
alright oh cool now meanwhile as I say
you know he's gonna be on the whole chat
so if you've got any questions anything
to say is youtube.com slash chrome
developers are we already there does it
just tap away but um last time one of
the things that kind of came up in the
comments was that somebody said ah this
code when essentially I wouldn't use
this code in production I want to talk
about that just briefly before I get
going I know I would agree the idea here
is not that we're going to be like hey
here's some production code at the end
of this it's very much about an approach
it's very much about sort of thinking
through the problem and it's kind of
proto code at the end of it but in
theory you know it's the good basis to
actually then take something into
production it is something that is the
first iteration you would refactor
afterwards you would probably make it
more dry you would make more functions
that are aptly named so you can actually
read through the code more oh you're
sorry I'm saying my codes unreadable no
it's very readable Paul it's it's it's
great right anyway you know for that
let's do some code right so I got my
page just briefly to show you the Stars
already in here just so you know I've
included straight up the material icons
font which is cool and I've linked up a
Styles which is just going to be
basically resetting the HTML and body
and it drops in a header with a box
shadow and then it throws in this menu
toggle button which is what I want to
grab onto with the JavaScript so that's
all I did just a because I thought it
was not that interesting to actually do
but you know there we go right let's
make a new file I guess once again the
interesting parts are going to be in the
JavaScript and you have just doing the
markup in some stars so and not really
anything worth right looking take a
close look at script source equals side
let's do dot slash dot slash side
is does what it's isn't on the 10
it's a side nav class side nav side nav
yeah prefer like that
I don't sing you sight enough like so oh
hang on a minute I can do just ask Dada
oh you made the sniper Wow yeah all
right
you're the thought of actually
remembered that what I did I did in time
so don't worry it's okay all right so
let's see what we need to do I think I'm
going to go across and do some Styles
first I want to set up my side nav
element so I'm going to use an aside
because why not and aside let's call it
now why not now right what I normally do
I normally do the kind of sort of fade
to semi-transparent black thing so that
when the side now is out it basically it
slides out and there's this sort of
background black that kind of fades in
so I'm gonna I will do it an upcoming
backdrops CSS so element but we don't
have it yet yeah I did not know today I
learned okay um and just to remind our
audience you can influence the entire
thing just ask questions make
suggestions point out bugs in the chat
or tweet them at me at decima and bugs
what I don't write there is no bugs I
don't know but if you see any or you
think you saw I need let us know I will
try to incorporate them or fix them
whatever we think is more appropriate so
many bugs okay all right so sign up
container and I'm going to do I'll do a
pseudo element I think for this after
content actually no no it's going to be
before I'm going to put it as the first
child in their content nothing
display:block and all in fact you what
I'm going to sign-up itself I'm going to
make that
position fixed and some people like to
do left:0 top:0 but they also do write 0
bottom zir I just I can't bring myself
to do it
no no I actually one of these people who
rather specifies the distance from the
outside spin
using with night but I think I've just
been burned why hide 100% because it's
very ambiguous and what it actually
means position fixed for fix it is
totally clear but it's just like yeah
that's a technical term of course yeah
okay so this should be conserved
contained I will do display:block and
we'll say position while the scrimmage
will be absolutely doesn't really matter
left:0 top:0 so I make you happy right
zero bottom I'm so happy that something
consistent I'm the can't bring myself to
do it with consent hundred percent see
how I just ignore you but a background
we're just gonna do like pink make sure
it's working oh yeah okay that's working
so that's good so I gotta use is the
index to make the drawer on top off the
backdrop or yeah well now I might not
need to because this is a before so it
should be the first child so in theory
get sleep circle children should be
underneath that all being well and we
will do so it's a class will say class
equals say enough and if we do say well
the other side enough and we'll do that
container like that I think yeah and I
will change the styles in here to that
side nerve and then sign of container
that's going to be wrong container
container also can trainer
nobody knows container let me are signed
off container mm-hmm so that should just
be lets say width what thirty percent
something like that let's just do that
background read and we're gonna let
should be darkened seven background read
height hundred percent so this is
position absolute so this should be
there we go got a book so door a like a
crop how exciting
but um what I don't want to do is I
could set this to overflow:hidden and
then I can because if I transform this
out then we'd get scroll bars right so
if I transform this to the left I'm
pretty sure
most browsers will put a scrollbar so we
don't have to be able to over scroll to
the left which would be weird so what I
think we want to do is we want to see a
set overflow:hidden here so that then we
can do trans transform translate X minus
100% because this is one of the reasons
I love transforms right cuz if you do
like minus 50%
it's minus 50% of all that ll nothing
yeah that's really handy yeah and then
so if we didn't - 100% and it'd be
especially for the slide in animations
we don't need to do like major
bookkeeping - for the width and the
height whatever values you want to
choose exactly there's something about
that that just went very very strange
which is that by putting a transform on
it I guess it got bumped down because
look at this without this on it see lo
the back drop below the backdrop which I
find interesting but this is because
this is up positioned absolute right so
if I were to do position:relative then I
can at least there you go um static
positioning always always always
stitches me up every time and it's one
of the more fun parts of CSS yes did I
tell you what we'll do is we'll make
this light not point 4 so we can see the
page a little bit more and I'm going to
add I'm gonna add a box shadow here box
shadow naught now I'm going to pixels in
X not in Y blur by 4 pixels an RGBA
not no not no point hey let's just do a
fairly hefty blur on that yeah it's
really look at that and way too much yes
let's just add that to like seven pixels
okay drop that to lighten up with five
yeah I could leave that you okay with it
yeah I'm that way you're wrong so and
that's why I'm not a signer
okay not like four mm okay this is fine
this is fine so I would say background
that Oh pound sign no you're not
hexadecimal pounds hard or there we go
so that's now that looks kind of like
what we'd want and I think if we do -
100 percent this is going to be wrong
because you can see yeah you can see
that on the left hand side there you can
still see the shadow yeah so let's do it
completely scientifically in say 102
percent and now it's disappeared okay
so lay its good isn't it
so let's set opacity on this to be zero
so this is fine now we still wouldn't be
able to click through to this this
button underneath because the side nav
itself is going to block clicks going
through right so by the power vested in
point eight vents
yeah pointer events none we will set
that there we go so now should we can we
do that it's not work mmm oh we just
probably the siding of itself actually
that's what we need to do sigh now there
you go now we're clicking through it
looking good yeah winner right so let's
bring up the the grout the consort
because that's how I do my debugging so
now console.log straight across to the
JavaScript side now all right so now
we've got aside enough I mean we were
basically done with a set up on the
markups for now for now yeah because
well I tell you what I'm not done but
we'll get to in a minute is the actual
animation e bit so what I wanted to do
here is my plan is to toggle some
classes I'm going to do predominately
going to do this with classes today
because this is a fairly we're a
deterministic animation we're going from
minus hundred to accept a transform of 0
so we cannot know that up front right
yes so why not just let the browser do
it for us and because there'll be a
transition on transform when I'm done it
should get its own layer for that
transform during the the animation but
we'll find out we'll get there in the
end so let's stop side nav yell maybe
equals document
dot query select or select oh all right
selector and what did I call it I call
it sign of any interesting questions yes
I just wanted to ask you one so we have
been asked why do we like the double
underscore notation in CSS which i think
is a good question it's BEM I'm using
BEM you could just as easily be using
web components and do things with shadow
DOM and all that kind of stuff I'm a
little bit old school I guess and so I
still will first when I'm prototyping
something I would be most likely to do
it with straight up classes and BEM and
all that kind of stuff and then if I got
further down the line and I thought you
know what this is actually a thing and
I'm going to make it into a component
self-contained web component
redistribute it then I would probably
start redoing into IDs and everything
else that you'd normally do and then you
know wrap it up with polymer or what
have a have you and then ship it off but
for this for now for kind of hey I'm in
proto duction mode let's just do it if
you want to read more about them go to
BAM dot info it's a methodology of
developing independent components on the
web it involves both JavaScript and CSS
it's all very clearly specified and you
can just read it on that web page you're
going to see in a moment cuz I'm going
to do something like side nav dot
visible and a modifier on an existing
thing has a double dash so double
underscore means it's a child off the
thing and a double dash means a modifier
on the thing so you can have a child
with a modifier so if I did like the
container and that had a modifier would
have you know modest so a nice side
effect of this is that your CSS selector
rules will stay rather short and you
don't run into specificity problems that
easily yes specificity mmm I think it
pronounced it right then you did you got
it absolutely perfect I just can't do it
I just know it's too high for me
practicing it a lot while writers do
just that specificity specificity it's
it's a word and a half anyway sign out
so we're collecting up the side nav and
we need the button as well so this dot
toggle button
element is the document query and query
why can't I type I say today it's always
the same I can't type as quickly as I'm
thinking of the thing jazz menu I
typically have a J s class independent
of the other classes for picking up in
my JavaScript some people prefer to just
pick it up by the class name but I
figured classes can chop and change
whereas the jazz - one's kind of tells
you when you're looking through the code
hey this has got a you know it's going
to be handled by JavaScript probably and
also whatever it's just kind of not
going to change so do that which means I
probably should do the same with this
Jaso no right let's do that what they
said yeah be consistent Paul yes I know
side now - no right and then what I'm
going to do is let's see this dot add
event listeners you know how I do this
we did this last time our event
listeners and you're going to do it
again I am going to do it again so we
say the toggle button so now there is
well there is a nice thing you can do
here with class list toggle but I don't
know it's fully supported so I'm going
to do it the the other way toggle button
and I'll add event listener click when
you click on the button we want to this
duck show side now so since we got a
this duck call inside of here
I am going to have to bind this than
that mind this now in the feedback from
the last one somebody quite rightly
pointed out you could use the most
esoteric part of the web platform that
I'd never heard of before they mentioned
it which is handle event and you can put
on instead of you can sort of an event
listener like this instead of an actual
name you could do this and if the thing
that it's referring to has a handle
event and there we are
it will that's the one we'll get called
it's like the single handler for for
just the event and then inside of it you
get the event and you can I have query
against event type the reason I didn't
want to go for it is because what you
end up with is you end up with like a
double level of indirection because you
get one here in the handle event where
you're going
to go okay which event is it and how do
I route it and then inside the event
handler you'd have to take on which
element am I actually operating so and
arguably a big switch case is not even
that readable yeah right so that was
that was the concern that it would it
would be I'm really looking forward to
es2016 double colon operator which will
just allow us to bind directly to a
function and bind this in one nice
syntactic sugary thing nice I didn't I
don't think I knew about that is that
2016 is that this year well if the
number in the es standards actually
correspond to a year then yes I don't
really know about okay cool sign up all
right so when we when we do this when we
click on it we want to do we want a
class list dot add and we're going to do
what is it it's like side nav and I said
visible I think that's wise to end it
knows that very clever so we're going to
add that class okay so we need to now
account for that over here so when we
have the side nav like this when set
pointer events to auto we need to talk
about this in a second summer but why
I'm using why I'm not like doing
display:none so when the when this sign
up is visible and we will go with the
side nav before before and we will set
opacity to one like so and mmm so now
visible that that's gonna double dot
that's not going to work the class of
the class and that is going to have a
transform of
right all being well pop so we've sort
of got there except we don't have that
before has not done anything sign up
before still a pasty zero signed up
visible side now before there we go
that's good it's not a child recites it
would be like yeah except that we like
that right that'll do it now obviously
that's not very nice so I tell you what
we're also going to do is that with is a
bit not good so what did I say I think I
said with the thirst and I'm also going
to say would you know what I'm going to
do I'm going to wind up a hundred
percent so on mobile it would take up
the whole screen or like ninety percent
and then I think what I'll do is I'll
say a max width of 400 pixels or
something like that so it's like that
and then there you go you kind of get
this oh dude and that's how you're
responsive yeah you know that's actually
one of the simplest ways to do the
responsive thing right we don't have a
transition on that so that's not fun so
we can do this where we could say
transition transform not point three
seconds and cubic Bezier not you can ask
ease in our digital mainstream - yeah
all right all right do not a table do
not point three today
I didn't work transition on transform
because that's probably not the thing
that's transforming is it Paul Paul Paul
Paul oh yeah I find myself confusing
these two directives every one on again
so we got the side nav coming out now
and the the back is snapping straight in
so what we want to do is we want to do
that transition on opacity like that Hey
look this I feels about right as well
well don't so we have no way to dismiss
outside now which is something of a
problem now the reason I want to talk
about this is the I'm not doing
displaying non and display:block and the
reason I'm not is is mainly that what I
want to do is I want to avoid situation
because if you go from displaying on to
display:block you've switched something
from being out of the render tree to in
the render tree and when you do that
it's going to have to be well first of
all that we lay out four switches in the
display block even if it's
position:absolute or fixed and then
you'll have to do all the styling and
all the painting and rasterization and
compositing and all that good stuff and
for something that's aside now I would
argue that it's the kind of thing that
somebody could just tap on immediately
okay something else somebody could go to
straightaway and so you kind of want to
be primed and ready so it's not a
tactical ad approach or take all the
time but I'm going to do it in this case
because I want to make sure that if
somebody taps it's ready to go if it was
some kind of less completa component
something that was less frequently used
a bit on what I would consider the
display non display:block but just bear
in mind that you have some ramped up
when you search something to
display:block for it to actually show up
and on a mobile device you might want to
be careful with that one
so where were we we were here we were
doing that that's the thing that's
popping out the side there right let's
add ourselves a close button or tell you
what let's pop something into here so
we'll do did you want to do just a close
button you're also tapping on the
outside no I'm gonna do both this you
know
why not had a will this call this side
now and we will add a button so that
should be called something like Jays
menu show and jazz menu hide and since
we've done that we should go in here
jazz menu show and see what we're going
to do
and have a hide one element wine
and we're going to do this hide button
element this dot hide side nav Mayo
hide side nav and we're just going to
remove said class so that would work
show hide and let's pop in a closed
button into this is amusing material
icons so I can just pop that in and it
does other things the magic of ligatures
and I know right so jess menu hide so
let's call we want that we want that
header but that's going to be o side nav
it's got side nav hide something like
that let me go out and we'll do that
position:absolute left 16 pixels top 16
pixels you need at the top left
I'm just doing it now just to make sure
works okay
cannot read property classes of
undefined you know why I know why
because I forgot to do something soma I
forgot to do this do hide side now
would you believe it and is almost no
it's not almost done I'm gonna be here
awhile buddy get it I was trying to be
optimistic everyone get a grip of
yourself
I will unbelievable right so let's tell
you what we're going to put in a list of
a lie right a lie I lie I'm just going
to make a list of sort of links to go in
there one to look at you being creative
yep 1 2 3 4 so that we've got at least
content right so what I'll do is I will
say had a class equals side nav header
there we are and you know what we're
going to do we're going to say the side
nav container wherever you are you can
be display flex and flex direction can
be column and we will set sign of
content
yeah that'll do it side nerve anything
going on on the the chair most people
seem to be content ly watching or
contently ignoring us um so if you want
to participate in this yeah you have a
chat ask us questions si what we're
doing wrong for example one person just
said that we should be using Emmet which
is an interesting remark because I tried
using it and I kind of see the appeal
but I I just cannot incorporate it into
my workflow and it's very rarely that
Emmet would actually be beneficial to me
when were the things I do I've never
used it but you know you better view
right kinda like CSS selectors press tab
and it will expand just like that where
you do like Li plus three yeah exactly
and then it turns into an actual markup
thing never never got it to work for me
I can see the appeal
but the felt like the cognitive load of
learning what all the shortcuts are by
the time I'd done that I could have just
run out of HTML which is probably you
know I guess it's kind of like the VI
thing once you actually have it
incorporated into your muscle memory
yeah you cannot stop using it and it
will be so much faster and that's what I
say about VI but I just thought oh I
probably haven't spent enough time on
Emmet no done done in hot pink
that's a WoW that's that's a good
question for you Paul
why not jQuery why not jQuery uh because
I don't need jQuery for this particular
instance I mean you could use jQuery you
can use whatever you like I think and if
it's your project and you've already got
jQuery in your project well it might
make a lot of sense to do that and it
certainly so that I expect to be writing
soon where we do kind of event
propagation stuff like return false
inside of a jQuery event handler super
cool so but in my particular situation
and I just find it easier to just write
the JavaScript directly we don't judge
know why you do i you also flick my head
off a always yesterday the under promo
for this Thanks sick now pull friends
like these anyway where were we right
for x1
yes okay so I want to do the header I'm
just going to position that to be our
dear the line items flex and something
like that it's probably not the right
thing because I don't think I set the
header to flex
display flex
all right I'll look and then we can just
do padding 16 pixels this I'm just you
know I'm just having a bit of fun now
writing in a bit of CSS font family
nobody said nobody ever I'm having fun
writing CSS son serif alright go we got
aside now here we go alright
I had a font size 24 pixels I need to
stop doing the flash to do some bales
3300
99 something a bit per player that'll do
okay so that's actually okay it's what
we need to do is we need to describe
that button the one that actually
already works and sign of hide and I'm
going to say background non-border non
color white
okay we have something so one of the
things that I think we need to do is if
the list of items goes too long so we're
probably going to need a lot of those
for this to work but we want to okay
that'll do that'll do it that'll be
enough actually I'm gonna cheat with the
front sights aren't you no no no I was
going to do as you're going to try and
do this just temporarily and be like so
side enough content we're going to save
list-style:none and we're going to say
padding:0 margin:0 so that should make
it even even worse yeah and then we can
say useless beautiful each list item is
going to be her height 30 pixels line
height 30 pixels I'm going to change
that to a thick to nicer and and then
I'm just going to do this for now is I'm
going to do a hover hover background CTC
probably wallet very nice for phone out
okay so that's that's now squished that
which is good and so we can say overflow
mm X hidden overflow Y scroll see if
that works
yeah look at that see now if our list is
too long we have we all scroll inside if
it's not too long which I'm going about
to fix in a second
Fitzhugh there we go
they say that I did save it it comes in
there we go no scrollbar unless we need
one which is good so did I say I'm the
less a scroll did I say auto I said
scroll if I say auto that will only put
the scrollbar in if needed scroll will
actually put it there all the time so
depending on whether or not you actually
want the scrollbar there or not you
would choose the right thing and for is
it WebKit overflow scrolling touch think
if you want this move all the nikki
thingy yeah yeah okay so we do that
we'll pop that in right the other thing
I wanted to do is just do some padding
and say 16 pixels on the side would be
that one okay I feel like we are with
sort of there ish in terms of something
that we head right so now we need to do
that click the dismiss right yeah okay
now I do this my let's see now so the
immediate problem is that the backdrop
is a pseudo element which does not have
an event handler right no wait no I
don't know what I can do I know what I'm
going to do I have already got the sign
up so I can have the side nav receive
events and that will hide so this will
be bad initially I think so this is a
side nav event so we say that and we say
are the event listener click it helps if
you can type it really does help if you
can do so will do hide side enough so
when you click on this that's going to
pick it up the bad side is if you click
on anything like that it's also going to
dismiss it which is not what we want
however in the interests of fun we can
also say let's see the sign of container
jeaious side nav container
scrub that how's everybody doing on the
live stream sir we have been asked why
we are if and why we are using jade or
and or SAS and some is already if for
this demo SAS will be overcome I tend to
agree yes I have an interest in showing
as vanilla as we can get and that's not
because any of these are the things any
of these tools are bad and in production
you do typically use them and for good
reason they typically solve problems for
you but in the interest of just saying
this is the approach I would take if I
were building this from scratch and you
never know when you're going to find
yourself in a project where you haven't
got the your favorite you know toy to
hand it's good to know kind of the
underpinnings you know how the engine
works in order to be able to play with
it also this allows us to skip the
entire build system to like gulp or
anything that we would have to explain
first so that we are all in the same
page yes that very much that today so
the sign of container add eventlistener
so what I've got is I'm going to grab
the container element and I'm going to
grab it and I'm going to say this block
clicks which sounds strange when you say
block clicks and intake the event then
you just say event dot stop propagation
or you could do stop immediate
propagation but I think this will be
enough so in this case you wouldn't need
to bind the hander but would you do it
for consistency sake oh don't okay I'll
do it for you to me you thank you this
is a pointed question are you going to
do the thing that you do pull are you
not going to do the thing that you do
Paul I just want to know if you're
paying attention I am paying attention
okay I wasn't paying I was paying
attention because I was right so let me
save that as well all right so what was
I testing that's fine that works that
works but that's the United States so
when this gets to click it intercepts it
it stops the propagation so that it
doesn't go back up and the event handler
that would dismiss the side nav on the
side nav element itself doesn't get
fired
so we basically if you click inside
there which is kind of what we want to
do we want
maintain your clicks inside here carry
on but if you click outside
we're dismissed yes another interesting
question I think is why don't you use
filter brightness forty percent to
darken the background instead of using
the pseudo element like we do right now
a good question I don't have a TV strong
answer though although I think I think
opacity is better supported than filter
you could check that on I'm pretty sure
that you on the interwebs forms you're
not necessarily able to animate
something like a filter or in then it
wouldn't be no you can I think really
thing I think there will be new to me
them I think so but um certainly you
know opacity is kind of what it's
designed for
it's the opacity value so it seems like
a good thing to use the thing that it's
designed for but we'll find out whether
or not you can actually use filter as
broadly as you can up rusty you could
find in that one up first while I figure
out what's next oh yes so this is the
thing so now what we want to do I think
is if you don't wanna do that I want to
bring up the device mode if you've got a
side nav like this you kind of wanna be
able to swipe it away which sounds
awfully familiar if you've ever seen
something about I don't know swipeable
cards so that's fine but we will we will
probably do that here I think and what
we'll do is we'll have it stick to the
mouse and then if you kind of if you've
moved it at all off the main point maybe
just a over threshold may be no point
three five that was what we had last
time
what's the number between friends when
you've moved a certain distance whatever
that is we will get rid of the side now
if you find out how we do with the
rustic yes so even though the suggestion
is technically correct it would probably
achieve the very same effect hmm CSS
filters are much less supported than
opacity as we're talking 95% support for
opacity even ie9 supports it while the
whole filter thing is not even supported
in ie 11 and we are at 80% for CSS
filters so it's basically an easy way to
avoid compatibility issues hmm where you
go then it does what it says on the tin
it changes the opacity so that's all
good right let's do the the the swipe
you dismiss stuff
dudu let's see so we've got some add
event listeners so what do we want to do
we want to oh let's see
so if you grab the container and I think
add eventlistener
touch start yes this on touch start and
I'm not going to do I'm not going to do
a mouse drag for this one I'm just going
to assume that it's a touch only thing
and if you're on desktop you'd probably
just hit the button to close I think
excellent I think so on touch start
I say writing on twitch Mouse which is
just not that doesn't that's not even an
event so why would I do that
so let's have a look touchstart event
now here's what we'll do this on touch
start equals this that I bind this
here's what I'm going to do is if you
just tap on a link or something in the
list we don't necessarily want to
initiate the gesture right you know I
mean so here's what I'm what I'm
wondering is whether we need to do
something where we kind of go would you
be would you do look like you're
dismissing well let's see out with a
sale we get on right we'll do a vent dot
prevent default so we start capturing
because if we don't do this we get
throttled back to only get the touch
events every so often so we don't we
never we don't we never we definitely
think goodness we know we definitely
don't want that to happen there we are
right and that touch move on touch move
on touch move
and then okay so let's see so we can do
what we did last time we will do this
start x equals zero and we will say is
that start x equals event that touches 0
dot page X even this code looks very
familiar I know and then we'll say
current x equals this but i might i
could be lazy today i could be lazy
could i be lazy and we'll see how see if
we can get on with it or not so we need
this that start x equals this current x
equals 0 let's be explicit about that
because it's easier to read so we'll do
that so we take the start x and will
also say that current x is the same as
the staff x we have other question yes
would comparing the event target to the
container for clicking outside be better
than stopping propagation altogether hmm
could do could do i mean certainly you'd
have in this case you would sort of make
this less readable right because instead
of just sort of hide side nav you now
have be like under certain circumstances
don't hide the side nav it's only
sometimes the other side nav
i mean you could have a kind of maybe
hide side nav which then calls hide side
now and I'm saying side enough quite a
lot now so I'm going to stop saying that
I think it's a design decision you could
take I have no idea if it has any
performance implications to be honest oh
is it was it performance you know I
don't know I'm just saying that if
you're if if we're looking for arguments
for against either of these approaches
oh yeah my feeling is this more
preference oh yeah kind of how you want
to encode structured and in that case
you know do what makes sense for your
projects for your team for yourself in
this situation I find it quite an
intuitive thing to say this will happen
unless something blocks it and gets in
the way but I can see that other people
would feel differently let's add the
final event listener touchmove
touchstart touchmove touch and
and I don't know what I'm going to do in
there yet so let me get rid of that code
um touch move to start touch and touch
and write touch end I'm not going to do
the game loop for this just yet
I'm going to say as I'm going to say
game loop I mean the kind of
requestanimationframe style
yeah thing but I will see how I go for a
minute touch move I'm going to say this
dot side nerve PL dot style dot
transform equals mmm all the people that
have joined us in the meantime we are
doing a site now today last time we did
swipe all the cards this time we're
doing a site nap and as last time I am
watching the chat and watching my
Twitter feed ask questions make remarks
and we'll try to incorporate them into
the live stream and into the code so you
have a chance to actually influence
where this is going hmm oh don't call it
that poor call it something useful
tutorial it was that translate translate
there translate so that will do that and
we'll just say translate X now I've got
a problem immediately because this side
nav element is going to have a
transition switched on which is not good
so we only saw what's going to happen is
is going to kind of transition on the
transform when I update the transform to
move to the site it can be like really
laggy because it's gonna be like I get
there eventually
whatever whereas if I it's what I need
to do is I need to have a separate class
for this we really going to add like is
being direct class that when we move
them I think it's more like this I'm
going to say animatable
yeah so that will do that so I need to
make sure that the
the sign F has that such side nav
element dot class lists were class lists
the odd that and we're going to do that
I'm going to remove and we don't want to
remove it we want to do that at the end
don't we sign of element dot add event
listener transition and on transition
and and do Const transition and wow we
can do that and then we would say remove
it so and then we want to remove the
event listener as well remove so this is
going to do this and then we want to
have same kind of deal here we want to
say that we want you to remove the
animatable when you're done with missing
an equal sign there where well before
the parentheses I answer there that
makes well it's alright because I was
just about to change that anyway yeah
because of study plan because because
because of the fact that we are going to
repeat ourselves otherwise because they
both both transition ends are going to
do the same thing so we'll do that and
this done transition and this can go
away so this makes more sense I think so
we're going to switch that on missing it
this there you need to bite that the
function I I do need to do that
so mistake not useful dude you're very
useful small doses all the time all the
time
this that map outlined this right so
we've found it so what happens is when
you say show note so now if we do that
and we switch that on and eventlistener
that and then that's fine and then we
want to remove that
make sure you've still got the
animatable on remove it and then on the
end we'll all do that well if that still
works no it didn't
there we are didn't think I was going to
work it was it was it was too much in
one go wasn't it for that to work okay
these reflect the animal at the start ah
yes I do accept that I've got show side
nav which is switching on well
animatable on just switch on before I
mean that shouldn't make any difference
but we'll do it anyway so side now is it
is it doing it
it is doing it but don't we need to wait
for the next frame so that the trends
the transition is actually set you know
why no it is because I'm doing it on the
wrong thing that might also be the case
so what we need to do is we need to say
if the side nav is automatable and your
the side nav container that would
probably be our way to do but this is
the wrong hierarchy right the site Neph
is in sight inside their container no
I'm getting myself confused yeah all
right so hang on okay so the sign of
container is this one here and we switch
that on to have to be uneme table then
oh no no no no no no it was fine it was
fine it was feet and he was just doing
my job of canal a no you were right
you're right
damn it which one do we want to do okay
with this I know is the thing that's
sliding out so we want to tell the side
now to have an anim table class so if we
do the side nav animatable and then
and we tell the container to do that
okay so in which case we need to go back
here and we said needs a side nav is
unavoidable ah okay
we're part part of the way there the
collapse isn't working yet don't know
why let's find out
so that's definitely there let's find
out why so we're going to side nav it's
going to add that it's going to remove
side now visible and it's going to do
that so let's just check this firing
hide side now if it seemed like it did
things that seem simple up front a start
firing what a pointer events still in
the way right now no cuz it'd be just
like yeah let's get rid of that limp
nope can't get rid of that pony
hey there we go come on treed undefined
interesting did I did I do the right
thing with this mystery anybody know on
the livestream what the bulges not yet
anyway hmm okay this is it is a bit of a
mystery isn't it so J is my new hide
interesting question or hurtful question
I'm a question is this accessible so
this is actually really good question it
is difficult to do mobile stuff
and make them accessible I'm not an
accessibility expert so what I normally
do is I would defer to the people on our
team who know significantly more this is
why I'd say this is a very much a
prototype thing and if it was an actual
production approach I would make sure
that what I'm doing is the right thing
and certainly one of the things you need
to do is like focus the the button and
make sure you've got it stubble and all
that kind of stuff but you know as I say
I would I would say it's definitely
worth checking out with with people who
know before example our colleague Rob
Dodson Mills yes a lot about
accessibility so and Alice Boxhall as
well she's truly as plenty as well so
between the pair of them they often
other people I would normally talk to
and say is this the right thing tell you
why let me just do that that's why it
works is the touch that's getting in the
way because I prevent default so it
makes sense so now it's not getting
through so ah this is going to be an
interesting one if you okay I don't know
how we decide whether or not this thing
should actually is there a drag event no
there isn't but oh there might be but
I'm wondering if we've got something
like a delta or something let's have a
look
console dot log EVT all right let's find
out
right
zoom into dev tools zoom into dev tools
thank you hmm Wow it seems when i zoom
into dev tools
it also zooms the page oh no it's just
even just in header okay you know what
I'm going to do I'm going to make this
bigger oh no I don't want to go
fullscreen come back back back you can
do yeah there we go there we go somebody
told me that right idea just suggesting
event target event target event target
that you check if the start is on on
their on the close button or any of the
menu items yeah but then you kind of it
gets a bit fuzzy doesn't it because you
want to be able to just kind of start
dragging and moving what if we use tap
that we let the browser decide if it's a
tap or touch start i'll it was so
preventive also prevent that yeah -
excuse to one who doesn't like this so
navi l which is a mystery to me because
site navi L is should be very well
defined that would mean that this is not
bound yeah but have I done
I'm touched are they say on touch me
that's why I'm touch move look at you a
touch end on touch end
right I feel like what we need to do is
we need to do something about whether
it's going to whether it's trying is
there a delta is there any kind of Dell
Robley only movement and start right the
first touch move the first touch move
might be where we can prevent default
let me find that out on touch move so we
don't want to do that anymore let's see
so we can say the current acts you
already have a touchable Freight ah
thanks dude
yeah well okay cool so we have that on
touch move and we can say well if and
this dot current X less than zero I
think no we want to do that translate if
the translate X is less than zero that
means we should be moved to the left if
that's less than zero event prevent
default maybe let's find out so then we
want to do pixels on that find out
so why is that not moving any so I
obviously have got something wrong so
let's find out what the the translate
should be console got log okay look it
does doesn't it it looks like it's
getting getting all the good stuff and
then but we can't do that so we need to
find out why that touch they gotta start
preventing layout so I need to figure
out a way to kind of only prevent
default if we're definitely moving to
the left right so but we will get to
that so why then sign up L is that the
right thing to be moving what is the
sign of EF Jess I know which is not
necessarily the thing that we want to be
moving the thing that we want to be
moving is the side nav container that's
the thing that we want to be moving so
sign of container element is that why
why why why why bugs my friend bugs okay
it just doesn't seem happy transform
equals that's why translate X oh yeah
that's that's good writing bits gonna
help if you actually put that bit in
okay so we don't want to go past zero no
we don't okay so that's a that's a thing
we can fix is math dot since it's going
negative numbers we'll do math dot m n0
I think yes not the right thing yes
yeah I'm pretty sure yeah so I can't go
past the end now okay
so that's good now one thing I don't
like is that when I'm out here look I
lose the ability to to do that so it
shouldn't be this dot sign now it should
be document also interesting work for
correct question why do you ensure your
spread points instead of console.log
because I'm funny like up I that would
be my answer - I know break point I know
dev tools has all this kind of great
features to help you debug code but for
some reason most of the time I resort to
console.log and that's probably flaw
yeah I should I'm working on it's
definitely a flaw or definitely four so
I have these and we should only be
adding these when the nav is expanded so
this is this is going to be quite an
interesting one so if because the reason
I'm doing this is good I want to be able
to grab it when it's kind of out the
side there so if they are you that one
yes so if contains a return
so if it doesn't contain the sign now
visible we should be able to do that and
then we can do that after the right okay
so the other thing I'm going to do is on
touch end if you can do this if that is
that and yeah if if translate translate
X is less than zero
I'm just going to say this dot hide side
nav so let's see if that works
no why would that not work but no wait
so yeah that should have worked it was a
log yeah I don't know yeah
did I say console dot log no I did not I
said that but I wonder if it's because
this is still being active so we want to
say so we want to say they okay this
side nav container that one dot style
dot transform equals initial I think
would be the equivalent of resetting it
which we find out we think so
yeah so it's it's going back to there so
then that's what you probably want for
now I know it's not actually it's not we
wanted we want to delete this
all right high side that's what actually
I thought it would be like there we go
it fast enough and wide enough so now
we've got this thing that's that's the
thing we wanted so basically when we
when we let go it's like that so we just
do this and if you release over here if
you let go over here we just didn't we
assume that you've dismissed it so I
don't think that it dismisses fast
enough though so I'm going to make that
here's one thing I like doing actually
if you are side now is visible and it's
animatable then we would shoot out a
little slower and we can just have that
so basically we're going to override it
all being well so life I've got this
right come it comes out quickly and then
it shoots away so it comes out a little
slower and it's off that's nice so it
feels like yeah so you just kind of get
a slightly more fluid motion out and
then when it disappears a little bit
more snappy right so we do that and then
I forgot so there's just just a little
thing just are your transition out
sometimes you might want to make that a
little bit slower or faster I mean there
are some people who like to do a fast
kind of out so you really feel snappy
and then kind of a slower or dismission
or the same make it symmetric symmetric
symmetric hole what are the two
apparently the English language is
fading me today so or I'm failing the
English language I think that's much
more likely it's been around longer than
I have
you would think mmm but given the hair
loss it's a close-run thing I agree hmm
right okay so there's the there's this
final kind of question I think over this
which is what do we do about the close
button because we want we don't want to
always prevent default this this line
here is that is the final problem here
so what would happen if you just remove
the prevent default from the touch start
why do we need it I think well maybe we
don't need it maybe that's the thing
maybe I'm getting this wrong because I
thought we'd get throttled back on the
signup but maybe we won't
so that's on that still working now it
might be just because it was the first
touch move third nailed it
ah yes sometimes the simplest solutions
are the best
yeah don't add code Paul
just don't do it I think we've all
learned a lesson here right since we
have a couple of minutes let's throw it
open to the floor is there anything that
anybody has been asking on the chat
anything that you want so maybe this
will make a cry but somebody has been
asking planning on adding adding opening
the menu by swiping in from the left
okay let's have a think if we could do
that quickly um mm-hmm
no we couldn't do that quickly from
where we are I don't think because what
you need to do is where we're currently
leaving the touchstart you'd basically
you'd need to do something where you
enabled some kind of intercepting
element on the left hand side but that
would be quite fiddly because you or you
could do it on the document but then
you'd be controlling say things like the
opacity of the background which we're
not currently good to do so I guess I'm
not going to take that one on learn to
say no apparently that's always good
stop the scope creep okay all I got into
something that you don't want to do
because it's hard it's hard at this
point why you'll be hard if we set out
with it as a thing fair enough if it's
been on the list of to do's any other
questions any final things +1 for
swiping from the left yeah yeah all
right you not yeah funny funny
um no so far we have been covering all
the questions I think all right super in
which case let's just do a quick look at
the styles I think we can just tidy it
up a little bit just as an FYI the code
will once again go up on github
afterwards yeah so you can take a closer
look and actually play around with it
maybe you'll find a very elegant way of
adding the swipe in from the left
we just can't think of right now yeah
and if so do tell us because there's
actually interesting yeah it's
definitely definitely definitely okay
just wanted to add a little bit of extra
why did that my work so why didn't it
work so much I added it's probably my
fault okay I'm actually okay with that
today I'm having pie and the padding-top
was there interesting
so pani it's there but it's not there
what that's really peculiar why would
that so yeah like you'd expect
padding-top it'll be to do with the Flex
box it'll be to do with Flex box
it always is but another question that's
garbage just reminded me all of us asked
you earlier why do you bind the event
listeners in the constructor and not in
the add event listeners call mm-hmm I
could do you absolutely could do I just
like to do it upfront so that it's done
and it's stable if you were feeling
memory conscious you definitely could
and then you'd probably have to in your
remove event listeners you'd set them
all back to null so that it could be
garbage collected or you just leave that
thing's if you can delete you're going
to do it here at the start then you've
kind of done it and it lives with the
instance and then you just add them and
remove them and that's exactly what it
does adding the change in them in the
add event listeners would make it a
little more side-effect E because it
would be like doing some unexpected
binding work and I feel like it's
something that I expected it was part of
the the setup of the side nav instance
what do you reckon we have been reminded
that we should be removing on transition
end the event hello which I don't think
we have been doing uh on transition end
Oh heroic work from whoever that was oh
no we are we are we are we are we are we
are we are this we are removing event
listener transition and this Don
transition and is see is some time as we
do things right or sometimes many times
many times we have gone in this time
we've gone from a a know side nav to a
side nav and let's just check the
timeline
come at 60 frames per second we are
there's a goblin no repaint anyway well
let's find out let's let's have an hour
look at the layer borders so yeah so you
can if you want me slow it down slow it
down so we have a bit more fun right
let's do it old you know what we can do
in dev tools if we always have the new
near if it's not hiding there it is
animations and we'll go like 10% and
then we'll bring it out look at that you
see this is the orange border on the
side there that during the its animation
because we're doing little transition on
a transform the browser knows chrome
knows that it needs its own layer for
the duration of that so we don't need to
use something like we'll change which is
reminded you could use will change here
and will change your pasta and things
like that and in fact I might just add
that on for the background because the
opacity from 1 to 0 wouldn't qualify I
don't think for its own layer so this
animation here with the side nav out
that is going to qualify for its own
layer and then pop it gets rid of it at
the end so what I'm going to do just the
last little thing then I was going to
say that this will change its opacity
because I don't think I could be wrong
but I don't think that by default a
transition on opacity would qualify for
its own layer and certainly the first
time I changed from one value to a zero
value it creates a stacking context
which triggers layout which then
triggers painting and then expensive
which is expensive and something we want
to avoid and we know that we are always
going to be fading from 0 to 1 and back
again so we can put will change it will
create the layer upfront and that would
mean that this is permanently got its
own layer that the black box in the
background put there you go tada right
well with that I have a few things to
say a server said earlier and I will say
it again
we're going to push the code straight up
onto github we will record a TLD W for
you to watch again which would be like
the the breakdown bit of just kind of
what went into this in the meantime
don't forget to subscribe to the channel
let us know what you thought of today
and thank you so much for all your
comments and your questions and your
input we've we've had a blast and we
will catch you next time
see
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>