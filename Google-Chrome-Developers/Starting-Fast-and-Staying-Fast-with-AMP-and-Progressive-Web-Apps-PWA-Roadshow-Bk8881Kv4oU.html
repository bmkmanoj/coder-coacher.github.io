<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Starting Fast and Staying Fast with AMP and Progressive Web Apps - PWA Roadshow | Coder Coacher - Coaching Coders</title><meta content="Starting Fast and Staying Fast with AMP and Progressive Web Apps - PWA Roadshow - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Starting Fast and Staying Fast with AMP and Progressive Web Apps - PWA Roadshow</b></h2><h5 class="post__date">2018-02-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Bk8881Kv4oU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">recently a friend sent me a link to news
article she thought I'd levy and joy I
clicked on the link and waited and
waited five seconds ten seconds my
friend doesn't send me too many links
and when she does
they are usually really good so I wanted
to see what this is but I'm still
waiting something starts to load and I
can start me this article until that
fullscreen banner appears asking me to
install the app Oh No
close that I can finally start leading
this article and it is fascinating but
wait why did the content just jump where
was I and why is it so slow to scroll
down the page as I need this experience
happened to users too often the first
load is way too slow the user experience
is decorated by content that calls the
content to be flow text flashes at spawn
slowed and third-party scripts that
cause performance issues we put a lot of
emphasis on how to stay fast using
serviceworkers to cache content but the
first impression counts if your app
takes too long to load it doesn't matter
how awesome it is or if you've got a
serviceworker set up for subsequent
loads we are really focused on the
three-second number but remember that's
the point which more than half of your
potential users have left so we need to
do better than three seconds humans
receive events that happen in hundred
milliseconds as instant things that
happen in the one second Lynch probably
don't seem instant but still feel
natural to us and then in the ten second
Lynch we are beyond the attention span
of most users ideally we won't our apt
to load in less than one second but on
mobile it often takes additional time to
establish a connection if you need to do
more than a handful of land trips to get
the resources for your first load you'll
easily exceed
three seconds time the current situation
is great today the average mobile site
takes more than 19 seconds to load
after making more than 200 requests
often these extras are added to try to
increase the monetization or converging
on our sites to attract more users and
help keep us in business this leads to a
difficult balance between improving the
user experience or focusing on
monetization and user acquisition
fortunately there is a solution that
doesn't involve our Gardens native app
experience or forcing user to uninstall
ad workers we call it accelerated mobile
pages or amp
for sure let's take a look amp is an
open source project that use existing
web technologies and is built in
collaboration with many different
partners amp dramatically improves the
performance of the mobile site on the
web often to the point where their load
appears to be instant almost immediately
after clicking on the link the article I
want to bead is ready to go amp has
another goal other than to just fix load
time it also addresses LAN time
performance so pages are always
responsive and usable with no more
shifting content amp pages are built
with three core components first is an
HTML aunt HTML is HTML with a few custom
web components a few D placements and a
few constraints for reliable performance
there are most tags in an amp HTML
pastes are illegal HTML tags some HTML
tags are replaced with amp'd specific
tags these custom elements called alt
HTML components make common patterns
easy to implement in a performant way
for example the amp image tag provides
full source set support even in browser
that doesn't support it yet or am i
flame if you need to include content
that may affect page performance one key
thing to point out here is that on pages
do not allow JavaScript beyond what is
provided through the custom element this
ensures that the page is always able to
main
it's performance goals second is the
MPAA's library where a lot of the magic
happens
it implements all of the performance
best practices and optimizations manages
the loading of resources efficiently and
provides the key functionality for the
built in custom tags amp has a static
layout system which means that Li
sources such as images as or iframes
must state their size in the HTML so
that amp can determine their position on
the page before they are loaded because
I'm pious knows exactly the size of
every resource it can pre calculate the
layout of every element on the page and
prioritize loading for the resources it
will give priority to Li sources about
the fold and lazy load resources below
the fold
empty library also ensures that anything
that comes from external resource is
loaded in sync lastly so nothing loaded
in the page can block anything else from
rendering and finally amp cache
essentially a CDN to serve cached
updates DML pages quickly no matter
where the user is the Google amp cache
is a proxy based content delivery
network for delivering documents a 50
amp HTML pages cache them across
Google's worldwide network and deliver
them from the same origin using HTTP -
not only do you get the performance
benefit of HTTP - but page load times
drops because content is cached near to
where the user actually is use of the
Google amp cache is optional and a lot
of the baked-in optimization can be done
by experienced developer when a document
is served from the amp cache amp can
quickly pre-render only the first people
because it knows the size and position
of every ailment
even before any assets are loaded if a
user clicks on one of those pre-rendered
amp pages they get an experience that
feels nearly instant and unlike normal
browser pre-rendering it's completely
opaque to the site owner which is
critical to help maintain user privacy
they'll never know the page was viewed a
unless the user clicks on one of the
links amp makes it super easy for us to
start first but the experience will be
some ik constraint because advanced
platform features like web push
notifications and add to homescreen
aren't available what we really want is
the ideal user journey we want the
experience to start fast and allow them
to stay with a fast and lit experience
as they engage with all the content in
our application we want to start fast
and stay fast without any limitations or
restrictions what if we could come by
amp and PWA and use amp as an entry
point to progress a web app this way we
get the benefit of both use amp to start
fast and use serviceworker to stay fast
the question we need to solve is how we
can achieve this when we can't run
JavaScript on an amp page to install
serviceworker for that we can use the
amp install a serviceworker tag which
makes it possible for you to install
your serviceworker for your ology even
when your amp page is served from the
app cache essentially there are three
models we can choose from amp as a
progress web app up to a progressive web
app and amp in a progressive web app for
sites that are static content heavy and
don't have a lot of interactivity and as
a progressive web app is a good option
we use this technique when building amp
by example calm when the user first
visits the page from the search they get
the amp version served from the amp
cache which includes the manifesting to
amp install serviceworker while the user
is leading your article the
serviceworker is installed and caches
the amp content served from your domain
then when the user clicks on the link
they navigate away from the amp cached
version to the version that's been
cached by your serviceworker even though
it's being served from the serviceworker
cache it's still using the amp rivalry
to serve amp HTML because it has a web
Manifest comma can prompt the user to
add to homescreen too in many cases you
probably want some more interactivity
than what amp offers amp to progressive
web app is ideal case where we have
content that is good for amp but we also
have a PWA providing more dynamic
content and interactivity when user
searches for something and click on the
link the page appears to load instantly
because the content is served from the
amp cache well the user is leading your
article the serviceworker is installed
and can pre test your progressive web
app and any initial data then when the
user clicks on any link on the page your
progressive web app shows up instantly
one disadvantage of this technique is
that your back-end needs to generate
content in two different formats amp
HTML that can be served and consumed by
the amp cache and on the first third and
JSON or other data format for your
progressive web app that's where amp in
a progressive web app comes in an amp
page is more than just a web page it's
an efficient ultraportable embeddable
content unit when pre-rendered as part
of app cache it's essentially embedded
instead of having two data formats for
two different experiences we could use
the amp HTML to power both experiences
the easiest way to do this it would be
to though the content in an iframe but I
film can be slow and each time you don't
new content the browser needs to reload
the compiled and Li initialize the amp
library over and over again in the world
of out pages the world is simple one
window one instance of the app library
and one document if we implement this
approach using iframes then the amp
rivalry will be loaded parsed and
compiled every time we load up document
into the iframe but there's better way
shadow DOM shadow DOM is one of the four
wave component Stander's others are HTML
templates HTML imports and cost
elements shadow Dom is basically the
dump that the also of web components
writes with shadow Dom there's only one
window and one instant of AM primary but
there are multiple documents
this results in super fast transitions
between amp documents as the library has
to be compiled only once we have a
sample up on github that does exactly
this it's simple the activates
progressive web app that displays amp
content when the user clicks on the link
the PW hijacks the navigation click and
fetches the app content when we gets the
content back it puts the content into a
new shadow dude and cause a bat shadow
doc to tell main and rivalry that
there's new content available so with
these approaches we can combine the
ability that amp gives us to get a very
fast first load and the powerful
capabilities of a progressive web app in
this way we can achieve the perfect user
experience one that starts fast and
stays fast if you want to learn more we
have lots of resources to help you thank
you for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>