<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Supercharged Live Live Live! (Polymer Summit 2017) | Coder Coacher - Coaching Coders</title><meta content="Supercharged Live Live Live! (Polymer Summit 2017) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Supercharged Live Live Live! (Polymer Summit 2017)</b></h2><h5 class="post__date">2017-08-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tHJwRWrexqg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello hello hello
actually the late Paul Lewis is now in
the cloud doing machine learning pour
one out for Po Lewis so here I am
hello Copenhagen so I saw this bit
recently I really wanted to try it on
stage so Bill Bailey did it and what he
did is he made the audience clap but not
clap like in the plas but only exactly
once so like you put you answer exactly
once in sync with this already
what an amazing sound nailed it okay
enough time wasted so hey welcome this
is a supercharged which we usually
protect Surma charged I'm rebranding
because as you know this person is not
the ball Paul Lewis this is the boldest
cap that I could find it's close enough
maybe so every colors Monica luckily
agreed to assist me today and we're
gonna do the supercharged life live life
as it is now I guess tradition and but
Paul did move on to deep mines and it's
now working on basically on Google home
and has been working on the next edition
which is gonna be the Google home
developer edition or as its codenamed
the chrome home and so we have a
Developer Preview that we can hopefully
show off a little today while we do our
our cockpits so it should be work pretty
similarly as it usually does
and yeah just do you want me to do it
cuz your accents kind of funny yes hey
chrome home what's the weather in
Copenhagen bleep wait really
I'm programmed with the knowledge of 50
Chrome developers I know all about web
api's and standards and you're gonna ask
me the same stupid you'd ask a
regular Google home
yes
okay the weather in Copenhagen is kinda
nice for further details please consult
your nearest window so Thank You crowd
mom we're gonna maybe make use of that
later whose name doesn't seem that
helpful
might as well Lois has been spending
this time very well um let's do the
thing we're actually a for what is it
we're going to build something sweet
what is it we are going to build custom
elements because after all this is the
polymer summit so I thought we should at
least be using custom elements although
I'm actually not using polymer because
we're focusing on the other thing that
you say we use the platform so we're
gonna show you the low-level stuff and I
thought something that I have been
encountering or noticing lately is that
a lot of sites have or blocks especially
have images like these I have some
images of Koenig and on this test site
here and they load the images right away
like you load the page and all the
images are loaded and that is actually
pretty hurtful because when you look at
it you have like 1.4 megabytes for
opening a web page and maybe you just
want to read the first paragraph and
then leave and that's not cool so I
thought you were built like a lazy
loading kind of custom I'm a lazy I'm
into it right so I'm gonna stop you
right there Surma okay so I would like
this I've Paul Lewis told me not to ruin
his legacy so we have to do some
housekeeping here we would love
questions from you so that as Sarah is
banging on the keyboard we can actually
answer your questions because who knows
what he's going to do and because we
don't have comments on the YouTube
stream please tweet with the hashtag
supercharged I will also be looking at
polymer summit but I assume you're just
gonna be tweeting about how awesome we
are on polymer summit so hashtag
supercharged
ask all of your questions and I will
answer them or the Google home or
forward them to me to distract you you
know the usual deal if you've seen this
before you know how this works but we
don't have the YouTube chat this time so
we are using the Twitter's which also
not Waldorf does
you should totally follow us it's
totally worth your time but don't tweet
at us because I'm not reading my Twitter
just just pull them I summon a
supercharged that's all I got
noise terms alright let's go do it
alright so what I have here is a pretty
empty website but we have four images
that I totally took myself in Copenhagen
and we're gonna try to make them lazy
load and just to show you what's going
on is this super vanilla it's literally
four image tags with four spacer drifts
in between and the styles are just the
space or it's just a high very high def
so that there's some space in between
that is literally all we got and
everything else we're gonna write right
here right now live so you can actually
watch and ask questions and stop me if
I'm being stupid
so instead of using the image tag we are
now going to turn this into our SC image
because branding is importance or
supercharged image tag and to use those
we actually have to of course define
that elements we're going to include a
new thing which is called SC image j s
and that is gonna text bigger yeah like
this mm-hmm
all right SC image yes and now the usual
dance where we go okay as the image
extends HTML elements construct for
super there we go wait but your
constructors on doing anything ways it
there it's just you know have an element
at first now the images are gone because
the s image element is now in use we
haven't anything so if we look at our
thing HTML element this should be saying
SC which and that is because I didn't
actually call custom elements to find my
class what just exists image wasn't used
so I'm gonna go with custom elements
define SC image SC image I think that
how it works yeah you should still see
anything but now it says sch now we're
actually having our own custom elements
in place and now we can start working
with them so
the first thing I want to do is make
health elements by default our inline
display:inline and for images we really
want that we want them to be blocks a
nice wide and full of space so we're
gonna use shadow Dom to give this
element some in inherent styles you
should make the text even bigger even
bigger also somebody asked he is using
vs code I believe it is vs code so let's
create great oh this is gonna be tough
I'm gonna close the sidebar let's create
a template and the template gets some ni
HTML I'm using some template tags and in
here we have the style and the reason
I'm using a template is because instead
of for every in every constructor call I
could just be setting inner HTML but
that always starts the parser which I
don't really want I'm gonna use a
template which is much quicker to to
instantiate so in here I'm going to say
display block because our element is
supposed to be display block in our
constructor I'm gonna say attach shadow
mode oh can I ask you a question from
the live stream so he didn't actually
need to write the constructor he wasn't
gonna add anything but I think he knew
ahead of time who's gonna add other
things if you're only calling super you
don't need to define the constructor I
do it anyway so it's like muscle memory
just like just because you want to add
stuff and then so now we can do a
template content clone node node this is
a family show so let's close the console
and hopefully we should say display
block so our elements are not this per
block there so no demo thank you for
coming we're done here that's it
not quite so let's see how we can load
the image the again what I wanted to do
is to load them when they come into view
so and there's a new kind of new
primitive on the web which is called
intersection observer which allows you
to why don't you explain it
intersection observer is a thingamajig
so that when you scroll a thingamajig
into the view is the intersection
observer says hey the thingamajig is
into the view you should
do something about it that was its
incise really useful if you have like a
giant block of text an image at the
bottom and you really don't want to load
that image until that image is actually
in the view because maybe it's never
gonna get in the view so when it comes
into the view you're like BAM show that
thing alright hey question for you
alright
why is your template outside of the
class because I don't want to recreate
the template for every instance it's
just like there so for me to reuse so
it's gonna be parsed once and I can
reinstate it every time when a new
element is being created which is super
fast I mean unless you're if you're
creating like a million images this is
actually gonna make a difference most of
them it won't but this is just a good
pattern to adopt so you don't run into
these kind of problems ok intersection
observer let's talk about these you
create an intersection observer and you
give intersection observer a callback
and this callback is going to be called
every time some of your elements change
this state and the state meaning being
inside the viewport or outside view when
they intersect with the viewport yeah
hey hey hey chrome home how do you say
intersect with the viewport in German
what sorry the Surma module has not yet
been installed Google it it intersected
us I envy important civil play um did
you mean hit minor part of one of events
yeah yeah that's what I meant
well that means help my bathtub is on
fire sorry Google Play services has
stopped work recently it's been gone for
like two months has been doing downhill
so the callback gets a number of gets is
a callback that as parameter gets a
number of entries and each entry is for
different elements and how the state
changed so we're gonna go through all
these entries and if that entry is
intersecting meaning it is currently
inside the viewport on the element which
is the angular target we are going to
set an attribute which is gonna be
called full which is meaning like it
should now show the full version of
the image and that is pretty much all we
gonna use in the section server for bae
whenever in element scrolls in the
viewport the attribute fall is gonna get
set and then we can react to that change
with our standard observed attributes
that we know from the custom elements so
for that we need our static get observe
deserved attributes which is going to be
the full attribute only and since we
only have that one observed attribute
our attribute change callback and
doesn't need any parameters because we
know it's just gonna be the full
attribute and what we're going to do is
if it's already full
we're gonna return because we don't run
a lot the image twice once is enough and
otherwise we're going to create a new
element create element image tag image
source is gonna be this the source and
now just really I forgot that I should
get some getters so we are using this
dot fault while you're doing the getter
is lovely question from the audience
which browser support intersection
observer and since I'm too lazy to
google it
hey chrome home which browsers support
intersection observer its edge fifteen
Firefox 55 Chrome 58 opera 46 and
Samsung Internet five it's something
there is a polyfill I think there's a
good polyfill fighter that you wrote
what didn't you write it somebody else I
did the first word and then I pass it on
to other people who are much smarter
than me nice but you don't need it
apparently because that was actually
pretty decent support list so most of
the time you'll be running without it so
you're doing to Gators yeah and setters
first source and a fur full I don't
doing setters because I'm not gonna
don't set anything
yeah pretty much all right so we're
creating a new image we are copying the
source from our image to the actual
image tag and then and the reason why
we're doing that is because the moment
you set a source on an image it's gonna
start loading you can stop it from
loading on that image no matter how hard
you try exactly and now we're gonna wait
for a train platform
once it's loaded we are gonna shadow
root attach it to the image that is
actually not a pen child right all right
this looks pretty okay I think let's
give it a try or did something wrong
where's my console nothing is happening
which makes sense because I just created
the intersection observer I didn't use
it anywhere which might might be helpful
so onconnected callback this is the
second part of the API to be
intersections over you create you pass a
callback in to know which code to exit
when something changes and then you have
the have to call tell the intersection
observer what to actually observe so I'm
gonna call observe this because you're
going to observe the element itself and
because we are good citizens of the web
we are also going to do our disconnected
callback and call unobserved
nice so now we're getting errors on line
13 which is totally what I expect it
it's oh that's good I always dislike
this I only want to set the attribute
and yet I still have to say set it to an
empty value or true yeah or true I guess
but it just seems unnecessary so let's
do this backwards compell really for you
I guess nothing is happening oh because
we are setting full and then we're
checking a full which we just said and
therefore this is going to but this is
not smart so I'm gonna just call it
loaded so we're gonna have to attribute
to properties now the full attribute and
the loaded fall is when it's supposed to
be on screen and load when it actually
is loaded and on screen so in this
callback when it's loaded we actually
got a call this loaded is true we're not
going to define even define an attribute
because this is life and it's just that
work anyway all right so let's see cool
I mean it's a little big so that's on
but it's the image is in here in the
shadow Dom so let's give it you didn't
sell any styles so it's gonna be yeah
let it change that shall we so our image
in here and this is what I love about
the shadow Dom I don't have to do like
complex selectors because it is scoped
by the shadow Dom anyway so I can just
go image and say with 100% and be done
with it
boom and now that the thing is if you go
to the network panel only image a has
been loaded with 265 kilogram
by its once I scroll down yes the second
one notes let's go down that one and
this is you know in terms of data
conservation for the user this is much
better because now they only actually
download the data they actually have on
screen so does the intersection observer
run on every pixel scroll how does it
actually work
please it performance it is super
performance so I think as far as I know
if you don't use the polyfill but have a
native implementation of intersection
observer it hooks into the actual layout
engine so the browser can is obviously
the only entity that knows if something
something is on-screen or not and once
it is on screen it queues up one of
these callback invocations and those are
dispatched in idle time and that means
it will you'll only get to process these
entries if the browser has time to do so
so if you're busy encoding a gif or
whatever people do these days on the
main thread your intersection observer
callback will be delayed until there is
actually Headroom to do a blocking
layout you're not blocking pain you're
not blocking your animation or scroll
it's great so and it can basically only
get better because the most important
thing really should be to be interactive
with you a for your user all right is
that okay is that how we do it
is that you're doing pretty good so one
of the questions is what if the image
content is the shadow Dom can robots
access it so like these search BOTS and
they can if they run JavaScript so this
is the same question for SEO and pretty
much that you saw serve everybody says
he'll stand for search engine
optimization it served my engine optimum
engine optimization Olympics yeah so as
you saw exactly the same answer is in
the SEO talk our are from here if you're
running JavaScript it will be accessible
and they're fine and also you should
probably set some alt we're not doing
this because it's not a life is not
something old but that image doesn't
have an old trouble soon as it probably
in the audience and it's not impress me
yeah please don't punch it because I was
always how to I'm honest how to a team
and I didn't do the accessible bit I'm
actually bad okay
I mean that is pretty cool this is
working we could say we're done but
there's something else if you start on
the if you scroll down and read of a
page and scroll up the image is kind of
pop into existence because at the start
our image has no heights and then once
the zero height discount if you the
images done suddenly it has a height so
that can appear which is really sad so
what I would like to do and this is
something where this image is going to
be better than the native image element
it's gonna have support for aspect
ratios so we're gonna I mean you can do
a preemptive three questions from
Twitter you're nailing it BAM
impact alright so what we're gonna do is
we're gonna write it like like a tiny
bit of a back end so I'm gonna bring the
sidebar back real quick to create a new
file which is gonna be no not in here
down here there I'm gonna write a little
backhand and we're gonna be using some
Express because whenever I dunno I just
use Express because it's easy and we're
gonna kill our Python web server and
instead start our new server are you
gonna do some server-side rendering it's
gonna be service I swear site rendering
I'm here all day don't we create a new
app and that app hang on that app uses
the express static middleware because
mostly we're just gonna do static page
delivery and app does listen on 8080 and
so now everything should be working the
same cool it's still loading now we're
using our new back-end and now we're
gonna do something new because we're
gonna define our own route for HTML
files request response and what I want
to do in here is basically inspect our
images to figure out what their aspect
ratio is and do some CSS hackery to give
the elements an aspect ratio so that
they retain their aspect ratio even if
the image data has not been loaded yet
and to do that we have to first figure
out which file is actually being loaded
so let's to the file path which is
request URL and if the file path ends
with a slash that usually means that we
have to
at index.html right / it's a folder and
that kind of deal and now we have to do
to read the file basically and to do
that you have to do the FS module I'm
gonna use I'm unknown eight so I can use
all the new shiny stuff so I can use the
new promise of five function from the
utils module to turn the old call back
version of file system into a promise
version and we all like promises so I'm
gonna do that Hey hey Google home do you
like promises oh chrome home sorry
do you like promises yeah I prefer
streams though all right so it's very
simple you just pass in a function that
that has the standard node callback
birth callback the layout where the last
parameter is a callback with era and
results and it turns into something that
is a that now is a function that returns
a promise and that means that we turned
this whole thing into an async function
and can now do const so if you're gonna
read the buffer we can do a weight read
file file path this is going to work
because we have to add and static then
we can turn it into string so we can
send it back and then we can send these
contents back let's hope that works
still working cool so now we can read
file to try which i think is much nicer
to read than having like either promises
all callbacks honestly async await
really makes this much easier all right
we have the buffer we have the content
and now we're going to do some
post-processing on it because we need to
figure out which images are being loaded
load all these images and then figure
out what the aspect ratio is so we are
gonna do because and I know you're gonna
love this we're gonna do some Rex magic
Oh God so what some people don't know
for the record I haven't seen this code
before so I'm getting like anxiety every
time you says these words like we're
gonna do some rags magic you want to out
the Rex no no I'm gonna answer some
questions though while you type your
okay cuz nobody needs to know blame the
writing so for the questions and then
okay the Rex one of the questions is why
I earn weeks
bending the image element with is equals
because that's not a thing that is not a
thing unfortunately so is equals as one
of the battles we lost a little bit for
custom elements I mean it's in the spec
it's in the spec but it's not actually
implemented everywhere not even the
chrome I think has it for them they're
Arabic so it doesn't actually work
anywhere the polyfills don't have it so
you can use as equals all you want it's
not gonna do anything
browsers have expressed very strong
dislike of the is pattern and if one
brother doesn't do it as no point yeah
are these and just doing it in some
browsers because it's also very hard to
polyfill I don't even think it's poly
fillable at all not sure about that but
it for now we have to live without
subtyping native Allen's you can only do
HTML elements and nothing else
hmm carry on we're gonna redirects and
we're gonna find all the SC image
elements and we're gonna do this we want
to have everything until the closing tag
come on see image it's beautiful isn't
it and let's keep it this way and let's
call join down here and let's work on
the source for a bit so we can see what
is going on this means it is not working
so that's good we're splitting this that
is correct
thank you very much and my images
disappeared which is actually true
because I need to put parentheses around
this so now this should look the same
the good part is that now new con is an
array and it's either gonna be remainder
code oh it's going to be just one
isolated SC image element I can just
assure what I'm talking about I'm gonna
console.log new content for AB it's
gonna refresh and then in the console
it's an array and every second element
now is an SC image element because that
is the part that matches the red X and
everything that doesn't match is going
to be put in another element so we now
just split apart our entire document
into what is an SC image and what it's
not an SC image and now we can do post
processing on that so am I going to do
next
yes we're gonna remove the semicolon
we're gonna map
and each of these items is if the item
starts with SC image actually when it
doesn't start with SC we don't want to
do anything because we don't care about
it so we just gonna return it and
otherwise we want to figure out what the
actual source attribute is so again
we're gonna drag X because oh my
goodness that's how I roll
and it no no there's parentheses around
this and that and then we're gonna do an
egg sac on the item and then we're gonna
return something let me think for a bit
let me just do a test I'm going to turn
the source just to see it works so now
we own me now we know the source
actually has only the value of the
source attribute so that's good it's
probably gonna read that file and now
we're gonna do gonna do the item like
you know the atom could actually say
what we want to do now next is we want
to actually figure out what the aspect
ratio of the image is and this is where
it gets we go into a lot of the weeds of
the node ecosystem because now we have
to look into image processing libraries
I just Google's a bit and took the first
one I found which is called graphics
magic weight for short GM and we can
subclass it to use image magic because
that's the only one I've installed on my
system don't worry too much about it
basically all the image processing
libraries can do what I want to resize
images and figure out what the size of
an image is and what I'm going to do
down here I'm gonna load the image and
that's fairly easy with this library so
I'm just gonna do static plus source and
let's just do a console log to see if
that worked I hope it well so this
should all look the same
looking good we have loaded an image
size function now this is where things
are a little bit weird because the
library as all note levers are a little
bit old and have callbacks but the cool
thing is promise if I the function I
load from node eight actually works on
libraries as well as long as you conform
to a standard callback
pattern that note has this is gonna work
so I'm gonna call image size fine image
a passing a function it's gonna turn
that function into a promise version and
then I can do with Heights awaits
sighs funk why are you doing all this
awaiting because I don't you do it sync
because the library is not synced that's
that's that's how callbacks works so
this is gonna mmm
if you would have done I think it would
have been fine I'm kidding you may use
I'm using a weight inside the map
callback which is not an async function
so I'm just going to make it an async
function and for that to work I also
have to do a promised at all because now
all the array elements are gonna be a
promise values there we go
this should work again cool cool so we
see we have four image of our page and
we have four widths and Heights magic
that's why it's called image magic Ross
you just do some code invocation at some
point you get what you actually want now
we have to now now we talked about
something that I already like the
animations are you gonna do some
animations no no not yet I'm gonna talk
about the aspect ratio hack in CSS we
can we can ask Google we can ask and ask
go for it maybe I'll understand you
accent down hey chrome home bleep how
does the aspect ratio hack and CSS work
summer I hate you and so there you have
an element and has another element or
pseudo element inside it that has a
padding top that is the aspect ratio
that you want and ending with inside it
you can use absolute positioning to keep
something the same size now everybody
totally got that that was well explains
I'm hoping the code will will now
actually show what how this works so the
weird thing is when you define a padding
top a percent in percentages so padding
top 50% that 50% is not the height but
the width of the parent elements don't
ask me why that's how it works and the
cool thing about that is that we can say
here actually should be using a temp
attack at this we can abuse this
basically to define an aspect ratio
because what we're going to do is you're
going to do height divided by width
times a hundred in percent and that
means the wider the image is it will
grow in height as well because padding
top is proportional to the width not of
the height this hack is also really good
for iframes whenever you're loading like
a YouTube video that you're importing
and it's always a weird aspect ratio do
this do this for everything so so just
to show that this is actually working
I'm replacing the closing characters of
the elements to inject some styles which
I actually in the closing yes like this
let's take a look at this okay so you
can see we have injected percentages
successfully so let's look at the actual
visual version not quite what I was
going for but we can probably fix that
with some styles so we're gonna do
position:relative
and so the problem right now is that we
have a padding on these elements and the
content of material are being pushed
down by the padding which is not we want
so we're going to just put absolutely
position the the shadow Dom image inside
at the top and at the left so it doesn't
really care what oh I think I wrote so
fast there we go
and because we can't really see I'm
gonna slow down the network which where
is it is it down here somewhere there is
Network conditions let's do it on slow
fast 3G I think you'll be good enough so
you can see the rectangle is there even
though the image is not loaded once it's
there it just replaces the right
rectangle which is still underneath
there technically but now we have images
that consume the space the image will
need once it's loaded and there's
something the native image attack
doesn't know I mean you can use the same
tag on the native image element if it's
defined a padding top but I thought that
this was a really neat trick to show off
and this is how you don't have like your
your stuff just jumping around whenever
if someone loads the page at the bottom
for some reason and scrolled upwards
stuff is are going to jump around
because the images already allocate the
space that they need the only thing I
dislike
about this is that they kind of like the
red square is annoying it yeah I'm gonna
steal a question though first before the
question was what is the host selector
does oh that's a good question and that
is I'm gonna take down go for it it
basically it's a style the custom
element itself so if you think of a
custom element it has basically like its
shell of a custom element and host is
that element itself not the things
inside of it and something you can do
fair warning is have had written it like
actually I should have put down here
something like this wouldn't work I
think because you cannot really what
this has worked that definitely works
yes so it's a function
I guess not not not a leader pseudo not
not amateur in the classical sense so
that's something to look out for it also
can't go down multiple children I think
only top-level children it's a little
bit iffy but we have good documentation
on developers.google.com slash web which
you should totally go to and read up on
this um yeah and aside these red squares
a little bit sad so what I'm gonna do
instead I thought we could also do an
animation no not yet but maybe later
maybe I will humor you you're not a
one-trick pony I thought I would do the
medium bit where they have the blurred
version like a like a low-res base64
image background from Twitter suggestion
do you think we should do this no no
someone has been thinking I'm gonna like
it that is exactly what I'm gonna do so
we are gonna generate a thumb and
because the other set of libraries async
we have to create a new promise if I
function this again so I'm gonna call
resize judge to buffer dot bind to the
image because otherwise doesn't work and
then our thumb will be the some some
funk you say thumb and German from home
hey Craig how how do you say thumb thumb
in German I mean thumb
it's actually down Minh but that's
alright so I thought I would do as a
thumb-sized because we can probably play
around with the resolution a little bit
so I'm just gonna put it here some size
it's gonna go but eight because that
seems reasonable
some is now the image buffer actually
that's not true or is it that is
something that needs to go here if I
remember correctly and here we just say
PNG there we go do you have all your
records do you need an extra bracket I
think so I think I'm good not
complaining and so our thumb URL what
we're gonna do is we're gonna encode the
thumb version as you already read as a
base64 inline URL because we don't want
to wait for the network to load a low
res version so we can then show the
highest version so just gonna put it in
line into the document right away so
when the HTML arrives we have something
on-screen which i think is a much better
experience so the thumb
Soyoung twitter wants me to do the
animation stuff you guys I don't know
how to animate anything like a transform
is too hard for me I am really sure
there's much transform today I think I
know just string and luckily notes in
contrast to the web has just two base64
which is really convenient and what
we're going to do here is you're gonna
do say our background URL background
image is a URL and and here we're gonna
do some URL boom this looks about right
I think I'm so on the slow Network so we
can actually see the loading pattern or
I'm actually did a mistake I probably
did a mistake some URLs or to find why
not
but it's right here
oh that is it should just be found
thank you a sayin toggles II say her nah
go that wasn't quite what I was hoping
for I think it's actually correct
because it's just an 8x8 image tiled all
over the place but that's not the visual
we were looking for can I stretch that
out gotta stretch it out so what I'm
going to do in the inherence dots I'm
gonna say background sighs it's 100%
100% so we're on fast for you this is
pretty good but now now your moment what
could we do next
might answer a question from Twitter
okay one of the questions was why didn't
you just distribute an image as a slot
in here and that'll be annoying wouldn't
it for every image that you wanted yeah
that wouldn't be framed or compatible
because then if you whenever you have
something like video um it will just
eliminate the image my transit in
general it is not it is rarely advisable
to just sprout new children into a
custom element dynamically no but like
you could have had like you know the SEM
edge and then you would also put you as
the author put your image in there
that's just annoying you're writing the
image twice yeah no I like this better
yeah just do it as a child so what I
feel like it would be more work I would
call me Mason twice like SC image and
then an image and then an SEM image okay
so I'm gonna ask you again what could we
do next put on your head and get a clap
out of people I genuinely don't know the
answer I think might might not be quite
awake it still works
all right okay so I'm gonna ask you what
are we good at what are we gonna do next
but is this your moment we can do some
animation and actually it's gonna be
super super easy because I the thing it
annoys me a little bit is you have this
nice blurred version it's gonna be like
phew that could be a little bit nicer
are you gonna do a transform over there
no dammit you're wrong so what I'm going
to do instead is we're just gonna guys
there's a fight on Twitter about how to
properly translate some and thumbnail
for the record so I'm gonna get in on
that later yeah yeah so I'm gonna define
a keyframe animation which goes from
opacity zero and that's it what does it
go to nobody knows so I'm gonna put this
on the image and the nice thing about
this is that this way the browser will
know it's animation will do the whole
promotion to its own layer and make it
fast and then and then if you're writing
production code you'll put all the other
vendor prefixes for keyframes and all
that suits for that right like I don't
write those by hand
but I do I like we don't have we have
forgotten the most important thing about
supercharged this is not production
ready code don't come never do
production ready code at supercharge
this is about concepts and you know like
things you can do on the web but you
shouldn't be copy pasting this there's
we didn't do accessibility we didn't we
did not device and if I didn't like
reflect all my properties correctly I
only have scanners and no centers which
is also not nice
we're not even handling if you change
the source on an alum or if you're like
scrolling really fast and you're
creating children along yeah let's so I
wanted to show you how it can be
acceptable easy to load dynamic images
lazy and have a nice transition on it
not to have an element that you can use
everywhere but still I think the concept
is pretty interesting so the last thing
I wanna do is I'm going to put in an
animation duration of 5 seconds on it
mostly because I want to see the thing
happening not because 5 seconds is a
good value here but this should be
enough to actually have the image just
fade in because by default the opacity
default value is 1 so that's why I could
leave out the tour because it's going to
transition to the default value and
secondly animations don't loop by
default so I don't have to worry about
the fate going over which it's gonna
fade to the end position and stop there
so hopefully you're gonna see a blurred
image it's gonna load and then it's
gonna fade in right and we scroll down
they can actually do the spotlight now
because we don't want to wait that long
you see the next image and it's gonna
fade in and that I think Wow
makes a much nicer experience wonderful
and just because we have a couple of
minutes left I'm just going to show you
one thing if you more into the pixelated
look one property is all it takes and
I'm wrong Sarah my good and what is it
there you go
and that's something when you like
increase the resolution a little bit on
the thumbnails let's go to a 16 by 16
because why not you can actually see the
patterns already emerging a little bit
which also can be a really nice look and
I think I'm gonna stop here I'm gonna
push this code up on github as we always
do it's on github.com slash Google
Chrome slash UI element samples but
we're also gonna put in the description
on the video yeah thanks everyone so
much for watching this for bearing with
me through all the weird phases of this
that's beautiful thank you for handling
the Twitter and confusing the heck out
of me and using me the hat making me use
the Hat twice thank you for clapping a
lot in third times and if you have any
questions ask me on Twitter later or
I'll be around a little bit more thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>