<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Edge Conf 2: Third Party Scripts | Coder Coacher - Coaching Coders</title><meta content="Edge Conf 2: Third Party Scripts - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Edge Conf 2: Third Party Scripts</b></h2><h5 class="post__date">2013-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/C4JTuulKxTs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you thank you bum hi my name's
Steve there i run the london web
performance user group and run web
birthdays in London so you know
performance of third-party scripts is a
really big area for us and we debate it
endlessly I'll quickly introduce you to
the the people on our panel sort of on
my right I've got the I've got the well
if we're going to do a drug dealer
analogy with these are the guys who are
actually producing the stuff we've got
two we've got Ben vinegar from disqus
there were you know discussions and
comments you'll have seen you know there
are many websites we've got stoian
Stefan off from facebook who is like
buttons and all those kind of Facebook
widgets that you like to put on your
page and over here we've got guy /
Johnny from Akamai who's sort of like
the middleman the distribution network
for the further stuff that they're that
they're dealing and then we've got I was
going to say addict that's probably not
right we've got two we've got Barbara
beams from the canadian broadcasting
corporation she's the kind of end-user
this poor person that's having all of
these scripts you know she has to sort
of deal with her her customers the
people in the marketing team who never
met a third-party script they didn't
like and they just want to stick all
this stuff on the page and she's got to
do with all of those issues so we're
going to kick off with a weather for the
presentation from from stoian just to
sort of set the scene on what third
party stuff means just remember
obviously we've got the the on slide
stuff so you know try and use that as
much as you can come in give positive
and negative feedback given obviously
put your hand up via on slide if you
want to talk thank you over this night
Thank You Stephen Stephen all right so
welcome to the third party party where
we party like it's 1999 and because in
many ways it is 90 95 when it comes to
third party widget so I'm hoping we can
have a nice discussion how to bring this
party to today and tomorrow slide please
so Stephen now do the same thing that I
was planning to so he stole my thunder
of presenting the the widget makers
versus the consumers I can only add that
Stephen is also on the upside is also on
Barbara sign right protecting impartial
moderator protecting all the publishers
from all the extravagance we put out
there alright so just a quick overview
third-party content comes mostly in form
of script that you include on the page
it may not do anything visible like it
may be something like Google Analytics
or you put an iframe on the page coming
from a third party or the state of the
art seems to be that you do both you
include a script that right an iframe
for you so that we focus on we want to
talk more about how we deal with script
and I frames and yeah we are including a
JavaScript on the page coming from
somewhere you don't know you had no
control over coming over the network so
what could possibly go wrong with them
well obviously there's a security issue
and then wanted to bring up recent
attack on out brain which is a producer
of third-party recommendation engine so
it was attacked by by Syrian army folks
who were able to mess with their
JavaScript and in this way affect all
the pages that that use their service so
in let's see for example they could
redirect all the visitors to washington
post to some other page so i think if
you're an attacker if your malicious
person why would you try to break into
this website where you can do your
one-stop shopping and break into a third
party we should provide and hit control
over so many website right social
security is obviously a big one and then
you have the spa for single point of
failure where if if a page includes the
script synchronously they they add a
single point of failure and despite the
fact that we have now good tools from
patman ins Papa Matic extension for
Chrome unless you were able to find puff
in using web page test but seems like
that still tends to be an issue which is
pretty silly because if the third party
provider is blocked in a country or an
enterprise that means your site is
effectively blocked as well or black
hole and then there's all the
performance issues right anything you
got on the page will add to the to the
rendering time and loading time and all
that all right so what is the state of
the art of script includes so despite
all the old evangelism for using
asynchronous scripts people still using
script tags and sometimes the widget
providers on the marketing side will
prefer that because it's easier you just
have one script tag instead of a little
bit of code so that's pretty bad there's
currently some things on the crazier
side like using framing frame loading a
javascript inside of an iframe or when
you write an iframe write it inside of
another iframe so the first I dream
container is blank so it's not in the
way of the window onload event so this
is for people who still care about
window download and whenever it happens
notice easy but um or friendly to copy
paste but it exists something else so
the thing about third-party javascript
is they're not wholly asleep being very
short-lived 10
15 minutes half an hour the reason is so
that the third party provider can can
push fixes and security updates and very
quickly but that's bad for performance
because we cannot use fire far future
expires header so that there's this
technique of again using an iframe and
refresh reloading that iframe that
causes the script to be refreshed so you
can have a third-party JavaScript with a
far future ex class header and I don't
know if anyone's doing it currently
solsta all right and then there's stuff
that's coming up from the web / w3c
group which I was hoping someone can
enlighten us what's going on there with
the progress right next oh yeah there's
this idea about what I called c-3po or
common third-party object um the thing
is so this is something I put up some
time ago and then been said that he's
been thinking about the same thing but
we never really got to talk so I think
that's as good time as any Sode is that
those scripts that are included from
third parties usually do the same thing
they hunt the page for any hints where
the iframe should go so they look at the
dome and then write an iframe and then
resize the iframe because the content
doesn't fit let's say you have an old
like button in German which is longer
word so you have to resize the iframe
not to take more space than needed and
every a lot of widget providers are
doing the same thing so what if we can
have one script that is open source and
that handles this for most of the
widgets so we so this means that the
publisher can include the script and
package it however they want with their
script and handle all the all the
widgets um well the download 56 scripts
with 100 200 k instead of having just 0
so that is the idea meanwhile in what we
have in near future coming up so we have
now web components I don't know if
anyone's using web components if not why
not seems like the widgets are the best
use case for web components then I'm
thinking is it an easier on the
publisher site to to include a web
component instead of the current state
where we included a div class something
in the script there's the iframe sandbox
it's really cool should we encourage
people to use it or not what would you
disallow in a third-party widget so
there's there was the idea of seamless
iframe seems like it's not something
going anywhere and going away the same
with the frame SRC talk I don't know if
what the state of that is dying as well
Tom can talk about it just got a
negative vote content security policy it
exists it's out there would what should
we do about it should we encourage
people to use it providers as well as
publishers I'm curious to hear your
thoughts but meanwhile what happens now
and Barbara can talk about this from the
publishers perspective so she said that
sites are now bombarded by Scripps
there's too much too much stuff going on
NGO is also like Stephen said
challenging anyone to stand between the
marketing people and their widget all
right so how do you monitor third-party
widgets do we do people set up budgets
and say okay you have this amount of
time or k how do we keep the third
parties in track also how do we deal
with with them because not all though
the third party code is very well
written right so how do people deal with
this cretin have to do document right
and so on guy brought a good question
about the that according to the HTTP
archive the number of the main city
website is using isn't going up is
increasing and it can be largely
attributed to third parties so what can
we do to own to fix this and he has some
ideas some borderline crazy like copying
cookies from one domain to the other
some may be more manageable like what if
we use the same domain name for all the
static resources as Krypton styles and
and sprite and shared between all the
third parties so instead of loading
something from Facebook something outta
my donate whatever why don't we use
something else like common domain name
c-3po comes to mind they could be c-3po
Dora Komodo
Oh mobile right it's finally here what
does it mean for widgets I do is it only
just making performance issues even more
visible should we do something about it
are people using mobile using that many
widgets on mobile website cheers to know
yeah I think that that's all I had and
let's talk about all this stuff and
thanks very much doing I'm just gonna do
a quick poll of the panel guy any quick
comments room it's doing is opening too
sure maybe I'll add a couple one is a in
general third parties a little bit
broader than that I think there's some
bias to think about that every person
has a bias but there's also tracking
beacons which for some websites are
plentiful and actually come in often in
the form of an image and they're also
actually third-party components that are
more in line your page all sorts of
shopping cart personalization components
and and such that are I guess kind of
start to tread the line because while
their third party they're not extraneous
to the sort of core flow or requirement
of the product but there's still a
concern and all sorts of things like
number of domains and reliability
concerns security concern is still very
much valid for them so that's one point
then the second one is just to sort of
highlight the aspect of the number of
domains there's basically the problems
with third parties that have to do with
best practices around how to use them
how to write them if you're an author of
them to try and get them out of the way
as much as possible while still kind of
keeping them reasonably fast and there's
also things that are just trans like the
number of domains or like the existence
of unoptimized third-party scripts that
use document dot write whether you like
it or not and and those are just paths
that to me are more interesting because
they're there's no clear as far as I
know there's no good set to to advances
in the right direction to fix those so
for me I'm basically both so I want to
make sure that the developers understand
what third-party scripts really could do
to the page and also get the business
the business side to tell them what to
look out for when when asking
third-party providers to provide their
code so you're saying it's not really
possible to tell the marketing
department they can't have that piece of
code because it has a document dot write
in it because they just won't done
exactly you get it you gotta explain to
them what the impact actually is yeah
and they don't always understand that
cool Vanessa as a provider what would
you tell you about still wins opening
marks and I mean they're really good
comments I think that a lot well
basically it's been set up in this whole
panel is sort of like if your website
publisher and then there are party
scripts are mean and we're villains also
story an and but I want to flip this
around like maybe people aren't thinking
that as a as a third-party developer
that has a pretty complex application
i'm serving to publisher pages there are
publishers that are doing really bad
things to me and i would love to talk
about some of those and what could you
know yes um i don't even mean that
partially as a joke but but there is
definitely you know there it can be
subjects like people immediately
attribute performance issues to a
third-party script that's a first place
that they go where i'm debugging
publishers websites and then i attribute
that basically the performance problems
back to them so I'm sort of in a hard
spot as well and I think that's know
possibly worth discussing cool I think
we've got some couple of questions about
how we can find and identify those sort
of performance bottlenecks but first
question we've got from the floor is
actually from Yahweh voice you know are
you down there
hi what are the mechanism for enabling
script loading based on media queries
and is there a valid proposal and how
can we get this pushed so this is the
idea of before I've got if I've if I've
got a script that's just not relevant
for the device that I'm running on why
am I downloading it in the first place
things exactly relates to the mobile
thing I mean if I don't show a like
button on mobile why am I downloading
the script do you wanna start taking
that word I don't know not aware of any
development are you is it is there a
proposal going on I started playing
around with the idea the thing it's kind
of hard to define what happens when the
media query changes that's where things
get complicated you do I want to run the
script or not but in general do you guys
think it's a good idea or is it
something that should be pursued
differently sounds interesting I'm kind
of fond of it I so I think the notion of
conditional loading especially in
responsive design website is a real
issue and in responsive design we focus
on images like we spoke earlier but
maybe the next looming problem if not
already here is the notion of scripts
and I regularly see responsive websites
download execute scripts and then hide
them because the layout doesn't quite
make sense for them so
institutionalizing or standardizing
conditional loading makes perfect sense
to me and you know using media queries
seems like one way to do it not sure if
there's any active conversation about it
so I guess you know we're probably going
in to figure out all the different
options of it but I do think that's a
good path that we need to take go down I
think also the idea is interesting but
I'm also wondering so why would you want
to use cases so you would not load for
example Facebook button for mobile
versus desktop or whatever the use cases
i can think of our facebook button or
social buttons in general maps that may
or may not be displayed because you want
to go to the native map
and jquery mobile I mean UI frameworks
where you want to load jQuery Mobile
here and jQuery UI there or these are
the use cases I haven't ya Twitter
streams yeah there are a common one and
responsive design or even we're doing
different ad serving for desktop versus
mobile for example yeah I've got a
couple comments from the floor Carl
Simpson from get if I did you ever
something to say on this topic what I
didn't actually intend to click that but
I'll just say something as I since they
gave me the okay your time but on that
topic though so so there is definitely a
strong push to create declarative
solutions like markup only stuff i need
to be able to express all of my intent
through markup but I do just want to
point out that there's a vast array of
complex situations that you make these
decisions on for instance I've got a
simple version of a calendar widget and
a complex version of a calendar widget
and I make decisions based upon
bandwidth and screen size and all those
other things so I think it's troublesome
to say this is a one-size-fits-all
solution to to try to encode into my
markup when a script should be loaded I
feel I'm a little biased but I feel
that's the JavaScript loaders rather
than markup even it I think that's a
valid statement but you know there's
also the statement to say that
especially in responsive design world
there are a lot of decisions that are
made based on things that could have
been determined through screen
properties so you know maybe it's not a
hundred percent you don't take away the
the capability or the value of loading
things through things through a more
elaborate script based loading condition
but you know if it's a common enough use
case and you can make it faster and
easier then I still think it's a worthy
proposition and we got David stickman
from Akamai wants to make a comment feel
free to disagree with guy from Akamai
let's briefly yes hi one of the most
common to use case we see is actually
tons of new domain and people tend to do
domain sharing thinking that is going to
improve the performance of the website
but obviously we stop party we have 40
50 different domain that are called by
the browser is there any way we can give
a hint of what kind of dns resolution
should be done for third party content
before actually loading the third party
itself because there is a lot of
bottleneck was just generous resolution
itself anyone I can take that because
you know I think you know the number of
domains is kind of pointed before or is
a this has not been coordinated just
kind of make sure is a is a real problem
comes into play in DNS it comes into
play with the fact that speedy and HTTP
two and all sorts of pending solutions
don't touch on it they don't they don't
try to optimize cross domains so I think
it's a real problem there is no D
prioritization as far as i know of
third-party content you can kind of mark
things beyond the async or the kind of
processing aspects in the browser you
can't mark something as a slower or
faster so and I think they contend for
resources today a part of it is about
how do we optimize the number of domains
and yeah today the only tools you have
for d prioritizing them is the things
like a sink and such okay we're gonna
we're going to come on to a later
question really talk more about you know
dependencies in execution time but just
to sort of stick with this they were the
original intent of this question was you
know in the earlier session we talked a
lot about how you were going to do media
crews to decide what image you want to
download you know do do we need anything
a similar mechanism for scripts or not I
mean if you were to put it to the
audience on a vote you say yes we need
this mechanism or we don't need a
mechanism for this and we can just move
on is this is this a problem that you
think i'm sending way too many
third-party JavaScript's to my so we got
we got two votes three votes four votes
five votes so people do you think this
is a problem that's not just yo of
hitting the button five times
and friends okay I I would just say that
I mean we experience that people are
conditionally loading our application
usually doing templates or JavaScript or
whatever already so I mean if there if
that can just be a really nice
declarative way of doing that as opposed
to setting up you know JavaScript code i
don't i don't see the problem with that
people are doing it already Pegasus I'm
transe whatever the developer wants to
do if it's easier for them and ii-if
media queries enhance the performance as
well in loading things I think yeah if
you make it easy for them to use that as
a publisher again then that's cool we'll
say it's not just the party though so
conditional loading of JavaScript on a
responsive website is a is broader third
parties are a specific case of it okay
so let's go on to the second question
we've got Tom boo shock
so this one came in anonymously as well
the what WG has proposed the solution
for managing script dependencies and
execution time will this solve the
performance and blocking use cases and
Kyle I believe actually as part of that
proposal so maybe he'll have some
helpful input as well okay so this is
sort of as honest as related there were
a lot of hockey ways people download
scriptures comments and then you know
add them dynamically to the page when
they need them there's a lot of hacks
out there that are people doing to get
around the the async blocking nature of
the scripts so you know what's happening
with the working groups and what's the
best solution for this I am not familiar
with this topic like I'm from the
audience he wants to take it yeah i can
even starting then maybe we'll switch to
to Kyle but uh I think there's a few
things there there's there's one in kind
of cold resource priorities that has to
do with enabling lazy load and defer
attributes and more objects those are
actually probably further along when
scripts than they are on some other
components but there are some there's
some promise there I think there's still
a lot of debate and I heard some
comments in a previous conversation
today on on possible paths but I think
there's still a hole around how do you
manage groups of dependencies so that
you want to say this script needs to run
after the other but both of them
combined should be asynchronous there's
things around association of onload
triggering the onload event and an async
script is a nice encrypted it was still
delay the unload so I think on the
loading process there are some good
actions on the grouping and such I would
find them very promising but I don't
know if they're very far along so since
my name was brought up i will speak up
um yeah so two or three years ago there
was some proposals Nicholas akos and I
kind of joined together and made some
proposals on what wig about what we call
script preloading so the idea of loading
a script but it not
automatically executing the way normal
scripts do and then being able to
programmatically control when that
script might load and that has gone
through a whole bunch of starts and
stops and restarts over the last three
years most recently about a month ago it
started back up it turns out there's
several different things and maybe Jake
Archibald can also chimed in so there's
some stuff with navigation controller
and then there's discussions about other
use cases that that might not handle I
don't think I would classify us as far
along in terms of implementation but
there has been an enormous amount of
discussion about it and developers do
want I think more control over it
there's one side which is I want control
in the markup again back to this
declarative versus programmatic control
and I think that's really one of the big
sticking points so far okay um Jake did
you want to say anything since you got
called out yeah I think the worst thing
we've got with script loading at the
moment is if you want to load a series
of scripts without blocking rendering or
blocking any of a computing but maintain
the the order of execution we don't have
that unless you use JavaScript and we
don't want to use JavaScript for script
loading because then you lose the
preloader and reload it can you know you
can boost getting to dom content loaded
like twenty percent so we we want
something in the mark-up that can
dictate which order that scripts will be
executed and then load them
asynchronously just specifically related
to third party I do think there is
another barrier which is document dot
write so when you're using a third party
when you're a publisher and you're using
a third party you need to sort of be
absolutely confident one hundred percent
that that script would never ever use
document right if you're including them
as an asynchronous components otherwise
that can mark up your entire page and as
far as I know there is no work going on
right now but they're definitely should
be on doing something like that heck
even something like just ignoring the
document dot write in many cases would
be better
then blanking out the page and writing
only that piece instead of the entire
page but ideally there's something a
little bit more elaborate in that can
after the fact right content in those
sections okay so let's say we got we got
Wilson's got Easter Wilson page from ft
labs he's got his hand up to it's a
comment on this topic hopefully hello as
a web app developer I like to have
control over my resources so will it be
possible that third parties like discuss
might let me bundle those resources
there 35 third-party scripts into my
jeaious bundle or other assets like CSS
I mean I can see why you wouldn't want
that because you want control yeah I
mean you want the control to be able to
update when you weren't updated but I
also don't want 100 HTTP requests going
off in my page yeah man my eyes are me
here um on some level I mean I don't web
developer to and yeah I hope so and and
I totally I would like to do that sort
of makes sense but you basically just
hit the the other end of it which is
we're just changing things at such a
rapid pace that for somebody to bundle
it and serve it from their own servers
or whatever is just like we can't do it
and this actually touches a little bit
on some of the c-3po stuff which is if
there is this the idea is that if we had
like a common library that ran on your
host page and then you could bundle that
part and then the stuff inside of the
frames could then do whatever they
wanted and you at least got that that
much out of it even on that point I
could just just you know inevitably I
might want to do something different and
now I have to go around to thousands of
websites and say please update this
library in order for us to you to have
the next version of discuss and that is
just it's just such a ridiculous pain
point to go to you know the way that
scales is that there's one of me and
there's thousands or I think there's
there's basically millions of websites
with discuss and should go and get all
of them to upgrade all of their bundles
or whatever is it would be brutal so
that's just said no we don't explore no
as a publisher I mean you can
we do we have our libraries like jQuery
and all that stuff we know will not
change that often so we compile the
Morgan bundle them up in one request
right but then yeah of course the which
is that change they could change any
minute you gotta gotta find a solution
for that yeah okay we do some proxying
of third party content sometimes and
there's a different flavor of it so you
know on the good side if you proxy
third-party content through your servers
your CDN then you you can regain control
over some availability tests over the
performance delivery of it they may not
be delivering it as kind of high quality
or you know we're not willing to spend
as much on the delivering controls as
you might be where that really runs into
an obstacle is with things like tracking
so like on facebook you could probably
pull that off with a facebook sdk which
is generic and cashable but you wouldn't
be able to do it with the iframe that
figures out which of your friends
recommended this because you know that
requires some special cookies and once
you moved it off to a different domain
those cookies no longer get sent so so
to me foo yard to do something like a
c-3po or some equivalent of it we should
tackle that because our assessment we've
done some sort of kind of mass testing
on it and was that that really qualifies
a lot in order to move something to a
different domain you need to be
absolutely sure there would be no
cookies associated with that request or
even if you're doing cookies thinking
that would be no cookies other than a
session ID cookie on that domain and
that's just a very tough restriction so
we would need to standardize how that is
being handled if we wanted to go down
that path okay I think we will kind of
come back to that Threepio and share
cookie things in a later question but I
do I think it's an interesting question
therefore the further browser vendors
have we actually made this problem for
ourselves because we can't share cookies
and domains for security reasons we've
actually created this problem and there
needs to be some way to to address it
because if fective Levy's there's an
ecosystem of people that want to share
this data there is no effective
mechanism that I'm aware of any way that
they can do that but next question we've
got is from where's Oh Calvin Calvin
sorry how the
with document.write was mentioned
earlier and the the need to make sure
you're a sink loaded strips don't have a
document or right tags I work with an
environment where I have hundreds of
unknown vendors including third-party
scripts at any time and I have no way to
ever bet them all do they come from 150
different properties and we we currently
use a tool called right capture to / I
what right document all right does
enforce asynchronous loading of
everything and it's awful and when it
breaks it gives me a headache for months
at a time we can never get rid of that
or actually my question is can we get
rid of that is there anything we can do
is so that we can stop having to vet
these and know that they're not going to
document all right because the surprise
is awful if it ever happens so you want
you want like a flag on the browser or
something to say this this page doesn't
support document dot write or something
we had a pas all the time can we do the
opposite just once so we can start it's
not like that like that do you know kill
ie6 campaign you just gonna start a
website killed document dot write I
would be very happy with that so who
here would vote for that one killed
document dot write is get rid of it sure
yeah i mean we could start a trade
association to in which we you know vet
scripts I don't know um not being
serious is a terrible joke so we do the
same thing of the right capture as part
of the kind of optimizations we do and
Akamai and you know I kind of share your
pain and and they think I'd like to
believe that browser vendors should be
able to tackle that and if any browser
vendor in the crown wants to chime in by
doing some you know ninety percent
accurate version of the document dot
write just kind of write that out in
spot where that script would have been
after the fact because oftentimes just
killing documented writer trying to mock
it up in javascript is a you know so the
best you we have so we use that where
needed but it's extremely far from ideal
we've got to move on to the next
question so um next question is actually
from from from ways
um okay so Facebook has recently taken
steps to optimize the scripts for its
embeddable like button which I think
step you guys can speak to but um but
how do we measure the impact of
embedding these scripts and then a
second part to this question is is the
web intent specification I only hope to
kind of conquer app linking and
embedding these scripts it is web
intents kind of our hope for not having
their a you know these types of share
buttons and scripts that are included
with those okay lamont throw this
question to to barber actually as it as
a consumer I mean do you do performance
testing and and like somebody comes to
you and says I won't wear this new
third-party script what do you do to
measure the impact of that yeah I I mean
I'm big on performance and obviously I
have issues when fifty percent of our
CBC the south side is surveying
third-party scripts in the rest we are
serving to the customers it's just our
own content so I do try to do that it is
very difficult for us to make sure that
all the content areas at CBC know about
it again and how to include it so there
was a performance I i duped performance
test especially a be you know what
happens before putting the script in
versus after and we've seen some really
bad incidents where where ads or scripts
like that slow down our side so to make
to track those kind of things and give
them to business and say see this is
what could happen yeah we went from from
you also it's doing well what do you do
to make sure you're not so slow well
wouldn't optimizing the like button
right then the only thing you can do is
write a blog post since you all see how
the waterfall is so nice now but uh but
it once it is yeah but that was good
yeah I don't think we're doing anything
to prove okay this is I know how how
much it reduces the average website and
so on just trying to do the best thing
and then let other people measure and
see how how it affects their websites
ring
and for the what else let's go so I mean
you said earlier that you do a lot of
debugging of the customers websites
because they always blame you for the
performance issue so what's the what are
they tools their techniques of the tips
is there a methodology that you follow
to prove that it's the sucky customer
website and not your awesome script that
is exactly how i phrase it goes over
really well is there a cert I mean
there's a ton of techniques that I mean
are pretty well published out there that
it that I probably using I don't even
know i think we there um I don't know in
my mind like a lot of these seem they're
very tried and true performance things
like not binding to you know debouncing
throttling scroll handlers and or some
of the we do is we we render in chunks
now so we release to the browser you
know will render 5 comments released to
the browser right or 5 comments release
to the browser we're very cognizant of
just never tying up the UI thread um I
don't think that's something that I can
you know it's just like an individual
widget developer through Play
application developer they all sort of
have to do that and I think big issues
that they don't are it's just it's just
all over the place as to whether they do
might be rambling here you can bring me
back well i guess i guess the cushion
did he you know so if we take take an
example of where you said that you know
that you've proved that it wasn't your
script that was that was blocking the
site yeah was it a case of it was it was
it something that the customer was doing
that was impacting your script in a
negative way and how would you how did
you prove that well i mean the last time
i should last time i was he bugging
aside i think this was just me my son or
I brought this on myself in the sense
that I was observing that discussed was
slow when scrolling through it on a blog
and actually think today that's actually
a lot of CSS performance which is
another topic that I will address but so
obviously bugging our scroll handlers
and figuring out that in this case the
parent website was not throttling a
scroll handler and they were activating
it as you went over discuss so you would
scroll down and it would actually sort
of chug a little bit
I don't remember the purpose of it um
this is just a random anecdote of
something might be also nice to automate
that some are on your side that on your
and that you can say okay publisher a is
not using it properly or don't blame
blame us you know if the site is slow
we've got Matt may from Adobe to ever a
comment on on how you measure the impact
of these script well we'll hold that
question then we'll start try and stick
with the try and stick with the topic
I've got what again comment on TV maybe
to grow in which is that resource
priorities sorry resource timing is kind
of you know hopefully gonna help us
identify in real users were delay the
blame there are some security aspects to
resource timing but you know from for my
perspective when somebody comes to
akamai and says you know you're not
making some my site faster sometimes
yeah you know the the purpose is to sort
of show that it's actually the third
party that's on your page that's the
cause you know at least we have we can
put a lot of hope in that and that front
to give us clarity but whether who was
sort of truly to blame for the problem
and therefore worship the solution I see
a guy did you want to make a comment
actually been working for a while with
vendors that work with us on enforcing
the contract between the groups but I
ended one of the wise was never used
document that right and the question is
can we create or promote a kind of this
contract between widget providers of
different kind surely and publishers and
kind of help emerging providers which I
have to deal with a lot to follow that
at the same time probably protect some
widget providers needs as well i would i
would love that we talked about that
some sort of a policy and i would love
to create a policy that we could give to
the widget creators and say okay if you
follow those steps we would
are you using and I think it is
important to to make that point to be
able to copy some of the security
policies we're doing we're talking about
sandboxing from that perspective so say
well i'm only giving you a constrained
access to certain api's you're not
allowed to use document right it's just
going to break oh there's this
organization called I forgot what the
name was interactive advertising viewer
or something like this so they've read
iiib iib they've released the document
saying related to add so and these are
the best practices for ads right that
kind of stuff so do we need something
similar for what is done or enforcement
of it in the browser but I don't think
there is any ok this is the checklist
that you have to follow otherwise you
know you're not given an a or ok so we
switch on to the next topic met Marcus
Marcus stand up
so this is an anonymous question the
growing use of third-party Services
means web pages today consume content
from over 16 domains on average creating
performance and reliability problems
speedy and HTTP to work per domain and
don't help can we share connections or
delivery across third parties yeah so I
guess this is this is really the this is
the point to discuss the the Threepio
idea and you know particularly when the
air is owed to deal with luck with this
is like affiliate tracking and you're
trying to attribute you know the the
affiliate referral fee to somebody and
so all of these affiliates are coming
from different domains and different
affiliate tracking networks and you know
I've got to have that script on my page
it's part of the business model of the
customer and working but you know if all
of these things were put into one
centralized domain or there was an
effective mechanism for sharing and
synchronizing the cookies across the
domains you know that would help me a
lot is that something that we can we can
do or do you think that's never going to
happen yeah I really like the idea so
there's many things that we can optimize
right first is the script that writes
the whatever the widget is doing the
iframe and so on so uh you know having
this as package together with the
publishers script sounds great we have
to make sure that it's absolutely
future-proof because people might not
upgrade at once they get it tough github
and then the other thing about a common
de mated right after you have already
written the iframe right all the static
resources on that iframe could they be
sharing the same domain that we call so
you don't have to deal with so you still
have to make a request to the third
party provider to get the HTML any
logins and that kind of stuff but when
it comes to static resources why not so
with the idea like maybe we have like
three pjs CDN calm and we just sort of
everybody has like we have three pgs /
facebook / discussed
that's where we put our static stuff and
then we benefit from having a single
domain is that basically the idea is
that try to help me understand here yeah
I think there's two aspects so if
there's the standardizing of how
something gets included on the page
which would help alleviate some of the
concern with you know Mason third
parties or third parties that don't put
as much effort into it and then there's
the delivery aspect which was around
yeah having some shared a I guess
there's the the ideal would be maybe a
single domain they're all sorts of
security aspects to putting content from
multiple providers on the same domain so
that might not be an option so maybe at
the very least that is shared
connections for for those components to
sort of deliver them where possible
through the same entity listen so much
this has to be done client-side because
it inherently wants to read a cookie to
find you know what other website that
you went to some I can do my affiliate
tracking and things like that if we had
some kind of shared mechanism could we
move a lot of this server side are there
any effective server-side solutions so
you know I can just take all the scripts
off my page is that is that feasible
what would we need to be able to move
some of this stuff server side well I
think you need for this server to be
able to pull in content from multiple
domains you need for starters you would
probably need for many of these guys
third party services you'd need some
cookie syncing capability because they
track different IDs the cookie syncing
is a solved problem in ads so you know
that can be done but then the the second
problem is non-id cookies and that's not
at all so the problem so we would need
basically a commitment from anybody
participating in this you know from the
Facebook that discuss on the the world
to say i will keep everything
server-side maybe even provide some
supporting mechanisms for that and work
fully on a session ID and then of course
then the politics kick in but who owns
that ID but that's a will live that part
for later and on top of all of those you
would need the browser to share
connections if you didn't literally land
on the same domain so you need to
somehow have the browser's play ball in
that front
and of course for a publisher would be
great to just include something or run a
script somewhere and include all the
things that you need so that would help
for sure yeah I would say there is a
lower bar around sharing at least are
delivering them from a standard
component for providers so if provided
providers had an easy way to know which
resources of their third parties or
things that they could pull in to their
content then I think that would be a big
step forward I mean we had to do
conversations with facebook with Google
with various others to learn that you
know I believe the google analytics
JavaScript library the facebook sdk
those components are static but you
basically don't know those without very
explicit statement from the browser
vendors sorry the third party vendors no
questions no comments okay we'll move
straight on a next one Andre Barons hi
this is an anonymous question if a
blocking script is loaded from a domain
that goes down then this will cause my
page to fail to load how can we test and
or address the single point of failure
issue well okay so good barber I mean
single points of failure yeah is this a
real problem that affects your website
yeah I would say so and I see sometimes
even scrub being not properly included
I'm the CBC domain literally ad hoc you
could use like pads spoof o matic right
to to check how your side is behaving
with our party scripts I also like a
spot check but i think the ebay team did
that so you can pull it into your
continuous integration so we can right
away when somebody develop something we
could right away figure out that there
including scripts not properly and then
avoid that that potential failure and
we've had that happening as well even I
think last week with ads where something
was not properly included and we got
some bad hits for that yeah
so you're you were able to check during
the build process that somebody
somewhere included applause yeah exactly
so it literally tracks for script in a
few if you just put it wherever it is
it's a really cool tool and there's even
I think a grunt plugin as well that you
can use so this is I would love to have
those kind of things more integrated in
our deployment so that busy as a
developer you can almost be done you
just don't have to think about it and we
catch that and you just don't we're not
able to deploy stuff yeah import to
clarify that the the stuff is the
extreme scenario that kind of you know
this website is down and maybe a
slightly more rare one but a mini
version of it happens every time the
page is loaded like any one of these
blockers is also some sort of delay some
sort of resource contention for each one
of those resources so you know sometimes
the conversation comes into now you know
Facebook's not going to go down which
you know it's a different conversation
but but there is always a little bit of
a penalty even for the kind of most
cutting-edge third parties so getting
them out of the line of fire is it's
always a good idea yeah what what I was
saying is it may not be down but maybe
block clean in the company orient you
don't want people on facebook during you
know working hours and so on so we
effectively destroyed the website
because facebook is booked for some
reason um call kinnaman you had it it's
been answered okay I was just gonna
really quickly but I mean other than I
guess the case where somebody just just
puts in a blocking script tag is that
problem I do think that there are pretty
surprised with third-party scripts we
have we absolutely have to be good
citizens and we have to work in
situations where stuff is down or
wherever I know that a big push that
we're making in our company is that if
discuss goes down we at least want you
to see static comments that are
basically not dynamic you can't you know
the server's not going to listen to you
because maybe it's blowing up but at
least you can read comments and for you
know all intensive purposes that's just
static it's from a CDN and and things
look ok but it's like I don't you know
this is this is this is just this is
just stuff that we have to do and I
don't know how to if there's just like a
hammer that everybody can just use for
that if everybody did that
with a photograph yeah and I mean of
course I appreciate those things that
that provide us to one of the other
challenges we have is when editors
actually publisher like editors fighting
news being able to include widgets and
they literally take them from from the
website not thinking how to properly
included class was it a challenge for us
also to a sandbox that yeah that's
something that one time from your
comment I'd really loved to ask people
to write blog posts and then do research
and put us to shame so big you know and
just to keep the third party providers
in check until all this is horrible this
is all right so if you if you see some
sometime party provider that doesn't
provide any synchronous snippet yeah
make nice about it i think i think is
probably an important thing to mention
is is it's not you're not necessarily
always criticizing them what you're
actually doing is giving them the
opportunity to go to their boss and
saying look at all these people are
complaining about it it's that's a
really effective mechanism for them to
get the resources they need they you
know this lot of these guys are
providers they want to fix the problem
but they've got competing business
priorities if you're out there making a
lot of noise about it it suddenly
becomes a business priority and you
really helped them to address we're
going to go at like about four minutes
left i'm just going to i'm actually
going to skip one question which will
come back to because i really want to
get question number 7 answered which
from ruffle chowdhury Chidori
okay so this is another anonymous
question what could the browser vendors
provide to eliminate third-party scripts
and the problems associated with them I
don't really agree with this question so
mean I guess the question that you know
we've got we've got people from the
chrome team we've got people from
Mozilla we've got people you know I'd be
very interested to hear from from those
but I mean if you could have one thing
from a browser vendor guide to help
address this problem what would what
would it be but my number one would
probably be the script dependencies
document dot write a close second with
the ability to a group dacing Barbara
actually seemed same the document right
she I like the browsers I I could
probably go off on this for a long time
please do so stay on set up that
basically the way that most sort of
complex widgets work today is there's a
script that runs on the host page and it
usually opens up an iframe they
communicate with each other and I in a
perfect world I would love if discuss
was just an iframe and and and there was
that separation everyone could feel
confident about it and that would be the
contract you know it's in the iframe you
know it's not going to escape the iframe
but the problem is that the tools for
making that happen are just non-existent
there are there are tons there are tons
of Alan say tons but there are things
that are being developed right now for
further isolating iframes there is a
sandbox attribute that's let's really
break down this this iframe there's no
tools that are being developed from the
other perspective which are let me get
access you know just some of the stuff
that's happening on the parent page let
me know that somebody's scrolling the
page let me know that somebody's
clicking so that I can close a menu that
I have happened to open in my iframe
there's none of those tools right now
and because of that or even very simply
I cannot resize the iframe today because
there are none of those tools we have to
have this sort of dual system where I
had you know we have to put JavaScript
on your page and that's unfortunate it
would be terrific if we started looking
at things from from the other side and
then maybe things could get better i
think a lot better just just by
providing those tools
web components be a nicer today um I
haven't looked I I'm I've only like
looked a little bit perhaps this morning
at to research a little bit more about
web components idea look like a complete
fool but from what I've seen is that
they're still accessible by the parent
page right even if they're kind of
hidden is that design but notice our web
components person like you create 10
year like the delegate put the hand up
thing is not so if anybody's an expert
on web components anyone yeah somebody
over there yeah Alex Alex to the rescue
I yeah Alex Russell from google um so
the way web components work are it's a
bunch of related specs we designed it
that way for a reason that I won't go
into but you can have something called a
shadow Dom which sort of hides away the
implementation of your UI from the the
normal iteration order through the
document and you're entirely correct
that that doesn't solve the problem for
you because you can still reach into the
shadow Dom that it was explicitly
designed not to be a security boundary
today the answer is put an iframe in
your shadow DOM and and use it that way
so it doesn't get you out of any of the
sizing issues I'm afraid yeah so I like
I think a lot of this new stuff I was
the end thing is still being developed
from this perspective of almost like
widgets if like if I was google and i
had widgets that i want on all my other
services and i trust those services i
feel like a lot of its being designed
from that perspective somebody can shut
me up if they want because of like the
security things aren't addressed or
there was the seamless spec that came
out but it still that styles come in as
if you know maybe for that kind of
publisher they may be interested in that
but I'm not interested in that anyway so
this is got that sheet that says shut up
time to go all right so basically we got
we got one minute left we know we're
going to wrap up I think immediately
after this we're staying here for lunch
is that right yeah well thank you very
much to two people on the party of
people on the party people tend
participation pictures</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>