<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>End to End with Polymer (The Polymer Summit 2015) | Coder Coacher - Coaching Coders</title><meta content="End to End with Polymer (The Polymer Summit 2015) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>End to End with Polymer (The Polymer Summit 2015)</b></h2><h5 class="post__date">2015-09-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1f_Tj_JnStA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi there thank you for all coming out
today it's awesome seeing you all yeah
this is me
Rob Dodson it is my contact info if you
want to send me questions or comments
after the talk or just help me build a
massive Twitter army to take over the
universe and do so there this talk is
called end to end with polymer and my
goal with this talk was to basically
build an application starting from just
an idea and taking it all the way to
production I'm kind of thinking about
all the all the steps along the way this
is the app that I built it is a pretty
simple to-do list app but it's got a few
cool features built in there so it's got
real-time data syncing it's got user
authentication it's all hosted on HTTPS
so there's enough sort of cool factors
there to make it feel like a nice sort
of production-ready thing and what I
want to do is go through the problems
that I faced while I was building this
app and present to you the solutions
that I came up with little strategies
and tips to make your process a lot
easier
so the first problem when you're
building any app is one that I'm sure
basically all of you are familiar with
you want to build something awesome and
you're just kind of looking at a blank
page right and that can be incredibly
intimidating because web development is
just a super complicated trade you know
anytime you're you're starting off a
project there's a million decisions that
you need to make and there's all these
different sort of tools and and
libraries and each one of these is kind
of like a rabbit hole that you could
just disappear down spending a ton of
time researching and not actually
writing any code I've got a lot of side
projects that I've started where it just
ended up I was just reading blog post
about you know tools and libraries and
things like that and so for that reason
we created this project called polymer
starter kit and the idea behind polymer
starter kit is we want to give you all
of the best practices that we've come up
with we want to give you all the best
tools that we've found out there so that
you don't have to spend a ton of time
doing that research you can just get up
and running and start building your
so out of the box a few the features
that starter kit includes is layout for
any sort of application you get these
nice responsive app layouts as well as a
router for building single page apps
you're gonna get components basically
from our our paper set our iron set even
our platinum set so I'm just built in
they're already wired together for you
so maybe if you're not super familiar
how to use some of these components you
can actually see them in action and sort
of rock how they work you're also gonna
get unit test support for web component
tester I know you're all testing your
code right it's very it's very getting a
little uneasy here guys and lastly
there's going to be support for gulp and
you get this like entire build chain
right on the box and the reason why I
think this is crucially important is
because from the moment you start
working on your app you can just type
gulp and get a distribution right so you
could just deploy that thing and it's
very important to have that early on
versus you know when it's actually time
to launch a thing and you're like wow I
wish we'd structured this differently so
it was easier to build
so with starter kit you're just gonna be
set up on the fast path from go which is
awesome now to get the starter kit you
would go to developers.google.com/live
slash tools / polymer starter kits the
longest URL ever or you just google it
if you're like me and you're like super
duper lazy and when you do that it's
gonna take you to this page we can go
and you can click the download button
there and that's like your gonna take
you to github and then there's two
flavors there's a beginner and an
intermediate / advanced flavor
you probably want the intermediate
advanced flavor because that means the
one that contains gulp and you might be
like watching this right now again yeah
but like I'm super lazy and I don't feel
like doing any of that stuff like can I
just can I just like get all the good
parts so yeah you actually can we built
a yeoman generator as well I did because
I'm like wicked lazy that just take
starter kit and we'll just stamp it out
for you
so with two little commands from your
command line yellow polymer and gulp
serve and the magic of time-lapse video
you can just get started with your very
first polymer app you'll get something
on screen in just a few seconds
and you can see we got our single page
router working there so we flip through
different routes and kind of see what
you get
got that layout already set up for you
so problem number one the blank page Shh
all my polymer starter kit but that
brings us to our next problem we need to
take our app now and sort of break it
down into smaller and smaller pieces its
Kevin said we need to eat giant
lollipops or something I wasn't I wasn't
listening and during his talk so so yeah
but the idea is like you want to break
it down into smaller smaller components
to just have one single responsibility
right you don't want to try and just
build this like one monolithic thing
that's wicked confusing so what I'm
gonna do with my app is I'll start off
with kind of a what seems like a large
component called 2d view but really its
job is just to kind of lay everybody out
it's not really gonna be doing you know
hopefully too much and then it's gonna
be composed of smaller elements so it's
gonna have to do list element inside of
it which will have to do items inside of
that there's one element that I'm not
showing which is to do data I'm actually
gonna have an element for that as well
and so the flow that we're gonna do here
is we'll start with to do data that'll
have all of our collection of to Do's
I'm just gonna like go along the way and
it's gonna pass our to dues kind of down
the line until I end up as an individual
to do item so let's start by building to
do data just so we can see what that
looks like so this is the mark-up for
that element is pretty simple it doesn't
even contain a template it's sort of
main distinguishing feature is this -
duze property right here and we're
returning an array by default and every
to do is gonna be represented in that
array with an object
so each studio is gonna be an object
with two flags and is complete flag and
a label for the actual text of the to do
and we've also set the notified true
flag here so it'll lead to a bind Abal
now I'm sure some of you are looking at
this and like yeah dude an element for
data you know it's non visual and I
don't know like it gives me the creeps
but this is actually a really really
useful pattern and we use it in a lot of
things like iron Ajax and iron local
storage and basically what you're doing
here is you're
this nice representation of your data
and by itself just this tag you'd be
like yeah I don't get well that's
important when you combine it with data
bindings now you've got this nice
declarative data provider and it removes
the need for a lot of the JavaScript
that you would have to write in your app
right mostly most of the code that I
would write net to-do list app would be
just like listening to data changes and
then updating the Dom in various places
and by using a binding here I can
basically remove the need for all that
code and I can also sort of hide what's
happening in to do data to do data
becomes kind of like a facade and behind
the scenes you know how data is is
fetched from the backend I don't I don't
you really need to know how that works
and that's cool because we're actually
gonna change how that works later on
when we connect to a real database so
I'm gonna set up an auto binding
template here in my index file and this
lets me use data bindings without
creating an entirely new element and
I'll just drop doodoo data in there and
I will say I have this - duze binding
that it would like the outside world
took on - right and that's just
representing my collection of - dues and
because I know that I'm gonna want to
pipe that data into that to do view
element I'll just go ahead and stub that
out as well okay so now we've created
this little linkage between the two of
them with those bindings so let's look
at the implementation for 2d view now
this element kind of has two things that
it wants to do the first thing is it
wants to bind that to views data array
to our to-do list which will write in a
second and that's gonna cut down on our
boilerplate JavaScript right you don't
have to write a bunch of code to handle
these things off but this element is
also kind of a sort of like got a bunch
of smaller elements inside of it so it's
got a clear button it's got you know
every to-do item that's inside of it
it's gonna have this little delete
button it's also got this field down
here at the bottom we can add new - duze
so all these elements are going to need
to communicate in some way and we're
gonna use to do view to sort of do that
so to do view is gonna listen for events
coming from all these different elements
and act as a mediator on their behalf
and so if it here's an event like hey
add a new to do okay I'll step in with a
handler in this situation and I will
modify
the data that I've got and that's gonna
go off to do data and update it so I
kind of think of you as like a traffic
cop like he's there you know he's he's
letting things kind of flow and move
around the app so that they make sense
let's data flow in when it hears a bunch
of noise here's a bunch of events it
decides what's gonna happen as the
mediator so that's to view next let's
talk about to-do list and I'm sure some
of you are like you know watching this
at this point you're like yeah I don't
know man starting to turn into a lot of
code I'm tired I don't know if I feel
like like if I was following along I
don't know if I'd be like typing any of
this anymore
might be getting bored so you could go
and you could be typing all this code
yourself right at your keyboard trying
to follow along making Dom notes and
templates and stuff or you could be
awesome and you could be lazy and you
could use yeoman to just write all your
code for you so along with scaffolding
out your application yeoman comes with a
sub generator that we've written which
will actually generate elements inside
of your starter kit app for you and for
the truly lazy I added this feature you
can leave off the last five letters
yes so yeah that's what we're gonna do
for it to do list uh we're gonna go over
to our terminal at one time you know
polymer L to do list and it's gonna ask
us hey do you want me to import it for
you it'll ask do you want me to write
your unit test for you do you want me to
like stub out your unit test and
bringing it and be cool if it wrote it
for you but do you want me to step up
your unit test and add it to the
application for you so you could do TDD
your BDD style and if you want just like
start doing test-driven development so
you get all that just by using that sub
generator which is really rad so the
actual implementation for view list it's
gonna look like this right and this
elements main job just to take art you'd
use data and iterate over it using a dom
repeat template and generate to-do items
and lastly the to-do item there is sort
of interesting because it's it's a
component that again contains more
smaller components and so it's gonna
work very similar to do view that parent
component so it's going to bind its data
to the children inside of it we've got a
checkbox inside of there to indicate the
state of the to you we've got a label to
share the text of the deduce are just
gonna bind that and we've got a delete
button that fires an event so we're
gonna listen for those events and act as
a mediator so it's kind of interesting
we're just reusing this pattern but
we're getting smaller and smaller so now
we've got our app and it works and we
can go we can like well I'm freaking out
on my slide deck right now here we go so
we got our app and it works yes okay we
can add to use things are looking good
buy some pizza rolls it's crucial and
check to do so they're complete delete
the ones that don't want click that
button clear them all out right awesome
so problem number two we solved it kinda
kinda we kind of saw it means cool it's
great we're doing good but I got this
problem still check out what's gonna
happen here I got that one last to do
watch what happens when i refresh the
page Oh
all those hard-coded two dues in that
array and to do data are coming back
right so I was like it's working it's
doing all the things that I want but
it's not really hooked up to real data
it's not persisting its state right we
don't have a way for users to have their
own to-do lists so we solved our second
problem but now we're presented with our
third problem which is figuring out how
to actually productionize this thing
right and that means you know we gotta
get the real database involved we gotta
get user authentication involved we
gotta get hosting going and any one of
those could be kind of a big annoying
challenge but thankfully there is the
service called firebase and really quick
how many of you have heard of or worked
with firebase before okay most of you
for the sneak a little live stream I
will just say everyone raised their hand
it was awesome
the whole audience was a hundred percent
on it
so yeah firebase is an amazing service
it offers three really cool features the
first is a real time database next is
user authentication lastly you get
hosting so most people know firebase as
a database platform they don't know that
it can do hosting as well which is
pretty cool so let's break let's let's
go through these and talk about each one
individually starting with the real time
database now firebase has kind of like a
new sequel data store so if you've
worked with Mongo before or I think
couch is also very similar it's just
like a big JSON document that you're
putting stuff into and so at any point
you could just like fetch some path out
of firebase and you'll just get a big
JSON object back which is rad so to work
with the real time database we're going
to use the JavaScript SDK and we're
going to create a reference to our
firebase instance by calling the
firebase constructor and we'll pass in
the path to our friar base instance and
then to write data to firebase we just
call this really easy set method I may
pass in an object for the data that we
want to write and if we want to work
with array like data which are to do is
kind of our and we would call this push
method and let's just push array like
data so we can keep pushing the same
thing over and over so I'll show you an
example of this on the right I've got
firebase dashboard on the Left I've got
the chrome dev tools and I'm gonna go
through and I'm just going to set up a
reference to my instance there you can
you can all go to the firebase website
and do this by the way it's really cool
actually have the SDK I'm gonna call set
write some data call push
push some data you'll notice instead of
an array it creates this unique ID which
is kind of interesting so that's
actually what firebase does so it can do
its bookkeeping if you've got multiple
people pushing array like things to the
same instance use them all unique IDs
and it kind of sorts things out for you
which is really rad for our purposes
it's it's not a huge deal we'll just
fetch the data later and work with it as
if it's an array but it's kind of an
interesting feature of firebase that
they do that now to get our data out of
firebase once we've written it we're
going to use the value event that
firebase fires we're gonna use their own
method to listen for it and that'll send
us a snapshot of our data which we can
then iterate over now this is a really
cool feature of firebase most databases
when you're working with them you have
to pull them for data so you've got to
be like you know request a big blob of
data you know on demand with firebase
since it's evented you can have multiple
clients connected to the same instance
and whenever the data updates are just
gonna push all those clients at the
exact same time which is really cool so
you could have like you know thousand
people concurrently getting instant
updates so let me show you an example of
the value event over again in the dev
tools here I'm already connected in my
firebase instance I'm gonna drop in a
handler for that value event and then I
can go and just manually start adding
data over there and you'll see that as
I'm adding stuff you're just gonna start
showing up in my console because it's
just sending me these snapshots like hey
the data change this is this is the new
state of the world so firebase seems
pretty rad right and looking at this and
looking at my 2d data element I'm
thinking well that that - duze property
is really just an array and like how
about I replaced that array with
firebase and I could go and you know
write all that javascript that I just
showed you in my 2d data element I could
you know call set and push and listen
for changes and everything but
thankfully there's an element that will
just do this for me so as part of our
Google web component product line we've
built firebase and a firebase element
set and so what I'm gonna do here is
instead of writing any JavaScript I will
just room
that values objects we're no longer
hard-coding to dues in there I'll
replace it with a fire based collection
element and there's two main properties
to this element that we want to check
out the first is the data property so
we're creating a little a little binding
here so we're saying hey the data that
comes to firebase we're gonna just call
this r2 dues property and the rest of
the app can bind to that so secretly
when the app is binding to to dues its
blinding to firebase and then we've also
got the location that we need to give
the element just to tell it where our
firebase instance is and we can actually
clean this up a little bit more we can
turn this into a binding as well and
then from the outside we can make this
element configurable I could say hey to
do data on your location is this
particular instance and that means I
could reuse to do data in other
applications or other people could take
it and use it in their own app they
wanted to so now when somebody is using
my application it's gonna happen is
they're gonna go they're gonna enter
some - dues you'll see here on the right
I've got my firebase dashboard and it's
just immediately passing that data over
there to firebase I didn't write any
JavaScript to make this happen I just
wired it all up with data bindings which
is cool so I'm gonna go crush this talk
that that is a in progress to do
hopefully but now check this so I'm
gonna open another window down here and
as I'm changing my firebase up there
it's changing over there and it's
changing in that second window so I've
got basically real-time collaboration
going on and I'm getting those features
for free just by the nature of how
firebase works which is really really
cool I mean I'm sure some of you have
seen like Google Docs right you can
collaborate in there but that's that's a
lot of infrastructure to try to write
yourself and firebase just gives it to
you for free which is really rad now I'm
sure something you are looking at this
and you're thinking well this is really
cool you know so long as the user just
like walking around they have really
good connectivity on their phone but
what happens when the Wi-Fi cuts out you
know well this is actually where I think
firebase really shines because they have
built-in support for what they call
intermittent offline so let's say
someone is using our app here and
they're going and you know right now
this is actually pulled right from the
Android developer tools so this is my
actual phone and going
some you know crating some to use it's
writing over there to firebase I can
verify the data's there
I'm just gonna go kill my connection
like as if I went in a subway tunnel or
something like that and now I can keep
adding to do use to this application so
it hasn't just like fallen over and died
I'm actually still writing to firebase
what's happening is firebase has a local
cache of my data and so as I'm writing
to it it's just caching it locally it's
caching the events and what changed and
everything and I go back and I turn my
connectivity back on and now it's
sitting there hitting firebase trying to
be like hey are we connected are we
connected and when it figures out that
we're connected again just gonna write
my data back to firebase so it handles
that syncing for me and again this is
like code that I don't have to write
myself I just sort of get this for free
from working with firebase which is
really cool all right so we've got we're
persisting our state rights for saving
user data now which is cool we can
refresh the page if we need to but right
now everyone's writing to the same
location in firebase and that's kind of
a bummer I don't really want that to
happen so the next thing I need to do is
figure out how to differentiate my users
we've got to add some authentication and
this is another area where firebase can
really help us out so if you go to your
dashboard you'll see that there's a
little thing called security and rules
and this specifies who can read and
write to different locations in your
firebase instance and by default it's
just set so like anyone can read and
write basically to any other place in
firebase but they have this really nice
JavaScript polite syntax which you can
use to sort of modify these rules and so
what I'm going to do is create a user's
object and inside of that users object
for every users unique ID I'm gonna try
to authenticate right there so I've got
this little you can see where it says
you know rules user and then I've got
this dollar sign UID thing here so that
is a path to a unique ID but it's a
dynamic path so you know anytime you
know someone's trying to write to user
one two three or whatever it's gonna
fill in that value and then I've also
got this off variable that I can work
with which basically a representation of
the currently signed in user and so I
can use firebases read and write rules
to basically say hey the person who is
going to try to or the person who's
allowed to write to this note has to be
the person who's
Afeni cated with that UID now there's
also a method for going through the I'm
spoiling the surprise little so there's
also a method for going through the
whole Olaf pop-up flu and firebase
supports multiple different low auth
providers so if I want to pop up a
Google sign-in window I'm gonna pop up a
Facebook or a github sign in window I
can do that and I can write all this
myself but again there's an element for
that as well so inside of two data next
to firebase collection I can just drop
in a firebase auth element and figure it
as well so I'm gonna give it the same
location I'm gonna specify the provider
is Google cuz I gotta represent and then
I'm going to give it this sort of user
binding thing and we haven't really
talked about that before but basically
it's a representation of our user
whether or not the user exists in the
app and that information comes from
firebase off and we can do really cool
things with this user binding for
instance if there's no user we could say
hey well let's open a sign in window and
ask the user to sign in now this is kind
of an important pattern to pick up on
here instead of writing a bunch of
imperative code to say like you know if
user query selector the dialogue open it
you know instead of running that we're
just binding which we're taking state
changes in our app and we're binding to
that and that's how we're triggering you
know updates in our UI which is a really
nice pattern now once we've heard hey
there is a user we can use polymers
observers to have an observer or sorry a
user change method say hey we've got a
user now awesome let's create a new
variable called user location that's
gonna be a reference to their specific
node in firebase and we can go back to
our firebase collection element and we
can tell it to bind to that user
location so now it's just gonna write
right to that user spot in our firebase
instance so this is a same app in an
incognito window and you know we refresh
the page there's no user so it opens
that dialog window we ask them to sign
in don't steal my password so good sign
in and now it's often it fetches all
their to do is from the firebase
cool so we've handled authentication the
last thing we need to do is host this
thing and this is probably the easiest
part of the whole talk which is all
which is great because I don't know I
don't like dealing with like pushing the
servers and setting all that stuff up on
firebase makes this really easy for you
they'd have a NPM module which you can
install called firebase tools so install
that from your command line then you can
just go you can run gulp because you're
using polymer starter kit and that's
gonna build a little distribution for us
a little dist folder then we can run
firebase in it that will ask us some
questions like hey which firebase
instance do you want to push to I'm
gonna say I want to push to my palmer to
do one which directory do you want push
the disk directory i just built with
polymer starter kit sweet
it's called firebase deploy and through
the power of time-lapse video we're done
that's it we can call a firebase open
open the page first and there's our app
easy now one things that I think is
super cool about this and like just cuz
we're sort of turning out for a second
when you're calling firebase deploy you
can actually go and sort of open up the
firebase dashboard after you called this
and watch your app deploy in real time
if you're not stoked with what happened
you know maybe there's a bug or
something you can just click this button
I know just roll back to the previous
version so you get that nice version
management set up for free so problem
number three production izing the app
sold by firebase awesome alright to wrap
up you want to get rolling fast you can
use polymer starter kit to get you past
that blank page problem once you're you
know building keep in mind you need to
be breaking your app into smaller pieces
and always eating larger lollipops i
guess and finally you can use firebase
to get everything into production now
some shameless self-promotion i do this
show on youtube every two weeks called a
poly cast and you know we talk about
things like you know building building
your first element or working with
firebase for your first time stuff like
that so if you're interested in and some
of the content that you're seeing today
at the event please go check out that
link right there check out our channel
subscribe to our playlist whatever and I
want to say thank you all for having
today thank you all for coming out to
Amsterdam it's been amazing I look
forward to an awesome rest of the day
with all of you so yeah thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>