<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Progressive Web Apps in Firefox (Progressive Web App Summit 2016) | Coder Coacher - Coaching Coders</title><meta content="Progressive Web Apps in Firefox (Progressive Web App Summit 2016) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Progressive Web Apps in Firefox (Progressive Web App Summit 2016)</b></h2><h5 class="post__date">2016-06-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DrO8c4KIqg0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you for having me here and I just
want to say before I start how great it
is to see so many people here interested
in building for the web and on the on
mobile web on them on mobile it's really
encouraging and I really appreciate
Google organizing this event and
inviting us here it's really great to
see so my name's Ben Kelly I work at
Mozilla and I'm gonna talk to you today
about what we're doing to support
progressive web apps and the mobile web
in Firefox
let's see if the clicker works it does
I'm on the dom team the document object
model team which doesn't sound very
exciting but it it actually is there's
always something new a new surprise it's
really a bunch of C++ and maybe Russ
developers trying to write api's and
tools to help web developers to help you
guys provide a good experience for
people on the web being C++ developers
we often get things wrong but in this
case with progressive web apps and the
these set of technologies and API is we
really get the sense that the there's a
lot going right here and we're very
excited about it and working hard on it
so I guess is way back around a little
bit I joined the serviceworker effort
and the dom team a little over two years
ago I'd never implemented a Web API
before and my my new boss andrew was
like you know once you join service
workers you know it's been going for a
little ah but we want to ramp it up it's
a lot a lot of work there but it's not
too hard so we should be done in
September maybe and that didn't happen
and it's right well maybe six more
months yeah that's a long time along a
long time that didn't happen either and
eventually we just said please don't
wrong button please stop asking us and
we don't know when we're gonna be done
there's it's a very complicated API and
I give credit to the people I work for
that they gave us cover
this because there was a lot of pressure
coming from all sides so finally we were
able to enable it to ride the trains as
we say to go to our release channel
December of last year and it shipped in
Firefox 44 in January of this year so a
year and nine months there about so it's
been a long road I think it was worth
the wait to get to do it right
some things we spent time on with
security as I'm sure you're aware the
web is built around the same origin
policy we use URLs to tell if the
resource is safe for a site if it's
they're coming from the same domain the
same origin one way to look at service
workers is a great tool for lying about
URLs you know you asked for a URL from
site X and you give it a URL the content
from site Y and this is if your
Security's based around URL checking you
need to build a secondary system for
this to maintain the same origin policy
that being said we have since changed
the spec so that the URLs actually get
flowed back from the serviceworker to
the outer bits of the browser and so no
one has implemented this quite yet
Chrome or Firefox but I think it'll it
should help make the security story a
little bit easier for browsers coming
along later implementing it next that
they don't have to completely build a
separate painting system in their
browsers hopefully that'll speed things
up for the next for the next set of
browsers also we found that you know
there was some room for improvement in
the specifications joong-ki Jake and
Alex have done a great job but it's one
of these things just the way stuff
happens where you write an explainer you
get an initial implementation you
translate it into some spec text which
is almost precise but not quite you
can't execute it and therein invariably
bugs in the spec text and when we came
to implement it from the spec we found
for example head brace conditions and
various unexpected behavior that
I would pester Jake and drunky about and
that's all been fixed now in this back
and again we hope that this this took a
while but we hope it will speed
implementation in later browsers and
helps maintain compatibility between
Chrome and Firefox today we also took a
lot of time working on tests the blink
team only backup a lot of browsers
historically we obviously have a lot of
automated tests that run most browsers
typically have had their own test suite
and gecko it smokey tests I don't quite
know what the other browsers have but
the blink team did a great job writing
for this new test framer called web
platform tests it's a standard place in
the w3c that lets us share tests between
browsers wasn't quite easy to import
because they still have we're using some
of their own infrastructure but we
imported that upgraded it to the
standard web platform tests and wrote a
lot of new tests and it's now been
uplifted back to back to the the main
repo and I can I'll just hop out of here
for it
so you can even go and see like there
there's just a ton of tests and there
this isn't even adequate we need to keep
adding more but this getting these tests
is the best way to make make sure that
these features work across browsers and
it's great now that we have a place
where we can share tests like that we
also did a lot of documentation whenever
we implement a new API our we have a
team of people who go and document it on
Mozilla developer Network
so if you have questions about the API
you can find it there we really want
this to be a resource for the web not
just Firefox so if you see anything that
needs to be fixed you it's a wiki you
can fix it or let us know and we will
get it fixed we also had a group of
engineers Slava del puente and some
other engineers solvus here today if you
want to talk with him some other
engineers built a great resource
she called the service worker cookbook
it's just at this site I'll blow this up
so people can see service work ers I'm
not quite sure how you say that so we
call the Service Worker cookbook but has
a large number of examples again not
using any framework if you want to learn
just how the service workers work
directly you can work through some of
these examples and it's of varying
levels of detail the B means beginner i
means intermediate and the a means
advanced so you can see there's a number
of different use cases here so we're
trying to help with the developer
outreach as well so all that took time
let's shift a and the great news is
we're seeing people use it this data is
pulled from our beta developer edition
and nightly users by default we don't
collect this sort of telemetry data on
our release population unless they
navigate through the advanced menu and
click please collect more information on
me not many people do that so this is
largely beta developer edition and
nightly so the absolute numbers are not
as significant as the trend here and
there's a clear up into the right trend
and it's accelerating which is great
when I worked nights and weekends I tell
my wife that what I'm working on is
important and it's great when people
actually use what we're working on cuz
means I told her the truth we've also
been working on push which shipped in
Firefox 44 this is the web push push
notifications we also have h 2b to push
but I'm not talking about here but it
only shipped on desktop for now we are
working on Android support but there's a
lot more operating system level
integration that needs to happen here we
were really hoping it would make 48 but
just before this meeting last week I got
some news that we found some additional
bugs that'll probably ship in 49 it's
more likely and you may be saying push
on desktop is that even useful most
people think of it as a mobile feature
well I use it every day I probably spend
too much time on Twitter but when I'm
supposed to be working at Twitter close
and I can get push notifications for
messages and mentions it's a feature
that they have relatively buried in
their settings currently I think it's a
little bit of a soft launch but it's
works every day and I don't think I'm
the only person using it because again
the trend here the absolute numbers are
not as important but the trend is
definitely up into the right and
increasing so that is also good we're
seeing adoption which is I think the
sign of a good API or a useful API some
of the work we've been doing on push
martin thompson and engineers from the
other browsers to spend a lot of time
standardizing the backend when you know
right I believe chrome just ship support
for the standard web push API previous
that I believe they were using GCM
Google Cloud messaging but now that we
have a standard it's it's something that
makes it easier for the backend and the
way Brou sites can integrate with those
servers because it does require this
extra server integration on the back we
also built a reference implementation of
the of the server which if you're
interested in this sort of thing the
backend servers describes all of our
architecture if you want to know how a
push message actually flows completely
from when you post it all the way back
to the browser's to the to your users
you can read through this documentation
these slides will be available after so
you can see the the links you probably
wouldn't run this server yourself unless
you're building your own browser but
that that's possible to again we have
documentation at mdn and the
serviceworker cookbook i showed earlier
has a lot of examples for push as well
let's see so next i want to talk about
dev tools we I'm gonna break out here
and do a little bit of a live demo and
in the beginning we ship something that
was fairly
bare bones because we wanted to get
service workers out very similar to I
think it was Chrome internals service
worker I can't remember the exact name
of the equivalent in chrome but you know
fairly bare-bones HTML page for managing
these things we now have support for
working debugging so originally we did
not have this but it currently it's
really only usable for like debugging
fetch and push events we're still
working on support for ending the
install process which is obviously a big
use case but let me show so instead of
about service workers you can now go to
your dev tools menu click on service
workers and I'll bring up this new about
debugging page which will show all your
service workers I'll just open a new
window here for my slides which have a
service worker that's right you can see
now that my I have the service worker
for my local host is not running because
it has this push and debug buttons if I
push debug it will open a full-screen
debugger because I'm in full-screen mode
and you can see the service worker and
I'm running and let me sorry this is
probably small for you guys
and I will blow this I'll set a
breakpoint in the fetcher event handler
a lot of fullscreen for a second and I
can now reload this and it will break
sorry
and you can do the things you would
expect to do you can inspect the request
you can see that well I did a reload
so it's requesting the other resources
with no cash to revalidate everything
you can see that it's a navigation you
can see what the refer policy is all the
stuff you expect to do so I will close
that go back to my slides here and these
are screenshots of what I just showed
Network panel I will actually I think
I'm just gonna use the screenshot here
but network panel you can go and yeah
excuse me
Network panel now shows if a resource
comes from service workers you can see
here that in the transfer type if it
came from a service worker it will show
you again we ship something bare-bones
you would get lines in network panel but
wouldn't really show you where it came
from or what happened you just see
nothing for the yeah the timing we are
still working on adding timing traces so
you can see how much time it took to
start the service worker but again we're
making progress and we can iterate now
we also have a storage inspector which
this one I will show again you may you
may go to dev tools and be like where is
my storage panel well you have to go
into the tools here to enable it this
checkbox here it's not on by default
currently but if you come to cache
storage you can now see all the
resources you have again a night a nice
feature you can access this stuff
through console using the API but this
is just a little bit nicer
let me move on to the sort of next big
feature features that were working on
sort of what we had been doing was the
clicker on manna-fest and installed a
home screen this is something people
care about a lot particularly the
prompts I think no.1 Lawson he said at
one point that uh I think it was him he
really liked people like this because
it's almost like the browser advertising
for your site so it's an important
feature we've been working on it a lot
marcos cazares I'm sorry if I'm
mispronouncing his last name has been
working on the manifest
spec he's at one of the editors and he's
been working on the platform support and
that is largely implemented and ready to
go however we're not shipping it yet
because we still need to integrate it
with our product Firefox for Android and
firefox desktop the product side is a
separate team so we're working to make
that product integration happen now it's
taking a bit longer than we'd like but
it is coming you may have seen some
screenshots on Twitter and a I believe
this was shown at Google i/o this was an
experiment reran in Firefox for Android
to show what a prompt might look like
just to see how people would react I
just want to so this is something we
could do and I just want to highlight
because I think there was some
miscommunication around this this is
this is just an experiment it's not
shipping yet we're still working on it
and we really need to get some designers
to sit down and figure out how we want
to do this do we want to do a problem
like this or do we really want to do
something more like Alex suggested in
blog post like ambient badging we need
to figure out what what the right answer
is for the users and the other
interesting thing about this is this
demo or experiment did not use manifest
at all
it's installing the home screen as a
bookmark using the the link and meta
tags in the the document so this is
actually a nice example of
progressive behavior here where the
feature isn't there and yet it's still
providing a good experience for users so
just to make clear we don't have a
release date yet for add to homescreen I
just wanted to clear up any confusion
there but we are working on it
background sync is another feature it's
well into development actually just as I
was sitting over there
Fernando Jimenez Reynaud again I'm
probably pronouncing his name wrong
apologize landed not landed but he
submitted all his patches for review and
he has patches that are working and so
excellent I I was actually expecting
that to happen later because he's
getting married I have visions of him
sitting at the church like uploading
patches before the ceremony
but so I'm very I'm very optimistic that
the school this feature will land in the
Firefox 51 timeframe assuming code
review goes well
which it will and he this is a demo he
he made I was gonna try to live demo
this but I thought that using
non-standard patches and a custom build
in a presentation was attempting the
presentation cards too much so here it's
showing that when when it's online and
you register for a background sync you
get the note you can get it immediately
if you're off lining a register for
background sync you don't get the event
immediately until it comes online and
then it fires so it's pretty simple demo
it's not terribly flashy but it works
and again this is something we'll
probably ship mainly on desktop first
support and Android will be there but
it's not going to be tightly integrated
at first with operate with like I
believe Android has a background sync
task or process that native apps could
integrate with we will we will
eventually integrate with that for
features like this but the initial
feature launch probably will not
let's see and then finally there are a
lot more api's that we're working on
that are related forgot I had the
clicker here and I'll just go through
these quick ladies there we're doing a
lot of work we've shipped the full cache
API including things like ignore search
so if you're doing a cache busting
parameter search parameter you can use
ignore search in your cache match to
easily ignore that cache busing
parameter we've shipped request that
refer and support for the referred
policy in Firefox 47 which is our
current release in our next release and
about four weeks request that cache will
will reach release channel and this will
let you you won't even have to do a
cache busing crabber you can just do
fetch URL cache no cash to to avoid even
the need for cash posting parameters
we're working on SSRI integrity support
for fetch so you can send integrity
value on fetches and then in your
serviceworker you'll be able to inspect
that integrity value those patches are
are mostly reviewed should land soon
streams support streams API has has
begun
it's probably landed stages with pure
JavaScript streams the ability to say
new readable stream first so we can get
it in the tree in SpiderMonkey and run
the tests on it and then we will land
our binding support afterwards so
probably hoping to get the jet streams
into 50 and then 51 52 will have binding
support and fetch body stream and I'm
really looking forward to this getting
stream spec into more API so that we can
use this in more places than just fetch
and we've also begun work on storage API
which is the API to which lets sites
request persistent storage offline so if
it's your
hotel reservation or your airline you
know boarding pass the site can say
don't delete this without asking the
user because the users gonna be upset if
it's gone because they're gonna need it
so this has just started it has a lot of
user experience elements to it too in
order to manage storage so we don't have
a release date yet for this I think I
just want to leave you with the Mozilla
cares about the web and we care about
the mobile web and we're we're spending
a lot of time and effort investing in
that and trying to provide you with the
tools that you need to provide good
experiences for your customers so really
looking forward to see what you guys
build and if you have feedback or
concerns or feature requests reach out
to us I'm here that today solve us here
we also have Brian Clark as a product
manager for our dev tools team is here
also come and find us let us know what
you think where you would like to see
the platform go and I'm really looking
forward to seeing what you guys build
with this stuff it's gonna be great and
these slides are online it's about five
megabyte download so I wouldn't do this
on your mobile necessarily but it does
offline of the serviceworker once you
download them first so if you want to
follow any the links or check it out
they're available there and it's on
github too so thank you very much I
appreciate time today</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>