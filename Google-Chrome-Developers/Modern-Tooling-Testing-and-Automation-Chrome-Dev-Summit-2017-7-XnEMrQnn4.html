<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Modern Tooling, Testing, and Automation (Chrome Dev Summit 2017) | Coder Coacher - Coaching Coders</title><meta content="Modern Tooling, Testing, and Automation (Chrome Dev Summit 2017) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Modern Tooling, Testing, and Automation (Chrome Dev Summit 2017)</b></h2><h5 class="post__date">2017-10-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7-XnEMrQnn4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello hello hello hello all right so we
got a lot to talk about we should
probably just jump in yeah we do tools
testing automation headless chrome
puppeteer it's all good there's a lot of
stuff all right guys we're gonna cover
quite a few things today we're starting
off with the dev tools and now in the
dev tools there's a lot of things that
we've been working on in the last couple
months since last chrome dev summit even
since last Google i/o so we're gonna
show a few of those things now we're
gonna start off in authoring we talked
about offering I'm talking about the
experience of us as developers hand
crafting that user interface and
delivering that awesome user experience
for our users and so there's a lot of
things going on here and the first thing
I want to call out is grid layout is
implemented across browsers awesome in
fact like the new slack com homepage
they're using grid in production it's
awesome this monopoly experiment was on
code pending the other day it's using
grid 2 and so like let's take a look and
see what it looks like with dev tools so
we can open this up and inspect and so
you'll see everything laid out here with
grid the grid column grid row if we
select the parent you are a little
highlight overlay will be showing all
the little cells of the grid and so we
can change the grid gap and see even
that little highlight overlay change
real time so it's giving you a lot
better understanding of how the grid is
being laid out on the page it's worth
giving a shout out here to Firefox as
they kind of blazed the trail on their
dev tools but we hope you're gonna like
this one now next up we have a new
experiment about to ship for color
contrast the line in the swatch here is
coming down and giving you an idea of on
one side of the line the contrast is
good on the other side it's bad and soon
as you move around and select colors
it's gonna give you feedback and tell
you if you're hitting certain thresholds
you can select the background color and
get kind of our preview right there
so please do give this a shot give us
your feedback now Eric have you ever
like been in the situation where you
need to change something about a site
but it's not like your say you know
you're not running the dev server for
instance yeah but you want to change
something and now you open up dev tools
of course you could change anything but
you know that like if you have to reload
the page all time right critical changes
I make in the dev tools like you want it
to like add something like change
something about the JavaScript in the
way that it starts and you like okay but
how do I do that it's it's painful so I
want to show you a brand new feature
that we're calling local overrides you
can think about this as kind of offline
storage for your tweaks so first I want
to show you how we set this up so take
for instance the website for this about
we're gonna make some changes to this
why not I don't I don't have a the dev
server for this but I want to make some
changes in the sources panel we go to
overrides I'm gonna set this up now
first thing that we do we're gonna
create just a folder and this is a
folder on disk that we're gonna use and
it's gonna store all of our changes and
dev tools needs accessed it needs access
to it so this point cool it's an empty
folder it's on disk this folder is gonna
hold everything that we change CSS files
are just gonna be here and I can open
these up with a text editor and save
them to disk dev tools is now gonna use
this but let's make it some changes
inside of dev tools and kind of see how
that works
so now let's change Java Script is
that's kind of what I wanted to do so
we'll open up the one javascript file on
this page it's just some minified
scripts but we'll add some like I just
console.log at the top just to make sure
give myself a little hello and we hit
control s now at this point you see this
little purple icon on the right in the
top and this is indicating that we are
now overriding the site's version of
this and when I reload the page we see
the console lock it is pretty rad
now I'm gonna go over we'll do the exact
same thing with JavaScript so here's the
production JavaScript will pretty print
it cuz so we can see what's going on
like ctrl s and now that one is also
saved to that little folder that we made
I'm gonna come back to Ellen's panel and
we'll make the change over there improve
the font color I think love it maybe
some oh yeah it's an upgrade for sure
all right that's good that's one more
change let's change the title of our
talk just for fun
so changing HTML always the tricky one
right so here's the HTML we'll just go
down and the sources panel find the
title of the talk and just give it a
little bit of an upgrade sounds totes
profesh yeah all right now we're gonna
reload the page hope everything yeah
nice so even now you know everything's
coming over the network but the CSS the
JavaScript the HTML is being updated
even if I go to another page on the site
the JavaScript and CSS changes will
still be applying to those so I'm really
excited about this this is a feature
that we've long kind of wanted to
capability for and now in dev tools we
can deliver that to you I should also
point out it's a great feature for
pranks did you know that you're on the
verge homepage that looks amazing yeah
today yeah today I mean it's totally
real because like you know I'm reloading
the page and it's definitely like I'll
do the hard reload empty cache it's
still there oh good I mean yeah
definitely hi there I think it's an
improvement yeah that's pretty good yeah
all right clutch so many of you here
need a little bit more other dev tools
and going a little bit farther and so we
have some new stuff here the first thing
I want to show is the performance
monitor now performance monitor is a
little difference when there are
performance tools in the past because it
shows live streaming metrics so we can
open this up in the drawer in the bottom
and as
load a page I'm getting all sorts of new
metrics so the CPU usage broken down by
category the memory usage via the
JavaScript heap and then other counters
like the count of event listeners and
documents and frames and even like how
many layouts and style recalc spur ii
that are happening this is giving me a
really good understanding of what's
happening in the page as it happens I
could correlate a lot better around my
actions as I click around in the page
and the kind of metrics that I see there
so we're really excited to see kind of
what this unlocks for you and what
you're able to learn from it the next
thing up is the console we spend a lot
of time in the console and on some sites
it gets really busy in there like this
is a new site that I go to I open up the
console there's a lot in there and
especially if I turn on verbose like
just a lot of stuff and dealing with
this kind of load in the console is
tough because there might be some
messages that you're looking for that
you don't see so now you can open up
this sidebar panel we're breaking down
things for you by file so these are all
the messages coming from the HTML page
itself or we can kind of view by error
by warning this is user messages
everything used with console log and
console one console error and this
allows you to understand kind of which
files everything is coming from and just
focus on only what you care about
hopefully reducing hopefully improving
the signal-to-noise ratio now another
thing that you'll notice is sometimes
when there's a lot of these things on
the console many of them look the same
right things about like parser blocking
scripts and you're like I mean you don't
need to read this but you see that like
there's things kind of repeating so in
canary now there's a new feature which
is actually on by default called group
similar or turned on right here
so reload the exact same page and this
time with groups similar we just say you
know it that looks very similar to a
previous thing we're just gonna kind of
group it together and now you can still
like open up these groups and inspect
and see the individual messages but we
just wanted to clean that up for you by
default so that you don't need to go
hunt and reduce kind of the console spam
there
so good all right rock and roll so Eric
use promises occasionally occasionally
Nick every day you guys lose primals
everything every day yeah yeah yeah like
how about in the console this is an
interesting thing like you evaluate
something that returns a promise in the
console and so you'll see this thing
like promise pending you're like yeah
but I wanted to like know what happens
from the fetch now it is true that if
you just kind of wait until you think
that this promise has resolved and then
you kind of click that arrow and open it
up they know it'll be resolved and you
can inspect the value that's kind of
cool but you have to like guess as to
when it resolves how many people knew
that I did yeah yeah it's like you can
but I wouldn't recommend it I mean
slightly better is this like you could
just do it then and send it to
console.log and then they'll just print
when it gets there but you know typing
that it's kind of annoying so we figured
I'd make this a bit easier for you and
now just throw the await keyword in the
front of it and then easily just get the
results printed the second it happens
now can I do that in any javascript file
you can't just throw away you do always
have to be wrapped around at an ASIC
function okay but in the console we just
kind of took care of the complications
for you and just made it easy so you
don't need to worry about that so having
a wait right here for any asynchronous
stuff just get to the value the resolved
value really easily now at this event
we've been talking about progressed web
apps and on dev tools we want to make
sure that you're able to not only build
your first percuss web app but scale
that up to a world-class progressive web
app and so we have some new upgrades in
the dev tools for this over in the
application panel you'll now see a graph
that represents how the storage is
allocated across various different types
of storage here this is the Twitter PWA
you can see they're using quite a bit of
cash storage a little bit of indexeddb
so on now in cash storage is some
upgrades to first up on
left where we have the listings of which
caches are there this is now live
updating which is a nice little bug fix
that has really given some people some
headaches before so I'm happy to say
that like if you add a new cache or
anything you don't need to close dev
tools reopen it'll just come in there
but now that you're inspecting is a
specific cache there's a lot more detail
in here than there was so in addition to
what files are in each cache you'll see
the size and when they were placed there
their mime type and their full network
headers and I really like you can also
just click over and see the actual asset
itself in this case an image but this is
really nice with you know JavaScript
files and being able to see exactly
which version of this asset is sitting
in the cache at any time really helps a
lot
somewhat similar upgrades over in the
service workers panel which clean this
up gotten rid of kind of the messy
errors and olds dead service workers and
there's two new features at the bottom
of the screen shot here
the first helps with push notifications
so you can define a custom payload that
will be coming over a push event inside
the event data so this can be text it
could be Jason gonna be whatever you
need it to be and just push this down
will will emulate a push event into your
serviceworker you can handle it there
the second the sync is great for working
with background sync it allows you to
push down custom sync tags that your
service worker can respond to okay so
it's awesome with progressive web apps
you've heard a bit about lighthouse and
lighthouse works fantastic for a value
near progressed web app and finding the
sorts of things that you could still can
improve on and there's been a lot of
stuff that we've been doing and it in
general I just want to back up and say
the White House our goal is really to
analyze your website and web app and
diagnose the situation and provide
concrete recommendations for how you can
improve things and our goal really would
lighthouse is just to make the web
better and we want to do that by
shifting the mental load of all the
details of web development shift out
away from like your brain and into a
tool that can keep track of things for
you so there's been a lot happening
there we're happy that dev tools
available sorry that lighthouse is
available in dev tools on the CLI as a
node module and even last year we were
on this stage we were talking about
lighthouse and in last year lighthouse
diagnosed about 50 different issues
around Picasa Web Apps and and and
performance and now a year later we've
doubled that so we're tracking a lot
more things inside of lighthouse and
improve the implementation of many a few
of the key highlights that I'm really
keen on some new stuff around loading
performance we're identifying what
percentage of your JavaScript was
executed identifying slow server
response times and identifying when
you're not when your image aspect ratio
has issues also some nice things around
SEO and your user experience and one of
my favorites now is if your page has a
Java Script library which has a known
security vulnerability we'll flag that
for you to calibre is available in a lot
of different tools including some of
these tools which allow you to
understand kind of your lighthouse score
and as it changes over time and and kind
of and take care of that monitoring side
of things for you and is worth pointing
out that lighthouse works great in a
continuous environment build pipeline
and this is just all the packages on NPM
that depend on lighthouse a great like
it's very enjoyable time to just browse
these and see what people are building
and you'll get some inspiration for kind
of the ways that you can use lighthouse
in your development workflow there's
some exciting things coming up we've
been working on a project called Lantern
which provides critical path analysis
and models what is happening inside the
browser this allows us to do a few
things one we can run lighthouse about
five times faster than it currently
takes right now and two it allows us to
make much more accurate calculations
when it comes to the performance so we
can be very precise around how much each
performance opportunity is going to save
you we're also going to be improving the
alignment of how the story is told
between PageSpeed insights web page
tests and lighthouse so you're not
seeing conflicting results from these
tools you heard yesterday about the
chrome user
experience rapport and understanding
what is happening in the real world
around a few prongs metrics we're going
to be incorporating this data into
lighthouse 2 so that from from a
lighthouse report you're seeing a
snapshot of this is what just happened
but given the context of this is what's
happening to all your users in the in
the wild and lastly we're always going
to be continuing to surface more
performance improvements that are
available to you and best practices that
that can be improved on I do just want
to like take a moment to thank everyone
who's contributed to lighthouse the
lighthouse community has been fantastic
we've we've hit over a hundred
contributors and really appreciate all
the investment of people's times and
conversations around issues and making
sure that it's representing web
developers all as a whole so I really
appreciate that yes thank you
Eric we're gonna go back to you it's
almost Halloween I have a joke for you
Oh what's your joke let's hear it all
right why did the Headless Horseman go
into business oh I see what you're doing
here okay I don't know he wanted to get
ahead in life that was good that was
really good if it's not out good but
speaking of headless let's talk about
hellas chrome and puppeteer so Paul kind
of covered the manual side of things
some really awesome things you can do
now in the dev tools let's switch gears
a little bit and start automating some
of that and writing programs that talk
to the browser it's some really cool
stuff so what is a headless browser well
normally you open Chrome right you click
a button or you launch it from the
command line and you get you know a nice
window there's a URL bar there's dev
tools you can play with and interact
with the page but of course with the
headless browser you get none of that
there's literally no Chrome for Chrome
you kind of take the reins you take the
controls and you tell chrome where to go
what pages to go to how to interact with
those pages and there's no you or UI to
deal with you have to write a program to
control a Chrome and then when you
launch headless Chrome is really simple
you can launch it from the command line
and pass it the - - headless flag pretty
easy there's a whole article that I
wrote that covers headless chrome
there's some pretty useful things you
can do with it just by itself you don't
even have to write any code you can take
screenshots and generate PDFs from the
command line you can set up a testing
framing like karma or something
all this is in this article so if you
want to check that out go ahead and
visit us on developers.google.com but
the really interesting thing and the
thing I want to focus on today is
talking to chrome using node.js so we're
gonna launch headless Chrome but we're
also going to include this remote
debugging port this is really key this
is how we're going to actually use the
dev tools protocol and it's api's to
control chrome to make it navigate to
pages to make it do things we want it to
do so that's where the magic comes in
now if you want to just work with
headless chrome there's a really awesome
very small little launcher NPM module
that we created for lighthouse we've
taken that out and made it a separate
thing cause it's so useful in and of
itself chrome launcher basically it just
finds chrome on your system you can give
it different Chrome's to canary dev
stable channel and just with one command
it'll launch Chrome on any platform you
can pass in that remote debugging port
and pass it any flags that you want to
give chrome so in our case we want to
launch headless Chrome we pass it - -
headless so super useful easy to use
node module and then from there you can
use Chrome however you want inside of
your scripts another way you can use
headless chrome is through one of these
automation testing libraries or
frameworks and some of these are you
know been around forever
phantom Jas industry standards selenium
you can use any browser and test in you
know your code a lot of these for some
reason are like ghosts for some their
getting into the Halloween spirit it's
Halloween that's that's very good I
don't know why but when I kind of got in
the space I was pretty daunted I didn't
know what each of these did you know
what browsers they support are they
using the headless version of a browser
so this is kind of what the chrome team
saw and we said hey let's make at least
the testing and and controlling headless
chrome really really easy for developers
so no frills no configuration and so
this is where puppeteer comes in so at
high high level puppeteer is just a
node.js library useful for using
headless Chrome and by modern what I
really mean is that we're using some of
these latest new JavaScript features so
if you check out puppet to your source
code our example is you're gonna see
async and weight everywhere and there's
two reasons for that the first is
promises are actually really nice so the
communicating with Chrome all happens
asynchronously from node to Chrome and
back again so promises are crucial for
that
and a sink in a wait just cleans all of
that up makes things a little nicer for
us but if you want to you can use note 6
so a really good example here is if
you're like in AWS lambda functions are
you going Google Cloud that doesn't have
the latest you know no date version
installed you can actually use puppeteer
with note 6 without transpiling no
frills no 0 0 config we actually bundle
Chrome's so we'll pull down Chrome when
you npm install puppeteer this is really
nice because you don't have to deal with
those details you can kind of just write
your code and have it run and chrome
will just be there for you
it's Chrome's reference implementation
of the dev tools protocol for anybody
that's looked at the protocol before
it's really big it's very robust you can
do a lot of interesting things with it
but we wanted to kind of highlight the
best practices and the really really
really common things so we have high
level AP is for most of the common very
interesting things you can do so we've
been working on this project throughout
the summer and actually today or in the
very near future we're gonna be
launching a 1.0 so if you haven't
checked out puppeteer do check it out
this is a great time to look into it so
we've got Chrome
we've got headless Chrome we've got
puppeteer now in the mix dev tools
protocol all these things happening this
is the Pyramid of puppeteer how do these
things all line up with each other so at
the very bottom we have headless chrome
the browser a modern evergreen browser
latest web platform features you can
test serviceworker now you can test push
notifications that's at our base on top
of that is the chrome dev tools protocol
we're not gonna interact with that
directly but that is the thing that's
gonna be talking to the browser and
doing things that we want it to do
puppeteer is this little library that
wraps the chrome dev tools protocol and
sits on top of everything below us and
at the very top that is your unit test
or smoke test your automation scripts
the scripts are gonna write in nodejs
so I just want to show a quick quick
comparison don't worry about this code
too much on the left you're gonna see
how to use the dev tools protocol and on
the right is the puppeteer version we're
just navigating to a page and printing
the HTML it's something very simple to
do
but actually pretty complex to do in the
dev tools protocol and this is even a
little bit shorter I'd say than it would
be if I didn't use the the chrome remote
interface library firstly so a couple
things here I have to like use a couple
libraries to launch Chrome to wrap the
dev tools protocol I have to enable some
things in the
tolls protocol to say hey Chrome I'm
gonna use the page domain and a runtime
domain wait for those promises navigate
to the page wait for the load event and
evaluate some script and on puppeteer
side that's just a couple lines of code
and literally you can follow it line by
line just to curl the page all right
let's see some cool examples so first of
screenshots really really common case
first thing you're gonna do obviously is
grab puppeteer off NPM and require it in
your scripts first thing you do is you
need to launch the browser and puppeteer
has an API for that puppeteer dot launch
this is gonna return a promise that
gives you a browser instant to talk to
now by default it launches headless
Chrome so you don't have to like
configure or use any flags here we're
just gonna get headless Chrome next up
is we're gonna create a new page using
that browser instance and again
everything is a promise so you're gonna
see async in a way these are just
promises if you're not familiar with
async and await we're gonna navigate to
example.com and then call page
screenshot that's gonna actually create
a screenshot and save it to disk as
example dot PNG last but not least close
the browser we're done with it we've ran
our script we've generated the
screenshot and in literally like five
lines of code we've opened Chrome on any
platform generated screenshot and boom
we're off to the races
so literally line by line you can tell
what's going on you're not impressed
just screenshots not very cool
I need more you need any more I have
more so what else can you do well
there's actually really really
interesting use cases when we have
headless browsing and at libraries like
puppeteer it's not just about testing
it's about automation it's about use
cases so you can generate screenshots
you can create PDFs that's pretty cool
and useful but maybe you want to do
something like crawl your single page
application and render it server-side in
the cloud for SEO purposes you can do
that with puppeteer and headless chrome
scrape content from sites and we'll show
an example of that if you just want to
interact with the page you can automate
form submission maybe test your
accessibility or keyboard handling using
puppeteers api's and headless crumb I'm
excited about end and testing and having
the latest JavaScript in web platform
features so we can test serviceworker
really really handy if you're building a
PW I collect page metrics Paul showed
you that in the dev tools you can do
that programmatically in puppeteer
hey maybe you want to take another tool
like lighthouse you can use puppeteer to
change a page modify it test some
changes and then run it through
lighthouse to see how those changes
affect performance one of the best
features is actually not a feature at
all this is it does anybody know what
this means
purse Foot recycle Chrome well he does
look like a purse isn't it oh okay so
this this is my interpretation being in
block step we have chrome with chrome
yeah so what does this actually mean
it's really nice to have the dev tools
team the people that are building the
browser and the dev tools be the ones
that are creating this node library so
they work really really well together
an example a very common example
actually someone came to us on the
puppeteer issue tracker they said hey
can I emulate offline can I test my
serviceworker offline we said no that's
actually a bug in chromium so we go over
the chromium issue tracker file that bug
work with the chrome team that was
working on headless literally a couple
days later the CL goes in the commit
goes into chrome to fix this and add
this new API and capability to headless
chrome and then in puppeteer we come
back
notice that change and then a couple
days later we have a new version of
chrome that we pull in and everybody
gets off line in puppeteer so very very
fast feedback loop now that we have all
these teams kind of working together all
right so that's enough talk let's see
some cool examples and some of the API
in puppeteer so similar to screenshots
hey you can create PDFs I don't know why
people want to create PDFs a lot of
people want to create PDFs for those hot
right now so you can do that with like
two three lines of code you know have at
it who cares create a PDF emulate a
screen do whatever you want
the world is your oyster some more
interesting things I think are emulating
device so maybe you want to test the
mobile version of your site using
puppeteers api's you know you might not
know like the viewport settings or the
emulation settings for that we have
pre-canned device descriptors that have
all those the settings and widths and
everything here I'm just emulating an
iPhone 6 and navigating to google.com so
maybe I can screenshot that page or do
it or I want with it one really powerful
thing is you can run code inside run
JavaScript code inside of the page
itself so in this example I'm going to
navigate to my Twitter stream just you
know create a launch command get a
for instance create a new page navigate
to that page what we're gonna do is use
page eval to grab the first tweet on the
page and then click that tweet so this
code here this callback this tweak dot
click is actually gonna get run into
pages not in my note code exercises
we're gonna wait for this this overlay
to pop up that Twitter shows me the full
tweet in or just wait for that that Dom
element become visible and then lastly
we'll just screenshot we'll take a
screenshot of that Dom element so that's
pretty cool you can screenshot a page
you can screenshot a full page you can
also screenshot a Dom element so all in
all it looks like this we'll navigate to
the page eventually get to Twitter we'll
open the tweet click the first tweet and
eventually we'll get a screenshot so
this is the screenshot that's produced
this is chewy by the way oh so cute
Shriya so despite his name he's not
seven foot six and like 250 pounds
he's a very small very timid he's
learning how to use a lightsaber so
that's important so I don't know if you
guys just saw what we did there but we
actually just wrote an integration test
a smoke test for opening a tweet on
Twitter calm you can insert your
favorite framework here but the fact
that we have a real browser with a real
JavaScript engine and real Dom to test
against it's pretty powerful means we
can write some tests and have them work
really quickly interception of network
requests is really really common a
really cool feature of headless chrome
and puppeteer so using request was it
set request interception enable we can
actually intercept any request chrome
makes before it ever makes that request
and decide what to do based on the
resource type or the URL in this example
I'm actually just aborting any requests
for images saying hey I want to test my
page see if the layout looks good
without images see if that you know the
images fail that's a common thing I want
to know what it's gonna look like so I
can write a test for that using
puppeteer keyboard input I can navigate
to Google com I can pull off the Dom
element the search input type in the
word puppeteer using page type click
Google search wait for the search
results to come each of those search
results is an h3 with an anchor tag I'll
just wait for that selector just be
visible and then just run to over those
links and print those to the consul's
I'm just scraping content here from
google comm using puppeteers
ap is Paul showed you some really cool
things with page metrics in the dev
tools we can get that information in
puppeteer as well just with an API call
so same stuff is in both places if you
want to do some performance analysis if
you're getting started puppeteer there's
a couple of really really helpful
debugging tips that I just want to
quickly touch upon invaluable stuff so
let's talk about this launch command one
more time
now the first thing is you don't have to
use headless Chrome you can just use
head full chrome full chrome so if you
want to pop on the headless false-flag
and that'll actually show you the
browser window so if you're writing a
script this is really really useful to
see what's going on we have another flag
to open the dev tools automatically so
that's kind of useful few want to poke
around in the dev tools as your scripts
are running kind of debug things as they
happen
speaking of debugging there's two more
things slow mo and dump IO now slow mo
is something I've been showing you this
entire time through all these
screenshots it actually slows down all
the operations puppeteer does so it'll
slow down typing as if it were a user
it'll slow down navigation and kind of
mimic user behavior and dump io is
really nice I'll give you extra
information from chrome chrome logs a
bunch of stuff and if your scripts are
crashing that's a good one to throw on
you don't have to use the chromium that
puppeteer brings in you can use you know
canary or dev dev channel if you want
you can launch your own version of
Chrome and just do that by passing in
the executable you want to launch so a
bunch of stuff do check out the
documentation there's just an amazing
amount of really easy to use api's
offline support turn off JavaScript
setting viewport a lot of really handy
things you can do in puppeteer if you
want to check it out
we threw up a site called try puppeteer
dot appspot.com I hacked this together
in the weekend so if it breaks please
don't yell at me but this is loud you
going you know play around some code try
out our samples you can see any console
output at the top and actually if you're
generating a PDF or screen shot I'll
show you that at the bottom to get the
preview really easy just to try not even
have to install anything so yesterday at
the keynote Ben actually proposed a
challenge and he didn't know he's
proposing a challenge to me but I went
home and I built this demo so this is
gonna be puppeteer inception where you
can use puppeteer to open the tribe
puppeteer site which is running headless
Chrome in the cloud that runs puppeteer
oh nice there's like a lot of stuff
going on love it so let's see that it's
just using docker and headless Chrome so
I'm gonna navigate to the site using
puppeteer I'm gonna inject my code and
you see I'm gonna navigate to the site
itself and take a screenshot of what
happens so eventually when we cook the
Run button using puppeteer we'll get the
screenshot within the screenshot we're
pretty cool and you can see my arrow
there it didn't move the entire time
that was public - you're doing it stuff
it wasn't me clicking around so good so
actually Eric kite what's that yeah yeah
thank you thank you I love it
I'm gonna say I wanted to interrupt you
for just a second you're talking about
the the dev tools protocol a second ago
yeah and it reminds me there's something
about the protocol if you've ever
attached something else to Chrome like
vs code or webstorm or selenium and
you've been working with it and then you
open dev tools you've seen that other
tool kind of disconnect right like you
can only have one connected at a time
this is admittedly a bug it's actually
it's our number one bug and so yeah it's
a little interesting so I'm just gonna
go and actually just take a look right
now okay so if yeah so we have 124 1,200
stars on this it's a lot more than our
very disproportionate in fact all of
chrome bugs it's number three the worst
part about this is that it's assigned to
me yeah since 2012 what I'm doing not
ideal um what's yeah we got good news
good news is multi client remote
debugging support is now fixed it's so
good school the great thing here is that
nothing to configure on your side
everything just works automatically
having dev tools open plus any of these
things or even two of these tools
together two different things that
connect to the protocol all good all
works it's awesome and so now that I've
done
actually we have something to take care
of let's see we're just going to well
yeah it's probably time that we closed
this bug market is fixed and it yes go
don't thanks Paul and CC
whoo that's awesome feels good all right
the next bug now I'm not into the next
one
[Laughter]
so with that sorry for going over hope
you guys learned a lot today we did
cover a lot in a short period of time
here's all the resources the github
repos for lighthouse and puppeteer
headless chrome article dev tools
protocol if you really want to get
low-level that chrome launcher module I
think that's it right thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>