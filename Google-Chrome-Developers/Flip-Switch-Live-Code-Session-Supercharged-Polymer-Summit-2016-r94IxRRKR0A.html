<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Flip Switch: Live Code Session - Supercharged (Polymer Summit 2016) | Coder Coacher - Coaching Coders</title><meta content="Flip Switch: Live Code Session - Supercharged (Polymer Summit 2016) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Flip Switch: Live Code Session - Supercharged (Polymer Summit 2016)</b></h2><h5 class="post__date">2016-10-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/r94IxRRKR0A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yes good hi yes I am are you doing it
how are you doing not bad at the back
how you doing on the front what right I
love the idea that you can figure out
where broadly speaking people are from
from the way they cheer I I came out the
tower hill station this morning and
yesterday and he reminded me the last
time I was at Tower Hill wants to go to
the Tower of London with Paul Irish and
we went on the tour by the way is not
Irish who is shocking and we were there
and the yeoman went are you ready for
the tour and everybody went way in that
British style apart from Paul Irish it
went whoa no I enjoyed it because the
yeoman just went there's an American in
the crowd I was like okay but I think
he's allowed I think he paid it's fine
anyway that's not what we're here for so
summer night we run a show called
supercharged on youtube.com slash chrome
developers well done well said hashtag
funding and what we normally do is we
normally spend some time live coding on
a live stream some UI elements and we
thought we'd do it live live for you
today that kind of idea of doing live
coding if you've ever watched the show
before we usually have the YouTube live
chat and I read it and I distract him
where the questions come really does
today
we're gonna use the polymer select
channel so for you people in the room
the people watching the stream at home
or at work wherever come until the
supercharged Channel and ask your
questions throughout the live stream you
know I'm gonna be watching the chat and
reading it provided I can keep up yeah
and I'm gonna try to weave in all the
questions that you have and get and
we'll try to answer them if we know yeah
so the idea is I'm gonna build the UI
elements and normally they're quite
practical like side.now stuff for you no
not today it's gonna be overblown and
ridiculous or as ridiculous as I can
bring myself to make we call it show biz
we do show biz right you can see what's
on my screen so I may as well get
started
with code yay because we got that
question all the time this is BS code
yeah HTML there we go Oh snippets on
your friend here's past hyper I'm a bad
type paulin submit give it a title right
anybody wants to do like account how
many typos he does I would be curious to
see that don't do that don't do that
right rel equals import Oh async Hey
because it is the promise mat if I do
web components I'm not gonna do polymer
she's gonna go I'm gonna use the
platform that's one other thing I'm
gonna go straight in and say I've never
heard that before no weird isn't it
useful platform hashtag branding Sam
okay hates ref equals and now I'm gonna
make a hitter I thought let's make
something where like imagine a disc and
it's got like a value on the front like
one two three four whatever and you
click it and it flips over in 3d why not
and on the back you can choose like one
two three four and then it flips back
over and show you what what the current
value is sounds ridiculous enough good
let's do it it's like a tab so I'm gonna
call it but in 3d
I'm call it flip switch HTML so right
before in the show we have used custom
elements oh yeah but only v-0 so I'm I'm
gonna be new to that I actually like I
plugged my ears I didn't watch any of
the talks so I didn't know what how how
v1 works
I don't know how so I I will be educated
by this and I will probably ask
questions even knew it and you know the
answers to
oh right so flip switch J's how's
everybody doing in the chat we're
actually subtly we have a search of
people coming in which is great right so
what I've got is I've got let me say you
see if I can explain what I'm actually
doing I'm going so my first question
would be you're in a separate file
already which is just like no no doctype
no I know right because it's an external
input so I've got an HTML import with
which I've called async cuz I'm being
good and I've got my custom element so
my my theory was I'll use all the web
component primitives that make sense
here so got a nice Mel import which I'm
gonna use basically I'm gonna have a
template which I figured is going to be
starting to the shadow Dom at the thing
that I'm making and then I have the the
JavaScript itself so let's make that why
not flip switch Jas and friends don't
let friends write up custom elements by
hand they
snippets because I if I was left alone
to write things like the constructor
don't forget to call super and that
would break everything I don't know why
it breaks everything but if you don't
the browser's all go yeah but if you put
in super it's like sure yeah that's fine
it's an HTML element man look for me
this was already knew because yeah
previously you had in the constructor
would never be called but inside you
would have the created callback react
and now in we to v1 we apparently move
to the activation which I liked it to v2
that dude yes whoa whoa don't do that
fears code comeback right let's do
couldn't by the way this is compute me
see class it doesn't like it it's like
yes looks like so let's make it okay
with it yes lint and es6 no it didn't
know you were you didn't know it didn't
are fine that's right let's make sure
this is actually working console.log oh
there's my server come on that's a start
so we actually have it's what did we
just do sure it's figured out that scene
now every time I switch it's gonna be
right there we go it's figured out that
I actually have a flip switch in my page
and it's called the constructor and now
it's spat out flip switch we're gonna
fuss in this if you actually want to
make some progress so I should get on
with that right so let me make sure that
this is actually going to work let's do
some Styles in here and I'm gonna tell
the host that I wanted to be background
red display block with 200 pixels height
don't be marking my typing because it's
awful with height 20% 20% 200 pixels
that seems good units are hard I know
they are for me alright okay so now
here's the thing what we're going to try
and stamp it into the shadow Dom so I
need to know because it's in an import I
have to know which import it is so dark
equals that's the main document current
script yeah they'll be current script
who's running which is this and then I
say who's the owner of that dot there we
go
I own a document for that because yeah
this one so now I can say
wait so document and only document can
be different yeah document is the main
document the only document is the
the owner of the transcript which is so
I can now say dr. query selector like so
and I can ask for my FS temple which is
going to need the hash on the front
because it's an ID and then I can do oh
yeah this start attach shadow sounds so
good every time I say it mode Oh pen Oh
pen I'm gonna leave it be open so what
what is it and yeah that's what he means
basically I think it's are you allowed
to access the shadow root from outside
or not if I'm wrong somebody's gonna
correct this probably on the chat but I
mean I think what he knows that means
that you can't the only people who
actually have the reference returned by
this can use the shadow root if it's not
open sounds about right
okay that would make sense yeah and
we're gonna append child will say temple
dot o content because you have to do
that on the template dot cologne nude
deep is true who do you see that there's
like no I this code was like deep yes do
that right yes I've got a red block it's
got to get more showbiz than this and
we're done yeah and we're done see you
later right in the main page I'm gonna
let's do some myth-busting it's ready
style you know that I booked shut up all
right
HTML buddy but do it
Oh with hundred percent I'm just gonna
basically make this thing take up a
hundred percent why not and let's see
with five hundred percent
let's see margin:0 padding:0 yeah and
here's the thing when somebody tells you
that you you can't vertically align and
CSS they're lying to you because with
two lines display flex flex and a line
items Center and her
even I knew that there we go vertically
aligned and also justify just deep fine
just see I told you and now it's
actually in the middle it's in the mid
everything I love it it's so good flex
box so good I remember back then when
you had to do like a zero pixels zero by
zero pixel object and then do relative
50% and whatnot it shout-out to Spacek
spatial gifts I was like good times okay
I thought we had this chat it's fin
quite emotional right so that's in the
middle and what I'll do is I will now
start adding some stuff now if it's
gonna do that thing where it's actually
gonna flip forward it's something which
she's got a front and a back so I'm
gonna make a container for those because
I've got a feeling I'm gonna need one
yes I'm gonna need one because I'm gonna
put things like perspective on so div
class equals front and we'll say front
Sisler does what it says on the tin and
we'll need one for the back as well back
back back how's the chat doing I'm
assuming this is like the front card a
front side and the back side eventually
of the thing I just mentioned will be
flipping that's the wrong that's the
right so we'll say done something
similar before with a 3d card flip yep
where we I guess talk more about the
shadow than the actual card flip in the
end right because we had to do it
efficiently to get the 60fps but we had
the same so that we had like a front and
a back and basically one thing was
becoming visible and the at-home
becoming invisible when things are
flipping over frightened so if you don't
know that watch that episode there on
YouTube on demand may be good to fall
asleep with or something yeah the sound
of our voices they're probably not right
so I positioned them absolutely and tell
them to be a witness and resent top left
0 and they've decided to break out the
containing on because their parent which
is container is statically positioned so
we'll have to say position or their
relative and I'll bring them back in and
land ready yeah I know it looks so
amazing give me time give it time I've
got a lot of faith in where we're going
right there's still not understand wow
you need to be with 100% that's why so
the container needs to be a hundred
percent of the thing they seat now and
we are in the middle but it they look
ridiculous so let's fix that and what
we'll do is we'll set background oh
here's an idea
let's do color yeh just and prop on a
3-2 this will be a greeny colour of
course you know that
oh by the way justjust because that
before anybody calls us up cereal yeah
come on 83 is more than two six and one
all right well I'm fine fine
by the way just just a tie I don't know
what we're doing today but Paul to be
fair we wanted to say that he did
rehearse this because we are strictly
time books this time and don't have this
dreamer we can go on as long as we want
to and so this has been rehearsed by him
not by me so I'm thanks I don't know for
telling him that I didn't just figure
out the house cream by myself okay so
right we don't need the red anymore
because we know that this is working
okay so we've got the front in the back
and the back is sitting on top of the
front which isn't kind of really what we
want we actually want the front and a
back face right so we want to rotate the
back face by 180 degrees so like what
the back like front side and we've got a
front look we've got a front and a back
yeah so the front is facing us but the
back is also facing it which is rude
that's not real life so you back to face
away Yeah right okay cool so we're gonna
do a transform and window rotate y 180
degrees like so and now the back is it
is it is back but because the way 3d
transforms work they show you the back
face of the thing by default its back
face miserable I mean back face
visibility:visible so both of these will
CSS right sorry
back back face visible visibility I
can't today
and hidden okay that will make the back
is still there but it's now actually
hidden away which is you've ever done
any OpenGL or WebGL work you will have
encountered similar behavior like that
exactly so if you flip something around
sometimes it's visible sometimes it's
not depending on how you configure your
engine okay so well let's do the bit
where it actually flips over cuz that's
more fun right so in order to do that
what I'm gonna do is on the host I'm
gonna set a perspective value which you
always set in pixels
perspective 500 pixels and what I'm
going to do is I'm gonna push the
container back 250 pixels and it's going
to be kind of become this pivot for us
and I'm going to push the front in the
back another 250 and so that when they
flip forward they're gonna be at zero I
guess yes let's find out let's do
translate transform transform we don't
have Theory Corrigan we could just use
like you can only wear in just draw we
do actually have a theory corner or
japonica till he occur Banksy and that's
the Germans a bit more tell them tell me
what the German is for CSS
Casca the understand is Young's
phenomena oh it's so good it's like a
pop quiz later so memorize this it's
gonna be all good if you can't say it
right
so I've pushed it back in into in these
base or Zed spaces room okay so does
Ezequiel into the monitor or out of the
monitors negative
oh so the axis goes out yeah I can never
memorize okay well here we are so it's
at the moment it's basically was it was
like 133 pixels right and the reason is
if you want to work out how much
something's gonna get scaled down or up
by it is always the perspective value
divided by perspective minus the
distance which was minus 250 this is
literally in the spec but it's in like a
no liner by the way if you would like to
know this is the math you're always
looking for us like you say now that's
why it's like 133 because that's like 66
percent of the 200 right so that's why
it's that size so what we'll do tell you
what with it will push the front in the
back further back like so I don't have
eighty people on the chairs one right
now which is good company more are they
asking anything like like a rope is
almost answering anything but yeah sit
there at your Bob Dodd shout out to Bob
means your I don't say you redundant but
I'm glad you're here with me now in the
chair
shoutout to Surma yeah my safety thermo
here when i go wrong right I put a V you
might have seen actually I put in the
extra transform but it didn't actually
do anything like so it's still at 133
where as you'd expected to have gone
another 250 pixels back well that's not
gonna happen the reason it's not going
to happen is this the flip switch has a
perspective value of 500 the container
is pushed back by 250 pixels but then we
push something else another 250 pixels
but the containers in the way between
the the item with perspective on it so
it goes long no what we have to do is we
actually have to ask the container to
preserve the parents perspective and
pass it down to the children which we
can do by doing transform style
preserve 3d and now it'll get smaller
okay so there now it's basically said
okay I'll take the parents perspective
and pass it to the children so now
that's all good isn't it how are we
doing for time we're doing all right
easy yep okay let's so what we were
doing the thing where they container
what would those we'll flip it so that
one theme in the questions is right now
like yeah it's gonna work in Firefox
it's gonna work in Safari with polyfills
yeah with polyfills it probably would
work right now we're just this is as
always we always say there's an hour
show every time this is not production
ready code no we're just that we're
doing this on stage this is probably
gonna be horrible so just don't just
copy it and paste it out but this is
about to the technique and it's gonna
work in chrome right away because we're
developing chrome and you probably can
add some polyfills to make it work
everybody knows this stuff if you didn't
use the HTML imports if you didn't use
the like shadow DOM and all that you
could make this completely work as far
back as whichever browsers were the last
to get 3d transforms so I guess you
should be fine in the IE 10 even maybe
yeah should be I think I don't know if
you want to cry try to make this work in
IE 10 it's your your homework right so
basically what I guys are going to
container when the container gets a
class of flipped is going to rotate X
180 degrees because it's in the pivot so
we should see our cards basically go
over now what we have to do is go back
here and we're gonna have to ask for the
container this dot container equals the
root but query selector
what was it called it was called
container that's why I can't people
aren't asking you to zoom in a bit
zoom this bad oh yeah okay fine
also on the website yeah I know although
maybe not this stuff
well oh so here we go out event
listeners listeners so I like I like to
do this I'll hop the Paul trick I know I
just know I know I'm not gonna do that
today I'm just gonna do this and just
alright but I'm basically
document.addeventlistener when you click
I'm going to basically do it this way
just so we can check that everything's
working they stop flip I'm gonna flip
things over like so so I need a function
called flip so you're also giving the
element in actual API I am giving the on
with an API and I can just say this
types of human Dana doc classlist doc
toggle flipped right which is going to
do nothing I know it is it's I'm an
idiot you don't have the dot in there
you only have increased left oh there
you go
right zoom that in a little bit for now
now is now the back is upside down which
looks ridiculous so and it's not
animating which is also ridiculous so
let's fix both of those transition
aren't transform and we'll do not point
eight seconds and I do honestly think
this is one of the nicer easing out
curves and not point six nor not point
three one oh that's a new one though I
know I don't normally use that do I
usually have zero zero now you see that
still housebroken in it that's really
broken let's fix that as well do you
know why I know I don't I do because
I've seen this bug before the front and
back I've got a transform there but then
I override the back with its transform
rotate rotate why so I need to put that
in there so that remains so we have a
question hang on hang on
there you go so yeah that's whoo the
only downside is that's actually upside
down because I suppose if I did that
with my hand my um no it is physically
correct in that sense
yeah so let's rotate it in Zed like it's
rotate it we'd like that through and
then just so 180 degrees and yeah look
at that
showbiz right you added event listeners
in is unconnected or in something like
that yeah so I normally have
the element of the DOM and move to
summarize unedited you would have
multiple event listener server I would
normally in a disconnected callback I
would clean up time production ready
code well yeah right where were we right
so the thing is when you when you click
on this that's kind of okay but let's
let's actually add some buttons because
we I did say we're gonna have some
buttons which we'll do in here so we'll
have a button
speaking of now that you have basically
had experience with both both v-0 and v1
yeah of custom elements and maybe even
shadow Dom preferences differences
doesn't really matter no I rose by any
other name I think it's still awesome I
really like the fact it now uses the
constructors of animated callback I like
that you and I really I mean this is
just attached and detached callback by
another name and actually you change
callback is still attribute change
callback so for me mostly this hasn't
really changed at this won't caught me
out that you have to if you can't change
an attribute you have to declare as a
static well checking through the
performance optimization it's like these
the only ones I care about and it's
called custom elements define and not
register element and don't register on
it was before but seriously is just
syntactic changes it's like alright I'm
quite fine right so we had buttons on
the front right yeah it's got really
attractive looking one and one two three
four okay
let's style up the front button let's do
that it's oh dear
right front front button right width see
how much I can do here
100% height 100% oh let's save
repetitive I know right border-radius
50% cuz we were gonna want that
outline:none cuz I'm gonna do a hover
statements in sound I'm gonna do font
size 60 pixels Oh background on cuz that
it's that gray at the moment border
none'
don't want any of that yeah okay color
no make a white color
there we go no let's do a there we go
someone is suggesting using mixin for
the sizes which I guess would make sense
but they're you know or vanilla that you
know what yeah absolutely
yeah they production totally use some
tooling
I can't focus Bentley every was
something we are using you can see on
screen more or less my only thing you
can see is the Python web server and
that's about it
so here's what I'm doing using the Box
shadow which is gonna need to be in set
in set with like zero on the XY 0 on the
blur these XY and blue are all 0 and
then a 10 pixel spread which will bring
it in 10 pixels which is chemical and
then we'll do a naught naught naught
naught point 4
there you go why not and then we get
that right that's fine now on the back
ship it ship it's done would you stop it
trying to save time here I know but
expecting back that all day the back
buttons oh I get to do something I quite
enjoy on this I think 25 percent because
there's 4 of them so we'll make him
smaller make that a little bit smaller
someone suggested that we should use a
transition box shadow until episode no
no no no no no no mad if you don't know
yeah that is what the card flip EPS was
mostly out yeah you don't have a main
box shadow you don't do that never do it
because it will trigger paint on every
frame of the animation and so far you've
seen me stick to transforms and you'll
see me stick to transforms on opacity
for that reason they are the always on
only properties that today will animate
in an accelerated version which
basically means that we create layers
for them on the GPU and then we can move
them around with the transform or we can
fade them in and out and that's really
really fast in that it tends to be fast
in all browsers painting on every frame
it's a gamble you might get away with it
if you go mobile
you mostly will not you might not you
probably won't and I think you can with
a lot of slight acquire biggest live
hunt depends on the thing you can get
away but usually transform or pass yeah
nothing else differently I'd probably
use it before or an after and I'd
probably do that box shadow on it and
then I just faded in and out or I'd
scale it or something like there's ways
to do it which don't involve paint
mostly right where was I've seen in the
background for this wasn't at var we're
gonna do like a inverse color thing
going on
that's a it's like that and then rule
want it or initiative it's been that's
more for okay now they look ridiculous
where they are don't play so let's put
them in a nicer place or position
absolute top fifty percent this is one
of my favorite little things as well is
you when you do that and you've got them
they're all they are actually in the
middle but it's the top-left corner
that's in the middle and sometimes
you're like yeah but I'd like to just
middle middle would be good you can just
do a translate transform translate - 50
% mmm I asked that the the fun factor is
that in this case you translation works
on users for the percentages the side
entrance of the elements are being used
and not the pairing be so good right so
now let's see we got back bones but
let's position them in a little more
right n of type 1 I'm just going to
assume we've only ever got four boxes
because you know it's it's prototype
code so so one two three and four right
so bottom button one button one yeah
yeah it's gonna be staying at minus 50
and we'll bump it up by another hundred
percent there we are - is gonna go out
to the sides that'd be a plus 50 with a
my guy you like like a ring around yeah
I want one two three four like like a
gamepad thing yeah what we're gonna use
the gamepad API no shut up
let's find out if that works this is I
mean normally you just sounds about
right
let's find out one two three four yeah
okay cool so we've got buttons but I
think because these are they've got a
transform here as they default and then
they got a transform here we couldn't
take advantage of the fact that their
parent gets flipped and so we could just
do a nice little animation for them here
by doing this and then let's do already
got it don't repeat yourself poor grab
that let's make the button animates so
now that you probably don't see that
let's slow down slow down
animation this great feature off dev
tools by the way go it down slow wall oh
you can see it yes yeah there's no
ready listen they can put a delay or
something or like a curb or thanks
thanks for sending my father transition
delay I know some stuff I know loads of
stuff not point one not point one five
let's delay the animation I'm will do it
you know you know I think that a bit of
delay that there we go so you see how
they spread out at the end you wish yeah
that's good
right let's do it so that they actually
changes the value now when you actually
click on one of those buttons let's
actually have it update the the value on
the front so we can do that with all
let's think about this let's do a setter
and getter set value I know I got fancy
I know right good
this dot value equals value fair enough
except that you gonna make that an
underscore pull get value return this
dot value and what we can do is we can
say this dot front EU dot query select
this is bad but I should really be
cashing this instead of asking for every
time dot text content equal in value and
we need to know what front is because we
don't currently have it equals this dot
root not query selector front written
yeah yeah same for back yeah right so
we're gonna need the back I just saving
the reference to each of these two
elements we know we're gonna need it
yeah right so what happens is we
basically got the front it's fine
and so what we need to do is we need to
say this dot front when you click it
anywhere on the front because the button
takes up the whole thing we'll just flip
the thing yeah this but will delegate to
the back in case we do some time decide
that we want more than one button and
we'll say when you click now you're
giving me ideas I don't know right
what we'll do is well there's a there's
gonna be a problem with this we'll do
flip but we'll do this dot mmm value
equals whatever the target was mmm text
content well do it so we basically call
attach you could at least use like Dana
said or something
all right so if we click on the four
there you go
it's actually setting the value but I
promise if we click on the back whoops
working as intended
oh good good news is there are the most
ridiculously named properties on an
event there's the Curie target and the
target if you don't know that's because
events bubble are you the current target
no I'm the target how's that different
don't know ask the current target if the
event target is the same as the event
dot current target which basically means
and I think that you clicked on the
target is the current target which is
the thing that was actually Hadley of an
ASIC is saying have you if you have not
bubbled no yeah yeah yeah on the back
itself rather than the button yeah yeah
then we're just gonna return right so
this is like if this is is the back bail
right so hopefully that will work so he
doesn't do that but now it does do that
that's that problem solved right so
that's all working I had an idea let's
make it a little more showbiz we had a
question by the way
order some no are we doing Dom
operations in the constructor right now
because that is apparently not
recommended other than a touching the
shadow how are we doing query selector
which sure how many works right
oh yeah it's not gonna be out I'm at
gonna undermine everything you say okay
so see right oh yes we I'm gonna add a
ripple a ripple ripple everybody likes a
ripple rip oh how very material of you
I know div class equals Ripple know that
in case you didn't know by the way all
of our episodes the code that comes out
of those it's on github this will also
be on get up on its and the Google
Chrome org on get up called UI element
samples it'll not mistaken we probably
have a link on screen hopefully there's
- you sure you yeah you'll find it we'll
also have it in the description and the
video on demand later on so go there if
you want to play around with it yourself
make it work in ie10 or whatever floats
your boat yeah absolute left 50% top 50%
this sounds really familiar doesn't it
transform translate trans LT trans 50% -
50 % this is going to position the
ripple well you didn't see that it's
fine I expected that because I've been
on board radius now we've got a ripple
and that looks I know just bear with me
so it's actually it's actually quite a
nice aesthetic after see you right don't
get distracted Paul rippled that
expanded right because we want to expand
and and contract so scale down to zero
I'm going to scale it down to zero and
then I'm gonna scale it up to one when
we call this class now it's gonna go
like yeah but we will want to transition
on transform so let's make sure we've
got that in place because otherwise
it'll just pop right that's the official
sound of popping will make it a little
faster than the the flip because ripples
just go quite a long way to go so I kind
of like it when it just gets on with it
so I'm making a touch faster than the
actual flipping over animation so we've
actually got to tell the you know we got
a toggle that class well it's good
because we've kind of got that stuff
already in place
ripple ripple so I can interesting
question we haven't seen a single will
change in your code so far her device
that give it a moment yeah
class list dot toggle expanded X you
also actually haven't proved that it
doesn't paint right but that will will
paint let me show you that it will paint
let's choose let's choose a different
color my a green is it like dev tools
user screen to indicate painting so
that's kind of not yet whoops no let's
do Rebecca see I didn't even have to say
it people who are asking for this color
that's well lovely color right anyway
there you go all right so now we do
paint flushing every time chrome paints
it will put a green flash on the screen
like that see what because you're
covering the border has to be added and
therefore paint is happening it needs to
be painted
like literally during the animation
because it's an animation on transforms
chrome goes got this I'm gonna give it
its own layer which is a bit like in an
art package right where you make your
own kind of layer and you do some
painting a name but at the end of the
animation that goes cool don't need that
layer anymore bye-bye and a house
they've repaint that bit so you'll see
that it goes and then at the end you see
that green box around the the ripple
okay we don't it's basically for the
flatter of all the layers back down to
one single image so to speak on the GPU
so what we can do is we can say to
Chrome and also it's in Safari and
Firefox we can say listen that ripple
like if you're seeing the ripple it
should have its own layer so we just do
will change which is the way to do this
you can use the and there we go little
will change anybody didn't translate
that zero before in the histories of
ever yeah everybody uses will change
okay okay but if you hadn't and you've
seen translate Z zero or translate Z
zero that's exactly what it's doing
visually in Noah but it was a hack for
Safari back back in the day and then it
was every other browser pretty much
since was like oh you're putting a 3d
transform that means it should have its
own compositor layer actually do that
now but will change is the kind of
standardized version and so at the end
of this see how we don't see that paint
anymore and if we actually show layer
borders chrome will show as anything
that it thinks has got its own layer
with
actually visible and that's really good
for us here so this one will have it
because of the fact that it's got the
perspective on it so it knows are
there's a 3d transform here but the
ripple gets one because of the fact that
we've told it it needs one what there is
a list of properties that basically
force our advice for the browser to use
their own layer yeah I think wasn't a
speck of CSI I don't remember
yeah I might link to it in the chat
there's like a list of transfer a list
of CSS properties that force an element
to its own layer and from there on in
you can do accelerated animations okay
I've set the size of the ripple to one
pixel which seems inadvisable because
you won't ever see it however the thing
is it wants to be the size of the screen
right we want it to kind of take over do
like a full takeover which means it's
like do we we do okay
these change size right windows and that
so we need an resize handler to kind of
figure out okay how big does this ripple
need to be like the radius of this
ripple so I set it to one pixel because
they're you know I know I'm gonna have
to figure this out in JavaScript so what
I'll do is I'm gonna make an an on
resize resize like so and we'll do
window dot add eventlistener resize this
dot do you know what that's gonna that's
gonna fail but I'll show you why that's
gonna fail in a little bit right Const
middle X now I'm gonna make the
assumption that this is always in the
middle of the screen if we have time
there might be a more generalized
version that I can show you middle of
the screen is the window in a width x by
not point five and the the y-value is
the inner height also x by not point
five something you could use here if we
were really bleeding edge we could be
using the new resize observer it is a
thing i Cowen's then they just wrote an
article about the um posting of the chat
right now I stack personal brand go read
it maybe okay it's basically an observer
that only notifies you when it resize
happens and not only on the window but
you can do it on elements so it's
basically the event for elements and
it's amazing I encourage you to said but
right now it's only in Canary
kind of lag so that's a little bit came
for me today yeah so we need the
Pythagorean distance don't we we need
the only do map now we are from there
from the middle up to the corner
whichever corner was nearest was because
it's in the middle it's always the you
know pick one and so the radius will be
the square root of mid X times by mid X
mid X plus mid Y times mid what and then
we can say this dot ripple dot style dot
width equals template true radius times
two pixels ooh put a space in pull
there's a good luck height also the same
thing that didn't work great hate it
when this doesn't work okay fine why
didn't you work oh it's cuz I didn't
actually call it awkward right this dot
on research will do it will just do it
here for now yay and also when I resize
it it breaks and the reason it breaks is
if we were to do console.log this ah and
we say what's wondering say the first
one yeah the first one says oh yeah this
refers to the flip switch but because
the second one is window dot add
eventlistener resize it goes this is the
window which is no use to me so we are
in the age of is 20 to 15 but even then
sometimes a bind is still necessary no
I'm still gonna bind this Oh Paul Lewis
way or the normal way mine let me
explain why I'm doing this that looks
hard this is basically a feature in
every episode you know I'm proud of it
I'm so proud of it it's just Ness it's
gonna be in the pop quiz is that fine
right the reason I do it like this is
because I want two things I want to be
able to refer to it by name because if I
do my tidy up which I promise when I do
push this to get up it will have the
disconnect to call back your stuff
filled out I might even move that so
they can this stuff here anyway but the
thing is I want to be able to refer to
it by name so I want to say this dot on
resize with my add eventlistener and my
remove event listener that's one the
second thing is whenever I call that
function I want this to be always
referring to the
I do not want it to refer to the window
or anything else so what I do is I take
a copy from the prototype because it's a
class that's exactly where this
currently lives on the prototype and I'm
going to take a copy I'm going to bind
it to this and then I'm going to shove
it as an actual property on the instance
itself it's amazing although writing it
basically yeah
so that then always means that no matter
what it will always refer to the flip
switch there is actually in years 2017 I
think there's a proposal for a double
colon operator clusters that would be
this colon colon on resize which would
achieve the same effect but it's not
there yet sadly it's just ringing
because I'm plugged into a monitor this
by the way it runs great when you don't
you'll see it when you play with it it's
great good hearing yeah I know okay
last thing I feel like we should have
shadows the audience does not seem to
care they don't care I'm doing shadows
okay very much I'll give it a shot shut
up two shadows hello - shadow shadow
right when did like a two pixel one and
then yeah stick with me
shadow two pixels okay it's gonna be
width thought this sounds really
familiar height 100% background and this
is gonna be a black shadow to begin with
and let's see position:absolute top:0
left:0 border-radius 50% and at a great
shadow I know right looks amazing it's
like a record no no - then that's not
the only thing I do I do a great Billy
as well I don't mind I could do though I
if you ask a question I might respond
and my best Billy
and anyway going back to this which was
not code
Paul kokis now the thing is that you
remember the container got pushed back
250 pixels and the
the handbag got pushed back another 250
pixels and they were half size which we
can confirm is 500 pixels - sorry / 500
- and in the distance they moved which
is another 500 which is not 0.5 so they
are half scaled at the moment double
negatives are too much I know but it's
true it's half size so we could put the
shadow inside the container as well but
then when that flips over the shadow is
going to go a little bit wonky so let's
not bother with that what we'll do
instead is will cheat and we'll do a
transform and we'll scale it down by
Northpoint 5 now it's hidden but it is
there right it's there but let's
translate it down a little bit translate
why - yeah just a couple so it speaking
at the bottom there it is but here's
what we can do as well we can also you
can make it look blurry by adding a box
shadow but if you get it wrong let me
see box shadow not not no now it's half
size so my 2 pixel blurry shadow it's
gonna have to be 4 pixels and we'll make
that black as well now yeah no I mean oh
you can't see that you can't see that
change the color again I need to I need
to blur it that's why someone idiot hey
yeah ah all right let me get rid of this
many numbers okay okay right yeah so
interesting question why not to filter
blur oh we have run into this problem
before I think yes filter blur why
wouldn't you use that because it's a
post-processing effect which means that
when you when the frame gets shipped to
the GPU the GP goes do I need to blur
this yes I do and if the animation is if
it's changed at all if the pixels have
changed at all it will go oh I need to
blur this and that will happen on every
frame and blurring on every frame is
incredibly expensive so it's like a
post-processing effect that you don't
want to be running on every frame it's
actually very good if you have you know
some static content that you don't and
the deceptive thing is actually that
like paint flashing will not show up no
it will because it's done out it's not
done in the taps rendering panel but
outside of it and the post processing
pipeline so it's really deceptive that
you think you have done well into the
performance and actually your friends
get really slow okay back to the shadow
you see there there is there is a shadow
but you can see that it's I've got the
hard edge of the circle and then the
shadow kicks in if you add a bit of a
spread on to this it kind of see how
it's now like a blurry shadow you could
zoom in with control and mouse wheel
rain and I don't think I can know I
don't because I don't think of the
things or the thing with the thing again
very articulate let's put that back
where it was right looking good
okay what we'll do is we'll add a
another class to this where it goes like
flipped yeah and we'll we will you know
how the those the discs let me just zoom
out a little bit more the disc goes from
like there and it's like big and it it's
like told you by 200 again well since
this was 200 by 200 when it wasn't
scaled we can just get rid of that
downscaling
so now I'll be like like the right size
it's now it goes back because if you
don't define it goes back to scale one
implicitly yeah and that means it will
zoom it gets bigger exactly let's
transition on transform again so it
moves nicely so let's do that and where
you will have to add that into the
JavaScript won't we to make sure that it
actually gets told what to do
so shadow to pixels how's everybody
doing on the chair I've been forwarding
a few questions we have 115 people by
now in the chat which is nice a can we
get to 200 I don't know me neither
family they were like 200 people in the
room with us we have enough people
actually in the room which is scary
enough now and they're watching a type
there you go oh yeah okay so that looks
kind of rubbish because the animation is
the thing is it should flip over as well
I'm gonna show the imitate next one can
let me just look put that in there we go
slow down yeah it's letting it doing a
double flip isn't it no that's not it's
not now it's obviously a lot darker than
we need a shadow to be so let's fix that
by dropping the opacity to zero opacity
from naught point three nope wait to
number three a magic number so you go to
them I am right now the thing I know
about shadows I was about to say don't
think it
later when you they do and they also get
blurrier no I don't want to change
box-shadow like I said but I know that
we could fake it till you make it
Hey for Monica yeah me Nika I'm calling
her now because she was mean to me
yesterday
because you ruined her day yeah well she
ruined my day yesterday by calling me
mean so me Nika yeah okay let's add
another shadow which will be exactly the
same as the typical shadow but we'll
make it blurrier their era and so be
exactly the same as the two pixel shadow
but we will say that it's box shadow
again we'll have to double the numbers
because it's gonna be a half size 24
pixels I'm gonna give it a a spread of
16 pixels and when its flipped over it's
actually gonna be the same deal isn't it
it is it's gonna be the same deal it's
gonna do the same transformation except
I think what we want is we want the
opacity to be zero here and then when
its flipped we want it so we want it
we're gonna get a crossfade here all
being well I'm gonna make it a point to
we actually have to animate not just the
transform though wait there should this
be shadow 4 or 2 P lives you have shadow
no I'm I'm stupid you okay yeah I was no
I was my own rubber duck just now
sometimes saying it out loud you realize
that you're wrong it's a great feature
that's why some developers have an
actual rubber duck on the desk and if
you have a problem you have to introduce
yourself to the rubber duck and explain
your problem and they will most likely
figure out what the problem is
he's my rubber duck because that's all
I'm good for you know just you you so
okay so now we're not actually seeing
what I wanted to say season it something
wrong you did well I'm easily confused
the yeah yeah I've got to set the
opacity to zero that I think yeah so the
other one is not showing up and the
reason is not showing up because in the
JavaScript we've not told it to show up
so we need it to grab hold of the 12
pixel shadow like so how are we doing
for time we have another one oh we're
doing fine we good because I'm I mean
I'm not sure where I want to go with
this eventually
this is like pretty decent yeah I guess
it doesn't like that class list of no
yeah where are you oh it helps if you
put it in the Dom poll there you go huh
can't do anything that with something
doesn't exist look at that
slow down slow down
we could totally get away with it that's
the thing like if you slow it down you'd
be like it could be better but at hammer
percent speed you can't and if nobody's
expecting it where the first time you
show somebody and they're like then I
love you mean you're like nobody
expected they like do it again you like
no no I don't at that point there was no
I don't do my tricks the seconds huh at
that point that will just be clicking
the buttons because it is actually so
much fun it is quite a lot of fun okay
how are we good Wow okay tell you what
we'll do a couple of things let's make
it so it's a customizable color hey hey
let's do color equals red which means
gone we got a question
the question was why don't we determine
the state of the shadow and the shadows
by the already existing classes an
element of introducing new JavaScript I
think it's possible but right now we
don't want to juggle all of this in our
heads or in your head specifically tiny
enough those two things that's true
there are two reasons why one is that I
didn't want to expose the class that it
was open and expanded and whatever else
flipped over on the actual element
itself
I see ideally so I had to make sure that
it was gonna be done here at this level
and now you could make a containing
elements I suppose for all of those and
then use the single class I mean sure I
guess that would work pr's welcome
exactly yeah we have gotten the
Lapierre's on the repo actually I didn't
expect on our prototype elements to get
PRS but people have don't do that it's
great so you were very welcome to join
us on the repo I linked it in the chat
good work you good you I know you don't
you did great
all right so we can set a color
attribute and we will or attribute those
some people pronounce it I've always
been an attribute attribute or an
attribute attribute attribute but then
again look I'm not
speaker so what do I know you know
plenty so what we'll do is we'll say
this color equals this don't get
attribute God and that means we gonna
have a setter and get this all zoo set
color color and let's see this car
equals color now I'm actually up to make
up to date we can use color wasn't there
some movement I said every custom
actually had to be data's - something
it's this now fine I don't know if you
know let me know in the chat because I
will actually like to know that it
seemed good
but color actually exists so it should
be fine to use right and I think font
color is actually a fun tag with color
actually exists this is gonna item this
is gonna be fine
it's always gonna work yeah the problem
is I put red in here but I could be like
I could put whatever I want in there and
you know what we should actually totally
handle that situation if we're gonna do
this you do that so yeah I was thinking
about this and I was like do you
actually pull you know who's like really
good about you know checking colors that
you give to the browser the browser is
really good at it so I was like why
don't we do like Dave yeah yeah and then
I can be like div dot style dot color
equals color and then if the div dot
style dot color is empty because they
didn't like it we could do like console
dot one and be like
color not a color color
doofus well done passive-aggressive
warnings this is what we call it British
consul right well done you
mmm-hmm any other great suggestions
she'll probably delete now keep it if
the style call is empty or just didn't
like it otherwise they stuck and then we
can do this dot style set property move
set property and then we could do that
color that I did before and then we can
do : ah I did not know about set
property so all being well oh we didn't
like it
I um did it warmly oh wait it was like I
left it as yeah well done Paul are good
all right let's get came right back to
bite you really good I like that
oh you go it's red oh it's red there we
go that worked out just fine for us and
if we don't have anything at all it's
going it's gonna say no is not a real
color which again it's a bit over the
top so we can do is just say if there's
not a color I should put it if there's
not a color yes it's called a day that's
fine so our default color is going to be
the one that is actually in the style
spec yeah it's the Rebecca purple and
then if you set it now I suppose what we
could do as well is if you change the
attribute we could just say if the
attribute that you change is color lose
the switch-case future-proof it actually
we now just return we know what color
equals new value now that will do
absolutely nothing and the reason is i
haven't told it to listen for that so if
I do dollar zero dot set attribute color
red it's gonna you think that would do
something but because you managed it
earlier I did the attribute change
callback does rely on this observed
attributes so if we do playlist
yep and we do that we're done that's
what all right how we doing for time
about five minutes so then I can make
the work with multiple ones I was about
to ask about the no because we're doing
the the good old flipping thing throws
this things there in the Dom but on the
screen about the accessibility yeah no I
think if you're gonna do something as
overblown and ridiculous as this in
production you would want to watch first
of all rob Dodson's inert polyfill Ally
casts episode which is brilliant
get hold of the inert polyfill and make
sure that as the animation finishes with
like a transition end you'd set
whichever side is not visible to inert
which basically tells the browser you
shouldn't be able to tap into this it
shouldn't show up for screen readers no
because right now you could tap to the
for buttons on the back even though
there even though we can't see them you
can still get to them which is bad so
expect by the time this goes to get up
expensive added the you know to polyfill
but I've just posted that video in the
chat I wonder why the hero
say like that color equals one
II a three to six that's sir that's
creamed and if I mentioned that there
you go now the thing is you remember
back back when I said that if we were
going to assume that the the ripple was
good yeah so that's not working anymore
now and also while I'm here it's quite
no because actually feel like I want to
click on the the ripple to get rid of it
so let's just I didn't notice how
quickly just added another one because
custom elements that's so good so good
alright let's do that and we'll do if
you click on the ripple so now if I do
that now there are two problems one is
that when you click on the green one the
purple was still visible which is bad
and secondly that ripple isn't big
enough
so we'll fix both of them and we'll fix
them in turn and what I'll do just to
make my life a bit easier right now I'm
going to do the flip switch and I'm
going to add a modal class and I'm going
to put a 0 index of it of
one and then what I'll do is in the
JavaScript I will say when you do a flip
we'll say their stock classlist
dot move the art modal fingers are
getting tired I know right all the fast
typing there we go
so that will then zap it over the top of
that but it's pretty that was up it over
the top of that but the bad news is they
both got the mobile class on which means
that we're back to where we were so now
what we need to do is in the add event
listener what we can do is we can say
this stock container add event listener
hello had event listener and we'll say
on the transition end the transition
very underrated event it may have been
is really good we will say if this stock
container that class list that contains
which is also incredibly handy flipped
so if this is the one that's actually at
the end of it so there are two
transition ends one when it flips
forward one when it flips backwards the
one where it flips forward this cluster
is going to be that's going to be true
that if statements so we can just return
other than that we want to say this dot
class list don't remove modal because
it's gone it's the one that's when it's
gone back okay so we should see all
being well yes good yes no longer broken
that's good that's one out of two while
I was no even for it wasn't broken it
wasn't originally unfreezing if that's
broken okay right let's do the other one
very quickly one minute to go the thing
about this on resize is is that it
assumes that we're in the middle of the
screen which we aren't so first things
first
the problem is we also call it here in
the constructor which is a bad place to
be calling it because by this point it's
not actually been added to the screen so
we if we call that if we called it on
resize and we're trying to figure out
where it is actually on screen it's not
going to work out too well for is what
we want to do is we want to do it in the
connected callback when it's added to
the Dom in this case we'll request an
animation frame which basically says
wait a frame until this thing is
definitely being added to the screen to
the Dom all the styles and everything's
figured out everything's up and running
and then call the research so that's one
thing we're definitely gonna want to do
now in the resize itself
well midex amid why are no longer the
middle of the screen so don't Const
our position equals this get bounding
client rekt which is one of my favorite
ever api's has been around for ever and
it basically tells you where this thing
is on screen its width its height its
left its top it's right at the bottom
it's brilliant but be careful it does
force makanda if you've got pending
Styles you've made a change to your
classes or your styles and then you call
it the Browse has to go hang out of it
and you're gonna apply all those styles
and then I'm gonna run layout and then
I'll tell you where everything is on
screen so be careful with it in this
case all your reads get all the
dimensions then do all the Dom changes
class changes bets your reads bet your
rights
exactly and in this case I know there's
gonna be layout post a resize anyway so
I can afford to do this so me here so do
position dot left plus position dot or
width
yeah that'll take it to the middle of
the box and the same is also true for
the top and the height now the good news
is that will sort of work for this one
look at that but it will work for this
one because it's near in the top-left
corner than it is the top right corner
and so we actually want to account for
it which were everyone's the max do you
see what I mean we only gonna go you're
going for that that the left corner
other whichever one you're nearer is the
wrong one go for the other one so we can
do is we can say let's have two new
variables cuz why not
Rx equals math.max mid X or window dot
inner width - max no no no no mid X
there we go
saying us from for y Y here we are
height - mid Y and then our X Y is that
all makes sense hopefully maybe you do
the math there you go
one two looks good they both work
they're customizable we've done some
showbiz we're all out of time thank you
so much for hanging out with us</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>