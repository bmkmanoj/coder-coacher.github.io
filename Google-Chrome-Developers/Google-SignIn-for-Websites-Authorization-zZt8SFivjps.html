<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Google Sign-In for Websites: Authorization | Coder Coacher - Coaching Coders</title><meta content="Google Sign-In for Websites: Authorization - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Google Sign-In for Websites: Authorization</b></h2><h5 class="post__date">2016-03-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zZt8SFivjps" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">
EIJI KITAMURA: Hi, everyone.
I'm Eiji.
In a previous
video, we've looked
at implementing authentication
using Google sign-in.
In this video, I will walk
you through implementing
authorization and
making requests
to Google APIs from a
client and from a server.
Before moving
forward, let's discuss
the difference
between authentication
and authorization.
Authentication means to
identify who the user is.
And the authorization
means getting permissions
to access an API on
behalf of the user.
In many cases, these
two steps occur together
where people sign in and grab
permissions at the same time
without knowing how
these permissions will
be used in the future.
Our current recommendation is
to let users authenticate first
and defer asking
permissions until you
need to access an API.
In order to use a
Google APIs, you
have to enable them from
the [? BPI ?] console.
Then looking at this page,
you can find the scope strings
that correspond to the
APIs you have enabled.
Each one of these
represents an API so
take note of the ones you need.
Now you can make requests from
the client or from the server.
Let's look at the client first.
There are two steps.
You first need to get a
permission from the user.
Check if the user has already
granted access to the API
using hasGrantedScopes.
Otherwise, request the
permission by calling grant.
Use the scope strings you
obtained in the previous step.
Once the permissions
is granted, you
can make API calls on
behalf of the user.
To send a request to the
Google APIs, you can use gapi.
For example, if you want
to use a Google drive
API at the client
module, then drive module
with the API version.
Using client drivers is simple.
In this case, I'm grabbing
the list of files and folders
in the users root directory.
OK, let's see how we do the
exact same thing on the server
side.
Getting the user's permission
happens on the client side.
Use grantOfflineAccess
to get a permission.
Offline means that
you can access
Google APIs even when the user
is not using the application.
Upon user's consent, your
client will receive an object
that contains authCode.
And now, you can send
the authCode over
to the server using a
secure HTTPS connection.
On the server side, use a client
library to exchange authCode
with a credential object
which includes access_token,
request_token, and id_token.
The access_token
is a primary key
to access the user data
through Google APIs.
The refresh_token is a key
to renew the access token.
An id_token represents
the authenticated user
as I mentioned in
a previous video.
Remember that the
client libraries
take care of refreshing the
access token if it has expired.
For this reason, you should
store the credential object
in your database
after each request.
This ensures you always have
the latest credential object.
Once you've got the
credentials, you
can make API calls by using
the [INAUDIBLE] APIs client
library.
OK.
So we have gone
through the steps
we recommend in order to use
Google sign-in effectively.
If you have any
questions, ask them
at stackoverflow with
a tag Google sign-in,
and we will do our
best to answer them.
Thanks for stopping by.
I hope you will enjoy coding
a smoother sign-in experience
for your users with
Google sign-in.
[MUSIC PLAYING]
</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>