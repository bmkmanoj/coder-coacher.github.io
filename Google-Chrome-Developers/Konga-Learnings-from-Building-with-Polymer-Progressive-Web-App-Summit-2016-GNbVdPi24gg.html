<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Konga: Learnings from Building with Polymer (Progressive Web App Summit 2016) | Coder Coacher - Coaching Coders</title><meta content="Konga: Learnings from Building with Polymer (Progressive Web App Summit 2016) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Konga: Learnings from Building with Polymer (Progressive Web App Summit 2016)</b></h2><h5 class="post__date">2016-06-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GNbVdPi24gg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">who here enjoys deploying production
changes late night last minute on a
Friday night
well you really shouldn't I certainly
don't and neither does my team so we had
to break some rules to be able to join
you here at the dev summit to be able to
release our progressive web app just
before just in time so hello my name is
Andrew and I work for a company called
conga and I'm here today to tell you a
little bit more about our new
progressive web app conga easy so let me
find my clicker so what is conga
so Kong is an online shopping website in
Nigeria a leading one and we have a
product catalog consisting of products
from our marketplace so we have our
merchant partners who manage an upload
and manage inventory and orders etc in a
separate system and so it's consisting
of marketplace products and retail
products our own in-house retail
products so we currently operate in
Nigeria but our mission is actually to
become the engine of trade and commerce
in Africa as a whole that's on our
mission statement so we have teams based
in Lagos Nigeria and in Cape Town South
Africa and the main reason I enjoy
working at conga is that through
business service and technology we
actually make a difference to people's
lives we add value and we can see these
changes on a relatively easy easy scale
so we offer support to SMEs and provide
a wider selection of products to
consumers and customers and we're
actively making a difference to these
people it's not a large amount of brick
and mortar shops so for consumers to be
able to have access to this to this
product selection makes a difference I
would like to extend a serious thank you
to the awesome team of technologists
based in Cape Town in Nigeria and I'm
extremely proud of the work that they've
done over the last couple of weeks it's
been an extremely short period of time
and I'd like to say a big thank you to
them so I'm going to tell you a little
bit about the Nigerian market and the
network infrastructure there it's not
normal not simple there's about a
hundred and eighty five million people
in Nigeria and of that number about
about a hundred million Internet users
this is a difficult number to to manage
because Nigerians are known for multi
swimming so they'll have multiple SIM
cards and the reason for doing that is
because the telcos that
telecommunication companies have varying
rates and varying network coverage so
that's probably not a very unique number
but of that we have a high mobile
penetration eighty percent and here's an
interesting stat that 65 64 percent of
all traffic in internists in this areas
is being served on 2g and actually about
15% is being served on the edge network
and which leaves the remaining 20%
that's being served over Wi-Fi and 3G so
you can see this is relatively
problematic and I'll explain why in a
moment
so Nigerians fantastic people there
particularly price sensitive so they're
willing to sacrifice almost any other
aspect of a product in over price and
and this is a source from McKinsey so
besides being price sensitive this
obviously relates to being data
sensitive and obviously there's an
Associated cost with data and these
numbers are not particularly correct I'm
just trying to paint a picture here so I
don't quote me on these numbers but
imagine if the the the minimum wage in
Nigeria about 18,000 naira or more or
less 100 100 US dollars per month and
imagine the cost per megabyte of data
and of Cydia it's 0.5 but I know it's
actually recently it is coming down and
I look forward to it reducing further
but the picture I'm trying to paint here
is the fact that you know there's a
non-negligible amount and a significant
percentage of that monthly wage could be
spent on downloading our app and this is
something we would like to mitigate so
we also have mobile traffic very strong
mobile traffic iOS and Android apps so
besides that if you just look at our web
traffic and we have a responsive web web
application our current traffic is
sitting at about 60% mobile or mobile
web and about 5% tablet and the
remaining is desktop so you can see what
our customer base is actually quite
focused on mobile web so why progressive
web apps I think it's actually quite
simple it's actually really really well
suited to our to our use case so right
now and traditionally you know we've
we've had about three and a half years
of operation and in that time we've
built a responsive web design a
responsive desktop application and it
works really well on Wi-Fi and 3G as
you'd imagine but I guess if you look at
2g networks and the average transfer
rate on our CDN it's sitting at about
250 kilobits per second which is
obviously not ideal if you're trying to
download a homepage for the first time
and it sits at two-and-a-half megabytes
you can imagine how long this takes for
our users so that's the first area that
pushed us into progressive web apps
the native apps so one of the major
problems is we're a start-up and we're
changing our business model pretty
pretty pretty fast so in these
environments it's very difficult to
produce a native app and expect that to
last the duration of our business model
so essentially be changing features all
the time and every time we make a change
to these features or to these apps we
have to release a new version and with
its with this new version comes an
upgrade cost and our users are that they
don't want to upgrade well they don't
want to spend 15 megabytes upgrading the
app so what we've what we've ended up
with the result is a long list of
versions that we can't really support
and the users refuse to upgrade so and
then finally these these native apps are
pretty much thin HTTP clients so they do
work under sort of degraded networks but
it's not really built with offline first
in mind so we could have gone an
incremental route or should we go from
scratch and it just coincided it just
happened to coincide with something else
that's going on in our engineering
department which is a replac forming and
so at this moment we're actually
breaking down our monolithic ecommerce
application into a bunch of smaller
independently deployable independent
scalable microservices so this is
actually the focus of our engineering
department at the moment so we started
with a complete mobile web redesign so
just a design optimization and a lot of
these improvements have come from this
redesign phase not not only from
progressive web app technology but also
from the fact that we looked at our
design and said okay let's stop serving
800 Caleb kilobyte images to our users
so the focus was on clean and simple UI
as well as a slick customer experience
the user experience so we design
features and applications as a whole
with an offline first approach so we
looked at a bunch of different areas of
the application and decided to to build
us with an offline first in mind so we
started with an app manifest so that's
the first thing we did when we move to
progressive web app and it gives us the
ability to add the app to home screen
and to launch it in standalone mode and
then as you can see here we have a
little coach mark and and and an action
fault a call to action and then the next
thing we did was added a serviceworker
and we use this as a network proxy and
it gives us control over the network
layer and we utilized the service the
service worker to cache all resources
and requests that come through it before
before it hits the network and we use
the fastest cache strategy this ensures
that our app content renders quickly and
even during intermittent network
connectivity or a completely degraded
network so there's our first two things
we we added an app manifest and a
serviceworker the next part we we
decided to use the application shell
architecture to load all app static
content and data on initial load so we
cache them and then only after they've
loaded we render them to the user so
yeah the shell architecture consists of
HTML CSS and all the JavaScript we
require to bootstrap the site excluding
all the user data so other than that the
app manifest a splash screen we also
added our own splash screen that we we
basically show that until all of that
that content is loaded and then release
that and render it to the user
so the other thing we've done with the
app shell is we've
all connived all of these components
into a single file so when the site
loads we reload the entire file first
before you render it this prices contact
concatenates all custom elements into a
single file so all of our custom web
components as well as the parliment
components and third-party components
are all compressed into one file and
something that we get out of it is very
simply we get some extra linting some
optimization as well as the minification
of our of our resources the next part of
our app journey was looking at the
background sync API so this really suits
us well for for analytics and tracking
of offline actions and there's another
element to this that we're very
interested in using and that's the idea
to provide some sort of offline checkout
capability so the problem with this is
imagine I'm offline and I'm looking at a
product how can I guarantee that that
price and that stock quantity is
available at the time that that
background sync event happens and it
sends an action to the server we can't
really guarantee that so that's
something we're working on we're looking
to to innovate in this area and
hopefully use background sync to provide
a solid offline experince card
experience so with polymer we pretty
much went with a bare-bones approach we
avoided third-party libraries in order
to reduce the app size and focus on
speed we chose to use plain JavaScript I
think it's quite quite common knowledge
that plain JavaScript can outperform
third-party libraries so we didn't
include jQuery or angular or the like so
we also declared we ensured that we only
declared properties that were used and
try to focus on reusing JavaScript
functions where we could so it's a
pretty bare-bones approach to polymer so
some of the practices that we followed
we tended to use reusable web components
will be both some of our own custom
elements and the challenge that we had
was when we have to fully
find each element before we use them and
control its scope and we often found
ourselves in situations where elements
were being forced to to be reused but
ended up performing different actions
that they were initially tended for
that's one of the one of the areas that
we struggled with and then quite simply
we used we managed packages using NPM
and dependencies with Bower and we
decided to lock down all of these
dependencies to avoid introducing errors
into our staging and production
environments and instead both those
checks into our build process and sort
of manually manage that that dependency
upgrade piece then another thing is that
we did was we well and we're still
working on it is a custom web component
repository that we manage with power and
some of the some of the pieces that
we've figured out here we hope to roll
out to other areas of our of our
applications and on our on our systems
so hopefully we'll be able to use these
web components across projects and
manage that with bharwa so some of the
major obstacles I think we've all heard
about some of the challenges supporting
Safari and I think we've made some
really good progress I'm not going to
explain all of that today but we will
continue and I think we'll probably get
that right pretty soon and so one of the
largest things one of the obstacles I
wouldn't really call it an obstacle it's
more like a challenge is the learning
curve of moving moving from normal web
development to progressive web app sort
of technology but even more so we had a
resourcing issue so all of our web
developers are building certain projects
at work and the only team that was
available at the time to look at this
was on native engineering team so these
are experienced engineers senior
engineers who've been working on iOS and
Android for for a long period of time
and I tossed them to build this
progressive web app so you can imagine
their initial concerns but I can say
they led this engineering effort and I'm
very proud of what they've done making a
switch from compiled some native app
environment to to web development and I
think we've had a fantastic results come
out of them so well done to them
so we had some problems with modularity
of web components so you normally need
to just define a style for for for a for
a specific component and whether to do
it you know for specific ones or global
or global rules so this is kind of
something that we struggled with and
we're still working through and I hope
to figure it out over the next couple of
weeks and then finally here's a
swearword in our office at the moment it
is cross-origin resource sharing and I
think some people would probably agree
if you're sharing resources across
domains and across systems and different
services it becomes extremely
problematic so if I could make a
suggestion to teams that have that
shared domain within their systems I'd
probably spend quite a bit of time
preparing to mitigate against against
this kind of thing and we always end up
deploying something to production and or
not to production to staging and it just
doesn't work and you know 9 times out of
10 it'll be a cause issue and I'd like
to explain more about obstacles that we
face during this journey but the honest
truth is the obstacles the real
obstacles we face were internal ones not
really major obstacles moving towards
progressive web app and yeah so as I
said late night Friday late Friday night
deployments we deployed our beta version
this last Friday just before I flew here
and this is a sneak peak we decided not
to release to all of our public we're
actually a very highly transactional
website and we didn't want to destroy
all of our revenue at once so what we
did was we decided to we hand-picked
very specifically 50 users and we're
currently going through I guess we can
call it an a/b test so we're just
presenting this new web application to
50 of our customers and we'll probably
add more as we go and get will be
gathering metrics and making changes as
we understand more about the app and
more about the the users on the app so
it's live so here's some of the initial
results which I'm extremely proud to
present and the reason why I'm so
excited about it is because you can
actually see these this effect on our
customers and I wish I could explain
more I think you'd need to sit in in
some of our usability tests and you'd
understand so I think one of the
excerpts I'm taking from one of the
usability tests I'd seen was a user he'd
search for something on our website and
it seen a big list of you know an
infinite scroll of products and as he
was scrolling through these products he
was exclaimed
I can't scroll like this it's costing me
too much money which is you know a
serious indication of how sensitive
people are with regards to data so the
first thing that we achieved out of this
is for the homepage well it's not very
difficult if you think about that
original image I showed you with seven
images in a slider each at 800 kilobytes
per image so I get again this is a large
optimisation came from a redesign not
not only on on progressive web app but a
big component of it is so 92 percent
less data on initial load and most
importantly 82 percent less data to
complete a first transaction so you know
the mindset is I'm shopping on your site
it's costing me money to be able to
check out on top of the actual order
order value so I'm excited to be able to
present this to our customers it's not
shopping for free but that 82 percent
less cost yeah so that's what it looks
like as you can see I'm just showing you
the the previous design as opposed to
our conger easy progressive web app very
simple very clean it's like their before
and after picture and you know this is
another before and after picture it's
not that we were actively looking at
these metrics I'm assuming that we will
start to to seriously look at these
pieces but I just happened to catch it
before and afterwards then I don't know
why the PageSpeed score went down I'll
have to go and investigate what happened
there but the page load time and this is
obviously sitting on a wired connection
I don't know where GT metrics servers
are but they're they're obviously wired
to get a 5.5 second home page load time
and we've gone down to 1.2 seconds and
more importantly a 2 megabyte home page
is now being served at 140 kilobytes and
as you can see the 151 Network requests
have become 9 so this is this is
something I'm excited about and
another area that that we're preparing
for we didn't really struggle with
migrating to HTTPS because we'd been
preparing to go to HTTP 2 which is a
prerequisite so at this point you know
this is something that we didn't
struggle with but I'd urge people to
take that that that dives specifically
for some of the gains that are coming in
HTTP 2 so here I'm going to show you
five major areas of the application that
we focused on in terms of an offline
first experience the first one is is the
catalog experience so as you've seen in
other applications it's possible to just
cache all of these requests and
responses with serviceworker cache or
even in the IDB database and so what you
can see me doing here is browsing and
what happens when I switch off the
network is a little pop-up comes up and
it says hey you're offline click here to
be able to browse offline and it takes
you to our account section and you can
click on your recently viewed items and
and see all the products that you'd seen
so it's aggregating all of the the
catalogue data that's been cached and
pre presenting it to the user the second
the second feature is our wish list so
we've we've depicted it as save for
later and the idea is that you've saved
these products on your device you surely
should be able to view them at a later
time and you can just see me here
switching off the network and being able
to navigate to to my wish list to my
saved items so that I can shop even when
the network is down or not shop but at
least continue to view these products so
can I have a can I have the audience
raised their hands has anyone ever added
any livestock to cart okay well if you
haven't added any livestock to cart you
can now come to to conga and this is not
an uncommon thing actually
so I've personally done so and had had
livestock delivered with with a bow a
bow tie delivered right to my doorstep
so I'm trying to show you four three
three features here caught profile and
check out and you know what I'm trying
to show
you hear is I'll wait for it to move
forward but what I'm trying to show you
is here here's I'm in an online state
I'm searching for a live goat and I'm
presented with a response obviously this
is a search result so I don't need to be
online for that I find my product and
let's imagine the network dies and you
know initially I wouldn't be able to add
to cart' it if it specifically was an
API call but in this case we've moved
all of our logic client side and we're
controlling the user experience and and
that that entire journey on the client
side so I'm able to add to cart' them in
this case add a goat to cart and I'm
able to continue viewing my cart viewing
viewing all that the the the price and
the state of my cart in an offline mode
and right now in the in this specific
screengrab I'm just showing you our
current offline checkout have mentioned
some changes that are coming to that
that checkout process but instead of
being able to checkout it sees I'm off
in an offline state and it allows me
just to call to order and we have a team
of customer experience representatives
waiting for for for offline checkout so
what's next for for conga easy as I said
we're in a beta mode we're parently
collecting data and UX metrics and
hopefully depending on what we find
we'll make a few more last-minute
changes before before releasing to the
wider audience in Nigeria we're going to
continue to solidify our offline
capabilities I've shown you some
features and we're hoping to apply that
approach to all of the components of the
application and then as Owen said
yesterday we have started and I'm on our
push implementation but we're going to
implement timely precise and relevant
notifications quite shortly
the final part is obviously to continue
supporting all browsers and I'm very
excited to see so many vendors here
today and I'm looking forward to being
able to produce a consistent progressive
web application to all of our customers
thank you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>