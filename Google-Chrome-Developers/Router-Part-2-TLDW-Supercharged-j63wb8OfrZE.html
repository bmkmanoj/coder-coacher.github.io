<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Router Part 2: TL;DW - Supercharged | Coder Coacher - Coaching Coders</title><meta content="Router Part 2: TL;DW - Supercharged - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Router Part 2: TL;DW - Supercharged</b></h2><h5 class="post__date">2016-07-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/j63wb8OfrZE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to this supercharged
TL DW the sort of beard free version I
don't know what happened to the hair
just it abandoned me like the stuff up
there well last time summer and I took
the routes that we made two sessions ago
and turned it into a more advanced
Reuter let me show you what we did so
you can see on screen it's not vastly
different from last time except that now
we've got this spinner and then the
content fades in but actually under the
hood a bunch of things have changed
let's talk about that oh they're in
theory corner hello welcome to Theory
corner good of you to join me that's
probably because I asked you to don't
worry about that anyway the Reuter is
pretty much the same as last time except
last time we had one index page which
had all the content in and no matter
which URL you went to we served you the
same index no more what we've done is
we've broken each of these out into
their own individual pages that means
when we deep link we're just going to
show those individual pages but we can
enhance with the JavaScript so what
happens if you go to the about page is
that we leave placeholder sections if
you like for contact misc and home and
then when you choose one of those we xhr
or fetch it's your choice I chose xhr
for reasons that will become clear
we xhr or fetch them in and we populate
them dynamically and while we're waiting
we show a spinner all make sense
good let's go look at some code welcome
back to the cody bit
I love code who doesn't yes now the code
well in fact as I said over in theory
corner not a lot actually changed inside
the Rooter in fact most of our changes
have happened in the HTML and in the
view so let's have a look at the HTML so
this is what it looks like in the main
index you can see we still got our SC
view which is the custom element for the
view but we have now added a visible
class for each individual area that's
visible in this case the visible area is
home and we have these placeholders like
we talked about in theory
for the other views but you'll see
they've got this additional attribute of
remote on them which we're going to pick
up in the JavaScript while we're also
here it's worth noticing that if we
notice that the view is remote we have a
before and an after that before is a
solid color block which is in his color
is inherited from the parent and the
after is this spinner graphic that you
saw right at the start well how does it
all come together well for that we need
to look at the view so our view is
pretty much the same as it was and you
remember from last time we have
something that returns a new promise and
we just add the visible class and we
could fade it in which is fine because
all the content lived inside one page
but now we're gonna load it in remotely
so what we do is we say if this is
remote which looks for that attribute
the remote attribute on the view and
we've not loaded it in before loaded in
so that then says well what does the
load in code look like great glad you
asked
the code looks like this we have in our
case an xhr now why not use fetch that
will be a fairly obvious thing to do the
reason is you can't fetch in a document
you can xhr in and say the response type
is document but for fetch the best you
can do is get text and then pass it to a
Dom parser sort of new Dom parser parses
text I think it is and you tell it it's
HTML not quite as convenient in my view
there's nothing wrong with an xhr so
let's do that and so what we do is we
create our xhr we set the response type
to document and then what we do is we
look at the the URL that we were trying
to get to and we basically xhr that in
and whatever we get back from the server
side is what we're going to work with so
you'll notice inside there we query out
the visible view so for example if we've
requested the about page then the
visible view will be the about content
then what we can do is you can see we've
got this this dot underscore view and
you might be wondering what's that I'll
just look a little bit further up you'll
see it's a document fragment so it's a
bit of detached Dom that we can work
with so we create one of these detached
Dom fragments basically and we populate
it with whatever we managed to pull out
from the view that we loaded in remotely
so we populate all that and then you
see that we append it to this view after
that there's just a bit of bookkeeping
you remember I mentioned those the
before and the after with the spinner on
well what we do is we start as soon as
we call in to the load view we basically
say set a time up for half a second if
we get to half a second we're going to
show that spinner if we don't get to
half a second no big deal we'll just
show the content but if we do you'll see
here we've got the the show spinner
which turns on the opacity and then when
the contents actually loaded we can
clear that time out and we can also hide
the spinner which will cause it to fade
out and that will reveal the content
behind so there you go doesn't look like
a massive amount of difference for the
user but it's a huge difference for us
and it's actually a very positive
difference because it's allowed us to
have progressive enhancement we can now
get to those URLs without any JavaScript
we've switched on and we can
progressively enhance into a more
advanced Rooter from there so there you
go brilliant stuff don't forget to check
out the live stream if you've not had a
chance it's about an hour long in fact I
think you've slightly shorter this time
time-saving for the wind cool don't
forget to subscribe and let us know what
you think in the comments below thank
you so much for watching and I'll catch
you next time who doesn't love a live
stream I love a live stream you live a
live stream let's all watch the live
stream great our tap tap tap please know
subscribe winning</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>