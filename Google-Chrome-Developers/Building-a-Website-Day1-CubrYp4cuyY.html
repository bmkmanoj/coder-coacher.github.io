<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a Website #Day1 | Coder Coacher - Coaching Coders</title><meta content="Building a Website #Day1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a Website #Day1</b></h2><h5 class="post__date">2016-09-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CubrYp4cuyY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the very first
diary entry thing I think so
ah today was actually the first day I
actually started coding on the dev
summit website and actually spend a
pretty good day I took the stuff that we
did last week in the supercharged
livestream which was servers doing the
server-side rendering because I know I'm
going to do a bunch of server-side
rendering for the chrome dev summit
website what I need to do is I need to
in the next time I recall one of these
I'll show you the designs as well so you
know where I'm headed for now I just
know I've got to get infrastructure set
up so I figured I'll show you a little
bit around what I've got going on which
is it happens will involve looking at me
having written the word index apparently
that's as far as I got today okay I've
done more than that let me let me jump
across to the code so mostly mostly
mostly mostly we have a Travis Gemmell
file setup what I've got is this is a
bunch of stuff to download and actually
host the App Engine thing I'm also
installing lighthouse because it's a
progressive web I thought it's going to
be one I want to make sure that I'm
doing the progressive web app things and
that's exactly what lighthouse can do
for me so I have lighthouse it then gets
a copy of Chrome it starts that up and
then I basically ask it to run
lighthouse against the dev summit site
and then I basically do a bit of a quick
validation which I'll show you is in
here
and all I'm really doing is I open up
the JSON file that lighthouse is
spitting out and then I have a look
through it and basically look at the
progressive web app bits and I just
added up and divided it and if I'm below
naught point eight I just fail the build
and because I've got a manifest in there
which I'll show you and because I've got
a serviceworker in there I'll show you
I should be mostly okay it'll only be if
I break something like that or if I have
a performance regression maybe actually
no that won't be caught I should add
that in that it will it will throw so
that's basically that
there most of the day has actually gone
into the Python stuff and it apparently
wants me to install go away right which
mostly is this anything that's dev
summit slash whatever I pick up and in
the get here we are I basically look at
the URL and grab whatever I think it is
which is like if it's a static file I
basically grab that file directly which
you can see is actually just assumes
that it's a straight one-to-one match
and I set those to cache for a year and
then if it's not a static file so it
doesn't begin with slash static then I
basically at the moment I serve up the
single index.html J is almost certainly
going to change to be per section but
it's fine right now and I set the HTML
to not cache so while static files are
caching for a year public no cache on
the HTML means that the HTML will always
be revalidated
and I'll come back to the hashing in a
moment and then if it's the
serviceworker i'm even though i serve it
up from static scripts swgs i want to
appear at slash dev summit so it can
scope and control that whole thing so
that all is working actually let me show
you it over here and the network tab
from that the da dev summit is there's
the thing headers it's got an e tag
which are you also set further down in
the script public no cache which is
exactly what I wanted and then there's a
JavaScript file which has the max age of
a year that is pretty much what I want
it and you'll notice by the way that
there's this big long hash in the file
name and that is because if it's going
to cache it for a year I need a way to
invalidate it if it's always called like
CD SJS then that's not going to work out
because even if I update the file it'll
still use the old cached one so I use
hashing to make sure that if the file
contents change the HTML will get a
different path in it and then it will
basically cause the file to be
re-downloaded which I do in here
footer the footing see me actually doing
it I basically take the path that I'm
actually interested and I pass it
through a filter called add hash which
is in the Pythian that down don't there
we are
and that basically reads through the
file updates the hash of a char 256 and
then substitutes in into the file so you
get like CD s Bluebook j s that little
bit was the thing and then on the other
side we basically remove it so that goes
back down to CD s J so whatever the file
is that I'm actually interested in so
that means that I've got kind of built
in hashing which is working just great
so if I change files they they update
last thing I was going to show you I do
have a couple of things one is the
manifest at jason which is already
filled out with all the chrome dev
summit stuff which is good and also the
serviceworker
which is the lightest weight
serviceworker that you can pretty much
do which skips waiting when it gets
activated it claims all clients and on
fetch it responds with a fetch of
whatever you asked for so it's kind of
like a pass-through and I've done this
mostly because I want to get the
lighthouse score high enough that it
would be you know it would fail a build
if that if there was a regression so
it's kind of like a pass through and I
discovered a chrome bug in the process I
should show you the chrome bug right you
want to see the Chromebook all right let
me show you the chrome bug I think it's
CR bug comm six four eight two zero
eight that's that's a guess I got the ID
right I only did that are basically
there's a siren there's a siren outside
that's London right I've basically
discovered that if you set a page to be
offline in dev tools and then you make a
request that goes virus service worker
the service worker will still be treated
as online even if dev tools is set to
offline I think that's a bit weird I
think either chrome should say that
Network throttling affects only the page
and not anything like a service worker
or and this would be my preference I
think we extend the network throttling
to include service worker so even if a
service worker
makes a request it would be requested
with 3d problem is a service worker can
service multiple tabs and so which one
does it take it I don't know it caught
me out I filed a bug we'll see how that
one pans out so that's pretty much my
day today that has been pretty much all
I got done still pretty good I mean I
could show you in lighthouse send up for
another time I've already taken up
enough of your time oh no hey now you
can subscribe and you'll get more of
these and obviously it's going to get
more exciting as we get into the zone
but I've got good good start got good
cashing her serviceworker got a manifest
and I got a Travis file in there to do
all the building type stuff with
lighthouse so we're off to a good start
day one winning
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>