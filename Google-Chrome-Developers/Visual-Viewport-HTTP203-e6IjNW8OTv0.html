<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Visual Viewport - HTTP203 | Coder Coacher - Coaching Coders</title><meta content="Visual Viewport - HTTP203 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Visual Viewport - HTTP203</b></h2><h5 class="post__date">2017-10-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/e6IjNW8OTv0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">recently I I was asked to write an
article about the visual viewpoint API I
thought of the viewport as basically the
the rectangle of topic and try and
document the the the subsection that you
can see right right okay good and that
was that was kind of how things started
on mobile yeah as well like we had that
you know the idea of a whole document
and in a viewport we're just a bit
you're looking at but what Apple decided
us to to have this extra viewport so
when you pinch zoom in you know how in a
viewport inside the viewport
that's very inception it wins again so
here's the thing and this is how a lot
of browsers implemented err first is a
like position fixed items would sit on
the viewport right if you if you
position something fixed on top it's
it's you know wherever you do that on
the viewport so you're scrolling along
it would still stick to the top and it
gets bigger and you know and eventually
you can't do your position fixed items
if you have this and now taking up write
the whole screen and this is something
that I think Apple pioneered is the idea
of adding multiple viewports okay and
names we've given them is the layout
viewport is the outer one and now so
what's that's kind of the outer scroll
view part of the document and that's
where the position fixed items will
stick to and when you pinch zoom in
you're now in the visual viewport
okay so it doesn't mean though that a
layout viewport only moves vertically
because layout and it's wider than your
layout viewport so move both directions
yeah yeah okay you can think of the
layout viewport as being the same as the
visual viewport when you're zoomed out
as far as you can go one of the problems
that a lot of mobile browsers had is
they couldn't decide
viewport the value should be four so one
of these ones is get pounding client
rekt oh then yes I see that would be a
problem because usually those are the
coordinates of the rectangle of the
object you're calling that function on
screen but now on screen huh
right right and most browsers agreed
that that was going to be to the layout
viewport so pinch zooming I would agree
right but then most browsers also agreed
that scroll top would mean the visual
viewport
really right yeah exactly
and this had it doesn't seem that the
visual part is like a complete abstract
you slip viewport in place layout and
then the visual view produce just
basically a visual trimming of whatever
you laid out exactly and that's what
that's what browsers are now trying to
do yes we're trying to get yes you've
come up with the correct answer
unfortunately you're too late other
people already know and they're
implementing it and this is planned an
agreement between chrome and Apple
agreeing as well so one of the things
you would do with get bounding client
rect is you didn't want that position
within the viewport you want into
position within the document
I was just about to say and then you
need both scroll top and get burning
client rec to be layout viewport because
then you can just add the two up right
and find the position in the document
which is super important which I just
recently ran into because sometimes you
want an element to detach from however
its laid out and position it absolutely
but relative to the document right
because you want an animation exactly
and that's where you need to be able to
do that kind of math I guess if we had
chosen the other way it's all relative
to the visual viewport would have
probably added some calls to get to do
the calculations in there right well
that's unnecessarily complicated so I'm
really happy they went that way but the
web is full of this code now that that
is doing that
you know get bounding client rect +
scroll table which breaks as well as
would assume yes true oh yeah people
have broken the web yeah exactly so this
this is
going to this move to making everything
the layout viewport is actually starting
to fix existing code which is really
nice and nice yeah so the idea is it's
like like you say make the pinch zooming
thing pretty much entirely transparent
like yet something that is reflected in
any Web API is in an export in any way
that I can I figure out if the user is
zoomed in so that's what the visual view
put API is for yes yes that is what the
visual view for API sought and it is
basically the the idea is that this is
going to be the only place where that is
exposed and it will tell you the
position and scale of the visual
viewport relative to the layout viewport
I think I think one of the things that
be useful for is is when the user zooms
in get rid of all of the position fix
stuff because that is kind of getting in
the way in which case that will be
annoying I mean it just no land it's I'm
assuming some best practice and the
explosions are going to start happening
soon around that yeah and I think it's
one of those extensible web things where
it's like it's information we have we
should be giving developers it and you
can see like if if not everything is
going to behave the same right or better
now I guess yeah and even does something
like analytics so you could you know
find out where your users are pinch zoom
in you might find on one particular page
everyone's pinch zooming in so you can
then go and investigate and go oh yeah
these buttons aren't great or something
yeah yeah that'd be one way but yeah
just that's the visual viewport and this
is something that I think that Apple
pioneered is the idea of adding multiple
viewports apple pie
I had to do it
[Laughter]</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>