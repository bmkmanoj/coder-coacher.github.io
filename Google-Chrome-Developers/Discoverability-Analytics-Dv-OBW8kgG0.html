<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Discoverability &amp;  Analytics | Coder Coacher - Coaching Coders</title><meta content="Discoverability &amp;  Analytics - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Discoverability &amp;  Analytics</b></h2><h5 class="post__date">2017-04-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Dv-OBW8kgG0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">discoverability is important for your
progressive web applications your PWA is
still a webpage that customers can find
in their usual ways you want to apply
reasonable search engine optimization
and ensure the page is available to
search engines you can use JavaScript on
your pages and Google will index it as
long as you follow some best practices
you can use the fetch as Google tool
from the Google webmasters site to see
how your app looks when crawled
discoverability helps get customers to
your site but how can you measure their
behaviors once they get there
that's where analytics comes in Google
Analytics is a service that collects
processes and reports data about an
applications use patterns and
performance adding Google Analytics to a
web application enables the collection
of data like visitor traffic user agent
the user's location etc this data is
sent to Google Analytics servers where
it's processed the reports are available
in the Google Analytics web interface
and through a reporting API Google
Analytics is free and highly
customisable integrating Google
Analytics is simple first you must
create a Google Analytics account each
account has properties and these aren't
JavaScript properties but refer to
individual applications or websites
Google Analytics then generates a
tracking snippet for each property this
is a piece of JavaScript that you pasted
into your page it sends data to the
Google Analytics back-end you can also
use the analytics library to create
custom analytics such as tracking
specific user actions or tracking push
notifications I want to say a bit more
about properties an account has
properties that represent individual
collections of data these properties
have property IDs also called tracking
IDs that identify them to Google
Analytics if an account represents a
company one property in that account
might represent the company's website
while another property might represent
the company's mobile application if you
only have one app the simplest scenario
is to create a single Google Analytics
account and add a single property to
that account
this is the key part of the tracking
snippet the entire snippet needs to be
pasted into every page you want to track
at a high level
when this script runs it creates an
async script tag that downloads
analytics AS the analytics library it
defines the GA function called the
command queue it creates a tracker that
gathers user data and it sends this data
as a pageview hit via HTTP request to
Google Analytics this data is analyzed
in stored in your analytics account in
addition to the data gathered by tracker
creation the page view event allows
Google Analytics to infer what pages the
user is visiting how long they are
visiting them and in what order for
simpler applications this is the only
coding required note you can replace
analytics GS with analytics underscore
debug KS for console debugging using
this version will log detailed messages
to the console for each hit sent it also
logs warnings and errors for your
tracking code the data is sent to Google
Analytics backend where it is processed
into reports these reports are available
through the Google Analytics dashboard
here is the audience overview interface
here you can see general information
such as page view records bounce rate
ratio of new and returning visitors and
other statistics you can also see
specific information like a visitor's
language country city browser operating
system service provider screen
resolution and device here we are
looking at the user City it's also
possible to view the analytics
information in real time this interface
allows you to see hits as they occur on
your site I encourage you to take some
time and explore there's an extensive
set of features in the dashboard you
should explore the standard reports and
look at creating your own knowing how to
use analytics for improving your
business or increasing revenue is a
skill within itself
fortunately the Google Analytics Academy
offers a free set of online courses
Google Analytics supports custom events
that allow fine grained analysis of user
behavior this code uses the G a command
Q which is defined in the tracking
snippet the send command is used to send
an analytics event values associated
with the event are
as parameters these values represent the
event category event action and event
label all of these are arbitrary and
used to organize events these custom
events allow us to deeply understand
user interactions with our site for
example here we are sending a view more
event this might be used to indicate
that the user has viewed an item from
our site the event label tells us that
it was a premium product I mentioned
earlier that you might use events to
track push notifications you can add
events to fire when users subscribe or
unsubscribe to push notifications as
well as when there is an error in a
subscription process this can give you
an understanding of how many users are
subscribing or unsubscribing to your app
here we send a subscribe event letting
us know that a user has subscribed to
our notifications let's talk about what
happens when analytics meets service
workers they won't work without a little
help that's because the service worker
script runs on its own thread and
doesn't have access to the GA command
queue object established by the tracking
snippet code on the main thread it also
requires the window object service
workers must use the measurement
protocol API instead of the command Q
this is a simple set of HTTP parameters
documented at the Google Analytics site
here's an example of recording when the
user closes a push notification the
service worker manages the notification
lifecycle so it receives a notification
close event when the event fires the
service worker sends a hit via post with
tracking ID custom event parameters and
the required parameters for the API
remember that we don't want this service
worker to shut down before we complete
the post so we wrap this code in event
wait until since hits are effectively
HTTP requests they can't be sent if the
user is offline using service worker and
indexeddb hits can be stored when users
are offline and sent it a later time
when they have reconnected
fortunately the SW offline google
analytics and PM package abstracts this
process for us to integrate offline
analytics install the package in your
project with the npm install command
then in the service worker script import
the offline google analytics import je
and initialize the google and google
analytics object
this adds a fetch event handler to the
serviceworker that only listens for
requests made to the Google Analytics
domain the handler attempts to send
Google Analytics normally if the network
request fails it will be stored in
indexdb instead the stored hits will be
resent when online you can test this
behavior by enabling offline mode in
developer tools and then triggering
Google Analytics hits on your app
indexdb will show a list of urls that
represent the unsent hit requests you
may need to click the Refresh icon
inside the indexdb interface to see them
if you disable offline mode and refresh
the page you should see that the urls
are cleared indicating that they have
been sent now it's your turn go to the
analytics API lab in there you will
create an account add analytics to an
app look at the results and make this
work in a progressive web app good luck
and have fun if you're an instructor
this final slide links to more
information on analytics if you're a
student these links can be found in your
textbook you may want to use these while
you are working on the lab there are
additional slides at the end of this
presentation that show the major
analytic screens and explain how to get
there use these to deepen your knowledge
or create live demonstrations
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>