<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Totally Tooling Tips: Lighthouse | Coder Coacher - Coaching Coders</title><meta content="Totally Tooling Tips: Lighthouse - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Totally Tooling Tips: Lighthouse</b></h2><h5 class="post__date">2017-09-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/d98CAgQNeaM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right welcome to TTT today we're
going to talk about lighthouse and
lighthouse and CI with us today is our
special guest Eric bidelman so very eric
hacks on lighthouse
what is lighthouse why should we care
about it yeah so lighthouse is is a tool
that we've been developing on the chrome
team for about a year and a half now and
it's a tool for web developers to audit
their sites and it tells you things
about best practices it gives you
performance scores it tells you if your
site's a progressive web app or not and
kind of lists off the things you need to
do in order to make it better
yeah and you've been working on this for
quite a while now like I think it
started off as sort of a notes yellow
and then there was the Chrome extension
which kind of has been like super
popular but you've been moving it around
since then right yeah it's it's kind of
growing over time it started off as the
as the node module so you can you know
programmatically run this thing against
your site if your node and then we
developed the Chrome extension because
people just really want to press a
button against a URL and get some
numbers and a score and over time we've
you know as the open source project has
kind of grown up we've we've released it
in other places like dev tools so now in
chrome stable if you open the dev tools
you can basically go to the new on its
panel and voila instead of the old
school on its bound that we have for
many many moons you have the new version
which includes lighthouse so you can go
as site you can run you can choose which
performance categories progress what
about categories you want we're going to
get your site will emulate a mobile
device throttle down the connection to
make sure your performance numbers are
realistic to the real world
if somebody's viewing your site on a
mobile device and we run a bunch of
stuff so you'll see the page reload a
couple times and that's just because we
have to test for things like is your
site working offline we want to shut the
network connection off make sure using a
service worker your PWA
run performance audit some accessibility
audits and eventually we'll get this
really nice report that basically shows
you what you're doing great ad here we
go and what you could improve upon so
chrome status is a good example of PWA I
spent some time making a PWSA whoo
yeah so there is that we have a hundred
out of 100 for the the PWA score and you
can see in here all the different kind
of things we test for so there's a lot
of stuff in here I highly recommend you
know checking out diving in a really
good interesting performance section
some newer metrics like first meaningful
paint time to interactive probably
things you guys have covered extensively
on the show here no first time we're
ever covering this yeah but there's just
there's new stuff happening all the time
we're adding new audits so as new best
practices emerge or the requirements for
being a progressive web app change we're
gonna add that stuff and just make the
whole tool better and then I see where
this is as new web standards kind of
land you can start seeing people
basically a door it's and then it's
instantly in a star appearing in
lighthouse and it's kind of a nice way
of like keeping up to date with newer
web standards right yeah and that's what
that's when the goals is there there's
all these best practices you learn over
time but some are kind of outdated you
don't know what's relevant or not in
2017 and so we just want to you know add
this to a tool that's open-source it's
on github and now it's it's built into
the browser itself so you can use it
basically any way you want that's
awesome
I love that it's got like those modern
loading metrics in there and it's also
got this section for your critical
network request chains really useful to
look at so lighthouse is great for your
local you know dev workflow checking
your own performance on your local
machine but it's important to be
continuously testing this stuff out
does lighthouse work in continuous
integration with things like Travis and
if so can we have it now please
everything no I'm glad you asked that
indeed we can something we showed at
Google i/o is the ability to basically
just hook up headless chrome and
lighthouse to get up so someone submits
a pull request to you you want to know
if that pull request is going to hurt
your performance accessibility best
practices or if it's going to make it
better or not so yeah you can totally do
that
I've actually been experimenting with
that over on github you can check it out
its github comm Sashi vital lighthouse
CI and basically what this is it's just
a docker image that we've put on google
cloud so it's on app engine runs docker
runs headless chrome and it basically
sends off your github pull requests as
they come in to this this rest endpoint
stages and tests and then gives you your
lighthouse score so it's pretty nice
because you can basically have this
little lighthouse file
wherever you go and this is an example
of what this this tool actually does so
it'll report on your pull request of a
comment saying hey this pull request is
going to be 100 100 now nowhere is your
safe to merge so do you have to state
your site and then tell us see I'd like
this is URL I want to run this pull
request you do you basically I'll just
show you right here it's just Travis so
you drop in a Travis the animal file and
you run this little script that I
created in that script called run
lighthouse just handles the details of
commenting on your pull request and
sending the pull request to this this
docker image in the cloud and then all
you do in your trash files just have
your usual you know install handler your
NPM Lynch or whatever you have to do to
kind of test your site and then in after
success the the stuff you mentioned
which is deploy your site we want
actually folks to deploy their pull
request changes to a staging URL because
we think it's it will get more realistic
performance numbers if you run locally
on localhost you don't have things like
SSL for instance you don't have h2 NH to
push so there's going to be different
performance characteristics if you don't
send it to a staging server yeah but
it's basically just drop in and you call
us little run lighthouse script you give
it the URL you want to test against your
statement a staging server URL and then
lighthouse bot will do the hard work of
reporting back the new scores commenting
on your pull requests and saying you
know what's up yeah so like because this
running in head of this chrome does that
affect like the performance scores and
stuff and is there any way of basically
getting around there so it's a bit more
realistic yeah so right now actually and
I'm glad you asked that because it's a
it's a real important point inside of
this repo it's it's a tool we have
online that people can just kind of drop
in to github but it's also kind of a
reference server and a docker image that
people can run their own set up if they
want it to but I have two different
docker files here one is for headless
Chrome so test my site using headless
Chrome and also using full chrome so non
headless version of Chrome and so the CI
is actually using the non headless one
right now because there's some bugs with
headless chrome on basically you can't
do throttling and network emulation in
headless right now
so it's not going to be entirely your
basically and get better scores and you
and expect and we want the most
realistic ones possible yeah so yeah
couple options they're nice so you've
got you can use it as a Chrome extension
but there's no real name for that
because you got it in dev tools now is
that any other way you can use it after
the CI as well
nice nice web page test web page test
yes and actually we've integrated we've
worked with the folks at webpagetest to
integrate lighthouse so if you're on web
page test you can pop over to simple
testing and inside of here you can see
there's a check box for run lighthouse
and when you do this you're gonna get
your typical web page test results but
you'll also have the lighthouse report
that you saw that we just saw in the dev
tools to show up so you can kind of get
all this information in a single place
if you're already using this tool and
the benefit of this versus just running
it locally is you can also run it on
like a real device moto g4 and get
slightly more realistic performance
numbers off the back of it definitely
one of the coolest things about just web
patient tests in general as I said
there's there's all these different
places you can test and a bunch of
different versions of browsers and
devices so you get real real realistic
numbers awesome so a plethora of options
folks are check it out yep I just get it
and you see I see you don't trip up
that's what I've done on my site but
I've been customizing it like no ends
sunglass open source you can do whatever
you want so check out lighthouse try it
in CI thanks for dropping by Eric thanks
guys
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>