<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using Web Components in Ionic (Polymer Summit 2017) | Coder Coacher - Coaching Coders</title><meta content="Using Web Components in Ionic (Polymer Summit 2017) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Using Web Components in Ionic (Polymer Summit 2017)</b></h2><h5 class="post__date">2017-08-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UfD-k7aHkQE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today we're going to be talking about
ionic moving to web components we're
super excited to be here especially kind
of a late addition so I you don't know
what ionic is we'll talk about that
first but before we do that a little
quick intro about ourselves I am max
Lewis I'm the co-founder and CEO of
ionic and most of one of the co-creators
of ionic framework the open source
project and i'm adam bradley lead
developer of ionic and also a co-creator
of ionic
so really quickly if you're not familiar
with ionic ionic is basically a
cross-platform UI component kit
initially kind of focus on building
native style apps for the App Store so
people used to call this they still do
call it sometimes like bootstrap for
mobile and if it's helpful to think
think about it like that that's that's
really what it is it's open source MIT
licensed cross-platform UI kit so you
can build iOS and Android apps that's
really kind of our bread and butter you
can build universal Windows platform
apps but increasingly people are
building progressive web apps responsive
web apps and electron apps all with the
same code base so the write once run
anywhere a thing that's always been kind
of elusive and people still laugh at a
lot of our developers are actually doing
that today because it's just based on
the web and the web runs pretty much
everywhere so we're 100% based on web
technology html5 JavaScript CSS and if
if you're used to building mobile apps
one thing people really like about a web
approach is it's just really easy to
customize CSS and HTML is one of the
easiest things to style and so we're
proud that were based 100% of web
technology ionic spawn the top of the
source projects on github and we've had
millions of apps created some you might
use like dow jones marketwatch and
untappd which is a social network for
people who like to drink beer and then
one thing we're seeing a lot more of
that I'm really really excited about
these big enterprise companies are
starting to build a lot of apps
internally in ionic is is powering a lot
of these so we're really really excited
about that they're starting to do their
own mobile development and its really
great finally it's a real business
behind ionic
we build services and tools for app
development if you want to learn more
about that check us out at ionic
framework comm so real quick we want to
go over a brief history of kind of how
we got here today and why ionic and the
decisions that we made why is the way it
is so this is our original goal goes way
back to when we first started that we
really kind of wanted to focus on
letting developers focus on building
their applications and not so much the
details so in this case we want to be
able to enable developers to just add a
toggle not worry about how does it type
of work how to add gestures what happens
when it gets all woods 50 pixels to the
right or left rather we just want the
developer to worry about I want to add a
taco there because I'm focused on my own
app so if you look back we started this
in 2013 and Alex had a great talker
they're kind of talking about the
details of how difficult this was to do
and I'll freely admit that in 2013 I had
never heard of a thing called web
component but what we were at was we
were largely using jQuery and jQuery
kind of was great but it also had
required a lot of kind of manual setup
and things like that and alex has talked
did a really great job of showing that
so it really wasn't the ideal solution
so then we came across anger and anger
directors and and personally I was blown
away by it kind of was exactly what we
were looking for so with anger
directives were able to make components
and provide a large UI library to all of
our users so that they could have this
cool you our library pick and choose
which components I wanted use and build
large applications with it but again
meeting our first goal of letting
developers build large applications and
so we fell in love with anger jets from
the start but then also you look at her
very first commits we had a bindings
directory and in that bindings directory
we had anger Jas backbone ember and
jQuery and a few others were in there so
we were kind of naive and kind of
ambitious to think that well we'll just
make a binding for all of them because
it's got to be that easy right within a
week we quickly realized that's not
going to happen so we decided to stick
with the anger J's but it was kind of
eye-opening for us of like how difficult
it is to build components for just one
framework let alone many of them and
even if you're too fast for it today we
would have had to build even another 50
more components or 50 more thanks to the
frameworks so fast forward to today I
still love anger I'm personally a huge
fan of it I have nothing but the utmost
respect for the core team and what they
brought to the
develoment community but the reality is
is that angular is not the only awesome
framework right now and then we've moved
from which is the best framework
conversation to now which framework do
you prefer because they're all actually
in reality they're all great so it kind
of comes down to the team that's using
are the developer of their choice of
which framework they want to use so I
think you can see where I'm going with
this is that as web components emerged
as we realize it's actually a viable
solution we started a question it's like
maybe this is trying to meet our
original goal of maybe of what we wanted
to do of kind of writing one component
and having it work everywhere so this is
what you were here to talk about today
so that was kind of our journey to
discovering web components and actually
considering them a viable option but at
the same time around this time
progressive web apps really emerged on
the scene and considering ionics goal
was really write once run anywhere kind
of a UI framework for all for building
apps on all platforms it was obvious
that we were going to jump right in and
embrace progressive web apps and our
early experiments were actually really
really disheartening for our team we
initially were and still to this day
like we we've focused on Cordova apps in
the App Store and on a Cordova app all
your code is bundled next to your app in
the same local domain so there's no
network latency there's no 3G to worry
about and when we took that approach of
building with a framework like angular
and bundling all our components together
we were seeing really really bad results
when it came to going to progressive Web
Apps we're talking like 73 scores on
lighthouse on 3G emerging market test 13
seconds kind of interactive it's just
not even usable and we were shipping
like over a megabyte of code for the
first view and the worst part about this
that alex is as mentioned a lot and it's
totally true we couldn't solve it we hit
an engineering wall our current approach
of bundling all these components up and
then trying to pull them apart and do
code splitting once everything was
already bundled together was just not
working we spent a lot of time we spent
a lot of effort and frankly spent a lot
of money trying to figure it out and we
couldn't
and so we kind of took a step back and
at the same time we had bet the the farm
on angular and what had happened in the
front end space is that frameworks
really proliferated angular we had a lot
of uses but so did react and sort of you
and so did ember you know I'm sure if
you asked individual developers of these
frameworks they would pretend like it's
the only game in town but if you look at
the data it's not at all true and so
ionic was looking at this fragmentation
happening and saying well we're having
issues with framework performance in
general but if we want to support these
other frameworks now we have to go and
build bindings for each individual
framework it just wasn't really going to
happen and so we we felt like we were
kind of stuck but then we we started
experimenting with web components we
started taking our angular components
and pulling them out and porting them to
vanilla web components and it was
actually really really promising and it
actually ported over really well from
angular 2 and I give the angular API a
lot of credit for for kind of being
similar to web components and our first
results were really really encouraging
our 3G time to Interactive's
were four to six times faster 2.7 eight
seconds compared to 11 and 13 seconds
before we were shipping 10 times less
code especially for the first view we're
talking 39 kilobytes compared to 422
like that's that's a really big
difference and that was a highly
optimized angular ionic 2 app and then
we had a build step because we use
typescript and it was considerably
faster we're talking like three point
eight seven seconds for production
builds compared to 50 seconds so not
only was it faster loading components
but the developer experience was better
but we still felt like something was
missing from these vanilla web
components we really really love
traditional frameworks when we think
they've given developers some really
great tools things like reactive data
binding virtual dom support and in kind
of embrace of typescript and also some
key innovations that we saw like react
fibre where the the approach for
performance performance was moving from
you know how quickly can I synchronously
render 10,000 items to how can I help
the browser not lock up its UI thread
and do less work and we felt like those
were key innovations that web components
really needed to stay competitive and
finally
we wanted to use JSX we're excited about
some of the template literal stuff as
well and we had we knew that server-side
rendering precompilation had to work out
of the box so we took our great
promising results from from going to
vanilla web components with the desire
to bring these framework features that
we really really loved and missed and
decided to see if we could combine them
together and so today we're really
really excited to announce a new project
that we've been working on that's really
an artifact from our own efforts that
helps developers build faster web
components with framework features that
they desire but in a hundred percent
standards-compliant way so today we're
announcing a new project we're calling
stencil and stencil is a compiler for
web components that Adam will talk about
in a bit it's still super alpha but we
are using it for a lot of stuff
internally so so we created it for
ourselves we're using it for ourselves
it's going to power the next version of
ionic so we're really excited about it
but keep in mind it's still alpha and
we'll have links at the end so and this
is really Adams brainchild so I should
let him talk about it
and thanks back so stencil is is largely
a compiler for web components and so
what it builds is optimized custom
elements so the big thing I want to get
across is that this is not yet another
framework it's not a stencil framework
it's not window dot stencil that adds a
bunch of stuff and a stencil API rather
it's it's using the build time compiler
to build just vanilla custom elements
that work in all browsers and that was
key that we really wanted to focus on
and so with that compiler we're also
able to enable virtual Dom server-side
rendering precompilation asynchronous
rendering and reactive data binding and
it's absolutely been inspired by the
best parts of angular react view and
polymer and again as Max is saying it's
based on typescript because honestly we
use types of because we it's made us
really productive in building
applications and building ionic itself
so we use typescript because we enjoy it
the side effect is that everyone else
gets the typed library that we have but
the real reason is because we prefer it
and we also use JSX along with that also
and I also like to add that is MIT
license
so with our goal of creating just
vanilla custom elements we really want
to make sure that we had no external
dependencies of any library to include
stencil stencil is not a framework but
rather it's just the compiler for it and
so by reducing or removing on every
single external dependency and having
this a vanilla custom element we're able
to then work in all frameworks which is
kind of our original goal so we go back
to what we originally wanted to do in
2013 was just make it easy for
developers to build applications fast
forward to today there's many ways to do
it in many different frameworks so we
feel like this is kind of meeting our
original goal and we're really proud of
that and on top of that Stella Klee use
to create just standalone components or
could be used to create entire
applications and it's been working great
with all framework with one caveat that
we've had issues where react and that
react hasn't been working the best with
web components and so that's an area
that we would love to work with direct
community and improving upon moving
forward so the way I like to think about
stencil is that it's kind of a pre it
pre bakes custom element precompiled
whatever it takes a lot of these
concepts that we've really expect and
have gotten to like about frameworks
like virtual Dom lazy loading change the
texture and all that stuff and and
there's a simple compiler that just
takes those concepts and build custom
elements with some of that stuff baked
in so we call it stencil because it's
just a tool to help you stamp out these
components it gets out of the way at
runtime all right so we talked a lot
about asynchronous rendering JSX and all
that above so we kind of wanted to show
off something here so a few months ago
at a react conference they had an
amazing demo where they showed this this
is react version 15 and what's going
what's going on here is that there's a
single node at the very top that's being
updated with a new number every single
second and then that passes all the
information down tells its child
elements and so on so forth and then
every single frame each one of those
circles is being animated out and every
single one your circles has a mouse over
and mouse out events on it as you can
see this is a reactive team is no joke
but this is very difficult difficult app
to pull off because you've got over 700
No
updated every single second so what's
happening here it's why you see it kind
of jank a little bit is because the
browser is kind of freezing trying to
get ensured that all those 700 nodes are
updated so this is why it's kind of
Jenkin like that and so if you've heard
rex fibers kind of solving this problem
so wreck fiber is in is the next version
of react it's in beta right now and we
read all about it and and we're really
intrigued by how they're solving us
where instead of trying to synchronously
update every single node it lets it it
lets it kind of put into a synchronous
queue which then lets the browser kind
of manage that so we were curious like
all right that sounds awesome react I
wonder if we can do that because frankly
we also have asynchronous rendering can
we do that with stencil and so we're
really thrilled to show like we were
blown away by the first refresh to see
that actually this thing is pretty darn
smooth it's updating just as many
elements it's the same saying all the
properties being passed down and so it's
kind of proving that this tiny little
web component that we have here which is
just vanilla not depending on anything
else is just as performant as reactive
teen in the next version erect 16x
version so we're really proud of kind of
the performance that we've gotten from
this so back to the slides yeah so
that's a quick kind of demos on the
performance with the asynchronous
rendering engine but we've kind of
talked a lot and haven't really gotten
any code which is the best part right so
I want to talk through kind of what a
simple stencil component looks like and
the cool thing about stencils this is
pretty much the entire API it's very
small it doesn't have a lot of surface
area to the API if you know es6 if you
know typescript it's pretty easy to
understand so this is an example of a
stencil component it's a simple es6 type
script class we are using decorators to
indicate that this is a component we
specify the tag name and then we can
also link a stylesheet so we support
sass or vanilla CSS out-of-the-box
inside the actual class itself you'll
notice this at prop decorator and what
this does is basically indicate that
this class member is going to be filled
in from a property on the actual
component so someone above this
component would actually write name
equals blah or AJ equals blah
you have typing information so we kind
of know what the type is going to be
dental is based on typescript and we we
do use this type information to our
benefit and then inside the render
function you've noticed this a few times
today this is kind of where we feel
things are moving we we compute the next
view basically using JSX
but in theory we could use template
literals or anything in here and we're
taking the value of this name in this @h
the cool thing here is if if name or age
changes the component knows how to
redraw itself automatically there's also
another thing instead of prop there's
States for internal state it's a very
explicit way to indicate that this this
member variable is going to change and
if it changes we need to redraw
ourselves so this is what a component is
and you in underneath the hood we
generate a simple custom element using
this code so there's really not a lot of
surface area if you know this little API
you know how to use stencil so and also
because we're everything is broken apart
and asynchronous one thing we wanted to
make sure we pulled off from the very
beginning is that all the components are
lazy loaded so a challenge that we've
had with our existing versions of ionic
is that if you wanted to use the check
box you needed to use everything and
that works well in Cordova world but
moving forward is really networking well
in and PWA so we wanted to make sure
that if you only use toggle it was going
to be the only stuff you downloaded so
out of the box we made sure that we
enabled this but also wanted meet our
goal of not having external dependencies
so web pack was our challenge to say I
could we do this without web pack
because that kind of seems to the
standard right now and sure enough the
way we're doing it is that we're able to
just register just kind of the base
information about a component so we tell
the browser like hey these are all the
components that are possible but that's
really about it we don't go further into
detail or we don't have any more code
and saying like I on toggle is a thing I
uncheck bucket is a thing and then hey
browser if you happen to see that let me
know and that's about all that we
register for up front and so then from
there what we're kind of doing is we're
reversing how traditional lazy loading
works we're traditionally a developer on
the computer will run the build step and
we take these best guesses of which
things should be bundled together and
which pages should be bundled together
which stuff do we think the user
is going to request and then we ship
that as one big final package but with
this we're letting the browser decide
exactly what it needs we don't even get
involved we just say hey browser let me
know when this thing happens and when
you need ion checkbox then we'll send it
to you at that time and so then users
are only downloading what they mean and
another awesome benefit of this is
because we have a compiler we can hash
all the file names of these files and so
with that we can then forever cache all
of these files so on your phone and CD
ends and edge networks all these files
can be cached so if you have to slide
it's update to your app let's say you
add a misspelling you want to update the
app you don't need to rebuild the entire
application and reship it to all your
millions of users for them to download
the large bundle anymore
now you can just say I have this one
file update let's update that file and
users are only opting in the group
updating the the change file and
everything else is still static on their
phone or as fast as it can possibly be
so we're really proud of this being able
to enable this with kind of how we're
using a compiler to pull that off and on
top of that we want to make sure that
all of this stuff was easy to share so
with large organizations and any company
really or any organization it's it's
often a challenge of which framework
different teams have different
frameworks so different developers use
different frameworks and so this has
been talked a lot of a lot during this
conference and so we want to make sure
that was just as possible for people to
put together a collection of their
components so that they can then easily
share with all the teams in their
company and we want to do this also
through NPM which which is awesome to
hear that polymer is doing the same
thing too but another challenge that
we've had has been with sharing our
SVG's of like are ionic on so ionic on
to the project of arts where we have
over 900 SVG icons which people can
choose from again that has the problem
of like well I don't want to download
900 icons for this to work so we were
able to solve that with kind of the same
concepts here but at the same time it's
easy for a developer to build this and
have their 900 icons in their
application but as the UI library that
wants to share these 900 files it
becomes a challenge because now it's in
node modules which needs to get copied
to the correct folder in your
application and then at the same time
and needs to get requested from the same
location from the browser so there's
kind of two steps here that's always
been a challenge that we've had a lot of
work rounds
with stencil we make sure that this was
seamless where you just import or you
just required which are you require the
collection of ionic ionic ons and it's
all handled for you so down to worry
about that and additionally we also able
to group certain components together
because in reality there are certain
components that will come together for
example we have I on card I on card has
I on header and I on content inside of
it so chances are of use i on card
you're going to use those other two also
so we want to make sure that we can
reduce as many requests as possible or a
separate request as possible so we're
able to easily bundle them together and
again the biggest thing i want to get
across from this is that the final
output is not a stencil thing it is
purely vanilla custom elements and ionic
core is really just another collection
so again it can be reused in any any
framework to include ionic angular so
and that's another thing i want to make
sure that we get across is that the next
versions of ionic angular will continue
to work the exact same everything you're
using about ionic angler is just like
how Version three works except now under
the hood we're using this to pull it off
and then we have the added benefits as
the developers that we can then enable
it for react developers and view
developers and so on and whatever comes
out next month additionally we want to
make sure that server-side rendering was
enabled traditionally that's been kind
of difficult to do with web compliance
but we because we're using our own
asynchronous rendering engine we're
actually someone easily we're easily
able to add this to our components so
what that means is your first paint can
be just HTML and CSS so that perception
is lightning fast and as fast as it
could possibly be because you're only
rendering the bare minimum of what that
first paint has to be but then on top of
that another thing that keeps coming up
is TTI time to interactive that was our
core focus and make sure that the actual
time direct and time to interactive was
really just as fast a positive would be
so what we're doing is making sure that
all the existing nodes that came back in
that first request for that first paint
are the same ones that we just enhanced
with listeners so we're not repainting
the whole thing like you've seen other
frameworks and also just like how we
want to make sure that you develop on
desktop and you develop on mobile you
kind of have a single experience of what
you're creating we feel the same thing
of like if you're developing for
client-side a browser or your
on the server so we want to make sure
that the experience of developing stumps
of components is the same whether you're
doing server-side rendering pre
rendering or it's for the browser so to
do that we're able to have window and
document and everything that you're used
to so you don't have to kind of change
your mind or do a mind shift of luck
between the different versions so just
some some fa Q's here who is stencil for
well first and foremost it's for us we
built it because we needed faster apps
like like we mentioned we wanted to be
and we do want to be a major UI
framework and solution for progressive
Web Apps and frankly we just were kind
of dead in the water without coming up
with a different approach so we need
fast wraps with components that run in
all frameworks because we can't possibly
support all the frameworks out there
with our components and the ones act
that will come out in the future
secondly it's a veil it's meant for UI
framework authors I strongly believe
that the days of building a CSS jQuery
framework like like say a bootstrap or
even like an ionic that has its own CSS
and then trying to build custom bindings
for every framework I feel like those
days are coming to an end I think it's a
really positive thing for both UI
framework authors because they can do
less work but also users I think we've
all used a like bootstrap binding they
had one set of features for one
framework and had different features for
another and so web components kind of
solve that problem for us and stencil
can help these developers build these
components for large development teams
that are using a lot of different
frameworks and build chains using
stencil and using web components they
can share components like branded like
your team as a branded button or a
specific thing that has to be in every
single app instead of duplicating that
every time you can just share the
components with everyone and then
finally for app developers we all want
faster mobile and desktop apps right so
this can help us get it so how is this
different from current solutions I think
the biggest difference is that it's a
compiler not a not a runtime solution so
we do all the work during the build step
it's just a simple NPM install there's
no CLI it's just a NPM script for your
app and this just generates a set of
optimized custom elements so there's
nothing stencil in the final output we
keep saying that but I just want to
really like drive at home there's no
window dot stencil
doesn't exist it's just your components
and this complements all frameworks
because we really like don't want to
discourage anyone from using reactor
view if you like it that's great we we
kind of have taken a step back and
saying we don't really care what you
want to use anymore we're done fighting
that battle we're just going to create
custom elements you can use them if you
want but if you want to explore this
brave new world where you don't use a
traditional framework you just use web
components we support that too and we're
actually really really excited about
that
hashtag use the platform and it's a
small footprint there's very little view
code here
there's no CLI and then finally this is
you know going back to kind of
preferences we've built this on
typescript typescript has let us get a
lot of rich typing metadata that we
actually use for the tool but as a
company we've really embraced typescript
we feel like enterprise usage is really
really accelerating on time script so we
based it on typescript where we love it
but if you don't then maybe this is a
point of disagreement so what's next
with stencil our stencil created
components are going to go live in you
know hundreds of thousands hopefully of
ionic apps who knows this might be the
biggest distribution of web components
in the app stores in short order so
we're really excited about that we're
going to begin seeking some feedback on
an experimental ionic with stencil
starter instead of just I on it with
angular or a typical framework and based
on the feedback we might integrate that
more deeply into our tooling so this is
still experimental we're not really sure
how people like it we need better state
management allows something like Redux
so we're working on something like that
trying to make it easy to import
third-party modules looking at maybe
template literal templates like lit HTML
beyond JSX
because we're just a compiler it's
pretty easy to swap that out but we've
just decided to go with JSX today and
then we're going to submit our hñ PWA
which we're really excited about and so
we're really you know again this is
something we built for ourselves but
we're really proud you know just show
this off and you know get some feedback
of what you guys would think or what the
community thinks and so we have it up on
our github and we have a couple demos
out there they include the fiber demo
and the hex demo so I've leveled enough
we've level enough about this but one
thing I want to say is like take a look
for yourself so take a look at this
hacker news app
and do the traces yourself look at the
file sizes look at how fast the time
your interactive is and just take a look
and you'll see that it's rivals the best
PWA is out there right now and so we're
really really proud of it and on top of
that it's built from a component of
libraries it's not just a bunch of divs
that have you know different background
colors and stuff and and just switch now
div this is an actual legitimate large
scale application that has modal's and
alerts popovers all the different things
that you want an application but it also
loads just as fast as any other of the
fastest PWAs right now so please we
encourage you to take a look and we're
really proud of what we have so far
thank you very much thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>