<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Selenium, Totally Tooling Tips (S3, E14) | Coder Coacher - Coaching Coders</title><meta content="Selenium, Totally Tooling Tips (S3, E14) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Selenium, Totally Tooling Tips (S3, E14)</b></h2><h5 class="post__date">2016-12-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/M6VcneC2pI0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so you do testing for your projects
right I usually create a new issue
assign it to you and then magically
overnight my tests get written it's the
most wonderful thing mm-hmm yeah for you
so we've read through their previous
episode on unit testing with things like
mocker and we looked at a whole other
host of other ones what do you think of
when someone says unit testing to you oh
there's like in browser testing CI
testing there's like usability testing
there's like there's an entire minefield
yeah so this is kind of I think the
biggest issues I have a lot of this
stuff like when I first got into unit
testing it was like mocker and it was in
the the terminal and you get used to
this thing of like this test pass this
one failed and that was all cool but
it's JavaScript it's not in the browser
you don't have the browser API so it's
there's a bit of me that got confused as
I okay do I have to edit my code to be
separate so it can run in node even
though it's gonna run in a browser or
what that's kind of been cleared up
because obviously with mocking you can
run in the browser which makes a bit
more sense if you're building a browser
library and you need those api's but
there was always this weird tension
because a lot the work I've been doing
super recently actually got to a point
where note i was mocking out a lot of
the browser api's largely to make the
test super fast and super reliable
because basically nothing was real
everything was fake enough to say you
don't have access to window you don't
have access to any of those api's yes
things you end up kind of doing one of
two things either you you run it inside
the browser at the mocker stuff and
it'll actually use those api switch so
the most part of fine it's good because
if there's any browser differences you
get them or you mock all of them out
which means it's completely fake but
it's normally super fast because it's
not actually doing any work you normally
go in this case pass and this takes
throw an error and there but it still
kind of always confused me like okay so
I have these two things but it doesn't
feel like this is good on an ongoing
basis because I'd if I don't run the
tests nothing happens so that's when we
get into the selenium world and it gets
super interesting slash weird depending
on how you do it so for anyone who
doesn't know selenium webdriver is a way
of launching a browser and controlling
it is the most generic way of putting it
they have a ton of different versions
but this is the JavaScript node version
I've come to know and love let's look at
super basic bare-bones
selenium script and this is it so this
is a node version like selenium has a
ton of different libraries which also
doesn't help because documentation
there's so much stuff but in the most
bare-bones thing you create what's known
as a webdriver builder and that point
you can base a okay with the Builder I
want it to be a Chrome browser or I want
to do this and then you can bolt on
additional things we say build me a
driver and from that point that is
basically and kind of is like an
instance of a browser so that's what we
got here at that point you can just
start using it so if we call get in this
case I'm gonna launch my market test cuz
we want to want to make all of that
stuff we don't worry about it
and then we are gonna say wait until
something happens this case we're gonna
say wait until mocker results becomes a
thing on the the actual thing inside the
window and then get the mock results and
do something useful for them so this is
like a really basic kind of clean iam
thing but it's already super helpful so
if you can't run this I'm just gonna run
it with node chess selenium you're just
gonna nod along one I'm just I'm just
gonna myself not along assume you know
what you're doing yeah that's that's the
safest way of doing it so all it's doing
in you can kind of see is chrome pops
off and then it closes and you briefly
see the market test running this is
super basic but it's super nice because
it means that you could put this like
because it's just a note script you can
put it in MPM run or you could add it to
Travis you can do whatever you want it's
super nice and clean the problem I
always had with this approach is it gets
super manual really quick when you want
like Chrome and Firefox so I created
this thing called selenium assistant and
it's entire thing was like just tell me
what browsers are available and then
just give me all of those in a webdriver
thingy and then run it yeah so it's kind
of weird because you get available
browsers and it can give you
like stable betta an unstable we've done
so much stuff with service workers and
like brand new API is that you've wanted
to test and all those ones because you
knew breaking changes were coming in
oh yeah it's a it's almost impossible to
manually stay on top of testing that
stuff yeah so we I built this thing and
all that's all it does is just simplify
all those things and in this case I've
kind of merged the two so if we do it
super roll with just lean iam assistant
what it's gonna do is we're gonna get
all the available browsers open them up
go through the same steps of running
Chrome and then return it and that's
super cool because you get into this
super weird world where suddenly
browsers open and close open and close
open close and the you see it go into
Firefox and then it's open or closed
open or closed there's still one more
issue almost as if you enjoy chaos well
it's great when it works it's getting to
that point you have this mocker
environment where everything builds runs
in it either passes or fails selenium
just gives you the piece that opens up
the browser
it doesn't actually give you the
pass/fail like selenium can open do all
those things things can go horribly
wrong and it just goes well I don't care
and the worst thing with that is if you
have a selenium test and something goes
wrong the selenium doesn't quit it
doesn't close that browser so you end up
with a desktop full of like 20 different
browsers and opened simultaneously the
way around that is you kind of end up
mashing maca and selenium together and
then you get super trippy Inception
where you've got maca running a selenium
test which is running maca in the
browser to then report back to your
moccasin ium thing which is why I'm
doing here because you know what that
that's true chaos and that's what you
need and it's kind of interesting you
get the available browsers and you say
add maca tests for each individual
browser so we got for each add market
test inside of this we then say write
describe a new test suite and then
before each one get the selenium driver
so that's doing the build of stuff for
me and then after each I just want to
make sure I call quit on that browser
because without that like I say
especially when you start working on
this you don't exit at the end it's
gonna suck so maca tests lenient maca
root system and this time it's an open
the browser
listen for the results and come back
whether it works or not but I've also
added in
additional step to this one we're
because we're now in Makkah we can do
individual tests hmm I have that bunch
of tests it's like open the browser maka
run through all the tests that a unit
test and then I've added one on the M
which is like okay load another page
click on the about link check that they
actually went to the about page and this
is kind of the interesting thing with
maka as you start getting into more
which I think you'd classed as an
integration test fits like make sure the
behavior is the actual end thing that
I'm expecting and I call them
integration tests or kind of label them
differently to kind of highlight the
fact they're gonna be the long because I
think that's part of the point is unit
testing is going to be super fast super
reliable which is why I'm kind of like
you could mock it out and it makes sense
yeah integration tests of the big the
long scary can take a while kind of
things and there's a ton of ways you can
skin both of these cats but I think it
makes a lot of sense so the super basic
integration test in this case I'm moving
up my website I'm looking for a
particular link which I'm like executing
in the page clicking it and then at the
very end I'm just saying okay wait until
the document title is actually what I
expect it to be how well does all this
stuff play with serviceworker so that's
where I ended up getting into selenium
stuff because I was writing micro tests
in the browser and that was that was
great because it meant a really
repetitive way of running tests against
serviceworker api is and it was the only
way of doing it in the same way
especially when you're learning because
there's lots of edge cases it was the
then running them in each individual
browser and repeatedly doing it as well
as them running it in with a CI you need
all of that in a notes group which is
why I landed on maca afterwards because
you kick it off on the node side and
then it's just JavaScript and you're not
testing any node stuff you you're only
using selenium to launch the browser do
certain things and plus having that step
where you can then launch it perform
certain tasks on a demo page right and
then check what the response is from the
browser is insanely helpful especially
for figuring out like any possible
browser differences or bugs in each one
of which there was many back in the day
so that's where I'm at and I think I'm
now starting to try and delineate
between unit testing and integrate
Cheska's whistling neom you are
instantly a flaky territory like
webdriver just does random stuff because
of rolls and fuzzies define random stuff
it will just so the worst thing with a
lot this stuff is you will randomly get
one browser updating and it will not
work with its current version of its
webdriver equivalent your CI kind of
goes out the window at that point but it
will often come up with a fix uner or
later and it's very rare that that will
land on staple releases but there are
just times where let's say you're using
Express or some other node module start
local server if for whatever reason the
browser talking to Express causes an
issue and something breaks it breaks and
that may be a once-in-a-lifetime
opportunity on the CI that you will
never see again so I'm finding I'm
adding retries a lot for selenium
webdriver tests and generally that that
weeds out a lot of issues to the point
you like this is actually a bug what's
they coasted typical number like retries
you I've been lying on like three three
okay and that's just largely because
nine times out of ten it's because I'm
using like I'm even going so far over
the integration tests of like tests
against real live networks like you
think of push you you need the browser's
to talk to like whatever push service
they're going to talk to and then get a
network response info if that like if
whatever reason the sea-ice internet
connection is broken that means my test
is gonna fail it's gonna get so far and
then die I think you've been tackling
some of the sort of bleeding edge around
unit testing dealing with serviceworker
dealing with portion of those other
newer platform api's and only who's
bleeding edge testing any it's just I've
been testing a lot of bleeding edge
api's which is why I'm reaching a lot of
these weird situations and it's also the
reason why I'm finding it so useful
because the main thing is if I build
these things I also don't want to
babysit them right because you just
lumber me with an issue that I then
don't want to have to keep on looking
after I just want you to deal with it
that's not gonna happen
yeah I just know but it's interesting I
think everyone should be looking at this
stuff and playing around with it I
definitely like the next step for me is
looking at like services like browser
stack and social apps which I think now
that I understand selenium I'm at that
point where I can appreciate what the
service does for me yeah
but I think that's that's the
interesting thing is I feel like
everyone who does this starts off raw
selenium goes through the pain realizes
there's abstractions that exist and they
want them then they get to this point
where they could do like follow-up
totally tooling tips episode on that
topic boom</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>