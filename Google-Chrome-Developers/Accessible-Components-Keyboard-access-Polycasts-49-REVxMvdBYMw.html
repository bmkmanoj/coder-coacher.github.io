<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Accessible Components: Keyboard access -- Polycasts #49 | Coder Coacher - Coaching Coders</title><meta content="Accessible Components: Keyboard access -- Polycasts #49 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Accessible Components: Keyboard access -- Polycasts #49</b></h2><h5 class="post__date">2016-07-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/REVxMvdBYMw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey there polycasters rob here welcome
back to the show so today we're gonna be
talking about something which we
probably don't touch on enough but which
is crucially important for anybody who's
building web components and that is
accessibility if you're building custom
controls custom elements and things like
that accessibility is extremely
important for you to factor into your
application because when you make custom
elements you're basically creating a
brand new tag in the browser which means
that that tag has no built in semantics
has no built in keyboard support and so
it's up to us to add those features back
in so to do that I'm gonna split this
into kind of like a three-part series
we're going to cover a few big topics
and accessibility today we're gonna
focus on keyboard support so what we're
gonna build if you follow me over here
to my laptop is this sort of checkbox
component and I've zoomed in the page so
it's like a giant check box but you can
see that I can click on it right to
toggle its state I can also hit tab 2 to
focus it I can hit the spacebar on my
keyboard to to activate it state that
way as well so that's what we're gonna
cover today just getting sort of the
basic keyboard functionality working for
this custom checkbox now the first thing
I'm gonna do is go over to my code
editor and I've already gone ahead and
created sort of a basic element which
I'm calling - checkbox what I want to do
here is I want to start off by giving it
a just like a checked attribute that we
can toggle back and forth so we know
whether it's checked or not to do that I
will go down to my elements definition I
will give it a properties object and
then create a property called checked
and checked is gonna be a boolean
property right so we'll set the type to
boolean I'll set the default value to
false and because I want this to reflect
as an attribute so I wanted to actually
show up in the Dom whenever it changes
I'm also going to set the reflect to
attribute property I'm gonna set that
flag to true as well now the next thing
that I want to do is I want to listen
for whenever the user taps on my
checkbox right so when they actually
click on it I'm going to toggle that
attribute on or off to do this I can add
a listeners object to my element
and I will expand this a little bit give
us some more room to work with so in
this listeners object can actually
listen for different events so I could
listen for tap or key down or something
like that so I will listen for tap and I
will give it a handler called on tap to
run anytime someone taps on our element
an inside of on tap this will be pretty
straightforward we're just going to say
hey whatever the state of checked was
we'll say this dot checked equals the
opposite of whatever checked currently
is so we're basically just toggling that
state back and forth and that should
then reflect to our attribute now the
last thing I need to do so I can
actually see this thing on screen is
just drop in a little bit of CSS and
actually got some CSS that I've saved
here and you can see that I'm styling
the host element I'm sending it to
display:inline-block I'm giving it a
little black to pixel border around it
I'm giving it some explicit width and
height so we're gonna draw a box and
then when that checked attribute is set
you can see here I'm using a an
attribute selector inside my host
selector when that checked out to be
just set we're going to set our
background to this SVG image here which
is basically just a little check mark
SVG that I've saved already so I think
this is actually ready to try out so we
can go over to our terminal we can run
polymer serve - - open if you aren't
familiar with this command we covered it
in a previous episode when we're talking
about polymer CLI so you could run npm
install - cheap polymer - CLI this will
get you the polymer command-line tool so
you can run the local server and test
out your elements so I'm gonna run
polymer serve - open and that should
open up the page and now we can see our
little check box here and when I click
on it we can see our check mark showing
up importantly if we open up our dev
tools and we inspect this guy and we
sort of boost the page a little bit we
can see that that checked attribute is
currently being applied when I click it
again goes away okay so far so good now
we've got this thing working for
basically a mouse user which is great
but I mentioned today our goal is to
also make sure that we're adding proper
keyboard support and that's really
important for anyone who might have you
know repetitive stress injury something
like carpal tunnel syndrome they might
prefer not to use a mouse or someone who
might have
former paralysis or limited range of
motion who might be using something like
a switch device to access the page so
for those users we need to figure out
what sort of keyboard support we need to
add to a control like this and a really
really useful resource here is the Aria
design patterns sort of authoring
practices doc now I'm going to talk
about Aria in the next episode so you
don't really need to worry about it for
now but basically you can think of this
as kind of like a helpful guide that all
sort of tell you hey based on this sort
of UI that you're building here is the
kind of keyboard support and other sort
of semantics you need to roll into that
element so I'm going to Google for aria
authoring practices 1.1 the first result
here is what I'm looking for over here
on the left hand side you can see a
bunch of UI patterns listed and the one
that we're interested in is checkbox so
we go and we click on that and now we've
got this whole big description that
tells us all sorts of information about
what a checkbox component should should
do in order to be accessible the
information that I'm interested in
particularly right now is this keyboard
interactions section so it tells me when
the checkbox has focus pressing the
space key should change the state of the
checkbox right so the space key is kind
of kind of be like when our user goes
and clicks on it with a mouse now
there's two important points here that
just made one is that we need to make
sure the element actually can be focused
right and then the other is that we need
to listen for the space key and toggle
that that checked state of our element
so let's go back to our code editor and
the first question is like how we're
gonna make this thing focusable because
by default a custom element is basically
like a span there's nothing about a
custom element that makes it implicitly
focusable it's not added to the tab
order and a user's not going to be able
to reach it using their keyboard so to
do this we can add a tabindex attribute
to our element and tabindex text kind of
like a range of values you can have
tabindex of 0 which will insert the
element in the natural tab order you can
have a tab index of negative 1 which
will not insert the element in the tab
order but it could still be
programmatically focusable by calling
it's a focus method you can also have a
tab index of greater than 0 you could
have a time index was like 5 or
something like that which would jump
your element ahead of everything in the
tab order but generally that's kind of
considered an anti-pattern I can
just sort of really confusing tab waters
in your page so I think the best option
for us in this case is to give our
element tabindex of zero and that way
the user can just easily hit the tab key
to reach it with their keyboard to do
this in polymer we actually have this
really helpful property that we can add
to our definition called host attributes
host attributes is basically going to
apply an attribute to an element so it's
self applying an attribute and I will
say tabindex should be zero and now if
we go back to our application we refresh
the page you can see over here in my
inspector now tammand X of 0 is being
self applied and if I press the tab key
now we see the focus ring around our
element cool so the last part is we just
need to make sure that when the user
presses the spacebar that it toggles the
state of our element and there's two
ways that we could go about this we
could either add those event listeners
ourselves kind of manually right and
then make sure to remove those event
listeners when we take the element out
of the Dom that would totally work but
I'm super lazy I like writing as little
code as possible so the other thing we
can do is we can use a very useful
behavior created by the polymer team
called iron a 11 Y Keys behavior a lemon
Y stands for accessibility so what I'm
gonna do is I'm actually going to just
install this behavior so Bower install -
save polymer elements slash iron 11 Y
Keys behavior okay that's going to go
out fetch that pull it into my project
then I can just add that to my element
definition so we'll import that right
after I import polymer iron 11 why he's
havior and the last thing I want to do
is add that to my behaviors array right
so I'll say that I have behaviors array
we will add polymer dot iron a 11 Y Keys
havior and what this is gonna do is it's
gonna make this key bindings object
available to me and this key bindings
object is kind of like my listeners
object down here I can just use it to
listen for different key presses and
assign those to a handler so I'll say
key bindings I will say I wanna listen
to the space key and when I hear someone
press the space key I just want to run
basically that same on tap command
from before so let's go back and test
that in our project now we'll refresh
the page we will hit tab to focus our
element we hit space and now we've got
our check box and now we've got basic
keyboarding support added to this
element now I mentioned that there were
going to be two other sections to this
series we're going to talk about
semantics we're going to talk about
labeling but I think this is enough for
today
so so definitely go out there play
around the iron a limo like he's
behavior go out there and check out that
Aria design pattern stock it is full of
super useful information we're gonna
pick up here in the next episode and
work on adding semantics to this element
so it'll start working for a screen
reader but that's it for today if you
have any questions please leave them for
me down in the comments below or hit me
up on a social network of your choosing
at hashtag ask polymer as always thank
you so much for watching I'll see you
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>