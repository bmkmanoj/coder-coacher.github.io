<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Supercharged: Live Coding Session (Chrome Dev Summit 2016) | Coder Coacher - Coaching Coders</title><meta content="Supercharged: Live Coding Session (Chrome Dev Summit 2016) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Supercharged: Live Coding Session (Chrome Dev Summit 2016)</b></h2><h5 class="post__date">2016-11-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/X8EQSy-ajo4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right so let's get started so what
you see here is the thing that we have
built a while ago it is a website with
no really with no important content but
you get nice animations when you go to a
different sites and as you can see we
are only requesting a partial which is
just a single line of HTML that's being
swapped in and all the rest is
JavaScript and transition magic and this
is what we want to try to make work
offline oh somebody went to fullscreen
that is not good let's not go fullscreen
so the first thing I'm gonna do is I'm
gonna register a serviceworker because
I'm a fast typer I'm done you cheat you
big old cheat it so what I usually start
with with is a string for a version go
back go back go back
so you've got a right if serviceworker
in navigator let's talk about that I
just that is progressive enhancement
right basically it checks if the
Navigator object has the serviceworker
call and if not we're not gonna do
anything if it does we can actually
register it we don't register the
service work out we telescope you're
gonna control everything from forward
slash you can't control everything
everything yes right so as you were
so version string I usually do because
it is a nice place to force reload of
the serviceworker so the serviceworker
file is gonna be checked if it has
changed if it is bite equivalent correct
it is not gonna be reloaded if there's
something changed the whole new
serviceworker it's gonna be spun up so a
virgin string is a very nice place to
force this kind of news if you set far
future caching on your javascript files
at most the spec says you're gonna wait
24 hours before Chrome or any browser
there's a full service workers will go
and try and get a new version of your
serviceworker
but you could be stuck with the
serviceworker version for 24 hours so
typically on a serviceworker you want to
make sure that you're serving it for
example a day we changed the schedule of
chrome dev summit if we had been stuck
for 24 hours on the same so Tiger
awkward right there we go so the first
thing we're gonna do on install
basically always looks the same for me I
usually do a skip wait
in here which means cell dot skip
waiting typo or he can't milk so we're
gonna skip you're not going to wait for
so Sakura shut down we're gonna take
over immediately which is also what we
have to do in activate okay so let's
talk very quickly about the life cycle
so when a service worker is downloaded
it goes through an installation step
I think article yeah oh yes there's a
brand new article on
developers.google.com/plus web /
fundamentals I think he probably is
probably on fundamentals and I'll find
it and I'll post it into the slack in a
moment but basically talks through the
life cycle but in the short version you
have an installation step when a service
workers finished installing it will
activate as soon as any as soon as it's
able to which thought largely involves
any connected clients they're called
have disconnected and it becomes
available otherwise you have to wait
until they've all disconnected you've
got an uninstall if I'm not gonna skip
waiting on activate I'm gonna claim all
my clients so my new service worker is
active now but it hasn't taken care of
all the open tabs if you have multiple
ones self clients claim says give me all
the tabs that they are and I'm gonna
take care of them from now on
okay so if you've got an existing
service worker you're just basically
kicking the old one out immediately and
saying I'm the new one I will handle
everything from me okay and for the on
fetch for now I'm just going to say I'm
just gonna do a an OP server Circuit it
just does a path through so I'm gonna
respond with the fetch so I'm basically
not gonna do any offline logic just any
request the page does I'm gonna do to
the actual network and pass back so if
we reload this site now we see the
circuit just got installed which is good
and now on reload we should see every
request twice because the website does a
request for example the SC view file
which get to the service worker and the
service worker does the actual fetch
which is why it also shows up down here
so everything is still working the same
but we have a service worker now in
between our website so it's really worth
pointing out this that little cog the
corner is the is the thing you're
looking for and also if you hover from
service worker that is good things to
watch out for
whether you are seeing that two steps
something went to the service work at
the service worker did a fetch
and then we comes
so a pretty common way is to download
the files that you know the user is
going to need on install and that's
exactly what gonna do so we're going to
define a necessary and these are the
parts that we need dude today you're
like the king of snippets aren't you I
was like how long it's taken you and
he's like I've practiced and I can do it
in like 11 minutes I didn't realize it
was all snippets these are actually the
two servers I have okay don't snippets
now because it's boring tithing this out
well it's not technically wrong it's
just awkward if the line' thing was
switched on it would have really but now
now interesting okay I'm gonna write
async function oh yeah which now
everybody knows will run synchronously
exactly a quiz until I do wait and do
caches open right static now you gotta
explain what's going on exactly
so async function just think about it as
a function it is actually function
returns a promise just since we're on
the same page okay
but by putting you're sort of marking it
by saying it's amazing function because
only inside Aysen facing functions we
can use a wait and these want to do that
because it's cool and that means that
this function actually returns promise
so everything in here will basically be
kind of rewritten into a promise chain
but it's so much more readable now okay
so we're saying we've got an async
function we're gonna we're saying open
the caches and we usually you do like
dot then after us and you get the cache
and it could do something inside the dot
then but now we can actually just wait
it for it and this is the same as I
thought then but puts it into a variable
which is true so it reads like
synchronous code like I want the cache
and then I want to do something else and
something else but under the hood it's
magically doing sort of promisee type
stuff so the next thing is another await
where we can do cache add all assets so
this step is going to wait until we have
downloaded all the assets in our array
put it into the cache and then we will
return skip waiting so the ultimate
value of this promise that the async
function
returns is going to be self skip waiting
which is what we want to pass in to wait
until because we're done without setup
but before that all the other steps are
going to happen and we can check this
works by reloading the page because now
the service record Oh remind me I'm
gonna write a lot of async functions if
I get these two parentheses at the end
shout because it's painfully back but we
need to want you want to invoke this
function right away so let's do this
again sorry that was involuntary so so
sorry
and we see now it downloaded all the
files again which reminds me when we do
these it's not production code I'm not
saying you're writing bytecode awkward I
am but there is a sense in which we do
this stuff to kind of show the approach
that you take this isn't necessary stuff
we say just take this copy paste and
you're good to go
yeah that is important so now that we
have things in our cache we know that
everything from our aesthetic folder is
going to be in our cache 100% because we
are downloading it on install ok and
this is what I want to take advantage of
in our own fetch well can you can you go
back and reload the page and then show
them the cache oh yeah in dev tools so
useful so at this point we should have
all these assets in the cache right so
we have the cache store on the
application tab we have the cache
storage and we can go and have our set
of cache and all the files are in here
this is really useful to see if
everything actually lends to the
response no you can't okay
I still don't know why I don't know what
this this thing is I should say okay but
it just doesn't like you right I am in
canary because async functions are only
in canary so this there might very well
be bugs but you normally see you
normally see the okay yes so we are now
in the on fetch what I want to do is if
the request is somewhere for something
in static I want to don't even I don't
even want to bother with going to the
actual network because I know I have it
ready so something that I kept running
myself doing is actually parsing the URL
so event dot request dot URL is the
request URL but it's just a string I
actually want to have it separate into
like the query part the
the domain and all these kind of things
so I'm just going to attach a new thing
to the event which is first URL which is
a nice URL object because what I can do
now is event parsed URL path name don't
add that to the spec you're gonna feel
really awkward a little bit right so
crazy what I'm checking is if the past
name starts with static yeah I'll give
it some special handling mainly I'm
gonna respond with a cache match event
request so I'm looking at the cache for
the request object and gonna respond to
it and I know it's going to be there
because we are installing that so yeah
so you install these assets and then
when we get a fetch from the page that
says I want whatever URL hopefully we're
gonna find it if it's the if the URL
starts with slash static we go find it
from the cache we're pretty confident
and we should be able to reach otherwise
we're gonna stay with kept with fetching
for now so what should happen in our
network tab is read all these so I was
like a request should disappear so I'm
gonna reload once which is gonna trigger
a reinstall of the service record so
this is all the same the new service
worker gets installed and if I reload
again all the surrogate requests are
gone because you're loading from cache
now yeah now here's an interesting one
as well that bottom request there is the
service worker trying to do an update
for a new version trying to find see if
there's been checking if it's late
equivalent or not yeah so you will see
that kind of going the service worker
looks for the new Service Worker
so for the rest right now we're if
there's a request for something that we
have don't have in the cache for example
or index.html it goes to the network and
just gives it back to the browser and
then it just disappears we don't save it
anywhere right so this is the idea okay
so you've got those how many is it five
five our sets if I request something
that's not in there we go and fetch it
but then we just kind of it's you know
if we're offline we wouldn't have it
finished exactly and then we're gonna
change and I like to write functions for
the different caching strategies so in
this case I'm gonna do a stale while
revalidate role in then there we go oh
so what this means is still very valid
Eggman's if we have something in the
cache return it right away even if it is
stale okay and in the background fetch
it from the server and update the cache
so we see this on typically on social
networking sites where they kind of go
here's all the posts that I've got
stored enjoy those meanwhile I'm also
going to go off and get the latest set
of posts and when I've got those I'll
update my collection for you
so the one nice thing about the strategy
is that we're definitely going to do
both we're gonna do fetch and we're
gonna do check the cache because we're
gonna need both in either case so we've
got somebody's asking on the chat and if
you're not in the chat and want to join
in is the chromium dev dot slack calm
and we are in the general channel
somebody's asking if the code is gonna
go on to github totally the answer is
yes we have I will post a link in the
chat if somebody else doesn't get there
before me we have a UI element samples
repo which has the whole all the
elements that we've built all the stuff
we've built sorry super judge stuff so
far for you to look through and this
will be no different so it will be in
there I might clean up a little bit
afterwards some comments just to know
what you have to remind you what I was
actually doing yeah because I'm not
gonna write comments now like who does
really come on so we have two things
that we can do now first we have to
figure out what to respond with and this
is something that I want to give to you
in respond with try to get the response
as fast as possible and nothing else
caching you can worry about in the wait
until respond which should be faster so
now you can respond with okay I'll wait
until so we have event respond with any
rent they'd wait until so respond with
expects a promise that resolves the
thing that is going to be given to the
browser as the response to the request
so for example you could respond with
the fetch yeah an effect she's gonna
return a promise which will ultimately
result in the content of the thing that
was being fed which is a response the
response object wait until however it
keeps the source okura life if you want
to do some further work like opening a
cache and putting stuff into that cache
otherwise the serviceworker might get
killed before they actually save it yes
now this is an interesting part of
serviceworker work is that they there's
no promise giving on oceanside promise
there's no guarantees given that a
serviceworker won't be spun down okay so
once say for example you've loaded the
pivot if the tab is open ya can be spun
down if so once summer done is reload of
the page the browser is well within its
rights to say i know long lee this
serviceworker get
which by the way is by dev tool says now
that service or termination by a timeout
time I lost counsel because dev tools is
attached so it was going to shut down
the service worker but because dev tools
is attached it said I'm not going to do
that in case you want to inspect what's
happened in case you just want to have a
look at this show because when you log
an object from the service worker you
can't expand it anymore if the service
worker has been killed because the
context has gone so so it's just a
service from the chrome people to us
that you can do debugging and so they
wait until is your programmatic way of
saying don't shut down the service
worker yet I have some stuff to do which
in this case I assume is gonna be
putting things into a cache well in
respond with no and respondent they're
just gonna worry about how to what the
response is so our response in this case
is going to be a promise not race
because whatever we have the fetched
version or the cached version I just
want to return whatever is there faster
so race a promise what race is a
function that takes an array of promises
and gives back whatever promises settles
first okay so okay so you gotta fetch
you know look in the cache you gonna say
don't care pick one surface most of the
time I would expose that to be the
cached version yes however if we are
offline fetch rejects and promise race
doesn't care if it's a reject or a
fulfill it will turn whatever settles
first which includes both so when we're
offline factors are almost immediately
gonna throw and be like I'm offering
can't do anything and our promise of the
race is going to say okay here's your
rejected promise have fun which is what
we want so what what I do in this case
is I'm just gonna put a little sneaky
catch to the fetched version and say if
you're gonna reject just turn into the
cached version to chinky so in params
totally standing that so what's gonna
happen now is I and now we have to think
about this so if the fetish rejects
we're gonna get the result of the cached
version which can be a response but it
can also be undefined which is what
caches thought mesh returns if it
doesn't have anything in the cache okay
so in this case what I'm gonna do is if
the response is not valid so it is
undefined
I'm gonna return the fetched version
so this covers all the possible outcomes
because we also have to think what there
is a way if we are actually online the
cash could risk resolved first but could
be undefined because we don't have
anything in the cash and then we want to
wait for the networks so what first
glance what appeared to be quite neat
and tidy you're kind of going it right
fetched and cashed but if the first
version designs its offline and go we'll
switch to the cached version but if the
cached version doesn't work out for
whatever reason we'll go to the fetched
version yeah
and now it gets everybody following
along there's gonna be a pop quiz
actually actually doing the pop quiz we
might actually have a quiz question
damn nobody's gonna get the rise well
the thing is as I said before fetch can
reject because when we're offline it's
gonna reject so there might be a way
that cache response first with I got
nothing I see people see Matt go on
who's one of our colleagues he just says
he I was just sick in my mouth gone T
I'm gonna so get back to him on our yeah
so what I'm gonna do now is fetch could
reject so if that happens if you're down
here and fetch rejects we know nothing's
in the cache and we're offline so I mean
what are we gonna do panic exact that's
my code so what I'm gonna do is I'm
gonna return a new response low loss
line with not a 4/4 done oh that's such
a grown-up way of doing it I know I just
be like I am German okay I would have
been my yeah I don't
so let's comment this out for a second
reload the page get the new Service
Worker any errors looking good looking
good up for a 4 on the localhost what
did I do wrong no no at this point I
will probe I would try me his rubber
duck anybody heard of the rubber duck
theory yeah for your hands going up if
you not heard of it the idea is that you
have a rubber duck on your desk and when
you hit a bug you introduce yourself to
the rubber duck hi I'm Paul here's my
problem and as you explain your problem
to the rubber duck in this case me you
tend to go oh oh I did that I did the
thing with the thing it's fine
thanks for a baduk and you go back and
you fix your bug often by just talking
it through with somebody apparently even
an inanimate duck is enough
how's it going I'm 31 cashed with addy
it's a bug
it's a type thank you see I think if
you'd had linting on YouTube you'd have
got that a plus so everything shuts
totally still be working we're still
fetching everything we're putting it in
the cash yet so let's fix that okay so
we have this thing done which basically
does the right thing just believe me I
do I'm just okay and now we're gonna
talk about the caching this one it's
actually simple so what we're gonna do
is we're gonna wait for its erm as
simple as like because I I'm looking at
the other one so we're gonna wait for
the fetched version we're gonna wait for
our fetch we're gonna open our cache
caches open I'm gonna call this one
dynamic because we're so we have the
static self this is this is the stuff
that we're kind of going oh we didn't
have this to begin with so maybe for
example this would be where you'd store
your spew your posts the stuff that
changes over time right maybe
user-generated content incidentally if
you're taking this approach make sure
that you have some kind of purging
strategy otherwise your caches can grow
forever more hash tag topical there you
go so you want to make sure that you
have a way of getting rid of old stuff
Victor
I'm just so we wait for the response we
went for our cache and then we put the
response in the cache done almost so
we're going to as I said before the
fetch can reject if you're offline so we
are just going to catch that error and
just good long not do anything about it
and also right did I miss anything
hey you won't grown up anymore so this
should be working right so okay so oh no
it's
we have actually something subtle which
is why I almost forgot about it so let's
imagine this the cache got nothing that
means that our response with returns our
fetched version and then we get into a
wait until and we want to store our
fetched version so we're using fetched
version twice oh oh and this one I know
this one that doesn't work possibly the
body
of efetch is a stream and you can only
consume at once right so what we're
gonna have to do is we're gonna have to
do a fetch copy so this is the same as
the fetched version but the response
should be cloned and then down here we
can wait for the copy instead of the
fetched version
okay so let's reload and see if this
works reload new serviceworker and
another reload so we can still go to
about we can still go to contact all
good and now let's go to the
applications panel and go offline reload
still works about cool contact cool misc
is not gonna work because we haven't
visited Miss just yet so this is just
gonna put our up our great spinner okay
we want to find a way to kind of handle
that one nicely and be like sorry can't
get this off me not today though no I
mean he's almost like you're saying with
time constraint that I keep interrupting
you yeah it's almost like it's revenge
for me for all that doesn't work so is
that we cannot refresh here it just
doesn't work well because errors as well
well yeah because I just no no no it's
great okay so in the dynamic we don't we
have the root page but we only have the
partials for about in contact so that's
why we can only refresh what offering on
home but not about in content because we
don't have the complete page cache just
yet yeah so a bit of background for you
when we made this originally each
individual page we serve the whole thing
and then on the updated version we only
pulled in the bits that we actually
needed for the xhr so that when you go
to from home to about we only pull in
the little bit that was needed and so
what we're saying is that the that the
thing that's caching something caching
the changed bit rather than if you
refresh it goes well I haven't got the
full about page or the full misc page so
we need to figure that one out so what
we're gonna do is and this is read
actually as exciting we're actually
going to do the templating in the server
core now so we're gonna pull in our
header partial or footer partial and do
the assembly off these partials in the
satiric are the same thing we built on
the server side in the server side
rendering episode we're gonna put that
into the serviceworker so the first
thing that we need is our partials so
I'm just going to sneakily put those in
our static cache which is headed at
partial HTML and all
so footer just do you see what these
look like they're just partials the
startup document with a little bit of
this is the wrong document but it's
similar
let me check where it is there it is
it's just basically the top of document
at the bottom and we put our own content
in between and there's a little bit of
templating magic but you also gotta take
care of so now we have the partials in
our set of cache and now we to figure
out how when is this request for a web
page for one of our top-level pages
instead of any assets or other links we
might add later that seems like
something that doesn't have partial on
it and would have gone to the dynamic
absolutely soft this when we built the
backend and we have this great reg X are
you sure you don't just reuse the code
in the kind of isomorphic way this is
almost what we are doing almost almost
okay and I'm not going full isomorphic
because I think isomorphic has the flaw
that it assumes you have note in the
back end which mmm
sometimes or maybe most of the times
it's not the case okay so we're gonna
when you wanna do templating in the
backend choose a template language in
this multiple language binding so
whatever you use in the backend you can
use it in a serviceworker and the
backend alright so on the fetch we're
going to see if our top level section
red X matches our event parsed URL path
name and if that's the case we can call
our function that we about white which
is gonna build the site if not we're
gonna use the exact same code that we
just wrote so we are gonna write both
site which is gonna be interesting
so event respond with what is going to
have them in here obviously we gonna use
an async function because then nice and
I'm gonna do these because I want to
forget them
so the first thing that we need is we're
gonna need to get a hold of our files so
the files that we need our caches start
match header dot partial so again those
from the static cache because we know
they're there yeah the footer and in
here we are gonna basically use our
stale wire revalidate function more or
less with the event
parsed URL to string plus partial gotcha
so you base
okay you need a comma after that one I
do so actually that's and because both
caches match and everything else is
gonna be promised we are gonna to we're
gonna wrap this in promise Dada
oh so this is good but if you paid
attention you know that stale while
rubella bait doesn't actually return the
promise or return anything yeah so so
what we're gonna do now is basically we
are gonna use this function and write a
little wrapper on it that actually turns
a promise and this is one of the nice
and get ugly things I don't fit in so
stale well bow requests so this is the
request URL and this is gonna return for
all we know a promote from most I
shouldn't monkey I've don't I make so
many typos when I'm typing is
embarrassing I never and yet you do yeah
so we're gonna call our old code
function which takes an event we're
gonna build our own event now are you
gonna pretend to be an event object even
though we are not because the only
things of event that we're using inside
the stale while revalidate function are
respond with wait until and request so
our request is going to be request
because interesting both fetch and cache
take both request objects but also
strings so this will just work great our
respond with is going to be our resolve
function so that means whatever this
thing you can see been pointing it on my
screen yes well this thing so whatever
this thing resolves to is going to be
passed in to respond with which now is
the result functions of our new promise
which up here will give back the value
and also we need the actual wait until
so we can't really create that so we
have to pass it in so wait until so we
have to put event wait until dot bind
event however it's gonna get better
because I'm gonna writing a
serviceworker again so strikers are hard
so the thing is no service work is a
hard one don't look anything like this
mine are really late and they don't work
right that is true
Hey so the thing that thing is something
it just got fixed are we going I'm done
the thing that just got changed in this
bag but it's open in the browser is that
right now you can't call wait until in
sight respond with all the other way
around ok you can only do it at the top
level in the same take that the event
got dispatched so we are gonna have to
do our own wait until and what I found
out is a kind of dirty hack which I'm
just gonna use until this change lands
I'm gonna put a new promise in to wait
until and just save the result function
on a variable and just use that instead
so that means that the service worker
will now stay alive until the my wait
until will be called and all the
browsers should be happy even though we
are technically calling a wait until
function even those our own inside
respond with the last thing I want to
fix here is that we are appending
partial to the string but that isn't
technically always correct because this
might already be a partial request so
that it would be question mark partial
question mark partial which we don't
want the good thing is that we already
have a past year parsed URL at your
object which has search parents on
capslock search parents and we're just
gonna set partial so that means it has
already said nothing happens if it's not
set it will add the question mark
partial to our URL and we will always
get the partial thing ok ok we got a
pulse
we do the last thing we're going to need
is actually get the contents out of our
responses so our contents are the files
and of all of those we gonna get the
text ok so so you're making this request
for the header the footer the actual bit
in the middle and now you're gonna
you're mapping that by saying ok we each
one of those get the text for each of
those exactly however text is a response
so once again we have to put this in a
promise dot all because again fetch
resolves when you get the headers and
the metadata but then the body is a
stream
so that text basically returns a promise
that reached the entire stream puts it
in a string and gets it back to you okay
so now we have the contents our content
the thing that we actually pass back is
the contents joint because it's just
three strings we're gonna concatenate
them and then we're gonna return a new
response with content with our content
so this is basically how we do the
templating inside our serviceworker
mm-hmm
so let's reload this you're gonna get
the new service record in or not did I
miss something yeah that shouldn't stop
it from working oh thanks though mm-hmm
I'll fine you check the other logs
no I said I did uncheck it here Oh
service workers this is an interesting
bug usually those are synchronized but
apparently they're not thank you so I
got that but it's still not working is
it okay I'm just gonna unregistered my
service record something is clearly iffy
here
stop it does happen sometimes it is
canary and can happen oh there's like
three five service workers installed now
we should be on the safe side ah ah
interesting
how's your so as you can see it's toe
dot text that's exactly what is so the
default mime type of response is text
plain Lois great really not what we want
so in our response we have to add
headers content type text HTML reload
new service record reload hooray
but nothing works which is expected
because I didn't do the templating Oh
so I still have my template expressions
in years so now we actually gonna load
the templating library oh we used
handlebars right I don't anymore because
handlebars turns out to be like 80
kilobytes and I found a nice little
Telenoid
library called d-o-t which i thought was
really nice and not just dot dot well it
is do capital T so I don't know how to
pronounce it
- all right this is this is one of the
bits where I said this is a production
code because this song keeps coming up
in the
by the way people like really clarify
what we mean by it's not production code
so I basically exposed the entire node
modules folder yeah why don't you don't
do that in production
please don't but in this case it's just
the easiest way and you don't have to
actually think about my build steps in
the background how I'm actually bundling
this or whatever and also I not doing
any cache cleanup so if you actually
bump the version you're probably gonna
run on and run into problems because old
files might still lie around
so there's definitely things that I'm
just skipping over for sake of brevity
and because this is already complicated
okay so this what I was saying earlier
about the kind of purging of caches yeah
make sure that cache invalidation is
hard it is yeah but it is definitely
worth doing I don't know is it because
we said serviceworker enough times yes
it's like a free times in the mirror I
do it it's been really difficult at some
conferences I've just been whisked to
the other side of the planet we've got a
conference to do and there are other
people who would like to talk fine
actually let me think
where was that you're doing the dog all
the templating yeah it's literally two
lines here we go so our deal how long
has it been literally two more lines
well it would have been done faster if
you didn't you know so we're gonna check
your template function our template
takes event request go we gotta reload
good and now it should go back to normal
we're done and now the the test is to go
offline really we go offline
it still works we can reload on all the
subpages because we're offline and the
miss so doesn't work because we never
went to the page that's fine and I'm
damn good
that code that that code will get a lot
of comments and and will be pushed to
get up and we will post the link in
questions at the Surma on twitter at era
tourists and you can mostly bug me
because he didn't write it and he
doesn't understand it that's reserved
then laughing but they know it's true
alright thank you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>