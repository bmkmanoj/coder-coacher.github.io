<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Service Worker Libraries, Totally Tooling Tips (S3, E6) | Coder Coacher - Coaching Coders</title><meta content="Service Worker Libraries, Totally Tooling Tips (S3, E6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Service Worker Libraries, Totally Tooling Tips (S3, E6)</b></h2><h5 class="post__date">2016-06-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IIRj8DftkqE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so you could write your own Service
Worker code but we've actually got a few
libraries that can help you out with
your stuff so I think when you start
writing Service Worker stuff you end up
writing a lot of boilerplate to a
certain extent yeah like there's common
patterns that I think everyone wants to
do
the first one is everyone will have to
static assets they're gonna want to
catch stuff that you know might make up
an application shell um stuff that might
be just like images and CSS and icons
and so on yeah things like logos are a
great example you'd probably want to
cache them up from because they rarely
change and you've got solid control over
them and they're just always there yeah
so for the first thing for that
pre-caching step there is serviceworker
pre cache and basically what that is is
it's a runtime step and all it does is
you can basically do one of two things
well now you can do two things with it
one of them is just glob for a certain
set of files you pass in a path and then
you can basically say a regex of like
well I want anything in these
directories that ends in Jas HTML CSS or
whatever you want and that is just it
we'll go find them and it saves them but
it also does fire visioning yeah so
changes to your build process will also
update your serviceworker so you don't
have to take care of our vision yourself
exactly and the nice thing with
serviceworker pre caches is super
efficient yeah so normally like when I
think I first wrote my serviceworker
what I ended up doing was just saying
delete the entire cache and create a new
cache with almost all of the same assets
apart from one that had changed so
service like a pre cache will only
update that one that is old and needs
updating yeah super cool and it's got
good best practices built in works
really well on its own but also if
you're using gulp of grants or whatever
have you it plays well with us as well
yeah exactly because it's just a node
module the other thing that it does is
you can say for this endpoints so you
might say for the home page you can also
say it's built up of these individual
files so templates that's also super
nice because again it will cache the
home page but it won't change into this
update yeah
and serviceworker pre cache uses a cache
first approach to tackling things so you
always get like things your assets so
really really fast yes so serviceworker
precache
acts under the assumption that basically
once you've cashed something you'll only
ever get it from the cash that's it
until you do a new build you release a
new service worker then it'll get
updated but it's configurable enough to
allow you to go and switch that up to
Network first - another strategy it's
super cool the one thing that I would
say everyone should check out is an
option called handle fetch which is an
option on SMB precache and basically
while you're developing if you set it to
force you're basically saying building a
serviceworker but just skip the fetch
event and what that means is while
you're developing nothing's going
through the serviceworker which sounds
kind of counterintuitive but once you
setup pre-caching it works you really
don't want to be using jokers at all you
just want it to skip and then you check
it another later stage so that's awesome
cool so we've talked about a helper
build time helper for dealing with sort
of your shell your static assets
what about runtime and dynamic content
so that's where you have to works and
what tool box is if you basically define
a path so it can be like an express
style route or it can be a regex and
then you either pass in a caching
function that toolbox has or you pass in
your own callback and basically what
that allows you to do is things like
this so you'd go toolbox router get
you'd pass in a regex in this case we
can say forward slash and you might find
home screen equals true as query
parameter for that I want you do toolbox
dot fastest and in this case - what's
our fastest is try the network and try
the cache and then whichever one returns
first give that to the browser and the
nice thing with it is the network will
once it's come back will be stored into
the cache it's super nice so it's good
for large or infrequently used resources
yeah exactly and toolbox comes with a
ton of different caching mechanisms
there mechanisms out of the box Network
first cache first fastest but there's a
whole ton of them
but it's entirely geared towards just
runtime caching and it's kind of nice
because you end up saying for this path
do this thing for this path do this
thing which you end up writing in your
own serviceworker if you just did it all
yourself anyway yeah I've heard a few
people say you know serviceworker you
know involves a lot of boilerplate or it
takes longer to learn first that wasn't
my experience personally but like using
pre cache and to
I found that a lot of the time it takes
like less than 20 or 30 minutes yeah
yeah things set up it's usually pretty
nice like over at my service work from
my site on my own it ended up with a
couple of like random Whittle issues but
it was useful for learning but
afterwards I realized that I grow a
place pretty much all of it with like
six lines of toolbox code which is kind
of depressing but at the same time it's
kind of reassuring though it's vaguely
on the right path yeah so yeah I'd say
people should just check it out and get
me go yeah it'll definitely save you
time so yeah check out sw-toolbox as
though you precache follow the links
we've also got code labs coming up about
these tools so yeah check those out as
well hit any issues then raise them on
Gap</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>