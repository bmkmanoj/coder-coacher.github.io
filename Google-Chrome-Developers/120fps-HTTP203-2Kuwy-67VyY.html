<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>120fps - HTTP203 | Coder Coacher - Coaching Coders</title><meta content="120fps - HTTP203 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Chrome-Developers/">Google Chrome Developers</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>120fps - HTTP203</b></h2><h5 class="post__date">2018-02-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2Kuwy-67VyY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we just talked about the web we should
talk about the web and I've plans for
the web so I wrote a blog post good good
stop III did not squeeze into a tweet
even though we have twice as many
characters now yes like I need a little
more explanation and I was the entire
event that sparked this interest is a
colleague telling me that there's iPad
pros and that these iPad pros run it at
120 Hertz 100 it's double that's double
the normal number 30 times 2 so yeah
most devices that we have worked with so
far run at 60 frames a second or at 60
Hertz right because it I remember in the
days of like CRT monitors you see quite
a variance of gal a 24 Hertz 30 60 yeah
I mean for a computer monitor you would
tend to run at 60 75 100 late oh yeah
right
because the higher the refresh rate that
less flicker yeah the less iPad it was
on the scale of zero to a bird it's like
how long can you watch it before your
you know tears of blood that sort of
thing but then once the CRTs went away
everything just 60/60 across the board
laptops like the TV's can do it
differently they want to synchronize the
framerate but because also 24 you know
soldered takes to have multiple 24 which
is under it's an issue right and
Americans TV you run it 50 American TV
runs at 60 European runs at 50 European
runs at 50 why just look sorry just
allow me to remove my sighting I think I
I think I just tapped into your interior
I Irish LT I've really I've done I did a
bit about this in a talk a few years ago
I so I did a lot of research into it
yeah it was all based around the power
frequency yeah exactly they could just
sink using the wave form of the power
supply so where 50 Hertz here 50 Hertz
in a lot of Europe a 60 Hertz in America
and in other places I think so but yes
we also we all decided as often happens
well let's go Oh we'll go with the
American thing whatever it said I mean
60 sounds better than 50 whatever we'll
do that which I won't we take something
it is
nice part of a hundred that's good 60
let's go and here's the thing if we went
with fifty four fifty we would all have
more time on our frame budgets right yes
a significant amount of time longer to
get a frame together but know
milliseconds more exactly but but the
case that's not the case so and that's
by anything like everything has been
sixteen but now we're gonna have even
less time well kinda
yes if you want to make use of the heart
and twenty Hertz
yes but the problem is that because
every device has been running at 60
mm-hmm
60 has someone become an important
assumption right there there is a good
amount of code out there that doesn't
actually consider how much time has
elapsed since the last frame who would
write such no Jake what write such code
so yes so on on Twitter we were talking
about this because because this was from
like an Apple engineer what so the thing
is I look at the iPad pros hey look at
how 20 Hertz and I was like this is
amazing this looks so good it actually
makes difference which I was honestly a
bit surprised by I was dubious whether
you could notice a difference but yeah
because you if you think about you have
60 frames a second especially with fast
motions you have more in between images
where you make motion blur seem much
more real yes
another having like three individual
pictures from A to B you will have now
six yes absolutely and it makes more
your brain will think even more it's an
actual motion and so I was asking what's
the plan like your wrath on the iPad
runs at 60 requests when I mention frame
my assumption would be you would get a
request animation frame 120 times a
second and you do not and you do not to
get 60 you get a 16 and that made me sad
yes basically meant whenever you were
using a animation framework that does
the JavaScript animation with JavaScript
which I think at least parts of green
sock for example do you wouldn't get 120
FPS yes and I I tweeted it when a safari
engineer saying you know why is this and
I think they were saying oh well
we're worried about like legacy code
that assumes 60 frames a second and I
was like come on probably not a big deal
probably not a big deal who does that
and they sent me back one of my campus
examples from four years ago admittedly
but still shame on you shame so that's
something so CSS animations don't have
this issue no they don't because you are
see it as by the very nature of CSS
declarative so either you use C this
transitions where you say go from A to B
in one second
it doesn't care about frame rate you
don't get visibility into every frame
same with CSS animations mm-hmm same
with web animations API sweatshirt
Safari is working on it's not behind the
flag so you can start using it which is
really cool
oh no I did not know that yeah if you
use these technologies the animations
will run at a hundred fifty frames per
second and that's really cool so what's
the answer here for
requestanimationframe what can we what
we do how can you get that to is it's
gonna have to be opt-in is that it's my
fault it's gonna have to be opt-in but
then even that demo I did it was some
snow snow fell and so on 120 Hertz snow
falls twice as fast it's just a blizzard
it's fine we can gloss over that exactly
and then even if we solve that assuming
we have a Raffles 120 Hertz now we still
have a problem because as you said we
have twice the framerate and that means
a budget in less time to do it and and
so with some quick math in my head I
will tell you okay we were running it
you would have an 8 millisecond budget
per frame that is half of 16 which we
currently have exactly right the problem
is that the work the browser has to do
stays fixed
and I think right about now it's safe to
say it's between 4 and 6 milliseconds
right on a desktop machine I mean it
might change your mind it may vary but
that means on 60fps you still have way
more than half left because let's say
that you have seek the browser needs 6
milliseconds you have 10 left or certain
20 fps you have 2 left
oh that's not a lot of time and so
there's of course there's work for the
browser to do optimizations to only do
work really necessary to make
things that have to happen really fast
thinks that the browsers can optimize
but also I think the ecosystem needs to
change it needs to look into moving
writing things in a way that they yield
often to the browser mm-hmm that you can
now Mesa get to here is my little chunks
of work and every whenever you need to
ship a frame in between here's the
points we can do that
so request idle callback becomes even
more important even more ruled and the
second tool that you have and that not
very many people use web workers where
you can split up an actual separate
thread and to work in there and you can
block in there you can do all kinds of
work the main thread won't care and will
stay responsive so something to prepare
for in 2018 definitely there's an
opportunity to if we did have a go for
another function name I think there's an
opportunity to rename
requestanimationframe to something a
little bit more meaningful like the best
name is it like yeah so if it was like
before render I request an animation
frame it right</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>