<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Send SMS Text Messages From Node.js | Coder Coacher - Coaching Coders</title><meta content="Send SMS Text Messages From Node.js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Send SMS Text Messages From Node.js</b></h2><h5 class="post__date">2017-11-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/980wnspXLe0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I want to give a huge shot out to
today's sponsor male tag male tag is a
Chrome extension that allows you to
track your emails in real time for free
it also lets you track other cool things
like link clicks email reopens and even
the device that was used to open your
emails be sure to check out male tag by
clicking the link in the description
below hey guys in this video we're going
to be creating a nodejs application that
can send SMS text messages and we're
able to do this because we're using a
service and an API called neck smo that
is one of the best in my opinion
compared to some of the other ones that
there are available now there's a free
trial but if you're gonna use in
production then each message is I think
like a half a cent or something like
that it's actually pretty reasonable and
it's really easy to use so it is a
service that I would recommend alright
and I'm not working with them they're
not paying me there's no affiliate link
or anything like that it's just a
service that that I think is pretty nice
so you're gonna have to create an
account so just go to sign up you're not
gonna have to edit add any credit card
information or anything there's a trial
I think you get like two dollars to
start with and like I said it's like a
half a cent per per text alright so just
go ahead and create an account you'll
have to validate your phone number and
then once you do that let me just log
into my account so once you do that
you'll have a dashboard like this where
you'll have your key and then you'll
also have your secret alright now I'm
gonna change this up after anyway so you
don't meet doesn't matter if you see
that but wherever my phone number is is
will be blurred out so this is the the
back end we will need the API the key
the stuff for the application later on
now this is what we'll be building it's
just a very simple interface we're using
skeleton CSS just to make it look not
horrible but we can just enter a number
in here so I'm going to go ahead and put
my number in
and a message I'll just say hello world
and let's send text and we get text
message successfully sent and again I'm
blurring out my number and there it is
right there alright so if I show you
this see if I'm going to show you that I
don't know if you guys are able to see
that but I just got a text and what it
says is hello world it's from a virtual
number that next Mel gave me and it says
hello world free SMS demo text message
so once you actually make your first
payment and you add some credits that
demo message will go away all right so
that's will be building guys hopefully
you enjoy this and let's go ahead and
get started all right so we're gonna be
starting from scratch here I have an
empty folder called no text app and I
have an opening vyas code and I'm using
my integrated terminal down here okay
and you can use whatever environment you
want whatever TextEdit or whatever
terminal that's just what I'm using so
let's run NPM and knit which is going to
create a package Jason we're gonna
answer some questions so name version
that's good description we'll just say
send SMS from node entry point I'm going
to use app dot J s and then just enter
through the rest all right so let's go
ahead and install our dependencies so
we're gonna say npm install if you're
using NPM less than version 5 you want
to do - - save it's made to make sure
that they get added to your package
Jason we're gonna need the Express
framework we're going to need ejs for
templating we're gonna need neck Simone
of course for actually sending the
messages we're gonna need body parser
body part of what is it body - parser
here and we're gonna need socket dot IO
so socket IO the only reason I'm using
that is so that after we send the
message we can just quickly send to the
client a response and then put that in
the browser okay so let's go ahead and
run that
and then I also want to install node Mon
and I want to install it globally that
way we can just run node Mon to start
our application and it will continuously
watch it and we don't have to keep
restarting it every time we make a
change so let's go ahead and do NPM
install - G node Mon and you may already
have this installed globally alright so
now that we have that stuff setup let's
let's create our app dot J's file which
is our entry file now a lot of this
stuff I'm gonna paste in because I do
videos like this all the time and the
beginning is always the exact same we
bring in all our dependencies so we're
bringing in Express body parser ejs next
mo and socket dot IO
alright that we want to anit our app
with Express by creating a variable
called app setting it to Express alright
now for the middle where the ejs
template engine gets some middleware as
well as the body parser and then we also
want to set the public folder the public
folder is where our client side
JavaScript will go and that's going to
handle the event listeners for the forum
things like that so I'm gonna paste this
stuff in so first thing is the template
engine setup we're just saying app dot
set view engine HTML and then app dot
engine HTML is gonna be ejs render file
that way we can use dot HTML as our file
extensions for our views
all right this line here is just saying
that the public folder that we're gonna
create is the static folder ok that's
where our static assets go including the
main J's file and then this is just the
body parts or middleware I'm sure you
guys have seen that a million times if
you viewed if he views node before so to
start our server let's first of all
define a port I like to put the port in
a variable so let's set that to 3000
and then let's say it's a start server
I'm gonna put this in a variable called
server and the reason I'm doing that is
because we're gonna use saw socket IO
and we're gonna need that variable so
when here we'll just say app dot listen
we want to listen on whatever is in that
port variable which is 3000 in our case
and then I'm just gonna put an arrow
function here and do a console dot log
we'll throw some back ticks in here so
we can use the template literal and
we'll just say server started on port
and then the syntax for a variable is
money sign and curly braces and we can
put in our portable all right so if we
save that we can run node app that'll
start the application but like I said I
don't want to have to keep restarting it
so I'm gonna stop it with ctrl C and I'm
gonna use node mana instead okay so that
will constantly watch it now if I go and
I open a browser that's not it that's
the old one if I go and open a browser
and say localhost port 3000 we're gonna
get cannot get slash because we don't
have a route yet alright so let's go
ahead and create a route we're gonna go
right here and we'll define our index
row so app dot gets slash and then we're
gonna put an arrow function here
okay routes take in a request and
response and then all I want to do is
render a view so we're gonna say res dot
render and we want to render a view
called index now we don't have any views
defined yet or are created so we're
gonna go ahead and do that so let's
create a folder called views and inside
here let's create a new file called
index dot HTML
all right and then here I'm just gonna
say test so let's go ahead and check our
site here reload we get tests so now
it's rendering the index view now from
here we want to create our HTML so many
I'm using Emmet so I'm going to do
exclamation tab that'll give us our
basic head and body tags for the title
let's say we'll say node SMX texting now
for the UI I'm gonna use skeleton CSS
which is a very simple framework it's
actually not even a framework it's a
boilerplate it just makes things look a
little better so we're gonna search for
a skeleton CSS CDN so we can grab the
CDN so we'll get it from CDN J Escom
we'll just say copy link tag and we're
gonna paste just put that right in the
head alright so once we do that we can
start to create our HTML so let's go
down to the body create a container
inside the container of an h2 and we'll
say send SMS message and then under that
we're gonna have a bunch of inputs okay
so let's do inputs and I'm gonna give
this a type of tell okay that's actually
an html5 form type and then for the name
let's say number ID I'll say number and
let's give it a placeholder and we'll
just say enter phone number okay so
that's the first one let's create
another input actually going to need two
more the second one is going to have a
type of text and this is going to be the
message so let's call this let's call
this msg for the name and the ID
and then we're gonna say enter text
message okay and then this last one is
actually going to be a button so we're
gonna say type button and it doesn't
need a name but it needs an ID so the ID
will call button as well and it needs a
value okay so value will say send text
let's also give it a class of button and
then button primary which is a skeleton
class so let's save this let's take a
look okay so that's what it should look
like now I want a paragraph right here
with nothing in it just as a placeholder
for the response that we get so let's
say P dot response so we'll create a
paragraph with the class of response all
right and then down here right above the
body tag we want to put in two scripts
okay one is gonna be two socket dot IO
which will be slash socket dot io /
socket dot IO dot J s all right and then
we want our client side script which is
gonna be inside of J s / main J s and
save now this J s folder this is going
to be in our public folder which we
haven't created yet
now we defined our public folder as the
static Express folder right here so
let's go ahead and create that
so we'll say public and inside there
we'll have another folder called J s and
then another or a file called main J s
okay so this is basically our
client-side JavaScript so from here
let's get the the values of the form
okay of the inputs so I'm gonna say
Const and let's call this number input
set it to document dot
get element by ID and as an idea of what
number I think and yeah ID number and
then let's create another variable
called text input set that to document
dot get element by D and that had an ID
of message and then we want the button
so document dot get element by D button
and then the response now the response
was a class so when I say document dot
query selector and then dot response ok
query selector basically works like
jQuery so that brings in all of our UI
variables now we want to do is check to
see if the button was clicked
so we'll say button dot addeventlistener
and we want to listen for a click ok
once there's a click then we want to
call a function called send and then
there's no options so I'm going to just
pass in false all right now let's create
that send function okay so for send
we're gonna create a variable called
number and what we want to do is take
that number input which is the the input
itself and then we want to get the value
from it now I'm going to remove all non
numeric characters by saying dot replace
and we can pass in an expression here so
our expression is gonna be forward slash
back slash capital D and then /g ok and
then we just want to call my and we want
to put an empty string there this is
going to just make sure that there's no
non numeric characters all right and
then we also want the message or text
and we're going to set that to text
input
dot value okay so now we have whatever
is entered in the the fields now we're
gonna have to make a request to our
server a post request with this data so
we're gonna use the fetch API for that
so let's say fetch and then we're gonna
pass in here slash because we're making
a request to just slash the index but
it's going to be a post request so we
want to specify an object here with a
method and the method is going to be
post okay in addition to method we just
want to add headers headers is an object
and we want to make sure that we add the
content type here so content - type and
that's gonna be application slash jason
okay that's the content type that we
want and then we just want the body so
right here we'll say body now we want to
turn this into a jason string so we're
gonna run it through a function called
jason dot stringify yeah step the right
Jason dodge stringify and then we're
gonna pass in here an object with number
set to number and then was the other one
text set to text all right and yeah that
should do it I believe wait a minute
this body this shouldn't have curly
braces like that
okay so that will make our requests now
to get the response when you use the
fetch API it uses promises so to get the
response we use dot then so in dot then
we just want to put function and then
that's gonna give us a response and then
let's do console dot log that responds
okay now if there's an error we can do
dot catch okay and that will give us an
error so let's do function and that
takes in an error parameter if there is
one and then we'll just console dot log
the error alright and that should do it
so let's save now what we need to do is
catch this on the on the server side
okay so let's go to our app J s and
let's create our post alright so we'll
say catch form submit you'll say app dot
post and it's gonna be sent it's gonna
be slash now even though this is slash
they're different they're different
methods get in post so it's okay alright
now what we want to do here for now so
you want to first of all put in our
arrow function
and it takes in request and response and
let's um first of all just say res dot
send and we'll pass in here request body
and then let's console dot log request
dot body now request dot body holds the
form fields that are submitted so that's
that's what I want to see it's what is
actually being submitted which should be
the number and the message so let's go
to our application and make sure we
reload excuse me and we're gonna just
put in the number in here just a fake
number and say hello and send and now
down here in our console you can see we
have an object with the number and the
text all right so now that we have that
it's time to implement next moment
alright so first thing we need to do is
initialize it with our API key and
secret so let's say an it next mo when
we do that by creating a variable called
next mo or whatever you want to call it
and then say new next mo okay we need to
call its constructor and then inside
here it takes an object with an API key
oops API key which will be a string I'll
fill that in a minute and then API
secret and also fill that all right now
we're also gonna set the debug mode so
I'm going to put a comma right here with
another object and we're just gonna set
debug to true that way we get some extra
information so let me get my API key and
secret I'm gonna go to my next mode
dashboard and from here we'll grab the
key put that right in there okay we also
want to grab the secret and put that
right in there I don't care if you guys
see that okay so now that we have that
setup we're gonna go down to our post
route instead of just
logging what's in the forum we obviously
don't want to do that let's first of all
put those those very those values that
come in from the forum in two variables
so we'll say const number and we'll set
that to request dot body dot number okay
we also want the message I'm gonna set
I'm going to say text equals request dot
body dot text all right so now we have
those in variables now we need to do is
take that next moment variable and we're
gonna call dot message dot send SMS like
that okay now this is gonna take in a
few things first of all it's gonna take
in your virtual number now your virtual
number is in your dashboard it's
actually down here I have this blurred
out but it's the it's the one that's not
your number okay it's the second one it
says that dash D from equals and then
that's your virtual number okay I don't
care if you guys see mine so I'm gonna
just go ahead and paste mine in alright
and then we want to put in the number
which is this right here coming in from
the form the text which is the message
and then the type okay for type we want
to say Unicode
alright let's put a comma here and then
we're gonna open up some parentheses
we're gonna use an arrow function so
first is going to be an error if there
is one and then the response data so
what comes back so we'll set that to an
arrow like that and then inside here
we're first gonna check for the error so
we'll say if error then what do we want
to do we'll just console dot log whoops
the error okay and then else let's do a
console dot derp which will just kind of
list out everything that that it gives
us back and we want to pass in response
data okay now we also want to get the
actually we'll do that after will do the
socket dot io stuff after I just want to
make sure that we can actually send the
message so up to this point we should
actually be able to send the message so
let's go ahead and save now one really
important thing that I want to mention
is that if you didn't already make a
payment you're not actually a premium
member yet and you're still using the
trial you have to whitelist any numbers
that you're gonna text so to do that
let's see where is it I think it's in
numbers let's see so this is my virtual
number I forget exactly where it was
verify maybe no all right so let's just
search for next mo test numbers
this link right here alright so yeah
this is it so it's dashboard next one
column slash test numbers and you want
to put your number that you're gonna
text into this box and click Add okay
and I'm using my own cell phone number
so that's why this is blurred out up
here alright so now that you have your
test number let's go ahead and try it so
we'll go to our application and let's go
ahead and reload and make sure that you
put if you're in the US make sure you
use your one in front of the number so
I'm going to put one and then my number
and I'm just gonna say hello from node
and let's go ahead and send now we don't
see any of us anything happen here
because we didn't implement socket IO
yet to send back the response but he
just heard that I just got a text and if
you can see I don't know I have no cool
if you guys can see that I'm gonna shut
off holy I thought my phone died so
you can see it says hello from node and
then it has just the demo thing that's
because we're still in the trial period
if you get rid of if you make your
payment that's gonna go away all right
so we know that that's working now the
last step is to implement socket dot IO
so that it sends back a message and we
can put it in the in the Dom here
alright so let's go back to vs code and
down here you can see stuff that it gave
us back the message ID the two number
I'm gonna have to blur that out the
remaining balance that you have which
but like I said by default they give you
two dollars to start with so this is my
remaining balance and I've sent about
six messages or so and then message
price the actual price of the message
alright so now what we want to do is we
want to send this some of this data to
the client using socket IO
okay so for that we're gonna first go
ahead and go down to the bottom here and
clear out my terminal as well and then
we just want to connect to socket dot IO
okay so what we're gonna do is create a
variable called IO set it to socket IO
and then just pass in that server
variable all right and then underneath
that we're going to take that IO
variable and say dot on connection okay
so when the socket connects then we're
gonna run an arrow function okay and
this is going to take in a parameter of
socket and then all I want to do is just
console dot log and say that we're
connected so what I'll just say
connected and then right under that we
want to do an IO dot on disconnect okay
so on disconnect then we want another
arrow and we just want a console log
that were disconnected so now we want to
go up top here where we just logged the
data so after we sent the message it
just logged that data down here but what
I want to do is I want to emit some data
back to the client so let's say get data
from the response okay so this response
data right here and I'm just going to
say Const data set it to an object and
we want to set the ID the message ID
which we can get from response data dot
messages it's an array so we want the
first index and then we want the message
ID so message - ID all right and then we
also want the number
so we'll say number response data dot
messages first value in the array and
that's actually an in event in a key
called - alright it's the number - or
the - number so now that we have that
data object we just want to emit to the
client okay so we do that by just saying
IO dot emit and we're gonna give it a
name will say SMS status and we want to
pass in the data okay and that's it so
let's save that and then we can catch
that on our client side so let's go to
our main dot JS file and we want to put
this in the let's say you actually we
don't yeah we just want to go let's go
right under the click handler right here
and we'll say Const sockets set that
equal to IO like that now the reason we
can do this is because we brought in the
script in if we look at our index.html
file we brought in this socket IO dot J
s script so we're able to use it all
right and then we basically just want to
catch this right here SMS status so to
do that we just say sockets dot on SMS
status and then what we want to do
afterwards so we'll put a function in
here and that gets that takes in the
data because that's what we passed okay
right here we passed in data so we're
able to catch that on the client side
oops able to catch that right here so
now I just want to take this response
variable which is this paragraph right
here this p with the class of response
and we just want to call dot innerhtml
and then set that to
let's put in an H five here and then
we'll just say text message sent to and
then we can just concatenate the what is
it data dot number all right so we'll go
like that now we could use the ID
because in app J s we actually sent the
ID along to with this in the data object
that we passed that we emitted but the
ID is really long and ugly looking so
you probably don't want to use that but
let's go ahead and try this so we'll
save it and we'll go back to our
application make sure you reload it and
then we're gonna put in the number and
message we'll just say
final test and send text okay so we get
text message sent to the number and that
should come with there it is right there
and if we look so if you look at the
last one there there's a bunch of them
because I've done a lot of tests but I
don't know if you guys can see that the
last one should say final test all right
so that's it guys hopefully you enjoyed
this and you can find a use for it I
mean if you want to have like a your
application when I user registers and
you want to send a welcome message or
maybe a validation code something like
that there's a lot of uses for this but
that's it please give it a little thumbs
up if you liked it please subscribe if
you're not and that's it thanks so I
just want to give another shout out to
male tag who sponsored this video male
tag is a free Chrome browser extension
that allows you to track your emails in
real time I've been using it myself for
about a week now and I can't recommend
it enough on top of email tracking male
tag has a bunch of other features like
desktop push notifications that alert
you when your emails have been opened
link click tracking that shows that
people have actually clicked on the
links in your email and a ton of other
cool features again all these features
are completely free be sure to check out
male tag and click that link in the
description</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>