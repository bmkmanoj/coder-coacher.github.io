<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learning React.js [10]  Persisting Data To Firebase | Coder Coacher - Coaching Coders</title><meta content="Learning React.js [10]  Persisting Data To Firebase - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Learning React.js [10]  Persisting Data To Firebase</b></h2><h5 class="post__date">2016-02-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QY7Ibl37_08" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys up to this point we have
created our little to-do list
application here and it basically has
crud functionality within the view okay
so we can add stuff here all right but
once we reload they're going to be gone
all right so we need to have some kind
of database hooked up to this and you
can basically use anything you want
react is just the view like I said in
the past it makes no assumptions about
the rest of your application so what
we're going to be doing is we're going
to use firebase which is a really simple
no SQL database and it works really well
if you want something that that you want
to just get up really quick get up and
get going and it's free there's a free
account I think there are premium
accounts but the free one will suffice
for this so what you want to do is just
go to firebase and sign up for an
account once you log in you'll see an
interface like this and you just want to
create your app name and your app URL
which has to be unique all right I've
already created a database called to-do
list if I click on manage app it's going
to take me to the interface which is
just an empty database all right now
your URL will be up here and it should
be different from mine mine is to-do
list dev one but you should be different
all right so what we're going to do here
is this is going to be pretty easy to
implement we need to first include the
script all right so if you just want to
copy that
alright and then what we'll do is go
down and we're going to have to create a
life cycle method called component will
mount alright and that's the method you
want to use when you want to work with
an API or make Ajax calls you know stuff
like that all right so we're going to go
above render and say component will
mount
okay put comma there alright and this is
going to be really easy we're just going
to say this dot firebase ref is equal to
new firebase and we want to pass in your
URL air all right with 20 quotes and
then at the end you want to tack on the
collection you want to use in this case
I'm going to say two dues all right so
that's going to create a new reference
for us which we can use throughout the
application so what we want to do now is
we want to be able to persist the data
we add from the form all right so when
we submit a form it's going to go to
handle to do ad all right and you can
see we're just setting the state here so
we're going to go right here and we're
going to say this dot firebase RAF dot
push and then we're going to pass in
this new to do alright just like that
and that's it so let's save that and
then we're going to reload this alright
and let's say meeting with boss okay so
what adds here which is no surprise it's
been doing that but if we go to our
firebase now you can see we have a two
dues collection and we have this entry
here which has a unique ID that firebase
assigns to us and you can see it also
has the ID of four and then our text all
right so our data is persisting to
firebase just with that one line of code
alright so let's go ahead and add
another one I will say go shopping and
if we go over you can see I don't even
have to reload the page it just adds
automatically alright so that's how we
can persist the data when we add now if
I reload that it's going to go away
because we haven't set that up yet all
right so to deal with that we're going
to go back up to come
opponent will mount and what we want to
do here is call this dot firebase ref
dot once all right and then we want to
pass in here a string value and then we
have a callback function and that's
going to take a parameter called
snapshot all right and this code is on
the documentation then what we're going
to do is we're going to create variable
to do's and that's going to be equal to
an empty array all right and then what
we need to do is loop through that
snapshot so I'm going to say snapshot
dot for each let's see for each and then
there we want a function and then that's
going to take in data and then what I'm
going to do is console dot log data dot
Val all right now you can see that it's
returning the two to do objects that we
have in firebase all right so that's
what we want so what we want to do is
build up to do object with that data
through through each iteration so we're
going to save our to do equals an object
the ID we're going to set that to data
Val dot ID and then we have our text
data-value text all right and then we
need to take that to dues and we want to
push on to it that to do that we just
created all right so that's going to
happen with each iteration all right and
then what we need to do is set the state
to those to do so if we say this dot set
state to dues and to dues all right so
let's see what happens with this all
right so you can see down here we're
getting cannot read property set state
of undefined so it's not seeing this all
right or this is meaning something else
because we're because where we are
inside the the snapshot so to fix this
it's pretty easy all we have to do is
say bar and we'll create a variable
called that and we're going to equal
that to this all right and then we can
use that down here instead of this
alright and then if we go and reload now
you can see that we're actually getting
the to do is from our database all right
so we can now get rid of this stuff here
and just make that an empty array okay
so we're now fetching our data from
firebase and we can add to it
we'll say dinner with mom we add it if
we reload it's still there okay
persisted to firebase so we can now add
and add and read data from firebase
through our react application alright so
in the next video we'll look into
deleting these because right now we can
delete them but only from our state all
right if we reload they're back okay so
it's it's pretty much the opposite of
what we had so we'll get into that next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>