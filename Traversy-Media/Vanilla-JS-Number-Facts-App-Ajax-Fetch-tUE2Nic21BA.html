<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Vanilla JS Number Facts App - Ajax &amp; Fetch | Coder Coacher - Coaching Coders</title><meta content="Vanilla JS Number Facts App - Ajax &amp; Fetch - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Vanilla JS Number Facts App - Ajax &amp; Fetch</b></h2><h5 class="post__date">2017-10-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tUE2Nic21BA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's going on guys so today we
have a simple project we're going to be
building using vanilla JavaScript and a
data API and it's called numbers facts
and it's basically we can just type in a
number and it'll give us a random fact
for that number
all right we're also using bootstrap 4
for the UI so let's go ahead and type in
the number here I'll just say 33 and
we're gonna get it and just a random
fact it says 33 is the temperature at
which water boils according to the
Newton scale alright let's put in let's
say 100 and it says 100 is the minimum
distance in yards for a par 3 on a golf
course alright and we can just delete
and that'll be 10 so 10 is the number of
fingers on a pair of human hands that's
that's that's pretty widely known 1 is
the number of gods in monotheism so you
can see that any type of input here is
going to trigger a fact it's going to
fetch it from the API if we go ahead and
click this arrow over here we can we can
increment and decrease the number as
well and that'll change the fact all
right now we're able to do this because
we're using this numbers API which is
actually really cool it allows you to do
what we're doing it also allows you to
put in a random year and get fact for
that year so I'm gonna give you guys
kind of a little homework assignment
where after this you go and you build
your own application similar to this
that's gonna do the same thing but with
the years you can input a year and get a
fact from that or you could go ahead and
you could add a select box and add an
event so that when they when they choose
either a year or a number they get a
fact depending on if it's a year a
number alright so just just something to
kind of work out your brain a little bit
all right but that's what we'll be
building in this project guys hopefully
you like it let's get started hey guys
if you've been watching my videos for a
while and you really like what I do when
I've helped you out a lot consider
becoming a patron even for one dollar
per month it pushes me to keep bringing
you guys the best content I possibly can
there's reward tiers for discounts for
you to me courses personal support and
more so
check out the patreon link in the
description below for more info alright
guys we're gonna go ahead and get
started here now the API we're using is
at numbers API comm and it's very simple
what we're doing all we need to do is
make a request to that URL slash and
then a number so let's say 20 and it'll
just give us a random fact about that
number so what we're gonna do in this
application is in two ways okay so I'm
going to show you how to do it using
just standard Ajax using the xhr object
which is kind of the old way of doing it
I'm also going to show you how to do it
using the fetch API which is a newer
standard which is I believe it's
implemented in all browsers now it may
not be an internet explorer and edge
just yet I'm not exactly sure but it is
a newer standard so I wanted to include
both of those and this isn't easy enough
project where I can do that alright so
let's go ahead and get started I have an
empty folder called number facts so just
create that somewhere on your machine
and we're just going to create a new
file called index dot HTML and that's
the only file that we're gonna need for
this project all right so let's add in
some markup I'm using Emmet so I'm just
gonna do exclamation tab and it's gonna
give us our basic layout all right let's
change this title to number facts and
save and then I'm using something called
live server which is an extension for vs
code if you want that if you're using vs
code you can go down to this icon just
search for live server and go ahead and
click the green install button and in no
way do you need to use live server you
can just simply open up here HTML file
on your on your machine alright so now
what we're gonna do is we're gonna set
up our interface so we need bootstrap
for so let's grab that I'm gonna go to
get bootstrap comm go to get started and
we're gonna grab the CDN for the CSS
file we're not using any of the
bootstrap JavaScript so we don't need to
include jQuery and the bootstrap j/s and
all that just the CSS we're gonna paste
that right up here in the head
all right and then let's go into the
body here and we're gonna get started
with our markup so the body I actually
want to have a dark background let's go
ahead and open this file if you're using
live server you can say open with live
server and that'll open it up on your
localhost if you're not using live
server just open up the HTML file so I'm
gonna give body a class here of BG -
dark which is a bootstrap class because
I wanted to have a dark background then
we're gonna add in our container now I
am using Emmet so you'll see me do
things like dot container and then tab
and it'll give us a div with a class of
container now what we're gonna do is
we're going to put this in a grid okay
we want to use the bootstrap for grid
system and we just want one six column
div and that six column div will be
really narrow and we want to move it to
the middle so we're gonna have to add
margin Auto on both sides and there's a
bootstrap for class for that so let's go
ahead and put in a row class okay
whenever you use the grid system each
row you want to give a div with the
class of row and then we're gonna define
call MD - six alright so this will give
us our six column div inside here we
want to put in a card okay a bootstrap
card so we'll give it a class of card
and let's put an h1 in here and we'll
say number facts all right we'll go
ahead and save that and this is what its
gonna look like now we have some extra
classes to add to make this look how I
want for one thing if we were to make
this bigger you'll see that it's not in
the middle so this column right here the
six column div which goes from here to
here we need to add the margin on each
side too to make it Auto so it goes in
the middle so we're just going to add a
class called
MX - Auto and save and then that's gonna
push it to the middle okay all right now
the card itself I want to add some
classes too I want it to be blue so I'm
gonna give it a bootstrap class of BG
primary let's save that that'll make it
blue I also want the text
to be white and there's a class for that
called text - white save that another
thing I want to do is move it down so
I'm going to give it a class of Mt - 5
that's margin top 5 is a multiplier that
you can do I believe 1 through 5 let's
save that that pushes it down and then
finally I want to give it some padding
so we can say P - let's do P - 5 that
what I did know for and save and that'll
give it a multiplier of for padding all
around alright now I know this isn't a
bootstrap video but if he wanted to do
like padding just on the top you could
do pt 4 if you wanted to do it on the
bottom you could do PB if you wanted it
on the just the left and right you could
do PX and then top and bottom you could
do py all right just a quick little
lesson there but we want it all the way
around all right so I think that's good
for the actual you know the card and the
UI and stuff so inside here under the h1
let's put a paragraph and we're just
gonna say enter a number and get a
random fact okay so that's the paragraph
and then under the paragraph we're going
to put in our input this now this input
I'm gonna give it a type of number okay
and we don't need we don't need a name
or an ID what I do want to do is add a
class of form control okay now I want
this to be a larger input with bootstrap
for we can also add form control - LG
and that'll make it larger all right and
then let's see is that it I think that's
it all we need an ID so that we can grab
on to this in JavaScript so it's given
an ID of number input and save and there
we go actually know what let's put a
placeholder as well something I forgot
in the original one so we'll say Enter
any number there we go alright so that
should do it
let's see now underneath we're gonna
have where the fact pops up but that's
gonna be hidden by default but still
will create the markup so let's go right
under the input and we're gonna have a
div with the clock with the ID actually
of fact it's gonna have an idea of fact
and it's gonna also have a class of card
- body and and this what you see here
that I'm typing this is Emmet it's just
a shorthand way to do this all right and
then inside here let's put an h4 we'll
give it a class of card title and then
that h4 will just say number fact and
then under the h4 we want a paragraph
now this is where the actual fact is
gonna pop up okay so we're gonna send
the request to the API we'll get our
response back and we're gonna fill it
right here so we need an identifier for
this so we're gonna give it an ID of
fact text okay and I'm also gonna give
us a class of card text okay this is
just bootstrap stuff all right
now we don't want this number fact to
show initially we only want this to show
after we get the actual fact so what I'm
gonna do is just put in a style tag up
here in the head and we're gonna set the
ID of fact was it an ID yeah so ID fact
and we're gonna set the display to none
all right so we'll save that and now you
can see it's gone alright so that is all
the HTML that's all the markup now we
need to get into our JavaScript so let's
go down right above our ending body tag
and let's put in some script tags all
right and first thing I want to do is I
want to create a variable for the fact
this div right here also the facts text
so let's say let fact equals and then
we're gonna use document dot query
selector okay which is kind of like
using jQuery we can pass in any kind of
selector that we want so we're using an
ID of fact all right we also want to get
the fact text so let's go ahead and copy
that and we'll say fact text and that
has let's see that has an ID of fact
text so we're gonna add that right here
alright so now that we have those two
variables we want to create our event
listener because anytime we add an you
know we add a number in here we type in
a number or we use the arrow keys or
let's say we delete part of a number we
want this to fire off so we're going to
use the input event all right now we
need to create a variable for this this
actual input now this input has an ID of
number input so let's go ahead and
create a new variable here so we'll say
let number input and we'll set that to
document dot query selector number and
ID number input and then we're gonna add
an event listener to that variable so
say number input dot add event listener
the event we want to listen to is input
and then when that happens we're gonna
call a function alright and that
function is going to be called get fact
Ajax all right now like I said a little
while ago we're gonna do this with both
Ajax using just an xhr object you know
an XML HTTP request and we're gonna you
just do it using the fetch API so we're
also going to have a function called get
fact fetch but we're going to do that
later on after we do the Ajax so let's
go ahead and create that function
so we'll say function get fact Ajax and
let's just test it out by saying
console.log and we'll just say 1 2 3 so
if we open up our console with f12 and
we just put something in you'll see we
get 1 2 3 now well obviously we need to
get whatever is put into this input
right so we're going to create a
variable here called number set it to
the number input a number input dot
value alright because we already have a
variable up here called number input
that is equal to this this input box but
we want to get the value from it so
let's go ahead and console dot log the
number so now if I go we put any number
in here you'll see it will it'll log
okay and these colors here for these
these curly braces and parentheses
notice how these are purple these are
yellow because these are nested inside
of here this is an extension called
bracket parent colorizer and i was
actually referred to this by Dylan from
code coding tutorials 360 and I really
liked it so far it helps you it really
helps you not get you know messed up
with your curly braces especially if you
have a bunch of you know nested
parentheses and curly braces and stuff
like that so it's pretty cool but that's
what if you guys are wondering why my
parentheses and curly braces are
different colors and stuff that's why
alright so let's go ahead and get rid of
that console.log and what we want to do
now is we want to make a request to our
API with this number value so like I
said we're using xhr to begin with so
let's say let's we'll create a variable
called xhr we're gonna set this to a new
xmlhttprequest
all right now if you haven't watched my
Ajax crash course and you don't know
anything about what this is here I would
suggest watching that because I'm not
gonna go over it all here but in that
video I go over what this is what xhr is
we do a bunch of tests we make a request
to an outside API as well as local
documents so I would suggest watching
that if you don't know anything about
ajax so now we tec take this xhr object
and we call an open function and we want
to pass in here the type of request
which is going to be get and then we
want to pass in the URL so the URL is
gonna be the numbers API here remember I
told you if we just go to a number like
let's say 11 it'll give us the fact so
we'll just go ahead and grab that put
that in here now instead of always
making a request to 11 obviously that's
not what we want we want whatever's in
the in the input okay which is now in
this variable so what we can do is we
can just concatenate the number variable
like that
okay so that'll call the open method now
after we do that we want to do xhr dot
onload all right and we want to set that
equal to a function and then in here
this is basically what we want to happen
after we get the request all right but
before we do that let's go to the bottom
here one second yeah we'll go to the
bottom still make sure you're in the get
fact Ajax and we need to call xhr dot
send okay so once we send it we'll send
the request which is this right here and
then we'll get a response and that's
what's gonna go in here now when we get
that response we need to test to make
sure that it's status of 200 in HTTP 200
status means that everything's okay so
we'll say if
this dot status is equal to 200 then we
want to proceed so what do we want to do
first of all let's just make sure we're
actually getting it
so we'll say console.log and we can get
it with this dot response text okay when
you're using the xhr object this is what
we can grab it as it's response text so
let's go to our application and let's
enter a number and there we go so we get
a fact for the number two they've put in
twenty two we get a fact if I click the
arrow button anything we do is gonna
give us a fact now one thing that you
should take note of is that if I delete
that's fine if I delete again and
there's no number in here we're gonna
get something like this which is we
which is we don't want this so we want
to say as long as there are at least the
response is 200 and we want to make sure
that it doesn't happen this doesn't run
if there's nothing in here if there's no
input okay no number so for that we can
say and number is not equal to nothing
okay so as long as that number variable
which is the input is not equal to
nothing so now if I put in 4 that's fine
if I delete it and there's nothing in
there it doesn't run this code okay so
make sure you put that in there all
right now what we need to do is insert
it into the application now we don't
want to just log it now remember the
fact right here this whole div is hidden
by default because we put display:none
so the first thing we want to do is get
rid of that and we can say fact dot
style dot display and look alright
display is equal we're gonna set it
equal to block okay instead of none
because it's initially set to none but
once we make this request and everything
goes okay we want to set it to block all
right so so right now if I save and we
enter something
it's going to show now the fact text
itself isn't showing because we haven't
filled that okay remember we have a
paragraph with the idea of fact text so
what we can do we also put that in a
variable right here so we can take that
variable fact text and we can say dot
inner text and we can set it equal to
that response which we can get with this
dot response text alright so we'll save
it let's go ahead and add a number and
there's our fact all right and anytime
we do any kind of input it's going to
send that request and we're gonna get
our response and we're gonna fill it
here so the functionality is done but
like I said I want to show you also how
to do this with the fetch API in
addition to just Ajax xhr so what I'm
gonna do is I'm going to let's comment
all this out and we're gonna go down
here and we're gonna create a function
called get fact fetch okay and it's
gonna do the same thing that we did here
only it's going to be with the fetch API
okay so for that and and again I have a
crash course on fetch as well if you if
you want to really get in depth and
understand how it works then go ahead
and check that that crash course out now
we're gonna want the number value so I'm
just gonna copy this from the get fact
Ajax function okay so we just want the
number from the value here and then
we're gonna go ahead and say fetch we're
gonna pass in the URL we want which is
gonna be the same URL right here grab
that
alright so it's the numbers API comm
slash and then whatever is in this
number variable all right now the way
the fetch works is it returns a promise
so when you're dealing with promises you
want to do dot then
all right and then what happens is it
returns it as a response dot data okay
so what we want to do is we want to map
the response to response dot text okay
now if you're working with Jason if we
were returning Jason data we would set
this to response dot Jason all right now
we have to do another dot then because
like I said it comes in response dot
data so here we can take the data and
we're gonna set that to a set of curly
braces and this is where we can get our
data so let's just do a console dot log
all right and pass in data and then
another thing we're going to want to do
is at the end we're going to want to add
and put it here a dot catch and what
that does is if there's any errors it'll
give those to us and then we can decide
what we want to do I'm just gonna
console dot log the error if there is
one all right so let's go ahead and then
just change this up here from get fact
Ajax to get fact fetch save it and let's
see what happens if we enter something
so or console logging our response all
right so it's doing the same thing that
we did up here just in a different way
now what we want to happen is gonna be
the same thing we want to basically just
you know set the style of the fact div
to block and then put and then stick the
tête the response in now we're gonna
have to check to make sure the number is
equal to nothing so let's go ahead and
do that
I'm sorry make sure it's not equal to
nothing so we'll say if a number is not
equal to nothing then we want to proceed
so we'll just go ahead and copy what we
have up here okay let's get rid of that
comment all right now we're setting fact
dot style dot display to block because
it's initially set to none up here
all right but right here where we're
filling faq.txt this dot responsetext
isn't it's gonna be no because we're no
longer dealing with the xhr and ajax
like we did up here what we're dealing
with is this right here this data that's
what contains the response data so we're
just gonna change this to data
all right let's save let's go ahead and
add a number and there we go so now it
works the same exact way and by the way
if you put like a crazy number in here
it's just gonna give you like is an
unremarkable number or is an
uninteresting number if there's no fact
associated with that weird long number
all right but that is it guys hopefully
you enjoyed this like I said I would
encourage you to move on and try to deal
with the date because if you look at the
API you can also get facts from the the
date or the year and you can see the
format right here so it would be like
numbers API comm slash 10/3
slash date alright so think you can do
things like that and it gives you some
more examples and all kinds of stuff
down here alright so that's gonna be it
guys hopefully you enjoyed this and
click that like button if you did and
subscribe if you're not and I will see
you next time
hey guys I've just created a new discord
server that's open to the public the
goal is to have a place where people can
go to help each other out for
programming issues as well as just a
place to discuss new ideas and get
feedback I also check in daily there's a
channel to request videos on YouTube and
much more so if you want to check it out
just go to discord GG slash traversée
media</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>