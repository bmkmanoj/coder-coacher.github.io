<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a GraphQL Server [Part 4] - JSON Server &amp; Axios | Coder Coacher - Coaching Coders</title><meta content="Building a GraphQL Server [Part 4] - JSON Server &amp; Axios - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building a GraphQL Server [Part 4] - JSON Server &amp; Axios</b></h2><h5 class="post__date">2017-07-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BqfZZ0wDeMU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys welcome to the next video
of building a graph QL server so in the
last video we said that we made it so
that we could fetch customers we have a
customer type but we're using hard-coded
data which isn't very realistic so what
we're going to do is we're going to
install something called JSON server
that will give us a more realistic
environment and we're also going to
install something called Axios which is
an HTTP client to actually make requests
to the JSON server so let's go ahead and
ctrl C and stop the server from running
here and we're going to just clear this
out and then I'm going to say npm
install jason server and we also want to
install Axios okay and we'll do - - save
alright and then what I'm going to do is
I'm going to go to my package dot JSON
file and add another script here this
one is going to be jason : server
alright and then what we want to set
this to is jason server - - watch and
then the name of the file we're going to
use as our server so we'll say data
jason now even though we're using a file
we're going to be able to make post
requests and we'll be able to update the
file through HTTP so let's save this and
then we're going to create a new file
called data Jason and what I'm going to
do here is just add some some customers
so this has to be in JSON format so we
need to put double quotes around keys
and values so let's say customers set
that to an array and then I'm actually
going to just paste these in just to be
a little quicker okay let me just tab
this over
and we'll just fix this up so basically
we just have five different customers
okay so five different customers with
the ID name email and age you have the
same data structure but will be able to
treat this as a real database so or a
real API so let's save this and we'll
close it up and then what we're going to
do is go back to our schema J's file and
I'm going to just comment out the
hard-coded data we have okay and then
let's go down to our let's see first
we'll deal with the customer field now
what we were doing was just looping
through the data the hard-coded data and
outputting whatever that specific
customer was but what we're going to do
now is make a request a get request and
we're going to get the data that way so
I'll keep this for you guys just you
have it so I'm just going to comment it
out all right and then all we have to do
is first of all bring in Axios so that
we can make a request
Axios is an awesome client to make get
requests and posts and updates and all
that so let's say require Axios okay and
then we'll go back down and we're just
going to return Axios well you know what
first of all let's let's start up our
server our JSON server so I'm going to
create a new terminal and I'm going to
run NPM run what I call it Jason server
okay just to make sure that that runs
okay so that's running on localhost 3000
by default so if we go back to our
browser we can go to localhost port 3000
and that's our JSON server okay and you
can see we have our customers here and
it's basically working like a basic
restful api and if you want to learn
more about JSON server I do have a video
I did about two weeks ago and that will
show that will go more in
depth into this but that's not really
what we're focusing on we just need an
example of something to work with it's
more realistic all right so now that we
have that running let's go back to our
schema file and we're going to say
return
Axios axioms get because you want to
make a get request and we want to make a
get request to http and we're going to
do localhost port 3000 that's our JSON
server slash customers slash and then
the ID because if we go back to our JSON
server and we go to a customer slash one
that'll get us the first customer ok so
remember we can get the ID with this
args dot ID so what we'll do is just
concatenate it whoops and we'll say args
dot ID ok and then this is actually
going to return a promise so we're going
to say dot then and then that's going to
give us a response now one little gotcha
with this is that it's going to return
it in and in a data object so we just
want to basically map this to res
response data ok so let's go ahead and
save that and then we'll go back to
let's go to our first terminal and then
start our dev server so npm run dev
server ok so that's now running on port
4000 so we have the JSON server on 3,000
we have our graph QL on 4,000 so now
let's go back to graphical and it's just
let's just real refresh this completely
all right and now let's see if we can
fetch a customer so we're going to put
our curly braces and customer let's say
with the ID of let's do four because we
know the hard-coded data didn't have
before
so we're fetching we're fetching it
through JSON server now and let's say
that we want to get back the name and
the email and the age so we'll run that
and there we go Sam marks so if we look
at our file our data JSON file and we
look at four that's Sam marks so it's
making an actual request using Axios to
JSON server and returning it through
graph QL okay so hopefully that makes
sense hopefully I haven't lost you guys
so that what I want to do is I want to
make this work so customers right now
will get an error because it doesn't
know what customers is because this
hard-coded data is now commented out so
we want to make another request using
Axios so I'll just copy this one and
inside the resolve let's paste that in
now we don't need this / ID on the end
because we're getting all customers
right so let's do that
whoops I got rid of the quote and then
again we're just going to it's going to
return a promise we're going to say dot
then and we're going to map it to res
data so let's save that and now if we go
back to graphical and let's just say
customers actually let's put that on a
different line so customers and let's
say we want the name and the age so
we'll run that and there we go it's
going to give us all of our customers so
we're now working with more a more
realistic environment in the next video
we're going to start to work with
mutations where we can actually edit
this data from graphical and obviously
we could edit it from a client if we
connected it to our server all right so
I will see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>