<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Flask From Scratch [Part 5] - Edit &amp; Delete Articles | Coder Coacher - Coaching Coders</title><meta content="Python Flask From Scratch [Part 5] - Edit &amp; Delete Articles - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Flask From Scratch [Part 5] - Edit &amp; Delete Articles</b></h2><h5 class="post__date">2017-04-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Us9DuF4KWUE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's going on guys welcome to the
next part of the flask application
series in the last video we got a lot
done actually we had the dashboard we
made it so that we could add an article
to the dashboard how we could list all
the articles on the dashboard and also
on the front end as well so these are
coming from the database so now we want
to do is we want to work on the editing
of the articles okay we have the edit
button right here but we don't have it
doing anything so let's go ahead and
create the route for it so we're going
to go to what the hell we're going to go
to app PI and we'll go right under the
add article actually you know what we'll
just copy this ok we'll paste that in
this is going to be edit edit article
and for the route it's going to be edit
article and then slash and let's say
string ID okay we're going to pass in an
ID we need to leave that because we
should only access this if we're logged
in let's change the this to edit and
then we need to pass in the ID as a
parameter okay so we need to before we
we need to have the form we need to fill
it okay so we need to do a query to get
the article by this ID and then have it
fill our form the edit form so to do
that we're going to go right up here and
we're going to do let's see we're going
to create cursor so it's a cur equals
mysql dot connection dot cursor
and then what we want to do is get the
user by goodbye it's ID okay because the
IDS being passed in here not user
article okay so we'll say result equal
to corrects acute and then this is going
to be select all from articles where the
ID is equal to percent s and then we'll
just put in here ID okay then we'll have
a variable called article and we'll set
it to that cursor dot fetch one and that
will put it in that variable the article
so then we want to get the form which we
actually already created okay we're
going to use article form so that's
that's correct now we want to populate
the fields and we can do that from here
say populate article form fields and we
can do that by saying form dot title
data is going to be equal to article
which is coming from here we fetched it
from the database but this should only
be the title and we can access that in
this syntax alright now we want to do
the same thing for the body just like
that then we're going to do the post
okay because that'll fill the form and
then once we check to see if everything
is valid and it's sending the post
request then we can get the new title
and body from the form will create a
cursor now instead of inserting we want
to update so let's go ahead and get rid
of that
and we'll say update and then the table
name which is articles and we'll say set
let's say set name yeah set name equal
to percent s and also body equal to
percent s and then I think we go like
that I actually don't have this part of
the application done so I'm kind of
going off my head here so this would be
name and body all we going to put the
where clause in here too so we'll say
we're let's see so where ID is equal to
percent s so I think it's like that
alright you know what let's uh this
might not work but let's just keep going
just to make sure that we can actually
load the form and all that crap okay so
this will redirect to dashboard that's
good we're going to render the template
those edits article all right so let's
save that and then we're going to go to
templates create a new file called edits
underscore article dot HTML and for the
form it's going to be very close to the
add article form so I'm going to just
grab that put that in there let's just
change this to edit article okay I think
that's all we need to change so we'll
save it oh cool so now we have the form
and we have the prefilled fields alright
now for the logic when we submit it I
don't not sure if that's going to work
but let's give it a shot we'll just
change it to article and then the number
two global name name is not defined oh
it's not name it's title
article updated but it didn't oh I know
what it is that's happening because
what's what we're doing is selecting the
article with the ID that's passed in and
we're setting the the fields here the
default fields which come from the
database and then we're setting title
and body to the fields that are actually
still in a database so it's working it's
just getting the same title and body
submitted so what we need to do is
change both of these to I think it's
request or is it we did it in the login
right here for request dot form and then
the field so let's just grab that so you
go back to edit article and right here
will say request dot form title and then
this one will be request dot form body
alright so we'll save that let's reload
and click Edit for article one change it
to the number one submit and there we go
now it's updating all right so the last
thing we want to do is the delete and
like I said before this is actually
going to be a form that makes a post
request and then we can actually do the
delete from there so let's go to
dashboard or is it dashboard HTML and
we're going to just get rid of this a
tag for the delete button and let's put
in a form tag ok the action we're just
going to leave blank actually no we're
not we're not going to leave it blank
we're going to put in here our double
curly braces and say URL underscore four
and this is going to go to delete
article that's going to be the route
delete underscore article and we also
want to pass along the ID and we can do
that by just putting in another
parameter and say ID equals article dot
ID
so now we're going to have two inputs in
here one is going to be hidden and one
is going to be the submit button so this
one will say type hidden' and the name
is going to be underscore method and
then the value is going to be delete
this is how we can kind of like kind of
fake a delete request I guess okay then
we'll have another input this is going
to have the type of submit we don't need
a name and the value is going to be
delete and then we'll give it a class of
BTN BTN danger so let's save that and
reload could not build URL for endpoint
delete articles okay so we don't we
didn't create delete article yet so we
need to do that so let's go to app PI
we're going to go right below the edit
article route okay so let's say at F dot
route and this is going to be / delete
underscore article and the function will
just call delete article and this is
actually it's going to the ID is
actually going to get passed as well so
right here let's do slash string ID and
then we have to pass that in here as
well okay and we only want this to
happen if the user is logged in so right
here we can put our at is logged in okay
then we need to create the cursor
connection dot cursor then we'll do our
execute and this is going to be delete
from articles where the ID is equal to
percent s and then we put an ID okay so
then we need to do our commit I'm just
going to grab this grab the commit and
the close and then we'll just do a flash
message and we'll redirects I'll copy
that as well and we're going to say
article deleted and go back to the
dashboard
alright so let's save it and go back and
try to reload this and if we click
delete method not allowed and that's
because we didn't put post it's actually
not allowing a post so right here in the
row we just need to add method or
methods and we only want post so
shouldn't a get shouldn't be able to do
anything here so let's save that and
reload what happened methods equals post
all this should be inside brackets
lots of banging up there alright so
let's start the server again and reload
and delete and there we go article
deleted so we're all caught up to the
demo and that's going to be it for now I
do want to eventually do a deployment
video and we may add some more
functionality in the future but I just
know that I am going to be busy lately
I'm starting a new course on laravel
premium course so that I will be tied up
with that and of course I'll be
releasing you know my regular scheduled
YouTube videos but I'm not sure if I'm
going to get back to this or not anytime
soon so thanks for watching guys
hopefully you learned a little something
about Python and flask and I will see
you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>