<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hapi.js Framework Crash Course | Coder Coacher - Coaching Coders</title><meta content="Hapi.js Framework Crash Course - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hapi.js Framework Crash Course</b></h2><h5 class="post__date">2017-07-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2lprC0yYeFw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's going on guys in this crash
course we're going to take a look at
happy Jas which is a server-side
back-end framework based on nodejs
now it's very very similar to Express
Jas if you've ever used that if you've
been following my channel for a while
you probably have there's there's some
differences I'm not going to go over I'm
not going to do a comparison video I
will do that at some point later on but
this is going to be a look at happy Jas
how to set it up look at some of the
features I'm going to show you how to
create routes and how to you know send
responses or replies
we're also even going to look at
integration with MongoDB so that we can
actually you know fetch data from Mongo
and then output through a route and
we're also going to accept a post
request so that we can actually add
something to MongoDB let's see what else
in addition to that we're going to be
working with templates we're going to
use something called vision which allows
us to use multiple different template
engines we can use for instance ejs
handlebars which is what we'll be using
you can use moustache pug there's a
whole bunch of them so it's a really
nice technology to learn and like I said
if you know Express you shouldn't have
any issues at all even if you don't you
should be able to follow along I'm going
to make it pretty easy to understand so
let's go ahead and get started this
video is sponsored by dev Mountain if
you're interested in learning web
development iOS or UX design dev
Mountain is a 12-week design and
development bootcamp intended to get you
a full-time job in the industry to learn
more visit dev mountain comm or click
the link in the description below
alright guys so before we start getting
writing code I just want to kind of
explain to you the dev environment I'm
using what software I'm using I'm not
going to go through all the
installations I do have videos showing
you how to install this stuff separately
but one thing you're going to need
definitely is no js' which is a
JavaScript runtime we're going to use
this to install happy Jas among other
dependencies so just go to node.js org
and go ahead and download it install
it's really easy now we're going to be
using MongoDB just a little bit just to
give you an example of how to do that if
you are following along then you will
need
MongoDB installed I do have a video
called MongoDB in 30 minutes which shows
you how to get everything set up and
running on Windows I also have videos
showing you how to install it on Ubuntu
Linux Ubuntu all right now I'm using a
program called git bash for Windows
which gives us a better command line you
don't have to use this but you can it's
cross-platform you can use it for Mac
Windows Linux if you want to you can get
that set up and that's get - SCM comm
and then I'm using Visual Studio code is
my editor mainly for the integrated
terminal and we're actually able to
integrate get bash with the Visual
Studio code terminal so that gives us a
really nice environment to work in okay
so those are the the things that I will
be using now I have a folder called
projects here and I'm just going to
create a new folder and I'm going to
call this happy app okay H API and I
just want to open this folder in Visual
Studio code so see projects happy app
alright and then we're going to we're
going to have to create a file called
package Jason which is like a manifest
file for nodejs applications and it
includes the application name the
version the dependencies all that stuff
so I'm going to go ahead and open up my
terminal and I can do that going to
either view integrated terminal or I can
just hit ctrl and then the tilde key
which is to the left of the number one
alright and it opens it right up in this
directory and you'll see I'm actually
using git bash here instead of
PowerShell which is the default if you
want to be able to use git bash all you
have to do is go to the settings or
preferences settings and it's just a
giant JSON file and you can just add
this line right here it's just pointing
to the git bash directory or application
so to create a package dot Jason file
we're going to say NPM in it and it's
just going to ask some questions here
you see the name happy app is good so
we'll just click enter versions good
description we'll say simple happy JSF
entry point I'm going to make this fjs
which is like the just the main entry
point for your application and then I'm
just going to enter through the rest all
right if we look at package dot Jason it
will look something like this
now to install happy Jas we just need to
do and actually let me clear this out we
just need to do NPM install and we want
to do - - save which will add it to our
package JSON file and then just simply
write happy h api alright and that will
install the latest version at this time
is sixteen point four point three all
right so we have happy installed now we
want to do just going to make this a
little smaller I'm going to create a pas
which is our entry file alright and then
we're going to bring in happy so let's
say Const happy equals require happy ok
and that'll actually bring in the X
let's make this an uppercase H like that
okay so that will bring in the module
and then we want to initialize a server
ok so let's say an it server to do that
we're going to create another variable
we're going to call it server and we're
going to set this to new happy dot
server okay and if you're familiar with
Express this is similar to saying cons
app equals Express and then you use this
app variable to create all your routes
and all of that okay just to let you
guys know that you know those of you
that are familiar with Express so now
that we have that we need to add a
connection so we take that server value
and we say dot connection and in here
takes an object and that's going to take
in it's going to take into port which
I'm going to make port 8000 but you
could do whatever you want and then the
host which is going to be localhost it's
on our local machine now that we hit did
that we want to be able to start the
server okay so for that we can say
server dots
see it's going to be survey dots start
alright now this is a synchronous and
we're going to be using arrow functions
okay now you could do this you know
function passing an error like that but
we're going to use arrow functions so
we're just going to put whoops we're
just going to put a set of parenthesis
with error and then an arrow and then
our curly braces okay so pretty much the
same thing and then in here we just want
to check for the error okay if there's
an error starting the server then we're
just going to throw it we're just going
to display it so we'll say throw error
why does that have a line if error Oh
got the H all right so throw error and
then if there is no error then let's
just do a console log okay so we'll say
console log and just going to use back
ticks in here okay
which is just es6 template template
strings server started on or we'll say
at and then we can actually use a
variable here this server dot info dot
uri okay so let's go ahead and save that
and then down here let's clear this out
we're going to run node and then the
name of the file which is apt j s so we
can just say node app and we get server
started on on localhost 8080 and we're
going to get an error and the reason
we're getting an error is because
there's no route we didn't define a
route for the home page all right so
let's go back and let's define a route
okay so it's a home route
and to do that we take our server object
we have here and we're going to say
server dot route one second yeah server
dot wrote and we're going to pass in
here an object and we're going to define
the method that we want to accept which
is going to be a get request okay
so method and then the path which is
going to be slash which represents the
home page and then a handler okay now
for the handler we're going to use an
arrow function remember you could do you
know function and so on but we're just
going to use an arrow okay and then this
is going to get as far as parameters
it's going to get a request and it's
going to get a reply and this is very
similar to Express you know usually with
Express you'll see were req res like
that and you can even use those if you
want but standard happy is request reply
okay now in here what we can do is we
can take that reply function and we can
output something or just send the
response back so let's just send a
string that Hello string let's just say
hello world we'll save that now we're
going to have to restart the server and
this can get quite quite of a pain in
the ass and there is actually a module
you can install called node Mon that
will allow you to run your server so
that you don't have to keep restarting
it every every little change you make so
to install that will say npm install - g
this is very important because you want
to install it globally so that you can
always access it from anywhere and then
node lon all right and then once you do
that you can just as long as you're in
the directory you can say node one and
it'll start it up okay so let's go check
it out we'll reload and we get hello
world ok so what we've done is we've
created a back-end server and we've
created one route which accepts to get
requests you know to the home page and
then we're sending out a response or a
reply of hello world and we can
actually put HTML in here if we want as
well so if we did that and we go and
reload you'll see that they'll actually
parse the HTML alright which is cool so
let's see we can also we can also have
dynamic parameters in our URL that we
can grab on to so for instance let's say
all right here will say dynamic route
and I'm just going to copy this and
let's say we want this to go to slash
user slash and then this is what we want
to be dynamic so we'll just put name
alright and then in here in our reply
let's say hello actually we put a comma
there so say hello comma and then we're
going to concatenate request dot params
dot and then whatever the the parameter
we want in this case its name that
should be a dot so let's save that and
then let's go back to Chrome and let's
go to slash user slash Brad and we get
hello Brad okay so we can easily grab on
to parameters now before we get into you
know templates and stuff I want to show
you how we can how we can set up a
static folder if you've ever use Express
you know that you can set for instance a
public folder and that's where you would
put your CSS files or any static HTML
pages things like that so what I'm going
to do is create a folder here called
public alright and then in there let's
say new file about dot HTML now we have
to do some stuff for this to work
actually I'm just going to put an h1 in
here and say about alright save that
close it up now in order for this to
work we have to actually install another
package called inert actually let me
pull up the documentation for this c
tutorials
I think it's in here serving static
content yep so we actually have to
install this inert and then we have to
we have to do server dot register
require a nert and then we put our
static stuff inside of there so let's go
ahead and do that so I'm going to stop
the server with ctrl C and let's do NPM
install - - save inert ok then we'll
start it back up with node mod and then
let's go right below here right above
the server and let's say static routes
all right let's see so like the
documentation said we have to do server
dot register and this is kind of like
middle layer so serve a dot register and
then we want to just require the inert
package that we just installed all right
and then we're going to put a comma here
and then this parameter is going to be
an arrow function that takes a possible
error okay and in here let's check for
the error okay if there is one we're
just going to throw it okay there is not
then we can create our routes our static
routes so let's see we're gonna just
yeah we'll go ahead and just copy the
home route paste that in there
oops and let's see we're going to do
slash about and then in the handler here
we're going to do instead of just reply
we can do reply dot file and then we can
just put the location of the static file
we want to load which in our case is
going to be in public and it's going to
be about dot HTML alright and that
should work let's save it and go to
splash about and there we go so it loads
a static HTML file now if you wanted to
do an image you can do that as well are
not just an image but any file so let's
go and copy this and we'll go ahead and
paste that in and this one I want to go
to slash image that'll be the route and
then I just want to load up inside the
public folder we'll have a file called
happy dot PNG which is an image all
right actually I'm not yeah that should
work so let's save that and then I just
need to grab that image file so let me
see if I can find it I think it's in my
sandbox happy add what I usually do guys
is when I create these videos I usually
created inside sandbox and then when we
start the video we build it in projects
so let you guys kind of know the
workflow and you can see I have that
that image right here so if I put that
in here public paste that in and now we
should be able to go to slash image and
there it is okay so we can load you know
any static assets that we want images
CSS files whatever alright so let's go
back here now I think we'll start to get
into stuff that's more useful and that
is using templates or views now there's
actually a really nice module called
vision I don't know the exact URL let's
go it's a happy vision right here so
it's the vision templates rendering
plug-in support for happy j/s now vision
is not a specific template engine so
don't think that it's it's a it's a
plug-in for allowing us to use template
engines such as ejs handlebars Jade
mustache and nunchucks okay we're going
to where to focus on handlebars that's
the one I prefer out of all of these and
it gives us some some example code here
so we need to install vision with NPM
install vision so let's do that
let's do that so control-c will stop
that will say npm install - - save
vision okay and then we'll just run node
lon and let's go ahead and get this
started so see we need to register this
middleware so let's go down let's go
right below the static routes right
above the status off start server and
let's say vision templates will say
server dot register okay and then in
here we want to just require vision
alright and just like we did above we're
going to just put an arrow function with
a possible error we'll check for that
error if there is one then we're just
going to throw it okay and then let's
say server dot views and then in here we
want to put an object and we want to
define engines and we can have multiple
engines which is really cool this is
going to be an object we're going to say
HTML and then we want to require require
handlebars which actually we have to
install okay you do have to install the
template engine separately and I believe
that this right here is the file
extension you want to use so we can use
dot HTML files and it'll use handlebars
alright but let's uh let's install that
real quick so I'm going to stop this and
we're going to say npm install - - save
handlebars
okay and we'll go ahead and just run
look we'll run note on again and now
we'll go back to this so we have HTML
require handlebars and then we just want
to also define our path to our views or
templates folder so we're going to say
double underscore dur name so the
current directory plus and then whatever
folder we want a lot of people use
templates I'm going to use views okay so
that's where all of our templates will
go and that should be it as far as this
middleware so let's go into our
application and create a folder called
views okay only because I called it
views here if you want to use templates
you can do that as well and then let's
create a file called index.html and for
now let's put an h1 and we'll say hello
from index okay and then let's go up to
our home route which is right here which
right now is just outputting you know
it's just outputting an h1 but what we
should be able to do now is let me just
comment that oh we should be able to say
reply dot view now that we were using
vision all right and then in here we
want the view will say index X let's
just do that
okay so we'll save we'll go back to the
home page and we get hello from index so
we're now using handlebars templates and
on our happy happy J's server so you can
see this is pretty easy I think that
this is this is a easier than Express I
don't know about you guys you can let me
know in the comments I know we're not
really getting into the more advanced
stuff so it's a hard comparison but just
by going on this as far as you know
registering the middleware and the
options and stuff and then just being
able to use reply dot view up here I
think it's pretty easy and I definitely
plan on using happy jazz a lot more in
some videos we're going to create a REST
API we'll create a whole application
using it
you know I have that stuff planned down
the line now of course when you use a
temple engine one of the main reasons is
because you want to pass in dynamic
content so we can easily do that just
like with Express and you know other
template engines we can put a second
parameter here which will be an object
and let's just say we want to bring a
name and we'll just say John Doe
all right so we'll save that go back to
index.html and let's say hello from
index from and then we'll put in our
double curly brace and then name okay
and this is handle bar syntax so if we
save that and we go back reload we get
hello from index from John Doe so we can
pass in whatever data we want whether
it's static strings like this or if it's
from a database or whatever it may be
one second guys all right name checks
out so what else let's create a route to
tasks and I want what I want to do is
pass in an array of tasks and loop
through them in the template so we'll go
right here and I'm just going to copy
this home route this will be the task
job ok it's going to be a get request to
tasks and we can get rid of that and
then let's load a template called tasks
and then as far as the data I want to
just want to pass in tasks and then set
that to an array of objects and each
task will just have a text so we'll say
task 1
all right so let's save that and create
inside views a new file called tasks dot
HTML we'll put an h1 and we'll just say
tasks oops
all right so let's just see if that
actually works if that route works so
we'll go slash tasks good now
we passed in an array so we can use
handlebars to loop through and
handlebars I really like it it's really
easy to use we can just do number sign
each tasks and that each loop and then
in here we can just say text because
that's the value we want and let's just
put this inside of a ul and then each
one of these will be inside of an li all
right we'll save that go back reload and
why isn't that working each tasks
five you did I not save that there we go
okay so now it's looping through the
tasks we passed in and help putting them
all right now that's all well and good
but usually you don't want to just hard
code stuff like that you want it to come
from a database so what we're going to
do is we're going to implement Mongoose
which is an ORM for MongoDB to
communicate with the MongoDB database on
our system now like I said if you want
to follow along you do have to install
MongoDB but let's go ahead and install
Mongoose so I'm going to just stop this
clear this out we'll say and NPM install
- - save Mongoose alright start up node
long and let's take a look at the
Mongoose documentation so say Mongoose
ORM or odm whatever alright so what we
have to do is bring in Mongoose and
create a connection like this alright
but I actually want to use a couple
options so I'm going to grab my own
version here okay so we'll go up to the
top let's go right under where we
brought in happy and we're going to
bring in Mongoose and then we say
Mongoose talk Connect we're going to
connect to a database I'm actually going
to change this to say happy DB and then
I'm just saying use Mongo client true
because that's going to stop so one of
these stupid errors that Longo has and
then it's asynchronous it's going to
return a promise so we're saying dot
then we're just going to console.log
it's connected if there's an error it'll
console.log the error all right and that
should work right off the bat so let's
save it it restarts and you like it this
long goose M promise warning here just
ignore that and then you'll see MongoDB
connected so that's it to connect to a
database now we want to do is create
model for our tasks all right so we're
going to put this will just do it right
up at the top here and we'll say create
task model and we'll say Const
task set it to Mongoose dot model okay
and it's going to be tasks and then we
need a schema in this case I'm just
going to put an object it's just going
to have a text which is going to be a
string that's our schema now if you're
working with you know a real application
you want to create a specific model file
and define your schema all of that stuff
but we're just this is just an example
to show you how to work with happy Jas
so now that we've done that let's see
I'm just going to save this and then I'm
going to open up my Mongo shell okay so
I'm going to open up just standard
Windows command line as an administrator
and I'm only doing this so we can add
some initial data to work with so I'm
going to CD I'm going to go into where I
have MongoDB installed which is in my C
Drive MongoDB and then there's a bin
folder and that's where the actual bongo
shell is located so I can just say Mongo
and that brings us into the shell all
right now from here let's say show DB s
shows us the the databases that we have
ok so what I'm going to do is create a
new database by saying use happy DB ok
so we switch to happy DB and then I'm
just going to create a collection so DB
dot create collection and we're going to
call this tasks ok and then let's insert
a task by saying DB tasks dot insert and
then it's just going to be an object
with a text and we'll just say my task 1
and that's it ok and if we do DB dot
tasks dot find you'll see that it shows
us we have that that task it also gives
us an object ID so that's it that's all
I wanted
to use the shell for all right now
instead of fetching a static list of our
static array of tasks let's actually
comment this out okay instead of doing
that what we're going to do is grab it
from the database okay now we're going
to go not inside of this reply view okay
we don't actually know what we want to
comment out that whole thing because our
replied view is going to be it's going
to be in the asynchronous call so right
under here we're going to say let's
tasks equals task which is our our model
that we created above dot find which is
a function to actually find stuff in
that collection or in that through that
model and it's asynchronous so we can
put function here but I'm I'm going to
use an arrow function so we're going to
say error and task which will be what's
returned if there's no error set it to
an arrow function and then in here let's
just do a console dot log of tasks ok
we'll test that out so if we go back to
our application to task and reload
nothing will happen here but if we go
back and look in our console there it is
my task 1 all right so we know that
we're getting that now all we have to do
is comment that out now all we have to
do is say reply dot view just like we
did before and we want to load the tasks
view and then we just want to pass along
the tasks which is coming now from
MongoDB so let's save that let's go back
and there it is my task 1 so we're now
pulling data from the database so it's
pretty damn easy now the last thing I
want to do is I want to show you how we
can make a post request to add a task to
MongoDB so we're going to add a little
form here so let's go back to tasks HTML
let's see we're going to put let's put a
form okay so the method of this form
I want lips I want to be a post request
and the action is going to go to slash
tasks alright and then in here we're
just going to put a simple input type
text we're going to give it a name of
text and let's give it a placeholder
keep it stupid I hate this keyboard it's
like I even have to use this keyboard
that sucks that I keep messing up with
or I have to use a loud-ass mechanical
keyboard that people complain about so I
can't win but someone suggested the MX
quiet keys I think they're called or MX
silent keys I might might try that
because I really love mechanical
keyboards I just hate I hate how loud
they are well I like it personally but I
know you guys a lot of you guys don't
like it so it's I'm getting off off
subject so place holder will say add
task and save all right so let's reload
now when we edit the HTML like that
sometimes we have to reload the server
so I'm just going to run no daman again
I don't know why it's kind of strange
but yeah there we go so add tasks now
it's going to make a post request to
slash tasks so we want to catch that on
our back-end server so let's create a
route for it so we'll go right here
let's actually copy I'll just grab this
I guess its tasks route all right so
this will be tasks post tasks row and
this will be get tasks throughout all
right because it's going to go to the
same the same path just a different type
so post and let's see in the hand lawyer
we're going to get rid of all of this
and we're going to say let txt now
remember we have to get the value coming
the forum and we can get that by saying
request dot payload dot and then
whatever the name of the input was which
in our case was txt if we look at it
right here named txt now this is another
awesome thing about happy jss with
express you would have to include the
body posture and add the middleware and
then you would do you know request dot
body dot txt but with happy J s we don't
have to add a body parser or anything
you can just use this payload alright
there's little shortcuts like that that
I really like about a PJs all right now
we're going to do is we're going to get
ready to insert this so let's say let
new task and we're going to set that to
new and then task because remember we
made a task model and we just want to
insert here an object with a text and
it's going to have the value of the text
that's being passed in right here okay
so that just creates it now we need to
actually save it which is easy we can
say new task dot save ok so we're going
to save and then this is going to be
this is asynchronous so it's going to
take an arrow function with an error and
then also task okay I'll set the arrow
function and then all I want to do here
is just check for the error so we'll say
if there's an error then let's just
return console dot log and then we'll
just log that error okay if there's not
then we just want to redirect back to
the tasks page so we'll say return reply
dot redirect dot location and then
wherever we want to go which is going to
be the same page tasks so let's try it
out okay so we'll reload and let's say
my task to enter there it is and if we
go to our Mongo shell and we do a find
let's actually add on dot pretty which
makes it look a little better and there
it is so we have
I test - why didn't that one get pretty
that's weird
try it without it fine okay so we have
both task 1 task 2 alright so I think
that's it guys there's a lot more that
can be done but this is an intro getting
started type video it's the first video
I've ever done on happy jazz so I'm not
going to make it too complicated in the
future we will do a RESTful API we will
do a you know a complete application
because I do really like this technology
I'm not going to go as far saying it's
better than Express but I will do some
research I will do some comparison and I
will create a video comparing the two
and then you guys can decide for
yourself I'm not going to say something
is better than the other you know in all
cases so thanks for watching guys please
subscribe please leave a like anything
you can do I do have a patreon account
if you guys want to support me directly
even for you know $1.00 per month
getting that from enough people gives me
the really good support and I eventually
just want to do this full-time for you
guys alright so thanks for watching and
I will see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>