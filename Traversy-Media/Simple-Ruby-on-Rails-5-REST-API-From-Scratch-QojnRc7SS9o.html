<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Simple Ruby on Rails 5 REST API From Scratch | Coder Coacher - Coaching Coders</title><meta content="Simple Ruby on Rails 5 REST API From Scratch - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Simple Ruby on Rails 5 REST API From Scratch</b></h2><h5 class="post__date">2017-06-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QojnRc7SS9o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys in this video we're going to
create a restful api using Ruby on Rails
now this isn't going to be a clean
cookie cutter type video where I have
everything laid out in front of me I do
have some snippets open I have some blog
posts to look at but a lot of this is
going to be kind of like freestyle
coding alright so we're going to build a
really simple API where we can fetch
data from our database we're going to be
using MySQL and we'll fetch it we'll
send it out I will send the response in
Jason you know of our articles or
whatever you choose to use as your data
and then we'll be able to add or make
post requests to to our API to add data
we'll be able to update and delete data
and so on all right we're not going to
get into authentication we might get
into that in another video but I want to
keep this relatively simple all right
now I'm on Windows and I know a lot of
rails developers don't like Windows
because it used to be a nightmare to
develop on but it's actually really easy
now all you need to do is install this
rails installer and you'll have Ruby
installed you'll have rails 5 installed
and it's very very easy alright so you
should be able to follow along with this
no matter what I'm not going to go
through the installation because it's
easy enough and you can see I have this
git bash command line if you guys want
this instead of the standard Windows
command line you can get this a git -
fcm comm and it's for Windows and Mac
and it just gives you the git version
control system and also gives you some
other UNIX based commands so I always
use this in Windows I never use the
powershell or that the standard command
prompt all right now you can see I'm in
my C Drive and I'm in a folder called
sites when you install rails it's going
to create this folder for you and that's
where all your applications should go
alright at least your your you know your
dev applications if I do an LS here to
list the contents you can see that this
there's also a sample to-do app so we
want to create a new application here
and we can do that by using rails and
we're going to say rails new
and let's call this I will call it my
articles it's going to be an API that's
going to fetch articles from our
database and then you want to make sure
that you add a special flag on here
which is - - API and that's going to
give you some some extra tools inside
your application to work with a restful
api it's also going to strip it from
some of the other stuff that you don't
need all right as if you were building a
full-on application so you want to make
sure that you add that flag all right so
if we go ahead and run that it's going
to create all the folders for us or it's
going to create my articles folder with
the entire structure inside there all
right so if we CD into my articles and
we take a look at the contents you'll
see that we have a rails application
most of stuff we're going to be work
with we working with is in the app
folder so I'm going to go ahead and open
this up in Adam so I'm going to add a
project folder
well actually we can just do this oops
I can just do Adam dot and that will
open it up alright you can see all the
files over here now we're going to be
using MySQL as our database and when you
install a rails application and you
don't add any extra flags or anything by
default it's going to use SQLite and
there's actually some flags we could
have added to to change that but I just
want to show you how to do it manually
so if we go into the config folder and
we go into database dot yml ok yml is
like a configuration type file you can
see it uses SQLite 3 which is like a
really light file based database it's
not something you would want to use in
production now we could leave this but I
want to show you how to set it up with
MySQL now I'm using xampp which gives us
an apache server mysql PHP all that
stuff on my local machine and it also
comes with PHP myadmin
which is a tool for for managing your
databases so let's go to localhost /
phpMyAdmin and all we have to do all we
have to do from here is create a
database because rails uses something
called database migrations with which
are awesome and they make it so that you
don't have to go into your database and
create your
tables and all your fields you can do
that through rails you can do it through
the command line so all we're going to
do is create a new database here and I'm
just going to call it my articles oh it
already exists I just need to
delete this real quick
oh no mine I'll just keep it it's empty
so just create a new database I'm
calling it my articles make sure you
know your your your database user
username and password okay I'm using the
root user so now that that's set up what
we need to do is we need to install the
MySQL - gem a gem is kind of like a
package if you use nodejs in the past a
gem is kind of like an NPM package or
module alright so we can actually
install it by going to our command line
here clear this out and we're going to
say gem install MySQL - ok and and as
long as you use the rails installer in
Windows you should have access to the
gem command so that installed now we
need to add that to this to our gem file
so let's go down to gem file which is in
the root and you can see by default we
have this SQLite gem I'm actually just
going to comment that out and I'm going
to get rid of let me get rid of all
these comments we don't need these and
yeah we'll get rid of those and get rid
of that that and then we're just going
to put in our gem and MySQL - all right
and then we're going to just save that
so now we have that gem installed and
now we're going to go back to our
configuration for the database which is
the database dot yml file and we're
going to change the adapter here to
MySQL - ok now in addition to that we
have to add our username and password so
let me just just check something here
yeah we're going to use our username
okay I'm using my group database user
and then my password which is just one
through six okay and then four down here
we're going to change the the database
name so right here so you will change
this to my articles which is what I
called it okay and you can have
different databases for your test
environment your production environment
I'm just going to use put the same for
all of these alright and then we'll just
go ahead and save that alright so that
should be all set now let's try and run
our server ok rails comes with a dev
server and we can run it by saying
either rail server or rails s all right
so let's run that and it should open up
on port 3000 by default you can see it's
running ctrl C to stop but let's go
ahead and check that out so if we go to
I'm going to just leave PHP myadmin open
and let's go to localhost port 3000 okay
and there we go we get this yay year on
Rails message it shows us the version of
Ruby and of rails so good that's all set
up now we need to we need to think about
our data okay so all we're going to have
is an articles table and it's going to
have a title a body and it's going to
have like a created at and so on now to
create that we don't have to go into PHP
myadmin or anything like that we can
just use we can use the command line and
we can do a database migration so I'm
this right here running the server I'm
going to just leave that running and
then pull down another command line for
us to do our you know our other stuff in
and what I want to do is generate a
model okay a model is basically when you
create a resource in your database like
a like a post table or users anything
like that you want to create a model for
it so to
that we're going to do rails G or
generate you could type out generate and
then model and then this is going to be
article and then we define our fields
here that we want so we're actually just
make this a capital a so article and
make it singular your models should be
singular and then we're just going to
give this a title which is going to be a
string field and then let's give it a
body which is going to be a text field
which is like a longer you know a longer
piece of text so if we go ahead and run
that and oh we need to go who need to go
into our folder so sleepy into my
articles first and then we'll run that
command again alright so you can see it
created a few files for us to created
the migration file and it created the
actual model file so let's close this
these config this config stuff and if we
go into our app folder and then models
you'll see there's an article dot Ruby
file and it's basically just a class
that extends the application record
class alright and then it also created a
migration file which is going to be in
the DB folder migrate and you can see
this create articles and if you're
familiar with laravel if you watch my
lerigot crash course then this kind of
works the same way ok it's going to
create a table we have our fields here
we can add stuff here if we want it also
is going to add some timestamp columns
for us alright so let's go ahead and run
the migration because right now if we go
and we look in our articles database
there's nothing there because we didn't
actually run the migration we just
created the models so let's go ahead and
do that now
so it's clear the cell and all we need
to do is say rails DB : migrate very
similar to laravel ok so that ran now
let's reef let's refresh this and now
you can see we have some system tables
here but the one that we created is this
articles table and if we look at the
structure here we have an ID
which is a primary key a title body
those are the two that we added and then
it also added the two timestamps here as
well all right so much easier than going
through and creating all of this either
in the MySQL shell or through this PHP
myadmin
it's just much cleaner much easier now
before we actually enter some data I
want to just make a couple of the fields
required which are basically just the
title and the body so we do that inside
the model so models article dot RB and
we're going to go into this class and
we're going to say validate
we're going to do validate title and
then we want to say present I'm going to
say presents : true which just means
that it's required and then we're going
to do the same thing for the body so
let's copy that
and we'll just straight body alright
that way it has to have those two fields
so now what we want to do is is insert
some data and there's a lot of different
ways to do this one way with rails is to
use some a gem called faker which let me
just pull that up let's say rails faker
this right here okay so basically we can
use any of these these functions here
let's say book fake or book and then we
can do faker book title and it's just
going to generate a title of a book for
us and we can use that in our in some
kind of field in our database we can
generate an author a publisher or
anything like that and you can see
there's a bunch of this stuff oops
because there's a bunch of this stuff
let's look at them this is kind of cool
one superhero so this will actually
generate like a superhero name a power
things like that so it's just an easy
way to generate to generate data so
let's install faker and what I'm going
to do is go into our gem file and where
this is going to be a development
dependency okay we're not going you
don't need this in production it's just
for development so what we're going to
do is put it in this this namespace
right here this our this group of
development
so we'll say Jim Baker okay now it's not
installed yet we just we just put that
in our file we can run a command called
bundle install that'll look at all the
gems here and make sure that all of them
are installed including fakers so let's
go back here and let's run bundle
install okay and now faker should be
installed now what we want to do is we
want to go to so you want to go to DB
and then seeds dot Ruby and this is
where we can generate data to put in our
database and this gives you some
comments here but we're going to be
we're going to be using faker for this
so let me see I think I have this open
over here yeah so I'm going to get rid
of everything here all these comments
now if you want to insert more than one
you want to do this in a loop okay so
what we're going to do is we're going to
say five dot times all right and this is
just a way of doing a loop in Ruby and
then let's do let's see what I want to
the article dot create okay and then
here we're going to put an object so for
our article we want to have a title and
then we're going to use faker here for
the title so let's say faker and then we
want to do a double colon and then book
dot title just like we saw on the
documentation that's going to just
create a book title for us all right and
then we also want for the body we're
going to use faker and we're going to
use something called larom and then dot
sentence okay and that's just going to
give us a random lorem ipsum sentence
which is kind of just like dummy text
and that's all we want it'll do this
five times so let's go ahead and save
this now in order to run this seeds
seeds ruby file we actually need to run
a specific command in our in our
terminal
all right so let's go ahead and do that
today I'm just going to clear this out
and we're going to run rails BB we want
to do DBC see what is this oh I didn't
put I didn't end this
I'm just going to put end at the end
sorry about that
okay let's try that again all right so
you can see we got no errors which is
usually a good thing so let's go check
our database and let's go into browse
our articles and there we go so we have
an ID starting at one it's Auto
increment we have titles which are just
book titles and then body which are just
random sentences and then the created at
and updated at those get inserted
automatically all right so we now have
some data to work with
so models and data are all set now we
want to create a controller so
controllers are going to go in the app
folder and then in controllers now we're
using an API so I'm going to create a
specific folder in the controller is
called API and then inside there we also
want to create a folder called v1 for
version 1 that way if we ever want to
update this API and completely change
things around we can just create a v2
and then a v3 and you know it make just
makes things much more scalable so in
here let's create a file and we're going
to call this let's call this articles
underscore controller dot RB all right
and we're actually going to add a
namespace or clear module API and just
do an end here and then in here we're
going to say module v1 and then do an
end ok and then inside here we want to
create our class so this is going to be
articles controller and this is going to
extend the application controller
okay so it'll inherit all the stuff from
that so in here we can create our
functions now I'm going to create a
function called index so we're going to
do def index okay I make sure we end
that and then here we're going to just
say at articles and we want to set that
to basically get all of our articles so
we're going to use the article model
that we created and we can just call I'm
going to do order because I want to
order these by the date so we can say
order and then we can put in here
created at and then we want that to be
descending okay so very simple it's just
going to query our database for all
articles and it's going to order them by
date now what we want to do is basically
just call render Jason and then we're
going to I'm going to create an object
here right and then this is going to
have a status and we're going to set the
status to success okay and you can
format or respond to ever you want but
I'm just doing it this way and then
we're going to have a message actually
we'll just do message and we'll say
loaded articles and then the next one is
going to be the actual data so we'll say
data and that's going to be that's going
to be article actually you know what I
want to do is just lets go like that so
data articles and then after the object
here we're going to put a comma and stay
status which is going to be okay
alright and that should do it for the
index so let's save that and then we
need to add some routes so let's go to
config and then route start Ruby and
let's just go in here and we're going to
say namespace so namespace for our API
do
okay and then here we also want to do
our namespace for b1 so v1 that should
be in quotes do you want to do okay and
then here all we have to do is say
resources articles okay and that should
add the correct route so let's save that
and then if we want to check the actual
route so what this does it we can go to
our command line here clear that out and
we can say rails routes okay and you can
see it gives us a list of all the
different routes so we have let's see
where is the index right here API v1
articles index is well that's a post
request and then we have the get request
we have articles show which is going to
pertain to just showing a single article
we have put for update delete for
destroy but we have to create these
specific function names okay remember we
did index what we want to do create show
update and destroy as well if we want
that you know full restful functionality
so let's go ahead and give it a shot as
far as making a get request to you know
to get all of our articles so I'm going
to go to see now you can use anything
you want to make the actual request I'm
going to use postman which is a Chrome
extension and I already have installed
so I'm going to just launch it and let's
say I'm just going to clear out some of
this other stuff here so you'll delete
that delete and let's make a get request
to HTTP and it's going to be localhost
and we want port 3000 and then we're
going to go slash API slash V 1 slash
goals and let's do a send alright so
again the 500-hour which probably means
we have some kind of syntax error let me
just check the logs here and let me just
open up our controller and let's see
class module so I'm looking at this here
class module name must be a constant
well you know what this this should be V
1 capital V 1 save that and let's try it
again
there we know there we don't go but at
least we're getting something here and
defined local variable for our method
okay so let's see this right here should
actually be a space and then okay like
that there we go
so here's our response so we get status
success message loaded articles and then
our data has an array of all of our
articles okay you can see we have the ID
the title the body that created that
updated at it's all coming back from
this this route right here which is
exactly what we wanted so that takes
care of listing all of our articles now
what if we want to just fetch us a
single article by just going you know
articles slash and then the ID so to do
that let's go back to our controller and
under the index let's say def show and
in here we're going to say article
equals the article model and then we
just want to basically just call find
and then we want to pass in the
parameters okay and we can get this we
can get the ID per am by saying params
and then some brackets and then a colon
ID okay and that's going to fat
whatever is in the right here okay so
then what we want to do is just again
render the Jason so let's just copy this
and for the data we're just going to say
data article and we'll say loaded
article for the message everything else
can can stay the same so let's go ahead
and save that
and then we're going to go over here and
still a get request except we're just
going to add the slash one here and then
send and now you'll see we're only
getting the first article we want to get
let's say the one with three the idea of
three it's going to get that one okay
very very easy so now we want to
implement the create so under show let's
say def create and this is going to
handle a post request when we try to add
add an article from you know from
somewhere else so for this we're going
to have to add some params here as well
so let's say article and we're going to
set this to article to article model dot
new and then we're going to pass in here
article underscore params okay so we
basically have to whitelist certain
parameter ttan fields that we want to be
able to enter okay through this API so
we're going to go under the create right
here for now and just say actually first
of all we're going to make this private
and we're going to do we're going to
define article underscore params and
we're going to take params dot permit
and then in here we want to put the
fields that we want to permit which are
going to be the title and the body okay
those are the only two that we want to
actually be entering through through the
request and then let's see I think yeah
that should be all set let's just put a
let's just put an end here
and yeah so that should be good now once
we do that well we're going to check for
the save so we'll say it's article dot
saved then what do we want to happen we
want to render a response so we'll just
copy one of these and this will be a
success and for the message will say
saved article and then we'll send along
the article status is okay and let's put
an else here and if it doesn't save then
something went wrong let's just copy
this response and we'll change this to
error and we'll say for the message
article not saved and then for the data
we should be able to say article dot
errors and that will give us an actual
error okay and then for the status we're
actually going to change that to what
did I want to change that to just like
what the hell is it unprocessed evil or
something like that
I have like four different brought blog
posts open right here on processable
entry so right here just yeah
unprocessed belen tree let me just why
I'm getting those on the screen all
right so let's yeah let's go with that
we'll try it out so let's save we'll go
back to postman and I'm going to open up
another tab here and we're going to this
is going to be a post request okay so
it's going to HTTP local post port 3000
API version 1 and articles and then
we're going to choose in the headers we
want to choose the content type which is
going to be application and slash Jason
all right and then let's go to body and
I'm going to just enter some raw Jason
here
so we want the title and we'll just call
this article I don't know we'll just say
test article one and then for the body
and you need to make sure it's actual
formatted Jason so you want double
quotes on the title and the value or the
key and the value for the body we'll
just say this is the body all right so
let's cross our fingers and click send
and there we go success saved article
gives it ID six because that's the next
one in line and we have the title the
body and the timestamps and if we go to
our PHP myadmin just to double check and
let's reload there it is
test article 1 oops alright so we can
now create we can we can read the list
of articles and we can read a single
article so now we want to be able to do
is delete an article all right so let's
do that so we're going to create a
destroy function so def destroy ok so
this is going to be similar to the show
so let's grab that because we want to
get the article by its ID right and then
we just want to do article dot destroy
and then we'll send a request I mean I'm
sorry not request a response let's grab
this
say deleted article and we'll save that
let's give that a shot so for this one
I'm going to open up another tab let's
choose a delete and we want to go same
thing it's going to be HTTP localhost
3,000 API v1 slash articles slash and
then the one we want to delete so let's
do six all right and we'll go ahead and
send success deleted article all right
let's take a look at phpMyAdmin and now
it's deleted alright so the last thing
we want to be able to do is to update an
entry or an article so let's go back to
our controller and we're going to say
def update and and again we want to grab
a specific article like that and then
we're going to do similar to what we did
with the save we're going to do an if
statement here we're going to say if
article dot update and then we need to
pass into here actually you know it's
going to be update underscore attributes
and then we need to pass in to hear
those article underscore params just
like we did with the save okay so we'll
do that and then we'll have an else and
then we just need to decide the response
we're going to send so let's grab this
or if everything goes okay so success
will say updated article and then if
something goes wrong then we're going to
just grab that paste that in and this is
going to be article not updated will be
the message we'll keep that errors and
unprocessed able entry or entity and it
should do it so let's save
back to postman and we're going to do
this time a put requests which is for an
update 3000 API v1 articles slash and
let's update number five ok so we have
to go to our headers and add a content
type of application JSON and then let's
go to body and we'll say raw and see
you'll put in our title let's say
updated title and then we'll put in our
body and we'll say updated body all
right so let's go send we get a success
ok gives us back the ID of five gives us
the updated title and body so now let's
just check the PHP myadmin
reload and you can see that number five
has now been updated so we now have a
complete REST API in the sense that we
can create read update and delete now
this is our back-end ok so you can build
a front-end application using whatever
you'd like if you want to use you know
angular do you want to use another
JavaScript framework if you want to use
Python or PHP or anything that can make
HTTP requests ok now as far as
authentication and sending tokens and
stuff that's something you would want to
implement if you're building a
production REST API unless it's
completely public you know and you don't
want that stuff and that gets a little
more complicated but I will get into
that at a later point I just wanted to
show you how to create a very basic
restful api using rails alright so
hopefully guys you guys like this like I
said it was kind of off the cuff I do
have a some blog post with some snippets
but I didn't have the entire thing you
know planned out so if it didn't go as
smoothly as some of my other tutorials
that's why alright so please go ahead
and leave a like if you liked this video
subscribe
follow me on social media and I will see
you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>