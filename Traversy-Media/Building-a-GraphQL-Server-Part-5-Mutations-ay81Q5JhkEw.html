<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building a GraphQL Server [Part 5] - Mutations | Coder Coacher - Coaching Coders</title><meta content="Building a GraphQL Server [Part 5] - Mutations - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Building a GraphQL Server [Part 5] - Mutations</b></h2><h5 class="post__date">2017-07-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ay81Q5JhkEw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys so up to this point we can
fetch customers we can Kretsch all of
our customers as well as buy ID
individual customers now we want to be
able to add edit and delete customers
and these this is going to be done
through mutations because we're actually
mutating the data so it's actually
pretty similar to what we've just done
so what we'll do is we'll go under let's
actually go right to the bottom here and
we're going to create a variable called
mutation all right and we're going to
set this let me just put a comment here
so we're going to set this to a new
graph QL object type and in here we're
going to pass in our curly braces and
we're going to give it a name so you can
see this is very similar to what we've
been doing so name is going to be
mutation and then it has fields okay so
fields and first thing I want to be able
to do is add a customer so we're going
to call this add customer so this also
gets a type and it's going to have a
customer type that's what we're dealing
with customers and it's going to take in
args ok because when we add a customer
we're going to have to obviously add in
the fields we want to add so we're going
to have a name and we're going to set
that to a set of curly braces and we're
going to give it a type and this is
going to be a graph QL string now I also
I want to make these fields required so
when we insert a customer we want to
have to be able to insert a name so for
that we're going to use this non null
member we brought this in graph QL non
no so we just want to wrap this right
here out see so actually this is going
to be type new yes so we'll say new
QL non-null and we're going to wrap that
graph QL string like that okay and then
we'll put a comma here and let's just
copy this and then we also want an email
which will also be a string wrapped in
non non non no and then also an age
which will be an int so graph QL int but
we still want it to be required so we're
going to keep it wrapped and not a--not
okay next thing we want is the resolved
okay just like we've been doing and
resolve we'll take in parent value in
args okay and then in here we want to
make a post request to add data so we're
going to use ax cos again so let's say
return Axios dot post okay so in here
we're going to make a post request to
our server our JSON server which is
going to be localhost port 3000 slash
customers okay and then we're going to
put a second parameter here which will
be an object with our data so name and
remember we can access it with args
so args name will do email which will be
args dog email and age which will be
args
age okay and then again it's going to
return a response so we're going to say
dot then and we're just going to map res
to res dot data so that should be an
arrow and that should do it so let's go
ahead and save now in order for this to
work we need to add our mutation
variable that we created right here to
our schema okay so we're going to go
right under here and just say mutation
okay you could do mutation like that but
we'll use es6 syntax since they're the
same we can just get rid of that so
let's save and now we'll try to do our
mutation through graphical
so let's go ahead and just clear this so
I'm just going to reload the whole thing
get rid of that and now we're going to
try to do our mutation so we're going to
say mutation and we're going to set our
print curly braces and notice over here
on the documentation Explorer we now
have our mutation here and it gives you
the actual function of the actual
mutation of AD customer okay and notice
that if we go to query root query type
we have customer and customers so it's a
nice little map of all of our data okay
so let's go back over here and we want
to call the add user ad did we call it
yeah add customer you see it actually
pops up here which is cool and in here
we want to put our field so we have a
name and let's say we want to give the
name I will just say we'll say Harry
white and let's do email so we'll say
Harry Harry at Gmail and then let's say
age we'll say 34 okay and then we want
to open up our curly braces and what we
want to get back from this new customer
so let's say we'll say ID name email so
let's cross our fingers and press play
and there we go so we get it back add
customer now JSON server is actually
going to add the ID okay it's going to
generate a not an ID for us and it gave
us back the name and email now if I go
back to vs code and we go to the data
JSON file you'll see that Harry White is
now there okay so we've inserted a new
customer through graphical through graph
QL now again we don't have to be using
this this JSON server we could just as
well use MongoDB or something else okay
so that's what's really cool about
graphical you're not you're not limited
to a certain data store so let's go
ahead and add some other mutations so
we'll go back to our schema and what I'm
going to do is copy the add customer
these are pretty similar so let's copy
that and then we'll put a comma here and
then paste it in and we're going to
we're going to do a delete so let's
change this to delete customer still
going to have a customer type as far as
the args we just need an ID we don't
need any of these it just needs to know
which one to to delete so let's say type
and again this is going to be not null
so I'm going to say new graph QL not
null and then we're going to wrap graph
QL string okay so it'll take in an ID
and then for the resolve what we'll do
is a Axios dot delete request okay and
we need to put the ID in the URL here so
we'll say slash and we'll concatenate
args ID and then we don't need this
second parameter here and then that
should do it so let's save let's go back
to graphical okay and now we're going to
do our delete mutation so see we're
going to say mutation and it should be
listed over here if we go right here
delete customer so mutation delete
customer and we want to pass in the ID
we want to delete let's delete user for
actually we need to say ID for and then
we'll say return ID now I believe it's
going to give us null because it's not
that the customers not going to be there
but it should delete so let's press play
gives us back now let's go check our
Jason date adjacent file and for is now
gone alright so we've now made a delete
through graphical so now let's take care
of an update so we'll go back let's copy
add customer again
you can see how easy these mutations are
paste that in and let's call this one
edit customer and let's see
as far as args we're going to do an ID
as well so I'm just going to grab this
from the delete ok ID is going to be the
only one required because we might not
want to update the name or email or
whatever so what we'll do is just get
rid of the the non null so get rid of
that because if if we make them require
that means they're not going to be able
to just update a single field or a
couple fields they'll have to do them
all we don't want that and then as far
as the resolved we're going to do a
patch request so Axios patch and we're
going to put in here slash and then
concatenate the ID so it knows which one
to update and then we can just instead
of passing this in we can just pass in
args ok the entire thing and then just
map to read data so let's save that
let's go back to graphical let's just
reload this wise all right so let's go
ahead and try it let's first look over
here so we do have our Edit customer
mutation so we'll say mutation mutation
edit customer ok so we want the ID of
the customer you want to edit
let's do customer two and let's say we
want to change the age - let's save 50
ok and then we need to return something
so we'll just return the ID and the name
so let's run that
and now ID - Keith Wilson we probably
should have returned the age so we can
see it but we can simply go to our data
JSON file and now Keith Wilson is now 50
alright so we now have full crud
functionality with our graphical server
so that's going to be it guys for this
series I hope you found it informative
and I taught you a little something
about graph QL it is a it is an awesome
technology and this is just scratching
the surface guys when we get into you
know having more collections and having
relationships and how data can all be
interconnected it gets really really
cool so that's it guys I will seriously
think about and look into building a
front-end to this back-end maybe a react
application using Apollo or something
like that you know so we do have UI
something to look at but that's going to
be it guys thanks for watching if you
stuck through this series that's awesome
and I will see you in the next video so
if you guys really like my videos and
you learn a lot from them and maybe you
have a couple extra dollars to spare
check out my patreon page I'm working on
creating special content for patrons you
also get special deals on future courses
and there's even an email support here
for all YouTube videos and projects to
learn more visit patreon.com slash
traversée media</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>