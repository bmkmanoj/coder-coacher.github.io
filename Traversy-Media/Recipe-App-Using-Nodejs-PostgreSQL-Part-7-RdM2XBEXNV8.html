<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Recipe App Using Node.js &amp; PostgreSQL - Part 7 | Coder Coacher - Coaching Coders</title><meta content="Recipe App Using Node.js &amp; PostgreSQL - Part 7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Recipe App Using Node.js &amp; PostgreSQL - Part 7</b></h2><h5 class="post__date">2016-08-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RdM2XBEXNV8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to your last video of
this project in the last video we went
ahead and made it so that we can delete
recipes so we can now add and delete
them now we want to be able to edit them
which is going to be a little more
complicated because what we want to
happen is when we click the edit button
here we want a modal to open just like
this except we want to have the fields
in there that we can edit alright so
what we're going to do is when we click
the edit button we're going to have to
pass along all of the values along with
that click with that event so we're
going to be adding some data attributes
to this button so let's do that we're
going to go to views and then index and
we have our edit button right here so
before we go and add the data attributes
let's grab the the attributes we need
for the modal so if we look at our add
button you can see we have data toggle
and data target so we're going to need
those and we'll put these I'm gonna put
each each attribute on its own lines to
make it a little more readable so data
toggle modal that's good but the target
we need to change we're going to call
this one edit form modal alright and
then we're also going to add the ID okay
so data ID equals whoops that needs to
be in quotes ID
alright we're also going to need the
name
okay we need the ingredients okay the
directions and I think that's it all
right
let's save that and then we're going to
go to Maine dot J s and we have to
create an event for that so let's go
right after that delete recipe click
event and we're gonna say edit recipe
dot on click then we'll have our
function now what we want to do is just
fill in the the form values for the
modal with the whatever recipe we click
Edit for so what we'll do is let's
actually you know what we need to do
before we do that is create the actual
modal okay we have our ad for modal here
so what I'll do is just copy this whole
thing let's see where this ends okay so
we'll copy the whole thing and then go
right under it and this is gonna be the
Edit for modal okay couple things we
need to change the ID change to edit
form modal change the label and the
action of the form is going to go to
slash edit okay and then what we're
gonna do is we're going to attach the ID
to a hidden field so that we can get the
ID so let's go just go right under the
form tag and say input and it's gonna
have a type of hidden
and we're going to give it an ID of edit
form ID and let's give it a name of ID
okay so there's our hidden input now we
have to give IDs to the rest of the
inputs as well so that we can grab them
in in our jQuery so let's see we have
our input here for the recipe name so
I'm just going to paste that in and then
change that to name ok this text area
here I'm going to paste that in that's
gonna be edit form ingredients and then
this one here this is gonna be editing
Direction's okay so now they all have
IDs so let's save that all right and
then back to the button should be all
set we have it going to that modal
alright so now let's go back to main j/s
and here let's say ID edit form name
okay we're going to grab that input and
then insert the value of the name that's
attached to the data attribute so for
that we'll say this dot data name okay
so that's going to get the name and put
it in the form we're going to do the
same thing for ingredients
directions and ID all right so let's
save that and let's give it a shot
okay so if we go and click the edit
button for this okay so it's not getting
the values I'm being inserted so let's
take a look oh okay so this should
actually have a dot that's our class
there we go so now when we click Edit
and opens the form and it inserts all
the data check this one okay so now that
we have the stuff in the form we want to
handle the submission so let's go to app
J s okay and this is going to be app dot
post okay this is going to be slash edit
function
and we're gonna again just copy this put
that in there and instead of a delete
this is gonna be an update so what we'll
do is say update recipes and then we
want to say set name equals dollar sign
one ingredients equal dollar sign two
directions in equals dollar sign 3 and
then we just want to say where ID is
equal to dollar sign for alright now we
have to go inside our brackets and put
in all of those placeholders so the
first one is going to be req dot body
dot name okay then we'll do ingredients
ok then we want req dot body dot
directions and wreck dot plot e dot ID
all right and then let's see we're going
to keep the done and then we're going to
say res redirect to slash and that
should do it so let's save that and
let's give it a shot
okay so let's try and edit something
corned beef hash click Edit and let's
change it to I'll change it to roast
beef okay save and there we go it's now
roast beef if I reload it should stay
okay so now we have full crud
functionality so that's going to be it
for this project hopefully you guys
learned a little bit from this how to
use postgrads how to implement some of
the bootstrap JavaScript widgets also
how to use the dust template engine okay
so thanks for watching and I'll see you
in the next project</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>