<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node.js &amp; Express From Scratch [Part 5] - Save Articles to MongoDB | Coder Coacher - Coaching Coders</title><meta content="Node.js &amp; Express From Scratch [Part 5] - Save Articles to MongoDB - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node.js &amp; Express From Scratch [Part 5] - Save Articles to MongoDB</b></h2><h5 class="post__date">2017-05-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xrxDk1zLKdc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys in this video we're going to
create our form to add an article to the
database so we're going to start off in
the add article dot pug file which is in
our views folder and I'm going to go
right under the h1 and let's create a
form alright so this form is going to
it's going to have some attributes so
with Pug we need to use some parentheses
alright so we want to set the method of
the form and we're going to set that to
post all right and then we're going to
set the action to slash articles slash
ad okay so we'll catch this on the other
side and in fjs after and after we do
this so in the form we're going to have
let's put a div with the ID of form
group which is a bootstrap class so
we're going to be using bootstrap for
the for the UI and inside here we'll
have a label so the label for of the
title and then we'll have an input and
the input is going to have a class so we
can do dot form control alright now this
is also going to add some attributes so
we need to open up some curly braces and
the name for this is going to be title
and the type is going to be text so
let's just try that out we'll save it
and reload and there we go so there's
our title field now it will do is copy
the form group go right under it on the
same level
let's have to bring that back and this
is going to be for the author later on
down the line we may add authentication
so we can log in and then have the user
as the author but for now this is going
to be very simple change that let's make
sure that shows up good don't worry
about how it looks now I know it looks
absolutely horrible but we're going to
be using bootstrap and then we're going
to paste that in one more time
okay this is going to be the body and
this is actually going to be a text area
so let's go ahead and change this to
text area and we'll change the name to
body all right we can get rid of the
type as well and then we need an int and
input button our submit button so let's
say input and let's give this a class of
BTN and BTN primary actually we'll have
to like that I think that's how we do it
in pod
if not we'll fix it and that's going to
have a type of submit just going to have
a value of submit so let's see what that
gives us we'll reload and I'm just make
sure the mark-up is right for this yep
so we have class BTN b10 primary alright
so now that we have the form we need to
we need to catch the the request
okay so we're submitting a post request
to this right here articles slash add so
let's go back to app KS and let's go
down where we have our routes and let's
say add add submit post route I guess
and we'll say app now since this is a
post request we need to do ab dot post
all right and then the URL which is
going to be a slash articles slash ad
now notice this is the same as this and
that's that's fine because these are two
different types of requests you can have
a go to the same URL as long as it's a
different request so say function and
again this is going to take requests and
response and then let's just do a
console dot log for now and we'll just
say submitted and then let's just return
okay so we'll save that let's go over
here and reload and we'll just say test
Brad test one submit and let's look at
our console not that and you'll see
submitted now the console log is going
to show here it's not going to show down
here because this is the client this is
the server and we're submitting it to
the server
alright so let's get rid of this and
then what we want to do is we want to
get these fields here and then
ultimately we want to submit it to the
database so let's go and say let's say
let article equals and we have access to
the model okay because we brought it in
right here so we can say let article
equals new article and then we want to
assign the fields so let's say article
dot title is equal to actually you know
what we need to add a module called body
parser in order to get this because what
we want to do is we want to say request
body dot title and if we try to
console.log actually let's just
console.log this and i'm just going to
comment this out for a minute alright
let's just see what that does
I cannot read property title of
undefined so we can't even do it because
it doesn't know what this is because we
don't have the body posture installed so
we're going to go to our command line
here and ctrl C we're going to stop it
and then we're going to install body
parsers so let's say NPM install - -
save body parser
alright and with express three back in
Express three this was actually included
we didn't have to install it separately
like this now we need to add some
middleware for this so let's run our
server node Mon and if we go to let's
say body parser github and we go down
here see or is it right here so we want
these two lines or the yeah this app dot
use this is just the required middleware
for body parsers so we're going to go
put this let's say right here paste that
in let's just say body parser middleware
alright that's fine so let's save it now
and go back and reload the server
running oh we need to bring it in
because it doesn't know what this is
right here so let's go up here and just
like with the rest of these modules
we're going to say body parser is equal
to require body - parser okay so now if
we go and reload that works and if we go
and we just type something in and submit
you can see that we're getting the title
okay so let's go back down and we can
now uncomment these two and get rid of
this so that gets the title puts it into
this and then we need the author so
request body dot author and the body
glass body dot body it's kind of weird
and then we should be able to save this
so say article yeah should do article
dot save and then in here I'm going to
function and then pass an error and then
we're going to check for the error and
if there is one will console dot log it
and then we'll just return and if there
is no error then what do we want to do
so once we submit it
we'll probably want to redirect back to
the index page right so we can take the
response we can say res res dot redirect
and we want to go back to slash so let's
save that and let's give it a shot it
actually it actually already submitted
because it reloaded all right so let's
go slash articles slash ad and let's say
article four will say John Doe for the
author and then we'll say this is
article four submit and you can see it
got added and then we redirected alright
and if we go to our Mongo shell here and
we do a find
there we go you see we have this crap in
here as well but we'll get to deleting
them but before we get to deleting I
want to make this look a little better
I'm getting sick of looking at this
honestly so we'll implement bootstrap
we're going to use something called
Bower which is a front-end package
manager it's like NPM but for the client
side so we'll install bootstrap we'll
add some styling we'll add a navbar and
then we'll move on to editing and
deleting articles
stuff like that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>