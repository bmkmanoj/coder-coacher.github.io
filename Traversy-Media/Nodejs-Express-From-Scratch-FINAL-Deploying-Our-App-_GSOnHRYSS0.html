<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node.js &amp; Express From Scratch [FINAL] - Deploying Our App | Coder Coacher - Coaching Coders</title><meta content="Node.js &amp; Express From Scratch [FINAL] - Deploying Our App - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node.js &amp; Express From Scratch [FINAL] - Deploying Our App</b></h2><h5 class="post__date">2017-05-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_GSOnHRYSS0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys so in this video what I
want to try to do is deploy the
application that we've been building now
I haven't done anything to kind of
prepare for this so I'm just giving you
a heads up that we may run into some
issues and you know have some hiccups
but I think it's good to kind of show
the whole process from scratch because I
mean that's how it is in the real world
you know you're going to run into issues
you're going to you're going to have to
learn things as you go and I think it's
better to do it this way than to have it
all you know a cookie cutter template of
how it would look in a perfect world
because it's definitely not a perfect
world when you're a developer or a
programmer so we're going to be using
digitalocean I would definitely suggest
digitalocean for pretty much any kind of
application nodejs Express Python PHP
pretty much anything it's they're a
really great company and they're really
cheap when you if you compare them to
other Virk VPSs they're very cheap so I
have an account already so I'm going to
log in here see what they do tech guy
info and password so once you oh I have
two factor authentication enabled so I
just got to check my my text message
real quick alright so let's see c 8 c 8
3 4 alright and this is just a test
account I don't have any production
sites or anything on this you can see I
don't have any droplets so if you've
never worked with digitalocean they have
droplets and a droplet is basically just
a VPS it's a virtual server and you have
full access to it you can log in through
the shell and you can run any commands
you want you can install whatever you
want just like we did on our local
machine ok so what we're going to do is
create a new droplet and there's a
couple different Linux distributions you
can choose we're going to stick with a
bun too and as far as the payment goes
you can add funds to your account and
then you can purchase packages with
fun's all right so let's say we want the
lowest one which is $5 a month this is
more than enough for testing and
prototyping if you are running a
production application you may want to
add some more resources and go a little
higher so let's go down here and we want
to add an SSH key because you want to be
able to secure your account and I would
suggest SSH into it instead of using a
username and password and you can
actually disable login functionality so
that only your machine can tunnel into
your SSH so let's say new SSH key now to
generate it since we're in Windows it's
a little more difficult what we're going
to do is download the tool called putty
ok so there's actually two programs we
need one is putty that's used to connect
through SSH and then puttygen is used to
generate a an SSH key so let's go ahead
and click that you can download the
putty here and we want to grab let's see
I'm on windows 64-bit so I'm going to
grab that and then I'm also going to
grab where is it putty Jam Exe 64-bit ok
so we're going to get both of those and
then I'm just going to move those let's
go ahead and cut and we'll put them in
the C Drive and I'm just going to create
a new folder called putty ok we'll paste
that in there these aren't installers
these are the actual programs so let's
open up puttygen first all right and
what we want to do here is click
generate and it says move the mouse
around here to generate and then this is
our key right here so we want to grab
from the beginning all the way to the
end make sure you get the whole thing
and let's go ahead and copy that and
then we'll paste it in here and you see
we get a little green checkmark and then
we can name it I'm just going to call
this public key one
all right and then let's go back to
potty Jen and what we want to do here is
save the key so let's say save public
key and I'll just save it to documents
so we'll call this public let's say
public dot key and then we also want to
save the private key all right now you
can put a passphrase if you want but I'm
just going to leave it blank and I'll
click yes and then let's say private key
one and then this is going to have a PPK
extension so let's save that and we
should be all set with this program so
let's close that up let's continue on
with this and then we'll open up putty
and we'll connect so for a hostname you
can pick whatever you want I'm just
going to leave the default and then
let's just click create and now it's
going to go ahead and set up our server
or droplet and now it's all set so you
can see we have an IP address and if we
click on that we can go to basically our
dashboard for the droplet and we can
have we have graphs which aren't
available just yet but they will access
we can actually launch a console here if
we wanted to but we're not going to do
that we're going to use our machines
console let's see power you can power it
down you can upgrade if you want if you
want to pay more and get more resources
back up snapshots if you want to destroy
it you can just go ahead and click on
destroy and that'll wipe it clean so
what we want to do now is connect so
we're going to open up putty exe and if
you're on Mac or Linux you can just use
the SSH command and there's ways to use
it on windows too but we're just going
to use putty so let's grab the IP
address here let's copy that actually
and paste that in now we need to use our
our key that we generated so we're going
to go down to data and let's see we're
going to use for Auto login username
will say root
and then go down to SSH and off and then
what we want to do is upload the private
key that we created so let's click
browse and we want private key one and
then let's go back up to session and
we're going to save this so right here
let's just say I'll just say deal one
for a digital ocean one and save and now
when we come here we can easily load it
up all right so let's click on open and
it's going to give us this this box the
first time we connect we're just going
to say yes and now we're in you see we
didn't even have to put in a password
because we use the SSH key so now we can
use this just like we would on our local
machine and we can install stuff and you
know set everything up so it's going to
be a little different because I was
using windows on my client machine so
you know installing MongoDB and stuff is
a little different let me just make this
bigger see I can I make this bigger
change settings parents see change the
font and let's choose 24 that should be
good there we go oh it's yeah that's
fine at least I don't have to worry
about you guys not seeing it so let's
see first thing we're going to do here
is install node.js so installing node.js
on a bun too is pretty easy if we go
down to C to sit yeah right here so we
want to run this curl command because by
default it's not in the repository so
let's grab this and we'll just paste
that in here and we'll run that that'll
make it so that we can then run apt-get
install node j s so we'll copy that
actually we should probably do a sudo
apt-get update first alright and then
we're just going to paste this into
install mode and now if we say node dash
V you can see node is now installed as
well as NPM so next thing we're going to
do is install MongoDB so let's say
MongoDB install Ubuntu okay so let's see
first thing we're going to do is import
public key by using the package package
management system so we want to grab
this right here I'll just click copy and
let's paste that in and run it alright
and then we need to create a list file
for MongoDB so we're going to do we're
on a bun 2:16 so let's grab this right
here and then we already go to layout
let's just run an update again so sudo
apt-get update and then we're just going
to run this we can now install it with
apt-get
all right and then to start it we can
run this command start the service
okay so then and now Mongo should be
running if he wanted to stop it you
could just go down you can run this
right right here
okay sudo service Mongo dee stop and you
can also restart so now that that's
installed let's go ahead and clone the
repository so let's go to github and
let's see um I'm not going to sign in I
don't need to let's just search for me
all wait this is searching repositories
let's search users and look someone
actually created an account with my name
so let's go here and it should be right
here node KB all right so we just want
to basically clone this project so up
here it says clone let's grab this okay
now it should be installed get okay so
let's go ahead and run git clone and
then we're just going to paste that in
alright so if we look at our directory
structure now we're in the home
directory we have node KB all right are
we in the home directory
yeah we should be so what we'll do now
is CD into node KB look not JB and then
from here let's run actually let's
install node mod as well might as well
so npm install - ji node lon
okay so now let's try to run it you know
what we have to run we have to run npm
install to actually create install all
the dependencies so let's do that so
this will look at the package.json file
and install everything in it so that
includes Mongoose it includes pug what
else did we use Express messages all
that stuff
alright so now that's done let's try and
run node Mon and it started so let's
grab our IP address go over here paste
that in we want to go to port 3000 and
there it is there's our application so
if we want to test things out let's
register let's say Brad at Gmail
username submit okay we're registered
let's try logging in and there we go to
add an article
submit article added so our application
is now live on the Internet
now we want to do a couple things so one
we don't want to have to have this
running in order to go to our website so
what we can do is we can start it as a
service so there's a few different ways
that we can do that one is by using
something called p.m. - so this is the
process manager for nodejs and we're
going to use this and we should just be
able to do p.m. to start and then
whatever our entry file is and it'll run
it in the background alright so let's go
ahead and do a ctrl C and stop this and
then we're going to do NPM install p.m.
- - G we want to install it globally all
right once we do that we should be able
to start it up okay so let's do p.m. to
start app dot J s okay so now it should
be running in the background so it
should still work if we go over to here
and refresh and it's still running good
so another thing you'd probably want is
to not run it on a port like this 3000
now the default port for HTTP is port 80
but by default if we were to change the
port number to 80 it's not going to work
but we can actually install a package
called Lib cap - - bin and that will
allow us to run it on port 80
let me just search for that Lib cap - -
pinned and
see I guess does not implement to the
user space interfaces all right so it's
not really not really a good description
of it but we're going to install that
first we're going to stop our
application and we can do that with p.m.
to stop fjs and then let's go ahead and
say sudo sudo apt-get install and it's
lib to cap - bin all right so now that
we have that installed we have to run a
command let me see if I can find that
there's a few ways to do this to get it
to run without having to go to a certain
port where the heck is the package all
right you know I'm just going to copy it
and paste it in and you guys can copy it
all right so it's sudo set cap and then
you have this cap net bind service
equals plus EP and then read link - F
and by the way these are back ticks not
quotes can I make sure you put those in
and then which node so let's run that
and then let's start the actually we
need to edit the application because
we've set port 3000 we just want to go
in and we want to change it to port 80
so just for simplicity I'm going to use
Nano which is a terminal based text
editor and we're going to edit app j/s
all right so let's just change go down
to the bottom
and right here where we put three
thousand we're going to change that to
eighty and we'll say server started on
port 80 okay and then we're going to do
control X yes to save or Y and then
enter so now let's go ahead and start
the application again
so we'll say p.m. to start app j/s and
now let's go to just the IP address not
the port and there we go alright so last
thing that you'd probably want to do is
you want to use a domain name not an IP
address and if we go to digital ocean
and we go to let's see networking and we
want to add a domain now I actually have
a domain pointed to digital ocean
already let me just show you how to do
that I use I'm using UNAM Central but
you can do this from whoever host your
domain name or the registrar
I'll see I'm going to just log in here
think this is my account not sure no
maybe it's tech i won
there we go all right so the registered
domains I have I think it's cold learner
yeah right here cold learner net so you
basically want to go to your domain
registrar and you want to edit the DNS
records or the name servers so in this
case with UNAM I would choose this DNS
server settings and then you want to add
three name servers ns1 digitalocean comm
ns2 and ns3 and save it might take a
little while for the domain to propagate
but once it does you can come over here
and you can say add domain and say cold
learner dotnet or well obviously your
own domain name and we're going to add a
couple records here so we want a a
record so right here in host name we're
going to just say hat and over here
we're going to choose our droplet I only
have one but if you have multiple
they'll all show up so we're going to do
that say create record and then we also
need to add a cname and in here let's
say WW because we want both versions of
the domain just
Kotler Nannette and wwk are Nannette we
want those to point to the host so at is
just representative of our host of our
IP address so let's go ahead and click
create record and we should be all set
so now let's go to code learner dotnet
and there's our application okay we
should be able to login
there we go so we now have a live nodejs
an Express application
now there's other provisions that you
should set up if this was a production
server you want you want to add better
security you shouldn't be even logging
in as the root user so create a new user
and you might have to add the SSH key
for that user as well I actually have a
video that goes a little more in-depth
on this process I forget exactly what
it's called it's like deploy node to
digitalocean or something like that
all right so hopefully you guys enjoyed
this I might add some more functionality
to this I'm not sure I know that a
couple people asked for file uploading
so that's something I might look into
but I did want to just get a deployment
video out for now before I start to move
on to other stuff and like I said in the
first video laravel is coming I know a
lot of you guys are asking for that so
that will be out soon and that's it
thanks for watching also guys if you can
if you have a Twitter account go ahead
and follow me Twitter coms slash
traversÃ©e media I'm trying to to get I
mean I've kind of neglected the account
but I'm trying to get more followers
because I want to be able to post you
know updates about what's coming up and
and all that so if you guys can just you
know subscribe on Twitter and you know
that would be that would be helpful so
thanks for watching guys I will see you
in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>