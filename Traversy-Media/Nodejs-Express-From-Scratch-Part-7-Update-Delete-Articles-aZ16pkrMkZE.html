<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node.js &amp; Express From Scratch [Part 7] - Update &amp; Delete Articles | Coder Coacher - Coaching Coders</title><meta content="Node.js &amp; Express From Scratch [Part 7] - Update &amp; Delete Articles - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node.js &amp; Express From Scratch [Part 7] - Update &amp; Delete Articles</b></h2><h5 class="post__date">2017-05-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aZ16pkrMkZE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys so we can now add articles
we can view the listing listings and we
can click on a single article so what I
want to do now is add an edit button to
this page the single article page so
let's go to views and then article dot
pug and we're going to go under the body
and let's put an HR and then we'll put
right under it for a tag let's give it a
class of BTN and BTN will say default
and then it's going to need an href and
the href is going to go to slash
articles or article slash edit slash and
then the ID which we need to just
concatenate on like that article dot
underscore ID so let's take a look at
that oh we need to text okay so now we
have an edit and you can see it goes to
article edit and then the ID so we need
to route for that let's go back to our
app dot j/s file okay and then this is
going to be similar to the single
article because we need to get the ID we
need to find the that specific article
and then we need to load the edit form
so I'm going to just copy this whole
thing here and let's paste it in we'll
go under the add ok so this will be load
edit form so slash article slash edit /
ID then we're going to find it by its ID
then we're going to render a template
called edit underscore article alright
we're going to pass along the article so
let's save that and then what we'll do
is copy what we have an add article
could look it's the same form we'll copy
that and then we'll create another view
and we'll call this edit on a score
article dot pug and then we'll paste
that in okay
let's see it has a title so let's pass
in a title and we'll just say edit you
don't have to do this the dynamic title
thing but I don't know why not okay then
we have our form now this form is going
to go to a different place it's going to
go to articles slash edit slash and then
the ID okay so we can get that with
article ID or underscore ID sorry and
then we need to put the values in these
inputs so let's add right here value
equals and not exactly sure the syntax I
think I think we might be able to just
do article dot title like that let's try
it out so if we reload this we click
Edit there we go yeah that works article
one so we want to do the same thing for
author okay and then for the text area
we actually want to put that here
so article dot body all right if we
reload now we have the data oh that's
not right let's see it think that work
yep let's actually put a space right
above the button there I don't like that
same thing with the ad all right so now
we have the form the edit form with the
data inside of it now we need to catch
the submission which is going to go to
articles edit and then the ID it's going
to be a post request so let's go to app
J s and this is going to be similar to
the ad so let's grab this paste that in
and let's say update submit so post and
it's going to go articles slash edit / :
ID okay now this is going to work a
little differently we're not creating a
new article what we're going to do is
set this to an empty object so we'll say
let article equals an empty object and
then we're going to add to it like this
we can leave it we're going to get the
fields from the form add to that object
and then we're going to create a query
because we need to specify which one we
want to update we're going to say we're
underscore ID matches request params dot
ID okay which is going to be this coming
in from the URL and then instead of
using the actual article variable up
here we're going to use the model okay
so that's capital a article and then
it's going to be update not saved okay
and then we need to pass in first the
query and then the data which is in an
object in this article variable that we
added all the stuff here and then the
rest will be the same we're just going
to redirect so let's save that and then
we're going to go to this thing here
this is DD and let's edit that we'll say
article 5 and submit and there we go so
you can see it's changed to article 5 so
we can now update articles so now we
want to be able to delete them
now delete is going to work differently
because we want to make a delete request
and we can't do that with a simple link
we can't do that with by submitting a
form you can only do get in post so what
we have to do is use Ajax and there's a
lot of different options what I'm going
to do is just use jQuery and then just
make a simple delete request with Ajax
to the delete route all right so we need
to create the button first so let's go
to our article dot pug and let's put a
link here and this is going to have a
class let's say BTN and then BTN danger
alright and then the href is just going
to go nowhere it's going to go to a
number side because what we're going to
do is add we're going to add a class in
addition to these button collapses
called delete we'll say delete - art or
article alright and then we're going to
use that we're going to grab onto that
with jQuery and then we're going to make
a delete request now remember we need to
know the ID to make that request so what
we can do is we can attach another
attribute called data - ID and we're
going to set that equal to so you're
going to set that equal to article dot
underscore ID oops
I'm not sure if I can do it that way
but let's let's save that and take a
look alright so if we do an inspection
here let's just check that ok
so that is working you see data ID
equals and then it's the ID and then
we'll be able to grab on to that from
within jQuery and we'll be able to make
our request now the file that we're
going to use is going to be in the
public folder so let's say new folder in
public called j/s and we'll create a new
file called main jas so this is
basically the client-side JavaScript
file alright while we're here let's
create a CSS folder as well and then a
style sheet because we don't have a
custom style sheet yet
alright and then we're going to have to
include both of those in our layout
files so let's go to layout pug and
let's copy this and paste that in and
then we're going to change this to slash
CSS slash style.css and then we want the
main j/s included down here okay after
all this stuff so this will go to /j s
which is in the public folder slash main
j/s alright and just test it out let's
go to main js2 just do an alert ok and
there we go we get the alert so we want
to make our Ajax requests so we're going
to use jQuery so let's do document dot
ready and then put in function
I do have a jquery crash course that you
can check out if you want to learn more
about jquery so let's see we're going to
grab on to that delete article class
okay and then we're going to do dot on
and then click ok when it's clicked on
we're going to run to function
and it's passed in here so that we can
say e dot prevent actually no we don't
need to do that it's not a form let's
but we do need to get the target okay
because we want to be able to grab on to
that data attribute that data ID so we
can create a variable called target and
set that to that event variable dot
target and then we should be able to get
the data ID attribute so let's say
console dot log and here we can say
target dot adder and we want to get the
data ID
okay so let's save that and we're going
to reload click on the console and then
delete and you can see we're getting
that ID all right if we go to article
three click delete we're going to get
that ID so now we can put that in a
variable so say Const ID equals set it
to that and then we can make our request
so we're going to say money sign Ajax
and in here we're going to pass in an
object we want to say the type of
request that this is going to be is a
delete all right and then the URL is
going to go to slash article /i whatever
the idea is and remember we have that in
a variable right here so we're going to
just concatenate that on alright then
what we'll do is right after this URL
value we're going to say success okay so
if this works then we'll get a response
and actually let's do like this
all right so success and all we want to
do is let's do it we'll do an alert and
we'll say deleting to do what to do what
the hell is this article and then we're
going to redirect to the home page and
we can do that in JavaScript with window
dot location dot href let's do single
quotes and we'll go to slash alright and
then if there's an error then we want to
run this function that will pass us an
error message and we'll console.log it
alright so that should do it let's save
and now we need to create this route
because this is what it's going to be
submitting the delete request to so
we're going to go back to AB js' and
let's go down here and we're going to do
AB delete okay cuz it's a delete request
and it's going to go to slash article /
: id class response just like any other
type of request now to delete it we're
going to say X let's create a query
variable and we're going to set
underscore ID to request dot params ID
which is coming from the URL and then we
can take the model so article and we can
say dot remove we can pass in the query
and then the function alright we'll put
an error here and we'll just test for
the error
era now since we made a request from
that main jf script we need to send back
a response so to do that we're just
going to say res send and by default
that's going to send a 200 status which
means everything's ok so we can put a
little message in here we'll just say
success
okay so let's save it and let's go back
over here and go to article 5 and click
delete we get our alert click OK and it
redirects us and you can see article 5
is gone alright so I hope that wasn't
too confusing I know when I first
started learning Express and all this
stuff the delete requests really
confused me you know making the Ajax
request I did I couldn't see why we can
just create a link that would send it to
a get request and then delete it that
way but that's very very insecure so
that's going to be it guys for this
video I'm not exactly sure what we'll do
next I do want to eventually deploy this
application I might also add some
authentication to it but we have a full
crud functionality application and
that's it I will see you in the next
video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>