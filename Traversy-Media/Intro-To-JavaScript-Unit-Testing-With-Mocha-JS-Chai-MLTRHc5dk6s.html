<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Intro To JavaScript Unit Testing With Mocha JS &amp; Chai | Coder Coacher - Coaching Coders</title><meta content="Intro To JavaScript Unit Testing With Mocha JS &amp; Chai - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Intro To JavaScript Unit Testing With Mocha JS &amp; Chai</b></h2><h5 class="post__date">2017-05-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MLTRHc5dk6s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's going on guys I've recently
had some requests for a tutorial on
testing in JavaScript so testing is a
really good habit to get into and in
this video I'm going to show you how to
get started with mocha which is a
testing framework for JavaScript or for
nodejs as well as chai which is an
assertion library all right so let's go
ahead and get started this video is
sponsored by dev Mountain if you're
interested in learning web development
iOS or UX design dev Mountain is a
12-week design and development boot camp
intended to get you a full-time job in
the industry to learn more visit dev
mountain comm or click the link in the
description below alright guys so I'll
be the first to admit that I kind of
slack in this area I don't tend to use
testing very often but part of that is
because all the code that I write at
least lately is for either a course or
for my YouTube channel and I'm usually
focused on one aspect or technology and
then adding testing to the mix could
kind of confuse people and also make the
videos much longer but if you're
building and maintaining a large project
or a large application testing is
definitely a good idea and you should at
least learn the basics alright so like I
said we're going to be using mocha which
is a testing framework and then chai
which is an assertion library okay so
this is a beginner friendly tutorial so
we're going to use very simple examples
it's going to be more geared towards
showing you how to set up mocha and chai
and then write some really simple tests
okay now chai is actually optional
because no js' has an assertion library
by default but it's it's not as it's not
as powerful it doesn't have the same
functionality this is the chai website
if we go to API and then assert it shows
you all the different methods you can
use alright so for instance equal is
we're going to be using that that's to
make sure that a return value is equal
to a certain value not equal we have is
above so we can check to see if the
value is greater or less than with at
least or below yeah is below and it's
just a bunch room so you may want
we want to check that out alright so
what we're going to do first is just
create a project folder now I'm on Linux
but everything I'm doing here you can do
just as well with Windows or Mac just
make sure you have no js' installed so
let's create a folder for our
application I'm just going to call it
mocha test and then I'm going to CD into
local test and we're going to do an NPM
in knit which is going to initialize our
application it's going to create a
package JSON file so we're going to
enter through this description I'll just
say simple app for testing and then the
entry point I'm going to say app dot J s
but you can use whatever you'd like and
then we'll just enter through the rest
all right so let's go ahead and add the
project to Adam and there's our package
JSON file now what we want to do is
install both mocha and chai so let's go
over here and say npm install mocha
space chai and then we just we're going
to do a - - save - dev so that'll save
those as dev dependencies okay so you
can see those that just popped in here
all right now to run it we're going to
use the mocha command but I want to be
able to do NPM run tests and they
actually already have a script here
called tests so we're just going to
replace this with mocha all right and
we'll save that so our structure is
going to be very simple we're just going
to use that the app.js file so let's
create that and then by default mocha is
going to look for a folder called test
so we're going to create that and then
what we want to do is create a test file
for this app.js file so say new file app
test dot j s now when you when you're
doing this creating your test files you
want to kind of mimic your your folder
structure for example if we had a user's
folder in our application you should
also have a user's folder in your test
folder and then have tests for each
script
reach each file okay so let's go into
app KS and all we're going to do here is
say module exports and this just makes
it so that whatever we put here is going
to be accessible outside of the file so
for now let's just put in a function and
we'll just make it return we'll return
the text hello okay we'll save that and
now what I want to do is write a test to
make sure that this function actually
returns hello all right so let's go to
add tests or app tests whatever and then
we're going to bring in our assertion
library so Const assertion not assertion
assert and you can use the default
nodejs assertion library if you want or
assertion module if you just do require
assert okay so you could do that but
we're going to use chai so what we want
to do is put in here
chai and then we want dot assert okay
because it has a couple different
functions you can use so we also want to
bring in our app j/s file so let's say
Const app and set that to require app
okay actually one do dot dot slash app
because we're going outside of the test
folder all right so now to create a test
we're going to do describe and we're
going to call this app after the file
name and put a function and to actually
test a value we're going to use the it's
function and in here we want to put some
kind of description of what we want this
to test so let's say we'll say app
should return hello and then second
parameter is going to be a function and
here what we want to do is take that
assert module that we brought in from
 from chai and we want to use equal
okay so we're going to say equal and
then the actual value we want to test
which is going to be apt make sure you
put parentheses because remember this is
returning a function and then the second
parameter is going to be what it should
return which is going to be hello all
right so that's an actual test that we
can run so let's go ahead and save this
and then we'll go over here and we'll
say npm run test and then we go so app
should return hello and it says we
passed now if I go back into app guess
and we say hello one when we try and run
it okay it's going to first tell us that
it failed it says one failing and it
says expected hello 1 2 equal hello so
it gives us a pretty good description
and then by default you're going to get
this crap here okay which we can
actually disable and we can do that with
one of two ways so the first would be to
do npm run test and then add - s so then
it only shows us it only shows us that
result there all right but I don't want
to have to add - s throughout the whole
tutorial so what I'm going to do is go
to package JSON and then when it calls
mocha we're just going to put in double
pipes or whatever these are called and
then true so now if we go back and we
just run npm run test it's not going to
give us that crap even if it fails okay
it's just going to tell us that it
failed so let's go back and just change
that back ok so now it passes now a lot
of times you're going to have a file
that actually exports multiple functions
so I want to I want to run a test or a
couple tests on a couple different
functions so what we're going to do is
in our app J s instead of doing just you
know function and return what we'll do
is get rid of this and then put in some
curly braces and then let's create a
function called say hello
that'll do exactly what what we just did
so we'll say function and that's going
to
turn hello
alright and then we can put other
functions in this file as well so let's
save that we'll go back to app test and
we're going to want to change this a
little bit so there's a couple things we
could do one is we could say Const say
hello and set that equal to require and
we want to do dot dot slash app and then
we want to say hello function so we can
do dot say hello all right and then down
here what we can do is just change this
right here to say hello all right so
let's see if that works
we'll say n can run test and it passed
okay it's usually a good idea to put
this in a result variable so right here
we'll say let's result equals say hello
and then let's put in here result okay
so that should still work good now let's
create another test and we want to test
the return type okay so we want to make
sure that the type that's returned is
hello I'm sorry is a string so let's go
under this it and create another one
okay so we're going to say it and then
we'll describe it so we'll say say hello
actually let's change this to so say
hello should return type string okay
then again we're going to put in a
function and let's go ahead and put the
value in a result so let result equals
say hello and then we want to do assert
instead of equal we're going to do type
of okay so type of and then let's put in
the result and then what it should be so
it should be a string
all right so let's go ahead and save
that and then we'll run it and now we
have two passing tests and you can see
it gives us the description here now if
I were to go to a BIS and let's say we
return a one which is a number and it's
going to it's going to fail on both
accounts okay because it's not it's not
equal to hello and it's also not a
string it tells us that it expected one
to be a string all right so let's put
that back and then what I want to do is
create another another function so let's
create one called
add numbers actually I want to do that I
want to say function alright so this is
going to take in two values and then all
I want to do is return value one plus
value - okay so we'll save that and now
if we want to bring in that function we
can do what we did up here so add
numbers and then let's say that we want
we need that they return value to be
above five okay so we'll put whoops that
should be it and then we'll say add
numbers should be above five all right
and then here we're just going to X
let's get the result first so the result
of add numbers and then this takes in
two values so let's put a 5 and a 5 all
right and then we're going to do assert
dot is above and we want to put in the
result and then we want to put in
the what it should be above so that's
going to be five all right so let's go
ahead and save that
make sure app dot J s is saved as well
and let's run it and now we get three
passing ad numbers should be above five
all right now if we were to go over here
and say one and one then it's going to
give us a fail okay expected to be above
five now let's also make sure I'm going
to put this back and then let's make
sure that this is a number as well so
what I'll do is just copy that and let's
say add numbers should return type
number all right and then the result
okay we're just going to do five and
five and then that should be a number
all right so let's go ahead and run that
and now we have four passing tests now
if you have a lot of different functions
and in the app file you may not want to
do this and bring them all in separately
so what you could do is comment these
out and you can go like that just like
we did before bring in just the whole
app and then just go down here and say
let result equals app dot say hello and
app dot add numbers all right so that
should still work good now we're kind of
repeating ourselves here with all these
results so you may want to put them in a
global scope up here so let's say
results and say whoops all right with us
we'll say say hello result and we want
that to equal app dot say hello and then
and add numbers result set that to app
dots add numbers and put in five and
five okay so now we can just we can get
rid of this I'll just comment these out
though all right and then in here we'll
put the say hello result same thing here
and then this will be add number result
alright and let's run it and it works
now you can also separate these up into
their own groups by using a nested
describe so these two are for the say
hello so let's go ahead and say describe
and we'll just put in the name of the
function let's just say hello you can
put the parentheses if you want and then
a function okay then we just want to
grab both of these and cut put those in
there and then we'll do the same for add
numbers so this will be add numbers okay
and then we'll just grab these two it
statements put those in there and then
that makes it a little neater so if we
go and we run this now it'll actually
separate the two say hello and then add
numbers alright you can keep going with
your the rest of your functions
alright so that's going to do it for
this video guys I just wanted this to be
an introduction go ahead and experiment
with it look at mocha I think it's what
is it mocha JFS org and there's some
good documentation also chai has some
all the assertion methods and so on so
you may want to continue and try to
create some tests of your own alright so
thanks for watching guys
please subscribe if you're not and give
it a like if you liked it or dislike if
you didn't like it just be sure you
leave some feedback alright thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>