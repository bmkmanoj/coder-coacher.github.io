<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build An Angular 2 Spotify App - Part 3 | Coder Coacher - Coaching Coders</title><meta content="Build An Angular 2 Spotify App - Part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build An Angular 2 Spotify App - Part 3</b></h2><h5 class="post__date">2016-08-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4EGwL4tXa7M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right in the last video we set up
our navbar along with the router and the
search and about component which we can
switch through using the navigation so
now we're going to do is work on the
search component which is basically the
home page so let's go to search
component HTML and we're going to add
some HTML so we're gonna put an h1 here
and we're just gonna say need music and
then below that I'm just gonna paste in
a paragraph here just some kind of intro
text alright and then under that is
gonna be our search form alright so in
here we're going to have a div let's
give it a class of form group and in
here we're gonna have an input give it a
type of text and let's see we're going
to give it a name attribute of search
STR so search string and we're going to
use ng model which needs brackets and
parentheses it's a two-way data-binding
attribute and that's also going to be
search string alright let's give it a
class of form control which is a
bootstrap class and the placeholder
that's just as search music alright now
we're also gonna need an event so I'm
gonna put that right here that needs
parentheses and the event action is
going to be key up ok so when a key up
action is placed it's going to call a
function called search music
alright let's save that and there we go
so that looks pretty good and then in
the search component ts file we're gonna
add that search music function and just
to test things out let's say console dot
log and we'll just say test so now if we
go back and we start to type you can see
down here we get test ok so we know that
that that event is firing right if we
want to get what we put in there what do
we call it search string so we need to
add that as a property here say search
STR that's gonna be a string and then we
can just say console log this dot look
search string ok and then as I start to
type you can see that it pops up down
here so we know that that's binding all
right now what we want to do here is
every time we every time we enter
something in here we want it to
basically make an API call to Spotify so
what we need to do is create a service
so in our app folder we're gonna create
an another folder called services and
let's create a file and we're gonna call
this Spotify dot service dot TS alright
we're going to bring in the injectable
because we want to be able to use
dependency injection with this service
that's going to be from angular core ok
we're also going to be using the HTTP
module and actually that should be
capital HTTP and headers from at angular
slash HTTP okay we're also going to be
using and observable so we need the map
function so that's gonna be rxjs slash
add slash operator slash map okay we'll
put our injectable decorator and then
create the class all right so this is
gonna have a couple properties it's
gonna have a search URL actually know
what we're just gonna do the search URL
for now so let's make this private
search URL and that's a string alright
now we need a constructor and we're
using the HTTP module so we have to
inject that into the constructor so
we'll say private underscore HTTP HTTP
all right now let's create a function
called search music and that's gonna
take a string which will be the type of
string and it's also going to take type
which is going to have the default of
artists all right and then down here
we're going to take that search URL
this dot search URL equals HTTP API dot
spotify dot-com slash search and we can
look at the documentation to say Spotify
API and so should have endpoint
reference so we want the search so that
should be down here right here search
and it's gonna be type artist by default
all right so Spotify dot-com slash
search and then we're going to need that
query and the query is gonna equal and
then we're going to concatenate the
string that's passed into the function
and we want to give it an offset
parameter so here we're gonna say and
offset which is going to equal zero
because we want to start at the
beginning and let's do an limit equals
twenty and then we're going to do and
type equals now this is going to be that
that type variable so we're going to
concatenate type which by default will
be artist and then we're going to
specify the market so we're gonna say
hand market equals us or of course
whatever you'd like
all right and then let's see after that
we're going to return this dot this dot
underscore HTTP GET and here we're going
to pass in that search URL
and then we're going to return an
observable so we want to say dot map and
then in here we can say res and then res
dot Jason okay so that will return the
Jason data back to us so let's save it
and we want to grab that in our
component in our search component so
let's go in that file and in order to
use the service we have to import it so
let's say import Spotify service and
that's gonna be from now we're in the
search folder so we're going to go out
one and then out another and then into
services and then Spotify dot service
then we need to create a constructor and
we need to inject the service so we're
gonna say private underscore Spotify
service and we're gonna set that to
Spotify service okay then we can get rid
of this console log and we need to call
the search music function from the
service so we can say this start
underscore Spotify service dot search
music remember that takes in a string so
the search string which we can get with
this dot search STR and then we're going
to subscribe to it because it's an
observable and in here we're gonna say
res and down here let's just do console
dot log and we can pass in res dot
artists dot items okay that's what it's
going to come back as so let's save it
and then if we go over here
let's see oh we got to add it as a
provider so right here let's say
providers and we just want to pass in
Spotify service all right and then the
other thing we need to do is we need to
import the HTTP providers into the main
app component so let's go to app
component TS where is it and let's say
import HTTP underscore proxy and then
we're just going to go down here and
we're gonna add providers and HTTP
providers save that all right so that's
loading now it's giving us the message
saying we're using the old forms module
so let's just go into main dot TS and we
just want to do another import here okay
so we're gonna say disabled disabled
deprecated forms and provide forms from
that's angular slash forms alright and
then we just need to include it down
here in this array so we're going to go
like that and we want to include here
the disabled deprecated forms which is a
function and then the provide forms
function save that and that should get
rid of that message all right good
so now if I start to type let's say
I don't know Aerosmith okay so as soon
as it matches what okay so it says
responses 401 for let's see query equals
a unauthorized for URL Spotify dot-com
search query
all right so let's take a look at the
service so I think it's something in
this URL so HTTP API Spotify comm slash
search query oh we forgot the version
right here
we should have v1 slash search alright
let's try that yeah there we go so now
you'll see as I type it's searching and
springing back this object and it's
basically the results you can see we
have right here where as a named arrow
Smith has a link to the album's images
has image URLs type is artist has the
popularity so you can see that it's
coming back with a response which is
what we want alright so now that that's
working in the next video what I want to
do is bring this response into our page
and load them here obviously we want to
show them we don't want to just
console.log them alright so we're going
to get into that next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>