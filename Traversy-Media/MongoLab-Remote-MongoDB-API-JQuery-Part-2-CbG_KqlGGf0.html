<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoLab - Remote MongoDB API &amp; JQuery - Part 2 | Coder Coacher - Coaching Coders</title><meta content="MongoLab - Remote MongoDB API &amp; JQuery - Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoLab - Remote MongoDB API &amp; JQuery - Part 2</b></h2><h5 class="post__date">2016-02-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CbG_KqlGGf0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to part 2 of building a
simple app using jQuery and Mongo lab so
in the last video we went ahead and
created our MongoDB database with Mongo
lab and we added a form where we could
add book titles and they get saved in
the database and then we also have the
ability to loop through them and display
the books down here so what I want to do
in this video is I want to show you how
we can actually update these alright but
before we do that we need to actually
have some kind of button or link that we
can click to to specify which one we
want to update so if we go to get books
that's where we're generating the
JavaScript for each book so what we'll
do is let's put an edit button or edit
link let's go right here actually let's
go like that and we'll say output ok and
I don't really care how it looks it's
not about what it looks like so we're
just gonna have just a link alright so
this will say edit ok
so when we click this edit button we
want to fire off a function alright that
we're going to create but we need some
way to pass along the data for whichever
book we're updating all right and
there's a few different ways we could do
it what I'm gonna do is use the html5
data attribute alright where we can
actually pass stuff through attributes
alright so for instance let's say data -
ok so each one of these is going to have
a data and then - and then whatever we
want to specify for this let's do title
so we'll say data title equals
and then we're going to want to
concatenate in here with single quotes
and then plus signs and we'll say data
dot title alright we're going to do the
same thing with the category and the
excerpt so I'm going to copy that paste
that twice okay let's go to this one
here and change it to category and then
this we're going to send along the
category and the excerpt and you know
what we're going to need one more for
the ID so let's put that there and we'll
change this to data ID and then this one
here we want to say data dot underscore
ID and then we want to say dot dollar
sign oh ID so that's going to give us
the object ID that we need all right and
we can now go ahead and add an event
handler so first let's give this link an
ID all right and we'll set it to edit
actually let's set it to set book all
right now now this is going to work a
little different because of the way that
we're adding the job we're adding the
HTML through the JavaScript so our
handler is gonna be a little different
than what we did here we're gonna start
with the body element and then we're
gonna call on click and then add the the
set book ID all right let me just show
you so let's go to where this ends all
right and what we're gonna do is we're
gonna say body
dot on click and then we want to pass in
that set book ID okay and then after
that we can run a function okay let's
test it out okay so we reload and click
you can see we're getting set book now
remember the data attributes that we
pass we should be able to eat to access
those so I'm going to test that out so
let's say this dot data and we'll pass
in oops ID now the way that we're
getting this is you can see here we
passed in data - ID well to get it we're
gonna use the data function and then
pass in whatever is after data so just
this ID alright so hopefully that will
work for us so let's click Edit and now
you can see when I click it it's gonna
give us the ID alright so we can get all
the fields like that so what we want to
do is when we get those fields we want
to put them inside of the form alright
so for instance let's see I'm gonna copy
that let's take we know the the title
input we know has an ID of title alright
so we'll say title dot Val and then
we're gonna pass in this dot data title
ok so now if I go and reload and I click
Edit you can see that my book 1 goes
right into the title if I click that my
book - alright so we want to do that for
all the fields so we'll copy that
okay then we'll change this to category
this one is excerpt okay so now if we
click one of these oops we get undefined
there why is that so we want to look at
where we made these data attributes
let's see X sir all I put expert okay
that's not what we want change that and
now that should work all right there we
go
so whatever one we click is going to
show up in the form that's what we want
now we need to differentiate the ad book
from edit book all right so since we're
using the same form we need a way to do
that and I think what I'm gonna do is
when we click Edit it's gonna do this
okay so what I want to do is set a
session session storage value to the
current ID all right so to do that we'll
go ahead and say session storage dot set
item and we want to set current book ID
all right and we'll set that to
this start data-id okay so we'll have
that set when we click Edit now when we
submit it it's gonna go it's going to do
this k this is the the ad book
submission so what we want to do is
after we submit we want to check for
that session variable so up here let's
say if session session storage dot get
item current book ID is not equal to
null then let's console.log we'll say
jewel to say is ID I don't know it
doesn't matter and then right here I'm
just gonna return alright just to stop
that from happening so let's go ahead
and let's reload this and just add
anything okay I clicked add nothing's
nothing's happening if I reload and
click Edit and then click add you can
see we're getting is ID all right now
this is gonna stay there for instance if
I reload and then we try it's still
going to be there so what we need to do
is when the document loads we want to
clear that out all right
so let's say session storage session
storage dot remove item
current book ID all right so let's go
ahead and save that and reload and now
if we click add it's gone but if we
click edit and submit it's there alright
so that's exactly what we want so this
is actually this is all fine we want
this no matter what so let's put that
above that okay and we'll get rid of
this return so the only thing that we
want to change here if there is an ID if
we're doing an update is the URL because
we need to include that ID so what we
can do is in this if statement let's add
an else alright so if it is not null
meaning that what we want to do an ad
then we want this to be the URL so I'm
going to just cut that out and we're
going to create a variable called URL so
I'm going to put that there and then
we're going to set it here okay and then
I'm gonna copy that whole line I'm gonna
put that in our house okay
and then the only difference is we want
to put our ID so we want to go let's see
did I put that in a variable
no I didn't okay let's just do it right
here okay we'll save our ID and I'm
gonna set it to session storage get item
current book ID all right and then we
just need to squeeze that into the URL
so after this slash books we want to say
slash and then we want to just
concatenate the ID all right and then
the rest of it is all the same so let's
save it let's give it a shot
all right so let's see we have my book 1
let's click Edit and then let's change
it to my book and then the number 1 all
right and then we'll click add book my
book 1 okay so it just it replaced it
let's see let's just test this out so
console oh I have these backwards I have
them backwards this this one needs to be
down here and then these these two need
to be up there
all right so let's go ahead let's just
delete that one I just added which is
this one all right and then let's try it
again so my book 1 will say 1 and let's
change the category to drama okay so
we're getting an error here let's see oh
ok so it's giving us an error because
we're we're doing a post on an update
and it's supposed to be put so that's no
problem we're just gonna have to create
another variable
so we'll say type and we'll set that to
put and then here we're gonna set it to
post ok
and then down here we'll just replace
this with type okay third time's the
charm
and there we go
book one okay change the number it
changed this to drama so we can now add
we can read update and we can add books
the last thing to do is delete all right
and actually you know what I'm gonna do
is change this from add book because it
doesn't make sense if we're actually
doing an edit so let's go down to
actually it's in our HTML let's just
change add book
let's just put submit nice and neutral
okay so delete isn't gonna be difficult
we need to create a delete link so let's
go down to where we're generating the
HTML and let's put and put a pipe
character and then we'll start our link
all right so this let's give it an ID
okay we'll give it an ID of delete book
okay let's see if that shows up all
right and let me see let's set an href
so that we get the pointer all right and
now we're also gonna want to pass the ID
just like we did here so I'm gonna grab
this I mean this okay we're gonna put
that here
all right and then we'll go up and
create an event handler for the delete
so that's gonna be the same same thing
we did here with the body copy that
you just pasted well that didn't copy
all right and now we're gonna just
change this to delete book all right and
let's just test it out all right we'll
make sure that the ID is being passed in
okay click delete and there we go we get
the ID all right now we're gonna want to
make another Ajax request so I'm gonna
just copy what we have here okay and
let's put this ID in a variable called
ID okay and then we'll paste that in and
for the URL it's gonna be the same one
that we had for edit so this one here is
the one that includes the ID so I'm just
going to copy this and it'll do that
okay so that'll stay the same and then
let's see we don't need this and then
type this time is going to be delete
okay so we have type and we can change
this let's do a sync so it's gonna be
asynchronous so we're gonna say true and
then let's set a timeout of 300,000 okay
then we have our success that's fine we
just want to redirect console.log error
that's fine okay and then let's just go
right here and return actually no let's
not do that this should work so let's
save it
okay we'll delete my book one and it's
gone okay my book two and if we look in
mongolab you can see that they're gone
alright so we now have full crud
functionality in this application so you
can see the Mongo lab data API is really
easy to work with I know we hit a couple
bumps and it was a little clunky in some
areas but I think it's all right I'm not
gonna redo the video or anything so
hopefully you guys learned a little
something from it another tool for your
developer toolbox and thanks for
watching if you guys like these videos
please subscribe please leave a like if
you don't like it go ahead and leave a
dislike and I will see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>