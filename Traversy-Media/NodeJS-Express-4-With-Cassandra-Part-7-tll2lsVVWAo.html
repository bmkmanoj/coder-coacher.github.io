<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>NodeJS &amp; Express 4 With Cassandra  - Part 7 | Coder Coacher - Coaching Coders</title><meta content="NodeJS &amp; Express 4 With Cassandra  - Part 7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>NodeJS &amp; Express 4 With Cassandra  - Part 7</b></h2><h5 class="post__date">2015-01-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tll2lsVVWAo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys in this video we're gonna make
it so that we can delete a subscriber up
to this point we can view them we can
view their page we can edit them we can
add them so basically everything but
delete so we're going to be doing that
now we don't have to create another
route or anything like that for delete
what we're going to do is we need to
make an HTTP delete request okay because
we're using a restful interface so we're
going to do that using jQuery and Ajax
okay so the first thing we need to do is
we need to create a JavaScript file and
I'm going to put this in public
JavaScript okay and I'm just going to
create a new text file and I'm going to
call it main dot j/s okay so open that
up and we also need to make sure that we
include it in the layout or in that the
you know the main head so that is in
views layout Jade
all right and what we're gonna do is we
need to include jQuery as well so let's
go ahead and add a script all right and
in here we need the SRC attribute and
we'll include jQuery using the CDN so
it's gonna be Ajax Google api's talk
comm / Ajax / libs / jQuery 1.1 1.2 / J
query dot min dot Jas that should do it
and then we're going to include our
script okay so this is gonna be inside
of JavaScript / main dot J s okay so
we'll save that and just a test to make
sure jQuery is running let's just do a
document
so I'm ready and to function and let's
just do an alert
okay okay we'll restart the server
and we got the alert okay so that should
be all set
now we have whoops if we go to our
subscriber page we have a delete link
and if we look at this you can see that
it has an attribute called data ID and
that is actually sent to the the
subscribers ID okay so we need to access
that through jQuery and then we need to
make a delete request all right when we
click this link okay so we'll go to main
j/s and we're going to create a click
handler right here
okay so let's see we gave the link I
think it has a class or an ID yeah it
has a class of delete subscriber so
we'll grab it like that delete delete
subscriber
what we need quotes around this
okay and we're gonna say dot on click
then we want to call a function called
oops
delete subscriber
what keeps going on here delete
subscriber all right and then down here
we'll create the function delete
subscriber okay this should actually be
a capital S
okay first thing when they click the
link we don't want them to actually
follow the link so we're gonna say event
dot prevent default so that will prevent
the default action when the link is
clicked okay we also want to have a
confirmation that they actually want to
delete the subscriber so confirmation is
going to be equal to confirm and we'll
just say are you sure okay and then
we're going to say if
if call information then we're going to
go ahead and make an AJAX call
okay so we'll say Ajax and in here we
want the type okay very important this
that's to be delete all right and then
we need the URL okay so the URL is gonna
be slash subscriber
slash subscriber and then we want slash
and then the user ID so we can get that
let's just concatenate whoops we need
that here
okay so get that from the delete user
link delete subscriber dot data ID okay
remember that data ID right here data ID
this attribute it has the actual ID in
it so that's how we can get it from
there and put it in the URL here all
right actually we don't want that
let's see right here we're gonna say dot
done
alright and here we're gonna write we're
just gonna put a function okay and
that'll take a response and what we're
going to do is just redirect to the
subscribers page so we'll do a window
dot replace I'm sorry
location dot replace and this will be
actually okay it'll just go to the index
page all right and then down here if
they don't confirm that they want to
delete we're just gonna simply return
false okay so that should do it
we'll save that so this right here will
it'll make the delete request but we
haven't added the code to actually take
it and process it so we need to do that
so in our routes subscriber dot j s
that's what we're going to handle this
so we need to go below this code go
right here and let me create our delete
queries so this will be delete
subscriber and we'll set that to delete
from
can't spell excuse me
delete from people subscribers where
we're ID is equal to question mark and
then we need to write a delete yeah a
delete function so router dot delete I
believe if you're using Express three
it's just del it's a router it'll be a
resource del I'm not sure buddy Express
for delete is fine to use alright so
let's see what are we doing here we need
to have the ID alright and then actually
this needs to be in quotes
then we'll have our function okay and
the function will be have a request and
response
and I'll do the execution so client dot
execute okay see it's very repetitive
we're doing the same thing with our
requir II so we're gonna execute delete
subscriber okay and then our parameters
we want the ID which will be coming from
the URL so req dot Rams dot ID and then
a function which will have an error and
result okay and we're gonna say if there
is an error okay if there's an error
then status will be 404 and we want to
send the
message okay else okay if it does delete
then we're actually not going to handle
it here we went we handled it in our
main je s we're gonna redirect okay so
basically all I'm gonna do here is I'm
gonna console.log actually no I'm not
we'll just respond with the result so
we'll say res dot Jason and then that's
in here result okay so let's go ahead
and actually let's restart the server
okay and reload click on it's the user -
at live.com which is Mike Smith okay
we'll go ahead and delete it's gonna ask
us for confirmation click OK and now it
redirects us and you can see that he's
now gone alright so we've done basic
crud create read update and delete with
our node application so lastly I know
this looks absolutely as long as design
looks absolutely horrible I mean there's
not too much we can do because this
really does not much content at all but
we can't add a little basic CSS so let's
go to if we open up our layout layout
Jade
we can at least add like a container and
a header so let's see above this block
content this is where our main content
comes out so above that let's create a
container so this dot container is
basically going to create a div with the
class of container and then below that
we'll put a header ok the html5 header
tag and then an h1 and this is called my
subscribers and then the block content
let's get out of the header and you'll
give this a class of main and then just
indent this block content okay we'll
save that and then we'll open up the CSS
file which is in public style sheets
style dot CSS
and we'll add a few things here one the
container will set that to a width so
let's say say 800 pixels and margin I
want it in the center so margin Auto and
overflow should be Auto and then we'll
give it a border of light gray solid one
pixel okay and then the header let's
give that a background
we'll do a background of we'll just do
light gray I guess
okay padding 20 pixels and then the main
area I just want to add some padding so
main padding 20 pixels and then let's
make those forms look a little better
alright so inputs will give them all a
margin bottom of 10 pixels and then for
the text field so input type equals text
and also password fields and actually
don't have any password fields okay then
we'll do a height of 23 pixels will do a
width of 220 pixels and we'll add a
border of a light gray color solid one
pixel and a border radius 5 pixels
and also a little bit of padding and
I'll save that go ahead and reload ah
let's see what this is
do I have the container correct alright
so the container isn't is only going
around the header so something's wrong
with that something's wrong with our
indentation so we have the body
container header all right so this
should be in one that should be in one
there we go
all right so I'm not the prettiest thing
in the world but a little better yeah
click on a user we have the details we
can edit the form looks a lot better now
alright so another thing maybe I would
add is some back buttons you know if
you're seeing the details it's it would
be convenient to have a link to say go
back so let's go ahead and do that real
quick so let's see we want inside of the
views we want our subscriber
and let's see where I want to put it
let's see I put it right above right
below the header here the heading so hey
and you know if you hate jadiel you'll
get used to it if you just started using
it and you feel like you want to throw
your computer off the window it does get
easier so let's say this wants to go we
want to go to just the homepage I think
yeah I'll say go back I think that'll
work
yeah all right
so ad subscriber we should put a link to
guess go back as well so ad subscriber
dot Jade
go back
huh didn't give me a line break
actually let's put this at the bottom
so should be able to do a simple line
break glue two of them there we go all
right
go back alright so that concludes this
series I know this isn't a fantastic
application but hopefully it gives you a
start just knowing how to do basic
create read update and delete is
essential to any application really so
hopefully you took something from this
series and hopefully you'll tune in for
the next one thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>