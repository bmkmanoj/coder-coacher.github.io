<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 2 and Firebase App [Part 7] - Edit &amp; Delete Listings | Coder Coacher - Coaching Coders</title><meta content="Angular 2 and Firebase App [Part 7] - Edit &amp; Delete Listings - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 2 and Firebase App [Part 7] - Edit &amp; Delete Listings</b></h2><h5 class="post__date">2017-03-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/36r9fLw_-Aw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to the next part of the
angular 2 firebase application series I
apologize that it's been a while since
my last video I actually had some
technical issues I lost the virtual
machine that I had this project on and
just took me a while to get back up and
running and I've been really busy so I
apologize for that but in the last video
we left off with we're able to
authenticate with firebase we're able to
view our listings we're able to add a
listing and we can see the details page
so all we really need to do now is
create the edit functionality and the
delete functionality and hopefully we
can do that in this project in this
video all right now there's a couple
small things that I noticed one is that
when we upload a listing the location
gets set to the title and I'm sure that
a lot of you guys have noticed that so
to fix that all you have to do is go to
add listing and go to see this yeah add
listing dot component TX and you can see
that city is set to this dot title so
you just want to change that to the
start city and that'll fix that issue
another thing is with the service we
look at firebase service and we have
this firebase list observable when we're
saying any array that's fine but this
object shouldn't be an array so we
actually have to get rid of these
brackets right there okay and then we'll
save that all right now I did have some
issues with editing and image uploading
to firebase and I haven't figured it out
yet so what we're going to do is we're
just going to hold off on actually being
able to update the image okay because
I'm going to have to look into that and
you guys that know what you're doing
feel free to figure it out and you know
let people know in the comments section
I want this to be kind of a community
effort where you guys can help each
other because I have a lot going on and
I'm not able to just answer every
everybody's questions and issues so you
know work together and try to
you know if there's something wrong and
not just for this for any of my videos
alright and a lot of you guys do do that
and I appreciate that and I like to see
you know people helping other people out
alright so let's go ahead and get
started here now first thing we'll do is
we're going to edit this link which is
in the listing component dot HTML and we
have the edit right here so what we'll
do is get rid of the href and let's
replace it with router link okay we're
going to set that to set a bracket and
that's going to go to slash edit listing
and to run another slash there and then
we're just going to concatenate onto
this listing dot money sign key that
will give us the unique ID for that
firebase listing alright so we'll save
that and then we have to create that
route so we're going to go to app dot
module dot TX and we're already bringing
in the edit listing component so we just
need to add a rope right here so I'm
just going to copy this show copy this
one because we do need the ID as well
but this is going to be edit - listing
and then this will be edit listing
component look alright and that's that
let's save it and now we should actually
be able to navigate to the page so I
click Edit and you can see edit listing
works so what we want to do now is such
this ID from the URL and then get that
specific listing so that we can pre-fill
the the form the edit form so let's open
up edit listing component TS and also
edit listing component HTML and I guess
you can put those the the form in first
which is going to be pretty identical to
add listing component so let's copy that
I'll place that in and change this to
edit listing and the function is going
to be on edit submit and what I'm going
to do is just comment out the image
because like I said I haven't exactly
figured that out yet so go like that I
think that's it ng-model is going to
basically bind it to the property so
just leave that and let's go ahead and
save alright so now we're going to go to
edit listing component TS and we're
going to bring in a couple things you
want to bring in the firebase service
book and that's going to be from dot dot
slash dot dot slash services slash
firebase service and that should
actually be a capital F alright and then
we want to bring in see what else we
bring in bringing in the router so it's
a router we also launch activated rope
and then params
because we need to get that ID parameter
and those are going to be from angular
router ok and we need to add these as a
dependency in the constructor excusing
so let's do private firebase and
actually flavor a service set that to
firebase service ok we also need the
router set that to router and we also
need wrote we could set that to
activated row
activated okay so now that we added
those let's see we want to get the ID
from the URL I'm going to do that in the
ng on an it so let's say this dot ID and
set that to this dot route dot snapshot
dot params and then we're going to get
the ID program alright now we're getting
an error because we need to add ideas of
property alright we're going to have
quite a few properties here I'm just
going to grab those and paste those in
okay and let's see now we're going to
want to call a servant the get listing
details function from a service which
we've already created for the details
page so this dot firebase service dot
gets listing details okay and then
that's going to get passed in the ID and
then that's an observable so we want to
subscribe to it and we should get the
listing right and then we just want to
for now it's just console.log the
listing okay so if we go over here and
see down here we have an object and
there it is pool mansion so what we want
to do now is we want to set these values
coming in from not observable when I set
those to these properties which are
bound to the ng model in the form so
that those are pre filled all right so
let's say this dot title and set that to
listing dot title alright I'm just going
to grab the rest of them
she picks those in and notice I'm not
doing the image I guess we could not
we'll just leave it out all right so
that should set the forum values let's
save that okay so now you can see they
are filled in now we want to add the on
edit submit function because that's
what's going to get called when the form
is submitted and here we're going to
want to create an object from all the
properties so let's say let listing
equal to an object with the title on our
city bedrooms price and type and then
what we want to do is call an update
function from the service and include
that listing okay so this dot supplier
base service dot update or update
listing and then we'll get will passing
this dot ID and pass in that listing
object we just created alright and then
we're just going to navigate so this dot
router dot navigate and we're going to
go to listings slash listings okay so
now we need to create this update
listing function in the service so let's
go there all right now one other thing
that I want to do is this listing right
here where we're setting it looks how
let's get listings function we're
setting this dot listings to this right
here which is returning the auto listing
I want to put this in the constructor so
that we won't have to repeat this for
the update so let's cut that and just
put that right in the constructor okay
so now let's go down here under the add
listing and we'll create update list
thing okay and this is going to take an
ID and the listing object and then from
here we can just say return this dot
listings dot update and then just pass
in that ID and the listing all right
that should do it it's safe
okay so that should touch the data all
right and then let's see if we can
change this so the city let's change
that to Miami let's submit okay and
let's go back to pool mansion and now
the city is Miami okay so we can now
edit this stuff let's change the
bedrooms to twelve I'll change the price
to thirteen million yeah thirteen I'll
submit and see twelve thirteen million
so we can now edit our AR properties
okay so now what we want to do is we
want to be able to delete them okay so
we have a delete button we want to go to
the listing dot component HTML and let's
get rid of this href here and let's put
an event right here so click and then
that's going to call C let's just say on
the week click OK I save that and then
let's go to listing dot component TS and
create that function
so we're going to want to call a service
function called delete listing so this
doc firebase service dot delete listing
all right and we're going to pass along
this dot ID and then after that we'll
just navigate and we're going to
navigate to listings thanks so save that
now let's go back to the service and
create delete listing okay that gets
passed an ID and then from here let's
see we're just going to return this dot
listings dot remove and pass along the
ID that should do it so let's go ahead
and go to say the pool mansion and click
delete and now it's gone alright so we
can now update we can add edit and
delete wait what is this down here
everybody storage invalid argument click
an uncaught exception I'm not really
sure why that we're getting that if I
reload we get it no huh I'm not sure
what that was about
from what I've worked with firebase
storage is kind of difficult but you
know you guys can shed any light on it
feel free to you know express that in
the comments now as far as the series
I'm not exactly sure when when I'll get
the next video out I just I wanted to
get this one out because I wanted it to
at least have create read update and
delete functionality okay so what I'm
thinking about doing next is making it
so that only the particulars err that
added the listing can edit it and delete
it and so on and we can set permissions
in firebase for that all right because
this isn't a production application it's
not at that level it's just for learning
purposes try and get you familiar with
angular 2 and working with firebase so
hopefully you guys enjoyed it and like I
said I don't know when the next video
will be but I do have it on my list
alright so thanks for watching guys and
I will see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>