<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a Sails.js App [Part 4] - Edit &amp; Delete Articles | Coder Coacher - Coaching Coders</title><meta content="Build a Sails.js App [Part 4] - Edit &amp; Delete Articles - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Build a Sails.js App [Part 4] - Edit &amp; Delete Articles</b></h2><h5 class="post__date">2017-08-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XkMJzXnaSeQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up guys in this video we're
going to work on the delete
functionality for our articles depending
on how long that takes we may do the
edit or we may do that in a separate
video but what we're going to do is
we're going to have a delete button
right here on for these articles alright
so let's go ahead and do that now since
we're doing a delete it's very very
unsafe to have just a link to go to the
delete functionality so we actually need
to have a form because we need to send a
post request not a get request so let's
go ahead and put a form in here and
we're going to give it an action of
slash articles slash slash wait a minute
yeah / delete slash and then we need the
ID and we can get that with this right
here so we're going to put that right in
that URL alright and then we're going to
add a method of post okay and then
inside that form all we want is a submit
button so we're going to say input I'm
going to give it a class of BTN BTN -
danger - make it red and then this is
going to be a type submit and then for
the value we'll just say delete all
right so let's go ahead and just save
that and then reload I'm also going to
give it a class I'm going to give the
form a class of D inline so display
inline which is a bootstrap for class
because we're going to have an edit
button next to it all right so when this
gets clicked it's going to look in the
controller for a delete so let's go
ahead and add that okay so it's going to
be request response and then let's see
what we're going to do here is we're
going to call the model we're going to
say articles dot destroy
and we're going to pass in here which
which article do we want to destroy so I
D and then remember how we have the ID
in the URL that's being passed we can
access that with request params dot ID
so that's how we know which one to
delete and then we're going to run our
execute okay that will take in a
function that function will take a
possible error will check for the error
just like we did up here
and we'll also redirect so I'm just
going to copy that exact thing and paste
that in and then I just want to return
false yeah after that happens let's just
return false so nothing else happens all
right so let's save and we'll go back
here and let's reload and let's get rid
of this thing here there we go so now we
can delete articles all right so we did
that quick enough so I think we can do
the edit functionality as well so what
I'll do is go back to list ejs we're
going to go right above the the delete
form that we just created and we're
going to create a link to to the edit
page one second yep so we're going to
create an a tag right here we'll say
class BTN and BTN primary and it's going
to go to slash articles slash edit slash
and then the ID just like we did with
the delete so we'll grab that put that
in there and that should do it for the
text of the button will just say edit
reload and now we have our edit button
okay now it's not going to it's not
going to go to it go anywhere because we
haven't handled that yet so let's go to
our controller and let's add in edit
and this will take in request/response
and all we're going to do here is do a
Reggie you and we want to load in here
the Edit view okay which we haven't
actually created yet but actually you
know what we need to pass in the the
current article so we can fill the form
you don't want a blank form so let's
actually actually I'm going to get rid
of it for now I'll just cut it and then
we need to do articles dot and we're
going to do find one because we only
want one article and we want to get it
by its ID so we'll say ID remember
that's in the parameters so we can say
request dot params ID and let's see we
want to just run our execute pass in a
function okay so that's going to give us
an error possible error and the results
which I'm just going to call article
sorry about that
beeping guys I don't know that was
texting you so much my mother she likes
to she likes to send five words per text
in a hundred texts so sorry about that I
don't get it
anyways I love you mom I know you watch
these videos sometimes so we're going to
take the article here and actually let's
first check for the error so we'll just
grab this and then what we'll do is load
the view so Reggie you we're going to
load the Edit view and then we want to
pass along an object with the article
okay so we're going to go like that that
way our form that we have in the edit
will be we can add a value of the
current data that's already in there so
let's save that and let's go to our
views folder and create a new file
called edit ejs
now the form is going to be identical to
the ad form so what I'm going to do is
just copy that whole template that whole
view and paste it and edit all right and
then we'll just change this right here
and the breadcrumb to edit we'll also
change the title to edit article okay so
for the form this is going to now go to
articles slash update but we also want
to pass along the ID so see we're going
to get the ID by using our brackets here
so our ejs syntax article dot ID close
that and then for the values of the form
so for title we'll say value equals and
let's put in our ejs so that's that and
then we also want the body inside the
text area change this to article body
and let's save and now let's click on
edit and now you can see we get article
1 if we go back and go to edit article 2
that'll show up all right so now we have
that done now we just need to take care
of the update because when we submit
it's going to go to articles slash
update so let's go back to the
controller and we'll add in an update
function I'm not going too fast for you
guys so request response and you can
always you know re-watch this stuff if
you didn't catch you know if you didn't
catch everything the first time let's
see so for update we're going to grab
the title and body of the form just like
we did with create so I'm actually going
to copy that actually know what I'll
just copy the whole create functionality
just to save a little time and paste
that in but instead of calling doc
create we're going to call dot update
and then that just takes in another
parameter right here with the new values
okay so axe
you know what the values are going to be
this what we need is a parameter at
first to know which one to update so
we're going to put in a set of curly
braces and then a comma and we're going
to say we want to update the ID of
request params dot ID okay now this
request params ID is coming from this
right here okay from the URL from this
this ID parameter all right and let's
see we're going to just run that and
we'll check for the error then we'll
redirect and we'll just return false and
that should do it let's save it let's go
to articles and we'll change
Brad's article - we'll just say my
article and we'll say this is cool and
submit and now we get my article if I
click Edit you'll see this is cool so
the title and the body were both updated
alright so that is our crud application
guys I hope you enjoyed this like I said
depending on you know how much you guys
like this I might move along and look
into authentication with Passport
or maybe something like auth0 some some
other solution I don't know and then
also look into deployment probably with
digitalocean
alright so thanks for watching guys
please subscribe if you're not please
leave a like if you liked this series
and I will see you next time so if you
guys really liked my videos and you
learn a lot from them and maybe you have
a couple extra dollars to spare check
out my patreon page I'm working on
creating special content for patrons you
also get special deals on future courses
and there's even an email support here
for all YouTube videos and projects to
learn more visit patreon.com slash
traversée media</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>