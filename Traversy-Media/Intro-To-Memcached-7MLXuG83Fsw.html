<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Intro To Memcached | Coder Coacher - Coaching Coders</title><meta content="Intro To Memcached - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Intro To Memcached</b></h2><h5 class="post__date">2016-10-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7MLXuG83Fsw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to another web course
in this tutorial we're going to be
taking a look at memcached now this
isn't the typical type of video or
technology that I usually work with on
my channel but I wanted to take a break
from the usual JavaScript and web
programming and I'm going to be
expanding the technologies that I work
with on my channel so hopefully you guys
enjoy and this actually comes from part
of my full stack web development course
with edge wanax which has over 20
different web technologies and I'll be
putting a link in the description as
soon as that's released so memcached
is defined as a high-performance object
caching system and it's generic in
nature but it's intended to speed up
dynamic web applications so you can use
it with many many different languages
PHP Perl Python Ruby just pretty much
any popular programming language and
basically it stores key value pairs in
memory it's not classified as a database
it doesn't persist the data to disk at
least by default and it just stores key
value pairs one of the most typical uses
for memcache is let's say we have a PHP
application and we have a MySQL database
we may want to fetch data from the
database and store it in store the
results in memcache stored in memory so
that we have access to it faster okay it
speeds up our web application we may
want to just cache web pages which I'll
show you how to do alright so what we'll
do in this video we're going to install
it we're going to connect to memcache
using telnet and we can set our key
value pairs from there I'll also show
you some other commands we're going to
use something called Lib memcached tools
which is a set of command line tools
that we can use to do different things
manage our key value pairs and so on and
then I'm going to show you how to use it
with Python okay we'll use it in the
Python command line and then I'll show
you how to use it with PHP
create a quick PHP script that will
cache a web page I'm not going to get
into databases because I don't want this
to take up too much time I may make a
separate video on that but I'm not sure
all right so we're going to dive in and
install memcache now I'm going to use my
apt-get package manager so we're going
to run sudo
because we want to run it as
administrator and then apt-get install
memcached okay now that went really
quick because I already have it
installed yours may take a little longer
all right so we have it installed now I
just want to run a command here I want
to run this PS PF grep - I mmm see and
this just gives us some information and
you can see right here that 64 megabytes
of memory is being allocated to
memcached all right which should be
plenty it's also running on our
localhost
so this is our loopback address one two
seven zero zero one and it's also
running on port 1 1 2 1 1 ok so what we
can do is connect through telnet will
say telnet localhost port 1 1 2 1 1 and
now we're connected all right so we can
start running commands from here so the
first command I want to run is stats now
this gives us a whole bunch of info on
our memcached all right now I don't know
what all this stuff means I'm not really
an expert but you can see that it has
the uptime it has all these zeros here
have to do with our key value pairs so
this would be how many times we ran get
on on a key value pair how many times we
ran set how many hits we got so this get
hits
how many misses so if we try to get a
key value pair that's not there
that'll get added to this get misses
same thing with the delete misses and
delete hits this is how many times we
get increment hits and misses decrement
what else tells us the bytes written the
White's read current items okay so this
is going to be the current number of key
value pairs that we have stored the
total items and that's pretty much it
I'm not sure what a lot of this other
stuff means so we can just check you
know check the status of our memcache
server and so on so let's go ahead and
set a key value pair so we're going to
run set and let's just say foo now this
is going to take in a couple parameters
we're going to have to set our flags now
I'm not going to set any flags so we're
going to put a zero and then the next
one is going to be the expiration time
when do we want this value to expire so
I'm going to say 3,600 which is an hour
goes by seconds all right and then we
also need to specify the number of bytes
for this particular key value pair so
we're going to say three now it's now we
need to enter the value so I'm going to
say bar all right so we now have a key
value pair the key is foo the value is
bar now we can get that by saying get
foo and it gives us bar now if we run
stats again and we go up here you can
see that we have one get now and we have
one set okay we have one get hits we
still have zero misses because we
haven't ran a get on something that's
not there
we have no deletes and let's see if we
go to current items see we have one
current item one total item now if we
want to delete this we can just simply
say delete foo all right deleted then
we'll run actually let's do get okay so
we get nothing back now we'll run stats
and if we look at current items you have
zero but total items still has one so
even if you delete the key value pair
it's still going to be in this total
items until you clearly until you reset
the server all right
let's go back up here and now you'll see
we have get mrs. one we have delete hits
one as well because we deleted foo all
right so let's look at some other
commands we also have ADD and the only
difference between add and set is that
if something is already there and you
run add it's not going to replace it set
we'll all right so let's create a key
called num and we'll say no flags we'll
set it for thirty six hundred and four
bytes we'll say - all right and then
we'll just put let's say fifty all right
so now we have fifty stored if we say
get numb
that gives us 50 and we also have we're
able to append and prepend so if we say
append to num zero Flags 3600 and then
the bytes will be two and let's say 25
so now if we do get numb we get 50 25 we
can also do prepend 0 3600 - oops we
need to put in num 3600 - and let's put
44 all right so now if we do get numb it
gives us that we also have a replace
command which will replace the whole
thing
so we'll say replace num 3600 - and
let's make it 40 okay so get numb gives
us 40 we can also increment it by saying
incur num and let's do it by 2 now it's
42 and decrement it as well - and now
it's back to 40 all right so those are
just very basic commands now if we have
a bunch of values and we want to clear
everything out we can simply do flush
underscore all that's going to get rid
of everything so if I say get numb
there's nothing there
okay we run stats you'll see we still
have current I total items five but the
current items is zero alright and if we
go up here we now have seven gets five
sets five hits two misses okay so it
gives us complete statistics on the data
that we have in memory now if we want to
reset everything let's go ahead and type
and quit to get out of telnet we can run
/e TC in it dot d / memcached and then
restart put in our password and that
will restart everything so if we go back
into telnet and we do stats you'll see
that total items is now cleared
everything is cleared out all right so
let's get out of telnet and we're going
to install something called Lib memcache
tools so let's do sudo Lib memcache - -
tools or maybe that's not it um live
memcache tools oh god I forgot the
apt-get install alright so what's up say
sudo apt-get install memcached - tools
ok say yes all right so this comes with
a bunch of commands a bunch of different
tools so the first one we're going to
look at is mem see stat all right now
all these start with MEMC now if we just
run that it's going to say no service
provided so we're going to provide - -
servers and then localhost alright and
notice that it gives us the same exact
thing that the stats command gave us in
telnet alright so we can check uptime
check all our gets and sets and all that
alright so just an alternative way to do
it
now if we want to dump everything that
that we have stored we can use MEMC dump
say servers localhost and you can see we
don't have anything all right so let's
open up another command line or another
terminal and let's connect to telnet
through here and let's go ahead and set
foo zero 3603 then we'll say bar all
right and then let's go over here and
run MMC dump again and you can see we
get food okay it gives us all of our
keys we set another one we'll do set
name and zero 3604 and we'll set Brad
okay so if we run the dump again we get
name and foo now if we want to get a
value we can use mem see cat - -
server's localhost and then the key that
we want to find so let's say name and
that gives us Brad okay if we do foo
that gives us bar if we want to remove
one of these we can do that with mem c
RM say servers localhost and let's
remove name all right so now if we do or
is it
MMC cat on name we get ever on name not
found so now I'm going to just clear
this out and then I'm going to make a
directory and I'll just call it test and
I'm going to CD into test and what I
want to do is generate I want to
generate a thousand file
and then what I want to do is add to our
memcached each file name as the key and
then the whatever's in the file has the
value so we can generate these by doing
a for loop we'll say for I in and we're
going to put a couple back ticks and
then seq we want 1,000 files alright
then we're going to say do do echo money
sign I and we're going to call these
files book and then whatever the number
okay whatever that iteration so we'll
put money sign I and then done all right
so now if we do LS you'll see that we
have all these files okay we have a
thousand files we can open it in the
file manager see we have this test and
we have the files and if we open one up
you'll see that we just have whatever
the number is in that file so we want
the name as the key and we want the the
content as the value so to do that
there's there's a command called mem see
what is it mem CCP
so let's sue let's do mem CCP and we'll
say - - server's localhost and let's say
book and then star all right so now if
we do a dump we'll do memc dump servers
localhost oh so that didn't work
hmm let's do MMC stat
all right so if we look in all we do to
our current items 1001 so why didn't
they dump oh there we go
I must have messed up the command ok so
now we have all of these key value pairs
and we should be able to get let's say
MMC kat localhost and we can say book
let's say 200 and that gives us 200 all
right if we do we can do mem Seacat book
and we could say 1 through 9 and that
gives us 1 through 9 all right so my
only point in doing this is just to just
show you that we can and it gives us
something to work with if you want to
mess around with the key value pairs all
right obviously we can access these from
telnet as well if we say get book 44 or
4 for 4 that gives us that back alright
so let's get out of this we're going to
quit the telnet interface and let some
CD dot dot out of test and clear this up
and now we're going to work with Python
so if you're using Linux Ubuntu you
should have Python installed let's say
Python - - version ok so I get version
2.7 point 12 installed now we have to
install the Python memcached package so
let's do sudo apt-get install Python -
memcached unable to locate package
hmm oh it's you know what there's no D
on the end it's just memcache there we
go alright so let's go ahead and run the
Python CLI by just saying Python alright
so you can see that the the prompt here
changed so we're in pipe Python
now before we can use memcache we need
to import it so we're going to say
import and it's memcache with no D so
now we should be able to use it if we
say MC I'm going to set a variable
called MC and set it to memcache dot
client all right now the client we're
going to put in here in some brackets
say 127.0.0.1 and it's going to be at
port 1 1 2 1 1 and then we're going to
set another parameter here we're going
to set debug equal to zero alright so
now we should have this client that we
can work with so now we can get in set
values so let's do MC dot set let's set
will say greet and we'll set that to
HelloWorld
okay so we get true back so that should
be set now to get it we'll say MC get
greet and we get hello world so let's
make sure that we can access this from
telnet or from other places
localhost 1 1 2 1 1
ok so we'll say get greet and there it
is hello world alright so you can see
that memcache can be used across your
system and different languages different
clients it all goes and receives from
the same place alright let's set another
value we'll say MC dot set and I want
this to be a number we'll set num to say
40 all right and then we should be able
to use MC anchor and we'll pass in here
num and that gives us 41 we can also do
Decker gives us back 40 all right if we
want to delete we can do MC dot delete
and pass in num okay now if we do MC dot
get numb that should be gone all right
now we can also set multiple key value
pairs if we do MC dot set underscore
multi so in here let's pass in an object
and we'll say name John Doe email and
age 35 whoops what did I do
name email is not defined
oh I forgot the quotes
okay that needs quotes and age also
needs quotes okay so we can we can get
individual values from this now if we
say MC get name that gives us John Doe
now we can also get multiple values with
MC get multi and what we want to do here
is pass in an array will say name email
and age and that gives us all three now
we can also set a variable to this get
multi so let's say we want to set person
equals that whoops
person equals and then they get multi
and then let's do person dot keys and
that gives us the keys so we can get the
values as well whoops not value values
and that gives us all the values and of
course we can get the individual values
if we say person name that gives us John
Doe all right we can also delete
multiple values so if we say MC dot
delete underscore multi and we pass in
an array
let's do email and age and then we'll
try to get MC get age and that's gone
but name should still be there because
we didn't delete that John Doe all right
and then if we want to get rid of
everything we can say MC dot flush
underscore all and that's a function
okay so now we shouldn't have anything
if we say get or MC get name that should
be gone all right so that's the Python
and
face very simple we only used it in the
command line here but of course you can
use it in a Python script inside of a
file alright so let's get out of this
and the last thing I want to do is show
you how to use it with PHP so we first
want to install an Apache server which
is really easy we're just going to say
sudo apt-get install and it's going to
be a patchy - ok we'll say yes so if we
go and we open up our browser and go to
HTTP localhost you should see an apache
start page
so now let's install PHP I'm going to
clear that out and say sudo apt-get
install and we want PHP 7.0 we also want
the Apache 2 mods so we want to say Lib
Apache 2 - mod - PHP 7.0 all right so
now those are installed let's let's
restart apache
with /e TC in it tot D slash Apache to
restart all right so we'll clear that
out and now we want to do is navigate to
our hosts folder so I'm going to go CD
slash var slash W W slash HTML alright
and then from here we're going to make a
directory and we'll call it MMC a
permission denied we need to use sudo
okay and then we want to give permission
to the current user for that directory
so let's do sudo chown then your user
name and then the folder name which is
mem see all right so now let's CD into
that folder and we're going to create a
file called index.php so now if we go
over here we go to localhost / MMC
that's showing the index file so let's
open that in the file browser here we'll
go to the computer VAR w w HTML and then
memc and there's our file alright so
we'll just open it with G edit and we're
going to add in our PHP okay now we need
to install the PHP memcache module so
we're going to say sudo apt-get install
PHP - memcache with no D just PHP
memcache alright so let's go back to our
script and we're going to create a
variable called MC and set it to new
memcache and then we should be able to
connect MC connect and let's pass in our
host which is 127.0.0.1 and it's that
port 1 1 2 1 1 alright so now we should
be able to add add key value pairs let's
try it let's say MC add
and let's add let's say username and
we'll just say dev user and then we'll
just to echo working all right so let's
save that and reload whoops what
happened all right I think we need to
just restart Apache alright so we're
just going to run that ok let's go back
here and there we go it says working so
hopefully it worked let's go to our
telnet terminal and we're going to say
get a username and there it is dev user
so we can now set values through our PHP
script and we should be able to get them
as well so let's comment that out and
let's echo MC get user name save it
reload and we get dev user so now that
we know that this is working let's
minimize this and what I want to do is I
want to cache a web page okay so we're
going to create in here folder called
Inc for include files and let's create a
new document and we're going to call
this my page dot PHP ok we'll open that
up
oops open that up with G edit and this
is just going to be an HTML page
we'll put in a head okay we'll put a
title just say my page and then a body
this isn't a very good editor and let's
put in h1 and we'll just say my page all
right so we have this HTML page or this
PHP page with HTML and we want to cache
it so let's let's get rid of this right
here and hopefully you guys can see that
I think maybe I should make this a
little bigger font
there we go all right so let's uh what
do I want to do here let's say my page
and we're going to set this to MC get
and the key is going to be my page PHP
all right now we want to test for that
we're going to say if this editor sucks
let's say if my page and it's going to
have an else okay so if my page then
we're just going to echo out the value
of my page all right but if it's not
there then we're going to echo out not
cashed and let's see we're going to say
file name equals Inc slash my page dot
PHP and we need a handle and we're going
to use the F open function and we'll
pass in the file name and we want this
to be read mode okay then we want the
contents so we set that to F read pass
in the handle and then we're going to
say file size and we're going to wrap
the file name alright so that should be
able to get the contents of the page all
right so if we say echo contents let's
go ahead and save that and reload all
right so we're getting the my page now
notice it says not cached so that means
that this is
running so this is not set so what we
want to do is we want to set this we
want to grab the contents of this page
and put it inside of this this of key
value pair all right so that we can
access this we can access it from the
cache and not from the filesystem okay
which makes it much quicker so instead
of just echoing out this contents what
we'll do is we're going to set it will
say MC set and we want to set the key
which is going to be my page dot PHP and
then the value is going to be that
content that's going to be the value and
then the flags will be zero and let's
set it for 30 seconds okay it'll be
cached for 30 seconds and then we just
want to echo it we can say echo and see
get and pass in my page dot PHP alright
so let's go ahead and save that and
reload not cached if I reload again now
we're not seeing the not cache so it's
now getting it from memcached alright
and it'll keep it'll keep it cached for
30 seconds after the 30 seconds is up
it'll it'll go away but if we reload
again it'll get stored again alright so
it'll keep caching it and this will
increase the I'm sorry decrease the load
time of the page because it's coming
from cache not from the wot file system
alright so let's see if we reload you'll
see it's not cache because it's been 30
seconds reload again and it gets cached
all right so that's just a very very
simple example on a very small scale I
mean we're not going to be able to see
the difference here but if we're working
with larger pages with more files this
can this can be helpful all right and it
just gives you an idea of how memcached
works with PHP alright so we're going to
go ahead and stop here and I hope you
guys could
follow along with this I know it wasn't
the the best video in the world but
hopefully you learned a little something
and thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>