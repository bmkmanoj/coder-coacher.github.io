<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CouchDB Basics | Coder Coacher - Coaching Coders</title><meta content="CouchDB Basics - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CouchDB Basics</b></h2><h5 class="post__date">2016-11-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nlqv9Np3iAU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to be covering
all the basics and fundamentals of
CouchDB so if you don't know what
couchdb is it's an open-source no SQL
database and to be more specific it's a
document database so it's on the same
level as MongoDB it stores data in JSON
format and it uses an internal
architecture that was built for the web
and built to handle massive amounts of
data it's also cross-platform so it's
available for Linux UNIX systems Windows
Mac and FreeBSD and in this video we'll
be using Windows so I just want to
explain it a little bit before we get
started so down here you can see that it
uses something called the Coache
replication protocol so if we click on
that up here it says that it's a
protocol for synchronizing JSON
documents between two peers over HTTP
all right and it does this using this
CouchDB REST API so it says the
components of the API URL path help
determine the part of coach DB that
needs to be accessed all right so we can
make a request and as you can see here
if we make a request to our host slash
all DBS that will give us a list of all
the databases in that CouchDB instance
all right so it's essentially a no SQL
database that's available to us through
making HTTP requests so we can connect
to it through curl or pretty much
anything that allows us to make requests
all right so enough with the methodology
let's go ahead and get this installed
I'm going to click download and we're
going to download the Windows version
which looks like I already have it so
let's see show and folder and where is
it right here couch TV all right so
we're going to go ahead and install it
and this is just a simple Windows
installer so we're going to go through
this real quick we'll accept the terms
it's just telling us that the path can't
have any spaces ok we'll click Next for
this path I don't know why it chooses e
I want this in my C Drive so
just change this and you can install it
wherever you'd like so let's see I'm
going to choose my C Drive and I want it
in CouchDB all right so let's go ahead
and click Next
install okay so we'll let that install
alright so looks like it's finished now
once it finishes it should start up as a
service and we want to go to our browser
and do HTTP localhost and I believe the
port is five nine eight four and then we
want to go to slash underscore utils
alright so that's going to open up this
Foxton program and this is basically
just a web GUI that we can use to manage
our databases create our admin accounts
and pretty much anything else you can do
with couch now they changed it in
version in CouchDB too in version 1.6
and earlier it was it was a program
called futon which was just like this we
could create databases and all that but
it wasn't as as intuitive I guess so now
what we want to do is you see this tab
down here that says verify we just want
to verify that everything is ok that the
we can create a database a document we
can update documents delete create a
view and replication so let's go ahead
and click verify ok so everything looks
good gives us a little message up here
saying it's all right now we're going to
do is click on the setup tab here and it
asks if we want to create a cluster or a
single node now a cluster has to do with
multiple servers and just a large set up
that is way beyond what we would need
for just a simple database and what for
a simple application so we're going to
click on configure single node and we
need to add some credentials up here so
create a username and password we're
going to leave the the address at 0 0 0
that's going to be our localhost
we want port 594 so let's click
configure alright now it's going to ask
do we want to replicate data if we click
on that we can set up replication but
we're not going to do that just yet
all right so now if we click on
databases we have some stuff here we
have global changes metadata replicated
data and users okay so for users that
has the the admin user we just created
alright and if we click on admin we can
change our password if we want we can
also create other admins for the system
so now that everything's set up we have
an admin user let's go to the databases
tab and we're going to create a new
database so let's call this database
we'll call it my company click create
you are not server admin that's right ok
we have to actually log in as our admin
so let's click log out and admin login
and create database my company and
create all right so it says database
created successfully so now we're in the
database screen notice that the URL says
after utils
database my company and then all Doc's
limit 100 so this here if we had any
documents would show up to 100 so let's
go ahead and add a document will click
new doc and you can see it automatically
gives us this ID this underscore ID so
we're just going to add to this so we'll
go ahead and add a name
and let's add an email and so let's do
maybe a phone number and then let's do
an address which will be an array
okay so we'll put in some brackets and
let's put in here actually not an array
it'll be an object
okay so we'll say Street I'm just going
to make something up we'll just say 50
Main Street and city let's say Miami
state FL and zip and I don't know the
zip I'm just going to make something up
all right so we have this document which
is a customer or client so let's click
create document and it says saving
document and over here you can see we
have our ID it also gives us a
underscore Reb field which is the
revision if we click this edit document
we can go and we can change things we
can also see all the data all right and
we can also click this check mark this
Docs and it'll show us the rest of the
data as well all right so let's add one
more I'm actually going to just copy
this structure here and then we'll say
new doc okay we'll go ahead and paste
that in and let's just change some of
this up we'll say Sam Smith
okay change up the address we'll say 44
school Street and let's do Boston all
right so let's go ahead and add that
okay so it's not letting me click create
so that probably means something's wrong
and our syntax and it is we're missing a
curly brace here there we go so now we
have both documents and if we click Docs
you can see the data for both alright so
up to this point we've installed the
database we've created the database and
we've added two documents so let's go
actually let's go back in here and let's
go to new view okay we're going to
create a view and basically a view is we
want to query our database and then we
want a customized response now we do
this through a map and reduce function
down here and you can see that reduce is
optional so we're just going to work
with map now this what this is doing is
it's going to emit a key value pair all
right so right here what it's saying is
that we want to use the ID as the key
and then just the number one is the
value all right and this isn't very
helpful but let's run it just to see
what it gives us all right so let's just
say view one and we can actually name
the design dock up here and we'll just
say view one all right
actually the index name we'll just call
the index name ID all right so let's
click create document and build index
and you can see that now we have this
and if we look we have the ID as the key
okay and then the value is just the
number one okay for both documents so
that's not very helpful so let's create
another one we'll say new view and let's
call this view two now instead of just
the number one is the value I'll keep
the ID as the key but for the value
let's say doc dot name all right so
let's go ahead and click create and now
you'll see that we still have the ID as
the key but the value is now the name of
the customer okay we have John Doe Sam
Smith now if we want to return more than
just one field we can return it as an
object so let's create another view and
we'll call this one view 3 and instead
of number one let's put in some curly
braces and we'll say name and that's
going to be doc dot name and let's do
what else do we have email doc dot email
phone dot dot phone and address doc dot
address all right so let's see what that
gives us so now you can see that we're
getting all the data ok we're getting
the name email phone and the address now
if we go up here to this button here
this will actually open it up this will
make a request to the URL so let's go
ahead and click that and you can see the
format of the URL we have our host my
company underscore design and then the
view name which is view 3 and we want
the view we're using new view as the
index limit 20 and there's no reduced
function so reduce falls so let's click
view Jason and now you can see that
we're getting that data all right so we
can make a request
to this design document to this URL and
get this data in fact let's make a
request using a tool let's see I think I
have it installed it's a chrome tool
called rest easy so you want rest easy
chrome and they should have it installed
yep if you don't just go ahead and
install it I'm going to launch it and
let's grab that URL and put it in here
okay we want to make a get request to it
we'll click send and we get the data so
now what I want to do is connect using
curl all right now for Windows we have
to download it and let's see I forget
right here confused by code column slash
curl we're just going to grab that
client so let's say downloads and let's
grab these I'm going to grab the 64-bit
version which with administrative
privileges yeah let's go ahead and click
that and download it ok we'll open that
when done alright so we're going to go
ahead and just install that click finish
ok we can close that up and let's um
open up a command line ok and we should
be able to say curl - - version alright
so we know that it's now installed and
we can call it so we need to make a get
request let's let's make a get request
to get all the databases so we'll say
curl and we want to add this - X and
then get HTTP let's do our loopback one
two seven zero zero one and it's port
five nine eight four and I'm going to do
slash underscore all underscore DBS
all right and that shows us all the
databases that are available including
the my company one that we created now
to create a database we need to make a
put request so let's say curl dash X and
then put and then we want to do HTTP one
two seven zero zero one port 594 slash
and then the database we want to create
so let's just say test DB alright now
it's giving it giving us an error
because we're not a server admin so in
order to do this we need to include our
credentials so let's just click the up
arrow and we're going to go to right
after the slash and we just want to put
in our username colon and then the
password and then the @ symbol alright
so now we get ok true and if we go and
do our get request to all DBS again you
can see we have our test DB and if we go
over to Foxton and go to databases
there's our test DB alright let's go
ahead and clear this out now I'm not
going to work with the test DB anymore I
just wanted to show you that we can in
fact create a database this way what I
want to do is make a request to the view
we created so this right here so we can
get that data alright now since we're
using our loopback address so much I
think it's a good idea to put it in a
variable so let's do set I will say set
server and we want to set that to HTTP
and then let's put our credentials in
here as well so we can make admin
operations so admin at
at 127.0.0.1 port five nine eight four
alright so we'll set that as a server
variable and now we should be able to
say echo percent server percent and okay
so now we have that stored in a variable
and just to test it out let's say curl
get and then we'll use our server
variable and slash underscore all
underscore DBS all right good
so now let's make a request to that view
okay so we'll just click up and let's go
my company let's see my company slash
underscore design slash view three is
what we called it slash underscore view
and slash new dash view all right we
don't need to limit or the reduce false
let's go ahead and run that and now you
can see that we're getting that view
we're fetching that data all right so
let's clear so now what I want to do is
insert a document okay insert a customer
now we need to include an ID which is in
the UUID format okay now we could create
the string manually but there's actually
we can make a request to generate one so
if we say curl X get and we use server
slash underscore you you IDs and that
will generate one for us so let's go
ahead and grab that I'm going to do ctrl
C to copy it whoops and now we want to
do our insert so let's say curl X put
and we want the server and then we're
going to do let's see
slash
my company / and then we want to paste
that you ID in with control V and then
we want to just add dash d open some
quotes and then we can put our customer
in here now I'm just going to add a name
and email just to keep this short so
let's say name I will say Cathy Williams
and let's do email we'll say Kay well at
yahoo.com all right now in Windows we
actually have to escape these quotes so
we got to put a backslash in front of
them so those that one and that one and
this one alright so let's go ahead and
try to run that okay so it gives us this
okay true so things look okay
let's um let's run our view again make a
request to the view which is right here
and now you can see that Kathy Williams
is included alright so we successfully
added a document let's go over here to
Foxton and take a look we'll click this
Doc's checkbox and there she is right
there all right notice that the views
also come up when we when we view all
documents okay because their documents
themselves so the last thing that I want
to show you is replication all right now
I'm going to replicate to a remote
database so a good service for remote
CouchDB databases is Cloudant so we're
going to go to I think it's cloud comm
yep and all you want to do is click
signup and create an account really
quick alright now you're going to have
your host name will be your user name
cloudant.com alright so once you create
that it should automatically log you in
I'm going to go ahead and sign and I
already have an account alright so let
me sign in and you'll see that it's
basically the same interface that we
have on our localhost alright with the
addition of this account tab we have
some options here alright so what I want
to do is take our my company database
and replicate it to the remote host
alright so we're going to click on
replication and on this side this is
actually really easy how they lay this
out we're just going to choose the
database we want to replicate which is
my company and then over here we're
going to choose remote because we want
to replicate a remote to a remote
database and we're just going to add an
S so it's HTTP and then we want to do
our username ok and then colon and then
you want to use your Cloudant password
not the one on your localhost ok your
cloud and password and then we'll do at
and then your username again ok dot
cloudant.com we also want to put the
name of the database on the end so slash
my company alright and we're going to
check off create target so that it
creates that database and let's click
replication
ok so says replication from my company
to a remote host now let's go over to
the remote host click databases and
there it is my company click on it and
it has all of our data alright so you
can see how extremely easy replication
is with couchdb now we're going to go
ahead and stop here and what I'm going
to do is I'm going to create a second
part to this video where we can build a
simple nodejs application using this
couch
DP database alright there's a module
called
I think it's CouchDB I think it's just
couch to be node that will allow us to
communicate with our database and fetch
the data fetch the documents insert
documents and all that alright so thanks
for watching and I will see you next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>