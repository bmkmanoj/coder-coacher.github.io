<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ruby On Rails In 60 Minutes | Coder Coacher - Coaching Coders</title><meta content="Ruby On Rails In 60 Minutes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ruby On Rails In 60 Minutes</b></h2><h5 class="post__date">2016-10-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pPy0GQJLZUM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys in this video we're going to
dive into Ruby on Rails which is a
powerful framework for building web
applications using the Ruby programming
language so I'm going to cover most of
the fundamentals of Rails while building
a simple blog application so we'll cover
things like routing controllers models
views and more now we're going to be
using Windows and there's a really
simple way to get rails up and running
and that's with rails installer all
right at rails installer org and this
includes the Ruby programming language
the rails framework ruby gems which is a
package manager for ruby as well as
bundler which is used for managing those
packages or those gems all right so
we're also going to be using something
called git bash okay we're going to
download git for windows which is a
version control system we're not going
to really focus on using git the reason
that I want to download it is because it
comes with a command line tool called
git bash which is really helpful and
some things I found with using rails in
the command line weren't really working
too well in the standard windows command
prompt and they do work in using this so
we're going to download that as well
all right so let's start with this okay
this is at git - SCM comm and we're just
going to click this download for Windows
ok we'll go ahead and save that and
we'll open that up ok we'll click run
okay and this is just a just a standard
Windows installer we're just going to
click Next
let's see we'll just keep that default
for this option here I'm going to choose
the last one which is use get and
optional UNIX tools from the Windows
command prompt click Next and then the
rest of them we're just going to keep as
default all right well let that install
now I am going to be moving kind of fast
because I want to I want to get to cover
everything in a decent amount of time so
just try to bear with me
alright now let's uncheck the View
release notes and if we click launch git
bash you'll see that it'll open up a
window and it's just like the Windows
command prompt we just have some
optional or some additional unix tools
as well all right I'm not going to get
into this right yet I just want to get
everything installed all right so let's
go to rails install org and we're going
to go down here and let's grab the
windows I'm going to get the right now
Ruby to point to is the latest version
so we're going to grab that okay and
let's see I think I already downloaded
it earlier so let's just open that up
here it is rails installer all right so
this is just another Windows installer
we're going to accept the Terms here and
it's going to install it in the C Drive
by default that's fine and it also
installs git which we already have but
I'm just going to leave that checked and
then you also want to leave this checked
it's going to add the executables for
Ruby in your environmental path so just
click install let's see it already
installs and I mean it already exists on
my system so let me just delete that
folder real quick you guys won't have
this issue it's just because I already
had it installed all right
and this could take a minute or two so
I'm just going to pause it and I'll be
back when it's done all right so that's
all set now you see there's a checkbox
that says configure get an SSH when
installation has completed we'll click
finish and then it's going to just open
up a Windows command prompt and you'll
see that I already have my get info here
it may prompt you for your name and
email address okay if it does just go
ahead and fill that in all right now I'm
going to close this out because I don't
want to use the standard Windows command
prompt I'm going to open up the git bash
program alright so if you don't have an
icon on your desktop
what you can do is it actually adds a
context menu item so when you install
rails it creates this sites folder and
your C Drive all right I already
actually have some stuff in there but
you I believe you'll just have the to do
sample app all right now what I'm going
to do is right-click and we can go to
get bash here and that will open up a
command line in that folder all right so
let's just make sure that everything is
installed so we'll say Ruby V okay so
you can see I have version two point two
point four let's check rails V okay four
to five one and let's also check gem B
so ruby gems and then we should also
have bundler all right version one point
eleven point two so everything's
installed now and what we want to do is
generate an application okay I want to
generate a rails app so to do that just
make this a little bigger to do that we
can say rails new and then the name of
the application all right and I'm just
going to call this simple blog okay so
that's going to create all these files
and folders now you may or may not get
this error this has to do with an SSL
certificate okay so to fix this there's
a couple things you can do what I'm
going to do is open up
that sites folder and go into a simple
blog which is what we just created and
then I'm going to open up right here the
gem file so let's see actually no I'm
going to do is I'm going to open up
sublime my sublime text editor and then
add that folder to it as a project
alright so let's see sites and simple
blog select folder alright so let's open
up the gem file and you'll see up here
we have the source HTTP ruby gems I'm
going to just take the S off alright and
just use HTTP and that should fix that
issue alright so once you do that you
want to go back and just run bundle
install whoops we got to go into the
folder so CD simple blog and bundle
install alright and that should get
everything set up alright what it's
doing is it's installing the
dependencies now if you if you're
familiar with nodejs there's a lot of
similarities here the gem file can kind
of be thought of as the package.json
file okay you define your gems in here
including rails itself and then you can
run bundle install just like you would
run npm install with node and that'll
get it all set up for you alright so now
that that's all set we want to run rails
server ok you can either run rails
server or you can run rails s for sure
and that's going to start up the web
brick server which is a dev server that
comes with rails alright and it's going
to open it up on port 3000 by default so
if we go over to our browser and we put
in HTTP localhost 3000 you'll see a
welcome page like this alright so this
is how we know that everything is
installed and up and running so we're
now ready to start developing alright so
let me just close these out now the
first thing that I want to do is
generate a controller alright so if
you're not familiar
with MVC it stands for model view
controller and each each one of those
things has a specific task or specific
purpose controllers are used basically
to look at the URL and decide what to
low decide what method in that
controller to load it's also responsible
for talking to the model in the view
alright the model is responsible for
dealing with the database or whatever
API whatever data storage you're using
all right to do inserts or selects or
whatever it may be and then views are
used for the user interface okay
templates and what the user sees in the
browser all right so when we look at the
folder structure here the most important
folder to look at is the app folder
because that has the entire MVC
structure we have a controllers folder
we have a models folder and a views
folder alright so in the controllers
you'll see there's an application
control or file and that's the the core
controller every control that you create
is going to extend this one now in the
views folder there's a layouts folder
here and then application dot HTML GRB
alright all of our views are going to
have this HTML ER be okay the ER be
extension is embedded Ruby if we look at
that that is the the HTML that's going
to wrap around all of our our interviews
all right we have the doctype the head
tags all that you can see ruby has its
own way of including style sheets and
JavaScript tags and down here you'll see
this yield this is where all the views
that we create will be output
alright so whatever is in this file is
going to show up on every single page so
you don't have to have in all of your
views you don't have to include the
whole structure with the head tag and
all of that all right which is really
nice now the other folder that's really
important here is the config because
that's where we have our routes you see
this routes RB file and I'm going to go
over routes after we create our first
controller so let's go ahead and do that
so we have one command line that or one
terminal that's running the web brick
server we could stop this and then
generate our controller but I want to
leave this running so I'm going to just
open up another another terminal window
okay so simple blog get bash here
alright so we'll just let the server run
I'm just going to move it out all right
and then from here what we want to do is
generate a controller okay we could
create the files we need manually but
this makes it much easier so to do that
we'll say rails and we could either
write out generate or use G and we want
to specify that we want to generate a
controller and then the name of that
controller which in this case will be
posts alright so let's go ahead and run
that all right so now it tells us all
the stuff it created okay if you look it
created a posts underscore controller
file in the controllers folder
it created a posts folder inside the
views it created a helper post helper
inside the helpers folder it created
some coffee scripts we don't really need
to pay attention to that and also its
own s CSS file alright so if we look in
controllers and we go to post controller
dot RB you'll see that we have a class
called post controller and it's
extending that application controller
alright like I said all your controllers
should extend that and it uses this less
than to do that now what I want to do
here is I want to create a method called
index now in Ruby we define functions
using the DEF keyword and then we'll say
index and then end alright now if this
looks weird to you let's say you're used
to Java Script or PHP this would be the
same as doing function index just like
that all right so this is just the the
Ruby way of doing things and it may be a
little strange at first but it's
actually really nice
Ruby focuses on trying to look like the
English language okay you don't see a
lot of punctuation and curly braces and
all that tries to look very just just
very normal I guess alright so not like
a programming language so let's go ahead
and save that and then what we want to
do is if we look in the views folder we
have a post folder and we're just going
to create a new file and we're going to
save it as index dot HTML dot e RB
alright for embedded Ruby and this is
going to be our index template so I'm
going to just put in h1 here and let's
just say index and we'll save that now
what we want to do is set this view to
be our home view when we visit this page
we want to get rid of this landing page
so we need to create a route so we're
going to go back into config routes dot
RB and right here is where we can
specify the what we want to use for the
route so I'm going to just uncomment
this and what this says right here is
it's going to look at the Welcome
controller and then it's going to look
at the index view of the index method
alright now we don't have a Welcome
controller we're going to change this to
post all right we want the posts index
to be to be the route all right so let's
save that and then we're going to go
back over here and reload and there we
go we're now seeing the index template
or the index view all right when I say
templates and views I mean the same
thing now I want to create another
controller called pages controller and
that'll be responsible for let's say if
we want an about page or I don't know a
terms and conditions page or something
like that just a static page so let's go
back to our command line here and we're
going to say rails G controller pages
all right so that created a pages
controller and in here what I'm going to
do is create a method called about So
Def about end okay and we'll save that
and it should have created a views
folder as well you can see we have this
pages folder and I'm going to create a
new file in here and save it as about
dot HTML dot e RB and let's put an h1
and here and we'll just say about and
save now let's say we want this to show
up when we go to slash about all right
if we try to go there right now we're
going to get a routing error because it
doesn't have a route for that so if we
go to our routes RB and if you look at
this example here this is a regular
route so I'm going to just uncomment
that and we want this to just be about
and it's going to be a get request
that's why you see the word get here and
then we want it to go to the pages
controller and the about view all right
so let's save that go back reload and
now we get about all right so this is a
normal route this one here is for the
route now if we want to send dynamic
values to a view from a controller we
can do that pretty easily so in about
here and the function about or the
method we're going to say let's see we
can use the @ symbol title and we'll set
that to about us all right and then
we'll save that and then we'll go to the
about template we'll get rid of this and
we're going to use this syntax here
alright and that'll be the title and
then we need to close it alright so this
is the syntax for adding variables so
let's save it reload and we get about us
ok so we can send data from the
controller to to the view really easily
all right we may want to say
content and we'll say this is the about
page and then in the view we'll just put
in a paragraph and let's see we'll just
grab that and this will be content
alright so I'm going to close up the
pages controller we're not going to
really be working with that anymore I
just wanted to show you an example of
creating a regular route and sending
data to the view from the controller now
with our posts we're going to need a lot
of views and going to need a lot of
methods okay so we're going to need an
index which we already have okay we're
going to need a show view and a show
method which will take care of showing
the individual post all right and the
index by the way will be a list of posts
then we also have the new we're going to
need new which will show the form to add
a new post we're going to need edit
which will show the Edit form destroy
which will be our delete function or
delete method so there's quite a few
things we need to do now instead of
doing all of those routes manually what
we can do is we can claim posts to be a
resource all right so right here you see
this resource products I'm going to go
ahead and just uncomment that and then
we're going to change this to posts all
right and then we're going to save it
and let's go to our command line and
there's a command we can do called rake
routes oops and what that does is it
shows us all the routes for our
application so you can see that we have
our route we have our boat and then all
of these posts routes okay and this
happened because just from that
resources post line that created all
these routes for us all right so we have
index create which is going to be the
post request that the form gets
submitted to to add a post new is again
the form to add a post edit
show update which will take care of
updating the post and then destroy which
will take care of deleting it alright so
you want to include posts as a resource
alright so now we want to do is go to
let's see let's go to our post
controller and we're going to stay deaf
new ok so this is going to take care of
our forum our new forum okay so we're
going to have to create a route I'm
sorry a view so let's go into views and
then posts and we're going to create a
new file and we're going to save it as
new dot HTML dot RB alright and let's
put a heading we'll say add post and
let's save it and now we should be able
to go to slash slash posts slash new and
there it is add post ok so since we have
that route we have that view that's
what's going to show up all right now
let's create a form here now I'm going
to paste this in this uses Ruby syntax
alright and it uses a form helper so we
have this form for helper and with this
is for a post and then we'll say do and
then this F can be used down here to
create our labels F dot label and our
fields ok so we're going to have a title
which is going to be a text field and we
also have a text which will be text area
okay so title and a text field actually
you know what let's change text of body
I think that makes more sense alright so
a title and a body and then down here we
have our submit so let's go ahead and
save that and if we reload you can see
we have a little form now I'm just going
to edit this form for area a little bit
I want to after post put a comma and
then we're going to say URL
and we want this to go to posts
underscore path all right now what this
is going to do is it's going to submit
to our create method all right so let's
save that and then we'll go into our
post controller and let's say def create
alright and for now let's just do render
plane and let's say params post dot
inspect all right so let's see what
happens if we submit this form okay I'll
reload and let's just say test title
test body and save post all right so
it's getting submitted to this create
method and what this line does is it
just gives us basically an object with
the title and the body so we can see
that we're getting that data sent
through all right now this obviously
this isn't what we want it to do I just
wanted to give an example and show you
that it is submitting to create now
before we can think about submitting
data and saving it in the database and
by the way the default database that
rails uses is SQL Lite which is a file
based database all right I'm not going
to get too much into SQL Lite itself
because no matter what database you use
everything here is pretty much the same
okay you can define your database inside
of config
let's see config database yml you'll see
we're using SQL Lite and you can use
MySQL you can use postgrads and a number
of other databases but the actual models
and all that isn't going to be too
different depending on the database you
use at least for the kind of stuff that
we're doing all right so we need to
create a model just go back and just
close these out so we need to create a
model in order to save our posts so
let's open up the
terming all of the command line here and
we're going to do rails G model okay we
want to generate a model and we're going
to call it post all right now good
practice is to use plural for your
controllers so posts and then singular
for your models okay so we're going to
use post and then let's say we want it
to have a title field which will be a
string and let's do body which will be
text alright so let's go ahead and run
that and that should create a model file
for us okay so now you can see we have
models post dot RB now we created a
model and it also created a migration
file all right so you'll see right here
DB migrate and then it has a time stamp
create posts ok created this file but it
didn't actually create the post table
yet in order to do that we need to run
the migration file alright and if we
take a look at the migration file it's
going to be in DB migrate and you'll see
it right here create post so it's going
to create a post table with a title and
a body alright and a timestamp so to run
this we have to we have to run a command
called rake DB : migrate okay once we've
run that it'll actually create the table
all right so we get a success message
here so now we can go back to our
controller and proceed so let's do I'm
going to create a variable called post
and we'll set that to post which
represents the model and then dot new
all right and then we want to pass in
the parameters so this right here
alright so let's save that and then
let's see what happens if we try to
submit this okay so it's giving us an
error that says forbidden attributes now
the reason we're getting this is because
we didn't define any special fields that
a post is allowed to have all right and
we need to we don't want to just let
anything be entered as a post so we want
to want to let the system know that we
want to title in a body so to do that
we're going to add in a method down here
we're going to label it as private so it
can only be accessed from this class and
we'll say Def and let's call it post
underscore params all right and then
inside here we're going to say params
dot require post dot permit and let's
say title and body okay it's only going
to be able to take in a title and a body
so up here where we just passed in
params pose now we're just going to pass
in the name of that method which is post
params all right now we need to call the
save method for it to actually save so
we're going to say post dot save all
right and then we just want to redirect
to that post so redirect underscore to
post all right and then what that's
going to do is it's going to load the
show view alright so we haven't created
that yet so let's go up here and let's
say we'll say def show and all we want
to put in here for now is post equals
from the post model we want to call find
all right and here we want to just pass
in the ID from the URL all right so
params : ID and that will get that
single post
all right so we'll save that now the
show doesn't have a view so let's create
that
so inside views page views posts we're
going to create a file and save it
as show dot html' dot ER be all
right-handed here let's put in h2 okay
this is going to be the title so we want
to use this tag syntax and do at post
dot title
okay then under that we'll have the body
all right so let's save it and now we
should be all set to submit it and then
get redirected to the show view all
right so let's just reload this and
let's say post one this is post one and
save all right so now you can see we're
redirected and we can see our post and
if we take note of the URL it's post
slash and then the ID which is one all
right so that's working out good now we
want to be able to list all of our posts
on the the main post page so on our
index so what we'll do is go to our post
controller go into index and from here
all we have to do is create a post
variable and set it to post our post
model dot all all right and that'll get
them all save that and then let's go
into our index view and from here let's
change this to so actually we'll just
say blog posts alright now we need to
loop through the posts so we're going to
do this syntax we're going to say take
that post variable that we passed in and
then do dot each and then say do and
here we'll pass in post which can be
anything but post makes sense all right
now notice there's no equal sign that's
because this isn't an output all right
we only use the equal sign if we're
outputting some kind of variable all
right and then down here we have to make
sure
we end the loop and then in the middle
let's put an h3 and here we'll do post
dot title and then we'll do post dot
body alright so let's go ahead and save
that reload
and there's our post one alright now I
want to make this look a little better
and I also want to have some navigation
so we're going to use bootstrap so let's
grab the CDN for bootstrap okay so I'm
going to grab this CSS link and let's go
into layout views layouts and then our
application HTML and what we can do is
we can actually use this syntax this
stylesheet link tag so let's see well
copy that paste that in and then let me
just grab this again and let's see we
don't need all this and then it'll just
paste that in there alright so I think
that should work let's save it reload
and now you can see that bootstrap is
enabled alright so let's go to get
bootstrap comm and then we'll go to
getting started examples and this
starter template right here I'm going to
do a control U and I just want to grab
this nav yeah well just grab this nav
and we're going to put that right in
here alright and let's just edit this a
little bit we're going to get rid of the
nav bar fixed top I'm going to change
this nav bar inverse to nav bar default
which will make it light project name
let's say simple blog and let's see
get rid of that class actually there's a
link helper that we can use with rails
so we don't even need the a tags here
all right what we're going to do is put
in link underscore two and this is going
to be to the home so this will be the
text that displays we just wanted to say
home and then we want it to go to home
underscore path all right so this isn't
going to work yet what we need to do for
this home path to work is we're going to
go back to the routes config routes and
let's see actually no I think that that
should work yeah we'll try it out all
right so that's the home path I want to
have a link on the other side of the nav
bar to add posts so I'm going to copy
this ul and paste that in and then just
add a class here called navbar right and
this is to add posts so let's say create
post and let's see we should be able to
use new underscore post underscore path
all right so let's save that reload
undefined local variable home okay so
home path isn't working so I think if we
go to our routes and let's go right here
and we're going to put a comma and then
say as : home alright and let's do this
about will say as Poland about okay
let's save that okay so now now the home
link works if I click create post that
takes us to the post new alright now see
how this is too close to the edge here
we're just going to
app that in a container div so let's go
to our main application layout and we'll
say div class container around the yield
okay save that and there we go
alright so let's add another post ok
save and there we go and if we go to our
home page you can see that it's listing
both posts awesome I just want to add
some classes to these forms to make it
look better so let's go to views posts
new and we're going to go to this text
field and just going to wrap parentheses
around this because we want to add in a
second parameter here which will be an
object and we'll say class and then set
that to form control which is a
bootstrap class alright then we'll do
the same thing down here ok so body
form control all right so save that okay
so the form looks a little better let's
do the button as well so this submit
right here we can just add in some
parentheses class and we'll add BTN and
then BTN - primary ok so now I have a
nice button alright now I want to add
some validation so to do that we can use
our model file so let's go to models
post and in here we're going to say
validate and we want the title we want
it to be required so we'll say presence
true all right and then let's say
lengths and we're going to set minimum
of 5 all right so that'll be required
and has to be 5 characters so let's save
that now if I go and try to create a
post and we just saw that shouldn't work
oh oh oh oh we need to go to our
controller and then where we have the
post save we want to do an if right here
ok so we'll say if post save then we
want to redirect and then let's put an
else
ok so else then we just want to
re-render the form so render new alright
so now let's go back and try to submit
and you'll see that just rear Enders now
we want to have an error message telling
us what's going on all right so let's go
to our new view which is the form and
we're going to go right below the form
tag here and we're just going to paste
this in
all right so what we're doing is we're
doing this if statement that says if
post errors dot any then we want to loop
through the messages and we can do that
with this line here and then we're just
going to output the message wrapped in
an alert div all right so let's save
that and we'll go and try that again
just submit what's this
Oh okay so we need to it doesn't know
what this is post so we'll go back to
our controller and go to new right here
and we can just say post equals post dot
new okay that should work alright so if
we click Save you'll see we get our
errors title can't be blank title is too
short
all right so validation is pretty simple
in rails so on our index page we want
this we want these to link to to the the
full article part of the full post so
let's add a link we'll go to our index
view and I'm also going to wrap a div
around these and let's give it a class
of well
and then we'll add a button here or a
link so we'll use that link to so link
to and then this will just say read more
and then it's going to go to the post
path and then we just want to pass in
that post variable and then let's add a
class of BTN BTN default ok reload and
if I click read more it takes us to that
post page
alright so things are coming along I
know this is a really long video so
hopefully you guys are still with me
pause the video if you want take a drink
of water I know this is this is kind of
long so the next thing I want to do I
just want to be able to cover everything
and get you guys able to create a crud
application alright so now what we want
to take care of is editing okay want to
be able to edit our posts so on the show
page here let's create an edit link
alright so let's go to show HTML and
down here let's put an HR alright so
this is going to be a link to edit so
let's do link to edit and we'll say edit
underscore post path and we want to pass
in that at post variable and then let's
add a class
all right so right now that's not going
to work okay because we don't have that
we don't even have an edit action our
method so let's go in our controller and
let's see we'll go right here and say
def edit alright and we need to get the
individual post just like we did on the
show page so I'm just going to copy this
and paste that in here save it and then
let's create an edit view inside our
post folder so edit dot HTML dot GRB
alright now this is going to be pretty
much the same as the new so I'm going to
just copy this okay and we'll just
change this to edit post now the path
the URL is going to be different for
this update we're going to change this
to just post path so singular post path
and then we want to wrap at post and
then we also want to define the method
okay so instead of a post it's going to
be patched so we want to do : patch
alright and that should do what I
believe so let's save that and now let's
click Edit for this and you'll see we
get a form it has our fields let's just
change this to the number 1 click Save I
know oh we didn't add the update action
alright so we need to go to our post
controller and add update I don't know
why I forgot that so we want to want
this right here
okay and then let's copy this from
create except it's not going to be post
save it's going to be post update and
then we just need to wrap that post
params okay and then redirect a post or
if it doesn't else then we want to edit
we want to render the edit form
alright so save that let's try it again
save and there we go was updated alright
so we can now update posts now we want
to be able to delete them as well so
let's go ahead and do that we're going
to add a destroy method here okay sounds
a little harsh we're going to say add
post equals post dot find and then we
want the ID which we can get with params
ID and then we just want to call post
dot destroy and then let's redirect okay
so will redirect to post on the score
path okay save that now we'll need to
add a link to delete so let's go to our
show view and go right under the edit
I'm going to copy that
okay this will say delete let's change
the class to button danger to make it
red and this is going to be right here
just post path and then pass in the post
and then we're going to add
something right here so we need to
define method which will be delete and
then let's say data and we can actually
add a confirmation to delete right here
we're going to just say confirm and
we'll just say are you sure all right so
that should give us a confirmation so
let's save it okay we'll go back let's
create another post we'll just say test
up needs to be five characters okay now
we have that testing post so let's go
ahead and click delete are you sure okay
and it's gone so we now have a complete
crud application we can create read
update and delete posts so if if you're
tired and you want to stop here that's
fine but I'm going to continue on and I
want to create comment functionality all
right we want to be able to submit a
comment and read all the comments for
each post so let's go back to the
command line and we want to add a second
model of comment so let's say rails G
model comment and we'll have a username
which will be a string and a body which
will be text and then post which will be
references all right because we want to
have a relationship between the post and
the comment all right so this is a way
to do that which we're signing post and
setting that to references so let's go
ahead and run that and that's going to
create a migration file for us it's not
going to create the actual comment table
yet to do that we have to say rake DB
migrate
all right so now if we go to models and
we look at comment you'll see it has
this belongs to post all right and
that's defining a relationship a comment
belongs to a post at the same time we
need to add a relationship in our post
model so in here we want to create as
many so has underscore many comments
okay a post can have many comments
that's the relationship so let's save
that alright now to add our routes for
our comments we want to go to config
routes and instead of writing out all of
our routes we're going to add it as a
resource but we also want to nest it
inside of posts because we want it to go
to slash post slash let's say ID of 1
and then slash comments okay whatever
that comment ID so to do that we're
going to let's see we're going to say
resources posts do and down here we'll
say end and then in the middle here
we're going to nest resources comments
all right so let's save that and now if
we go when we say rake routes you can
see that we now have these coffee
comments create and the route is posts
slash post ID slash comments slash new
okay so it's nested in that route all
right so let's close that out and let's
see I'm just going to close all these
out it's getting a little confusing
alright so now we want to do is generate
a comments controller so let's go back
here and say rails G controller
comments all right and now we want to go
to our post show and we want a forum
here to add a comment so let's go let's
see do I want it below these buttons no
put it we'll put it above I guess now
we'll put it below I'll just put in
another HR alright so let's put in h3
and we'll say add comment okay I'm going
to post this forum in or sorry paste
this Foreman okay so we have this forum
for then we have post post comments
build and then the user name field and a
body and a button so let's save that
reload and now we have our comment form
so now we want to go to our comments
controller and we're going to add up
here we'll say def create because that's
what it's going to submit to just like
the post and say at post equals post dot
find params ID and then under that let's
do comment equals post dot comments dot
create and then pass in comment params
which will create in a second and then
let's redirect okay redirect to and we
want to say post path it's going to be
the same page we're on and we just want
to pass in here at post all right now
let's create this comment params method
it's going to be private
all right and just like with the post
we're going to say params dot require
dot permit and we just want a username
and a body all right so let's save that
now we want to be able to see the
comments after we submit them so let's
go back to show our post show and we'll
go right above where the comment form is
and let's put an h3 here and we'll say
comments all right and then here we need
to loop through the comments so we'll
say post dot comments dot each comment
all right and then in here let's put a
div we'll give it a class of well and we
just want the username and the comment
body so let's put paragraph and we'll do
a strong tag and put the username so
that would be comment dot a username all
right and then we'll put a colon space
comment dot body
okay save that all right so let's do
username will say Brad body great post
hope I'm getting an error unexpected
keyword and expecting end of input
ah let's see what did I do
create oh I didn't put the DEF keyword
right here alright let's try it again
no still record not found create
couldn't find post with ID let's see
post dot find params ID oh it's not ID
it's actually going to be post
underscore ID all right let make sure
everything's okay here alright so it
looks good as far as I can tell
third time's the charm
hopefully yeah there we go reload and
comment still there I'll say thank you
okay so we can now comment good and we
can read our comments so just about
there I do want to be able to delete
comments so let's do that real quick so
let's see actually know what we're going
to do is break up these into into
different views all right we do have a
views comments folder so let's grab this
and cut it and then inside views comment
it's will create a file save it as
comments dot HTML dot e RB and paste
that in and let's also create in the
comments folder a file called comment
actually just call it form dot HTML GRB
okay actually you know what I want I
want to start it with an underscore
because it's a partial so both of these
files will just put an underscore okay
and let's go back to show and we're
going to grab this cut it put it in the
form and then inside show let's do so
you wanted to render I think we can say
render particle
I'm sorry not article post dot comments
let's let me see if that works
no it doesn't alright so let's just do
the location which will be comment slash
comments okay so there they are now we
need the form as well so this will be
comments form and since it's a partial
we did have an underscore and the file
name but we don't need to add it here
okay so like I said we're going to do a
delete comment delete so let's go to our
comments partial and we'll go right
after it right here and I'm just going
to paste this in okay so it's a link to
and it's going to say just I don't want
to say destroy comment let's just give
it in
we'll say brackets and an X all right
and then this will be comment dot post
ok let's save that ok so now we have
these X's now it's not going to work yet
because we didn't create the destroy so
we'll go to comments
I'm sorry controllers comment controller
and let's create destroy now I'm going
to paste this in to save some time ok
we're going to get the post we're going
to get the comment called destroy and
redirect ok let's save it ok you'll
click the X here are you sure ok and it
goes away all right so we're almost done
I promise the last thing I want to do is
just some basic authorized HTTP
authentication ok just so no one can
come along and just delete posts and and
delete comments all right so or add them
for that matter so we want to go to post
controller and right under where we
define the class we're going to say HTTP
underscore basic underscore authenticate
underscore width and let's say name
which will be I'll say Brad or whatever
you want to use password we'll say 1 2 3
4 and then say accept okay so this
pertains to the the routes that we want
so we want to have to authenticate on
all of them except for index and show ok
those are the only ones that you should
be able to go to use without having to
authenticate all right so pretty simple
let's save that and then we want to go
to actually let me just copy this
and then we'll go to our comments
controller and do the same thing paste
that in now for this instead of using
accept we want to use only okay we want
to say only destroy because we want
users to be able to comment and read the
comments and all of that without having
to authenticate but we don't want them
to be able to destroy so let's save that
all right now if I reload and I click
create post you'll see it's asking me
for a login all right if I don't log in
we get access to nide all right if we go
to read more and go to edit same thing
we get the login delete are you sure
okay we get the login okay so we can't
do anything except read the post and
comment alright now if I log in here
one-two-three-four login now we can add
a post all right so we have a nice
little blog system I know this was a
long video I tried to get through it as
quick as I could but you'll see there's
a lot of information a lot of the core
fundamentals of Ruby on Rails so
hopefully you guys enjoy this and this
this project is actually based on a
project from my full stack web
development course which includes all
kinds of technologies dozens of
front-end and back-end technologies so
you might want to check that out I also
do have a Ruby on Rails course that I'll
also add in in the description all right
so I'd appreciate it if you guys could
check those out and that's it thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>