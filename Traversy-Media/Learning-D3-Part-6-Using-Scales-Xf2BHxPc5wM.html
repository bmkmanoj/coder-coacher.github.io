<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learning D3 Part 6 - Using Scales | Coder Coacher - Coaching Coders</title><meta content="Learning D3 Part 6 - Using Scales - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Traversy-Media/">Traversy Media</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Learning D3 Part 6 - Using Scales</b></h2><h5 class="post__date">2015-12-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Xf2BHxPc5wM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back this is part six
of my learning d3 series mini series and
in the last video we created a basic bar
chart which is this right here and what
we're gonna do now is we need to add
some scaling to this because right now
it's very static and if we get to a
certain amount of data here it's just
gonna stop and also if we go up above a
certain amount it's not it's gonna stop
all right so we have we're very limited
in this particular chart so we're gonna
add scales to it and d3 has lots of
different types of scales all right
quantitative scales are one of the types
and then there's a lot of different
types of quantitative quantitative
scales so it can get pretty complicated
if you want to go beyond this this
tutorial then I'd suggest visiting the
documentation on github and just reading
through it but what we're going to be
dealing with is linear scales and I'm
not gonna go through all this I just
don't have the time for this
and I don't want this to be a
complicated tutorial so basically what
the scale is gonna do we're gonna give
it an input domain and an output range
okay those two things now the input
domain is gonna be the actual to put it
in the easiest terms I can it's going to
be the lowest point of your data to in
the highest point and the lowest point
usually you want that to be zero alright
so in this case if we look at this data
our input domain is going to be 0 to 720
because that's the highest piece of data
here
all right the output is what we want the
the the chart to display so in our case
we want the output range to be if we're
looking at it this way for looking at it
vertically we want the output range to
be whatever the highest point all right
so 720
and then for the if we're looking at it
the horizontal scale we're gonna want
the width of the of the chart to be the
output range all right so it's a little
hard to explain so let's just jump into
it and I can actually show you alright
so what we'll do here is we're not gonna
be needing the bar with any more so I'm
gonna comment that out and we're not
gonna need the bar offset all right
these these are gonna be dynamic so
we're first gonna set the y scale okay
now to set a scale you just do D 3 dot
scale and then whatever the type in this
case it's gonna be linear all right and
then we're going to input our domain or
input domain and that's gonna be
formatted as an array with two values so
it's going to be 0 - it's gonna be -
that's actually the max of the chart
data okay so in this case it would be
720 but we're not going to hard-code 720
we're just gonna say d3 dot max and then
we can pass in my data
all right so that's the domain next we
need the range today so the range is
gonna be again 0 and then it's gonna be
the the height okay so whatever this is
in this case it's going to be 500 so
this size will stay the same but since
we're gonna input the max which in this
case is 720 even though it's 500 pixels
high we're still gonna have we're still
gonna be able to log 720 in here okay
it's not gonna be 720 equals 720 pixels
high
like it was like it is you know before
we add scaling all right so hopefully
that makes sense I don't know if it does
know if it sounds like it it's confusing
or not but hopefully it's not too
confusing all right so that's the y
scale next we're going to do the X scale
and for that that's gonna be an ordinal
scale so I'm gonna say d3 scale dot
ordinal and we're gonna do the same
thing we need to put our input domain
and in this case this is going to be our
X scale so we want it to be three dot
range and we want to pass in zero and
then the length of our chart of our data
all right so we're gonna stay my data
dot length all right and that's it for
the domain now for the range since it's
an ordinal we're actually gonna use
range bands all right and this is all in
the documentation if you take a look at
this and let's see range band it's not
here it's in it's on one of these pages
there's a few different scale pages all
ordinal scales alright so you'll see
here everything that I'm doing is really
in this it's just really drawn out
alright so here's the range bands right
here so that's the output range from the
specified continuous interval and so on
alright so what we want to put in here
is just we want to put zero and then the
width alright and that's it
and actually this here the domain of the
X scale we don't need to have these
brackets around that alright so that
looks good
now there are some things down here
we're gonna have to change we're gonna
get rid of the VAR my chart and let's
see
we're gonna get rid of the bar with all
right and instead of that we're gonna
say X scale dot range band all right and
make sure it's singular okay no X on the
end and the next thing we're gonna have
to take the height here and wrap it in
the Y scale all right so we're just
going to say Y scale and we're gonna
surround that alright and then we're
going to do the same thing down here
and then this we're gonna get rid of
that and we're just gonna return X and
pass in the index just like that
all right so let's save that
let's see X is not defined oh I'm sorry
this should be X scale yeah
and there we go so you'll see that there
there's no spacing but we can fix the
margins later if needed but the
important thing is if we go ahead and
add some data here all right so let's
say you want 300 400 200 save and reload
you'll notice that it automatically is
gonna fit inside of here okay we're
using scales so it's gonna fit
same thing with going the other way if
we want to change this to a thousand
okay because right now looking at this
this one is 720 that's the highest point
if we add a thousand and I reload now
this one is a thousand and this one is
720 okay so you can see it's much more
dynamic than what we had before now
another cool thing we can do is we can
add a scale for the color alright so we
can have a range of colors kind of like
a gradient all right so to do that we're
gonna go below the X scale and let's
create a variable called colors and I'm
gonna set that to d3 dot scale dot
linear
we're gonna add a domain and the domain
is excuse me it's gonna be 0 to the
length of the chart data so we'll say my
data dot length and then the range we
can put in some values of colors so
we'll use hexadecimal values all right
so we're gonna say 9 0 ie 9 0 and let's
actually this has to be yeah this has to
be in brackets all right and then the
next one we'll do 3 0 C and 2 3 0 all
right and then we're gonna go down
now for the fill here we're going to
take this light green out and we're
going to put in a function and that's
going to take data and an index
and what we're gonna do is just return
colors and we want to wrap the I
variable alright so if we save that and
now you can see we have a nice gradient
and this this gradient this blend of the
cut two colors will be it's going to be
consistent no matter how many data
points we have so in the next video I'm
gonna show you how we can do some
transitions we can do a little bit of
animation alright so and I'm also going
to show you how we can add events okay
so we can add most over events so that
when we hover over a certain bar it'll
give us that number or that piece of
data alright so we'll get into that next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>