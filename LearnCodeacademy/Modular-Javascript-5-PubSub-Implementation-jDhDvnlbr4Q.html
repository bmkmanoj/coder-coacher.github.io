<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Modular Javascript #5 - PubSub Implementation | Coder Coacher - Coaching Coders</title><meta content="Modular Javascript #5 - PubSub Implementation - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LearnCodeacademy/">LearnCode.academy</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Modular Javascript #5 - PubSub Implementation</b></h2><h5 class="post__date">2015-07-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jDhDvnlbr4Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so now I have two modules on my
page I have my people module and I have
my stats module and I'm also including
pub sub J s even though it's not getting
used yet so there we go and so you can
see whenever I delete something then my
people gets updated test tests one more
21 there you go so people is
automatically updating here's how that's
happening I have a very basic stats
module that basically just has a set
people method that it's exposing so set
people is right there and whenever set
people gets fired it's gonna update with
the amount of people you have and it's
gonna render excellent and it's also
gonna console.log I could probably take
that out there we go so that's basically
what's happening in our people module is
calling stats dot set people whenever it
renders so it's calling set people it's
passing it the length of people we have
it's receiving that setting it up here
and then it's going to render which is
going to spit out our mustache template
okay so that's basically our module so
once again we don't want this to be
coupled to the stats module we want to
decouple that and so now all people has
to do is it just has to go events dot
emit let's go people change people
change we're gonna emit a people changed
event and we're just going to add people
dot length to it excellent so let's go
ahead and pull up our console here and
I'm gonna now subscribe to that event
let's make let's go events dot on people
change let's just make a function here
counts and I'll just alert counts there
we go so now I've subscribed to this
event so now we should get an alert
whenever this count changes yep now we
have one person now we have two people
let's go ahead and add another listener
here
let's console.log it let's console.log
that count so now when this changes I'm
going to alert accounts yep and then
it's going to console log in account yep
test
- alert - and that console logs - great
so let's go ahead and now all we have to
do is go into our stats module and then
we can actually forget this whole API we
don't have to expose an API anymore all
we have to do is bind the event so
instead of binding to a Dom event we're
just going to bind to a pub sub event
events on people changed we're going to
do set people there we go so now set
people will fire I don't need to do the
underscore render anymore because
basically I have no more API and so now
whenever people changed we're going to
fire set people and set people is going
to fire with the people length that
we're emitting so let's go and check
this out and see if it works
uh-oh renders not fine yep so I get for
changing my code on me so look at that
it automatically starts up with - if I
delete that it goes to one delete that
it goes to zero excellent so now what's
awesome about this is stats does not
know where this event comes from there
could be twenty other modules triggering
this people changed event and it doesn't
matter and people does not care about
the stats module it doesn't care about
any of the other modules
it's just omitting this event with this
data and so anybody else can listen to
that and let's say later on this stats
module you know I actually am going to
change my mind I'm going to I'm going to
expose an API here on the stats module
I'm going to expose a destroy here so
let's go ahead and go return destroy and
let's make a destroy function here so
now this function this module can be
destroyed if we want it to and so this
is going to be this function here so
whenever we call destroy that'll destroy
this so what what I'm going to do here
is I'm going to let's say I'm going to
take that whole stats module and I'm
going to remove it and then I'm so
that's module is going to poof disappear
from my page I'm going to
buying my event events off people change
set people so now I'm no longer
listening to that event anymore so let's
go and check this out it's working it's
working and let's destroy this guy stats
destroy but that's gone and nothing is
listening anymore so now my people
module is completely working just the
same this thing is gone from the page
and my people module doesn't blow up it
doesn't explode because I'm not
listening to that module in the first
place I don't care if that module is on
the page or not I'm simply omitting
events and whether that module is there
or not everything's going to work just
fine so that's your pub sub pattern
that's a great way to scale your apps
even further</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>