<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>jQuery Ajax Tutorial #4 - &quot;Edit&quot; modes &amp; Better Mustache.js Templating (jQuery tutorial #9) | Coder Coacher - Coaching Coders</title><meta content="jQuery Ajax Tutorial #4 - &quot;Edit&quot; modes &amp; Better Mustache.js Templating (jQuery tutorial #9) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/LearnCodeacademy/">LearnCode.academy</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>jQuery Ajax Tutorial #4 - &quot;Edit&quot; modes &amp; Better Mustache.js Templating (jQuery tutorial #9)</b></h2><h5 class="post__date">2014-06-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Y6KrUwmlrNE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright this is our last video of
building a basic jQuery AJAX app we can
now get orders we can add orders we can
delete orders all that's left is to edit
orders and for that we are going to use
a put request kind of if you're you've
probably heard the term restful api s
and that's kind of a standard way of
putting together an api where you use
get request to access things your
back-end is looking for post requests to
add new items and if an item has an ID
and you want to edit it then you use a
put request too it's basically the same
as a post but you add the ID on the URL
and then you do a put request and you
will update that resource and then
delete which we've already done which
you can do by ID we're going to be doing
the put request it's the most involved
and so we're going to take our
templating to a whole new level show you
a better way of templating other than
scratching out lines in JavaScript
that's going to be the first thing we
want to do this is pretty much as far as
I will ever go with plunking out you
know a string lines concatenated
together in JavaScript it's kind of
messy it's a whole lot of quotes it's
just stuff we don't want to do beyond
this this is as far as I'm going to go
any more than this we got to go one of
two routes we either got to put a
template tag in our HTML which is a
quick easy way and that's what we're
going to do for this or you can say you
have a lot of templates you can create
an HTML file for each template and then
you can use something like grunt to
automatically turn those into JavaScript
strings for you that's way more involved
than we need for this so we're not going
to do that in this but let's go ahead
and take this we're going to copy it out
and what you can do is you can add a
template tag and so we're just going to
paste this in here I'm going to use my
Apple D multiple cursors and sublime to
get rid of all my quotes and same thing
to get rid of all my pluses there we go
now if I give this an ID or template and
then I can instead of stringing all this
out right here
I can go order template equals and I can
grab it with jQuery
HTML did I do order - template yes I did
okay so this should work exactly as I
before let's save and refresh excellent
so this is working perfectly and it's
much cleaner you get syntax highlighting
here you know you see all the pretty
colors that you should see when you're
coding HTML and it just works
one one thing to mention if you're using
IE 8 or older it may just be a safer way
to just go script this is kind of the
old way we used to do it
you do a script tag and you give it a
type of text slash template and what
that's going to do is it's going to tell
the browser type text template the
browser doesn't know what that is it
knows it's not JavaScript so it's going
to ignore this block of code and you're
safe to put anything you want inside of
it
and you're not going to blow up your
JavaScript on the page because it
doesn't think it's JavaScript so that's
kind of the old way to do it I'll just
stick to the template tag for now since
I'm only supporting html5 browsers with
my application and yeah now we can move
forward so we're going to do is we want
an edit mode for this li I'm going to go
to clean up my HTML a little bit we want
it edit mode so we're going to do is
we're going to add a class of edits to
this li when we reddit and then we want
some stuff to be hidden and we want
other stuff to be shown when that edit
tag is there so I'm going to go ahead
and bump this down we're going to make a
span and this span will get hidden when
we're in edit mode
and I'm going to make an input and the
input will get shown when we're in edit
mode and the way I'm going to do that is
with a class class edit so the class
edits and I'm also going to go to a
class of drink name so I know how to
access the name there and this class
will get no edits so whenever edit
exists on the li anything with no edit
will get hidden anything with edit will
get shown yeah a very simple sounds easy
enough
let's do the same thing here for drink
and this just becomes drink there we go
so that's covered and then we need some
other buttons here we got the remove
button we'll leave you there we need an
edit button and this one we'll have
let's see class equals edit order and
I'm also going to add a note
it to this because I don't want to show
this when we're currently editing and
then let's make a cancel button this
will have edit so it'll get shown only
when we're editing and we'll call this
one cancel edit there's a lot to go that
goes into editing it's a lot simpler to
just create and delete and I think
that's it edit and cancel awesome I will
also need a Save button now won't we so
let's go save this will be called save
edits maybe and this one will have an
edit class so we show this only on edit
so if I hit save here we should see
everything yep so now everything is
plunked out let's add some CSS rules
here to just hide what we need so when
we're on edit I'll actually do this so
any edit within the li gets a
display:none there we go
now the anything that is only going to
show on edit is gone and so then you all
li edit edit so when the Li is in edit
mode anything with edit gets a display
initial which is what it would have
shown how do we not add it as display
none and then no edit gets a display
none there we go that should work so now
if i refresh i see an edit button and if
i were to inspect this element here and
add a class there we go now we see save
cancel and they are inputs awesome now
let's just wire this in with javascript
so moving on we want to add down here
another delegate because if you remember
delegate is going to apply to anything
that hasn't been created yet as well as
things that are currently existing so
I'm going to delegate what was the name
of my I think it was called edit order
yes
edit order right there so an edit order
gets clicked
we are going to let's see let's cash
this Li just like we did up here this
clock I can actually probably copy and
paste that for me there we go so now
we're grabbing the closest Li and we are
going to copy the name of the value into
the value of the input for editing
purposes so we are going to go Li find I
want to find my input class name the
input with the name class that's going
to be this guy and I want to set the
value to be the content of this guy so
I'm going to add a name class here I'm
going to add a drink class here so I'm
going to basically set the value of span
class name to be the value of input
class name if that makes sense so let's
go input class name vowel which means
I'm setting the value or getting the
value and that will go Li find span
class name HTML so that's we are setting
the input to the same value as the span
let's do the same thing with drink so
now input class drink I love the sublime
multiple cursors right there Apple D
it's just oh it's great okay
so setting that and then we're just
going to add the edit class so once
again caching the L the Li right here is
a great move because I can do several
operations and I don't have to search
the Dom each time so let's see if that
works hit edit and awesome we populate
our two values and we turn into edit
mode which means our save and cancel are
there let's go and add our cancel item I
can actually copy and paste because this
is probably a lot more similar than
anything else
cancel edit and then all cancel edit is
going to do is remove class edit so I'm
just going to grab that Li again remove
the class of edit let's see if
works edit cancel edit cancel nice so
that works and my semicolons there and
then the last thing we need to do is the
save operation so here we go
same thing orders what did I call that
save edit is the name of my save button
so when save edit is clicked I'm going
to have to grab those two values and put
together my put request let's just do a
very similar thing to what we did here
order equals name and in this two in
this case I'm actually going to grab the
Li kind of same thing I've been doing
and then going to go Li find input Val
so there we go I'm going to grab the
value of whatever that input is and
order will be the same or drink will be
the same way drink will be grab input
drink have the value for that so there
we go I've got my order put together
let's post this thing to the back end
I'm going to do some copy and paste to
make it a little easier this is going to
be a put request and instead of posting
to a clip I orders we're doing a put two
API orders and we're also going to add
the ID here so this is going to be let
me make this easy I'm going to add the
ID here there we go
love moustache templating makes it easy
to throw stuff in there so now I can
just go li attr data ID so there we go
we've grabbed the ID off of what that
entry is we're going to put it to orders
ID we're going to pass the order object
and on success we are basically going to
populate our values let's see what's
going to happen so when we hit save we
change this william i hit save
i can't just go back to here because
this span now needs to be updated I'll
show you over here in the HTML we've put
a new value in here when the
Dave comes through is successful we need
to take that value throw it in here and
then take edit off of our edit mode so
that's easy to do we're just going to go
I find a span if I can type span name
HTML is order name there we go
I'll do the same thing for drink and
then I'm going to remove the class of
edit which I think I have right there
and so get that edit class removed and
then err let's do error updating order
there you go let's see if our API works
refresh so I can go will I am
save what not right click and there we
go it's saved let's look at our network
to make sure that happened we did a put
request API slash order slash one got a
200 ok on that and if i refresh it
should say william instead of will
awesome let's change it back to will
change my order to a frappe i keep right
clicking for some reason there you go we
got it so i know i kind of sped through
that may need to re-watch it again
that's kind of how you're going to take
your templating to a higher level that's
how you're going to add it put request
and that's an easy way to toggle any
kind of visual thing into an order mode
is just add hidden you know hidden input
elements and then toggle them on and off
so hope you had a great time watching
this and catch you around</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>