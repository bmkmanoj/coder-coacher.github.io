<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2016: Miodrag Milanović “The MAME story: From C to Modern C++&quot; | Coder Coacher - Coaching Coders</title><meta content="CppCon 2016: Miodrag Milanović “The MAME story: From C to Modern C++&quot; - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CppCon 2016: Miodrag Milanović “The MAME story: From C to Modern C++&quot;</b></h2><h5 class="post__date">2016-09-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wAUnUWYaA5s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome everyone I'm glad to have you
here in this big number I would like to
start presenting my talk okay first I
would like to introduce myself because
I'm not a regular speaker on the
conference's so I'm working as a
software developer from October 2000 I
have various experience in C C++ Java
and the reason for that is that I was
working in outsourcing company and that
company is only by 9:00 Serbia and from
April 2012 I'm the coordinator of main
project meanwhile I was you know trying
to do some changes in how the leadership
of the project functions so we are now
having the technical board which I am
member of and there are five of us which
are actually leading the project so who
we are there are about 50 active
developers working on this project and
we have additionally over 200
contributors that are also helping us to
gain the in emulation so team contains
of experienced developers we have some
people from gaming industry but we also
have people that are from other
industries or just emulation enthusiasts
community community is rather big it's
you know assists of the developers from
the different experiences and we have a
lot of contributors coming from
different backgrounds mostly they're you
know interested in gaming development
but not all also we have the great help
from software dumpers
and they're helping us preserving the
software in general so those people are
you know mostly enthusiasts trying to
find some old software or that they find
some board that they are not aware but
is about they just dump the ROM on sent
it to us try to find some documentation
and thus images and try to help in any
way so they also have documentation of
errors and they are really of great help
and they've helped us in a way that they
provide us with the documentation for
specific parts that are used in the
hardware or some software documentation
anything that could actually help us
also we have a lot of testers all the
users of our software we think that four
of them as a testers and there is a
great side main testers which enables
you to enter your bug reports and we
loop that all the time and try to fix
and help people so what is the main when
I supply this talk I didn't put the what
is all about so I mean the reason for it
was that I was planning for talk to be
more about general ideas of
modernization and keeping with the
legacy code alive
but at the end I came to make sure off
of things and ideas that I would like to
present here so name is aberration for
multiple arcade machine emulator
it's a project that was started by our
friend from Italy
Nicola so Maria and he started that
project in 1997 project was initially
for a dose and it uses Allegro library
for graphics output had a lot of
assembly language in it and also had it
was written in C so in parallel to that
about a few months later mass project
started as a sister project messages
operation for multiple the emulation I
mean it's it's never actually Hector who
had you know but it was really a mess to
keep it running go ahead you know so
that's one of the reasons we have to
join decided to leave the name of Maine
and me you know both for for us is
preservation of software of any kind and
that's why we afterwards acquired mass
and we try to put all devices up to
emulate all devices that have CP on them
and not just that and we placed goal to
be accuracy over performance so that's
one of the things that people don't like
about our project I'm very that we're
all aware of that but the issue is that
we as we have a main goal preservation
of software we need to preserve it in
so that everything is looking as
authentic as possible
only way to do that is to put accuracy
over everything else it's not that we
don't care about performance we care a
lot and we try to improve that and one
of the reasons why we moved to C++ was
mainly to make things clearer for us and
to enable us to produce you know more
performant code since we will you know
just remove all the things that are not
you know it's so important and we will
see the problem itself so we can be
strictly see where the performance
problems are so there are of course a
lot of misconceptions about our project
so it's not made for you to play the
games for free that's definitely bad
it's what most fortunately main is not
game itself I mean we sometimes have bug
reports I think that would be nice you
know just to have this one this part
here in this game and we said we did
that game I mean it just emulate that
it's nothing we can do about it it was
seen for a long time as a way to sell
new arcade cabinets and a fortunately
that was one of the reasons why we
started with the license that prohibited
commercial use for our software because
most of the commercial uses was the
people who made a cabinet put name on it
put illegally acquired roms on it and
solve that and so that under our name
and without anything giving back to the
community so it's it is the thing that
we actually needed to so we have the
trademark
the name name so essentially you should
you could not you know sell something
under that name without first consulting
owners or but you know people basically
by selling the hurt are breaking so much
other Louis so this one is is really not
applicable that way so for enhancing
games but you're changing in a way that
we help you to preserve the look and
feel of the games so recently we start
adding support for you to be able to see
how actually screen looked like on the
CRT monitor why preservation of software
is that important well companies
software I mean they release some things
and then they release a new version and
you can find a new version and they just
delete the old and they have their you
know our tips but they don't I mean it's
it's really hard even for them to find
some things there and things get lost of
course I mean it's just that popular
software is all over the place and when
5-10 years comes you know things get
lost
storage mediums are reliable
you know the software for 70s and 80s it
was mostly on cassettes these kids so
it's it's a bit unreliable medium
especially for Porter inch discs are
quite easy to break so yeah it was
unreliable in any way even the current
CD ROMs you know you right you you can't
read them for after a year or two
and it's for us it was just that it was
just easy to find software is good well
known but what about things that are you
know also good but you know not were not
popular in that time it's also not
possible to buy software I don't know
there are a lot of Microsoft guys fear
could I buy ms-dos right now I don't
think so and I mean the problem about
legal things is that you can't buy
something but you also there is no other
way for you to acquire it and we try to
keep this on a legal grounds we do not
distribute any of these we just you know
trying to find it
in texts all the software if it's wrong
down it's much easier you know it's we
put the crc32 and sha-1 off off roms
also the size so you can you know have
one-to-one to the real hardware but
about the floppies and cassettes it's a
bit trickier because there is no
universal format how to store them so
that becomes a problem but people like
me to be used for well we would like to
you to use it for to learn about the old
hardware you know to understand to
understand things from the past to be
able to to develop new software for that
old hardware because the thing that you
can do now is that you can have a really
good development tools even for the
those old CPUs and you now have a you
can use meme as debugger you can create
your even your virtual machine you know
different one so you know you have the
parts you would like to make your
the way to do it is just to play inside
the source and to create your own
emulation of of your imagined machine
and I think it's it's really good
practice ground for the new C++ features
because call this rather big what we
don't do we don't emulate recent
hardware if it's not of course permitted
by others thing is that we also do not
support recent software also less
permitted but think about software and
hardware we try to keep that three or
three year old rule so if something is
out of and I mean end of production was
three years ago
then we can you know be sure that there
is no financial impact to the other
software developers because we are also
software developers we care about other
companies I mean we don't wish to make
them trouble we wish to for arcades to
live we had some issues I mean in the
past for example we gave company from
Japan and that produced arcades and the
emulated board it was about 10 years old
we show no problem and we put on our
site there is a line that which said if
you think that our job is in conflict
with your job and we do remove the
emulation for that it's not a problem at
all and it contacted us and we will be
removed everything from posit or ease
and there was really not a problem but
thing was that they were still using the
same hardware from 10 years I mean it's
not they were also selling rights of it
that that's the other thing but they
were selling rights for the same game on
Xbox 360 but that's different platform
it's not that software
in general but after a few years they
just disappeared from that part of job
so basically it was there was no problem
for us to put that back so if there is
anyone having a problem with healthy I
mean we are always ready to talk and to
remove any part of the emulation that's
problematic you also and also we don't
try to improve how things can work so
that's already described so what we
actually do we put this into this and
yeah that's the die shot from 6502 and
that was made by a visual c50 two guys
and there is also other side silicone
prong they make a lot of dye shots from
all CPUs and not just CPUs they made it
for the sound chips video chips floppy
disk controllers you name it process is
not that complicated
but it's you know
Ausmus I mean you need to remove the
plastics and you need to deal with the
chemicals in order to remove the first
parts and to be able to get to the die
shot so what this helped is that we did
a pretend help us to build the cycler
accurate emulation for the 6502 so that
sighting is the only way you can
actually emulate undefined behavior so
just to look at the die shot to see how
it really worked to see internal
registers because those are not
documented to see the microcode you can
plainly see that if you know how to look
okay let's look at some of the current
statistics here is statistics for our
code so we have over 150 megabytes of
source and you can see that basically
most of the things are C C++ and C++
headers as well B also you can see that
there are comments a lot of comments in
code but it's we try to keep the source
code as a documentation for a specific
driver that we are emulating so it's
comments are really important for us and
I'll give you one more
it's a bit uptrending you can see this
is from 2008 problem is that Bieber I
mean we're on from 14 and 15 sorry and
before that we were at closed as when we
put our code publicly but only banned
your release time comes and you can see
I started to work as coordinator 2012
and you can see those erratic clients
start to hang up so I a bit as a people
pusher you know I like to you know put
some ideas I try to also lead by example
so I do a lot of things but then when
people start seeing you know you do a
lot of changes on that and that then
they start also doing that and it's kind
of fun especially for the open source
projects and you can see here how we
grow during the time
we started I mean just for the naming
convention I'm not sure can be seen
there but you can see just dates it's
still February of this year so you can
see how we actually grow through the
time so we start just four five
different emulators and then it's just
steady and we are now over 35,000 so
it's it's a big number
those are I mean you have to see it as a
different machines those are not all
different machines those are sometimes
same machine running different software
and maybe the best thing to take a look
would be those parent drivers that can
be seen here but go back here you can
see that there are 10,000 of files and
there is about 2000 of driver files
so you're basically emulating 2,000
different hardware configurations
different hardware configurations we can
say it like that but after that there is
a specific specific things that are just
for some machines and they're running
for arcades you have the fixed software
per machine so you can't change it and
that's the reason why we have over
35,000 okay let's move back so what are
the development tools we are using we
were using on Windows we have mgs2 with
min GB and also the support flag and
Visual Studio 2015
Linux is GCC and planned and on our six
support xcode and clank commercial tools
that we are using is
one of the things that you're using is
resharper C++ and it's really good in
combination with Visual Studio help us
to do a lot of stuff and since be able
to do new licensed which is open source
it was really easy for us to acquire the
licenses and thanks to the JetBrains
for that we also used PBS studio and the
reason for that is that they did the
analysis in 2012 about our code and as
you say you can see the link here but
it's software diseases about using map
sets and it was really really a big
problem for us and that's the thing that
was left over from the CD days that
produced a lot of things a lot of
problems for us and we use the
evaluation version of areas to do to fix
some of those but meeting we can use it
more why we do it well Jeff cases we do
things not because they are easy but
because they are hard and that's not one
of the I mean that's one of the reasons
why we are doing it but we are mostly
doing it for fun to be honest ok let's
see how MAME looks now this would be
some initial screenshot not that user
centric yes there's you can see that by
design and this one is new improve the
design so you can imagine the old one we
didn't have that picker at all so
everything was basically command line
okay this is me running 1942 game 92 to
1941 sorry and you can see the bugger
here so while running game you can
always see the debugger you can put
break
points inside emulation you can check
the memory you can see the log lines for
it so it's quite useful especially if
you are for example developing a new
software for that old hardware and we
are really proud to our debugger there
and it's quite my thing we are also
planning to do some things because we
used Lua internally for plugins right
now and I hope we will use it also in
debugger to expand it and to add new
capabilities you can see a computer
running here it's Sam - and you can see
the since it's still in work-in-progress
space you can see a lot of things
displayed on for debugging you can check
their what are the unmapped memory reads
writes so so it's easy for you basically
how you start you start by just putting
the roms for the machine and you specify
CPU and that's it you put the empty
address map that's about it and then you
see your log and you see what's going on
and then you recognize the patterns you
know you can recognize for example
initialization of various devices and if
you're not sure you know which one I
mean documentation always help but
sometimes you don't have a documentation
you have to find it yourself
so you just recognize patterns you see
how things work and then you try to
reverse engineer everything this is one
of the new things we do if you can see
one image the spot for me is displaying
how we actually you know display things
in the display memory so there are no
effects deaths default view for us but
here you have effect of these paintings
on CRT
so you can see a scanlines you can see
everything you're using shaders for it
right now
and starting to get cool you can put you
know burnout effect put a lot of things
and it's really looks nice and I will
see to demo it to you so just you can
see how it really works okay let's move
on to the topic why here he heard it so
how the modernization started well it
was you know Main Street project till
2009 and as you know the in that time
there was suppose was 11 of course so we
have to start with iron I'll start
moving into C++ it was C++ 98 well it
was afterwards converted to all three
version which was supported by the
compilers event at that time and since
last year we are trying to move to the
moderns it was possible and what are the
reasons for doing that well it was our
biggest problem was that it was really
bad better learning curve for all of us
even the developers who worked on the
project so we couldn't you know
understand how everything is connected
so if someone left the team and it's
quite usual when you have an open source
project that big running for 20 years it
was hard to maintain that also we didn't
find interest in new people because it
was too hard for them to tread our code
so one of the reasons was just like
let's move to something that is more
people that they can understand they can
use they can see how it's working and
also we had a problem you know that
there are a lot of mobile things in code
usages of some parts of colburn you know
you were not sure that it will run if
you have two instances of that
that was quite bad and we ditch the
habitus kotas documentation that's our
we our documentation project after all
these are just first steps so we first
compiled our C code as C++ and let's see
what happened she post passes more
strict and we got a lot of errors and
warnings in our code just due to that so
we also put the treat warning is error
so that's the rule that sometime I mean
it's hard to apply but you need to do it
anyway
and there are things that are just you
know very hard to make compiled on
multiple compilers same code without any
warnings so due to some I mean
differences just how the things work and
we made some exceptions for that so we
disabled fill all the warnings but it's
not that large list and also do you try
to use multiple compilers on multiple
platforms just to prove ourselves that
we are moving in the right direction
object-oriented programming
well reason for using it was 12 we want
people to think in a ways to see the
code in the base how it's easier for
them to understand not for machine to
understand and that's why one of the
reasons why we moved to C++ so you have
various devices so if I have CPU it's
clearly a device and if I have video
chip it's a device so I can you know see
some patterns there and also I can group
them I can create interfaces so I can
see ok all sound chips have some
similarities so I don't put that in
interface and that's how we started you
know
and you know it's it's a way how you
express your thoughts
yeah it's object-oriented I think it's
it's it's it's a good way to just how to
you can document your thoughts and how
can you create what they're our first
problems that we that occurred to us
were that we had a lot of global
variables large number of macros we
still have macros and we had no tools to
help us from this so it was all manual
labor yes it's a team effort but we kept
it close just few people worked on
moving to the c plus plus and the reason
for that is that we didn't wish for the
project to stop during this period so in
that time then this modernization
started that was the part of the mass
project not the main project and error
Giles was reading the name so after each
release he did a lot of changes he sent
me some rag acts he used in his code and
then I do that thing on the math side
and we tried to keep that you know
aligned and just to be easier for us all
to maintain but what we have learned
there is that when you have some
deprecated part of code you just need to
remove it right away you know after you
remove last usage of it because
otherwise people will keep using it in
the future and thing is that you can't
sink you know more than 50 people that
easy especially because they're on the
different parts of world we also try to
keep our track or our changes just so we
can communicate
to each other and also you know it's
it's a you see it's 150 megabytes so if
you just change one thing that is
commonly use it will take you hours just
to do that and we try to afterwards
after all changes between our code
reformat it so it's easier to maintain
other words to them you know we used as
I said radix mostly and I created a lot
of custom made tools just to recognize
some patterns for me and to replace text
that was basically it
but after last year we tried you know
gonna be moved
modern C++ we had really great helper
client ID and we use this to help us you
know just do some automatic work for us
and it really helps I mean you need to
recheck everything afterwards but it
helps a lot it catch most of the uses so
during that work what we have found that
we are missing something so they created
some things for us we created make unit
clear and why is that
it's thing is that people forget to
initialize variables and that was the
most common thing on all devices or
driver implementations and what we did
is that we added this one so it's quite
you know simple and you are actually
just mem setting everything to zero
before you after you allocate and then
you create object on that part of memory
so you have everything initialized to
zero and that really helped us you know
to get us some time so we have enough
time afterwards to clean up our
implementation also Varick templates
helped us a lot because they just you
know we
moved a lot of boiler port and there are
few examples here I mean this is for our
delegate implementation I'll talk about
it later but we needed to have this
delegate traits for each and I mean we
had for example up to eight parameters
allowed so we need to have this kind of
code for each number of types so and the
same one for second con stacks per that
was the great one to remove a lot of
defines in our code and here you can see
how it works you know it's it's a bit
specific for our usage because we we
need to execute our code and for example
different engines of CPU that we are
running but also we have antennas of
view that we are emulating and then you
need to convert the proper one during
that time also we have those custom
operations we use it you know just to to
recalculate everything during the
compile time and it really helped to
improve there are also new features in
added in C++ 11 that really helped us
and what they have removed for us a lot
of assembly and code space that is
specific for a specific operating system
and but there are a few things that we
couldn't be able to remove and those are
allocation of memory for execution I'm
not sure you know this is the
implementation for Linux and windows we
have the directory compiler in our code
and
need to allocate memory in order to
generate code so we can execute it you
know we do it on run time so that's what
we are using right now in order to do
that there are things that we wish to
use there are qualities of course and
one of the reasons is the wait States
CPUs Peters are actually working that
way you just block yourself until you
get the data and that's exactly what is
does and we have experimented with one
library time ago but we get bad results
just because it was tactful in
implementation he was crashing however
you know because we have during the
execution we have a large all devices
can you have a large stack allocation so
that makes things harder for us also we
would like to use modules right now we
have really long compile time its latest
harder and that's slow for us I mean
thing is that we used some things to
provide to make that faster but you know
it's still still very slow and also they
would like to do it yourself
I'd have tried some tools for static
analyzers but probably we will just
start using GSL as a header file and
latias and from the taps idea we would
like to make our Android build fully
working right now it's working but not
that good
we don't have iOS support we don't have
a console builds and the reason for that
is mostly a legal thing because we can't
acquire that
licences for the development because we
are not the company we would like to do
to run it on the VR system hollow lines
and things like that I mean it's not
just that we are going to do that we
would like to others to do that as well
you know and the reason is why wouldn't
you like you know to put your set and
just go through our kids and play game
select the innovations top it it's it's
it's cool I mean it's how it you know
you will remember your childhood and
also what we wish is to try to make it
more interaction with real Hardware so
if we emulate something we wanted to be
able to connect to the outside world and
to work we have the networking support
it's working I mean you can you know
start them always Mac OS emulation for
the Motorola era or you can start a PC
computer with Windows and you can browse
on the internet it will not show you
much because we don't have the
JavaScript support but it will work we
to prevent to help us with we used GE
project generator and joonie project
generator Abba we have a lightning talk
on this tonight so I would be really
quick we use it because it was you know
it could generate all for all compilers
that we are targeting it was based on
you old one and it was really easy
extensible and it enables us to create
smaller custom builds so for example I
could make I could say okay create me a
built just for Commodore 64 and I don't
get just Commodore 64 and all related
you know devices that are needed for
compilation so we have some magic there
and this is how it actually looks like I
mean it's quite simple it's easy to
to fall you know what it's doing so that
was the main reason why we use it okay
let's see you on a small example how
many actually works you have I used a
really small example you have you're
just a state class to represent your
emulator there was a dummy output okay
you have the address map here and you
can see in address map that it's a bit
adders map and you have the wrong at the
beginning and you have a small amount of
the front here you have IO ports
connected you have that a B right which
will lead you to the to the other it's
using delegates here I will explain what
delegates are and since this machine
doesn't support input here there is
empty input definition and you have just
the definition of parameters needed to
make good default configuration for
errors two three to configuration and
you have here machine configuration
which will define which CPU is used and
you connect here the memory map IO map
you put some callbacks here and at the
end you have the ROM start this is the
place in which you put the what are the
crc32 and sha-1 of your roms and you
have just the definition which will help
you find it and that's about it I mean
it's it's quite simple and you see that
it's mostly backroads and the reason is
we try to to make it more look like
documentation which describes the
machine and not C++ code
and that was I mean if you take a look
at the device implementation that's
between suppose what's code there is no
things like this but if you look the the
emulator called it's about this and I
mentioned delegates what are the
delegates if you have been on the
include OS a presentation you have seen
they're using them also and I didn't
know that so they're using totally
different start point but basically idea
is same you have some class here you
have the type definition here just to
the player for the callback delegate and
you create we use some macro to help us
for the code to just to look nicer so
you just have this funk which will take
you the class and you can split the
class and what method you are calling
and you could be lookin connected it to
the instance of class you are calling
and what we need delegate we need
delegate because we need to provide
callbacks and we need to do it after
sometimes after initialization so it's
it's a it's a bit difficult sometimes
because you actually are not sure what
is connected where until everything is
initialized so you need to have that
laid laid by and it's really a minimal
cost because it's using method function
pointers and since this was implemented
the period of suppose was 98 it had some
strange things in it so we cleared it up
and we moved it to show you the example
with templates we use now variadic
templates we cleaned up things and also
we have moved moved it so it can work on
the arm 64 it can work on nips in
various platforms
and you can see here that you have
basically mostly about two times speed
then using the sed functional fine and
yeah that's that's about it I mean I
would not go into much details about it
if you're interested there is you have a
link here it's public you can use it you
can try it we have also a lot of
third-party libraries I will just
mention four of them one I will start
from bottom up geomod I think it's
really interesting and it helps a lot
with adding support for the 3d hardware
and they are actually doing the
calculations ourself when we are
emulating for example voodoo card and we
are working on emulation of model to
machine then we need to do calculations
ourselves and to do that we right now
using geo map we start using it just a
few places but I think we will move on
we use for plugins and the reason for it
is that people would like to have some
things that we considered harmful like
support for the things like high scores
which can affect the emulation itself so
we can't officially support it but you
can use it use a plugin for it and you
can have a high score support on
machines that didn't say there states
also we are using rapid Jason in
correlation with VGA fix that is a
graphics library and media fix is app
agnostic so and support a lot of
rendering backends and reason for using
it is that we would like to see for you
to see that those effects
you know on each and every platform but
we also do not wish to create a large
boiler plate of our code you know to
have support for OpenGL to have direct
export because we are not graphics
programmers we are emulator guys and
thing is that it also support a lot of
you know platforms so everything that we
actually need to support is there even
more and this is how it looks like and
if you have worked with the shaders for
the OpenGL it's almost like that
and it can transpile into metal support
you can spot directives so you did that
before you know it is the part of
compile in the compile time and you have
that up and running okay what we have
also learned this make your own code
public you will get better feedback from
users you will be able to do a lot of
cool stuff and we moved to the github
just because of that so we can better
communicate and also it really moved our
pull requests a lot we're really
grateful that we have done that why
should you join the open-source project
well I think everyone should you know
join at least one just to share your
ideas you know you all have different
ideas how things should be done you
would like to I mean you can experiment
there and you can improve your knowledge
you can learn from others that's you
know most important thing and also you
can meet a lot of people learn from them
go to conferences and things like that
yeah so it's it's really cool stuff what
we dish to offer to C++ from our side
well we gained a lot of experience
especially with
using these delegates callbacks so I
think we can create a proposal for such
thing I think I did it already but I was
not presented when Cole was there I
didn't know about it but never mind I
mean I didn't mean it made an official
one so well we would also like to help
input chandran based on these delegates
so for that is mostly for the other
study group that's now not just about 2d
graphics but also about the inputs and
also I think we will be good playground
to test this mat for 2d and 3d graphics
because there are a lot of things going
on and I think is that you know also
runtime shader transpiling it could be
interesting to join in and let us be
your playground you can all join and we
can all play together it's a sandbox ok
I would like to make a small demo for
you I know you will be waiting for this
but yeah I mean for the timings question
was if is RAM emulation was that
accurate and well this thing is that we
are now basically it's not that accurate
you know because that part is not
implemented like that but CPU emulation
speed is real it's really want one so
other things than that you would for
this we would need to work on it to make
it you know just want one with the
reality but thing is that for example
for the sound it's really important is
are really important and otherwise you
will get wrong results same go I mean if
you're emulating latest hardware it's
it's
easy I mean they're using you know a lot
of chips which are well-documented it's
not that hard but if you're emulating
some old hardware that was cheap they
probably use some tricks to get things
on screen so actually what you need to
do is you need to emulate all the tricks
that they have used in the back and
that's that could be really have a job
so let me just do one I always do the
wrong one
okay well let's see well because it was
a Commodore 64 I would like this show
you the other machine it's a spectrum
and if we can do something like this
just a second and you can see if this is
not the really good P because the
emulation of the CRT gives it but it's
how it would look like and if I through
and if I go and do this this is our
internal menu so you can go and change
some parameters which we are using 2d so
if I play a bit with some parameters let
me see this one change some colors
fact here see and you can get a really
bad TV connected to your machine so that
was basically intention
and you're probably looking for the real
gamers I will I will wait without the
effects just to to get a little time
speeding don't tell them please okay put
this one and if you can insert coins and
we can start playing games so anyway I
am really bad at games I don't play them
much and I just would like to know how
they work and to make them work you know
and it's a oh sorry wrong but ah excuse
me it was the wrong button while we are
here I would like I will probably need
assistance from Jason it was right
okay here you have a debugger running so
I will show you like with that so that's
more so please Jason it's sis which
number 14 96
so you can use that and you can play
your games and the good stuff is here if
you wish to do debug things you know you
can go to the memory and might I mean we
can large that but it's a it's a bit
hard and on this keyboard but anyway you
can go through the memory and watch for
the states of each devices you have here
and it's really it's really helping you
to get into into in to be able to
develop for such an old machine okay
let's then move to the questions if you
have some well we have regression tests
but regression tests are done on a
specific way I mean we we we don't have
the the testitude for the just doing the
code jacks you know because it's a it's
a thing that people do not like to do I
mean that's sometimes it's hard because
you need to test something that you know
you don't know how it's working so how
would you test it it's it's it's a bit
tricky you know you you you need to I
mean if you have good documentation then
it's easy but we have integration tests
basically and what we test is just
looping through the usual test cases
going around and checking if there were
differences in execution of those if
there were crashes especially so we say
the back traces and also we do if there
are differences in school
for example after 20 seconds it must be
perfectly same you know and if there is
a difference then there is probably some
graphics issue and sometimes is expected
because you've changed something but we
need to confirm that the question was
can be play also 3d games or is it just
for the shaders we have emulation of 3d
games but we don't use the great
graphics capabilities of your GPU right
now thing is that there is a great
difference between hardware and pasta
now and we would actually need to do the
mapping between those to make it work
the same and one of the things that we
are waiting for the VGA fix outer to
work a runtime transport transpiling of
the shaders so we can actually do that
so that's right now we are only using it
to to improve your you know to improve
the display yeah the question was what's
the most you current Hardware be
emulating today well we can say it's
it's it's easier to texture from this
pentamirror we do not like to get the
legal issues you know and that's I mean
there are a lot of big players there and
we do not wish to I mean there are still
games sold for the ps2 and we do I mean
they're made by sometime and we do not
wish to break that and we do not wish to
to have a problems with big companies we
would rather like them to take this part
of codes and use it internally if they
wish and we will be sure to help them if
they wish to but thing is that yeah
we also emulate you know mostly from the
mid 90s let's say there are some from
the 2000s beginning of the 2000s with
let's say the last period of time which
we emulate gudiya the question was how
does the switch from the C to C post was
help us develop for the new harder well
it helped us in a way that we were able
easier to develop new emulation that's
for sure because we were we were able to
see patterns and to extend some things
and it was easier for us for example to
to emulate some video chips which had
slightly smaller differences and you can
actually see that in code so it's easy
to follow and also it helped us to
develop for the latest hardware in a
sense that hardware that we are running
at because we gain some speed because of
the
optimizers are good at optimizing code
that is made for the c++ you know it's
after all if you are using C code and
C++ compiler it probably will not be
that good optimized as because this is
their major you know any more questions
the question was for the PC emulation
there was temperature sensors saying
that it's zero and is it emulated or not
no it's not family
and think that I'm working right now is
gathering all the board information and
biases for PCI era of PC computers so
I'm trying to get that get it running so
probably we will have about 5,000 more
machines anyway quite soon yeah but it
will it will take a lot of effort I
start to build one machine for myself so
I can experiment I mean that that's the
only way you could actually see how it
works well if there is no more questions
I would like to thank you all for your
patience and I hope you had a good time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>