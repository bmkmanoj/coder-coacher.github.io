<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2017: Erik Valkering “Post(er)modern C++” | Coder Coacher - Coaching Coders</title><meta content="CppCon 2017: Erik Valkering “Post(er)modern C++” - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CppCon 2017: Erik Valkering “Post(er)modern C++”</b></h2><h5 class="post__date">2017-10-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Z9JabkvQSi0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">- [Announcer] Talk to a therapy.
Okay, thank you, so I want to
discuss a simple toy example.
Lets say we have this piece of
code, with factor of strings
we push back on several
values, we reassign a value,
we iterate through it and we print them.
Very simple, now this will be the output,
then we have an exercise, we want to print
an exclamation mark, every time
we existed, member-function.
So how can we do that?
One solution for that is
by using smart pointers.
For example we can
define the class template
inspector in which we simple implement the
output operator arrow and
the dereference operator,
we print the exclamation mark
and we forward to the member-function.
Now, that gets the results we
need to update our code a bit
so this becomes the
inspector of the vector,
then we use the arrows
okay we dereference it,
a couple of asterisks, no
problem and it gets our output.
But I don't like this code, there are
several problems with it.
Yeah, it's basically a mess,
we add a lot of noise to it
this is quite a few
codes, couple of lines.
So yeah imagine you have a
code base of a million lines
of code and you need to
propagate these changes
everywhere that yeah, won't
work, and yeah it's totally not
generic because if this type
would be a normal vector then
you have value semantics,
and suddenly we have
pointer semantics so that's not
the solution I would really recommend.
So what do we want?
We don't want pointer semantics
but reference semantics
so we don't want to operate
the arrow operator but
yeah, talk operator if
that would be possible.
Well it seems there are
several proposals in the make
one of them is the operator dot.
Synthetically it's very
similar to the arrow operator,
instead of returning a pointer,
a reference is returned
so also here we print the exclamation mark
we return the object and yeah.
The member function is called.
Another proposal is smart
references through delegation
which works a little bit different.
You start inheriting
from the delegate object
so in this case, std vector of string.
You only inherit the public interface,
when you call the
member_function then it tries to
convert it to the delegate object,
the vector of strings so
it calls that function
and then it brings the exclamation mark
and returns object and forwards
to the member_function.
So those are two proposals
that will adhere our use case.
But these are proposals,
you know okay they have many
use cases, so it will
solve a lot of problems.
Like rebindable references,
decorators, properties,
we can implement a lot
of it and yeah probably
this list is incomplete.
And I expect a lot of people
will have other use cases
for it so, yeah you can
let your creativity go.
But when will it be
available, and the question is
will it ever become available?
We will now get metaclasses not in C++20
maybe not even 23, we don't know
and it might not even be
necessary this feature.
So you know, what should we do?
Should we wait for it, because
yeah I would like to use
this now, but yeah we don't
have this language feature.
So I was thinking about this,
so I took the design of this
paper and I thought can
I do this in a library.
So I tried several things
and I created this library
the smart ref library, it's
header only, zero overhead
library for creating
these smart references.
And the only difference
is three characters,
here I highlight it, you
inherit from clause which
provides exactly the same functionality.
So, then it becomes this.
(beeping and applause)</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>