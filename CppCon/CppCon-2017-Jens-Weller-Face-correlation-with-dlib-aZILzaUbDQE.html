<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2017: Jens Weller “Face correlation with dlib” | Coder Coacher - Coaching Coders</title><meta content="CppCon 2017: Jens Weller “Face correlation with dlib” - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CppCon 2017: Jens Weller “Face correlation with dlib”</b></h2><h5 class="post__date">2017-10-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aZILzaUbDQE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Wonderful, here we are.
So I thought instead
of doing boring slides,
I'd do a live demo and show you some code.
So, my problem is
I have lots and lots
and lots of pictures but
don't know what is in them.
And that's why I was looking
for some machine learning
solution which lets me
look into what is in the pictures.
And as you know, I have a conference,
lots of people so I
decided to go for faces,
and Dlib actually has pretty
good support for that.
Dlib.net is a library which I'm using.
They have like a ton of
features and machine learning
and I'm just using their face recognition.
And this is basically what got me started.
Where they can match the
faces of these people
to a group each.
And that is what my
application is now doing.
With the conference photos though,
this is the first runner
which just goes through
every picture and gets
every image out of there
and does put that into a map, et cetera.
And then later, this goes
into a cluster runner
where we have a newer network,
which comes from Dlib from
the example which just
correlates those pictures and
gives them a value and some
N dimensional vector space and then
matches those images and
groups the pictures by
a call to the Chinese Whispers algorithm.
But this is also kind of
boring to see in code,
so let's do a little bit of
presentation of the actual program.
So as you see here,
some pictures with all the faces on it.
One thing you can see here is like,
if the faces are too
small it doesn't find it.
And there is an optimization for it,
you just blow up the image
by the factor of two,
where you'll have four times as much data
and you can detect images
and faces which are smaller.
And I can sort by the number
of faces, as you see here.
So you also get only the
pictures which a lot of faces
on top or on bottom.
And I also can sort on the
face area in the picture,
which already has some interesting results
to get either pictures in
one or the other group.
But actually once I have the
faces and the face correlation
I can actually group the
faces which are in one group,
and as that are usually the same person,
you have to play around a
little bit with each image set
to get the perfect result, but as you see
it's pretty good with grouping people.
And one plan which I currently don't have,
I have not kind of, although
this gives us a social graph
because I know every face and every image,
and I know which faces
should be the same person
and then I could kind of draw a graph
between connections between the images.
And I did that in the past,
in a similar fashion for
the dependencies in Boost,
and this is the void application
it says the UI you see is built with Qt,
and I have still this frame where
we just have to teach it to display images
and then I can basically get the graph,
of which I already currently
have in the program
and display it but I
haven't done this yet.
And with that, let's go
quickly back to the code.
So, I think you have heard a lot
about Qt this morning already.
And this is actually some code which
uses Qt as the front end for the UI,
because we still don't
have a modern C++ UI
which is cross platform and usable.
And one thing which Qt
really likes to do is
it makes you sub-class
all kinds of things,
like this is a runner
which is actually runable,
which runs in the set pool,
and you have a sub-class
for each runner class.
And you get to write boiler plate code.
That's exciting, and we all like that.
And then I thought,
well maybe I want to
do this with a lambda.
So this is kind of a
std:function currently,
probably can improve on that.
But Qt also has some dependencies on this,
this can not be a template
for example, because of Qt.
So at the end I have the run function
which takes the Qvariant,
I assert that the task is actually there,
then I run the task, I
get the return value,
and I emit the finished
call to the user again,
if they subscribe to the signal or not.
And that's what I use now in my code
for plugging in all kinds
of runables at the end.
This is a code which actually
does some other correlation.
I also tried to correlate
this histogram data,
but that doesn't work
currently as I want it to work.
Though faces are currently ready to go,
probably also going to try
in some image analyzers,
which one thing I see is like
the back of a hat is
interesting to me to take,
because a lot of images
are like showing people
looking at slides of something,
and you only see the
back and not the face.
And with that, I'm thank you.
(audience applauds)</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>