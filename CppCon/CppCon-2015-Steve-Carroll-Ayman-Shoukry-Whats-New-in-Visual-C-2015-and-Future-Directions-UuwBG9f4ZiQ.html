<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2015: Steve Carroll • Ayman Shoukry “What's New in Visual C++ 2015 and Future Directions” | Coder Coacher - Coaching Coders</title><meta content="CppCon 2015: Steve Carroll • Ayman Shoukry “What's New in Visual C++ 2015 and Future Directions” - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CppCon 2015: Steve Carroll • Ayman Shoukry “What's New in Visual C++ 2015 and Future Directions”</b></h2><h5 class="post__date">2015-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UuwBG9f4ZiQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">is how many people are actually on 2015
already okay all right
2013 all right okay good so so some of
you or this is gonna be yeah it's gonna
be like finding the cool tips you didn't
know about and some of you it'll be like
mmm I wonder if I need to do this and
then I have to sell you two I got it
all right my mission is clear actually
one during 2010 I was afraid to ask
oh all right so like no I know I don't
know I even worked before 2010 well let
me ask this one vc6
okay so here's the deal
three weeks ago me and andresa our test
manager were in China and Taiwan and
walky going around and meeting with a
bunch of customers and trying to get
them to upgrade to 2015 not so different
than what I'm doing right now and when
we would go in there we would see it's
like modern laptops you know like this
thing here which I love running video c6
v c6 but it screams I mean I'll tell you
that it's it's it's really fast yeah
yeah running VC on on Windows v c6 on
Windows XP yeah that's the thing most of
them were actually not developing on XP
at least so that was good we'll talk
more about XP in a few minutes don't
worry talk
are you smoking yep okay
okay I'm gonna break with tradition I'm
gonna start on time but that's about to
one minute from now
that's what are you full of energy you
have to be full of energy for these
these people got up early to come see us
do I feel all right and I will what
we'll try to get the slides up real
quickly so that you don't have to do the
the phone thing and you'll if you'll
hold me accountable for that right okay
there there is actually a bunch of
really nice discussions on on reddit
last night for Stefan's talk and herbes
talk and yeah it's tough the conference
around the conference is super cool oh
okay Wow so the clock is ticking and I'm
gonna go then hi my name is Steve
Carroll as we were discussing in the
pre-show
I'm the new debt manager for visual C++
this fine gentleman over here
yeah palm-trees myself I'm Aiman choukri
I'm the group program manager for C++
team so hopefully today we'll talk about
a little bit about what's new there and
tell you more of as well about where
we're heading from a direction even
afterwards so from that'll let you kick
off C right so I'm gonna do a bunch of
slides to show new things there's a
bunch of demo in this I'm gonna go fast
if I go too fast let me know I have a
lot of stuff I want to kind of jam into
40 minutes I want to make sure that this
is actually a broad tour whoa what's
going on that that's too fast all right
so we've established think okay no
seriously why is it doing that all right
so that's gonna be fun all right
to get started I want to talk a little
bit about what we're trying to
accomplish as a team just to motivate
like the features that are in here and
also the sort of future Direction stuff
that I'm is going to talk about towards
the end we want visual studio to be the
best IDE for every C++ developer not
just C++ developers on the windows
platform although we still love you
it's and in particular we're trying to
focus on making it a more welcoming
environment for people doing open source
development continuing on with that
trend we want this to be do we want to
help make C++ the language for
cross-platform development I'm going to
show you guys a bunch of stuff about
doing Android development and iOS
development inside Visual Studio we have
further and deeper ambitions in this
direction which will we'll talk about
later C++ development is on the uptick
all of our telemetry tells us this I
don't know if you've if you've read John
Calvin's book Y C++ there's some good
data in there but we get lots of
telemetry streams that tell us that yes
indeed the number of C++ developers is
increasing and a lot of it is driven by
Kross Platt and need for high
performance on little tiny super
computers in our pockets all right great
so we believe that while C++ may not be
known for its productivity as a language
that there are a lot of things that
tools can do to make your life more
productive I'm going to show a lot of
things in that area and we'll continue
to invest in that area and finally no
intro should be complete without us
talking a little bit about our mission
on conformance we have for a long time
been behind on conformance I'm going to
go through in some detail all the work
that we did in 2015 to help catch up I
want to talk and then we'll talk about
our desire to participate in the
standards body to make the language
better I think you've seen some examples
of that in this conference and then of
course we will stay caught up all right
now I'm going to push the button and see
if I can go only one slide forward okay
what no don't do that
all right saving the best for first I
would like to start by talking about but
what is perhaps the best received new
feature in Visual Studio 2013 and it's
worth pointing out that I'm going to
show you things in Visual Studio
2015 that are great for C++ developers
not just things that my team did a lot
of this is going to be me taking credit
for other people's great work this is an
example of that first I'd like to start
with my impression of the menu bar in
Visual Studio 2013 violated you etc
however we fixed that and in Visual
Studio 2015 what one of the most
well-liked features is we have camelcase
or the menu bar so I simply stopped
yelling at you so you know months and
months of development work at last yeah
yeah that was totally a plea for
applause and I'm glad that you noticed
that about me I'm desperate for
validation thank you
saving the worst for a second alright so
this is kind of an anti feature so I
thought I'd get it out of the way I'm
gonna explain the why of this when you
go to install we talked at the beginning
some of you have not yet gotten to
Visual Studio 2015 when you go and do
that please at the installation thing
select custom not typical I know what
you do is a typical day-to-day kind of
thing but on in Visual Studio 2015 C++
does not install by default it is not
because C++ is not important or we
stopped caring about it it is because
Visual Studio takes entirely too long to
install for most people and we are
making we are working our way through
making it more modularized it turns out
that we were in a pretty good shape in
terms of modularization of our modules
and so we were first all you have to do
custom set C++ and yes I'm sorry okay uh
that's really gonna be fun for the whole
talk alright this is things that are not
new these are things I hear all the time
that are not true number one you can
still target XP and visual studio 2015
this causes poor stuff in kilala why
much angst so you know please understand
that that is actually in the product you
go into the platform toolkit thing you
drop it down and you select the XP
toolkit it's it's always sad that we do
that work and then many people don't
know also at one point in the sort of
CTP 2
see time frame we talked about not
having Apple local deployment for our
CRT we changed that it's fine any way
that you could have deployed your app
with Visual Studio 2015 or 2013 is still
available in Visual Studio 2015 please
don't think that those are no longer
available okay I'm gonna start I'm gonna
start off I'm gonna do a bunch of demos
of things that are sort of language
agnostic and you can't see what I'm
doing so I'm gonna go in here and Kate
alright good beautiful alright first
thing I want to show you are some simple
like IDE wide kinds of things one of
them is may seem silly but like let's
imagine you are in a large auditorium
and have to be able to make sure that
people can read the code that you have
there are a number of touchscreen
enhancements inside Visual Studio 2015
and if you have a laptop with touch you
can do pinch to zoom you know no hands
on my trackpad I promise all the scroll
bars are actually lit up so that they
work well with touch this this really
does actually come in handy in some
scenarios another one I want to show you
really quick which is which is language
agnostics is called manage window
layouts or apply window layouts you can
set the windows any way you like them
and then quickly switch between them I'm
show you an example here I have on mine
sort of like what I call laptop mode and
docked mode because I use this laptop
for whatever development I actually do
as a twenty haired manager and so when
I'm in laptop mode I want to have the
size of my code take up as much of the
screen as possible so I smooth out the
the solution Explorer over to the right
there and make sure I give as much as I
want to the code itself
likewise you know when I'm docked I want
to have that back and you can basically
put any kind of arrangement of windows
save it and then quickly apply it so
there's a lot of uses for this if you've
used like perspectives inside of Eclipse
this is a kind of a powerful feature for
allowing you to
those things another thing I want to
show really quick when you install
Visual Studio and you go and you click
custom one of the things that you can do
is toss in the github extensions and
what that allows you to do is who hasn't
github account yeah okay so good I
figured you guys might want to use this
if you go in here and you click clone
I've got this already wired up to my
github account and you can see right
here I've got the JSON 11 thing and I
click clone with my finger and it will
go ahead and as you can see I've already
done that so it won't work but and we
have full git integration Visual Studio
it's dubbed development itself we're now
doing on top of git and so this is some
great way to do what I was saying
earlier about bringing making easier to
do open source development inside Visual
Studio so I encourage you to go check
that out pick up my slides ah
send a smile so this thing yeah I know
it's not much it's a picture of a smiley
face but I want to actually like assure
you that this is a situation where
there's another person sitting on the
other side of this I literally got
yelled at by a VP yesterday for not
having looked at this recently enough so
please we're getting excellent feedback
from the community on this we're taking
it very seriously if you're seeing bugs
if you're seeing other issues inside
Visual Studio if you just want to send
us a suggestion this is a really
lightweight way of not having to file a
connect bug and and we'll get that
information and we will be looking for
them I want to show you send a frown for
a second so you can say you know you
know what what happened here Steve you
know broke in and actually give us some
details because we'll get this string
but then when you click this there's a
number of record more info about these
and and I want to really encourage you
to do this when you go and do the Bucks
it makes them much more actionable for
us and easier for us to go and fix your
issues so for instance you can replay
the crash and get the dump and then have
it upload to us you can report
performance problems and we'll get a
profile it's really helpful we'd really
appreciate it if you would use this if
you're seeing nastiness we're updating
all the time
you know so we have lots of
opportunities to fix your bugs please by
all means let us know about them ok so
from that I want to switch in and start
talking about productivity features in
the IDE I'm going to show you both my
favorite C++ a new language feature and
my new favorite refactor and the tool
all at once as you can see this string
is obnoxious it's really long it has
slash ends and slash T ones in it we've
tried to add a bunch of newer factorings
inside of Visual Studio and I'm going to
do one right now see the little light
bulb if you hit ctrl period it brings up
possible fixes for that line of code
next to the light bulb I'm gonna do
convert to raw string literal uses the
capital R thing ah it's so much nicer
easier to read better in your code this
is like lots of these little tiny reef
actors can clean up code and make things
much nicer this next one I've helpfully
left myself a comment to remind me that
this is a gallery extension that needs
to be done but it's available up on vs
gallery which if you've not done before
you can get to from extensions and
updates' in the tools window and this
one is called extract function or
extract method in the gallery if you
search for it what it allows you to do
is like let's imagine you really really
really like pouring in
together and so you want to extract this
function out so it can be used in other
places i right-clicked i select quick
actions and I have extract function is
one of my choices if I click on that I
can give it a name which I'll call or
all the intz and then for summary Oh the
dot H file fell out of the project don't
worry about it trust me it works no it
does I will I will fix it I just screwed
this up it's the stereotypical do the
demo beforehand thereby screwing up the
demo extract function new function seems
like a fine name and then it it pulls it
out puts the name of the function into
the header a declaration into the header
file and then plops it into the middle
of the function so that and you can use
it call it from other places and here's
a new function
here is a function with a terrible name
it is called this is a terrible name for
a function this is another very quick
easy to use
refactoring available in the tool we can
right click on here choose rename or
control RR and I'm gonna give it a much
better name and now if I click preview
I'll get the ability to first it will
use a very precise intellisense based
way of identifying all the places where
it's use this is not just finding files
this is actually using smarts to
identify the places where it's being
used and I can see it gets all the the
roughs and the uses but it also gives me
the option of finding it in any comment
string and replacing it there or in
actual strings themselves and then I can
make fine grained control of them and
and hit apply and have it fixed and
voila
a much better name okay continuing on
with new refactorings in 2015 we have
one for that we call move move
declaration definition which will allow
me to push this from the CPP file to the
header file or from the header file to
the CPP file cool thing about this is it
will do it in the little peek window if
you've never seen it before the idea
behind the peek window is we want to
kind of keep you code focused we want to
drop you into a place and let you stay
there and so for instance at this point
I can go and make this an inline
function directly and I never have to
worry about this and I can just dismiss
it when I'm done
so that's that I'm gonna show you a
couple more here's an abstract base
class it has some pure virtual kinds of
things so I'm first thing I'm gonna do
is I'm going to right click on the
abstract base class and I have quick
actions again and what I can do is
quickly implement all the pure virtuals
for base my abstract base class save you
some typing not have to override each of
those and again it immediately pops up
the peek window if you want to do some
editing in the place where it's inserted
them but it's it's
the virtual overrides into both the
header file and the class file likewise
if you are specking out a class and you
want to quickly generate stub functions
I'm gonna go in here and I'm gonna
uncomment those lines pretend I just
wrote them now I can right click quick
actions create definition and and what
it will do is it will it will actually
generate those into the CPP file so that
then you can continue on with your work
and it will build and you have a stub
implementation so those are some new
refactorings inside Visual Studio 2015
peeking at my slides one more time
we rename extract yes yes yes single
file and tell us us all right so now
what I'm going to do is I'm going to
close my solution and I'm going to
create a new file single file
intellisense is part of our push in
general to make it much easier to use
Visual Studio in a place where you don't
necessarily have a project file we want
to make it so that you can go in and
file new a CPP file and have it mostly
just work so if I go in here and I go
funny with my mouse pounding clued
vector using namespace standard I very
quickly actually get Intel a sense what
we're doing it behind this thing behind
the scenes is creating a sort of empty
project that has all of the basic
include files set up this also works for
if you like go onto github using the
github extension download some code and
you just want to pop up one CPP file and
look through it you can do it that way
this is really great for just like very
quick intellisense on code that doesn't
yet build in Visual Studio and this is
an area where we'll continue to to make
it better so that's single file
intellisense all right back to the
finicky
okay another really useful new feature
is simplified template intellisense this
is fit and finish kind of thing but if
in Visual Studio 2013 if you hover over
the after the parentheses for W string
you get something that it actually
doesn't even fit on the screen right it
actually goes off to the side and all
you wanted to know is what were the
parameter names and what is the template
and and now we've done some heuristics
in order to make that better so I hope
that that should just be a light up in
your day-to-day work you should see
improvements yes I actually did spend
time going through the xkcd license page
to make sure to use the thing I can yeah
my favorite xkcd comic one of the things
that we think we can do to make c++ more
productive that just plain-old works is
tune the edit compile debug cycle let's
face it every day we spend way more time
making small tweaks and debugging and
and we want that cycle to be really
tight as I said before I used to be the
dev manager for the debugger and what I
always learned was you know people say
they write code all day if they talk to
Grandma right but it's not really true
you do stay all day is fixed you spend
five minutes writing code and then you
know the rest of the day trying to make
it work and and so what we have done is
tried to focus on build throughput for
incremental builds in this release and
so we went through the list of things
that were blocking us from doing a great
job on incremental builds and tried to
fix them one by one some of the things
are kind of global like one of the
things we found was some some error some
some inefficiencies in our template
processing that we fixed and that
actually made a big difference that
works in full builds and incremental
builds but we also found that we were
mostly blocked on linker and on pvb
generation those were the two big
bottlenecks for our build throughput so
we created the slash debug fast link
switch this basically allows it to
rather than having to wait at the end
and elaborate all the PD B's there are
links to the sub-q B's that get
generated so that should make a big
difference it's not on by default it's
available in the project properties it
conflicted with another
feature so by all means if you're not
seeing the gains that I want you to see
and your incremental build go in and set
that switch in the linker flags slash
debug fast link also the linker is now
capable of doing incremental links for
static libraries this is actually what's
largely - thanks for the gigantic
increase in Kinect Sports rivals Kinect
Sports rivals team came and came to us
and said hey every time we make a change
and rebuild it takes 958 seconds and
we're like that ain't right so we really
dug into that and we managed to get it
down to basically 7% of what it used to
be in addition we've made several
improvements to incremental LTC gl TCG
is link time code generation or what our
claim friends call link time
optimizations LTO if you've tried this
in the past and rejected it because it
was too slow please try it again we've
we've made incremental LT CG much faster
it should work better let me know if it
doesn't and actually that's a meta point
on this whole slide we want to know if
you're seeing unusual build things if
you go and you install this and you're
not seeing any improvements an
incremental link please let us know
we've also published a auto PCH tool up
on the gallery that you can use to go
and look through your precompiled
headers and make sure it's well targeted
it goes and checks for things like you
know hey you're compiling this header
file a bunch of times why don't you move
it into the PCH file and of course
there's just a bunch of algorithmic
improvements across the tools and also
poco builds and instrumentation has been
significantly improved so you know I
don't expect everybody to go ninety
seven percent faster but in incremental
builds you should see significant
improvement if you don't let me know
full builds you can see we also saw some
improvements based on our permits -
template processing and we're going to
keep going on this in the updates ok
Diagnostics so back one more thing on
productivity I want to show you some new
Diagnostics figure features inside
Visual Studio so I'm going to open up a
Famicon tracker
oh I got to do that again all right
you're in charge of of that you can see
me now great back to the start page I
had all these pinned fami tracker open
all right so I'm gonna launch the app
all right so there are a bunch of new
Diagnostics tools inside Visual Studio
you can see one popping up right here
this is the Diagnostics tools window the
idea here is to get you live information
about your application while it's
running so for instance you can see I've
got the CPU utilization which is quite
low because I'm not touching it really
you can see there's a little tiny lines
at the bottom so let's say that we were
getting reports in our Famicon music
tracker application that we got leaks so
here I'm gonna do is I'm gonna make this
it you can see the the spike in the
memory when I do this right right okay
great so now I've got that report and I
can see right in there so let's say I
want to do something about that so what
I'm gonna do is I'm gonna launch it
under the debugger just the plain old
debugger no special profilers or
anything and in theory I'm gonna hit
whoops didn't hit my breakpoint need to
go back in the breakpoints are gone
let's see if I can remember where it is
doesn't matter what I'm gonna do is I'm
gonna take a baseline I'm going to cause
the leak to happen again
and we'll see if we can find it I'm Way
off script right now guys okay so I took
a snapshot while this is executing that
was weird okay good
while this is executing what work what
we're actually tracking is every
allocation
it's an ND allocation its size its type
and its allocation stack the idea being
that we want you to be able to go and do
memory investigations of you know where
the changes are coming from so you can
see here it says plus 786 kilobytes so
I'm gonna go here I'm gonna click on
that it's going to take me over here to
my heap view and I can see that there is
a long array I should say there are two
long arrays of total size of 400
kilobytes that were created that were
responsible for that increase in process
memory so I'm gonna go in here I'm gonna
drill into that I can see I've got two
instances of this now remember I'm
attached as a debugger what that allows
me to do is have first of all really
fine green control of where I take those
snapshots so for instance if my
breakpoints had been set properly I
would have been able to stop at an exact
line I wanted to take the before
snapshot and then run to a different
line where I wanted to take the after
snapshot but then once I have that I
can't even I can I can I can look at
that instance in memory and I can also
get the allocation stack that inserted
that ah
there's my function so if I go to insert
pane I can get to the exact line where
that was allocated and I can actually
put the breakpoints that are missing
back into the function which is great
and so that's how you can very quickly
investigate leaks and also the overall
memory usage of your applique
you can compare snapshots but you can
also just go in if I click on simply
heap size it will take me to a view
where we're not comparing against the
baseline we can just see what are all of
the things that are currently in the
heap and still my my long lungs are the
highest thing and the next highest thing
is this you can we have a stack view so
that you can actually navigate the stack
and see which call tree is the most
allocating one this is a very useful
feature we get feedback all the time
that it's too hard to do memory tools
and so this is our take at that very
quickly the exception settings window
has been completely revamped it is no
longer a modal dialog which is huge
you can go in here and you know fine
grain selections on the types of
exceptions you want to break on so if
you want to skip all the standard
exceptions or break on all the standard
exceptions you just modify this settings
dialog one last thing I want to show now
that I've got my breakpoints back is is
what we call perf tips I'm not sure if
you noticed them during any of my demos
but there's very small I'm gonna hit the
breakpoint this time yay and as you saw
I also set another breakpoint at the end
of this I used to own the visual studio
profiler for a long a lot of years and
we always had trouble getting people to
use the tool profiler so it's such an
expert-level tool no matter how much we
tried to make it simpler we always had
trouble getting people to actually do
profiling what inevitably people would
do is go into the beginning of a
function and write yes
int a equals you know get timestamp and
then at the end B equals get timestamp
and then the magical B minus a and so we
just came you know eventually like why
don't we just give them what they want
and and that's what this feature does
when I run two to the second breakpoint
you can see what it actually did was can
you read that probably not it says less
than or equal to 39 milliseconds elapsed
we're actually timing between every step
and every breakpoint so that you can
find places where you can do those like
quick investigations yes this works
under release mode and and yes it also
subtracts out any overhead the debugger
itself is added the heuristics are
pretty
we think it's pretty accurate and all
that stuff shows up in here you can see
my breakpoints hit you can use this
listings to navigate through the places
and source that you've been recently one
last thing in my diag thing and then I'm
going to move back to the slides
not viz I think is part of the secret
sauce of our debugger nat vis is a
format yeah sure whatever
the nat vis format is totally public
it's what we use to make standard vector
look like a vector instead of what poor
Steffen has to deal with when it has an
implementer we do that using a
completely documented well mostly
documented a format for native
visualizations and now what we're doing
is there's if you add a dotnet this file
to your project and you use the schema
and you know edit it up and make it all
nice the way you want your own objects
to be done will actually take that nazma
information sticking into the PDB and
anybody who then goes and uses the
debugger will get that view of the
object so you can go and be a hero for
your company go and you know take your
nastiest gnarliest type putting that vis
in there stick it in the project so it
builds and suddenly debugging for every
single person in your organs better it's
totally worth it
more quite a few have any questions grab
me afterwards okay oh and I'm not going
to demo it but we completely rewrote
edit and continue it's completely new it
works for 64-bit now as well as 32-bit
it should be much more reliable if it's
not send a frown okay
let's talk about cross plan how am i
doing on time half way okay we went we
got the 100 top apps from the Android
Play Store and we figured out and we
cracked them and we said which ones of
these have native code in them a lot of
these you'd expect you know like
Facebook has a native code and it
minecraft s tomato a lot of games have
native code in it some things are a
little more surprising I was I was
surprised to see tinder there but you
you've got all of these applications
using C++ why well C++ is the common
denominator you can get a full native
experience on your application you get
complete access to the devices SDK
not some library that you have to worry
about if you know it is the lowest
common denominator
you've got code reuse you you that you
can have code shared between the
different and better performance and you
know especially with safe C++ security
so let's talk about architecting your
app we're seeing more and more teams go
ahead and architect their applications
like this for instance the office team
is has been structured so that you have
a shared C++ back end and then platform
specific UI and what we call platform
abstract station abstraction layer code
that is specific but in the case of
PowerPoint for example they've managed
to get to the point which they talked
about it last year cpp con where they
have like 97% of the code in PowerPoint
is shared is one big shared library that
they use on both Android and iOS and
Windows but this is not just us the
Skype app is the same the Bing Maps app
is the same Dropbox has did a talk on
this last year and I think they had
another talk this year about their dude
Ginny so I'm going to just put this into
the IDE really quickly too because I
find that it helps like really help
people understand what you see the way
the solutions are laid out so I'm gonna
go in here I'm going to open up a simple
cube rotating demo and while it's
loading I want to show you this this is
our Android emulator we are SuperDuper
serious about this cross-platform mobile
development stuff enough so that we went
and we wrote our own emulator it's super
fast it's fully featured you can you
know it's got accelerometer support you
can come in here and do this you can use
your touch screen for it too
got location support network support the
startup is fast you can emulate
batteries you can take screenshots
emulate the camera emulate an SD card
it's a fully functioning if you want you
can even use this with Android studio
like it just wires up to ADB and and
all's well so here we are inside the app
and so let me do a window layout huh
so what you can see it here is I've got
a library that's shared and to
application heads on this this uses the
same shared project stuff that we do for
universal applications so it should look
at least a little familiar if you've
done any recent Windows work so we've
got an Android application what this is
like basically a packaging project and
this is the native activity which is an
android concept which is like where
main.cpp lives and this is a Windows
Universal Windows 10 application that
has that same shared library so we have
heads on on the shared library for
instance if you come in here and you
open up the properties you can see that
here we're building with clanging 3.6
but we also give you the ability to
build your Android application with GCC
4.9 we're just using the underlying NDK
stuff here and we use the underlying NDK
build and stuff as well you can choose
the STL implementation you want you can
see that this will build a dot a file on
Android likewise in Windows Universal
but these the shared is actually the
magic this is where the shared code is
there's not much shared code in this one
but I wanted to show was if you take a
look at simple dot renderer what we have
is per platform intellisense so like
here's a simple way of looking at it I'm
going to go ahead and I'm gonna go open
document now if you notice up here I'm
I'm looking at it through the lens of
OpenGL ES app 10 Android dot static lip
so when I go to open document on this
it's gonna go and it's going to grab the
one from the NDK all of the definitions
flow from there it'll match whatever
intellisense you get for the STL will be
based on the one that ships with the NDK
and likewise if you go here and you go
to Windows and then you do the same
thing to go to the open the document for
vector it'll take us to a more familiar
one and and so this is true of
intellisense you you get exactly what
you're expecting it's actually even
emulating under the covers the
differences between em SVC and clang
even when it comes to things like
languages we actually throw a switch and
intellisense that tells us to emulate
claying versus emulate em SVC so that's
sort of a high level on cross-platform
okay great so in Android we support kik
Kenton lollipop we have inside the
emulator we support OpenGL ES 2.0 it
does multi-touch we I showed you the
camera and Wi-Fi and network simulation
stuff oh oh you mean push the button
okay kind of didn't want to so you can
debug directly from visual studio and
the line that I have bolded I really
want to call out here which is that if
you have an apk you don't think thing I
actually figured out what it's doing
it's running the rehearsal timings from
before anyways was the means I'm going
to slow so what it's you you can take an
apk the the packaging thing you're
killing me you're killing me outlook and
and actually go and just launch just
that you can like do project open on the
apk and launch it so even if you never
want to build but you just want to use
our debugger just like you can only use
our emulator there are all those entry
points so you know we're happy to have
you as a customer just use the part that
makes sense for you we've heard a number
of times that Android the debugging is
is very fast and very reliable for folks
we're using it internally inside Visual
Studio as well I'm sorry inside of
Microsoft we have many big teams oh
using it including the Bing Maps team is
on it or am I allowed to say minecraft
uses it
iOS feature sets a little bit less there
you know what I'm gonna do I'm gonna
actually stop this so that I don't have
to fight it anymore and you guys are
gonna look at slide sorter view because
it's going to be easier for us to do
this talk that's what I call quick fix
engineering great all right iOS we have
support 6 7 &amp;amp; 8 you can debug from
visual studio you do need a Mac because
of licensing and so you can still do
debug against a device and the and the
iOS emulator on the Mac Windows 10
platform development completely
supported individuals to
uses that same shared project idea just
going to go quickly to conformance
alright let's talk about conformance we
made a ton a ton a ton a ton a ton of
progress on conformance and visual
studio 2015 I put all these things on
the slide not because I want you to not
because I'm going to go through them in
detail I just wanted to kind of give a
sense of these are just the ones that
are new from Visual Studio 2013 we've
made a ton of progress you can see
there's stuff in there from C++ 14
there's even stuff up there from C++
eleventeen maybe like our weight support
you can see there's a couple of things
that we're gonna even clean up a little
bit for update 1 improved contacts /
support a weight will get better so I
actually want to look at this through
the lens of what's still missing that's
it that's that's the complete as far as
I know lists of language conformance
features of things that are missing we
are working right now feverishly on
making sure that we can get expressions
Feeny that will get us to the end of C++
11 we will have full C++ 11 support as
soon as we complete expressions fini in
ye olden times we would have made you
wait until the the next version of
Visual Studio for that loud and clear
feedback that that is you know if we can
keep the breaking changes to zero we
that there's strong preference for us to
be able to roll out these improvements
so you'll see improvements to
expressions Feeny in update 1 it's
already a lot better but we will keep
working and through the updates until we
get it right
I wanted to give you some flavor of the
relative levels of difficulty or size of
the remaining features obviously
generalized Const expert is a really
really big language feature and you
shouldn't expect us to have that in
update 1 for instance but we will be
working on it soon NS DM eyes 4
aggregates which is a C++ 14 feature we
don't have is a small one that one
you'll get sooner rather than later and
variable templates is small and I think
John is excited about checking that one
in right to your face lookup is hard we
will break the universe if we just you
know mindlessly want to in and fix that
we are continue to work on our
rejuvenation of the compiler source base
in order to make it more amenable to
these types of things
I'm not saying no I'm just saying that
that's further down the line and c99
preprocessor is still missing we will
get these things let's talk about
libraries this one I didn't even want to
make a slide that had all the new stuff
in it cuz Stefan's got a really good
blog post and frankly it's a lot let's
just talk about what's missing
it's these these things C++ 14 we need
ste name before we can do this one and
then there are two new C++ 17 things
that we'll get in as soon as we can okay
library updates universal CRT CRT is now
an OS component it ships it's still
supported down to XP did I mention XP is
still supported we will never break
changes against the CRT again it is a
stable OS component this will not be a
you'll pay there are some refactorings
that went into this one so there are
some incompatibilities they're mostly
manageable and from from then on no more
breaking changes we did actually make a
small MFC improvement if you are who has
MS yep alright good
Hey how would you like uh door resize
for dialogues cuz that's that's a new
update for MFC in there there was enough
noise about us needing to make some
small edits that we went and did that
one if there are things like that you
guys can come and yell at me later upon
codeplex we have parallel STL
implementation as well as the Casablanca
C++ rest SDK and you can see we added
some features there I know I'm running a
minute or two late but I'm almost there
introducing clang C to Jim did a talk on
this on Monday I'm not going to go
through a ton of detail on this we took
the clang front-end and hooked it up to
the Microsoft back-end we're going to
ship this in an update why did we do
this we want you to be able to use the
same front-end to reduce the overhead of
bringing cross-platform libraries and
code to Windows basically my thing at
the beginning about us making it much
easier for to do cross-platform
development this is totally on message
for that by doing it the way we're doing
it it allows us to bring you know
compromises debugging and it allows you
to link that with our existing libraries
and I just want to make sure I'm
absolutely clear on this and no that
doesn't mean the code that you have that
only works with our front-end is now
abandoned
we continue to make as you saw a Mobius
slide I continued make investments on
our existing front end hey we've been I
the message that we've given you guys on
uncie has been messy I find whenever we
post basically any blog post the first
piece of feedback is see and message
heard we care about see they're actually
as we went to go prep for the clang see
to demo it was hard for me to find open
source libraries where we didn't have
enough c9e niden support to compile them
i actually didn't find any if you know
one let me know what ffmpeg works yeah
that's a thump egg was works I couldn't
live AV code yeah all good so these are
the things that are missing we demoed on
Monday the ability to use clang CG - to
do this we did a Mandelbrot set thing
with bunch of underscore complex in it
yes C is coming we do a lot of work for
graphics developers I'm gonna skip this
for now I just want to make a couple of
quick points about vectorization we have
Jim covered this in his talk these are
what we call our compiled and smile
features we do a lot of work in the
backend optimizations to make sure that
all you have to do is recompile and get
some benefits as you can see we've done
some work on vectorization of loops to
take into account control flow and still
being able to vectorize in the presence
of that that's better black Scholes 300%
in our measurements so if you want to
make money on Wall Street that's awesome
the stall forward avoidance by doing a
better job with standard complex floats
and standard complex doubles is sped up
eigen quaternion multiplication code and
FFTs by a bunch again if these numerical
methods matter to you by all means grab
Visual Studio 2015 bit potestas I think
this gets a laugh people like really
seriously just that like but it actually
this pops encode all the time and indeed
I was happy to find after I did this
this talk infront of my own team at one
point one of the developers and the
compiler team went and said yeah this
actually fires all over the compiler
front end as well so that was good you
know what can you do for me right and
loop a fun switching which is finding
invariant conditions inside source code
and then moving them outside
again you'd say why would you write that
code well in liners make that happen
improved code genom standard min max
lots of things particularly in STL
constructs so go ahead and recompile and
smile and at this point I'm gonna let
this poor guy talk okay so Steve covered
a little bit of what we have in 2015 I
wanted to make sure we're very
transparent with you where we're heading
as well what's next
whether it's 2017 16 or even the updates
itself that we're gonna come and see the
first one I wanted to cover is actually
hearing me alright so the first one is
we used to release what we call the CTP
for some of the conformance features
we're working at and we used to get it
out there as a side by side the existing
compiler and we only roll it into the
main product in the next major version
of vs that's changing we're actually
going to roll it in the nvs 2015 so the
updates itself will contain the newer
features the compiler features
specifically standard conformance ones
which are fully supported in everything
so you don't have to wait to the next
major version of vs it's just similar of
the updates part which includes some of
the stuff we're working on right now
like thanks c2 we're aiming to have that
as one of the updates hopefully sometime
this November modules and Gabi are
speaking about it wait gore is here as
well as part of the work that we're
gonna more optimize the way the
interesting part here we are obligated
though still is if you install vs 2015
and then installed one of the updates
your existing code has to work as
expected so there's not gonna be any
breaking changes so some of the features
will be an opt-in in most cases but it's
still there fully supported one of the
parts as well as a that's interesting is
from build lab scenarios and others and
I wanted mention this is the last one so
we've heard lots of feedback about do I
have to install vs to just use the
compiler right and what we're doing
right now we're thinking about and we
actually almost close to releasing it
and hopefully we have good news in
sometime in November what we call the
builds queue so basically you're gonna
have you don't have to install vs you're
gonna provide your wave just a
standalone huge just
stole their masai you got just the
compiler and Emmas build you can just
build from the command line you don't
have to install the whole vs itself oh
you'll miss the Installer when it's gone
it's the same bit so that's been in the
major one even updated as well than the
quarter of the base is the same concept
you just don't have to install it
part of it is believe it or not we've
heard from it I want from the Python
guys I work from it from the build app
scenario two runs in your build apps and
as well some of developers itself we're
gonna continue what Steve told spoke
about and code refactoring whether
that's actually in the vs gallery itself
or it's actually built in the product as
part of the updates as well so we can
keep improving there
the other part as well is build time
improvements I think Steve's talked
about the incremental build scenario
that one with focus on 2015 will still
gonna be updates there but we're gonna
start focusing as well on the full build
scenario as well how do we actually
speed the full build and not just the
incremental one that could be through us
and through partnerships as well with
other existing folks so we'll do that
and as well as part of the November
update so we're gonna have more details
I think one of the key parts here is we
will be more transparent about what
we're doing
we'll talk about it in public and
everything the negative part of it in
some cases will be to transparent that
we might actually not hit the project
isn't a time that we wanted to or we'll
keep you updated as well of what's
happening there
yeah the other part as well is this is
we have early thoughts here and we would
love to talk to you about it as well we
will continue right now we started
investment into the cross-platform
mobile which is Android iOS and Windows
as well we are hitting as well the other
platform is well not Windows and we're
gonna start thinking about the IOT
scenarios and Linux as well how to
target those coming from Visual Studio
we've heard the major pains for example
from Linux developers and if you're
really solve just raise your hand
what example and one of the major pain
points we've heard about is remote
debugging can ID buggies in vs and debug
on a linux and it's action error that
we're actually investing in right now or
investigating it
we're actually building a prototype
right now we don't hope to see to show
you something very
so and once we have it we will as well
roll it as part of the vs updates you
don't have to wait for major updates as
well and for the other parts as well as
you guys have heard the vs code okay we
are thinking about that right now right
now all the support that's in vs code is
just for C++ is just basically sent
expertise ation we are investigating
right now what does it mean to support
C++ development in vs code so we would
love to hear your feedback about it
right now because it's we're actively
engaging right now in that area I guess
I covered my stuff quickly so we'll
probably open it for questions right now
yeah it's 12 minutes so it's good Zac uh
no as far as I know everything I showed
is in community yes that gang's coming
soon and that one's on our radar for
sure yeah this one's definitely in one
of the reports here okay so repeat the
question Wow is there a way of updating
the signature and it's not right now vs
2015 but this actually one of the high
parts which we were working on this
being one of the updates and and the
other question was are is everything I
showed in only in some higher level ski
you know it's it's all in the community
yep restrictions on XP I'm looking at
Stefan
you heard Stefan you're physically
harming Stefan but no as far as we know
that it's no restrictions I mean it's
not a design time platform it's a
runtime target yeah visual studio next
so there have many changes if there was
a restriction in 2013 it rolled forward
basically I I personally I would love to
hear about whether what kind of
restrictions were there I and that
wouldn't surprise me if code analysis
wasn't in there
code analysis rules should mostly be the
same one on the other one so flip it
over and rebuild sorry about that though
so yeah the question is what kind of
improvements have been for testing tools
for C++ I think there's been a major
investment in that area not not that
much major that's being honest but still
we would love to hear about what the
other tools you're using is well than
that I was gonna say like who who you
does anybody use the MS test stuff in
the product yeah okay I actually
sometimes I think we don't we we
personally don't pay enough attention to
that so that's really interesting thank
you yeah yeah the the stuff that's so
the question was is the old profiler
still in the product yes it is
and you get to it the same way and
there's even I think a lot of
improvements inside the individual tools
of it I just didn't show them today we
didn't take anything away we just sort
of revamped the the UI yep yeah
the refactorings do profiling is
windows-only right now for for the
see to toolchain say to me yes cause the
idea is that's one of the reasons we
actually hooked it to a blank c2 cause
our back-end responsible for us format
that are recognized by L profiler
I won't we still have some testing work
to do in that space but we don't see it
that is the goal though yeah
Kostya so the question is is the heap
profiler accessible from the command
line is Aiyappa here no I don't think so
but that I'm guessing the next question
would be well could it be right yeah one
of the things that's nice about it
though just one of the reasons why we
it's designed the way it is is two is
because of the fact that you can use the
debugger to have that fine-grained level
of control
it's integrated into the debugger and so
we're not really a command line debugger
either so yes question the back ok so
the question was have there been any
improvements to intellisense the answer
is yes and indeed one of the slides that
I'm in said is that we've got what we
think is a pretty big one coming an
update but there were a bunch of things
that we did what we did is we use the
Unreal 4 engine code base in order to
tune intellisense for scale and we got
some pretty big wins there so I would
ask that you try it out this is another
one of those examples where we really
really want to focus on making that
better we know that sometimes we run
into things at scale but to be honest we
don't always run into things at scale
it's very code based dependent so please
by all means
you know I'm s Carroll at Microsoft two
hours two L's you can't see that two r's
2 l's a see I don't know and-and-and-and
let us know we'll grab profiles we've
been working on that hard lately
question here I don't think we have any
extensibility at that point we track a
number about oh oh right yeah always the
question question was we're it's clear
we're doing free and and and elite level
and malloc stuff yeah stepping is not an
answer
this sounds like a good topic for a blog
post I guess is gonna be my answer to
that which is uh yeah by all means try
it out give us feedback it's it's
completely new they're updates to it
coming in the in the update but yeah I'm
not a hundred percent aware of that we
we are definitely doing all sorts of
work across the chain to do that there's
information spit into the PDB about
where the allocations are in their types
in order to make it better so yeah by
all means shoot me a mail question does
the head does that I I don't want to say
we've hit every possible user scenario
that you can do with G flags question is
that if I freed him from the tyranny of
G flags and I but it I think it should
reduce it it should definitely reduce
your need to use it so so you know yes
timeline for a big one yet okay I'm
gonna say in our yes it usually it's
every three month that's what we're
targeting as updates so it's the range
off around the November timeframe so
that's the goal at least right now we
want to have a happy Christmas we're
working hard to make happen in November
huh that's a good question I'm I I so
the question was if we override the
Natalie's file by sticking it in the
project is it possible for somebody else
to fight them I I don't know who would
win in a battle between the NAT visit
alder and the PDB I would imagine the
PDB wins and so if you want that
scenario you know stick with the ask
people to copy it into the file or maybe
like a post build stuff that copies it
there I don't I'm just thinking out of
the top of my head I don't know offhand
though yep well here's the question
you know that stuff is um is windows oh
so the question was if I'm doing
cross-platform development can I use the
heap tool the answer is the heap tool is
Windows only right now don't get me
wrong you know we've been working on the
cross plat stuff not actually that much
amount of time I think realistically
we've been working on it about a year we
want to get to a place where
everything's a plus right and so those
things are on our map but they that
today the really advanced debugging and
diagnostics no sports yeah yeah if
you're doing the crud you can you can
profile the Windows part of the cross
platted that will work but you can't
profile on us I'm not saying you can't
do that you just have to use the Android
specific tools for doing it right yeah
it's question in the back I think Eric
did some work with the windbg guys to
make it support that as I thank you I I
I'm gonna go with 70% sure yes so try
that out and it and we have a good
relationship with the windows debugger
team and so if it doesn't it may be a
bug or we can try to convince them yes
okay so so they do have some level of
Napa's support andrew is saying for sure
it's just not a hundred percent yep at
this okay so this is so nat vis is a
sort of revamp of the old Auto Expo at
file he's asking about a particular
formatting thing in that I will send me
an email and I will put Eric in contact
with youth our novice guy Zach
okay okay so the feature request is make
NAT vis powerful enough that you could
write a date/time visualizer for it okay
check so I would yeah okay so the
question is is there any thought put
into NAT step filters and handling them
the same way we handle than at Miss
files
yeah we've certainly thought about it
that's awesome I didn't know people
actually knew about NAT step filters so
we can definitely look at that going
forwards great feedback any none that
you do these big efforts you know all
these developers is the thing off on the
side that everybody gets excited about
doesn't build tools one developer
working for a few weeks
NAT biz one developer yeah okay yes it's
Kosta yeah we support and I think an
update its armor the next 36 and the
plan is for update one that's we
actually add arm 64 what and the the
emulator is x86 but if you plug in you
know like like I have an Android phone
in this pocket and a windows phone in
this pocket if you put the Android phone
in in there it'll work for arm or if you
happen to have an x86 one that one yeah
question
yeah do you want to do that is another
topic so the question was to make
support right yeah okay awesome
yeah so we love seeming to make a
scenario that we were investigating
getting better at for sure that is on
the list of and because we're running
out of time I just want to stress one
thing again and so if you are interested
in see make we want your email address
if you are interested in visual I mean
the the shorter short answer is yes we
will do investments here yeah we have
some actual prototypes building and we
actually have some tools that I should
do that seeming support we would love to
get you address and we'll send it to you
to try it out to give us feedback before
we make it product wise for instance one
thing that we're actually working on
right now is the ability to make sure
that when sea makes spits out a visual
studio project for cross plot that it
does it in the shared project form that
I demonstrated instead of something
flatter like it does today so that's
something that will be will be trying to
give back yeah but we want to do way
more than that so if you're interested
in that come grab us we seriously want
to build up customer councils for these
things and Linux IOT core sessions over
so thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>