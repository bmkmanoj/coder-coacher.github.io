<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2015: Kevin Kostrzewa &amp; Johm Wyman “Organizational Leadership with Modern C++&quot; | Coder Coacher - Coaching Coders</title><meta content="CppCon 2015: Kevin Kostrzewa &amp; Johm Wyman “Organizational Leadership with Modern C++&quot; - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CppCon 2015: Kevin Kostrzewa &amp; Johm Wyman “Organizational Leadership with Modern C++&quot;</b></h2><h5 class="post__date">2015-10-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NMUAzL6WUEY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning thanks very much for
attending my name is Kevin cast Reva and
I'm a software engineer with Thomson
Reuters along with my colleague John
Wyman we both have an affinity for C++
and especially modern C++ having
programmed in C++ since the early 1990s
there is a necessity for any multi
developer project to have technical
leadership SAT a development culture
it's tough to find metrics on this
static analysis can't be done on culture
what we try to do is find things that
work for our group in our situation if
they work we keep doing them if they
don't we don't in some ways it's as
simple as that some of the things that
we talked about today may work for your
situation some may not we'd like to take
our energy and provide leadership back
to our organization around C++ which
we'll talk a little bit about today I
should note that there really won't be
much around code examples this is not
about nuances in language and specific
advances in modern C++ it's more about
ways that we communicate modern C++ to
our developers in the interest of
keeping them current engaged and
generating quality code the standards
committee has modernized C++ every
iteration increases the languages
capabilities but it also increases the
overhead of keeping a development staff
current it out dates prior approaches to
problems for example old idioms around
not returning large objects compared
with move semantics allowing greater
penalty-free compositions of expressions
the good news is changes from the
standards committee are improvements
they either help to produce more durable
efficient or easier written code also
the standards committee is kind enough
to not break our code with these changes
the challenges is that technical
leadership responsibility to help
modernize our development organizations
so we can reap the performance
readability and resilience benefits that
come with for us no matter how good of
developers we try to be we represent
less than four percent of our code churn
and we like that other 96% to be
high-quality we're presenting this as a
case study this is our development
organization in our culture there are
two important pieces to understand in
the context of where we're at the
history of our
a shin combined with the history of C++
the former may or may not overlap with
your development situation but obviously
the latter is is shared now some
background on us are our context we
currently develop a business application
in C++ for microsoft windows which was
started in C on ms-dos currently
developed on a Microsoft stack the whole
thing we're using a visual studio TFS we
run on Windows desktop we have about 75
developers and a hundred and about a
hundred seventy-five total development
staff with about 11 million lines of
code and were developed out of Ann Arbor
Michigan which is a great developer
community but not quite not quite
coastal combine that with the
information that most of you already
know where C++ keeps changing on a more
and more accelerated timeline from 1983
to 1998 with few changes to 2003 also
with few changes to 2007 now we get reg
ex smart pointers hash tables 2 2011
lambdas lambdas everywhere to 2014
eventually 2017 and beyond combining
those two contexts we get more features
but more problems we're back to the
original problem how are we going to
lead our staff to effectively use the
new features that are available we're
making modernizations on 11 million line
of code code base B come with a
technical debt and legacy Coast legacy
code that we've amassed over the years
that very much becomes turning the oil
tanker for us now obviously we're
speaking to our own applications into
our own context but and we're sure that
you face other challenges this is a
fuzzy subject few right answers but we
sincerely hope you get value out of our
own personal case study in putting
together this talk we try to group our
experiences into different
classifications of how we try to provide
leadership for many of you none of this
will be surprising information and
honestly
none of this is earth-shattering it's
likely you're going to hear a lot of
this a lot of what we say and say you
know of course but creating a taxonomy
here serves as a useful exercise in
thinking about how we go back in to our
organizations and leave with C++ we've
grouped our experience into five
different classifications and we'd like
to present them in the abstract around
value along with tangible examples of
how we've tried to address them we hope
those tangible examples raise ideas for
your own development context John yeah
thank you thank you Kevin the first
section that we chose to break out our
presentation is to educate yourself
educate yourself is probably the most
straightforward and the most obvious
thing obviously everybody who's here
puts in an effort to do this you've
taken the effort that come to cpp can
you try to stay current and you're aware
of the movement and the committee in New
I so what they do with the ISO but so
this is a bit of preaching to the choir
keep it personal knowledge current stay
current we're on the Microsoft stack
Microsoft has a wonderful video magazine
on their channel 9 that we frequent to
get information on the tool chain that
we use also attending attending
convention if you can't attend
convention the the YouTube CPP can't
videos have proved to be a great a great
reference and a great source of
information for our development staff
and right at our CPP is also a fabulous
source of information you don't have to
be a key contributor to to to frequent
reddit our CBP Kevin and I are more of
lurkers but there is a tremendous amount
of information there that that we find
valuable keeping yourself yourself
current is the first step in keeping
your development organization current
that seems very obvious but current
leadership makes for a corner
organization and having current or
heaven current leadership is the first
step to making good design decisions for
the short term as well as for the long
term but your education cannot be in a
vacuum what we learn means much more if
the information is
across our development staff how do we
accomplish that what are the what are
the steps that we take to ensure that
information that we gather is
disseminated amongst our amongst our
staff our tangible example is going to
be our attendance of this conference
this conference provides access to the
luminaries of the C++ community what do
we do with that access what do we do
with that information how do we gather
that and bring it back to our people how
do we use this to our organizations
advantage the first thing that we did is
we we have we spread word to senior in
leadership amongst our amongst our
developers about about attendance we use
that and we ask for input regarding
session attendance we circulate the list
of sessions perhaps or something that
they've seen something about something
that they think could be of a valued or
development organization down the line
and even if there is no input from the
senior and leads developers you still
raise topic awareness they've still read
session descriptions they've still seen
what's going on awareness is a very very
valuable thing in the development
organization then how do we bring this
home when we were at cpp con last year
Kevin I this is a question that we asked
each other how are we going to use this
to the advantage not to our advantage
but to the advantage of our of our
development organization and we came up
with a semi in formal semi-formal trip
report trip report as parameters we need
to have section and included information
for each topic that we attend we have to
look at the topic in the short term in
the long term is this something that we
should allocate resources for
immediately honor on our staff is this
something that will never map to our
space but it's just cool and we also
when we're giving up sessions we put in
a concerted effort to not attend the
same sessions there's going to be about
20 blocks when we're here for us to see
sessions and if we go to the same
sessions will see 20 things and if we go
to different sessions will see a 40
thing
keynotes withstanding it's going to be a
little less than that and then when we
return the trip report is presented to
lead programmers in our in our regularly
programmer meeting we talk about each
session we talk about things that we
find valuable and things that might be
more of a long term interest to our
organization it also serves a second
purpose and that our leads meeting is
recorded it has notes and it's made
publicly available are not publicly
available but it's available internally
to our entire development staff for the
spreading of information thanks in
addition to technical leaders carrying
this information back to the
organization is also a need for all
developers to feel responsible for their
own education and creating a development
culture and support of that we live in a
world where access to computing
educational resources is available to
anyone with an internet connection the
biggest challenge can be awareness
across a group particularly around
junior tenured staff we also have
challenges on applying the knowledge how
to map the knowledge gained around
modern C++ into our application domain
it's easy enough for all of our
developers to see immediate value in
range based for loops but for a lot of
developers techniques like snae not so
much creating a culture around self
education has an appeal to our
management as well as it's a low cost
solution that allows self-motivated
people to get individual specialties as
they are interested it also helps keep
our developers engaged more engaged
developers equals increased staff
retention equals higher quality product
so what have we implemented to create a
culture around self education and how
does it relate to modern C++ first off
what we whatever we do we have to be
respectful of our business and release
cycle which for us is is yearly we're in
an industry we're missing our shipping
deadlines means that we're out of
business well that's tough what's nice
about that is we have a good
understanding of when we're going to be
in crunch time and when we're not
because it can all be crunch time so a
few ways that we've been effective at
using that cycle around our culture
has been taking a weekly meeting of the
technical leads which is mostly around
discussion of the business needs for the
release cycle and things like that
during our natural yearly downtime we
have the ability to repurpose that
meeting as a place to educate each other
or bring in staff to present any work on
interesting side projects this has
worked well for us because everybody's
are you got a time commitment for it and
it doesn't require extra coordination
around scheduling it is a essentially we
have this this meeting held in an open
and transparent manner of we very much
like transparency one thing we did to
some good effect was dole out micro
assignments during this downtime we
assign pairs of developers leads and
juniors of video reviews this is a small
time commitment for the developers to
watch an hour hour-and-a-half lecture
and present a report at our weekly leads
meeting on their findings and what they
feel is relevant to our day-to-day work
if any CPP cons YouTube channel
Microsoft's build conference were
excellent resources here we've reaped a
benefit from this in the self education
culture like promoting the use of auto
readability through range based for
loops better and more consistent
container usage like preferring stood
vector in almost all cases and solving
more problems with our AI I more of a
macro assignment during this downtime is
review of our tooling compiler versions
and library versions especially around
compiler versions as new C++ features
are available we've tried to coordinate
the migration efforts with some pushes
of the developers working on this to do
exploration and self-education for
example as stood in is a list became
supported by our compiler the developers
doing the compiler migration refactor
some old mutable containers that used
individual element insert into Const
containers with a construction stood
initializer list parameter in places
where we really could use a Const
container for better code quality we
have found that self-education does
break down sometimes in that advanced
concepts aren't always
easily map to your problem space even
when they can be effective we've had a
few occasions to try to spread the
knowledge around more virally by
starting developers off on a
implementation as an example s fen AE or
enable if compile time techniques can be
seen as interesting mental exercises but
not necessarily part of our application
domain over the past year we had a need
to Jason serialized deep collections of
arbitrary data types all known at
compile time rather than solve that
using a brittle custom solution or rtti
we let the compiler do the heavy lifting
and figure out the JSON structure for us
at compile time via sve enable if
template functions that were enabled
against container type we found that
this was not only an effective way to
solve the problem but it served as a way
to drive the utility of this technique
home showing that it is actually
relevant to us junior developers
involved in this project now have
another tool for approaching problems
but just like the first section this is
not complete until knowledge is shared
with the rest of the staff John thank
you Kevin the next next one is going to
be another one that sounds very
straightforward encourage you some best
practices you sub X practices as we're
talking about it here extends from more
more code based things to talk about as
much just as much as process based
things things that help to align the
solution space with problem space make
sure that the developers know the
correct tools for solving for solving
recurring problems inside of our inside
of our domain space and make sure that
they understand them so that they can
map the next set of solutions to the
problems it also creates a staff that is
self-sufficient people who are capable
of answering their own problems and it
helps to produce staff that is self
starters having similar problems having
similar problems solved in similar way
by all developers makes for easier
development easy it makes it easier for
developers to switch tasks it makes it
easier for developers to get spun up on
buddy else's work it also lowers the
cost of onboarding new developers the
next section that we've placed here is
your style guide if you want to watch a
wonderful video on style guide you can
watch the CPP con 14 video I'm not going
to go too in depth on it sufficient to
say that we find the style guide to be a
very valuable resource of ours our first
step was to adopt style guide we started
with the Google style guide it's
probably the everybody's favorite place
to start but it doesn't always map
directly to what what you try to do
inside of your organization so our
second step was to make the style guide
your own that required a lot of pruning
it required a lot of adding things but
we felt like we streamlined it and made
it map to our specific problem space our
API and our approach to our industry
problems and the third is to make your
style guide a continuing conversation
when our style guide was released we
released it in a way that made it very
clear that it was not a voice on a hill
coming down to the people it is not
written in stone it is written in beat
it's written in bits and that makes it a
continuing conversation amongst our
whole development staff everybody has
access everybody has access to new
suggestions for things to remove for
things to add for modifications to
specific items inside of it this is done
in a public way and it is a conversation
that involves all of development and
lastly refactoring across our 11 million
lines of code was difficult it was very
difficult most developers don't have the
entire code base local to their machine
it doesn't make sense most people work
in very specific areas so if you want to
search across the whole code base what
was our solution our solution was a
network share of the entire code base on
it and brute force searches against it
that was a deterrent to doing due
diligence on large code changes and it
led to problems across our development
groups we did it with brute force until
we got on the open grok got on the Open
Graph train now the same searches that
were taking
minutes with the brute force are handled
on a vm that's supplied to us by our
DevOps team and are in the order of a
second our last section is email where
good information goes today there's
plenty of plenty of stories about people
either either your outlook groups
retention policy removing something that
you wanted to use having to maintain a
local set of PST's of information not
CC'ing the right people on an email and
it also makes it difficult it's a
counterproductive to the transparency
that we seek so explore email
alternatives we use an internal social
media site for critical conversations
place where everybody is implicitly
included and has a voice to contribute
to a solution we also have wiki for for
for documenting end points and things
that we use usually very technical
things that don't shift critical
decisions in our in our group must be
transparent and publicly documented this
raises awareness and spurs conversation
in our development group thanks as a
doppelgänger to the previous section we
also try to prevent the creation of
fragile solutions fragile code can be a
maintenance or debugging nightmare and
frequently not just for the author but
for others working around that code code
that utilizes bad libraries or aspects
of libraries that proved to be buggy can
be just as much of a nightmare a goal is
to create a development environment
where there are less wrong options for
developers but things are not done after
the failure cases reached we like to
provide direction at the time and place
of failure to improve efficiency we'd
like to go over a few examples of where
we've tried to limit these worst
practices the language has advanced
significantly around the lifetime of our
application stood Otto putter was
awesome in 1998 but that shouldn't be
used now because of subtle ownership
issues so how can we prevent the use of
stood auto pointer some of our code is
over 20 years old how can we prevent
namespace pollution from dot H files
boost is is wonderful Microsoft stood
implementation is wonderful
we've had issues with individual parts
of those libraries how do we protect our
staff against using those parts we found
it effective to stop this with our style
guide requiring a set of header files to
be used universally in all of our cpp @h
files at specific relative positions and
providing some enforcement in those
headers with that those standards are
followed admittedly this is not perfect
but works with our build process to
allow us to inject our code around the
library level and either deprecated
static assert or completely disabled
components that are problematic for us
static assert has also been particularly
useful for us when combined with type
traits to make sure some template
libraries that we've used that we've
developed are getting the right kind of
tea when the template libraries are
passed incorrect T parameters instead of
kind of sort of working or generating
incomprehensible error messages will
catch it early at Build time with a
decent error message that shows the
developer exactly what they've done
that's wrong this really requires a good
feedback loop across our organization so
that as consumers of the library
experience problems they'll be able to
assist in getting those problems caught
with new compile time guards we want our
developers to be alerted quickly when
going down the wrong path when possible
we like to catch those worst practices
at Build time fail fast is a term that
you hear a lot working in development
effective static asserts make it
possible to fail really fast we like
catching problems before code leaves a
developer's machine when combined with a
good CI build process it also keeps your
source tree good for other developers we
we personally get a lot of added benefit
out of Microsoft's team build gated
builds and the enforcement policies when
a gated build fails the check-in is not
allowed into the source branch this
failure also includes failing any of the
unit tests there are places that have
traditions of shunning a developer that
breaks the building of the tip and while
this sounds fun I'd rather have a
guarantee that the tip builds and
development can can stay productive
sometimes unfortunately we do have to
amass some technical debt in our code
like we said before some libraries may
have aspects that are less than desired
sometimes compiler language features are
incomplete we may want to use the
library or the compiler feature as the
real sub
solution but when we can't they force
homebrew solutions we recognize that as
being a short or medium-term technical
debt maybe on the year-to-year level we
choose to own a lot of that technical
debt through static asserts against
external attributes like library and
compiler versions we do this with a lot
of caution because this can be pretty
dangerous are admittedly maybe not best
practice is to make sure that we have a
reasonably tested solution using a newer
compiler or alternate standards
conforming compiler where we can test
the preferred solution and then include
that as comments around the static
assert we're very cautious when writing
code like that because it requires a
drop-in replacement when the external
attributes change thank you and our
final section is a leadership through
API this is a about as direct as it gets
for raising awareness of different
techniques and approaches how do we lead
through API why use API like I mentioned
it's incredibly direct and I'm going to
tell you that this is for internal
consumers this is for people inside of
our inside of our development
organization these are not published or
third-party api's these are ones that
affect only our staff the consumers are
forced to deal with or understand new
approaches new parameter types and new
return types directly inside their code
it is directly pushing knowledge to
their to their to their workspace the
downside of it is that any responsible
API owner is on the hook for
documentation and no self-respecting
programmer likes writing documentation
changes have varying varying degrees of
how they affect the developer it can go
from here we have this is directly from
our code base foo and bar the old
pattern of passing a foo foo pointer or
food reference and getting the reference
back for a populated and large object
that's still functional it's not always
best practice now with move operators it
makes a lot more sense to use the the
fubar that's listed below for passing
information of move semantics and
getting
developers are comfortable with using
them and aware of them and the second
the second selection that we chose from
our code base of the second example of
this is we have old code that takes a
function pointers as a parameter as a
callback that has a number of problems
that any any programmer can any seasoned
programmer can identify we have to pass
information in via a global state that
is those are all know knows in modern
C++ we have refactored those those API
calls from taking punk from taking a
function pointer to use instead function
initialized with lambda functions by
doing this you are increasing awareness
across your development staff not only
of lambda and capture but of the
importance of avoiding manipulated and
using global state Kevin and things
staying current is an increasing need
and modern development as modern C++
continues its a aggressive velocity it
will only become a bigger need there's
no single correct approach for this
every development organization will have
its own needs to respond to when its own
culture to create our goal here today
was to increase awareness and present
our own way of thinking about these
problems thanks thanks very much
Kevin questions because we had to go
across the API bone yeah we had to go
across API boundary oh I'm sorry
repeated the question he asked why we
are taking stead function in that last
example and not taking a universal
reference and the answer was that we had
to go across a way to grow it go across
a dll boundary so yes they really oh
this is a really narrow question and I
don't mind if you just say like come
talk to me afterward but you mentioned
something about using spin a in a
context of parsing JSON ed that's dear
to my heart I want to know what you're
talking about oh it was a it was a as
Finn a in generating JSON from a C++
object model and I can I can talk to you
about that so yes can you talk a little
bit more about how you use static
asserts to help keep your code base you
mentioned a little bit on the slides but
it's a little abstract I'm not sure what
you were describing well we have for
static asserts to help keep our code
base code base maintained well was we
have some libraries that that were pie
that that were based on 80 parameter of
being a pod that could be a mem copy
structure or also there's versions of
that that that actually have support
their own serialization that where mem
copy couldn't work and so we were using
static assert around the various T that
was coming in to be able to and checking
that at the point in time of
instantiation of the template to allow
the programmer to better know that there
in case they're using the wrong kind
yeah
just one follow-up question was there
something about particular T values that
would be relevant to modern c++
something that is only work with c++ 11
or 14 uh there I don't think that there
was anything I I think that the the
static assert would be more of the
example right there okay I think that
we've gotta get out for are you next all
right all right thank you very much time
we appreciate</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>