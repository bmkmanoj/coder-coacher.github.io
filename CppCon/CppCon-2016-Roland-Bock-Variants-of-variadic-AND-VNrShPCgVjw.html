<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2016: Roland Bock “Variants of variadic AND&quot; | Coder Coacher - Coaching Coders</title><meta content="CppCon 2016: Roland Bock “Variants of variadic AND&quot; - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CppCon 2016: Roland Bock “Variants of variadic AND&quot;</b></h2><h5 class="post__date">2016-10-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VNrShPCgVjw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">should turn out right all right um so
this is the task I want to have a
template struct that takes any number of
bool arguments and should have a value
and the value should be true if all the
arguments are true so and i'm going to
show several variants of trying to do
that right so if you have an
introduction to two very diff templates
the first thing you hear is okay use
recursion and that's what we met too so
we start with no arguments if there is
no arguments then it should be true
otherwise we do recursion and if that is
too fast for you oh forget it recursion
is something that you something that you
shouldn't do okay just for completeness
there's another constant there's another
recursive version context or functions
also starts with no arguments returns
true if you have at least one argument
then you compare the first argument with
a wrist and put everything into go
constant um then you're done okay so now
we guarantee chemist to something
interesting using know except Lloyd
stepped is a nice keyword or you can use
it to declare something to be no
accepting you can also use it to query
if something is no except we start with
a helper annex helper um that is
declared to be no except when it comes
right to strictly have to be no except
if the full argument is true then we use
a function annex join that is always
know except and takes any number of
arguments and then we say okay dear
compiler um if we take all our arguments
and construct no except helpers from
those and put everything as arguments to
annex join it's the whole thing notice
no except yes or no and the compiler
will say well if everything is true then
all the annex help of constructors are
now except and then the whole thing is
no except otherwise is false okay
right don't do that you will scare other
people okay enough for something real
you can use stood the same for this we
are again can declare a helper the
health takes any number of goals and the
implementation doesn't matter you don't
even need it and then you take your list
of arguments and you first prepend but
true put it in as arguments to all
helper and then you append true to our
your arguments and if those two
specializations of our helper are the
same that means that all the arguments
are true needs a few seconds to sink in
but yes that's right okay there are very
ends of this um well in C++ 17
everything gets nicer and easier because
we will have fold expressions with fold
expressions you can just express exactly
what we want we want to combine all our
arguments with end and if the result is
true then that's the result that we want
to have okay so that's very expressive
now I've shown five variants of very big
and um what's the point that I mean yes
all these versions on a stupid and there
are even more the point is well
readability and performance right there
readability is something that you have
to make up on your own mind on
performance is something that you should
measure you should not make assumptions
but if you measure it and I measured it
this way
within within the limits of my of my
measurement techniques basically for no
effort for one argument they all are
instant or if you go to higher numbers
then you will see that Oh recursion that
is actually pretty slow compared to
everything else if you go it to really
high numbers then you will see the XX x
marks crashes and the compiler so the
first approach already crashes the
compiler then you go to and you see
which version is really slow then even
higher more precious yet higher okay and
I didn't go beyond that so no except
also crashes and you see that by now on
the the fold expressions are about a
factor of two thousand slower than the
is same um that is a surprise and I
didn't I didn't realize that or I didn't
expect that but it's a new feature so
maybe compiler vendors will will catch
up with that now the morel is first with
Mary any templates avoid recursion is
evil the other thing is strive for
readability and performance if you have
to choose I'm always going with
readability because I have to maintain
the code on but that's my choice thank
you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>