<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2016: Arno Lepisk “On using singletons in C++&quot; | Coder Coacher - Coaching Coders</title><meta content="CppCon 2016: Arno Lepisk “On using singletons in C++&quot; - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CppCon 2016: Arno Lepisk “On using singletons in C++&quot;</b></h2><h5 class="post__date">2016-10-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/23xDn3ReH7E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay how many of you are familiar with
the single component then maybe a quick
recap
it's a pattern when you where you just
have one instance of something in a
system for example resource management
logging or configurations
my name is Ornella bisque I work at a
firm called high q-- in Stockholm and
I'm going to you to talk about my
experience with Singleton's in C++
because I worked almost 10 years with
C++ and almost all projects using atoms
in one way or another even if they maybe
don't call it single tones because as
you probably know seeing of those aren't
universally loved okay how do we
intimate this if we just do internet
search for Singleton's in C++ you
probably find something like this you
have a class with private constructors
and just see an instance method
aesthetic that you use to get in it's
the instance of the single tool so you
can use either returns a pointer or
reference and you use it like this a
problem with this and all my examples
are very strict so you have to imagine
all the private copy constructors and so
so on a problem with this approach is
that you expose a lot and lot of your
internal data structures and so and you
probably don't want to do that because
yeah you you leak a lot of information
one way of getting around this is to use
a pimple approach you have private Ferol
class that you use to hide the
implementation another way
is to use this abstract base class for
singleton it feels a little bit odd
because you use absolute base classes to
make several variants of your class and
you have a singleton which around this
one must be strange but I've seen this
used a lot but if we want to have a
single that's easy to use we can ditch
in a way or hide or in the instance
method and expose all our interface with
static methods and so we can call it
with Singleton's : : foo instead of
singleton : : instance point there - and
then we can we can use it like this I
hope you can see the top bro
but that syntax reminds us of something
else we can teach the class all over put
your implementation in a namespace and
then it can hide all your internal data
in an anonymous namespace in your
implementation there is drawbacks with
this because if you have if you try to
call this method from constructor of a
global object due to initialization
order things might blow up it's you
can't work around it finally I want to
talk a little bit testing of these
single terms it's always a bit hard
because you try to encapsulate them so
much things away so you don't have
access to the data
there are ways around it I've seen you
add a method to you think that I just
clears the state you don't implement it
in your production code only your
testing code but it's still there
I think this is plain ugly other ways
you just you just you want to scream but
if you yeah and then the abstract base
class you make another implementation as
well but with the namespace the based
solution you can instead of putting it
in annum namespace you put it in a
detail namespace put it in a separate
include file so you can edit it or
access the data from from your test code
so my time is up so if you're going to
do a singleton implementation please
consider
ditching the class altogether and just
put it in the namespace alright if you
very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>