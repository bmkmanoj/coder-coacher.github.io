<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2015: Jens Weller &quot;How I integrated TinyMCE into my Qt Application&quot; | Coder Coacher - Coaching Coders</title><meta content="CppCon 2015: Jens Weller &quot;How I integrated TinyMCE into my Qt Application&quot; - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CppCon 2015: Jens Weller &quot;How I integrated TinyMCE into my Qt Application&quot;</b></h2><h5 class="post__date">2015-10-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/h7dKQllZnzA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi um yeah I needed a text editor and
that's why I integrated Tony MC in my
cute application so a short boy excited
about me but actually i only have 15
minutes so i was looking for a text
editor as i'm currently writing my own
CMS and you know usually what what you
get and UI frameworks are just text
controls which allow you loved it off
you know editing strings and cute also
has like a rich text control where you
can display and edit HTML and rich text
in a very basic way but that's not
really what i need and then why doing
some research on that topic I saw that
kte frameworks 5 which basically is the
KDE libraries for cute wrapped into a
new framework kind of has something
called k text editor class and which if
you really want to use C++ probably is
the best way to go and so if you have
used use things like Kate under linux or
something else that's probably where it
leads up on so um also yeah that would
WA switch it says something like that in
the library I remember from my days when
I did that so I've been looking at Katie
frameworks and I was not too hesitant to
use it as even if it's like the best
solution for c++ I'm not sure how good
the windows support isn't I used to work
on the windows and it should kind of
work with cute but is there no treasure
is there an alternative and tiny MCE is
what I'm currently using and maybe I can
integrate it because this is the
dependency graph for the KDE solution
and I thought maybe I found something
which is easier to integrate into my
application and this dependency myth so
what I need is kind of what you see is
what you get editor for HTML parts I
want to be able to edit links
to edit images and tiny MCE is able to
do all of that and yeah this is the end
result and this is the editor in my
programs or as you see it works but how
the hell do I get there um so Tania MCE
is a written in JavaScript so it's kind
of you know you have to have some HTML
riffing and then it's basically living
inside a browser it's browser technology
it's not meant to be integrated into its
dumb of application and its
interfaces are mainly for integrating
into a server environment or into a
different environment and then I have on
the other side cuvette view which can
give me kind of like a browser like
environment based on webkit that offers
also bridge between c++ and java script
i can execute commands from c++ to
javascript and the other way around of
course yet since the browser windows
with randos HTML and has a C++ API which
basically is everything I always need to
make this work arm in a perfect world
tiny MCE has a few limitations arm the
first limitation is like everything
which is in the browser stays there so
we have for this little editor window
and this little editor window is
basically where everything which is
inside of taniam's it can only go so if
we open a dialog it will stay inside
this window and that's like really
really weird and the dialogues of tiny
MC do not scale at all so there is like
some windows even which are only
closable because we have scroll bars and
then also the other the other hand hand
is integrating this is obviously a
little bit of a hack I really need to
write my own plugins for in JavaScript
and one example is the the officer way
to to integrate images into the editors
actually having either a javascript file
on the file system or having kind of
like a PHP files which actually
generates this java script
file which contains a JavaScript
variable pointing at a list of images
and yeah you could use an executable for
that on the file system but I didn't try
that and but I thought about how about
if I give it a URL which is pointing to
localhost and I have a server running
this well guess what that doesn't work
so I I began to understand that I need
to do if I want to make that working
because the basic functionality of
editing text works out of the box but
things like images etc a bit more tricky
so I need to be able to replace the
dialogues which I want to use and which
are not big enough or which use like
images armed with my own dialogue switch
live in the cute board and can you know
the excess outside of the window of the
browser and yeah the integration of
images and links turns out to be really
difficult as um there's kind of like the
same origin policy in the browser and
also there's another limitation which we
will see soon um because from from the
queue WebKit view of things um I'm very
easy able to to just to register the
object which is basically wrapping the
whole edit or into JavaScript so I can
easily call methods into super spots
which are marked this queue in vocal or
I could emit a signal from JavaScript
which then handed and cute arm and of
course I also can execute JavaScript
from C++ so this is this becomes very
important when we actually want to hack
this to display a dialogue in C++ land
and then execute JavaScript to return
the result of that dialogue to the
editor and actually display an image or
change the HTML in the
editor so i have a class called HTML it
text edit or let's drive from québec
view and that's basically wrapping the
seacoast bus interface for the text
editor and yeah this is like a smaller
version of the class and um I have one
method which is invoke oval via
JavaScript and I have another method
which I call by r which I connect to a
signal so I have tried both ways from
the JavaScript point of view it's
basically the same syntax calling or
calling or emitting signals I can save
for John was brilliant I'm not sure
which is the best method in my opinion
from from from the laziness invoke a
bill is better because I don't need to
connect to that signal and would have to
register a signal for it and maybe from
the other point of view from the
performances signal might be better and
of course the class can also if there's
one method to execute JavaScript and
this method will also locally a
JavaScript which we executed and the
constructor is not learning a lot
because I'm actually starting this
editorial bit tricky and therefore there
exists an init may edit or slot which is
called by a timer as we have no way of
knowing that the editor actually is
loaded arm which was like really very
difficult to find out why some things
didn't work on the start and later
worked the reason is that I I can get a
signal for having the HTML loaded but
then the JavaScript just started running
and loading the editor and doing her
things and so I played around with
timings into to figure out how long
actually the JavaScript needs to load
and it's about like 150 to 200
milliseconds on my machine atonement
here on the laptop it takes a little bit
longer so the implementation from super
fast point of view is have 2x
was the class itself to JavaScript I
have to override the image link handlers
and display to dialogue on an execute
JavaScript x MCE itself I had to read
plugins which actually handle the the
buttons and our things and commands in
the editor so that I have to replace I
really have to hack me editor here to
replace certain calls and javascript is
my own JavaScript and then calling to
c++ and do basically the round trip and
then one problem i have is i need
actually like a host fire for the editor
which has to be a physical HTML fire I'm
loading just random HTML string
containing everything which would be
need to run it didn't work so this HTML
file contains the text area and also
contains the JavaScript needed to loot
on ence and the physical location and
the directory where is the base pass for
the editor which means that all all
images or other things which reddit must
have a relative path or must be in that
directory to this editor which for
example means that if I have several
folders in my CMS i currently have to
copy that file into each of those this
is limitation which I'm currently trying
to find out if I can work around it but
from the current point of youth seems to
be difficult so in the constructor I
only do disabled clicking on links
because otherwise we would open links in
the editor where we're currently working
on and that was really a big surprise to
another happened so I turned that off
and I connect to the signal um in the in
this message I actually set the base
pass which is important to first know
which eight which editor HTML I should
note and I then also associate this
wisdom the sacred object of in
JavaScript which then is called
by a window notation I will show you
that later and here's a little cute
timer and I use this to initialize the Z
object later so um this is the code for
unselect image which first displays the
image dialog and then we're just like
boost which is then just being displayed
in the editor via executing this
JavaScript and the exact JavaScript
method which just yeah this mainframe is
basically the pointer to the HTML
fragment the sequel.fast implementation
of Q WebKit which holds our website and
the editor and we just evaluate to
JavaScript there and not before so that
I know what kind of JavaScript I have
executed and yeah I am not very good at
javascript so I'm just going to show you
a few little lines of JavaScript this is
how as we have added this object which
which is ourselves this is c++ object
actually to the window variable of
JavaScript and we're able to call
methods and emit signals which is the
same syntax actually and we also put a
hand over parameters from JavaScript and
yeah then I have to to add a button to
to the editor and a little bit of other
setup and basically it works good
limitation lots of resources get
allocated and wasted for this one editor
should be enough in my opinion but
instead I have like an editor's loaded
on the base paths and the few
limitations don't really mix up
especially with the editor HTML on conan
not really happy but I tried to set the
base your eye off the editor them that
does not work in JavaScript and yeah
it's really difficult to doubt to debug
JavaScript and WebKit inside a cute
application and yeah what I also would
need is a text editor for HTML text our
CSS JavaScript Tony and see my opinion
no good for that so maybe I need some
other web editors and for example item
would not be an alternative I look at
Adam but I Thomas based on no trace and
ransom like in its own environment in
runtime therefore it's not very able to
integrate in any and other application
so the end result is I have a rockin
HTML editor some fine-tuning is still
needed arm and yeah some parts always
moving a heck tiny MCE the 4x branch the
newest branch of tangency did not run in
the queue WebKit ah so that's why i also
used the free version which also the
solution i'm used to work with so its
foreign and yeah that's</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>