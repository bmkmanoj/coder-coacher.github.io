<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2015: Piotr Padlewski &quot;C++ WAT&quot; | Coder Coacher - Coaching Coders</title><meta content="CppCon 2015: Piotr Padlewski &quot;C++ WAT&quot; - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CppCon 2015: Piotr Padlewski &quot;C++ WAT&quot;</b></h2><h5 class="post__date">2015-10-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rNNnPrMHsAA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi my name is filter Lipsky and today
I'm gonna talk about see what's what so
let's serve something easy so when you
as you can see this code you probably
think that the type of a map it's some
kind of map
right but in fact it's not it's integer
and this is of course because you can
you can use this operator the square
bracket operator and it's just a pointer
arithmetic right that's of course if you
will see 42 of T that that then it will
be what right okay yeah so the first
question of course is does it disgust
compiled and the answer is of course yes
and to answer the question what does it
do I will firstly invent this code and
this code is equivalent to this code
which is empty lambda call inside lambda
inside lambda so it does nothing
and this compiles because we have
diagraphs in C++ what
okay so Cephas plus has a very nice
feature and you can put URLs inside the
codes like this without any comments but
in fact there is some kind of bug and
you can put only one URL in your code so
let me bring some what and Silva's also
have some very nice operator that do
something like this
and goes to zero right and it works and
of course many times you hear something
many times you hear about
self-documenting code and guess what
seahorses have has the way to document
code without comments you can do it like
this right doc and the thing is that you
probably think that this pink will print
what and some question marks but in fact
will print what and line because we have
three graphs in C++ okay
did you know that you can put every you
can start every broke with a try-catch
block so you can do something like this
right so this looks madness but in fact
this is the only way to catch exceptions
from initializing list so in fact this
is not one this is like this is very
nice feature right but of course if you
will see the first time then this is
probably what
okay so in this example we have a type
def long alcohol we have two functions
first that takes on e-bay and sign ll
and second that's safe assignment long
and then we call function with two euro
and you will probably think that this
function this thing will not compile
because we have the same signatures
right and the fact is that it will call
the second function at everything will
compile and this is because you cannot
below types like this after unsign dll
is it's only a variable name so what
okay does anyone knows how to call
destructor explicitly nobody okay so of
course you cannot do something like this
right
because it won't compile the integer tcp
of these so you can it doesn't have any
memory functions but in fact you can do
something like this so as you can see
we're using using and then we can call
this structure on it and this is totally
fine what
okay so let me tell you a story about
Nick Levitt TV Alec
so there was a contest called undefined
behaviour consents consequences contest
and Nick was working LVM clonk team in
Google and he found out this code which
has undefined behavior but it's you can
probably not see it on the first time
and what he did is he wrote special I
think to the compiler so it will compile
it in a funny way so you can see this
code is very easy right we are calling
malloc then we are calling realloc on
the same pointer which will return the
same the same pointer then we are
putting one to this pointer then too and
just to make sure we are checking if P
equals Q Q and if you will compile with
Clank you'll be like yes so I have these
two pointers that puts the same value
which is one and two right this is like
and I'm not even mad about this
this is amazing and in fact the
undefined undefined undefined behavior
here is it's when you use pointer P
because you cannot see use pointers
after after reorge and this is this is
not something that's everyone knows
right okay what will happen and you know
of course in C++ this thing you would
probably feel like okay this thing will
either clear or it will it will do
nothing right
and in fact Civitas is some kind of
quantum language and both things can
happen right because this undefined
behavior and you know I didn't have an
even comment for this so I will just put
this cat okay so this function calls
looks perfectly fine right and in fact
the second line will not compile because
we are calling my I mean within an login
right this is obvious and for example if
we have a function that takes one
integer and we'll put extra parenthesis
then of course we will call this
function with five right this is obvious
okay so let's see some cool
optimizations so this this function of
course has undefined behavior because we
are trying to access the fifth element
of the of the table and if you compile
with Clank it will produce something
like this return true and you will be
probably like excuse me what are you
doing
and in fact the client is doing a very
good job
it would probably ask like okay what why
does it it doesn't return false or
something so in fact Danny finally
behaviors only triggers when you hit the
fifth element so clunk assumes that will
not get to the undefined behavior and if
will not get to the any behavior
which means that we'll find the thing in
the table so just return true what okay
so this code has so we'll check if
Fermat loss applies so we have with
three integers we have we have loop that
will never end
right if of course if if the law and it
works and this code doesn't have any
undefined behaviors
there is no integer overflow anything
like this and if we will call this
function and say like okay permit us if
will return one that means that the
afirma doesn't doesn't work right and
we'll probably never return zero because
this is a infinite loop so it will
compile with Clank what you will get is
Fermat's Last Theorem has been
disapproved it doesn't work and you will
be like what's going on right the
comparison is not smart enough to
disapprove laws or something and in fact
this is 100% standard compliance because
if we have infinite loop or something
like this and it doesn't have it doesn't
modify any by our integers or something
like this it doesn't change it doesn't
have side effects then we can optimize
it away right like this we don't have to
prove that this this loop will ever end
so we can just return one okay
so many times we have something like
this we construct another set and then
we want to want to copy everything to
vector and sort it and this this codes
if you if you write it and you run it it
will probably seg fault and this is
because we are trying to build good
visitors then the vector good visitors
with itself and you're probably like
what's going on but why does it even
compile if it's obvious this is this is
wrong right
and in fact Zbyszko standards have a
rule that if you declare a value if you
declare some object you can just use it
whatever you want and in fact this is
the park this is very useful feature so
I guess all of us ever have ever used as
camp scanf right and all of us forget to
put the ampersand into in before the the
thing that we want to put the value
inside so guess what I have solutions
for this okay but firstly I will show
you that what what error will get if you
will run gdb it's like segmentation poll
no such file or directory so useful
right so I kept solution for this kind
of thing let's just assign value to the
rest of the of itself right and now if
we call scanf everything works we just
put the address okay
so let's talk about braces so in C
versus 11 we have something called a new
syntax right to initialize variables and
this is a brace in initialization so in
this in this example we are trying to
build a vector with one string inside
right and of course this thing will
produce one and and print the element
with cific on and of course if we will
put the three variables the same thing
will happen right will have three
elements and each of them will be C
become and in fact it will put two
variables then of course this thing will
happen
and the the most funny thing is that if
you put the two other variables then it
will crush and so of course what
programmer meant and you know this is
supporters right so so of course what
what program meant is I want to do
something like this right instead of
putting these Disney syntax I want to
put just construct Iraq this or I want
to do it like this right and what
compiler did is that okay so let's build
the vector from initializing list which
is which is okay but then hmm let's
build this roof to iterators what can go
wrong right okay thank you
and in fact I have one minute more so I
can I can show you one thing so I would
just only have time to ask you one
question so how to define a function
that you will not be possible to call in
any way and what I mean is we will not
be able we will not have any syntax to
call this function so I will give you 30
seconds to think about it and I will
give you the answer oh okay wait 30
seconds of course I'm I'm not I'm not
talking about things like marking
function as delete or something
everything has to compile we just we
just don't have any syntax or way to
call some function okay so who knows we
have two people free maybe okay no I you
can call the main right why no I mean
you can define some other function that
will call main right why okay I have
other solution which is much smarter
so if you do something like this this is
just inside destruct or class then we
will not be able to call either this
constructor or this operator because the
type of the tea will not be the compiler
will not be able to deduce the type
right and because those two function
doesn't have any name we cannot specify
the type right this is very smart all
right okay okay that's all I got thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>