<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2015: Joshua Gerrard &quot;The dangers of C-style casts&quot; | Coder Coacher - Coaching Coders</title><meta content="CppCon 2015: Joshua Gerrard &quot;The dangers of C-style casts&quot; - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CppCon 2015: Joshua Gerrard &quot;The dangers of C-style casts&quot;</b></h2><h5 class="post__date">2015-10-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DAvZ3OG9cNo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I don't like c-style castes unless you
have one very obscure use case and
there's a point again brilliant
so the dangers of c-style castes so I'm
gonna lead by example here so here's
some code looks fairly innocent now who
thinks this will compile about half of
you okay it will and you won't even get
a warning for it but if you were to use
the variable Y then you'd be into the
wonderful land of undefined behavior so
we certainly do not want this and this
is down to the use of a c-style cast
take this for example
all I've done is change it to a static
cast you think that this will compile
absolutely nobody and they're correct
so you just avoided undefined behavior
here simply by using a static cast and
being a bit more specific about what you
want so another example we've got a
forward declared struct T I've got a
Const float who thinks that will compile
relatively fear of you well sadly it
will we don't even have the definition
of T at this point but it will still
compile it will throw away the
consciousness and we'll be into
undefined behavior once again and nobody
wants this right so if we should just
use a static cast instead you think this
will compile nobody and you're correct
so once again we've been saved by using
the static casts in this case instead of
using the c-style cast where we could
have these silent little errors and in
fact I've seen this causing bugs in
production code I won't name the company
but you
does happen it's not just contrived so
what's going on you know why does that
code compile why does it even work
so quote from the standard I'd have
paraphrased slightly too so it makes
sense out of context so the first thing
the c-style cast is going to try as a
const cast i mean we're already into
dangerous territory here we don't we
don't generally want this but if a
contrast can't be used in the scenario
we've used the c-style cast will give a
static cursed
it's normally what people want when
they're doing a cursed with an Asterix
which I'll explain later it'll then try
a static cast followed by a Const cast
so it's you know it's gonna desperately
try to do whatever you ask it tastes
like it's trust the programmer they
clearly know what they're doing we never
make mistakes right and if that fails
it'll try reinterpret cast it just keeps
getting worse it doesn't get any better
okay and if that fails it'll try
reinterpret cast followed by a Const
cast so it just keeps falling down and
down and I've only ever needed the
latter once ever and it wasn't the
nicest bit of code so generally speaking
we want the static cast yeah so now I'll
explain what what what's going on about
Asterix well when you're doing a c-style
cast when it hits these static kerf
parts it can do a little more than a
static cast it can do this and now I'm
not going to explain all of that you can
take it as your own reading it's in the
standard but if you've got a private
base class and you want to cast to a
point of that type generally speaking
you can get away with it with a c-style
cast that is the only time you should
ever be using these c-style casts and if
you need to do this anyway you should
probably rethink your code in the first
place so that's my presentation please
stop using C style casts and use the C
C++ cast that you meant
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>