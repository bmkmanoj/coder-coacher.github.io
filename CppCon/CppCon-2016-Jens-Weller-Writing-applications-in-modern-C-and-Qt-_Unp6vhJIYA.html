<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CppCon 2016: Jens Weller “Writing applications in modern C++ and Qt&quot; | Coder Coacher - Coaching Coders</title><meta content="CppCon 2016: Jens Weller “Writing applications in modern C++ and Qt&quot; - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/CppCon/">CppCon</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>CppCon 2016: Jens Weller “Writing applications in modern C++ and Qt&quot;</b></h2><h5 class="post__date">2016-10-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_Unp6vhJIYA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I would like to welcome you to my talk
and I decided to speak this year at CP
pecan about my experience and writing a
larger application was modern C++ C
purpose in heaven etc cute and I was a
used boost and modern C+ process for me
a bit of a synonym of boost and new
standards but more to that later and
yeah quick on production about me in
2012 I started meaning C++ which is
today my main job as a C++ evangelist
and tensed you you might know me know me
from social media other talks I've given
or the meeting C++ conference which are
organized and in Berlin each year and
which is kind of the counterpart in
Europe to this conference and previously
I've been working with SSDs was free
dancer and also had have some background
in the telecommunications industry and
first learn tenancy first was some 98
and I'm also a big fan of user groups
and this is a very important part of the
meeting severs past project every dot
here on this map is a user group that
has been at least active since 2012 and
most are still active and say about 75%
at least are like connected to meeting
C++ and related to that and I regularly
try to help them to yeah get new members
and keep running but actually about user
groups and community there's tomorrow in
the lunch session if you're interested
in that please come there to daily topic
is a different one I wrote CMS and C++
but it's forced to take websites so it
does not have anything to do with
servers or anything that direction and
the other goals I had was this project
from the start was I just wanted to see
how far can I use modern C++ in
combination with cute and all
and to which extent I would have to use
booze and to the extent I would be able
to use the newer standards and I also
found out that I don't want to focus on
the code as he like focusing on like
what did I need for writing the CMS
because it would give a lot of people
the the wrong focus on the talk and some
people probably would be not like
expecting the wrong thing from the talk
and I more in my interest to just to
share my thoughts on the project and the
the the experience I learned and the
techniques I used because I think it's
probably more useful than so many people
are probably not writing SEMS in C++ so
yeah as a previously said in modern C++
as the focus and patterns to connect
this was cute
and in August I did over my Twitter I do
every every then in our survey as
Twitter is not able to do that and I
asked what is more on sleep as possible
is that and a lot of people have a
different opinion more and you saw the
keynote this morning the modern super
stressed frame is very different it does
not mean the same for everyone and so
there's the book from Aleksandra school
which is called modern c++ design then
there's the new book and a lot of people
which I just came to C++ and know Scott
Myers they they think that this book
defines this term or that Scott Myers
defined the term some people think it's
the new standards and for me the new
standards are not necessary
modern C++ for me the new standards are
just super sets what we do that is kind
of what what some people called the new
C++ boost this for some people are not
more on c-plus present for some people
at this and I kind of have sometimes see
the yeah
is it the buzzword you know and so what
I found out is it really really depends
on your audience and who you're talking
to if you had C++ now of course boost is
more than C++ if you're talking to to a
lot of people today
now thinking that the new standards
replace boost so they think that modern
C++
not anymore part of boost or is like you
know getting out of boost and on the
other hand in my opinion what would I
want from C++ is I want to use the right
tools for the right job and just to use
the standard pressure and currently have
on the compiler I use for the fullest
and as some of you probably know it's
not always the new standard which you
have this your current compiler so and
on the other hand I I was asking myself
where did this term modern C++ originate
from and so I contacted Andre who wrote
the the first book which basically used
that term and because I thought maybe he
knows more about them he says yes so and
his understanding and Scott Myers agrees
with that he Rx and rescue coined that
term and for him it means the term
refers to a template intensive generic
start of writing code so if you want to
have a definition of modern C++ this is
the one valid definition kind of okay so
and as a previously said it's the the
term today is it's kind of difficult to
use as it can mean a lot of things for
people and so you really have to know
your audience but if you you know
communicate with your co-workers do they
understand the same thing under more on
C++ then the other team and so on the
other hand from from from my point of
view how I want to use C++
I want to write less code i I like
templates because unlike object-oriented
code they are usually better reusable
and you can have smaller parts of
templates just handing one drop and you
can reuse it somewhere else
one big thing which is currently coming
with variant and other things as just
the whole topic of static polymorphism
and as I mentioned the C++ standard is
always orders depending on what platform
you're currently using what compiler you
are able to use on your job and on the
other hand part of the scope of this
talk is also cute and I use cute heavily
and so on the design principles and how
cute uses the API isn't a POS there was
lost yet my conference a very good
keynote by last night so if you really
want the full session on that that's 90
minutes like just the design principles
of cute curious but very much after the
the impression of using C++ like Java
C++ was classes that's where kind of
also kind of like to better their see
the JDK of C++ and it has a heavy focus
on usability on not exposing like modern
C++ to the user but it's just a
different style and my opinion it's very
interesting if you really want to
understand all of C++ you have to
understand how people use this style
this style to really build great and
important applications first cute really
is this not like NFC a part of the past
it's still there and it's driving and
the community is really there and cutis
growing and they actually the next
version of cute they have speak
recognition in C++ available as a
technical technology preview so there's
a lot of features and cute available and
still coming which are interesting for
you and I also decided to show you a
quick a screenshot this is a cute
program so I have a tree I have several
widgets which just display data and
basically if you if you double-click on
an item and the tree you get to open one
of those widgets in the tab control and
in the striatum also and it's tree tree
view also lifts context menu which will
have some role later and just to to have
a quick overview overview on my
application I have two layers
one for cute on four standard C++ and
boost for simple reason while working
for years was cute and on the other hand
also being exposed to a lot of ideas
coming from boost and visiting C++ an
hour since 2012 every year I kind of got
to feel this framework Block in which we
have as cute if you have a cute program
and you usually already have a solution
which isn't cute available so you don't
you don't necessarily need to use a
standard or need to to have the need to
use boost and on the other hand I see my
professional as being a C++ developer
not as being a cute developer so that's
why I decided I want to have two layers
like cute only for the UI mainly and the
other layer in standard C++ induced this
is also a separation of licenses the the
UI part I could only licensed as a GPL
or GPL and the the other part I could
turn into a library and make it
basically available as a boost license
which is a force for some people
preferable and so I might do that later
but currently the project is far from
that and I'm gonna come back to the
product every every now and then in the
talk and one thing I start noticing has
a community manager there's a lot of
tension and the community and the
opinion what to use and boosts this in
my opinion so use for a lot of features
are there which are usable which are not
in the standard and suppose for 17
features and 14 features and library
features which are other standards
probably coming already available in in
boost and on the other hand the these
dependencies often bring the need to use
in your code which you're writing the
dependencies to boost especially boost
bind and boost function
and on the other hand the standard the
libraries from boost are not copied on
the standard they are reviled by a
committee and usually the the not
usually I mean the standard does not
depend on boost so the the dependencies
are replaced and this means that some
part of the of the standard might not
offer all features which the boost
library office because a boost LaRue
might have some interaction with another
boost library which is not in the
standard and answers part is removed or
um yeah so and the OSI I hear this like
yeah but we don't need anymore we don't
have this dependency and we don't have
the spirit dependency anymore but
actually you know the the the the most
features which are currently in the
standard from booster header only
libraries so you don't need to build
them anyways and on the other hand you
have the disadvantage that of course the
platform usually needs to have this part
of C++ already in support
so um I'd like to present a little bit
of the code I used to connect mainly
cute or to write templates which I use
was cute and I had to to to often to to
write like code which is like living and
the standard layer and then gets
mirrored into the cute layer there's for
example the tree and the factory
those are like completely written and a
style that they are independent from
cuter but they're used in cute then and
the code in the UI and I host had also
to find some solutions to transfer the
data out of qubits so as I saw I have
this tree and the street is in a tree
view and the street actually contains
the document which I work on or the the
website I work on and this tree has a
very simple setup so I decided against
having classic
tree was object-orientation where you
have like a base class with three node
and then you derive like a directory or
a page note for like having a website I
decided to use boost variant and I also
had one important thing which is
mandatory from cute I have to have a
pointer which is stable in memory and if
I don't have that cute were at some
point access pointer of it it's not any
more valid than the finance so I I
decided to use shared pointer here and
drive the class from shared from enabled
shared from this and that this of course
also because I wanted to be able to have
the option to go from from one note to
the parent so I have this weak pointer
pointing to its parent and of course
like a vector of item T which is
basically the the pointer to this object
to this object for the children and I
mentioned when you double-click on the
tree somewhere I needed a factory
because I wanted to them to it I have a
certain ID and this ID is basically a
type it's a hash type like type ID and
hash gets a hash code it gives you this
ice-t hash in this case and for this
factory I I thought I years ago had seen
that boost actually has something for
factories it's a small library it gives
you a callable object which will create
just you know like a factory an object
and so I was able to use this but I
wanted to wrap this and to like my own
class because the the boost factory
library only presents you this caller
but it does not have any facilities to
like the factory like for exam
modern c++ design was described so I
need to have a flat map flatmap which
goes from the the type I want to the
callable which actually creates a type
and then I have to register that and
here again we have this dependency to
boost function I mentioned so this boost
function in this case arm you use boost
bind plug-in the boost Factory and then
you just have to add the the arguments
to the factory and when this is caught
and create you to see the the arguments
are a template a very addicting plate
and the arguments are then just
forwarded into this core of the boost
factory object in theory you are able to
use sed function here because you can
put an STD function object and a boost
function object and I tested this years
ago and it worked I thought well this is
a great intro opera you know it's like
you can use that and it but then SDS or
this code because I was again and if you
really need to use a sed function you
can put it in a boost function and it
works and as the L so this cotton is
like yeah it works but it's like a
really better idea so you shouldn't do
that so maybe you can you know you use
some misery to to replace this was a
type which uses a function in a better
way but currently yeah I I don't mix sed
function and boost function in my code
and then I use this very similar pattern
to create a context menu or a class
which basically handles context menus
for me of course I have one and I
currently don't have the the option to
reuse this anywhere except there but if
I if I need a context menu in the future
I could just use this template
and so cute sees a menu as a list of cue
action pointers that is why we have now
a map which is again a flat map of a
hashtag which is a size T in this case
and a cue list of this which is
basically than the menu for cute and and
the code which displays this menu I have
to call the exit method from Q menu and
the menu is displayed and it returns the
result of the of the coil to this menu
if the user selects something you get a
pointer to this Q action object and if
the user just clicks somewhere else and
makes a menu go away this pointer is
another and hence we have to check this
pointer for novel and if it's not now Q
action the classic reaction is able to
to hold it a Q variant and a Q variant
this actually kind of like in any and
hence I can put anything in there as the
kind of the ender and so I've used a bit
this data method from cute and have
again a boost function in here which is
the signature for for the handler which
should now which is basically this is a
lambda now call it in the real code I
just hand over a lambda or use boost
bind to to bind this to some method and
I just and you can use a city forward
though if you call a boost function
without problems and then I had also one
one decision I had to make us how to to
get the data which is edited in a form
back into my model because all all the
data at the end lifts in this model
which is far away from cute so I have to
offload the data which is not a big
problem but I also have to decide how do
I set up my coat that I'm able to
just to to to transfer the changes that
can to my model and I did not want to
add for each simple text box I have a
handler which handles some weird event
and does this like for it for each cube
it reads it can be different and this
would require to write a lot of
boilerplate code which we have generated
a lot of boilerplate code by cute I
decided to go different route and for
that I needed to be able to extract
basically the value out of a cubit and
the part where I see this cubed then
it's a queue object pointer this is why
we don't have a cubit and here's an
argument we have a queue object this is
the reason and then the the upper code
shows basically how I handle this I
there's a queue object cost which costs
us control to the actual type and then I
just extract the value and one of the
reasons I have to write this code is the
painful way cubed roots store their data
cute wants to be very usable and that's
great but a cube visit itself does not
have like a an interface to get the
value of that widget which is like
Generic or like like a virtual function
like a value function which probably
could just return a cube variant and
then you would have the data wrapped in
this queue variant and it's another
place you wouldn't know which if there
is a string booed on it and you could
return it again to some value or visit
it so I have to kind of write all those
methods and this was a little bit of
boilerplate code but once it's done it
works the next step was I had to decide
how do i or when do i extract the data
and i decided every time widget loses
the focus i make sure that i transfer
the data back
to the actual model which is and some
parts a little bit of an overhead but on
the other on the other part I just have
one one really one event which is in
every widget and I have to just install
this which is the next snort and then
this is basically the filter class which
has a callable we check of the type
which we actually want to filter on this
is the current type which is present and
in this case I have to call it words one
as a setter and one is a getter which
gets the extra object pointer which in
this case as I mentioned it's just a new
object but and actually a cubed in this
case and then um so the the traditional
way in object-oriented API is by cute is
you derive a class you special my server
to a function and then you do that again
for everything else for every use case
you have and since we have now like
callable objects and I have used boost
function for for some years before we
had lambda and the language was suppose
was 11 so I actually kind of used to
have like a caller but instead of that
as a pattern so I need to write some
event filter class because cute this has
to be a compute a concrete class because
Q applies can't be templates and again
we have a callable which we just saw the
filter class which is basically wrote
that and then in the event filter I
handle this and I just have to have to
use this interface if I if I ever need
to have the event filter again and in
the the widget itself has a method
called install it event filter and there
I just have to give that widget than an
instance of this class with the setter
and you see getter options set on the
other object so this is kind of a very
very many layers of
things which I get which are getting
called on and but it works and so this
is how I decided to do that and so far I
have not found a better method to do it
and yeah for for many for many code
bases where you have to override certain
classes to to just satisfy a certain
thing you can use the pattern to to have
one class which is generic and if you
don't have to have it as a queue object
you can make it a template which again
gives you more freedom in my opinion for
usability and just in this part this is
just the class which has to has which is
just acting as the event filter it's not
reusable reusable for everything else
and this brings me to one of the feature
which got me started and thinking about
writing SEMS acid I thought that some
clever people were able to run tiny MCE
as a text edit or inside cue to this
queue WebKit and I thought wow this is
great and then I figured out that this
code wasn't like perfect I had to hit
basically to implement this myself was
like a one weekend tag and then it
worked and yeah so I read to CMS for
websites and I have to be able to edit
HTML and physically edit or something
somehow I currently use in my own
application tiny MCE for my website and
so I wanted to continue using this and
in this year I wrote the import for my
blog post and I was very happy to try
out if I could edit my blog posts and
the in the class I wrote as the editor
and I figured out that the longer blog
post didn't display and it was some kind
of timeout or something it just was too
big and didn't run and yeah key WebKit
is kind of old and as with a version of
WebKit itself it's based on so this
g-57 there's a new version which is
based on blink and has a pure essence
API and so I started pouring this class
to to the cube appengine in the last
weeks as I kind of figured out that you
know I have to to go to a different
engine and to be able to keep using this
approach to edit my websites and
previously I had figured out like is
this a working HTML editor and yeah this
is last year and I showed this and this
is how it looks this basically is just
in the application and yeah tiny MCE for
did not run back then it might run and
the appengine I haven't tried that for a
different reason and so yeah this year I
found out a few other things so Q WebKit
is deprecated shouldn't use it anymore
you need to port to keep App Engine and
actually I am like Ming W that's my
compiler been for years and this was
cute five six they now even have the
five three GCC branch there so I'm able
to use it more as if it was 14 and makes
me happy but on the other hand I found
out that the cube App Engine under
Windows is only available in the visual
studio 2015 part so I had to see how to
get this running and there's this new
great feature in Visual C++ that they
have actually a to build tool only so
that you can get the the whole to shine
but you don't get Visual Studio so this
install it's a lot faster it's a lot
lighter and I can use it together with
cute creator and as I mentioned it's a
cyclone only the API from the Q App
Engine and the reason why it's only in
Visual Studio a variable I said
blink itself where it's based on that's
basically the engine chrome uses this
only available to build this visual
tributes to 2015 under windows and
yeah and currently I I really would like
to try that out and give you a little
bit more information about using this
but for some other reason we're soon
gonna see um my code currently does not
build this visual studio because I have
a different dependency and this library
doesn't bit and so I either have a
bruton application where I cannot edit
my blog post so I have a application
which doesn't compile as a current
situation and on the other hand in the
the part which does not use cute I had
the situation that I needed something
for file system access because until
then all the file system access III need
it I always said cute I always could you
know how you do it like an application
you select a fire or in each of lota
file now you need to see if if a
directory exists and that's it's so easy
just to use cute you're not gonna build
boost file system and see that
everything is linking and working to to
check it but directory exists so but on
the other hand file system is in the
standard known so I wanted to to see if
I can you know get around this and just
work this boost file system they also
know that from from a lot of my friends
from C++ now that people have been using
it for years and it's actually pretty
pretty well working so this example is
when I built the CMS I also had to make
some decisions how to handle some data
from for CMS like JavaScript files image
files or CSS files and I decided just to
handle that as a string of a fire
because actually record path for some
reason they're already like enough
editors out there and I don't want to
integrate in my UI and editor for
JavaScript etc writing one editor for
HTML or like hacking that together it
works as enough and I don't have the the
ability to get another editor running
there for currently and I just the the I
can
it justified somewhere else and that's
how they do things wrong though this you
might already have figured out this is
basically the function which loads one
directory every file into a flat set and
for this you need to have you can use a
range for loop which is then running on
a recursive directory iterator and you
need to have this recursive directory to
utter because otherwise you only get the
files in the current directory but not
in the directory is below and also yeah
in file system there's many many cool
features you can of course create
directories and you have this feature to
work with this weird overload of the
stash operator and then it's very easy
to work with it and then once you get
used to that you really start missing
that when you work in another context we
again with some other libraries in the
directory context also you can like test
if a directory exists or a file exists
in this case I use this to see if the
data file which actually contains the
data and from the project exists or not
and then I can load this from booster
Association and until now many many code
I presented us from last year so now we
are getting into things I have done this
year and one thing I really wanted to
check out this boost - there's a second
reason I started the project the cosign
I saw a talk about this at C++ now last
year from my caucus and boost ash is an
implementation of text in Rho which uses
a mustache format and from from the
feedback a head from micro and macro
also presented last year the library
here at CPP con but there wasn't
parallel to my talk so I so I'm later
and asked him about the progress
and so the goal basically is to preserve
to have any type broken and you can then
just transfer any type in this text
template and it's kind of the goal is to
be a stable mustache implementation
which is almost true and you can take a
white gas boost ashes the reason I
currently cannot put the application
because this visual studio there's a bit
error and I talked to the Microsoft
boost the cost of that and maybe we can
solve it it would be really good but
then also I I began to research
moo-stache and I wanted to know is there
anything you know mica tells me or I was
in his talks as kind of this light which
almost says like any type and I felt
challenged by that and so I I was
looking like is there any type which is
not supported and is there any weakness
and mustache in the format itself and so
I figured out I might not have to use
vector buoy to test said but vector at
surface is a nice example and so
mustaches widely built on the dictionary
idea that everything has a name and the
name that has a value so I asked him if
a factor is supported and Micah had
previously already shown examples where
used vectors of course mark I said yes
and then I asked him what the name of
the vector itself US and he just didn't
understand that now I have a vector of
string and of course you know a vector
of interceptor would be the same so
moo-stache itself i mean if you use
after if you if you if you look that up
on google you find dozens of flats this
mustache and array or mustache and
string that mustache itself is not
really able to many implementations are
not able to to actually work with
something with just index based and on
the other hand areas and vector are kind
of popular and c++ so that's something
which i definitely want to have
supported and at the end Micah did some
research and actually
moo-stache and and and the actual most
definition there is something for this
but it's just usually not implemented
and they in the implementations and so
in in the def branch micro has
implemented this and there's like a
special syntax for that and then you can
also work on anything any type that is
like has an index operator now and this
is currently in the dev branch and on on
the other hand on the same I was
depressed and spring a happy problem
that I had still had to use C++ 14 I
wasn't able to use that and boost dash
was split on superfast 14 and so I had
to use the first verse 11 and back port
at the library so and my github
repository you find an implementation of
that running was the first verse 11 but
that was before Michael implemented the
support for vector which I currently
don't need but it's probably nice to
have and later I the try to build with
similar to you a few weeks ago and found
found out that there was a bit error and
but this was visible to you 2015 once
built errors resort I'm probably able to
use the dev branch anymore I then and
then I finally can move on from C++ 14
and this feared to that and yeah so this
is basically how I generate the HTML for
the website over moo-stache that's
basically the the goal of this to be
able to generate the code or basically a
no not the code the HTML for the off
sort and a previous mentioned that I
imported my blog posts because it's like
one of my goals that I want to keep the
the content of the website and I decided
to use tracing for that so I had also in
mind one feature I'm currently
implementing is something like a data
store so for my website this
like it can't look like feature there
you have a list of speakers or list of
talks and you just want to have like one
site which like is able to display this
as a list like like a table and then you
have another page which like is
displaying the items like like one
speaker one talk and these are the two
things I'm trying to solve as jason
currently as a data format the data
store uses jason as the storage format
on disk and the import kind of imports
the the jason which is exported from
mysql into a certain json format and
previously i've always used cute for
jason and this is the layer where timoni
is cute so i have to see what libraries
can i use and there's actually i was
looking like has anybody written
anything about that previously like an
overview and so I found a benchmark
which also pretty practical to see you
know which which libraries do we
actually perform and I of course you
know got the question I want to pick and
so yeah I actually cannot answer this I
looked at so many libraries but I
decided that maybe maybe I'm able to to
write like a little library which just
forwards my cards and to what I need
from Jason into like generic code so I
can reuse this and on the other hand the
criteria to - you know how you use cases
for me it's API and usability is more
important than speed and for other
people it's the other way around and
then on the other hand I I wanted to
have like my own API a little bit for
the reason that when I want to change
the library I don't want to refactor
like oh my coat and like in two years I
found out well this library try use this
bike really good but it's not anymore
anymore maintained and maybe I want to
change this to to a library which uses
and C++ 17 or something
and for that reason I thought maybe I am
able to to have like a layer in between
which just exposes its own API to UM to
to to my code and then just uses the
other libraries and in that case I
always just have to exchange the library
so and I had this idea because there's a
library that does this for for XML
it's called Arabic um and I have never
used it but I've seen I've met some
people which do and it's actually kind
of an interesting approach arabica lets
you like use different libraries on
different platforms for xml and hence
you can always use the fastest library
and or you just can use different
libraries for different approaches like
if you if if you have one place you need
speed and the other place you might need
some other feature which is and one
library not existing and on the other
hand I want it to be able to use this
boost fusion and Hana how its upcoming I
currently don't use Hana but Fusion is
good and Hana is it's not like based on
fusion but it's based on the ideas from
fusion MPL etcetera so this is an
important point for me and so lets you
see the import as an example I need to
be able to have a mapping from the JSON
itself to the member names because I
have like some some weird UI import this
and I want to be able to just say this
is adjacent field and this is a data
view very very important so I hence I
have some some weird string which is the
name of this this field and my type and
I can generate this member name this
post fusion then I need to traverse
adjacent data and have some sort of
visitor which is able to to call for the
right field this the right very users
code to say here this member name from
from Jason goes into this field and yeah
this is kind of thing as something which
usually is office reflection which of
course you know this is so greatly
supported and C++ every again I have to
to fall back to boost fusion to use this
and yeah so I have one class which is
called list entry because technically I
keep my or my blog entries like and one
one list like structure and so I I need
to use post fusion edit edit e here
because I use setters and my variables
are not public they're private and then
I need to hack a little bit of boost
fusion because unlike the boost fusion
adapt struck boost fusion at ATT does
not feature this ADT member name and so
I need to kind of emulate this and so
every time I I have to use a Titan this
I have to write this boilerplate code
which is a little bit annoying but on
the other hand I have to do this once
and then I can use this and yeah as I
said I have to define this for each type
and this ATT boost fusion macro and when
I defined this macro which basically
emulates what the the macro phone boost
fusion in this case is not doing and
then I have to call this for every
member and the extension name space from
boost fusion and this is an essentially
used in a struct call it set value which
iterates over the fields from boost
fusion vector and essentially this is
the the members of this class then and
in the background you have some weird
proxy on going from boost fusion which
then calls easy
in the ghetto when you call it when you
assign to this and yeah so this is
basically what the set feud method I or
which I just said in one of the previous
slides so this sequence is a type itself
the name and the value are what I want
to assign and then in the if I have to
see at compile time this generates the
code and I see each time I'm in this
member and this is the name of the
member which is this fusion extract
struck member and then I have to call in
a sign method because I cannot really
assign it here this would get a compile
time error because this method is
compiled and generated for each member
and those members can have different
type and that can say well I cannot call
this with this type that's why you have
to have an assignment to actually do the
work of the assignment and then the over
the correct overload of a sign is caught
if the types are matching and and the
other way the set value is called again
in recursion this the type the name and
the value and yeah now I just need to be
able to to traverse our Jason struct and
get this quote in a certain way running
and so most Jason lips have no idea that
a tree or basically their tree is
spectra visible and rapid jason has
handler visitor which you will it just
can write to visit certain fields in in
the day some structure and every other
jason libraries like no that's that's
something they don't know and you have
to write that your own you have to write
your own code to iterate over this and
they don't have the struggles and
mechanism and
meant it and hence I had to implement
that myself and had to you know as I
said I want this generic layer between
my coat as kind of a firewall and I know
I want to be able to use them
differently I want to be able to switch
and easily without getting a lot of work
and refactoring so and so I had this
weird weird idea what if i if I'm able
to find it right for has member and
turns out boost has that so boost can
tell me of a certain type has a certain
method and hence I'm able to use enable
if to kind of switch on and off methods
and so I can read multiple methods which
like use internally like the the needed
interface of the library which I want to
use whisk and then at compile time
magically the right method as like you
know in later it was enable if and the
rest is just ignored by the compiler and
it turns out that you also can do this
with the auto return type deduction when
you use sticker type and then you can
just right there T type and this will
know this method will only be used if
this T type was actually there and the
last that's also important the last the
last member and this list has always to
be the the return type this is then a
method which returns void in your same
tool and as possible that's all the
types are supported there and this is
how this looks in the actual code you
just but it's actually an early example
mostly you have this enable if and I use
but of the boost library now there to do
that to have that in a different context
better working and if you use enable if
you often have that in the return
and then I had to decide which Jason
virus I want to support and I had kind
of to do a code review on most of them
and yeah this doesn't fit on a slide
there's a lot of Jason libraries and I
used currently repetition which is one
of the better ones and I do like that
but um I have seen a lot of other things
so if you use an external Jason Larry
you really have to have a code review on
it and on the other hand rapid Jason is
rebuilt for speedin
but it's also kind of API were just it's
an older library it's not modern C++
it's it's kind of feels like a little
bit like an alien in the code you use
and on the other hand and they're
probably when some of you want to know
how about modern Jason which is also
very popular Jason library which uses
modern C++ and for a long time I thought
that's a great library but then I
figured out that the get method from
modern Jason returns a copy of the
object and that there is a get ref
method if you want to have a reference
and I find that a very bad style because
a get method is like almost every
library has said and in the Dacian field
and then yeah it returns a reference
usually so people might expect to get
method returning a reference and so you
might get a lot of unneeded copies if
you use this library and they're not
aware about this and on the other hand
yes a lot of libraries using object
orientation or in ohms for representing
the Jason value itself the the the
standard type for having an object as
map or a class for that and Eris I
usually STD vectors or a class for that
and in my own and my own framework for
generic Jason I have had to implement
Jason value of course which reflects
that
right my own Jason traverse' for all
those libraries which do not support
this then I had to implement it Jason
visit our template to enable this and to
make it usable from our own purposes and
of course some method which turns a
string which comes from somewhere into
this Jason value and the status of this
it's a prototype or I want to refactor
this and get it out in a library of its
own though I can put it on github and
people can take a look at it but for
myself I found a lack of time and have
lack of use case because I use no
reputation and I have the API kind of
working and if I need to switch to a
different library in the future I could
just start working again on this code
and I have other needs to to actually
get the CMS working so this is currently
kind of dormant and I probably put the
library itself on guitar some people can
take a look at it also a feedback from
C++ now made me little bit not sure if
this like is the right approach to do
with or the enables and this code is
kind of finicky and this is really
compilers everything and does it really
like the right way to do it it's that's
an interesting discussion on thoughts
which brings me to the conclusion
encodes as I said I wanted to just do to
share my experience as to how I used
modern C++ and how I combined it was
boost and cute and show you how I can
some of those approaches and only way to
that I had the pleasure to meet most
recent library sources probably also
interesting for a lot of you and yeah
booster SH has been last year a topic
here and so I started using this and it
actually a little library but it needs I
think a little bit more support from
potential users and as I said currently
it's not comparing those redistribution
2015 unfortunately but mean might get
this resolved at the conference that
would be really cool and on the other
hand on I am exposed to a lot of C++ and
the community I start noticing C++
changes currently we have
the C++ 11 certain things came for a lot
of people new like two plaits and I
guess you know the part of the audience
which is really liking to purchase
currently in the talk from last year
about two principal 417 and with
seventeen we get variant and then
there's the whole story of the compile
time libraries which are now really
advanced and compile time template
metaprogramming boost hana etc those
libraries are able to generate and build
and seconds what has taken minutes
previously and then I already mentioned
that static polymorphism gets more
important and the whole variant story is
connected to that and we'll go into
pattern machine probably and then as
Jana already mentioned unfortunately we
get modules and concepts not was the
next standard but we'll see standardin
hopefully Siebert was 20 maybe 19 of the
hurry up and this is the conclusion of
the whole talk and I take some questions
what I do
would I have those the question is that
what I do the same process again what
I'd use the same technologies yes
there's little code which I've written
which I had to change or refactor one of
that that's the reason why it's missing
is the theorization code which was a bit
complicated but I had my own method
there and then I found out it's it's a
better way to there's a better way to
use booster ization and that would be
the only thing cute itself as a library
for building a front-end for building a
GUI is still I think the best solution
that what I know so yeah
did I consider using boost property tree
for Jason panting nope I mean cause I
know that boosts property tree is not a
fully supportive Jason implementation
and if you is actually also in the
benchmark part of that here as like it's
yeah
and also it's actually known in the
booster community it's it's a big
mistake by a lot of people to use
property tree as a Jason parlor because
it supports only a subset what it is
ever wrote about it itself needs from
Jason but it's not meant to be
Jason library it's not meant to be boost
Jason it's meant to be a property tree
library so I haven't used it for that
any more questions
okay thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>