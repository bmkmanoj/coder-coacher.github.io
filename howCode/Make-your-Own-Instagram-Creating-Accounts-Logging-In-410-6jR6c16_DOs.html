<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own Instagram - Creating Accounts &amp; Logging In (4/10) | Coder Coacher - Coaching Coders</title><meta content="Make your Own Instagram - Creating Accounts &amp; Logging In (4/10) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own Instagram - Creating Accounts &amp; Logging In (4/10)</b></h2><h5 class="post__date">2017-07-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6jR6c16_DOs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be using
air jacks to log users in and create
user accounts so the first thing we have
to do is create two more URLs for our
two edged axe pages so in URLs what we
want to do is just create two more pages
and of course we have to change our
views
and then we go back to our views and now
we want to create the view for our Ajax
page so we're going to create a view
called Ajax signup and what it does is
it creates an instance of a special
class called Ajax signup and that's what
we're going to do all of our validation
and it takes the post request because
we're going to send a post request and
here is the context this is where we
store all the variables that we're going
to put in our template and I've just
called it edge X output and the output
is whatever response we're going to send
back to the user and then we render the
view and we're going to just call it
edge acts to HTML because all of our
edge acts responses are going to lock to
see him and I just created the Ajax
login method so we don't get an error so
now in forms is where I'm going to
create this Ajax signup class so I'm
going to pierce these includes and we're
going to need these at some point so I'm
just going to paste them in at the
beginning I'm going to paste this in as
well so what we're going to do is we're
including JSON and our regular
expression library and then we have a
base Ajax class because our Ajax
requests are going to be quite similar
so we don't want to have a base class
that encompasses the core functionality
that every single day Jack's request is
going to have to deal with and then what
I'm going to do is going to paste in
these functions so every Ajax request is
going to have to deal with errors
success and items and I put I put is
obviously the I put items is what we
stand back when our request was
successful but you can see instead of
sending back a message we want to send
back data so we're going to stand back
row JSON out of the database and to do
that we're going to use this items
function next what I'm going to paste in
is this so ignore these two variables
for now so in our constructor whenever
we create an object on the view which is
when we run this line here what we want
to do is get the arguments out of the
post request we're getting the arguments
we're storing them in this variable here
so the first argument is going to be the
data in the post requests if there's
more than one argument there might not
always be but sometimes a worthy if
there's more than one argument the
second argument will be the user details
so if the user is logged in it will be
the details about their username and
stuff like that we want to assign our
user variable equal to the second
argument so now we can refer to our user
variable which is how we refer to the
user who's logged in and if they're
logged in they'll have an ID if they're
not logged in they'll be an anonymous
user they won't have an ID so we're just
going to say user equals an hour which
means user equals not logged in so I'm
going to scroll down I'm going to
implement our Ajax signup so what we do
is we create another class as you can
see the output method runs self to
validate and here is our validate method
and what it does is it grabs the
username the password and the email
either requests it goes to arguments and
it grabs the user
the password on the email and if it
can't grab them for whatever reason then
we're going to say there's an exception
on the request with malformed so we're
not going to proceed with the rest of
the code this means if somebody modified
their page try to send request to create
an account without a username or
something like that we would catch that
with our malformed request
so the next part I've just pasted in is
the rest of this function what we do is
we run a regular expression and we check
if the user name makes this expression
so if it contains just letters and just
numbers and just underscores that's all
the characters that we're going to live
and if not we just said the usernames
invalid and we return an error then what
we do is we check the email this is just
a regular expression that checks the
syntax of the email then we check the
user name we just check the length of it
we see if the length is less than four
and greater than 20 then the user name
is either too short or too long so we
tell them that we returned an error for
password it's the same thing for email
we're checking the length as well the
minimum length of a valid email is six
characters now what we do is we use
Django's SQL API to query the database
the way it works is we go to our user
model because that inherits from
Django's models we have access to this
object property so we checked is any row
in the database house the same username
is one when you typed in and we do the
same thing for the email providing all
our checks out creates a new user the
way we do that is we create a new
instance of our user object so what we
do is we just set the username field the
password field on the email field and
the password field is set using Django's
special make password method because
Django is going to take care of all of
our authentication and things like that
and then we run you dot save to store
that user in the database and then we
return success and kind of created next
we're going to do the login so the way
the login works is exactly the same we
validate the request make sure it has
all the fields it needs we do the same
regular expression the email to make
sure it's syntax is correct we check the
password in the email again and we check
if the email exists now we check if the
password is correct and when we check
the password is we use Django's check
password function we pass the password
in and we query the database using the
email that we just checked and we
retrieve that password and we check if
that password is correct then we can log
the user in so it's log the user in what
we do is we just extract the user from
the database so to get a user from the
database we just use their email and
we're going to get under rare box we
just get the first element under dr.
only should be one element so I'm going
to replace the Ajax login method with
this method this is the actual one we're
going to use we just create an instance
of our Jaxx login this does our
validation we pass the request to it and
here is the I put we get whenever we
validate everything so we store those
two so if the logged in user isn't none
so we're going to use Django's login
method to log the
user in and then much the same as before
we just store the I put in the template
so to use the login function we're going
to have to import this this is jangles
authentication module so now we've
pretty much done everything we need to
validate requests know what we need to
do is create our edge X template and
stand on request from my login page and
I create a current page so here's the
tablet for edge ax that HTML all we do
is we print out our I put variable and
we have this bar CF just because it's
going to encode things incorrectly so we
put this CF in just the tango don't mess
with the iPod we know what's safe so
inside of our JavaScript folder I'm
going to piss this file in I'm just
going to open it up
the code in this file I just got off the
Django website I'll include it in the
description and we needed to be able to
send Ajax requests with Django because
this code will include Django's
cross-site request forgery token in the
request and we need that otherwise
janggu won't be able to processes so I
got our signup form what we're going to
do is just paste this code in and I'll
explain it so I was including the
JavaScript file we just created there
now and what we want to do when the
document is ready we're going to target
this Go button which is just our submit
buttons we're just going to give it an
ID of go and one that's clicked we're
going to go to edge acts signup which is
the page you just created we're going to
stand at the username the password and
the email and if the response is
successful we're going to send a user to
the index page which is the login page
and if it's not successful we're just
going to print out an error the error is
just up here so I'm just going to piss
this code in here this is just the code
to print an error by default it's
display is equal to none so it's hidden
before this will work in the form we
have to include ahead and fails for
Django's cross-site request forgery so
to do that we just paste this and this
is just Django CSRF token so we're just
gonna piss this in here to protect
against cross-site request forgery on
our projects called insta pick not
instant and just before we can run this
we have to give each of these an ID user
name email and password so now what I'm
going to do is I'm going to try to sign
up so I'm going to leave the user name
blank just so that we get an hour click
on that you can see invalid user name
was returned and here is the response
from our server now just put in a valid
email and I'm going to create a current
now if i refresh you can see we have a
new user and that user as a password on
that user has an email next we're going
to try and log in so logging in is
exactly the same we'll just paste this
in we send a request we have to give our
submit button and ideas go we have to
give our email and ID and our password
under CSRF token because we're using
django to login we have to include a
last login failed in the user model
because we're using Django login module
so we just create a new date time field
and by default this is going to go to
the current time so we're going to
migrate that just add that new row
and now we're going to try to login
the page refreshed and if i refresh the
Django session table you can see now we
have a new session because that user has
just been logged in so that's if user
login and user registration so that's it
for this video don't forget to Like
comment favorite and subscribe if you've
any questions don't forget to Mme
Francis at haiku org in the next video
we're going to be learning how to upload
photos to upload care I know how to
store them in our database but that's it
for this video and I'll see you next
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>