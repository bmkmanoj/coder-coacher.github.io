<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 31 - Comments + Fixing Bugs | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 31 - Comments + Fixing Bugs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 31 - Comments + Fixing Bugs</b></h2><h5 class="post__date">2012-08-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5dlHzdg4vV0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I'm welcome back to this video so
today what we're gonna be doing is we're
going to be allowing people to comment
on the newsfeed of the social network
but before we get into that I'm just
gonna say for anyone that's asked me a
question that I haven't replied to it's
because I get like 20 questions a day on
it takes me just down to the mall so
what I'm gonna do is I'm gonna make a
video answering all those questions
really soon and I still read everyone's
questions I just don't have time down to
the mall so I don't think I'm ignoring
you or anything but no that's over let's
get started
so in the newsfeed I'm gonna add a div
above each one of the posts to sort of
continue like options like comments and
pokes and likes and things so I'm that's
what we're gonna do okay so in here
we're gonna and you give and in this
step I'm gonna go to start
oh no I'll just give it a class of
newsfeed post options I don't know so we
can copy this actually copy it like this
nope so no so I'm just gonna keep it and
although all the applications at work
yes that is the same so that it doesn't
so I don't get confused and it doesn't
cause me hours later so if we go into
the main CSS file we just go down the
line
put a dot and then we paste that in so I
won't and say here is woods
100% background color we want this to be
really light so where the background
color could be one on one one six months
let's try that and the order one pixel
solid and it's gonna be three three
three three three three
okay so now we've done that I'm just
gonna put some text and so we can see
the Dave and I'm just going to write
options so now we refresh like this very
ugly luck Dave okay so we can go back to
the side style and we're gonna change
this to nine nine nine nine nine nine so
that's why I lighter but it's still not
light enough okay try sneezies you see
seizing so that's still too dark so we
can try have to have to f/2 so I'm well
that's just about light enough we don't
want to be too light or too dark so what
we're gonna do now is I'm gonna actually
change this to see zzzzz so that the
borders a little less dark so I suppose
that's okay
and actually I could also get rid of the
border we could just add border zero
pixels so that looks a wee bit better
another thing we can do is padding so
the first parameter the potting thing
takes is the potting from the top so we
want 0 from the top we
want five pixels from the right view
from the bottom one 5 from the left star
we refresh as you can see it kind of
sticks on so what we can do is we can
also say -10 close so it'll take 10
pixels off which is when it when you use
padding it adds that word and if you
give it a potting and I'll go on potting
of 5 then it would add 10 pixels onto
the top and bottom I would add camp axes
onto the two sides so what we do is we
minus 10 pixels so that it doesn't come
out of the box so now as you can see
fits in the box a lot better and I
actually will do potting
in the top and bottom so I will just do
the same thing again and we don't need
to take potting off the top because it
doesn't matter because it doesn't matter
if it's pushed on and margin since we're
gonna take the top margin on here we can
just use margin top so I'll set 4 pixels
yeah actually margin bottom is what we
want so there's like that's like Gallup
here 9 and I we're just going to leave
that as options for the minute because I
just realized as you can see these
profile pictures don't work so that's
what we're gonna fix so the reason they
didn't work is because we haven't set a
parameter so we haven't set a default
profile image because as you'll see if I
go to slot cinema Terry's profile
default profile image shows up but it
doesn't show up here but if we go
if we just go home like see me make a
button but if we just go home
as you can see profile image doesn't
work so what we're gonna do in fix that
is gonna go to the root of the directory
and we're gonna go to profile up we're
gonna go to profile DUP PHP and in here
so I don't know what I just did but I'm
the quickest way to fix this is to use
the code we created last time and all we
have to say is the line I think we
already did this as well
yeah profile pic info so what we're
gonna say is if profile pic underscore
info close nothing which means basically
if they don't have profile pic then
profile pic underscore info equals and
we are going to just go open now we're
gonna go to user data or mopix as you
know we're going over the image look for
all files and it so it shows us the
default profile picture is in the
directory image slash default pic so
what we're gonna say a slash in image
slash default okay and just for anyone's
wondering instead of just using a slash
and getting the end looking for image
that's default pic in the root directory
we can put a dot before the forward
slash and it will look for image slash
default upbeat rock jpg in this
directory fine friends it's pretty much
the same as just writing um
another way to do it so if we refresh
nine we copy the image URL okay so
that's the problem it's looking in a
user data underscore profile pic o /b f
of X so where we can fix this by just
saying else and all we have to do is
copy this then just delete this so all
we have to do is assign the variable
profile pic the variable itself is only
so your sample topic itself and then you
just append the directories that we're
missing onto the variable so it's proof
of that underscore info which equals I
know as I said earlier it's just profile
pic I'm just walking foo with a dollar
sign to start to show it's a variable
and all we've to do is use to speech box
and the full stop to appends meaning to
the start and we're going to append user
user get a forward slash profile I'll
just go up the pics so how we can try
this now and as you can see the images
that didn't previously show up and I
show up along with the image if someone
has already uploaded a profile picture
but the other problem if defects
I go to cinema - they don't show up here
so we just have to where's all we have
to do is copy this code here go to any
profiles up the HP page and find posts
which is here so all we have to do we've
already got it so we can just paste this
straight in and all we have to do now is
remove this so now you're fresh and it
shows up as well as when you just go to
the other one it shows up as well and
these Shabak and everything still works
obviously so now we're going to go back
to the home dot PHP page and we're gonna
add a finish what we are doing so we're
going to actually go to a little house
PHP myadmin okay so now it we're in PHP
myadmin
and in case you're wondering the reason
I've shrunk it down so that you can see
it when I create some YouTube so what
this new table is going to be called is
post on their score comments and we can
just go into contacts I'm climbin up so
obviously it needs an ID the next thing
it needs is the body of the post and the
next field is posted to and posted by so
it looks like we need four fins or four
columns and when this loads as you can
see the four columns so as I said the
first one's ID the second one is body
and we could actually say
post underscore body the next one is
posted by and the last one is posting to
and obviously this one is gonna be text
these two are books gonna be varchars
VAR charlie in length you have to set
the maximum length and I'm going to set
it to 255 which is the maximum length of
a hot shot and in the ID column we want
to set the index to the primary key we
want to auto increment in each time okay
so all I do is hit save and we can
actually add one more in a column or a
row to a database table the end of the
table then I can zoom it back in right
so they call them we're gonna add is
removed post I'm just all removed so
that and my user can remove the post and
this one is going to be of type or is it
a numb and then we set default reset to
as defined and then all you type in is
two single quotes comma two single
quotes the first one these are like the
two parameters we give it so it can be
either yes for this so you could use
zero or one or we could just use no yes
so now we save it okay so I'm too
okay since that one didn't work it's not
a hard thing to fix all we do is okay so
am I was very stupidly I realized that
since it's an enum it's an um it's a
zine um so it's obviously in number and
the yes and no won't work so we use one
zero and one so hopefully now if we hit
enter so finally try to gain and we will
set it to a boolean this time which is
that a zero or one
finally we'll try it again so a since
it's a billion it's not meeting them
anymore we don't do that so we just
press zero in for to show the default
value is 0
we hit enter and finally it's added to
the table so you cannot close this and
what we're gonna do is on the home page
which we're on life and it says options
we're gonna say um comments and then
we're going to go to the boys it's me my
messages page now we're gonna go all the
way up to the top of this page now as
you can see in here we're just gonna
copy this and okay here we're gonna do
another MySQL query and we're gonna say
get relevant comments okay so we're
gonna say you get comments goats MySQL
underscore query and I we're gonna say
is select star for all from post
comments or user to equals
okay so change this means our two for to
post ID which will this is a column we
haven't created yet but it will be the
column of the post that the comment was
posted on so once again we have to go
back into the MySQL database hey go to
add a new column and we're just gonna
hide post ID and which is gonna be an
integer obviously and that's it we can't
save that's it out it I want to say what
post ID equals so I had to do this all
we do is in the gap posts query all we
did we got the I row ID so all we're
gonna do is first we're just actually
going to echo ID to make sure it works
and will comment this line on
so this should echo the idea very post
which is correct it shows we can use it
on a query so I have to do this and I
just delete this uncommon listening so
add today this always used ID that's it
so it gets the post ID from the ID yeah
no so it checks it gets the comments
associated with the specific post which
is what we want then we say yeah we just
said comment equals maestro batch ISOs
associative or a saw and get comments
and then all we have to say is all we do
is copy what was up here and just change
the values to my suit so now we just
paste it in the ID we don't need so we
can delete that one
the body is correct and so I will do
that I will just get the yeah right
variable to select from the right
database row so what we're gonna do is
just change this to comment body I
wanting to change all these to comment
so that it gets them from this MySQL
query which it's the rows from this
query underneath that was posted it
doesn't matter what order posted to and
hosted by I finally removed so I all we
do is copy these
and there it is so we've added now we've
selected the comments what we're gonna
do is and we're actually gonna put this
in a Wilder right we'll say swell we're
just gonna say while yeah comment equals
mysql fetch Assoc yes hawk I can't
comment then we want to select all these
rows for it for every comment so
basically it's just gonna find every
comment and what we're gonna do is just
echo oh man body okay so as you can tell
this isn't gonna give us what we wanted
but I'm gonna show you anyway and we've
got 0 it's double dot okay it's fixed so
this isn't gonna give us what we want
it's just gonna give us nothing because
there's nothing in the post comments and
database table so what I'm gonna do is
go here click insert and I remember if I
was right I think that was 14 the post
ID so I'm just gonna put this is my
comment posted back cinema so I change
this to cinema Terri oh man he posted
two to be cinema and the post isn't
removed well we haven't put a check in
for that so it doesn't matter what's in
here under the post we wanted to go on
yeah we can use check by right-clicking
new table and if we scroll down
you can see the latest one is post ID
for the latest ones a post with an idea
14 so I'm that means that I was correct
so I have we put in 14 here then she'd
show up on this post here that were just
above where it says comments okay so if
we just hit go down now we were fresh
okay so it says undefined index body and
okay so what we do is hot add some in
front of these know that stuff that work
that's because the variables haven't
been declared yet so it's not because
opposed are I'm the variable has been
declared it's because the row and we're
trying access doesn't exist so the
variable is getting a problem is having
a problem finding it and I remembered we
set those to post underscore so we'll
try that now i refresh we say this as
this is my comment and now if we go back
to post 11 that says this shows our
newsfeed is working which is this one
here if I go insert again and I said
this is another comment to show that
it's working once again the person who
posted it was at a cinema tarry the
person who received it cinema on the
post it goes on is post number 11 so now
I once again if we refresh up here we
see it says this is another comment to
show it the posters are to show that
it's working which means that our
comment system is it's very basic but it
is sort of working let's say we post
let's go back to insert unnecessary post
multiple and and post our comments on
the post so excess cinema to cinema and
then we'll back up to the other one so I
would post this and we will see another
comment here and as you can see they're
all and added one by one on the same
line so what we're gonna do to fix that
is here it says we're post id equals I
game we can also you say order by I yes
C which means ascending so means the
newest ones at the top at the top mmm
okay okay so we just say order by equals
ESC okay so had I was wrong I was right
I was more correct the first time it's a
small D Y so I all we have to do here is
order by ID AIC which will order it by
the ID descending which hasn't changed
but we change this to D sounding I'm
gonna fresh please change order so
that's how it works so now we're going
to keep it a day a single in a minute so
that the so it's like a big long
conversation and we're gonna go here and
we're going to know where is it here
words a good all we're going where I go
actually going to and control next
caught that we're going to join these
two together so we'll get rid of that
but the curly brace time
so as you'll see it still works but now
we can use both of them together so have
I that I used both them together I mean
we could be erratic me place this
comment body refresh but yeah this is my
comment when we have it all showing up
the way it's gratitude but that's
actually not what we want to do wait so
I what I mean goose it's not this sort
of anyone going for we're going to
actually create a link this link is
gonna go nowhere and it's just gonna set
show comments and we're going to use the
same sort of technique we used on the
messages page to hide and show messages
and we'll do that with the conversations
so let's do that now so I will go down
to my I'll go to my messages page so we
copied this JavaScript yeah copy out
will actually paste it in there so I
will paste it in the same place as
before let me wander just paste this in
okay so bad - it doesn't matter
okay so that doesn't matter it's a bit
messy but yeah so we're gonna say is a
toggle comment and just play comment and
well that's all we need to change so now
we go to the my messages page and where
is it
we go to
the armed here it is here the open
message button so we're gonna copy this
no no we're not gonna copy it we're
gonna copy on click function
now we're gonna paste the on click
function on one leg so worse here's our
link show comments and we're gonna just
give it an armed leg function of a
toggle ID and yeah took a toggle ID
that's one so we go to here the David's
toggle text we just copy it and we go
down we go back to the home page and we
paste this or we want the we want our
comments to show up so I'm just paste it
in here and I remember we changed it
from toggle tags the toggle comment and
then here we just put the comment body
and displaying on let's say to this work
square refresh syntax error 945 and I
already know why we have a syntax error
so I had to fix this just and the PHP
tags include that JavaScript and open
the Pete the PHP tags again and then
refresh so now if we click show comments
and says this is my comment and as you
see it's a bit messed up so what we're
gonna we're actually gonna fix that one
the reason this is masked up is because
we set we did a while loop to
display the comments so all we have to
do is flick the while loop oh no not
clean it we just remove the while loop
keep the variable comment then we just
go down here and delete this the reason
we can get rid of the wild lip is
because we did we have check I'll
explain knowing when I can show you okay
so go up here so the reason we can
the reason the wild lip isn't needed I
think is because we have work post ID
equals ID and then we have or by the ASC
for ascending so it orders every single
one that fits that query and displays it
okay is this like 81 and the reason we
have that is because we have another
wire loop so we can just go back down
here and just we up by undoing it I
added the curly bracket back in and just
refresh 9 okay so we definitely can
remove the curly bracket and it says
unexpected end which means it looks like
we haven't closed off one of our tags
correctly it is probably just a simple
one cock term stick so see
on the reason that didn't work is
because we put that in the wrong place
so we could try it here refresh but you
okay so it did fix our problem but it
doesn't work the way we wanted to so I
know for a fact we can't close that off
there
okay so just scroll down to the very
bottom of the home page hit enter and
then put a curly bracket in the bottom
fresh and the comments all work apart
from the fact it only shows one so what
we can do to fix that is so it turns out
that the solutions this problem is
relatively more complex and I first
thought so what I'm gonna do is I'm
gonna end this video here and in the
next video we'll take more time to
explain why it's more complex because
the first thing that I can think of to
fix this is to get all of the different
database rows into an array for every
single post like get all the comments
for each post and put it into individual
arrays and then just explode the array
or whatever respect so it's kind of
complicated but we'll get that sorted
out in the next video but in the
meantime thanks for watching don't
forget to comment rate comment like and
subscribe on them oh yeah as I said at
the start of the video if you have any
questions don't be afraid to keep asking
me I know I haven't applied to all of
them and but I'll be making a video soon
that will answer all those unanswered
questions so once again thanks for
watching and I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>