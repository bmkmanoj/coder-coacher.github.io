<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own Calculator in Python - Part 1 - Lexer | Coder Coacher - Coaching Coders</title><meta content="Make your Own Calculator in Python - Part 1 - Lexer - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own Calculator in Python - Part 1 - Lexer</b></h2><h5 class="post__date">2016-08-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Hh49BXmHxX8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this series what we're going to be
doing is learning how to create our own
calculator using Python we're going to
be using a library called ply ply is a
library for python that is essentially
just an implementation of lacs and yak
which are two different types of parsing
tools that are widely used by people to
create compilers we're going to use it
to create a simple calculator that can
value it simple expressions and we're
also going to add support for variables
the reason for this is because
eventually we want to create our own
programming language using Python
because being able to assign variables
and evaluate expressions are two of the
basic things that everything a
programming language should be able to
do so the reason we're using Python is
because pythons a nice language and it's
quite high level which makes
implementing complicated things like
compilers much easier essentially our
calculator is a really simple
interpreter so let's get started the
first thing we need to do is time to
apply so the way we do that is we just
go down here we click play and we click
on this and it will download for us now
what we want to do is you want to go to
our downloads folder and we have this
folder here we want to extract that are
we going to go into that folder so this
folder is the only folder we actually
need we could just copy and paste this
into our project which is here or we can
install it using setup top I so I'm
going to show you how to install it
first so what we want to do is want a CD
into this folder I only want to type
Python 3 setup PI install
so let's just run that and that should
have installed play for us if you have
any trouble installing it all you need
to do is just copy this play folder like
this and bring it into your project
folder like this but I don't need to do
that because as you can see play was
just successfully installed so we're
going to double check the ply installed
successfully so that when we do that as
we say Python 3 and we just launch the
interactive Python shell then we type
import play and you can see we didn't
get any errors which means ply has been
successfully installed because we were
able to import it so we're gonna exit
and we're going to go back to our
character actor II so if I go back to
the text editor you can see this is the
 directory and I was one hidden file
which isn't important and I was cocked
up pi which is the file we have here so
the first thing I need to do is import
ply obviously but what I want to do is
instead of just importing play I want to
say import I want to set import plate or
Lex Lex then underneath that I want to
say import played yak yak and then
finally I want to import assist which is
just a standard Python library the
reason we're importing apply like this
is because if we just imported fly every
time we wanted a reference Lex and we'd
have to supply our Lex but if we just
say import played out lacks a slacks we
can just reference Lex by your sang
lakhs instead of Playa del X which just
makes our code a lot cleaner so we're
just going to go to the terminal and
we're gonna run this for a set Python 3
calc table PI and we shouldn't get any
output but we shouldn't get any errors
either you can see we got no iPod but we
got nowhere as implying it worked
supply is an implementation of two
things it's an implementation of lakhs
and an implementation of yak what a
compiler is made up of is essentially
three parts it has a lexer a parser and
a code generator or some for some way of
executing the code that's generated by
the parser what Lac says is it's a lexer
generator so all we have to do is
provide it with some simple information
and Lex will create our lexer for us and
then the yak is the exact same thing yak
is a parser generator and we provide yak
with a grammar for our language because
our calculator is essentially a really
simple language and yak will use that
grammar to create a parser that's why
lacks is called a lexer generator
Jacque is called a parser generator so
what Lex does is it token eise's a
string so this is really simple math
expression and it's something that we're
gonna be able to evaluate so essentially
the way this will be evaluated is like
this
step one Lex will take this string and
it will tokenize it which is essentially
looking at every character in the string
and figuring out what it is so one is an
integer plus is going to be a plus token
and two is another integer so when the X
sees the string like this it will
produce something like this so these are
the tokens some of these are something
like the tokens Lex would produce then
Lex will pass these tokens on to the
parser which will check the grammar and
it will see if there's a grammar rule
for this and then what I'll do is create
a tree probably doesn't make any sense
in the minute but it'll make sense later
on in the series and we will take that
tree and we pass it to a special
function winner right called run and
that run function is going to evaluate
the expression by walking the tree that
Yak creates so that might sound
complicated but it's actually a lot more
simple and easy to understand than it
sounds so the first thing we need to do
is create our tokens we need to tell Lex
what tokens are valid and what tokens
aren't so to do that what we do is we
create a list is equal to an empty list
and in the list we're going to put some
tokens first token is going to be int
because that is gonna be every integer
so for example if it sees the number one
the number two the number 10 the number
100 whatever it's gonna see that Lex is
going to work like that as an int if it
sees a number with a decimal point
that's gonna be a float so when they
create a float token we want to create a
token called Neum and this is gonna be
variable names then we want plus minus
divide multiply and equals which is
going to be our assignment operator
which is how we're going to assign
variables so this list of tokens is what
our grammar is going to use to actually
figure out whether the grammar rule is
correct or not but what we need to do is
tell Lex what I mean to actually looks
like what a float looks like and what a
plus looks like so a plus one is easy so
to do that we say T underscore plus
because it has to match the name of our
token and TE underscore is just it's a
ply thing
any time it sees T underscore and a
variable name or a function name player
is going to assume that is you tailing
the lacs or what the tool can actually
looks like so for simple tokens we just
create a variable call it t plus for
example we're going to create a string
and we're going to put a backslash and a
plus because we want it to recognize a
plus as a plus we're going to copy that
and paste it and we're going to change
this to a minus
create a multiply T underscore multiply
t underscore divide
and T underscore equals
if I was to have for example equals and
then double equals a five so like
comparisons I would want the double
equals to be identified first otherwise
plywood c1 equals and I would say oh
that's in equals and it would ignore the
fact that there's a second equals after
it so if I was to have two equals I
would want that second token and before
the first equals so that the double
equals is identified first so we're
gonna have to leave it there for this
video in the next video we're going to
be completing our next are hopefully
which will allow us to actually see all
of the tokens from a string that we
provide the lexer so that's it for this
video don't forget to Like comment
favorite and subscribe and I'll see you
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>