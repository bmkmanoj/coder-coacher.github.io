<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 36 - Designing the Homepage! | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 36 - Designing the Homepage! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 36 - Designing the Homepage!</b></h2><h5 class="post__date">2017-04-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lj-6KIg6VSI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
learning how to design our index page
we're also going to be fixing a couple
of bugs you can see here we have our not
logged in masters being printed I
believe that we get this error so we're
gonna fix that so let's get started so
to design the website we're going to use
bootstrap studio so if I go to bootstrap
studio you can see here is a sample
design I've already created so you can
see this is what a post looks like we
have our likes here our comments here
and then it says timeline we have our
post and then we have some details about
the post so I'm gonna preview that in
the browser so I'm gonna click preview
I'm gonna turn that on I'm gonna go to
the browser so you can see here is our
simple design with some space up here
for a logo we have our search box we
have our menu we can click on our sub
menu or we can get some more options as
well I'm back in bootstrap studio this
is all created really easily this menu
is just a nav bar and that is just one
of the default components so if I type
in nav bar you can see there is the nav
bar that I use there the search box is
custom that's just a simple search box
that I made but all of this will be in
the source code anyway you can see
there's also an animation on our heart
so when we click on the heart and we
click play you can see there's an
animation we're going to use that
animation whenever the like button is
clicked so we're going to export our
design so we're gonna click on export
we're gonna choose a folder to export it
to we're gonna put it in the social
network folder we're gonna click open
I don't like export so now that we've
exported our code what we're gonna do is
we're gonna fix this simple bug in the
index page so to fix that all we need to
do is instead of echoing out not logged
in we're going to change echo to die and
we're gonna use this die function to
print are not logged in and then to kill
the execution of the page so that no
more code gets run and then this user ID
variable won't be undefined so if we
refresh you can see now it just says not
logged in in the error is gone so we're
gonna log in we have to login using the
old form because the new form at the
minute just returns the token in the
console it doesn't actually set a cookie
to log the user in so I'm just gonna log
in using the old login form so I'm
logged in and gonna be the index page
there's one more bug if I try to put in
a comment and I'd like to post I click
on comment you can see my comment gets
posted but my light gets taken away so
the post moves down on the timeline and
the way we're gonna fix that is by not
passing data in the address bar we're
going to be using Ajax so what we're
going to do now is we're going to import
our design into our project so to do
that what we're gonna do is we have our
design here we have our project here and
what we
is copy the assets and the index file so
if I just delete the path completely it
will default indexed at HTML so what we
need to do is modify our API to return
posts from the database so we're going
to go to our API and what we're going to
do is when we get a gap method we're
going to add another else--if and this
Alice F is going to be posts and if we
go back to the index page scroll down
you can see this is the code we have to
get the user's timeline so what we'll do
is copy this this will get all the posts
on the user's timeline so all the posts
from people that the user is following
will scroll up and we want to put it in
to our API and what we'll do is we'll
just paste it in and what we need to do
is change this query so that instead of
using our old class we're using our DB
object that we created earlier on in the
API series so we'll copy that
and we'll paste it in here as well and
we will delete the comments and what we
need to do now is get the user ID out of
the database because at the minute we
don't actually have the user ID because
on the home page we're guiding the user
ad up at the very top here we're getting
at one we're checking if the users
logged in but we're not doing that on
the API so what we're gonna do is we're
gonna get the token out of the cookie
because we're on the CM domain so we can
use our cookie variable and we can use
the s and ID cookie which is our login
token cookie now that means we don't
need to pass it around in the URL to our
API so we have our token and then what
we're gonna do is run a special query
that's gonna return user ID and it's
gonna be DB query and we're gonna say
select user ID from login tokens were
token equals token and then here we just
create our rare we pass in the login
token just like this and we have to
convert it to sha-1 because that's how
it's stored in the database just like
that and this will return an array so we
access the first element and then we
access the user ID just like usual so
you can see our posts have just been
displayed but we want them to be
displayed using JSON so what we're going
to do is instead of aggregate HTML we're
going to echo out an opening curly
bracket for the start of our JSON object
then we're gonna echo out the closing
curly bracket for the end of the object
and then inside the object we're gonna
echo out a string that says post ID and
we have to include a variable in a
string of single quotes so to do that we
write two single quotes and then two
dots and then we append on
post ID variable next we want to put a
comma in there we'll just copy and paste
this a few times and we have our post ID
a we have our post body we'll just set
posted by which is post username and
then finally we're gonna have our likes
which is going to be post likes and we
just need to make sure our commas are
actually in the string so we'll just
delete those
instead of acting it out will actually
create a string so we're gonna do is
just create a variable called response
and it's gonna be equal to a square
bracket in a string and that's how we
start off an array in json and then
instead of echoing out everything we're
just going to say at response dot equals
to app and on each of these items that
we were previously printing out so we
just replace all the echos and then
outside of the for loop
we're gonna say response equals a square
bracket to close off the array we have
to put in a comma here at the end of
each item just so that we can add more
items in and if we leave the comma on at
the end and we put on the square bracket
we're gonna get an error so what we want
to do is remove the last comma so we say
response equals sub SC our response
we're going to start on the 0th index
which is the start of the string and
we're gonna go on to STR land response
-1 and Amarula do is just delete all
these echoes in between so that it makes
it easier to read and we want to echo 8
response well they're quite some pre
tags as well just so they can read it
powder and we want to put a dot there
just to append on the last square
bracket and you can see here is all of
our JSON so now that we've got our JSON
in our response what we're going to do
is echo it out so with a KO response
another index.html page what we're gonna
do is we're gonna load these posts in
dynamically so we're gonna surround our
blockquote
in a Dave and the day's class is just
gonna be timeline posts and then we'll
put in the blockquote what we're gonna
do is we're gonna scroll down and we're
going to add in some jQuery and what
we're gonna do is we're going to say
document ready so when the document
loads we're going to run a function and
the function is going to send an ajax
request and we already have that on our
login page so we're going to scroll up
we're gonna copy this Ajax we're gonna
paste it in here we're gonna change the
type of the request from post to get I'm
gonna go from API off to API posts we're
not sending any data off but we're gonna
get some data back so our data is just
gonna be empty and then on success we're
gonna log what we get back and then on
arrow we're just going to log that as
well so now if I open up the network tab
I go to console and i refresh now you
can see here is our JSON and before we
go any further we just have a slight
syntax error in our JSON so we'll go
back to our API and we fix that our
syntax error is just we're not running
our strings in double quotes so we just
put in a single double quote around the
body string under around the username
string just like that and we should have
voted YES on though and we can check
that by saying json dot parse I know
that we've parsed our JSON what we're
gonna do is just store in a variable we
call it of our posts and then what we'll
do is we'll iterate through the JSON so
we'll use jQuery and we'll say dot each
and then we pass in posts and then we
run a run a function for each item in
posts and then what we're gonna do is
we're going to pass in the index which
is the first parameter so then we can
say comes with the log posts I'm a point
at a specific index and if we refresh
now you can see we get each of the
objects printed I so now we can have
access to each individual object so we
can say timeline posts which is the dev
we created earlier dot HTML which is how
we access the HTML within that we can
set the HTML to whatever value we want
so we're going to set it to its self
plus and here is we're gonna put in the
HTML for our post so we'll copy that and
here we're gonna paste that in and here
we got a load of errors to begin with so
what we'll do is we'll just delete all
the blank space just like this and now
if we just refresh we should get that
same post printed out three times so now
we just want to fill in the post with
the values from our API so the first
value is
gonna be the post body so that's gonna
be posts index dot post body now you can
see we have this repost bodies printed
out I'm gonna copy and paste this I'm
gonna scroll over I'm gonna piss it in
here we can see the number of likes I'm
just gonna pay us ten likes we've posted
by we're going to piss and posted by and
then finally we have the date we're
gonna paste and I and we're gonna say
post D it and we have to go back and
just change our API slightly we have to
go to the API and create another field
called post date and that's going to be
equal to posted ah and we're gonna
select posts start posted so now we're
gonna refresh and hopefully all our
posts should be displayed correctly now
you can see it says my second post my
first post and then the other post it
says when it was posted it says who
posted it on it says the number of likes
the number of comments is just a static
number at the minute because we aren't
actually storing the number of comments
with each post so we could just go back
to our index page and just take away the
number of comments so we're just instead
of saying two comments we'll just take
comments and then users can click on
that and display the comments so here we
have our likes our comments our posts
and everything suspect correctly in the
next video we're gonna be learning how
to like posts using Ajax but that's it
for this video don't forget to Like
comment favorite and subscribe don't
forget to enter the competition it went
a free copy of bootstrap studio all you
have to do is follow us on Facebook
Twitter reddit and subscribe on YouTube
by doing that you'll have four entries
into the competition
the first winner will be announced
really soon but that's it for this video
and I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>