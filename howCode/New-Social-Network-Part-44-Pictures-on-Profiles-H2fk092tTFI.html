<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 44 - Pictures on Profiles | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 44 - Pictures on Profiles - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 44 - Pictures on Profiles</b></h2><h5 class="post__date">2017-06-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/H2fk092tTFI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
finishing off the post functionality on
our profile page so at the minute when
we click on new post we can type in our
post and then we can choose an image to
upload but at the minute if I upload an
image I'm going to get an error so I've
attached an image I'm going to click
post and you can see we get this error
so that our is really easy to fix all we
have to do is go into our text editor
and we just have to open up the post
class scroll down and on this line line
52 as it says in the error
9:52 on the post class it says the
number of bind variables does not match
the number of tokens and what that means
in our query we have this variable and
we have this variable and we have an
array here and you can see this array
has three items in it and it only has
two variables to bind to so what we're
going to do is just delete the last item
I don't know why that's there it
shouldn't be and if we save that and now
we refresh the page you can see that
it's taking a lot longer because it
uploaded our image and it created our
post nice i refresh our database table
you can see there is our new post but as
you can see the image isn't being
displayed because at the moment we're
retrieving our post data from our API
and our API isn't returning a row for
the image so to fix that we have to go
into the API and we want to modify
profile posts we also want to modify the
original posts because they are exactly
the same in this regard and on profile
posts what we want to do is in our
response we want to add another row post
image and you can see in our database
table the column is called post image so
we just want to set post image and we
can copy that and paste it up here for
the other post function and before we go
what we have to do is scroll up here and
we have to select the post image column
from the database so we're just going to
say select post
stop post image and we have to do that
down here as well post stop post image
now back on the profile page we're going
to scroll down to our JavaScript and
here is where we're calling the FBI and
we're passing in our user name and
getting a list of posts so what we're
going to do is we're going to put the
image below the post body so to do that
we're just going to go in here after the
closing paragraph tag and we're going to
set image source equals posts index dot
post image so now if we save that and we
refresh you can see here is our PO
with the image it's masked with the
moment here's another post I did earlier
and you can see here are all of our
other posts so this doesn't look ideal
so what we're going to do is we're going
to fix this so what we're going to do to
fix this is we're actually to delete
that image and we're just going to go in
here and say if if posts index dot post
image equals nothing which means it's
empty which means no image was returned
now we're going to run that code
otherwise
we're going to run the modified version
so in this modified section what we're
going to do is we're going to scroll
across to this closing paragraph tag and
we're going to add our image element but
we're not going to give it a source
we're going to give it a class of post
image and we're going to give it an ID
which is going to be equal to posts
index dot post ID so those IDs have
already been used so what we're going to
do is we're just going to prep and the
word image and we just want to make sure
we put the pluses in there to make sure
we don't get a syntax error and now
we're going to do after all this code
runs which is actually outside of this
block here join here what we're going to
do is we're going to load the images in
and what we want to do is target the
post image class so to do that we just
set our post image dot H and for each
post with an image we're just going to
run this function and this function is
going to load those images in so all we
have to do is say this dot source equals
and we can set the image source by going
up here and on the image set data temp
source equals post index dot post image
and then we can scroll down to the
bottom where our function is this dot
source equals and we'll use the jQuery
selector because that way we can use
this jQuery function which is the attr
function and we can target data tap
source so that should take the image
source from the temp source attribute
and it will place it into the image
source attribute which will load it onto
the page so if we refresh now you can
see now we get the images loaded but if
I go to the network tab and i refresh
the images got loaded after everything
else so the reason we want to do that is
because if we have a lot of posts with a
lot of images and we scroll down you can
see that by loading the images this
where they're loaded after the page
which means the page should load
relatively quickly and then the extra
images can be loaded in the background
and what we're going to do is we're also
going to add that class which is post
image so to do that we're just going to
go to our style Styles that CSS we'll
scroll down to the bottom and we just
said dot post image
we'll set opacity it's going to be 0 by
default and then we're going to add a
transition which should make the images
fade in so to do that we'll say a
transition will set all to seconds
I will say ease out so now your image
will be invisible because our opacity
will be zero but when we set the opacity
to 1 the
will fit in and I will take two seconds
to appear so what we're going to do is
we're going to wait for the image to be
loaded and then we're going to change it
to a paucity to one and that would make
the image fit in so to do that all we've
to do is say this start on load and we
said that equals a function so we run
the function and inside the function we
just said this dot style dot opacity
equals one and while we're at it we're
also going to modify the width of the
image we'll say with 100% so that we
don't get those massive images so what
we're going to do is refresh and try
that out refresh and there you can see
our two images have displayed in our
posts and they're being loaded from
imager if I just drag this up here you
can see it takes us to imager and you
can see our page still loads extremely
quickly even with these images on it so
we're going to try and upload an image
nice we're just going to say test image
post so there's the thumbnail of the
Radice video I'm going to click post
so it uploader
- imager and then you can see there is
our text there is our image and we can
like it and do whatever we want and of
course resizing the window
everything looks as you would expect it
to look the reason these tabs are open
is because this is just a link to the
image or FBI and if anyone's having
trouble with their tokens and their
access you want to have a look at these
Refresh tokens all you want to do is go
to this URL with your refresh token and
your client ID client secret and you
just say refresh token is your grant
type and then you'll get a new access
token and you shouldn't have any
problems uploading images to imager but
that's it for this video don't forget to
Like comment favorite and subscribe
don't forget to follow us on Facebook
Twitter and rat it as always if you have
any questions don't forget to email me
at francis at haiku org but that's it
for this video and I'll see you next
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>