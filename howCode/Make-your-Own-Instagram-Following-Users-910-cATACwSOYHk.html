<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own Instagram - Following Users (9/10) | Coder Coacher - Coaching Coders</title><meta content="Make your Own Instagram - Following Users (9/10) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own Instagram - Following Users (9/10)</b></h2><h5 class="post__date">2017-08-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cATACwSOYHk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
learning how to follow users so to
follow users we obviously have to store
the followers somewhere so we're going
to create a new database table and to
create a new database table involves
creating another model so we're just
going to paste our model in here then
we're going to migrate it so we run make
migrations that we run migrate and then
we can run our server so to follow a
user we go to the profile page and we're
going to click this follow button and
when we do that it's going to send an
ajax request so back on urls we're going
to create one more URL called Ajax
follow it's going to go to the edge acts
follow view just like usual we're going
to create one more view there's our edge
acts follow view it's the exact same as
our like photo view it takes a get
request and you have to be logged in to
follow somebody we actually do the
process of following in our Ajax
following class so back on forms we're
going to create another class called
Ajax follow and this is it here so we'll
follow a user what we do is we send a
get request and we pass the username of
the person we want to follow and then of
course if it's a malformed request we
stop the request we check if the users
logged in and then we check if the
follower is that actual user themselves
we don't want people to be able to
follow themselves so we put this check
in just to make sure that that can't
happen and it's quite similar to liking
a post soidiers we check if I'm not
following this user because user is
going to be the person I want to follow
and follower is going to be me so I'm
the logged in user so we check if the
current user who's logged in is
following this person by checking if a
row exists in the followers table so the
follower user all we do is insert a row
into our followers table that says user
is the person I want to follow and
follower it's going to be me I see of
that I set following to true otherwise
I'm already following them and I want to
unfollow them so to do that I just find
out cm row that I just added and I
delete it from the database and then I
set following equal to false and I just
I put that as JSON so when I profile you
can see there's no text in this button
so to fix that what we're going to do is
scroll down and I think we have a
followers table we can check if we're
following a particular user so to do
that we just check if there's no row in
the followers table for this user
we are following them so the button is
going to say follow otherwise it's going
to say unfollow then we just want to add
that variable to our template so we just
go in here and paste this then we just
want to include our followers model and
then our profile fade we're just going
to text a bug a farmers from Adelita
because we're supposed to be getting to
user name from up here not the user
who's currently logged in and one more
bug we have to fix is to scroll up to
the top we want to include our followers
model in our four
so now if I click on follow I'm not
logged in as Frances anymore I'm logged
in as Ho code because you can't follow
yourself so if I click on follow you can
see the button updated to unfollow I go
to a database and you can see there no
PI code is following Francis if I delete
it now you can see that relationship is
gone so now if I refile on Francis and I
go onto the home page you can see I
can't see any of Francis's photos even
though I'm following them so we need to
fix that so to do that I'm just going to
replace our Ajax photo feed with this
slightly modified version so I haven't
changed very much so what I've done is
create a list and I've called it
followers list and by default we're
including our own user name and app
because we're going to use the followers
list to figure out what photos were
supposed to show a particular user so
what we do is we retrieve every user the
person is following by going to the
followers table and just checking if the
follower field is equal to the logged in
users user name we just add that to our
followers list and here is where we're
downloading the profile picture so what
we do is we go through every user in the
followers list and we're done with their
profile photo from the database and if
they don't have one we provide the
default and then what we do is retrieve
the photos we just check if the owner of
the photo of the person you uploaded it
is in the follower list then we want to
retrieve that photo and those are the
only changes that I've made so now if i
refresh the page I'm logged in as higher
code but how codes following Francis so
if i refresh I should see the photo that
Francis uploaded and now you can see
I've seen the photo francis uploaded
because i was following that user so i
click on my profile you can see I'm
logged inside code and I have no photos
but on the home page I can see it
processes photos and Francis's profile
photo because I'm following him so
that's it for this video don't forget to
Like comment favorite and subscribe
don't forget to follow us on Facebook
Twitter and reddit don't forget to go to
the description and sign up for your
free upload care account so they can get
a project going and in the next video
which will be the final video of this
series we're going to be using upload
cars facial recognition features to tag
users and we're also going to be
learning how to get our website online
so that's it for this video we don't get
to like comment favorite subscribe see
you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>