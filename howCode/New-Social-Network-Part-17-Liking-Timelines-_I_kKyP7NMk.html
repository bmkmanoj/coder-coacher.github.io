<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 17 - Liking Timelines | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 17 - Liking Timelines - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 17 - Liking Timelines</b></h2><h5 class="post__date">2017-02-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_I_kKyP7NMk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
making our timeline more advanced we're
gonna be enabling us to add likes to the
timeline just like on Twitter so let's
get started
so our profile page we already have
everything we need to be able to like a
post but it's already on our profile
page and we could copy and paste it onto
our index page but that would mean doing
everything twice and we don't want to do
that so what we're gonna do is create a
class and we're going to create a new
file and it's going to be called post
and we're going to create the class
called post and then what we're gonna do
on the profile page is we're going to
move the logic that is specific to
posting to this new post class so if
it's that post that looks like it to
belong in the post class so what we're
gonna do is copy and paste this I'm
gonna replace it with post create post
then here on the post class we're gonna
create the method so we're gonna say
public static and we're gonna paste that
logic in there we're gonna take this
variable out we're going to call it post
body so the body of the post is going to
be passed to this function so we're
going to copy that
take that out and move it back to the
profile page just like this back on the
post we're getting the user ID from
login is logged in so we're going to
create a variable called logged in user
ID we're gonna copy and paste that and
store that in our profile page now you
can see we have a variable here called
user ID we want to pass that to our
create post method we'll call it profile
user ID
then up here what we'll do is we will
pass user ad to the functions we want to
make sure we have the post stopped HP
class included in our profile page and
then back on post type HP we don't want
to include anything at the top of the
page because the profile page will
include it for us whenever it runs and
then finally we just need to copy and
paste profile user ad and then replace
user ID with it so we don't get any
errors and we'll try and run that so
let's try and run it let's say hello
world from post stop HP will click post
now you can see it posted successfully
so we've got some of our post logic into
its own class now and we want to
continue that with our likes we could
create a likes class but because likes
is specifically tied to posting we're
going to put it in the post class so
here when we check if is sat post ID and
we do the actual liking what we're going
to do is copy and paste that and replace
it with posts like post and then back in
our post class we're going to create
another function
and then here we want to pass post ID of
the idea of the post we want to like we
want to pass the ID of the person doing
the liking we'll call it licker ID so
here we just want to copy and paste post
ID every time you see a gap post because
that's what we're replacing it with
and we want to replace every occurrence
of follower ID with licker ID just like
that and then back on our original
profiles a PHP page we want to pass get
post ID as the post ID and we want to
pass a follower ID as the licker ID and
we'll task that so we'll click like and
you can see it worked perfectly next
when we're displaying posts we want to
do that in our posts class so we're
going to copy and paste all of this we
will say post display posts something
like that back on our posts class we're
going to create another function
and we'll piss that in there and here we
want to pass user ID which is the ID of
the page we're on and we don't actually
have to change much else in this we have
an occurrence of user name so we'll just
pass in user name as well and then
finally what we'll do is we will return
this posts variable which contains all
of our HTML and all of our posts
so we'll say return posts and back on
this page what we can do is pass in user
ID and username and we can say our posts
equals the return value of this method
and that means it should work exactly as
it did before if we refresh okay we have
an undeclared variable on line 37
so we said follower ID so what we want
to do is change that to logged in user
ID and here we will just declare that
and then we get the logged in user ID we
want to go back to profile page and we
want to get follower 18 we want to pass
that to this function so let's run that
and that everything seems to have worked
as expected so because we made our logic
much more generic it saves us some work
on our index page so if we go to post
you can see that when we display the
post we display the like button with it
so we're gonna copy and paste this form
and we're gonna use that on our index
page so we're gonna echo out this form
and we want to change every instance of
P to post and we have a variable called
username here we don't need that anymore
because we're posting from the index
page so we just want where post ID
equals whatever the post ID is and we
want to call this index dot PHP
instead of profile top HP but of course
we're only selecting the post body and
the post likes we aren't getting the ID
so we want to say post start ID to get
that as well so now we have the ID
column we have the likes and we have the
post body which we can post out so we're
gonna run this and you can see we have
our like buttons and they like buttons
correspond to the number of likes for
that specific post so what we want to do
is just move this above it like that
we'll get rid of the horizontal line
after it and now you can see the posts
look much more like they did on our
profile page and the number of likes are
being retrieved from the database and we
didn't need to do very much work at all
but of course when we click on the
button it still doesn't work so what we
need to do is go to our profile page and
we're test if is set post or copy that
and we'll paste that on our index page
and for follower ID what we want to do
is change that to user ID we have one
more thing to do we need to display the
unlike button if the user has already
liked the post so we're going to go to
our post page and we're just going to
copy this query and paste it on our
index
and we'll surround that in this F
statement and what we're doing is we're
checking if the post has already been
liked by the user so we get the post ID
and then we get the user ID which is
user ID the variable up here I'm saying
if they haven't liked it much of this
form but the only thing we need to
display differently is the unlike button
so we can copy and paste that if
statement change this piece the F
statement in here tank without it again
close off the F statement and then we
can have another echo here and now what
we want to do is just change that to a
none like button so it saves us a lot of
work
what I want to do is include the post
class here as well we should be good to
go so if we run that you can see we have
the options you like all of these posts
if I click on like on one of them there
the number of likes have increased and
it says on like I can click that and I
will unlike the post if I for example
like this post at the bottom you can see
it just jumped up higher because it's
likes have increased and how if I like
the I could post it jumps up higher as
well and if I like verified it also
moves to the top so there we have it we
can know like posts on our timeline and
we made a lot of our logic more generic
which means we can save ourselves a lot
of work in the future so that's it for
this video don't get to like comment
favor and subscribe don't forget to
follow us on Facebook Twitter and reddit
but that's it for this video and I'll
see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>