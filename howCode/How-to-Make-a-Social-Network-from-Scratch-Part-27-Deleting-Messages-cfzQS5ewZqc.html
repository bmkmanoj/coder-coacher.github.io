<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 27 - Deleting Messages | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 27 - Deleting Messages - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 27 - Deleting Messages</b></h2><h5 class="post__date">2012-08-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cfzQS5ewZqc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi and welcome to this video so I am
today what we're going to be doing is
we're gonna be continuing where we left
off in the end my messages page and
we're gonna change this from my rad mess
Arnold this says I've read this
understand the read my messages section
and we're going to change that
to delete or an axe or something so
someone can delete a rad message so I do
that or is it down here in my rad
messages or is it here it is the volume
of the submit button for my we're going
to change that for my Brad this to M
okay just do an X and see what that
looks like so we could either do an ax
or yeah okay so we'll do that we're
gonna put a title over to if someone
knows what it means if they're not quite
sure so guys a title I think message
around refresh so if we're able were the
success donate message so what we're
gonna do is for advert if you were gonna
make and if you're gonna use this to
make a social network you would want to
keep track of all your data you wouldn't
want to just let people delete things so
what we can do is we can make it look
like it was deleted but without
oxygenating it so to do that we're gonna
go into our database and we're going to
go to the structure
and now in the structure we're going to
add a new column at the end of the table
and this column is going this is gonna
be called deleted it's going to be a
varchar' of length 255 it doesn't matter
what it likes we choose is well actually
to keep it more secure we can actually
add give it a length of throw a max
length of 3 because yes or no is what's
gonna be put in it so no is two
characters long
yes is three obviously so that's what
we're gonna do so now we've added the M
whoops so now we've added the new row
what we have to do is we have to go to
the isn't sand amis cheetah PHP beach
and we've already got the my messages
page open we need to add a new variable
called deleted writes correctly and that
will by default as well
we're just odd
I'm you and they add the new variable in
here whoops
elated so now I'm gonna check I'm gonna
check that worked so I'm gonna log out
and log into another current and send a
message so I'm logged in I'm going to
send a message to send my so it'll show
up on the other con so what I'm just
gonna give it a testament I'm just gonna
write test message is another
as message so we send the message it
sent and I'm going to log out of this
account log into the other one so here
it is I've just sent the message so we
click test message it was up like any
older and if we go into our database hit
prize I should see the this is the new
row the new message we just sent and the
last column is equal to know which is
correct because it's deleted so in
connect like I've read this I'm dodging
as you might remember you need to
refresh other than there it's gone so
here's all the messages and we're going
to simply this is quite simple so what
we're going to do whoops wrong page
we're gonna go all the way up to the top
here and where it says where this quote
this query here in the war apart we have
two conditions we're going to add third
and this is going to equal deleted
equals no and then down here that's a
bit up here okay so down here we're
going to do the same thing okay so
that's fine now we also have to just add
the new variable ink
okay so that's it so okay so I just
record remembered that this isn't
actually working done here so why we can
just copy this JavaScript and just same
thing here paste it in on refresh hmm
okay so the reason they all disappeared
is because you know none of the other
messages alpha value did of the deleted
value of no so what I'm going to do is
I'm going to change all those values and
then I'm going to come back okay so I'm
back and I've dated all these rows I
think so now I will go back and click on
my messages again I'm never come back
that should work yep so I know what
we're gonna do is gonna make the delete
message function work which is quite
simple
so down here in the my read messages
section we're going to make an if
statement here almost say post so we'll
change that will change the sad opened
underscore ID to a late underscore ID so
then repeat this seam here so delete the
underscore ID there we have to do that
obviously because we have to do the
single quote space and post-ops base and
the opposite because we're doing we are
using a variable in between two single
quotes so
put on here go to check at water snack
oh that's needed so we refresh and don't
forget and outside if you need it so I
will click on the X we got message
deleted
obviously it didn't delete it because we
haven't told it to you so that means
it's working
so this is quite simple all we do is
update the data with unsettle a
dirty-ass
so we're going to say tell me that's
hinge query that was my stuff query ok
TVT
underscore messages sad deleted thank
you yes or ID equals ID so that should
work so we can test that out note so if
we go to my messages room fresh nothing
should have changed but will actually
take note of the idea of the message so
here was New Year's message we just sent
the most recent only sound and it's
ideas it so we were like X and once we
have to refresh the only noise okay so
something isn't working
okay so I I just find a better way to do
it so we're gonna do message title it
goes message title so we'll try that
actually
so we'll click X on refresh okay so I
know the problem I'm actually just
discovered a problem with message title
because if we didn't tell people that
they they couldn't send two messages
with the same title so by doing that
it's going to it could affect more than
one message at once so we're gonna copy
this and before we do I'm going to show
you the problem which I just told
adopted private message instead of
private messages up here I'm just gonna
piss this I change this to ID so that
way I'm it's unique to every message so
now finally we click delete message
unfresh it disappears
but because of the way we did and we
didn't just make a dropping rule from
the database it still shows up in our
MySQL database here all we did was
update the whoops all we did was update
this last fatal to needed to the value
of yes as you can see you can just you
can click it more than once name in fact
it won't do anything wrong so the next
thing I'm gonna do before this video is
over is I'm gonna add a number of the
amount of unread messages in his profile
beside the my messages and
yeah Paige thing the menu okay so I'm
back I've just sent a message so I I'm I
said here's the message here I'm not
gonna click I've read this because I'm
going to make it select well I'm gonna
put away number of the amount of unread
messages up in the top of the menu bar
so that's pretty simple so to do that
what we're gonna do is we're gonna open
up the ink pink scripts and headed on it
so uh I'm just going to find a place to
put this code so I supposed to put the
page paint over here to the my ring no
Brad thing we want to do is one like
that create a query that's gonna check
at the nativist depending on whether or
it's going to check the database for any
unread messages so when I said check all
right get unread query was my straw
query left um see what that fields
called I think it's just read or open so
it's going to be select open my private
messages or user to it closed either so
that's what I think it is yeah so
we can actually I just put this code up
here what the other needs me go just to
keep it tidy to figure out those other
page me going up here this is okay so no
if they're not we have to yeah yeah
rows from the query so get on red
clothes - Joe fetch okay so a sock
yeah I can't read query now we can just
do one red rose close nice grab num rows
get I'm glad I think so we can echo echo
num rows to check it or are on red
number is just the check it worked i
mighta gotten so I might forgotten
something or okay so a mice okay so
let's Jones just to get on the red query
it's like that's the problem
so refresh and we get six which isn't
correct okay yeah we're mm-hmm
yeah okay that's because we told it to
check well user to equals user so it's
yes we just got every message that was
associated with this user but
the reason it's six instead of three is
because remember we told it not to
remove messages just to get one and just
off to get a role in the database to
make I'm not deleted once I open equals
okay where user two equals user um open
know so I will do that and refresh we
get one which means my unread messages
is working because there's only one
message it's on ride so instead of
outgoing it we connect on here and just
copy the driver and here which has my
messages we can also we can just add pot
not variable and I will get number
beside it that's not what we want we
want them the warm parentheses around it
so that's quite simple all we do is one
red rose close echo so put the
parentheses here in between them we will
fuch unread numbers let's see is this
one so yeah and as I thought now we get
the parentheses around the
number one but if I click I've read this
and we refreshed it goes away I'm gonna
get 0 so that means it's working so um
don't forget that's about it for this
video so I don't forget to like the
video if you liked it and subscribe if
you read if you want to see more and I'm
more than happy to take your questions
so don't be afraid to ask so that's it
see you next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>