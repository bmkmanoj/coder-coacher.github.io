<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own Instant Messenger - Part 3 - Sending Messages | Coder Coacher - Coaching Coders</title><meta content="Make your Own Instant Messenger - Part 3 - Sending Messages - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own Instant Messenger - Part 3 - Sending Messages</b></h2><h5 class="post__date">2015-07-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YYfx_NbNteg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video what we're going to be
doing is we're going to be getting the
template and things like that set up for
our messenger so just close this one
actually this is in the old one so what
we're going to do first is refresh and
see we'll just you know put the class
values changes
and we refresh you see it's gone we the
page is blank it's what we're gonna do
is we're going to first paste and the
template I created so here is the
template this will be in the source code
the source code is uploaded on to github
and I will provide a link in the
description of the video but here is the
tablet so we're just going to copy this
and paste it in the index page and we
will upload it
I'm refreshed and you can see we got the
template that we were using earlier
so now what we're going to do is we're
going to create the database table so in
the last video we created the database
this video we're going to create the
table so we're going to go to PHP
myadmin
we're going to click PHP myadmin
so here is my username here is the TM
with our the DMS we just created I want
to create a table called messages and
we're going to give it three columns so
the first column is the ID column it's
just to uniquely identify every row in
the table now we're gonna have a
username column we're gonna have a
message column so the username column is
going to be a bar chart of length 32
characters which means every username
can't be more than 32 characters long a
message is going to be of type text and
it can be say for example 300 actually
just leave now we'll give 300 will be
the maximum size or message then what
we're gonna do is we're gonna auto
increment the ID row the ID column
actually because we want the ID column
to increase by one every single time we
add a new record we're gonna set the
index to primary which means that no
other you can't have two IDs to see them
and the primary our setting the index to
primary will ensure that every idea is
unique so the way we're actually gonna
do it is we're going to sort of leave
this page for the minute and we're going
to start working on the update messages
page we can just make this one as well
we're gonna work on update messages
first because that's how we're going to
send messages to the database so we have
our sort of connection script up here
and what we're gonna do at first is
we're going to create a username
variable and we're gonna set it equal to
the guide parameter we're gonna get the
name username so this just means if we
go to message that swc forward slash
update messages dot PHP the username
variable is gonna be assigned to
whatever we put in the username
parameter some scientists for example if
we put a question mark then username
equals Frances then we will have Frances
is the value of the username variable we
can check that by echoing the username
so if I just run this now you can see we
get Frances printed out I'm going to put
another variable called message and it's
going to be equal to the message
variable and that is just another gap
variable the way we had to do that is we
just depended on with an eye on sign and
with that message and then we just say
equals sort of test or let's just do a
hello world and we will change this to
message
so let's just refresh this you can say
okay we have an error okay so the reason
we have this error is just because I
left at a semicolon on so I put that
semicolon in there weary upload the file
and we go back to Google Chrome and
refresh you can see we got the text
printed out to the screen okay so what
we're gonna do now is we're going to add
a function to surround it to these two
parameters to prevent cross-site
scripting attacks so the way we do that
is we use the HTML special chars
function and what that does is it as
Ashley and I if we go back to the
browser
that means if someone puts in for
example a last on sign and then puts in
some tax on you great on time and the
function will see the last downside and
the greater than sign and it will
convert them into this and greater than
and let me refresh and yet doesn't show
up properly but it prevents people being
able to put tags in the massachusett
right execute them on the server
so we have the history of special charge
functional in the user name and we need
to have it on what's the message as well
so we're just going to add another
function to run this which is the strip
slashes function I'm will just upload
this and refresh just to make sure we
didn't spell anything incorrectly okay
so now that we found that what we're
gonna do is we're going to delete this
obviously we don't need to print the
messenger what we're gonna do is we're
gonna set if either username is that
empty or which is with the double bar
means or or the message is empty and
we're just gonna die nothing are we done
we're just going to return nothing to
the masses then what we're gonna do is
were actually going to insert the
message because if the username is not
empty on the message isn't empty
then we're going to actually insert the
message into the into the database so
the way we do that is we say results is
equal to DB and we're going to access
the proper method from the DB class and
the pro method takes one parameter which
is the string you want to the string of
your query so I'm just gonna write
insert into messages values we have
three columns to insert the first one is
the ID which is Auto incremented so we
don't need to do anything there second
one is the username so we just put a
question mark in there and third one is
a message we'll put a question mark in
there if you were to surround the
question mark with single quotes it
would insert a literal question mark
into the database but by putting a
question mark with no quotes around it
it just means we're going to substitute
the question mark so if I go down again
and we're gonna say that result is equal
to actual we're not saying anything
we're just saying result and then we're
asked accessing the blind prime method
from the DB class and what we're saying
here is we want a first pass at a string
containing the type of dial and insert
into the database so we're going to put
two asses in the first ass is for the
username which is going to be a string
and the sack
this is for the message which is also
going to be a string and then we're
gonna pass it the username parameter and
then we're gonna pass the message router
we could also do this we could just
chain these together but we're going to
just leave them all on one line or on
different lines for now I'm then fine
what we want to say is result execute so
now we're going to upload those files
we're gonna refresh and you can see we
got no I'd put but if I go to the
database and I click browse you can see
we have one master that says the
username is Francis and the Masters
hello world so that's it for this video
don't forget to Like comment favorite
and subscribe and I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>