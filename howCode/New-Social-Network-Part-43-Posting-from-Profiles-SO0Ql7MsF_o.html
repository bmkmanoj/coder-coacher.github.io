<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 43 - Posting from Profiles | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 43 - Posting from Profiles - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 43 - Posting from Profiles</b></h2><h5 class="post__date">2017-06-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SO0Ql7MsF_o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
finishing off our profile page if we
click on new post nothing actually
happens and we've lost the functionality
to actually create new posts from our
profile page so in this video we're
going to fix that so what we're going to
do is whenever you click on this button
it's going to create a modal window
which is going to pop up just like
whenever you click on the comments
button and inside that we're going to
have a form that we fell out to actually
create a new post so let's get started
so you can see if I click on the
comments button the comments will appear
inside of this modal window and we're
going to use this for writing new posts
and what I'm going to do is I'm going to
copy this modal window and I'm going to
give it an ID of new post we're going to
scroll down to the bottom and what we're
going to do is we're going to create a
new function called show new post modal
and we're going to copy this function
that displays the actual motor window
and we're going to change it from
targeting the modal class to targeting
new post and what we going to do is also
modify our show comments modal's we're
just going to change it to comments
modal and then scroll up to the top and
instead of targeting the modal class
because now we have two divs with the
same modal's last we don't want them to
be displayed on top of each other so
we're going to do is just give this an
ID of comments modal and that
corresponds to the ID that we gave in
this function so now what I'm going to
do is copy this show posts modal and
here is our new post button what we're
going to do is just give it an on click
event of your new post modal save that
if we refresh and click on the comments
now you can see they appear as as before
now if we click on new post you can see
the dot also appears it just looks the
same because we haven't changed the lock
of our modal windows so back in the code
I'm just going to change that to a new
post click it now you can see it says
new post at the top if I click on a
comment it says comment so now we have
the two separate modal's I never want to
do is display our form so in our code
right at the top we have this old form
that we used on the profile page before
we put the design in so we're just going
to delete that and scroll down to our
modal window and what we're going to do
is just paste the form in here so you
can see here we have this modal body
class and we also have it on our other
window and this is a David it gets
targeted when we insert our comment data
so what I'm going to do is just delete
that class because we don't want our
form to be overwritten by comments
refresh now if I click on new post we
got our modal window and we get our form
if I say hello world 1 2 3 4 5 6 7 8 9
just a post that we can easily see click
on post and now if I search for it
you can see it's at the bottom of the
page nine so our forms working as
expected so we do have an error with our
image uploads we're going to fix that in
another video but at the minute what we
have is we have the ability to post back
on our profile page what we're going to
do is also modify the look of this
button and to do that we're just going
to copy the CSS of the new post button
and paste it in here so here is the
button we use we're going to copy that
paste it in here and just copy the CSS
and the class now we can delete that and
we're going to paste that in here and
we're just going to cut that submit
button and we going to paste it down in
our footer and obviously move the form
down as well that where the submit
button will actually work I will just
remove this width attribute now we're
going to give it a go we're going to
click on new post and you can see
there's our post button now so if I set
hello world from the designed profile
page click post and scroll down you can
see there is our post and obviously we
probably don't want our latest posts to
be displayed at the bottom of the page
the reason it's doing that is just
because at the moment we're organizing
our posts based on the number of likes
so you can see the post with the most
likes at the top so what we're going to
do is we're going to go into our API and
the reason for that is because at the
moment we're organizing our posts by
likes so we're going to do is we're
going to change it to posts top posted
underscore app now if we refresh you can
see how the world from the design
profile page is not at the top because
that is the most recent post scroll down
to the bottom and the oldest post is now
at the bottom irrespective of the number
of likes that probably makes a lot more
sense
another thing is whenever we create a
new post the reason we're not doing it
with Ajax is because that can make
things a lot more difficult when we're
uploading images which we're going to
affect soon but uploading images using
Ajax would make the whole process much
much more complicated than it needs to
be so what we're going to do is we're
just going to leave it as we type in
something we click on post it refresh
the page and it chosen you post there
well before we go we're going to fix one
more thing on your timeline at the
moment it only displays posts from
people who you're following what we're
going to do is just quickly modify the
query so it also shows posts from your
own account so to do that we go to the
posts part of the API which is different
from profile post and what we do is
select all the posts with a user ID
equals followers user ID what we're
going to put in is or post user
underscore ID equals and here
we're just going to put in the user ID
we got from the database so in this case
it's just going to be user ID what we're
going to do is just surround this and
this and parentheses and then what we
just need to do is update RS we just
need to copy this paste it in here again
because we've used the user ID variable
twice so we need to include it in our in
our air twice now if i refresh you can
see i have not just a post from people
i'm following i also have the posts that
I've written so you can see there's one
bio code one with Francis and I'm logged
in as Francis currently and now you can
see the number of posts I have is much
longer and we just have a bug with our
photo so we're just going to fix that
really quickly as well before we go to
fix that all we have to do is scroll up
to our footer and we'll just say style
position:relative refresh now you can
see all the posts are displayed and our
footer is down at the bottom of the page
where it should be that's it for this
video don't forget to Like comment
favorite and subscribe don't forget to
follow us on Facebook Twitter and reddit
if you have any questions over it's
email me at Francis at how code org but
that's it for this video and I'll see
you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>