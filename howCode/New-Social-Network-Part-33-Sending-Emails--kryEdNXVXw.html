<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 33 - Sending Emails | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 33 - Sending Emails - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 33 - Sending Emails</b></h2><h5 class="post__date">2017-03-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-kryEdNXVXw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're gonna be learning
how to incorporate sending emails into
our social network if you haven't
watched the previous video I made on
sending emails with PHP there's a card
up on the screen right now and you can
go and watch that and it should make
more sense but if you've already watched
that what we're gonna be doing is
whenever the user creates an account
well that will send them a confirmation
email it won't be a verification email
in other words they don't need to give
us a valid email to have an account
because we're not gonna send them a link
that they have to click but we are gonna
send them an email that says something
like welcome to this one network and
we're also gonna be sending emails
whenever users reset their password
because we're gonna be sending a link to
reset the password because at the minute
we're just I putting it on the screen so
let's get started so in the last video
we downloaded PHP mailer like this we
click download and then we got these
files here we copied them pasted them in
their own folder we're gonna create a
folder and I called PHP mailer and we're
gonna paste those files in there next
what we're gonna do is include the PHP
mailer class and on our last video we
included the class like this we included
PHP mailer for /page be man or autoload
I'm gonna copy that and we're gonna go
to our create a current page and we're
going to paste that up there because we
want to include the page P man or
autoload class so now we've included
that we're ready to send emails we have
all these lines here to send an email
and what we should do is condense them
into a function so we're going to cut
them out we're gonna create a new file
we're going to call it mail dot PHP and
we're going to create some PHP tags
we're going to create a class called
mail and we're going to create a
function called public static sand mail
like that and it's going to create a new
instance of the PHP mailer class so we
should probably do is take this require
once out of our create a client page and
include it on our mail class so now I on
our credit card page we're just going to
double check that everything still works
we're going to first include the mail
class
and then we're simply gonna say male
Sandman and then back at the mir class
we just want to put in this at the
bottom
male sand to actually perform the sand
operation and we want to just write into
public static function I now if we go to
a create a kind page and we run that it
should hopefully send us an email so
that loaded it took a bit longer than
usual and it should have sent us an
email you can see that that has
increased it to and up here in a sack
we're gonna see that I received an email
so now our mail function is working and
what we want to do is customize this
function to enable us to sign any kind
of emails we want we can leave the no
reply at Hoku org because that shouldn't
really change depending on who we're
sending the email to but depending on
who we're sending the email to we will
want to affect the subject the body and
the odd address so to do that we're just
going to create a variable subject body
address and then we're just going to
pass those variables to each of these
now on the create account page we're
going to cut that and whenever we
finally create the users account where
we normally print success what we're
going to do is send them the email so
we're going to say a mail sad mail the
subjects gonna be welcome to our social
network the body is going to be your
account as being created we could give
them a link or something to click on and
then the address is going to be the
address they gave us as their email
which in this case is just the variable
email
so now let's test that out so I'm gonna
create a new account and for the email
I'm gonna put in Francis McNamee to your
haiku org because they set that up for
this video and I'm gonna click create
account
it's taken a second because it's sent
the email it says success and now you
can see we just sent an email and it
says your cut has been created but we
got this other second email just because
I didn't set it up properly the haiku
org one but we're sending the email
properly it's just that fake email
address Ilsan actually exists what if
you send it to a valid email it should
work exactly as you expect so the next
thing we need to do is allow users to
reset their passwords using an email
link so on the forgot password page when
we put in our email we're going to get a
code and what we want to do is actually
send that code to a user so now if I go
to forgot password we're going to
include the PHP mailer class and then
here when we normally say email sent and
then we print out the token we're going
to just actually send the email so we
can still say email sent but we want to
send the email itself so if we're
subject will just say forgot password
and for body we'll send them the
password reset link so we're going to
create a link
and we're just gonna say reset your
password and then here we're gonna put
in the link in my case I'm gonna put in
localhost but in your case you want to
put in whatever domain name you're using
to host your social network
and then we're going to forgot password'
up HP question mark and after the
question mark we put in reset password
equals and then whatever our token is
and we have our token variable here so
all we want to do is write token and
instead of reset password we could just
send the actual link just like this and
then finally what we want to do is tell
the male method where to send the link
to so we have the user's email and we're
just gonna put an email here and I just
realized the code for changing a user's
password isn't on the forgot password
page it's on change password of HP and
then we go to change password our PHP
token equals token and then here we just
want to change that to change password
type HP token equals token then this
should take us to the correct place
where we can reset our password so once
again I'm just going to sound it sound
myself an email by trying to reset my
password just like that I'm gonna click
reset password it's gonna take a second
because it's sending the email it says
email sent go to SAP Mayo I know if I
click on this actual valid link the one
I've just been sent I click on that it
gives me the option to change my
password I'm gonna change it to test 1 2
3 test 1 2 3 and it says password
changed successfully so there we have it
we're sending emails using Gmail and
we're not able to send welcome emails
and any sort emails we want and in this
case we sent welcome emails and password
reset emails so that's it for this video
don't forget to Like comment favorite
and subscribe don't forget to follow us
on Facebook Twitter and rat it and I'll
see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>