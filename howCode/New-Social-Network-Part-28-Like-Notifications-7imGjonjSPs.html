<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 28 - Like Notifications | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 28 - Like Notifications - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 28 - Like Notifications</b></h2><h5 class="post__date">2017-02-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7imGjonjSPs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be doing
one more thing of notifications we're
going to be standing notifications
whenever someone likes our posts because
at the minute we only have one type of
notification and that didn't feel
complete enough for this series so we're
going to be showing an example of
another kind of notification one
somewhat like supposed so on our post
page we have our notification function
and we probably should put this in its
own class so what we'll do is we'll
create a new class call it and notify
the class is called notify we're going
to put in a notify function then on our
profile page we're going to include
notify and that on our post page since
we've included notify on our profile
page we can scroll up and we can safely
change this from self notify to notify
and notify because we're getting it from
the notify class not from the post class
anymore and we task this so it's the
Raisinets gathers errors because the
class name and the function name of the
Sam so we could just say we could say
create notify so just for the function
name is different from the class name I
should have realized that a minute we're
creating a constructor more Chinese
Saturday's static and that won't work
just change this to notify
since this as well test one more time
will refresh resend the data those are
new post there's a new notification so
in the notified class now what we can do
is include different types of
notifications so if I go back to the
post class and I scroll down wherever
we're liking a post we want to send a
notification so what we'll do is we'll
say notify create notify something like
that and what we do is we normally pass
the text to notify the user so what we
could actually do is change this to work
text is optional and then down here what
we'll do is if current text equals zero
in other words if there was no strength
path to the tax which means the type of
notification is alike for example
because the light doesn't have any tax
associated with it and here when we
create notify we want to set our tax
equal to an empty string and our post ID
is going to be post ID and what we'll
actually do is we'll say on this tax
equals zero and host ID doesn't equal
zero then we're going to insert a new
notification we're going to say DB query
and we go back to posts we can copy this
query insert into notifications
just like this and here we're inserting
into notifications the type of the
notification is going to be to the
receiver is going to be the user who
receives the like so the idea of the
user who wrote the post so we're going
to keep that as our the sander is going
to be the personally liked the post an
extra is going to be nothing so we're
going to set actually equal to an empty
string so here we're going to run a
query and we're going to change that to
tamp actually and we're going to go to
sequel Pro and that's going to have us
right at the query so we want to select
the receiver on the sander going to set
post dot user ID comma post likes dot
user ID from posts comma users so we're
selecting those two columns from the two
different tables we want to join them
together so we're going to say our post
start ID equals post like dot post ID
when we're cycling from users and posts
we should be selecting posts and post
likes we have no errors but we get no
iPod because the result of this join
query is nothing because if we go to our
content we have these two rows but I
actually just remove them because those
two rows are just from an earlier part
of the series when there was a mistake
there isn't actually any like on any of
the posts so I'm going to go back I'm
going to like this post those alike I'm
going to refresh there we have a like on
the post ID of 38 if I go to query and
we run it again now we can see the user
with the idea of one liked a post posted
by a user with an idea of one so we're
going to say post user ID as receiver
which is going to be the like receiver
and post likes dot user ID as sander
which is going to be the personally sent
like so we can see the receiver is the
personally received that in the stander
is the person who sent it if I try and
like something else for example I post
on haiku I like that and i refresh now
we can see the receiver was high code
with the idea of three and the stander
was Francis with the ID of one so we're
going to copy our query and we're going
to paste it in here
and then finally we're going to stick on
another wire claws we're going to say
we're post ad equals post ad and then
here we want to pass D using our
RS just like that so tab returns this
query which is in a wrap with two
columns in it and what we're going to
say is R is equal to the x variable
we're going to get the one item that's
returned and then we're going to get the
receiver and then we're going to copy
that and change it to F to get the
center because we rename them in the
query as receiver in sander as you can
see here so we refer to them as receiver
and sander only to work laws as we just
want to change that to andand so we'll
try this again we'll click like we get
no I put but it seems to have worked we
go to sequel program we refresh and I
we've a new notification the type is one
the receiver in the sand or the same
because I'm logged in as Francis and I
did it on Francis's profile page if I go
too high code and try it you can see the
receiver was three which is high code
and the standard was Francis which was
one and the type is two so now back on
the notified FHP page what we're going
to do is we're going to set as if and
here we'll just check if the type of the
notification is to type equals two then
we want to get the standard name again
we'll just paste that in here so now we
have the standard name once again we can
just echo sounder name like your post
and now if we just go back to notify and
we refresh you can see it says Francis
like your post before we go go to
notifications and when we select them
from the database we'll say order by ID
descending which will show the newest
notifications at the top just like that
and we need to put in a new horizontal
line and there we go so that's it for
this video don't forget to Like comment
favorite and subscribe don't forget to
follow us on Facebook Twitter and reddit
I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>