<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 14 - Making the Post Form Work (remake) | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 14 - Making the Post Form Work (remake) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 14 - Making the Post Form Work (remake)</b></h2><h5 class="post__date">2013-12-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fruDXeZMRD8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi and welcome to part 14 and this is
the final part of the remix of the how
to make your own social network series
that I'll be doing and in this video
what we'll be doing is we're going to be
making the post form work and we're
going to be displaying the posts from
the database that get sent so let's get
started so the first thing we're going
to do is we're going to go down to the
post a submit button we're going to put
an on click event and we're going to say
a JavaScript code on sand post it's
actually sand underscore post and what
this will do is it'll send our post to
the server via Ajax without us having
that means we won't have to refresh the
page and the next thing we need to do is
we need to go to a file called me and we
need to i okay we actually need to
include it in the header first which you
actually have that or open now we're
going to go down here we're just going
to say script source is JavaScript or J
s / min KS and we're going to close that
off our main app just finish this off on
the type and stuff so tax last
JavaScript is the type of the file we're
gonna be opening and now we've read that
we need to actually open the file so I
can show you what it looks like so this
is the file here it's inside of the
JavaScript folder we open it up we can
see this is the whole thing this is the
whole function as well to just copy this
down and I'll explain what it does so
what this does is it creates a variable
counting HR and it's able to new
xmlhttprequest we're also storing the
URL which is a sound post up PHP the FN
is the value of the post button
oh no that's the value of the post
timing sorry that's the value of the
post that's getting sent and then we're
panning the two of them the two
variables take our way more panning post
equals to the FN
able and the Sonia two vertical bars
this is when we open the post request
the huge art out set that set request
header is what tells the browser what
kind of request is going to be the here
charted on set on ready state unready
state changed function is that the
function that whenever the post is
submitted it it a is the function that
tell that sends back the return so we
know whether the posted in sant or not
here charts and is obviously the
function that sends the post and then
document or get on one pi idea status
studying it or document dog atom by ID
status that inner HTML equals processing
is just a div are we up to the text
processing in two people a people know
that there at post is being processed so
and now what we're going to do is we're
going to go to profile dot PHP and we
need to actually create a new file
called san post-op PHP so let's create a
sand underscore post cleanest B so the
first thing we want to do is want to
include the connect file so we say
include Inc slash connect dot Inc dot
PHP and then what we're going to do is
we're going to paste this code in and
these are just variables that were
signing the first ones just setting post
equal to the post variable then we're
saying if post doesn't equal zero which
part doesn't equal nothing which means
if the post if post was sorry I mean if
the post was said then we're signing the
rest of these variables so for the
moment data the odd advising we test one
two three and user posted to is going to
be test one two three will be affecting
on in their later video but I did added
it just obviously the dead function
which gets the date from the server and
it formats and if the format we tab to
inside this function here so it's going
to say year-month-day like that and then
it assigns it to the data variable
and then finally we just paste this code
in that's our whole file finished so
what this is is it says ask you I'll
come on labels insert into post to the
values and then this is the correspond
or these are the values one insert into
the database and they all correspond
keep one of the rows in the database and
they're all in the correct order as well
and down here is where we run the query
and then we are only I'd have an or Die
MySQL error so that we know if there's
an error and then if someone tries to
submit a post without a drink something
into the post field then we act without
error so let's see this work now so
we're going to go to my profile we're
going to refresh
and I'm going to type in a post - this
is a test I'm gonna click post
on what should happen is if I click
browse
we got an empty result so that means
there was no actual post entered into
the database okay so I found out why the
code didn't work so the first thing we
need to do is we need to get rid of the
form that way that's not what started
working I mean it would have worked with
it but we've been pointless because the
JavaScript code would have been
pointless then because the form still
would have reloaded the page so we just
get rid of that because then it allows
us to use the JavaScript which means we
don't have to reload the page and also
the problem was we were in the header
file this says script type equals g /pan
chieh s so what we need to do is change
that to source and then let's refresh
the page
and then let's try and send a post so
this is a test post let's click on post
slow and as you can see we have one post
in our database added because NS all
went through JavaScript so if I click
this a lot of times and I click to
browse as you can see now we have five
different arrows so now what we're going
to do is we're going to display the
posts so to do that we go back to the
profile dub PHP page we're going to
paste in this code so first we need to
delete this the contents of this div I'm
going to just expand a little bit and
we're going to do is paste our website a
piston the PHP block first and what this
is basically doing is it's just a MySQL
query that gets all the posts from the
database where user posted to equals
username and it orders them by ID and
limits them to ten and then all it does
is when it gets the rose it just a store
or it gets the average packet was
ultimately array it gets returned on it
stores them in a variable so this is the
last bit of code ringlet paste in and
this is just how the posts get displayed
on to the page and also we have a
closing curly brace down here to end the
while loop so let's refresh and now what
we should say is a cause of posts okay
so the reason the post didn't actually
show up is because they were all posted
to a different user so I'm going to just
change who they were posted to I'll just
change the first one so post it - I'll
just change that to Francis what we
should say is one post on our now we
should see one post on our profile
and as you can see here it is so what
I'm going to do to make it look a bit
better as I'm going to go to our style
of CSS file and I'm just going to paste
in a bit of CSS so this is all CSS and
pasting in it just to stand the links
and the horizontal rows that gives me
these lines so let's just refresh
okay let me see sometimes we have to go
into the CSS folder we have to access
the file for to show up let's go to
slash CSS smash style of CSS and let's
scroll down and see if it's been added
correctly okay so
to the file or to the profile page line
and as you can see the state's TSS car
loaded now and our post was displayed so
that's it for this video don't forget to
Like comment favorite and subscribe and
I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>