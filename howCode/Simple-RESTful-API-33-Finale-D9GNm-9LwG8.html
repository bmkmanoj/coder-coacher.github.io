<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Simple RESTful API - (3/3) - Finale | Coder Coacher - Coaching Coders</title><meta content="Simple RESTful API - (3/3) - Finale - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Simple RESTful API - (3/3) - Finale</b></h2><h5 class="post__date">2017-04-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/D9GNm-9LwG8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in the first video we set up our API
we learned the basics of what a restful
api is and the last video we learned how
do you actually put it into practice and
we generated this token wherever we sent
the correct user name and password to
the server the API sent us back some
JSON with the login token for the user
in it what we're going to do now is
we're going to change the verb on the
Arth request to a delete one so now when
we have a verb that says delete what we
want to do is we want to delete the
session or the authentication and in
this case that means to log the user so
we'll do is we'll run that you can see
we get for a five method not allowed
because at the minute we haven't
actually implemented anything other than
posting gap we haven't implemented the
delete method and we have this error
just because a delete request doesn't
have a username and password so if we
just remove the body so what we'll do is
we'll our that delete method so we'll
just copy and paste our else--if post
pissed it in here and we'll change it to
delete know what we want to do is want
to copy what we're checking for off
because we're going to the same endpoint
we're going to the ass end point and now
when we have a delete request and we go
to the our end point we want to delete
these session that we're given so we
check for off then what we want to do is
check for the token to delete so to
check for the token to delete what we
want to do is want to say if get token
if is set get token and it's probably
weird that we can use the gap variables
when we're handling a delete request but
the reason we can use the gap variable
is because that array will store the
parameters in the URL regardless of
whether to date requests or a gap
request so what we're doing is we're
tagging if token is sat and if token is
set then what we're going to do is
delete it from the database so
originally to log the user right what we
did was we had a log OPH and if I drag
that in now you can see here's how we
log these right we just delete the token
from the database so what I'm going to
do is just copy this
pierced it in here and you can see on
the logo page we can delete from all
devices or we can delete just from the
current device to keep things simple in
this video I'm just going to delete from
one device because in these social
networks there's hardly any modifying
this so I'll keep it simple for now what
we will do is instead of getting the
token from the cookie what we will do
instead is we'll get the token from the
get token parameter and I'm going to
pass DB query again and that FC token
deletion is successful what we will do
is return some JSON so we'll just say
echo status success and then we will
return a history response code and it's
going to be 200 which means okay which
is the response code you get every time
a page is successfully loaded or some
action is successfully completed and
then if the token variable is not set
we'll just return a 400 response code
which stands for a bad request we could
return some JSON we could just act this
out as well we could just print error
malformed
request something like that if we wanted
to be more user friendly so we'll just
run this we're good apart we've got a
delete verb Sat we run that now we get
error malformed requests because we
didn't pass the token parameters so if
we said token equals I pass in something
some random token and I hit run it says
success but it didn't actually work
because that token is invalid so we want
to check the token first so to check the
token we'll just say F T V query will
just say select token from login tokens
who are token equals token I will just
pass this token here
so if a query stray will run on this
code
otherwise we'll say another
response code I will just tell them that
the token was in violence we'll just
print this will say error invalid token
I believe the response code is 400 we
can change that whenever we want that's
just up to our personal preference
whoops we just have a syntax error so
now if I run that we got an error the
reason we got that error is because it
doesn't match the took in the database
if i refresh you can see there's the new
token in the database we have to hash
the token first so we actually just
forgot to surround our token in sha-1
run it one more time not size six
and if we go to our database table and
refresh this sack this last row should
be deleted now you can see it was
donated now if I try to run it one more
time
it says invalid token because this token
was deleted and now it's no longer in
our database so hopefully this short
series on creating a simple restful api
was useful we're going to use it in our
social network series which is what this
is all the building up to that's why the
example code is our social network
series I'm going to include cars in the
video and links at the end of the video
to social network series specifically
also the parts that we mentioned in this
video to make it easier to follow that's
why we use these examples but that's it
for this video don't forget to Like
comment favorite and subscribe don't
forget to follow us on Facebook Twitter
and reddit don't forget if you have any
questions my email is Francis at haiku
org but that's it for this video and
I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>