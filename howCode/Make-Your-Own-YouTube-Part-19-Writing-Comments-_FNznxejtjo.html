<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make Your Own YouTube Part 19 : Writing Comments | Coder Coacher - Coaching Coders</title><meta content="Make Your Own YouTube Part 19 : Writing Comments - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make Your Own YouTube Part 19 : Writing Comments</b></h2><h5 class="post__date">2013-07-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_FNznxejtjo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">soham welcome to this video so today
we're going to be doing is we're going
to we're going to be allowing users to
actually write comments on videos so for
example here here's the comments we get
displayed in the last video we're going
to put a text box or a text area on
submit button underneath the video just
like just like the way you tube does it
to our write comments so let's get
started so as you can see I'm on the
watch top PHP page and I'm on line 55
I'm just going to make a new line so
this is like 55 and what I'm going to do
is I'm just going to create a div and I
set the style so that it's floating on
the left-hand side of the page and i'm
just going to write a div in capital
letters just so that we can actually see
the div so I'm just going to refresh the
page so as you can see we have our div
here on the page it showed up in the ad
place we expected it to so I'm going to
go back in our text edit or no and we're
going to create a form so we're going to
add delete the day of text and we're
just going to replace it with a form
already set the form action to the URL
of the page which in this case is the
full URL including the video ID so we're
just going to copy paste this for now I
will replace this and make it dynamic in
a minute and then the next thing we need
to do after the action is we need to
specify the form method and it's going
to be post because we're sending data to
a web server like and we're going to
insert it into a database so we need to
set it to post so what I'm going to do
is want to create a text area
and I'm going to give it a name of right
comment um and as well as that since its
attack sorry we need to add rows and
columns so we just need to specify those
so the rows are how many down for
example so that's the height of the at
this is the height of the text area and
columns is how many across the text area
is so obviously we want less rows and
columns so that way it's a rectangle so
if I said five rows and tan columns we
should get a rectangle so we do you get
a rectangle albeit a very small one so
we make it bigger so we'll give it maybe
50 rows on 20 columns maybe our f50
columns and 20 rows so that's refresh
and see what happens so if we scroll
down we can see that's way too tall it's
maybe we bit too short or I mean oh wait
that's not wide enough so we'll just
maybe give fifty five columns on tan
rose so this is just basically trial to
trial and error to find idea the best
height of it so let's maybe make it
seven maybe seven rows on 57 columns
just because we need to try and make it
as wide as the video and maybe 56 so
let's close enough and then obviously we
need to push this down afterwards so
what we're going to do is we're going to
set the width of this div whoops of the
day of containing the the text area to
one hundred percent that way it will
even the textile status iam with the dev
containing it will fill this whole of
space here and it will force this at the
Y a comment to be pushed underneath it
so as you can see if we scroll down I
the air comment was pushed below so now
we have our text area we need to
actually make the submit button so I
know I think about it will actually give
a last column so we'll give it 50 coms
maybe because we need some room for our
submit button and maybe wait maybe even
last night 45 so we're going to put the
submit button alongside the the text
area on the right hand side of it so
we're going to do now is we're going to
go underneath then we're going to create
an input type of submit we're going to
give it a name of post comment we're
going to give it a value of post comment
so as you can see know if we refresh
this should be alongside up but it's at
the bottom and we wanted to sort of be
as tall as the text area so what we're
going to do is we're going to set a
style attribute to it and what we're
going to do is we're just going to give
it a height of maybe a hundred pixels
and see what that looks like okay oh
yeah we need to actually ride height and
as you can see it's sort of give it a
height a given height of 100 pixels but
it isn't it's still a position to the
bottom of the page so what we can do to
fix that is really simple we can just
give it an attribute of float laughs to
switch your damn make it float along
side the text area and as you can see it
did push it up to the top it's not quite
tall enough and it did push it float on
the left-hand side but that's on the
wrong side of the texts are you now so
that's really simple defects all we have
to do is in the text area give it a
style attribute as well I'll tell it to
float left as well and since the text
area element is above the submit button
in the page or in the code it should
float it to the left first and then
float the M post comment button it
should basically just push this button
normal either
the text area because it what will do is
it will see the text area because it's a
book it's above the button and the code
so it raised everything top down so
it'll read this first and you'll say f
load this to the left so it floats out
to the left first and then it reads this
afterwards and it says focus to the left
but this is already floating in there
were in the place to account floated to
the very edge of the page so it pushes
it alongside the text area so we might
need maybe 120 pixels maybe that's a wee
bit too much but let's find out so that
looks about right that's actually
perfect I'm going to actually give it a
width of wicked out okay I will leave
the way to the bottom scene because it
might look a bit too skinny otherwise
and we'll just decrease the columns to
42 may be 43 maybe okay so that's close
enough so now we have our form what
we're going to do is when add some PHP
code actually submit it so what we're
going to do is we're just going to come
in here and we're going to actually
write a comment so we know what's going
on so a comment post code so we're going
to do is we're just going to say if is
set host the post the reason the post
has a dollar sign then an underscore and
then the capital letters is because this
is called the global variable so it's
sort of a type of variable that's kind
of reserved which is why it starts with
an underscore even though usually you
can't start variables with underscores
and what this basically is just PHP is
reserved fiable for post are getting
post data from a form and what we need
to give it is the value of the submit
button so what does it just checks is
the submit button pressed so as it has
data from the submit button been sent
and then what we're going to do is if it
has we're just going to set die
we're just going to say comment posted
49 and then if we refresh again and
click post comment it says comment
posted and I'm not quite sure why I
didn't work the way we expected to but
it doesn't matter because that was just
a test and our data is still being sent
so what we need to do now is we note
since we know the date has been sent we
need to actually pick up the data so
what we're going to say is get the value
of the text area and that's why we give
it a name right comment so we're just
going to say comment text equals post
write comment and then what we want to
do is we want to add to this thing
called sanitizing and data what just
basically means making sure people can't
post malicious things into it so people
couldn't and post an asset or a MySQL
query as the comment and then make
changes to our database and so that
people couldn't post like PHP code and
things that would mess up our website so
the first thing we're going to do is
wanna send my SQL real escape string and
it's a function so we surround up where
we surround we surround the right
comment post data in the MySQL great
escape string function and what this
function does is it just skips
characters in a string that can be used
in my SQL injection so that way it's
just sort of a protector way to prevent
my SQL injection into your database and
the next one to do is once have strip
tags which is basically removes any tags
from any posted data so that way people
can't submit tags and whenever the
writing a comment so the next one we're
going to use is HTML entities we're
going to Sirhan that
around the post data so what this does
is it converts all HTML codes or
characters to their sort of special
character so what I mean by that is for
example a less than sign the here's HTML
code of and lt a semicolon so what does
what this will do is if it sees a less
than sign it converts it to an end and
on Anand LT semicolon and that's useful
just because it stops people being able
to get around the strip tags thing and
inject things in our database because
there if for example since PHP starts
with a PHP tag start with the last
ensign this would immediately stop it
because if whenever thought it would
convert the last sun sign into that and
then that's not a valid PHP opening
block so that wouldn't actually be a
black to get any PHP code and final what
we want is trim and let's just remove
spaces are leading and ending spaces
from the end of the comment so that
we're not so people can't post like
blank comments and if someone starts a
comment with loaded loads of spaces and
then writes this is a comment the only
thing that actually gets entered into
the database is the this is a common
part so that after we've done that what
we need what we can do is we can just
say MySQL query insert into our database
which is video box the values and I'm
just going to go into PHP my admin on
find out the layout of the table so
here's the layout of our table we have
five different columns so we need five
different art and values in the query
first ones ID so we can leave a blank
second one is user comment and which is
going to be the user name of whoever's
logged in
so in our case I believe it's its user
as the variable name we use so we'll use
up for getting the user commented the
comment is going to just be comment text
and the date posted is going to be um
let me just checked it okay I'm video ID
so video I day we can just actually use
the video ID variable and then we can
just set it commented let me just create
this variable up here so that's not that
hard all we do is create a variable
called it commented equals dead function
and then we just lay it out where we
normally would so so what we're going to
do is we're just going to set day which
just basically a small D and the date
function this basically means the date
so for example today is the fourth of
July 2013 so the small day just means in
this case would be zero for the next one
want is a space and then an F I'll get
capital F so what this would do is we
put a space because we use the space in
the formatting and the capital F just
means the month so in this case movies
edge you lie and then finally we want to
capital y and then this will just put
another space and then the year which is
2013 so that is how the day it would be
represented in our database so that's it
for the comment code so let's actually
see does it work so let's post a comment
click post and it refreshes the page and
as you can see what you actually refresh
let's have a look in the database ok so
if something didn't work and our comment
didn't get added ok so the reason we
attend work is cause we used insert into
video box and that's not actually the
name of the table
name of the table is comments video box
is the database so let's try it so we're
just right task comment again host
refresh or mean scroll down on a fresh
as you can see we have two comments now
so we have a slight bug with the add
comment form being shown twice but
that's not hard to fix and the other
thing we need to fix just really quickly
is this which isn't hard we just replace
this with PHP echo video ID that's it
sorted and the other one we want to fix
is the comment form being shown more
than once so to fix this what we're
going to do is we're going to do is
we're just going to copy all this and
move it up above and just paste it in
here and now if we refresh we get the
car wants to spread twice the two
comments and then the video of the
comment box is only once so let's just
try it again another comment post oh we
actually have to refresh and there we
have our another comment except for some
reason it's being posted twice
okay so we'll just undo all this and
then leave it there so now if we refresh
we will actually get a load of comment
boxes and unfortunately I've just run
out of time in this video so we'll fix
that in the next video because ever but
just about you run out of time so thanks
for watching don't forget to comment
like favorite and subscribe and I'll see
you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>