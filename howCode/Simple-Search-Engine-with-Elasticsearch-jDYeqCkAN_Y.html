<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Simple Search Engine with Elasticsearch | Coder Coacher - Coaching Coders</title><meta content="Simple Search Engine with Elasticsearch - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Simple Search Engine with Elasticsearch</b></h2><h5 class="post__date">2018-03-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jDYeqCkAN_Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
learning about elasticsearch
elasticsearch makes it really easy to
create an accurate search engine for
your website it can be a lot better and
more accurate than MySQL and it's
designed to scale horizontally that
means that you can spread your data out
across multiple servers
so you've lots of people using your
website it'll stay really fast because
you can shard your data which means you
store different pieces of data on
different servers and your elasticsearch
servers work together in a cluster which
means you can do your search queries in
parallel which can make them even
quicker so we're going to be learning
how to set up elastic search today so
the first thing we have to do is install
Java because elastic search was written
in Java so because I'm going to use a
droplet from digitalocean they have a
Java tutorial here and all you have to
do is install the Java Runtime
environment and you keep scrolling down
and then you just have to set your Java
home environment variable so to set your
Java environment variable you just run
this command you'll get this string here
and you just copy and paste that into
this file here and you just create a new
line say Java home equals and you paste
in that string then you just change your
source variable and you're good to go
so now Java is installed we can install
elasticsearch so to do that we just run
this command W get we don't know that
then we install it here and we set it up
as a service so we run that command
there then finally we have to set up our
configuration file which is located here
and everything above this is just
comments so here is the actual
configuration so we give our cluster our
name it doesn't matter what we call it
we give our node inium it doesn't matter
either we set this to true because we're
only gonna have one node in our cluster
so it has to be the master we're gonna
have one shard because we have one
server and we're not gonna have any wrap
the case because we still only have one
server by default elasticsearch is gonna
listen on the IP address 127.0.0.1 and
that's the loopback address which means
you won't be able to access it from the
internet so we're gonna listen on
0.0.0.0 which will listen on every IP
address on our server so that we can
access it over the internet so we save
our configuration file and we just
restart elasticsearch and if we want to
check if it worked we can just check the
status of it you can see elasticsearch
is running and now we're ready to start
adding data and searching for data so
elasticsearch runs on port 9000 204 the
api so if you send a get request to this
address this is what you'll get
because we're gonna use a rest for the
API I'm gonna use Pau which is a piece
of software that makes it really easy to
work with api's so what I'm gonna do is
just go to get and I'm gonna run that I
know you can see exactly what we saw in
the browser so elastic search has
indexes and types so an index is kind of
like a database in MySQL and a type is
kind of like a table so if I wanted to
create a new index or a new database as
I might call it I would send a post
request to the address of our server
slash whatever I wanted to call the
index so if I were to create a blog I
could create a blog database I could
create an index for a blog which means I
would type in /log and I would send a
post request to this address and I would
run that so you can see the index
already exists because I've already
created it so what I could do is create
another one called forum run that and
the index was created so now I say I
wanted to create a type or what we would
call a table in MySQL I would still send
a post request to form just say I wanted
to create a table in form and say I
wanted to create a table called users so
what I'm doing is I'm going to the form
index and I'm creating a type called
users and if I was to run now you could
say our new type has been created so
back to the blog example let's say I've
just created my post type or my post
table as I would call it and I want to
add some data to it well to add some
data to it all I have to do is send a
post request and I give it the data that
I want to add every post gonna have a
title so I'm gonna say here's the title
it's gonna have a body that's gonna have
an author
so now if I run this it's created that
item in the posts table so if I want to
say all the items in the post table I
can go to blog slash posts forward slash
underscore search the search endpoint is
how we query our table and if I query it
without any parameters it's just going
to give me all of the results and before
I run that I have to just delete the
body of the request
run it now
you can see it says we have nine hits
there are nine items in the post index
and what they're actually called our
documents so in my SQL every post would
have to have a title a body and an
author but because this is a document
based system a post could have a title
or could not have a title it's
completely up to us every post is
completely individual from every other
post so if I scrolled I now you can see
all of the posts that I've added there's
some empty ones that I added by accident
and what I want to do is start searching
for posts no sort of search for a post I
have to query it and I have to use JSON
to do it so the first side of my ad is
gonna be called query it's gonna be a
JSON object so I have query is the first
item then within that I have another
object called query string which is also
an object and within that I have another
item called query and here is where I
put in the search query that I want to
look for so say I want to find any post
with the word Francis in it so that
means any document with the word Francis
so in this case the author has the word
Francis so I'm gonna gonna return every
post that was written by Francis but
would also return if the word Francis
was somewhere in the body or the title
and this weird format for querying the
database is part of elastic searches
domain-specific language it's their own
query language that uses JSON here is
the JSON down here so what I'm gonna do
is I'm gonna run this and you can see it
says hits total equals four and you see
every one of these has the word Francis
in the author of the post so I change
this word to something like first and
run that you can see it only returned
one post because there's only one post
with the word first in the document we
can do a lot of things with
elasticsearch this is just a really
quick look at it so this has been a
really simple look elasticsearch but
this is a really simple search engine
thanks to elastic search but that's it
for this video don't forget to Like
comment favorite and subscribe don't
forget to follow us on Facebook Twitter
and reddit but that's it for this video
and I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>