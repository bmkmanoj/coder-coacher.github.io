<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 33 - Posting Comments | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 33 - Posting Comments - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 33 - Posting Comments</b></h2><h5 class="post__date">2012-09-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rpji25ksBe8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I'm welcome and today what we're
going to be doing is going to be
whenever the user click show comments
and they like post comment we're going
to actually make it show up sort of a
comment post form thing to actually send
a comment so let's do that now so what
we're going to do is see where we left
off and then I'm actually going to copy
this and I'm gonna look for show
comments no it's not what we're looking
for actually okay so we're looking in
the wrong document so I'm here's the
correct document comment frame PHP so
okay what we're going to do up here is
we're going to copy the code from here
this code here div ID equals toggle
comment ID so I will copy this and paste
it in okay so now I've done that and
we'll change this to a get ID because
they're the variable ID isn't declared
I'm up there and it's not too far down
here either
so and I've done that okay actually I'll
just realize this is wrong not so I want
to copy this and undo we just did and
under here is where we want to M display
our form - these are not the actual show
comment button so I'm just going to
create a form and the action the form is
going to be
so I the action of the forum connect to
be home not PHP okay so I've got the a
forum action we're going to do the
method which is obviously post because
we're submitting data so the first fail
it's going to be input I pick those
texts name equals so actually says it's
a comment we don't need a title so I we
can just get rid of this I'll change it
to a text area we can give it 120 rows
and then say calls equals give it a 50
columns and we can see that we can okay
this won't show because of this code so
it will just copy that get rid of it for
now so if we refresh show comments now
we have our text area but as you can see
it's very small so we can hide maybe how
no 50 rows and you just say I'm enter or
comment below now guide opening music I
don't think we need to do that so if we
refresh again mate show comments so we
will need to put a paragraph tag in
there just to put this them a big space
between dot I'm not so as you can see
that's obviously still quite small so
what I'm going to do is we'll say style
hi
200 pixels it's probably 200 but I must
just die to choose so that's way too big
so I will change it to half half that
and it show comments and um that's a
reasonable size so we'll keep it like
that and okay so what we'll do now is we
kissed and the code F up here and then
we will I will go to the home page and
we'll find the JavaScript code we used
so I this is it here so what we'll do
now what we'll do is we'll just get this
I once you've copied it we will paste it
in the other one up here so I paste it
on and obviously change this to get ID
okay so we'll need to cut that and put
it down here so I'm and also change this
to get ID now we don't need to change
that it doesn't matter
so n now I've got that code there we are
going to copy this I think we actually
already have it but whatever let's just
see
so we don't have it yet so I'm just so I
will actually say on click so that what
was has a little sale on click and we'll
just PS this in and obviously we have to
add changes to get ID and surround it in
PHP and tags so so that should work
hopefully so if we refresh now hit show
comments it's disappeared obviously
because then we set it to display anon
so the text area doesn't show up but
away it show comment okay so let's try
this again M let's go to comment framed
up HB and ID equals 14 so now if we hit
post comment it doesn't work so let's
see why so a good way to find out why my
bait to go to this source code and as
you can see this says toggle 14 Cabo
Verdean so that's correct okay so I
think I know the problem so the first
problem is we have an extra a positive M
so the first problem was we had an extra
quotation mark there so we got rid of
that and now we're going to get rid of
the PHP code when you put in here so
we're just going to set toggle and we're
going to do the same up here so we'll
just copy the RF like this
on this obviously so now if we refresh
and we hit post comment mmm
and we also need to remove this other
PHP code so now we don't we have done
that we hit post comment shows up so we
can check this on the actual page that
it works my heading post comment it
shows up it's not the best way to do it
but it works so okay so what I'll
actually do is so it'll actually do
noise as you can see when we do that
when we click on it it M it takes us to
the forward yeah pond sign in the
browser it doesn't take us to a new page
but it's still sort of it pushes you it
pushes the page down so one easy fix for
that is just to go in here and delete
the pond sign and just write JavaScript
and then and normally as you can see we
have the function name here but all we
have to do now is put a semicolon in now
if we refresh it doesn't save it in the
browser history either as well so at now
if we hit post comment it shows up which
is a way better way to do it so now is
or not we're going to go to we're
actually going to make the F form do
something so I works it for any of the
form name of a post comment okay we're
going to say add a get ID because we
want our we don't want our form to get
confused and post the wrong comment to
the wrong place so up here obviously we
will create some PHP tags and we'll say
if okay
post comment um @id then we're just
going to echo um well we can start off
by saying comment posted so now if we
hit the refresh button and okay as usual
since the single quote since we use the
same quotes for this we need to put the
single quote space
. space and then the reverse so i know
and we'll also do to prevent our just
put the @ sign there so now if we
refresh and hit this and obviously type
something it and okay i just realized we
didn't put a submit button in so we need
to do that otherwise we can't submit our
form so we'll say input type submit name
i have post comment and then we could
just say m value post comment so now
we've done that we hit refresh up here
wait Cho comments and then we hit post
comment obviously so what we do is and
type in anything so the app and we just
submit the form okay so a slight problem
though
we got the add kind of a duplicate of
the page on in here so what I'm going to
do is the form action is actually going
to be comment free m dot PHP ID equals
and then I'm gonna send cap ID
so now this by the formal submit inside
the iframe so it will sort of look like
you're not leaving the page and it will
just kind of up to the comment
automatically so as you can see hit post
comment okay so the reason and nothing
happen is because we are tracking the
wrong button so what we'll say is HB Act
will get ID I'm not an are we with that
refresh try it on try it again okay so
something's not quite right here so I
stupidly sad if get post comment which I
really should have probably used if is
set post oops
and then this is when we say post
comment and then we say it yeah we get
the ID variable so I try it again and
yeah it says comment posted which is
good so it means it's at working so what
we're going to do now is we're actually
going to put a break tag in there just
to tidy and actually know we can put a
paragraph tag just because there's a bit
of a bigger space so now we've done that
all we have to do simply is grade my SQL
query that says insert post equals mysql
query insert into okay so what i'm going
to do is i'm going to find out the name
of the database so as you can see here
our databases and table name is at post
underscore comments so add that's where
we have to
here so we'll set post underscore
comments a values so where our word says
values we need to put in the number
well not the number fields but we need
to put in the every field in the
database table so as you can see there's
one two three four five six six fields
so that's what we need to make sure we
have six here so we'll set values and
the first ones ID which is auto
incremented and it's set to the primary
key so now we don't need to put in a
value for for it the next one is okay
well actually before we do that I'll
just put in 6 empty empty M things so
that we can say hi we have the right
number so I have sex here the first one
I'm going to put in is post body and we
will make that variable in a minute
hosted by inch is obviously going to be
user posted too so I posted to is going
to be slightly trickier I think um but
it won't be too hard to do and post
removed and post ID so I post removed
we'll just put in 0 and post ID we'll
just put in cat ID so we're just going
to create the yeah post body variable so
I post body equals
going to say a post and we're just going
to say post body down here in the text
area we need to give it a Needham which
is a going to be post underscore body
because these two names have to match so
I've done that the only thing we're
missing is the posted to and posted to
is just going to be we're just going to
create an empty variable for that one
alright now I will just say Francis for
not so now if we M try to post that and
obviously we have to well we don't have
to but it's a good idea to cut that I
put the echo like the success message
underneath everything so because
computers read code in a linear fashion
which means they start from the top and
work their way down they'll read all
this code first and then they'll read
the echo code which is when they print
it out and they only get to this line if
all the other lines be successful
basically so when we refresh actually
we'll do it here so we hit show comments
and we hit post comment we enter our
comments so I'm hi this is a comment we
hit post comment
so it's his comment posted so that
should have worked regardless of the
area we got and now you know why we had
the error so I'll fix that in a minute
and here it is this is a comment posted
by these because we had the error so it
didn't show up posted to showed up
poster moved a zero so I'm obviously
post ID also s14 so the reason we got
the errors because the variable user
isn't declared on this page because even
though it's running in an iframe the
iframe found interact with the page
around it so on
whatever we want to sort of whatever
variables want to use have to be
declared on this page separately so what
I'm going to do is I'll open the scripts
folder know the script the Inc files
folder in the header file and we'll go
all the way up to the top and all I'll
do is copy this and just paste it up
okay actually yeah not pissed up here so
now we won't get the undefined variable
error and that's all I have time for now
but in the next video we will finish off
the post system
so actually what I'm going to do is fix
the error first so I posted to analyze
change the I variable posted to to
cinema to I think so that we see it on
the posts so what we'll now we've did
actually edit sorry I just realized I
don't actually need to change the any
other code because since I pasted this
code in and I the user variable I will
work so if we refresh get your comments
I try to post one this is another cast
comment we hit post comment it says
comment posted and it was posted but
it's because it's showing them for
cinema so I'll let me go back down
actually on change that just a cinnamon
on and then we left see it so we hit
refresh again for the final time we say
this is the final test comment we post
comma
hmm okay so maybe it doesn't go up
wila oh yeah it has been doing it it's
uh it's because uh yeah it's because I'm
I'm logged in as cinema and I'm trying
to post on cinemas wall which is why
these aren't showing up just as sad
which we'll fix in the next video
and I have the comments in the wrong
order so basically to display comments
it displays them upside down kind of so
we will also fix that because at the
moment we have a si for standing so we
change that the si from D sanding and
it's you look up so I will just type in
anything hit post comment and there it
is
then the other side the reason sad isn't
working because I'm posting it when I'm
logged into cinema on the cinemas
profile so anyway we'll get all that
fixed in the next video and we'll make
it more secure and things but whatever
so thanks for watching once again and
don't forget to like the video favorite
and subscribe because yeah my trying to
get my subscribers back up because I
noticed my swap channels I only got like
56 or 57 subscribers at to actually go
across and probably some of those are
new ones as well so I'm not slightly
disappointing so a please if you haven't
already subscribed just subscribe please
cuz it n helps out a lot actually you
wouldn't probably believe how much it
helps and see you next time and thanks
for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>