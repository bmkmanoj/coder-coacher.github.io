<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 38 - Closing Accounts | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 38 - Closing Accounts - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 38 - Closing Accounts</b></h2><h5 class="post__date">2012-11-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YqBQhfhNv9I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi and welcome back so whatever we're
gonna be doing is instead of doing
starting a new part of the series that's
gonna take a long time I will I
originally had planted a Mick photo
albums and things but instead of
starting one that's going to take a few
and videos to finish I'm gonna do
something a bit quicker and it's gonna
be allowing people to close accounts so
to do that what we're gonna do is just
add a new option to the account settings
page now a lot of people to close their
accounts so let's get started basically
so the first thing we're gonna do will
go into the database structure I will
add one column at the end of the table
the column just gonna be called closed
and it's gonna be set to varchar' of
length 3 and and default is gonna be no
that's all we need to add in the actual
database tables or click Save I'm attack
browse and then we should see a new
column in our table and it says closed
now so that's what we're gonna use to
define rather than a constant closed
your knob the next thing we need to do
is since we added a new row to the table
we need to come in here and I just a new
row into the insert query on the index
page for the register and for one
registered user because if we leave the
site we want to have the right amount of
columns and they won't let us insert any
users because when you insert a user the
column count which is the amount of
columns you in starting to ask me the
same as they went to college actually
have so you have to insert something in
every column even if you just insert
nothing like but you still have to I do
the hot at least but what we're gonna do
is just insert no and so I can't closed
it's gonna be you know by default and
then we're gonna come down here
and now we can copy this form let me
paste it in and if we go back to the
account settings page and click refresh
we see a new option but this isn't what
we want we just want actually we just
won't have one button that says close
the console those my account let's just
refresh okay so it's pretty obvious it's
too big of a coppler so let's fix that
now we're gonna get this to submit to
closed account dot PHP and then we're
just gonna say are you sure on that page
so we're just going to say close kind
the names gonna be the names gonna be
close because these don't actually
matter but I'm just put them in anyway
the next thing we're going to do is
we'll create a new page and it's going
to be a dot PHP page and it's gonna be
called clues count top PHP so now we've
got that page we're gonna include the
header file
so it's pink lips pink splash ink files
splash header dot Inc top cage me so now
we can check that's all working yeah by
refreshing I'm scrolling down
can see close your account and we just
want to say close my part we click on it
and it takes us to close account of PHP
which is correct and actually I don't
like lined up so we'll just put the line
underneath and try it again see what it
looks like so here it says close a
comment click on it and it takes us to
this page which is correct that's what
we want so what we're gonna do is we're
gonna say I'm just gonna put actually a
line break in and then we're gonna say
use the center tag and all we're gonna
say is actually create form the action
of the form is going to be a client that
closed
I can't let H me on the method it's
gonna be post so what we're gonna do is
we'll create two buttons so input type
equals submit name equals low and then
the value is just gonna be actually no
and up here we will do our eye are you
sure you want to close your
so then we put a break in so then this
first option is no and then second
options obviously yes and the values
gonna be yes right sure we could also
just say no take me
so let's try an ollie in the fresh
because you sure you was too close your
kind no take me back yes I'm sure
so the first thing we're going to do up
here in the PHP code is take them I just
a tick the user back we're also going to
say if the user let's just copy this so
now we've done that check we're going to
take the user back to a con settings
page if they want so would say if it's
at post oh then we just want to say
better
header location icon settings dot PHP so
let's try that so now we just click no
take me back and it takes us back to the
account settings page so the next thing
we need to do is just updates without
ruined database depending on whether
they and my left the user collection yes
close my con so we'll say just copy this
actually I'm gonna say if it's a post
because yes then all we do is create a
MySQL query update the users set closed
equal to yes
or user name equals user and then we
want to say is echo your being
closed and then we want to say session
destroy
so we destroy their session so that way
they can't be logged in anymore
so let's try this and hopefully refresh
and like yes I'm sure
okay so okay yeah yeah MySQL query there
like that we can wait I did not know max
and so we can just say yeah close
comment it doesn't matter really what we
call it so let's try it on your
continent closed fresh and it says you
must be logged in to view this page I
know I know
well we also need to check or change the
login form because as you can see it's
yeah okay that's fine okay so we also
need to check on the login page because
they can still log in even when their
cuts already been closed and you can see
so as you can see for the user cinema we
scrolled over closed equals yes they can
still log in so we need to fix stuff so
we'll log them out and we will go to the
index page and all we need to do is
change a few things select all from
users were are no select ID from users
where usually make it was user login and
password equal 75 password login we also
want to say um closed equals C and so
actually I will need to add so now if I
try to login
it says that information is incorrect
but now I'm going to go to the universe
and I will change clothes - yes or I
will change clothes - no and then we'll
see what happens so as you can see I
just changed it - no I change the value
if closed for the cinema user - no and
then we will try a login play so a know
if it's like login to your account
we can login don't we go to account
settings let me click close my account
take me back and it still works we click
close my con I'm sure your clients much
closed and I've been logged on so that's
it for this video don't forget to
comment rate and subscribe and the next
video will be probably photo galleries
and things for users to make photos and
upload them and things yeah but this is
just been a shortish a short sort of
video so once again don't forget to
comment like and subscribe and I'll see
you next time thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>