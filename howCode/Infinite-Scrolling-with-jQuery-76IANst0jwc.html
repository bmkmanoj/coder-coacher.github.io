<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Infinite Scrolling with jQuery | Coder Coacher - Coaching Coders</title><meta content="Infinite Scrolling with jQuery - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Infinite Scrolling with jQuery</b></h2><h5 class="post__date">2017-06-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/76IANst0jwc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're gonna learn how
to create a simple infinite scrolling
system using jQuery and what are
infinite scrolling system is gonna do is
it's going to load our data in chunks so
you can see there's five videos of the
minute but as I scroll it's gonna load
more videos in underneath so if I scroll
up you can see the scroll bar is really
big because the page only has these five
videos on it but now I start to scroll
down you can see the scroll bar has
shrunk because it's loaded in five more
videos and if I scroll down more you can
see here are the other five videos and
there you can see the scroll bar just
jumped up and shrunk again because it
loaded in even more videos and we're
gonna scroll down again and it jumped
again and it loaded in the last set of
videos in case you're wondering why we
might want to do this on the social
network series you can see when we load
the page we're loading all of these
posts in as you can see we're starting
to get quite a lot of posts and some of
them of pictures so what we might want
to do in the social network series is to
use F and it's scrolling to only load
small chunks of data when we need it
because at the minute you can see I can
only say these two posts I might not
scroll down on the page so I don't need
to load in the other posts underneath so
we could use infinite scrolling or
pagination but infinite scrolling looks
better and it's more suited to something
like this so why does it actually work
so when we load the page you can see
we're loading the page we load our
jQuery and then you can see we send
another request off to this page data
dot PHP and we give it a start value
when I click on this you can see it
returns the JSON of these five videos
when I scroll down you can see we're
gonna send a request you can see there's
the second request so initially we're
loading the first five videos so we set
start equal to zero then after we've
loaded the first five we want to load
the next five so we set our start equal
to five so that we're downloading the
next group of five videos now what we're
gonna do is scroll down again and when
we get near the bottom it's gonna send
another request and now you can see
start is equal to ten we put the next
set of five videos and we scroll down
again now I start is equal to fifteen
and we have our last set of videos so
let's see how this is actually
implemented so the first thing we do is
we have this data to PHP file this is
instead of having a database this is
just for the sake of the video I created
a class called video each video has a
name and it has a number of views then I
created an array of videos and this is
just an array that stores all of our
data this is just like our database and
all this loop does is it loops through
the database and it gets the videos in
groups of fives and then we just convert
the errata JSON and print it out and
that's all we're doing next we have our
index page the first thing we're doing
on the
pages were unloading our jQuery and then
here below that is where we actually
start the code for our infinite
scrolling so we have our start variable
equal to zero and then whatever the
document loads which is just when we
loaded the page for the first time we
send an ajax request off to our data PHP
file and we just grab the first five
videos and when we grab the first five
videos what we do is we get the JSON
that it returns we loop through it and
we append it to the body section of our
page we just put each video in a div and
we store the video name and the video
views down here is where it gets more
interesting this window does scroll
function will run anytime we scroll in
the window so you can see here I've just
redefined what the window scroll
function will do whenever it runs and if
I just scroll and I in the window you
can see it's printing out all these
numbers and those numbers are actually
the position of the scrollbar so if I
scroll up to the top you can see now
it's set to zero if I scroll down a bit
you can see it increases and if I get
close to the bottom it goes to the
maximum number but you can see that that
function runs every time I scroll in the
window every time we scroll we want to
see if we're at the bottom of the page
and that's what this line does here so
scroll top just gets the possession of
the top of the scrollbar so you can see
neither scroll bars at the very top it's
zero and if I scroll down you can see
it's just increased because the top of
the scroll bar is 924 pixels down from
the top of the page and what we do is we
get the height of the body so we can get
that just by passing that in here you
can see the height of the body is
currently 552 pixels but now if I scroll
down you can see the scrollbar shrunk
because we loaded more data and if I run
this again you can see the body has
increased in size to make room for the
new data that we've just loaded and then
we get the windows height so what we do
is we get the height of the body and we
subtract the height of the window so you
can see if we run that if we take the
body height and we subtract the window
height we get this particular number and
if I scroll down to the very bottom of
the page and I print out the scroll top
value you can see the scroll top value
is bigger than the height of the body
minus the height of the window so all we
need to do is check if the scroll top
value is greater than or equal to the
height of the body minus the height of
the window are we out this plus one just
because sometimes when we end up with
these fractional numbers of pixels our
function won't run so we add a plus one
to ensure that when we're at the bottom
of the page the scroll top value will
always be bigger than the height of the
body minus side of the window so
provided that's true which means we're
at the bottom of the window we're gonna
send another Ajax request to date it up
HP and we're gonna pass our new start
value because if we scroll up you can
see after the
function runs were increasing the start
value by five that allows us to get the
next five videos and then after we get a
response all we do is we pan those to
the page we increase start by five and
then we have this set timeout function
and the way that works it means we can
only load new data once every four
seconds and the reason we have that is
because if I just go back to the page
and now if I scroll down you can see how
many times this function actually runs
so what we want to do is only let it
load once every four second you can
choose whatever time you want and the
way we do that is we just have this
working variable just normally set to
false but the first time we run the
scroll function what we're gonna do is
set it to true and then we're not gonna
set it back to false until four seconds
has passed that means we'll only send
one request every four seconds which
will stop this problem of our function
being run over and over and over again
because in reality all I've done is hit
the bottom of the page once so we can
see the function run over and over and
over again and that's pretty much it
so that's it for this video don't forget
to Like comment favorite and subscribe
don't forget to follow us on Facebook
Twitter and reddit if you have any
questions you can email me at francis at
haiku org the source code of this video
will be on the hi code github page there
would be a link in the description but
that's it for this video and I'll see
you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>