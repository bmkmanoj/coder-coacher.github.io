<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make Your Own YouTube Part 8 : Subscriptions | Coder Coacher - Coaching Coders</title><meta content="Make Your Own YouTube Part 8 : Subscriptions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make Your Own YouTube Part 8 : Subscriptions</b></h2><h5 class="post__date">2013-01-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lPcLvhmm8Tw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so ha and welcome back so welcome to
this next video in the series and and
the last episode I said that we were
going to be finished fixing or fixing
this problem here with the sidebar on
the channel page so we're going to do
that now so if we go into the side style
of CSS file it says channel video
container won't know actually channel
options and then all we have to do is
say position fixed and you'll see no it
will push it off probably yeah it pushed
it pushed it on up above the menu but we
can fix that a moment and what this does
is it keeps it fixed so even if we
maximize our page and zoom right yeah
you can see it fills the whole page so
we're gonna fix that now by well that's
really easy all we have to do is we need
to know the height of the menu at the
top and I know the menu is 44 pixels I
think so what we do is we I think it's
44 than a one pixel border so if we say
a position fixed we said top 45 pixels
something it'll push it down so maybe
it's not 45 we can check here okay so if
we go into the CSS files yeah it doesn't
matter which one it's 39 I so it's 40
with the if you include the border which
we need to do so just change take five
off this so say 40 pixels and now it
takes up the whole space we can still
use the menu items and I've we zoom like
we can see everything perfectly so
that's not done the next thing we're
doing is we're going to change the
channel name so then it's actually the
actual channel not just a placeholder
I'm sorry if I sound bad it's just I
have a cold I think so here's this
channel name so all we have to do here
is add a PHP block and then echo channel
name I never
obviously got the semicolon and then now
if we refresh I know that says our
channel new now we're gonna leave the
description for the okay I would
actually we'll get rid of this
description for the minute and we'll
just remove it instead we're going to
put a link not be a make our button soon
probably but what the link is gonna say
is just moving a link to know where the
links gonna say I subscribe to one just
say I subscribe to channel name so we
just copy this and we paste it in here
so I subscribe to channel name and then
close the link off so what we've seen
only is a button that says subscribe to
creative code and we obviously want to
put this in the center and we want sort
of a gap between between the image and
the subscribe button so we're just gonna
do this
and that we have a link not what we do
what I'm going to do is we're going to
create an action so when they click the
link it refreshes the page and
subscribes them so to do that we need to
go into the localhost table I need to
create a new table the new table is just
gonna be called subscriptions oh and I
have never imagined the reason we're
going to be doing subscriptions first
instead of a uploading the videos is
that because the uploading videos is a
lot more complicated I don't take a lot
longer to explain things so we're just
going to get a little bit it's like an
easy stuff done first so here we have a
the table with nothing in and except
three fields and what we're gonna do is
we're gonna say the first one is ID the
second one is the user name I'll just
say user who subscribed and then we're
going to say subscribed to I want to
change or keep that as an int and the
other two will be bar chars
of length I don't know 32 characters
maybe we're gonna go down here we're
going to say auto increment that's added
to the primary key and then we just
scroll down a bit more and click see if
yeah
okay so I don't know what happened there
with their the invalid form thing but
what I did is I just collect structure
to refresh the page and then I just
redid it so I'll show you the table the
subscriptions Table nine so as you can
see we have three rows inside the table
the first ones just ID it's an integer
with a length of Aladdin characters and
it's at auto increment of the primary
key and then we have user who subscribed
unsubscribe to which are both just
varchars of length 32 characters so
that's what I need to do in the tables
the next thing we need to do is we need
to well actually we can change the
subscribe link to a bottom of it which
is in a form so we can just delete this
oops
click that and create a form the form
action is gonna be equal to subscribe to
PHP the method is gonna be post will
actually know that we don't need to do
that we can just set the method equal to
tau dot PHP let's just have a look at
the URL okay so it's question mark C
equals and then we put in the channel
name so channel name so this will just
submit to the same page that we're on
and then we just create us an input type
of submit the name is just gonna be I
don't know anything doesn't matter so we
could say a sub and I'm subscribed the
value is going to be equal to subscribe
know couple just says subscribe for and
I was gonna say subscribe to channel new
but we can't even is just subscribe so
there we have a button that sense of
scribe and when it's clicked it
refreshes the page so up here what we're
going to do is we're going to we're just
gonna say if you set post subscribe then
we're just going to use print if we
wanna know we could use a couple doesn't
matter I'll just hit print print don't
know you we just I clicked the subscribe
button so now if we refresh the page
okay well that just to me note it this
way oops it's nothing like subscribe
you should I'll just change it tactical
but that's not the problem you just need
to check subscribe so we'll change this
to get some resource absque ribe so
we're I think at subscribe so now if we
try it okay there's some reason that's
not working we just find a bug so we'll
fix this a subscribe button first okay
so I find it it does work so we just
need to change it back to post and we
can see that it's actually working if we
type in our not type in if we usually
die function instead of Akko because
what this'll do is I'll just get rid of
everything on the page except what we
want which is in the whatever we put in
between these single quotes is all it's
printed out to us so I know we know our
form is submitting properly we can
get rid of this oh we can just say
subscribe query equals mysql query
whoops inserts into subscriptions the
values so any are I have 3 empty values
and that's because we have 3 rows in the
database table the first ones ID and
it's auto increment that it's set to the
primary key so we don't need to worry
about that
next one we can is a the user who
subscribed so for this we can just put
in the word user because that's the user
who's logged in the user who they
subscribe to is just Channel
medium so I just realized we should
actually get this on caught it come in
just paste it in here let's have a look
so if we click subscribe done and we go
to the subscriptions table if this
worked we will see a new row which we
see one rule in total and user who
subscribed as Francis because that's who
is logged in as which is me and then
usually they're subscribed to his
creative code so that's good that means
it's working a lot of sense that
subscribe we don't want them to be able
to subscribe again so what we need to do
is we need to say we need to just create
a query that's checks if they've already
subscribed so we can copy this and um
we can just piece it here and then just
say check subscribe
we just said can't underscore asked to
keep it shorter
we can just say select all from
subscriptions or user who subscribes
equals user and then if nom wrote RF if
kind underscore s equals or is that
greater than one
no a greater than zero oops then that
means they're already subscribed so we
want the subscribe query to instead of
insert we just say remove from
subscriptions or a user to subscribe
equals the user so now add the button
whilst also subscribe for the moment but
if we click it now if that worked
it should remove the user from the
database okay so it just inserted it
again hmm
so we've got a problem okay so this
queries not what's happening is this
query isn't working and then this query
is just running again because I just
told you it's told to run this query
inside of this if statement which runs
whenever the button is pressed so what
we need to do is we just need to change
button so if count is greater than zero
we're just gonna say echo oh look at
Seth I don't we just a Co already
subscribe so now if we just refresh it
should say already subscribed so that
means that's working it's a star our
query term if it wasn't working okay so
we can undo this and just can't stop
back in and the only thing we need to
change is we instead of saying remove
it's actually deadly so I just got that
wrong so now if we click subscribe we
refresh the page since now we have two
rows in it we should only have one oh we
should actually have none actually yeah
we have no rows mine but now if we click
Subscribe again we have should okay we
stood up zero so we might just have to
refresh so now if we try it okay so now
it's not adding it in let me see
so we'll just copy this and just take
that out and then peace this down here
so what this is saying is if the button
is pressed so we check if they've
already subscribed and if they have we
delete them and then we say our else and
then we want to add them so this should
fix that okay alone 50 which is okay
yeah we just need add another semicolon
let's have you gone to another color
bracket so now if we click Subscribe
when we click on browse it says were
subscribed because we're inserting into
the database on now if we were just
refreshed to make sure it fixes itself
and works if we click Subscribe again it
should delete us from the database so
now we have no rooms in
so what we also want to say is create a
variable called sub oops sub button
equals subscribe whoops
it's actually armed subscribe and then
otherwise we want sub button to equal
sub display and what this will do is I
just changed whatever the user sees in
the button so here we can just open a
PHP block whoops a PHP block and just
echo that variable so now it should just
say subscribe still um sub button is on
the undefined that's because we're only
declaring it inside of this if statement
so what we're actually going to do is
just declare it outside so I up here
just create final sub button
oops sub button equals subscribe now if
we click on it it will still say
subscribe okay so we can just copy this
so you can just copy this code again and
yes it here
let me just say else sub button equals
subscribe and then now I it says
unsubscribe we click on it again it says
subscribe
okay let me see that
why is that not working nine so after
subscrible smile I just get rid of this
on this okay so it's like to fix that
problem when you're quick we're just
gonna add a new row in we're just gonna
say calm subd
or charm of length three default as
defined oops default is no and we hit
enter and that should just give us
another row
sorry and then no verses here when we're
adding the user instead of removing them
from the table seems to me what's
causing the problem we're just gonna
update it saying I update subscriptions
set unsub equal to yes where the user
underscore who underscore subbed equals
user so that she just fix any problems
okay so I think it was up here that was
causing the problem anyway so it was
that let me just check so we could just
undo all this because I could might not
have been what was causing the problem I
could have been up here this so if we
get rid of that that was probably what
it was it's nothing like subscribe
so hasn't fixed itself doesn't look like
it anyway so we'll fix it anyway so let
me see instead of deleting it from the
table we'll just update it to sat on sub
equal to yes okay wait
maybe that wasn't it it was because we
didn't add another row here from so
inside it's equal to no which means the
query was failing which meant our users
weren't getting inserted which could
also have been one of the reasons it
stopped working okay so here it is we
have one total user inserted into the
subscribe our subscriptions table for
you to refresh and we click on sub it
works so yeah it's all working it's
that's because no for the remove
statement up there it was just removing
it as soon as it was added to the
database up here because this was just
as soon as the page loaded and what this
means basically is if they've already
subscribed so when someone clicks the
button it refreshes the page so as soon
as it refreshed the page this if
statement was true so it Brown this code
and around the code to remove it so we
didn't see any difference
so what we're also going to do is we're
going to say header location channeled
off HP c equals channel name copy it and
paste it here so now if we click on
subscribe and subscribe it doesn't it
just does it without us having to
refresh the page so that's it for this
video I know we still have this bug to
fix but we'll fix that next time and I
will see you next time thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>