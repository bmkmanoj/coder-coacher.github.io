<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 25 - Deleting Posts | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 25 - Deleting Posts - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 25 - Deleting Posts</b></h2><h5 class="post__date">2017-02-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/M0lYRs8JrRE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today we're going to be learning how
to display a delete button next to a
poster you no longer want online I got
the idea for this because you can see
some of the images here have been
deleted and analog run imager so we want
the ability to delete posts so let's get
started
so what we're selecting the posts we
want to know if the post we're selecting
was posted by the current user so we're
going to get a user ID variable and
compare that with logged in user ID so
what we can do is close off this
variable like that and then in between
here all do is create an if statement
at Ft use radials the logged in user ad
we're going to display a button time
allow you move this form filled out and
put it down here and in here we want to
put our button
and we just want to copy this and paste
it down here for our else statement so
if we run this now you can see now we
have these ax buttons and if I go to
another profile we don't have the ax
buttons because I'm not logged in
that's how code I'm logged in as Frances
so now what we're going to do is we're
going to get the delete post we're going
to go to profiles our PHP and we're
going to look for when the delete post
button has been posted so we'll create
another edge statement here if it's that
post delete post so the first thing
we'll do is check if the post actually
exists
you
so what this query should do is check
after as opposed to the database with
the correct ID and it was posted by the
user who's logged in and we got the post
ID from the gap variable and the address
bar I'm gonna get the user ID from
follower ID and if I scroll up you can
see follower ID is the ID of the user
who's logged in so what we're doing is
we're checking if that query returns
successfully and if it does then we can
delete the post so then we'll say DB
query delayed from posts we're ID equals
post ID and posted by equals user ID and
then here we'll just put in the array so
we'll pass the post ID which we got from
the address bar and then we'll pass the
user ID which we get from follower ID we
also when we delete a post we need to
delete any likes associated with our
post we actually change that from posted
by to user ID so our query doesn't fail
we also want to go to post likes and
delete any likes where the PO side a is
equal to the idea of the post we just
elated so then what we want to do below
this query is say bigquery
Oh site a and if we just double check
its post underscore ID equals post ID
and that will just pass that array
just like that we could also print out a
go oops deleted so we're going to delete
a post and you can see we get this error
the post gets deleted from the post
stable but we got this integrity
constraint error so the fact that what
we're going to do is we're going to go
to our SQL table and we're going to go
to post spikes and we're going to remove
the constraint on the post table the
constraint wasn't doing a whole lot for
us and it's causing this error which is
annoying effects so we're just going to
delete the constraint if I click on one
of these for example this one it says
post elated and if I like a specific
post like this one for example it says
it has one like now I go to the post
psych stable and you can see we have two
rows what I'm going to do now is delete
this post I'm going to refresh and for
some reason that row wasn't deleted it
isn't getting deleted because any URL
we're looking for PO se D equals 13 and
click around here we can see post a day
is here so one of the f is that post ad
and is not set post too late post that
should stop that hour so let's refresh
this now I'm going to like this post I'm
going to refresh you can see there's the
poster that I just like there's the 12
star I'm going to click X and supposed
to later i refresh and the 12 is gone I
like this post for example and I delete
it it's gone and it's gone from the
table these are just two extra posts
that didn't get deleted because of the
bug earlier on so we can delete that
manually if we want but now we can
delete posts and if I go to someone
else's profile page for example my code
and I look at this now you can see I
have no option to delete anything so
that's it for this video don't forget to
Like comment favorite and subscribe
don't forget to follow us on Facebook
Twitter and rat it and I'll see you next
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>