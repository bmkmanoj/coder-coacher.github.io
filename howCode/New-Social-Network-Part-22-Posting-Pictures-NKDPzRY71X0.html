<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 22 - Posting Pictures | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 22 - Posting Pictures - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 22 - Posting Pictures</b></h2><h5 class="post__date">2017-02-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NKDPzRY71X0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in the last part we left off being
able to upload profile pictures so in
this part I let people send posts with
images in them now and we're just going
to delete that debugging stuff from the
last one
so here when we post something we're
going to have the option to post a
picture so we have our upload image from
the profile page and it looks very
generic so we could actually copy and
paste that into its own class and we
could reuse it because we need to reuse
it for our profile page anyway so if we
create a new class I'll call it image
dot PHP and we'll copy and paste all of
this even the query would cut that and
we'll replace it with image upload will
call it image upload image actually so
here we have image upload image so in
here what we'll do is we go to image and
we create a class this class can have
one method so far called public static
function upload image I will just paste
in our code so our query we obviously
want to be different depending on what
we're updating so we're going to copy
that and we're just gonna say query per
arms and then up here we're going to
pass the query and the parameters to the
function so back on my account we're
just going to pass in this query and the
parameters and then what we're gonna do
is we're gonna go to our profile page
and we're gonna create a simple form to
upload image posts so if we go to our my
card pays you can copy that form we go
to our profile page and we can just
paste it down here so we're gonna do is
say upload an image get rid of that post
button and paste it in here and we'll
change the form action to profile and
here we'll cut that text area too so
we're going to completely replace the
old form with this new one and we'll
delete the old form so what we'll do is
we'll refresh and we'll actually put in
like a break tag and there it says
add an image to our post so we're going
to do is check if somebody's tried to
actually upload an image and if we go up
here to when we create a post we can say
if files and the file we want to look
for is not profile image we want to call
it something like post image
so if files post image size equals zero
that means that the user hasn't tried to
upload a file and we just want to run
everything normally otherwise will echo
image so we'll try and run this and see
what happens
so you just spin at any random post so
we click post it works fine if I put in
an image now it says image so here in
the ass part is where we want to run the
image upload so here we'll say a post
create image post and we'll pass it the
is logs in the is ready just like before
and what we'll do is we'll go to post
and we'll create this new function and
it's really similar to create posts to a
copy and paste that and paste it below
will say create image post since we're
uploading an image we might not always
have a caption so we could remove that
sack and check so it could be 0 we don't
wanna force the user to have a caption
if they don't want one and then we
insert the post and then what we want to
do is get the ID of the last post the
user inserted so we'll do another query
so what we'll do is we run a query we'll
say select ID from posts we'll click run
and there's all the IDS from posts and
we're logged in as Frances so we'll say
we're user underscore ID equals one and
there we have all of the posts by
Frances and then what we want to do is
we want to limit it to one we'll run
that and we get one return but that's
the wrong one we want to get the most
recent post not the least recent post or
say order by ID d sanding and therefore
we get the most recent post so we'll
copy and paste op there's our query
and here we want to change use
ready-to-use ready and then we'll create
an array and store the user ad in that
just like we'd expect we actually
changed it to logged in user ad and then
what we get returned we go to the 0th
index and we get the ID column from that
and that is going to be the post ID we
actually want to just kick that out and
change that to else
and take this out as well snow me for
the post city and we could return post
ad if we wanted and then on the profile
page after we run create image post we
could store the post ad again and a
variable and then down here what we
could do is we could say image upload
image and here we pass our query which
is going to be update set post image
equal to post image or ID equals post ID
and then here we'll create another array
we'll send the post image and then we'll
send the post ID so we don't have our
post image yet and back here in our
upload image function we need to change
profile image to the name of the form or
uploading from so we want to make that
dynamic so we'll just change that to
form name and change it to form name
down here I'm will pass in the form name
to the query back to our my current page
and we want to just update upload image
with the form name which in this case is
profile image and we want to go back to
profile page and we want to change this
to say post image because we don't
actually have the post image yet we want
to do is take this a red ammo because
we'll have one item and then inside of
the function itself with a panda on
another item before the query runs so
what we need to do is once again go back
to my code and we have what profile
image equals profile image once again
and what we want to do is take that out
because it won't work anymore and then
we want to go to the image class and
then here what we want to do before we
run the query is we have params and we
want to set params is equal to an array
and we're gonna piss this array item in
here and here we have profile image when
I change that to form name params is
equal to the form name because we're
gonna prep and on the URL we get from
the actual query which changes to pre
params and then we'll say params equals
three params plus params so we're adding
it to your eyes together so this first
item will be first and the reason has to
be first is because if we go to the
profile page for example you can see
that we have this variable here that
needs to be substituted and this
variable here that needs to be
substituted and we have to put them in
the right order so this one ask him
first and we don't actually know what
the post ID is at the minutes we're
gonna prep and it on inside the function
so hopefully that makes sense and we're
gonna try and see is this work now so if
we run this we have a syntax error you
just need to put on another parenthesis
okay so the reason we had
arrows because you can see we have the
ass way over here so what we'll do is we
will just remove this one and
we have the same problem Mears will just
remove that one too so we'll try to run
that now
so we've no errors so we'll try and put
in a round and post will click post it
worked fine we're gonna add an image
we're not going to give it any text at
the minute we're gonna click post and
image hasn't been fine with another I'm
gonna include image we just say I also
need to put in a semicolon on this page
a semicolon on here I'm down here we
want to change this to upload image so
we've got no errors not time and we're
gonna check our database we're gonna
refresh and you can see there is the
image I just uploaded but we're not
actually displaying it so we're going to
quickly go to the profile page when we
display posts which is over here we're
going to display an image if they have
one so what we'll do before the post
body is will just simply print up a post
image refresh and I can see the image
has been printed out but we want to
actually show the image so what we'll do
is we'll say image source
equals that we'll just copy and paste
this deceive us typing out again and the
reason we got that is because we're
using HTML special chars to make sure
the images copied what we'll do is we'll
copy and paste this pre-painted on
before his smell special chars
has a chance to run I'm gonna run it now
and I the image has displayed so we are
gonna end up with broken images down
here but we're gonna fix that and then
later part of the series whatever we're
working on the design and we're actually
worried about that sort of stuff so
that's it for this video don't forget to
Like comment favorite and subscribe
don't forget to follow us on Facebook
Twitter and reddit and I'll see you next
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>