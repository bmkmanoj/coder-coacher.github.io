<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 42 - Deleting Photos &amp; Albums | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 42 - Deleting Photos &amp; Albums - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 42 - Deleting Photos &amp; Albums</b></h2><h5 class="post__date">2012-12-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Tz0diJIIM58" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi and welcome so today we're going
to be doing is we're going to be
allowing users to delete photos and
albums from the records so we had to do
this first we're going to go to the find
friends website as you can see you can
see our photos in our photo album so
what we're going to do is we're going to
go to the local host PHP myadmin
and we're going to go down to structure
now we're just going to add one column
at the end of the table now the one
column is going to be called removed
removed just say okay we'll just say
removed we'll set it to a varchar' and
it will be three long three characters
long and then just hit save then we need
to go into the albums a table and then
go to structure again and then add a
column at the end of the table and can
call it removed set it a varchar' of
length three characters and set the
default two as defined yes man just hit
go our SEO so we'll just set
yes without the single quotes around it
and there we go it's not for go to
browse it says actually that should be a
no that should be no I'm going to change
the default value no no so I found the
button let's say over here save and then
we need to go back to structure and
check that box and then hit change and
then change the define RI the default to
no so that's it updated and fixed and
then in the photos table we need to do
the same so that the default is removed
our set the add/remove default to no so
that means by default the removed
valuably no so then we're requiring it
we can just have and when we're showing
the EF photos and the photo albums we
can just say we're removed equals no so
none of them not and it's really simple
always loose say to the photos select
from all from photos or you ID equals
picture and removed equals no so now if
we refresh we shouldn't see any
difference
okay so when we updated the default
value in the air photos table it didn't
sound at the no because we've already
told it not to so I'm just going to put
a night at it inline edit on all of
these type in no no
and then no again scroll over it see if
see you then
see you so now they also know and then
should say they are while shopping
in then we go to add view albums and
then we say and removed equals no so now
we should put a similar we shouldn't see
anything disappear we shouldn't see any
difference which is exactly what we see
I love you photos I'm actually going to
the link so we're just going to go up
here and them I'll link so we're just
going to say we're going to set the
hereafter nothing then we're just going
to say um click our X you will do that a
minute and then we're just gonna call
the link go now we're just going to say
Larr
I have an aunt so two left arrow so now
I owe yak 1 it says go back so what
we're going to say is just JavaScript is
story - 1 let's try that
okay so let's try them let's get that
nice try history dot go minus one and we
actually need the JavaScript to the
start so let's try them higher so let's
try that now and it hasn't worked you
know I can't be bothered with that let's
spend our time on more important things
so let's just go do that okay so it's
gone so the real important thing we're
going to do is want to allow people to
remove their photos so here I'm just
going to go under here and I'll just
type in center Center now I'll just add
form method is going to be post methods
post that add the form action it's going
to be a view photo slash user name nope
yeah user the variable user because I'm
not sure we the same as you know
actually three photos
aiyoo ID which is the album gid now
we're just going to add a submit button
oops but type equals submit and it goes
move whoops photo underscore UI J so
that one remove one photo won't remove
them all and then the value can just be
move photo once so let's refresh now so
as you can see we have buttons under
each one that says remove photo so now
in the PHP file we just need to do at
simply say if is set post remove photo
underscore UID then echo photo remove so
now let's just refresh hit remove photo
okay we can just go down here and just
change that to form action UID so that
should work so if we hit remove photo
says photo removed for removed all right
so the reason that is is because UID is
actually the this value appear and since
that is the same for all three of these
it's doing it three times so we need to
make it unique so that
it's unique to everyone are not everyone
carry photo so we just need to pick
something that will keep it unique so if
we cheat if we chose something like
image URL because I'm different for
every image so now if we refresh we hit
remove photo so we can check why that's
not working in the page source so if we
just scroll down and here we can see it
and here's the problem
now you can't have this clearly so we
need to try something else something
that's just going to be unique to each
photo so a good idea of am something we
can do is I could say create a variable
called md5 image equals md5 and then
just image URL so if we just copy that
and then paste it in here let's go down
and just paste it in here now we won't
have a URL each time so it should work
so we hit remove photo it works and
obviously each one works so that's good
the next thing we're going to do now and
we're just going to say my I actually
remove photo close my SQL query
update photos set removed equal to yes
where you ID equals the ID and and let's
say image URL to equals md5 no that's
not going to work
actually we need up to and an image URL
equals let's just say that won't work
so I'll just thought of an idea to make
this more simple so we can just say or
image ID equals image ID so now we can
just go up here I want to make a number
that's unique to every image there are
not necessarily a number but something
random so image ID and then we need to
go to the upload photo page and then
oops so we just need to add a new row
and then call it image ID and then
obviously we need to create the variable
for image ID so the image ID could just
be the random directory name /the random
okay let's just do this so image ID
equals md5 alright let's just say md5
image ID for md5 and then here we just
damage ID for md5 equals so now if we um
we actually put those around double
quotes to margin matter so let's just
try that so refresh so that won't work
on any of these because there is no
image ID so now if we go back to upload
photos HP so it is syntax error so if we
get it to treat that at this string
maybe that will fix it yep so I know
let's just put anything in an upload
image so it looks like it worked so if
we go to albums collage cinema now we
had
click on that let's have a look
okay so the reason it did
is because we added another row by
accident so let's just try it again
that's why it's not showing up as well
so we need to put it in between there
and your send no do ya fill the removed
column oh and we also need to go to the
structure and then insert one column
after removed and then call it the image
ID our char of like 32 hit enter so now
let's a go back to the upload for upload
photo dot PHP file and upload anything
well then hit upload so now if we go to
albums / cinema art is there here's our
photo we hit remove photo let's just try
to see that yeah it does actually remove
it but as you can see we just find a
problem more is it doesn't take up or it
takes up too much space across there so
I'm going to fix up my lack see on
second thought I can't be bothered to
fix how the devs are displayed so we'll
do that in the other video or next video
but in the meantime the more important
thing we're going to do is we're going
to be allowing people to remove on
albums so let's do that now so we go to
view albums we can actually just copy
this and we it's a bit easier because
with the albums
with the albums we've already got the
unique ID like I already created so it's
a wee bit easier so just put it in here
so then nerves are not change that the
user change that to out oops
album and we just need to change this
and not album that's all we need to do
there
so what we're essentially doing is we're
going to say just change that to album
two tomorrow now what we're going to say
is when the button is clicked we run
this query and the squeeze just says
update the albums table by up to the
albums table by setting the air column
removed to yes
regardless of whatever it was and then
we're going to say we're UID equals the
UID of the album so only one of them
will that be updated so let's try that
if we hit remove album and then okay so
it didn't actually do it
let's find out why
let's actually chow
form action that's the problem
here it is now moist new chains out to
remove album underscore ID or UID hit
enter unjust nitride removing the album
now it's gone so let's go to the album's
let's actually bring this album back
let's try this so we brought the album
back you can see all the photos again
but what I want to do is just say add
our location user should work so let's
just refresh again hit remove album
under refreshes and kicks us back so
let's just try view album slash few
photos live test they still show up
which is a problem so let's fix that
line really quick so interview photo
we're just going to paste that in as
well and change it to ID so what we want
to do is in here so for this to do that
we actually needed creating your query
um I'm gonna do that next time as well
yeah because we're going to go to time
now so in the next video what we'll be
doing is allowing people to create
albums we'll be fixing the problem with
the divs and then we will be not
displaying photos from an album that's
been deleted so I hope you enjoyed this
video don't forget to comment rate and
subscribe or come
like and subscribers they keep making
that mistake and I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>