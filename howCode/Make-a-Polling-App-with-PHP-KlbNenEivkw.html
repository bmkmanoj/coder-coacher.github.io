<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make a Polling App with PHP | Coder Coacher - Coaching Coders</title><meta content="Make a Polling App with PHP - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make a Polling App with PHP</b></h2><h5 class="post__date">2017-11-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KlbNenEivkw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
learning how to create a really simple
polling application you can see the way
it works what we do is we ask the user a
question they can choose from a list of
answers and what makes this polling
application really nice is that we use
jQuery so whatever so he clicks on the
response we send their response to the
server we record their vote and we
display them the answers so if I was to
click on Greenland for what's the
biggest island in the world
click on that you can see it's at my
response off it disabled the buttons so
I can't click on them again so I can't
vote twice and then what it did was it
showed me the results so most people
have clicked on Greenland so to make
this as easy as possible we're gonna be
using directors directors is going to
make it really easy to create our tables
and it's gonna be really easy for us to
add questions and answers to our polling
application whenever we want because you
can see here in the address bar we're
passing an ID parameter so votes to pass
the ID equals two we would get a
completely different question and a
completely different set of answers so
we're gonna be using directors as PHP
SDK it's so much easier than using MySQL
and PDO directly interact just gives us
an admin area which makes it really easy
to create questions and answers so
interact as you can see I have two new
tables I have poll answers and polls so
if I click on polls you can see we have
one question what's the biggest island
in the world and you can see I have the
question and I have the answers and then
in the poll answers table we store the
answers themselves so what you need to
do is create a table called polls and a
table called poll answers so we'll
create the answer table first because
it's the easiest and when you create the
table for both tables you want to just
disable the status column so poll
answers is the easiest table to create
so that table just has an answer column
that's text it has a numeric column
called votes and it has another numeric
column called poll and that's what we
like the answers table to the polls
table so just create those three columns
and then you create your polls table so
impose what you want to do is you want
to create two columns so the first
column is just the question and we want
to ask and the second column I've called
arms which is short for answer and you
can see it has a one-to-many
relationship with pool answers so to set
that up it's really easy all you do is
you click create new column you would
give your column a name such as answers
and then you would scroll down and click
on one too many
scroll down again and you want to link
the polls table to the poll answers
table and you wanna link the ID column
in the polls table to the poll column in
the poll answers table click Save and
you're good to go
so after we've created
tables what you want to do is probably
just put in as some example data so I
have one question here and I have three
answers and then we're ready to actually
create our application so here's our
application it's going to bootstrap
studio template I'm going to include
this in the description of the video but
you won't actually need it because I've
exported it so I'll include the HTML the
CSS the JavaScript
I'm the template so the first thing we
have to do is include the directors SDK
so we can down to the director's SDK
from here there's another video that
shows how to use the directors SDK so
you can see the card at the top of the
video and you can click on that to learn
more about the SDK but essentially just
copy this into your composer JSON file
then your own composer installed and you
include this line at the top of your PHP
script so in our next page you can see
I've included the SDK and then I've
created an instance of it and that's the
variable we use to communicate with
directors so we pass in our API key we
pass in the URL of our directors
instance and we pass in the version of
the API we want to use so to get an API
key what I did was I went to user
directory and I created a special user
called API and we scroll down and you
can see here we can generate an API
token so if I click generate new it's
gonna generate me a new token and that's
the token that I pierced in here we
could also generate an API key by
sending a post request off to direct us
as well next what we want to do back on
the home page of directors is go to
admin settings go to group permissions
and we want to create a new group so you
want to call your group API that's what
I've called it here and you can see one
user is in that group and the user in
the group is our API user that we
created we just click add user next what
we want to do is make sure the user has
the correct permissions so the API user
for this application has to be able to
view the poll answers and the polls
table so we take those boxes to enable
that and we have to be able to add at
the poll answers table because that's
how we increase the number of votes to
make things even more secure I
blacklisted a couple of columns so we
can only write to the votes column which
is how we increase the number of votes
we can't change the answer we can't
change the Associated question just want
you added those that'll be instantly
saved and we'll be good to go so back in
our PHP script what we do is we have
this idea very well if that tells us
which question we're viewing so in this
case it's the question with the ID one
that's what is the world's biggest
island next we have a variable which is
the sum of the votes which we'll come
back to in a minute and here is where we
use directors as SDK to
got the question so we retrieved the
question store it in a variable called
question and we get the question using
the GAT item method so that method just
takes the table the questions stored in
and the ID of the question and when we
run that it'll return lots of data about
the question but we're only interested
in the question itself so we use this
arrow operator to retrieve the question
out of the data and then what we do is
we download the answers so we use
directions as get items method we go to
the poll answers table and we pass on a
rare this time with the ID of the poll
so this just means we go to the answers
table and we get all of the items where
the poll column equals in this case 1
and then what we do is we just sum up
the votes so we have our summer votes
variable and because there's multiple
answers we loop through them every time
we have an answer we increase our summer
votes by the number of votes that outs
are hard so what that means is we add 3
plus 7 plus 1 which gives us 11 and
that's how we know how big the Ireland
Bar should be compared to the Greenland
bar compared to the Africa bar when
we're showing the user how many people
voted for each option so next we just
aykroyd the question that's this up here
once again we loop through the answers
and we print them out so that's why we
have three answers here we just have a
list group here and we have a couple of
special attributes we have the answer ID
stored and we have the answer votes
stored that just makes things easier
we're dealing with JavaScript and then
finally we have the actual answer itself
which is what we can see here so down
here we just have a click function that
runs whenever we click on one of these
items so whenever I click on Ireland or
I click on Greenland it's gonna run this
code and what it does is it sends a post
request and even though we're using
directions is PHP SDK you could directly
use direct is's api over HTTP because
directors as API is restful that means
here if I wanted to view data I would
send a get request so if you wanted to
add a new resource you could send a pot
request if you wanted to add a tit you
could send a post request and if you
wanted to delete one you could send a
delete request so what we do is we send
a post request off to this special page
and what it does then is it just sets
all the buttons to disabled so they
can't click on it multiple times to vote
more than once we display the blue bar
behind the answers and finally what we
do is we set the size of the bars that's
what we do is we take the total number
of votes an answer has got and we divide
that by the sum of all the votes and
multiply it by 100 to convert it to a
percentage so when we send our post
request off what we do is we send the
answer ID so we know which answer
received a vote and then what we do is
we go to this Ajax post vote page we
once again include the directors SDK and
we retrieve the answer ad out of the
post request we get the number of votes
the answer received out of directors so
to do that we run get item we pass Paul
answers as the table and answer ad is
the key so that we do is we just
aggravate the number of votes just so we
know the request is done and then what
we do is we update the answer which in
this case will be Ireland with the
number of votes it had previously plus
one and we do out list with the
directors SDK so if I was to get rid of
all the comments I could easily make
this whole polling application on 10 or
20 lines of code thanks to directors and
that's really all there is to it the
rest of it is just CSS styling and
things like that so that's pretty much
it for this video all the code will be
uploaded to github and there'll be a
link in the description if you need any
help getting used to direct uses SDK
check out the other directors videos and
you'll be up and running in no time so
that's it for this video don't forget to
like comment favorite and subscribe
don't forget to follow us on Facebook
Twitter and reddit but that's it for
this video
I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>