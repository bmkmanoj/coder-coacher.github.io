<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Simple RESTful API with Django | Coder Coacher - Coaching Coders</title><meta content="Simple RESTful API with Django - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Simple RESTful API with Django</b></h2><h5 class="post__date">2018-03-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BSHRftLtPEg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today we're going to be learning how
to create a really simple restful api
using Python and the Django web
framework so APA is going to return JSON
all it's going to do is it's going to
return a car and it's top speed if we
give our API the cars name if I send a
get request to Tesla Model S you can see
our API returned the car is the Tesla
Model S and it's top speed is 155 miles
per hour and now if I try to ask for a
car that we don't know about so if we
just put another ladder in there hit
Andrew you can see it says no car
without neom and you can see here in par
I can send a post request to our API
with the parameters corneum and top
speed and I run that it says the car was
added successfully so we're gonna be
learning how to easily create this in
Python so the first thing we obviously
need is Python so download Python from
Python org and install it on your
computer and then download the Django
web framework you can either download it
here or we're gonna use pythons built-in
package installer called pip so the
first thing I have is a folder to hold
all of our code and I have a folder
called env and a folder called my API so
my API is the Django project and env is
the virtual environment I created to
hold all of our dependencies so to
create a virtual environment on Mac is
really easy so on Mac all you have to do
is type on python 3 - m v env to say
that you want to create a virtual
environment and then you give it a name
and i run that and it creates our
virtual environment and then if i want
to go into the virtual environment i
just says source equals E and V /bin
slash activate on windows the process is
a bit different so I will put a link in
the video description to show you how to
set up a virtual environment on windows
so now we're in our environment I want
to Dino Django and the way I do that is
just say pip install Django and I
already have Django installed so it's
not going to install it but for you
that's gonna install Django so when you
install Django you get a new command on
your computer Django admin and we want
to say a Django admin start project and
we'll give it a name pi API run that as
you can see Django has created a new
folder for us managed our PI is a
program that Django runs so every time I
want to do some work with Django I run
Python managed a PI and then whatever
the command is that I want to run so I
could say run
server and if I was to go to localhost
you can see it says Django was installed
so your Django project will contain lots
of apps so to create an app we want to
say it Django admin start app and we
want to give our app Annie and we'll
call it my app so here is my whole
Django project and the four files that
we care about are these four up here
settings URLs views and models so inside
settings you want to scroll down to
installed apps and you want to add the
app you just created called my app and
then we want to do is we want to create
a model because the model is how we
interact with our database so you'll
find the models in the my app folder so
you'll find your models here if I drag
that in you can see it's 2cm file and
you want to create a model called car
which is just a Python class that
inherits from Django's model class so a
car has a name and a has a top speed a
name is a char field which in my SQL
will be converted to a varchar' with a
maximum length of a 100 and top speed is
an integer field which will just be
converted to an INT in mysql so now
we've added our app and we've created a
model we want to convert that model into
an SQL table so the way we convert this
class into a MySQL table as we run
Python managed app I make migrations you
can see it's as no change is detected
because I've already run it you might
also get this the first time you run it
so in that case what you want to do is
make migrations and you want to tile at
the app where the model came from in
this case we're gonna say at my app so
after you've run that you have to create
the table so you want to say a Python
managed up I migrant and when you run
that it's going to actually execute the
script that creates your MySQL tables so
after we've created our model we want to
create some URLs so in Django you go to
the URLs file and that file is located
outside of your app it's inside of the
my API folder which is part of your
project so you can see I have three URLs
I have an index one I have a slash car
URL and I have a URL that just takes any
string and maps it to a variable called
car underscore name so next we want to
go to the views file this is the final
file we're gonna look at this is the one
that does all of the logic for our API
so here is our views dot PI file every
time we go to URL it will run one of
these functions so for index it runs the
index function which doesn't do anything
all it does is returned in this JSON
anytime we want to retrieve details
about a car we type in its name just
like this and that runs the GATT car
method and if we want to add in your car
we run the odd car method so you can see
we have a request parameter that tells
us details about the request that was
sent which can be really useful so the
first thing we do is we check that a
GATT request was sent so if the user
sent a get request it means they want to
retrieve details about a car and to get
details about a car we use Django's
MySQL interface so we're not using an
SQL database we're using an SQL like
database which is exactly the same it
just means that it's stored in a file as
opposed to a database running on a MySQL
server so in Django the way you retrieve
an object from the database is you give
it a variable and what you do is you use
the class name objects GATT and then you
give it the name that you want to use to
query the database so this is really
similar to a select statement you would
say select all from car wear name equals
coronium
so the equivalent MySQL statement will
be something like that so we use a
Python try and accept block because we
try to get a car out of the database and
if we can't find a car with that name we
run the accept part of the statement so
if the car is fine we return the cars
name and the cars top speed but
otherwise we tell the user that no car
was fine without name and we send an
HTTP response so that's all it is to
retrieving a car from the database
because we don't have to worry about
connecting to our database we don't have
to worry about SQL injection or anything
like that all it is is one line to
retrieve data from our database to outer
car is really similar and when we send a
post request we send our data in the
body of the request so we created a
variable called payload and we convert
the JSON in it to a Python object so a
Python dictionary in this case so that
allows us to access coronium and top
speed by going to the payload and just
entering in its name in the square
brackets and if we go to power you can
see here is the JSON that we're sending
and here is the text version of it so
then what we do is we create a new car
so all we do is we create a car object
we give it the car name and a top speed
and then in Django to insert it into the
database all we have to do is type car
dot see it to save our object to the
database and we used to try and accept
one more time because if we can
successfully save it we tell the user it
was successful otherwise we tell the
user we could
their car to the database and then
finally we return an HTTP response and
that's all there is to creating a really
simple API in Django as always the
source code to all of this will be on
the HUD code github page but that's it
for this video don't forget to Like
comment favorite and subscribe and I'll
see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>