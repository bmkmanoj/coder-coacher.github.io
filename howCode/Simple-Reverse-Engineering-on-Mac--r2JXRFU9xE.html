<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Simple Reverse Engineering on Mac | Coder Coacher - Coaching Coders</title><meta content="Simple Reverse Engineering on Mac - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Simple Reverse Engineering on Mac</b></h2><h5 class="post__date">2016-12-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-r2JXRFU9xE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
learning some simple reverse engineering
techniques to reverse engineer a really
simple Mac application to learn how it
works to see its internals and hopefully
modifier to do something it wasn't built
to do this video is a follow-on to the
Windows version the app we're gonna be
looking at is exactly the same as the
windows up except it was written in
Swift using the Mac libraries as opposed
to the Windows version which was written
in c-sharp using the.net framework
because it was running on a Windows
computer so the app we're gonna be
looking at in this video is going to be
identical to the app we looked at in the
Windows version of this series because
that makes comparing the two techniques
a lot easier so you can see the app
needs to be compiled that's why it's red
so what we want to do is make sure it's
on the release scheme first you can see
build configuration is set for release
we uncheck the box it says debug
executable we close that and we're gonna
click command B so that's just compiling
our app you can see now our app is here
we want to right-click on that we want
to show in finder we can see our app so
on Windows you double-click your Exe and
that opens up the program on a Mac you
double-click your app and that opens up
the program but don't exe and drops are
actually quite different the dot exe is
the actual executable itself but on a
Mac you have to right-click go to show
package contents on your dot app file
you want to go to contents and go to Mac
OS and this is the binary on the Mac so
what we want to do is double click on
the app or we can actually run it so
here is the app it's exactly the same as
the Windows version if I click on unlock
you can see it says invalid code the
unlock code you supplied is not valid
that's exactly the same as the Windows
version if I type in anything into the
box it gives us the same error but if I
type in one of the valid codes for
example and click unlock you can see it
says unlock and the tax box on the
bottom disappear so just like in the
Windows version going to be modifying
this so that this if statement is
changed from a comparison to are not
equals so you can see here if we go to
the storyboard this is our interface for
app it's very simple it's the exact same
as the Windows version if I go to view
controller dot Swift that is our code
that's where our code stored it's like
the form 1 dot C ass file in the Windows
version so the first thing we do is just
create the button the text box and the
label then we create an array that
stores the valid unlock codes just like
we did in the other video
here what we do is we loop through all
the codes we check if the value of the
tax box is equal to one of the codes if
it is we say that the code is valid and
we unlock the program and we exit out of
the function and then if it's not valid
we just tell the user that with a
message box down here when the button is
clicked we run the unlock app method
just like we did in the Windows version
and then we run this method here so
let's have a look inside our executable
so here's our executable here and what
we're gonna do is we're gonna use the
special command on Mac called strings
and that's gonna let us view all of the
strings inside the executable to have
access to the strings command you need
to install Xcode and then you need to
install the Xcode developer tools I'm
not going to show you how to do that
because that's really easy to do you
don't know what Xcode from the Mac App
Store and you can download the Xcode
developer tools by going to Xcode and
going to Preferences going to components
and then it'll be one of the components
if you haven't already downloaded it but
once you have Xcode developer tools
installed you want to have your
executable in a folder you want to go to
terminal and you want to CD into that
folder so here I am in this directory if
I LS you can see we have one file it's
called my app that's this file here so
what I'm gonna do is type strings my app
hit enter and you can see it prints a
list of every string in the executable
so much like before we can see the
unlock button string we can see the
unlock box string the unlock label we
unlock codes we scroll up and we can see
the methods in the application as well
and if we keep scrolling up that once
again we can say our unlock codes so we
wouldn't even need to reverse engineer
this app once again all we'd have to do
is enter one of these codes and it would
work so what we want to do now is we
want to have a look at all of the
methods in the executable so to do that
we want to use another command we get
when we download Xcode developer tools
and we want to use the command called Oh
two we want to pass it a special option
called T V V and then we want to pass it
the name of our app so it's gonna be my
app so I'm gonna hit enter and as you
can see it printed out what appears to
be a load of rubbish but what it
actually is is every method in the
program and what we want to do is one I
sort of shorten this so what we're gonna
do is we're gonna run that again and
then we're gonna do is use the vertical
bar and that allows us to run another
command and we're gonna say grap which
lets us reduce our ipod and we're gonna
look for the word unlock just because
we're looking for something that will
help us get through the
lock code so we're gonna try our luck
and assume that there's an award unlock
in it so if I hit enter now you can see
the IP we got was a lot shorter because
I made the app myself I know that
there's a Matthew called unlock app so
what I'm gonna do is just run this again
and change this to unlock app and now
you can see that the iPod card even
shorter and now it's only two lines long
you can see that there's a math in here
and this method is our unlock app method
- the first underscore because there's
an underscore added so what we want to
do is copy this method without the first
underscore and that is the method name
as it's stored in the executable and now
what we're gonna do is run our app
through a debugger so we're gonna use
the debugger called RL DB once again
that comes with Xcode developer tools
when you install that and we're going to
tell it to attach to my app so now you
can see we're attached to my app and
what we want to do is disassemble a
function so we want to set this assemble
we want to pass it the minus B flag and
then we want to pass it the - and flag
the - and flag just allows us to pass a
specific function to disassemble we
could disassemble our main function like
this so as you can see there was our
main function completely disassembled
but what we want to do is disassemble
that function we just phoned and we want
to paste it in here so what I've done is
just made it a bit bigger and I've made
the font a bit smaller so we can fit
more in but as you can see that the
binary does still contain some English
you can see there's the string unlocked
which is the string we show to the user
whenever they enter the correct code so
we're in the right function somewhere we
can see a reference to unlock label we
can see a reference to unlock button we
can see sat in abled which is and if we
go back to the code that's the way we
disable our unlock box on our unlock
button whenever the user is led into the
program and we scroll up again we can
see there is the unlock code you
supplied is not valid we can see invalid
code keeps scrolling up we can see a
reference to string value string value
if we go back here you can see is used
to set the string in the variable and
it's used as part of our comparison so
we could be getting close and what we
can actually do is look for a specific
command called CMP which stands for
compare and we can see if we go to the
assembly page we can see that the
command CMP is used to compare two
values and that sounds like something we
would use in an if statement
because you can see here we're comparing
the value on the left to the value on
the right so a good thing to look for is
a CMP instruction and we can do that if
we just said come on F we look for CMP
and we hit enter so we know that the
instruction we want to look for is going
to be near the end of the program so
we're just going to hit enter until we
get near the end of the program and we
can see we are quite close to the bottom
of the program and we can see a
reference to view controller dot Swift
so we could be in the right place if we
scroll up you can see this is a starter
function unlock app and you can see
nowhere in the function anywhere higher
up does a comparison take place and what
we also see is Swift on string so this
gives us a good indication that this
comparison is most likely this double
equals
so what we want to do is one we don't
wanna change the comparison we want to
change this injunction directly below it
because you can see here jump if not
equal is that instruction and that
instruction corresponds to we hope this
double equals so we want to invert that
so what what's the opposite of jump if
not equal is obviously jump if equal so
we want to change J any 2j e and that
will essentially be the same as changing
that double equals to not equals or so
we hope anyway so let's try that first
we can see this is the jump if not
equals command I might want to do is
copy this beside that this is the
hexadecimal value beside it we're going
to copy that
we want to open up our hex editor the
one I'm using for this video is called
hex fiend I'm gonna put a link to that
in the description as well and what we
want to do is open up our binary so you
want to go to open path and we want to
paste in the path of our binary so we go
to finder and we'll just drag the binary
in here
I'll click open on
there we have it our binaries open so I
just made this a bit bigger to make it
easier to read and what we're going to
do is we're going to click find we're
going to go to find again and here we
can paste in the hexadecimal value we
want to find and we can replace it with
something so you can see here we have 0
f @ 5b at 0 0 0 0 0 0 and if we look
directly below it you can see there's a
je which is a jump if equal to the only
difference between the first two
hexadecimal numbers is the 85 becomes 84
so essentially that's what we want to
change when I change this 85 to and 84
so back and hax fiend we want to paste
and our hexadecimal value we want to
look up we want to paste in the value we
want to change it to and what we want to
do is change this 85 to 84 so we'll
delete that and we'll say it 4
so what we want to do is click enter and
you can see we just saw the big yellow
line and there's the part of the program
we're looking for so now what we're
gonna do is click replace and there you
can see this grant out which means we
need to save it and what we'll do is we
will save it as my app patched and we'll
go back to our folder we have my app and
we have my app patched if I double click
on my app so here is my app if I click
unlock now with nothing entered into the
box you can see it says unlocked because
what we did we converted that double
equals into a not equals now it will
accept anything as a valid unlock code
if we try my app
we click unlock nothing happens because
we didn't enter a valid code and try my
op passed again
and I click on lock it unlocked
successfully so hopefully that was
interesting hopefully it gave you a sort
of basic overview of how reverse
engineering programs actually works it
was a very basic overview there's a lot
of other things we can do there's a
special program called hopper that
actually makes this process a lot more
simple that makes this process a lot
easier but it cost some money so we used
the free tools instead but hopefully
this was interesting if you find this
interesting you might want to watch the
Windows version of this tutorial if you
haven't already because it's slightly
different we're using different programs
because it's on a different operating
system but that's it for this video
don't forget to like our page on
Facebook the link to that is in the
description we're also on Twitter the
link to that is also in the description
but that's it for this video don't
forget to like comment favorite and
subscribe and I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>