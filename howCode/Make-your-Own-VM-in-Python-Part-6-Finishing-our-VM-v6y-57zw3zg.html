<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own VM in Python: Part 6 - Finishing our VM | Coder Coacher - Coaching Coders</title><meta content="Make your Own VM in Python: Part 6 - Finishing our VM - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own VM in Python: Part 6 - Finishing our VM</b></h2><h5 class="post__date">2014-06-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/v6y-57zw3zg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to do is
we're going to add multiplication and
division to our virtual machine so I
said mole and then I'll say all we have
to do is change this to multiply side
now we have to change this to a divide
sign then what we're gonna do up here is
just adding new instructions multiply
and divide and there we go
so now we can multiply and divide now
watch machine to so wanting to say is
gonna multiply the two numbers together
so that is the instruction number seven
is multiplied so what we're doing is
multiplying 10 by 11 so that's gonna
multiply 10 I'll add them together and
that's gonna give us 110 if it works
which it should work so we go up on we
hit enter okay something didn't work so
the reason it didn't work is actually
you haven't implemented the functions
down here so we're just gonna come down
here and psp2 new functions in the first
one is multiply next one is divided on a
set multiply in here and divide in here
so now what we're going to do is when we
multiply these numbers together we
should get 110 legend see our virtual
machine returned 110 so now what I'm
gonna do is I'm going to divide them
number it and we're just going to
execute that night so it gives us 1 I'm
actually use more numbers that are
actually slightly easier to check if it
worked
although it obviously did work but I'm
just going to use say number 4 divided
by number 2 what should give us 2 okay
actually the way it does it is the
virtual machine does it backwards so
we're gonna change that because what it
did is it divided 2 by 4 and then it
gave us a 0 because and it doesn't show
us decimals or use of integers in Python
so I'm gonna change this to memory
this one number one I'm gonna actually
that and we get to so the last thing to
do is just check that it compiles into C
code so say Python are the end up I hit
enter okay we have a problem
this is because of our print stack -1 so
let's see what we can do about that so
I'm going to try just maybe saying let's
just let's just print the entire stack
for a night and that's just checked the
campano okay okay it doesn't like the
stack -1 so we're gonna fix that night
okay so what we need to do to fix the
problem is we need to pass the stack to
each of the functions some reasons the C
compiler Molly translator doesn't like
that so we're just going to pass the
stack variable to each of the functions
I'm gonna try and compile at night when
I hit enter hopefully we will have any
errors and as you can see it's running
correctly it should take away 17 seconds
like I did last time
and then hopefully we'll have a fully
working C program okay so what I'm gonna
do is I'm gonna say last VM or VM dash T
I'm gonna pass it hello dot VM and as
you can see it returns - so what I'm
gonna do is I'm going to add the numbers
together and we should get 6 so what I'm
gonna do now is I'm gonna say time the
NFC hello dot VM I can see it took that
length of time and it returned 6 which
is correct then I'm gonna say is time
Python the end of I hello dot VM as you
can see it was quite a bit slower when
we did with Python the as you say the
time goes down as we run up more times
so
we have a fully working virtual machine
that has its own instruction set which
is this laser this is kind of the
virtual machines binary and it has its
own instruction set it understands its
instructions and it's very fast because
we wrote it in Python which made it
quick they would learn are quick to
write easy to understand and it created
an executable so we can give that around
anywhere we don't need Python installed
to run the executable it's the main
reason is that it's a lot faster and ok
and we also did it in less than 100
lines of code so thanks for watching
don't forget to Like comment favorite
and subscribe if you enjoyed this series
let me know and I'll do more of it I'll
make a more complicated virtual machine
and show you how or we could do other
things so just let me know and I will
make videos about whatever topics you
want so thanks again I'll see you next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>