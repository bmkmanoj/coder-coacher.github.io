<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make Your Own YouTube Part 20 : Starting Video Ratings | Coder Coacher - Coaching Coders</title><meta content="Make Your Own YouTube Part 20 : Starting Video Ratings - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make Your Own YouTube Part 20 : Starting Video Ratings</b></h2><h5 class="post__date">2013-07-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WoJgYayiLNA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi and welcome to this video so today
we're going to be doing is we're going
to be finishing off the parts of the
comment page that we didn't actually get
finished last time because as you can
see if we scroll down we have a comment
on our comment box and a comment button
and above every single comment on the
page and obviously we only want one
comment box so that's the first thing
we're going to be doing in this video
and then the next thing we're going to
be doing is we'll probably start off
either the common like system or the
video like system so let's get started
so the first thing we're going to do is
we're going to fix the comment the text
box and the comment button ebbing
despaired with every comment and that's
actually quite simple so what we're
going to do is we're just going to copy
this div we're going to move it up above
here and paste it in there and I as you
will see i am just get rid of the
colorings right okay and so as you'll
see now if we refresh all the comments
are displayed and the comment box is on
the appearing once but as you'll see now
if we type in a comment so I'm as you
can see the last comment is cast common
one two three so let's say this is a
comment again so if we click post
comment we scroll down as you can see it
is oh yeah we have to refresh and as you
can see it's posted loads of times it's
posted it's not actually posted twice
it's posted as the other any other video
I assumed it was twice but no it's
actually posted the number of times at
the at the original number of times of
comments there was so I know that makes
no sense but that's why I'll explain
online so as you can see if we can't
these comments that's comment one that's
comment too that's comma 3 4 5 6 7 8 9
10 and there's 10 comments before so as
you can see now if we count the end this
is a comment again it says
there's comment one two three four five
six seven eight nine ten so that's
actually really easy effects all we have
to do is all we have to do is copy this
code and we come up here and above here
we can just create a new PHP block and
paste it inside and that's it so now if
we refresh again and I'm going to write
this is ah I don't know this is a on a
video so if we click post comment on
refresh it just post once and it says
this is a comment on a video so that's
it sorted the other thing I might we
should actually fix is I can see new
comments up here below the old ones so
what we want to do is we want the old
ones to appear above the new ones so
that's really easy um it's just down to
the way we order them when we query the
database to find the comments so what we
just say here is an order by and then so
we just say is order by ID which is the
ID in the database so and then we just
said the ESC for descending and this
just means that it will display the new
comments and above the old ones so as
you can see we scroll down it shows us
the latest comment and then if we scroll
all the way to the bottom it shows us
the very first comment we need so let's
scroll up and that's that sorted so the
next thing we're going to do is probably
the video ratings instead of the
comments because we can come back to
comments later because that video
ratings is probably going to be a bit
more fun to do we can copy the code from
that and use it in other parts for
example for the comments so we're going
to do is we're going to use the rating
system and we're going to cop
sort of the way YouTube does it and I
think anyway so what we're going to do
is we're first going to create a new
database table and I actually before we
add create the database table we
actually want to plan out the fields
first so when it says I day is the first
field sagem field we need is video ID of
the M the like or dislike was on the
next thing we need is and whether to
like or dislike so we'll just fit tight
for that so we need three fields so
we'll just keep it open for a minute I
want to create a new table called
ratings and we're going to give it three
columns so what I'm going to do is I'm
actually going to just make this bigger
for now just temporarily on this way
hopefully we'll be able to actually see
what we're doing so the first thing we
need is an ID second thing we need is a
video ID and the third thing we need
okay also just zoom out a bit the third
thing we need is a type so that I day
can be an integer video ID is of our
chart and type is a bar chart and the
length of watch our video ID is 32
characters because it's an md5 encrypted
string and event the type or the length
of a varchar over for the type column is
going to be yeah it's going to be 7
characters and this is because for
example if we use the word like it's
four characters long and if we use the
word dislike it's seven characters long
so we need seven characters to be able
to write the word dislike so now if we
scroll down a bit and we click on auto
increment and we click on primary we
just click on save and this should
create our table so I'm just going to
make this bigger again and I'm going to
shrink this time
so as you can see now we have our ad
table called ratings and what I'm going
to do first is I'm just going to insert
a rating so insert I'm going to give it
the video ID that we're on the moment so
I'm going to double click this and copy
it then I'm going to copy and paste it
into here and then I'm going to give it
a type of like and then I'm going to
click go so there it is our query is
executed and now we have a like on this
video we need a weighted actually
display this to the user so that's what
we're going to do it's actually not that
hard so what we're going to do now is
we're going to go up here above the act
on ahead form I'm going to create a new
div whoops and then just put in here to
make it look better and the new Dib is
just going to be called elective so okay
we don't need give it any implement
actually we can just leave it so I'm
just going to set it style also to full
laughs and I'm just going to write like
/ not jealous right readings do so
there's our ratings div what we're going
to do is we're going to give it a height
of 40 pixels okay that's a bit too high
so will actually decrease it to maybe 25
okay so 25 looks about right so what
we're going to do now is we're going to
within here we're going to create a new
div and we're going to give it some
style so the style attributes just going
to say that the width of the dave is
going to be for the minute we're just
going to leave it as 20 pixels and the
hiked is going to be
five pixels and then the background
color is going to be red just
temporarily so that's just whoops and
you look okay i have closed it off so
once and now we're just kind of refresh
so those are like sort of div and this
is going to be this is what YouTube does
the readings so we're going to sort of
copy them and we're going to copy this
to and paste it here and change this to
green what we want to say is also on
this day we wanted to float left and
then another one is going to float left
so as you can see neither stacked
against each other and this is where
we're going to use this is the way we're
going to like do our ratings except
we'll probably use gray like YouTube
does great we're going to use green for
the number of likes and graph or if it's
a dislike so the other thing we want to
do is we actually want to maybe float on
the right hand side just because that's
a better side to do it on and change
this to okay no so we need to give this
div actually i wait before with the flow
tried will actually work so we'll give
it up with of maybe 400 pixels that's
not quite
off but I'm let's try 450 that's too
much for seven be okay maybe 475 so I
didn't see it's mostly just trial and
improvement trying to work out which one
to do so that looks okay that will do
for the minute so what we're going to do
now is we're going to actually find out
how many likes and dislikes there isn't
in the database we're going to calculate
them so the way we're going to do that
is we're going to come in here and we're
just going to create a new block we're
going to call it to calculate likes and
for some reason the formatting or the
ass titans got a bit weird so I'm going
to do is I'm just going to create a new
PHP file and then we're just going to
copy and paste the code into it
afterwards so what I'm going to do is
just going to go in here and create a
new file called test top yeah test up HP
and this way I will be able to see our
styling so um I'll just copy this in so
the first we need to do is going to
query the database so I'm just going to
create a MySQL query and it's going to
be select all from likes unawares
ratings actually where video ID equals
video ID and the reason we're using the
video ID variable is because it's unique
to the the actual video it so that we
can load the specific lights for likes
for this video and it won't actually
work with the money because we're
obviously in another PHP file that as
soon as we copy this over the video ID
variable will work because it's not
defined in this or a declared in this
file but it is declared in this file
right at the very top so now we've done
that we wouldn't what we need to do is
we need to say
oh wait i calculate likes we also need
to say we're video ID equals video ID
and and type is equal to like and then
we want to do is we just want to say num
of likes equals MySQL num rows query and
will actually change this to get like
and chain alright copy this and paste it
in so now we've done that we've got the
number of rows so we're just going to
say echo num our likes and now we've
done that we can actually just copy and
paste this code in to the actual real
file and let's have a look we should get
one and as you can see one is a code out
and if I come in here and I insert
another one I'm just going to still
insert a like but i'm just going to show
you that this will increase the 29 and
as you can see now we have two likes
that's good that means that it's working
the means our code is correct so what we
want to do now is we want to actually
find a way to display the likes in the f
form here so we want a certain number of
likes to take a certain number of spit a
certain amount of space so what we're
going to do is we're going to first
start off by giving the like dislike
thing this these two bars a sat-wed for
them to fill so the first thing we're
going to do is we're going to go in here
and we're going to set the woods as
percentage based so the first thing this
is width of 475 pixels we're going to
actually create another containing dip
inside of it with a smaller width so
this dave is going to be obviously float
um right as well whoops but it's going
to have a width of approximately I don't
know 200 pixels so this way we have sort
of we have this original div which is
the whole width of the page and then
within that we have a smaller div which
is only by this weight wide and it's on
the right hand side of the page and what
I'm going to do now is going to increase
this to fifty percent and fifty percent
as well and as you can see that is the
maximum amount of space that are like /
dislikes will ever take up and maybe
that's a wee bit too much so we'll just
decrease this to 180 and then we're
going to calculate the percentage based
on the number of likes or dislikes so
the way we're going to do this is we're
also going to come back into this file
because we've good a formatting we can
actually see the colors and I'll make it
easier to read so what we want to do is
we want to work out the percentage is so
obviously percentages about are out of
100 so we need to get the likes compared
to dislikes and percent find the
percentage of them so how are we going
to do this the first thing we're going
to do is we're going to calculate the
total number of likes and dislikes so in
our case there's two likes and 0
dislikes so this means that the greatly
in that case the green bar should fill
the whole thing so in that case we want
to set green equal to one hundred
percent and red equal to zero percent
and then if there is a for example under
one like and on dislike we want to set
green equal to fifty percent unread
equal to fifty percent so this is we're
going to use it to work it out so am the
way we're going to work at all is the
first thing we're just going to create a
simple if statement so this is called
so this sort of isn't a real like this
isn't real PHP syntax but this is just
called pseudo code it's where you sort
of write that code that's not a real
language but it's just sort of the way
you would plant things are so what we
want to the way we would largely work
this out is if and either red or okay I
know so if red a equals 0 then set our
then we wanna set green equal to 100 and
then we want to set else if grain equals
equals 0 then we want to set them we
were whoops i want to set red equal to
one hundred percent so then then we can
also set else if if for example red
equals equals one and green equals
equals 1 then we want to set and red and
green equal to one or two fifty percent
so this is sort of the logic we're going
to use so let's put that into real code
nine so since these are percentage based
i'm just going to change these to PHP
code i'm going to set echo um let's see
ecko red and copy this echo green and
then up here what we're going to do is
we're just going to okay we can go any
other page into it so we're going to say
here is first we're going to decline the
arturia define the variables i will set
them as numbers actually and bread
I wanted to 51 30 then I'm going to say
is if num of likes is equal to 1 okay so
I find a way better way to do this it's
to convert the number of likes and
dislikes in the to a percentage and fill
up the space so what I mean by that is
we need to work out how many pixels of
the what percentage of the 200 are the
180 pixels the number of likes and
dislikes should each take up so what we
want to say is 180 pixels yeah equals
one hundred percent we can whoops get
rid of these so then that means that one
percent equals equals 18 pixels are no
equals 18 pixels so then that means that
we need to work out what one percent is
so for it just for an example say we had
three are three likes 1 dislike and I
only chose these because F 4 goes into
100 pretty easily so if we had three
dislikes are three likes and for
dislikes the first thing we would do is
find the total so the total number is
just add them together so three plus one
equals four so then that means that the
total that the total number of likes
like a hundred percent equals four so
then what we do to find out how many
pixels it takes up is we divide 180 by
four so this is where I work I'm going
to work it out so for likes are for say
four equals total which also equals one
hundred percent so then that means to
fight which also equals 180 pixels so
these all mean the same so this means
the same thing so 180 pixels is one
hundred percent of the width of the div
which is the taupe which is
the total number the total amount of
space that for like should take up or F
the total number of likes and dislikes
you take up so what we do to find out
what one like takes up is we say have
180 divided by 4 which equals which
equals M 45 so 45 pixels is what H likes
you take up so then we say 45 pixels x 3
equals a number of pixels taken up by
likes and then we could also say
remainder I know I spot that one but it
doesn't matter and remainder equal or is
not a month of space taken up by
dislikes so that's what we're going to
say so that's how we're going to work it
out so the first thing we're going to do
is work out the total number of likes
and dislikes so in here we okay we'll
come down here actually much do it so we
also we need to create a new query then
for a number of dislikes so up here i'll
just say copy this and paste it down I'm
say I get dislikes and then we'll go in
here once i get dislikes as well and
we're type equals dislike so now i've
got the number of likes a number of
dislikes we're just going to say total
num equals num of likes plus num of
dislikes so in our case this will be 2
so then what we want to do is we want to
say we can keep everything dynamics will
set this to a variable
add total would so then we're going to
go up here actually as well I'm gonna
say total wide equals 180 and will also
say it will also do the egg declare the
rat brain variables so green equals zero
and red equals zero so now we've done
that and we got the total number so the
next step we need to do is add divide
180 by the total number so um total
width I whoops width of 1 which is equal
to one likes or dislike equals and total
width and minus oh no I mean divided by
total numb and then what we want to say
is would oh let's see what we called it
okay so then we just instead of that we
just say green equals width of 1 x and
numb of likes x number of likes and then
we just set red equal to width of 1 x
num of dislikes this should work if i'm
correct hopefully i am because I just
let me make this up so I'm hoping that
it'll actually work so let's pace that
in whoops um let's just do this to keep
it tidy
I'm just keep going such a bit so if I
was not out that all looks ok so that's
how I look so what should happen is we
should just get a full grain bar okay so
we've made a mistake because our code
isn't working so let's have a look at
the source code of the page and what I'm
assuming is happening is it's just not
working at all I'll guy's a total width
is undefined is an undefined variable
online 70 okay let's sort that out okay
so total width and what did i SAT it too
okay so the total way that I'd said I'd
underscore in it so let's just set that
let's get that another score and that's
refresh scroll down and as you can see
we have a fall green bar and now if I
come up here and I insert a dislike into
the video hopefully it should divide by
three and we should get it I'm a third
of a chimi red ok we're going to sub
problem here and look
okay so that's a really simple thing
what we've done is you just kept the
percentages so that luckily that's
really easy effects all we need to do is
come in here and change these from
percentages to pixels and we should have
no problems as you can see there that is
it working if we add one more like into
the database so add another like and
fresh as you can see now that only takes
up twenty five percent of the space
because they're there is 93 likes and 1
dislike I believe yeah there's four rows
so there should be three likes and one
that's like like like this like like
that's three and four or three and one
so that's four so then that's it worked
so that's it for this video don't forget
to Like comment favorite and subscribe I
know it was kind of a long video and
there was a kind of complicated some of
the things to work out it was a bit
awkward in places to work out but we got
there in the end and thanks for watching
don't forget to Like comment favorite
and subscribe and I was</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>