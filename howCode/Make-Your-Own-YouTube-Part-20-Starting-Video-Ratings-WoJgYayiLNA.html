<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make Your Own YouTube Part 20 : Starting Video Ratings | Coder Coacher - Coaching Coders</title><meta content="Make Your Own YouTube Part 20 : Starting Video Ratings - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make Your Own YouTube Part 20 : Starting Video Ratings</b></h2><h5 class="post__date">2013-07-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WoJgYayiLNA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi and welcome to this video so today
we're going to be doing is we're gonna
be finishing off the parts of the
comment page that we didn't actually get
finished last time because as you can
see if we scroll down we have a comment
on our comment box and a comment button
above every single comment on the page
and obviously we only want one comment
box so that's the first thing we're
going to be doing in this video and then
the next thing we're gonna be doing is
we'll probably start off either the
comment like system or the video like
system so let's get started
so the first thing we're gonna do is
we're gonna fix the comment the text box
and the comment button yeah being
displayed with every comment and that's
actually quite simple so what we're
gonna do is we're just going to copy
this div we're going to move it up up
above here and paste it in there and as
you will seen I just get rid lots of the
colorings right okay and so as you see
now if we refresh all the comments are
displayed and the comment box is only
appearing once but as you'll see now if
we type in a comment so I'm as you can
see the last comment is test common one
two three so let's say this is a comment
again so if we click the post comment
and we scroll down as you can see it is
oh yeah we have to refresh as you see
it's posted loads of times it's posted
it's not actually posted twice it's
posted as the other and the other way
too I assumed it was twice but no it's
actually posted the number of times at
the and the original number of times of
comments there was so I know that makes
no sense but that's why I'll explain
online so as you can see if we caught
these comments that's comment one that's
comment too that's comma three four five
six seven eight nine 10 and there's ten
comments before so as you can see now if
we contantly and this is a comment again
it says
there's comment one two three four five
six seven eight nine ten so that's
actually really easy effects all we have
to do is all we have to do is copy this
code and we come up here and above here
we can just create a new PHP block and
paste it inside and that's it
so now if we refresh again and I'm gonna
write this is I don't know this is a on
video so if we click post comment and
refresh it just posts once and it says
this is a comment on a video so that's
it sorted the other thing I might we
should actually fix is I can see new
comments up here below the old ones so
what we want to do is we want the old
ones to appear above the new ones so
that's really easy it's just not down to
the way we order them when we query the
database to find the comments so what we
just say here is an order by and then so
we just say is order by ID which is the
ID in the database so and then we just
said the ESC for descending and this
just means that it will display the new
comments and above the old ones so as
you can see we scroll down it shows us
the latest comment and then if we scroll
all the way to the bottom it shows us
the very first comment we need so let's
scroll up and that's not sorted so the
next thing we're gonna do is probably
the video ratings instead of the
comments because we can come back to
comments later because that video
ratings is probably gonna be a bit more
fun to do we can copy the code from that
and use it in other parts for example
for the comments so we're going to do is
we're gonna use the rating system and
we're going to copy
sort of the way YouTube does it and I
think anyway so what we're gonna do is
we're first gonna create a new database
table actually before we create the
database table we actually want to plan
out the fields first so when it says ID
a is the first field sagem field we need
is video ID of the the like or dislike
was on the next thing we need is and
whether to like or dislike so we'll just
fit tight for that so we need three
fields so we'll just keep it open for a
minute I want to create a new table
called ratings and we're gonna give it
three columns so what I'm gonna do is
I'm actually gonna just make this bigger
for now just temporarily this way
hopefully we'll be able to actually see
what we're doing so the first thing we
need is an ID second thing we need is a
video ID and the third thing we need
okay I also just zoom out a bit the
third thing we need is a type so that ID
can be an integer video ID is of our
chart and tightness of our chart and the
length of our video ID is 32 characters
because it's an md5 encrypted string the
event the type or the length of a
varchar over for the type column is
gonna be yeah it's gonna be seven
characters and this is because for
example if we use the word like it's
four characters long and if we use the
word dislike it's seven characters long
so we need seven characters to be able
to write the word dislike so now if we
scroll down a bit and we click on auto
increment and we click on primary we
just click on save and this should
create our table so I'm just going to
make this bigger again and then I'm
going to shrink this time so
see now we have our table called ratings
and what I'm gonna do first is I'm just
gonna insert a rating so insert I'm
gonna give it the video ID that we're on
the moment so I'm gonna go look like
this and copy it then I'm gonna copy and
paste it into here and then I'm gonna
give it a type of like and then I'm
gonna click go so there it is our query
is executed and now we have a like on
this video we need a way to actually
display this to the user
so that's what we're gonna do it's
actually not that hard so what we're
gonna do now is we're going to go up
here above the act kana head form I'm
gonna create a new Dave whoops
and then just put in here to make it
look better and the new Dib is just
gonna be called elective so okay we
don't need to give it any imprisonment
actually we can just leave it so I'm
just gonna set it style also to further
laughs and I'm just gonna write like
slash not shadow strike readings - so
there's our ratings div what we're gonna
do is we're gonna give it a height of 40
pixels okay that's a bit too high so
will actually decrease it to maybe 25
okay so 25 looks about right
so what we're gonna do now is we're
going to within here we're gonna create
a new div and we're gonna give it some
style so this style that I - it's just
gonna say that the width of the Dave is
gonna be for the minute we're just gonna
leave it as 20 pixels and the height is
going to be 5 pixels
and then the background color is going
to be red just temporarily so that's
just whoops I need to
okay I have closed it off so now we're
just gonna refresh so those are like
sort of div and this is going to be this
is what YouTube does their readings so
we're gonna sort of copy them and we're
gonna copy this to and paste it here and
change this to green what we want to say
is also on this day of we wanted to
float left and then another one's gonna
float left so I can see no other stacked
against each other and this is where
we're going to use this is the way we're
gonna like do our ratings except we'll
probably use grey like YouTube does
great we're gonna use green for the
number of likes and gray or if it's a
dislike so the other thing we want to do
is we actually want to maybe float on
the right hand side just because that's
a better side to do it on change this to
okay no so we need to give this div
actually outweighed before with a float
ride will actually work so we'll give it
up with of maybe 400 pixels that's not
quite
but I'm let's try 450 that's too much
for 70
okay maybe 475 so as you can see it's
mostly just trial and improvement trying
to work out which one to do so that
looks okay that will do for the minute
so what we're gonna do now is we're
going to actually find out how many
likes and dislikes there isn't in the
database we're going to calculate them
so the way we're going to do that is
we're going to come in here and we're
just going to create a new block we're
gonna call it to calculate likes and for
some reason the formatting or the
stylings got a bit weird so I'm gonna do
is I'm just gonna create a new PHP file
and then we're just gonna copy and paste
the code into it afterwards
so what I'm gonna do is just going to go
in here and create a new file called
test top yeah test up HP and this way I
will be able to see our styling so um
I'll just copy this in so the first
thing we need to do is going to query
the database so I'm just gonna create a
MySQL query it's gonna be select all
from likes oh no well it's ratings
actually we're video ID equals video ID
and the reason we're using the video ID
variable is because it's unique to the
the actual video it's so we can know the
specific lights for likes for this video
and it won't actually work at the money
because we're obviously in another PHP
file but as soon as we copy this over
the the video ID variable will work
because it's not defined in this or I
declared in this file but it is declared
in this file
all right at the very top so none of
them that wouldn't what we need to do is
we need to say
um okay I calculate likes we also need
to say where video ID equals video ID
and type is equal to like and then we
want to do is we just want to say num of
likes equals MySQL num rows query and
we'll actually change this to get likes
and chain all right copy this and paste
it in so now we've done that we've got
the number of rows so we're just going
to say echo num likes and now we've done
that we can actually just copy and paste
this code in to the actual real file and
let's have a look we should get one and
as you can see one is echoed out and if
I come in here and I insert another one
I'm just gonna still insert a like but
I'm just going to show you that this
will increase the to nine and as you can
see now we have two likes that's good
that means that it's working that means
our code is correct so what we want to
do now is we want to actually find a way
to display the likes in the F form here
so we want a certain number of likes to
take a certain number of spit a certain
amount of space so what we're gonna do
is we're gonna first start off by giving
the like dislike thing this these two
bars a set Wed for them to fill so the
first thing we're going to do is we're
going to go in here and we're gonna set
the width as percentage based so the
first thing we need this is width of 475
pixels we're going to actually create
another containing div inside of it with
a smaller width so this this
is gonna be obviously float:right as
well
whoops but it's gonna have a width of
approximately I don't know 200 pixels so
this way we have sort of we have this
original div which is the whole width of
the page and then within that we have a
smaller day which is so near by this
weight wide and it's on the right-hand
side of the page and what I'm gonna do
now is I'm gonna increase this to 50%
and 50% as well and as you can see that
is the maximum amount of space that are
like slash dislikes will ever take up
and maybe that's a wee bit too much so
we'll just decrease this to 180 and then
we're going to calculate the percentage
based on the number of likes or dislikes
so the way we're gonna do this is we're
also gonna come back into this file
because we've good formatting we can
actually see the colors and I'll make it
easier to read so what we want to do is
we want to work all right the percentage
is so obviously percentages about all
right of 100 so we need to get the likes
compared to dislikes
and percent find the percentage of them
so how are we gonna do this the first
thing we're going to do is we're going
to calculate the total number of likes
and dislikes so in our case there's two
likes and zero dislikes so this means
that the great the in that case the
green bar should fill the whole thing so
in that case we want to set green equal
to 100% and red equal to zero percent
and then if there is for example under
one like and on this light we want to
set green equal to 50% and red equal to
50% so this is what we're going to use
it to work it out so um so the way we're
going to work it all is the first thing
we're just going to create a simple
statement so this is called so this sort
of isn't a real like this isn't real PHP
syntax but this is just called pseudo
code it's where you sort of write code
that's not a real language but it's just
sort of the way you would plant things
on so we want to the way we would
largely work this out is if either red
or okay I know
so if red a equals zero then set our
then wanna set green equal to 100 and
then we want to say else if green equals
equals zero then we want to set then we
want to set red equal to 100% so then
then we can also say else if if for
example red equals equals 1 green equals
equals 1 then we want to set and red and
green equal to 1 or to 50% so this is
sort of the logic we're gonna use so
let's put that in a real code now so
since these are percentage based I'm
just gonna change these to PHP code I'm
gonna say echo let's say echo read and
copy this echo green and then up here
what we're gonna do is we're just going
to okay we can go any other page into it
so we're gonna saying here is first
we're gonna define the order yeah define
the variables I will set them as numbers
actually
and read I don't want to fifty ones me
zero and then I'm gonna say is if num of
likes is equal to one okay so I find a
way better way to do this it's to
convert the number of likes and dislikes
in the to a percentage to fill up the
space so what I mean by that is we need
to work out how many pixels of the what
percentage of the 200 are the 180 pixels
the number of likes and dislikes should
each take up so what we want to say is
180 pixels ya equals 100% we can there
whoops get rid of these so then that
means that one percent equals equals 18
pixels are no equals 18 pixels so then
that means that we need to work out or
one percent is so for just for an
example say we had three are three likes
I'm one dislike and I only chose these
because that 4 goes into 100 pretty
easily so if we had three dislikes or
three likes and 4 dislikes the first
thing we would do is find the total so
the total number is just add them
together so 3 plus 1 equals 4 so then
that means that the total that the total
number of likes like a hundred percent
equals four so then what we do to find
out how many pixels it takes up is we
divide 180 by 4 so this is where I work
I'm gonna work it out so four likes our
4 so 4 equals total which also equals
100% so then that means to fight which
also equals 180 pixels so these all mean
the same so this means the same thing so
180 pixels is 100% of the width of the
give which is the tote which is the
total number the total amount of space
that for likes should take up or after
the total number of likes and dislikes
you take up so what we do to find out
what one like takes up is we say 180
divided by 4 which equals which equals M
45 so 45 pixels is what each likes you
take up so then we say 45 pixels x 3
equals a number of pixels taken up by
likes and then we could also say a
remainder I know I spot that wrong but
it doesn't matter and remainder equal or
is not a month of space taken up by
dislikes so that's what we're gonna say
so that's how we're going to work it out
so the first thing we're going to do is
work out the total number of likes and
dislikes so in here we okay we'll come
down here actually how much do it
so we also we need to create a new query
then for a number of dislikes so up here
I'll just say copy doesn't paste it down
um say I got dislikes and then we'll go
in here once I get dislikes as well and
we're type equals dislike so now I've
got the number of likes a number of
dislikes we're just going to say total
num equals num of likes loss num of
dislikes so in our case this will be two
so then what we want to do is we want to
say we can keep everything dynamics will
set there
to a variable to add total woods so then
we're gonna go up here actually as well
and we'll say total wide equals 180
and we'll also say it will also do the
AG declared the red and green variables
for green equals zero and red equals
zero so now we've done that and we've
got the total number so the next step we
need to do is divide 180 by the total
number so um
total with whoops voids of one which is
equal to one like or dislike equals and
total width and - oh no I mean divided
by total numb and then what we want to
say is would let's see what we called it
okay so then we just instead of that we
just say green equals would of one x +
num of likes multiplied by number of
likes and then we just set red equal to
width of one times num of dislikes this
should work if I'm correct hopefully I
am because I just legend we made this up
so I'm hoping that it'll actually work
so let's paste that in whoops let's just
do this to keep it tidy
I'm just going to be it so if I thought
out that all looks okay so that's how I
look so what should happen is we should
just get a full green bar okay so we've
made a mistake because our code isn't
working so let's have a look at the
source code of the page and what I'm
assuming is happening is it's just not
working at all okay so total width is
undefined is an undefined variable on
line 70 okay let's sort that out
okay so total width and what did I set
it to okay so the total way that I'd
said I'd underscore in it so let's just
set that let's give that another score
and that's refresh and scroll down but
as you can see we have a full green bar
and now if I come up here and I insert a
dislike into the video hopefully it
should divide by three and we get a 1/3
of a chilli red okay we're gonna stop
problem here and look
okay so that's a really simple thing
what we've done is you just kept the
percentages so that luckily that's
really easy effects all we need to do is
come in here and change these from
percentages to pixels and we should have
no problems as you can see there that is
it working if we add one more like into
the database so add another like and
refresh as you can see now that only
takes up 25% of the space because there
there is nine three likes and one
dislike I believe yeah there's four rows
so there should be three likes and one
that's like like like this like like
that's three and four or three and one
so that's four so then that's it worked
so that's it for this video don't forget
to Like comment favorite and subscribe I
know it was kind of a long video and
there was a kind of complicated some of
the things to work out it was a bit
awkward in places to work out but we got
there in the end and thanks for watching
don't forget to Like comment favorite
and subscribe and I was</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>