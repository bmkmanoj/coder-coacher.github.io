<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 15 - More on Likes | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 15 - More on Likes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 15 - More on Likes</b></h2><h5 class="post__date">2017-01-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tVLHGHshNdU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so nice very we left off being able to
like posts on someone's profile and we
put in a check to make sure that someone
can't like a post more than once in this
video we're going to be learning how to
create an unlike button that allows you
to unlike a post you've already liked so
let's get started so before we get
started we have to just change something
we have to change this user ID to follow
her ID and the reason for that is
because if we scroll up here we can see
user ID is the ID of the user whose page
we're on and follower ID is the ID of
the person who's logged in so whenever
we like a post we want to check if the
user who's logged in has liked that post
not if the user whose page it is has
like that post so now that we fix that
bug we're ready to start making our
unlike button so here it says already
liked and what we're gonna do is copy
and paste the two queries above and
we're going to basically reverse them so
if we paste these two queries here what
we want to do is obviously subtract one
from the total number of likes on that
post and then below that what we want to
do is instead of inserting into post
likes we want to delete from post likes
you
so these two queries should reverse the
first one so let's see does that work so
according to our database the user in
currently logged in as is Frances and
that's the user with the idea of one and
if I click on post ID we can say that I
liked the post called hello world so if
we go back to posts so back at the posts
table we can see that how the world has
two likes and by clicking like again
what did you do is take the like away
so now if i refresh you can see likes
have decreased by one and we go to post
likes and now that like has just
disappeared if I click it again
we've a new like in the database and the
likes in the post table have increased
the only problem is our like button
still says like it doesn't say unlike so
we need to fix that so to fix that what
we're gonna do is we're gonna do a
simple query each time we loop through
this forward it might seem wasteful to
do another query every time but it makes
it a lot more simple to set up so we're
going to create another query
you
so here what we're doing is querying the
post likes able to get all of the posts
where the post ID is equal to the
current post or average and this case
comes through the current item in the
4-h loop which is pay and we get the
user ID from the user who's logged in
and we actually want to get the post ID
not the user ID so what we're doing is
getting the post ID and if this query
returns a number then we'll know that
these are like the post otherwise we'll
know that they haven't liked this post
so we're gonna do an F statement and
we're gonna get that and we'll say if
the user hasn't liked the post then
we'll show the like button otherwise we
will show them an unlike button and
we'll change this to unlike and then
we'll change the name to unlike so let's
see what happens when we refresh the
page so you can see that button has
updated and it says unlike if I click on
on like it changes to like and it
changes back to unlike changes to unlike
changes to unlike as you can see it
works exactly as you would expect and
you can say since we're logged in as
Frances currently we have an unlike
button on hello world and an unlike
button on the other hand of world and a
like button on test which means we
haven't liked that one yet and if we log
in as high code you can see we have an
unlike one on the hello world but these
second hello world doesn't so everything
seems to be working correctly so before
we go what we're gonna do is we're gonna
show the total number of likes beside
the current post well since we're
selecting all from posts or selecting
all of the columns all we need to do is
beside the like button we can create
something like a span tag we can print
out he likes column from the table and
I'll copy and paste that into the second
part so that we have it for unlikes as
well so it's finally just refreshed and
see what this looks like now you can see
it says two likes if I click on that it
says one like I click it again it says
two likes and there we have it our like
button no work so that's it for this
video don't forget to Like comment
favorite and subscribe don't forget to
follow us on Facebook Twitter and radit
the source code to this video and all
the previous videos are in the
description but that's it for this video
I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>