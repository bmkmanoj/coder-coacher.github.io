<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>OLD:Make your Own Web Crawler - Part 1 | Coder Coacher - Coaching Coders</title><meta content="OLD:Make your Own Web Crawler - Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>OLD:Make your Own Web Crawler - Part 1</b></h2><h5 class="post__date">2014-10-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KBemN_bTnHU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
learning how to create a web crawler
using PHP and this tutorial has been
requested for ages so I'm finally
getting around to doing it so what a web
crawler is is it's a piece of software
that takes a web address as input and
then it goes to that website gets a list
of all the links on the website gets the
content from the website for example the
title the description the keywords and
some of the content on the page and it
will store that in a database and it'll
also take a list of every link on the
page and then it will take those links
and use them as input and then follow
those links and it'll keep going and
going to go and it just goes on and on
and on and on so it might be kind of
hard to understand because it can
actually go on forever because you're
just following links and links and links
and it just goes on and on
so what I made is this sort of diagram
to show you so here we have input which
in this case is best based on CEO this
is the website we're going to be using
as input and what this does is when we
get best based at CEO you can see it
gives us an array and this array is the
list of all the links it could get off
the first page of the best based website
so you get the dean's page about Us page
why choose those page products and etc
and it goes all the way down to cookies
which is the last link on the page and
the reason the best sales page is sort
of bold is because that's the first link
on the page and that means M that's the
next link it's going to go to so it's
got all these links first and then if we
go next so the reason you're seeing this
seems sort of array from the past deals
page is because the links on all the
pages are almost exactly the same but
you have to check them anywhere just to
make sure because you don't want to miss
a link if you have a search engine so
this array is actually an array that's
built up over all the pages so the way
our crawler works is it has an array
that's originally empty and then as soon
as it starts crawling and starts adding
links into this array and then whenever
it's filled up the array to a certain
number what we haven't decided yet but
whatever number we choose and it'll
decide to actually crawl those websites
and get their content so
oh yeah go to the next one now you can
see this is the full array this is all
the pages on the best based website that
the air crawler can get to so there's 39
in total I'm not sure if it's cut off or
not I apologize if it is but you can see
that the array is got longer and longer
longer as the crawlers find more pages
as it's gone through the site and when
it gets to all the page when all the
pages have been fine that's when we're
going to actually crawl each page
individually and get the content we
actually did crawl all the pages to get
this complete list of links we had to
crawl every page but we didn't actually
take any content off that we were just
looking for links on the pages so let's
actually make the web crawler so
obviously we're going to start with PHP
tags what we're going to do is we're
going to create a function called get
links and this is going to be the
function that goes on each web page and
it gets the links from the web page and
what it's going to do is it's going to
take one parameter which is a variable
called URL and down here so down here
what we'll say is get underscore links
to run the function and we will pass it
a website to run we'll just give it a
variable called to crawl and go up here
and we will so here we're just going to
set to on the scroll crawl and we're
going to say set that equal to best
basis web address the reason we're not
using high code is because one of the
legs on the web page one of the links on
haiku takes you to my youtube channel
which would in turn take the crawler to
YouTube and since YouTube's massive the
crowd will just go on and on and on
forever
on each if so I so we're keeping it a
best base because best miss doesn't link
to any massive web site like YouTube
which will just go on forever so the
first thing we're going to do is we're
going to get the actual input file so
we'll say input equals file get contents
the reason we have the art symbol before
it is because that way if there's
anything wrong with the contents
function for example if the file is not
found then we won't get an error so our
crawler will keep crawling and the
finally we want to give it is URL and
idea what
going to say echo input so if we go to
Google Chrome now and we refresh the
page we should just get the best based
website Agra ductus as you can see we do
but we don't actually need them too
because we're not worried about them at
the moment
so we can see we're getting the web
address so what we'll do now what we'll
do now is we'll create a regular
expression that's going to find every
link on the page so what a regular
expression is is it's a pattern that we
it's a pattern that we look for so for
example if I had a huge graph it said
hello and I had some other stuff so I
said HTML oops
so how this semester's a full page and
let's just put this in the body we need
a way to only get the links and not and
to ignore all the rest of this so that's
what we're going to be using a regular
expression for I'll just pasted in
because the regular expression looks and
actually looks crazy here it is here
it's really long what all you need to
know is that it finds all the links on
the page you can using this regular
expression we can make sure we only pick
up the link so on the webpage and we
ignore everything else so just copy and
paste or copied in as it is or you can
copy it from the code in the description
as well so we've got our regular
expression so now what we're going to do
after we've got a regular expression is
we're going to paste in this it's the
Prag on a form match all function and
that's what's actually going to do the
matching that's going to find all the
links on the page then what I'm going to
do is go set print underscore R we're
going to print matches which is an array
so when we print this that's just
refresh you'll see we'll get an array
Aqueduct to us and as you can see this
is an array that it doesn't just get
links so what we need to do is we need
to get the second element of the array
because it's action array of arrays so
we need the second element because the
second element is the part that has all
these links as you can see here here's
the links I want to get rid of all this
crap above it and below it so if we
refresh now we'll just get the links
Aqueduct toes
and there you can see it a bit better if
I throw this in pre tags
if I go down here and I put another I
like lose the pre tags off and you can
see this looks a lot more like the array
from the diagrams to start so here we
have all the links on the page but we're
going to end it even has our emails and
we do have ways of dealing with emails
as well so now we've know we've got that
we can get rid of that and we can
continue on making our web crawler so
what I'll do now is I'll create a
variable called owl and I'll set it
equal to the matches array which is the
second element of the matches array
which contains an array so L is actually
an array as well and L is the array of
our lengths so what we're going to do
now is we're going to set for H whoops
we just want to say for H L as a sale
link what I'll do is I'll say echo link
and I'll put in a break tag as well so
you can see them on a new line
so you can see this is going to echo out
all of our links on our page so you can
see all our links so the first thing we
want to do is we want to get rid of any
links that look like this
so let's say we had bestest doctor Co /a
test and then had a hashtag symbol on it
said hello world
oops actually bro hello world so you can
see this is the sort of link you might
get but what we don't want to do is you
don't want to have a link that looks
like this and then another link below
here and say this is francis because if
you know anything about haste imagine
though that this and this are the exact
same page they're just different parts
of it and if we have a search engine we
don't want to be indexing the same page
multiple times just because of something
like this so we're going to get rid of
the hashtag noise so what we're gonna do
is we we see a page like this we're just
going to strip the hashtag and we're
just going to store the actual page so
these two pages would be identical to
the search engine so what we need to do
is we need to say if I see our pose
which is the function in PHP that we use
to find if something's in a string and
we're going to we first have to pass the
parameter of the link we want to lock in
so this is the string we want to search
I mean the next thing we pass is the
actual thing we want to search for which
in this case is the hash tag what we do
now since we don't need a you know set
equals anything because by default if we
have this the function returns true so
if a hash tag is fine we just want to
sell link equals a sub STR which is the
function in PHP used to shrink strings
or take chunks out of strings or get
certain parts of them or whatever so the
first variable we pass it is the length
variable which is our actual string then
we want to pass it as the zero and the
number zero that's because that means
want to start at the beginning of the
string and then we want to end at the
position where we find this hash tag and
what this function returns is a I
actually didn't explain it properly well
if this function returns anything other
than zero the HTML Ron
what this function returns is the
position in the string where the hash
type is fine so we just need to say STR
STR pose and we'll say link and then
we'll pass it the hash tag so this
should shrink our string so if we see
any legs that have a hash tag in them
then I you will see that the hash tag
gets or everything after the hash tag is
taken off so if we run this now we'll
just see a blank page that's because
we're not Aquaguard anything but and
that's what it's designed to do the next
thing we're going to do is we're going
to say if a sub STR linked at 0 1 which
means if the first character in the day
in DM URL we're looking at so if the
first character in the link and is equal
to a dot then what we're going to say is
our link equals sub STR link 1 so we're
just going to cut off the dot if there's
a dot at the beginning so it was sort of
that way you would see a dot is if you
had a link like this so say I was on my
website and I had a link to another page
so if I was linking to a page say I'm
saying I'm a pacifist CEO and I'm on the
index page and I want to look to the a
blog page I wouldn't necessarily always
say Basket CEO slash about what I would
probably do is just say dot or dot slash
about which means the exact same thing
is just a way a shorter way of writing
it so if we see a page like this which I
think we will do so let's just echo
let's just a go up here an equity first
echo link
get rid of these obviously
let's just put the brake tagging
so you can see here it's we have way
that we have those links there we have a
link we have links that start with a dot
so we don't want our links to start with
a dot so that's we're going to do we're
going to get rid of them so you can see
if I bring this echo below here you'll
see the dot will disappear
and you can see the dot disappeared so
unfortunately I'm Way
over time on this video so in the next
video we'll be continuing on in our web
crawler so before I go I actually just
want to show you something so you can
see here there's a website called pest
calm paa ste calm so this is a new
website I just made I didn't actually
write it myself I got I used some source
code someone asked me that I just put it
on a website so what it is is it's a
place where you can paste source code so
you can see here I'm but to paste the
source code from this tutorial into this
website here and if I just click Save
you can see it saved it here and it is M
saved and syntax highlighted and it's
got its own page on the website so this
means you can come and get source code
from anywhere here you can paste your
own source code you can paste whatever
you want here and you will be able to
save it and share with people and
whatever so this is what I'm going to do
to give our source code that's in a
single file from Taiwan so the website
is PA ste calm so peace calm and you can
use that website yourself to store your
own source code or you can use it just
to get mine so thanks for watching and
I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>