<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Better Facebook Bot - Part 1 - Setup | Coder Coacher - Coaching Coders</title><meta content="Better Facebook Bot - Part 1 - Setup - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Better Facebook Bot - Part 1 - Setup</b></h2><h5 class="post__date">2017-04-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qTrtgEib2S0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're gonna be learning
how to create our own messenger bar this
is a topic that's already been covered
on how code but last time we did it our
bot was really basic and in this video
we're gonna be learning how to use
natural language processing so that we
can do much more complicated queries
such as for example we could say how
many people live in a specific city and
we could ask that question lots of
different ways and our natural language
processing software will convert that
into a standardized response that our
bot can deal with so let's get started
so the first thing we have to do is we
have to create a Facebook page so you
can see here is the page I used in the
last spot video series so all you have
to do is create a simple Facebook page
then you want to go to Facebook
developers and you want to create a new
app there is the old app we created
we're gonna create a new one the old app
was called Bart and we're gonna create
one called
batter bar we're gonna create the app
and now we're ready to set things up so
the first thing we need to do is get a
server so what I did was I went to
digitalocean and I just created a server
I'm gonna log in to that server and then
I'm gonna put in the password so now we
want to install PHP so to do that we
want to say apt install PHP 7.0 - CLI
we're gonna click enter I've already
done it so it's already installed but
just install that so if we use this
command PHP - s for server put in the
name of our server and then we give it a
port which the default port for HTTP is
port 80 and we click enter on that the
web server will start running and now
you can see the web server is running I
know what we want to do is set up our
web hooks so to set up a web hook we
just want to click on that we want to
type in the address of our bar which has
to be running over here CTB ass so we
say HTTP but Francis McNamee dot-com for
verify token I'll just put in something
like my name it doesn't matter and I'm
gonna click all this subscription fields
because at the minute we're gonna assume
we don't know which permissions we want
so we're just gonna automatically click
on them all and then what we need to do
is we need to install SSL onto our
server so to do that what I'm going to
do is I'm gonna install nginx because
the development PHP server doesn't
actually support HTTPS so we want to
install nginx and then we want to proxy
requests from Angie next to our PHP
server
so now that nginx is installed i'm going
to go to our bar top francis McNamee
com2 man refresh and now you can see it
says welcome to nginx
then what I'm going to do is I'm going
to proxy requests from
engine ax to our PHP development server
so to do that what I'm gonna do is I'm
gonna say Nano /et c / nginx slash sites
available slash defaults open that up
I'm just going to delete this whole file
and I'm just gonna paste in this code
here so what this code is is it's just a
sample nginx configuration file that
takes all requests on port 80 and it
sends a 301 request which redirects them
to port 443 which is the default port
for SSL then we said the server name is
our website which is bought Francis
McNamee comm we turn ask the cell on we
tell it where the certificate is we tell
it some other stuff about what to do
when it receives a request and then down
here is where we put the location this
is where the actual processing happens
and you don't need to know how this
works because it's not relevant to the
tutorial series it's just one of the
things we have to do to be able to use
our PHP development server and when
we're creating the bar so what we need
to do is get Nasus our certificate so
I'm going to save that and I'm going to
install that's encrypt so I'm gonna say
apt install let's encrypt and I've
already installed it so there we go it's
ready to go I know what I want to do is
stop nginx so to do that I say service
and generics stop because it's running
on port 80 and by doing that we won't be
able to use that's encrypt so now we
want to type in let's encrypt and then
we type insert only to generate our
certificate we're going to put in the
domain name we want to use which can be
bought up Francis McNamee comm if it's
your first time opening up let's encrypt
you're gonna have to agree to their
terms and you're gonna have to put in an
email address in case anything goes
wrong you need to get the key again but
what we're gonna do is hit enter when we
put in the domain name and our
certificate has just been created so I'm
going to go to this folder look at the
files go inside that folder and now you
can see we have our certificate and we
have a private key so I'm gonna say a
copy cert PE m2 / e TC / SS l /
certificate dot PE M run app now I'm
gonna say a CP Drive k2 e GC / SSL
/ private K dot PE m and that should be
that so now if I go to nginx
and scroll down you can see we've just
put the certificate and the private key
in the folder that we told nginx to lock
in so now what I'm going to do is run
engine acts again so I'm gonna say a
service nginx
start so now back in the home directory
what I'm going to do is type
PHP - capital s to start the server then
I'm going to type in localhost and I'm
gonna put in port 8080 because that's
where nginx is proxying - now I'm going
to click enter that is the server
running and now I'm gonna go visit the
page and now you can see we're running
over HTTP we have the lock icon and we
have the default page and the PHP
development web server Facebook will
work so now if I click verify we're
still gonna get an error but if I brief
but you can see the arrows different
it's because I'm we're getting this
error because we're missing the
intermediate certificates because
Facebook can't guarantee that our
certificate is valid because we're
missing the intermediate certificate so
that's really easy to fix so to fix that
all we have to do is say copy full chain
p.m. because that's our certificate file
and it also has our intermediate
certificates stored in the chiyan file
so we're gonna copy that file to Sascha
EGC / SS l / certificate to p.m. we're
gonna press enter there and there we can
see it is run and we're gonna say
service nginx restart to reload the
certificates and then now if I just
start the PHP server at one more time
hit enter the server is running click
verify and if we hover the mouse over
you can see that the SSL error has
disappeared but we're getting in the
error because the default 404 not find
page is being displayed so what we're
gonna do is we're going to go to CD
slash var slash www we're gonna see that
we see we have one HTML folder and what
I'm gonna do is just type in RM - our
HTML just to remove that folder and then
we're gonna create a new folder called
bot Francis McNamee comm and we're gonna
use this to store our code and then
we're gonna create a file called index
dot PHP and it's gonna say hello world
now we run that server and we click
verify and see if we're gonna get one
more error but you can see the error now
is because the expected value doesn't
equal the number facebook wanted it to
say that's just because there's sand off
some code and we have to send it back to
them to verify that it's us so we can
fix that really easily you can see here
it is here they're signing it in a get
request and it says hope challenge and
here is the number that they wanted us
to return so what we have to do since
it's a get request is just open index
dot PHP create a PHP block and then we
want to say echo our get variable and we
want to access hub underscore challenge
and we want to save that and it's hub
dot challenge in the URL but in PHP we
want to put in hub underscore challenge
so if we run the server
and we click verify and see if this will
finally work that we can see it is just
disappeared and therefore it's working
and then now if i refresh you can see we
have nothing printed out but everything
is working as we would expect so next
what we're gonna do is we're going to go
to the bots Facebook page we're going to
click add a button and we're going to
click get in touch send a message and
we're gonna click on that button
this allows us an easy way to send
messages to the bots we click test
button now you can see here's how we
send messages and before this will work
what we have to do is just click select
a page and we want to click on to the
best spot ever page and by doing this
Facebook will send requests to our web
hook every time we send a message so
that's probably all we have time for in
this video in the next video we're going
to be learning how to respond to users
we're also gonna be learning how to use
the natural language processing software
to make more intelligent responses to
users but that's it for this video don't
forget to like comment favorite and
subscribe don't forget to follow us on
Facebook Twitter and rat it but that's
it for this video and I'll see you next
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>