<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own Search Engine - Part 5 - Search Query | Coder Coacher - Coaching Coders</title><meta content="Make your Own Search Engine - Part 5 - Search Query - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own Search Engine - Part 5 - Search Query</b></h2><h5 class="post__date">2016-08-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wqk9_aNQMA8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video what we're going to be
doing is adding a work clause to our
query which will mean that we can query
specific things under the database
depending on whatever the user puts in
the search box and that's what you want
to be able to do to create our search
engine we don't want to just return
every piece of information we have about
anything when somebody puts in a certain
query so the first thing I'm going to do
is empty our table and then what I'm
going to do is I'm going to import the
index table I already have with things
in it because it has a thousand websites
already crawled and before I do that I
just want to make note of something you
can see here your L hash we had
originally planned to create to be
unique so there you go it's just been
converted to being a unique field now
that would mean that the SQL Server
wouldn't allow me to insert to you our
hashes they're the CM the reason for
that was because in the prototype I
created before the series there was
problems with inserting duplicate URLs
and things like that but as it turns out
in the modified version we mean in the
videos we don't actually need it so we
don't really need your hash we can take
that out and change it to URLs so that
in our queries if you look here you can
see in our queries we are just updating
URLs so we're saying we're URL is equal
to your we don't actually need your hash
anymore so what I'm going to do is first
delete this table I'm going to click
drop to get rid of odd table that drops
the table and then we're gonna click
import and I'm going to import a table
that already has records in it so here I
have a table that already has lots of
records in it so I'm gonna click open
and I'm gonna upload that to PHP myadmin
then I'm gonna give a structure and I'm
gonna click browse you can see if I go
to structure again the difference is
that URL hash is 40 you can just change
that or you can get rid of URL how
should you want other than that the
table is exactly the same as our old
table but it has lots of websites
already in it it has pages and pages and
it's 49 pages of websites go to this
random page and you can see we have just
random websites that I've already
crawled
so now if I just refresh this you can
see we get a lot more returned to us
it's taking a little longer but there
you go we have a lot more returned
so what we're gonna do is go to search
that PHP and we're gonna say were title
is like and we're gonna use the MySQL
like operator and the way this works is
we're going to say like and we're gonna
pass it a string so I'm gonna use the
single quotes to pass it a string so if
I put in a % and I put an hour before it
this means that the my stroud will
return anything that starts with an A
and has any characters after it if I put
a % on either side of the a what it's
going to do is return anything where
there's any ladders either side of it
and there's an A in between so what
we're gonna do is we're gonna have two
percent signs and then we're going to
have our search query so it's going to
essentially look something like this so
let's run this for now and let's see
what we get and as you can see now we're
getting things that are like high code
where the title has the word high code
in it because that's what we search for
that's what search is equal to that's
what we're getting back it's a much
smaller query you can see the scroll
bars a lot smaller and the number of
results returned is also a lot smaller
so if I go back to our index page say I
put in something else set high - and a
hit enter here we have two results
returned because it has the word high or
two in it but if I start something like
how to code we get no results because
what's happening is our search query is
three separate words but what we're
doing is treating it as warm entire
sentence so what we need to do is split
up our search query so to do that we're
going to say search underscore a for
just s searching is equal to explode
we're going to explode on new light
we're gonna explode on spaces and then
we're gonna say sir we're gonna print
this out whoops print our start
we're gonna run this now you can see we
got three items in this rare so what we
need to do is we need to take all of
these items in your air and we need to
add them into our search query we're not
worrying about prepared statements in a
minute we're gonna get onto that later
so the first thing I'm gonna do is set
for H search a as term because we're
going to refer to each keyword as a term
and up here we're going to create a
variable called X and it's just going to
be incremented and we're gonna say X
plus plus to increment X by one every
time then what we're gonna do is we're
gonna say if X is equal to one
we'll do one thing otherwise we'll do
something else and this makes no sense
of the minute probably but it will make
a lot more sense and really soon so what
we're gonna do is we're gonna say delete
this and we're gonna say were construct
and this is a variable that we're going
to be creating in here so we're gonna
say construct is equal to an empty
string and we're gonna say if it's equal
to one we're going to say our construct
and we're gonna say dot equals we could
say equals as well but that'll make more
sense in a minute as well start equals
to append on to the string I'm gonna say
a construct is equal to title like title
like term so essentially what this means
is the first time this loop runs we're
going to be changing our query so at the
minute our query looks like this and at
the minute there's nothing so what we're
doing the first time the loop runs is
changing it to this
the first time it runs this is the query
is going to create the second time it
runs if I just copy this and we're gonna
change this to an or with a space and
that means the second time it runs it's
gonna look like this and we're gonna do
it one more time a third time it runs
it's gonna look like this so by the end
of it we'll have a current we'll have a
query that looks like this and our
construct will look like this so let's
just run this again so as you can see we
get a lot more results returned to us if
we just scroll all the way down we can
find too many results we have we have
215 results we can make our query more
specific or weak by saying and we
refresh and I make I know we get a much
more refined search result we're gonna
do is we're gonna change this to or
because that means we get a lot more
results and we have a lot more results
we can actually look at then so you can
see we scroll down here we get things
where the title has PHP in it no in PHP
no and PHP stuff like that so what we're
gonna do is we're going to check the
title the keywords on the description of
each result so with the way we do that
as we say we're title is like term or
title is like or descriptions phrase
there is like term or keywords or like
term then we're gonna say an and we're
just going to copy and paste this again
i'ma runnin again so you can see we got
a lot of results returned that's because
one useful thing is when you get a lot
of result returned is you can use PHP to
check all of the results and check which
is most relevant will not be doing that
mysteries that little sort of thing will
be doing in the more advanced search
engine in the next series but as you can
see we get a lot more results returns so
we have a lot more we can use before we
go what I'm gonna do is just simply say
if results row kind is greater than 0
echo this otherwise act or something
else so we'll set echo 0 results fine I
will just put a new light our light
underneath that or else we'll set echo
results go kind fine I will just print
this out and see what we get so we're
actually printing it away at the bottom
if you can see there it says 0 results
found that's not quite right okay so
what we got is equal to greater than 0
so we'll set equal to 0 screw screw it
all the way down and you can see it says
54 results phone so we just want to
place this up at the top we just want to
place it above this and after the pre
tag refresh and you can see it has 54
results find and here we have all of our
results so that's it for this video
don't forget to Like comment favorite
and subscribe and the next video what
we'll be doing is using prepared
statements to make our queries a lot
more secure so thanks for watching and
I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>