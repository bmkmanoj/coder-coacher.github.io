<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 36 - Creating Like Buttons | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 36 - Creating Like Buttons - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 36 - Creating Like Buttons</b></h2><h5 class="post__date">2012-10-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dZls6likE4c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back to this video and today
we're going to be doing is as you
normally tell I have a page called like
a create like button dot PHP and a page
called like what framed up hates me
which is one we've been working on for
the past and a few videos so what we're
gonna be doing is we're gonna be
allowing people to create their own like
buttons and put them on the website
so let's a get started so what I've done
is I've just created a blank page and
I'm gonna navigate to annoy okay so I
have the page open here and what I'm
going to do is I'm just going to include
some other variables from the other page
I'm just to get us started so if we just
include all of these okay actually we
can just have include the header file so
let's go up here and let's just type in
include hang so I we type in in slash in
files / header thudding - PHP so now if
we go back to the page and we refresh to
make sure that it works yeah we got our
header and one thing I noticed what the
other one is if we type in and like you
out it doesn't exist we get this error
so what I'm gonna do is I'm just gonna
go down here and as you can see we have
this if statement open so what I'm gonna
do is you know actually um how or is it
here it is here this if statement if
'numrows equals equals one so I'm gonna
say is I'm just gonna else
I'm just gonna set die and then we can
just say that like button I don't know
we can just say it okay yeah we could
just say error because we don't want
I like button I want to actually be able
to read the message and we don't want
thing like button or anything masses so
if we say arrow we can keep it small
no it just says error but if we go back
to the other one we get the like button
so now we've just fixed that let's go
back to the main page we're gonna be
working on blow the Hat or file I'm just
gonna create a form form action it's
gonna be um create like button dot PHP
and the method is gonna be post so what
we're gonna do is we create a anything
so all we have to do is actually just
one input type of text the name is gonna
be like button URL the value is gonna be
empty for nine then we could just say
enter the URL of the page you wish to
like then we can just create an on click
event that says value dot I think it
says value equals then we can just make
it add T so that when we click on it the
value disappears
let's see so here we have it here we
click on it and it goes away and we
wanted to come back to me I don't click
on it or me or move away from it so what
we'll say on my soaked mm okay nevermind
that doesn't matter
so I'll just say I'll just say enter the
URL docked up top and we're gonna make
this a bit longer so sighs we'll just
set it to 30 and then let's see how much
room you annoy it's not let's put in 50
so that looks like fine and above the
form what we're going to do is I'm a
hatter
I can't y'all for a line break or
horizontal and I'm going to go across so
we're just gonna say is create your like
button and if we refresh now it says
create your like button and we have the
form under me so I will just say add to
the URL of your button let's say or just
say your page let's actually put brick
in between here and then we'll put the a
submit button beside it so input type
submit name equals 3 it the value equals
create I will just say create snow we
have a button that says create beside it
and my gap so what we're gonna do is
we're just gonna be a black people
type in the euro and then I can type in
it like that so we're gonna do now is
we're gonna get PHP now so what we're
gonna say is if inset and that's it post
and what we're gonna say is post like
open URL and we'll just say post
look at well the sign a a variable
called hmm like button URL so we'll just
say like that and then we can just echo
like button you know so now if we
refresh and we answer our page all right
anything into the box and we hit create
we got adequate underneath which means
it's working so that's good so the next
thing we're gonna do is run a credit
database so as you can tell you can see
it one of the days what the database is
gonna be called is like um it's gonna be
called like buttons and let's create
let's plant at the columns it's gonna
have so if we go down here and we just
say it's gonna have an ID obviously the
next column is gonna have is username
which isn't user he created the like
button they like button or no let's just
say page URL and yeah we also need am
UID of the like button so it's five you
know there's five fields so let's add
five and as I said the first one it's
gonna be ID
second one it's gonna be username third
one is gonna be page URL the fourth one
is gonna be date added I'm a fifth one
it's gonna be UID so that's obviously
the IDS gonna be an integer the username
it's gonna be a VAR cha page or L has to
have our char as well
well know we could set text so that we
can accommodate for a long URL the data
there's gonna be dead on the UID it's
gonna be varchar' because it's gonna be
an alphanumeric string so it's 32
characters long because what it is it's
gonna be a unique number that we encrypt
with md5 I'm not isolated two characters
long and the md5 encryption is are 32
character unique string and the page URL
can be taxed so we don't need to do
anything on the username I'll say just
32 as well the next thing we have to do
is set the index set the index to
primary and auto increment to yes or
just take the box so let's find it and
click Save so as you can see we have a
new table called like buttons and we
click structure and we can see what I
just answered there so what will do is
will not actually add anything to it in
a minute what we'll say these so okay
now I've set that we're gonna actually
say user name equals user which is the
variable we declared in the header file
date equals get our using the gate
function what we're just going to say is
year month okay now we could just
actually change it and said the wrong
year but it doesn't matter
as well we've got there we've got user
name the ID we don't need to worry about
UI day that's the next thing we're going
to say is UI d equals round which is the
PHP round function and we're just gonna
say not to nine so we're just gonna echo
UID and we should get a random number
okay so we got one yeah we do get a
random number but it's not a random it's
not I'm a specific length we keep
getting one why's that so what we're
gonna do is we're just gonna change this
from zero to one and we're gonna change
it to nine nine nine nine nine
I will actually change it from one to
some random number we just want it to be
a really really long number so that we
won't get it more than once
so now if we type in anything we hit
enter we get a negative numbers see oops
so let's just put in any number C does I
fix it so there's a random number
I mean you're getting unique numbers
each time which means it's a good thing
so what I'll do is just send nine nine
nine nine
I'll just hold it done so that we'll
never get the same number more than once
so now we've done that what we're gonna
do is we're gonna say you ID equals md5
UID which is this variable here so we're
reassigning the value of this we're
reassigning the value of UID to the md5
version of whatever the UID variable
used to be so if we refresh we should
get an md5 string noise and md5 strings
are 32 characters long and here is our
random string for each UID so now we've
done that we don't need to act without
anymore we don't work and we're just
gonna say um Oh like button URL
I don't know submit equals post oh wait
we don't even need to do that we've
gotten up there already so what we're
gonna do is we're gonna do some that
checks so we're just gonna say rock
scene it is we'll just copy some of the
things for me here so we can make our
our data more secure so that's what
we're gonna do now and when you say so
what we're gonna say is we're create a
variable actually called like button
you know I'll I'll just say - and it's
gonna equal STR STR which is the s and
the function in PHP the first thing
we're gonna give it is like button URL
and the second thing we're gonna give it
is what we wanted to look for I want to
check for the existence of HTTP HTTP so
what this does is this function just
check for the existence of this inside
of this so obviously since we strip tags
may not work but I'm not sure so I'll
say is if like button URL me see - then
that means if it's true so then we just
act oh good
so that's right now before you go here
when you're fresh so we don't type
anything in Whitney Houston we don't
type the HTTP colon slash class prefix
we don't get anything and we do so if we
type in the prefix and we got create we
get good so that means it's working
then then else we're just gonna say copy
that and then just paste it in Mike
button URL equals and we're just gonna
append that he's GDP on
so this basically just says if it's on
good if it's not a panda Don I'm can
check that by echoing like button URL
let's try a nine so we type in something
that doesn't exist and we hit answer we
get being huge GDP prefix at the start
we type in the HTTP prefix and we get
good so now we've done that in here all
we have to do is say insert thought we
could just say create button equals
mysql query insert into like buttons
values ID ID else user name page URL
I think it's death but I'm not sure can
be dated get out of you get added and I
was the last one you ID
so then what okay actually we don't even
need to do that so we'll just change
these you see get outed
it's obviously get added and then you ID
you lie to you
so let's see is that right and obviously
we need to declare these variables above
it so let's go over here and just change
up to depth and then that's refresh the
page and then see does it work hmm mine
23 we have a syntax error okay I know
what it is maybe not so let's just copy
this
let's just undo it actually before we
got the syntax error okay I don't what
the syntax error goes it's because I
didn't close this off so let's try it
now let me see yeah that's what the
reason was so let's try it now we have
the other form which I bet anything we
got create and get it a code to us we
type in a URL where the HTTP in it like
Google we hit create and we get we don't
get a code with anything because we
never told it to but if we click browse
we don't have any rows you see why that
is okay so I know the problem it's
because that we need to include these
brackets around the variables that's
what the problem was
didn't include these because I forgot
your hard to let's try it now I'm going
to actually put a success message
underneath so we know if it goes in or
not echo are we yeah go button
added so let's try a knife we click
create let me say it says button added
which is good we click browse I know we
have a row in our database so okay they
did added problem
that's just because I change this so
let's just put it back it's just because
it's a different format to the way PHP
Matt my admins working so let's try
let's click create it says but nodded we
go to button likes it I it gets added we
have the date on the UID so we'll do is
copy this and instead of activating it
will just paste it in there so that
should be it working on the create like
button script should work and what we're
gonna do is instead of a queen button
added we're just gonna echo we can't
just echo the code like this well okay
we'll do that after so what's the iframe
each raft equals HTTP so after that well
you saying HTTP but for them and I'm
just gonna say you put the address of
your website women I'll just write
localhost forward slash and then just a
directory and this is like but free M
PHP oh and you ID equals UID what we're
gonna do is also a close the iframe you
and I mean you can start it in things if
you want but I'm just gonna put it like
this because this isn't a real social
network for me so it doesn't matter if I
do things like this so what we'll do is
I'll just say order 0 pixels
and I know able to do that separately
Heights is gonna be Auto which auto
that's actually wrong
so I let's just before we do that we
can't use these in an aqua stamen
because they'll just get aqua to the
pages source code and we won't actually
see it we'll just see an iframe as you
will see no no we should just get error
so we've got Kree it says but not it
oh yeah so that's because it's running
wrong one
let's try this one we just get out good
with nothing oh yeah here it is the
iframe you're the frame source and
because the pH doesn't exist so what I'm
gonna do is to fix that we have to say
and lt which is for the left arrow I
think and RT for the right one no it's
not out LT is that last line I know and
it's not our Tait GT for greater than so
if we paste that in there and we try at
9 we get a code within here which is
what we want so what we'll do is say div
style equals wayde's 400 pixels height
and let's say 300 pixels 250 actually
a border one pixel solid the color
doesn't matter so I'll just say gray so
that should contain the code I'm hoping
to actually we'll put a check in
well actually copy this so I will just
let's say copy this from the index dot
PHP page and we'll just check whether
I'll just put the sad check in for it's
just the check if the like button
already exists so there are if the URL
so I like button already exists so then
we'll just paste it in here like button
already exists I will just say select
from like buttons where page URL equals
no um it's that's wrong select page URL
from like buttons or page URL equals
like button URL what we'll say is I'll
just say B check for a button Jack and
then we'll just paste it in here
obviously I'll change that to number it
was check so what it says is if numrows
check equals zero then two and insert it
or else or then we'll run this F
statement and then after this if
statement or to say else
uh we see I think we need to close it
off as well and then we just before that
we just a cou that this is already in
our database so let's try it so if we go
to Google let me create okay so let's
anymore so what we'll do is we'll just
copy this let's paste it in here to see
okay so that one works let's go back
piss it on here and let me see so we'll
just say if and I'm rows is equal to
much greater than or equal to one then
that we don't want to run
so I'll just already exist or else let
me see else we'll just create the like
button
no I I'll swing go up here cut that it's
down here instead
and then say house so no that should
work so let's try a knife it's what we
have to do is just put that in there
when I extraordin refresh it type in
google says all it exists typing
something doesn't exist and we get it so
that's it for this tutorial hope you
enjoyed it don't forget to Like
subscribe and favorite and the next part
will be finishing off first from scratch
so thanks again and see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>