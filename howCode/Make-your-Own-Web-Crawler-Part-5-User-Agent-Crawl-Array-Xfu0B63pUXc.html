<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own Web Crawler - Part 5 - User Agent &amp; Crawl Array | Coder Coacher - Coaching Coders</title><meta content="Make your Own Web Crawler - Part 5 - User Agent &amp; Crawl Array - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own Web Crawler - Part 5 - User Agent &amp; Crawl Array</b></h2><h5 class="post__date">2016-07-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Xfu0B63pUXc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what we're at now is we've gone to
the webpage that we're starting out and
we've got all the links off the page
we've treated them properly so we can
all follow them no matter what we're
kind of like that we're presented with
so now that we have all these links we
need to add them to an array of links
that need to be crawled so we're going
to come up to the top and we're going to
create an array called
already crawled and it's going to be
equal to an array to see this in the
function we need to create a global
variable I know we have access to
already crawled in our function and down
here at the bottom we're going to print
out already crawled so that we can see
the links in the array so we're going to
do now is insert the links into the
array so to make sure we don't get
duplicate links we're going to use the
inner air function in PHP which just
basically returns true or false if an
item is find and then around that we
supply it so we'll set if in a rare the
item we're going to check is the link
itself which is L and the array we're
going to check is called already crawled
but what we want to do is we don't want
to check if it is in that array we want
to check if it's not because if it's not
in the array then we can add it if it is
near random we're just gonna forget
about it and not put it in so I'm just
going to move this echo above here into
this if statement what we're gonna do is
we're gonna say if it's not in the
already crawled away we're gonna say
already crawled and we're going to
insert a new item and in PHP we do that
by adding two square brackets and we
just said is equal to L so we're just
saying that the value of L is equal to a
blank item in that array so if we just
run this again we shouldn't see any
difference okay yeah we do see a
difference the reason is we see the M
the AK or the original a cool but we
also see the array that we're printing
out at the bottom which is our already
crawled array which has eight links
and it acts as nine links because it
starts from zero so everything's in the
array and now we actually need to crawl
the links that are in the array so each
time a link is added to the array we're
going to run another function called
details we're gonna pass the gap details
l and we're going to echo that out
instead of Al so that's where we can
equate the title of the link or the
description of key words or something
like that instead so up here what we
need to do is we need to create another
function called cat details and we're
gonna call it URL so before we go any
further with that what we're gonna do is
we're actually going to just comment
that out I call this back in and what
we're gonna do is we're gonna change the
user agent of our bot because if you
remember in the first part I talked
about how Google has their own user
agents for that whenever they visit your
website your logs will tell you that
it's Google visited it it wasn't an
actual person and we're gonna do that as
well for our blog so we have a file get
contents function up here so we need to
change the user agent that we use to
access files on it to change your user
agent what we need to do is massive
light with the headers that gets sent
with each request and the file get
contents function so just ignore this
sort of it it's not too much like BOTS
it just allows us to change our user
agent so it's not that important for the
actual series but it's just something
that might be useful to know so define a
contacts function it usually takes one
parameter but we're gonna give it three
we're gonna give it false as the first
one just ignore that one but the next
one is important it is called a context
and we're going to call that context and
we're gonna come up here now we're going
to create the context we're gonna say
context is equal to screen contacts
create which is just a weird function
that we use in PHP to mess about with
the headers for the file contents
function we pass it another variable
called options or we can just pass it
under the red of the options we want to
master by with but it's easier just to
create them in separate variables so
here we create our options and this is
an array and these are the headers that
we want to master by with these are the
custom headers we want to send so when
we're creating a context the first thing
we say is HTTP because that's the
protocol we want to use then
we do is we create another array I'm
with him that array we create an item
called method and we call that method
get' whoops we'll use double quotes
because I partly sometimes it doesn't
like using single quotes in there then
what we're gonna say is we're gonna
actually create our custom headers and I
probably should have explained this
earlier the user-agent is passed in the
header of the file so this is how we can
actually see the headers that are sent
and this might make make more sense
because headers is just terminology that
might be confusing so what you can do is
you can right-click on any webpage you
can click inspect and you can go to
network the first time you do it
obviously it'll say recording that ruk
activity and you won't actually see
anything so what you have to do is
refresh your page and here is the page I
just loaded if I click on this you can
see the first thing we can see is
patters the response headers are what
are the headers that the server sent
back to us the request headers are the
headers that were sent whenever we made
the request to divert the page and these
were the headers we can master by with
to change our user agent if I scroll
down you can actually see this is the
user agent that Google Chrome sent to
the web server why'd it request to the
page so that's a war change and you know
so if we go back here we can just create
another item called headers and here we
can pass in our custom headers I'm how
do we want to pass in is called user
agent as you can see here in chrome user
agent with a code on meta space and we
want to call a user agent high bot we
could give it a version number or
something like that so we could say in
on point one and then we just want to
give it a new line so if you run this
again you can see we got exactly the
same thing you can okay so that's our
user agent changed and now we are ready
to move on to the next part so we're
going to do that in the next video
thanks for watching don't forget to Like
comment favorite subscribe and I'll see
you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>