<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 13 - Posting | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 13 - Posting - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 13 - Posting</b></h2><h5 class="post__date">2017-01-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cdH6VgcFZxs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
allowing users to create posts so before
we can do that we need to create a new
table in our database so here I am in
the database and I'm going to create a
new table and it's going to be called
posts every post is going to have a body
and that is going to be a varchar' and
we're going to limit it to 160
characters just like twitter limit
tweets 240 we're not going to let it be
no and we're going to say I posted at
and it's going to be a dead time we
don't want to be no later we're going to
have a user underscore ID that's going
to be an integer and it's not going to
be no and it's going to be unsigned
we're going to have a number of likes
and that's going to be an integer
again I'm signed and it's not going to
be no and that should be everything we
need for this part we're also going to
create a relationship between the user
ID and the posts table and the user ID
in the users table and we're going to do
that by going to relations clicking odd
we're not going to give it a name we're
going to link the user ID column in the
table posts to the table users on the ID
column and we're going to click on
select row table created another need to
create a form on the profile page so
back on the profile page we're going to
go down and we're going to create a form
you
and we're going to go see what this
looks like so it doesn't look
particularly wonderful but we're not
worried about the design in this video
we only worried about the actual back
end page fee code what we want to do is
grab with user types and send it to our
database so what we'll do in here is
create an if statement
and we will check if the post button has
been clicked and if it's been clicked
we're going to create some values
so now we have the published body and we
have the user ID we
going to insert them into the database
you
so what this query does is it creates a
new post in the posts table against the
post party and the user ID and the no
function gets the current date and time
using SQL and zero is the default number
of likes so we're not going to do any
validation of the minute we're just
going to test if this works and of
course we need to use back slashes here
so we're just going to sign a quick post
we're going to click post we get no
output if we go to our database you can
see we have one post from the user with
the idea of one because that's who I'm
logged in as and the post has outer
world and I has 0 likes and it tells us
the date and time that always posted up
so we haven't done any validation on our
post yet and we don't need to worry
about SQL injection but we want to check
it's the right length
so here what we're doing is we're
checking
body length is greater than 160 and
we're also checking if it's nice someone
and a vessel said a incorrect length and
that should be all we need to check
because before we output any tax from
the database we're going to use a
special function called HTML special
chars and we're going to use that before
we open any data so we'll just test this
we'll try to submit to form and leave
the tax box empty incisors in cracked
length and then if I click post no it
also says in crack length so now that
we've been able to post the data into
the database we need to be able to
display it so do another profile page
below the form what we're going to do is
create a div and we'll call it posts and
then in here what we'll do is this a PHP
echo posts and that'll aykroyd all of
our posts and then out there what we
want to do is create our posts with
their DB posts is equal to a DB query
and we want to use user ad because user
ID is the ID of the user whose profile
page ROM so DB post is equal to that DB
posts will then be equal to an array and
then what we'll say is loop through all
of this we'll save for each DB posts as
P times there print underscore R P
because P itself will also be an array
so now I will refresh so we have an
error in our code it says post obey is
in a column and it's called user ID so
there you can see there are other two
posts being printed out as you can see
they're also arrays so what we want to
do is print out the post body so we can
do that by saying echo P and we can
access the body column from the return
to rest they can see our two posts have
been printed out so what we want to do
is we want to get our posts variable
it's going to be an auntie string to
begin with and what we're going to do
each time is will append on the posts P
body run up and on a break tag at the
end of that and then what we want to do
is actually just a pan that on with a
dart equals if we refresh you can see
now we have our two posts being printed
out i want to pan on a horizontal line
just under the added up and now you can
see there are two posts if i post
something else and i could post you can
see there it shows up and what we want
to do is when we select our posts from
the database we want to say order by ID
de se for descending so we get the
newest posts first and there you can see
our newest post was first so before we
finish this video what we want to do is
tidy up a bug mostly follower module and
its word intermittently allows you to
follow people and then other times it'll
say you're following them when you're
not and the reason for that is these
queries this query isn't specific enough
because or work section of the query
only checks where user ID equals user ID
so what we want to do is copy this
section where we get the follower ID to
so it's more specific we'll just copy
that paste it up here
paste it down here as well
and we'll paste it up here as well and
that will be our follower bug finished
so that's it for this video don't forget
to Like comment favorite and subscribe
in the next video we'll be making it too
that you can only post on your own
profile page because it's a minute you
can post on anybody's profile page no
matter who you are we'll also be doing
extra things like letting you like posts
will also be letting you like a post so
that's if this video don't forget to
Like comment favorite and subscribe
don't forget to follow us on Facebook
Twitter and reddit I'll see you next
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>