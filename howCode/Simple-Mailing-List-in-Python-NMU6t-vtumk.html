<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Simple Mailing List in Python | Coder Coacher - Coaching Coders</title><meta content="Simple Mailing List in Python - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Simple Mailing List in Python</b></h2><h5 class="post__date">2018-04-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NMU6t-vtumk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in the last video we learned how to
send individual emails using Python and
Amazon's simple email service and if you
didn't watch that video you should
probably watch it before continuing with
this one so I'll create a card at the
top of the video to make it easy to find
it but once you've watched the other one
you'll understand about all of these
different functions here but today we're
gonna take that one step further and
we're gonna create a mailing list and
last time we sent a plane text email but
this time we're gonna learn how to send
a he HTML based email using a template
so here I have a file which is my
mailing list and I have 10 emails in it
and they're all the same and what I'm
going to do is I'm gonna hit enter now
and it's going to send 10 emails
so all of our emails have been sent so
let's have a look at them so here I am
in my inbox and you can see the email
was sent and if I scroll down you can
see all of the other emails that it sent
as well so here is the whole email
template all it is is a really simple
HTML page with a couple of style
elements one thing to note is that
emails don't normally take account of
the background color so to create this
gray background color that I created
what you have to do is create another
div which is this div called BG you put
that behind everything else and you make
it the full width and height of the
screen and that's how you set your
background color emails are also a bit
weird you can't use absolute positioning
so if I wanted to position an element in
a specific corner of the screen I could
use absolute positioning for that it's
like a right position absolutely but
emails ignore those so most emails make
use of tables so here is our table and
our email this is the table that
contains all of our content and it's
also how we Center elements so all this
is is a simple table with the borders
taken away and we have two rows one row
for the logo and one row for the content
and another thing to remember is emails
don't let you send pictures to send an
image you have to either encode it as
base64 or upload it to a remote server
and sand it so this email gets the high
code logo from the high code content
delivery network which is why you can
see this logo in the email so the
content is really simple we have these
two curly brackets on the word content
and that's our placeholder content for
the template you can see this is the
template itself on my local computer so
when we go into Python we replace the
word content with the text we want to
put in our email and that's what we do
here and the reason I created a class
called a WS sander is because we want to
sand a lot lots of emails we don't want
to just copy and paste all of these
lines over and over again so we had to
put the code to create the email and
send it in its own function called sand
and we don't want to have to reconnect
and re login to the Amazon server for
every single email we want to send so
what I did was created a class and that
lets us put these variables in the class
which means we only need to log in when
we create a new instance of the class so
if we scroll down here you can see we're
going through the email list and we're
just running this sand function over and
over and over what we do first is we
create our email list we use
pythons open function to load the lists
in and we read the lines in the list so
what this will do is this will take
every line in the file and create a
Python list that allows us to iterate
through that list and we can refer to
each email as the word email and then
it's really simple from there all we
have to do is use our class to send the
email so the to address is this one here
and the from address is no reply at our
code org so the sender HTML based email
you have to include the HTML and the
plain text in the email separately so
this line here lets us work with HTML
and this line here lets us work with
plain text so the first thing we do is
we set the mime type of the email to
multi-part because we have two parts we
have a tax part on an HTML part and our
email and then what we do is we set the
subject the from address and the to
address without setting these variables
most mail servers would ignore our
emails and treat them as spam next we
have the tax part of the email and to
save us having to type the CM text twice
we use the text variable to populate our
template so we have the text part up
here then we load in our template and
then what we do is we combine the two
parts of our emails so the HTML part and
the plain text part so we have part one
is our plain text part and part two is
the HTML in our email and then what we
do is we use our message and we attach
part one and then we attach part two and
I actually got this part of the code off
of a stack overflow answer so I'll
include that in a link in the
description of the video but then what
we do is we just run the sand mail
function and we convert our message to a
string and then finally we just output
to the console to say that the email was
sent successfully and that's really all
there is to it so that's it for this
video don't forget to Like comment
favorite and subscribe don't forget to
follow us on Facebook Twitter and reddit
and also don't forget to sign up to the
new haiku org but that's it for this
video I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>