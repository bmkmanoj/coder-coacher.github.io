<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own VM in Python: Part 4 - Execute Function | Coder Coacher - Coaching Coders</title><meta content="Make your Own VM in Python: Part 4 - Execute Function - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own VM in Python: Part 4 - Execute Function</b></h2><h5 class="post__date">2014-05-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CHu2rFDjIJ8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi and welcome to this video so today
we're going to be doing is we're gonna
be loading our program into the load
program function so let's get started so
the first thing we need to do is we need
to open up our our file so it's really
simple in Python we do the open up
function to open the file I'm just gonna
pass the parameter over the file so in
this case it's our V and I'm actually
gonna call it half shell to keep keeping
the windows so that's the way that's
what our finally that represents our
finally in the RV variable what we're
doing is we're passing it to the open
function so it knows what file to open
we're gonna call the open function f
that we can refer to it afterwards
basically what I mean by that is we can
say after I've closed my because you
have to close a file when you open it so
now we've opened the file close the file
and we want to do something in between
so I'm gonna say let's say F 2 just
first okay I will say lines actually
equals F dot read and then we're looking
at what I'm gonna do is going to print
lines and this is print out the contents
of the file so we need to provide it
with a file open so like yes I'm gonna
provide it with hello dot VM and we hit
enter and I didn't see it prints out the
contents of our file as you can see up
here so what I'm gonna do is I'm going
to get rid of that and what we're gonna
do is we're going to say so what we're
gonna do is want to replace new lines
with spaces so we're just gonna use the
replace function we're gonna say replace
new lines with spaces I'm gonna print
the lines again well as you can see
nothing will happen because we don't
have any new lines we don't have one one
line in our file it's wanting to do is
I'm just gonna put anything underneath
here and as you'll see it gets put on
the CM line because it Street I guess
the new line gets converted into a space
so then we're going to do is I'm gonna
split the file are the instructions and
by spaces so in a cell lines equals line
starts flip
and this is going to convert it into it
this is going to convert our string into
a list and each item the list is going
to be an instruction so now if I print
lines and I run this again as you can
see now it converts it into a list and
every single instruction is an our list
item this allows us to manipulate the I
mean execute the instructions a lot
easier so we're going to do is we're
going to delete that and that we're
gonna go down here and return lines so
now since we've returned that what we
can say is we can assign the load
program function to a variable so let's
just say let's call it L because that's
short for lines that we're going to say
l equals the return value of this
function which is the list containing
each of our instructions then we're
going to uncommon execute program and
we're going to pass it the L variable
because we've loaded the program and
we've split the instructions up into
different items so that we can actually
do something with them it's going to
copy the name of the function and I'm
gonna go down here and create it until I
put print in there now just to make sure
we don't have any errors and I'm going
to pass it the variable L this can be a
different very well actually but it
doesn't actually matter so what we
actually need to do is we need to I'll
leave it like that so we can run it
without any errors we need to actually
create our instructions so the first
instruction is going to be 0 0 so this
is going to be at these are called these
instructions are actually called
operators so what I'm going to say is up
on their score and program which is e o
P for short it's going to be equal to
the string 0 0 and it's important that
the strings and I'll tell you why later
so I'm going to do is going to P is good
on here I'm gonna paste and of
instructions so this is number two
well this is the sack of instruction but
it's number one actually and then what
I'm gonna say is an OP bush it's gonna
be a zero two and we'll do this for
every instruction and we've got two more
to do so we'll just do ABS attract all
this one five and this one six okay now
we can get rid of these and what we're
gonna do is we're going to start an
executor program it's not gonna be this
symbol I mean the actually one is gonna
be kind of complicated but hopefully it
won't be too bad so what we're gonna say
is well the active you program function
is basically it's a big while loop that
goes through every instruction and then
executed as it sees it so the way this
is going to work is we're gonna say so
what we are community is wanna create a
variable called loop we're gonna set
that equal to zero r21 then we're going
to do is want to create a while loop now
we're going to say while loop equals one
then we would actually get the program's
will say print hello so inside this
while look what we're gonna say is
instruction equals al and then we're
gonna pass it the parameter I on what I
is going to be equal to up here as 0 and
I is just an iterator variables so it's
just a variable it's gonna increase with
each instruction so what we're saying is
I equals 0 at the beginning so
instruction equals the first item in the
array then we're gonna do actually is
we're going to say get rid of print
hello we're gonna say if instruction
equals equals op and the program that
we're going to say I do and the program
which is just a function we're gonna run
and then we're gonna say Aleph and this
is basically all the virtual machine is
it's a big while loop with an Alice
condition in it I want to say as LF it
equals and the
we're gonna do end of instruction and
we'll actually get rid of that yeah
we're gonna say push here we've got a
set pop and then we've got print out and
so left so a set print ad and then we
finally got so okay and then we could
have announced the else could actually
am loop but the problem with that is if
the Alice hands the loop for example if
if it's none of these which means it's
not an instruction so server example it
was this number it would end the loop
that straight away so we'll leave it
like that
so what the end of program is going to
do is it's going to obviously and the
program so instead of that we don't need
to actually have a function for that we
just said loop equals zero and we
actually have inaudible and into our
program so we just add zero zero at the
end of it and it will and and our
program after that so end of instruction
we're going to create that function ok
we'll create that function now so we're
way above here I will say actual will go
way between here so we'll say do
underscore and instruction right you
have to create that as a function I will
say print UI and then we'll just do that
for each of these
finally we what so violently change
these inheritance this sub print off and
finally push so what we're gonna do now
is we're going to execute this so we're
gonna say run the program and oK we've
got a problem it says push forever the
reason it does is because we are
incrementing the I variable so we're
going to say just underneath this is I
plus equals 1 which means increment
increment I by 1 so we're going to
around this now and I should see it says
push and instruction print so here we
say push this one doesn't have a command
obviously because it's just a number and
this one says and of instruction this
one says print and this one says and of
instructor or and of program but it
doesn't have a function it just exits
the loop we could just say print and and
the program just to show you and I
should see it says push an obstruction
print and a program so that's it for
this video don't forget to Like comment
favorite and subscribe and I'll see you
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>