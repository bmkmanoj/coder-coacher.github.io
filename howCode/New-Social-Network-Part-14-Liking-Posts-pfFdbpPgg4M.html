<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 14 - Liking Posts | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 14 - Liking Posts - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 14 - Liking Posts</b></h2><h5 class="post__date">2017-01-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pfFdbpPgg4M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so that's part of this series we're
going to be making sure that you can
only post on your own profile and we're
going to be letting you like posts so
let's get started so to be able to limit
who can actually post on your page
whenever we like to use our post data we
need to double check that the user ID
who's posting the data is the user who
is logged in all we need to do is change
this variable user ID to logged in user
ID and then what we want to do is we
want to set if logged in user ID equals
the user ID we got from the page then we
will allow the user to post otherwise we
will say die
incorrect user so now what I'll do is
we'll try to post something I'll say
that and then I'll click post and it
worked my go to high codes page and I
type in hello unity answers incorrect
user so now that we can post tweets we
need to make sure that we contact HTML
in them because at the minute I could
say hello and I could put in full tags
so I click post and now you can see the
bold tags have just been I put it onto
the page and what we want to do is use a
special function in PHP before we put
any data from the database holds the
HTML special chars so what we're going
to do is say huge amout special chars
around our body and now if we try to
post something with HTML in it such as
something like that I'm a click post you
can see it's just what I put as you
would expect it's not actually running
on the page so what we're going to do
now is create the like button so we're
going to create another form we'll just
create a drawing here for simplicity
we'll just copy and paste this form and
we'll copy and paste one of these
buttons and then we'll just move this up
here so whatever we're putting a post we
want to I pop the like button beside it
we'll just do something like this
and we'll change the form action will
add
variable ammo say post ID equals and
then we will append on the post ID so no
what will do is will refresh will click
like I know you can see the address bar
has just changed and then what we'll do
up here when we're checking if the post
has been set what we're going to do is
we're going to set
if it's a cat post ad we could change
our method of our form to GAAP but I'm
going to keep it as post just because
we're standing data we're not actually
training retrieve data and what we do
once you have the post ID is we're going
to like the post
you
so here what we're doing is updating the
number of likes for the current post by
one then what we need to do is create
another database table to tell us what
user liked the post so what we need to
do is go to our database and create a
new table called posts underscore likes
and we don't actually need the ID field
because we could create a comp as a key
out of two fields but we're just going
to keep it for simplicity we're going to
create a post on the score ID and we're
going to create a user underscore ID
both of these will be unsigned both of
them won't be no I know both have
relations the post ID column in the post
likes table will reference the posts
table on our graph and see ID field of
that I'm gonna create another
relationship between the user ID field
and the users table and we will get the
ID field at our table so that's our post
likes table complete so what we want to
do is once a DB query
so here what we're doing first is
incrementing number
one and then we're inserting a value
into the post likes table to tell us
which user liked the post so let's just
ask this so what we'll do is refresh
we refresh the table our likes have
increased by one and now we have a new
rule in the post like stable the post ID
is one of the user ID is one and if I
try something else and we click like you
can see we have a new row in the post ID
table so what we want to do before we
insert a new row into post likes is we
want to do another query that says
you
so here what we're doing is we're just
checking as the user already liked the
post and if they have then we obviously
don't want them to do it again so we're
just going to put these queries in the
eff statement and we're going to negate
this so we'll say if the query fails in
other words you haven't already liked
the post then we'll let them like it
otherwise we can get them to unlock it
or we can just act like already likes so
let's test this we'll hit enter and I
just already like if i refresh you can
see the likes haven't increased so
that's it for this video don't forget to
Like comment favorite subscribe don't
forget to follow us on Facebook Twitter
and reddit so that's it for this video
and I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>