<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 41 - Autocomplete Search Box | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 41 - Autocomplete Search Box - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 41 - Autocomplete Search Box</b></h2><h5 class="post__date">2017-05-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CivEEdT_Jws" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in the last video we left off adding
this functionality to our API we were
able to query the API and it would
return a list of all of the relevant
posts from the database in the form of
JSON in this video what we're going to
be doing is we're going to be going to
the actual index page itself and
whenever somebody types into the search
box we're going to send a query to our
API that's going to send back some JSON
and we're going to extract important
information from the JSON and display it
on our home page so the first thing we
need to do is we need to design the box
it's going to appear underneath the
search box as we type so we have the
design here on bootstrap studio and what
I'm going to do is I'm going to drag in
a list group so those are a list group
and if I preview it you can see those in
this group there but you can see it
pushed that other way so we're going to
fix that so to fix that I'm going to
click on the list group I'm going to
drag this up so we can see the styles
click on left group and I'm going to say
at position absolute and I'm going to
give it a width of 100% so what I'm
going to do now is I'm going to export
that
so our design is just been exported and
here is our exported page in our text
editor so I'm going to scroll down and
here's our les scripts so I'm just going
to copy that I'm going to go back to our
index page our actual one that is stored
with our project I'm going to paste it
in here and I'm going to scroll down
again and I'm going to paste it in here
so if i refresh now you can see there's
our list group if I resize the window
you can see we still have our list group
because we pasted it in twice once for
the mobile version a month for the
desktop version so the next thing we
have to do is we need to run a function
every time someone types into that
search box so to do that I'm going to
target the search box I'm going to add
the S box class to our search box we're
going to scroll up and we're going to
add that same class to the mobile search
box as well now we're going to scroll
down to the bottom of the page and after
the documents are ready function runs
which means the page is ready to go
we're going to add a jQuery selector for
the sbox class and then we're going to
run the function called key up whatever
the user presses the key whenever they
lift their finger off the key this
function will run so if I just run a
function when that happens and inside
the function what we're going to do is
we're going to send an ajax request to
our api so you can see we already have
one here so we're just going to copy
this one please sit in here and instead
of going to FBI posts we're going to go
to FBI so our search question mark
search equals and here we're going to
pass in whatever the user typed into the
search box which in this case we do that
by saying this keywords to the selector
and then we say this dot Val so on
success we're going to run another
function otherwise we're going to set
error function and we're just going to
console dot log the our variable so on
success we're going to alert the
response and before we run this we just
want to change that to query because
that's the keyword we actually use
enough I type something in the letter
hit you can see we get all of our JSON
printed back because all of these posts
to the hitch and then if we just go back
to our API and we scroll down you can
see we're also printing out a pre tags
we're just going to delete that so back
on our index page we're going to say R
is equal to JSON the parse the our
variable because R at the moment is just
a string so by doing this we're
converting it into a JavaScript object
then we're going to do is loop through
all the objects that are returned we're
going to set for VAR i equals 0 i is
less than r dot length i plus plus and
then we're going to consult log R this
which is log lots of JavaScript object
and we're actually printing out our so
we just wanted to our eye to access an
individual object type in the data see
you can see now we get the JavaScript
object return we only want to access the
body element so we can just consulate
log or a body so we're almost done but
before we're finished what we have to do
is scroll up to our list group we want
to delete all of these if that's one and
we're going to give our desk ribbon a D
of autocomplete we're going to copy that
give the other list group an idea of
autocomplete and delete everything in it
the only reason we're keeping one is so
that we know the format of the less
group items we're going to cut starts go
all the way down to the bottom and what
we want to do in our loop is append
items enjoy let's group so to do that
what I'm going to do is I'm going to
target the list group with the hash tag
part of a complete selector and I'm
going to set dot HTML and the way we do
that is we just inside this function we
pass this function itself so we do
autocomplete dot HTML and then what we
do is we append on the rest of our
string so in this case it's going to be
the div that we want to pant in
just like this and we change the list
group item from let's group item one to
whatever we want in this case we're
going to set the body of our post and
before that'll work we actually change
this so instead of targeting the ID
attribute we're targeting the class
attribute because because ideas coming
applied to one object on the HTML page
so we screwed up we change it from id
equals autocomplete to just class
autocomplete scroll to the gamma just
replace the other one type in the letter
C now you can see all of our completed
suggestions come up but if I type in
again you can see they're not actually
disappearing so to fix that all we have
to do is scroll down to the bottom of
our page and the first time we run our
function we're just going to copy this
before we actually run the Ajax function
we're just going to paste it in here and
change it to empty so in other words
we're going to set the HTML which is the
inside content of the autocomplete
element to empty so if we refresh type
something I could say hello you can see
all of these list items of the word
hello and them fight iron worlds you can
see that it's anything with the word
hello world and then and if we wanted to
we could make that a link if we wanted
we could include more information we
could include who posted it we could
include the date that it was post
because looking at our JSON you can see
we have the username and the post that
are already included in the JSON so it's
already being sent to us we're just
ignoring it currently and you can see if
I drink the window and type something it
works as you expect we have these tiny
buttons in front of our list item and we
can fix that really easily we can just
right click on our list group over here
and in the autocomplete class what it
could do is it could just increase the
z-index to a thousand or hundred would
do or 100 or thousand any number that's
bigger than whatever is behind it and I
can see there just disappeared so before
we go we can just do that we can say
that index 100 scrolled up again said
indexed 100 that's of this video don't
forget to Like comment favorite and
subscribe don't forget to follow us on
Facebook Twitter and reddit if you have
any questions don't forget to email me
at francis at haiku org but that's it
for this video and I'll see you next
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>