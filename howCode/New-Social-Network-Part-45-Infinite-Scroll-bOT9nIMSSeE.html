<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 45 - Infinite Scroll | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 45 - Infinite Scroll - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 45 - Infinite Scroll</b></h2><h5 class="post__date">2017-07-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bOT9nIMSSeE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
learning how to add our inputted
scrolling to our social network series
because it's a minute you can see if I
scroll down we have all of our posts
printed out and some of them are photos
and we don't want to load data that we
don't need to so we're going to only
load data that the user can actually see
and we're going to do that using our
infinite scrolling system so let's get
started
so what we want to do is copy the code
from our infinite scrolling video so
we're just going to copy this and we're
going to paste it up above here so we
can get rid of this first Ajax request
so we can delete the document already
function and what we need is this window
dot scroll function and whenever we
scroll what we want to do is send our
Ajax request so I'm going to copy the
edge request from down here
in another function just to save
yourself from copying and pasting but
I'm just going to copy it and paste it
up here I'm going to go to this add
Jack's function and I'm just going to
delete this and replace it with our old
Ajax function and in this function what
we're going to do is put in our timer so
down here after we succeed in getting
our posts what we're going to do is
we're going to say start plus equals
five to increase our starters so we're
going to load five more posts next time
and then we're going to set timeout
we're going to run our function once
every 4,000 milliseconds and we're going
to set working equal to false now we
want to do scroll up to our Jack's
request and we want to go to API size
profile post user name equals user name
and then we're going to say and start
equals start I want out to scroll down
and do that for our initial Ajax request
on our documents already we're going to
put that in here well actually saying
start equals zero because down here we
don't have a start variable so the
minute this function won't always work
because our scroll to anchor function is
going to throw a type error sometimes
it's going to throw type error whenever
we don't have an anchor tag in the URL
so to fix that we just want to scroll
down and surround this in a try-catch
block
something like this so we're going to
open the API here scroll down to profile
posts and we just need to modify our
query so what we're going to do when we
order our posts by description we're
going to set limit five now if I run
this you can see here's our page now I
scroll down you can see it worked we
loaded more posts but we're loading the
Sampo still run over again at the moment
but if I keep scrolling after four
seconds I can scroll and load some more
but you can see now it's working and our
error is being printed out it's not
actually showing up in red so that means
it's not actually affecting the
execution of our page so that we fix
that we can go back to the API and after
we set the limit equal to five what we
can do is we can set start equals get
start which is our start variable that
we're passing into the API and then
we're going to set our offset and our
query to whatever the value of start is
so in this case it's just going to be
our start variable I'm not going to use
the prepared statement I'm going to cast
the start variable to an integer and
that means whatever values start house
will always be converted to an integer
and if start isn't a number it's going
to default to zero so we're not going to
have any masculine injection so now
we've done that we can see if it should
work but before we run it we're going to
go to profile and we're going to set the
default value of start equal to five
because the first in the page loads
we're going to run our edge axe request
and starts going to equal zero so what
we want to do whenever we scroll for the
first time is we want to start to be
equal to five so we save this and now if
i refresh you can see our scroll bars
are very big because we only have five
posts and if I scroll down there's one
two three four five posts and now you
can see we've loaded in the next set of
five posts scroll down to the bottom
we're going to have to wait for seconds
now if I scroll down now we're getting
the rest of our posts I'm going to keep
scrolling until we get all of our posts
and that should be all of our posts
loaded that's a really quick video
explaining how to add infinite scrolling
to our social network series if you want
you can just copy this and replicate it
onto the index page because we've only
done it on the profile page but that's
it for this video don't forget to Like
comment favorite and subscribe if you've
any question come for its email me at
Frances otaku org do forget to follow us
on Facebook Twitter and reddit but
that's it for this video I'll see you
next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>