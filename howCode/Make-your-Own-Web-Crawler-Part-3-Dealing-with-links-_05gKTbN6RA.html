<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own Web Crawler - Part 3 - Dealing with links | Coder Coacher - Coaching Coders</title><meta content="Make your Own Web Crawler - Part 3 - Dealing with links - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own Web Crawler - Part 3 - Dealing with links</b></h2><h5 class="post__date">2016-07-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_05gKTbN6RA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in the last part we left off being
able to extract the value of every link
on the web page of any web page that we
present to our crawler so the next thing
we need to do is we need to be able to
deal with these different types of
lengths the first one should be fine
because we can pass that directly to the
file get contents function but test our
PHP we can't pass to it because that
will mean PHP will start looking for
tests of PHP on our local machine and we
want to look for that on the remote
website that were actually crawling so
the way we do that is we're going to
just go back and we're going to create a
variable called L and we're gonna set it
equal to the value of every here F so
what we'll be doing essentially is doing
a lot of string comparisons to find out
whether or not we need to actually do
anything to the links that we've been
given so the first type of length we're
going to deal with is this one here with
a forward slash at the beginning so the
way we do that is we use PHP x' sub
string functions we're going to say if
substring of L which is the string we
want to check and we want to start on
the zeroth character which is the first
character which is this forward slash so
we'll say the zeroth character and we
want to only go one character up so we
want to put in a 1 next to that then
we're gonna say is equal to a forward
slash which is this one here so this
would only target this link here but
it'll also target this link here on this
link here because they also their first
character is also a forward slash so we
need to put in a separate rule that says
if the second character is also a
forward slash we want to treat that
differently again so then we say and
substring of L zero to two doesn't equal
two slashes then we know we're only
targeting links with one four slash to
begin with so we're going to start off
just by saying L is equal to L I'm done
here we're gonna say echo with a new
line after it so if I run this now we
will actually see no difference you can
see it looks exactly to see him but if I
was to say L and I was to append
something to the start of it so just hit
DP s and I run this again
you can see no this link has HTTPS
appended to the front of it and this
link has HTTPS appended to the front of
it because those are the only two links
that are being targeted currently so
what we want to do is we want to make
this into a full link so because if we
go up here and you can see this is a
link which is relative to the page we're
starting we started our crawling from so
this leg essentially looks like this so
the way we do this is we're gonna say
we're going to use the PHP parse URL
function to append the URL scheme which
is this bit here the HTTP colon forward
slash part onto the actual URL itself
we're using me partial function because
we could just automatically append HTTP
or HTTPS but not every website is
guaranteed to use one of the other some
websites use HTTP and some use HTTPS so
we need to be able to figure out whether
or not this website uses HTTP or HTTPS
so when it's a partial route we're gonna
pass it URL which is this variable here
and what this function returns is an
associative array so what an array is is
just a list of items that are indexed by
numbers but an associative array is a
list where the indexes are actual words
so if I use the index called scheme I
can target just this part of the URL
here so what we've done is we've got
that from the URL and we're going to use
the dot operator in PHP to append add
the two strings together so let's run
this again and you can see now we have
HTTP appended onto the front of each of
these links so what we need to do now is
app and on the colon and the forward
slash so let's just run this again
you'll see now we have a URL scheme
added to the front of the link the next
and probably more important thing we
have to get is the actual URL of the
website itself so to do that we just
want to run this again append that on
and we want to change this to post the
reason we're not just getting this
string we've been pas
and depending on a few characters or
deleting a couple of characters or
whatever is because it just makes things
so much more complicated it's so much
easier just to print the whole URL down
with Petrie's built in libraries to get
the URL scheme and to get the hosts and
we can even get this path if we want to
as well so let's run this again and you
can see that's exactly what we're
looking for it says HTTP colon for size
for size localhost / even more dot PHP
and here we have it up here again we've
added the localhost in and the property
correct URL scheme and we have the page
name at the end of it so that's it for
this video don't forget to Like comment
favorite and subscribe and I'll see you
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>