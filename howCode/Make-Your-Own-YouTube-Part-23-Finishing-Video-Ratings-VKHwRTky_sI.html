<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make Your Own YouTube Part 23 : Finishing Video Ratings | Coder Coacher - Coaching Coders</title><meta content="Make Your Own YouTube Part 23 : Finishing Video Ratings - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make Your Own YouTube Part 23 : Finishing Video Ratings</b></h2><h5 class="post__date">2013-08-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VKHwRTky_sI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I'm welcome to this video so as you
can see this video is actually in 720p
HD and the reason for that is because I
decided to get in your computer and this
computer has a bigger screen so there's
enough room for act to actually make
720p video you'll also notice that this
computer runs windows 8 so the interface
like the Magna bars and things look a
little bit different but they're almost
the same what you'll also notice is and
hopefully the recording is a bit
smoother but I'm not sure because I
can't see it yet obviously but hopefully
the recording a bit smoother and overall
the quality of the videos will be a bit
higher and I and so that's a fairly you
start of this video so let's get started
what we actually are we're actually
going to be doing in this video today so
i can see since with the largest screen
now or the well the larger screen and so
that means we have the 720p video we can
see here that the comments don't
actually line up properly so we need to
fix that in a video but we're actually
going to studio like and dislike buttons
today because that's what we came here
to do so as you can see i can click like
on as you can see the like button good
gets great out in the dislike button and
becomes clickable and i click on it and
the same thing happens again but the
problem is when we do this and we go
into our database and we hit browse ir
mean on the videos table it's like the
ratings table you can see now we have 4
ratings are all by me and they're all on
the same video so what we want to do is
we want to make it so that it just over
rights our existing reading so if we
come in if you come back into our code
here what we're going to do is we're
going to scroll down until we find okay
this code here so it says if typing was
like and then set and the equal to
disabled which means if we scroll down
even further we'll see here these two
variables D&amp;amp;D Tyrion what's that's how
we're set one of the like buttons are
add one of the buttons to a clickable or
not so what we're going to do is we're
going to make it so that instead of just
updating the ratings we're going to
overwrite the existing one so to do that
we need to come up here maybe bit
further down let's see so here's the
like code here so what we're going to do
is we're going to change these queries
instead of insert into when you set it
to update if all I like already exists
so what I want to do is I'm just going
to come up here and then the cut up here
we have if ty babe was like so um so
here what we're doing is we're checking
the MySQL num rows of this query and
what we're doing is checking and we're
going to get if what we're saying here
is if MySQL num rows for this query
doesn't equal 0 then we run the code in
within this if statement but what we
want to happen if if it is equal to 0 so
if the user hasn't liked it before then
what we want to do is we want to kiss
this code in here and then what we want
to do is since we've got that whoops
since we have that the code in here for
if the user hasn't placed our rating
before we also need a separate while a
slightly different piece of code for if
they have liked it or I'm not before so
what we're going to do is we're just
going to paste it in here on what we're
going to do is change insert into into a
different query so we're just going to
put it underneath for my level delete
the one above it so we want to say is
update ratings set whoops update ratings
set and type equal to like
we're video ID equals oops video ID on
username equals sorry whether some just
getting used to this keyboard is a lot
different to the other one so at what
we're saying is just off the rating set
typing what I like or video ID equals a
UID and using an equals user so it's
pretty similar to this query up here and
except instead of selecting for ratings
which stop dating it and what we'll do
is we can get rid of this and that's all
we need to do for the like button and
then we're going to do is we're going to
come in here and we're going to copy
that and paste it down below and we're
just going to change this to dislike so
what we need to do to check this
probably is we need to go back out to
our me in table and we're going to go
into ratings and one click empty and
click OK so what this does is just
Abdi's the table so now if we refresh
we're going to get probably an hour up
here but that's okay so if I click like
what's going to happen is it's going to
like it and then start into the database
so if we put ratings as you can see it's
inserted into the database and the
videos been liked but if i click on
dislike what should happen is it should
delete the light or I mean not elite the
like but it should update the database
table and set my previous reading equal
to dislike as it just did as you can see
the bar is completely red there's no
green on it if it didn't work what
happened is the bar would be a half red
half green and as you can see now the
type is set to dislike then if I click
like again just to check the like button
because it's going to run a separate
piece of code this time as you can see
the same thing happens again it just
updates the database and sets the rating
equal to like instead of a dislike so
our like system or our rating system
even is almost finished but we are as
you'll notice if we empty this again
we get an error up here so division by
zero in whatever so online 100 yet we
need to go down to line 108 here and it
says division by zero so what we want to
do is we just want to say I want to copy
this let's see um okay so total dom is
what's being divided eyes zero so what
we want to do is we just want to set we
want to set this code so that either
we're going to decide not to make a run
or we're going to set it so that and we
give total number value so what I'm
going to do is gonna just go up here so
it we're going to do is we're just going
to say it down here we're just going to
whoops come down here and we're just
going to paste it in here I mean what's
total number we're going to set that
equal to 1 so now if we go refresh what
should happen is that arrow should go
away okay so it hasn't gone away let's
all look so at what actually might be
easier as we just say here whoops create
an if statement so it's really simple
actually so we just said if num of likes
and or which in PHP you could use that
or we could just do the the square
brackets so like this that means over as
well what we're going to say is or mom
of dislikes equals actually no we don't
want to say i want to set
that's how you sound and peach pieces to
on signs if number of likes on number of
dislikes and equals equals zero and then
we want to do is we just want to say we
just hang on laughing or else run this
block of code here so now which inhabit
is that a division should take place if
there is no likes or dislikes ok not ok
so what I might try is change the if
statement of a bit so we'll create a new
variable up here and just say total num
underscore DB equals num of likes plus
num of dislikes and then just say copy
this I'm pissed it in there so what
we're saying is if the total number of
likes and dislikes is equal to zero
which means if the video has no likes or
dislikes we're going to echo nothing so
just do nothing really or else we're
going to run this code and we come to
our page again I may click refresh as
you can see that the error has gone away
and if i click on like what will happen
is it like the video on my behalf and I
can't like it again but I can dislike it
again or or just just like a once I mean
and it will overwrite my like and change
it to a dislike and if I want to can do
the same thing in Game four likes so
that's it for this video don't forget to
Like comment favorite and subscribe and
also don't forget to tell me just in
case I forgot to mention to start about
the font size because since the videos
are in 720p 9 i'm not sure exactly the
font size to use I think this one's okay
but if you need me to change the font
size just let me know in the comment
section down below apart from that
thanks for watching um I'll see you next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>