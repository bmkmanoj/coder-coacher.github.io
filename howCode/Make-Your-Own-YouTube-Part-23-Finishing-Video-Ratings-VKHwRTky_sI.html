<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make Your Own YouTube Part 23 : Finishing Video Ratings | Coder Coacher - Coaching Coders</title><meta content="Make Your Own YouTube Part 23 : Finishing Video Ratings - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make Your Own YouTube Part 23 : Finishing Video Ratings</b></h2><h5 class="post__date">2013-08-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VKHwRTky_sI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I'm welcome to this video so as you
can see this video is actually in 720p
HD and the reason for that is because I
decided to get in your computer and this
computer has a bigger screen so there's
enough room to actually make 720p video
you'll also notice that this computer
runs Windows 8 so the interface like the
manga bars and things look a little bit
different but they're almost the same
what you'll also notice is and hopefully
the recording is a bit smoother but I'm
not sure because I can't see it yet
obviously but hopefully the recording a
bit smoother and overall the quality of
the videos will be a bit higher and I so
that's the forelli you started this
video so let's get started in what we
actually are we're actually gonna be
doing in this video today so I can see
since we've the largest screen now or
the well the larger screen in so that
means we have the 720p video we can see
here that the comments don't actually
line up properly so we need to fix that
in a video but we're actually gonna do
do like and dislike buttons today
because that's what we came ready to do
so as you can see I can click like um as
you can see the like button good gets
greyed out in the dislike button and
becomes clickable and I click on it and
the same thing happens again but the
problem is when we do this and we go
into our database and we hit browse by
our mean on the videos table it's like
the ratings table you can see now we
have four ratings are all by me and
they're all on the same video so what we
want to do is we want to make it so that
it just overwrites our existing reading
so if we come in if you come back into
our code here what we're gonna do is
we're gonna scroll down until we find ok
this code here so it says if typing was
like then set the equal to disabled
which means if we scroll down even
further we'll see here these two
variables T and DT and that's how we set
one of the like buttons or
and one of the buttons to a clickable or
not so what we're gonna do is we're
gonna make it so that instead of just
updating the ratings we're gonna
overwrite the existing one so to do that
we need to come up here maybe a bit
further down let's see so here's the
like code here so what we're gonna do is
we're gonna change these queries instead
of insert into when you set it to update
if all I like already exists so I'm
gonna do is I'm just gonna come up here
and then the cut top here we have if ty
big was like so so here what we're doing
is were checking the MySQL num rows of
this query and what we're doing is
checking we're gonna get if what we're
saying here is if MySQL num rows for
this query doesn't equal zero then we
run the code in within this if statement
well what we want to happen if if it is
equal to zero so if the user hasn't
liked it before then what we want to do
is we want to kiss this code in here and
then what we want to do is since we've
got that whoops
since we have that the code in here for
if the user hasn't placed our rating
before we also need a separate while a
slightly different piece of code for if
they have liked it or not before so what
we're gonna do is we're just going to
paste it in here and what we're gonna do
is change insert into into a different
query so we're just gonna put it
underneath remind then we'll delete the
one above it so what I want to say is
update ratings set update ratings
set type equal to like
we're video ID equals oops video ID
um username equals sorry with us I'm
just getting used to this keyboard it's
a lot different to the other one so what
we're saying is just off the a rating
set typing what I like or video ID
equals video ID and username equals user
so it's pretty similar to this query up
here except instead of selecting for
ratings we're just updating it and what
we'll do is we can get rid of this and
that's all we need to do for the like
button and then we're gonna do is we're
gonna come in here and we're going to
copy that and paste it down below and
we're just gonna change this to dislike
so what we need to do to check this
properly is we need to go back out to
our me in table and we're gonna go into
ratings and we're click empty and okay
so what this does is just Abdi's the
tables now if we refresh we're gonna get
probably an hour up here but that's okay
it's not like like like what's gonna
happen is it's going to like it and then
start into the database so for good
ratings as you can see it's inserted
into the database and the videos been
liked but if I click on dislike what
should happen is it should delete the
light or I mean not too late to like but
it should update the database table and
set like a previous rating equal to
dislike as it just did as you can see
the bar is completely red there's no
green on it and if it didn't work what
would happen is the bar would be a half
red half green and as you can see now
the type is set to dislike then if I
click like again just to check the like
button because it's gonna run a separate
piece of code this time I can see the
same thing happens again it just updates
the database and sets the rating equal
to like instead of a dislike so our like
system or our rating system even is
almost finished but we are as you'll
notice if we empty this again
we get an hour up here so division by
zero and whatever so online 100 and yet
we need to go down to line 108 here and
it says division by zero so what we want
to do is we just want to say I want to
copy this let's see um
okay so total number is what's being
divided by zero so what we want to do is
we just want to set we want to set this
code so that either we're gonna decide
not to make it run or we're going to set
it so that now we give total number
value so what I'm gonna do is gonna just
go up here so what we're gonna do is
we're just going to say down here we're
just going to whoops come down here and
we're just going to pissed it in here I
mean what's totally numb we're gonna set
that equal to one so now if we go
refresh what should happen is that error
should go away okay so it hasn't gone
away
let's look so what actually might be
easier as we just say here oops
create an if statement so it's really
simple actually so we just said if num
of likes or which in PHP you could use
that or we could just do the square
brackets so like this that means or as
well and what we're gonna say is or of
dislikes equals actually no we don't
want to say we're gonna say
that's how you sound and page psst on
signs if number of likes on number of
dislikes equals equals zero then we want
to do is we just want to say we just say
echo nothing or else run this block of
code here so not which inhabit is that
division should take place if there is
no likes or dislikes okay you know okay
so what I might try is change the if
statement of a bit so I'll create a new
variable up here and just say total num
underscore DB equals num of likes plus
known dislikes and then just say copy
this I'm pissed it in there so what
we're saying is if the total number of
likes and dislikes is equal to zero
which means if the video has no likes or
dislikes we're gonna echo nothing so
just do nothing really or else we're
gonna run this code and we come to our
page again and we click refresh as you
can see that the error has gone away and
if I click on like what will happen is
it like the video on my behalf and I
can't like it again but I can dislike it
again or or just just like a once I mean
they'll overwrite my like and change it
to a dislike and if I wanna can do the
same thing again for likes so that's it
for this video don't forget to Like
comment favorite and subscribe and also
don't forget to tell me just in case I
forgot to mention to start about the
font size because since the videos are
in 720p 9 I'm not sure exactly the font
size to use I think this one's okay
if you need me to change the font size
just let me know in the comment section
down below
apart from that thanks for watching I'll
see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>