<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 37 - Like Buttons + Profiles | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 37 - Like Buttons + Profiles - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 37 - Like Buttons + Profiles</b></h2><h5 class="post__date">2012-10-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GfwF-Oouytg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi and welcome back to this video so
today we're going to be doing is we're
going to be finishing off like button
from virtually finishing it off and if
we have time including it in some of our
pages so let's get started a so what
we're going to do is while we actually
have a slight problem because as you'll
eyes you'll see as you can see I now if
I go to here and I create a like button
just to anything and I click create it
creates the like button but you'll see
if we copy it and paste it in HTML file
we just get a wide screen and the only
reason not that's being caused is
because the iframe tag doesn't take the
here trap attribute it's just the SRC
one so that's the problem so if we do
that we hit refresh it says error but it
is showing up our like button page so
what I'm going to do is we just have to
type in change a girafft SRC and now we
can create a new like button so and we
if we select this and then just paste it
back into the HTML file it works but we
still get error and the reason the error
is caused because if we go here it says
select all from likes where you ID
equals UID you can see here that the
likes table is actually empty because we
can't browse it and the reason that is
is because when we have it inserted
anything into it so whenever we try to
select something from it we're always
going to
have a num num rows is always going to
return zero so we're always going to get
that which means one cat out we won't
get our like button to show up so what
we'll do is to fix that um just create a
new query insert like equals mysql query
enter into likes values ID
the first one is ID second one is the
user who liked it I think so we can
actually check that so user like total
likes a new ID so these are like is user
total likes we're going to set to minus
one actually and UID is going to equal
to the variable UID the reason I set it
to minus one is because on this page and
when it displays alike want to display
the like button it adds one to the
previous kind so when it shows it it's
going to set as one like even when it is
zero so by inserting it as minus one
it's going to show zero likes so we can
just copy that oops I'm forming go back
you can see here it says varchar' like
30
how many do change that to 32 or this is
still not going to work and the reason
it's not going to work is because when
we generate our UID and we generate it
from a random number and then we use md5
to encrypt that random number and an md5
encrypted string as always 32 characters
long and if we want to give it space for
30 it's not going to work properly
so now we go back and we try to create a
new like button so just try it out Yahoo
calm then we go to copy the iframe
source or the HTML code and then paste
it in here
now if we were to test on HTML we have
the like button it says zero likes but
now if we click like it says one and
then will refresh okay so we've got
another problem and then once again the
reason I keep setting like it is because
um this UID is only 30 characters long
as well and it's an md5 encrypted string
so it needs three 32 characters long as
well so now if when you refresh and we
kind of like I might as unlike like
unlike so and now we've got all that
sorted out and I like buttons are
working when they're creating things and
we're actually gonna include them on
parts of our own site and so to do that
what I'm gonna do first is I'm gonna put
one of the profiles put it down there so
if we open the profile page
and here we have it I'm here so I'll
just go down one and just for the minute
I'm just going to copy and paste this
iframe in and refresh the page so we can
see the iframes why too big so we can
change that from height:auto to height
ten pixels with ten pixels and now we
can refresh and okay so what I worked
out to be and good numbers is satai to
23 and then weights to 100 and I'll
actually copy this and paste it back in
the and create like frame or create like
button source so that every like button
is the same width and height okay so now
we have the like button that works on
the profiles and maybe that's not quite
right so we'll change the width to 110
pixels so a hundred and ten is nice and
I mean if we ever needed to we could
always just make it a bit bigger so now
and it works perfectly honor the profile
pages and it works perfect on every page
because because it's in an iframe so
it's kind of page inside a page okay
so to get this to work what we're going
to do is work on that create a like
button for every user and the first time
they visit the profile and then give the
like button a unique ID of the person's
user name so that way it's unique to
them and their profile so that's what
we'll do actually now so if we go to the
profile page we can I actually just get
rid of that and we can give it a
variable of a user so now if we refresh
the minute we'll just get error counts
the input yeah we would just be getting
an error
so what we're going to do now is up here
we're just going to say create like
button if and if it doesn't already
exist so we'll just say create like
equals mysql query insert into like uh
turns black a values okay now we can
just copy it from here um oops
so what we're going to do is we're just
going to change username - actually not
yet we need to keep that as username and
down here we change this from change
that from user to user lien because
username is the variable of the person
whose profile it is suck darn iam well
username is the is whatever grabs from
this part of the address bar and user is
the variable stored in is the session
variable if for hours logged in so if we
go back up and we change this to
username as well and we'll change create
like to username as well so we'll just
change that for them all and then
instead of saying UID we will just say
using you for the UID so that's not it
finished yet because we need to say when
you create another one that says at
check like button equals maestra query
select all from like buttons where
username equals well not were username
equals username or UID equals user name
then we send um check like 'numrows
equals mysql num rows
so and I've done that we've it's not
what we've done is we've checked if the
like button exists and we find how many
and so if the like button exists we find
how many of the matching exist whether
it's one or zero or two whatever and I'm
just going to say if check like numrows
equals R is I greater than or equal to
one then do nothing or else then since
they don't have a like button we need to
create them one so let's do that
I know let's see so if we go to the like
buttons table so now if we click our F
we go down here yeah we can see there's
eight like buttons that have been
created so now if we refresh okay so it
says undefined variable I assumed that
mainly this didn't work either
okay so it did work sort of so I'll just
delete that so does um undefined
variable like button URL and okay so
yeah we also have a few more on defined
variables so um like button URL that
doesn't matter so I'm just going to make
this the same for everyone
localhost / tutorials slash and user new
whereas actually the URL UID is going to
be username as well
I did I will just actually what we don't
need to really record that so okay
actually we'll do it anyway so then
we'll just go down here it's a date
we'll use the date function here one day
let's try it and it says we've no likes
which is a good sign so as you can see
now we have a new like button whose user
ID is cinema which is the user name the
data was created the URL is the profile
the user name who created it is
obviously them so if we refresh it still
works we try and refresh this and see if
we got another row nope we don't have
any more records so now we can like our
profile and unlike it and like it so now
we know that's working you can apply
this method to whatever we want really
it doesn't matter but well that's all
we've got time for today so
unfortunately but um I know it's been
about a way communities and not the last
value on this one and I've been really
busy getting something sorted out but um
you'll find out about them soon and
thanks for watching don't forget to
subscribe like and favorite if you
enjoyed it and don't forget to keep
sending me messages with what you'd like
to see in it
or comments or if you find bugs or
whatever it is even though for a while
I'm replying to them I actually do read
every message I get so um that's it
basically the next video in the series
won't be so far in between like I won't
take a week in between videos so yep see
you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>