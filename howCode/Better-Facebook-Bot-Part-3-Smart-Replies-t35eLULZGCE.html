<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Better Facebook Bot - Part 3 - Smart Replies | Coder Coacher - Coaching Coders</title><meta content="Better Facebook Bot - Part 3 - Smart Replies - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Better Facebook Bot - Part 3 - Smart Replies</b></h2><h5 class="post__date">2017-04-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/t35eLULZGCE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
learning how to do natural language
processing that will make our bot a lot
smarter and it means we'll be able to
talk to our BOTS like we will talk to a
human and our bot will be able to
understand us to do that we're going to
be using an API called wit a I it's
created by Facebook and to get started
you have to create an account so just go
down here and create your account and
once you've created your account you
want to click on this plus to create a
new app and we're going to call this app
better bot and we're just going to give
it a description of
my facebook bought something like that
so I'm just going to choose open I'm
going to click create up we're going to
set our text to wit a a their API is
going to send us back a response that we
can understand and we can incorporate it
into our bar so the first thing you have
to do is to tree and our bar and what
we're going to be adding in this video
is the ability to ask her about the
heights of different buildings so here I
have three buildings I have the Eiffel
Tower I have Trump Tower and I have the
chard we're going to record the height
of each of those buildings and then
we're going to be able to ask her about
questions like hotel is this building
what height is this building those are
two different ways to ask the same
question but our bots going to
understand the difference so I'm going
to say what H is the chard so what I'm
going to do is I'm going to type in
intent just like this and I'm going to
say the intent is going to be 8 so now
if I click create option now whatever
the with a I API returns it's going to
say that the intent of this question is
to figure out the height of something so
then what I'm going to do is I'm going
to click on the word chard and then I'm
going to type in the word building so
now whenever our bot sees the word chard
it's going to know we're talking about a
building whenever it sees the word
height we know the intent is height and
will actually change height to get
height something like that now if we
validate that no we're going to do is
we're going to type in how tall is the
chard that's a different way to ask the
same question I know you can see that
the bot knows that this chard is a
building and the intent is get height so
what we're going to do is click validate
on that now I'm going to stay at a hotel
is Trump Tower so the intent is still
get height and what we're going to do is
select Trump Tower and we're going to
say it's a building now we're going to
validate I will create another one we're
going to say how big is Trump Tower and
now you can see it as building is Trump
Tower intent it's cat height now you can
see building is Eiffel Tower and in
chant it's cat height we're going to
also say how old is the Eiffel Tower
we're going to change the intent from
gat height to get edge now if we
validate that
and the building is Trump Tower and the
intent is going to be ghat edge so now
we're going to do is run a click on
settings and this shows us how we can
call the wet API so we can call it like
this using the curl keyword or we can
just copy this go to par and then inside
par what we want to do is take an
authorization and paste in this pattern
and then if we go back here what we can
do on what AI is just copy this address
paste it in there and now if I run that
we get an error it says our message was
too short but if I type in how tall is
Trump Tower and I run that you can see
we got a response back it says the
building was Trump Tower and the intent
was to get the height of the building so
that worked I was expected so rather
we've done that we know the response
we're going to get from wit a I so if I
open up our boss I go to index and I
open that up and what I'm going to do is
instead of sending back the message the
user sent what I'll do is I'll just
delete us and I'll change that to
message and what I'll do is I'll just
say message equals file get contents and
we'll just paste that in and what we
want to do is scroll down here and in
fact get content we have to modify the
headers so to do that I'm just going to
copy the options from above paste them
in here and Iranian not to message
options and once again will supply false
in our context and we'll call this
message context and we will just say
message context equals string contacts
create and we'll pass message option and
what we want to do in message options is
instead of changing the content type we
want to say authorization
centaur authorization code we delete the
content because we're not sending a post
request will delete the matter because
we're not modifying that either so what
we're going to do is we're going to go
over here and we're just going to delete
how big is Trump Tower and then in here
what we're going to say is raw URL
encode so if we put in this function
what it will do is it will convert our
string to a string that can be passed as
a URL and in this function what we'll do
is we'll say I post a rare message text
that should pass in the string that we
send in the Facebook message so we save
that and run this now if I go to the bar
and I type in how tall is Trump Tower
you can see it responds with the JSON
from with a I it says hotels Trump Tower
and it says the values Trump Tower
and the intent is get height so what
we're going to do really quickly is
reply to those messages so to do that
we're going to go back to our bar an
inside message is where this JSON will
be stored so what I'm going to do is say
message JSON equals Chaisson decode
message and I'm accessing the same
message array because we're converting
it from JSON into an array so what we're
going to do is we're going to create an
if statement and then what we're going
to do is we're going to copy this JSON
and we're going to paste it into this
website and we're going to click run the
JSON will be converted to the output
that PHP will give you whenever you run
it through JSON decode and you can see
we access entities and we access
building and then we access the zero
element of that and then we access the
value which in this case is Eiffel Tower
so keeping that structure in mind what
we're going to do is move this over to
the side and we're going to say if
message array and to these then we
access building and then we access the
zero element of that as you can see here
and then we access the value just like
that and then we say if that equals
Eiffel Tower then we know we're talking
about the Eiffel Tower and then inside
here will create another edge statement
and we're going to say if message array
entity's intent zero just like buildings
we go to intent we access the zeroth
element of that and we access evaluate
limit in there and we say if that equals
get age for example otherwise so inside
here we know we're talking about the
Eiffel Tower and inside here we know
we're asking for the age of the Eiffel
Tower so to send a message back all we
do is we set message equals the Eiffel
Tower is 128 years old and here we say
message equals 1063
hi so we save that so now if we run our
bot and we type in how tall is the
Eiffel Tower
you can see it says the Eiffel Tower is
1060 3 feet high now if I said something
like how big is the Eiffel Tower
you can see it tells us to hide again if
I said how old is it
you can see its houses the age so now
we're using natural language processing
to make our about a lot smarter we could
make our BOTS as smart as we wanted to
and in later videos we might make it
even smarter but that's it for this
video don't forget to Like comment
favorite and subscribe if you have any
questions or it's email me at Francis at
Haiku org don't forget to follow us on
Facebook Twitter and reddit but that's
it for this video I don't see you next
time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>