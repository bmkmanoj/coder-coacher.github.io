<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own Instant Messenger - Part 6 - Retrieving Messages | Coder Coacher - Coaching Coders</title><meta content="Make your Own Instant Messenger - Part 6 - Retrieving Messages - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own Instant Messenger - Part 6 - Retrieving Messages</b></h2><h5 class="post__date">2015-07-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/n_iqNcSt_2k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video what we'll be doing is
we're going to be actually enabling
people to send messages from this text
box so the way we do that is we're gonna
go back to sublime text we're going to
first do this which is where we say msg
input' dot value is equal to nothing
this just means that whenever you send
the message the message box will go
blank so if I upload this
let's just put in Francis McNamee and
let's just run the function you'll see
the masses block message box got wiped
clean for you to be able to write
another message and then the message
gets sent so now what we're going to do
is we're going to go up here
yes where is it so actually I just
remembered we can actually already send
messages from the tax box because here
we have on key dine then we run some
JavaScript which says if the key code is
equal to 13 which is equal to the return
key on the keyboard then we run the sad
message function so we've actually been
able to do this all along I just forgot
so if i say hi' code.org and click enter
it actually didn't able to send all
along i just forgot about that so now
that we've all we've got left to do is
create the update function and obviously
create the PHP for it so if we just
upload this and just make our error go
away in the console so you can see the
IRAs gone okay so we're going to go to
update messages and we're actually just
going to copy this because it's quite
similar to the get messages type PHP
page or a file so we're just going to
delete that because we don't need to get
past a message
we don't need to check if the message is
blank or not so what we're gonna do is
we're going to change this query so
instead of saying insert engine masters
were discussed and select all from
messages and we don't need to bind prom
function and we're ready to execute so
when we execute it we will obviously not
get any output yet because we're not
returning any output so we're gonna do
is we run to create a loop that I will
print all the masters in the database
so the way we do that is we say result
is equal to result fetch row whoops that
actually results cat result then we want
to say a while r is equal to result
fetch row now we're going to echo our
actual set print R because the our
variable is going to be an array so if
we have to show how to use the print our
F function to be able to do I put the
array and then we're going to act with
the pre tag just so that we can see
everything formatted properly so let's
go to slash get messenger stop PHP and
you can see here is all the messages
from the database and they've all been
output as an individual arrays so what
we want to do is want to I put them in a
specific format so that our javascript
file is extremely easy to parse so the
way we do that is instead of print our
the variable we're going to also get rid
of the echo we want to say echo r1 so
the reason we're echoing r1 is because
that is the user name so if you look
here here's the index of each item in
the array is here 0 1 &amp;amp; 2 0 is the ID
from the database so we don't need that
so we just need 1 which is the user name
unto which is the message itself so
we're gonna echo our what going to echo
r1 which will give us the user name then
we're going to echo a slash we're just
going to separate them with it this is
our delimiter which is going to make it
easier to parse the Matthews from the
database then we're going to echo r2
which is going to be the message and
then finally we're going to echo a new
line so obviously backslash n is a new
line but it won't I'd be I pop by the
browser because browsers look for the
break tag when they're I put in text
without putting a new line actually so
what we're gonna get is a big straight
line of messages but the new line allows
us to
split the I put we send to our
JavaScript file so that it makes it
easier to parse because we know that
when we see a new line that's the end of
a message and we see a backslash that
means that everything out the backslash
is the actual message and everything
before it is the user who sent the
message that is why we are outputting
things like this we could also missed a
KO it different we can act like this and
then echo r2 and then echo newline if
you prefer but it makes no difference if
we just run this we'll get the same
result
you say we got the CMI pup so that is
actually our gap messages page done so
that's it for this video don't forget to
Like comment favorite and subscribe and
I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>