<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own Instant Messenger - Part 5 - Javascripting the homepage | Coder Coacher - Coaching Coders</title><meta content="Make your Own Instant Messenger - Part 5 - Javascripting the homepage - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own Instant Messenger - Part 5 - Javascripting the homepage</b></h2><h5 class="post__date">2015-07-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2ZAGTH9MDqU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now that we've checked the cookie
exists on when you set the cookie if it
doesn't exist that's basically our login
for the user so now what we're going to
do is we're going to create the function
that will actually send messages to our
update dot PHP script so the way we do
that is we go down here and we're gonna
create a new function we're gonna call
it send msg it's gonna take no
parameters for doesn't take any
parameters and what we're going to do is
we're gonna send an ajax request to our
server so we're gonna say VAR message is
equal to before we do that we actually
will scroll up and we want to get the
value of this so it's my msg input' is
which that's not the right one here it
is here this is msg input' this is the
ID of this box here which is how we're
going to get the contents of that text
box to figure out what message to send
so what I create a variable up here call
it msg input' and sending with a
document dot get element by ID msg
input' ok so now we have the msg input'
we're gonna say message is equal to msg
input dot value which means we're
getting the value of the text box then
another have the message saved in the
variable message first thing we're gonna
do is we're gonna say if the message is
like or want to say just if the message
isn't blank then we want to actually
send it if it is blank we're just gonna
do nothing then we're just gonna let the
user actually type something in so this
just means if someone sits here and
keeps hitting Enter on this text box
it's not going to send a little of a
random blank message into our database
so now what we want to do is want to get
the username because every message takes
two pieces of information it takes the
username of the person who stands it on
the message itself so instead of our
username is equal to a function called
cat cookie which will free it now we
want to pass that messenger user our
messenger Union which is the messenger
cookie that we created so here's the gap
cookie function instead of just creating
it I just
this when I find the Internet so we're
going to use that cookie function so
we're just pasted up here change it to a
small say because we're being consistent
with all the other functions so now that
we have the username we have the get
cookie function we can create our Ajax
request we save our I win a quick called
XML HTTP I'm going to set it equal to a
new XML
HTTP requests and then what we're gonna
say is XML HTTP dot already stick it I'm
ready state change whoops is equal to
function this is an anonymous function
we're creating here because it just
means it does nothing me and that's why
it's not your function test we're just
creating a function that doesn't have a
name and then what we're doing is we're
saying if XML HTTP dot ready state is
equal to four and xml doc actually HTTP
table status equals 200 well this means
we've got the return value of our
request that means we've got the request
and we've got the answer back from it
that's what the this if statement means
so that means the code in the system it
will only run whenever we send our
request I'm gonna get the response from
our server so what we're gonna do down
here is when I actually send the request
so we do that if there's an XML he
should depend on open and the open
function takes three parameters it takes
the type of request which gonna be a cat
request takes the address of the page
you want to open and it takes another
parameter which we're just gonna set to
true so we want to request the update
messages dot PHP page so up to it last
year's that PHP is what we're going to
go to we're going to provide it with a
parameter called username and we're
gonna set that equal to the username
variable and then we're going to provide
it with another parameter called message
and we're gonna set that equal to a
message variable that want to say XML
HTTP it up send and that is our request
sent so up here we're going to say alert
I want to say XML actually just do
console dot log field actually just
because it's easier console dot log now
we're going to log we're just gonna say
XML HTTP response text we're going to
log that to the console so we're going
to do is obviously upload this we are
going to
fresh just want to do is I'm going to
right click inspect element just because
that lets us go to the console then I'm
going to put in some tax while saying
this is a test and then what we're going
to do is we're going to I will probably
not actually get any open from this but
we'll just do it anyway so we're going
to say send message
I wish gonna run that function from the
terminal on the air console and you can
see we got a blank I reply that's
because if we go back to this page we
aren't actually printing anything so
I'll just echo test what we will get now
is we will get test printed up the
console so if I click send message you
see we get test now so what we're going
to do is we're going to scroll up and
we're going to create a new variable
called VAR msg area missile equal to
document dot get element by ID msg area
now we're going to say is msg area dot
inner HTML is equal to and we're just
going to actually set plus equals this
don't worry about this code for now the
reason i haven't explained it is because
all it is is it's the formatting for our
messages so what it is is it's the
message variable and the username
variable that we have up here we're not
actually i receiving anything from the
object massachusetts out so we're just
going to use the data we've already got
this page so so it make more sense we
actually see it so what we're gonna do
is refresh ignore that error for now
we'll say this is test and we're just
going to run the send message function
and you can see this is what showed up
so msg area is this whole sort of square
rectangle here and what we're doing is
we're appending on to its inner HTML
which is already black so we're just
basically adding on to it this dev which
contains our message that's why i didn't
explain it's because it's just mostly
styling the only things that it actually
is sort of javascript code
is the taskmaster or is this variable
here and this variable here everything
else is just styling which is why I
didn't explain it so here is the message
and here is the username we're not
actually receiving them from the output
of this file because this file isn't I
put anything
we're so what we're doing instead we're
just using the variable we got up here
and the message from or is it up here
and we're just putting it in the sort of
styling that we need for the message so
you'll see if I put in sort of another
message chef Frances and I go back to
the console and run this function again
you'll see we got another message
printed out and if I go to browse you'll
see that we have our messages in the
database so that's it for this video
don't forget to Like comment favorite
and subscribe and I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>