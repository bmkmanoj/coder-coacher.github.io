<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 11 - Unfollowing Users | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 11 - Unfollowing Users - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 11 - Unfollowing Users</b></h2><h5 class="post__date">2017-01-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AfNBFP9QAzY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
finishing off the follow system in the
last video we enabled users to follow
each other and in this video we're going
to be creating the unfollow button and
we're going to be preventing users from
following themselves so if you go to
idea device you can see it's empty so
I'm going to follow hi code and I'm
logged in as Frances and I refresh this
you can see the user that we followed
was high code and the user who did the
following was Frances so now that I
followed her code that button should
change to unfollow so to do that what
we're going to do is create a variable
it's going to be called is following and
that's going to be false then down here
after the user clicks the follow button
we're going to say is following equals
true and then we're going to scroll down
here and where the button says follow
we're going to create some PHP tags and
we're going to create an if statement it
says if it's following equals true we're
going to show the unfollow button and
then if is following equals false we're
going to show them the follow button
so what we're doing is the thing if it's
following
if you want to be more explicit you
could say is following equals true we're
going to show the unfollow button and
then otherwise we're going to show the
follow button so let's go back to Google
Chrome and refresh we don't want to
resubmit this form if we do resubmit the
form actually I'll just do that and
you'll see that it won't actually follow
them twice you can see it's already
following but neither buttons change the
unfollow if i refresh the actual page
so the reason it says file instead of
unfollow is because we're only starting
is following equal to true if the follow
button has been submitted so what we can
do is copy and paste this
I'm put it outside of this F statement
so that it doesn't matter if the button
is submitted
and then here what we're doing is we're
saying if they're not following then we
want to follow them and obviously we
don't want to do that because now if it
actually clicked follow so we're just
going to empty our following them and
then we're going to get rid of this
house and change this F so we're just
going to delete that so in other words
if they are following the user we're
going to set already following and then
here we're gonna put is following in
here we don't actually want to say
already following because that will just
show up in the page so we're just going
to comment that out so what we want to
do is set is following equal to true and
before we run that we want to get the
user ad and the user ad is assigned
after the buttons been correct so what
I'm going to do is take that out and
I'll put it up here with username so
that way those variables are already
defined before we click follow and now
you can see the button says unfollow
because we're following poco so what we
want to do is make the unfollow button
work so we're going to do that by going
to our text editor and we're going to
copy the F is that follow because it's
very similar we will copy it up and we
want to change it to unfollow and then
here what we want to do is want to say
if the user is not following them we
want to change that to is following by
taking away this exclamation mark that
negates the query we want to say if they
are following instead of inserting and
you row into these followers array we
want to remove a row
so here what we're saying is delete from
followers where user ID equals the user
ID where user ID is the ID of the user
whose page we're on and file or ID is
the ID of the person who's logged in so
essentially what it means is if it finds
a row where the user ID equals the user
ID of the page and it finds a row where
the file or ad is also equal to the ID
of the person who's logged in we're
going to remove that row if we only had
delete from followers where user ID
equals user ID and we didn't include the
follower ad what that would do is delete
all of that users followers so we have
to be specific we only want this user
that we're logged in us to unfollow
these specific user whose profile pages
are on so what we're saying is if
they're following that user we're going
to delete them otherwise we don't want
to do anything so what we want to do is
just delete the else and then we want to
set is following to false so let's see
does this work if I click on follow now
it says follow and if I go to the
database and refresh you can see that
root was just deleted if I click it
again you can see now we have another
row I'm afraid to do that one more time
we're not following that user anymore so
what we want to do next is change it so
that you can't follow yourself so that's
really easy to do all we have to do is
go in here and right up here what we
want to do is say if user ID equals
follower ID so if the two IDs are the
see if that means if I'm logged in I
must be on my own profile page and then
what we want to do is we'll just echo
your profile initially so now we'll go
back to our page or refresh and we won't
get anything because we're on high code
if I go to Frances so now it says it's
my profile and if I click follow it
still works so what we can do is copy
that and then when the user clicks
follow we can just paste up here this if
statement and to write the whole thing
in this F statement so that it will only
get run if the user ID does not equal
the follower ID and what we can do is
the exact same thing down below
this code will only run if the user ad
doesn't equal to follower ad and then
finally what we can do is surround this
entire F statement and another F
statement and this F statement is just
going to say F user ad doesn't equal
follower ad so therefore if the user ID
equals the follower ad the follow button
won't be displayed so now if i refresh
you can see that no buttons displayed if
I go to haiku do the follow button is
displayed and click it works so our
followers system is just finished every
time I click this we're submitting a
form which refreshes the page we're not
using anything like jQuery or Ajax at
this point later on in the series when
we start doing the template I'm putting
all the files together we're going to
put in air jacks and things like that to
make it look a lot more smooth and look
a lot more like an actual solution
Network at the minute we're just focused
on the actual core functionality of each
of the modules and this particular
module is the follower system so that's
it for this video don't forget to Like
comment favorite and subscribe don't
forget to follow us on Facebook Twitter
and reddit but that's it for this video
and I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>