<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 8 - Changing Passwords | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 8 - Changing Passwords - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 8 - Changing Passwords</b></h2><h5 class="post__date">2017-01-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4F8E82RTZwY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to create a
page that allows users to reach out
their passwords
this isn't going to be a forgotten
password tutorial it's one more if the
users already logged in they can change
their passwords by entering the rules
one first so let's get started so what
we want to do is go to a tax data and we
want to create a new page and we're
going to call our page change password
and we're going to copy what we have on
our index page and just paste it on our
change password page because we need to
have our database class we need to be
able to tell if the user is logged in or
not so if the user is not logged in
we're just going to actual not logged in
but if they are logged in we're going to
actually display the form and allow them
to change their password but rather than
echoing not logged in we're going to say
died just to kill the entire page
and then dine here will do is create a
simple form
so that we created our simple form and
that we can see those our form there so
the first thing we want to do is get the
users current password that they type in
and we want to compare that against the
current password we have stored for the
user in the database so if I go to the
database we want to compare this value
with whatever is entered into this tax
box so the first thing we'll do is check
that the form was submitted
and now that we know the form has been
submitted we're going to check the value
in old password with the values that we
have stored for the user and the
database but we've already done that on
our login page we already verify what
the user enters into the tax box with
the password we have stored so we're
going to copy and paste this line
because it already does what we want so
we need to create the variable password
we should probably rain amatuer old
password
and we need to modify our query because
what we're doing is checking where the
username is equal to whatever the user
entered but the user doesn't provide us
with a username when they're changing
their password but we do have the user
ID because it's returned from the is
logged in function so we're going to say
we're ID equals user ID and then here
we'll say user ID and we will pass it
user ID and we'll set the user ID
variable equal to login is logged in and
that will be the user ID so now that
we've verified the user has put in the
correct old password we can change the
password and then we're going to say
otherwise
if the password entered incorrectly
we'll a co incorrect or lose password so
let's just run this to see does it work
so the password for this account is
tasked pass so if I put in task pass and
then click Change Password we should get
nothing but if I put in anything else
you see a it says incorrect old password
so now we've checked that their current
password is correct we're going to allow
them to type in a new password before we
do that we need to just grab the values
from those text boxes
and we want to go to our create a
current page and you can see we put in
validation for the password to ensure
that it's between six characters and
sixty characters long so we're going to
copy and paste that but before we use
that the first thing we need to know is
does the new password match the password
repeat because the whole point of having
the password enter twice is to make sure
that it's correct so what we can do is
check that first
so we're saying does the new password
equals the repeated version of it and if
it does then we can continue changing
the user's password otherwise we need to
tell them that the passwords don't match
so now that we know the two passwords
are the same we only need to check one
of them because our validation only
needs to apply to one password because
we already know that is Sam so I can
apply the validation only to new
password and I can forget about new
password repeat because they already
know they're the same so paste that in
there we're checking the length of the
new password and the length of the new
password again and so long as it's
within the specified length we should be
okay to accept our password because we
don't need to worry about SQL injection
or anything exact because the user's
password is hashed and stored in the
database and we're also using prepared
statements so we never actually store
the values the user puts in into the
database so now we should be okay to
actually change the users password so
all we have to do is run a query
and then here once again we're putting
in the new password we want to go to our
create account page and we're inserting
the user we want to use the password
hash function to harshly value and then
we'll just say password changed
successfully so let's just task this so
the old password is test pass and the
new password is just going to be
password
click Change Password it says password
changed successfully and now I'm going
to log out but before you log out we can
actually just compare the values in the
database now if we go back to here you
can see the password field is equal to
this this is the password before I
changed it but if i refresh this you can
see that's just change the value is
completely different so now if I log out
it says I'm logged out we're not
actually redirecting the user but if I
go back to the table and they go to the
login tokens you can see there isn't any
login tokens so I'm not logged in
anymore and if I was to refresh this I'm
not logged in we can actually check our
change password page you can see if I'm
not logged in I also get told that so
what I'm going to do is log in using the
old password first so just answered test
pass I'm going to click login you can
see it now says incorrect passwords if I
try to log in again and I use a new
password which is password and I click
login
it says logged in and if I go to the
index page we're not logged in so that's
it for this video don't forget to Like
comment favorite and subscribe in this
video we cover changing users passwords
that's quite different from resetting a
user's password which we'll cover in
another video but that's it for this
video don't forget to Like comment
favorite and subscribe don't forget to
follow us on Facebook and Twitter and
I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>