<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 35 - Unliking Things | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 35 - Unliking Things - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 35 - Unliking Things</b></h2><h5 class="post__date">2012-10-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XL2MGM4GJCg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi and welcome so today we're going
to be doing is we're going to be
finishing off the like button and I will
see how far we get with that so the
first thing I'm going to do is I'm gonna
go up to the the like button itself
which is here and I'm just going to set
up oh no way I'm gonna go up actually to
the top and I'm gonna include our CSS
for the what our for fine friends I'm
just going to check what folder Jim so
hmm it's in the CSS folder and it's site
style of CSS so I'm going to type in the
dot and the forward slash but they're
not required and then we're checking the
types not a CSS / style underscore yes
or no site underscore style not CSS and
off we go to the bottom then we refresh
the page
no our like button looks a bit better
okay so now that we've done that we're
gonna well I left a minute if we click
the like button we can take as many
times as we want and it's still like the
page but we want it so that you can only
click the like button once so what we'll
do is we'll put a check in to see
whether someone's liked the post already
so um so what we'll do down here is um I
create a new PHP block well I suppose
you just get rid of these and in here
I'm just gonna put a comment that says
check for previous
likes but what is going to be using
MySQL query so it's gonna be checked for
likes which other side is a MySQL query
the query is given to select all from
user underscore like where and this is
where we go back into our database and
in our database what we what we can see
is three columns and what we're gonna
say is where username equals in them in
this case I'm where you ID equals that
so I'm just going to copy that because
to see having coming back I'm gonna say
where username equals and then we can
just say user because up here okay so we
need to declare the user variable it
looks like you okay we'll do that after
so at were you like where's where
username equals user on which in this
case we can use just use the double and
or we can use that doesn't matter
you've ID equals and well actually don't
need to copy the other you've ID because
all we can do is use the UID variable we
created earlier earlier the next thing
we're going to do is we're going to set
num rows likes equals MySQL num rows and
we use the name of this query which is
check for likes then what we're going to
do is we're gonna say if num rows likes
equals one then we're going to do
nothing or else and we can actually say
if numrows likes is greater than or
equal to one then we don't want well ok
actually up here we're going to say if
nothing room likes equals zero because
then we want the code to basically and I
can actually change these around change
the order of those so what this says is
if numrows likes is greater than equal
to one so if you've liked it before then
we don't want to do anything mrs. Lee's
we're going to do here and then else if
number was likes equals zero so if they
haven't liked it before we're going to
let them actually like it so what I'm
going to do here is okay well cut this
and we'll just actually get rid of it we
will get rid of these PHP initiating
things the PHP tags because we I don't
need them let me see what else we need
to get rid of okay so that looks like
it's in a minute we're just gonna say
echo and then put this in an echo
statement and obviously get rid of this
as well
so I'm just gonna do these for all these
variables and then we can move on and
check it still works okay so now we've
done that yeah we shouldn't we should
see but actually nothing and yeah when
you declare the variable user so what
I'll do is go open and I will open the
header file and I'm just gonna copy this
code here so I what I'm going to do is
okay sit up here and then we should be
good to go so I as I said we should see
nothing which is correct but now if I if
I go back to the database and the
overview of all the tables and I empty
user underscore likes we added it nice
to know we should see the like button
which is correct and I we see the like
button and often click like it says 67
likes and so there's something going
wrong here so I'll just come back when I
find out what it is okay so I find a
problem and it's basically we just
forgot to tell it to insert that insert
data into a user underscore likes table
I must have deleted it by accident
so say user underscore likes equals
mysql query and this query is just gonna
say insert into user underscore likes
file use the first one are we only have
three values so the first one is empty
obviously because it's the ID the second
one is the user variable and the third
one is the UID variable so now if we
refresh this and we run it again
it disappears but um if we go into the
likes table we will
see it didn't actually like it but it
see okay so it worked there um you see
okay so I just checked over it and it
seems to be working so I don't know what
the problem was but um maybe there was
no problem I don't know so I'll keep an
eye out for that but it looks like it's
fine and now what we're gonna do is
we're going to show a button to remove
alike from from the database so we just
do is copy this and then paste it above
so I'll just put an echo stem in here
and obviously we change this to unlike
it's not very fresh we should see a
button that says unlike and that's
actually that lower case so what we're
going to do is just change the common
things change that the unlike button and
we're gonna go up here and copy this and
just paste it down and then obviously
change this to unlike button update like
set totally likes equal to total likes
what I'm gonna do is say total likes
equals total likes minus one so let's
see does this work um I will just
actually leave that for now so let's try
this nine and if we refresh and we click
unlike now we should see like button I
value decrease the total likes value so
let's try it again okay so something in
work so I'll just get rid of this then I
was try it the other way so if we go up
to the top again and we say total x
equals total X minus ones then we'll
just say remove likes equals total X
minus one and then we just change this
to remove likes so let's try it now and
uh and then um like browse and see does
it work okay so I know why this wasn't
working and it's actually a pretty
simple and it's because we've taught
likes equal to total X plus one and
we've removed likes equal to total X
minus one and since took likes all right
since this is above total likes our
senses below total likes took likes
already equals and plus one more than it
should so when we minus one we're just
getting the number that we have in the
database so what we're gonna what we do
is we minus 2 and if we go on refresh we
click on like it goes down one each time
as you can see it goes down one and if
we refresh the likes table as you see it
says 50 years and we've 59 there so it's
one off but that's because we're being
mislead the total likes plus one number
if we were to add to fix that actually
we could just total likes DB and then
copy it and paste it in there and then
go down here and just just been a total
likes DB so this way okay whatever
all right we're just done do that I
don't know why they didn't work but it's
not important so I know I've done that
we just want to I also remove or is it
the user from the user likes table so I
had to do that what we're gonna do so
that we're gonna go into contacts and
we're going to create a MySQL query and
it's just going to say I remove like a
remove user and then we're just going to
set my SQL query equals my are my spell
query and then we're just going to say
remove from user underscore likes where
username equals user and you ID equals
UID as so now if we go back and we
refresh let me click on like and we
refresh again okay so something didn't
work okay so I some reason that's not
working so what we'll do is I will just
copy this I must have just Stubbs asked
about something wrong in the query I
don't know so what I say is just remove
user and we're gonna change this to
delete from user underscore likes we're
just gonna delete that and then also
right and user name equals user so I if
we try this let me refresh let me click
on like we get
like again so if we go into user likes
we see in the table we have no rows as
you can see if we click browse
it just takes us to the structure now if
we click like yeah we have 57 likes and
we click on like we've d6 so now I've
liked again I'll refresh this and we
should have another row in table yes we
do and it's over it's got a different
idea obviously so it's a different row
but that's it for liking and unliking
system kind of and that's there's not
much more to it now but in the lab the
next video what we'll be doing is just
I'm including it on pages and showing
you how you can use it like we're going
to be basically registering you like
button so allowing users who use our
social network to create their own like
buttons as well as include them on some
of our own pages so that's but that's it
for this tutorial I hope you enjoyed it
and don't forget to comment like and
subscribe and see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>