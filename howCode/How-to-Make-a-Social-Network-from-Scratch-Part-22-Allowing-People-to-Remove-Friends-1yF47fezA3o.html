<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 22 - Allowing People to Remove Friends | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 22 - Allowing People to Remove Friends - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 22 - Allowing People to Remove Friends</b></h2><h5 class="post__date">2012-08-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1yF47fezA3o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so I'm welcome to this video so I'm
sorry I haven't made a video in a while
it's just and pretty busy for the past
few days on them
this friend system was more complicated
than my first thought
so um let's get started basically so we
can say if post remove front end and in
case you don't remember the remove and
we're getting this value from the name
remove friend and the submit button
which is this one here so to prevent
errors we're just gonna put an odd sign
in front of it I mean you might not have
to but I off to for some reason so
looking sad friend Jack I'm creating
Mike well well create a MySQL query and
we'll say I will do is well first let's
retrieve the M person's friend array
from users
yeah and just in case you forget what
the what the variable user mean their
user is as I sometimes do I forget
whether it's the logged in user or the M
the users friend all we have to do is
refresh and since I hacked with it we're
going to get sin so react with the value
user which means user equals cinema
cinemas who are logged in us so we could
actually just put a comment up here so
user equals logged in user and then we
could just do another one for user name
these are her own profile it's a setup
okay so now we just we won't forget what
those variables mean we can just
continue on so we can say cat friend row
equals my squad my MySQL fetch
associative yeah
which is odd friend check then we said
we get well we create a variable to hold
the data that we get
so we could say friend all right equals
I'd get friend row um what is it random
right so to check tile we can just echo
friend array so when we get removed
friend we should react but with my
friend or a first animal and we can
check that by going into the database as
you can see the usernames cinema the
friend arrays Francis a new user okay so
we know this is the okay sick friend
all right or logged in user
okay um Noah create a variable called
friend all right explode I'm not quite
sure if this is necessary but it didn't
seem to want work for me if I didn't
have this code so I mean if you you can
get it to work without it by all means
you don't mean include included so they
explode function takes two parameters
the first one is whoops the first one is
what your explode by so every comma and
then the last one is or you want to
actually look for what you want to get
what you want to explode basically so
then we can friend or a gun and I would
just say and write explode and as I said
I don't believe this codes necessary but
well these two times but now I'm just
going to clear so then this is the
friend arrived for the a user whose
profile but for the user who owns
profile let's just set up so this is
quite similar but all we have to do
breathe eyes and check I don't know what
to change the values of these variables
so it doesn't matter we could just put
whatever we want just to make them
unique so I'm just going to add the
variable use me I'm onto it because the
valuable usernames that person anyone's
the profile
and we just change this do you use I
mean nothing
yeah okay so now we get into the bit
which is kind of complicated so as you
saw you can see my friend looks like
this and in case you didn't see um the
friend I'm gonna be deleting new user
because that's whose profile I'm on so
if I was to they fried away from you
user it goes looks like that so si so
here's what the Torres look like and
this is sort of where it gets a bit
complicated so if I must remove am them
as a friend since I'm logged in a cinema
that's pretty simple melodies updated
atavism or update the row and delete the
word cinema from you user you would
think we see him all I do is delete or
new user but then we we have a problem
we have this comma here which we don't
want because if I have a comment
the it the way I would since we're
exploding the array it's gonna think the
comment is a person so it's gonna think
that's another friend so that's not
gonna work that's gonna make errors and
even if they have only one friend it's
not quite as simple as just deleting the
front from the Arab because well what
basically going to go on is say we have
a straight load of friends so cinema I
wasn't pretty matter so those weren't
we'd five friends and these were all
five friends it's not as simple as just
deleting one out of the array because as
you see we're also left with another
comma and the only time it's not it's
the only time it's actually simple as if
they have one friend
but it's kind of it's more complicated
to say if they have one friend do this
so it doesn't make more and more code so
it's easier just to do it one way and
make it work for them all basically so
what we're going to do is check we're
gonna have six if statements and these
if statements were going to check
whether there's a comma at the beginning
of the word so you said we wanted to
delete new user um my dad my friends
array looks like this like it does say
we wanted to remove a new user that's
fine we just check there's a comma
before the word and we delete it that's
fine but say we wanted to remove Francis
we need to check if there's a comma at
the end of the word as well so we delete
Francis but we also need to check if
they don't have a comma in the friend
array which is like and your user does
so we just need Italy we don't so we did
so there'll be no commas so we can't
tell it to delete cinema comma with a
comma at the end because if we told it
to delete cinema with a comma at the end
and yes in and cinema didn't actually
have a comment it would think there were
two different things and it wasn't
telling cinema with it it would try and
delete cinnamon with a comma it wouldn't
delete cinema without a comma so then we
need to make three checks one for if
it's got a comma at the end one of it
has no comma at all I'm one with it as a
comma to start we need to do this for
both users which is why they'll be six
six if statements so I've creative
contacts you say I know we don't need to
call it that look you just say we can
create a variable and I'll call it user
name comma and because it's gonna be
user neat right keep it simple what this
is going to equal is the variable
username which in this case which is
whoever you whoever's profile this is so
in this case it's it's going to equal
new user but we're also going to append
a comma on the start of it so it's going
to equal comma new user which is how
we're going to check for the existence
of commas so we just write user
so bitten right now using them comma
equals user means which we don't want me
because that's just pointless because
the equal to seems mean so we're gonna
do is we're gonna pan a comma which not
as IC equals user username common R
equals comma and then in this case it's
a new user
so to append something as you can see
all I did was to speech marks and then
between them you but I am what you want
to append and you pendant using the dot
that's it so I'm gonna copy and paste
this just call it user name comma to
delete this so we don't need app and it
I'm gonna pet we don't need to pan it at
the start no we just append a comma at
the end so now we have the two checks we
don't need to do it for the variable
username because we already have that
variable and we don't need to declare it
again and call it using the comma three
or rather because we don't we don't need
to do that because it won't have a comma
so then we can copy this and change this
to user comma because it's for the other
person right then it's the same thing
except to change user to our username to
user okay so now we can actually get on
with removing your friend so what we'll
say is if we'll use a function called
STR STR Sam what did this function takes
two parameters the first one is um okay
I'll tell you what it does first for
what this does is it checks a string for
like the existence of a word so it would
in this case we could tell it to check
you are watching a video um this is the
first parameter with a string you want
to check the second parameter is what
you want to look for so we could get it
to look for the word watching
so then this is going to say if the word
watching is in that string we're just
gonna echo yeah yes then what's that
else so if it isn't in the stern-gerlach
oh no since the word watching is in the
string we will be given the word yes so
I hit remove friend we get yes if I
change this to cinema hit remove friend
look it look at know which is basically
how we're gonna check we're gonna check
music the friend array which is gonna be
the string for the existence of a word
which change the username yeah well it's
the user name comma actually so it's
going to check this is how it's gonna
look
basically since this is my friend array
which is a string and we're going to be
doing a new user so we need to delete it
with a comma as well so here's what it's
going to actually look like then we will
also be given yes and where we want it
where we wrote yes we just want to tell
it to be basically remove the friend so
what we're gonna do is we're gonna
change these to the variables with their
dynamic basically so this first one is
friend okay the second one is username
comma so that's the same thing except
this time it's dynamic so it'll be
different for each user and each user
trying who have each frame you try to
remove so we right now we can get rid of
this a statement and we're going to give
the that we're gonna create a variable
called friend one and this is going to
equal STR in the place
this function takes three parameters the
first one is what you want to replace in
this case it's username comma second one
is what you want to replace it with so
since we're trying to remove it we're
going to replace the variable username
comma which is the friends using them on
the comm at the beginning with nothing
to remove it and the last thing we're
going to do is tell it where to remove
it from or or Lord actually get this
information which is friend array so I'm
just going to copy and paste this I'm
going to say oh so it's gonna check each
one of these ifs teams so actually I'll
do again there'll be three of stamens
for each user the first one will check
whether the there is a comma at the
start of their username second one will
check whether there's a comma at the end
of it which is the using and comma two
variable the third one is just the
variable username because it's funny
checking if if there is no comma to
start there's no comma at the end then
the only other option is there's no
comma at all so that's what this option
is so then we can just copy and paste
this block will not block these three
ifs names and the only thing we have to
change is user to our username comma to
user comma username comma two to user
comma 2 and like username to user
oh I'm we also may see we also have to
change friend 1 to friend too okay
so we could to keep this easier to read
we could say
remove yeah that's yeah remove logged in
user from other person's array so this
will remove the M the two people from
each other's arrays which is basically
how we're going to remove them as our
friend and now we just have to say we
just actually create a query whoops and
this query is that what's going to
actually remove the M users from each
other's arrays so what's the update
users set friend a rant equal to the
variable friend one which we created
which is that because this is the first
query there'll be two queries in the
second query will be for friend to okay
so let me see what those yeah okay the
variable user is for the logged in user
so this will remove in my case if my
friend or a just if my friend Ray looks
like this and I removed new user and and
I'm not gonna cinema it's just gonna
remove user so this is what this query
does it's gonna wrap and it uses the
reason we said we're equals we're friend
oh we're equals now sorry update user
set friend or equal to friend one it's
because um or is it you see each friend
one variables and the friend one
variable gets given a different value
depending on which one of these if
statements runs and these have
statements change depending on what
those are on let's start
and or if there's no problem at all and
the friend one variable just equals the
same as a friend or a - you can
basically could sort of say the friend
warm variable equals friend array - mm
user name good set up which is sort of
what does but that's how we're gonna
that's why we're at it and that's not
how we write in PHP this is how we get
it to work so we've done the first query
now the second one is more or less the
same only difference is we obviously
change the name of the query make it
equal friend - um we add chat we update
this
we update this users around Iraq and
where their username is username and up
here is it username is the partner with
the profile okay so now what we do is
I'm just gonna echo friend removed I'm
gonna say I'm gonna um say I had a
location username which will take you
back to the person's profile you're on
so let's just see if there's a test so
if I hit remove friend okay you'll see
so what
like it did remove every go even though
we did get that error for them to find
variable looks like yeah I did actually
remove it so see okay so I'm fixed that
our all I did was just declare the
variable I just typed in friend to
equals nothing to declare it if I had
removed fret no wait actually I guess I
just changed up guessing all you if i
refresh when I hit remove friend
so I hurt my friend
I'm not says odds friend and my friend
or I should be empty so refresh yeah
okay I said no my friend array is empty
and I'm just gonna add a friend and
don't be actually so I've added it I've
added Francis as a friend again and I
will refresh the friend where I look
friend rather users table so I have two
rows in it or at one row on each friend
ray one friend simply so all I do is hit
remove friend it refreshes back or it
takes us back to the same page me wrong
except that's changed from remove friend
to add his friend and if I go to users
and it works its the friend array is
empty so that's basically it
so I thanks for watching don't forget to
comment rate and subscribe and yeah
that's basically it so thanks bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>