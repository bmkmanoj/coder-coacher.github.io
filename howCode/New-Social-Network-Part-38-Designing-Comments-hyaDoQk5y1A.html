<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 38 - Designing Comments | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 38 - Designing Comments - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 38 - Designing Comments</b></h2><h5 class="post__date">2017-04-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hyaDoQk5y1A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to be learning
how to display the comments underneath a
post because as you can see at the
moment all we have is the post itself
and then we have some details with the
post and the number of likes but we
don't have the comments when we click on
this button it does nothing so we're
going to fix that in this video before
we can display comments we need to go
and update our API and the FBI needs to
return the comments depending on what
post we send it so let's get started so
what we're gonna do inside our API is
we're going to create a new method for
whenever we send a get request to the
server so we're just going to copy this
and we're gonna change it from get users
to get comments and then what we want to
do is want to say armed is set get post
ID so now we need to get the comments
out of the database so we've already
implemented that in our comment class so
if I click on that and I just copy this
function I copy the inside of it and I
paste that in there so now we're
selecting the comments from the database
but we're using our old DB query
function so we have to say a DB query
using the object we created and instead
of acting out the comments what we're
gonna do is activate some JSON what we
also need to do is we're selecting the
post ID so we need to scroll over here
and we have the variable post ID and
we're going to change that to get
published ID so what we're gonna do is
create a variable called output that's
going to be a string and what we're
going to do is we're just going to
append onto that variable so we're gonna
set output dot equals a square bracket
to open up our array and then down here
what we're gonna do is we're gonna say
output dot equals the closing square
bracket and everything inside here is
RHS on object so we say output dot
equals and the first thing we output is
a curly bracket then we just I put the
closing curly bracket and then in here
we say output
we're going to append on the word
comment as a string and then we're going
to append on the actual comment which in
this case is comment comment just like
that then what we're gonna do is we're
gonna put a comment in there and we're
going to just copy this and paste it
again and we're gonna change this to
commented by and that's gonna be equal
to comment username and then we want to
put in a comment after each item in the
array and then right at the end what we
want to do is take away the last comma
so we say output equals sub string we'll
start in the zeroth character go to SC
our line of output
-1 and it's sub STR
at least start we want to put in our
output variable so now we're just going
to the iPod and we're taking off the
last character and we just need to take
away that comma and now you can see
here's our JSON being printed I so now
they've done that we've done everything
we need to do on our API side the next
thing we need to do is go to our index
page and actually display this output so
to display the side part we're gonna use
a modal window so in bootstrap studio
what we're gonna do is we're just going
to type in the word modal and we're just
gonna drag that in you can't see
anything to begin with but if I click on
that you can see here is our modal here
and if I set the opacity to one and I
said display equals in nine block you
can see there is our modal so in here
we're going to put in the post title in
here we're going to put in the comments
I'm going to delete the Save button
because we don't need that we just need
the close button so what I'm going to do
is delete these two styles and then what
I'm going to do is I'm going to export
this design
so here's our exported index page what
we're going to do is scroll down to find
our modal so here it is here and we're
just going to copy this into our index
page so we're going to scroll down and
put it in the same place we're just
going to paste it in here so now we're
gonna do is create a simple function
that runs when we click on the comments
button so we're gonna scroll down here
and in our edge acts after we get the
posts we're gonna scroll learn some more
and here is where we add the onclick
event for our like button so we're just
going to copy that and we're going to
use this to add the onclick event to our
comment button so we have this data ad
parameter so I'm just going to change it
to data post ID so that it doesn't get
mixed up with the like button and what
we're going to do is scroll across and
you can see here is where we add the
data attribute to the like button or
we're just going to scroll back the
other way and here's our comment button
and we're just going to paste in data ID
and rename it to data post ID so if we
just create an alert and I refresh
you can see when I click on the comment
button now we got alerts so instead of
getting an alert what we want to do is
again get the ID which in this case is
the button ID so we got that the same
way as we did the last time we just look
for button ID and instead of looking in
the D ID attribute we lock in the data
post ID attribute and then just like
before we create an AJAX request so we
just copy this code paste it in here we
change the type from post to get and
we're gonna go to FBI slash comments
post ID equals data post ID and then
what we do is we get the response and
instead of updating the HTML we're gonna
delete that and here is where we're
gonna show them the modal window so
we're gonna says show modal well
actually says show comments modal I will
just pass in the result variable so now
I only show comments modal method we
need to create that so we're just gonna
scroll down to the bottom and what we're
gonna do is create a function called
show comments modal and it takes our
result as a parameter and we're just
gonna say top modal top modal show to
display our modal window and then we're
going to say dot modal body dot HTML to
modify the body of it and say hello
world if i refresh click on comments you
can see now we've had a world printed I
I click on this one we get hello world
printed out again click on this one we
get nothing because we have no comments
on that post so we're just going to
instead of outputting how to world we're
gonna create a variable called output
and what we're gonna do here is we're
gonna say f for VAR i equals 0 I is less
than length I plus plus which is just a
started for loop to look through this
array and then what we're gonna say is I
put plus equals result i dot comment now
if I just go up here and say I put
equals an empty string to create it and
then what we can do is say I put plus
equals a horizontal line and now if i
refresh you can see now we have our two
comments printed out in this case we
have three comments printed out and then
finally what we're gonna do is scroll up
to the modal window
we're gonna go to modal body we're going
to create a style attribute and we're
just gonna say that the marks height is
say for example 400 pixels and if it
goes over that height we're just gonna
say overflow
why is automatic which just will
automatically create a scrollbar for us
if the content is too long and before we
go in the modal window we're just going
to change the title to comments or
something like that
refresh can see nights as comments and
we can see the two comments and as a
finishing touch what we're gonna do
before we append on the horizontal line
we're going to say I put plus equals
results i dot commented by and then
actually before that will say I put plus
equals and we'll just put in that
squiggly symbol that we put in before
now if we run this we can see who wrote
the comments to and if I resize the
browser you can see the social network
on the comments window and everything
resizes along with it and everything
works as we'd expect so that's it for
this video don't forget to Like comment
favorite subscribe don't forget to
follow us on Facebook Twitter and reddit
if you have any questions feel free to
email me at francis at haiku org but
that's it for this video and I'll see
you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>