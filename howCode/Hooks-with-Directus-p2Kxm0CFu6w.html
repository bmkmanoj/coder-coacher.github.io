<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hooks with Directus | Coder Coacher - Coaching Coders</title><meta content="Hooks with Directus - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hooks with Directus</b></h2><h5 class="post__date">2017-09-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/p2Kxm0CFu6w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so directors lets us use hooks for
actions and events and for filters so
lets us hook into directors
functionality so we can run our own tiny
piece of custom code when average
reactors does something so whenever we
create a table when we insert an item to
a table or update a table we can run our
own piece of custom code using two
actresses hooks and they're actually
really simple to set up so here's a page
that explains how the hooks work and it
gives us a list of all of the different
hooks that we can use so what we're
going to do is we're going to create a
hook that sends us an email every time
we add an item to our table
so the way we're going to do that is we
go to our directors folder and we open
the file called API slash configuration
to PHP so we open that file we scroll
down
and we look for this section called
hooks so what we're gonna do is every
time we insert an item into a table
we're going to sand ourselves an email
so to do that we're gonna put a comma in
there and we're gonna add a brand new
hook and it's going to be table insert
and when we run that hook it's gonna run
a function it's gonna take the table as
a parameter and the data as a parameter
and now what we're gonna do is we're
just going to run PHP mail function
so we're just gonna run something like
this it's gonna send an email to Frances
at O code org it's gonna have a title of
new item added in table and it's gonna
have a body of just new item so I save
this so in order for this to work we
have to install sand meals so to do that
we say app to install sand meal and we
run that and that will install sand meal
we also have to configure sand meal so
if I type in hostname you can see this
is a host name of this server to be able
to send emails you have to have your
host name of the server matching the
reverse DNS record for the IP address of
the server survives to run this command
with the IP address of this server and I
hit enter you can see that the result I
get back is this pointer record the
points to direct your stat high code and
that is exactly the same as the host
name of this server and we need that for
mail servers to accept emails from us
for places like Gmail to accept emails
from us what we have to do is we have to
have that point to record setup so
whenever I sent an email because they
haven't set any of the headers it's
going to go it's going to come through
as spam that's why it's gonna end up
here but if you just made your mail
function a bit more complicated you
added some headers and things like that
your message wouldn't come through as
spam and what I'm going to do now is I'm
going to add a brand new user so if I
save that you can see we've got no
errors and you can see here if we look
at the logs inside our sand meal you can
see that the email I just sent to
Francis at how code org has been
accepted for delivery you can see it
says the status of the message is sent
and because it didn't provide any header
information or anything like that it's
gonna go into my spam folder so I'm just
gonna wait and then as it arrives in the
spam folder we'll be able to see it so
you can see here's the email I just
received if I click on it you can see it
came from the user WWD
that's because that's the user that
Apache runs under that's the user the
PHP and Apache run under by default and
we didn't specify a different user in
the Hatters so just ignore that but you
can see the title of the messages up
here and the body is down here and if we
had to put in some headers it wouldn't
have gone into the spam folder but I can
see that just by adding users to the
database or adding any sort of items to
a table we can hook into directors we
can provide custom functionality in this
case all we did well
we sent ourselves an email but we could
do anything we wanted and we have all
these different hooks that we can knock
into being create a hook that when we
delete a table when we delete items out
of a table when we update a table insert
items into a table we can even run code
even whenever drag just is just starting
up so what we could do to make this a
bit more useful is sister-act just tells
us the table name that the item was
inserted into what we can do is we can
react to that what we can do is we could
say a new item was added to and then
just put in the table name and there's a
table called erectus underscore activity
it's an internal table so whenever we do
anything interact us it records it in
the activity and that's going to count
as an inserted row so what we could do
is we could say if table doesn't equal
track this activity then we're going to
send an email so now if I save this and
I add a new row to the table so I'm
gonna add a new post it's gonna be post
number two I'm gonna save that so
there's our post and now if I check my
spam folder in a couple of minutes
hopefully we'll have an email from
directors telling us that there was a
new item added to the posts table so you
can see now I have an email in my spam
folder if I open this up you can see a
new item was added to the posts table
because that's the table we inserted and
you item into but that's it for this
video don't forget to Like comment
favorite and subscribe don't forget to
follow us on Facebook Twitter and rat it
does it for this video and I'll see you
next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>