<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>New Social Network - Part 18 - Posting Comments | Coder Coacher - Coaching Coders</title><meta content="New Social Network - Part 18 - Posting Comments - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>New Social Network - Part 18 - Posting Comments</b></h2><h5 class="post__date">2017-02-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mRpeq6-FvQM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to be
letting people comment below a post so
let's get started so the first thing we
need to do is create a new table
our table is going to be called comments
we have an ID column for the comment
we're gonna have the comment itself it's
gonna be text to a life for long
comments we're gonna have the user who
posted the comment we're gonna have the
get posted and if we go to our posts
table you can see we have posted out we
have user ID so in the comments table
we're gonna change this to post it up
for simplicity post it out is gonna be
dead time
none of these fields can be no and the
user ID will be unsigned and we will go
to the table create a relation between
the user ID in the comments table and
the ID in the users table we also want
to create post underscore ID the post
that the combat relates to that's gonna
be unsigned and it can't be no and then
we're going to go to relations create a
new relation between post ID in the
comments table and the posts table and
the ID field in that table so we click
add and there we have our two relations
setup so now what we want to do is
create a where to comment below each
post so what we'll do is we'll create a
new form
and what we'll do is we'll create a text
area and we've already created that in
the profile page so we'll scroll down
there's our text area we'll just copy
and paste this I'm gonna use that for
commenting again because we're not
worried about the design in this video
and what changed out to comment changed
out to comment and then change that to
comment and we'll change the name attack
story to actually comment body will
refresh and you can see now we have a
text box for adding comments that
obviously is a bit too big so we'll add
50 columns I'm allowed last rows will
I'd say three lines well refresh and
there it's much smaller so again the
design is not important in this video
but what we're going to do is we're
gonna let you type into this text box
and then when you click comment it'll
show up below so to do that what we're
going to do is create a new class called
comment PHP
and that's gonna be similar to posts so
we go to post and here is our code for
creating a new post we get with the post
party the user ID who's logged in and
the profile user ID so what we want for
comment is gonna be comment body and the
post it belongs to so it's actually even
simpler than this function so we'll copy
that we'll paste it in here and we'll
change you to create comment we'll call
it comment body and we'll call it post
ID and we also want the user who wrote
the comments we'll say user ID comment
body we want to change that will keep
the same restrictions as we had for
posting and here we'll just get rid of
those two I'm gonna run a DB query
and here what we're doing is we're
checking if the ID is valid we will
check if it's not valid then what we'll
do is we'll a cou invalid post ID
otherwise we'll insert it into the
database plus a DB query
you
so there is our comments about to be
inserted what we want to do is we go
back to the index page when include the
comment class and then we'll copy this
change it to comment so we're saying if
it's at post comment then we'll say a
comment post comment
comment body then we want to pass the
post ad and we'll get the post ad like
this we'll say post ad equals and then
we'll just pass in post ad just like
that man here we will get it from the
gap variable so we've got the comment
body the post ID and we want to get the
user ID and we get to user ad just from
this function up here so we'll try and
run that will type a comment we'll click
comment we have an undefined method so
we obviously didn't call it post comment
we called it create comment
so we will just rhenium that will try
this again
we will resubmit the data and there we
go we got no errors if we go back to our
table and we click on content you can
see we have one comment now and it's
commented under the post the first
verified post and we checked and that's
the correct post and the user who posted
it is Francis and that's who I'm logged
in as so we've created the comment and
then now we need to be able to do is
display it so in the next video we're
gonna be learning how to display
comments it's really simple it's really
similar to displaying posts but that's
it for this video don't forget to Like
comment favorite and subscribe don't
forget to follow us on Facebook Twitter
and reddit and I'll see you next time
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>