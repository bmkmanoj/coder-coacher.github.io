<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make your Own Calculator in Python - Part 4 - Variables &amp; Executing | Coder Coacher - Coaching Coders</title><meta content="Make your Own Calculator in Python - Part 4 - Variables &amp; Executing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make your Own Calculator in Python - Part 4 - Variables &amp; Executing</b></h2><h5 class="post__date">2016-09-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DOuWQNln9wc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now what we need to do is we need to
correct that 16 shift reduce conflicts
warning the simple way we do that is we
be give precedence to our multiply and
divide and our plus and minus operators
so the way we do that is we create a
special variable in ply called
precedents and we set it equal to a
special topple within that topple we
create two more troubles and we create
the first element called left and we set
that equal to plus minus these are plus
and minus tokens and we said last ones
more because we want our tokens to be
left associative and we say I multiply I
may create another one called divide
this means that divide and multiply have
a higher precedence than plus and minus
and if you're aware of the order of
operations you'll be aware that multiply
and divide are done before plus and
minus so this allows our parser to parse
things correctly it removes the
ambiguity in the grammar because
ambiguity and your grammar is what
causes these shift reduce conflicts
they're not errors necessarily they're
just conflicts in your grammar which
means it's got some ambiguity by doing
this adding precedence to those
operators we have removed that ambiguity
so if we run this again you can see the
shift reduce error is gone and now all
it says we've two unused tokens and we
haven't created the error function yet
we're gonna create another grammar rule
we're gonna say a calque can also be an
expression or a Cal can be a variable
assignments will say a var underscore
sign which is a non-terminal
var underscore assign is we're going to
use to create variables we'll say def PE
underscore var underscore assign we will
say a var assign is equal to a name
followed by an equals token followed by
an expression and we'll also say a name
equals a name this means that a variable
can become to another variable or
variable to the iput of an expression
but it can't be an empty which is up
here because that would make no sense
and here what we do is we create another
trouble which is going to be part of our
tree and we say a p0 we want to create a
double and we're going to call it and it
equals which means a sign and we're
gonna pass it the variable name which is
as you can see is this is
p 0 this is p1 Swissair PU 1 whoops and
we're going to pass it the value 1 of a
sign which is going to be either a name
or an expression and these are p3 and
our double so that's me that that's just
let's just run that okay we have an
error in our syntax on line 65 the
reason we have an error is because
instead of having the colon we should
have the or which is just a straight
line run that now if we say 1 plus 2 we
get that tree and we say a is equal to
100 we get that tree if we say is equal
to B we get that tree which is correct
if we say a is equal to 1 plus 2 we get
a is equal to the output of 1 plus 2 and
this hasn't actually done anything yet
because we're not evaluating our tree
the parser just builds the tray up using
the grammar rules we specified one thing
you'll notice though is if I try to say
1 plus a we'll get an error we have a
syntax error we can't include variables
in our expressions so we'll fix that by
saying copy this visit here we can say
expression underscore var and we'll see
an expression is equal to an iam and
we're gonna just create another tree
call it a var will pass it P 1 which is
the name so now if we run this we get no
syntax error so the reason we've got
this error is actually quite simple what
we've done is we've said an expression
can be an iam but what we've done up
here is we've said of our site as a name
equals expression or name equals name
but we've essentially said an expression
can be in name as well which means we've
got two rules that look like this so
what we'll do is just remove Neum is
equal to name because a name can be an
expression and that will actually get
rid of our error if we just run this
again we have no error and I we just
don't have the error function defined
and if I say a equals 100 we have that
if I say 1 plus a we also have that now
we've no syntax error we are very nearly
done with our parser we just need to
create another function which is the one
that's causing the error is P underscore
error function to get rid of the error
that we're being shown all the time so
we said P underscore our page
and we'll just do something simple like
print syntax error find and now we just
run that one more time we can you can
see we've no errors if we just say one
plus two we get that if I say 1 plus an
outside which isn't a valid character
we'll get a syntax error you can see it
says illegal characters and we find a
syntax error so there's our parser done
and what it does is produce trees that
we can now evaluate so the way we
evaluate the tree is we go up here to
the top and instead of just printing out
the I pot we want to run the I put
through our run function so we just pass
run around that now I'll scroll down
here and I'll say a Daffy to create that
run function and I will simply just save
print P so let's just run that we will
say one plus two
you see we get one plus three printed a
we get non printed out because we're
printing one plus two here and then what
we're doing is printing at the output of
our run function which doesn't return
anything so we're just getting none so
that's where we're getting up and in
here I'll just put in the two great
aren't signs and run it you'd see it
looks more like interactive interpreter
like we get with Python for example if I
do it like that I say one plus two we
get the same thing so what we want to do
is we want to say if type of P is equal
to topple then we'll do something else
we'll just return P
so the reason we're saying that is
because if it's a tupple which means if
it's a var or it's an expression or it's
our sign it's gonna be a topple which
means we have to do some extra
processing if it's an int or float it's
just going to be a regular integer or
float which means we're just going to
return that to the run function because
the run function is going to be
recursive so we can say FP 0 and if you
scroll up here you can see p 0 is this
plus sign here if p 0 is equal to a plus
then we want to say return and we don't
know if this one or this - it's going to
be an expression that requires further
processing so we have to run it through
the run function again even though it's
just going to be returned back in this
case so we say return run P 1 which is
this first parameter and then we say
plus return P 2 through the run function
plus run P 2
so let's run that and what we should get
if I say one plus two we should get
three and you'd see three is printed out
they say a 1 minus 2 we get none because
our run function doesn't know how to
interpret that so we're just going to
copy that say LF it is equal to a minus
we just want to do the same thing but in
Reverse LF it's a plus and if it's a
multiply actually and we want to
multiply them together and finally L if
divided we want to run that through the
divide so let's just run this now we'll
say 1 plus 2 times 4 how we should get 9
printed out to us you see we get 9
because our calculator knows the order
of operations if I say 1 point 2 plus 2
point 4 you'd see we don't get 3 point 6
quite exactly because we're using
pythons numbers if I just quit that and
I say a Python 3 and I run this through
Python 3 we'll get exactly the same
result that's just the way
floating-point numbers are stored in the
computer we lose some accuracy so that's
it for this video don't forget to Like
comment favorite and subscribe in the
next video we'll be finishing off
hopefully and that will be creating the
variables and assigning variables and
locking your variables and things like
that so thanks for watching and I'll see
you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>