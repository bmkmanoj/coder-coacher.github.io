<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make a Social Network from Scratch: Part 41 - Uploading Photos | Coder Coacher - Coaching Coders</title><meta content="How to Make a Social Network from Scratch: Part 41 - Uploading Photos - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/howCode/">howCode</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make a Social Network from Scratch: Part 41 - Uploading Photos</b></h2><h5 class="post__date">2012-11-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DNIYUDofQPA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so hi and welcome back to this video
today we're going to be doing is we're
going to be allowing the user to upload
photos to their photo albums so well
that's really all there is to say so
let's get started so this is where we
left off and Adam here's where we left
off here so what I'm going to do first
is I'm just going to create a new page
I'll save it
let's save it as a dot PHP file and save
it as upload photo dot PHP so here's our
page saved so what I'm going to do is
come up here and I'm just going to go up
to the top and copy that so now if we go
to upload photo dot PHP here it is here
so I'm I'm just gonna make it a bit more
aesthetically pleasing so upload your
photos and then all we have to do is put
it horizontal line underneath it so
there it is so at this one we can go and
open we can open the account settings
file because it has some code for
actually uploading images and if we oh
well okay we're just going to copy the
form actually so here's the upload form
so I'm just going to copy that and paste
it here so let's just say obviously it's
just going to look like a normal form so
let's just get rid of this image it's
not it doesn't look very good but okay
so I just thought of a better idea I'm
actually okay so I'm let me see my other
day in front of the video but here's our
forum it's not very I mean it's not it's
not really anything very special it's
just a basic file uploader with an
upload button underneath so if you want
maybe you can add a banner for a multi
image upload form but for the video with
these videos I'm just going to add a
basic upload form just to provide the
functionality for uploading photos so
where is it here it is it says upload
pack so that's the name of the submit
button so up here all we can we need to
do is type in if is set post upload pic
and then we can just echo button pressed
so what this means is if they press the
submit button it's going to show them
that so let's try it and it says button
pressed so that's good oops so in here
we can just cut a delete down and paste
in some of the code we used in the other
videos um so we just copy this
so copy all of that and then we're just
going to paste it in here and fix it up
we need to so first we need to change
this so instead of we can keep it in the
user data folder but we're going to put
it into the user photos slash just say
user photos for nine and then paste it
in there and that's why this was open
this folder so all we're going to do is
whoops it oops it's not what we want
all right so this means now I can click
away so now I can add a new folder the
docs name in the wrong folder so type
top and go to the user data folder and
call it think it's user photos so and
here's where all our files will be
stored and change this to user photos
and for now we'll just undo that query
and then change this to upload photo op
PHP so now if we refresh and we're okay
like 32
okay so let's just try putting another
one of these in I'll go so that fixed it
so if we go to choose file and because I
just made my way to the fine friends
folder and what I'm going to do is I'll
go to the egg file alright not that oops
images folder and I will just upload
default pic so now if we click upload
image and obviously it set us back to
this page when it uploaded and in user
photos we have a randomly generated
folder name or the folder our photo
called our default pic in it so that's
good that means it's working and we
hardly had to do anything for that so
the next thing we have to do is inside
our albums or our photos we just need to
change the image URL so that it matches
the photo so what we're going to our
match is the URL of the photo so what
we'll do is we'll just say let me just
delete this actually what we'll say is
insert into you our photos values wire
username equals went or yep user name
equals user and then here we're just
going to insert some run our the values
to fill the fields the most important
one is obviously the around the photo so
that should be enough fields so the
first one is IDs we can leave a blank
second one is the UID of the album so
for the moment we'll leave that as test
see it posted we need to create a
variable for that so I'll just call it
date 4/9 description let me create a
variable for that and image URL so image
URL is actually just going to equal user
all right we have to I'm not to include
the FL URL because I'm what it won't
work otherwise so just if you're doing
it on your website just make sure to
include the full URL I'm in in here I'm
just going to put in user data forward
slash user photos forward slash and then
run them dirty and then finally profile
back name so a forward slash profile
back name so now what we're going to do
is we're just going to run this query
and see what happens or I run this
script so let's upload search icon this
time and click upload it uploaded
successfully and here it is so now we go
to photos okay so
did not attend work it says 1 total so
for some reason that query is not
working so to keep things simple let's
just copy this other query from the
index page just see if trying to figure
out what's going around because for all
intensive purposes that should've work
so it's just something simple that I've
probably missed so just change this to
photos then this one to test this one
see it okay exits username so I think I
realized why it didn't work because I
left at the username field so actually
let's undo that back so let's just add
in another failed let's try it this time
obviously we're going to get on the hour
we won't actually but obviously there
was a few hours or not because of the
undeclared variables but doesn't matter
so let's just say that this actually
work no it didn't okay so I'll go back
to em ups I'll go back to the original
plan so just copy this query change that
photos on the end this goes ID username
tit prescription and then Aram for the
moment we'll just leave it as just image
you are okay yes I'm I realized my undo
that leave that the way it was so I had
the reason we were having our problem
it's because when you insert something
into a database there's no where clause
in the query so that was imagining an
update query so now if I'd like choose
file try it again
this will work most likely yeah to total
so as you can see it actually did insert
the reason that says as 0 0 0 is because
we didn't give the date variable a value
didn't give the description of odd so so
now if we case where we need
optimist run actually but whatever now
if we go to my albums not actually I
won't show up because the UD IDs are
different so what we'll do change that
one to test and then change this one to
user so no let's try it for the final
time now we go to album slash cinema
test album okay so let me see that try
out again so it's just log on log back
in see what I don't know why that's not
working so let's try album slash cinema
okay so for some reason that keeps
refreshing us back so let's just comment
out these lines for now and that see our
photos so undeclared variable UDID
are UID even line 25 okay so what the
problem looks like is don't like photos
query doesn't smell like photos era well
there doesn't seem to like it when it's
more than one photo so it's just try
adding a limit thing limit equals
0:20 so let's just refresh the page once
so I limit 20 so now if we go back
localhost now we try to upload a photo
let's just refresh okay so we're getting
the same problem so um let me see yeah
okay the problem is we didn't put a
while loop in here so right maybe not so
I know what's happening um it's actually
because we've declared this variable in
this white in this F statement and we've
closed off the F statement and we try to
use it somewhere else so it's not going
to work so to fix this all we have to do
is cut this and then just paste it right
here and we get zero we are nothing so
so I know I've made a lot of mistakes
this video but sorted out now so all we
have to do is change this to picture
then down here we can just say
nevermind we don't need to put anything
down there
so before we ask see the result of this
we also need to change these from gat to
ro because I don't know I stupidly am
use ro up here and then get for all the
booze so now we just fresh and here it
is we have our two images at in the
album and you can see here we come as
smiley images as we want and then they
all show up in the album so this video
is out alarm sticks and I'm sorry for
that but in the next video we'll just be
finishing all this off getting it ready
to go and then moving on to something
else in the series so if you enjoyed the
video don't forget to comment rate and
subscribe or comment like and subscribe
I promise I will make some of the
mistakes next time and don't forget to
subscribe if you enjoyed it and why you
want to see more time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>