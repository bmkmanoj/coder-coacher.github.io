<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>REST API Tutorial (Node, Express &amp; Mongo) #16 - Creating a React Component | Coder Coacher - Coaching Coders</title><meta content="REST API Tutorial (Node, Express &amp; Mongo) #16 - Creating a React Component - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>REST API Tutorial (Node, Express &amp; Mongo) #16 - Creating a React Component</b></h2><h5 class="post__date">2017-04-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/f7zXuZRsCTk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">how do campers and welcome to your
sixteenth rest API tutorial and in this
video we're going to create a react
component to interact with our API
alright then so I'm back in the index
file but before I start writing anyone
yet the code whatsoever just a quick
warning I'm not going to be moving at a
pace that is quite slow in this tutorial
because if I explained everything I'm
about to do with the react it would take
about six hours or about twenty
tutorials so if you find yourself
struggling to keep up or if you've not
used we out before I would strongly
advise you to check out my up for
beginners series and I'll leave the link
to that down below there it goes in too
much detail and if you manage to follow
that then you're definitely going to
understand everything I'm going to write
in this tutorial
ok so let's create this react component
I'm going to come underneath these
scripts and just do a little comment
first of all saying create a react
component just so we know where
everything is and then inside here we'll
do our scripts up so script but this
needs a type attribute equal to text
forward slash Babel just to say hey this
needs to be transformed by babel into
vanilla JavaScript so that you the
browser can understand it okay so inside
here we need to create our react
component and the way we do that is
first of all declaring a variable I'm
going to call this ninjas and set it
equal to react dot create plus so this
now is our react component and inside
this react component we only actually
need one method and that is the render
method we're going to add more in but
for now let's just add again this render
method and this is going to equal to a
function which is going to return our
JSX
okay so we're going to return all of our
template code inside here so when this
component gets rendered to the Dom
everything that's inside here all the
HTML in essence that we write inside
here is going to output here in a dollar
and we'll say we're later on so now
let's just create this kind of template
so we'll have our surrounding give first
of all with an ID equal to ninja -
container ok cool so that's our
surrounding div and then within that I
want to create our form because this
is where a user is going to enter their
longitude and latitude and then click
Submit
and then we're going to return all the
ninjas within a certain radius to them
to display on the screen okay
so the first thing I want to do is that
form tag and this is going to have an ID
too and that's going to be equal to
search cool now we'll come back to this
form tag in a bit because I do want to
add in an event and on submit event to
this form but we'll do that later on for
now let's just create this form so let's
create our label for the first input for
your first of all and that is the answer
your latitude and then after that we'll
create our input so input we can spell
it correctly the tag is going to be text
and then we're going to give it a rest
attribute and I'm going to explain it a
little bit later on but let's just call
that what for now shot for latitude it
will give this a placeholder equal to
latitude and then we'll use the required
attribute just a second this is a
required field okay so let's just copy
this both of those and paste them in
because we want one for longitude as
well so let's change this to longitude
and then we'll change this to LNG a shot
for longitude and this to longitude as
well and I think that's all we need to
do yep okay so that's required as well
so now we have our two input fields we
need to create a submit button so that
you click this to retrieve the data
so we'll say input type is equal to
submit and we change the value of this
so it shows on the button itself final
inches okay cool so now we have our form
created right there
so once a user click this form we want
to return the ninjas to display on the
screen where are we going return those
well essentially it's going to be a list
of ninja so it makes sense to return
them in a list format so let's create a
little ul here and then right here is
where we're going to output our ninjas
okay so we have to use this syntax right
here where we're using killing basically
to output dynamic content in react okay
so I'm not going to keep that there now
I'm going to take it off but that is
where we're going to output our ninjas
we don't have them yet so I'm not going
to put them there just yet okay so this
form how is it going to work well first
of all we're going to add an on submit
event handler to this so we'll stay on
submit and set this equal to we don't
need this in quotations this which
refers to this Plus this component right
and then we're going to create a
function called handle submits a list or
handle submit so when someone click
Submit here this function is gonna fire
which we're going to create within this
component in a minute and in that
function what we're going to do is make
an API call to retrieve the ninjas
within a certain radius of these entries
they've placed into these inputs right
here to the latitude and longitude make
sense
okay so let's create this method then so
I'm going to copy this and then what I'm
going to do is come beneath this render
function right here this render method
and a little comment and then put in our
next method in this class so this is
gonna be false and I'll submit a bid
just copy that so I'll paste it in okay
so this is also going to be a function
and it's going to take the event object
okay so we get that automatically in
JavaScript and react so then what we can
say is e dot prevent defaults and that's
going to prevent the default behavior of
this form so when we click Submit we
don't want it to revert to the default
behavior we want to do our own behavior
which we're going to define within this
function so first of all I want to get
the inputs that they have put into these
fields and say what are the ends of what
numbers so the way I can do that is by
using these wrists right here these
references so these rest attributes give
us a handle if you like into the code so
right here we can access them so the way
we handle them or the way we access them
sorry is by first of all let's create a
variable called LNG and set that equal
to this which refers to the component
dot Rex that gives us all the references
dot LNG because that's the name of the
longitude right there right okay so
we'll get that one first LNG and then
that just gives us a reference to this
from this tag if you like this component
so or this element so what we need to do
is get the value of this element so we
say dots value to get a value okay so
then that's going to give us whatever
the user inputs into the simple field so
we'll do the same for the lander
latitude yeah that's right so we'll call
this L empty and change this to la T as
well cool so now we've got both of those
values that the user inputs and now we
need to use them to create our query
string if you like so remember when we
created a get request it was at forward
slash ninjas and then after ninjas it
was a little question mark and then we
had a little query string see longitude
equals whatever and latitude equals
whatever and then when it hits the
server then if we actually try and find
it so it's in our routes right here if
we go to API OGS when it hits the server
then it looks for ninjas within this
kind of radius within this radius sorry
me too these values right here that we
enter on the query string right so what
we need to do is create now a query
string to send to the server to query
the API so we can return some one
interest to us so the way we're going to
do that is by first of all using the
native fetch method that's going to go
out and fetch some data for us okay so
this is to make a get request if you
like and what we're going to do is
passing that query string right here so
it's four slash API solid flashes ninjas
and then it's a question mark and then
lmg is equal to something right and
what's equal to it's equal to this thing
right here we wanna find ninjas near to
this longitude so we'll add in that
variable so it's course
LNG and then plus the next part of the
probe string so open those up again and
we'll say and LNG or sorry and l8e
he called to the latitude so now we need
to close those up and say plus L ATT and
then that is the end of our query string
all right so it's /a TI /b ninja's which
goes to the get request and then this is
a query string right here we're passing
through the longitude and latitude
variables we've just got from this all
so we're making that fetch request if
you like that get request and this
returns towards a promise so remember on
promises we can say dot then because
this takes some time to complete right
so we can say dot then which is going to
fire a function within it after this
action is complete and it's going to
return to us the data that it finds
though it's returned okay from the
server from the API so in here
what we're going to do is actually just
say return data jason right so basically
when we click on submit right here it's
going to fire this this function right
is going to prevent the default behavior
get the longitude and latitude make a
request to the get handler with this
query string so it can return towards
some ninjas right and then in that data
which is returned towards we want the
jason we want to pass adjacent of that
so we say dot Jason's pass that and
we're returning them and since we're
returning that here what we can do is
say dot then to get that jason right and
then in this dot then method I'm going
to use a flat error function which
basically means I don't have to bind
this okay that this keyword because what
we're going to do is alter the state of
this react component and if I didn't use
a lateral then it's not have to bind
that this keyword to different functions
and it gets more complex so instead
we're going to use a flat error function
so that looks like something like this
so the jason is going to be the data
this thing right here that we're
returning ok so this is this and then
we're going to say in here for our
function and inside this function what
we want to do is set the state of this
component okay so the state of the
component manages the data of the
component if you like so we'll say this
dot set state and then inside this
function what we need to do is
check the state of the hinges so it's
going to have a ninja's property the
state of this component and that's going
to be equal to the adjacent right here
that we just passed it makes sense so
now we're basically updating the state
of this component so now we've received
that data we're going to update the
state of the component and when the
state of the component changes then it
rear Enders the Dom if you like it rear
Enders this stuff to the Dom so then we
can output the ninjas right here okay
but before I do that what I want to do
is up here create get initial state so
this is going to set the initial state
of the component before we retrieve
anything just whatsoever so they get
initial state and this is very efficient
like so which is going to return an
object and remember it was the ninjas
property not returned returned and it
should be the ninjas property and
currently it's going to be an empty
array because when we first start this
application there's going to be no
ninjas returned to us but this state
changes when we click on some mix and
when we click on submit we're making
this request and we get this JSON back
and then we're setting the state of this
ninjas property right here it's equal to
the JSON which is returned to us make
sense cool so now we have that Jason I'm
just notice the spelling mistake so I'll
call that means your container okay cool
we have that JSON now within this
property so when it rear Enders we want
to output those ninjas so how do we do
that well first of all what I'm going to
do up here is create a variable right
but in the render function called ninjas
and I'm going to set that equal to this
just eight ninjas so when it updates
right this thing right here is going to
update as well because this render
function is going to rerun so we're
going to have access to this state
object right here so we've got all those
ninjas in JSON format now in here but
it's in JSON format what I want to do is
map them to some kind of HTML right so
the way we do that is by
ninjas which is the same variable is
equal to ninjas map and then inside here
there can be a function and that
function is going to take that
individual ninja and then the index of
that ninja okay
so inside here what we can do is again
return some code which we want to output
so I'm going to say return and then
inside this return we want to output
them in Li tags so we'll say Li and this
needs a key this is just something
reactive uses to identify each
individual Li and that's going to be the
index so say we returned five ninjas for
the first things you're the index the
index is gonna be 0 then 1 then 2 then 3
so forth right so this is like an
identifier for reactive you like and
then within each ninja we want to output
a few things we want to output whether
it's available the name of the ninja the
rank and the distance from us right so
we'll do for sponsors so to expand the
first one classic game this is a react
thing you can't just put in plastic as
class is a reserved keyword in
JavaScript so we can't just use class we
have to say class name to apply this to
a class and what we'll do is this class
can be ninja which refers to listing
right here the instance of the ninja
which is passed to us so we're cycling
through each one right and whichever
ninja is returned to at first then this
is going to be equal to that object dot
object right dot and we'll see this
later on I'll console that log all this
data so you can see where I'm getting
this from and we had an available
property remember on our ninja model we
had an available property so this is
either going return true or false
so we're going to have a class of true
or false depending on whether that ninja
is available on them and what we can do
is just style is differently and in fact
I already have in the CSS file so false
is going to show us red and true is
going to show as green make sense ok so
let's close off that spawn tag now we
don't need anything inside it
then we want another with a class name
equal to name this is going to be the
name of the ninja and this time what we
want to do is output the ninja object
books dot name and then we want another
source a spud and class name is equal to
this time we want rank and inside here
we'll say ninja
a branch and then finally we want to
span plus name is equal to this this is
going to be the distance from you so the
quantity you enter how far away is this
ninja and right here what we're going to
do is a little bit JavaScript so math
dot floor that's going to if it's 2.1
that will bring you down to two or it's
2.7 it will bring me down to the - it
doesn't round up okay and then what
we're going to say is ninja dot distance
right Oh ninja dot this and then over
1000 right and then this is going to
give us kilometers basically so this
property right here is returned towards
thankful to the geolocation we set up
when we query user Jionni query it
returns to us this disk property on the
ninja so we know how far away it is
basically right but it returns it to us
in meters instead of kilometers so
that's what we do we'll just convert
those meters into kilometers and it's
just going to give us a rough idea right
okay cool so that is the HTML return for
the ninjas the only real thing we need
to do is render this to the Dom now so
I'm going to come right to the bottom
and I'm going to say react Dom dot
render this is how we transfer all this
GFX codes right here this stuff here
into the Dom itself into the HTML and
what I'm going to do is render this
component this ninja component so what
we need to do is get the name of this
right here okay so ninjas with the
capital S and we're going to output it
in a tag like format like so and what
self close up and I don't want it I need
that one on so sub close
then we can say where do we want to put
it and I want to put it documents to get
element by ID I want to put it in this
ninjas IB or right here okay so all of
this is going to be out put into here so
let me just pop that in here like so
so now what it's going to do is place
all that code in this IP make sense okay
so now that is our rap component created
let us give this a whirl
so let's view this in a browser and see
weapons I'm just going to give this a
quick refresh and nothing appears so I'm
just going to see if there's any errors
in the console which there is a just
spied one man so what's going on okay we
have stupidly or rather I have stood
from the mist of a comet on this
function right here so we need a comment
advocate there's another function coming
after it and I've also just noticed I've
not output the ninjas right here which
we need to do so what we did right here
is we returned all of this code into
this ninjas variable so now we need to
output that ninjas variable within this
ul so we get that series of Li tags
right so I'm going to save that now and
there hopefully now this is going to
work so cool we get this and let's enter
in minus 18 and 25 for the longitude
find it ninjas and yep nothing is
happening maybe you've got these the
wrong way around
let's try putting that into there
putting 25 above and cool there we go so
now we're getting in just returned to us
they are all available and they're there
in order of distance from us or 21
kilometers 50 88 let's just change this
for example to 26 and see if this
changes the output yep now it changes
the order of these I'm going to change
this to 24 I'm going to changes to 81 so
you will get this no nothing within that
distance 24.8 and 80.5 maybe yeah we get
some this time okay so basically this is
crewing our database now and it's
retrieving that data using a get request
and it's sending it back to us so we can
display it in the browser so it doesn't
matter whether this is alpha
or whether this is a mobile app or some
of the website we can query now this API
and confined ninjas within a certain
area okay and there's much more you can
do with this you could add in another
sign up page with ninja so you can make
post requests etc</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>