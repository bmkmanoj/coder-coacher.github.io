<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB Tutorial #12 - Deleting Records | Coder Coacher - Coaching Coders</title><meta content="MongoDB Tutorial #12 - Deleting Records - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB Tutorial #12 - Deleting Records</b></h2><h5 class="post__date">2017-01-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ut8oZDiGSWc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you know or something guys welcome to
your twelfth MongoDB for beginners
tutorial and in this video I'm gonna
show you how to delete records from the
database okay there so there's a few
different ways we can go out and remove
records from the database this first way
here card don't remove this car variable
refers to a single instance of the model
a single record if you like
so assuming we've gone out and we've
already found a particular record and
stored it in this variable we can then
call don't remove on it and that's gonna
remove that record from the database so
we're calling this on a single instance
we could also call dot remove on the
model itself right there remember this
model refers to the whole Mario
characters collection so we can call dot
remove on that as well and we can pass
some criteria within this remove remove
method to base this removal on so for
example if I pass a nickname Mario then
it's gonna go out remove all the Mario
characters with a name of Mario okay we
can also use this method on the model as
well find one and remove and this is
just gonna go out and find the first one
which much is our criteria in here for
example ID or the name it's gonna find
the first one that matches that I
removed just that one okay so we're
gonna take a look at this one in this
tutorial this bottom all and we're gonna
create a new test which goes out and
removes one record from the database so
how we're going to do this what is the
process well first of all we're going to
create and save a new record to the
database much like we did in the last
tutorial we're going to do that before
our test starts so that we've got
something to remove from the database
then we're going to use find one and
remove to remove that very record from
the database but then we want to check
that this is worried what I was search
something so what we're gonna do is
we're going to go out we're going to try
and find one in the database the one we
just removed right and we want that to
return a result which is not meaning it
can't find it anymore and if it returns
a result which is null it means that
this thing right here find one and
remove has been successful okay so let's
jump to the code okay so this is the
final test I'm currently and what we
want to do now is delete date
from the database so I'm gonna create a
new test file and I'm gonna call this
deleting underscore test a yes and again
cuz I'm super lazy I'm gonna go to the
finding one copy all this and I'm gonna
paste it all in here and let's just edit
some of it so first of all we'll change
this to deleting records this is our
describe block we are gonna keep this in
we're gonna create a new record in the
database before each one of these tests
first thing I'm gonna do is delete the
bottom test right there this it blob
we're only gonna do one test for now and
we're going to change this right here to
delete one record from the database
alright so we've got our character in
the database ready to be deleted then
what we want to do is get rid of this
and instead use Mario car dot and then
it's find one and remove find one and
remove okay cool
so now what we're going to do is pass in
our criteria which one do we want to
remove so we'll just pass in the name
property and the name is Mario we
specified that up here so that's gonna
go out and it's gonna find this record
in the database in this collection and
it's going to remove it okay so then we
need to check that this has actually
worked
now remember this is asynchronous
meaning it's going to take some time to
do we only want to find the next bit of
code after this is completed therefore
we can make use of the dot n method
because this is a promise and we can say
dot then fire at this function in here
okay
so inside this function what we want to
do is then make sure that this has been
removed so we're going to attempt to
find this record which we just removed
and we're going to hope that it returns
null meaning the record can't be found
and that this has been successful
so we'll say Mario car dot find one and
the name is going to be Mario
and Mario and then this is also
asynchronous meaning we want to wait
until this is completed to find the next
bit of cold where we're going to assert
our statement okay so we'll say dots and
then again and inside here there's going
to be a function which fires after this
little bit of code is complete alright
so after it's found it or hopefully not
found it it's gonna return towards a
result so if this finds the record right
here then it's going to return that
object who was there if it doesn't find
this record then it's gonna return null
in this result variable okay so now we
can check if this equals no we can
assert that the result is triple equal
to no and that's what we want if this is
equal to null it can't find the record
therefore we can assume that this has
successfully removed the record from the
database make sense cool so now we just
need to concur on to say hey we're done
with this test you can move on so let's
check this out we'll save it and I'm
gonna move to commander and I'm gonna
run NPM row test and awesome we can see
now deleting record
delete one record from the database this
has worked okay if we just make this
fail just so I can show you I'm gonna
say this one right here we'll call it
Mariga right so we made a title then
this obviously is not going to work
right it's not gonna find this one a
remove so hopefully now this is gonna
fail so letters pop into this thing
again and run npm run test and now we're
seeing all of these errors and you can
see this one is in red deletes one
record from the database that is failing
okay so that is how we delete records
from the database in the next tutorial
I'm going to show you how we can update
records</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>