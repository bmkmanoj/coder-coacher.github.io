<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Vuex Tutorial #7 - Actions | Coder Coacher - Coaching Coders</title><meta content="Vuex Tutorial #7 - Actions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Vuex Tutorial #7 - Actions</b></h2><h5 class="post__date">2017-08-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/arhCOcxIUo4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I would again welcome to your seventh of
the us tutorial and in this video we're
going to talk about options I just want
to point out one of the limitations of
mutations and that's that we really
shouldn't be using any kind of
asynchronous tasks with inside them for
example say inside a mutation you wanted
to reach out and grab some data from the
server you want to communicate with the
server that is an asynchronous task and
it's going to take some time to complete
so I'm not going to do that but instead
what I'll do is a set timeout which is
the same kind of thing it's going to
take some time to complete before this
callback function is going to be fired
so let's do a set timeout and just
imagine this is where you're going out
and grabbing some data or communicating
with the server and what we're going to
do is find a function in here and this
function is going to be listing right
here the callback function where we're
changing this state all right okay up
and down here we're going to have a
delay of 3 seconds which is 3,000
milliseconds so this callback function
right here is going to change the state
after 3 seconds so this right here is
like a synchronous code right it's going
to take some time to complete so if I
save this now let's view this in a
browser to see what happens so if I try
to reduce the price now notice this
straightaway doesn't change but this
appears straight away then it's 3
seconds and then we get the change ok so
it's very hard for us to attribute this
change right here with the change that
happened several seconds later and if
we're doing many different actions
rather many different mutations that
have asynchronous code inside them then
it's going to get very hard to track
which function is changing what okay
because we've got all these different
time delays going on so really we
shouldn't be putting asynchronous code
inside mutations fortunately there is a
way around this and that is using
actions so actions under the layer which
sit between the components which is
committing the mutation and also the
mutation itself okay so this sit before
the mutation and they
form any kind of asynchronous code
within the action itself so let's do
this first of all let's get rid of this
stuff and then let's create an action so
down here or delete mutations will do a
comment and we'll say actions and inside
the actions this is an object by the way
we can have as many actions as we want
rayvin a name and action reduced-price
just keep everything the same and this
action can take a parameter called
context and the context basically is
kind of like the store if you like it's
not exactly the store but we can kind of
use it as the store so we're going to
take that as a parameter and we'll use
that in a minute
we're using a flat area function here
and inside here we're going to do some
kind of asynchronous tasks so again I'm
just going to say set timeout for now so
this set timeout is going to fire some
kind of function and that function is go
fire after two seconds right so inside
this function then what I'm going to do
is just call this mutation right here
okay so we're doing the same thing
really instead of putting the
asynchronous tasks around this thing
we're just doing it here and then
calling the mutation once this
asynchronous task is complete so say for
example you're reaching out to the
server to communicate to it it responds
in some way shape or form then we're
going to fire the mutation so how do we
find the mutation because inside the
component over here we'd say this stored
up commit then the mutation name this
time all we do is say context which is
kind of like the store and they'll say
stop commit and then we can say which
mutation we want to commit we want to
commit the reduced-price mutation okay
so now if we save this and then go back
to this over here instead of committing
directly from the component now what
we're going to do is dispatch an action
instead and this is typically how we
perform mutations even if you're not
doing any kind of asynchronous tasks
it's always good practice to instead of
directly committing
a mutation from your component to
dispatch an action which can then
perform some kind of mutation or commit
to the mutation okay so getting the
practice of doing it so for now what I'm
going to be we'd get rid of this code
and I'm also going to get rid of this
commit right here so instead of that you
want to save this store dispatch and
then we're going to dispatch an action
right here and the action we're going to
dispatch is reduce iPhone price so just
to run through this again
when in this component we're clicking on
this button recalling this reduced price
function this method down here then it
says this does stored-up dispatch and
we're dispatching an action here and
we're dispatching the reduced price
action so if we go to the store we can
see that action right here and it's
reduced price we're taking the context
as a parameter which is a little bit
like the store itself it kind of
represents that then we perform some
kind of asynchronous task this is just a
set timeout but for you it could be
communicating with the server or
grabbing some data then when that task
is complete in this case after two
seconds what we're doing is the same
context don't commit a mutation then
we're calling the mutation after this
asynchronous task and this is because we
shouldn't really be performing the
asynchronous task inside the mutation
itself so after two seconds we're going
to commit this mutation which is then
going to change the data so if we save
all this now and come to the browser I'm
just going to refresh before when we
clicked on this we'd see the mutation
straightaway but it would be two or
three seconds before the data changed
now if we click it we don't see the
mutation until the data changes so now
that in sync and now we can easily
attribute the change to this mutation
right here okay so much easier when
you're debugging so one more thing I
want to show you and that is how we can
press through parameters to these
actions and mutations so if we go back
over here we can see right now we're
dispatching this action but what if we
wanted to pass through some kind of
parameter to say okay well I want to
reduce the price by a certain
okay well what we could do where we call
the function up here is passed through
that amount and this could be dynamic if
you want to I'm just going to pass
through four but like I said could be
dynamic the user could enter a value and
you could use that value if you wanted
to so we're passing for now through as a
parameter to this reduce price method so
we can accept it in the method and we'll
call it amount so if we want to pass
this data through when we're dispatching
an action we can pass it through as a
second parameter right there
first parameter is the action name the
second parameter can be the amount the
data was sending through as a parameter
so if we save it now and come back to
the store we can accept this as a second
parameter over here
so the first one is context and because
we've got more than two one parameter
now in this Patera function we have to
place parentheses around them so context
is the first one the second one is going
to be called payload and this refers to
the data that we've sent it right here
as the second parameter so this is the
payload we're sending a payload to this
action and then we can use it alright so
same goes for the mutation we can send
that payload to as a second parameter
when we commit so I'm going to send it
right there then right here where we're
receiving escapes as a parameter we can
also receive the payload again so I'll
passing it through first of all we're
passing it from here to this method then
it will passing it through the dispatch
method when we call in an action the
action is taking that payload then when
we call the mutation after two seconds
after this asynchronous task we're
passing through that data again the
payload to the mutation and we're
receiving getting a mutation as well and
this time instead of reducing it I want
we can reduce it by the payload which in
this case is going to be 4 because we
specify four right here at the top okay
so let's try this out now so even though
I've specified four it's only going to
be two when we reduce it because of the
whole half-price sale thing so let's
reduce the price and we should see after
a while it goes down to eight so four in
total half and then we're reducing that
so that's really cool that's how we can
send data as well to these actions and
on to the mutations and use that data
when we're changing the state of the
application so that is actions for it
like I said are we good practice to use
actions even if you're not using any
kind of asynchronous code</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>