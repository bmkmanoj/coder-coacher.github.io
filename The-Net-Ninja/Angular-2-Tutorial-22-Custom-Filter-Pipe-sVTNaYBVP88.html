<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 2 Tutorial #22 - Custom Filter Pipe | Coder Coacher - Coaching Coders</title><meta content="Angular 2 Tutorial #22 - Custom Filter Pipe - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 2 Tutorial #22 - Custom Filter Pipe</b></h2><h5 class="post__date">2016-09-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sVTNaYBVP88" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">howdy campers welcome to your 22nd
angular2 tutorial and in this video
we're going to go ahead and create a
custom filter pipe all right there so in
the last tutorial we used these built-in
planks slice and upper cakes but I
mentioned that there's no filter pipe so
we can't filter which data is output to
the browser and that was one of the
really cool things about angular one and
it would be really cool if angular to
kind of redo the whole filter thing and
put it in as a default pipe which we can
use however we count at the minute so
I'm going to show you how we can create
a custom pipe instead and that is going
to do the job for us so first of all I
want to get rid of these pipes because
to be honest I don't want to do any of
this jazz I just want to keep it as is
for now and what I want to do is create
a filter pipe which is going to be used
here when we output in this ng4 and
instead of outputting the full array
we're going to use a filter pipe to only
output the ninja's which our user
searches for and they're going to search
for the name okay so we're going to have
a look form at the top where they can
type in a name and if that name matches
any of the letters that come in these
names right here then it's going to stay
if it doesn't then it's going to be
delete from this list I'll rather
filtered out the list all right so first
of all let's create that form so what we
want to do is that right up here so
right up here what I'm going to do is a
form tag and this is going to have an ID
equal if it's spell all this stuff right
so form a key is going to be equal to
filter and this is just sort of styles
that I added in I've got to style this
up nicely so in it is for let's do a
label first of all and that label is
going to say filter inches by name cool
and then after the label we want an
input and the type is going to be alpha
text then we're also going to attach an
NG model to this and we've seen this in
a previous tutorial so the model is just
going to be a variable called term so
whatever we type into this input box is
going to be stored in this model this
variable right here
so okay so that's all we need to do for
now I'm going to save this right here
and if i refresh in a browser we can now
see this thing or right here this filter
ninjas by name let's just make this a
little bit bigger so it looks nicer okay
so the idea is if we start typing Yoshi
then it's going to filter these two out
and we only see Yoshi
get like a search if you like alright
cool so now we've created our form what
we need to do is create our custom
directive so not custom directive sorry
our custom pipe so what we need to do
that is come down here and we'll say NG
and then generate pipe and this pipe is
going to be called filter so let's press
ENTER and then this is going to go ahead
and generate eight pipe in the ninja
directory however we want to cancel that
because we want to be in this up for the
right here so let's say CD up no sauce
fold slash up and then let's do the same
thing
ng generate pipe and call it filter so
I'll press ENTER and it's going to go
ahead and create a filter pipe for us in
this application directory right here
cool so now we have this filter pipe TS
I'm going to get rid of the test file
right there we go let's go into this
filter pipe file and we're going to kind
of code this filter up so basically what
this is doing is adding the pipe
decorator right here and this is going
to be the name of the pipe whenever we
use it in the view so you know that we
had something like this pipe uppercase
instead we're going to be using pipe
filter and whatever this thing is here
is referring to this so whatever we
write here we have to use that in the
view itself okay so in this class right
here we have a transform method and this
transform method is one is called every
time that the pipe is used here okay so
what we're going to do is take in a
value first of all and I'm going to call
this ninjas so this is just the name of
a variable which we're going to take in
a parameter if you like on the pipe and
that's going to be of type in it so we
just type in right here and then the
second argument that we're going to take
through is going to be the search term
that a user inputs into this thing right
here this input field right the term so
when we call this pipe it's going to
take two parameters the ninjas and the
term okay so what we want to do first of
all is get rid of that and I'm going to
do a little comment to say check if
search term is undefined
okay because if it's undefined all we
want to do is return all of the ninjas
okay if the user doesn't type anything
in here so I'll say if term is triple
equals to undefined then what we're
going to do is return the ninjas which
is this thing here all of the data all
right so then otherwise what we want to
do is return the updated ninjas array so
what we're going to do is return and I'm
going to explain this in a minute once
I've typed it Minges dot filter this is
a JavaScript function which we can use
and this filter function takes a
function as a parameter and it's going
to take in the ninja because we're using
it ninjas and then this is going to
refer to whatever element we're cycling
through when we filter through okay so
each time around it's going to be
referred to as a ninja and then in here
I'll say return again and it's going to
be ninja name that's just a spell this
correctly returned ninja name and then
we're going to say to lower case and
then dots includes and then it's going
to be term dot to lower case like so
okay so I'll show you what this does so
first of all if you don't type anything
and term is undefined then we're just
going to return to full array of ninjas
so it's going to display all of them if
not then basically we're going to return
ninjas don't filter this is a method
which filters through the ninjas and
what it does is it goes through each
element in the ninjas around each time
it fires off a callback function and
this parameter right here ninja is
something I've made up it can be
anything you want it can be X and then
you just have to change this to X and
whatever but we call it ninja here
okay so it takes the current ninja that
it's going through in this array and in
here what we're doing is returning
either true or false if we return return
true then it's going to keep that
element in the ninjas array if we return
false then it's going to remove that
element from the ninjas array make sense
so this statement is going to evaluate
to either true or false right and what
we're doing here is say ninja name so
whatever the name is like Yoshi or
crystal or Ray or whatever turning it to
lowercase
so that we can match it to this to
lowercase just in cases any
discrepancies if you're typing in
uppercase and this is in lower etc so
we're doing a both to lowercase and then
we're saying dots includes which is just
a function again to say does this
include a particular term so it's same
term to lowercase and the term is
remember the parameter that we pass
through to this transform function which
is going to be what the user types in
here so if the user type something in
here and it matches whatever is in the
name so for example if there's happening
a Y then it's going to return true for
this and it's going to return true for
this and true for this because they've
all got away if they're typing in all
just on its own it'll be true for this
so this will remain in the array this
will be false because there's no o in it
and this will be false as well so it
will filter these two out of the array
okay make sense and then we're returning
that updated array right there cool so
that is all there is to it to making egg
filter pipe so if we save this right now
the next step we need to do is actually
use this filter pipe so let's get rid of
it there and what we want to do is use
this filter pipe on this thing right
here in the view so the way we do that
is by doing a pipe and same filter and
then the parameter is going to take
through is going to be the term which is
this thing right here okay so as a user
types here this filter is going to take
that parameter and it's going to run
this filter pipe so this term is going
to be passed through into here right
then it's going to run this test where
it's checking to see if this term is
within any of the ninjas names if it is
then it's going to keep the ninjas down
here if it's not then it's going to
filter the managers out okay so that's
how we make this filter
ray that's how we use it in the view
itself but this still won't work and
that's because we have to tell angular
that we want to use this custom pipe in
this component view so in the directory
component view what we need to do is go
to the directory component classifier
right here and we need to let them know
in the classifier let angular know that
we want to use this pipe so the way we
do that is first of all by importing it
at the top so we're going to say import
and then is called the filter pipe and I
got that name from this thing right here
filter pipe so that's what we're
importing and then we've got to import
it from a location and it's from dot dot
because we're going upper-level because
currently this component is the
directory component so we're going upper
level into the app component
okay so dot dot forward slash and then
it is just filter dots pipe so we've
imported it there now we can use it in
the component itself and we do it in the
decorator we're saying right here that
we're going to use this pipe in the view
okay so let's do a common air and we'll
say pipes and this is an array and if we
have multiple pipes we can pass them
through here we just have one which is a
filter pipe like soap so if we save that
now then we should now be able to use
this pipe this custom pipe in our array
of data so let's refresh and check it
out okay so if we type in here now I'm
going to tell you why
nothing happens what's happened oh then
it's just Yoshi that remains because
none of the others have Y o in them if I
type Y you then just Riley remains this
is the Y you yeah if I type in R then
crystal and Rayo remain our Y both of
them still remain because they both have
our Y in them if I type Ryu then just
that remains finally if I type CR then
just crystal remains cool so that is how
we create a custom filter pipe this
seems a little bit long-winded to be
honest to create just a simple filter in
angular when it was so easy to do in
angular 1 but that is how we do it so
the steps are to create this filter pipe
type script file yeah and I always
create my pipes in the app directory or
if they're just particular to a peer a
certain component that I'll type it or
create it in that directory and putting
this here because we might use it in
other components as well so I've created
that we give it a name and we've also
padded out this transform function which
is called every time we use that filter
that custom-bike in a view so we've
taken in the ninjas array and we've also
taken in the term and then we've checked
if this term is in the particular ninja
at the time by using the filter if it is
we return true and it stays in the array
if it's not there then it returns false
and it's removed from the array then the
updated array is passed back into the
view right here and then it only outputs
the ninjas which return true the ninjas
left in the array okay so that is pretty
cool that is how we create a custom pipe
and in particular a custom filter pipe</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>