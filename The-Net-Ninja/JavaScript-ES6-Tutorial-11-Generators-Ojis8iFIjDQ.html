<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaScript ES6 Tutorial #11 - Generators | Coder Coacher - Coaching Coders</title><meta content="JavaScript ES6 Tutorial #11 - Generators - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaScript ES6 Tutorial #11 - Generators</b></h2><h5 class="post__date">2016-04-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ojis8iFIjDQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you're something guys welcome to your
eleventh and the script six tutorial and
in this video we're gonna dive right
into generators Wow okay the gang so one
of the coolest features in es6 is the
addition of generators and generators
are basically just functions which we
can play and pause whenever we want so
that we can have ultimate control over
the flow of them so what I'm going to do
in this tutorial is just create a
regular function like you've seen many
times before and we're going to turn
that into a generator and kind of
explore what that can do for us but
before I do anything I just want to
point out that I am using Google Chrome
a regular browser here not Chrome Canary
anymore and that's because I'm using the
server that's built into brackets and
that uses Chrome by default now
generators are supported in Chrome so we
don't need to worry about that at all
alright then so let's create a regular
function to begin with so I'll say
function and then we'll call this gen
which stands for generating even though
at the minute this is not a generator
then all we're going to do in this
function is log a few values to the
console so that's like so fruits
first of all pear and then we'll copy
this dude and paste it in a couple more
times and we'll change this one to
banana and then finally apple I think
all right cool so when we call this
function what is going to happen well
it's just going to log these dudes right
down to the console yeah so let's
refresh and we get those there cool so
this is a regular function what do we
need to do to turn this into a generator
all we need to do is put a little
asterisk sign after the function keyword
and that is now a generator so what
would you expect if we save this we're
still calling this function right so
should it do the same thing well if we
refresh now we no longer see those
things logged to the console and that's
because when we first call a generator
which this is now a generator right when
we first call it it is not actually
firing the code all it's doing is
setting up the generator we sing to it
home set it up ready for use and what
that does to us is returned towards an
iterator so this thing right here is
returning to us an iterator and setting
up the generator and what we can do is
store that iterate in a variable which
I'm going to
just because a variable my DN a set it
equal to that so we're setting up the
generator it's returning to us an
iterator which is gonna be stored in
this variable right and iterators just a
way that we can iterate through a cycle
of things by using the next method so
this now has the next method which we
can use and that's what we're going to
do to start playing this function if you
like so first of all we set it up and
then what we're gonna say is my gen next
that's the function we're gonna use on
the method and that is essentially the
play button for us okay so it's saying
okay you've set it up now do the next
thing now run the code so if we save
that and refresh what it's going to do
is now print those things out to the
console yeah so that's like the play
button if you like so I said we can also
pause these generator functions how do
we do that well we do that using the
yield keyword and we just place the
yield keyword anywhere in this generator
where we want to pause execution of the
code so I'm just gonna place it right
there so what's going to happen it well
first of all we're setting up the
generator we're getting that iterator
then on the iterator we're saying it dot
next we're playing the function so it's
going to start to find a code and the
JavaScript runs from right to left yeah
so it's gonna console.log this thing
right here then this yield keyword is
gonna pause the function or right here
so it's not going to get any further
than this so let's save it and see what
happens down here see now we're just
getting this pair message logged to the
console so this is the only thing that's
working when it gets to here is saying
look you've paused me I'm not gonna go
any further so this code doesn't get
executed so how do we then execute that
code I already do is press the play
button again so we use the next method
again so it'll say my gen dot next and
that is gonna play the function again so
first of all it's gonna log this then
it's gonna pause then we're calling dot
next again and it's gonna do the
remaining code that prints out those two
yeah so let's adding some more yield
statements like that yield and yield and
then finally what we're going to do
say console.log all done right just to
tell us we're at the end so let's
refresh every minute we just get pear
and banana because that's because we're
saying next which he's firing up until
here and then we're seeing dot next
again which is firing up until here and
then is pausing because we have no dot
next again so we need to say my Gen dot
next again and that's gonna bring us up
to here yeah so let's save that we
should have for the third fruit yeah and
then to print out this we need to say
dot next again because currently it's
paused right here so we'll say my gen
next for a final time and then it's
gonna log all done to the consult as
well cool
so now we've seen the play button yeah
which is next and the pause button which
is the yield keyword and what I want to
show you now is how we can pass data out
of this generator into this thing right
here okay so instead of yielding this
console.log message I'm just gonna yield
some values and these values they're
gonna be strings so let's get rid of
these console dot log things will still
leave this thing right at the end and
this time what's happening is when we
say magic next for the first time it's
gonna run the code it's gonna yield
right here it's gonna pause but what
it's doing is yielding this value is
gonna pass this value but tours and it's
going to store it in this iterator okay
so how do we access and that value well
let's just log to the console what this
iterator thing is source a console that
log and then do that for save refresh
and now you can see we're no longer
logging these things to the console up
here so that's why we don't have them
down here we still log in that so that's
why we see this all we're logging now is
this iterator right here right and you
can see that what is happening is we're
getting an object this is the iterator
object and it's going to value property
which is pair because that's what we've
yielded that's what we've given back
okay - this iterator and we've got this
other property called done which is
false now this property is just saying
look we passed here in the
generator we've not done with it we've
not finished okay this only reaches true
after the generator reaches the end
point right so let's do this for each
one console dot log this one and in fact
what I'm going to do just to save myself
a bit of time is just copy that and
overwrite these like so and now we have
all these things right here so each time
you can see done is false and till the
end the answer the last one where it
reaches the end logs this first of all
and then it gets to the end and you can
see now doing is true okay and the
values pair banana and apple pass back
to us each time we use this yield
keyword to pass back into these
iterators in the value property makes
sense right okay so that's how we get
values out of the generator now you'll
notice this thing right here this final
value is undefined because we're not
actually yielding the value at the end
or returning a value all we're doing is
login this message but instead what we
could do is just return at the end a
string all done and then if we refresh
this time we get the value in this final
iterator okay so that's how we pass
values out now with generators we can
also pass values back into them right
and the way we do that is by putting the
value within the next method within
these parentheses right so let me just
write some code then I'll explain it I'm
just going to create some variable var X
I'm going to set it equal to that yield
statement like I said I'm going to
explain this in a minute var Zed equals
that okay so when we first use this dot
next method what's happening is it's
starting this function this generates
write and it runs from right to left so
it's doing this it's coming on here and
it's yielding that value that it pauses
right here doesn't go any further okay
so that's the first time we use the dot
next method so if I was to pass
something into this method right here
it's not gonna be able to do anything in
it in the generator right so there's
putting passing something in to begin
with because there's nothing to do with
it it's stopping right here and we're
not doing anything with that value but
the next time we call next it's starting
here and the first thing it does is set
a value equal to this variable right
here so what we can do is pass something
into this next method the second time
round okay so say I want to passing the
price of the pair which is like I don't
know ten dollars and that is going to be
stored in this variable X right here
okay and we can do the same thing the
next time around we can pass in five
dollars and that's going to be stored in
Y then we can pass in three dollars and
that's going to be stored in Z all right
so these are the prices of these
different things and at the minute if I
save and refresh nothing is going to
happen it's not changed anything
whatsoever and that's because we've not
used these variables but what if we just
return the sum of these variables which
is the total price I could say return X
plus y plus Z and then it's going to
return the total value which is 18:10
plus five plus three pretty cool right
so that's how we pass values back into
this generator all right so this is the
basics of generators and you might think
this is pretty useless right wrong and
when it gets really interesting is when
we start to think about asynchronous
JavaScript so I've done a little example
in which I'm just going to phone comment
like so and if you don't know much about
asynchronous JavaScript this might seem
a little bit like nonsense at the minute
but maybe after you learn a bit about
asynchronous JavaScript you can check
this out and it's going to make much
more sense so what I've done here is
create a function or a generator rather
and I've just called that generator yeah
and then in this generator we're doing
the same thing I'm just yielding three
different values ignore these console
locks at the minute I'm just yielding
three different values right here yet
and the values I'm yielding and these
get requests to some data that I have so
this data is just here create a folder
called data and this is just some simple
JSON files which is storing some data
for me so I've got friends Facebook
friends
tweets here and then YouTube videos
alright so what I'm doing it is in this
generator I'm using a get request first
of all to grab the tweets and then I'm
going to yield that value right and then
when the data is passed back in is going
to return it to tweets so I'm doing the
same thing with Facebook friends and
YouTube videos so they're the year old
keywords right yielding these three
values now what I've done is create some
smart code here and it's just basically
wrapping the generator so this is a
function called gel wrapper and it takes
a generator as a parameter so just
imagine we pass in this generator into
this function right here yet
the first thing to do is I set up the
generator slash iterator so I call the
generator right there that we've passed
in which is this thing and I've stored
the iterator that it returns in this
variable margin which like we did before
then what I've done is created function
called handle and this is going to
handle the yielded values right so it's
not called at the minute so it's not
going to run just yet but what I'm going
to do at the bottom is return this
function handle I'm going to pass in as
well my Gen which is this thing got here
dot next so what we're doing these are
saying my Gen net which is gonna star
it's gonna fire the generator right so
first of all when we call that it's
gonna fire the generator and it's gonna
do this get request right and it's going
to return that to us okay so because we
put yield there so it's going to return
the result of this get request to us so
what I've done is a past that iterator
into the handle function so that
iterator is now called yielded right and
what I'm doing first of all is I'm
checking to see if yielded is done and
for as long as yielded done is false
this is gonna fire okay so as long as
we're not at the end of the generator
this is gonna fire now when we start
we're not at the end of the generator
we're just here we've just died so this
is true then and then what we're gonna
do is say yielded dot value which is
this thing right here don't value
dot then because when we use and get
requests like this this is using jQuery
then this is going to return to as an
object with a promise interface so we
can use dot then to say then we want to
fire off a callback function and passing
the data that you've retrieved which is
all this Jason right so within that
function I'm going to return the handle
again which is this function and I'm
going to call the next method and pass
the data back in to the generator right
remember when we use the next method for
a second time it stops here the first
time when we use it for a second time
we can passing data between it which is
then stored here so all the data
it's got from this request right here is
now going into this thing right here and
we can log that to the console yet and
then it carries on and it comes here
does this request returns it to us and
we go through the cycle again if yielded
done which it isn't done yet then carry
on then what we're gonna do is grab that
value say dot then get the data return
the handle again do my genetics pass the
data back in so we have that data store
there friends and we do something with
that and the same thing for the YouTube
videos as well so we're cycling through
these things using this kind of smart
code which by the way is quite crude and
you can get libraries to do this for you
much better but anyway if the point is
we're going through this generator using
some smart code and we're grabbing this
data from different sources if you like
we're gonna do something within it all
right and if you look at this right now
this looks very much like synchronous
cold yeah it's one after the other and
it looks very logical but it's actually
a synchronous cold so this is a really
cool way to do things like this and like
you said you don't have to write your
own smart code like this you can use a
library to do it for your promise
library much like queue so what we do
normally is say first of all we have to
pass the search generates it into the
function so to call that we do something
like this right generator and there
surround that and say a thing like so
yeah but if you use a library then we
could do something like Q dot async and
that's going to do a similar thing for
you so you don't need to write your own
kind of function book this is
really cool way to display your
asynchronous code in a synchronous like
fashion really cool yeah so that's why I
quite like generators so there we go
guys that is generators in a nutshell
quite complex at first but once you cut
you know you start practicing around
with it then it is gonna be really
useful tool for you and I realized I've
just not showing you how this works so
I'll do that right now gen wrapper so
now what I'm doing is I'm calling this
generator function here and I'm passing
this thing right here this generator
into that function yeah so I'll save
that and refresh and now you can see
first of all I'm getting this returned
to me which is the tweets and then after
that and get in the Facebook friends
returned to me and Mario peach etc then
finally I'm getting the YouTube videos
returned to me as well all right so well
there we go guys if you have any
questions whatsoever feel free to leave
a comment down below otherwise don't
forget to share subscribe and like and
I'll see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>