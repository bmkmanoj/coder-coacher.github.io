<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>REST API Tutorial (Node, Express &amp; Mongo) #6 - Creating Routes | Coder Coacher - Coaching Coders</title><meta content="REST API Tutorial (Node, Express &amp; Mongo) #6 - Creating Routes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>REST API Tutorial (Node, Express &amp; Mongo) #6 - Creating Routes</b></h2><h5 class="post__date">2017-03-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BNikS1X5NVk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">how to campers and welcome to your synth
REST API tutorial and in this video I'm
going to show you how to set up your
Express route okay just one quick thing
before we get started you'll assume in
the last couple tutorial through
something like this node index and one
that every time we made a change so that
it ran this index file again in node
they started up the server and listened
to requests now if we're making a lot of
changes it gets really tight and
canceling out the process and then
writing node index again to restart the
server gets really boring really quickly
so instead what I'm going to do is
install a package which can kind of take
away that from us and this package is
called node 1 so I'm going to say NPM
install node 1 and I'm going to say we
try dependencies but not to our normal
dependencies but to our dev dependencies
because this isn't a dependency that is
required for the application to run it's
just a dependency that is going to speed
up our development process so do that
hit enter
cool so once that's installed we can
just write node 1 index hit enter this
is going to do the same thing it's going
to run the index file and we can see it
says now listening for requests however
now when we make a change to the code we
don't have to come in cancel out the
process and run it again
it's going to automatically restart the
server for us with those changes cool so
now let's get rid of this because we
don't want to do our route in this index
file we do just want in the last
tutorial just to see how it works but I
want to split our routes up into a
different file keep them nice and module
alright so let's get rid of this and
then you'll see what I've done is create
this folder called routes in the root
level and this file called API so go
ahead and create that and then open the
API dot J's file this is where we're
going to create all of our routes for
our API so the idea behind this is that
if you have different sections of your
application you could create a file for
the routes for that section if you like
you separate your routes into logical
components if you like so the way we're
going to make our routes is we're going
to be using the express route to class
and this is the thing that is allowing
us to make these modular routes it makes
it really easy
Kings organized now this may seem a
little long-winded at first but once
we're getting a swing it makes life much
simpler and you're going to see all that
at the end of this tutorial so first of
all we're going to need Express in this
file with already done in this file but
we're going to need it in this file as
well so let's just copy it from here
taste in it the next thing we're going
to need is the Express router so we'll
say first router is equal to X press
which is listing right here which is
required dot capital our router
parentheses okay so now this is our
router object we like and what we can do
is stall or rather mount our router
handlers onto this thing right here so
instead of saying app get this time what
we do is say router get okay and we can
respond to a get request so I've said
it's going to become more clear at the
end but for now let's just make our
routes so I would get requests first of
all we wanted to go to /y API /n engine
right but for reasons I'm going to
explain later on we don't need to add
this API bit in here we just need to add
ninjas right and I'll explain why later
on so this is a route so this is going
to refer to get request when we go to
four slash API forward slash Minges we
want to hand over the list of ninjas
right so that's what this route so we'll
add in our callback function and pass
over the request and response object and
in this function will do something later
on well maybe interact with a database
to get the ninjas and send them back to
the client okay so we'll just write a
little comment above this so we know
what we're going to do in here and also
get a listener on ninjas run the
database right okay so in fact what
we'll do is just say response dot send
and then in here we'll say type get so
what we're doing is sending back a
simple object so when someone makes a
get request
this route then we're sending back this
response which is just an object to say
what type of requests they've made right
pretty simple so let us now copy this
I'm going to paste it in three more
times and we're going to change these so
the next route I want to set up is to
add a new ninja to the database right
and if we're adding new data it's going
to be a post request so we'll get rid of
that and say drop post instead not
capitals and it's going to be the to the
same route as we get requests because
we're just adding to the ninjas
collection right and in here we'll
change this to post we'll also add in a
little comment so we know what we do
instance a as a new ninja to the deck
specs right okay cool so the next thing
we want to do is updating engine it's
already in the database it's also update
a ninja in the database right and this
needs to be a put request because
remember put requests and how we update
data and it's going to go to forward
slash ninja and then forward slash the
IP right but this is going to be a
parameter and I'm going to explain what
parameters are later on but for now just
know that we need to put a little coal
on there because this is going to be a
very built if you like it's not going to
be actually ID it's not going to be
followed slash and ninjas /id it's going
to be forward slash limiters then
whatever the ID is right so it's going
to change for each ninja so this right
here is kind of like a variable it's
saying whatever this thing is here pick
it up right here and we're going to talk
a little bit more about that later on
okay so this is going to be a put
request
so we'll put put in there and then
finally what we want to do we want to
delete image from the database let's do
a little comment again saying delete a
ninja from the database and then this
needs to be delete and then this needs
to be forward slash colon ID again which
is the same as this it's going to
a specific ninja we're going to be the
ID of that ninja to delete it make sense
so let's just change this now to delete
so we set up our four routes now we'll
set up a route to retrieve a list of
ninjas
that should get requests we set up a
route to post a new ninja to create a
new one in the database okay that's a
publishing question forward slash ninjas
and this is spelled completely
incorrectly updating ninja to the
database we've created this route a put
request to this route right here with
this variable ID in it and then we've
created a delete request so we can
delete a ninja from the database against
this route with this variable ID in it
and each time we're just sending back a
simple object with one property inside
of it to say what type of request we
have made okay so obviously we're going
to flush out these different requests
later on to handle them so now we've
just set up our basic functions our base
handlers if you like so what we're doing
is attach each of these different routes
these different message right here and
the callback functions we've mounted
them to this router object right here
which we set at the top so now what we
want to do is allow these routes right
here to be used in this index file
because if we just save this now on it
then nothing is telling our Express app
that we're using these routes because
our app is being set up right here and
this is a separate file it's got nothing
to do with it this unit we're running
right so we need a way to export these
routes and then use them inside here so
the way we do that is by coming down to
the bottom and same module not in
capitals dot exports is equal to this
router right here so we've mounted all
of our ramps on top of it and now we're
exporting it like that so once we have
exported it now we can import it into
another file so if we want to use it in
here we can just import it at the top of
this file so I could say something like
Const routes is equal to require
and then what we want to do is go into
this folder right here the rats folders
will say dot /to say current directory
then the routes folder then forward
slash and it's called API key is right
there now we just put API we don't need
to do J s because no js' knows that it's
going to be a JavaScript file
okay so we've required them now in this
file on the community now how do we say
to our Express app that we want to use
these rels well we can use a method
called use on our app right here okay so
if I come down here and say app don't
use and then put in the route like so
then now this is going to use the route
okay
it's going to use the routes we
specified here forward slash images
forward slash means use ID etc on our
application so now we can navigate to
them
alright so let me just test this out if
I save it and if I go to this first
route which is just forward slash ninjas
it should return us listening right here
yeah so let's go to forward slash in
inches so it's that off and now we get
that object back is same type equals get
so what did I say before I said I want
it to be /ap eyes forward slash Lingus
so I want it to be this first right so
this needs to be before each route right
here and you know we could add them in
like that because at API on each one so
imagine as we go forth we have say I
don't know 20 different routes we have
to manually add API on each one of those
then that's just a waste of time instead
what we can do is inside this use method
we can say forward slash API like so as
the first parameter right then we're
passing the ramps that we want to use
for this URL so now what's going to
happen is whenever we go to /ap I write
anything after this is going to be using
these routes right here so now if I say
four slash API ninjas
it says we kind of get it that's because
of not staged simply delete but if I
save it then it refresh this now we get
the type
yep awesome so I just want to clean this
up a little bit more because this seems
unnecessary at the top requiring it in
and then using it down here what only
doing it once so let's just grab this
and paste it here instead of route and
then we can get rid of that
okay so we're requiring this module
right here and we're using it inside
this route make sense so this thing
right here let's not use if the method
we use on our app to use any middleware
and middleware just basically cold that
runs between the request and the
response and we're going to talk about
me away a little bit in more detail
later on for now I'm just gonna pop a
comment here initialize routes just so
we know what this is doing okay so there
we go we've set up our routes but
ideally we want to test them we need a
way to make sure these are all working
with tested this one from a browser and
it works but we can't set the post ports
and delete requests or routes in a
browser because the browser only works
for get requests right so we need a way
to test this and we're going to do that
using a piece of software called postman
which is really cool for testing routes
and I'm going to show you that in the
very next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>