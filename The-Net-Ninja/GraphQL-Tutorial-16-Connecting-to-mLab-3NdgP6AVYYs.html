<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GraphQL Tutorial #16 - Connecting to mLab | Coder Coacher - Coaching Coders</title><meta content="GraphQL Tutorial #16 - Connecting to mLab - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>GraphQL Tutorial #16 - Connecting to mLab</b></h2><h5 class="post__date">2018-03-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3NdgP6AVYYs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right they're my friends so we're in
a good place at the minute we've set up
our graph cue our server and
everything's kind of working well
together one things bothering MIT at the
minute and that's this dummy data right
here because typically we're not gonna
have this kind of data in our schema
file in production were more likely to
store our data in some kind of database
now we're gonna be using a MongoDB
instance to store our data in so if you
feel like you need a refresher on
MongoDB before you and back on this
journey then I would recommend that you
check out my MongoDB tutorial series
here on YouTube the link is gonna be
down below for that anyway for the rest
of us if you don't feel like you need a
refresher what we're gonna do is sign up
for Mongo lab or M lab which is an
online service which allows us to spin
up a MongoDB instance and store our
database online so it just saves an
awful lot of setup when it comes to
doing MongoDB and we'd have to do
anything locally so let us go to M lab
I'm going to open this browser and it's
M lab comm you can sign up for a free
account by clicking here I'm just gonna
log in right now and let me just enter
in my username and password if I can
remember them so let's cross our fingers
hope for the best
cool I mean alright so what we want to
do now is create a new MongoDB
deployment so a new instance of a
database if you like so let us do that
and I'm gonna go to sandbox which is
free I'm gonna stay with Amazon and I'm
gonna click on continue the region
doesn't really matter I suppose for the
sake of this tutorial
continue again the database name I'm
gonna call gql - ninja so graph cabal
ninja and press Continue again submit
order it's absolutely free so I don't
know why they call it an order but
anyway this is going to spin up an
instance of montgó DB on m lab for us so
that we can use it to store our data in
so it might just take a minute or so
just for it to set up fully when you see
that green tick it means is set up so
let's go in here and the first thing we
need to do is create a user for this
database now this
means that someone can have read and
write access to the database right so
we're going to use this user from our
application from our graph to our server
later on so let's add a database user
I'm just going to call this Shawn and
the password is gonna be test 1 2 3 and
test 1 2 3 again really secure ok let's
create that and then when we've done
that we have our database user and the
minute if we go to collections you're
gonna see nothing is in here at the
minute so it's not storing any data we
need to do that later on now how do we
connect to this database from our
application well really simply we're
going to use this connection string
right here so I'm going to copy that to
my clipboard so we can use it inside the
code in a minute now that before we
start writing any code what we're gonna
do is install a package called Mongoose
and that is an ORM and it basically
makes communicating with the database
much easier alright so let's open up our
console and install that first of all
I'm gonna cancel out of this process
ctrl C then yes then I'm gonna say NPM
install Mongoose now again if you have
an old version of NPM you're going to
need to use the save flag right there
I think it's version 5 or more you don't
need to do that so this is going to go
out and grab Mongoose for you all right
there so now that has installed we can
go ahead and require it up here so I'll
say Const Mongoose is gonna be equal to
require then Mongoose and we're going to
use Mongoose to connect to the database
as well so right here I've made a couple
of comments saying click to the M lab
database make sure to replace my
database string and credentials with
your whole ok because by the time you do
this video then I probably won't have
that database set up all right so I'm
just gonna do now
Mongoose dot connect this is gonna allow
us to connect to that database and all
we need to do is pass in the connection
string which we got from our database
right here alright so paste that in
the only thing you need to do is replace
this with that user that we set up for
the database I called mine Shawn and
then the password as well which I put
down as test one two three all right
then so we have this now we're
connecting to the database what I want
to do is say Mongoose connection dots
once this is an event listener and we're
saying once the connection is open then
what I want you to do is fire a callback
function and this function is going to
be an es6 arrow function like so and
inside this function all I'm going to do
is log a message to the console and this
message is going to say connected to
database just so we know when that
connection has been made all right there
so if we now run this app J's file it
should connect to our MongoDB instance
on M lab and fire this thing right here
this function when it's connected all
right when that connection is open so
let's give this a whirl
I'm going to say node Mon app to run
this file and we should see now in a
second a log to the console okay so
first of all now listening for requests
on port 4,000 and then we get this one
connected to the database all right
there so now we've connected to that
online instance of MongoDB so we can
start to store our data in it but before
we do that what we'll need to do is
create a mongoose model and schema for
our data types inside MongoDB and we'll
do that in the very next lesson</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>