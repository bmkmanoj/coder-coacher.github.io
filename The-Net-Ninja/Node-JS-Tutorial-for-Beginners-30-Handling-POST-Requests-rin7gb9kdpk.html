<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node JS Tutorial for Beginners #30 - Handling POST Requests | Coder Coacher - Coaching Coders</title><meta content="Node JS Tutorial for Beginners #30 - Handling POST Requests - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node JS Tutorial for Beginners #30 - Handling POST Requests</b></h2><h5 class="post__date">2016-07-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rin7gb9kdpk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yo something guys welcome to your 30th
nodejs tutorial and in this video I'm
going to show you how we can handle post
requests ok so post is a request method
and you've probably heard about it quite
a lot and it basically means that we
asking the server to accept or store
some data which is enclosed in the body
of a request and normally we use a post
request when we're submitting forms on a
website so when we post data to the
server we're no longer using the data in
the query string in the URL the data
we're posting to the server is in the
request body itself so we need a way to
handle that a little differently from
get requests where we use query strings
so we're going to take a look at that in
this tutorial ok so in the last tutorial
we saw we had this form and we injected
some content dynamically into the input
fields of this form by grabbing the data
from the query string now in this
tutorial what we're going to do is kind
of setup what happens when we submit
this form when we click the button to
submit it how are we going to handle
that data that we send to the server
well first of all what we're going to do
is post that data to the server we're
going to use a post request we're not
going to send any data along in a query
string or anything like that we're going
to use a post request so I'm just going
to come up into the form tag at the top
and I'm just going to paste in a couple
of things so first of all the method is
going to be post because this is going
to be a post method and the action is
going to be the URL that we're posting
to and that is just forward slash
contact so that's all we need to do on
our form the rest of the work needs to
be done in this fjs file so what we need
to do is handle this post request in
here and when we used the request object
to handle the query string in the
previous tutorial the request object in
express handled passing that data for us
now it doesn't handle the passing of the
post data Forest we need to add in some
additional middleware to do that for us
and one piece of middleware we can use
is called
pather so if you just want to sit
through that on the NPM website I'll
leave this link down below as well then
you'll see that we can install this body
parser to do all of these parsing for us
and you can see right here it says it
passes incoming requests bodies in a
middleware before your handle is
available under the request body
property okay so how do we use this well
if we scroll down to the bottom down
here it's going to give us some examples
on how to use this and what we want to
look for is Express route specific okay
so when and we're posting to a specific
routes or route which is going to be our
forward slash contact route we want to
invoke this body pass and middleware
yeah to handle the passing of our post
data so the first thing you want to do
is install this body path so now all you
need to do is look for this thing right
here installation and it says npm
install body parser so you just need to
copy that and paste it down here and
click enter
i've already done that so I've got the
body part installed then we need to add
it into our app DJ s and require it so
I'm going to just copy this right here
and paste it below this require so now
we can use the body passer in this app J
s file because it's just a module we're
requiring that module and then we'll
come down to the example to see what
they've done so scroll down here again
Express route specific and you can see
the first thing they've done is require
it right there which we've already done
then we've got this express up running
this is to pass Jason we're not going to
do this in this tutorial what we're
going to do is use this URL encoded
parser
okay so this is the function right here
that we want to invoke in our middleware
to pass our post data so how do we do
that well first of all I'm just going to
grab this copy it right here and paste
it over here
like so so now we've got a shortcut to
this piece of middleware right here this
function which is going to pass our post
data for us and we're storing that in
this variable right here so now we just
want to use this piece of middleware in
our post handler for the forward slash
contact request so you can see we've
done it down here like this up top post
then whichever route then they passed in
that middleware which is just this
variable we've created and then we have
our function as normal
okay so let's set that up at the minute
we have an app get request handler right
here we want an app post handler for the
contact routes so let's copy that paste
it down here just going to change this
thing to post and then what we need to
do is pass in this URL encoded person
variable which we created up here so
this is just a piece of middleware is
storing this function for us right here
which is gonna fire whenever this post
request is made so let's paste that
piece of middleware or right here and
this is very similar to using the app
use method except we're just using it on
the post request this time so what
happens is when we get a post request at
this URL which we're going to get when
we hit this submit button because we've
said method post' and action for slash
contact so it's going to make a post
request to this URL so when that happens
we're going to handle that post request
right here and we're going to use this
middleware which is going to fire and
it's going to pass the data which we
post to the server so the data stored in
these fields when we click Submit it's
going to be passed by this middleware
right here okay then we can access it on
the request object right here by using
this request body property right there
so it's going to store that data for us
that it passes so if I now make this
full screen and say something like
so log request dot body then that is
going to log this data sent along posted
to us in the body and this dude before
is this thing right here this bit away
give us access to this body property on
the request object it passed that data
for us
okay so let's save this and now let's
say node mom app is going to run it and
open this up in a browser so full slash
contact then I'm going to contact Ryu
and which Department marketing and then
the email is just going to be I don't
know ninja at ninja calm okay
so now when I click Submit we're going
to fire this post request right here
it's going to pass this data forest in
the body and we're going to get access
to it on the request body object and
it's going to love that to the console
for us so what's down here are click
Submit and now we can see that data
logged to the console and the properties
are who that's Ryu so that corresponds
to this then Department is marketing
then the email is ninja at ninja calm so
each one of these corresponds to what I
put into these fields right here and the
property names who Department and email
are all coming from this fall you see we
have an import with a name of who with a
name of Department and with the name of
email so that's the names of the
properties that we've grabbed okay we've
passed those using this body part and
this middleware give us access to this
body property on the request object so
we can just grab that data now and do
something with it
okay so let's go ahead and create a new
view for a success page when we've
successfully submitted the form so I'm
just going to say instead of rendering
contact render contact - success okay
and then I'm not going to send this data
through from the query string because
we're not going to have one instead I'm
going to send this day
so I'll say data is request body and now
we're going to have access to this data
down here in this view right here so
let's go ahead and create that for you
so I'm going to go to views right click
and go to new file and then I'm going to
call this contact - success ejs and then
in here I'm just going to grab all of
this still from the contact UGS file
paste it in I'm going to get rid of the
form we don't need that leave all this
is a success page and I'm going to say
right here
thanks for getting in touch and I'm
going to output some of the data that we
grabbed right here in the request up
body so that's in the data object that
we pass through to the view so now I can
say P tag you contact it and then we
want to output some data so we use the
ejs tags and it's going to be data dot
who that's the property who you
contacted ryu it should come out as will
close those tags in me and then will
output the department using the EGF tags
again and that's data dot Department
this property right here and close that
off in there something Department like
so and then underneath I'm going to say
we will reply to new apps and then we're
going to output this email property as
well so ejs tags again give cross sign
and then it's data email and then we're
going to close those off and that will
do okay so now when we fire a post
request when we click Submit at the fall
it's going to fire this post handler
right here it's going to pass the data
that we send in the body and it's going
to give us access to that data on the
body property then of the request object
then we're going to render the contact
success of view
which is this thing we just created and
we're going to pass that data back in to
the view which were then outputting to
the user using these ejs tags okay
so let's save this dude now I'm going to
just go down here and say RS to restart
the server then I'm going to go to
forward slash contact again who do you
want to contact Ryu
which department IT will say this time
and then this is going to be ninja at
ninja calm so now when I click Submit we
should get the contact success view and
it says thanks for getting in touch you
contact you - Ryu in the IT department
we were replying to you at ninja and
ninja calm so it's grabbed all of that
data from the post request right here in
the forum it's passed that using this
middleware the URL encoding parser which
we stored up here the body parser and
it's given access to us on that data on
the request object we've passed that
dated through to the view contact
success and we've output it here okay
now in a real-world example what we'll
probably do is send that data to a
database or email it to an email address
so we know someone has contacted us now
I'm not going to show you how to do that
in this tutorial but we can use another
package something called node mailer
this is something we can use to send
mail on okay and maybe I'll do this in a
future tutorial but for now this is how
we handle post requests and grab data
from a forum and do something with that
data any questions feel free to ask
those down below otherwise guys don't
forget to share subscribe and like I'm
going to see you in a very next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>