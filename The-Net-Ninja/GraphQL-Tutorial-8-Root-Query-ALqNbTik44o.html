<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GraphQL Tutorial #8 - Root Query | Coder Coacher - Coaching Coders</title><meta content="GraphQL Tutorial #8 - Root Query - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GraphQL Tutorial #8 - Root Query</b></h2><h5 class="post__date">2018-03-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ALqNbTik44o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right they're my friends so right
now we're making this schema file and
remember the schema file has three
responsibilities for our sake right now
the first one is to define types and
we've already done that we've defined a
book type right here all right
the second is to define relationships
between types now we only have one type
at the minute so we don't really need to
define any relationships because a book
type can't really have a relationship
with itself so we're going to jump on to
the third task of the schema file which
is defining route queries and route
queries are how we describe that a user
can initially jump into the graph and
grab data so if we just refer back to
this diagram again which I keep showing
you these things right here when we jump
from the front end into the graph they
are the route queries how do we
initially get into the graph to grab
data so we're going to define these
require ease inside the schema file so
let us now down here create a new
constant and call this routes query and
we're going to set that equal to a new
graph QL object type like we did above
up here and then inside we're going to
pass through an object again and this is
also going to have some parameters first
of all the name is going to be route
query type like so and then also we're
going to define the fields of this route
query type now each one of these fields
is going to be a type of requiring if
you like so remember when we were
looking at real queries we said okay
well one particular requiring could be
to jump in to grab a particular book
another type of route query could be to
jump in to grab a particular author and
another one could be to jump in and grab
all books and another one could be to
jump in and grab all authors so there's
four kind of basic route queries there
that I want to set up and each route
query each one of those is going to be a
different field inside this route query
type so we don't need to wrap this
fields object right here or these fields
per
inside a function like we did here
because we don't really need to worry
about the order so much in our case
inside this root query so the first type
of root query I want to do is to query
for a particular book so I'm gonna call
this book and this name matters because
when we're trying to query from the
front-end remember before when we said
we want to grab all the books and then
inside we want to grab the name and you
know the genre something like that this
thing right here this is the name of
this parameter now if we call this book
then when we're making a query from the
front-end our query is gonna be called
book at the start like this okay so
that's going to be the name of this
query right here and inside we're going
to give this a type and the type of data
that we're querying is going to be this
thing a book type so let's copy that
dude and paste it down here and then the
next property is going to be any kind of
arguments this is called arcs now let me
just type this out then I'm going to
explain it so ID and the type is going
to be a graphic URL string so we'll pass
that in here like so
okay so what we're doing here well we're
saying when someone queries this book
tight right here when they want to make
this query for a particular book then I
expect them to pass some arguments along
because I don't know
you know automatically what book they
want to query right is it a book id-1
id2
ID 4 ID 10 I don't know so I want the
user to pass that argument along when
they're making that query right so we're
defining which arguments should come
along for the ride inside this query
when they're looking for a book and
we're saying okay well the argument or
one of the arguments should be an ID
property alright and the type of this ID
property is going to be a graph to our
string much like we defined the ID up
here that was a graph to our string so
we expect this ID to come along inside
the query and the way that kind of looks
from the front end is by making the
query
this book and then parentheses and then
ID and then whatever the ideas right and
then inside we want the name and we want
the genre of that book so this thing
right here this ID argument is passed
into the query that's what we're
expecting and it's of type string okay
and that is how we find the book inside
the graph QR server that's how it
determines which book to land on on
which book to return so let's get rid of
that we're saying here these are the
argument it's just one argument which is
the ID then finally we have the resolve
function right here now the resolve
function takes in two parameters which
I'm going to call parent and arcs and
this resolve function this is the
function where we write code to get
whichever data we need from our database
or some other source so let's just put a
little comment in their code to get data
from DB for slash or the source all
right just so we know what this function
is doing so this parent thing right here
this will come into play when we start
to look at relationships between data
the arguments right here is this thing
right here so if the user passes here an
ID of one two three then we have access
to that ID right here on the arguments
parameter so in our case there's going
to be an Arg dot ID property because we
defined this ID argument right here that
we're expecting we have access to this
and we can use this ID then to go out
and query our database to grab that book
with that ID does that make sense now
we'll look at the resolve function in
more detail in the next tutorial but for
now what I'd like to do is export this
schema right here so that we can use it
as a property inside this thing right
here so let us now say module exports
and set that equal to a new graph QL
schema I'm gonna have to grab that at
the top up here so I'll say graph QL
schema so what we're doing is creating a
new graph cue our schema here
and inside the graph Kowalski man what
we're going to do is pass through our
initial route query okay so what is
going to be the query of this schema so
the query is going to be the route query
that we defined so a lot of what we've
written here might seem like
gobbledygook and you might not
understand it all but essentially we're
going to be doing this kind of thing
over and over again and it's going to
get much easier to understand as we got
forward but just to go over it one more
time what we've done is we've grabbed
all of these different properties from
the graph QL package then what we've
done is defined our first object type
and that is a book type this book type
has different fields ID name and genre
which are wrapped inside this function
and we'll explain that a little bit
later on but anyway we're defining that
book type then down here we're defining
this root query which is how we
initially jump into the graph and these
fields right here these are all going to
have the different options of how we can
initially jump into the graph these
different queries if you like so the
first one that we've created is this
book field and this book field is saying
okay when someone queries a bulk then I
want you to use this thing right here to
go and get it now the type of data we're
looking for here is a book type and the
arguments that I'm expecting to come
along with the query is an ID which must
be a graphic URL string so we're
expecting a string which is an idea to
come along with this query then what
we're going to do when we receive that
query is we're going to fire this
resolve function this result function is
going to take in a parent parameter
which we'll explore later on we don't
need it yet and also this args parameter
which is going to contain the ID field
that the user sends along with the query
so when this fires down here this
resolve function we're going to have
access to that argument that ID and we
can use it to grab the book that the
user wants from a database or some or
the source all right so this is our
schema so far we've defined an object ID
and how we can reach in and potentially
grab one of those objects so now what
we're doing is we're creating a new
schema right here graph QR schema and
we're passing some
options into the schema and we're
defining which query were allowing the
user to use when they're making queries
from the front-end and we're saying okay
well that query is going to be this
route query right here all right so now
we have this scheme it over here and
we're exporting it we can use it as a
property over here so let's first of all
import it by at the top saying Const and
then schema is equal to require and then
this time what we need to do is say dot
forward slash schema to go into the
schema folder and then forward slash
schema for the schema file all right so
we're importing that and now we can use
it inside this middleware so we'll say
the schema property is going to be equal
to the schema that we just introduced
over here but using es6 we can shorten
this so it's just schema because both
names are the same all right so now we
have that schema inside this middleware
right here and the next thing we need to
do is go into this resolve function
right here to actually tell graph QL how
to go out and get that data when someone
makes a request</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>