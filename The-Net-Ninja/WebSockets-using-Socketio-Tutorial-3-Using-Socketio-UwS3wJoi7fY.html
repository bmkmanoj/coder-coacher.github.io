<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>WebSockets (using Socket.io) Tutorial #3 - Using Socket.io | Coder Coacher - Coaching Coders</title><meta content="WebSockets (using Socket.io) Tutorial #3 - Using Socket.io - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>WebSockets (using Socket.io) Tutorial #3 - Using Socket.io</b></h2><h5 class="post__date">2017-06-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UwS3wJoi7fY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">howdy young and welcome to your third
WebSocket tutorial and in this video
we're going to start using socket dot IO
to work with the WebSockets okay so just
going back to this diagram in the last
tutorial we created our Express up and
we created a server on nodejs
so that's this thing or right here then
what we did is we served up some public
files and one of those public files was
the index dot HTML file on the server to
the browser when we requested it okay so
we've got all this running them now what
we want to do is start working with
WebSockets and we're going to use a
library called socket IO to do that it
makes it really easy for us so we're
going to use socket dial by installing
it in both the backend on the server
side and on the front end okay so now
when we request this index dot HTML file
sake - IO is going to be set up in there
and also in the index dot JS file socket
dot IO is going to be set up in there as
well so what we can do then because
you've got it set up on both sides is
use it on both sides and we can
establish this socket connection between
the two okay and pass data along them so
that's what we're going to do in this
tutorial ok then so I'm back in index GS
which is running on the server and the
first thing I want to do is install sake
- IO on the server side so to do that
I'm going to open up this command line
tool then say NPM install socket dot IO
and not you Ohio and I'm going to
install this and save it to the
dependencies okay okay cool so once
that's installed we can then use it on
the server side so in this index file
I'm going to require it
let's say var and I'm going to store
this in a variable called socket and set
it equal to require and we're requiring
socket - IO ok so now we can use it in
this file now how do we actually set up
this socket dial well all we need to do
is come down here and we're going to
create a little comment called socket
set up and we can say var I oh this is a
variable I'm going to set it equal to
what we just required up here socket
this thing that we required is a fortune
so we're just going to invoke this
function okay and this function takes a
parameter and that parameter is what
server we want to work with now remember
in the last tutorial we set up this
Express app and we created this server
we stored it in a variable stored it in
a variable so we can take it and pass it
in to this sucker fortune so we now say
we want socket dot IO to work on this
server okay so now that is going to set
it up for us on the back end so the way
that this works is that socket IO is
going to be sitting around now on the
server waiting for some kind of client a
browser to make a connection and set up
a WebSocket between the two all right so
what we can do is we can list it out for
when that connection is made so to do
that we can take this variable we just
created IO and we can say dots on
connection so this is going to listen
out for 10 events called connection
right and that event is when the two
connect when we make a connection from a
browser so then when we make this
connection we can pass in a callback
function which fires so once the
connection has been made this thing
fires right here and inside here we
could just for now console dot log a
message so I say console dot log and
we'll say something like made socket
connection great and inside this
callback function right here we can pass
a variable which is going to refer to
that instance of the socket which is
made right that one particular socket so
say we've got 10 different clients all
making a connection each one is going to
have their own socket between that
client and the server right so when one
particular client connects we're going
to listen up for this connection method
it's going to connect to the server
we're going to fire this callback
function which then passes through this
socket which refers to the socket
between the client that's making the
connection and the server makes sense
and we can do stuff with this socket
object later on so for now let's just
save it and if I go to the same web
address right here at the minute nothing
is going to happen and we can see in the
console in fact we need to say no daman
index first of all to actually run this
file ok now if I go to 4
and yeah we get that back but down here
we're not logging this made socket
connection we're not actually connecting
to it yet why is that well I said that
we need to set up socket to i/o on the
server which we have done now and on the
front end so let's sit upon the front
end first of all then it's going to make
that connection when we request that
index file okay so let's go into the
index file first of all and what we need
to do is load in the socket to i/o
library onto the front end so if you go
to the socket IO website then you're
going to see in the top right hand
corner this download version download
button right here and we want the top
one so I'm just going to copy that and
we can paste it inside our index.html
file right here so I'm going to do that
just above the stylesheet so I'll say
script source is equal to what we just
pasted air copied I'll paste that in
there and then we have reference to this
now in this file now we also want to
create our own JavaScript file where
we're going to run all this kind of
custom socket 2il code so I'm going to
make reference to another external file
which are creating a minute and this is
just going to be called chat jeaious
so we'll say script source equals
forward slash chat jas and we need to
store this in the public folder so I'm
just going to save this and create this
fan out so new file chats dot J's K so
now inside this file when we get this
index.html file service was in the
browser it's going to load in this
library then it's going to run this file
down here at the bottom so in this file
we want to establish that connection to
the server to create this website
between the two all right so let's say
right here make connection so how do we
connect well because we loaded in the
library right here we have access to the
il variable right so I can say var the
create one called
socket and this is the socket for the
front end it's not to do with the socket
here they're two different variables
this one right here is running on the
server this one is running on the front
end okay so we can have two different
variables called socket that's fine
so we're setting that equal to IO we
have access to this because we've loaded
in the library on the front-end
io and to make a connection with say
dots connect and we're going to say
where we want to make this WebSocket
connection to so we want to go to the
localhost at HTTP slash localhost and
it's port 4,000 that were listening to
on the server so we can pass him that
and then now when we load up this index
dot HTML file in the browser we're going
to run this file and we're going to make
that connection right so when we make
that connection in the index file we're
listening out for that connection right
here then we're going to log this
message make sense so now let us run
this are we running it let's check we
need to say oh no we don't we're running
it already cool so let's refresh this
page over here when we refresh it is
this going to work let's have a look
well now if we open up this it says Made
socket connection so we have made that
WebSocket connection and now there's a
socket running between the client the
browser and the server and we can start
to pass data between the two of them
pretty awesome right so just there
quickly to run through it again we have
created our Express application we've
created a server and stored it in this
variable then we've required sake to i/o
to work with WebSockets down here we've
created a new variable called
IO and we've set it equal to socket
which is what we required and invoking
that function and passing through this
server we created okay so now that's
setting up the socket on the server side
then we're listening out for a
connection by saying IO dot on
connection and when that connection is
detected when it's made then we're
firing about this callback function
which is taking through these sockets
and got information about that socket we
can do stuff with it later
and it's logging this message all right
so we're making this connection right
here from the front end by loading in
the library to the index file right here
okay then in this file that we're
running at the bottom we're making that
connection by saying socket is equal to
IO we can use this because of the
library dot connect connect to this
thing right here localhost 4000 so when
we load this index file in the browser
it's making that
listening for that connection right here
logging this message okay so let's just
do one more thing I want to show you
this thing right here the socket so I'm
just going to actually log this to the
console as well so I'll do a comma right
there and then say well love this socket
and what I'm going to do is love the IDE
it's got a property called AG G if it's
just lost suck it is going to loads of
junk tons of properties we're not
interested in most of it but I love the
socket ID so if I save this now what we
can do is view in a browser again and if
i refresh then open up this console
right here we can now see this socket
connection right so it's a unique ID if
i refresh again we're going to get a
different socket connection so every
time we refresh every time a different
computer connects for example if I place
this in a new browser imagine this is a
new computer somewhere else in the world
when they connect they're going to get
their own unique socket ID their own
unique socket between the client and the
server okay so now we're all ready we've
connected we've made this WebSocket
connection and we're ready to start
transferring data and we're going to do
that in a very next tutorial by starting
to create this chat application</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>