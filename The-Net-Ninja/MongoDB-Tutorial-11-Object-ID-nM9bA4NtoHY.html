<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB Tutorial #11 - Object ID | Coder Coacher - Coaching Coders</title><meta content="MongoDB Tutorial #11 - Object ID - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB Tutorial #11 - Object ID</b></h2><h5 class="post__date">2017-01-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nM9bA4NtoHY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">howdy campers welcome to your 11th
mongodb for beginners tutorial and in
this video i want to take a look at the
object ID property okay so in the last
tutorial we finally use it in the
database with the name of mario by using
find one so it went to the database it
looked at the properties right here of
each record and any that it found with
the name of mario it will return that
first one it finds ok now what if we
have say 10 different records in the
database and they all have a name of
Mario I see five of them have a name of
Mario how do we know which one is going
to return to us what if we want to find
a very specific record well instead of
finding by name we could find by object
ID which is this thing right here you
see this long string of characters this
is the ID so each record in the database
which you saved to it has a different
object ID so because it's so unique we
can use that ID to find a very specific
record which is what I'm going to show
you in this tutorial so back in our
finding test J's file I'm gonna create
another test and this is gonna go out
and it's gonna find a record by ID just
gonna pop my semicolon there I'm gonna
copy this thing right here this bit
block I'm gonna create a new block
because these remember are individual
tests within the describe block right
here okay so we're still finding records
we're just finding it in a different way
we're just finding it in a different way
so let's say finds one record by ID from
the database so this right here
Mario cannot find one it's all going to
be very similar but instead of finding
by name what we're gonna do is search by
ID so let's delete that thing right here
and if we go to this robot Mongo we can
see that the property is underscore ID
so what we can say is we want to find it
by underscore ID right now how do we
know what ID it's gonna be well when we
create a new record Mongoose
gives it a unique ID okay it does that
for us so at the moment we create this
instance of the object right here this
car it now has a property of underscore
ID even though we don't specify it here
it's not a schema Mongoose automatically
gives it that property so we can say we
want to search the database for the
record with the ID which Mongoose which
Mongoose gives it right here okay so
let's come down here and we'll say we
want it to be my car dot underscore ID
right now is this gonna work it's trying
to find the ID of my car now my car is
not defined here it's defined here now
because it's defined within this before
each but don't have access to it outside
of the before each so how is this gonna
work what we need to do is just above
that before each we need to declare that
variable first of all so I'll save our
car okay and that's all I need to do
then it can delete this right here and
this now is going to update this
variable so we have access to this
variable here now within this it block
and it's not my car
it's just come all right so we're now
saying we want to find one record with
the ID of the car underscore ID so then
we find this function with the result
hopefully the correct record that it's
found then we want to assert something
we want to assert that the ID we found
is equal to the ID do we know
so we'll say result dot underscore ID is
triple equal to car don't underst
make sense right so the result that's
returned to us we want to make sure that
it is in fact the ID of this thing right
here which were searching for
so we're asserting up so let's see if
this works I'm gonna save it now I'm
gonna run this right here and game rule
two
and check this out we've got errors what
the hell is going on there so if we go
up we can see that saving a record that
passes absolutely fine
finding one record from the database
which is this thing right here
finding one record from the database
that is fine finds one record by ID from
the database
this is failing so why is it failing
well it's failing because this assert
thing right here is failing and the
reason is these things right here these
IDs these are not actually strings these
are objects if we take a look at robot
Mongo we can see that right here the ID
field is this string right here
surrounded by this object okay it's like
a wrapper around this ID so what we're
doing here is we're comparing two
objects this local object and this
object is come from MongoDB and they're
not technically the same thing and
because they're not technically the same
thing this thing right here is failing
okay so how do we get around it well if
we want to compare the actual strings
the actual ID which is this string right
here they should be the same so what we
can do is just call to string on each of
these things right here and then these
should be the same so this should pass
this time so if we open this back up say
npm run test awesome now we're passing
all three tests cool so just to
reiterate when we're actually finding a
character we don't have to put two
string okay Mongoose is clever enough to
understand that we want to find a record
with the same ID so we don't need to do
the whole to strengthen there but when
we're using assert right here when we're
asserting that the result that's come
back to us is actually the correct one
we need to call to string on the ID to
get the actual string of that object ID
within the object itself hope that makes
sense okay so that's how we find a
record by object ID in the next tutorial
we're going to take a look at deleting
records from the database I'll see you
then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>