<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>OAuth (Passport.js) Tutorial #21 - Adding a Profile Thumbnail | Coder Coacher - Coaching Coders</title><meta content="OAuth (Passport.js) Tutorial #21 - Adding a Profile Thumbnail - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>OAuth (Passport.js) Tutorial #21 - Adding a Profile Thumbnail</b></h2><h5 class="post__date">2017-11-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1ND3F8IoZdg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey gang welcome to your 21st and final
our tutorial and in this video we're
just gonna add some final detail to our
profile page ie
a profile thumbnail alright then well
done you have successfully made a login
system using passport and nodejs that is
freaking awesome now if you wanted to
extend this to other third-party
services like Facebook or github so you
can log in using those as well all you
have to do is go through exactly the
same process but also set up a Facebook
strategy or github strategy much like we
did with the Google one now obviously if
the data you receive back is gonna be
different so you just have to check out
their API to see how you can do that but
the whole process is essentially the
same kind of thing now before we close
out this series I want to show you one
more thing so right now the profile page
just shows the net ninja my username and
it's not very interesting so I want to
also display something else maybe I want
to display a thumbnail a picture from my
Google profile alright so what we need
to do when we retrieve that data when a
user logs in using Google is we need to
store that user image as well from their
Google profile inside our database
because right now all we're doing is
we're retrieving the username and the
Google ID and story knows we want to add
a thumbnail to this okay
so we have to do that in two different
places inside our application the first
place we need to do it is inside here
when we're retrieving that information
we're saving a user to the database we
need to add in a thumbnail property down
there we also need to do it inside our
we use a model inside the scheme and now
I've already done that I've just added
that in thumbnail right here and it's
also a string because it's at the end of
the day going to be a URL to some kind
of image so we've added it into the
schema right there we also need to add
in it down here a thumbnail property now
before we do that we need to find out
where that thumbnail property is inside
this profile so let's just log out this
profile to the console when we log in
and test this out so if I go to log out
first of all
then go to login login using Google+ I'm
gonna go to my console over here stop
doing it yeah oh here it has so now we
can see this profile object and if we
scroll down a little bit you can see
this
Jason property right here okay inside
the profile and inside this Jason
property we have this URL and we have an
image right here which has a URL inside
it so this image has this URL
now I've already opened this URL up in
another browser and it looks something
like this so this is my little thumbnail
image from my Google profile and that's
what we want to grab okay so we're gonna
notice that this right here is inside
the JSON object then is the image and
then is the URL so we need to take that
and we need to add it on to our thing
right here where we save your user so
we'll say the thumbnail
is going to be the profile first of all
then is dot underscore Jason that's the
first object that it's inside then it's
dot image then is dot URL so we're
grabbing that URL I'm restoring it now
inside our user for their thumbnail so
that we can then output that thumbnail
on their profile page now at the minute
if I log in it's not going to grab that
for me because I'm already signed up so
let's just test this out I'm gonna log
out then login again using Google+ and
because I'm already a member
I'm already a user on this website it's
not going to create a new record for me
so it's not going to grab that thumbnail
URL okay you can see this has not
updated so instead I'm gonna delete this
record so that we can start afresh we
can sign up to the website again it's
going to create a new record for me and
this time hopefully include that image
URL so let's login using Google+ and now
if we take a look over here and refresh
we should see that record with a
thumbnail right there so we now have
access to this URL for the thumbnail
which is cool so when we're outputting
the profile page down here we can output
the thumbnail down here somewhere
so what I'm going to do is just copy and
paste a little snippet from my github
repo and paste it inside the main tag so
we have an image with a source equal to
and then we're using ejs code right here
inside the quotations to output the
thumbnail and remember we need that
little equal sign because we're directly
outputting some data here so it's user
dot thumbnail I remember we can do this
because we passed down the user object
to this view in our profile routes okay
we've got two profile routes we can see
right here we're passing down this
object the user so we can access that
user object and output the thumbnail
inside the source for this image and
then there's just a little P tag
underneath to say this is your profile
Thor now in case you didn't know okay so
let's save that then what I'm going to
do is refresh this page and now we can
see our user profile on this as well
let's just log out
and check this whole process again so I
go to the home page login google plus
takes us to the profile page bang there
is our thumbnail as well so there we've
got my friends that is how we create a
login system using OAuth and passport
j/s I hope this series has been of some
benefit to you if you do enjoy them
please my friends don't forget to share
them subscribe and like now in the
future I may add additional tutorials to
this series to show you how to do it
with Facebook and github and maybe just
extend the whole application but we'll
see where that goes and how many people
want that but for now I hope this has
benefited you in some way shape or form
and I'm gonna see you in the very next
series</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>