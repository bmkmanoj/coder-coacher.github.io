<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>OAuth (Passport.js) Tutorial #6 - Google Strategy Setup | Coder Coacher - Coaching Coders</title><meta content="OAuth (Passport.js) Tutorial #6 - Google Strategy Setup - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>OAuth (Passport.js) Tutorial #6 - Google Strategy Setup</b></h2><h5 class="post__date">2017-10-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9x66l93iEW0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Paola Ganga welcome to your sixth Olof
tutorial and in this video we're going
to look at the Google strategy and how
we can set up the Google+ API to use it
inside our project all right then so in
the last video we imported these two
dudes right here passport and Google
strategy and we started to set up
passport to use a new Google strategy
and we said that this object right here
needs to take some options to configure
it we also passed as a second parameter
to passport use this callback function
which we're going to talk about at a
later point in time for now let's focus
on these options we need to place right
here so when we're setting this up to
use a new Google strategy what we're
essentially saying is we want to use the
Google+ API to authenticate people on
our website using Google right so we're
using the Google API behind the scenes
now in order for us to do that we're
going to need a couple of different
things a client ID and a client secret
now there are two of the things that are
going to go in here so how do we get
them well first of all we need to go to
the developers console at Google so
that's console
developers.google.com/live EULA count to
do this so if you've not got one create
one and you'll need to create a project
on this developer console to enable the
Google+ API so that we can use it in our
project so I've already selected this
project ninja orthe test if you've not
got one this should be a plus side or if
it's a drop-down arrow just click that
and click the plus over here to create a
new project give it a name and press
create so once you're in your project
here we need to enable the Google+ API
for it
so click on this enable API services and
we want to look for the Google+ API
which is the top one right here and when
this loads up you'll see it says
accessing user data with OAuth 2.0 this
is what we're going to be doing so we
have our application which is going to
use passport and the Google strategy to
authenticate our users it's going to
send them to the user consent screen
then grab to the user data okay makes
sense
this is what we need to use so let's
click on enable so this will just take a
couple of seconds
then redirects you to your dashboard
okay so once that's enabled you'll see
this screen right here and it says at
the top to use this API you may need
credentials click create credentials to
get started so let's do that let's click
create credentials and which API are you
using well it is the Google+ API so
we'll leave that as is where will you be
calling the API from well we're going to
be calling it from a web server on
node.js so let's select that one and
what data will you be accessing we're
going to access the user data so let's
click on the button to go forward we
need to give these credentials a name so
I'm just going to call this my clients
you can call it whatever you want and
then down here authorized JavaScript
origins where are these requests going
to come from well we're serving them
from a local host port 3000 so let's say
HTTP forward slash local host and it's
port 3000 all right so I'm gonna just
copy that and I'm gonna also paste this
in the next one which is authorized
redirect URIs I'm going to talk about
this a little bit later on for now just
pop in this address forward slash
whatever all right so now we need to
press create client ID and that's going
to create these credentials for us just
click I'll do this later and then if we
click into these credentials now we're
going to see the things that we need the
client ID right here and the client
secret so these are two of the
properties we need to pass in so this
thing right here so let's do that now so
if I go over here I'm going to first of
all copy this thing which is the clients
ID so ctrl C for that one and we're
gonna paste that in here so underneath
this comment I'll say clients and then
its capital A and capital D then this is
gonna be a string right so you need to
place this thing we've just copied right
here inside quotations here so that it's
a string so after that let's place a
comma and the next property is going to
be the client secret so let's go back
over here and grab that client secret
and paste that in here again inside a
string like so okay cool so now we've
added the client ID and the client
secret to this Google strategy so when
our application starts and passport
knows that it wants to use a Google
strategy to authenticate people this
Google strategy is going to say okay
well I can do that I can use the Google
API to authenticate users because I've
set up some credentials and enable the
API in my project online okay so I'm
allowed to do that now inside this
application I can use that API so
they're two of the properties we need
inside of this Google strategy all right
so now we have those two things in now
imagine at some point when we created
our project we use a source control like
get and what upload it all of this to
github now ideally we don't want people
to see these things here right so we
need a more secure way to store these so
that when we upload our files to github
other people can't necessarily see them
so I'm going to show you a better way to
store your keys and your secrets in the
very next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>