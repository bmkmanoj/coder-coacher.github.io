<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GraphQL Tutorial #19 - More on Mutations | Coder Coacher - Coaching Coders</title><meta content="GraphQL Tutorial #19 - More on Mutations - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GraphQL Tutorial #19 - More on Mutations</b></h2><h5 class="post__date">2018-04-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/H8oRezNak2s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay then so in the last tutorial we
started adding authors to our instance
of MongoDB here to the author's
collection now I just want to point out
that I deleted those two test ones we
did when we created mutations in
graphical over here which was shown as
Steven and I've just added instead
Patrick Rothfuss Brandon Sanderson and
terry pratchett so I did that by
pressing the Delete icon right here to
delete the current records and then just
making some more mutations for those
authors right here okay so we have this
mutation now to add an author but we
also need a mutation to add a book so
I'd like to do that now
in the code under mutation we're going
to create a new field after the add
author field so let us put a comment
after that and then create another
mutation called add book so this
mutation again means first of all a type
and this will be a book type and then we
also expect some arguments so again
we'll say arcs and this is going to be
an object with three different
properties this time we need the name
the genre and the author ID so let us
say name on the type of that name is
going to be a graphic of our string so
let's choose graph QL string we also
need the genre and again that is going
to be off type graph cue our string so
let's choose that and then finally we
also need the author ID so author ID is
going to be off type this time graph QL
ID right oops
capital D at the end all right so now we
have these three different arguments
that we expect a user to send when they
make this ad book mutation because we
don't know the name is genre or the
author ID the user does right so they're
going to send all of those arguments
with this mutation now then we need that
resolve function so that we can take
that data that the user sends with this
mutation and actually create
new book story in our books collection
on MongoDB so much like we did with
author up here let us create now a
resolve function and inside we take the
parent and the arcs and inside the
result function create a another local
variable call this book let book equal
to a new book and remember we can do
that because we imported the book model
at the top up here right so we're using
this book model now to create a new
instance of a book and inside the book
we need to pass through the different
properties so we need to name which is
going to be equal to the args name so
the name that the user sends along then
the genre which is going to be args
genre and then finally author ID which
is going to be args dot author ID all
right so now we have those three
properties on our local instance of this
new book so now we can take that book
remember and we can save it to the
database and remember in order for us to
get data back after we've made this
mutation request we have to return that
data right here right graph QL takes
care of which properties to send back
dependent on what we've requested to
receive back in the query or the
mutation but all we need to do is return
the value that this gives us booked on
save so that was simple right so now
we've done that let us check out this in
the front-end again we're going to make
a mutation this time it's called ad book
and the name of this book is going to be
called the long earth and we don't need
an age property but we need as on or a
property that's going to be sci-fi and
then we also need an author ID property
but what is the author ID well when we
create new records in MongoDB it
automatically gives us an ID right so
I'm going to
this ID right here because I need not
this ID this one because I need terry
pratchet so I'm gonna copy that and I'm
gonna paste it right here like so
alright so I'm saying this is the Arthur
ID which corresponds to terry pratchett
the name of the book is the longer and
the genre is sci-fi now what properties
do I want to get back from this ad book
mutation when you've made that mutation
well I'll take the name back and I'll
also take the genre bug now if I press
play then I'm gonna see that this works
and we get these two things back but has
it been saved to our database well let
us go into the home first of all screen
then go into our database then we'll see
that it's creating now a books
collection awesome and if we go inside
this books collection we can see that we
have the longer sci-fi and this author
ID matches up to the ID of Terry
Pratchett in his record cool so there we
go that's our mutation for adding books
what I'm gonna do now is just make more
mutations to add all the different books
to this collection right here but I'm
not going to record that you really
don't want to see me doing it all I'm
going to be doing is adding the
different properties right here so we
have them to play with as we go forward</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>