<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AngularJS Tutorial #18 - Custom Directives | Coder Coacher - Coaching Coders</title><meta content="AngularJS Tutorial #18 - Custom Directives - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AngularJS Tutorial #18 - Custom Directives</b></h2><h5 class="post__date">2016-03-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/R_okHflzgm0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you know something guys welcome to your
18th angularjs tutorial and in this
video we're going to go ahead and create
a custom directive and oaks
so we've seen quite a lot of directives
already things like ng-click ng repeat
ng source
ng show etc and they've all kind of got
one thing in common and that is they
direct angular to do something or other
so there's quite a lot of directives in
angular that we can use for tons of
different things but if we want
something extra some kind of
functionality which is just going to be
unique to this application then we can
go ahead and just create our own
directive to handle that functionality
all right now I said in a previous
tutorial that directives can come in the
form of these things right here
attributes on an element or they could
be an element in themselves so I could
create a directive called ninja and just
have it as an element and then whatever
I write this attribute not attribute
this directive then something cool is
going to happen all right so that's what
I'm going to do in this tutorial I'm
going to create a directive which is
going to be used as an element and then
when that element is used in your HTML
something is going to happen on the page
and the thing that I want to happen is
to display a random ninja on the home
page right here every time you refresh
okay so to do that I'll get rid of that
right there we'll go into our home view
and we're just going to pop the
directive underneath that h1 so I'll
open the tag and this directive is going
to be called not I'll call it random
ninja like that and notice there's a
hyphen between the two words right there
whenever there's a space in your
directive if it's more than one word use
a hyphen in the HTML that's kind of
angular's way of doing things and then
when we define this directive in the app
code then it's going to be in camel case
and I'll show you that in a second
alright so first of all this random
ninja is going to show a random ninja
right here on the home page now for it
to do that it needs to have access to
our ninja data now currently this whole
view doesn't have access to any of that
data whatsoever because there's no
controller
controlling it and there's no data being
fed into it on the scope object right if
we take a look in the app KS where we
wrote this controller you can see we'd
go out and grab all the data within this
control of this ninja controller and the
reason we have access to that data in
the direct review is because when we set
up our routes we gave that directory
review there a ninja controller so this
is controlling this view so therefore we
have access to that scope object with
all the ninja data on it that we get in
the controller now because this doesn't
have a controller associated with it we
don't get any of that data so we could
do two things in we could go ahead and
create a home controller and then go out
and reach for that data again within the
home controller and pass that through
here or for simplicity sake we could
just pass in the ninja controller to
control this view as well which is what
I'm going to do for this tutorial you
might not do it in your real life
projects but I'm doing it here so
controller is going to be ninja
controller and now we have accessed all
of that data in the home view and I can
demonstrate that just by typing out an
expression and getting the ninjas object
which remember is stored on the scope
which mean how which we now have access
to so if I save this now it should
output all of that ninja data right here
and yeah it looks an absolute mess but
you get the point we've got access to
that data now so now we're going to be
able to use that data in this directive
because we're going to pass some data
through to that in a bit all right
okay then so now we've done our
directive in the HTML we need to go into
the JavaScript and define the directive
there and decide what it's going to do
what kind of functionality so let's go
ahead to the app and we define it
similarly to this controller here so
we'll just say my ninja up dot directive
and then we pass through a name remember
I said that in the JavaScript we do a
camel case that's the way we do
everything in the JavaScript side of
things so in the whole view
it says random - ninja that just turns
to a random uppercase ninja like that
okay so that's the name of our directive
and now whenever angular sees this
directive right here it's going to jump
over here
and look for this directive to see what
it does okay
so again like in the controller we pass
through our dependencies and functions
so we'll open our square brackets and
close them and now there's not going to
be any variables that I'm going to pass
through like this one here I don't need
them in this directive but I'm going to
pass through the function so we'll do
that right now
and then within this function is where
all the magic is going to happen so when
we do a directive what we need to do
inside it is return an object this is
the way we do things so I'm just going
to return an empty object for now and
then within this object this is where we
kind of define all of our different
properties and control our functionality
of this directive and we're going to
return all that functionality
every time this directive is called in
the HTML right so the first thing we
want to do is call the restrict property
and this is how we restrict our
directive to be used in a certain way so
we can restrict it to be one of four
letters and they are a II C and M now
we're just gonna look at en a and E
stands for element and if we put an e
here it means that we can only use our
directive in the HTML as an element in
this form right here which we're doing
right if I put in an A it means we can
only use it as an attribute much like
these things right here
okay so we're restricting the directive
to a certain form but if we want to use
in both we could do e a and now we can
use them as an element or an attribute
okay the other two incidentally are CM
and they're to do with classes and
comments but we're not going to cover
those that's kind of a legacy stuff so
we'll just stick to e for now for this
so we're restricting our directive to be
used only as an element okay now the
next thing I want to do is define the
scope
and this is where we're going to pass
data through into this directive now
what we're doing here is we're actually
creating what's known as an isolate
scope which essentially means the
directive has its own scope it's not the
same as the scope outside in this hole
remember we're getting this scope from
the ninja controller right and what
we're going to do is we're going to get
the data off that scope object and we're
going to map it onto the isolate scope
here so they're not the same scope the
different but we're taking data from the
controller scope in the whole view and
we're going to map that and put it into
this isolate scope right here so it has
its own scope right so this we pass
through an object and within this object
is where we add different key value
pairs to give this scope some data
essentially so the first thing I want to
give this is the array of ninjas and
want access to all of those ninjas
because we're just going to choose a
random one and then output it on the
page so to get that we need to pass it
through in this directive right here
right so remember before I did an
expression and we could access that
ninjas data right which is on the scope
we never save that you can see all
outlined there it's all on the home page
but I don't want to do that I want to
pass this object right here into here
and to do that what I'll do is just
create an attribute called ninjas right
and then I'll set it equal to that
object which is ninjas okay so I'm
telling the directive look I'm going to
pass through an attribute called ninjas
so you can have access to that and
within the attribute and with a store
this object I'm going to pass through
that ninjas object so you can get it
okay so I'll save that and then over
here to access that what we need to do
is write ninjas because that's going to
be our property on the scope and then we
just set that to be an equal sign and
this kind of means that it's binding the
data together we're binding one value to
another okay so now it's going to look
for this property or this attribute on
here which it finds and then it's going
to set the attribute that on here this
proper
here - this thing right here this object
okay so now we've got access to it in
scope ninjas alright now we want another
thing as well and this is just going to
be a title and what I'm going to do is
in the whole set another attribute
called title I'm going to set that equal
to random but we need to put this in
another set of quotations and I'll tell
you why in a second this electrical -
random ninja okay now in this example
and passing through a JavaScript object
so we don't need to put that in
quotations here and passing through a
string not a JavaScript object and so
because it's a string I need to pass it
through in additional quotations and I'm
using single one so we don't escape
these double ones right here all right
so now we've got access to that as well
on the scope right there alright then so
next thing we want to do is create a
controller and within that controller
let me just go to the next line like
that within that controller we're going
to pass through a function and then we
have access to the scope in this
directive so we can pass that dependency
right through here like that okay
because we're going to use it in our
controller in a minute but for now we'll
come back to this control in a second
what I'm going to do is make the
template of this directive and to do
that we need a property called template
yeah and then basically every time this
directive is called in the HTML it's
going to find this directive in the
JavaScript there and it's going to look
for this template and it's going to
output whatever's in this template in
the HTML or on the page okay so let us
do something like this let us output
just to see if it works the title
because now we have access to that on
desculpe yeah so let us output that and
comment at the end or the come around it
and if we save now we can see the title
is being output to that page let's do
something a bit better let's get rid of
the title
let's output an image tag and then the
ng - source is going to be equal to and
then what I want to do
six equal two ninjas which is that
object right there that array of ninjas
and we're going to grab one of those
ninjas it's just going to be the first
one so far and we want to get the thumb
property on that ninja because if we
look at our data the thumb property
right there is the path to that picture
so what we're passing through in the
source attribute right there is the path
to the picture so then we've got an
image tag with that source so now let's
close that off like that and save it
hopefully we should get that picture
right there and it's usually the first
one but we want this to be random we
don't just want it to be Yoshi every
time so this is where we can control
that functionality within this
controller so what I'm going to do is a
little bit of math I'm going to say
scope and then just make a property
called random okay this is going to be a
random number and it's going to be a
random number between zero and three
because zero is the first ninja in our
array which is if we have to take a look
yo then we've got zero one two and
three so it's going to be a number
between zero and three right and then
what's going to happen is we're going to
pass that number through into here all
right so we're going to generate a
random number pass that number through
into here every time this page on this
view loads so that we get different
ninja every time so scope random equals
and we're going to use the math function
in JavaScript dot floor which is just
going to instead of round up around the
number down so if you have three point
seven it's going to round it down to
three or we have one point five is going
to round it down to one okay and then
we're going to floor math dot random and
dot random just returns a number between
zero and one right not point five or
something like that and then we're going
to times that by four and that's going
to give us a random number there between
zero and three so now we've got scope
dot random there and we can pass this
random property on the scope object now
here like that so if we save it now
every time we refresh over here we get a
random ninja like that okay pretty cool
yeah all right then so
instead of having a template pretty
simple like this I want to do something
a little bit more complex and now
instead of writing it all within this
string right here what we can do is
supply a template URL much like we did
over here with a view and we can put a
little bit more complex code in that
view so to speak okay so let's get rid
of this right there and we'll call this
template URL instead and what we're
going to do is create a HTML document in
there so we'll pass through views
forward slash and then we'll call it
random dot HTML okay and then it's going
to look for that template it's going to
output that instead so let's save that
and create it over here new file random
dot HTML and then within here we can do
whatever we want we can output that kind
of template so same thing again I'm
going to do an image with a source equal
to and it's going to be that thing again
we're going to output this expression
which is going to be ninjas random like
that and then dot Thor and then let's
just close that image right off like
that save it and then see what it does
over here now we're getting that random
image but don't forget we also had this
other property right here that we have
access to so I'm going to put that above
it as well so I'll just say we'll call
it hitch four and will output the title
like that okay random ninja and then
what I'm going to do is create a div
right here I'm just going to pass it
through a little style like that and I
say text-align:center like that and
we'll close the div off right at the end
and that's just going to make this look
a little bit better in the browser so
now it's centralised instead and we'll
go to the home page and we'll just do
the same for this will say style equals
text aligned
Center okay all right cool and now we
have that random ninja right there
every time we refresh we get a different
random ninja okay pretty cool yeah so I
mean that's how we create directives
just quickly once again what we've done
is we've created a directive right here
in the element form and we use this -
whenever we have a space right then in
the application we've done my ninja up
directing to create a new directive and
we've named that the same as what we've
named it here except instead of a -
we've used camelcase
then we've passed through any
dependencies we need who not needed any
here but if we did we pass them through
into this array along with your function
inside the function we return an object
and this is where we pass through all
the properties of this directive which
is going to control it we first
restricted it to elements only then we
added this scope property and we grabbed
this data from the these attributes
right here okay then after that we
supplied a template URL which is in
views forward slash random and within
there we output that data like that and
then finally we add a controller where
we pass through the scope object we
added a property to that scope col'
random to get a random number which we
pass through into this thing right here
this array so it brings out a random
ninja every time okay so that's that's
directives guys if you have any
questions whatsoever feel free to leave
those down below we are going to kind of
add to this a little bit in the next
tutorial I just want to show you a
couple more things but I think I want to
stop that one here for now so yeah any
questions so far
ask them below otherwise don't forget to
share subscribe and like all that kind
of stuff and I'll see you guys in the
various tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>