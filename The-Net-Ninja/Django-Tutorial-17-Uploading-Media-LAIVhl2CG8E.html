<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django Tutorial #17 - Uploading Media | Coder Coacher - Coaching Coders</title><meta content="Django Tutorial #17 - Uploading Media - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django Tutorial #17 - Uploading Media</b></h2><h5 class="post__date">2017-12-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/LAIVhl2CG8E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">how do campers welcome to your 17th
janggo tutorial and in this video I'm
gonna show you how we can upload media
to our articles all right then so now
we're successfully displaying our single
articles on the browser what I'd like to
do is show you how we can upload media
when we created an article for example
having it as an extra field here we can
upload some kind of thumbnail or image
which we can then show on this article
detail page so how do we set that up in
jungle well there's a few steps to go
through but fortunately it's all pretty
simple so the first thing we need to do
is head over to the settings inside
jung-geun or tick right here and right
at the bottom where we added a couple of
lines for static files down here we're
also going to add a couple of lines for
uploading media so we need to specify
two properties right here the media URL
which is like the static URL and it says
okay well at what address do you want to
find the media for example if I go to
localhost 8004 word slash media that is
where i'd like to be able to find the
media okay so for example pick JPEG okay
so we need to specify that first of all
so we'll say media underscore URL and
set that equal to a string /media
forward slash and again this can be
anything that you like you can call this
pix if you want or something else I'm
going to call it media alright so now
we've done that we need to specify one
more property and that is the media
underscore roots and the media root is
going to be the folder where Django
uploads images to when we upload an
image over here in the blog creation
screen or the article creation screen
where is Django going to upload it to so
we need to specify a folder right here
so that is going to be equal to first of
all OS dots path dots join remember this
method right here will join two parts of
a path together for us and the first
part is the base underscore directory
now that guess the bay
direct right here of the whole project
so this jangan arctic folder then we
want to append to that a media folder
right here so this will create a media
folder inside this base folder right
here so now when we upload something
it's going to upload it to this folder
right here and when we go to receive
that Jango knows where all that media is
stored so that's those two properties
sorted out in the settings file the next
step is to head over to the URLs dot py
file and remember we did this URL
pattern for the static files we told
Jango to serve those up we have to do a
similar thing for media files only it's
a little bit different so the way we do
this is by again appending a URL pattern
to this thing right here so we say URL
patterns and set that plus equal so
append to static and remember we're
importing static up here no we're not so
let's import that
so we'll say from Django dot config or
conf rather dots URLs dot static import
static so this thing right here is going
to allow us to say okay where the media
URL is and where the document root is
and it's going to allow Django to serve
up these media files so we say static
down here it's a method and it takes two
parameters first of all is going to be
the media URL so we can get that from
the settings file and again we're going
to have to import that so we can use it
so we'll say from Django Kampf import
settings and by settings it's just
pretty much everything that we define in
the settings file so right down here we
defined these two things so by importing
the settings over here it means we have
access to those those two properties we
just created and we're going to need
them here so we'll say settings which we
just imported dot media underscore URL
so that's the first parameter the media
URL where do you want to find these
media files when you type it into a
so we specified that already in settings
right here and we're just passing it to
this static method to tell Django right
here how to serve them and the second
parameter is going to be the document
underscore root which is equal to
settings dot meet oops
dot media underscore root which is the
second thing we specified right here
where are those files stored where can I
find them so now Django knows that it's
going to set up a URL pattern for us so
it can serve those media files to us
when we type them into the browser in
the URL bar up here or if we request
them from a template okay so that's kind
of like the setting up phase if you like
the next thing we want to do is actually
on our model for an article right here
we want to add in a field for a
thumbnail so far we have these four
fields and we show three of them here
the date is automatically generated we
want a fourth field to be the thumbnail
so let's create that so this field is
going to be called thump-thump is equal
to models and then we're going to use a
field called an image field that's what
we want to upload so image field and
again remember you can find all of these
different field types on the Django
documentation the link is going to be
down below for that and inside here I'm
going to specify a couple of parameters
so first of all I'm going to specify a
default image so if we use a doesn't
select an image or if for whatever
reason an image is not applied to an
article then we're going to give it a
default image and this is going to be
called default dot PNG and what we'll do
is manually place this image inside the
media folder later on so that if an
article doesn't have an image it's gonna
find this default PNG image and show
that instead so the second parameter I
want to pass in here is blank is equal
to true which just means basically this
can be a blank field it doesn't have to
be filled with something
so now we have those two parameters
right here what we'd like to do is make
a migrations file remember every time we
make a change to a model we have to
migrate that change so to do that we
need to open up our terminal and inside
we say python managed dot py then it's
make migrations so that is going to make
the migration file ok we have an error
setting is not defined and that should
be in the urls over here not this one
the ones down here and settings settings
there we go all right so let's try this
once more
so same command and you'll notice that
we actually get another error and it's
saying that we can't use this image
field because pillow is not installed so
basically we have to install another
package in order to use image fields in
our project but this is dead simple it
says how to install it right here so we
can just say pip install pillow like so
and that will install it for us all
right then so now that's installed
hopefully third time lucky
Python manage top you I make migrations
and this time it's made that migrations
file for us now we have that we can
migrate it to the database so we'll say
python managed dot py migrate and then
oops
i've spelt this in a really weird way
manage dot py migrate and now we've
migrated that to the database awesome
so then if we scoot this down and view
this in a browser now over here if i
want to go back to articles now first of
all what we'll need to do is run the
server so i'll say python manage py and
i keep spelling this incorrectly manage
py run server now we should be able to
go to the admin section and add in a new
article now we can see the
fourth field right here for a thumbnail
so let's make up another article we'll
just call this test
- I'm so original and the test - will be
the URL but err this is a test for
thumbnails and then let's upload a file
so I'm gonna choose this number one
right here and save and now we have test
two right here that's saved so hopefully
if we go back to the articles page we
see test two and if we go in here we
don't see a thumbnail just yet but if we
expand at this folder now we see this
media folder right here and this one dot
PNG is in there the reason it doesn't
show over here is obviously because
we're not showing it in the template but
what we can do now is access that
thumbnail property on the article and
then output it in the template so let's
output an image right here what's the
image source is equal to and then inside
the string we'll say double curly braces
because we're going to output some data
article dot thumb and then whenever we
use an image field on the model we have
access to the dot URL property so that's
going to grab the URL of this thumbnail
based on where it is in the tree over
here so it's in the media folder and
it's going to output that to the browser
for us which is pretty awesome
so if we save this now and refresh over
here then hopefully yep now we get that
thumbnail well it's not a thumb pill
it's a whole banner on this article
detail page so let's go back and try
adding some to the other ones will say
jungle right here
number two save that and let's go to
another one jungle rules I'll say number
three save that and also remember we
said that the default one is going to be
default PNG so you can see that that's
what it's automatically applied it to
it's applied this current default PNG to
this article where we've not specified
our own thumbnail so let's leave that
one as is and check that out again in a
second for now let's go to jangan Artic
and try jangan article
but now we get this image jungle rules
we get this image so this one right here
ah hello world that is the one which
shows default dot PNG
now obviously that doesn't exist at the
minute but all we need to do is dump a
default PNG file inside this media
folder and then it will appear on the
page so let's do that
so right here I've got the images
default dot PNG let's place that in
there and if i refresh over here we
should now see that default image as
well awesome so there we go my friends
that is how we can configure django to
allow us to upload media and serve the
media and how we can show it on a web
page</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>