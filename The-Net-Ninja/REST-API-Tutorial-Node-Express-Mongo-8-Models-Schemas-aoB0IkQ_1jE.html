<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>REST API Tutorial (Node, Express &amp; Mongo) #8 - Models &amp; Schemas | Coder Coacher - Coaching Coders</title><meta content="REST API Tutorial (Node, Express &amp; Mongo) #8 - Models &amp; Schemas - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>REST API Tutorial (Node, Express &amp; Mongo) #8 - Models &amp; Schemas</b></h2><h5 class="post__date">2017-03-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aoB0IkQ_1jE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yo gang welcome to your eighth REST API
tutorial and in this video we're going
to talk about MongoDB models and schemas
so first of all models what are models
well basically they're a way for us to
represent our collections in MongoDB
right so imagine we have a collection of
users we create a model in our code to
represent that collection of users in
MongoDB and that model would be called
the user model right or more
specifically to the application wickedly
making we have a collection of ninjas in
MongoDB and we'll create a ninja model
to represent that collection of ninjas
right and you can think of a collection
in MongoDB as for example like a table
in SQL right it's just a series of data
it represents a single model so models
work hand-in-hand with schemas and
schemas define the structure of the
objects within our collection right so
imagine we have that collection of ninja
objects and each object in that
collection has a series of properties
name rank availability our schema
defines the structure of these
properties and it says whether it's
going to be a string letter name a rank
or a boolean or a number or something
else okay so it defines how each object
which is going to be stored in this
collection is did a look so if we put
these two together we have our
collection over here of ninjas which is
represented in our code by a model a
ninja model right and in this collection
we have a series of records or objects
and each one represents a single ninja
and they've all got a unique ID this ID
is what separates them on the top level
so when we come to find them later on we
can use that unique ID to find them okay
and this is something that is
automatically given to each object as we
save it to the database so if we open at
one of these ninja objects our schema is
what governs the inside of it he says
how it's going to be structured let me
set the name is a string the rank is a
string availability is a boolean it
could have other objects such as AIDS
which is a number things like that so
our schema is defining the strip
okay our model represents the collection
so we're going to be installing Mongoose
to help us interact with the database
and what Mongoose does is it adds a
layer of message to easily save edit
retrieve and delete data from MongoDB
it's going to make our life much easier
and it also allows us to create these
models and schemas very easily too so
the idea is that we use mongoose and the
messenger providers to create a model
and a schema for a ninja object in our
API code then when we receive data from
a post request from another source to
our API we can take that data we can
create a new ninja object using the
ninja schema and model that we create
and then send it off to the relevant
collection in MongoDB
so we're going to jump into the code now
and we're going to do that but if you
want to learn more about models and
schemas first check out my MongoDB for
beginners playlist I'm going to leave
the link down below I go into these
things in more detail in that series
okay so the first thing we need to do is
install the Mongoose package so to do
that make sure you're in the right
directory in your command line tool
inside NPM install Mongoose and we're
going to save it to our dependencies so
that's going to go out grab the files
and install it for you okay so once
that's installed we can go ahead and
create our model and schemin out what
we're about so we're going to create it
well we could create it in the index if
we wanted to but I like to keep things
separate of modular so what we're going
to do is create a new file sorry a new
folder and the top level called models
and inside this folder we're going to
create a new file and this is going to
be called ninja KS okay so this is going
to represent our ninja model in here so
the first thing we want to do is require
mongoose because we're going to use
mongoose in this file so i'll say const
mongoose set that equal to you require
then in parentheses Mongoose okay the
next thing we want is a variable to
store our schema class in so I'm going
to say constant schema and I'm going to
set that equal to
Mongoose dot schema okay so now we're
going to use
listing right here first of all to
create our schema how is our data going
to be structured so I'm going to pop a
little comment down here seen create
ninja schema and model first of all and
then I'm going to take on ninja schema
this is going to be a constant let's
just spell it correctly we're going to
store our schema in I'm going to set
that equal to a new schema right here
and remember that the wire keypoint tax
instead of c schema is this thing right
here so we say we want a new schema
alright so inside the schema we're going
to define how our objects are going to
look so the first property I want our
ninjas to have is a name property and
inside this I'm going to do another
curly brace and know I said we could do
something like this string okay but I
also want to add another option and when
we're adding multiple options we need to
provide them in an object like this so
first of all the type is going to be
string like so and then it's also going
to be required and we're going to say
true if it wasn't required then we can
say false
okay so we're stating this to be
required and then what we're going to do
is pass back a little message which is
going to provide some feedback if you
like if this doesn't validate correctly
so if it's not passed along a name
property
so we'll say name field is required okay
and we'll delve into that a little bit
more later on for now we're just going
to pass this message in so now we've
defined our name let's move on to the
rank and this is going to be a string as
well for example black belt or blue belt
but again what I'm going to do is pass
this in an object just in case we add
any more kind of properties to it such
as to require field later on so I'll say
type is string okay okay the third one
we want is available so this is going to
be a boolean but again I'm going to push
it through as an object I'm going to say
type is boolean so that's true awful and
then I'm going to set
default to the Fox okay so if they don't
specifically say that the availability
is true they don't pass that through
then is going to be fall to false when
we create a new ninja make sense okay so
that there is our schema what I'm also
going to do is put a little comment down
here to add in geo location because what
we're going to do later is add in
another property which is going to
govern the geolocation of our ninja so
when you put in for example your
latitude or longitude when you send a
request it's going to return ninjas only
within a certain radius so we're going
to add in that geolocation data where
the image is basically later on awesome
so that's how I mean just schema now
we've got our structure defined of how I
means your objects are going to look
alright now what we want to do is create
a model a ninja model which is going to
represent our collection in the database
so down here the way we do that is
actually in Kant's injustice is the name
of our model and typically we give these
capital letters to begin with because
there are equal to my goose which we
require up here dot model and then what
we're going to do is pass through a name
of our collection okay so this is going
to be the collection in the database so
the ninja model will represent the
ninjas collection and what Mongoose is
going to do is PluralEyes this for us
okay it's going to create a table or
rather not a table because it's no SQL a
collection called ninjas not ninja
ninjas so next we want to say we want
the objects within this collection to be
structured based on this ninja schema so
we're going to pass in our schema
necklace a ninja schema and there we go
we have created our model dead simple so
finally what we want to do is export
this model so that we can use it in
other files specifically when we come to
do our routes in more detail for example
when we come to post and create new
ninja we're going to need access to this
model so we're going to have to export
it in this file right here so we can
access it in all the files like to rub
so say module exports
equal to ninja cool so there we go we
have created our ninja schema and we
have created our ninja model and we have
exported this model so we can use in all
the files so in the next lesson what
we're going to do is actually connect to
MongoDB and we're going to use this
model to create ninja objects from our
post request
and then save them to the database</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>