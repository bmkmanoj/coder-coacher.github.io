<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node JS Tutorial for Beginners #34 - Making a To-do App (part 4) | Coder Coacher - Coaching Coders</title><meta content="Node JS Tutorial for Beginners #34 - Making a To-do App (part 4) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node JS Tutorial for Beginners #34 - Making a To-do App (part 4)</b></h2><h5 class="post__date">2016-07-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IgAH0NqsJso" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you're something guys welcome to your
34th nodejs tutorial and in this video
we're going to start making some dummy
data to go in our application alright so
this is where we've gone up to so far we
have our view right here which is being
rendered and we have these list items on
the to-do list
however we can't really do anything with
that we can't delete them and we count
on new items to the list either so what
we want is for a little bit more
interactivity to be going on here and to
do that we're going to have to create
some dummy data and add the ability to
add and remove items now at the minute
these three right here are being
hard-coded so we're going to get rid of
those and we're going to dynamically out
some data later on but for now what I
want to do first of all is create some
dummy data just on the server I'm not
going to hook data up to a database in
this tutorial I'm going to do that
impossibly the next one or a couple of
tutorials time for now I just want to
create some dummy data on the server so
that we can understand how this is all
fitting together and how it's going to
work when we add a new item and remove
an item so the first thing we need to do
is add that dummy data right here in the
to do controller JavaScript file so I'm
just going to come to the top create a
variable and I'm going to call this data
okay I'm gonna set this equal to an
array and in this array we're gonna
start a series of objects and each
object is going to correspond to one of
these items on their to-do list so
looking for the object a property name
which is item and then a value which is
what is displayed right here so the
first one can be get milk then we'll do
another object and in fact I'm just
going to make this full screen now so we
can see the lot okay second object item
is going to be walk dog and then the
third item will say kick some coding us
okay cool so now we've got our three
things for the to-do list right there so
now what we want to do is pass this data
into the view the to-do view right here
so that we can dynamically output that I
would know how to do that we can just
use this render method right here and
passing the second parameter which is an
object and this object gets passed
through to the view when we render it
so we want to pass this data object
through so let's give this a property of
two do's and pass through the data okay
so now this array this data is being
passed through to the view in this item
this property name - duze so let's save
that dude and head over to the view and
output this dynamically so when we
output data and use code in our template
files we need to use those ejs tags so
let's do them and I'm going to do a for
loop and this is going to cycle through
each item in that array of - duze so
we'll say for VAR i equals 0 for as long
as I is less than to do this which is
what we pass through dot length so for
as long as I is less than to do strength
then we want to add 1 to I each time
around okay so let's close those ejs
tags just to explain again what's going
on we're sitting I equal to 0 to begin
with for as long as I is less than to do
so length which is just the length on
this array right here because this is -
duze then we're going to add 1 to each
time and then we're going to output
something here so what we want to do is
output some HTML which is why I closed
by ejs tag right there
so we'll have an li tag and then we want
to output some data so ejs tags again
this time it's an equal sign because
we're outputting data and we want the
two dues the earth index of that dots
item because in the array we have the
item property on each object which is
what we want okay so we're going to
output that each time around will close
off those tags and then we also need to
close off the tags here because we have
the closing bracket for the for loop so
we'll do that as well cool so now we've
got our view which is going to
dynamically inject our dummy Gator
so let's now run this we'll restart the
server and I'm going to run it in a
browser so I'm going to refresh over
here and now we should see that data
output right there
cool
but we still can't do anything with it
we can't delete it we can't add new ones
so let's now add in that functionality
and this is all going to be controlled
via Ajax requests so when I set you to
my github page at the start of this
tutorial playlist I said you could
download these files right here and in
them they're contained to do - link
JavaScript file and this is what is
going to control the Ajax requests when
we want to delete or add an item to the
list so I'll run you through this now
you can see when the document is ready
we're going to fire a function and then
in fact what I'll do is make this
smaller screen so I can compare it to
this then when we have a submit event on
the form which is this thing right here
so when we click this it's going to fly
this function it's going to create a
variable called item which is set equal
to this input field then we create
another variable call to do which is set
equal to an object and the item property
in that object is set equal to the item
variable right here so this thing dot
Val
so we're grabbing whatever we've typed
in here the value of it and we're
storing it in the item property of this
object right here and you'll notice this
object is very similar to the object we
have right up here is a similar format
and that's because we're going to grab
whatever they've written in here put it
into an object in this format and then
add it to this array okay so we've got
that now and we've got the object now we
need to make an AJAX request to the
server and we did that using jQuery AJAX
we're saying the type of request is a
post request and we're doing a post
request to this route so in the
controller you can see we have this
handle right here which is expecting a
post request to this route so this is
the handler which is fired
when Ajax this Ajax request is made okay
now in this Ajax request were passing
along some data this is the data
property and we're passing it along to
do which is this object right here so
now we can access that data in this
thing right here okay and we'll do that
terilyn so when we passing that data we
can do something right here with it and
then we're going to send the updated
data back to this file right here in the
front end so that this function fires on
success we grab that updated data after
this has been added to that array right
here so we grab the updated data that it
sends back to us and then what we're
doing is just reloading the page so that
that data is output here in this ejs
file okay because it's going to cycle
through the updated data and it's going
to output it there now there are other
ways to kind of add the data to this
field without reloading like you could
use some kind of front-end framework to
do that but for now for simplicity this
is nice and easy I'm just going to
reload the page with that new data so
that it's outputting to the template
file okay so that is how we're adding
new items to this to-do list so let's go
ahead and handle this Ajax request right
here okay so the first thing we need to
do is add in the body parts so that we
can access that data that sent to us on
the post request so I'm going to do that
at the top I'm going to require the body
parts of module which we installed in
the first tutorial of this to do app
series so what I'm going to do is just
say var body
parser is equal to require and we're
requiring body
- placer ok cool so now we can use that
in this file so the next thing I want to
do is now add that middleware right here
into this request handler so that we can
access all the data that sensors but
first of all what I want to do is just
come down here and I'm going to paste
this in I'm already copied to my
clipboard
I'm saying VAR URL encoded parser is
equal to body parser dot URL encoded and
then this thing right here so this is
the middleware that we want to run in
this post request right here okay so
let's grab this variable and we've seen
this in a previous tutorial already
I'm just passing the request data so now
we have access to it on the request up
body okay so what we want to do is grab
that data which is on request body and
we want to push that data that object to
this array so we can just use the push
method in JavaScript so we'll grab that
variable data which holds the array and
then we'll set it equal or rather will
just say data push this thing right here
so now we've added that data that we've
required to this array okay a new item
will be added so now we can send this
data back to the front end and we can do
that by saying response Jason to send
this thing back as Jason so I'll send
the data back like so okay so then if we
save this in this file right here the
front end file one success once this
request has been made successfully
we're receiving the data back in this
function okay and we're reloading the
page and when we reload the page this
ejs template is re-rendered using the
new data which has a new item pushed
into it so now it's going to output all
of them so let's just go in here and say
restart and now what I want to do is try
adding a new item so I'll say something
like I don't know make bed okay I'll
item and then it goes on to the list
right there we could have a new one and
eat sweets add item and it's going to go
on to the list pretty cool so now we can
add items to the list however when we
refresh rather if we quit the the
session I'm just going to go to control
C press yes I'm going to run it again
note one at now if we refresh we're
going to lose that data okay because
it's only temporarily stored on the
server right here if we want to keep
hold of it indefinitely we're going to
have to use a database which we are
going to look at in a future tutorial
but for now that's how we add items to
this list okay pretty simple so now how
did we delete items well again it's
controlled via this to-do list file
right here okay so we have the post
request now we have the delete request
so we can see Li unclick so these are
the Allies when we click one of those we
fire a function then we set the item
equal to this text so the text and then
we're replacing any spaces with hyphens
and I'll tell you why we do that in a
minute but for now we are okay so we're
storing that in item then we're making
an AJAX request type delete so this time
we're going to fire this handler and
we're also saying to this URL for it's
nice to do forward slash plus the item
so whatever item we get with hyphens in
it so if we click this one it's going to
be forward slash walk - dog yeah that is
the URL
we're polar we're deleting - so when we
go to this controller what we need to do
is add in this parameter right here I've
already done :
item remember this is a URL parameter we
looked at these in previous tutorials as
well so now we can access which item on
the URL that we tried to delete because
it sent along right here okay so let's
do that what I'm going to do is say data
equals and don't forget that's this
variable right here I'm just updating
the variable data equals data dot filter
so I'm using a filter function right
here to filter out the item that we're
trying to delete so in here I want to
say function to dupe and I'm just going
to write this in then I'll explain it
okay so function to do return to do dot
item dot replace
and I'm just going to use this global
replace room right here and say if
that's not equal to request dot params
the item okay so what's going on here
well we're using a method called filter
on the data which is this array of
objects okay and then we're firing the
function and cycling through these
objects and each one that we go through
is going to be referenced as to do so
the first one it's going to be to do
then it'll go through the second one
that's going to be to do and each time
this represents the object that we're
cycling through okay so we're returning
either true or false here so this
statement right here returns us either
true or false and if it's true then this
item remains in the array if it returns
false then the item comes out of the
array okay
so if we go through the first one which
is this get milk it says to do dots item
which is the string yeah replace any
spaces with hyphens because that's what
we've done here we want to try and match
it to this and if that is not equal to
request dot params to item this thing
right here then is going to equal true
okay so if the item in here doesn't
equal this then it's going to return
true for each item if it finds something
in the array which does equal this then
it's going to return false and when it
returns false it filters that item out
of the array so it essentially deletes
it okay and then what we need to do is
respond with the JSON again so I'll say
response dot JSON and send the data and
again on success in this file right here
we're getting the data and we're doing a
reload of the page to re-render the view
with the new data the new updated data
so let's restart this just to be sure
we've got all the changes
and refresh over here so now I'm going
to add a new item I'm going to say
something like make bed add the item
okay so that's the works now let's try
removing items what dog I'm going to
click on it and now it goes get milk and
now it goes and we can add a new one get
some milk add it and it still works okay
so this is how we are interacting with
the to-do list and how we're using these
Ajax requests post and delete to send
data to the server which were then
handling in these delete and post
handlers and each time all we're doing
is just updating this dummy data which
we created right here using some simple
JavaScript okay
so any questions feel free to ask those
down below otherwise guys I'm going to
see you in the very next tutorial where
we're going to start looking at real
data databases and MongoDB</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>