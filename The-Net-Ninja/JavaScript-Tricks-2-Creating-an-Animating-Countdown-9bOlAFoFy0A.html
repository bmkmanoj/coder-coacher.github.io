<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaScript Tricks #2 - Creating an Animating Countdown | Coder Coacher - Coaching Coders</title><meta content="JavaScript Tricks #2 - Creating an Animating Countdown - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaScript Tricks #2 - Creating an Animating Countdown</b></h2><h5 class="post__date">2016-04-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9bOlAFoFy0A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you know something guys welcome to your
second JavaScript tips and tricks
tutorial and in this video we're going
to go ahead and create an animated
countdown using JavaScript and CSS
animation Wow okay then do it so here's
a quick example of what we're going to
be making in this tutorial and as you
can see we've got days hours minutes and
seconds counting down to some kind of
negative nth and all this is controlled
via JavaScript it's actual countdown and
that flipping you see going on there
that is a CSS animation it's going to
flip any card when it goes down one as
you'll see with the MINIX roundabout now
boom there we go so that's what we're
going to be working towards and I am
also going to be uploading all of this
code to my github page which I'll leave
a link to down below so you can go ahead
and download that as well if you want to
peruse through the code at your own
leisure or extend it whatever you want
to do but before you dive into any code
whatsoever there's probably a few things
you should know before you do the
tutorial and that is Hickey ml and CSS
now you can probably get away with not
knowing much HTML it's can be minimal in
this tutorial but CSS is going to be
used to style up the time and also that
animation that you saw and JavaScript
you also need to know because most of
the functionality of this time it is
going to be controlled via JavaScript so
I've got playlists on all three of these
things on this channel right here I'll
leave the link to those down below in
the description so if you want to go
check those out first of all you can do
and then come back here alright then
guys so I'm here in Aten that's the
TextEdit set Museum it's absolutely free
if you want to download after them as
well I'll leave a link to the website
you can get that from and I've got a
head and created three files countdown
dot HTML countdown AAS and style dot CSS
so first of all this HTML this is dead
simple all we're doing is linking up to
that style sheet right up here in the
head then in the body we've got this
deep with an idea of del countdown that
is purely for stylistic reasons we're
going to use that in the CSS to style
this bad boy and then we've got a div
with an ID of clock right here now this
is where we're going to inject the
actual clock the actual timer using
javascript ok so that was important then
down here we've just got the units which
other days hours minutes and seconds
right here and this is just a link to
the countdown script which we're going
to go into in a minute
so all of this is dead simple and like I
say can get all this code from a github
page in the description down below so
this countdown yes and this style of CSS
is empty at the minute what we're going
to work through these and what I'm going
to do instead of typing everything out
by hand now and then making lots of
spelling mistakes boring you guys I'm
just going to copy from this dude right
here where I've got all these different
chunks of code and I'm just going to
walk you through each one as I do it so
to begin with let's paste this window
dot onload function over here and
basically what I'm saying is when the
window loads fire this function then in
this function we're going to declare a
variable called deadline set that equal
to a new date which is currently in the
past we don't want that let's change it
to the 25th of April 2016 at 5:15 then
after that I'm calling this function
right here start timer which isn't
defined yet and we're passing two
parameters clock and deadline now this
deadline is just this variable this new
gate object we created and this clock
right here refers to this ID here's of
the ID of this element where we're going
to inject the timer okay
so let's go ahead and add in this
function start timer so I'm just going
to copy that and paste it in over here
and it takes these two parameters ID
which is clock and deadline which is
that date object right there then the
first thing to do right here is create a
variable timer interval and I set that
equal to set interval right and then
that's going to fire a function right
here every 1000 milliseconds okay so
every second we're going to fire this
function and inside this function the
first thing we're doing is grabbing this
element this clock element right here
document dot get element by ID and the
IDS there which is pass through o'clock
so it's going to go out grab this
element yeah and store a reference to it
right there in that variable then we're
going to use that later on to inject
some inner HTML and put the timer in
that variable not that variable that
element on the webpage
all right so the next thing we do is
create another variable and we set that
equal to update timer and we pass in the
deadline to that function so again we've
not declared that function so let me
grab that
dude and pasted a right up here and this
basically just updates the time okay so
open date timer does what it says on the
tin it passes through the deadline which
is here this date object right and then
the first thing we do within this
function is set a variable time equal to
that deadline - new date and this new
date is going to be created every time
we call this function so every second
right and what it's going to do is give
you the date and time of the instance
this function was called so what we're
doing is same time equal to the deadline
the point that were counting down to
which is roundabout here and we're - in
this new date which is the time at which
this function was called so it's going
to get the difference between those two
dates in milliseconds and it's going to
store it in at that time variable so
then what we're going to do is we're
going to return an object from this
function to this variable right here and
this object is going to work out the
days hours minutes seconds and total
time left
based on this difference right so it's
just different properties here and the
days is worked out by saying math.floor
and remember dot floor just takes a
number and floors it some of you know
but it's 4.8 it floors it to fall it was
4.2 it floors it to fall okay never
around job always round down so we're
taking the time right here which is all
those milliseconds then we're dividing
it by a thousand then by 60 this
thousand converts it into seconds then
this 60 converts it into minutes this
converts it into hours and then this
converts it into days right because
there's 24 hours in a day so now we're
getting that will floor in it and that's
how days left we do a similar thing for
hours we say math dot floor we take the
time divide it by a thousand first of
all that guess is the seconds then by 60
that gets us the minutes then by 60
again that gets us the hours right and
this time we're saying modulus 24 now
what does this mean well imagine this
right here returns back to us 100 hours
yeah we don't want to say on the hours
card 100
seven days 100 hours 60 minutes and 27
seconds we want to say how many hours
are left in this particular day don't
win so to get that we use the modulus
and we say 24 because there's 24 hours
in a day so if this was 100 right here
we had 100 hours left modulus 24 what
that does he say well okay how many
times does 24 go into 100 it goes into 8
4 times right and that equals 96 and
then the remainder how many hours left
we have after that is 4 so we have 4
full days because 24 goes into 100 four
times to equal 96 that's for 4 days and
then we've got 4 hours remaining
so that 20-24 gets us those 4 hours ok
so then the number of hours is equal to
whatever this is modulus of that we do
something similar four minutes time over
a thousand to get seconds over 60 to get
the minutes then this time module is 60
to get the minutes and same for these
seconds time over 1,000 modulus 60 to
get seconds the total is just the total
number of milliseconds difference
between these two right here cool so
we're returning this object right here
where we worked out all the new times
every second this is called and we pass
it back into this variable right here so
now all of these properties are stored
on this variable and we can output those
properties to the HTML using this
reference right here so let me just grab
this HTML this JavaScript rather and
paste it in all right there and what I'm
saying is o'clock which is this
reference dot in a hasty amount so we're
adding some HTML to this thing right
here this div with an ID of clock and
then we're setting that equal to a
series of span tags which we concatenate
in next to each other and in between
those we're saying first of all the
day's time it up days which is here
tamanna hours time we got minutes and
time at dots echinus so now it's been
output every second because we're
calling this set interval thing is going
every second
yet it's calling this thing every second
so every second we work out the new
times we pass it back to this thing
right
then every second was in the innerhtml
to the clock and will output in the new
time so this is update now every second
and if I save this then you're going to
see a lot of numbers hopefully appear
here that are counting down now right
now it just looks like one long number
that's because we've not styled it up
okay but we'll do that later but that is
kind of the backbones of our clock now
there's just a couple more things that
what I do in these JavaScript the first
thing we want to do is recognize when we
reach the deadline itself when there's
no more counting down to do so how do we
do that well we just do a simple if
statement and I'm going to do that right
here like so and that's going way off
let's bring it back in okay that looks
roughly right it will do anyway so right
here I'm saying we'll check for the end
of the timer and I'm saying if the timer
total which is this thing right here the
total difference between that if that is
less than one then it means there's no
time left right it means we're
essentially at the deadline then what
we're going to do that's true is clear
the interval here this thing right so no
longer is this going to cycle round and
then what I'm going to do is set the
innerhtml of the clock element to equal
this now you could set it equal to
anything you want you could set it equal
to something like the countdown has
finished whatever you want I have just
set it equal to two zero zero zero zero
just to still show that the countdown no
longer occurs all right so that's
checking for the end of the timer one
more thing I want to do is kind of help
our CSS out when we come to do the
animations by adding a class dynamically
to whatever span tag is going to change
so if you think about it this fun tag is
going to change every second so we want
to animate that span every second we
want to flip it over every second this
one is going to animate every minute so
we want to add a class to animate that
every minute this every hour mix every
day so I'm going to use JavaScript just
to add that class dynamically so that we
can use CSS emotions on that plus so let
me grab some code right here
and paste it in over here okay let's see
where we are okay so let's just bring
this back in a little bit okay cool so
what I'm doing for all is create a
variable called spans and I'm setting
that equal to o'clock which is this
thing remember dots get elements by tag
name spun so that's going to grab all of
these right here because these are being
injected into the clock right now we
need for animations going on this every
second this every minute this every hour
and this every day so first of all I'm
going to call a function called animate
clock which we've not defined yet and
I'm going to pass in sponge 303 sponge
and then the third element within that
because this is an array of all of these
spun tags we one position three zero one
two three because we're going to animate
this every second so remember this
interval goes every second and every
second we're calling this function
animate o'clock and we're passing in
this span right at the bottom okay so
it's going to animate that for us all
add a class for us so that's spun every
second now this one is the minutes and
we're saying we want to animate the
minutes only if you think about it when
these seconds reaches 59 because when
the seconds reaches 59 we onto a new
minute because it goes three two one
zero then 59 and we go to a new minute
right so when that happens we want to
animate the clock again but this time
passing this spun right here okay the
milliwatt same for the hours this time
we need the minutes to be 59 and the
seconds to be 59 because that's the cusp
of when we get a new hour so when that
occurs then we pass through to animate
clocks puns 1 which is the hours and
then finally for the days we're seeing
what the hours to equal 23 the minutes
59 and the seconds 59 because again this
is like the last point of the day yeah
so when we're about to get a new day
there
to animate the clock and this time pass
through sponge 0 which is the first spun
right here so let's add this animate
clock function and it is dead dead
simple just going to pop it right here
and it takes in a span so remember we're
passing in a different span tag every
time right so it takes that spun then it
says spun up class name equal to turn so
we're given it a class called turn then
we're going to use that class in CSS
animations to add in those animating
features all right so it does that first
of all then it does a set timeout and it
calls this function after 700
milliseconds which is not 0.7 seconds
and it removes that class name it takes
off this turn and just sets it equal to
nothing again
right so every time we call this we're
applying a class name of turn to
whichever span element we pass through
only 49.7 seconds before we take it away
again so the animation is going to occur
for naught point seven seconds okay
so let's save this now and what we're
going to do is just inspect this element
right here let me make this bigger and
if we go into the clock then you can see
right here we're getting a class of turn
every second apply to that span all
right let me just zoom it so there's the
class of two and when it gets to zero 59
then the minute got the the span with a
class of turn as well okay so as we get
to a different number on each spun
element they get that class so we're
going to use that class right now to
style up that animation and we're just
going to also style up the page itself I
just want to make the page a little bit
bigger while we do this so I can see
more of it I'll get rid of that console
as well okay so let's go into the style
dot CSS and again I'm just going to kind
of copy and paste little segments at a
time so the first three little things I
want to do is this we've applied a
background to the body and the front
family of two holman next this h1 right
here we've said we want a color of white
and align the text central a large font
size and letter spacing of 10 pixels in
between each letter like that the del
high for
countdown which is this kind of
contained element I've said that I want
that's have a width of 850 pixels and
imagine a 50% top and bottom so it comes
down a little bit and left and right
also so it's in the middle cool so let's
grab the next thing and this time I'm
styling up the sponge within the clock
so each one of these is in a span
remember if we go down to this you can
see each kind of time the days the hours
minutes and seconds volgarr the own
spawn tag so we're targeting no spam
tags right now and it will save it
you're going to see those appear on the
screen much more legible now you can
clearly kind of see the distinction
between these numbers this is days hours
minutes and seconds looks a lot better
dead simple styles there as well okay
the next thing I want to do is style
each one of these spam tags a little bit
differently I'm going to use enth child
to do that so if you take a look at this
the first one I've said I want to have a
background of this color and if we save
it you're going to see these on the
screen so it's kind of like a pinky red
then the second one a background of this
color third one this and forth on this
so now they've all got different
background colors pretty cool alright so
after that I'm just going to grab these
two rules as well and the first one
right here is a clay fix rule and I'm
just saying after 2 o'clock or rather
after the content within the clock so
within here yeah when we get to the end
of the concept in here I want to insert
some content that's what this says and
the content is just going to be block
it's got a blank rather it's going to
display as block and it's going to clear
both this is just a clay fix technique
and I'm doing that because it floated
all of these numbers to the left so
where do that the parent element
normally it collapses and to get rid of
that parent collapse what I've done is
use this clay fix technique alright so
the spawn tags within the unit's right
here and I've startup as well because
each one of these is in a span tag days
hours minutes and second so I save that
oops
save this one rather okay so now you can
see these Styles right here
just looks a little nicer nothing fancy
going on there and then after that we
need to do the animation that's the only
thing left so what I want to do is turn
this thing when it's applied a class of
turn the first thing you want to do is
make my keyframe so I'm going to say
give ourselves a little bit Spacey at
keyframes and by the way I've got a
whole playlist on CSS animations I'll
leave the link to that down below so you
can check that if you're unsure how to
do this then I'll say turb that's the
name of this animation and then that's
0% at the start I'm going to say
transform and I'm going to say rotate X
0 so what we're doing is we're going to
rotate this element along the x axis and
the x axis goes across like this so
imagine this is one of those Wroxton
pics and the pole is going through it
like that as we rotate it it's going to
kind of flip this thing around right
that's what we're going to do so at the
start we're seeing rotating zero degrees
and then when we get to 100% we're going
to do the same thing transform and it's
going to be rotate X and this time is
going to be 360 degrees so we've got a
full circle all the way around okay so
let's now put the curly braces instead
of those things and save it and then all
we need to do is apply this animation to
the class which he's added to these
every second for the seconds every
minute for this and that was the turn
class so we'll say span dr. all we need
to say is animate our animation rather
and then we're going to apply the turn
animation it's going to take 0.7 seconds
it's going to ease and we're going to
say four words okay so now we get that
animation every second on there and if
we won't just a second to see this one
as it reaches 59 on the right you can
see this all goes down as well pretty
cool so there we go guys that is how to
make a time out using JavaScript and CSS
animations like say I'm going to upload
all of this code to the github page so
you can go and grab it yourself take a
look through MIT if you have any
questions whatsoever feel free to leave
those down below
otherwise guys don't forget to share
subscribe and like and I'm going to see
you in the next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>