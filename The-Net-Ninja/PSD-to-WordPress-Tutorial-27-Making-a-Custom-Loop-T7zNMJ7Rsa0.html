<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PSD to WordPress Tutorial #27 - Making a Custom Loop | Coder Coacher - Coaching Coders</title><meta content="PSD to WordPress Tutorial #27 - Making a Custom Loop - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PSD to WordPress Tutorial #27 - Making a Custom Loop</b></h2><h5 class="post__date">2015-12-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/T7zNMJ7Rsa0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yo what's going on guys you're watching
PSD to WordPress lesson 27 and in this
video we're gonna make our own custom
loop for the home page Wow
alright there so this is the home page
as it stands and down here we've got
this little featured section which is
the latest full menu items that have
been added to the website now currently
these are all hard-coded and what we
want is to make them dynamic now in the
last tutorial what we did is going and
we created a new category called menu
items and we added four posts to that
category so what we want to do is create
a custom loop on the home page to go in
and cycle through those four posts and
output the data of each one so the image
the title the price which was a custom
field and then the rating we're gonna
pop up underneath which was also a
custom field so if you've not checked
that previous video out go back and
check that out first you're gonna need
that for this lesson and then what we're
gonna do now is go into the code and
make our own custom loop to do this
alright so I'm in the fruit page dot PHP
template this is the home page of our
website and currently this is where the
featured section is all hard-coded so
we're gonna delete all those Li tags
because we're gonna put those out
dynamically using the loop so the loop
can be found on the index dot PHP page
and talked about this in the one of the
first lessons I did so I'll leave the
link to that down below if you want to
go back and refresh yourself on the loop
but for now what I'm gonna do is just
paste it in here like this where we're
gonna create our own custom loop indent
that okay so just a quick refresh what
we're gonna do is open the loop with a
while loop and we're going to use this
WordPress function to check if we have
posts if we do then we're going to use
this function to setup the post itself
and give us access to those posts and
the data within them like the featured
image the title the content all that
kind of stuff so that we can loop
through the posts here and output that
data to the screen now I'm gonna get rid
of this stuff here because we're going
to use our own custom loop to output the
data now I also mentioned in the earlier
tutorial about the loop that this have
posts
default way that WordPress uses to
determine which posts to check for
example if you're on the page forward
slash category forward slash news it's
going to use that URL to determine so go
out and check if we have posts in the
news category if we do then it uses this
function to set the post data all right
now that is the default behavior of
WordPress we can override this behavior
to create our own custom loop to tell
WordPress exactly which posts so go and
check that we have and then retrieve
them all right and to do that we need to
use a WP query so to do that we'll open
our PHP tags and create a new variable
now all variables start with a dollar
sign in PHP and we can call this
whatever we want I'm going to call it my
query and then I'll set that equal to
the new which is a keyword in PHP and
then WP underscore query which is the
WordPress function to query which
category are which posts we want to
retrieve now within the parentheses we
need to pass through some options so
we'll open our quotation marks because
this is going to be a string and then
we're going to say that the category
underscore name that we want is going to
be equal to menu - items and this here
is the slug of the category we set up in
the previous tutorial and a slug is just
the category name which replaces spaces
with hyphens like that so we've said to
it look we want you to go out and get
the posts in this category right now I
need to write an ampersand because I'm
going to pass through another option and
the other option I'm going to pass
through is posts per page and we're
going to set that equal to 4 because
there's 4 posts or 4 menu items on that
homepage show it and that's it we just
need to close that off and end our PHP
tag that there is our custom query okay
so we've got out and grab the posts from
that category that we want now there's
one more thing we have to change in the
loop and that is this section here
currently it's using the default
behavior of basing it on the URL which
posted on retrieve or check we want to
give it a different context the context
of our query so all we need to do is
copy this
and paste it here and then use a little
arrow like that to say look base this
function on this query okay and we need
to do it exactly the same there so it's
gonna override that default behavior so
that's what we need to do there now we
just need to set up or output the data
itself
now I've already written the code for
this so what I'm going to do is just
grab that and paste it here and I'm
gonna walk you through it now so for
each post we're going to output an li
tag first of all okay because each of
those menu items on the front page is in
an li tag so the second thing I'm gonna
do is use this word press function the
post thumbnail and that's going to grab
the featured image that we set up for
each one of these posts and it's going
to output it here in an image tag
alright so we've got that second thing
we're doing is in open anchor tag and
we're setting the H ref value to this
function right here the permalink that
is also our WordPress function and it's
going to get the link of this post and
output it into this section right here
the H ref then within the UNK attack and
Kotak the text itself is going to be the
title this is another WordPress function
it's going to get the title of the post
all right then under that we've got our
span and within it we've got this PHP
function called get post meta we're
echoing this out we need to echo it so
that it displays on the page itself so
the get post meta function is used when
we want to retrieve custom field values
remember we set up those two custom
fields one for the price and one for the
rating okay so this is the function we
need to retrieve that data so we use the
function and then we pass through three
parameters within the parentheses the
first one is the post ID which we use
this for this is giving it the current
post in the loop all right then we pass
through as a string the name of the
custom field which is price first of all
then the final one is just a boolean to
say that we want this returned as a
single string value so that it's set to
true so we do that for the price and
then we do another spun down here and
this time we give
a dynamic class we're starting it off
with star - and then what echoing get
pushed me better the post ID this time
the rating which could be either one two
three four or five so exciting that we
start - one star - two three four or
five and then we're giving them another
class rating so we've got two classes
this dynamic one and this one which is
always there called rating so we can
apply some global styles here and
particular ones here depending on the
star rating then we're close enough that
spans all right then we're ending the
loop whoo all right so that is the cost
of loop setup and we've got all the data
from those posts that we've created so
if I save this now and return to the
home page and refresh we should see now
yet we've got the pictures there the
thumbnails the text or the title which
is also a link and then the price is
coming through which is also a custom
field now currently the rating isn't
coming through because we've not styled
those in the CSS we need to give them
background images of those stars so
we'll do that in the next lesson not
this one but if I right click over here
and inspect the element then we should
be able to see in the first one this
right here spun plus equals star one so
we know it's a one star here it should
be star three so we know that's a three
star and so on okay so we're dynamically
updating the class based on the star
rating then we can start classes
differently in the CSS which we'll do in
the next tutorial all right so just once
more because I know it is a little bit
confusing at first we've got the
standard loop to begin with then above
the loop that's really important we're
using a variable to store a new
WordPress query and that query has to
say which category we want to query
which category we want to grab posts
from and in this case how many posts per
page four because we're going to show
four on this home page then we start the
loop okay
we're giving it some context we're
giving this function and this function
some context of my query
so we're saying base this function on
this query not on the default behavior
way you're going to use the
the URL same for this racket so we've
set the post data for each of the post
two based on this context then for each
of those items that it goes in grabs
we've got an li tag where we're posting
the thumbnail the link and the title and
then the price and then the rating okay
so that is what we're doing in this
tutorial I hope this makes it a little
bit clearer what I'll do is leave a link
down below to a the loop tutorial that I
created earlier in this playlist so you
can go and refresh yourself on that and
be a link to the WordPress codex which
goes into more detail about this
function ranking and we can go out a
query post we can read over that as well
obviously any questions you have feel
free to drop a comment down below
otherwise guys don't forget to share
subscribe and like and I'll see you in
the next video where we're going to
stand up those star ratings I'll see you
guys then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>