<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB Tutorial #14 - Update Operators | Coder Coacher - Coaching Coders</title><meta content="MongoDB Tutorial #14 - Update Operators - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB Tutorial #14 - Update Operators</b></h2><h5 class="post__date">2017-01-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DeAWKJJng30" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you know something guys welcome to your
fourteenth mongodb for beginners
tutorial and in this video I want to
talk about update operators okay now
first of all I want to cast our mind
back to when we created the schema for
our Mario character model and it'll look
something like this we said it could
expect a name which would be a string
and it could expect a weight which would
be a number now so far we've used this
name quite a lot but we've not used this
weight property and I want to focus on
this weight property in this tutorial so
what is a object operator an update
operator is just something that can help
us update our fields in certain ways or
our properties in certain ways for
example we can have a rename update
property sorry update operator which
renames a particular field for us or we
can have an increment or patek operator
which will increment a particular field
for us and that's the one we're going to
be looking at in this tutorial the
increment operator so this thing right
here we're gonna increment I want you to
imagine that all of our Mario characters
are gonna have some kind of party stuff
the faces and their weight is gonna go
up by one so we're going to use that
increment operator to update the record
so that the weight goes up by one okay
so I'm still here in the updating test
and so far we've got this one test right
here in it
so what I want to do now is use that
update operator to increment the weight
property so the first thing you need to
do is add the weight property to this
character right here where we create it
before each test hit so let us now say
wait and set that equal to 50 so 50
kilograms right now that down here I'm
going to create a new it block so I'm
just gonna copy this dude and paste it
below and then we'll rename this and
we'll say updates or increments rather
the weight by one okay cool so what we
gonna do first of all we'll get rid of
this stuff we're still going to use
Mario Kart
that's the model and we're still going
to use the update method so I want to
say update because this would
potentially then go and get all the
records we're not just finding one
record anymore we would potentially be
finding all of the records and updating
the weight of all of them by what okay
now we want first of all the name or
rather in fact we don't want the name to
be anything because we want every record
so we'll just leave an empty object
that's going to return every record so
the second parameter is what we want to
update remember now we can't just say
wait is now 51 because although that was
Mario's weight right here 50 and it's
incremented by one - 51 if we had all
the records Yoshi Luigi
princess they might not all have the
same way one could be 41 could be 70 so
they're not all going to be 51 after
this stuff two faces there'd be seventy
one fifty one forty one etc so we can't
do that instead what we want to do is we
want to increment each of their current
weights by one so the way we do that is
by doing a dollar sign first of all and
st. Inc
this is the update operator right there
and it means increment so once we've
done that then we do a little colon and
we pass an object and we're saying which
property is now in this object we want
to increment so we want to do the weight
one and we want to increment it by 1 so
this here means take the current weight
and add one to it okay
and if you want to deduct one from it
you do minus one if you want to do drop
ten you do manage ten but you wanna plus
ten you do plus ten we just want to add
one so that is what this is going to do
is going to update the records so that
the weight is plus one to the current
way and it's asynchronous so it returns
a promise and we can stay dot then to
wait until the end of it and say this
function is gonna fire when the update
operation this thing here is complete so
in here what we want to do now is check
that this has worked that we've added
wants you to wait so let's say Mario
Kart dot find one and we will find Mario
source a the name
it's gonna be Mario and then what we
want to do is say dot then because again
this is an asynchronous request which
could take some time so we want to say
dot then to wait until this is finished
fire a function when it has finished
with the results or the record but if
you want to call it then inside here
we've got that record and we want to
check that the weight is incremented by
one we know the previous weight was 50
so now we can check that the weight is
51 so let's say assert that the record
returned to us dot weight if we can
spell it correctly is triple equals to
51 okay so if this is worked then it
should be 51 then we can say done so
finish the test all right so let's try
this out I'm going to come up here and
say npm run test all right awesome six
passing increments the weight by one so
this my friends has successfully worked
it's gone out it's found the characters
it's updated the weight by one and if
there was more than one character in the
database it would update them all by one
because we've not passed any search
parameters through there we're just
saying get them all increment them all
by one then fire this function which
goes out it finds one of our records
Mario and it checks that that record has
a weight of 51 which is one above the
initial value rather okay so that is
just one of the update operators
available to us I just want to point you
in the direction now of the MongoDB
documentation about update operators and
you can see there's quite a few here and
I would advise you to go and have a
little read of this and just play around
with a few different ones of them
they're all relatively simple to
understand and I'll leave this link down
below for you to earth to go on explore</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>