<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node JS Tutorial for Beginners #19 - Basic Routing | Coder Coacher - Coaching Coders</title><meta content="Node JS Tutorial for Beginners #19 - Basic Routing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node JS Tutorial for Beginners #19 - Basic Routing</b></h2><h5 class="post__date">2016-06-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_zvWeGwVkCY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yo or something guys welcome to your
19th nodejs tutorial and in this video
I'm going to show you how we can set up
some basic routing okay then go so we
have here a server setup and then when
we make a request to the server we're
writing our headers on the response
object and then we're ending the
response by sending a string feed me for
herb popcorn and you can see the content
type is just going to be text playing so
let me go ahead and run this in node by
seeing node app and then navigate to
this in a browser so if I click enter
right now then we're going to get that
string feed me popcorn okay and it
doesn't matter what URL I put up here I
could say forward slash API and I'm
still going to get up I could say
forward slash hold I'm still going to
get that forward slash contact I'm still
gonna get that no matter what I put in
here what request I make I'm getting the
same data fed back to me now in a real
world application we're going to want to
distinguish between different URLs and
send them data depending on what they're
requesting so for example if they say
forward slash hold we want to send them
the index page on the home page if they
say forward slash contact we want to
send them a contact page and if we say
forward slash API we want to send them
some data maybe okay so how do we do
this we need to set up some kind of
routing system in nodejs
so if you notice here whenever we make a
request to the server we're logging this
to the console and we're accessing a
property on the request object called
URL and that's log into the console each
time so we're listening to what the user
is typing into the address bar and we
can log that to the console so we know
what they're requesting therefore we can
use this to check what they've requested
and then send them data depending on
that request so let's do that
let's get rid of this phone out of this
response and let's do a simple if
statement to check what they're
requesting and then send them something
dependent
that request so say if the request URL
is triple equals that's always a good
habit to get into using that if that's
equal to four slash hole or if request
URL is triple equal to just forward
slash so whether they visit just forward
slash like localhost 3000 forward slash
or /fo the send them this index dot HTML
file so let's do that we can now write
our headers so I'll say response object
dot write head oops right head and then
the status is going to be 200 and then
the content type is going to be text
forward slash HTML so we're sending them
a hast email page now we need to create
a read stream to go ahead and read this
file first of all so I'll say FS dot
create read stream and then the file we
want to read is in the current directory
so I'll say do name and then concatenate
that with forward slash index dot HTML
so that's going to go out and grab this
one right here it's going to read that
in a stream and then all we need to do
is pipe that to the response extreme on
the response object and that's going to
send it to us so now if I save this I'm
going to cancel out of here by saying
ctrl C and then run it again node app
and if I'd go into the browser now and
if I go to forward slash whole that I
should get this home page it's going out
and grabbing this index file and if I
say forward slash like that then I still
get this but if I say forward slash
anything else now anything then this is
just going to keep on kind of timing out
and looking for e so it can't find
anything else yet so let's cross this
stop the process coming here and press
ctrl C and let's add some more rounds so
if it's one of these then it will return
this thing right here now we can say
else if so if it's something else
we'll check in here what it is and it
was triple equal to say fold / contact
then we're going to send back a contact
page so let's copy this dude right here
and paste it in and we want this to be
contact HTML so I'll save that and then
we also need to create a contact or a
HTML file right here so let's go ahead
and do that new file contact dot HTML
and then what I'm going to do is just
paste this by boy into here and let's
change it a little bit so contact was
and then I'll say contact coolest cuts
on the web right here okay so now we
have a contact dot HTML page as well so
if we run this now and go forward slash
contact then hopefully we're going to
get this page instead so let's save it
and find out what's a node up and then
go to a blue tit and this time we'll say
forward slash contact and now we get the
contact page cool and home still works
home page okay so now we're starting to
set up routes for different things over
here so what if we want to send back
some JSON instead like some kind of API
endpoint well we can do that as well so
we'll say else if and we'll check the
URL property on the request object and
we'll say if this is triple equal to
forward slash API forward slash images
okay then I want to send back some data
this is like an API endpoint that for
example javascript in the browser might
request so if it's this then let's
create an object first of all let's save
our ninjas I'm going to set this equal
to an array of objects and in each
object I'll give a name the first one is
just the meat or ryu and then the second
property is going to be age and i'll set
up to 29 for here we'll create another
object
Payne is going to be a Yoshi and the egg
is going to be 32 okay so we've got our
data and in a real-world application
you're probably going to get this from a
database rather than just defining here
probably and we're going to cover
databases databases later on we're going
to take a look at MongoDB or for now
this will do so we're going to send this
data as JSON to the browser to the
client so what I'm going to do is say
response right head first of all and
it's going to be status 200 again and
the content type this time is going to
be JSON sorry application forward slash
JSON okay so now let's send that to the
browser source a response end I remember
we have to serialize this we have to
turn into a string because dot end
expects either a buffer or a string so
we'll say Jason does string if I that's
going to turn it into a JSON string and
passing the ninjas array it okay cool so
now if we save this and I'm going to
cancel out of this we run it again node
app then if we go to the browser and
press API ninjas then we're going to get
that JSON data back cool so we've set up
now a few routes but still if we go to
something that isn't set up here for
example just for slash ninjas then we're
still not going to get anything back and
ideally what we want to do is send some
kind of 404 page to say look we've not
found the resource that you're requested
so let's do will do a catch-all at the
bottom and it's not gonna be an else if
it's just going to be an else so if
you've typed something in that doesn't
match any of these things here then
we'll send the 404 page so let's copy
this and paste it down here and this
time the status is going to be 404 we've
not found it right and we
can still send something if we want we
can send a 404 page for a4 dot HTML so
let's create that quickly right click
new file for a for HTML and then again
let's copy this bad boy and paste it in
here and we'll say 404 oops
and let's blame it on the user you've
put something wrong
alright so let's save that and one more
time let's cancel by pressing ctrl C and
running it through node again node app
and now let's navigate to something
that's not here phones flashing ninjas
and we're going to get four or four oops
you've done something wrong so now
that's like a catch-all Eve none of our
ramps match when the user requests
something so there we go guys that's how
we create routes and you might think
this is a little bit cumbersome
especially if you've got a big website
and with many many different pages but
fortunately we can use a package called
Express which we are going to take a
look at later which is going to make
routing and doing other stuff with no GS
so much easier and I'm going to take a
look at that later but for now this is
how we set up some basic routes in note
es any questions leave those down below
otherwise guys I'm going to see you in
the very next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>