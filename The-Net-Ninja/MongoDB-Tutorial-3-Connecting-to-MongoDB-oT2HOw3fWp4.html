<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB Tutorial #3 - Connecting to MongoDB | Coder Coacher - Coaching Coders</title><meta content="MongoDB Tutorial #3 - Connecting to MongoDB - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB Tutorial #3 - Connecting to MongoDB</b></h2><h5 class="post__date">2017-01-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oT2HOw3fWp4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you're something guys welcome to your
third mongodb for beginners tutorial and
in this video I'm gonna show you how to
connect to MongoDB from the code
okay so we've already seen this this is
how we connect with MongoDB we make a
request to the server the server then
connected to the database retrieves
whatever data it needs and then it can
show us that on the browser and this
Mongoose thing we installed in the last
tutorial sits on the server and
basically what it does is help us to
communicate much easier with MongoDB and
it does that by giving us a lot of
different methods that we can use to
communicate with it okay so just because
we have installed Mongoose it doesn't
automatically know to connect to a
database it doesn't even know that any
databases exist so we have to explicitly
tell Mongoose to connect to a database
first so that's what I'm going to show
you how to do now alright so hopefully
you've followed along in the last
tutorial and you installed Mongoose as a
dependency which means we can now use it
in this project now what I'm going to do
first of all is create in the top level
a new folder and I'm gonna call this
folder test and the reason I'm calling
it test is because we're going to use
this as our test folder when we come to
work with mocha in the future lessons so
let's create a new file and this file is
going to be called connection Jas and
this file is going to contain all of our
code for connecting to the database so
the first thing we need to do is require
Mongoose so that we can use it in this
file ok we can't just automatically use
Mongoose we have to require at first of
all so when they say Const call this
constant Mongoose I've set it equal to
require and we require Mongoose cool so
now we can connect to the database so
let's do a little comment saying connect
assume Mongo DB and the way we do this
is really simple it's one line of code
we just say Mongoose got connect and
then we have a couple of brackets like
that and within here we put our
connection string here is where we say
what we want to connect to okay
so the first thing that we have to put
in this connection string is Mongo DB
colon forward slash forward slash that
basically says we're connecting to a
MongoDB database by the way this needs
to be in quotation so I'm just gonna pop
those on the side okay and because we've
installed MongoDB locally and we're
connecting to a local version of it I'm
going to say localhost okay and then I'm
gonna do forward slash and then I'm
gonna say which local database I want to
connect to now we don't have one set up
at the minute but that doesn't matter if
we tell Mongoose to connect to a
database which doesn't exist it's gonna
see that it doesn't exist and it's gonna
create you forest okay pretty cool so
let's call this test the root so let's
say doesn't matter that this doesn't
exist yet if it did exist it's just
going to connect to it if it doesn't
it's going to create it for us and then
we have a ghost and that is how we
connect to our database pretty cool
right but there's one more thing to want
to do although this is going to go out
and connect to our database our
application doesn't really know when
that connection is complete
it doesn't know when we can start
running code to communicate with MongoDB
and store data on it so what we need to
do is listen out for when that event
occurs when the connection is
successfully made so I'm gonna write a
bit of code and then I'm gonna explain
what it does okay so I'm going to say
Mongoose doc connection and I'm gonna
say dot once then okay I'm passing a
callback function right here so what
this is doing you see a mongoose doc
connection first of all which is going
to give us some different information
about the connection that we've made
okay then this dot once thing right here
is an event listener so you know like in
jQuery you have something like I don't
know elements dots on click and then
you've got a callback function this is
exactly the same but instead of odd
we've got once which basically means
just listen to this event once okay and
this is basically a listen to it every
time and then fire something this just
the once and instead of click we've got
open so once the connection is open then
that we find this function so that's
what that is
ok so let's tell ourselves when this
connection has been made I'm going to
log a simple message which sees
connection has been made now made
fireworks
alright cool so it's going to log that
message when this connection has
successfully been made but what if
there's an error we need to know if
there's been an error too so I'm going
to attach and know that you vent
listener to this thing as well which is
going to listen out for errors and
instead of once we don't want to listen
for this thing just once we want to
listen for every error that's you know
occurs if you like so we'll use on
instead so on and the event is called
error so whenever there's an error via
this callback function instead and we
can pass the error into this callback
function right so now let's say console
dot log and we're gonna say connection
error and then we're also gonna tack on
this error as well and lock that to the
console okay so we have MongoDB running
on our computer and inside MongoDB we
can have many different databases so we
can have two databases we can have 10
databases it doesn't matter and what
we've done so far is just say we want to
create one database and we call that
test the room so the idea is that in
each different project we create we can
create a different database in MongoDB
and we tell Mongoose which database we
want to connect to each time around so
that's what we've done here we've just
said we want this database this is just
one database on MongoDB so we want you
to connect to this one or if it doesn't
exist create it okay so let's run this
now and make sure that our connection is
successful so I'm going to come to
command prompt and I'm gonna say NPM not
NP I'm sorry node and we're gonna run
this file so it's in the test folder
then it's connection
if we can spell it right connection is
so we hit answer it's going to run this
file and hopefully connect successfully
to MongoDB and we can see their
connection has been made now make
fireworks which means the connection has
been successful but what if there was an
error let's demonstrate I'm just gonna
put like a random character there P and
then I'm going to come back here and
rule the same thing again ctrl C to exit
out then I'm going to run the same
command against node test connection is
and now we get an error you see we can't
connect it says Mongo error failed to
connect to server so what we need to do
is just hit this P off and it will work
fine again so there we go guys that is
how we connect to MongoDB using Mongoose
in the next tutorial we're going to
start talking about collections of data
so I'll see you guys then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>