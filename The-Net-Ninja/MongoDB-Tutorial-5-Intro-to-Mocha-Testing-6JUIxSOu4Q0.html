<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB Tutorial #5 - Intro to Mocha Testing | Coder Coacher - Coaching Coders</title><meta content="MongoDB Tutorial #5 - Intro to Mocha Testing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB Tutorial #5 - Intro to Mocha Testing</b></h2><h5 class="post__date">2017-01-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6JUIxSOu4Q0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">oh the campers are welcome to your fifth
MongoDB for beginners tutorial and in
this video I'm gonna give you a quick
introduction to mocha okay so what is
mocha it's just a testing library which
we can use to perform tests on an
application to make sure it's all
working correctly and it's always a good
idea to use tests in your applications
so that if something isn't working as
planned you can pinpoint what it is
that's not working and you can correct
that okay so that's what mocha is all
about and we're going to be using milk
in our application to test our
connection with the database MongoDB
we're going to test creating records
reading records updating records and
deleting records and possibly a little
bit more as well so it's gonna give us a
good playground to really get to grips
with the different mongoose methods to
communicate with Mongo and test those
methods out okay but I think the best
way to show you how mucker works is by
an example so I'm gonna jump to the code
now and we're gonna create our first
test okay so the first thing I want to
do before I start using maca is to
install it and I'm gonna use NPM to do
that so I'll say npm install maca and
then double - to save that's gonna save
it to my dependencies in the
package.json file cool so once that is
stored let's just check our package JSON
file to make sure it has installed there
it is maca okay so now what we're gonna
do is create our first test and if you
remember it created this test folder a
couple of lessons ago so we're gonna put
all of our tests in this folder so let's
just right click create a new file and
I'm just gonna call this one demo
underscore test and all my tests are
going to have this kind of a format
something underscore test dot yes okay
so the first thing we need to do in this
test file is of course require marker
because we're going to use mocha in this
file so I'm gonna say Const bucket
equals require welcome okay cool
so the way mocha worked is that we have
to describe our tests we have to tell
mocha what our tests are about if you
like okay and then we have a set of
individual tests with
in that kind of describe block so for
example I'm gonna say describe and then
we're gonna describe what our tests are
gonna do so for this example I'm just
gonna say some tests awesome demo tests
okay but normally if we're testing
saving to the database we'd put
something like saving to the database
there okay so this described method
right here it takes two parameters the
first one is this thing this string
which describes the tests within it and
the second one is going to be a function
like so and within this function this is
where all the tests occur alright so
let's just put a little comment here
saying describe tests first of all and
then inside here is where we're going to
create our different tests so I'll say
create access
okay does that make sense so we have
this describe block here which describes
all of the tests which is going to be
inside it okay so the way that we make
our individual tests is by creating
what's known as it's blocks and each
each block is going to describe a single
test and this might sound a little bit
odd at first but as we go through a few
examples it's gonna make much more sense
so let's just go ahead and create a test
so basically much like the describe
method right here which describes a
whole block of tests and what they do
and it's block just describes one single
test so for example this one is going to
add two numbers together so we'll say it
adds two numbers together okay so again
we take a callback function and inside
this function is where we're going to
put our actual test code so inside this
test right here we need to assert
something okay and by that I mean we
need to predict something we need to
predict what is going to be the result
of this test what we want the result to
be so I could say assert and I'll
explain this in a second and in here I
want to assert that two numbers add up
to say five so I'll say I'm going to
assert that two plus three do
triple equals to five okay so we're
asserting a result here we're saying
what we want to expect we want that two
plus three is equal to five okay so this
is obviously true and because this
statement here evaluates to true then
this assert passes this test passes if
you like so this test right here it gets
a big green tick next to it it passes if
this was wrong for example if we passed
in those two numbers they obviously
don't add up to five this would fail
this would be false this test would fail
okay get a big red cross next to it so I
know this is a bit weird to test that
we're doing it eliminate but just
imagine though instead of adding numbers
together we were testing the database to
save a user so we're asserting that a
user has successfully saved to the
database okay and if it has if it's true
then this test is gonna pass if it's not
done that correctly then this test is
gonna fail okay so that's what this
assert is all about this function right
here now to use this what we're going to
have to do is actually require it it's
not built into maca or anything like
that we have to require the assert
module from node so I'm going to say
comps assert is equal to require a sir
just like that okay so now if I save
that I could run this test and maca is
going to run this it block right here
and obviously at the minute this is
gonna fail but let's change this to
three so that we expect it to pass and
hopefully this test is gonna pass so
when we want to run a test normally we
would say something like this let's
bring this up we would say npm run test
okay now this currently isn't gonna work
because we've not set up our test script
in the package.json file this is really
simple let's just go into this file and
you see where it says this right here
test all we need to do is replace this
thing here with maca okay so when now we
run this script this npm run test that
is going to run this maca thing right
here a maca is going to go through our
tests
and it's gonna output the results here
for us so let's have a look at those
cool so first of all we get our
described string right there some demo
tests which is what we put into the
describe block so we know what the tests
within it are all about then we get the
string that's within the it block it
adds two numbers together which is that
thing right here and we can see that
that gets a green tick it passes okay
and you can see one passing so now we
know that this works we're getting the
result that we expect but if we say two
plus four equals five which we know
doesn't and then run this thing again
now we get a big whopping error all
right
and if we scroll up then you're gonna
see this thing right here is in red
which means it's failed it actually says
there one failing zero passing okay so
we know that this is failed so we can
identify which part of the application
has failed if we had loads of different
tests and one of the tests failed it
would tell us which one is here so we
can go into the application and sort
that bad boy out all right so let's just
change this once more to three so that
it does pass and save it so although
this is a pretty meaningless test at the
minute when we get into playing around
with MongoDB and Mongoose and saving
documents to the database retrieving
them this gives us like a good
playground to test those features out to
test those different methods out okay so
that's what we're going to be doing
we're not going to be doing stupid
things like this just adding numbers
that would be a total waste of your time
we're going to be doing proper things
like testing out the different features
of Mongoose and MongoDB so I hope that
explains in a nutshell what mocha is all
about this isn't going to be an
extensive mocha tutorial we're just
going to be using it to test our MongoDB
connections</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>