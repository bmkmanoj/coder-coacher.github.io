<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django Tutorial #22 - Logging Users In | Coder Coacher - Coaching Coders</title><meta content="Django Tutorial #22 - Logging Users In - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django Tutorial #22 - Logging Users In</b></h2><h5 class="post__date">2017-12-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XMgF3JwKzgs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey gang welcome to your 22nd django
tutorial and in this video i'm going to
show you how we can take our user and
lock them in to the application ok then
so now we have our two forms we have a
sign-up form and also a login form now
in both cases we're handling the post
request when we click on sign up or
login but all we're doing is redirecting
the user at that point we're saving the
user up here to the database so yeah we
are creating that user but then we're
not logging them in we're just
redirecting them and down here when we
use the login form we're checking if the
form is valid and if the username and
password is correct right here and if it
is we're just redirecting them to the
article listing page again we're not
logging the user in so in both cases
we'd like to log the user in so how are
we going to do that well fortunately in
Django it is seriously simple to do the
first thing we need to do is import the
login function into this file so we'll
do that at the top and we'll say from
Django Doc's contrib dots auth import
login now by the way when I was creating
these view functions right here I didn't
call them just sign up and log in
because we're going to use a function
called log in and if this was just
called log in for example and we try to
use this then Django is going to get
confused as to what's what so it's
important when you name your view
functions to call them something like
login view instead so we'll be using
this login function to log in a user now
let's handle the login view first of all
so this form when a user clicks on log
in how are we going to log this user in
well first of all we need to get what
the user is who's trying to log in so
let's create a variable called user and
set that equal to something the user now
when we're using this authentication
form like this we can get the user from
the form that we're storing it in by
saying for and then dot get underscore
user that's built into Django when we're
using this form
because it's handling authentication and
a user storing that form in this
variable therefore on this variable we
can access the user by same form gets
user that is going to retrieve the user
that is trying to login for us okay now
we've got that user we can try to log
them in we can say login which is the
function we just required up here and
this is a function and we need to pass
through a couple of parameters the first
one is the request object then the
second one is the user we're trying to
log in and that's how simple this is
so we retrieve the user first of all by
saying form get user and then we're
logging that use it in using login
request user and that is if the form is
valid if this is all ok when we pass the
data in okay cool so that's how simple
it is to log a user in so let's test
this out we'll save it and go to a
browser now what I'm going to do first
of all is go to the admin section and
make sure that I'm logged out of the
application so now I'm logged out now if
I go to accounts and then log in and
it's CC so accounts and then log in then
hopefully this should now log me in so
log in and if I go to admin again I
should be logged in and I shouldn't see
the login screen admin yep I'm logged in
again so this is worked this right here
has logged me in its grabbed me from the
form and it's logged me into the
application which is cool dead simple to
do
so now let's handle the signup view so
again we need to log a user in right
here but this time we don't need to say
user equals form get user when we use
this method right here form dot save
this actually returns the user to us and
we can store that in a variable if we
want to so I could say user is equal to
form save and this only happens if the
form is valid remember so if the form is
valid we're saving the form and
returning the user of that form to this
variable
okay so now we have that variable of the
user we can use this thing again right
here to try and log them in the same way
so we'll say login then request and then
the user again and hopefully this should
work as well so if I go back accounts
and then we'll go to sign up instead if
I go here we'll create a new account
we'll call this one peach don't think
that one's there yet test one two three
four test one two three four sign up now
and we're logged in as peach and okay
you might not be able to tell that I'm
logged in as peach now because there's
nothing on the webpage saying that I'm
logged in but if I try to go to the
admin section then it says right here
you are authenticated as peach but I'm
not authorized to access this page so
right now I can tell that I'm logged in
as peach okay so there we go that's how
simple it is to log use it in to your
application in Jango</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>