<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Asynchronous JavaScript #5 - Generators | Coder Coacher - Coaching Coders</title><meta content="Asynchronous JavaScript #5 - Generators - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Asynchronous JavaScript #5 - Generators</b></h2><h5 class="post__date">2016-05-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pnS2lBQuLGc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you're something guys welcome to your
fifth asynchronous JavaScript tutorial
and in this video we're going to talk
about async JavaScript with generators
Wow alright then guys so generators are
a relatively new addition to es6 that's
Ekman script six and they're really cool
when it comes to working with
asynchronous JavaScript so this isn't
going to be an introduction to
generators if you want to learn them
from the ground up then i've got a
tutorial video on this channel to
explain that and you're welcome to go
and check that out first I'll leave the
link down below what I'm going to do is
have a brief overview of how to make
them and then we're going to dive into
how we can use them with asynchronous
code
so just to recap how do we make a
generator we make it much like another
function we'll say function but to
specify that this is a generator we pop
a little Asterix right there after the
function keyword then we give it a name
I'm going to call it Jen and then we set
it up much like any other function
except in a nutshell generators we can
pause there like pausable functions
right and we can pause them using the
yield keyword so wherever it finds a
yield keyword in the code within this
code block right here it's going to
pause that function so I could say
something like this VAR x equals yield
10 and what's going to happen when the
code in this generator is fired
JavaScript runs from right to left so
it's going to run here it's going to
grab this 10 and it's getting yield it
and it's going to stop the generator
right next to the pause it in essence
right and then this value 10 is yielded
which means it's passed out of the
generator and we can use it out here
somewhere
okay then we can restart the generator
by using the dot next method so let's
just go through how we can do this I'm
going to create a variable out here I'm
going to set this equal to my jet and
I'll set this equal to the gen function
like that so you might think that this
fires this code right here but it
actually doesn't when generators are
involved like this it just prepares them
it gets them ready and then we use the
dot next method on this which is an
iterable object because this returns to
us and it'll
object we can use the next method on
that to start up the code right so let's
do that
we'll say my Gen dot next like so and
when we do that is going to run the code
up to here grab that and it's going to
pause right there and then this value is
passed back to us here in an iterable
object so let's just log this to the
console to see what it looks like so
when a console that log my genetics
press Save and you're going to see an
object right here this is an iterable
object right and there you can see the
value is a property on that which is
passed back to us which is that 10 and
this other property done is false and
it's false because we've not completed
the cycle through the generator yet
we've paused halfway through this is
only true when it reaches the end of the
code so if I do the exact same thing
here dot next again it's going to carry
on to the end of the code and this time
done is true the second time round the
value is undefined because we're not
yielding another value we're just
reaching the end of the code and we're
passing nothing back we passed out the
ten the first time nothing but the
second time now if we want to pass a
value back in to the generator with
candy we just pass it through the
parentheses so if you recall the first
time we call this next method we're
running the code and we're grabbing this
and we're pausing here yet then the
second time we run the next method we're
starting here and carrying on so we can
pass it in the second time a value like
10 if you want and then that's going to
equal X it's going to pass it back into
the generator okay so now we could say
console dot log X within here and press
save and then now you'll see that
they're logged into the console okay
okay so that's all well and good that's
what generators do but how can this help
us with asynchronous code well let me
just delete all this stuff right now
you're going to see an example that I
prepared over here so I'm just going to
uncomment this and it might look a
little scary first but really it's not
ok so we've got our generator right here
you can see the function with the kicker
with an asterisk I'm not
named this generator purely because I'm
just passing it as an argument into this
general wrap function right here but
what all this generator is doing is
making some sync simple get request and
it's yielding those values back each
time right and then when we pass a value
back in it's equal into these variables
right here so let me just run through
what's going on in this gen wrap this
function so we're passing through a
generate it into this generate function
right here yet and the generator in this
case is here so the first thing we do is
set gen equal to generator right and
we'll create a variable called general
like that so that's going to prepare the
generator that's all it's doing which is
this thing doesn't fire the code yet
then we're defining a function called
handle but we've not called it yet so
we'll skip past that for now
then we're returning this function right
here handle and we're passing through
gen next and if you remember when we
call the dot next method is going to
start firing the code so what's going to
happen as soon as we call this here is
the code is going to fire right here
it's going to do this get request and
it's going to yield the result of that
okay so that's being returned towards in
this thing right here this iterable
objects that that's returned to us so
it's passing that object into this
function handle which is now this
yielded variable and if you remember on
that object we have the done method so
I'm checking here that to make sure that
we've not finished the generator I'm
saying for as long as this is not done
then we're going to carry on
okay so then I'm going to get the value
from that yielded object that's returned
to us and because the value of that
object is this thing right here at this
return from this request and that return
has the promised interface built into it
then I could say dot then all right so
once that happens and we retrieve data
dot then I can fire this callback
function which takes in the data
retrieves so I've got that data that
this thing here has retrieved now then
I'm going to return the handle again
this function so we're going to call
that again
this time we're going to call Jen next
again but explicitly pass through that
data we've retrieved back into the
generator so the first thing that's
going to happen is this code is going to
fire up again and it's going to pass
this data back into here which is now
stored in tweets we've gone out and
grabbed that we're storing it in this
variable then we can do something with
it I've just logged it to the console so
I'll show you that in a minute and then
we move on we do the second request
right here and then this value is
returned to us in the iterable object
right here okay so then that's passed
into the handle again yielded and
checking that the generators not done
which isn't then we're doing the same
thing getting a value of that iterable
object we're saying dot then and we're
using a callback function so grab that
data and do it exactly the same thing
we're going to store that data in
friends then it does the same thing for
this third one right here which is
videos so this right now here is really
cool because this looks like synchronous
code it's doing one thing after another
but in fact it's asynchronous code all
right so it's a way we can display
asynchronous code synchronously so it
looks great it's easy on the eye and
yeah it just is a nice way to do things
all right so if I save this right now
then hopefully everything's going to
work and we're going to see these
objects logged it to the console right
here first we go out and get the tweets
then the friends then the videos alright
so there we go guys that is how we can
work with generators to make working
with asynchronous code easy all right
now I want to mention one thing this
smart code wrapper right here that I've
written is a very very basic one
you might not want to do it exactly this
way if you'll do something for
production but you get the idea this is
just a simple one to show you kind of
the inner workings of how we could do
something like this using generators and
that our libraries out there which can
do these things for you these are kind
of smart wrappers if you like and I
think Q is one of them up bluebird so if
you want to check those out just give
them a quick google and see what they
can do for you awesome but there we go
guys that's how we use generators with
asynchronous code any questions leave
those down below otherwise I'm going to
see you in the next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>