<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django Tutorial #21 - Login Form | Coder Coacher - Coaching Coders</title><meta content="Django Tutorial #21 - Login Form - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django Tutorial #21 - Login Form</b></h2><h5 class="post__date">2017-12-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/drMr9B3ZcPI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you know again welcome to your 21st
janggo tutorial and in this video we're
gonna move from sign up to log in and
I'll show you the built in login form we
can use in Django alright then so now we
have this signup form right here and it
works we can successfully sign a user
rope now I'd like to create a login form
so a user can come to our website go to
forward slash login or something like
that and then login to the application
so the first thing I'd like to do is
create that URL pattern in here so we
already have office signup let's make
one for login so URL and then inside the
first parameter is the raw string
carrots then login then forward slash
dollar like so and then the second
parameter will be the view function that
fires when someone goes to this URL so
that will be views dot or login
underscore view now we've not created
this view yet we'll do that in a second
and the name of this URL will be called
login all right then so now we have this
login URL we need to create this view
function so over to the views we'll
create a function right here called
login underscore view and this will take
the request object first of all now the
same as the signup view this could be a
post request to the login or a get
request to the login view so in here we
need to determine whether it's going to
be a post request or a get request now
it's going to be a get request if I go
to forward slash accounts forward slash
login that would be a get request and it
would be a post request after I filled
in the form and click on login that
would fire a post request to forward
slash accounts forward slash login so
those two would both fire this and we
can determine whether the method is post
or get by using this thing right here
if request method is equal to post then
do one thing else we'll do something
else so let's do the else case first of
all so this will be a get request when
you use the type C and forward slash
accounts for slash login or clicks on
the login link so what we'd like to do
is send them a login form to
the template and then render that
forming the browser now much like this
farm over here use a creation form
Django comes fully baked with an
authentication form as well which we can
use to log users in which is really cool
so that form is called authentication
form and I've already imported it up
here we import it from the same place we
import user creation form from so just
put a comment after that and then
authentication form now we can use it
down here so in the get request in the
elds case we can say we want to create a
new instance of a farm and store in this
variable called form and that will be
authentication form like so so we're
creating a fresh instance of this form
then at the end of this I'd like to send
this form back to the template so we'll
return at the bottom a render and make
sure that this is outside of the else
statement by backwards indenting it
taken out of that indentation so render
and first of all we send back the
request object then we send back or we
specify which template we want to render
so that will be in the accounts folder
/login dot HTML and then finally we're
going to send back the form to this
template so that would be in a
dictionary we'll call this form and set
that equal to with the farm variable we
just created right here so if the
request method is post then nothing is
going to happen at the minute and we'll
talk about that in a second if the
request method is get then form is going
to be equal to this new form this new
authentication form then at the end
we're returning a render which is going
to render this template and send back
that form so now we need to create this
template over here so right click new
file and call this login dot HTML and
then this login form is going to be
pretty similar to this signup form so
what we can do is just copy all of this
paste it in here we're still extending
from the base layout that's fine and
we're still using this block concept
right here to inject this into the base
layout we'll change this from signup to
log in and then we don't want this
to go to accounts then sign up we wanted
to go to accounts then log it however
I'm going to show you a different way to
do this instead of hard-coding
the URL right here we'll use a URL like
so open up your template tags then type
URL then in single quotes so we don't
escape out of the double quotes type in
the URL that we want to send this to now
we want to send it to the accounts colon
and then the name of the URL is logging
remember in the URLs we said the app
name was accounts which is why we have
accounts right here then we have : log
in to say in the accounts app I want to
use the log in URL so this right here
this is the same as hard coding forward
slash accounts forward slash login all
right so it's a post method we're
keeping that the same we have our token
right here and also output in the form
that we receive which in this case is
the authentication form the login form
we have our input button right here but
let's change the value to login and save
that so let's save the view as well if
we make a get request now then this
function should fire and this else
statement should fire set the farm up
and send the farm back to us so let's go
now to forward slash accounts forward
slash login press enter and fingers
crossed okay this is not working so
let's open up the terminal and see
what's gone wrong and we have an error
right here with else so let's see what's
going on okay it's probably because
there's nothing in the if right here so
let's just set up a new form and set
that equal to the authentication form
again for now and we'll come back to
this in a bit and change it so let's
save that and refresh over here now this
should work and now we get this form so
we get a username field and a password
field so if I try to log in at the
minute nothing's gonna happen because
we're not really do anything in this if
statement right here if we get a post
request all we're doing is we're setting
up a new blank form and then eventually
returning this template so we don't want
to do that if it's a post request we
want to take this
data the username and password we want
to try and authenticate it within this
form and then if that's authenticated if
that's a valid the form then we need to
log them in somehow so this right here
is going to make sure that the form is
valid by checking that the username and
password is correct right but what we
need to do is pass through the data that
we receive into this thing so we can say
request dot post to pass through the
post data now we did that up here and
that was fine here but right here this
is not the first expected parameter of
this function so we have to actually
name this parameter to say that this is
the data so we say data is equal to
request up post and that's because this
is not naturally the first parameter of
this function okay so we're sending the
data into this function right here
authentication form into this form and
that's going to validate it for his make
sure it's okay and we can also use this
is valid method down here we can say if
four dots is underscore valid so if this
username and password is correct then
down here what we need to do is log in
the user right
now we're not going to do that just yet
we'll come back to that in the next
video but that's what we need to do if
this is valid if we need to log the user
in now on the next line instead of
logging the user in for now all we're
going to do is redirect them to the
articles list page like we did here so
let's copy that and paste it right here
so again when we make a post request
it's gonna fire this code right here
it's gonna pass that data from the post
request into this authentication form
some validate it make sure the username
and password is correct if it is valid
then we'll redirect them to the article
listing page if it's not valid then it's
going to go right to the bottom and
return this render again which is the
login template and pass through this
version of the form with any kind of
authentication error to the template so
for this an error then we'll see in the
browser over hit ok so let's save this
dude and try this out in a browser so
first of all will refresh and show
and test one two three four this should
redirect us to the article page because
this is absolutely correct login
redirects us cool now let's do something
that's not correct let's use peach as
the user we know there's not a peach
user yet so it should throw back an
error login and we get an error please
enter a correct username and password so
that's working
let's try Shawn with a different
password we'll just say test instead of
test one two three four login and we
still get the error so it's picking up
on a bad username or a bad password cool
so this is all working and this is
correct now so if I log in then it's
going to log me in to it well it's not
going to log me into the application
it's going to redirect me to the article
listing page but it's not yet logging me
in all we're doing here is redirecting
them like we did here redirecting them
after they signed up so in the next
tutorial I want to address these two
points right here and see how we can
actually take that user and log them in
to the application</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>