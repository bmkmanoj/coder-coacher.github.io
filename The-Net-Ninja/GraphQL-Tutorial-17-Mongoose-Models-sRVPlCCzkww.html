<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GraphQL Tutorial #17 - Mongoose Models | Coder Coacher - Coaching Coders</title><meta content="GraphQL Tutorial #17 - Mongoose Models - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GraphQL Tutorial #17 - Mongoose Models</b></h2><h5 class="post__date">2018-03-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sRVPlCCzkww" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright then so now we've created an
instance of MongoDB online and we've
connected to that database now before we
start putting data in the database what
we need to do is create a model and
schema for each data type that will be
storing inside that database now I don't
want you to get confused with a mongoose
schema on MongoDB schema that we're
going to create for our data that's
being stored in a database and our
schema which we pass through in to this
thing right here for graph QL this
schema is defining our graph and the
object types on that graph our mongoose
schema is going to define the data
that's actually being stored in MongoDB
so that MongoDB understands that data
right it knows what to expect so again
try not to get those two things mixed up
they're two different schemas so what
I'm going to do first of all is
right-click server create a new folder
over here and this is going to be called
models so this will store our mongoose
models are our MongoDB models inside and
we're going to make two files one for a
book model so I'm going to call this
book Jas and also another called
author Jas for our author model right
because we're going to store two
different types of data they're going to
be two different collections on MongoDB
so let us tackle the book model first of
all now the first thing we need to do is
create a constant called Mongoose and
set that equal to require Mongoose
because we're going to need that inside
this file to create the schema and model
and then we're going to create another
constant I'm going to call this schema
and I'm going to set this equal to
Mongoose
dot schema and again if you're not sure
exactly what I'm doing here and you need
a refresher I would advise you to check
out my MongoDB tutorial series the link
is gonna be down below anyway now we
need to create our schema for the book
so let's create a constant first of all
and we'll call this book schema like so
and set it equal to a new schema all
right so that thing right here is this
thing right
it's Mongoose no scheming so inside this
scheme and we need to pass through an
object and this object is going to
describe the different data types and
properties we would expect on a book
right so remember we have a name
property which is going to be a string
simple then we have a genre property
which is going to be a string and then
finally we also have an author ID which
is also going to be a string now we also
in this schema file defined an ID
property right on the books and we also
did on the authors but we don't need to
do this in this case because MongoDB or
M lab is automatically going to create a
new ID for each file that we add to the
database so we don't need to worry about
defining it right here in the schema all
right so that's it we've created that
schema now so now MongoDB is going to
know the kind of data that we're storing
right in this particular collection now
what we need to do is export a model
so we'll say module 2 exports and set
that equal to Mongoose dots model so now
we're defining a model right which is
akin to a collection in MongoDB and the
collection name or model name is going
to be bulk and we're going to base this
model on a particular schema and it's
going to be this thing right here the
book schema so let's copy that and paste
it right here so what we're doing here
is we're saying we're making a model
right which means a collection if you
like a model refers to a collection in a
database so we're going to have a
collection which is going to be bulks
and this collection inside the database
is going to have objects inside of it
which look like this this schema so
that's what we're doing right here then
we're exporting that because later on
we're going to use this model to
interact with our book collection
in MongoDB right so let us copy all of
this stock because I don't want to
retype everything out and paste it
inside here these two can stay the same
we're going to need the same for the
author and will change book right here
too
author now the different properties
inside an author is going to be the name
again which is a string we don't need a
genre for an author but we do need an
age like so and that is going to be a
number this time around not a string a
number okay so that's this schema for an
author now we want to again export a
mongoose model this one is going to be
called author and it's going to be based
on the author schema so we're making two
models here one for the author and one
for the book and those models represent
those two different types of collections
in our MongoDB instance so we're going
to store them in different collections
we use the author model inside our code
to interact with the author collection
in a database and we use the book model
inside our code to interact with the
book collection on MongoDB right so
we've created both of those two
different models right there awesome so
then now we have both of these models
defined inside our schema the first
thing I want to do is get rid of all
this junk we don't need the dummy data
anymore and inside here we can comment
out all these different resolve function
code because we're not going to be
looking through those arrays anymore
we're going to be connecting to MongoDB
to get that data so let's just comment
all out all of that junk out and then
I'm also just going to imports ready the
two models we've just created right here
so that we're ready to interact with
those collections on MongoDB so at the
top right here I'm going to say Const
book is equal to require then inside we
want to say dot dot says to say go up a
level go up out of the current folder
because we're currently in the schema
folder then we want to jump into the
models folder then we want to get the
book file right book Jas so we've got
the book model now we also want the
author model which is equal to require
again and this time we're going to go up
a folder again to jump out at the schema
folder then into models then grab the
author file
all right so now we have these two
models already inside our schema file
for our graph so what we can do starting
in the next tutorial is start to
interact with our collections in MongoDB
and add data or query data so we'll
start that in the very next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>