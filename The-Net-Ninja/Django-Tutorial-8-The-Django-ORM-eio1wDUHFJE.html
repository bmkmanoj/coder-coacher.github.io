<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django Tutorial #8 - The Django ORM | Coder Coacher - Coaching Coders</title><meta content="Django Tutorial #8 - The Django ORM - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django Tutorial #8 - The Django ORM</b></h2><h5 class="post__date">2017-11-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eio1wDUHFJE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's going on guys welcome to your
eighth django tutorial and in this video
I'm gonna show you how we can use the
jungle ORM to interact with a database
all right then so in the last video what
we did is take this dude over here this
model and we migrated that to the
database so that now the database knows
to create a table for this model okay
now in this video I want to look
interacting with that database how can
we do that using this model in the code
well that's where the django ORM comes
into play so the ORM bridges the gap
between the code and the database and
it's built into Django
so that we can use it to interact with
the database using the model we can do
things like save an instance of the
model or retrieve models from the
database of data model that kind of
thing so since we're just testing this
out I don't want to start messing around
with the code in the application so
instead what I'll do is open up an
interactive shell to test this out so
the way I'll do that is go to the
terminal and to open up an interactive
shell all we need to do is say Python
and then yet again it's managed dot py
and then just shell this is going to
open up an interactive shell for us so
we can use this now to start writing our
jungle code and interacting with the
database so the first thing we need to
do is actually import the article into
this shell because we're going to use
this article model right here to start
interacting with the table so to do that
I want to say from articles and articles
refers to the app name and then I want
to say dot models which refers to the
models
file right here inside the articles up
top models and then we're gonna import
from that article which is the class
name here or the model name
okay so we're importing that now and we
can use it so if I say article right now
then we can see that it's a class
articles doc models the article all
right so then how do we use this to
interact with the database while say for
example we want to retrieve all of the
rows or objects if you like inside the
table but articles well all we do is we
say article like so then we can say dots
objects right then we want all of them
so it's dots all so article the objects
to refer to the objects then we want all
of them and it returns a query set and
there's nothing in here at the minute
and that's because we've not actually
created any articles yet so how about we
do that first of all so the way we
create a new article a new instance of
the model is by saying a variable name
I'm just gonna call this article with a
lowercase a but you can call it whatever
you want and I'm going to set this equal
to article which is our model and invoke
that that's going to create an instance
for us okay
so if I type in now article we can see
that this is an article object okay but
it's got no properties yet we've not
given it a title or slug or anything
like that so let's just give it
something will say article doc title is
going to be equal to hello world like so
so now if I type in article it's still
an article object but I can also type
article title to retrieve the title of
the article make sense so how do we save
this now to the database to a table well
that's simple
all we need to do is say article which
is the article instance we created dots
safe and that is going to save this to
the database okay so now why don't we
try retrieving the articles again from
the database table remember last time we
got an empty query stare a query set but
this time we should get one article in
there so let's do article which is the
model first of all not objects so
remember this model is referring to the
table in the database so saying okay get
the articles table then get all the
objects then we want all of them
retrieved so now we get a query set with
this item inside it okay we have one
object in there so it's retrieving that
for us and if there were five objects in
there it would retrieve all five of them
for us okay so if I want to retrieve say
the first one I can say article dot
objects dot all and then I want to use
square bracket notation to say I want
the 0th index which is the first one and
let's say we want the title property
from the first one we can say doc title
that's going to bring back hello world
so this is really cool we've created a
new instance of an article saved it to
the database then we've retrieved that
using the Django ORM and the ORM is
basically just a list of how we're
interacting programmatically with the
database using our model okay now the
only thing that's kind of holding us
back here is that when we retrieve this
query set if there were say five objects
there then we just see article object
article object article object and we
wouldn't actually know what those
articles were a better way to do this
would be to see the title of the article
maybe in each case so we can't actually
do that I'm just gonna control Zed out
of here then I'm gonna go over here and
underneath all of this stuff I'm going
to add in a function and this function
is called underscore underscore STR
underscore underscore right and this is
a built-in kind of function which
defines how an article is going to look
both in the admin section and also in
the shell when we just retrieved them so
if I say death underscore underscore and
then STR underscore underscore it takes
in a parameter self which is the
instance of the article then what we're
gonna do is return the self the article
itself dot title right so now the string
version of that article when we retrieve
it from the database is not going to
show just article object article object
it should hopefully show the title of
that instance does that make sense
so let's save this and let's go in here
again and say python managed to py shell
and by the way I just pressed upper to
get my most recent command can enter
into the shell again I'm going to import
the article again because once we
entered out or exited out of it we lost
that so we need to import it again
so we'll say from articles
cause import article
oops I've made an error there um where
is it that's because I've got a dot
after models
that's fine so now we can say article
dot objects dots all to retrieve them
all and this time we see the title of
the article because we said that the
string version of this article should be
the title of it okay so this is how we
control how the article is going to look
when we use the shell and also in the
admin section which we're going to look
at in probably the next tutorial so
let's just add in one more article we'll
say
article 2 is equal to article
and article 2 dots title is gonna be
equal to I don't know
Django rules alright so let us now save
this article to save I should save it to
the database and then if we want to
retrieve all of them again we can say
article dot object dot all and that's
going to retrieve both of those and we
can see in each case we get the title of
the article
not just article object hello world and
Django rules so awesome this is how we
interact with a database using the
jungle or RM and our model right here
and this is how we're gonna be saving
things in the database as we go forward
alright so I just wanted to give you a
taster of this now to show you exactly
how we're going to be interacting with
the database and later on throughout the
series we're going to be using this kind
of technique in the actual code base
over here so now we know that in the
next tutorial I want to introduce you to
the Django admin area where we can see
all of our articles have been added we
can add more articles we can delete them
etc</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>