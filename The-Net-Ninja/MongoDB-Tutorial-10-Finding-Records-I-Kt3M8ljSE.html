<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB Tutorial #10 - Finding Records | Coder Coacher - Coaching Coders</title><meta content="MongoDB Tutorial #10 - Finding Records - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB Tutorial #10 - Finding Records</b></h2><h5 class="post__date">2017-01-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/I-Kt3M8ljSE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey was something guys welcome to your
tenth mongodb for beginners tutorial and
in this video I want to switch our
attention to finding and reading data
from the database okay so I thought we'd
just have a quick recap of what we've
covered so far so I've shown you how to
make a connection to MongoDB using
Mongoose and the connection string so we
know how to connect a MongoDB now we
know how to set up a simple test
environment with mocha with those
described and it blocks we've created a
model and a schema and remember a model
represents a collection in the database
and the schema represents the structure
of the individual records in that
collection for example the different
properties they have and the types of
those properties we've seen how to
create an incidence of a model I eat a
single record and then save it to the
database and then finally in the last
tutorial we saw how we can drop an
entire collection from the bittered the
database and we did that before each
kind of block of tests right so now I
want to move on to saving records and
I'm going to focus on two mongoose
methods during the rest of this playlist
for saving records and they are find and
find one now these are functions which
is why we've got these little curly but
these brackets right here and have put
criteria within there because we can
pass through some criteria on which we
want to search by so if we pass through
a name property in here of mario then
we're going to go out and find a Mario
character all right so the difference
between these two methods right here is
that this one will return those multiple
results if there are multiple and this
one will just return us the first one it
finds so for example if we say we want
to find a Mario character with the name
of Luigi then this right here is going
to go out and find every single record
within that collection with a name of
Luigi there might only be one but there
could be four so it's going to return
them all toys right this one right here
is just going to go out and find the
first one with a name of Luigi and
return that one single record to us so
this is always going to be one now
unlike the save method we use these
methods on the models themselves not on
the instance of the model so for example
the save method which we used was used
on a single instance so we'd say
something like this my car equals
you Mario Kart with a name of Mario then
we take that instance of that model and
we'd save it to the database so this
right here this method is being used on
the instance of that model make sense
the fired methods are used on the models
themselves so this is the model Mario
car would say dots find and then we want
to find every record with the name of
Mario so that's a major difference
between these two methods and it kind of
makes sense because when we're doing
this right here we're saying we want to
save that individual record and when we
say we want to find something we want to
find it from the collection right so it
kind of makes sense okay there so in
previous tutorials we've created this
test file right here called saving test
and this has got an it block in it right
here which is a single test which saves
a record to the database now we're going
to now find records from the database so
we don't want to put my test in this
file I want to create a new file so I'll
come to the test and go to new file and
I'm going to call this finding
underscore test j/s so we're going to
put our finding test code in this file
but I'm super lazy so what I'm going to
do is copy all this dude and paste it
right in here so we still need these two
things up here so I'll keep them
described then we'll change this to
finding records this it block which is a
single test I'm going to change this to
find one record from the database and
then this thing right here this goes out
it creates an instance of the character
and it saves it to the database
now do we still need that well yeah
technically we do need that if I go back
to the connection GS file you'll see
this thing right here before each so
what this is doing is dropping the
collection before each test if you like
so if we don't then go out and create a
new character then we've got nothing to
find because that collection is being
dropped so we want to keep this code but
what I want to do is take it out of here
and pop it up here so that it runs
before this test because we want
something there beforehand before we go
out and find something right
now I'm not just gonna paste it in like
that because I want to make sure that
it's actually completed before we then
go on and do this test so how can we do
that
well we're going to use a hook and we've
seen hooks before we say something like
this before
Beach and then pass a function in here
and then this is gonna run before each
of these tests right here in this
describe block so within that function
then we can paste this code well there's
one thing missing
no it's right here we're seeing done and
we say this to say okay Maki you can
move on to the next test now we need to
pass that right in here as well if we
don't pass it in here then it's not
going to know what this is and it's not
going to work okay so we created a
character with the name of Marriott
we're saving it to the database and then
we're saying don't which system maka
okay now you can move on to this test
right here so now we want to go out and
we want to find this record from the
database so we're going to use the find
one method since there's only one we're
going to use find one so remember we use
that on the model itself so I'll say
mariokart find one oh by the way this
fine method writing it I said we can
pass parameters in here like we can
search by name or something but if we
don't pass any parameters into this
object then this is just going to go out
and find every single record in that
collection and return them all to us so
that's how we get them all okay we're
just going to use find one and then
we're going to search by name because we
know the name of this dude is Mario so
I'll say name is Mario okay so that is
going to go out my friends and it's
going to find one record the first
record in the database with a name of
Mario now this is an asynchronous
request we don't know how long it's
going to take so it returns that promise
to us so then we can say doc then and
this thing right here it takes a
function which is only gonna fire after
this thing is complete right so after
it's gone out and it's found something
then we fire this function and within
the function we can pass through the
result that it finds okay so this is
going to be what it comes back with
hopefully the record so in here we can
now assert that we found the result we
found the record with the name of Miriam
how do we do that well we can say assert
and then result and this result is going
to represent the object that it returns
to us which has a property of name so we
can say we want to assert the result dot
name triple equal to Miriam
simple right so that's what we're saying
if this result has a name property of
Mario then this has successfully gone
out and found one record with the name
of Mario makes sense done it okay so
let's say done just to finish off our
test and now we're going to run this to
make sure it's work so I'll save that
and I'm going to come to this thing
right here and I'll say 10:00 p.m. run
test alright cool so now we see these
two different describe blocks finding
records and saving records and onto each
one we've got a single test the first
one here finds one record from the
database accrual that's work
this one right here saves a record to
the database that's worth so now both
tests are passing awesome so that is how
we find records from a database in the
next tutorial we're going to have a look
at that object ID property that we can
see on those records when is saved to
the database</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>