<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django Tutorial #23 - logging users out | Coder Coacher - Coaching Coders</title><meta content="Django Tutorial #23 - logging users out - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django Tutorial #23 - logging users out</b></h2><h5 class="post__date">2017-12-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/M2pSOofa_Qo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey gang welcome to your 23rd django
tutorial and now we figured out how to
log users in I want to go to the next
step and show you how to log those users
out of the application alright so I'm on
this application and I'm logged in as
peach and if this was a real application
I've been getting really peed off right
now because I've been looking around and
thinking well how the hell do I log out
I can't see a logout button anywhere so
in this video we're going to handle how
to logout of the application and it is
pretty simple again so the first thing
we want to do is go to our URLs first of
all for the accounts up and set up a URL
for this logout functionality so down
here let's create a new URL and inside
the raw string first of all so what do
we want this URL to be well Kara it to
say the start then logout then forward
slash then dollar sign and then that
will do okay so that's our URL that we
want for the logout functionality we
need to specify a view function here so
views and then dot log out underscore
view and then the name of this URL will
be log outs ok cool so now we have this
URL specified we can go ahead and create
this logout view function so I'm going
to copy that because I'm super lazy and
go into my views file now let me just
minimize a couple of these so we have a
little bit of room and down here define
a new function called to the logout view
so we pass the request in first of all
and then inside the login the logout
view rather we just want to log a user
out now typically it's best practice to
use a post request to log a use out and
not a get request so you don't visit a
URL like accounts /a logout you make
some kind of post request by clicking a
button which will make a post request to
forward slash accounts forward slash
logout and log the user out of the
application so because that's best
practice we're going to use a post
request in here and we need to check
that the post request was made so to do
that we know how to do that
it's
if request dots method is equal to
uppercase post then we're going to do
something so we want to log the user out
dead simple to do like we imported log
it up here we can also import logout
which is a function as well so we can
say down here logout and then pass the
request object inside this now we don't
need to pass in the current user because
what already logged in as the user
Django knows that we're logged in so it
doesn't need to know which user to
logout it's just going to log the
current user out all right and then once
we've logged the user out what we'll do
is return some kind of redirect to this
page the article listing page so again
return and then a redirect and the
redirect is going to be two articles
which is the app name colon and then
list which is the URL name okay sweet so
now we have this view method sorted out
dead simple the only thing we need to do
now is display some kind of button on
the page which when you click it is
going to perform a post request of
forward slash accounts forward slash or
log out so that this function fires
detects it's a post request log the user
out and redirect them to articles list
so where are we going to put that button
well it makes sense to have that button
on every page right and on every page we
have the base layout remember inside
these views right here we're extending
the base layout in all of them so let us
open up to that base layout now and add
in a button so down here in templates we
have the base layout and I'd like to add
this button in the header somewhere so
after the h1 hit enter then we'll create
a nav so inside the nav will be a ul and
series of Li tags just want to begin
with which is going to be logout we're
doing that now but later on we'll also
add things like login or post new
article so inside this Li tag what do we
need to do well we want to create a post
request ultimately right and
do that we probably should use maybe a
forum or something like that so let's
create a forum and set the class equal
to log out
- link we'll use that to style this up
later on the action is not going to be
to index.html it's actually going to be
two forward slash accounts forward slash
log out but we're not going to hard-code
it we're gonna use our template tags and
URL instead so a URL and then in single
quotes we say we want to send this
action I'll send this post request to
accounts : logout alright so when we
click Submit inside this form then it's
gonna make it post request to this thing
right here and ultimately then that view
we created over here the logout view
this will fire alright so we have this
form but inside the form we need to do
two things remember whenever we make a
post request we need to add in the CSRF
token so we do that in our template tags
CSRF underscore token so we're sending
that as well that's for security reasons
then we're gonna use a button which is
going to have a type of submit this is
pretty much the same as doing input type
equals submit same kind of thing we
don't need a name attribute so we'll get
rid of that and inside the button we'll
say log out okay so now we have this a
log out button inside this form so when
we click it it's going to submit a post
request to this URL forward slash
accounts forward slash logout it's gonna
fire this function the function will
detect it's a post request log the
current user out then redirect us to
this page make sense so if I go to first
of all admin then I should say that I'm
logged in as Picchu are authenticated as
peach I can't access the admin area but
that's who I'm logged in us now if I go
back I'm going to just refresh this page
now I see a logout button right here so
if I click on this now it's gonna lock
me out to read our
submitted this page again but this time
if I go to forward slash admin then
hopefully I'm not logged in as peach
anymore
we've logged that user out cool so let
me try and logging in as Sean and then
just going to articles again we'll click
on a different article log out now going
to redirect me to the articles page and
hopefully if I try to access the admin
section it's not going to let me because
I'm no longer logged in yeah there we go
I have to login again if I want to
access that so it's logged me out
so there we go guys that's how simple it
is as well to log a use out of your
application in Jango</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>