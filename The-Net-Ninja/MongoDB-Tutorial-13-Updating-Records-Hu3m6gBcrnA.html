<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB Tutorial #13 - Updating Records | Coder Coacher - Coaching Coders</title><meta content="MongoDB Tutorial #13 - Updating Records - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-Net-Ninja/">The Net Ninja</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB Tutorial #13 - Updating Records</b></h2><h5 class="post__date">2017-01-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Hu3m6gBcrnA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yogin welcome to your thirteenth mongodb
for beginners tutorial and in this video
i'm gonna show you how to update records
in the database okay there's so much
like deleting records there's various
different ways we can approach updating
records so this first method right here
card or update this update method is
being called on a single instance of a
particular model okay so say for example
we've gone in and we've reached into the
database into this collection this Mario
Cart collection we've retrieved a single
record and we stored that in this car
variable then we change one or more of
its properties we can say card update
and that's going to update that record
then to the database these are the two
are both called on the model itself so
Mario Kart is the model we can call
update or find one and update so this
updates all according to a specific
criteria and this just finds one
according to a specific criteria and
updates that one okay now we also pass
in a second argument into each of these
methods and that is an object which
represents the changes or the updates
when we want to make to that on those
records and we're going to focus on this
final one in this tutorial and we're
going to see how it all works later on
well first of all how we're going to
approach this again well same as the
last tutorial we're going to first of
all create and save a new record to the
database so that there's something there
that we can actually update then we're
going to use find one and update to
update the name of that record so if it
was called Mario before we want to
update it to call it Luigi then we're
going to use find one to try and find
this record in the database and then
we're going to see if it has the updated
property value which we did right here
okay
okay then so the first thing we want to
do is create a new file so we'll go to
tests and go to new file and we're gonna
call this updating underscore test is
and then I'm gonna go to deleting test
copy all this stuff and I'm gonna paste
it in updating tests I'm gonna get rid
of these other things because we don't
need them
and they're just a clogging up space so
deleting test and connection okay cool
so now we've just got updating tests
here and again we still want to create
this character and save it to the
database before each test we're gonna
change this deleting to updating so I'll
say operating records
that's the describe block then this test
down here we're gonna say updates one
record in the database then we'll delete
this stuff right here because we're
going to rewrite this test so we've
already created this instance right here
called Mario and we've saved it to the
database now what we want to do is we
want to use find one and update to
update this record right here and change
its name so we'll say Mario car dot find
one and update okay so this is the model
and we using this method to find one
record and update it now the first
parameter we're passing through is an
object and this is going to say what we
want to find so we want to find the
record with a name of Mario which is
this thing yeah then we pass through
another argument right here this is a
second object then we passing the
parameters we want to change so we want
to change the name parameter what do we
want to change it to Luigi okay cool so
that then my friends is going to go out
and update this record with a name of
Mario to have a name of the region and
again this is asynchronous meaning it's
going to take some time to do we want to
use dot then to say we only want to fire
this function right here when this thing
is complete okay cool so in here what do
we want to do we want to make sure that
this thing has worked so we're gonna
find this record right here
and we're gonna make sure it has a name
of the region so just to change it up
and we're going to use finding by ID so
we know how to do that we've done it in
a previous tutorial it's Mario Kart this
is the model dot find one
and then we're going to pass in the
underscore ID and that's going to be
equal to the car dot underscore ID
remember this car variable is from up
here this variable and we created a new
instance of this record right here so
when we created that Mongoose gave this
and underscore ID property which is this
thing right here so when we saved it to
the database that ID went with it so now
we're finding one in the database which
has that ID okay
again asynchronous this thing so we're
gonna use dot then to fire a function
when it's complete and this function is
going to contain within it the result
okay so it's going to return this record
to us that it finds in the database then
we want to assert that this result has a
name of luigia because we changed it
from mario to Luigi
so let's try that assert and we're gonna
say that results dot name is Triple D
balls to the Windy right so this should
hopefully work and we just called dawn
at the end to say now we're done with
this test all right cool so let's save
this and run it by saying NPM rule test
and we get an error for some reason
let's just have a look so yeah one
failing updates one record in a database
okay and that's because I've spelled
assert Ron so if we change that to a T
we can save that now and one thing I've
just noticed when we copied over this
before each and create a new character
this was from the save method right here
saving test where we needed an assertion
we don't need that assertion in anymore
over there we're just creating this
character and saving it to the database
so we can use it down here so we can
save that I'm also gonna go into the
final test and delete it from there and
possibly it could be in one of these
other tests
yep the deleting one so we'll get rid of
it from there as well and then in this
updating one we've changed this to
assert instead of sir and now let's run
it again
make sure this works NPM run test
all right and now it's all hunky-dory
we've got five tests which are all
passing so this updating records now is
fine so there we go that's how we update
records in the next tutorial I want to
talk about something called update
operators</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>