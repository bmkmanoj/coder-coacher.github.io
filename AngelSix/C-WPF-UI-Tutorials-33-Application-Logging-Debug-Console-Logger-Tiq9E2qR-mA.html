<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C# WPF UI Tutorials: 33 - Application Logging Debug Console Logger | Coder Coacher - Coaching Coders</title><meta content="C# WPF UI Tutorials: 33 - Application Logging Debug Console Logger - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/AngelSix/">AngelSix</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C# WPF UI Tutorials: 33 - Application Logging Debug Console Logger</b></h2><h5 class="post__date">2017-12-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Tiq9E2qR-mA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we are going to add a
logger to facetted awkward we're also
going to move this core project into a
dotnet standard now and start preparing
this for growth for you know adding
multiple modules file handling database
handling settings theming all that kind
of stuff needs to start having some kind
of structure so we're gonna start
implementing that and adding more into
the IOC so in order to do that first
this project is currently just a dotnet
framework class library which is just
only works on windows and even though
the UI only works on Windows ultimately
this core is going to end up being used
on Mac Linux Android iOS everything so
we want to convert this now to a dotnet
standard so pretty easy you just
right-click on your solution file go to
open folder and Explorer
I'll get you here so this is a project
we want to convert so I find the
simplest way is to simply close down
Visual Studio then if we rename this
folder to to just sort of got a new name
open visual studio back up and then
we'll make a new project here and click
create new project at the bottom don't
let standard don't let standard class
library then we just browse and we go to
our Fassett a word application in the
source folder and select that as the
folder and then give it the same name as
the previous one so set it up word core
and you can leave that create directory
for solution checked I believe yeah
because we are going to delete the
solution violet create so click OK to
that that should make was a dotnet
standard class library
with one class which is all fine and
then we look in the folder it's gone in
here and in fact it so we didn't need
their create folders you can uncheck
that I'll just close down that solution
now delete the solution file that it
made for the.net core it clicked enter
instead of second close that and then go
to here and this is the project we care
about at the end of file we really care
about so I just cut the CS proj go up
paste it into here for now delete the
old one rename delete only just create
and rename the old one back so that
whole process all we've really done is
made a a CS proj file and i guess if we
open that and look at it you'll see how
tall the really is you could just open
the text editor and paste this in and
save a file SCS proj but we want to make
sure this is always there you know what
the environment creates so in six months
from now he likely won't have that
structure so tomorrow me a good idea to
just do a text edit document unless you
watching this video fairly live go into
the core folder delete the old CS proj
let's clear up some old folders delete
the bin folder flip the object folder
ideally the properties folder settings
has got nothing in it delete that you've
got that I think I just created that
folder body Weaver will have to riad
anyway I think what we'll leave that in
there package config I think is the old
dotnet stuff so yeah we don't need this
file but we do need to remember to open
these so keep a reference of those open
I'm going to delete the packages file as
well so our solution don't guess we
don't keep a reference there it's not
open Chuck this into notepad first let
me just paste the CSS profile into here
the.net core the dotnet standard one we
just made keep a reference of these in
notepad so we can reinstall them and
then delete the packages not config and
now it's really going to have converted
the whole project to a dotnet core
project and our solution file of still
reference 6 is the same
name in the same place so without having
to do any major amount of work there
this should have now already converted
our core project to a dotnet standard
project the only step left really is to
re-up these they're Fadi the an injector
property changed and the Jason so you
can see it's really found the project
right click manage nougat packages and
then Jason we want so that's already top
of the list install that and accept then
we want heed body so we'll install that
you have to install 40 you don't have to
watch install 40 first then install 40
dot property changed
otherwise the has been renamed no just
type in property changed or Fadi and so
if you add this one second
otherwise the Fadi will override this
file sometimes and that's where people
get issues if it does once you've
installed 40 and Fadi got property
changed you can just make sure the file
has property change in the document
otherwise you know it won't all yeah UI
updating won't work and then the last
things ending yep and with those in we
should have now converted the project to
add on a standard class library if you
will so that means now this this this
technical amount of code in here
it should be usable on every platform
and it uses an inject so we've got we've
just installed a higher version of any
injecting this project and the facetted
word needs updating so right click on
your for set a word manage nougat
packages
let's just update everything so select
all update which you should really
probably do this every every now and
then to keep your packages up-to-date if
you get this warning they only exists
don't override this is what I'm talking
about with this
we were file is trying to update 40 and
40 by default doesn't have the property
changed in so this'll simply remove the
property change so click note to any
question about overriding your your Fadi
Weaver's file that's all updated fairly
painless in fact massively paying loss
compared to what you used to have to do
now we have a dotnet we right-click on
the court properties you'll see now
we're a dotnet standard library not a
dotnet framework so we just make sure
our application still works and it
should just function all the same so
there's the application click stuff go
to a login screen so all seems to be
working you know very basic test but
pretty sure that's ok so like say the
benefit of this project now is that it's
dotnet core so as we come to migrate
this we can have this running on every
other platform so I want to move as much
stuff into the core as we can so that
this project is purely Windows only UI
stuff which we've we've done for the
most part already we've kind of capped
that separation so the Styles the pages
the ioc is something implementation of
the UI manager for this UI images fonts
dialogues i think nearly everything in
here anyway is very specific to WPF
because that's the point of why we did
it anyway
so there's nothing really I don't thing
to move we're just bear in mind that you
want to keep as much in this core as
possible and only the WPF specific stuff
in the word project so that migrate it
will move on to logging so by logging I
mean in your application you want to do
something and you want to do say log or
say log or log something can you expect
this to go to several places so if you
do bogging you probably want not to go
to a kind of debug output in like here
so these are all debug messages of you
well you want to see your own debug
messages for your sanity in your
development process makes it easier you
might want to if you're on a website
habit log into a trace as opposed a
debug output
you want to log to a file if you want to
keep like year and a constant log of
your application say the application
crashes and UI let's go and find out
what went wrong and it's in production
and you're not debugging or you're
worried you're bugging and you simply
didn't have exceptions turned on so it
crashed and you weren't aware it expects
your kind of log that you write
everywhere to have give you some
information about that so the login is
literally as it sounds it's to log
information it's to use how you wish in
your application where you wish there's
no rights or wrongs it's it's about
creating information that you need or
that's helpful so to do that there are
built-in things in dotnet call there's a
built in for things and the dotnet
framework says third-party packages the
again you know me I like to just make
things logging isn't that hard and we're
gonna get done in probably an hour so
we're just gonna make our own again some
people that might say well why are you
bothering to to make your own I'll kind
of say well why not when it's only an
hour why rely on something else and not
have any access to source code when you
can just make your own certainly I'm all
about making use of existing technology
and not repeating yourself but not going
to the point where every little task in
your solution is oh I need lot you know
add this package I'll need to write an
image or I'll make this package I need
to resize an image I'll add this other
package and soon you end up with your
dependencies list of things you rely on
grows huge and then say dotnet changes
or this company goes our business and
the delete all the source code or it
simply becomes incompatible all of the
book if it's not your code you've got no
control over that so if you have a
project with 5060 dependencies your
chances of a failure or a bug out of
your control of exponentially larger so
certainly make use of packages when it
saves a hell of a lot of time but when
it's talking about saving an hour's
worth of time honestly don't bother
plush will learn how to do that task
instead of you know wondering well how
do I write a large I usually use this
package and this does it for me well
that's not knowledge is that that's just
making use of packages so as a developer
I always crave the knowledge I'm not
into development for I just want to get
the end product I want to understand the
process along the way
hopefully people watch in this video
I've got a similar thought pattern that
you're here to learn you're not here to
watch me install a login package manager
so basically just get right into and it
shouldn't be too hard so we've got IFC
and the point of this IOC is it's called
inversion of control or dependency
injection and as this project grows
you'll have a lot of things where we're
trying to separate the concern of things
if you will so one of these things now
would be logging and ultimately as a
project grew you probably have a
complete separate project for Fassett o
clock or for set or logging that handles
nothing but logging and there's no idea
about anything else in the project to
know all the projects or anything and
that's where this dependency injection
comes in we'd some of the GUI manager
this UI manager was self-contained and
knows nothing about the UI itself nor
does anything consumed in this interface
have any idea what the UI is but it does
know that it wants the you are to show a
message and this is the info and then in
the WPF application we implement a UI
manager that basically shows a dialog
message for us so it keeps the
separation of concerns very clean and
everything in kind of modules but again
you'll see this being more beneficial as
it grows bottom line is if we make an
interface now for the logger then we
implement the log and we make an actual
solid concrete class like this u UI
manageress that's the concrete class the
implementation and this is the interface
so at any point in time our application
code dump the logger that we implemented
I'm making you one and the implications
of that are none of the rest of the
project will get in any way in effect
either of you will so if the logger
failed or we remove the law group
completely and replaced it with a blank
one that does nothing the rest of the
application or function fine because it
was never involved directly so again
that's it's a concept that you'll you'll
see come together as we get further on
so let's just get into it and then I'll
explain it more at the end of the video
so just right-click in the interface
ease class in IOC and we'll make a new
class called I log factory this factory
is going to be as an in kind of suggests
it's a factory it's going to churn out
lockers if you will it's going to
hold up all the workers so you're going
to have multiple loggers and you're
gonna have one that's lively safe logs
to the debug logs to a fire logs to a
trace maybe even log goons live direct
with your website but all of those
lockers in the cells need to be grouped
together so that your application can
simply say just log me a message it
doesn't care about the underlying
loggers that dope to all these different
places so the log factor is kind of a
place where you add all these different
loggers to it so holds a footage of
loggers to run the messages or the user
and in this interface we will have some
events so our application of our
consumer it would want to say be aware
of a new log so we haven't made this yet
but we'll call it log factory level
so make a new event here I'm will call
it new log so fires whenever a new log
arrives so this is kind of for anyone
that wants to hook in to our logger and
simply be aware of when a log arrives
maybe you want to pop something up in
the UI independently or you know
whatever you want thus you just you want
to be able to be aware of when there's a
lock for you know any reason so the
first one the string will be the message
itself the actual log message and this
will be the level so the log level which
make a new folder in core because for
now we're not separating this into a
whole new project just for the login
we're keeping it all in calm we can
separate it out as it grows and we can
call this the call it log factory level
and the reason we have the log factory
level and log in here in its own folder
but the drag and drop turns really a
nice you move
one picks on it drops the reason this
log Factory is in here is because this
is the interface that the IOC needs to
you know this is what logger ultimately
needs to implement and this is the
implementation so log factory level is
going to be just an enum so this will be
a public enum log factory level the
severity of the size bottle right here
of the log message and in here you'd
have what are all the log levels will
have another zone list we can find
somewhere we've got debug sent tools
will basically following where are we
debugging environment general no
projects and solutions I will find in a
minute so many options build and run
there we are
so what kind of mimicking this where you
got quiet which I call verbose you know
well quite effectively say nothing we
don't ever want to say nothing that's
pointless so I got diagnostic which I
call verbose which we could call
diagnostic or alcoholic the Bosa just
means you know excessive detail then you
got detailed which I'd call probably
informative maybe so it's up to us we
can follow this exactly but all it means
as the the more detailed the further you
have down this list to hear you log like
more more detail and effectively less
important detail so debug I'd call you
know like logs actually everything so
logs everything that's kind of when you
debug in a problem you're trying to find
a problem how much information you want
to be given so this is like you know
give me everything so I think it's
stepping up from that I'd say we have
the bose which as i mentioned this you
know log a lot of information so boggle
information except debug information
that's like really really low-level
stuff
then we'll step up one probably of
informative so logs all informative
messages ignoring any debug and relevant
messages step up again we'd probably
have you could have normal gas logs only
warnings errors and one errors and
standard messages and then critical and
again this is up to you this is I'm just
making this list up as a go you can make
any kind of level the key here is the to
make the code work easier you because
it's an integer you can simply then say
less than you could save you locked an
informative message and we wanted to
output it a verbose message or above our
codes are start to say if the messages
value say this one or rather than for
message was that messages value three is
greater than the log level or greater
than equal to then log it so if you put
your most detailed output first and work
your way up to you know practically
outputting nothing then you know that's
how it works the names are up to you
whatever works for you so the critical
log only critical errors and warnings no
information on the general information
and then we cut out the last one which
is nothing I guess the logger will never
put anything as there's my list
and I think that's again there's nothing
special about this other than I've
simply made the the most noisy log the
lowest number and worked my way up you
can call these like say whatever you
want so there's my log level we've got
an event that's gonna output you know
fire whenever we get a log so that's
that then back to properties now and for
this we will want so the log output
level and ass get set is now this will
be the what we were talking about if you
you pull in your log factory new setup
how much information do I want to log
this is the way you set it so you set
this to informative only informative
messages and below will get logged out
the level of logging your output what
else do we need we will have some
property what method so as I mentioned
this is a factory to log to certain
loggers so we want to wait to add
vlogger and then we will need an ilogger
which we'll have to make as well as the
specific logger to this factory the
logger she's not very informative but
the desert is the logger we will make
the logger in a minute as well as adding
the log we'll need to remove the lock
humor is the specified vlogger on this
factory function wise I think that's it
for the functions now when we do come to
in fact no there isn't obviously there's
the main one and it will be able to log
a message so when we log a message we'll
have the message itself we'll have the
log factory level which we can also
default to will default to probably I
don't really know I've got yet
informative detailed
criticals the wrong Anna Hansen Audia
informative normal probably have just
normal as the know some informative
business done that just I think that's
about right in the middle then that's
all you really need to love a message
but I'm also going to have a source of
where the log message was coming from
which will default to a blank string
will have the file path of this is all
kind of detailed information so say we
logged a message from facetted awkward
in the UI manager and in the show
message we kind of from fields
throughout a log-log something and from
that it knows that it's come from the UI
manager and facetted awkward in the show
message function at line 20 so you kind
of want to you can gather that
information automatically so we can do
that so I'll add the information we
expect which is the origins and sort of
where it come from the file path and the
line number and and will default them
all so they don't need to be provided
but then you'll find out in a min one we
make a log we implement this they will
get pulled in automatically anyway so
that means we can love the message loves
this specific message
- all the loggers in this factory then
the message the log a level on the
message being locked the method function
this message was locked in the code file
name this message was logged from the
line of code in the file name this
message was what prom so I think that's
our interface mostly done the other
thing we might want to do is now like I
said for now I'll do we can always come
back and add so we've got the log
factory let's not make a lager because
we need to be able to now here we can
again when the splits up into multiple
projects we'd have the implementation of
this and the definition so it's easy
enough to separate when we do move out
so now what should be we can shut the
interface in here directly or in fact if
we chop it into IFC because then the IFC
whilst not really IFC because it's the
now leave it in here for now again we
can drill this around as a project grows
but basically this this would be a core
interface this wouldn't go into the
logger project if you will but we're
talking in this folder just for now
because it's also not an IOC directly
you don't inject a logger into the IOC
you inject a factory which then consumes
loggers so kind of that's the details
that you only need to worry about right
now that's just I'm trying to think too
far ahead when the project isn't that
big yes I've just simply got that
experience and I know ultimately where
this has been done so ignore my kind of
just babbling on about the location of
this file for now just place it there so
a logger that well output or handle log
messages from a pile of factory
so each logger I guess will have just
really the log message as all it really
has bothered about so this will have
just a log and it will have the message
to be logged and the log factory level
to be logged at and that's all this
needs to know about because the message
will contain all the details about the
position what happy that's not for the
logger to be concerned about the log
factory will handle you know where
they're where the origin and things work
and combine it into a a message
containing that information so handles
the loved message being passed in and we
could also have each logger being
independently aware of what it wants to
log to kind of ignore but for now we
won't like say the overall factory said
they wants to log only informative
messages but we add like a debug logger
and the debug logger wants to always
always log them regardless you know like
basically be almost a Rogen simply
ignore the setting we could add that but
again for now we just keep it simple
so the message being log the level of
the bugs message and that's all the
logger will need to implement so now
we've got this interface for a log
factory and we want to now make a
concrete implementation so we will add
another class and this will be cool
we'll just call this base log factory we
can just you can make multiple factories
like so you can implement them in any
way because this is kind of a standard
one we're just going to use for our
application we'll just call it base the
standard log factory or
esatto word logs details to the debug
console trace and log files then you can
just click on I log factory control dot
and enter to implement all the the
goodness this is a property public
properties get rid of the and then even
though the interfaces got the comments
so you shouldn't technically need to
move them over I always move them over
as well the reason for that is one come
to automatically generate our developer
documentation from these comments it's
it's right there when people looking at
the base log factory document instead of
having to go into the interface as well
so we have the log output level then we
have public events we'll do the same
again we'll go to events in fact these
are back to front for my way of doing
things properties first and events and
that's the new log event in this case we
will instant ate it automatically that's
it you should be playable and that's so
that we can hook into it we don't have
to worry about initialization or locking
this if we simply make a a default one
in the first place that allows us to
just do new log plot sequels without
worrying about anything else
the a blog and get the comment from
again
and the remove miles off trip all these
comments in for now before we implement
the functions my mouse has died this
keeps happening lately my mouse likes to
die I have to turn it off and on come on
oh yeah and removing log rat so we have
all the comments from the log factory so
it can close that close all these other
windows for now come on close there we
go
so the ad lager we will need then in
that case you need to also keep will do
protected that's in case somebody wants
to override this logger and you know
improve on it so I'll have a protected
list of I lovers and this will be it was
quite loggers make a new list we will
also want to lock that list when we add
things to it so we will do a protective
object and more loggers lock so just
simply an object to lock to so we can
only add to the list while you know one
thing at a time so I can't end up in the
same logger in twice or any kind of
checks going on and lock for the longer
left tip keep it for that safe and then
now the a blogger which needs to lock
the list by getting hold of the object
we made just a standard object what the
lists it is read sleep and simply do and
log is to add and just add it to the
list
we could do a check there for if the
logger is in the list you know already
then don't add it so if you do if a
Milagros dot contains logger and they
just don't understand that logic so it
doesn't contain it then add it and then
for the remove is basically a copy and
paste for that iOS there we move Oh move
them all the way around because the
functions are not in the same order and
so add to the log remove from the log is
the same except now if the logger is in
the list so now if it does contain it
then remove it so that well I don't
remove any logo we want to add to the
list again nice and simple it's simply a
list that we've locked to keep thread
safe and you can now say Adam remove so
we'd simply make a new implementation of
or a new instance of the base log
factory add it to our IOC and then we
just call a IOC dot get a log factory
don't add logger to add any long as we
want by default we'll have this base
factory logger adding you know specific
loggers anyway and there but then it's
always available for you know our
application to add and remove loggers as
it sees fit we can actually leave this
base logger factory so it doesn't log
anywhere by default other than to say
the console like that
logs details to the console by default
and then jali the comment like that and
then the users free to add other ones so
our application could simply add more
loggers so that's what we'll do we'll
make this one just add console and then
we can
add other lagers manually in the
application throughout the add/remove
now finally we're down to the guts of
the operation this is where we actually
want to log the message itself so to do
that we mentioned we've got this message
the level so we can when a it gets along
with a lot of things you can dump in my
new lines like this too to keep it a bit
easier to see these so the user doesn't
have to pass these in there are special
Seashore seven I believe attributes here
called caller
I think remember name and press control
and dot that says using system run time
compiler services that will now by
having this attribute before the value
mean that automatically the value comes
in as a caller member name so where we
call the from so you'll see this in you
so I won't explain much more until we
simply use it and then you'll see what
happens there now you can see we'll have
caller file path and call a line number
so don't worry about these I'll show you
these in operation when we finish this
and you'll see what this does and so we
have that info now we want to basically
send that log message to each logger so
all you have to do is do em loggers dot
for each log o'clock and it will be the
message in the level
the only difference you want here a lot
of to all loggers but first we want to
do something with this piece of
information so this is where we say do
we want to tag this to the message do
you want that information in each
message and I guess if so how do you
want it to appear what style would you
like it to be in or we can just have
wings keep it simple for now and add it
automatically so that we have that info
it's really you know it's up to talk to
you what you want so I think minimum
we'll just chuck in a boolean so include
log origin details
and this well if true includes the
origin of where the log message was
locked from such as the class name line
number and file name and then bear in
mind that also needs to be chopped into
the interface it's not just in the base
log factories for you know any log
factor who make get rid of the public so
now we chord in this one as well say set
it to true in our base log Factory and
then what you can do here if the user
wants to know where the log originated
from so have log include log of origin
details then in two lines is a message
equals the you want the message
somewhere so pop it up the message at
the start end with a pot say - - or put
in brackets realism matter so if we said
it's going to come from the origin which
should be like the property name so the
origin should be like you know log if we
logged it from ourselves which you
wouldn't like say remove log just a
random name so be something like remove
log would be the function so you kind of
want it almost like that to show that
you're in a function you could have a
line well you will have a line them so
maybe 15 colon know that line number 15
maybe something like that and then you'd
also have the file name so you'd want
you don't want the full file path but
you'd probably at least want the file
name so this would be like base log
factory CS and I'm just trying to
visualize what would look right in terms
of this information so you probably want
maybe line 15 or you could have maybe
base log factory remove vlogger line 15
something like that maybe yeah that
looks ok you could also have that the
start instead of you want it and then
kind of opening out so it looks like it
or you can even lock to message use book
or a message with a new line which
actually isn't a bad idea might want a
message with a new line in there so that
goes that's there and then below it to
the message so in fact we'll probably do
that and you can do a return new line or
you can do system dot environment got a
new line like that to add a new line so
we'll probably how I was doing that and
then the message so then we replace this
part here with the origin replace the
line with the line and replace this now
this is gonna be the file path we want
the file name so for now until we add an
IOC to handle all file stuff for us
we'll just use file dot yes file name or
other path they'll get file name on the
file path and there's no kind of error
handling there that's my crash of its
normal things like that but for now
we'll handle that after we'll just get
this going and then add some kinda wrap
around there so if they want to add that
information to the start of the message
we now add it and then we log it for the
logger and then finally don't forget we
also want to invoke our events to let
people know that we have a new log so
then we do new log got invoke and do we
have because we always instant ate our
log we don't need to check if it's null
so just do new lobster and poke that
doesn't look very nice odds one arcs to
ok so let's change this this is a co-op
7 only thing
put this in parentheses call this
message level and this is now a topple
this is like an inn or the official name
as I guess but it's like an inline
topple which is just two two or more
items in unless without having to make a
class for it and that'll just give us
that benefit of now having a single item
here when it gets cold
details dot and then you've got level on
message so you got a bit more
information and to make it look like a
class still you've got you've got a
dilemma with tuples because you're
defining them so they look like
variables but then you're consuming them
so they look like now properties but
with lower case names so you can either
do string message message string level
level which is the way I'm gonna do it
which looks slightly odd because it
looks like you've got a variable in a
function with the name but it isn't
because ultimately then the caller as
then got what looks right to the details
so like it also stores us when you put
it in brackets and you define two things
inside it's almost like making a class
so you can think of this now as a single
variable and that's why we've give it a
single name here of details but inside
it create it contains these two
properties but it's all done kind of on
the fly typing without having to make a
class for such a simple thing I don't
know make a class to pass two variables
in but then I also don't want the the
nasty-looking invoke what you've seen or
Gua nog to so now you can see it tells
us it's expecting message and level but
a single item so you got to remake that
that on-the-fly class and I've taught me
how to think you do that by doing maybe
just open another one another yet
another brackets message level so you
kind of you create it in the same way
you define it in this instance so you
define the top or by simply putting
brackets around it and then you also
create one by just putting brackets
around as opposed how it maybe expect
which it to create like a you know an
inline object that way
so that just gives us nice rant Alex
answers you don't need to do that you
can leave it without the you know you
just basically take the brackets off
their brackets off their parentheses up
there and and you'd have it that way but
these are you know a nice and that's
used for things like that where you just
you don't wanna have to create a class
just for the most basic thing we'll have
to update the log factory to match to
our events you just wrap them in their
message level and yep that's it
inform listeners and I think that's it
for the log factory so I think this will
be fully usable we haven't made a lager
yet so let's just make a real quick
lager so this will be ad class it will
do just pull this base inside and let's
move the not the baseball practical for
the log factory levels so mmm then what
call us call it core for now so you got
the base log factor in there got the eye
lager and then this is now the
implementation here so add class
implementation so I've got the base log
factor you've implemented and now we
also want to implement a logger so we'll
do a console water for now a simplest
time father all really simple at this
point you just literally write the you
know write the message to wherever you
want to go now
so this will influence our ilogger
control dot to get that so logs the
messages to the console let's log then
we can say
loves the given message to the system
console a message to log a level of the
message so I know what to do that now
you just do console that log or rather
dot write line I'll get there in a
minute
oh yeah and then we write whatever we
want which is the message so in order to
then include the level we could do a
string that includes the level in maybe
a little brackets like that what would
also be nice if you have different
levels because you've got all these
different values the longest we've got
here is 1 2 3 4 5 6 7 8 9 10 moment so
you got like 11 character so we did like
a 13 character string of you will so for
do that you can do level dot to string
and you can probably do it directly in
the two string if I could remember the
format for Patti Bach aren't off the top
of my head so we'll just do pad right
and the total width of 13 with a padding
off using a space character so that all
them make sure that whatever message is
that whatever the string of the log
level is that the overall output is 13
characters with the padding on the wrap
being a space that means if this was
debug
that'll be 1 2 3 4 5 so it'd be six
seven eight nine ten one thirty so come
out like that which kind of actually
doesn't look that good so what we'd want
instead was removing that you'd want it
there so that lines up and that's so
that when if the message was then
informative it would be informative and
it'll level up so that you've got a
bunch of different log messages this
levels up so have we did
basically you'd want to now change that
to level let's drink a bit more tricky
because you don't want the pad in there
now
you actually want that hmm you want that
dot pad right and then plus the message
at the end
yeah so that will now make sure we have
spacing on that side so that will
include the log level so right message
to console so we have a console log we
have a base factory base log factory and
by default we said we wanted this to add
that base log factory so we need to
group the public methods into a function
so into a region other public methods
and then constructor default constructor
and then here it will do ad lock and we
will then do new console water and
that's all we need so now add the
console log by default and all we need
to do is now consume the base log
Factory so in our IOC we also have that
so we've got bound view models which we
do and then we've also got some I'd say
we want to move all the anywhere we're
binding anything right now
is in the application level so bind the
UI
find a logger so now do I love factory
to a new base log factory and we can add
to the IOC a shortcut just the same of I
log factory and leaders do I see don't
lock or I actually don't log raft it as
the logger and that's bound so now well
should all be that should be rather all
we need to add some lock so now in here
we could say on startup which we do a
log now the one things about mind is
awful you can't login until the
application has been set up where you
add the logger so you've got to have
after this point we're safe to log so
now you could say IOC dot log or log I
you just say application starting up and
this is your entry point into the
application starting up you'll see that
we have you can set the level which by
defaults informative which is fine for
now and then you've got the origin the
file path align them but we're not
specifying those because we're calling
this from on startup in app dot sam'l
dot CS at line thirty so when this calls
log and we go into here this is the
interface so in that won't be the case
it will be the base log back to itself
these special attributes then will be
prefilled with the location of where we
come from so if we put a breakpoint on
here run the application and presume all
our code works because I think we've
built it once yet but hopefully there's
a little just simply work so the
application is starting up so we f11 to
step into and click yes so it's already
found the correct base logger from the
IFC it's got the log has got our message
and our hopefully origin is still no
maybe we have to do
no on them so this hasn't filled in so
that might be due to the defaults which
is actually interesting that should of
filled and I wonder if it's because
we've gone from an interface so let's
call let's try to make a another method
of any just a test let's log 2 and just
copy and paste them I'm wondering
whether it's come from the interface so
it's lost its its detail of your will so
let's just now call log 2 which we can't
from there because it doesn't have in
the interface so for now let's just do
base log factory just because we know
that's where it is this is just a quick
hack to see give my presumptions right
of that not filling in due to it being
in the interface which doesn't have
those attributes which I'm pretty sure
it will be so it might just have to add
them to the attribute so now in here see
now we've got on startup the file path
the line number so we should then in
theory and there's no no issue with
doing this is to add these attributes to
the underlying interface core because I
don't think there's any reason you know
not to bother just tapping and so caller
remember name because it's just defaults
that you know the user can override but
by default that's where we want to
presume they come from so I'm quite
happy putting them in their file path so
this will be call a file path and this
will be call a line number so now our
original log method because it
implements the same stuff should now
work so can we do it let's back to the
IOC log o'clock
and then happy Levin in and now
hopefully we have the information so now
include log details we said true so the
message that says applications starting
off you should now get prefixed with all
our information so now our log message
looks like this hat dot sam'l CS on
start of line 30 application starting up
so then when we log that we do a four
inch in each logger this should then go
to the console logger and we should hit
this function where we're just told then
our logger just simply need to write
that message out so that should then
just write to the console which if we
look at the output here I think it
should show here as they go now you can
see it's logged out here and it's logged
it you know nicely one after the other
the only thing yeah that'll always work
because it the only thing with logging
on a new line is in case something
logged in between but this is one
message for simply it's got a break
point in it so you can log it however
you like you might want to do it in one
big line or you might want to break it
off the the only kind of semi downside
there is every single message right it's
got two lines now so if you wanted to
just dump on to one line you could just
remove the new line here and then we log
that this time you can see now goes on
line but you can also see the issue
there as your pre in fact we lost the
prefix didn't we
because now you can see it says
informative and then this info and then
in one line so I think it looks nice so
having the work is gone not I think it
definitely looks nicer with the new line
but now I've noticed that informative
thing that prefixes then also is fixed
at the start so we might want to tweak
the output style of this till we like it
so yeah got like informative and then
that so I'm not sure whether
whether I like that informative but that
the thing is there that choice is down
to the logger that wants to you know the
console Agra in this case what it's
gonna do with that info so we could have
instead of writing out this log message
here and you know prefix in it which
also adds a lot of space when we don't
want to we could write just the message
out but we could call up the console so
we could do reset caller once we're done
and call a console based on level so you
can do switch level case and then for
each one so critical you could do a
console dot set in fact console color so
make a default value and make it Y by
default or you could even just get the
you can actually do the bar on saw hold
color equal to console foreground color
save old color and then instead of doing
reset color which goes straight back to
you know the default completely we reset
e to whatever it was before we got cold
in case somebody else is also mess with
the console core so we could do the
reset that way save the old value
default log call volume refer tours is
going to be white we switch you based on
type so now the console call it is going
to be for critical or live red and or
you can even put that in a default
bullion case that's based on their
console dot foreground for now equals
our desired console color
and then write the message so now we
could say critical is red and we have
debug which is just you know the boats
information will make gray
I'll have okay American spelling
informative is white which is default so
we don't need to bother with because
we've set the default here in fact
informative as a bit surplus still
because normal is normal I guess or is
it no warnings errors and standard are
your standard messages I would say ah in
fact we had yeah I get a bit confused to
be normal an informative informative
kind of you know a bit more extra
information I often don't like how these
aren't in order you have to look at them
here for the order so you've got debug
which is the most detailed then verbose
so we should do this in that order so it
stacks down so debug is the most
informative then we have verbose so I
think this one to be very close the boat
is you probably want verbose be great to
be honest and debug which is like
develop a specific what do we do um we
interact dog great but then I might be
too hard to read and pretty sure worldly
what would develop if usually see we're
used to looking at blue I guess this is
the code I probably see the most when
I'm writing code so we'll make
developers this kind of blue and I don't
whether that will be that blue but we'll
leave it at that
so debug is blue verbose is gray then
informative the next one off
it would be white normal isn't really a
message you're gonna log here that's the
thing I think we've got one extra here I
don't think we need normal I think
informative as normal let's get rid of
informative necessarily get rid of
normal and do that that's better so
informative is white which we don't need
to specify its standard anyway critical
in fact we need one more anyway we've
got in fact we need two more because you
have critical messages and then you have
yeah that's a point we've technically
done this slightly wrong I think what we
want we've got the log factory level but
then we also need the log level itself
as in if you want to log out to
informative messages that do or other
yet informative messages I should take
this back a minute the informative
messages do information as well as debug
here so keep make yourself another class
small change book that's why I'm getting
confused so we're on log level as in
just a log level of okay what it'll make
that is on more file try that again in
fact let's just copy the log factory
level who named the cluster log level
change this to log level probably we
named the log factory level to control
our our log output level the output
details or a level of details to output
for a logger and then the log level is
the severity of the log message that's
another right message there so when you
log in a message you want to do the log
level as in what level what is this
message is it debug verbose informative
and then you are normally you'd have did
which have informative you could have a
warning warning should have change all
these descriptions general information
dose information developer specific
information they have a warning error
success and error success then you could
have critical to be honest is I'd say
critical is any of these three these are
critical pieces of information a
successful message an error message or
warning so plus them else critical and
then nothing you can't have nothing
because that's a specific thing for
logging so now what we want to do is
match this log level to the log factory
level so now if you want to output debug
info you output everything that's higher
than 1 or higher than equal to once
that's everything you want to output
verbose then everything below there you
want output informative it's everything
below there which still works and now
when you want to output normal I would
say normal is still a duplicate yes
let's get rid of that you want out but
critical messages only now so now you
want to output have as warns general
info you don't want to output general
info yo ya know general info
so basically critical errors and
warnings and success know that so now
you want it to be anything from four
five or six
so basically four is where you want
there so now if we do a check that
critical is basically from this point
down that'll work and then nothing now
we need to change to zero not one
because
nothing can then be less than debug so
if you say output nothing or rather no
that is right we want to go higher if
you want to output nothing
we have no you know message it's ever
that you know that level so by setting
nothing to hide on it then it will never
output anything so then we change the
log level and we need to change that in
the logger has a log level not a log
output level the I log factory has a new
messaging level again log level that's
fine log message there again this is log
level is the informative
I love level that and then base factory
will have it log level it will have walk
output levels fine which we still need
to obey we don't actually obeyed that
the event new log has to have it stolen
our log is fine that's done console
logger will then finally boil down to
having a log level which is what we
ultimately wanted and then we'll finally
now get back to where we were which is
to style each type of message based on
color so now we have a debug verbose
than we had informative which was read
pet which was white wire which didn't
care about then we have warnings errors
and success so I'd say warning is are
you sure really there's no orange
warning is K warning jello
parrot is red and success can be green
so I should now style the console any
color I'm sure I've missed something
somewhere with the change in log level I
don't know what it was we now have to
obey the log level so the log factory
has been told what log level will output
level to obey so we should obey that
when we come to log a message this is
where we say if we should not love the
message as the level is too low and then
here this is where we do the check the
if the level which bear in mind the
levels of log level and it's still an
integer so if this level we want to
output information and more detailed so
you want to check if the log level here
is less than the output level or less
than yeah basically so if the log level
is less than the output level we turn
and we might have to explicitly do that
maybe there we are
so you comparing an integer and that
should return then we can also break
point to check if that's the case there
so now if we were to output a bunch of
messages and of different styles so we
could have a debug this is debug and in
fact we do that
para performative success
warning then we put them in order so we
have debug verbose information warning
our success okay so if we run this now
we should get hopefully some colors in
the output window which we don't so this
is this will definitely work in a
console output because this is debug
output you know not a console window
we're losing color let's see if maybe
there's a visual studio extension I
think I remember one whether it'll still
work or even exist still MVS was it
called vs code obvious control these
might be as console colors or something
oh there we obvious and that was it I'm
sure the spotty PS color or something vs
color output I think this is Ron
Albert's were building debug window vs
color output got a restart as we start
and then hopefully this will give us
some nice call it output to the debug
window and then obviously you can also
do whatever you like but I thought it to
be nice just have colored output instead
of you know text writing whether it's
important or not it's much quicker to
see if the text had bright red you know
it's something's gone wrong you know
it's the standard you expect whereas
there the built-in debug output we're
not getting any of that so let's just
see now if this gets us what we want
hopefully it will so using the vs color
to call BS caller outputs extension
you'll notice you have these colors
which we can make yourself and you've
got regex patterns but by default this
the install with these so I'm gonna keep
it so that anyone installing this
extension gets the benefits of our debug
log without having to mess with them so
basically we made use of these colors
and the source code is so it made use of
these colors basically the source code
to the actual vs color output if you
look in the tests and then output
classifier tests you'll see that these
are basically the the prefixes they're
looking for to color them based on these
classifications so you know the build
message is called build head and that's
been defined by starting with that other
the build text the error the warning the
info all these are defined here by
default doing a debug at line with a
category all that does as outputs these
the category name with a colon and a
space that's why you get if we type
warning as a category we get warning Col
on the message and this detects that and
simply sets it to the warm class anyway
in the first place so all's I've done is
use that source code and then tweaked
the categories to match to the debug
I've set to information so that it sets
it to the info header based on infamy
like that and that's only blue which is
kind of what we want the boats and
warning or rather verbose and normal are
you know this which I don't really care
about so we set to nothing of you will
and this one simply never gets detected
as anything here so it stays normals
they stay gray the warning will go now
for the warning color the error will go
to the error color and the success we
use this one here to get the build head
you could use any of that that that that
that you know because this is built into
this the vs extension in the first place
but as I mentioned I wanted it to stay
standards when people just install the
VSA extension our debug Locker will now
get color so now when we build and run
these you'll see an hour output we now
have the debug which is dark blue which
is fine because it's not important
information anyway and I'm on a dark
theme and you can always highlight so
you got the blue for that the verbose
for both these bits of info and then you
got the warned in the area and the
success and that gives us then these
colored outputs which is the only thing
I wouldn't really want is this this bit
here the category one we don't want one
so one thing I might change here is the
debug logger maybe set it to if string
dot is null or empty category do one
thing else wrap the other in fact I
could probably fix that without doing
any of that by just making that no I'm
guessing then it wouldn't write it
anyway guessing the internal check I'll
have that built in so let's try that and
then that's it you've got a debug logger
which by default the debug there we go
did you default debugger has no color so
this extension adds of course so you're
not losing anything by you know not
installing the extension but then if
people do decide to install that
extension
to get the benefits of Cola in our code
the console logger will give you color
because we're setting the color so we're
in control of that like say you're free
then to add a file debugger and anything
else that you want to these debugger so
the next one will do now is log into
file so hopefully this was useful I know
it's been a bit of a roundabout and here
the end but we figured stuff out and and
now it's it's usable</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>