<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Web Development: 09 - JavaScript Basics Responsive Top Menu | Coder Coacher - Coaching Coders</title><meta content="Web Development: 09 - JavaScript Basics Responsive Top Menu - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/AngelSix/">AngelSix</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Web Development: 09 - JavaScript Basics Responsive Top Menu</b></h2><h5 class="post__date">2017-11-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nQJDWD5lhO0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're gonna carry on
from the last web video with the top
menu using DNA web and we're gonna add
the JavaScript now so this is basically
an introduction to JavaScript just
carrying on from the previous video
though so we're gonna do it actually
practical we're not just going to talk
through we're gonna basically make
something usable from it so you're gonna
learn fast you're gonna breeze over
basics if you will just so we can get
something working and you're just gonna
learn it in the field of UL the same way
as I teach everything else so just gonna
create a new folder just call it psyched
and because in the last video the top
menu I've already committed to DNA web
we can just type in DNA web in the
address bar of the folder this will open
up as well I've got a new version of DNA
web that are released next week that
automatically opens Visual Studio code
in the folder that you running from if
you select it in your configuration
which by default it's on and then in
here I can just tab new templates fabric
modern one and then press ENTER twice
that'll pull in the website so I've got
this one book of also got a fix I know
these pops up sometimes like a race
condition let's just run that once more
DNA whatever it's already created the
template for us so we don't need to
recreate it and we have here's the
website this is the top menu that we
created in the last video and also now
in the template we've got the JavaScript
working here so you can see this is what
we wanted to do you scroll down and all
he does is apply the styles so I'll show
you what happens we spoke about in the
last video but you see you catch up you
see as we scroll you've got the class
that we made this top menu standard and
as we scroll down and then adds a
reduced class to it that's what we
wanted it to do and that comes from this
attribute we've added to the HTML day to
scroll down class and we tell it we want
to add the class we'd use 20 Scrolls
down so when you scroll the page down
the JavaScript simply adds the class and
you can do that manually
so you double clicked on your class like
we did again in the last video you just
added a reduced class pressed enter
you'd see the same thing happening so
that's all the JavaScript does in terms
of the scroll down so we're going to
make that and then also when you are on
a smaller device and you get this
hamburger menu when we click this we
want to let's just go to show more of
that when you click this you want the
menu which again we should see when we
click you see it adds an expanded to the
UL class and again we styled this so
that when it's got the class expanded on
that it will automatically have
translate set to 0 to bring it back in
and again we did the HTML and the CSS in
the last video so the way this is
actually animating in is not the
JavaScript the only thing the Java
scripts doing is when you click this
button it adds an expanded class which
again comes from this data top menu
class and when you click it again it
removes it so it basically toggles it on
and off so that's what we're gonna be
doing with the JavaScript so that's all
it does you scroll down it adds a class
and you click a menu and it adds a class
that's basically what we're doing so
fairly simple but you'll see it's still
quite a lot of JavaScript to do that so
if you've just created the new folder
typed in DNA web P and press Enter and
then in DNA web types new template
fabric modern one you'll get this
template up and running you'll get a
visual studio open if you don't have the
version yet and you're running better to
your code just go to the folder
right-click and select open with code
and that'll do the same thing but now
DNA web then the new version and a week
I'll do that for you
and that will open up all the files
which is basically just if you go to the
site again same as previous videos
you've got source HTML sass and what
we've got the JavaScript that's working
right now if we were to just go to HTML
and look at the index page you can see
we've got the JavaScript here
so we have this javascript file here the
other thing in notice I've changed back
to my Intel machine because that's
thread right there AMD was really slow
and now we've got a fresh install of
Visual Studio code you'll notice we
don't have any HTML hints in here so to
fix that you just go to preferences
settings then on this side I think you
tap in here now think by our files dot
associations and then I think it's just
our dhtml and coal one and then HTML and
I think that's all we do and that'll
mean any file ending in da da HTML
should be highlighted as HTML not sure
what that's complaining about
it's just warning me I guess expected
comma Oh expecting comma there there we
go so I think though it's instant so now
we've got HTML highlighting so in this
template we the difference between the
last video in this video is is not
really anything the CSS we wrote is
still here it's just been put into the
actual fabric template engine so the
list style or ul horizontals gone into
here the menu has got the horizontal
menu style and the top menu has got
basically the top menu therefore keeping
it above I'm pushing the content below
and the standard menu here so it's all
basically what we did in the last video
this just been moved around and cleaned
off and embedded into our fabric
template system so that other people can
create things instantly going forward
that's the point of it and then the
other thing that changed is basically we
added this javascript file so if we
remove that javascript file and we now
see we're back to where we were in the
last video where nothing actually
changes nothing happens when you click
so that's where we are and now what
we'll do is we'll make this JavaScript
so if we went to the web root where the
outputs are
you'll see there's a jus folder here the
DNA fabric and this has got the original
code in there just gonna delete that
because we're gonna make it and then
inside the J's folder which again if you
want to look at it visually it's just
this is your web root assets and then
there's just this JavaScript folder so
if you don't have one just make one and
then in here we'll just make a file so
you can just go right click new file but
I simply just do it inside of measures
to your code ctrl n to open new window
ctrl s to save and then just go off or
into web root assets JavaScript change
the save as tart to all and then in here
we're just going to call this we need to
split the JavaScript into multiple files
to keep it clean and in future it like
in the very near future we'll move to
touch grips so this can be a lot more
organized and compiled and what-have-you
similar to sass and CSS well for now
we're gonna write your javascript so
this is your first javascript file so
we'll call this DNA core jas because
javascript files ending doc j/s then in
your index page in here if you just run
DNA web you should get the updated live
variables you should have now be able to
go
Dola Dola explanation and I think it's
jeaious link Dola Dola save look I let's
see live variables I haven't pushed that
one yet so I'm gonna make one for LA so
I will add that but for now just type in
script type text/javascript and then the
source is the assets folder the J's
folder and we've got one called DNA core
to this file if by the time you're
watching this video you'll probably find
that doing dolls are explanation j us
link dollar dollar and saving will be
placed with this because I'm going to
push a new version of the live variables
to include this quicker way of typing
somewhat when you do dollar dollar
information CSS link and save you get
the you know the CSS sheet link
I'll be doing the same for the
JavaScript link I just forgot to push it
before this video so this is how you
include a JavaScript file you simply
point to it similar to the CSS you do
script type as text forward slash
JavaScript and so I'll see which done
for source is then put into the file and
now when we run this or rather it's
already run so we move that over and
have this here you can press f12 in
Firefox if you using it and go to
Network now we just simply added
something and save I'll see the page
reloads and you can see their DNA core
it's found the file because has gone
green so we know it's got the file if we
were to give it the wrong name so if we
were to give it back or to and save
you'll see it refreshes and you get this
big 404 that it couldn't find the file
so we know it's found the file by
looking at Network and then refreshing
the page and you'll see it's loaded
there and 200 means basically okay in
HTML which balances and you can see it's
got a script JavaScript but it's no file
size so that's linking the JavaScript
file now the next thing we want to do so
I move this over I've noticed these
don't move together for some reason as
well when they should so JavaScript will
get started with a real basic look this
is what I always do to make sure
something's actually alive and working
type alert open brackets and you can
either do double quotes like C sharp or
single quotes so I'll stick with double
quotes because it's the same as C sharp
high and then a colon you say you finish
soon you should just page with Matthew
reloads you'll see it says hi so you
know this is now running because you're
getting the the pop-up dialog so there's
your first for the JavaScript and that's
kind of how we always start to make sure
the file is actually loading and so a
bit about JavaScript this isn't a
compiled language like C sharp is this
is exactly as is so this is sent to the
browser and your browser reads this
exact text file and interprets you know
the content so it's an interpreted
language not compiled one not that that
makes much difference bring general what
you have to consider is JavaScript is
or wasn't rather very efficient it's is
certainly got way way way more efficient
for example this entire Visual Studio
code is written in JavaScript
every single thing we're doing here is
actually in JavaScript but in general
JavaScript was never meant to be used
for applications it was used for very
basic things and with it not being
interpreted and with it being fairly in
my eyes are messy code language and not
very well structured certainly compared
to c-sharp
you just have to bear that in mind when
you're writing the JavaScript so one
thing you'll discover simply by the end
of this video and doing two really basic
things in JavaScript like the scrolling
down and the clicking it already starts
to become very hard to maintain and keep
clean in comparison to C sharp so we'll
learn JavaScript but we'll move almost
instantly to typescript
which is just a basically you can still
use JavaScript directly in it but it's
just a way of cleaning up the code
making it a bit more nice friendly
adding features that are a bit more like
C sharp
so we'll organize this as best we can on
this video and we'll go through but bear
in mind that it's not as clean as
c-sharp what will make will add touch
gripped will start structuring things
thinking about it and we'll get this as
clean as possible because when this
grows it's going to be hard to manage if
you are going to grow JavaScript to a
large application like when we do for
set a word we won't be using typescript
will move to bridge net and that will
actually make us able to write pure
c-sharp code that compiles to JavaScript
so you actually use Visual Studio code
and you can add all the features of the
very latest visual studio and c-sharp
and it will compile to JavaScript for
you but this is why I'm making this
website firstly you'll in the underlying
language instead of just learning the
higher level so that's not talk let's
just get straight into it so we'll start
with the easy one which is clicking this
button to do something but we'll set up
some fundamentals first so nice and easy
a variable just like C sharp is var
we'll call us unload callbacks and we'll
make it an array
so this is an array of callbacks or when
the page is loaded and the VAR is a
keyword like c-sharp but a note here
that this is global so everywhere in
every javascript file this is accessible
that's how it works
again don't ask me why don't worry about
it too much just bear in mind that it's
one of the things off be careful with
JavaScript if you're writing pure
JavaScript we will be moving to
typescript which will get rid of that
issue anyway but quick note on that this
is now accessible anywhere this is how
you make an array simply specify an
array and then we're gonna make a
function so well we're not gonna make
yeah we are going to make a function but
what we want to do is instead of just
loading javascript so basically when we
typed alert and we said hi in your
master said well when did that code know
when to run you know just appears when
the page loads and it runs instantly as
soon as the scripts loaded them because
the scripts at the top here then it's
loaded effectively before the page is
loaded so you'll you'll save the file
and you'll see the page doesn't exist
yet it's just the background then we
click OK and then the page is loaded if
we were to move this down to the bottom
of the body and save just the page loads
and then the message pops up if we were
to move it above to before the grids
there and save the menu load so the
point of it is that the JavaScript
script file wherever you include it is
when the script actually ends up game
run so if you put actual code here this
gets wrong at the point in time of when
it's load is directly in line and so
that's another little quirk what we want
to quickly do is get a kind of similar
to c-sharp when the application first
spins up and you get your constructor or
you static main function you know the
point in time when your applications up
and running and you want to then do
something at the start so in JavaScript
you class the start as when the page is
loaded and and I want it when the page
is fully loaded so any HTML Xin so for
do that we want to hook in to
a document which is you know the main
HTML document dot add eventlistener and
we've got some hints here in vs code
helpers so this is a built-in thing in
JavaScript document which is this body
add event listener M is basically a
function that you call in here you can
specify specific events and you can see
there are loads of options here showing
you you know all the options you've got
weird fact I don't think it's all the
options no it isn't but you know it's
got a good selection there and then here
we'll pass a string and you have the
type is exactly when it's Dom content
loaded and that means the document
object model which is the page HTML page
when the contents loaded so when all
this is loaded a second part of that is
expecting an actual function of what to
do when that happens so this is similar
to co-ops when you pass in a function
you know a task or a method into a
function itself so then we do function
and open and close and then make curly
brackets and end it with a semicolon so
you've got the function here that we're
calling parameter 1 is is the string Dom
content loaded and this function here if
you were to cut it out you can see it's
just basically it's the second parameter
and you define the function inline like
this and now this gets called this part
here gets called when the contents
loaded so if we have the alert back in
here that's as high and bear in mind at
the minute this is in the top of the
file we're gonna have to save them both
first so save that I can all that a
minute so we're at the top of the file
and you can see that that loaded with
nothing loaded but now instead of
running it straight away we wait for the
page to load and then call this when we
save now it doesn't matter where we
place the script this code is now
running once the page is loaded so even
those at the very top or even if you
move it to why we did before say before
the sample grid and save the sample
grids loaded because our code now
is waiting for the HTML to towers that
it's loaded and then we run this event
so this first bit here is listen out for
page content load event and then here
now to make this more useful we want to
actually allow you know anywhere else in
JavaScript to hook into a simple onload
event and that's what we'll make so make
a function called process onload which
basically means this should run once
protest anything that should happen once
the page is loaded and then we'll make
that function so to make an actual
function similar to we've just done
there same thing function give it a name
process unload
just like c-sharp there's very little
difference you don't specify you know
public or private or things of that so
it's a little bit different
but in general it's it's fairly similar
so this is again process any unload
events and also we want to do in here is
loop every item in this callback that
the user can add and you'll see I will
add to that in a minute
so these are going just be an array of
functions we want to call every function
in there so to do a for each it's very
similar again to c-sharp so far I equals
0 is less than on follows call box link
I plus plus and then in here we'd want
to do the on call back on callbacks
access the array item and then invoke
that functions by doing brackets around
it to basically so that I think is all
we'd want to do there
let me see
do we want to pass anything nothing
that's fine so if we then make another
function that somewhere else can now
call just called unload and in the
unload we have them passing in a
parameter will call it callback and
that's going to be a function this can
be called to add a function to be
invoked once the page loads all you want
to do here is add this callback to the
West so onload callback stop push just
the way you add to an array in
JavaScript and we'll push the callback
in so that's similar to do in like in a
job in a co-op list you know list ad so
it's an array dot push its that adds
there so now if we want to finally make
use of this kind of the system here all
this is purely for giving us the ability
to say unload so now we're in another
file which were not would just be like
what presume we are we then do unload
and we just pass in a function and now
we can make this call like this to do
whatever we want and we can say alert
welcome have we saved up hopefully of
doing that there as you welcome and now
the benefit is all for your code because
we'll need it multiple times on all the
JavaScript variety we can just say
unload and then you could say welcome to
and save may got welcome welcome to so
the benefit of doing this instead of
simply placing the code directly in here
or everywhere you want to run something
when the page loads instead of having to
do this function and try and remember
document.addeventlistener and all this
lot here you can now just do onload so
that's what we've done that we've made a
function we've first lesson for the
document to load and then we've called
this function this function then loops
everything inside
the onload callback and basically gets
the item at that position in the array
so in this case that you know like the
callback itself and then we invoke it by
doing this so this is just like calling
a function like calling onload and I'm
calling it but the difference is we're
calling the callback that was passed in
so we're calling like this function so
that's what's happening there so loop
each item call the polar fallback and
then what you can also do instead of
having to remember this because I'm used
to in c-sharp just doing like you know
let's start for each and then looking
through the list so to get a similar
thing in the most up-to-date JavaScript
they do actually have for each book it's
not modern enough that the still
browsers that don't support it so we'll
make another function a helper function
that will bake into this core so we'll
call this function or each and we'll
have the array that we want to iterate
over and then we'll have a callback for
each item and then we'll pass in the
item to that callback
so we'll say helper function to iterate
over arrays and then we'll do basically
cut this paste it here will loop over
now in this case the array we pass in
and then here this is going to be a
function that is passed in but it needs
to know the item so we'll call the
callback or then we want to pass the
item in from the array so we'll say
array I so let me guide them pass the
items back to the function and now we'll
change this code here to say for each
first item is the actual array itself
and the next one is a callback which is
going to be a function and it's going to
have a parameter given to us called item
and then there's our little for each
loop again so it looks similar to see
show up so this will get passed in this
on callback then would be iterated over
here and then for each item in that list
it'll call this function here and the
item is basically this it's been passed
in this array I which is each item in
the array so now we can loop over each
one and then we wanted to call the item
itself so invoke the actual you know
invoke the callback because the item
from there is a callback so that's why
we're invoking the action save then it
still works so that's that's just a bit
of cleanup I can't resist myself I can't
just write ugly-looking JavaScript have
to try and clean it up and make it look
familiar to c-sharp so we've got a
little class here this is really that's
what I'd call it cause he's kind of all
your basic so your onload on class in as
a basic event your for each is like a
helper method process onload simply
called when you know you're actually
load here and then this is a function we
make for being usable so they can just
say you know they can do this basically
whenever it loads so we'll delete that
bit because that was just to show you
and now this is really the core class
that's got those functions in so that's
that done now let's move on to getting
this menu working which is nice and easy
so control and making you class save
change it to all and then we'll call
this one DNA double top menu J s go back
to the index page copy and paste and DNA
double top menu yes save that go back to
the top menu make sure it's working
again
yep so we have that
now in here we mentioned what we wanted
to do is when we click this hamburger
menu that we want to intercept to that
click and then when we intercept that
click we want to add a class so we go to
our menu here this menu icon we
basically want to add the class here of
expanded I believe it was I'm not that
one sorry get rid of a minute it was
when we click this icon this is the icon
itself I want to add the expanded to
this class here so you can see this was
already added so if we remove that this
is what you would have seen so what we
want to do with JavaScript is out the
class called expanded which we styled
for in the other video and that will get
us to this so in order to do that we
will first do an onload we don't want to
do anything until the actual page is
loaded so once the page is loaded we're
ready to do what we need now the
everything's in the page we want to scan
and try and find this element so the way
we'll find this element is and it's up
to you how you do this but the way I'm
gonna find it in this script is that
I've appended this hash tag top menu and
just a name of come up with the hash tag
basically means that the page won't we
load you'll see up here it's a hash and
this is an anchor to a page so this
would actually work if we were to the
point the original point of the hash tag
here is everywhere to make a let's go
down here and make a header and test and
the oh what is this length the ID so the
ID would be say top menu and save and
now if I click I have broken things
why have I broken all this or have
enough oh yes because that's already
selected so if I was to now click this
menu here you can see it jumped and you
can't quite tell because he's at the
very bottom there but it's jumped to
this tried to jump to this head
down here called tests so if we were to
just do like paragraph and just put
loads of paragraphs in so it comes down
you can see jumps to test because of
this this hash which is you know it's a
hash tag but I guess it means the ID
he's looking for is top menu so that's
the original point of a hash tag in HTML
is to jump to an element in the page
that has an ID matching that name so the
reason I've used this he and the reason
you'll find that lots of people use it
in JavaScript as if your JavaScript
fails and you click this button and this
is a nonsensical name nothing happens I
mean it adds it up here but it doesn't
end up the refreshing your page or
crashing your page so it's kind of just
a nice fall back to a potential failure
so we had a reference to the link called
hash tag top menu and we can now at
least find this menu and again this
wasn't in when we did the HTML so this
is how it looked and rather I don't
really even just had that in the last
video but basically we would put hash
tag top menu so now we want to select
the element that has this or in fact any
elements because we could have multiple
places you want to click to expand the
menu so the first thing is then how do
we select this menu in order to not as
menu this button in order to intercept
the physical click action of it so all
you wanna do is find all elements that
have a hatred of hash tag top menu and
to do that we do or save our menu
expanders as what we'll call them equals
and then we will do document dot query
selector all which basically means
search with a CSS style selector search
the whole document for elements and this
is an exact CSS selector so you can use
this in CSS to do your selecting we want
to make the angle brackets which means
add a to attribute so if you want to
just select all anchors you just do a so
let's just start with all anchors just
catch them all on the page keep it
simple
then if you want to also debug this in a
way you've got full debuggers in Firefox
and thinking you can debug JavaScript
and stuff I didn't really bother using
that it's not JavaScript and complicated
enough to be bothered with debugging
well instead I do is I go to the console
and then what you can right here is just
console dot debug and you can pass in
the menu expanders and you can literally
save and dump out and you can see it's
dumped out a list of all elements on the
page a list of all anchors on the whole
page everywhere there's an anchor it's
found one so that's how I can add debug
hello it's a lazy method and we've got
proper debugging where you could
actually step into your top menu code
and you know brace like place a
breakpoint here you know and then I
don't actually use this some final find
the way around
well let's refresh the page oh do I have
to reload the page yeah so then that's
kind of hit a breakpoint my visual
studio step over I guess and then you
know that's that but like I say I don't
use that so I'm not going to use that I
just output to the console if I need to
so we can see there we have my new we've
actually managed to select all the
anchors throughout the page we'll leave
it like that for now we'll change it to
select just this one in a minute so we
can use the help of functional made for
each passing the menu expanders it's an
array reach menu expander we want to
them so loop each menu expander and if
you're first learning JavaScript and you
don't know the c-sharp and you haven't
watched my kind of start to see short
videos you probably want to watch those
because this will help you with you know
some of the things I'm not explaining or
saying about these functions is because
if you know the C sharp videos I've done
the kind of you know you get your
knowledge there about general
programming so we'll loop each menu item
and now this is where we want to listen
on the click events that we were saying
so
we want to listen on a flex event and to
do that again a similar to how we did
document addevent listener this time
we'll do it on the item so the actual
the anchor that we found part and add
event listener and in here it's called
click this time I should kind of expect
and you've got the function that you are
I'm gonna run here now when the ice was
clicked so again start with the basics
alerts hi and save and now when we click
here it says hi and I think we've got
anchors from where else apparently on
the page not sure where they are but
none of it matters were only bothered
about this first one so you click it
says hi so that's fine let's just fix
this query then now we know it works and
again this is just like a CSS selector
so to let's say you select the logo so
you could just say image all images and
when the image is clicked you can get
the hi so this is just the selector
here's kind of a CSS selector you new
top menu standard so because that's a
class its dot top menu standard and save
that and again now when you click it
anywhere in the top menu you'll get the
you know they're the click event so
think of this as purely just a CSS
selector and again I've done a video on
making CSS selectors so we want to now
select this specific hamburger menu so
to do that we're basing it on the fact
that we have a top menu as the hate ref
attribute so try access an attribute you
do square brackets and then just type it
so hate ref
that'll simply find any element that's
got href attribute regardless of value
but we want a specific value so 4 equals
single quotes to give me the volume
inside and then hash top menu and now
this CSS selector should select just
this item which it does and if you want
to check there's only one you can do the
console dot debug
menu expanders press f12 in the webpage
thing then and save this file and you
can see it's here so the node list is
one and this has got this anchor on it
here so you know you can see that's the
item and you can also click and you can
it'll take you to the item it's selected
with this little you know icon here so
that's the Hamburg menu selected then we
loop for all of them because you have
multiple and then for each one when it's
clicked we were on a function what you
will notice if you keep an eye on the
ill at the top it's got nothing there
when we click we show the high box but
then it also carries on doing whatever
the link was going to do which could be
to navigate you somewhere else so we
want to stop that from happening we want
to prevent that actual click from ever
registering as a standard click so to do
that we can you know that she's working
now so we'll say cancel navigation as in
stop that anchor work and stop
applicable and working to do that we
need to though
add the variable here to the clicky band
called E and call it whatever you want
give it any name your life doesn't
matter but if you provide one here it
will pass in an event to this click
action and inside that event yeah you
have something on here called prevent
default or function and that means
prevent the default action from
happening the default clip so we save
that now and you look at the Earl at the
top and we click now you can see it
doesn't do anything we basically
disabled the link so if you wanted to
disable all links on the page you just
do you know a and then for when they
click prevent default that basically
stop every link on the whole page from
working just in case you wanted to know
that so those now prevents the clip from
happening and instead of that we now
want to add the desired class to this
item and because I don't want here what
we could do again for ease is we could
first we want to be able to find what
elements we want this adding
- because you know we haven't told it
what elements you want adding so again
to select the way I tagged elements for
this function is if it's a top menu then
we're expecting to tag a top menu if you
will so on the actual menu itself that
were bothered about we're gonna add a
data top menu and this is just an
attribute we're making up data top menu
- a good class because what we'll do you
could just do this so you could find
this element just just add an attribute
called data type menu class and now in
here similar to how we found all
elements of top menu we can now add the
design class to all top menus the way
you'd find it is to say top menus equals
query all and then this time it's any
element with data top menu class which
we have here and that'll simply select
them all and then you can do a for each
on them again so for each top menu and
this is the UL itself the actual listed
menu menu will call this for each menu
and then we say add is like a plus say
it's a top menu and this is how you add
this top menu now or other menu this top
menus the other thing you'll also find
in JavaScript is you'll get no errors no
warnings and here when you're saving
about things not existing you'll get a
bit in the console but it's not compiled
so you get kind of no warning so like
when I miss that s off that would have
still ran here we'll just complained so
top menus menu so each menu item from
the for each is going to be the items
that were found Thursday to top menu
class so it's going to be this you out
so what we'll do is add a class to that
which is what we want to do and to add a
class you do the menu item itself got
class list dot add or in this case want
to toggle it because we want it to be a
deed then removed each time you click
you want to change it and the class was
expanded and there we saved that now on
click you can see adds removes so if we
inspect the menu itself so here's the
menu when we click this icon here we've
already intercepted that click we then
find all of the elements in the document
that have top data top menu class as an
attribute which is there and we add them
to the class itself of the item that we
expanded so that's all working there
however the reason I then want to put a
value here is because say you've got
multiple menus or you simply want to
reuse this for all the styling you just
want something to style whenever you
click this this menu slides in maybe you
want to style the background a different
color and you could then just add data
top menu class to the background like
say to the entire body you know and
style it's a different way so using this
data attribute you can give it a value
so we might as well then give it a value
of the class we want to get adding to
the UL let's just say my class and now
what we want to do is simply replace the
code to find this well to get the value
of for this top menu top menu plus the
actual value so inside of here then we
would have the menu class equals and
then we want to get the value of this
data top menu so to get the value its
menu don't get attribute because it's an
attribute on the element and then we
want the data type menu plus and you'll
notice we don't put the square brackets
in here because this is actually saying
we want an attribute this is trying to
select something and by doing the square
brackets around it but Talon it we want
to selected a to active you because this
could be anything it doesn't have to be
an attribute whereas this is explicitly
getting an attribute it doesn't need the
the brackets it just needs a names so
the menu class will get attribute and
again if you're wondering what that is
you can consult debug it or instead I'm
just going to replace the word expanded
in the class we add and add the menu
class straight to the class now we save
that and we open this and we take a look
at here now when we click this you can
see it now adds my class nothing happens
because that isn't a style we've done
anything with but now by simply tweaking
here we can tell it to add whatever
class we want based on the event so
that's the top menu basically done
that's all all we're doing is whenever
the items clicked whenever the specific
items clicked based on this we
selectively based on this then we
intercept the click stop it happening
fine then all elements in the HTML that
have a data top menu class which we then
simply added here so this is kind of how
we're finding things in JavaScript where
we're adding these data attributes to
the items and you have to start it with
the word data - because if it start if
an attribute starts a day - - then you
can type anything afterwards
and it's valid whereas if you tried to
type in hello equals test I'd see if
anything complains in the console about
that fact so it's it's not complaining
here but basically if you run this
through a parser that check for valid
HTML it will complain that's not a valid
attribute name so you want to start it
with day two - and that's why you'll see
that in many web sites as well so really
that's like I say the top men you've
done now we'll move on to the scroll so
next thing we want to do now we've done
those two classes commented okay it's
add one more here
find the value
or rather get a value of the data top
menu class attribute add/remove class so
that's those dude on we've got the for
each the unload we don't need that open
control end to make an another class
save make a file go to web root assets
javascript and we'll call this runs DNA
scroll back or j s because we're gonna
make similar to the core in general i
mean we'd actually say DNA core scroll
so it's a cool thing but to be honest
will do scroll that core this is going
to change with typescript anyway but
make this file DNA scroll core through
the usual alert i save and it's not
there go to the index add it here save
and now we know we've got the class back
in so we're ready to go again
so in this now what we want to do is
first and obviously we need to intercept
the scroll we need to figure out what's
going on with a scroll and do something
with it so we'll start with and we'll do
something similar to the unload so
whenever they on the page loaded we
firing event we want to do exactly the
same thing but this time whenever the
page scrolls we want to fire in event
so very similar to the last time we'll
make a variable called stroll callbacks
this time and it's an array so call
bucks to fire when the page scrolls and
we did function like we did on load live
on scroll and it'll expect a call back
so exactly the same as the core
that's a function to be called whenever
the page rolls and then I think we just
did
scroll in fact we want to this just
wants to add doesn't it scroll callbacks
dot push callback so add call back to
list that's on the usual call and then
we had slightly give process on load
will do process on straw so what kind of
following the same practices before
processes what should happen and the
cage scrolls and for now all's we want
to do also care about is will loop each
pull back or each get the N a minute
scroll callbacks and there's a function
where we get the item back and one thing
you also notice here I name the function
starting with in upper case in standard
JavaScript it's typically lower case
like this I don't like that so I don't
do that
I like the capitalization for functions
so that's why you'll see all my
functions in upper case I'm sure plenty
of your complain if you already know
JavaScript and say it's non-standard and
blah blah blah but I don't like lower
case for functions so if you want to do
either all upper case and yet you see
JavaScript examples looking different
than mine you'll also see this curly
bracket up here again I hate that
because then you can't visibly match if
this has got an open and closed bracket
because the closes here the open
somewhere ran them over here again
that's standard in JavaScript but I
don't like it so if you're looking at
some you know visually this looks
different than some JavaScript style
wise that's because this is my style and
I make it up as I go so just thought I'd
throw that out there in case you know
some people want to comment on that
that's the reason why I think it looks
nicer and cleaner this way
so loopback we basically loop every go
back and then inside we call the
callback so we just call the item and
that's it so now we need to actually
just hook into there the scroll event
itself so the scroll events will be this
time it's not the document it's the
window so OOP oh look into page
scrolling does that the document we do a
window and it is window.addeventlistener
as usual and this time you might have
guessed it it's scroll same thing again
function don't care about any kind of
information about that so now fire every
time we scroll so I can be really
annoying here and just do a live it can
pop up an alert box every single time of
pics or Scrolls so we scroll just high
high high it's already sent loads of
events because it's scrolled 20 odd
pixel so we've got 20 events so one of
the first things you can tell is going
to be happening here as you scroll once
with your mouse but you've got 1 2 3 4 5
6 7 8 9 10 11 12 13 would've hit it and
for anyone to do like 23 calls there so
that's very I mentioned JavaScript is
not efficient if you are gonna do things
on this call that's gonna be really
overkill you're gonna be firing off the
events like crazy so one of the things
we want to do is handle this event a bit
nicer so this this could be it we could
now say that the events fired here we
just called process scroll process but
that's like I said that's overkill
that's that's too many things happening
I want too much firing going on
so what we'll do instead is we'll create
a little system here now where we will
start a kind of a timer that once you
start scrolling until you stop
rather once you start scrolling we'll
wait for 100 milliseconds and then fire
the event
so we'd fire at most 10 events a second
you don't want to overdo the scrolling
so all's we do is tone it down so that's
what we'll do now so we'll need a few
variables for this we will have love a
scroll time of callback ID she's nothing
right now and this is for the time out
so when we start a time out it'll give
us a number like an integer that lets us
keep track of the time out itself so
this is just kind of used as a tracking
ID so trucking your ID for the scroll
timer and then all of the last scroll
time so we can keep track of when we
last scroll and see the difference in
time so last time we scroll we will have
the update interval so how often to
update when scrolling and this is in
milliseconds so we'll do scroll update
interval and the 100 light we set
yourself fire it once or rather 10 times
a second and before we do this I guess
what you could do is process on scroll
or in here you just do say console dot
debug I plus plus and that doesn't exist
but JavaScript happy doing that I'm
pretty sure scroll no okay oh I equals 0
and there you can see when we're
scrolling you know we're getting as 200
events nearly already just from a few
Scrolls so by default you're gonna get
one scroll the mouse buttons 22 fires
one more scroll it's 41 so as it stands
right now we're getting hit a lot of
times so that's what we're gonna fix so
we've got the updated if all we want
we're on fire
most let's change the second for now so
it's a lot slower to see when we do it
so you want to fire it at most once
every second now what we need to do is
in this instead of processing the scroll
straightaway instead of doing all that
we want to first check if we've never
called so this is all basically of the
scroll time a callback is never fired
which it will be in the first place so
if the last call buck has finished in
which case we'd set it to null or it has
never been fired and again all this
stuff you could get from typical when
somebody's in a web development page or
someone who's doing the JavaScript
nobody had write this so they just got
all ATS Google for how to detect a
scroll and will install jQuery or will
install our library but that is part of
the biggest problem with the web
developers is they never know anything
they never do anything the self it's
just what you call script junkies or
code junkies they just simply copy and
paste what they find so yes you could do
this with a script that's out there but
why when it's like 100 lines of code and
half an hour to do just do it yourself
learn the knowledge you know keep it
clean and and small don't go adding
hundreds of different JavaScript
libraries all over the place so a lot
better a runt over there again but let's
get back to what we're doing so if it's
never been fired so if not scroll Thomas
that basically means if that's not so if
we've never fired yet we've never run
anything if this is the first time we've
scrolled so that would be a of the last
scroll time zero which is our default
value so we've never that this is
literally the very first time the users
scrolled the mouse on this page then we
want to set the last scroll time to the
current time in ticks which is just a
value of time from Enochs or something
never remember exactly this to get that
to do new date
don't forget time and you can see what I
mean here about how javascript by
default does a lower case for variable
names which I just don't think it looks
nice there and so this will do update
the last scroll time and then process
the scroll so let's just move that debug
into process scroll for now and let's
then move that into here so we would you
where's that gun well if we were to run
this code now what should happen is this
is no because we've never set it it is
the first time we scroll so updates the
time and it runs once the next scroll
event comes in this is still no but this
is no longer zero because it's been set
to the day time so what should happen
right now is as we scroll this page now
you can see we get one event fired and
that's it it stops so that's a good
start we detect the first scroll and we
fire it which is you know what we want
to do but we also want to so you after
this if it's the first time and we've
processed good otherwise or rather
either doesn't matter you know whichever
so now either way
start at the time out to fire after the
interval so to do a time it's similar to
say in c-sharp when you're doing a task
and you just do a I don't know task
delay one second and then do something
or you know whatever if you just want to
run something in a certain period from
now in JavaScript you do set timeout and
then here it's expecting the
milliseconds of how long to wait before
it fires and it's also expecting the
function so the function comes first
thing you want to do so we do function
the second property to the thing is the
timeout so in this case we call the
scroll update interval and then as I
mentioned this set timeout
value so I'll set that in a minute but
let's say in here now we just do alert
hi our favorite little JavaScript and we
save what should happen now is the first
time we scroll it will say protests on
scroll this is kind of gonna screw up a
little bit because this will hit every
single scroll event so 22 times and one
scroll but what will happen is we'll set
up this sets time out so once we scroll
nothing should happen for a second and
then will be hit by all these highs so
if we scroll it's a second later and
then we get all of the high messages so
that's the set timeout is simply going
to run something the time after it's
mentioned here so we want to make use of
this set timeout and simply to just give
this a value so we'll set this scroll
time a callback ID to the be turn value
of this so we know that it's run and now
the next scroll won't get called because
of the fact that now we've got a time so
we save this time we scroll we get 0 a
second later we get that and now that
set it won't fire again so we're slowly
building up here to what we want which
the point is once you've scrolled you
want to just ignore what's happening
with the scroll for it you know one
tenth of a second which is nothing you
don't need it to the split second you
scroll you don't need this to disappear
up that you're okay you don't need to be
that proactive and the reason for doing
all this is to make your website more
efficient so it doesn't slow down on
mobile phones or you know overload the
browser and use a lot of battery and
things like that so even though
javascript and run without all this and
you could have just chucked in process
scroll here you know you've got to be
conscious of what you're doing the fact
that that's gonna run 22 times in one
scroll of a mouse do you really want to
be putting that much work on the machine
and the browser
so once we've scrolled we wait for the
interval time once timer has done will
be ID so
and it all again so once that time is up
I'll say scroll time IV equals not here
we could say let's just leave consult up
the book I scrolled at and then new date
dark yep time and then if I scroll
you'll see a second later I scrolled at
this time I scroll again
yeah I'm now ticked but now I can scroll
up and down the page doesn't matter how
much I'm scrolling this is now calm down
to only ever firing once a second which
is what we want and then won't you stop
it's it's updated
so now you've gone from firing you know
yep 100 and 200 are events within you
know scrolling the page up and down once
to an event limited by time once a
second which is what we want so once
we've done clear it and then here at
this point you want to just do the same
thing update and process so you actually
do your you know your command so now we
save this and scroll you'll see now we
got the process running at a nice rate
you know I mean that's a bit slow
because we don't want it to second do
empty like a tenth of a second but you
see the point now you're scrolling the
page and now you'll simply get this call
back anyone that listens to on scroll
now will get fired within when we change
us to you know one tenth it'll now
happen a lot cleaner so to give a
comparison to that when we scroll there
it's for with scrolling I think about
twice on me wheel if I were to do this
on the scroll event itself scroll twice
and we've done 24 there 48 I think
actually cuz it was about there so the
difference between our now clean code is
you know a handful of calls instead of
40 50 so we've reduced the workload of
the browser there by 80 percent with
just this a little bit of code and
this wasn't exactly hard you know you
can now read through this code you can
see what it's doing and that's it
there's your little helper for your
scroll so now we can call this on scroll
event and do what we want with it
so the point of this whole scroll core
was to add that browsers are friendly
although impact scrolling and I've just
made that up so you know it's free to
use you can do what you want with it
there's you know I don't really care
what you do with it but I do always make
you think that
don't just type JavaScript to not think
about how intensive it is on the browser
so that's making you file and close that
one now save same old same old
JavaScript or call this one DNA dot
scroll dot I'll just call it scroll down
doc yes and this time we want to do
stuff when we scroll down so we'll have
a function that finds any elements with
a data scroll down blast attributes and
adds that class to them when we scroll
from the top of the page and what will
also do actually saying that is because
we want this menu well no we'll do it in
there yeah can do somewhere no we'll
just find all those kinds of lateness do
we do it when we're a bit off the top of
the page so we don't do it instantly we
do it that's another point I'm just
trying to think where we do that do we
bake it into the on scroll in fact the
same that they on scroll no we can do it
in we don't need it in court we'll do it
in this class so we'll start by doing a
senior scroll but then what I'll
probably do is leave the menu big until
we scroll you know a little bit down to
make it look nicer so anyway first thing
we want to do is unload
so wait till the page is loaded to do
what we want as usual wait for a load
and then in here we add this class that
we want to do here so we'll make a
variable scroll down items which is what
we want to find we do the same thing
again document query select all and here
we'd want the data attribute to be data
scroll down with glass and then we'd
want to do for each of those scroll down
items function get the item back for
each element for technically called
elements on the HTML we would then one
to do we want to find them at the start
we don't want to do a for each he
actually saying that we will want to but
not yet so what we want to do instead is
cook into the on scroll as we mentioned
so once the page Scrolls so once you
load the page you'll find all the
elements with that date draft of it once
and then every time the page scrolls so
every time the page rolls then that's
where you'd want to do this for each
once you're happy with whatever you want
to do so we'll do what we want to do
here is as we scroll down we want to add
the class and as we scroll back to the
top we want to remove it so as soon as
you off the top we want to add a class
as soon as you're back to the top we
want to remove it so we need to keep a
flag if we're whether we scroll down or
off
so keep track of if we are rolled down
or because wouldn't you past that again
this comes down to efficiency you could
simply say here so again let's give you
an example doing it so if we are off the
top of the page so if and then what you
need to do here is detect the scroll
position so that's not quite as easy as
you think to handle multiple browsers
like you know Firefox does it one way
chrome does it another so the scroll
position is not just simply a one
command so what we will do is make a
helper function called scroll position
top because we only care about the top
10 out or really scroll position what I
bought you know squat position tops fine
well Chuck this in the scroll core class
I will just add a helper function here
that's fine function scroll position top
get the scroll position top of the
window and we have multiple ways to get
this and will return a value this time
one way is window scroll Y so I think
I'll actually change the scroll position
Y yeah X and y axis horizontal wise
vertical this is your Y scrollbar and
this way B or X scrollbar so you can
return window dot y I black might fail
so then you can do an all because if
this is not basically this doesn't exist
then it will go to the or statement so
this is a good way of kind of stringing
together if that one doesn't exist you
can try a scroll top which is another
one that should exist if that fails you
can fall back to document dot get
element by tag name and the tag is HTML
to get the main HTML body he want the
first element of that the only ever be
one and then the scroll
top and that's for the really old
browsers so this is the most modern way
that should work this is kind of a
fallback to Internet Explorer and this
is a fallback even further
so that's just a way to basically make
sure we always get the scroll position
in any browser so now we call scroll
position Y so if the scroll position Y
is greater than zero then we could then
do the for each element that we had we
want to add the class but again just for
quickness to show you the inefficient
way we will do in fact it being every
item as well there's only one word in my
console dot d Bob I plus plus otherwise
you do console up the book you'd remove
the class so either way you'd be doing
something so this is adding and removing
a class from every item that we found
which could be a lot more than one and
now once you're complaining about here
okay so we're not gain anything at the
minute I hope that's change my casing
for the JavaScript function not mine on
scroll really what's going on oh we
haven't added this javascript class yeah
yeah I forgot my little alert to make
sure the class was included do you know
a lot of scroll darts or it would call
it scroll down yep there we go so you
can see we've found it we scroll you can
see how many times even with our
efficient scrolling we'd be adding and
removing a class every time so once you
scroll down this has got the class and
instead we'd be constantly talented to
add the class out of the class of the
class of the class when there's no need
once the class is added as soon as
you've scrolled you only want to add it
or remove it once you're back to the top
otherwise you don't need to keep running
your code so again you could just do
when it Scrolls if your
not at the top you do one function if
you otherwise if you are at the top you
do another so you want to do that but
you basically want to keep track of if
you're already off the bottom don't just
keep reviving so keep track if we're at
the top or bottom so we'll have more
scroll down equals false because we
always start at the top of the page or
this that's the presumption so keep
track of a scroll down on scroll then we
can do first run get there get scroll
position the window top equals scroll
position Y and then we'll do if we have
not rolled down and we are now we are
now scroll down and that would look like
so if we haven't scrolled down and we
now are scroll down which is windowed
top is greater than and let's make it a
zero I'm going to just chuck this into a
valuable so scroll down the text art
we'll call it place this in a valuable
here devour all and eat X and we'll just
chop it to zero for now the position at
which two plus as not at the top have
you well so if you had not scrolled down
and we now off scroll down so we've gone
further pasta then at this point we're
on to loop every element and delete all
this now and then for every element in
there want to add the desired class and
the first thing we need to do is
actually add this to somewhere so day to
scroll down class is the attribute we
want to add and we want this to be on
the
now menu I believe top menu standard so
we've actually got it here we added that
so if you haven't added that just to add
that to your top menu and we got the
class that we want throughout is reduced
because when we add the class that we've
styled called reduced the menu shrinks
so this will find that top menu item
when we scroll down and we weren't
scroll down regionally which then also
like we have scrolled down scrolled down
it also true then that'll stop you
firing again because now it won't fire a
second time and then add the desired
plus so for this you do the item and
again you want to do the class list and
this time instead of the table or what
we did run to add it specifically and
the value want to add it is again the
item not get attributes like we did for
the other one and it's the day to scroll
down class so that should add the class
to the item so we save that and look at
the console if we scroll down you can
see it's actually styled for us and I
look to the console if it'll look to
this so if we I reload that page there's
no plus here we scroll down it adds the
class that you saw that flash and this
menu shrinks and now it doesn't react
doesn't keep trying to add and you can
test that by doing console dot debug
high to show that when it's running and
then if you scroll down fires the once
and doesn't fire again so we've made
sure that basically once we scroll down
we add the class and that's all we need
to do now we need to detect when we
scroll back up so we've detected there
if we scrolled down then else if we
scrolled back off is what we need to
detect that's else if so if we were
scrolled down already and now we're
scrolled off so now the window top
is less than or equal to the scroll down
detached door which was specified so
basically the exact opposite logic so if
we weren't scroll down and now we are we
run this or if we are scroll down and I
we're not we will miss so same again
copy and paste back to the same code fix
the indents we're now not scrolled down
like we are not scrolled down for each
element
now remove the plus and save that so now
if we scroll down he shrinks hopefully
when I scroll up it removes it and you
can see then in here we add remove add
remove and that's basically add that's
that's all the risk to a nice responsive
full you know top menu one of the
hardest things to actually do in web
development specifically without using
somebody else's code some libraries a
huge overcomplicated templating system
and here you can look at all the code
yourself there's the whole HTML you know
there's the CSS the sass but this
includes styling for everything not just
the menu the menu itself has basically
top menu it's just there so keeps it
nice and clean and the javascript is
what we've written us also 39 lines of
code 60 so 100 lines of code 150 180
lines of code
no libraries no third-party tools
nothing and we've got ourselves a fully
responsive top menu that shrinks and
grows the other thing we'll just do is
scroll down now let's change this
position to say 200 from save so now
when we scroll stays big and then once
you get a bit further down it shrinks
once you start going scroll back off and
before is the scroll bar before you get
right to the topic grows so it's up to
you where you set that I'll set up to
something like 50 so it doesn't
instantly shrink it takes you know I
mean ma 32 sick
just off one stand the scrollbar so it's
just it starts going it gives you a
chance to scroll and then that animates
in after so it's a bit more just look
smoother so that's that's it that's that
the whole JavaScript so it's a it's been
a practical introduction to JavaScript
everything's written directly there's no
libraries there's nothing but raw
JavaScript here and we tried to organize
it into clean files the fact we've got
to include all these files we'll fix
when we move to typescript because it
will compile to one script and again
typescript is still JavaScript it simply
adds things on top of its to make it
nicer to work with and more I'd say more
Seashore friendly have you well you can
add classes and object oriented things
to the design so hopefully this video
was a good introduction and got
practical introduction to JavaScript any
thoughts or comments as usual let me
know</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>