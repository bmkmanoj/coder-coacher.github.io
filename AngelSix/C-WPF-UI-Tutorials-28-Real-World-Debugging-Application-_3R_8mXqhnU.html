<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C# WPF UI Tutorials: 28 - Real World Debugging Application | Coder Coacher - Coaching Coders</title><meta content="C# WPF UI Tutorials: 28 - Real World Debugging Application - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/AngelSix/">AngelSix</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>C# WPF UI Tutorials: 28 - Real World Debugging Application</b></h2><h5 class="post__date">2017-08-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_3R_8mXqhnU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this video we're going to do some
bug hunting so I typically just do bugs
small ones in the background and simply
post them to get home but I figured
we've got quite a few little ones now
we're doing some things that we want to
solve so we're going to just do a video
on that and you'll see how I figure them
out as well so I haven't solved any
leads a few have not even looked at them
so I'm just going to highlight a few
that I know of right now and literally
work through them so you can see so one
is not a book as such thus canva fixing
a problem with the gashing classes book
book these pages instantly now update so
they don't fade into one add a fade in
there the other thing I noticed is the
scroll bar here seems to be messy you
can scroll but we can't see anything so
we want to fix that and what else do we
have
well I think to be honest that's that's
it so far but I'm sure as we're going
through this we'll come across some I
think I also want in fact I thought the
scroll bar had a fade effect oh yes is
fade on on hover over the scroll bar so
another thing that I mentioned a while
back was really want the scroll bar to
be potentially invisible completely
until you hover over and then like hover
over the content though and then fade
this and so we want to fix that as well
so we're going to fix those few books
first and a few I've done due to github
requests or there's a bug with loads
about the password entry control if you
put that in the width of justá-- then
it doesn't adjust so we've got to fix
here for that that you can look up which
basically checks for whether it's a Tech
Center control or a password entry
control so that's that wasn't worth
doing a video on and I've just fixed
this one an hour ago for when you
maximize the application which is now
fixed but I can show you an out when you
maximize and then you try and drag from
the very top you couldn't you know
getting back which is the way your
typical account
and that was just in window view model
because the resize border this wasn't in
here checking furtive it's maximized so
it's how it is now then it means you've
got a resize border when you're
maximized so when you're clicking at the
very top to try and drag away from the
top you can't drag away so you can you
can click lower than ten to you know to
pull it away but there's a little fix
fixes that so we'll start with one of
the other books I forgot to mention the
one we saw at the end of the last video
was the dates now you can see all these
dates are now visible and they disappear
in the work once you've covered over
them once booked by default they're all
visible so we need to look at why that
is so we'll start with that one because
that's nice and simple I'm hoping so for
that we want to go to first the control
where that is inside of so that'll be in
controls chat chat message chat message
list item and it's these dates and if
you remember we put a animation on the
wrapper of them the stuck panel or did
we I thought we did and then we didn't
do an animation then I what did we do
as I said yeah this is it here so when
we hover over the whole grid so the
whole chatham when the mouse enters we
change the opacity to one let me just
put this in two percent mode so the text
is bigger there we go so we pushed on
mouse over we make it fully visible now
mostly we'll make it invisible so that
the animations working so oh oh I know
why we're not clearly visible here so by
default we want this extra details to be
invisible to start with and I think I
should solve the issue and then until
the mouse hovers over once it won't be
visible so it's setting up the expected
start there we go
so I thought that work before maybe
we've accidentally removed that opacity
zero but that's now working against us
that's one bug out of the way next let's
tackle this scroll box I think that
would be kind of it might be complicated
but let's at least start to figure out
where do we go from here so the first
thing is we've obviously got a scroll
bar because it in scroll I'll say well
cigar scroll bar it's exactly the same
as this one so I'm sure we will have one
but we've also custom styled it
so let's first just remove our style to
see if it's our style causing the issue
so we go to Styles scroll let's just
literally delete all of our style and
let's see we get a scroll bar and this
is what I always mean about software
development when I say in order to solve
things you first break them or you first
find out what does what you know you
remove all things you add them back and
you find out what what effect things
have so now you can see we've got a
scroll bar back so we do have a scroll
bar
so let's now add back our style that's
for the thumb which won't be an issue
it's for the the well actually could be
the issue so let's have a look in the
main scroll bar style let's remove the
style for the thumb and remove it for
the horizontal style as well and let's
see if that now work so we should have a
semi styled scroll bar but with great
thumb like that which looks really weird
and so do we have it back so we have it
there so we've got the scroll bar so
it's something to do and I think I know
what it is actually it's purely the
style of the thumb so we know we're
looking at this this is the issue and
one thing I'll notice here is wood blue
let's just change this to the background
floor to say red it's not really obvious
I've got a feeling it's simply blending
in with the background blue
yeah their service actually it was there
all along bought the color blended so we
need a new color really so let's just go
let's just go to the dock really huff
start with that let's go to dark and now
we should at least see the scroll bar
just about in just about tell we have a
scroll bar there and on hover we also
notice we can't hover because the resize
board is a bit too big so it's just
getting the way so let's just reduce the
resize border as well or at it so the
window view model resize border so 10
let's change that to safe for then I
should still be big enough
and now we can get over the scrollbar
right to the edge and then it just
starts the resize that's just right and
but now we also want we can fix I think
that when you have a that's obvious or
not as a scroll bar I think the only
thing we want now is to when you hover
over the content for the whole scroll
bar to light up so the first thing we
want is to get the template of the
scroll what we want the scroll viewer
not the scroll bar because anything
that's contained where it's been big
shut or list chat message list controls
a so in here we are using a scroll
viewer and this is what we really want
to style a scroll viewer so you can try
and get the template this can be kind of
awkward
there we go scroll view template so you
want to click the scroll viewer here and
then just instantly right click in there
and it seems to keep now I've lost it
should have done that when I had the
chance so it's a little bit of fertile
until you can get the the scroll viewer
selected I guess is a trick of where to
right click and I'm not going to get it
now showing it once or do you
right-click without hovering okay so
that's the trick to in order to edit
this template click the template in here
so click the scroll viewer and then
right-click in this area don't hover
over anything else and it seems to keep
that item selected edit it in this
document that's fine we've done this
before this now gets us the control
template here so let's cut that and then
just delete the resources that we put in
for this design also delete the template
you copied and now we can go to the
scroll template file we'll have a new
style
target I told you then we have a set of
property template set up value control
and anything that paste the control
template in yep so control template key
we don't need now captain go target type
a scroll viewer so all of them there is
simply override the default template
which is now identical at this point in
time anyway so there's no real
difference of the minute and so now we
want to have a guess in the control
template so the whole thing we want to
change the opacity of the scroll bars so
we will first change the thumbs to
simply remove the opacity so it's it's
full blue and what we're to do is simply
fade the whole scroll view a whole
scroll bar so this will not be solid
blue these mouse events you can cut out
of this template we don't care about
them so by default now if we were to run
this we should just have solid blue all
the time solid blue and scroll bars
which we have so now let's close that
let's make them invisible to start with
a pasty zero and that's again cut this
alex is done did and then we're going to
move so now the gonna take leave that
out we want the whole scroll bars to be
invisible so in the scroll viewer we
will first clean this up so we can see
what's what
so they've got one scroll viewer
scrollbar for the vertical and one for
the horizontal and then they're simply
toggling the visibility based on a
property so all that's standard so now
we want to make these two invisible to
start with and then in this controls
template taste the exact same animation
on Mouse enter go fully visible I'm
going to change it to completely
invisible when we don't hover and this
time the target name is going to now be
the whole scroll bars so paste the
vertical one in copy and paste copy and
paste and then do the same for the
horizontal and I think that should now
be it we should have a hover over
content to fade in scroll bars so there
we go
and then here same thing now I think
that looks a bit a bit harsh not I mean
scroll ours so let's just I think we
will change that back to point two just
a nice fade and tasty point too and
let's take a look at that again
and they are still completely invisible
my deduct out of date a pasty 2.20
pasties open - oh I forgot to update the
other one that
there we go that's nicer now so I've got
a scroll bars that fade in when you
hover over the content does fix the
scroll bar issue now we can now click
and drag this to also move and I think
we want to tackle this fading into these
fade in nicely so the reason this
doesn't take notes because we don't
change page we updated the view model
directly of the page so what we want to
first do in that case let's go back to
the base page and we need to we have a
view model object and this is what we're
updating so when we're updating this
instead of the page we need to animate
based on this so instead of animating in
a base page that might not be what we
want we want to effectively create a
method that gets fired on the page that
we can then react to so in the base page
will create a protected method which
means only the classes that inherit from
this class can access it will be bullied
also be virtual so it can be overridden
by the the implementing classes so I'll
call this view model changed and we
could call it on view model changed and
that can be over anything and this will
be fired when the model changes and
basically does nothing by default then
also need to do is in view model object
when it does change and we update left
balls no or not call us collect and left
not even lessons file a view model
changed happen on view model changed so
now let's go get fired every time the
view model changes if we go to chat page
we can now we
right this nicely and which I override
we should know our view model changed so
if we know for a breakpoint here
and we run they should fire every time
the view model gets set on the chat page
or on any page for that matter but we've
got a breakpoint on the chat page so
it's hit once we click here hit again
so now every time we're changing we get
an event so it's now going to be a
simple case of just copy their
description and we want to do storyboard
equals new storyboard storyboard got add
fade in and we'll fade in for I don't
know a second maybe then storyboard dot
begin and it will be the is it this
contain element oh I know
we need to the thing we want to fade in
is this scroll view or I guess let me
think for the page
yeah it's we're in the wrong thing here
on the chat page pages cap age so when
the view model updates we want to
refresh this one a fade this bit in we
don't really care about this you know
the send button and the tile will
probably fade but for now the title
isn't even set properly so we're just
going to fade in this control for now
let's just give this one a name
and this can be sharp message list then
go to the code-behind
and we shall be able to access that now
so let's fade that element in and lets
you run that and I was on air air so
value cannot be null
okay so storyboard isn't no okay so chat
message list does not so that is because
in if you look at the call stack down
here the main window starts it sets up
the frame to a new view creates a new
chat page goes into the base the base
sets the view model then the view models
being fired and changed so what we're
doing here is we're changing the view
model before the views even created that
element so for that we just want a
simple check make sure you are exists
first
so if cut message list because it was no
just returned it should fix that issue
now that's what open to now unclick this
there we go so yeah get a nice fade now
when the page is loaded in so we get
this kind of appearance that we've
changed page if you will even though we
haven't changed a page where we're just
reloading and animating the actual you
know the inner item so that's a a nice
effect now that we've got a faster
loading UI because we're not
reconstructing the whole page and we're
simply fading this in when it's done the
other issue I just noticed I thought we
were done but we are at the top this is
the newest message down here but
whenever we navigate to pages we have to
scroll to the bottom and it actually
also looks like it's keeping the scroll
position as well so if I scroll
of the bottom then change we still at
the bottom as that's because we just
simply reloaded these the view model not
the scroll position but either way
wherever you are in the scroll when you
chat gets loaded we expect to be at the
bottom so how can we do that I think
we'll do probably an attached property
I'm sure we do it so inside the chat
message list control I'd say the actual
control itself this one probably on
maybe the grid itself yeah because I
mean the grid passes their data context
into the items control so in mind units
dude on the Adams control so or no
because that's bound to the items of the
data context and we change the context
okay so we will add a data context
change the events on the grid I think or
Nell clutter attach proxy so it ends up
to hook in events manually but
effectively well or hook into the data
context changed so we will first make
one for attach properties for the copy
and paste this one and we'll call this
there in fact we want to scroll to
bottom so it's going to have to go on
the items control does that have a data
context change here so items control
will want so this would be scroll to
bottom
unload we'll call it
and then we'll rename the file okay it's
not going I do not let us rename the
file rename file so now this will stolen
items control to the bottom when the
data context changes get rid of all
these extra ones and simply check first
that we have the right control which is
going to be an items control comes only
lower than that now so an item to
control is where we have the scroll I
believe it's not an items control that
has to scroll to bottom scroll here
that's what we want to put it on rather
because it scroll view containing let's
go bars so change this to scroll view so
it's a scroll viewer then if the data
context changes then we want to do
control dot scroll to bump and this is
every time it changes actually so let's
first create a private function and
scroll to the bottom and let's make sure
we first on cook any previous ones
because the data context can change more
than once
so we first make sure we put the old one
and hit the new one and then the sender
sender as
roll Neuer scroll the bomb focus this
control when it's loaded scroll content
to bottom when context changes so I
think that's it now so basically when we
have this attach property to a scroll
viewer it will hook into the data
context changed event for us and then
simply scroll to the bottom of the
scroll view every time that happens so
back in here scroll viewer we do local
call on scroll to bottom cross these
values cause true and I think that will
get us the scrolling to the bottom when
we load so we know click this there we
go over at the bottom now we scroll up
and then click another one or at the
bottom again so that is now the
automatic you know scroll to bottom when
you content loads and so we fix the the
hover date we've added fade in we fix
the resize border being too large so now
we can access the scrollbar
we've also styled the scrollbar so now
it when you hover over the content you
know it fades in we scroll to bottom
when we load new stuff
so I think that this this now works as
well it's fine thanks for acting a nice
message oh why the context menu
okay so we've we've lost the attach menu
so we start okay so we've got we've got
a menu and then as soon as we've changed
view it's like we lose the I know it's
there but then as soon as you change
view you can sort of get it to disappear
okay that's an interesting one
hmm okay let's take a look at the chat
page not even sure what that one will be
our chat pages also now got an issue
with our attached property so sometimes
that happens sometimes when you do
certain things like this is probably
crashing it so you probably don't have a
I don't know somebody's in this crashing
so I should do a quick check if designer
properties I think it is dark get is
InDesign no Tim so don't do this in the
design time I think I should get rid of
that we might have to close and reopen
this I think that to clear the cache
once you've done it once it tends to
stick around
yes I think I'll go away once you've
cleaned and rebuilt but that'll have
been caused by that anyway back to the
issue and so this button has got
attached button
so we have what do we have it's not the
earth touch with the attach button fires
the attachment button command let's go
to the attachment button command that
fires attachment button let's first see
if we're still hitting this because this
is the first thing that should happen
when we click that button so click this
it's fired it's invisible and nothing's
appeared click again it should be
visible it disappeared so there's
nothing wrong with the physical the
button is firing the event so the
buttons fine there's nothing wrong with
that
where's the actual pop-up things touch
from any pop-up here okay so animate
them from bottom us remove the animation
I think we've proven this already good
it's always visible when we when we
change pages so there's the the content
so the content is still there at night
we've lost content
let's check of the bindings working so
we will want where do you want to go
chat page and which I think where we and
shaft message type them okay some this
view model isn't it nope chat left I can
view model that's it and then here we're
with create a new new page with items
nope can't and where we where do we do
the
the new chat things as it let's think if
there's this one so in the chat list L
was there so just got the yellow yo so
attachment menu equals new and I'll just
find where we do that attachment menu
and let's first port before I forget
let's check the animation back into the
there and then touch menu a new chat
attachment pop-up menu so we want to do
content is this
so simply make a chat attachment pop-up
menu so what I'm doing here is just
creating a different menu because I want
to see the content change to make sure
we have binding and the binding actually
works so when we go to a page we let's
just put the number two in front of
everything so by default with nothing
loaded will have the the default menu
but now I'm gonna go to a page that
changes so that's right with the binding
they're definitely working because we
have all the content we have it there we
change changes so there's nothing at all
run with the binding so we are down to
this is a tricky one
it's almost like just the animation
isn't working in fact it is just the
animation not working because everything
else is working so we have
chat menu attachment menu visible which
does change relative sources chat page
and the attachment menu oh so we've got
a kind of a weird thing going on here we
for the animation the property or buying
into instead of it being this the view
model itself of this page which
technically it is we are then we're
changing the data context of this
control to attachment menu because
that's what it needs to show the menu
then we are researching the view model
attachment menu visible but what we've
done is we've bound we've effectively
made the source the chat page not the
view model so that's then causing an
issue with realizing that the the view
models changed I think this then
basically gets stuck being attached to
the old view model I think this is
because of the way we've done this
binding in like a you know an ancestor
find it's once you then this gets run
once on construction and then after that
once we change the chat pages view model
it's not firing because we're bound to a
view model dot so I don't think we can
do binding to chat page no you can't so
what we need to do then I simply remove
this strange way of animating cut that
out
simply wrap this in a border can be
anything but just a basic control and
we'll add the animation to this and this
can be standard binding now so it's just
going to bind straight to attachment
menu visible like normal because we
haven't changed the data context of us
border move this inside
and then we want to move the grid the
panel not the data con they want to move
everything except the data complex into
the border so it then becomes if all
these tabs have go in the right place
and then becomes a border that has all
the position in sizing and animation
bound and then simply inside the border
we have the the bubble so we don't do
this strange you know ancestor find on a
view model which i think is causing the
issue so we'll see if this fixes up that
was kind of a hopefully that's fixed it
and not be so that works load a page
okay there we go that's fixed it so the
kind of strange one I've never seen that
before
and but that shows then that because
when we're finding the page and updating
the view model we're directly changing
the chat pages effectively base page
view model object and that's possibly
why we change few model objects and not
necessarily view model and even though
view model is related to that it should
fire the property changed let's keep the
crashing so you should fire the property
changed on this due to Holly Weaver you
should detect that and raise that the
view model was changed whichever way it
isn't doing that so it's something to be
aware of and it's something you tend to
do anyways try to avoid using the you
know find ancestor when binding that's
like a last resort like this this is
this is kind of your last resort when
you want to do things but this is
actually finding that you know the
height of a grid element that is fine
but you really want to avoid that when
you get issues like this I've also
mentioned a few times in previous videos
this is just a wee VF bombing out
sometimes and not cleaning so if you
right click on your project click open
folder and file explorer you want to go
build clean solution that cleans
everything and building doesn't always
fix it so it might fix it now see it
still hasn't fixed it so you do a build
clean if that doesn't fix it then you go
to your close that down there or leave
that open it you go to the folder where
the project is you close down visual
studio so we shut this down completely
or rather you can just do file closed
solution whichever rather kill us
completely and then you go to the this
is for set a word so we go to the bin
folder and object folder we delete those
step up a folder to the source and also
delete this hidden BS folder if you
don't see this press alt on your
keyboard tools folder options view and
then put show hidden files and folders
here temporarily and click OK you can
delete this hidden BS folder now we
reopen peseta word that's basically
what's called a complete life of all the
build and all the you know what files
are open where your cursor is last
placed all sort of temporary information
about the project and sometimes WPF
needs this when it gets stuck now if we
control build it should build fine and
now if we go to chat page hopefully yes
you will have seen I think it was in
chat page the designer should now be
working again so there we go we also
don't have any design time data on this
view let's add some designs and data
and it's in the whole view isn't it talk
here so on the chat page the design time
data context is static sink or trap
message list design time model dot
instance and there we go so we have some
design time data as well for this view
so if you got that issue where sometimes
you think the issue sold because you
kind of caused that by actually having
invalid things like you know put that in
there and it can break the view so it's
try to compile you can't get valid
errors but sometimes you will get the
red arrow saying it can't create things
but once it's had that error
it doesn't recover you have to
completely delete those three folders so
that's that's really all the ways I
think that's all the the little bugs I
could find in the application but with
the been enough of them and I wanted you
to get a feel for real-world debulking
that gasps and solving problems because
that's one of again a key thing that you
can show problem solving but it's
usually in a made-up environment do you
know you've caused our if you know the
solution and you're simply trying to
show them how to do something very
specific whereas this is literally off
the cuff I didn't know about these fixes
we've literally come up with them live
didn't even notice this until Justin
that's been a good one to investigate
but I kind of naturally I just naturally
sold boxes it's hard to explain so the
best way to explain is to literally do
this just to start the video find the
problems and solves them live and
hopefully you can see my in a thought
pattern of how I start by solving them
like the scroll bar the first patent was
to remove the styling so it's back to a
standard scroll bar and see if maybe the
scroll bar was off the screen or hidden
for another reason and then when it
wasn't you tend to like do things like
explicitly setting course try to get
some visual or try to resize it so it
things should move over you know try get
some indication of of what's going on by
kind of removing things reading things
and seeing what the effect and work in
that way
in situations like this where this
didn't pop up you start breaking it down
to well what should this button do when
I click this it should fire the
attachment command and change the
attachment menu visible so you go in
break point into those and check that
that's been hit and it was and then the
issue that we were seen as effectively
wasn't showing up it wasn't popping up
with you know the visibility wasn't
changing so we simply removed the
visibility so it was no longer an issue
it was always visible and we saw that
that was okay so then we know the issue
is in the animation and that's where
you've then pinpointed your sort of
investigation to solve the problem and
that's really true for all errors and
all all the bulkiness kind of that
process of not necessarily adding things
I'm also removing things you know
finding finding things that maybe you've
added that have caused the issue or
breaking them completely you know remove
all pieces to get back to the smallest
possible working product and build back
up from there by re-injecting the code
line by line if you will and you know
seeing the impact so it's kind of cause
and effect what what do you do and what
does your cause of putting the code in
what's the effect me you get back so
that's that's really it for debugging
and I hope this reducible to some people
I know you'll be wanting you know videos
on making things but this is also just
as crucial I do get a lot of emails now
from people that watch these videos that
are asking you know there's a problem
here and I solved it for them but I'm
much preferred to try and show you how I
solve it because there's there's been a
lot of instances where it just takes me
a few minutes to open up and apply these
rules if you will to solve the problem
that people have so hopefully by maybe
doing a few more videos like this maybe
when people send me a a problem I can do
a really quick video and show you me
opening the project live without ever
looking at it and seeing how I solve it
and how I solve it quickly because
debugging is a one of those underrated
things that people don't don't tend to
learn I guess or don't know from I don't
know whether books train you I've taught
myself everything so I don't really know
if books corporate but I'm guessing from
the people I employ and the the general
sent us out there when you you see you
know the
issues people have debugging seems to be
a very a weak strength and a lot of
developers they focus on building
products but not understanding how to
debug and find out as the solves so
anyway hopefully this was useful any
comments any other book you find in the
application let me know and also let me
know this was useful and then I can do
more videos like this in the future</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>