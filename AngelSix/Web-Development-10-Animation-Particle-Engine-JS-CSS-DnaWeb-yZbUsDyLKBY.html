<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Web Development: 10 - Animation Particle Engine JS CSS DnaWeb | Coder Coacher - Coaching Coders</title><meta content="Web Development: 10 - Animation Particle Engine JS CSS DnaWeb - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/AngelSix/">AngelSix</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Web Development: 10 - Animation Particle Engine JS CSS DnaWeb</b></h2><h5 class="post__date">2017-11-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yZbUsDyLKBY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so carrying on from the last video we
are going to make new folder I'll just
start from scratch again because we've
got in the DNA web template create a new
folder type in DNA web into the command
line and that'll spin up the DNA web
engine make sure you using the latest
version 105 at the minute which you'll
see when you start it up here
if not then upgrade it the new version
on that open visual studio code for you
automatically in this folder and then
you can't I let's just start with the
new template fabric dot modern one which
I'll update after this video so there's
a lightly pull in the results of this
video when you come to watch the video
this starts off a website it's opened up
the browser in the background with where
we got to in the last video and it's
also got the folder open for as in
visual studio code automatically now so
it's one last step to do so that gets us
to where we were in the last video which
is here what we want to do now is have a
slide in mascot so I've got my mascot
here and I want this to basically be
part of a banner here which I'm sure
you've seen in the last video and pull
it up in Photoshop if you give me a
minute and we'll want this to kind of
slide in so open recent so you can see
here we want the mascot to kind of be
like a big banner but what I want to
have instead of this just being here I
want this to kinda slide in from the
left and do like a little shake and then
these particles want to kind of make an
actual particle effect that you know
glitters up if you will so gonna add all
that this part I want to type try to in
which is going to be more complicated so
well it's about the same complication
but we'll split that up to a second
video so this is the if you know the
thing we're after has basically this guy
sliding in so
let's start with I've got the mascot
here the picture I'm gonna flunk him in
the folder we've just made in assets and
images so you can use your own image or
you know make use of this for now then
we'll go to Christmas tree up code one
thing with us that I forgot to add that
add to all the templates in the fabric
engine to the standard header is we also
want to lock the zoom for mobiles not
necessarily locket you can still zoom in
but effectively fix the the zoom in
action on mobile so to do that we simply
on another meta tag its name is viewport
and basically we set the value to we
want the width to bid the device width
and I think it's that device with an
initial scale to be 1 and you don't
really need to be too much bothered
about what this is or what it does you
can Google what the viewport meta tag is
or basically sets the expected browser's
width here to the devices with and make
sure it's it's always defaulted to a 1
scale if you will and that just kind of
fixes common issues in mobile browsers
in terms of how it then loops when you
render it on mobile so I'm just chopping
that in and that will go into all the
standard templates and now I just want
to improve this slightly as we're gonna
our animations going in so this just
appears the menu so I want to like kind
of slide that menu down when it first
loads so to do that we will we'll go to
stand the menu here and we'll add a
slide in down class and then we'll go to
the sass in animation some other slide
in here so I'll do a dot slide in down
and I'll just be animate so animation
then we'll do called slide in download
all the animation we'll make it last for
I don't say half a second probably and
that's all we need then we'll make the
actual keyframes animation called
sliding down and then for that now we
just have a zero percent so you know
when it first starts we'll have the
transform to translate the Y so once it
starts completely out of the way so one
hundred percent off and we might as well
make it invisible as well so now it kind
of fading in at the same time and then
when we get to one hundred percent it
will simply set this to zero and this to
one so it slides in and down if you're
well so when we save that I think that's
all we need now - there we go so now you
see this slides down so which slowed
that down so you can see it you can see
that it basically slides in and fades
and the fades very subtle and so you
could have if we were to do let's do a
30 percent and it's still got opacity of
zero and we can kind of keep that
transform okay give it a little trim
strong keep it invisible for longer and
then as it fades in near the end
wouldn't even make that fifty percent
maybe and then we can speed it up no no
quite like that I think
and then 0.5 so it's nice and fast and
that's just a really subtle kind of fade
and up here so there's just a simple
animation to do that the other thing I
want to change is as soon as we scroll
this zooms up see Connor you're never
really getting the feel that it's there
for a while so let's just jump into the
JavaScript file
JavaScript let's scroll down and for now
let's just change the six
to take 200 so at least you can scroll a
bit more before it zoomed out the way
and then what else do we want because we
are gonna have this guy slide in when we
scroll up I don't want this see the
background color so no it's all the same
at the minute about to do the background
of this this is red now if we have a guy
here and then we scroll down he's gonna
get chopped off by this navigation bar
so instead I want this to kind of be
transparent at the start so he seems to
slide through it and then when this
reduces in size we'll bring the color
back in so to do that's quite easy we'll
just go to the top menu standard and
then also do this main color here which
is the color gets added
we'll start off transparent and then
when we go to the reduced class which is
here we'll bring the color back in and
let's just do it red for the moment just
so you can quickly see there the color
better so that's now you can see
invisible there and then the color comes
in but you can see it's also a harsh
bringing enough color so let's just fade
that in nicely so go to the transition
of the top menu standard and do
background color and then the transition
normal that should give us a nice fade
in there we go that gives like a
transparent top menu that then fades
over so that when our header Scrolls
underneath it will initially look like
it's going straight through and then
this will fade over and cover it but
once it's far enough down that it kinda
looks correct so we'll just remove that
red and now bring that color back to the
color we want
and I think that's it for the top menu
so now it's time to bring this guy in
so let's make this big here we'll bring
the guy in inside the main here so where
are we all have mascot and banner will
call us again then because this is a
header I'm going to use the header
semantic HTML from HTML 5 so it's kind
of descriptive for you know the search
engines then we'll once a grid wrapper
so we can do if you can't remember them
just go to DNA web and type live
variables and then you can see all the
variables there we want the fabric we
want a grid wrapper so maybe it's fabric
grid are there we have fabric wrap a
grid so Dola Dola fabric dot wrapper
grid dollar and save was that rad fabric
wrapper grid ever not found fabric
wrapper good for profile okay I actually
got a bug there in the code yeah
okay so I'll have to fix that in the DNA
code so for now then I'll fix that for
version 1.2 0.6 so let's see what the
actual there we go so for now I'll just
copy this out of here and paste it in
and I will fix that for the next video
I'm not sure I'm sure that worked
maybe I'm very recently broken something
in the code I think grid
nope so yeah I've obviously got a a
little bug in the code I'll fix that and
push this live you know very shortly
after video so we have a grid wrapper
which keeps the content within this grid
you know width as you can see here then
the grid then the column so that's all
your boilerplate stuff so what we want
is two columns you want one on the left
one on the right like this resize me
think here so on the left and I racked
grid so for that in fact we could
probably not that we need to we can
probably chop just demo call on the
column to get it show as well and then
maybe you've gotta put some content and
see it and a big demo grid that up there
a minute I just try and get the outlines
oh it's on the content inside demo call
no okay let's just ignore trying to get
the outlines for now I could just add
them directly to the style anyway but
we've got a column there and we want it
50% so if we do that it will be one half
as the class and we want two of them so
we've got two one harpes there and we'll
just put a and B in for now just so you
can see something you can see there's
half and half any of you reduce it stays
half and half so we want the guy in this
section the text in this one because we
want to be responsive we will change the
mobile one to one whole so basically
this class makes it so that when it's
mobile size the columns go to a full
width so you get down to mobile
you can see now they've gone full width
one on top of the other and then that's
too much full width so that's kind of
where we wanted so when we're really
small we'll have the guy just the full
width otherwise it split between two so
get rid of that B so now in here we want
the actual mascot now so I'll do a div
class and we pull this mascot background
and now we just want to make a style so
we actually have a mascot background
because this is a style specific to our
this exact website I'll just chuck it in
the style CSS for now not directly into
the template and we will do mascot
background first thing we want to do is
we'll bring in the background image the
oil and it's forward slash assets images
mascot PNG we just save that another
Luke I didn't work mascot background and
background notes a background image we
need a size so for height will set it to
say 600 pixels for now now which is a
you know a decent size this is now full
so you need to wrap them inside the size
of the container so to do that we'll do
background size and on background size
or other oh yes this background size and
then contain which basically means keep
the guy within the the width or the
height so now is flaps to width but now
he's repeating over and over so we want
to remove that repeat so background
repeat' to no repeat and now it's gone
I'll start adding some comments don't
repeat image shrink to fit
mascot background-image decent-size so
that gets us to there the other thing we
want to is as you'll notice if this gets
bigger
you can't tell much here because of the
size but if we inspect you can see there
the grid when we look over the column
you can see that the guy is basically
centered and not pushed to the right so
because of this or at the bottom this
glow you can see there is it's just not
quite over so we'd also want to we'll
float him
no--don't new flow to mr. background we
didn't see background position to the
right and that hasn't changed much
actually but in fact that he changed at
all I'm just thinking of this picture
changes at all we want to keep him to
the right hand side so this was don't
know 400 there you go so have you made
him smaller
now he's shifted so he stays on the
centerline which is what we want and
then we grow him to whatever size we we
desire so if we don't position him to
the right and we add it 400 then he's
gonna be over that side so the only kind
of shift him to the right so he's always
in the center and then we are still at
about 600 as a size that seems a good
size and then the only thing there is
when we go to mobile we don't want to
you know don't want him to the right we
want him centered because now he's
slightly off so to do that we do the art
include media breakpoint mobile so then
anything in here only runs on mobile on
mobile
Center image so then the background
position will be Center and again you
can't see much difference but it's all
it's all based on the size of your
picture so the picture is smaller you
want to make sure it does definitely
stay centered so it's just being sure
that he does so I think that's that's
the guy in in fact the we also want to
keep him to the top the Y position to
the top I'm going to add a slide in
animation which I think in the animation
I'll probably just Chuck the the X to
there as it the X otherwise no I want to
keep the Y to the top don't we let's put
it in mmm I'm trying to think we want
basically want to chuck the semi dot but
I want to animate him in first so the
animation I think I'll override the the
translate position anyway so let's just
add the animation and let's see cuz you
want this car to shift up but I want him
to slide him first
so let's go to the animations let's make
another animation we'll call this one
slide in right shape because I want it
to slide him from the right and I also
wanted to do kind of a lot of shake so
we all come in and then just do a little
dip back and forward like this is gone
so I want him to slide in and then do
that so there should be quite easy the
animation itself will call slide in
right shake so we've got a class called
it under animation called it which is
fine and we'll do the standard
transition time and then we will also
then here make sure the transform
translate X position by default is 0 and
now we make the actual keyframe
animation and this is the slide in right
shape
copy and paste one of these for a minute
so the transform this time we will want
to translate the X this time why we want
to start off the screen again which is
fine and we'll also start invisible so
it's all the same then we want to slide
and pretty much all the way just let's
say about 70% where we want this to be
slid all the way which would be 0 but
what we want to do is add that shake
just get rid of this opacity now till
the end so once it's slid all the way in
I think if we save that well Mars my
season off so 70% it'll slide in fzero
it had come all the way back to it
started we want to overshoot by say 2%
so he goes past the point of where you
know it should start then we'll go to
say 75% and we'll go backwards 2 so
minus 2 and then I'll go to 80% and just
go back to 2 again and while 85% so this
is where we're just adding the shake you
know right near the end of the animation
so this time I'll just go back minus 1
and then at 95% say we'll forward 1 and
then finally a hundred percent will
simply be where we started and opacity
is one such as easy as it is to make
animations it's nice and easy quick and
simple so we save that we haven't
applied the animation yet so now we need
to apply the shake in right slide in
right shake class so to do that in our
style we just override it or other
extend it as its called
so extend slide
shake no no we saved that we can see
slides in our no the other thing I
wanted to do with this let's well that's
first let's just took this translate in
transform translates y2 0 that should
shift was it the outside of the
background position background bear with
me I'm just trying to think it through
me head background position why that's
it
so that should have also worked
background position wise been overridden
by what's it being overwritten by
background position rat coming after it
so we would have to plunk it therefore
order of importance and their yoke
shifted to the top and then mobile I'd
need it as well because of the override
of position so you're doing send to that
I mean maybe there's a position that's
got sent to top I don't know maybe it's
enter the top like that and then we
don't need this which it probably is so
right top maybe that does the same thing
there we go so it's sent a book top so
center on the x-axis top on the Y that's
got him into position where we want he
animates in that animates in right so
next thing we want now when you scroll
you see some site so see now he goes
over as I'm saying that that's what we
wanted these head kind of goes over then
it fades out but initially it looks like
he's you know he's scrolling up and said
again instantly chopped off so some
sites you'll see that you get like a
parallax
effexor when you're scrolling this
banner if you will here kinda seems to
start sticking and coming down and
acting like it's on a different plane
you know it's it's traveling at a
different speed than your scroll so
we're gonna add that to this guy and
again there's no need for complicated
libraries and the first thing most
people will do again as I always say is
they'll go and download a JavaScript
library and it'll be you know a kilobyte
long go it's got loads of crap in and
it's literally about gonna probably make
this in less than 50 lines of code so
we'll just go ahead and make this guy
parallax when we scroll down so let's
make a new javascript file for now and
again we will move to typescript shortly
call us DNA scroll dot parallax j/s
include that in the HTML then go to the
new class do the usual onload but you'd
like to keep your naming my function
every time my time so wait for the page
to load like we do with everything and
then we'll now have selected items very
similar to everything else we've done
document query selector all to basically
find all the elements with a data
attribute and we'll call it parallax
roll background and then in order to
find that Parliament we will add that to
our HTML so our mascot background here
let's just add the parallax to we're
gonna give it a value as well so we can
change it so we wanted to scroll at half
the speed it should so between 0 and 1
so this now will find all elements find
all elements with data attribute
then for each of those because what
we're gonna do is change the background
position wise and bump it down so if we
were to scroll down here and this guy
wanted to scroll off the speed what you
can do is basically get the background
background position why and you can set
it to say hundred pixels because he
jumps down or 20 or 30 or 50 so all
we're going to be doing as well as
scrolling we will start shoving this guy
further than further down the screen
using the background position wise so
I'll use the for each helper selected
items and the item here because we're
going to animate the background we're
gonna make sure
by default the all habit so we'll do
item which is the element but we'll call
it element so element dot style which is
the CSS style background position y
equals zero pixels so we need to do that
because we need to make sure if we're
going to mess with the position
it starts off before any animation with
it set to zero again in case our CSS
style changes it fix all backgrounds to
start at y 0
then what we want to do now is on scroll
our function and again for each every
time we scroll we'll go through the
items again gonna copy and paste that a
little bit quicker
so when we scroll for each Parliament
and then we want to get the get the
element size and we'll do that with
elements darts yes I think it's bounding
but now when is it bounding client reps
or something like I think that's it we
then want to let's just consult doc
debug that out make sure I've got that
first and save go to the console and
scroll there we go so you can see as I'm
scrolling the guy we've got his ex which
never changes as Y which you can see is
changing so we go to the top is y is 144
pixels down as we scroll he gets brought
up as he gets chopped off the Y goes to
a minus because it's based on the
position of the view so y 0 is up here
and then the further downs you know
higher number and anything above you
know out of view as a minus so we can
detect when this guy's out of view when
the bottom here is a minus figure so as
we scroll when he's nearly gone you can
see bottoms 200 scroll and then
effectively there now - so basically
when the client bounds bottom is less
than one this elements out of view and
we don't want to keep processing it we
don't want to keep pushing the you know
this guy down and down and down all the
time when he's not even in view
otherwise again it boils down to that
the issue where the a to work but are
you aware of how much work you're
putting on the browser so you got to
keep it light so only nudge down
background when it is in view so then
we'll do if client bounds
dartz bottom is less than zero just
return basically don't do anything and
now if we did the console dot debug
again you could see that happening
client bound well now we only get the
output while he's on screen and then
once he's gone you see now we know long
again update as we scroll back up starts
updating again so now we know we're only
running this code when we need to the
next task is to we want to get that
value we put on the the item here so we
can actually get that value and move it
by the right amount
so get parallax ratio ratio equals
element get attribute and its data
parallax roll background we pulled it
and then from that we want to calculate
a bump why I guess we'll call it and we
want to basically get the as we saw here
as you're scrolling down the really the
thing you're interested in is you want
to start bumping this guy once the top
of him so here the top gets in a -
figure basically so the further out of
view we get you want to start pushing
him down to make him look like he's
staying where he is so that will be the
- climb bounds laptop times parallax
ratio and then the one thing you've got
to be aware of here is we don't want to
bump him when the top is you know below
the top of the documents like right now
here that would be 144 times 0.5 it'd be
70 so it'd actually be pulling him off
so we just want to make sure we only we
only want this guy to shut down when top
is above zero so to do that you can
simply do a math dot max so we get no -
figures and it's zero all the result
we've got so that will keep the results
clipped so if we
then do unsold debug bomb y-you can see
basically the value we'll be looking at
so there's nothing there while we're you
know he's above there as soon as we
start going below we're basically
getting all that is there is the amount
of Y value that is off the screen but
times by the coconuts from the wrong
visit well actually I can stay in that
position that's fine it's basically the
amount we want to bump him down
so we scroll to the bottom and he's like
288 there if we were to change the
parallax value then to like 1 so it
should bump down the full amount that
number should be larger now they go for
90 so we know we've got a value that's
basically increasing the further out the
way of the screen yes and now also need
to do is just simply apply that to that
background position so apply it to the
background position so that will be
element dot style dot background
position y equals bump Y and turn it to
a pixel value and now when we scroll you
can see he gets kept further down you'll
also see that this is really jagged II
so we'll fix that in a minute to this a
few issues here but you can see the
general thing you scroll and you can see
is being pushed down quite clearly
because now he's feet again chopped off
further and further so that's given you
a parallax e style but let's first fix a
few issues so number one is you see this
message we're now getting we're getting
a warning the site appears to use scroll
linked to positioning effects because
this is such a common thing that people
do and it's warning that it's not a good
idea basically it's a you know a poor
implementation so the only reason this
is a poor implementation is because when
we're running this function on scroll if
we went to our scroll core here on
scroll we basically get the scroll we
wait for a certain amount of time then
we simply tell it to process the scroll
but the main JavaScript this scroll
without going too much into depth this
multiple threats on the whole rendering
and that the way that the web works so
your JavaScript is run on one thread
your updating of the UI is run on
another thread so by running this
JavaScript on scroll it's not on the UI
thread and then invoking a CSS based on
that value and updating the UI you
basically out to sync which is why you
get in this jaggedy effect so as you
scroll you update the position but
you're updating the position before the
UI is updated itself so this guy gets
shunted down then the view gets scrolled
up and that's this jaggedy effect so the
fix for that's pretty simple so the one
thing we need to do allows the only
thing we need to do is we need to call
what's called requestanimationframe and
instead of calling this directly we want
to call is it just request animation
frame I'm pretty sure it is request yeah
request animation frame so to do that
but I think this is only supported on
certain versions we can do it can I use
on that and see but I'm pretty sure
that's we could get it you know for all
the ones but honestly it's that it's
kind of a dag to effect if the browser
doesn't support this request animation
frame we can make a fallback but again
under let's make a fallback this for the
sake of it so we'll add it to core I
guess
universal request animation so if we do
that we'll just set it on the window
which is the default of where we will
get when we say request animation so
that's the one which are called but what
we'll do is set it to either it's self
orbit already exists so we don't
override it's really there if it doesn't
exist which is what you'll get with this
or then
we can then drop back to the browser
specific versions which is the prefixes
like Mars and then requestanimationframe
I need you to put capital R and then if
that doesn't exist you do window darts
WebKit and then capital R if that
doesn't exist you fall back to the
window is one so these are all just
vendor prefixes and finally if that
doesn't exist you can the screw just can
have to make up a function yourself
so we'll then just make a functional
which does a set timeout and it will
call it every 60 seconds say there are
60 times a second rather so 60 frames
per second I don't need that there need
and that's it yeah so that should be a
universal request print animation for it
now so this should work in every single
browser even the old ones and also we
need to do now exchange where we call
the process on scroll to now call
request animation frame and what this
does is it now puts this on the UI
thread and runs when the next rendering
of the UI happens so if we save that
human I'm screwed anything up which I'm
not stuff occurs we've still got window
dot requestanimationframe is not an
object in scroll core and why is it not
object window dot request
okay let's remove this a minute window
dot request animation frame I'm sure
that's what it is
request animation frame as deaf out and
gone I've left the function because
we're calling a we're passing in the
function to be calls you have to remove
the parentheses that's what it says I'm
hoping there we go now we've screwed up
somewhere else doing well here then help
line 64 maybe oh now I messed that up
finally there we go so now we're
scrolling you see it still jaggedy
bought we've not got the warning anymore
because we're correctly running on the
UI thread so the reason this will be
jaggedy is because if you remember our
on scroll callback only happens when you
know it limits it by almost 100 it just
really cuts down so we need to add and
this isn't a rare occasion you should do
it as to to update the scroll to call
you know to be called every single pixel
because you want this to be smooth so
this copy and paste a scroll callback
and call it scroll instant callback will
get the on scroll function copy and
paste that and we'll call this on the
scroll instant and we'll call this
scroll instant callbacks and process on
the scroll will copy and paste that and
on process on scroll instant for each
scroll instant callback stores it is
copying and pasting and renaming so now
we've got a bunch of functions that you
can call on scroll instant and process
on scroll instant and then we'll copy
this process and basically now every
window event at the very top so every
single scroll that gets hit we will
process the instance Scrolls so if
somebody out hooks into process on
scroll instant
it will be called all the time so if we
then change this parallax on scroll to
on scroll instant well now hit a lot
more and you see we get smoother action
now so that's the that's the parallax
effect and you can see it's a lot
smoother when we don't have the
debugging window open as well so now
there's our kind of parallax effect
where the guy stays you know gives a
kind of motion effect and that's now all
controllable by this number so you can
change this to like say point nine and
get almost a complete you doesn't want
to move type thing and if you do one
technically you get a stuff to get means
you'll be slightly up static due to the
the JavaScript book it practically stays
where it is as you can see so it's all
depends on how much effect you want for
my effect I think that original 0.5
seemed dewy enough it's just a subtle
effect that you kind of notice he's not
quite moving off but it's very softly
it's not overkill
then this guy animates in so I think the
last thing we want to do now is see
these little particles here and the cool
on the image and they look really good
but they are just static so I want to
bring some kind of actual animation and
here where there's it's kind of a part
of lunging going on particle effects
coming up his hands so we'll make that
next so the way I'll do this is if we go
back to here I'll basically Chuck in
well in general let's make the particle
effect that simply works on it like it
ideal for anything really
so we'll do a div here we'll do plus
equals particles I guess and then for a
span inside class equals a bubble and
from that we can do and then have let's
just make this some size so you can see
so if we just trip a block in heat and
see where this block is now in fact
let's just do border so you can see
where that is now that's the block by
want these particles to appear in say
and then what we do is you put a bunch
of bubbles in that will inject with
JavaScript to make them random but let's
put one bubble in for now let's make a
new folder in fabric called particles
and in here we'll have a new file called
DNA dot fabric particles and let's just
make the style so we just call these
particles which is the top level one and
we had a bubble so the top level style
and then also let's include let's go
back men save that include it in the DNA
fabric thing here particles being a
fabric particles then a wider to nobody
stuff and a why the fonts got a
underscore in an extension there we go
so we've added the styles we've made one
here so now if we just make sure this
works so background read and save there
we go so our style in that so what we'll
do with these bubbles is make them
position absolute in here so we can
simply set the width and the height to
like or the top and the left whichever
to a set value of a percentage and
randomly place these bubbles all in this
container so to do that the parent needs
to be positioned relative otherwise the
absolute position bubble will be
absolute to the you know the top level
document not the container make inner
elements absolute
position based on our position not the
parents that's basically what that's
doing
that's a bubble so let's make a bubble
will do just your width 8 pixels height
8 pixels background RGB a and I'll just
make them this kind of blue color for
the minute is just really sort of much
so that'll be about 50 2 3 2 2 5 5 never
that it's solid then we don't see
anything right now why is that particles
with that solid red bubbles yeah that
should be there why is that not there
position:absolute okay so they just need
position:absolute what we're doing
anyway so position each bubble absolute
and then we also want to round that
clearly so border-radius should make it
a hundred percent or fully round and
that's kind of a bubble we'll just do
say now the top is 50 percent down
randomly the left is 20 percent and
again this will change with JavaScript
so there's a little particle it kind of
looks like that and now we're gonna just
animate in a repeating pattern when it's
animate it up like it's glowing and just
you know disappearing so we'll go to the
animations let's add another one we'll
call it bubble up and they'll have an
animation of Babur
make it last say 3 seconds and ease in
so it kind of slowly bubbles up like a
bubble would and let's just make it
repeat infinitely
animation help comment more of these
after before I commit and then again the
keyframes for bubble copy and paste this
saves a tiny bit of time so we'll start
the bubble off invisible which is fine
then we will kind of have a delayed
start if you will where it's it fades in
so first it appears fades in then
transform will do translate translate
the why is it yeah and that B will go up
by 20% so we'll start gradually going up
and then at 100% and bear in mind this
is this is based on the width of the
particle itself so it's based on this so
it's 20% of this is barely gonna move
it's gonna move 20% of 8 pixels so
she'll move like two pixels in the first
fade in so practically nothing so 100%
is only going to move this bubble from
here to here it's barely gonna move
anywhere so we'll do like a thousand and
that will make it move 10 times its own
width so about up to there and that
means also then the bigger the bubble
the further it moves so that'll actually
cause tiny bubbles to move less and big
bubbles to move further which I'll add
to the kind of random effect if you will
so oh and then also you want it to fade
the bubble to fade in fully then move
hoping as it's moving up to fade back
out so you want to change the opacity
back to zero and that bubble up now we
actually need to then apply that style
so now we just want to animate so that
we will do our tips so extend bubble I
think
and there we go and there's like a a
little random bubble just appearing and
fading so also need to do with that now
to make it look correct is some
JavaScript that randomize is this dumps
a load of bubbles in and you'll see them
when they're all over the place and all
impositions that will look quite cool so
to start with make it invisible to start
before the JavaScript gets chance to
kick in the positions already absolute
we've extended the animation will remove
all this because will set all that by a
JavaScript make background a nice blue
this should really now be the Vice just
put that back in a minute
this should really follow your theme so
let's say this was color one and we
saved
oh yeah no call tell us because that's
the background color so that would
probably be the color of bubbles you'd
expect but I think we do have this color
in our theme anyway there we go so this
is now following our theme and because
I've designed this site nicely my color
matches you know that so what's that out
to call three remove them step default
and you can always override that
obviously for Bob caller make them round
so there's our style that's all done and
dusted out the way now it's time for a
bit of JavaScript again so we'll go down
to the JavaScript we will need another
file save this in the JavaScript folder
called DNA dot particles I guess a
little mini particle engine and it's
there yep let's add it to the index DNA
dot particles this now we can remove
while let's leave that in actually just
get rid of the border we kind of know
where it is
the bobble we won't meet because while
in jackpot with JavaScript's let's just
remove the bobble so that's ready for
the JavaScript now so in the particles
let's get this started again so we have
let's make a function actually to call
it call this because you might want to
make all the different parts of effects
they'll say particle bubbles is the
effect that we're doing here
so as usual get all elements that want
bubbles
like a tie so bubble elements equals
document dot query all selector and here
we'll have data
particle bubbles and then we will go
ahead and add that to our thing here
where we want the bubbles injecting and
again we'll pass in a value in might as
well and this will be a value of I guess
the percentage of how many bubbles we
want in the whole thing so it's gonna be
based on I say 0 to 1 against all do 20%
see so 20% of the width is how many
bubbles kind of density if you will will
make it kind of a density factor and
then for each of them so for each bubble
element function element and then what
now we want to add bubbles add number of
bubbles based on a percentage of the
width so that will be ball count
and do almond dot offset wit forget
based on the width of the you know the
element that we're applying it to which
is that two hundred pixels in our case
and we want to times that by the
elements data attribute which is this so
that will be point two in our case and
then we'll just do a example data
particle bubbles equal zero point two
well twenty bubbles two element hundred
pixels wide because that's twenty
percent so that's kind of an example of
how to use it then we could do if debug
that out first make sure we've got what
we expect so we've got a two hundred
pips lovely we've got 200 pixel wide so
we should expect forty from that bubble
can't think can go we've got a call that
function as well so unload function just
call the particle bubbles that's there
you're forty so he knows we're expecting
forty bubbles which is good so now we
know we just want to inject forty spans
into that island which is easy enough to
do so before well we could then just do
for our I equals zero is less than or
equal to bubble count now less number
walk out this is a zero index i + plus
loop each bubble and then here you would
then just do element dot in a HTML and
then add to the bottom of each a span
with a class but let's wrap that in
single quote system so we can do double
quotes in here plus equals bubble
and that will inject then if we look
presumably particles here we should have
40 spans in so now we've already
injected all the bubbles we just want to
position them randomly so to get a
random number let's go to DNA core I
might just add a core function I will
call this random number and then we will
accept a two and a from or a from and a
two rather generate a random number
between the two values and this is easy
enough you just return and what we want
to do here it's basically you've got
math dot random so you can just do math
dot random but math dot random will just
generates in the mood between zero and
one
so to get a number from zero to one
you'd have to do times the two and group
that and add the from so by default
you're always starting up from and then
you're going from a zero to one number
there times where you want to go to so
if you want to go to ten say from one to
ten this would be one all the time and
then ten times a number between zero and
one so if it was one it'd be ten times
ten in fact that that should be slightly
over then so what you'd want to do is in
fact I don't think this can never
generate a warm can it
oh you can so you could be one over here
well not bothered about that for now but
what we will do is floor the result so
that we keep it where are we
we'll keep it rounded to you know a
specific number so you know exactly
between those two we have math.floor
random one more bracket there there we
go
so that should generate a number between
the from and to so let's just check that
a few times so console dot debug random
number between say five and fifteen I
should dump that in loads refresh and
that clearly doesn't work that as a
number way above what we specified so we
have the two Oh with the two is
technically two - from isn't it there we
go
right so there's the number now that we
expect so that will be between so
that'll be the difference now so if you
wanted to go from five to fifteen this
would be ten so then you'd do a number
between one and ten plus two five that's
it so now you'll get a random number
between the two what I have noticed as
will help is you can see this doesn't
seem to be that random can be at times
but what I've found with the random
function is a view basically times it by
ten and divided by ten is sometimes adds
a bit more randomness but for now that
I'll do so if now a random number that
we can make you solve like that so let's
put that into practice with randomizing
these bubbles so we want to first get
the the size I guess let's make the
random size so
bubble ask full-size random number
between 1 and 8 pixels say then we'll
get we want it to start up and down
random and left and right random so
start say between well between anywhere
or man you don't go to the top part
between bottom 80% say so I'll have that
as the top as random number between 0
and 80% and then anywhere along the
width it's fine with me
so the left will equal random number and
again it will be a percentage so between
0 and 100 and then if we do in here noun
spam bubble style equals our top equals
it's not top equals its top : and then
the value and percentage it will be the
semicolon so just haven't put the value
in yet
I mean point in so it looks easier left
to be 0% with a B pixels wouldn't it so
a zero pixels height zero pixels so that
is all the values and then basically
where you got the zero now you know but
single quotes bloody stupid and do
something the single quote single quote
boss plus so inject in here the top and
just copy that kind of injection in the
left we then do the left the width is
the size
and the height is the size and then one
other thing we can do is randomly start
animation at delayed time so delay is a
random number between say zero and four
seconds and as well as these styles we
can add another one which is called
animation delay so that'll be animation
I think is just animation - delay and
it's like that zero seconds
so again then we'll take this bit here
replace the zero and that can be the
delay there we go on let's jump that
down to new lines so it's easier to read
I just left plus yeah we kind of don't
care that Center just there just easier
to visually see this way so that helps a
little bit with visualizing so now
insert football if all's gone well this
should now generate kind of a bubble
effect and you can see they're all going
in batches though they're all quite
defined and something's not quite worked
there because that isn't random that's
very much you know I can bunch all one
and a bunch of all another so what have
we done here
hmm did we not want to floor the whole
value maybe because something is not
it's not quite random never don't feel
so oh I know what we did when we did the
random number that's exactly what we did
we flawed the entire result not just the
result of the from two so we actually
wanted to do that because random is a
floating number then times by the
difference we Florrie to simply remove
all the decimal points from there what
we ends up doing was flowing the entire
result well that's still doing it
it's just not flow it anyway let's just
go there we go so we don't have a flawed
result and that kind of creates like a
bubbly effect that we can play with a
little particle effect and it's all
random every time God so we don't always
want to start it with at the very start
us always delay a second so this guy can
come in then it starts bubbling so that
looks that's all right you can just play
with these values and mess with whatever
you like there it's like you might want
it to you might want more in there so
you might want just changes particle
value say one which will go back stream
you'll have loads or bubbles you know I
think that's too much for an effect but
it's up to you on what you want I'll say
point two is about right so now all you
need to do is get these bubbles hovering
over his hands so that's really the last
a little trick to this so all's we need
to do then is basically took this block
now into
into this place so let's start with
let's remove the style from here
directly we'll change this to Muscat
particles because this is gonna be
specific to our mascot you know it's not
a universal one we can chuck in the the
fabric engines it's very specific to our
design so I'll go to the style.css don't
want the press now
aash have just deleted the file there it
does I was lucky to chop that back into
the folder so you go back into there I
think that was where it was
yep let's try that again without hitting
the Delete key up change keyboard you
have again so I'm not used to the
keyboard yet right then so now we have
Muscat particles we're gonna call it and
in here
first we wanna extend the particles
class so we still we get all the effects
of you know the particles then we can
just do say for now again with 200
pixels height 200 pixels background red
just to make sure still exists so there
we go so we know we've we've reapplied
the style we're now getting bubbles
inside that block so that's fine so
instead of doing that then now we want
to let's drift up a border on there so
we can see where this is constantly
going and now we will have us get the
position right first so because this
background floated to the right so let's
also float this to the right
blow to the right much background image
then we'll also have the media
breakpoint for the mobile and when we do
that we want to float nan because the
backgrounders were bloated when it's
mobile it's gone to the center so we'll
deal with that differently so let's
start with the big one first anyway
float to the right let's set a height of
say 200 pixels for the minute width will
go 70% because it's going to resize so
there's roughly where we are we want to
probably want to put a margin there so
it's just Chuck margin right of about
20% that's a bit far maybe then margin
left 20% think maybe get rid of the
width yeah
so I'm floating yeah there's floating
there's no I float right height to 20
maybe bit more bring it just down behind
his arms just make sure there's no other
size with him as well so that isn't
that's not society Matt something is not
working here with there what's not
working that size should be changing hmm
just inspect this
centered why's that something's not
right that that is not 20% time alone
I've tapped 20% 20% I wanted 20% 10% on
the right there we go that looks better
because the image this actual mascot
image he's technically off-center in the
PNG so I'm kind of having to shift it
over that sounds not far off there so we
were to shift the ride to 12 and up to
18 maybe no 19 and 11 there we go and
then if we were to now drag because
we've used percentages it keeps the
percentage the same the only thing
you'll notice now is the height wrong so
as we're getting smaller the hats just
squashing down and getting bigger so we
could do I don't know looking to the
height as a percentage as well because
we've set this up specifically as a
pixel size on the height but then when
the width shrinks the image shrinks so I
don't thing we're gonna be able to fix
the heart I think what we'll just have
to do is a couple of breakpoints so
let's do that's a much image percentage
width to shrink with image fixed much
width just in case it goes too big I
don't think that will affect anything oh
we remove that anyway never seems to go
too big budget don't want this growing
in fact yet there's no reason for that's
not ever going to Big Sur we now do the
include media break points and we've got
the desktop I think which below a
thousand pixels button keep it on one
line
and just change the height so the height
when it's a bit smaller as try 170
pixels or having us
why does it think I'm on desktop all the
time sure that just altered oh yeah so
you're not desktop desktop to the
biggest one below desktop so when you
below the desktop go smaller there's the
big one then we reduce and it starts to
grow there and then we hit the other
breakpoints that snaps just in time to
keep it kind of realistic again and then
as we get smaller probably want another
one here so that will be reduced height
as we shrink and then below desktop
below laptop now and then we'll go a bit
smaller again at 1:30 and if you want 20
there so a mind you then with a bit too
small there that's try 130 again that's
better so then we have get there shrinks
shrinks it's now the only thing we've
got to fix is the mobile so on the
mobile one because we go Center we
remove the float instead let's just
position it absolute
and then remove all the margins because
we've got the margin cept above
otherwise that'll confuse us let us now
do the left we should be able to do the
same thing as the percentages but this
time on the actual physical position
let's try what did we set it as 11 and
19 but less he's centered let's just
start 20/20 and see and oh the width has
got to be removed as walks out 70
percent removal margins reset width and
no one will go small right what slightly
off we need to push to need push out a
bit more so 22 and we need to reduce
that a little bit maybe 17 a little bit
more too much there we go so that's now
got the the mobile one I don't like the
height again that we can't change the
height now based on mobile you've only
got that break point so let's try and
get a bit creative there and let's
change the height to as much you've got
a heart you can use called viewport
height which is kind of the size of this
the size of the like what would be
effectively said in mobile phones
full screen height it slots trying to it
as a percentage of that the 35% of the
views height that's way too big
oh I know what we'll do we want to
proportionate to the width so as the
width rinks they're shrinks that'll be
better so view width now as we grow well
that's perfect because the image is
shrinking the width gives us almost a
perfect ratio to keep that in position
so we'll keep that red around the guy
there we get bigger it stays around get
even bigger so that I think we're
managing to keep that red block you know
around where we want it to be so let's
just finally remove this red border now
and let's have a look so this guy swings
in and then all these cool particles
start appearing around him and fading up
and as we scroll down we've got kind of
a parallax effect going on and also you
can see these candidate also looks good
cuz these particles kind of start
whizzing up you only see to be a scroll
fast book it's a very subtle effect but
they kind of start shifting up out the
way as well like zooming off his hands
if you see just here I think that gives
kind of a cool effect it's all really
subtle but that all adds up to the
overall effect it's not in-your-face
it's not not overkill with stuff going
on it's just really nice and so on so I
quite like that so that is basically how
you create a parallax scrolling image
and animating in and shaking and a
particle engine all in about maybe an
hour or so and the overall code has not
been that bad the parallax is 32 lines
of code particle engines 44 lines of
code so I can say barely anything to do
JavaScript effects and things you don't
need libraries just make it yourself and
then clean it up so what I'll do with
this now is tidy or comment it commit it
all into DNA web and then all's you do
when you start the video you'll type
into here new template fabric modern one
and you should basically end up with
this complete thing anyway
and then you just delete it and recode
it yourself or look at it that way but
hopefully this has been useful next
video we'll do is the typewriter effect
so this guy or kind of slide in here
then the typewriter will start typing
here and it all makes it more animated
instead of static and then we'll go on
to padding out the bottom of the side
but really they're all the hard work in
the site's been this top area where the
most you know your first view of the
website which is what you want to make
the best impression in the first place
this is where we focus all our attention
and then when we scroll down it'll
mainly just be content with you know
some basic animations but we'll make use
of animations really really liven up the
website so again any comments questions
just leave them in the video and I'll
get back to you and hopefully this was
useful</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>