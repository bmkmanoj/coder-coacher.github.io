<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C# Programming Tutorials: Beginners 08 Creating a Calculator Calculating Equations | Coder Coacher - Coaching Coders</title><meta content="C# Programming Tutorials: Beginners 08 Creating a Calculator Calculating Equations - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/AngelSix/">AngelSix</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C# Programming Tutorials: Beginners 08 Creating a Calculator Calculating Equations</b></h2><h5 class="post__date">2016-12-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oOAeCOQ8yCs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so carried on from our last video we're
going to finish up this calculator up to
the point where we can do some basic
calculations plus minus divide times and
then we're going to move on to other
things this is gonna get fairly
complicated too fast to fully complete
and we will come back to this calculator
once you've done more advanced videos
and then we'll finish off the more
advanced things such as handling these
order priorities and doing more than
basic calculations so that you can fully
understand what we're doing here so the
last few videos you've learned a lot
doing this calculator and we've learned
about string replacement parsing
switches we've done some link so you've
gained a lot of knowledge doing this but
now it's getting to the point where this
is gonna start becoming too complicated
to follow at all so we'll move on to you
know fresh applications starting from
the beginning and and going over some
other things so let's finish up this
calculator so that we can at least do
some basic calculations in this video
really learn we'll go over switches
again which you've seen before and will
effectively resolve the equations like 4
plus 5 divided by 2 times 3 type of
thing we'll do it you know that final
stage so let's get to it
so we left off here the last time it was
quite a long video so we effectively
just stopped right in the middle of our
trucks we were in the middle of parsing
the input string that the user enters so
we press f5 then you'll see the
calculator and we type say 4 plus 5
divided by 3 and hit equals we then get
to this point where we do the pass
operation we put a breakpoint here and
we press equals you'll see the input is
that string then we first remove all the
spaces so we get a nice flat equation
we'll create a new class of operation
which we created we start off being on
the left hand side and then we started
looping through this
the string so but one at a time starting
at the first positions they're starting
at the number four in this case and then
each time we go through we're gonna
start figuring out what each thing is so
we've got right now we've got a check
for whether it's a number or a dot
because it could be a partial number and
if it is which a cover on the left side
of the operation at the moment which are
so we add a part number to the operation
we've currently created so to the left
side of the operation we add the
character and all this odd part number
dead it was effectively added to the
string but first it checked if there was
already a dot in the number then that's
invalid because a partial number can't
have more than one dot so now we need to
go ahead and do this everywhere on the
right side which we obviously haven't
done the code yet to swap over to the
right side but obviously this is where
we'll check in for a number we know that
we can't be on the right side so if it's
not left side we know it's right side
copy and paste that code above change it
to right side and change that to right
side and that's as simple as that if we
set this left side to false and then the
next thing's a number it will then try
to add it to the right side and still at
the left so that's really it for the
number we would check of it's for number
and we add it to the left or right side
that's this if statement done the next
thing that we expect in part of this
equation is these operators so a plus a
times a minus or divide so again save a
little bit of time copy and paste your
code now you can just do another if but
because this if if it's true then the
next one can't possibly be true because
if it's a number then it can't be a a
plus minus times or divide so you can in
this case you do analysis and that
simply means you could absolute if this
wasn't a of and that was an even it
could be this and could be that then
that's okay but if you're expect
in one or the other to be true then you
use EV or alsep because then of their
Serbs true it won't even try to evaluate
this because it's same else so else
means if that wasn't true then try this
one so this is a case where we're
checking the type of the character and
we're only expecting it to be one or the
other
so it's an EV and then I'll save and we
might go into the analysis of a little
more detail in a short video perhaps in
the next one so also dollars copy and
pasted this statement and change the
expected characters to plus minus times
divide so the code stays exactly the
same and we'll explain this in the last
video
this is checking if the character is
equal to any of these so this will know
check if this is an operator so and none
of it is we want to set the operate the
type so again similarly if we are on the
left side or the right side we need to
do different things so over on the right
side already so if we've got the left
hand number then we at some point got
this operator and then we got the right
hand number and then we hit this next
operator so in this situation if we got
into here because we had an operator and
we're on the right side then we should
calculate we know then we've got a left
to right and an operator so we should
then go ahead and calculate this section
use this as now the new left-hand side
set this to the operator and then carry
on to the right side and so repeat that
loop so this will just jump backwards
resolve this and set this to the left
side so again we haven't done that bit
yet but we know that's going to happen
but let's make a note of that so over on
the right side already we now need to
calculate our current operation and set
the result to the left side of the next
operation so if not the left side so in
this case that means right side
obviously because if you're not left
you're right
you're one or the other we get operator
type and we need to do operation type
which will create in a moment from the
input so all this is gonna do we created
this operation type enum over here for a
nice easy human readable statement of
what the operator residents that are
checking for a string so we're just
gonna pass in that string of effectively
applause a man at the x or a divide
hoots for a doctor and then we're going
to return an operation type so let's
create that function so it's gonna be a
private operation type and it's cool yet
operation type power-ups wrapped in
character has an input this is where
we're going to use the switch again so a
switch is like a lot of air for our subs
as we went through an approval so you
say switch you pass in the thing that
you're checking open and close curly
brackets like an if statement you use
the word case and then you expected
value and then a colon and then you do
whatever code you expect here I know it
wasn't to return something you'd type
the word break and semicolon and then
your code goes here of what you want to
do in the case of that so we could have
say case plus minus the equivalent in
Avenal sibs is if
character equals plus then you killed a
girl here
I'll save character - and you will the
code would go here so you see the
exactly the same thing
it's just that switches are typically
used so that you don't have to write
this every equals else if equals it's a
bit shorter so a switch is nothing more
than an Al safe so in this case if it's
applause as we mentioned we don't need
the break because we're returning so the
statement can't continue anyway we want
to return an operator type add do it's a
- I'm sure you get the idea now it's a -
and then you want to divide and a
multiply
and now you'll see here this is still
red unless you say not all code paths
retailer value and that's because a
switch statement it takes in a character
in this case it checks for these four
now the issue here is this this function
has got to return this value it's it's
what it's got to do it's expected to
return that value so whatever happens
they must return that value or it must
throw an exception one or the other
because we're only checking these four
or what have we passed in the letter B
that then none of these match and then
what happens the statement ends and
nothing returns so it's invalid so you
have to return something and because
these are the only four valid options
we're gonna throw as we mentioned before
if we throw then in this main pass
operation it's going to bubble up to
this try catch and it's going to land
here and then it's going to output
whatever message we put on a throw so
it's a nice quick way of escaping the
whole calculation loop and just passing
out a you know a reason why we stopped
what the issue was so in a switch
statement you can do what's called
default instead of using a case and
default will match if none of the other
cases match so in this case if none of
those match then we want to throw a new
say invalid argument exception
what I'm thinking of maybe that's not
one think enough invalid operation
exception there we go then we're going
to pass it a message and we're gonna say
unknown operator type and the character
we passed in and they've gotten a simple
function need to comment this function
and then in these comments that we're
doing these are XML comments that are
really useful for as well as been when
you type in your own code you can see
there a comment there you can actually
use things like go script or other
platforms to automatically generate help
files on your code and you might have
seen them on Microsoft or MSDN or you
know other sections and effectively it
shows you all the code for third-party
developers and it shows you these
comments but because it's similar to a
webpage if you want to link to like this
is a known type this is an enum that we
wrote with more comments and details so
instead of just type in here accepts a
character returns a known operation tie
flike that when this gets exported to
say a public help file they said just be
the text here but what we can do is add
sort of a link like on a web page when
you click a link to go somewhere we can
add a link to this exact known type so
that if somebody's reading the help file
and the returns a known operation type
they can click this and it will take
them straight to the documentation of
the actual type so again it's a little
bit over your head right now but it's
useful to know at a glance and to do
that instead of just typing the word
operation type yeah they were left a
lesser than sign you type C and then
user press space and inserts this C ref
and that's like a now expecting an own
type and then you type it and you can
see you get in tally sentence then
operation type and tab so instead of
just putting the word operation type we
wrap it in this CC ref that effectively
allows the documentation to be clickable
when it's exported and again in work you
won't really know what that means right
now but of your typing comments again
get into the habit of if you're typing
air comment and you're talking about a
known type you know something that's
actually you can click on and press f12
and go to and there's some more
information about then get into the
habit of doing this and again further
down the line that habit will really
benefit parameter character is the code
to parse and that's it for the get
operation type function so we go back to
our calculation so now this will get the
type of operation so let's quickly test
this click here to add a breakpoint
that's f5 to run let's type 4 plus 3
equals you can press f10 to step over
code so we're going to step over we've
got 4 plus 3 you'll see we've got the
left side we're gonna go through the
first character the import
0 it should give us 4 and it's going to
check if it's in here so the first thing
should be true so yeah the character is
effectively matched in there left side
is also true then we're gonna try and
add left side is currently blank and
we're gonna add this number 4 to the
left side so press f10 and you can now
see the left side is 4 which is good
that's what we expected
you see didn't even try to evaluate this
if statement because it was the previous
if statement was true
fr began you can see it's now jumped to
here - now increment the the I - go to
the next stage it's then doing this
check to make sure that I is still less
than the input length which it is so it
comes back in and now I is 1 so now
we're going to check of the next
character which is applause is any of
these which should be false
what do you think of its any of these
which you should be the plus which is
good so we've gotten here now if we're
not left side which is where we get an
issue because currently we are the left
side so let me just tweak this so we can
show you just the code running so let's
just edit this on the fly and now let's
check this function so we want to get
operation type press f11 to go into this
functions that are stepping over and
then f10 to carry on stepping through so
you can see the character is plus so we
should hit this case and we turn this ad
which we do so now operator type is add
so you can see briefly how how the codes
work in there which is as expected so
this is the case where on the right hand
side of the operation and we want to
work presuming we're working a bit ahead
of ourselves here because we haven't on
the left side yet but this is just the
way I'm doing it because I know this is
what's gonna happen so if we get here
which means we're on the right side and
we've now hit an operation we know we've
had a number so we've had this number
then we've had an operator then we've
changed the left to the right side
because that's when we'll do that once
we hit an operator and what on the left
side then we got another number or maybe
we don't maybe we just got another more
another operation but for now let's
presume we've got another number and
then you hit an operation and that's
when you'd hit this statement and then
you'd now want to get this operation
type just to save it then you don't want
to calculate this which should be stored
in this operation class because we've
added the operation left side here the
operation right side here and we will
add the operation type in a min in this
function so we do that calculation so in
fact let's do this the opposite way then
let's let's jump back to when we're on
the left side here so that we can do
sort of in order make it a little bit
easier so we've done the left side we've
put a number four we've found it
we've added it here we had to plus we
come in here we're currently on the left
sides all get into here instead so we
won't do exactly the same thing here we
want to get the operation type first and
then we now want to check because again
you've got to presume the user is could
enter anything so maybe we just typed
plus in the string and we don't even
have a left number to work with or maybe
not even a right number to work with so
let's put a little comment here yet the
operator type do the same above and now
we want to check if we actually have a
left side number so to do that we just
want to check if the operation dot left
side the length is nothing so it's a
zero length string then we know we don't
have any information so in fact there is
a situation where this would be valid so
you imagine the equation minus four plus
five that's a valid equation so we might
actually hit an operator that starts
with a minus and then that's a valid
situation right there so that's at least
let's maybe not fully handle it but
let's let's check that the operator type
is that the - before we ever out because
I - might well be a valid function so
the
so if the operator type isn't equal to
minus so equals equals means if it is
exclamation equals means if this is
anything except that value so ever isn't
equal to LA so isn't equal to that we
need to throw an exception so an invalid
operation exception because obviously
that's now not a valid thing to do so we
want to say
operator sir
plus I'm divided or more than one -
because you can't have a - - well you
could have a - - number but we're just
gonna presume they didn't mean to type
that more than one specified without any
left side mean that so they put say and
again it depends what you want to do
here because you could technically say
that even the plus you know a plus four
minus five is technically valid but you
never really see plus four written as
you know there's no need plus as
expected if there's no - it has a
positive number so we're gonna not allow
that we're gonna you know throw an
exception if that's the case so that's
that bit taken care of
so if we got here now so we wouldn't hit
this line of code if it was a wasn't a -
number because we'd throw so we get here
we know the operator type - - and in
that case we want to add it to the left
side of the number because then they've
typed in minus four so the start of the
number now wants to be that operator
itself which is the - so we've got here
the operator Tabitha's own - number so
just simply do operation left side plus
equals the input so that's gonna add
it's gonna repend that negative of that
minus sign and that is all we need to do
for the left side is - I believe yeah so
if we've now got an operator and we do
have a left side number so we do one
else so we get here yeah here we have a
left number so we are currently in the
left number
we have an operator so we've done a for
than a plus a then we already have a
number so that's okay we can move on so
effectively if we got here we have a
left number and now an operator so we
want to move to the right side to do
that we need to set the operator first
or the operation type simply equals the
operator type we got above and now we
want to move to the right side now we
need a right number so we simply say
left side equals false
so now we're on the right side and then
this loop would continue then we'd come
into here then we'd hit say the number
five come into there it's not the left
it with the right so we'd hit the right
side and then let's say now there's our
times so then we'd come back through the
loop it wouldn't be that it would be
this would come into here is now on the
right side and we've hit another
operator so then we could do this
calculation so before then let's first
start with the basics we've now got
enough information to do a calculation
we come pass in say four plus five and
this would run we'd hit here
well that let's run the code so you can
see what I mean press f5 four plus five
from the press enter so we're going to
come into the first one we're gonna hit
here we're gonna get left operator the
laps not going to be caught for we're
gonna go round again it's not that it's
now this and we're not on there we're
still on the left side so we're gonna go
here I'm gonna get the operator which is
add the left side isn't equal to zero
because we do have a number
so we're gonna get here set the
operation tie the left sides no pulse
it's gonna go around again and this is
now going to be the number five so it's
gonna go in there here we're not on the
left side it's the right so it sets the
right side up so now we've got five so
at this point we've now got the left
side number which is for the right side
number which is five and we've also got
the operator type add so here's enough
information to know do a calculation so
what's going to happen to our code well
we've now run to the end of this string
so we've done four plus five so you'll
see now this for loop does applause does
a check but now three isn't less than
three so it's gonna come out and right
here we just temporarily put the
returned empty string well now if we've
finished the finished pass in the string
so everything the user typed when we get
out we're going to presume if we've come
out to that we've simply got an equation
left to calculate the only time we
should finish this loop and come out is
when we've done with all the other in
their calculations and we've simply got
this operation left to work out so
outside of this for loop when we've done
we simply want to calculate the
operation so if we are done parsing
we're now exceptions
calculate the current operation so we
want to do calculate operation and it's
gonna accept an operation and let's make
this function so this time let's use the
shortcut ctrl + dot and enter and then
we want to calculate this operation we
should comment this calculates a and
then we're going to reference this
operation as we mentioned before with a
c-raf so that it's helpful in the
external documentation calculates and it
should be an calculates an operation and
also I want to return the result and
only want to return the result here to
the caller because the thing that calls
it sets up the text for us here in the
past operation which gets set here so we
need to return the value in order to
actually update the result string so
calculates an operation and returns the
result this operation is the operation
to calculate and now this gets down to
the the crux of the whole purpose of the
calculator the the thing that we started
at the very beginning was to calculate
some equation we're now finally at a
point where we have a left side and a
right side and an operation so we have
enough information to know do a
calculation and you'll be surprised how
simple this then is once we've done
there all this this is the complicated
part here is parting the users string
the tagged message into a formulated
equation that a computer can actually
work out so maybe I'll appreciate a
little bit more when you use any any
math programs that you can type an
equation and it works things out how
complicated that is so now all you've
got to do is take the left side and the
right side of the operation check what
operation type is and simply perform
that action and then
result so we're gonna start with a value
so let's do the left is zero and now we
want to do the right and these are for
storing the actual number values store
the number values of the string of the
string representations because the
operation contains we press f12 the left
and rats had a strings they're not you
can't calculate those you've got to turn
them into numbers which we've done
before and all you have to do is pass
them so before we get to parsing let's
first check some basics again let's
actually check that we have a left side
value so it's not completely known and
then in the same if statement will
actually try to pass that value as well
so check everybody have a valid left
side number so I'll be an air string dot
is null or empty we'll use so this
checks if the string is completely null
if it doesn't have a value or whether
it's empty you can even do abnormal
white space which actually checks if
it's null if it's empty or if it's only
got spaces and the value book will users
know Lauren T which you could just leave
out you know you don't need to do this
you could just simply try to pass it but
I always like to be as explicit as
possible so we're gonna check the left
side of the operation so of its if it is
not all empty so we don't have a number
or we fail so if not double dot pass so
the same at the way as we did in dot
pass on this case try pass because you
don't want to crash a double dot tripe
are simply tries to take in the string
so there's a left side and convert it to
a double so it's a valid double number
so it's say four point three
then this will succeed so we're going to
try to convert it to a double the input
is the operation left side the output is
the left variable we've just created
here so we've done this operation here
well first we've done this we've checked
it we've actually got a string so we
haven't it's gonna continue to try this
so well know if we haven't got a string
it's gonna succeed in this F and we can
do what we want if it is a value but
then it actually fails to pass to a
double then we're also gonna fail so
this is saying if effectively if we have
a blank string or if it isn't a valid
number then what do we do so in that
case we then need to again throw an
exception because if we don't have a
number we can work anything out so we're
gonna pass a message right back up we're
gonna say left side of the operation it
was not a number and then we're gonna
actually pass that number out so that
the user can see what the left side is
and what the issue is now just again to
test this let's just return an empty
string for now let's run this code
that's hit here and let's see if we can
just do a say plus five so there's
nothing on the left side let's not
bother stepping through this for now
let's just run it and see I let you see
now we've already caught the issue
somewhere else
invalid equation operator plus x divided
or more than one minus specified now
that's are they your without a left side
number so this thing's been smart enough
to catch that instance there's gonna be
hard to to check all right let's try it
minus minus plus five haha there we go
so by minus plus five we've got around
that jack so you can see the left side
number is a minus which was the start of
creating negative
but then we plus put the ad and then the
five so now it's gonna go to calculate
equation and we're gonna get here and
this should fail because it doesn't
empty but we got one however this double
dot tripod should fail because - isn't a
valid number so this should fail which
it does and then it will throw which
will then come back into this string
left side of the operator was not a
number and then he shows the value than
- which is the left side so that's all
working nice so we don't have a left
side we also need to check the right
side again copy and paste this exact
thing change left for right you have to
be really careful when you copy and
paste code as well because it's very
easy to copy and paste code and then
miss out changing a value so we could
accidentally leave that as left for
example so if you do copy and paste code
be really careful that you fully replace
everything inside that copy and pasted
code with the new expected value so
we've checked it we've got a left and a
right number if we have then it's a
fairly simple case now of calculating
the result and now because we're
dropping back to mathematical equations
which can crash so you tried to do save
our equals 0 for J equals zero K equals
R / J this is then going to try and do
0/0 which the last time I ever did this
in c-sharp crashes the application I
think see show up six might be smart
enough now to return double dot infinite
or something like that but let's see
this usually crushes the program so we
don't have to do four plus five so here
we're about to attempt to divide 0 by D
0 and look it crashed and bubbled up but
nicely our program won't crash you see
here because we've already got the
exception court so it's it's already
gonna now output invalid equation
attempting to divide by 0 which is
something that the system through an
exception of now this is ok except it
doesn't really tell the user where this
happened this is just saying invalid
equation
by a zero of what point where what
failed so instead of just crashing if we
do an invalid calculation we want to do
another try-catch inside this function
just so that we can pass back a more
explicit message about what actually
happened so we'll wrap this part in a
try and you'll see why in a moment and
then gonna use another switch and this
time the difference is we want to check
what the operation type is and then
we're gonna do a case and then do an ad
I don't miss an ad we simply want to
return the left which is now a double a
natural number plus the right so there's
a mathematical equation we've done and
then because we're expecting a string
because we're just setting up a label we
do dot to string and that's it to
believe it or not there sure as your
calculation to now work out four plus
five so to do the rest it's as simple as
copy/paste ad minus divide multiply and
then you simply change the symbols and
there you go there's the calculator in
essence that's it's all boiled down to
these few lines of code that's been
about getting extracting a number that's
the left side a number that's the right
side and a type of operation that we can
then convert effectively to add to the
actual ad so that's been a very
long-winded process to get down to a
very simple computer equation there's a
few more things we need to handle again
as we mentioned this is a function that
needs to return a string this switch is
okay of the operation type is one of
these which you'd think is the only
possible option because the operation
type has only got those four options but
the operation type could well be
something that isn't in there you could
pass in a number and cast it to an
operation tower which you know there's
ways about getting an operation type
that isn't one of those plus the switch
statement is it
smart enough to know whether you've
handled every possible situation while
actually in this case remove that to be
sure no you see so it doesn't it can't
understand if this isn't one of those so
we have to handle the situation where
the switch might not be one of these
values so if we don't have an ad minus D
bar and multiply then we simply throw a
new exception
what can you keep it standard as we were
doing and valid operation exception and
we will say no operator type we're
calculating operation or in this case
find a lot no matter the final
calculated operation and the value is
operation and operation type so now
we've handled that we've returned all of
those and now we've also got a handle if
we do throughout from say we've done a
here if the left was zero the riot was
zero when did I divide that would crash
and come back with attempted to divide
by zero so we just want to wrap that
message up in a a bit more explained
message so want to do we're thrown new
and valid operation exception we want to
do fail to calculate operation I don't
want to give the actual operation so
operation dot left side operation dot
right so operation dot operation time
and the operation right side so this
will simply output in our case four plus
five so we're going to say failed to
calculate operation four plus five and
then we're gonna give the reason why
which is the inner exception while it's
not the inner exception is the message
of the exception that got thrown by
the system itself so let's give that a
run and let's see what happens if we do
0/0 for one we should hit here so let's
see if that's where we hit it goes and
we get not a number so it's actually not
failed which is interesting
so let's debug and see why so talk about
its operation so we do 0/0 and that's
really interesting so we've got two
different situations here when we've
done a 0/0 there it's returned not a
number and yet when we did it before it
returned can't divide by zero now I'm
guessing this is because these are
doubles and before we add integers so
let me just test that theory and see if
this will throw and it might be that you
only get the exception being thrown when
you divide two integers together by zero
yeah so if we divide an integer by an
integer that's zero you get the
exception and then you get this nice new
message of failed to calculate operation
zero divide zero attempted to divide by
zero so there we go that's that's the
exception being caught for obviously if
your attempts to divide a double by a
double that both zeros and c-sharp quite
happy to say it's not a number it's a
special double type so you could also
see here double dot and then these were
the new ones I was talking about not a
number negative infinity positive
infinity so in a double you've actually
got these very special things that
represent you know those types of values
so who's gonna return that we could go
further and actually catch things like
na N and check of it's not a number and
then we turn a nice a message instead of
just n a n in case the user doesn't know
what that means
but for now this is this is good enough
it's actually calculating by the looks
of it so let's now check out let's do an
actual calculation let's do four plus
five and this should not work out as
nine so when I calculate operation we're
fine with that there you go we've
actually got a working calculator at
least we can do some very basic stuff so
4 divided by 3 1 3 3 3 3 3 3
let's do pi she's 22 divided by 7 I
think it is how we go so you can see
we've got this calculator work and
you'll also see it was 1 2 3 4 5 6 7 8 9
10 11 12 13 14 digits and a double so
that's why the limit of the the
equations worked out let's go ahead and
change these to decimals which is the
most accurate precision number that we
can use change everywhere we've got the
double to a decimal which is simply
there and let's see how accurate we now
get the number so you are by 7 you can
see there's the difference between a
double and a decimal look how accurate
the decimal is compared to the double so
let's leave that as decimal because that
gives us a you know much more accurate
calculator so what happens we do 1 plus
2 plus 3 we get 24 so something's
clearly gone wrong there so we could go
through and debug what the issue is
let's have a quick look
so step through this one at a time
we're gonna get one which is fine I'm
gonna get plus like she's fine
and then the operator type is now plus
two which is fine
okay and now you'll notice we should get
to this stage where we haven't finished
because we're now on the right side
you've now got the next thing which is
the tines and now the operator type
we've simply going to change to add
which is because we did plus twice so
it's simply plus again okay so nothing
has changed there but obviously this is
wrong round because we should have
calculated but let's just see what why
we got 24 so now we're not on that side
and then you see what's happened here so
because we didn't do this
we'll finish this part of the equation
yet we should have at this point gone
ahead and calculated so when we're here
and we did one plus two plus three we
did one plus two shaft of the operation
and then we did plus and then we hit
here this should have then gone back and
first worked out one plus to set that as
the left value which would then be the
answer of that and then start setting up
for another equation instead we
basically did nothing we just ignored
the fact that we had a full-blown
equation so we did one plus two to
another right sides two we basically
ignored the plus because we did nothing
with it and then we come back in and now
we got three so what it ended up doing
is adding three to the number two so we
ended up with 23 so then it worked out
one plus 23 which is 24 so if we did one
plus two plus three plus zero that
should effectively do one plus 230 231
which it does so the issue here as you
need to finish this last part of the
well at least the last part for this you
know this calculator that we're doing
now this is enough to keep you you know
going and we'll come back and finish
this fully so we'll go backwards now in
time to the point where we were doing
what happens on if your you've got your
second operator and you need to work out
them what you're gonna do with that
which we mentioned you now need to just
go backwards work out the operation and
then carry on forward so we've got the
operator type we now need to check if
we've got a right side value because if
we don't have a right side value then we
can't work out the previous equation so
if we did say 1 plus x then you'd have 1
which would be the left side you do Plus
which would be the operator the plus
would then set you to the right side
over here then you do x right away you'd
end up getting into here so in a
situation like that we could be in here
on that simply isn't the right side to
calculate no you you can ignore that
check because the calculator here when
we calculate it we already check if
we've got a right side number so you can
go out happily does not do that check
here but again from considering we've
done the check here we might as well do
the exact same thing that we're you know
we're gonna check a very similar things
let's copy and paste that check if we
actually have a right side number
so we overwrite if we don't have a right
side number then same thing no it's not
a - because you could also have a - on
there at the right side then we want to
throw the exception otherwise the right
side let's think this through
yeah so if we don't have a right side
yet if it's not a - we throw over ears
then this counts towards the right side
number just like the left side so we're
repeating this logic this exact logic is
is here just for the right sides that's
good that's the definitely the same
logic that we expect the only difference
is this else so if we're on the right
side and this time we had an operator
and we have the number when it was on
the left side what we needed to do was
set the operator and jump to the right
side it were already on the right side
then what we need to do is as we
mentioned calculate that operation that
currently exists the previous one so
let's store the current operation so
let's call it old operation it's the
current operation then we need to as we
mentioned we need to now work out that
operation and set that value to the left
side of what's now going to be the
current operation so the old operation
really is the thing that you know at the
moment it's the exact same operation but
we want to keep the value of that
because we're going to change this
operation so operation on left side
equals and I'm just going to use our
calculation function that we made and
we're gonna pass in the old operation
which we might not need to do in fact we
don't need to do because we're not
changing anything because this is going
to run first and then come back and set
that up so
we should just have to do operation the
left side is the result of the operation
itself so that's if we've got an
operation right now that's called one
plus two what this is gonna then do is
change it's going to work out that
operation of one plus two we turn the
result of three and then set that
operations left side to three
now the the operation type in the right
side are still the previous values we
now know the operation type already
because we're in the next loop were
ready
so calculate previous equation left side
set a new operator
it's that setup a new operator and now
we basically want to be on the right
side because that's the only thing
that's left and and we should already be
on the right side because we've checked
here so that's actually all that is left
to do and so if we get to the right side
and we have another operator so four
plus five times
and then something so we'd get the left
side of the operator the right side and
then when we hit this operator this is
where we come into this part of the
function the right side isn't empty
because it's five so that bit skipped
and we hit here so then we calculate the
operation which is currently four plus
five so the result should be nine and go
back into the left side so then we end
up with nine and then comment li plus
because it was plus so we changed the
operate start two times so four plus
five times something should then become
nine times with no right side so we need
to clear the right side
because right now it would have been in
the previous number clear the previous
right number and let's run that and that
should now allow us to do like the 1
plus 2 Plus 3 so we do 1 plus 2 plus 3
and then we put a breakpoint like here
where we expect a hit when we hit this
part this should be when we've done 1
plus 2 and then this plus and then we
shook them into here so let's see what
happens so let's look at the operation
so yeah we've got 1 plus 2 so now we're
gonna work out that and set it to the
left side so 1 plus 2 should become 3
because we're gonna set the left side to
3 so ears but you can see it still says
plus 2 so the operation types now the
new operation which is actually the same
which is 2 and we're clearing off the
right side so now the new operation is 3
plus which is what we expect it's now
worked out the previous operation and
satyrs up for a new one and then if we
carry on stepping through it should just
now carry on its normal loop go to the
next part it's a number we're not on the
left side so it sets the right side up
as 3 so now it's 3 plus 3 there's
nothing else left to calculate and then
it works out 3 plus 3 they can go you've
got 6 so now what we have in this
calculator is you can do 1 plus 4
divided by 3 divided by 2 times 4 point
5 6 5 7 5 6 7 8
easiest work that out now what we
mentioned that we haven't done in this
calculator and what we'll do in a you
know a future video whoops that's all
when you have enough knowledge that this
calculator app makes more sense than it
does right now we'll add the order of
priority so this was the equation now 1
plus 4 divided by 2 times
opened all are you do this right now
we'll work out this then it will work
out the result of that five and it work
at that don't work out that just working
left to right whereas in truth this is
an equation in maths but make it simpler
let's do so you can see how it works so
we do five plus five divided by now
let's do ten plus ten divided by two so
if you did ten plus ten is twenty
divided by 2 is 10 so that's what our
calculators gonna work out now if we
open up the calculator on a Windows
computer ah you can't do it in here is
the exact same thing but yeah ignore me
on that one because this doesn't do it
as advanced as ours well basically if we
were to work this out in math you'd
first work out this the order of
priority so you'd actually do ten
divided by two first which would be 5
and then you'd work out 10 plus five so
the real answer is 15 but our calculator
works out 10 because it's working out
left to right it's not working out these
priorities first so in future like I say
when we visit this again we'd have to do
something slightly different instead of
just working out the left side of the
equation when we get to where are we
when we got to here and we just
instantly go oh let's work out this side
because we're now here you'd have to
start storing these equations these
operations so instead of calculating it
right now you'd store it as an inner
equation and then you'd move on and work
out this and then what you do once
you've got a group of all your equations
together you could then go through and
prioritize and find the operators of the
higher priority calculate them first and
then extract them that way but that gets
really complicated so that's the reason
I didn't want to go too far in depth
with this calculator with it being
mainly about you learning switches and
they've statements and parse you know
it's all about learning the code not so
much understanding the calculators
operation and now the calculators only
going to get more and more complicated
as you go
so I think we've taken this calculator
far enough that I hope you've learned a
decent amount of code from it like I
said don't get too overwhelmed by how
much of this logic if you will this all
this full loop and this whole logic here
don't be too concerned about how much of
that just doesn't make sense because
it's this is something that most people
can't even do when they were senior
developers you know you can you can give
this challenge to a senior developer and
I'd say 50% can't even do this anyway so
this is quite a complicated thing to do
mentally in your head as well and
keeping track you can see when I'm
working this out I'm sitting there and
figuring it out as I'm going and you can
see that I'm having to think about it
myself and I've been programming since I
was 10 when I'm now 29 so about 19 years
of experience at this and yes I can do
these things no problem but it's not
like they just appear when you hadn't
you instantly know you you're always
working out as you go in you're thinking
it through which you're going and if I
wrote this calculator up today and then
come back to eat in a week I'd have to
read through this and realist and it
because it wouldn't wouldn't be in my
head straight away I've worked out at
the time and then a week later not
really thought much about it hence why
comments are so useful in code because
as much as you think it makes sense
everything right now is you're typing
makes sense go away have a meal have a
sleep come back the next day not so much
sense so again I know we always iterate
this but really do comment as much as
possible you know I like to see green
everywhere in code just add comments
everywhere
that's so I'd say this is enough like
say for this calculator app there's
still a lot to learn though in c-sharp
so we've done switches ifs parsing link
functions events we've done quite a lot
over the last seven or eight videos we
now want to do something totally fresh
so you don't just keep going on this and
get a little bit bored with doing the
same thing we want to do something a
little bit interesting that so the next
video we're gonna create the game
tic-tac-toe
so you've never heard of it before
noughts and crosses basically a grid of
nine
so a 3x3 grid a player goes first and
they put a zero they pick whether a zero
or an X I believe this there's a rule on
whether you're the starting person I
believe you're a zero otherwise you're
an X and the rule of the game is to get
a row of three diagonally or
horizontally or vertically and we're
gonna make that game we're going to do
it in a single video hopefully less than
one hour start to finish and you should
fully understand that game like you
should understand every single part of
that game believe it or not you've got
enough knowledge from the last videos to
completely understand to create
tic-tac-toe so be good to see how that
all comes together in a real game so
that's what we'll do next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>