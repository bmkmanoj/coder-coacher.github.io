<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Reverse Shell Tutorial - 5 - Testing the Program Locally | Coder Coacher - Coaching Coders</title><meta content="Python Reverse Shell Tutorial - 5 - Testing the Program Locally - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Reverse Shell Tutorial - 5 - Testing the Program Locally</b></h2><h5 class="post__date">2015-12-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-QMPYah8fWI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now I'm gonna have one more check
before we get to the real fun stuff and
I just want to make sure that there is
data all right so this is just a simple
F condition and this just makes sure
that there was data that was received
and you know it wasn't just null maybe
they hit enter by mistake and send us
you know some blank data whatever so
basically whenever we receive data and
it's not a change directory command then
it must be something like then it must
be something like derp or you know echo
or you know echo make a file whatever so
basically we're just gonna take that
straight-up command and run it just like
we were running it in a terminal how do
we do that well for that command what we
can do is we can actually write sub
process P open and this is essentially
going to open up a process so that's
what this stands for and what this means
is basically run a command just like you
would in the terminal so the first thing
it needs is the actual command and
remember it's in bytes now when it comes
across a network and we need to convert
it to a string because that's what this
function takes right here so if you just
write data and not any numbers here
because we're running the entire thing
and you just the coda is a normal string
then it's going to give you your string
and now these are just some optional
parameters for shell we can have true
and for hackers they probably wouldn't
want to show the ship the shell but
we'll just keep it there for no no why
not and now I'm just gonna pipe
everything to the standard stream so
basically all of our input our errors
our output all go into the basic stream
your standard input/output so I just do
STD out so process pipe
yeah standard air I'm too lazy thought
this so-so process bike all mg are you
freaking kidding me I'm getting rid of
all my friends immediately STD in
sub-process pipe so again this is just
kind of housekeeping all it does is it
takes any output and pipes it out to the
standard stream so we get all the
information that you would if you were
just typing it into a terminal from that
computer itself so this process one runs
right here and then after it runs just
like any process like dir we have some
output the results of the command so for
this output I actually want to do two
things with it by default it's just
bytes but I also want a byte version of
this and a string version of this now I
want a byte version because that's what
we're gonna have to send back to the
server and I want a string version
because then if we ever just want to
print it out to the client I don't know
maybe we're hoping to friend out in
Texas and we wanted to follow along with
what we're doing then we need the shrink
version of it so I'll say output bytes
and set this equal to command STD of
read STD error and read art so this is
gonna be the bytes version of it
basically the output of whatever command
we just ran and now that's
Oh name of this all right so this is
gonna be the string version of it so a
really easy way to do this is if we just
take the bytes and convert it to a
string like before and we'll just do
utf-8 encoding and this means plain old
basic strength don't do anything weird
with it so now we have a bytes version
of the results and a string version of
the results and remember so we can take
the bytes and actually let me do it this
way it's probably gonna be a little bit
cleaner so string dot encode and we'll
do output string and I'll show you guys
something really cool so basically what
we're going to do is not only are we
going to send them back the results but
we also want to send them back this
right here the current working directory
because whenever you run a command in
your terminal or command line it doesn't
just print out the results in your
cursor blinks at the bottom it actually
says what directory you are currently in
so then not only the user can see the
results of their commands but they can
also see exactly where they're looking
at so how do we do that well we're just
going to output the string like that and
then we're going to convert to a string
the OS dot to see right there and get
the current working directory so what
this is is a function that returns
whatever directory you are currently in
right here see users Bucky now the one
thing that doesn't do is it doesn't
throw in this little greater than sign
so we actually have to write that
ourselves so now let's see
so I'm gonna read greater than space and
then it's gonna send us back this print
our current we're in Directorate working
directory and our cursor is gonna be in
the proper space now this is actually
optional if you want to output this if
you know you're like some hacker you
probably wouldn't want to do this but if
you do then the results of what you're
doing are gonna print out on the clients
machine so there you go
it's probably nice that they know what
the heck is going on and after this just
very close connection all right
so whenever this breaks right here what
we can do is s close and it just closes
the socket or the connection all right
now if everything looks good what we can
do now is this this program is ready to
go so remember the first thing you need
to do is you need to start server dot pi
since these are essentially two
different programs that are going to be
running on two different computers I'm
just testing them on my computer right
now so this is server WI it's running
and it says re our socket is bound to
the poor I'm going to go and now what
you want to do is run client dot P Y so
this client once I run that look back on
our server it says connection has been
established with the IP address and
again since the clients on our own
machine and just gives it that IP
address and port five eight eight five
eight in that is because that was
actually up to the computer what port I
wanted to reserve so there you go and
check this out so from the server and
remember this isn't this basically is
not the clients machine this can be you
from anywhere you want type in any
command like dir now hit enter and check
this out see what it did is it actually
went to the client and the client Rand
dir so that's why in the clients machine
it printed out the directory pretty cool
so now what I can do is
like echo bacon hit enter and for the
car look at that it prints out bacon so
pretty stinking awesome basically that's
how it's gonna work
and in the next video if you guys are
like would this work in real life I'm
going to be showing you guys how to set
it up on an actual server and we're
gonna be connecting to that it's super
easy so yeah this is pretty awesome
already but I'll see you guys in the
next video it's going to be pretty cool</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>