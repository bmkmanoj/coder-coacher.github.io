<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cocos2D iPhone Tutorials - 17 - Making the Dude Move! | Coder Coacher - Coaching Coders</title><meta content="Cocos2D iPhone Tutorials - 17 - Making the Dude Move! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cocos2D iPhone Tutorials - 17 - Making the Dude Move!</b></h2><h5 class="post__date">2010-09-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/smRmcOWuaKw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys now that we have the camera
taken care of we can finally begin
getting into the good stuff moving the
dude around on the screen so how we're
going to move them around on the screen
is this we're going to touch somewhere
on our iPhone screen and according to
where we touch that's the direction we
want him to move so the first thing we
need to do is enable touches for our
program and remember in like 6th or 7th
cocos2d tutorial I told you guys how to
enable touches so if you don't
understand what I'm about to do go watch
those tutorials again the first thing we
need to do is self is touch enable
that's the question they ask and our
answer is yes now let's go ahead and
minimize in it and under d alec or
anywhere you want to actually go ahead
and we're going to be adding some new
methods and these first methods are just
the housekeeping methods again i covered
this before so I'm not going to be
getting in depth too much void the first
thing I want to do is over right
register with such as patcher it looks
good and now what we need to do is call
Cece there we go touch dispatcher just
like that share dispatcher and he has
gone to add targeted delicate yep self
priority 0 so all those touches yes
probably gay joke alright so what this
is pretty much there we go so what this
is pretty much same as all right where
are the methods that you're going to use
self AK in this class priority 0
swallows touches I'm able to accept
touches again housekeeping stuff 1 over
and I like six or something sauriol
something the next thing we need to do
is remember there are four different
specific touch methods the first one is
a boon lean and it's required bulleen CC
touch began and all we need to do is
return yes in this again housekeeping
stuff to make sure your touch actually
started so now we can begin jumping in
the
stuff so whenever we actually pick our
finger off the screen what our program
is going to do is say all right where
did you pick your finger up and I'm
going to move the dude in that direction
so let's go ahead and start cutting this
it's a void and it's CC touch ended
those parameters are all good Oh easy
there slow down Hoss and the first thing
we need to do is just like we did
previously point touch location get
where we touch on the screen so that's
touch location in view and the parameter
for this is touch view
let me make sure someone tells me I type
something wrong there and one kind of
quick so this is pretty much says all
right we're in the view Did you touch
I'm going to store in a point called
touch location some point off now we
need to take this touch location and
convert it to a GL point because that's
the kind of point we can actually use in
cocos2d again cover this before there we
go CC director share director and what
do you want you to do is call the method
convert to GL and what point do we want
to convert that point just made touch
location so now it's GL point AKA a
point that we can use why they just
don't have this by default I don't know
take it up with whoever made cocos2d so
the last thing we want to do is actually
something that I haven't gone over
before but let me code this first can't
talk and go at the same time self
convert to note space and what point do
I want to convert to note space touch
location so here is what I'm doing in
this line of code right here whenever we
touch on the iphone screen say we touch
in the position 40 40 the coordinates 40
40 well on the map if the map is moved
it actually might be the coordinates 949
40 so instead of using the iphone screen
coordinates it uses the maps coordinates
so then we can move them all around the
map instead of only in the bottom left
corner so convert to note space pretty
much does this instead of using the
iphones coordinates it uses the entire
coordinates for the node so that way we
can use the entire map instead of just a
little iphone screen simple enough so
now what we want to do after this is get
the dudes position of where it is
because we're going to need to find the
difference of where we touch and where
the dude already is so CG points and
just name it like player POS for player
piece of well you get the point and dude
dot
position so this is where the dude is
currently on the screen and c cg points
what this is going to do diff is CC p
sub remember we learned this in the last
tutorial takes two points one is touch
location and the other is player POS and
it's going to find the difference of
this two point so where we touched on
the screen and where the player is
currently so now that we have the
difference in those two points what we
can do is this alright check this out
say your dude is chillin in the middle
of the screen right now and you touch
the top right corner well your iphone is
going to be looking at insane all right
did you want him to move up or did you
want him to move right well we can only
move them one direction at a time so
what we're going to be doing is finding
what is greater how far you touched up
or how far you touch to the right and
we're going to be moving him in that
location either a horizontal or vertical
so that's the next bit of code i'm going
to tapping right now in actually let me
do this let me go ahead and pause my
program and i'm going to type this next
bit of code because it's kind of
redundant and i'll be easier um there's
a bunch of parentheses i'll probably
mess up if i try to talk along with it
so let me pause this code a little bit
and then i'll explain it I promise let
me pause this
just in kokori I guess so all right i
think i'm recording so as you can see i
got a little carried away here and i
actually just go to the rest of my
method I'm sorry but I couldn't help
myself so what I did here is you find
the difference between the x and y and
which one is greater so whenever you
touch on the screen there's obviously
can't even be a difference between the x
and the y so whatever 1 is greater is
the one you move so in here we say
alright is the absolute value of the
difference of X greater than absolute
value of differences in y if x is
greater then we're going to move him
left and right if a y is greater then
we're going to move him up and down so
if x is greater what did we embed in
here this is just the move left or right
if X is left excuse me if x is greater
than 0 move them right if less than zero
move them left of course this does the
same thing for y so this pretty much let
me try this again do you want to move
him left or right or do you want to move
him up and down if you want to move him
left and right do you want to move him
left or right if you want to move him up
and down do you want to move him up or
down that was a little bit better all
right i'll take that explanation is that
so now what we did is we needed to check
one thing make sure that the dude
doesn't go off the map so what I did is
I took his position the new position
that we want him to be and made sure
that it wasn't greater or less than the
map size and as long as he was on the
map still I set that position equal to
player position everything all right
where the heck is this set player
position method well we actually then
code this yet I am actually going to
code it right now and by the way at the
end of everything what you need to do is
set center of screen method and that's
the method we built in the last oriole
pretty much to Center the camera
wherever the dude is
alright so now that we got all that done
and make sure you type all this code
again nevermind let's just get coding
the rest of the story I bet you're
anxious to see this program how it runs
set platypus set player position right
there and what I'm going to do is set
dude to position equal to position I
suppose I could have done it all right
here but what's the fun in that all
right so now let's go ahead and run this
and I should get to issues but no error
messages so let's go ahead and see this
big moment there we go alright so as you
can see you can move left right up down
so here's what I was talking about and
now you can visually see so the player
is right here but I'm going to click to
the top into the right so whenever I
click it how does he know to move up and
not to move right it's because the
change in vertical is greater than the
change in horizontal so that's what
we're coating with that absolute method
bullcrap so as you can see whenever I
click in the top right this is is a
change in vertical greater or change in
horizontal grader obviously in this case
horizontal so that's why I'm moving them
right there so as you can see he can
move around but check this out he can
climb over mountains and fences we're
definitely going to have to fix that in
the upcoming story ahs so uh yeah I'll
have to change the his collision
detection and stuff like that so that's
what we're going to be going over in the
future tutorials and by the way these
two issues we're getting right here is
this set perlier position if you just go
ahead and copy these headers and paste
them into your interface except pull
your position and what's this other one
we're getting
oh I think I know I upset center of
screen right here copy set center screen
position now let's go ahead and builder
on this yep no issues so there there's a
nice little arm iphone tip for you
whenever you get the issue that says
something may not respond to something
else it's because you didn't put the
declaration in your interface file so
now we don't get any issues again it
would still work before but you don't
want those little yellow boxes popping
up on your screen so anyways that is
your tutorial that is how you get to do
to move around the screen ah and now we
can finally begin doing collision
detection and fun stuff like that so
thank you guys for watching um hopefully
you understood after seeing him move
around screen while all this stuff meant
so anyways thanks for watching don't
forget subscribe and I don't forget the
next tutorial where i'll be going over
even cooler stuff</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>