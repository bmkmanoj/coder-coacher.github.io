<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Reverse Shell Tutorial - 7 - Adding Multiple Client Support | Coder Coacher - Coaching Coders</title><meta content="Python Reverse Shell Tutorial - 7 - Adding Multiple Client Support - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Reverse Shell Tutorial - 7 - Adding Multiple Client Support</b></h2><h5 class="post__date">2015-12-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/H6ernO3w6Jg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">are already hostas welcome back in in
this video I'm gonna start on the second
half of the series and that is how to
make a multi-client multi-threaded
reverse shell sounds confusing but it's
not I swear so in the first half of the
series what we did is we just made or a
verse show that could control one
computer one client so if your friend
needed help you could tell him to run
the program and that was great at all
but if you're like me you have a lot of
computers in your house and maybe you
want to be able to manage them all
remotely or maybe you are I don't know
like head of a school or a company or
maybe you just want to be able to access
all your family's computers so you can
help them out with whatever you want
well it's gonna be hard if you have to
setup a bunch of servers because you
need each of those clients to run their
own programs so in this tutorial what
I'm gonna do is I'm gonna start showing
you guys how to solve that problem and
what we're gonna do is we're gonna make
one program where multiple clients can
connect to it so just like before we're
gonna have to run one script on the
server but we can have you know a dozen
or two dozen or however many clients we
want connect to it it's gonna be awesome
now before I just start hopping into the
code I want to tell you guys how this is
done so before what we did is we created
this socket on the server and then we
had another one on whatever client
machine and we made this connection
object and I'll show you guys we're
gonna do that later now what we did is
we took that object and that was
basically our connection our
conversation however what we're gonna do
this time is we're actually gonna take
that connection object and we're gonna
store them inside a list so now a bunch
of people can connect and all we have to
do is look at that list and then we look
at all of our connections and then we're
gonna choose the one that we want to use
so the last thing I have to explain is
alright how's that gonna work because
how are you gonna be allowing clients to
connect while you're kind of managing
their computer or connecting to them
that sounds like you need multiple
programs well what we're gonna do is
we're going to set up a multi-threaded
program so this program is going to be
able to
to do two things at once one of those
things is just listening for connections
and handling out all of the back end
stuff with sockets so we kind of saw
that in the last story so what we're
going to do is we're gonna put that on
its own thread and it's going to take
care of all the connection handling now
the other thread what that's going to do
is it's going to allow us to manage or
connect to the computer remotely and
send our commands so one part is for
handling the connections and the other
part is actually you know controlling
everything sending commands the fun part
so that's what we have and that is why
we have to import threading and also cue
some people call it Quay they call it Q
don't call it quite it's weird
freaks me out I hurry and now I'm just
gonna set up a couple constants so a
number of threads and we actually don't
need to write this as a constant we can
actually just type it in manually like
we don't even need a variable at all but
what I like to do is I set up all my
threading applications um I kind of have
like a template and this just allows me
to see how many threads are using and
just keeps it easier organized in my
mind all right so we're gonna have two
threads now whenever we kick those
threads off we're gonna need to identify
which one does which now you can
identify them with like a name or a
letter but I'm just gonna keep it real
simple
so the first thread we're just gonna
call one in the second thread we're
gonna call two it doesn't really matter
but you know might as well just keep it
really easy so we'll say that this first
thread that's gonna be the part of the
program responsible for just handling
connections allowing a bunch of clients
to connect and then whenever they do
connect they're gonna storm in the list
now this other one thread number two
that's the one we're gonna be saying hey
this is where we choose a client and
then we're going to send it some
commands over the network so qu e ue why
did they spell it like that who's coming
up with these spellings right here our
query right here and you guys are gonna
see whenever we set up our thread
exactly what this does and now what I'm
going to do is I'm
make two lists so remember I got rid of
my connection object but whenever we set
up a connection what it does is it gives
us back some information one of them is
the connection object itself which is
pretty much your conversation with
another computer and the other one is
address information and this is their IP
address the port number all that so I'm
actually going to be storing these in
two separate lists but we're going to be
kind of managing them concurrently so
all connections this is going to be able
to store a bunch of connection objects
so we're just set that to blink for now
and the other one is all addresses all
right
so if you guys are like all right why do
you need two different lists well
because whenever a bunch of clients
connected and we just want to reveal mo
we can't actually look at the connection
object itself that's just some weird
thing in memory this address information
is where we can see you know there are p
address and where we can pretty much say
what client we want to connect to
so this is pretty much for humans and
this is pretty much for computers it's
kind of the easiest way to explain it
and all right so now that we got all the
housekeeping out of the way
check this out so the first two
functions in this series are going to be
the same so the way that we create
sockets in the way that we bind sockets
to our hosts I mean it's the same no
matter if you do one time or a hundred
times so that's why I just kept those
two and if you guys don't know what any
of that means then go watch like the
second video or I don't know whatever
one I did it now the reason I got rid of
socket accept is because we're not just
gonna accept sockets like we did in the
last tutorials what we're gonna do is
we're gonna set up a way to accept
multiple connections so actually I'm
kind of running out of time so that's
what I'm gonna do in the next video
that's what we have to look forward to
it's gonna be sweet and I'll smell you
then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>