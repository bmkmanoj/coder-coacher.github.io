<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cocos2D iPhone Tutorials - 13 - Adding the Map to the Scene | Coder Coacher - Coaching Coders</title><meta content="Cocos2D iPhone Tutorials - 13 - Adding the Map to the Scene - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cocos2D iPhone Tutorials - 13 - Adding the Map to the Scene</b></h2><h5 class="post__date">2010-08-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cjduXkenf4w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys welcome back to the fun
part we finally get to begin creating
our map so before we can just start
clicking buttons I actually need to
teach you guys a few simple things of
how this works the only tools you really
need to pay attention to right now is
this the stamp tool in the paint bucket
tool you can also use the eraser tool
but you know it's no fun for that so you
usually want to start out with a paint
bucket tool and go ahead and click that
and now go ahead and click any of these
tiles that you want to use go ahead and
Crick's click something that's going to
be a good base something that's going to
cover the ground either a base dirt or
grass or something like that I'm going
to go ahead and click this grass now go
ahead and click in your map area and I
see it's covered with grass and I
actually decided I would rather have
this I like this grass a little better
yeah like that a little better or maybe
this one no this one see it's a harder
to decide so anyways go ahead and paint
your entire map a solid color because it
just makes it a whole lot easier now
from here how do you paint individual
tiles well that's using the stamp tool
so go ahead and click the stamp tool and
now you can go ahead and select an
individual tile and then go ahead and
drag it to pain and by the way make sure
you are in the bottom left of your map
because by default when this map first
pops up on our iPhone it's going to be
in the bottom left so that's why we want
to make sure this bottom left is covered
with something so go ahead and create a
path arm make sure you have a bunch of
different types of objects because
whenever we create our game later on we
want to interact with different types of
objects in different ways so let me go
ahead and create my path you just like
that maybe I'll add some flowers in here
it will do something to those
um just go ahead and add a fence right
along here and let's see some trees the
trees look good not bad not bad and
maybe add some more right here maybe a
few right there this is looking good
this is looking like a beautiful place i
might visit this place and let's top it
off with some mountains these are huge
mountains they kind of look like Hills
but anyways yeah this is looking good so
oh crap i think i just got swine flu oh
crap anyways now that we have our map
made here's what we want to do our map
is composed of layers in the what we
just did is we made a layer of course
but instead of naming this tile layer
one let's just go ahead and name it BG
because we're going to be needing to
type this into our code and it's a lot
easier BG to type in the entire layer 1
so now we have our layer named and our
map made look good so now what we need
to do is actually save this map so what
you want to do when you have everything
good go is file save and you want to
save it as this um go ahead and save is
bucky's map and you need to save it
something that you're going to remember
because again all this stuff are going
to be needing type in our code later so
go ahead and save this and now our map
should be saved yep there we go toward
desktop so let's go ahead and open
and our Xcode project right like this
remember we minimize it from the last
tutorial and what we need to do is we
actually need to add that file we just
saved to our project so in your
resources go ahead and right-click it
and add existing files and then go to
desktop or go to wherever you saved
yours and mine is named Bucky's map TMX
and go ahead and add this copy default
ED now go ahead let me just check
something real quick yep sometimes your
image source isn't the it might have a
path to it but go ahead and just put
just make sure it's named whatever your
thing is dot ping if it's like a white
blue / document and / this folder / I'll
set up ping go ahead and change the tile
set up pink because it's right copied in
your resources that's what it's going to
look for it again sometimes it messes up
it did it with me before so I'm just
throwing this out to it as a warning
alright so check this out let's go ahead
and in our classes go ahead in your
hello world scene now we can begin
finally coding and adding this map to
our program so what we want to do first
is we want to set up two different
objects one object is going to represent
the map as a whole and another object is
going to represent that layer remember
that layer we named BG so here and of
course we need special objects for this
so the object that cocos2d has to allow
us to reference the map tile maps is
this CC TM x and tiled map just like
that and go ahead and name it something
the map looks good so whenever we
reference the map is going to reference
the entire map as a whole pretty cool
huh so now what we want to do is have a
way to access that background layer
and the way let me just type this 40 mm
x layer just like that this is how
cocos2d allows us to access arm the
tiled background tile layer but I'm
going to name this BG layer could you
guess why yes because it's the
background layer and now that we have
these two objects we need to actually
have them properties so we can actually
use them in our program so property
non-atomic retain and let's just do this
the easy way copy that and also just
copy this slam pig right here and copy
background layer so we have one property
town map or the map one property BG
layer looks good so now we need to do
some housekeeping stuff of course
anytime you have properties you need to
add a synthesized so let make sure it
didn't forget anything I bet they are
synthesized what I named it the map and
synthesized what I'm BG layer so
actually let me go down to a
every don't want that a all right now
let me go down to a d alec and look how
many comments are in this file can you
believe it i don't need every single
line comment and look this for comments
for one mine it's unbelievable I know
what the alec is re so now let's go
ahead and self dot the map set equal to
nil and also self dot BG layer equal to
no of course this is stuff that you know
we shouldn't know from before so now
that we have all the housekeeping stuff
done what we can begin to do is actually
code the program what we want to do
first before you know create an awesome
game is actually just add the map to our
iphone screen so delete everything in
your in it because that was just as
stuff to print out hello world on the
screen just for the example but what we
wanted to do is we want to delete all
that and we want to add the map to the
screen so in order to do this what we
need to do is self dot the map and
remember this was the cct MX tiled map
object so what we need to do is take
this and set it to a tiled map object
and remember we just create a tiled map
and tiled so here is how you reference a
tiled map CC TM x tiled map just like
that in the method name to load it is
tiled map with TM x file yup there it is
right there and for your string here is
where you put the name of your map and
if you forgot it should be right over in
your resources Bucky's map the TMX and
by the way make sure you spell this
right because if you don't work but more
than that if you don't spell it right I
think it'll your program we'll just act
funny and it won't even give you an
error message so that's kind of a pain
in the butt with cocos2d
sometimes things Act word and they don't
give the error message so you need to be
very careful more careful than if you're
just building you know a regular program
so self that BG layer set this equal to
0 by the way now what we're doing is
taking that layer object and what we
need to say is RA now that we have the
map we want to use and is stored in the
map what we wanted to do is we need to
get a layer from it and this is very
easy so in order to get a layer from the
map go ahead and type in the object name
of the map and ours is the map of course
whatever your map was up here and in
order to get layers from it the method
is this layer named there we go and for
your parameter just go ahead and type in
whatever your layer was named so
remember when I said BG is a lot easier
to type in then tile layer 1 or whatever
that's why then we don't have to worry
about Miss typing anything so now that
we have a map stored in the variable the
map and that layer stored in the
variable BG layer we can go ahead and
add the map to the screen so of course
anything with cocos2d you have to add
child so self add child and by the way a
map is a node and before I can do this
let's go ahead and add child and add the
map to the screen and another thing we
should probably do is put this in
negative one whenever you ask sup to the
screen you can position it like layers
in front of each other and z positioning
it when you ever you put it negative 1
it pretty much means make this the
backmost item so anything we add to
screen like sprites and object they're
going to appear on top of the map rather
than behind the map because if they
appear behind it you won't be able to
see it so anyways let's go ahead and
build and run this save it a see if our
program acts funny I
check my spelling while this is loading
release in all my objects that's good
that's good alright so let's see what
happens re check this out how beautiful
is this now you can see our map is
showing up on the screen finally it's
done but we're not done with the game
just this tutorial so something you want
to take note of is if you pay attention
there should be 10 titles this way one
two three four five six seven eight nine
ten and there should be you know what
whatever 480 / 32 is this way I don't
know I can't do the math I'm not that
smart but anyways so that so anyways now
you can clearly see the dimensions of
the tiles there 32 by 32 for each style
and this entire map is 50 by 50 but
right now we're only seeing 10 by you
know 16 or whatever so anyways that is
how you add a map the screen and the
next tutorial we're going to be actually
adding characters to this in you know
having to move around the map and have
them battle enemies in going buildings
and it's gonna be awesome trust me guys
I mean this is pretty cool right now but
if you think this is cool wait till next
tutorial so enough of me talking I have
no idea why you guys are still watching
this tutorial I have no idea why I'm
still talking um so I'm going to go play
starcraft 2 you go make some macaroni
cheese and if five minutes we'll meet
back here for my next tutorial all right
sound good oh by the way don't forget
subscribe i'll see</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>