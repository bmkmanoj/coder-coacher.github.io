<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Stock Market Analyzer - 9 - Creating Tables for the Database | Coder Coacher - Coaching Coders</title><meta content="PHP Stock Market Analyzer - 9 - Creating Tables for the Database - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Stock Market Analyzer - 9 - Creating Tables for the Database</b></h2><h5 class="post__date">2012-01-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/y2ORSO0mpBg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys now that we took our text
file took each of these pieces of data
and stored it in separate variables we
can go ahead and insert that information
into our tables now we don't have any
tables created yet remember we only
created a database but that isn't going
to be important and it's gonna be cool
what I'm gonna show you guys so stay
tuned so ah why is it that as soon as I
start a tutorial I immediately start
getting frickin Flemming in my throat I
don't know but anyways the very first
thing we want to do is we want to run a
query to test if the table already
exists for the company and why do we
want to do that well say we decide that
we want to add a new company to this
well we don't know if we need to create
a table because that company wouldn't
exist yet or if a table already exists
and there's information we just need to
insert information so we need to go
ahead and figure that out is there a
table already for this company
so my first query is gonna read like
this select all in the keyword in MySQL
for all is star from and remember
whenever we created this function we
passed in a name of the table now the
name of the table is just going to be
the same as the ticker signal so go
ahead and say select all from Google or
select all from Yahoo and this is either
gonna return a couple things let's go
ahead and in store
I mean don't want to make it type
sometimes I can't talk whenever I'm
typing but let's go ahead and store the
query inside of let's go to let's go a
variable name result so let me go ahead
enter on my SQ o underscore query and
this is going to take the string of text
and remember SQL is only a string of
text right now and it's gonna run it as
a MySQL query so it's gonna run this is
a MySQL query and store the result in a
variable named result now this is either
gonna come back it's gonna come back
false if there is no result or true if
there is a result so what we need to do
is
we need to make an if statement to
pretty much say okay if there was no
result
forgot my little dollar sign there so if
there was no result then there must have
been no table for the company and I'll
tell you I let me explain this I
probably should have done this before if
a table already exists for Yahoo and we
say select all from Yahoo then the query
is gonna run successful and result is
gonna be true so therefore this code is
never gonna run B says because we say if
result is false only run this code so
say we have a new company that's getting
created for the first time in no table
exists for it if no table exists for
Google already it's gonna say select all
from Google well whenever it tries the
query it's gonna say dude there is no
Google and results going to be false so
that is why we want to create a table
only if result is false because that
would mean that no table exists already
so in order to create a table in MySQL
what you want to do is I'm just go ahead
and copy this B store right here copy
and let me just go ahead and leave
everything inside there and name this
SQL too because whenever you were
looking at your queries I don't like to
name any variable the same thing in any
file so that's why I'm doing that now in
order to create a table go ahead and hit
crate and make sure it's by the right
table and right after this write the
table name of your table and since the
table name is the same of the ticker
we're just gonna go ahead and write
create table name this is gonna create a
table name called Yahoo Google Netflix
whatever so it's going to create a table
name this now after this you write
parenthesis and inside the parenthesis
you're right okay what do you want that
column to be named in what type of
information is that so we want a column
to be named date and it's gonna hold
date information that's actually a data
type that's what I meant not type what
data type now we want this to be the
primary key because check this out if
you're familiar with MySQL
you know that every row should have a
unique identifier now usually you have a
separate primary key or user ID if you
ever made a game now the only thing that
is unique on each one of these rows is
the date it can have the same open high
low close volume but it can never have
the same date you never have two rows
with the same date so that is why I want
to make the date the primary key so go
ahead and write primary key and just go
ahead and write date like that that is
how you set something to a primary key
through you know a query so now we have
date now let's see what we have open
high low close and volume and all that
stuff alright so after date we have open
and open is going to be a float now a
float is just something with decimal
points it's not an integer because it
can have like a percentage now open is a
float
pi is a float and let's see low is a
float scroll this bad boy over lo is a
float and then I have close there's a
float and then let's see volume now
check this out remember I said that
volume is basically the number of shares
or the number of trades that were made
during the day this can only be an even
number you can't make like two and a
half trades it's either your trade or
you don't so this one I'm going to make
an integer so volume and now ammount I'm
just go ahead and copy this amount
change this is going to be if I can
scroll over amount change is going to be
a float and also I think the last thing
I have is percent their name at percent
or percentage percent change this is
also going to be a float
so now what you want to do is just go
ahead and end your line and go on to the
next line now I'm actually going to
check my queer real quick because I'm
scared
day-day przemek so now you know behind
the scenes of what I sound like
whenever I'm checking queries in Bear
Singh so now what we want to do is
remember this isn't a query we didn't
queer anything yet we didn't run
everything anything through MySQL all
this is right here is a string of text
in order to actually query it you have
to use the MySQL underscore query
function and now we pass a string in
there and that runs whatever string as a
query so now that we have that we need
to say okay if you didn't have a table
already then go ahead and create a table
that's all we did right here so the only
thing we have left to do is say okay so
by the time we get to this point whether
a table was created right here or if one
already existed we want to take the
information that was stored in these
variables from our array and we want to
actually insert it into the database
into the tables so in the next tutorial
what I'm gonna be doing is I'm gonna be
finishing up this function and I'm gonna
show you guys how to actually insert the
data into the database hint it's very
similar to this just the syntax is a
little bit different so anyways thank
you guys for watching and we're gonna
subscribe yet I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>