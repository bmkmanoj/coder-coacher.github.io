<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Beginner PHP Tutorial - 91 - Uploading Files: Restricting File Extensions Part 2 | Coder Coacher - Coaching Coders</title><meta content="Beginner PHP Tutorial - 91 - Uploading Files: Restricting File Extensions Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Beginner PHP Tutorial - 91 - Uploading Files: Restricting File Extensions Part 2</b></h2><h5 class="post__date">2011-04-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rkKKP3eOtU4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we'll choose this file click Submit
and ok maybe not yet I'll be 17 sorry
okay so just refresh so we've got JPEG
now this we've achieved the result that
we want however we need a dynamic way of
choosing of choosing this extension
because we're not always going to rely
on uh knowing how many characters the
file name is for example if I chose file
dot PHP and click Submit nothing comes
up because this is not work because we
don't have exactly 17 characters up to
the dot so we need another function
which is called STR pause which stands
for string position and what we need to
do is we need to grab the string
position from name of the dot okay and
then we need to add one to that the
reason we need to add one to that is
because we're looking for the position
of the dot and then after that meaning
one after that we need to take and that
will be the J so we find the dot one
after that will be J and then the rest
will be PG so let's just check how this
works
remember we selected this image file
first and we click Submit so that seemed
to return everything correctly now let's
choose the file dot PHP click Submit
and you can see that it's given us PHP
so just by combining these two functions
we found this really easy way to grab
the file extension and then obviously as
well as this extension here we've got
the type of file here so that can go up
there for now okay so let's remove these
and what we need to do is perform a
couple of checks to see if the file is
what we want it to be so we want it to
be a jpg file so we need to add in just
over after here we need to say if not
empty name and extension equals jpg or
extension equals JP eg because sometimes
they can be named JP eg what we can also
check for is it would be good idea check
for uppercase as well because otherwise
that won't be allowed so what we can do
is we can actually say STR to lower and
what that's going to do is that's going
to take the strip the the extension name
and make it lower case so we we don't
need to check for jpg in lowercase jpg
the jpg in lower case and then in upper
case this is going to automatically make
the extension lower case so we only need
to check two times and then we need to
say and type equals equals image /jp eg
okay so now let's see empty okay let's
take this out of here actually because
let's take that out of there and we'll
create a new if statement down here so
if and we can paste that in there let's
just get rid of that and that there so
it's nice and tidy so if the extension
equals jpg or the extension equals jpg
and the type equals image JPEG then we
process this so let's just end in that
so we look well it need let's just check
where that's going to end that one into
there and then okay
so let's just indent that okay so we
performed a check now and then we
obviously going to add an else on there
so echo file must be jpg jpg so let's
give it a test let's choose a file we're
going to choose this Nikolov worsley
file click Submit pass error on line 11
so that's going to bug this so 11 if
empty our they'll go missing another
bracket on there that was me messing
around so let's refresh the page 113 as
well okay should be there so let's check
what's wrong here it would be one
missing on there so I'm missing out all
my brackets okay so that's uploaded so
let's go and check that and that might
have just overwritten that file again
yet so it has let's just delete these
actually so we can keep an eye on what's
happening and what's not so let's just
start there just delete these files here
click yes okay so as far as we going now
there's nothing in here so let's try and
upload our our image file again so
choose file choose that click Submit
that's uploaded so as we as it stands at
the moment we presume that this has been
uploaded so I'm going to click an upload
yet it's there and everything's worked
now let's go and try and upload a PHP
file and see what happens
submit file must be jpg /jp eg so now
you can see how we've used these two
methods of security we're first of all
checking our custom extension which
we've taken we've taken from the name
and the original type of the file and we
checked for that so we're checking that
the file exists and now obviously you
can add in more logical operators to
check for different types of file but
there is actually an easier way to do
that using arrays so we'll do that
probably later on so that's basically a
bit of form security in the next video
we're going to be talking out about how
to check for the file size which we've
currently got grayed out here</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>