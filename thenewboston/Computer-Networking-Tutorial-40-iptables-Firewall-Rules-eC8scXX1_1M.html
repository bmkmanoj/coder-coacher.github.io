<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Computer Networking Tutorial - 40 - iptables Firewall Rules | Coder Coacher - Coaching Coders</title><meta content="Computer Networking Tutorial - 40 - iptables Firewall Rules - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Computer Networking Tutorial - 40 - iptables Firewall Rules</b></h2><h5 class="post__date">2015-09-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eC8scXX1_1M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys welcome back and in this
video I'm going to show you how to make
firewalls using the tool called IP
tables now as I'm sure a lot of you guys
already know a firewall is just a way
that you can filter traffic so it's
pretty much saying what traffic do you
want to allow and what traffic do you
want to block
you can set this up for your own
computer or for an entire network so say
that I don't know maybe your kids are
going to this weird website well you can
set up a firewall to block like anyone
from accessing that website or maybe if
this weird person keeps emailing you you
can set up a firewall to block them from
emailing you so what kind of traffic do
you want to accept and what kind of
traffic do you want to block so let's
just go ahead and look at the IP tables
on my own computer and if you write IP
tables - L then it's going to show you
all your IP tables and right now I have
none this is just the default I don't
have any rule set up so again like I
said you can either set this up on a
personal computer if you just want to
filter or whenever you're setting out
for entire network like a university or
your business you usually set this on
the router and since all your data is
passing through the router it's going to
filter it right there so these lists of
rules are actually called chains and you
have three different ways that data can
be sent
whenever you're just getting data from
like the internet or whatever on your
own computer
that's called input whenever data is
coming into your computer now whenever
you're sending data out of course that's
called output so say hey I want to
connect to this website going to send
out requests that would be an example of
output now forwarding this is kind of
weird this doesn't apply to personal
computers a lot this is more for routers
so a router it doesn't really send data
out or you know get any data in itself
it's really just meant for forwarding or
passing through other people's data so
you're going to see this row a lot on
routers whenever you know it's just
connecting to devices and the data set
think through it it's called it just
forwards it from one device to another
now another thing you're going to notice
is these policies right here and these
are your default policies so let's say
that we're going to make a bunch of
rules for the input what data we have
coming into our computer and if none of
those rules match then we're just going
to follow this policy by default so this
like I said it's pretty much default
role and right now it's just set up to
accept everything so since this is for
my own computer and I really don't need
forward then I'm just going to change
this from accept to drop so anytime you
want to change a default policy right
iptables
and then right - P which is your default
policy flag and I'll just write forward
drop so my default policy for forward
I'm changing to drop since you know my
computer is not set up as a router right
now and now if I run iptables again you
can see that it changed to drop no one
clear that out so let's look at some
actually like a useful examples so say
that I just broke up with my girlfriend
because I found out she was addicted to
heroin and she keeps annoying me she
keeps like sending me messages emails
trying to add me on you know whatever
thing were connected on whatever so I
want to block her IP address since while
she's crazy
so what I wanted to do is I want to add
a rule to the input chain because
remember whenever she sends me something
that's input coming into my computer so
if I write iptables
I can write minus capital a and this
means add or append a rule so what I
want to do is I want to apply it to the
input chain and now the source would
just be the IP address of her device
whatever was so let's just say 192.168
0.23 so I want to filter that out and
what I want to do whenever I get data
from that source well I just want to
drop it so I'm going to hit enter and
now if I look at my IP tables again it
says what we're going to do
now is whenever we get input if it's
coming from this source then we're just
going to drop it so now she pretty much
can't connect to my computer anymore all
of her information is blocked or dropped
so the thing is she's not giving up yet
she's still pretty stinking crazy so
what she did is she told all of her
friends to send me a bunch of emails
since she can't anymore so now begin a
bunch of these crappy emails from all of
her crazy friends so I decided just to
block all email so I'm going to add
another roll iptables
add another rule got to do it and of
course that's input whenever people send
me emails that's coming in a month my
computer now for the source what I can
do is I can just write 192 168 0 dot 0
slash 24 so you guys know that from my
networking tutorials this is cider
notation and it's going to block all of
the devices on this network but it's not
going to block all traffic because what
we're going to do is we're going to
write minus P in TCP so minus P is the
protocol and you can give it an optional
parameter of a protocol which is in this
case TCP they're a bunch of optional
things that you can do but I'll show you
guys a few right now so right here I'm
going to write destination port 25 since
that's the typical port for SMTP or
email one of the most popular email
protocols and I'll just write drop not
dorp great now I messed it up drop right
there so I'm going to hit enter and what
this does is says okay now whenever you
have traffic from anyone on this network
and it's going on port 25 which is SMTP
then you're just going to drop it so
let's look at IP tables again and check
it out so this is me blocking her device
so I can't get any input from her and
now I can't get any TCP traffic from
anyone on my network so I blocked her I
blocked all of her friends it's golden
but crap I forgot about something now my
new girlfriend my cool one that's not
crazy she called me up in she's like hey
Bucky I'm trying to email you some sexy
pics and I can't because I'm blocked I
got off forgot about that so I'm going
to allow my girlfriend my new one so
okay let me change this actually let me
clear this out less clutter so iptables
I'm going to add a new rule I'm going to
add input and my cool girlfriends her IP
is a I wrote is embarrassing the source
is 192.168.0.1 ever so the rule for this
is I actually want to accept any data
from this IP so I want to drop all those
crazy people but I want to actually
accept it from my new girlfriend so now
let's look at our rules and okay these
guys are still blocked but I am now
accepting packets from my girlfriend
that's normal but I applied this rule
and she's calling me again and she's
like Oh Bucky I still can't send you any
email so I'm like what the heck I added
a rule what's going on so what happens
and the problem with this is whenever
your firewall is up and running it's
going to go through and look at the
rules from top to bottom now look at
this she's on the same network as I am
so she's going to go through these rules
and say okay but does this apply to me
well no this is only for this computer
right here does this apply to me well
yes because even though we accepted her
down here it hid this rule first and
this rule says anyone on this entire
network so you know one six eight does
0.11 six eight dot zero dot ten all of
those addresses I'm going to drop so it
never even got to this rule since it hit
this one first and whenever it finds
when that hits then it follows it and it
stops looking so now what we need to do
is we need to say okay
actually want to move this to the top
because if she tries to send me an email
then I want it to look at this first and
if it sees that it's her dress then it's
just going to accept it by default not
look at anything else so in order to do
this it's actually really easy I'm just
going to delete this third one first so
I just write iptables
and if you're right - capital D this
just means delete rule what rule do you
want to delete while I want to delete a
rule for my input chain this first one
right here and what role do you want to
delete 3 so this is 1 2 &amp;amp; 3
so now I'm going to hit enter and let's
look at that again so now we're back to
basics and now what I can do is this so
this is the rule wherever I accepted her
and if I just run this again it's going
to put her in the third position and
remember we talked about why that didn't
work so instead of minus a what we can
do is you can write - I now - a and - I
they both are going to add this rule to
the chain the only difference is - a it
adds it to the end - i as we're going to
see it adds it to the top of the chain
so again since you wrote - I instead of
putting it at the bottom it's now at the
top of the chain right there so now
whenever she sends me an email it's
going to say okay let me look at who is
allowed to contact Bucky Oh yep any data
from one six a Oh 66 you're allowed you
can get the email and again still my
crazy ex-girlfriend and all of her
friends are still blocked
so I'm happy I can talk to my new
girlfriend I actually got a restraining
order on my old one and boom roasted
there you go so that's the basics of IP
tables there's some more to cover and
most of it regards to this is just for a
personal computer one computer but when
you're managing a network then it's
different because you actually want to
work with this forward chain a little
bit more and we'll talk about that in
the future but for now that's all you
guys get thank you for watching I will
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>