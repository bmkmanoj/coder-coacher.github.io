<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>jQuery Tutorial - 185 - Users online sample application | Coder Coacher - Coaching Coders</title><meta content="jQuery Tutorial - 185 - Users online sample application - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>jQuery Tutorial - 185 - Users online sample application</b></h2><h5 class="post__date">2011-08-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EsXKAydMF74" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now this is working we know that we
have a list of we actually have a list
of users inside of our inside of our
table ok so inside ext dot J s we're now
going to look at this set interval and
we're gonna look at getting the list of
users so this time we're gonna perform
something slightly different and we're
going to use three different variables
in post by sorry parameters in post
remember this was the first parameter
this was the second but this time we're
gonna provide an additional callback
function and this is because users dot
php' is going to relay to us a list of
users so let's go ahead and do that now
right so inside of here we want to again
send a post a request to users dot PHP
so that's PHP forward slash user stop
PHP the variables that we're sending
we're only going to send one because
obviously we don't need to supply a
username here we just need to supply an
action which is list and then the third
function is a callback function with a
with a parameter data or a returned
value data and data is going to hold
anything that's returned or echoed out
by users PHP and essentially what we're
going to do now is because we've
provided the action list we inside users
dot PHP we can just echo out the list of
users and this will be placed into this
data variable so where does the data
variable go well obviously we want to
display the list of users inside of
users online div so we want to go ahead
and select users underscore online and
we want to play some HTML in there which
is data so we use the HTML function here
and we place the data variable inside of
users online so now that we've outlined
what this is actually doing every half a
second we want to go ahead and actually
allow for this list to do something so
down here what we want to do is append
onto this if statement and we want
else if here and we want to say else if
action is equal to list and if action is
equal to list we call user list function
so the obviously when the list action is
found we want to call user list function
now we have one problem here we're not
actually sending the user name with this
so we need to modify this line here to
allow only for the action to be supplied
on its own so we say if is set the user
name and the action together or using
the or operator is set and dollar
underscore post action so the app if the
action set then we can continue with
this code we have action here obviously
we don't need in the user name in this
case so perhaps my codes a tiny bit
illogical in the sense that we you know
assign this variable but you can go
ahead and modify that in your own time
to make it more efficient so action here
if it equals list we want to call user
list function so the users list function
what do we want to do well we're going
to be returning the results in an array
and then echoing out this array down
here so I want to create an array called
users or user lists equals array and I
want to go ahead and create a query and
store that in users or users query so
this is my SQL query an extremely simple
query select user underscore name from
users so what this will do is it will
select all fields that are user name
from the table users remember we have
our field name here and our table here
so now we can go ahead and actually run
a run a loop to loop through every name
in this list
so while users
is equal to MySQL fetch a sock which
fetches an associative array from users
query we can go ahead and actually
output something here so I'm going to or
not output something but we want to
store each value in it in a element of
users list array so users list and then
remember our square brackets because
we're just adding to this array users
list is equal to users row user
underscore name so let me just go ahead
and explain this just again for anyone
that didn't understand
we've queried the database we've looped
through the results and we've applied
each we're appending elements onto this
users list or user list rather use a
list array up here that we defined
earlier
and that is taken from the users row
which remember is here and that's
username which is the field name so now
what we can just do is return user lists
so now use a list function returns an
array so user list is now an array so
inside of here what we can do is we can
use a for each loop and we can say for
each user's list I think we call it
users of this didn't we use a list for
each user list as user now what's going
to happen is because we placed user name
inside each element of this users list
array user is now a single name so if we
have three three names in the list or in
the database table this would echo this
would loop three times as with this loop
three times as well so what we can now
do is echo let's say user
and then we can append a break on to
that so now what this will do is the
file users dot PHP will essentially pick
up on this action it will go ahead and
loop for every users list as user
remember we returned each name as an
array and then it will just echo out
each element of that array so fairly
simple let's go back to our page we'll
have to go ahead and delete this and
then refresh so I'm going to type in
Alex press ENTER and nothing has
happened so let's take a look at why
that might be okay so we might have to
go ahead and duplicate this tab over and
type in Alex and browse and nothing's
happened okay so let's take a look at
why this might be let's go over to ext
is action list so if action equals list
that looks okay
users dot PHP users online and well
actually appeared that we didn't have
any results go into the database so
let's just take a look at our right okay
so let's take it take a look at this so
use it username action joined maybe we
could just copy this and let's take a
look so Alex okay and that should have
passed that name to the vet to the
database which it hasn't done so there
might be an error in my PHP file let me
just take a look and see if I've written
anything wrong so we've got the query
here users users query ah there we are
I didn't put a semicolon on the end of
that line</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>