<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>jQuery Tutorial - 183 - Users online sample application | Coder Coacher - Coaching Coders</title><meta content="jQuery Tutorial - 183 - Users online sample application - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>jQuery Tutorial - 183 - Users online sample application</b></h2><h5 class="post__date">2011-08-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9foxCPO9jfg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we create a variable and this is
going to be called user underscore name
and this is going to be the prompt that
actually prompts the user to enter their
name so that we use the JavaScript
prompt function and we type in please
enter your name so now once we enter our
page this will prompt the user to enter
a name so it's refresh so we've got
please into your name if I type in Alex
now that that's then stored Alex inside
this username variable so now alex is
equal to using sorry username is equal
to Alex okay so now that we've done that
we want to go ahead and actually send
this username to users PHP to be able to
put into the database but we're not
going to do that just yet so I'm just
going to put a comment in here
send username to users PHP and we also
have a action as well so the action will
be let me think what did I call it
before I think I called it user joined I
think yeah so we'll just say user
underscore joined or joined so the
action for to send to users dot PHP was
sending two variables the first variable
is username and the second variable is
action and based on the action either
joined or left or you know like list or
something like I think we'll call the
action it will perform a specific action
so now that we have established sending
the actual variable we need to go ahead
and set an interval that will treat
retrieve a list of values so we need to
set an interval and inside here we run a
function now the end of this we we give
a second parameter and this is the
amount of milliseconds that's 500 which
is half a second you can choose a second
it doesn't really matter that brings me
on to another point of this tutorial we
are going to be sending in this case a
lot
queries per second we're going to be
sending to database queries per second
or my SQL queries per second and this
can you know slow down or overload it
wouldn't really overload because we're
just selecting but it is a sort of like
unnecessary amount of queries to be
performing so bear in mind that this
method if you're performing a lot of
queries will send too many requests to a
database and it can be inefficient so
here what we want to do is get list of
users and the action we are going to
call list sorry list not left list so
every 500 milliseconds we're sent we're
sending a an HTTP request to users dot
PHP and the action is going to be list
and that will just retrieve the list of
debt of users so quite simple the the
last thing we want to do is we want to
handle when the user actually leaves the
page so either close the window or
navigates away so we use window dot
unload and inside here we then create
our function outline and what we want to
do on window unload is remove user name
and that's by sending that to users dot
PHP and then the action will be left ie
not left as in left and right it will be
left as in the user has left so from
users dot PHP we can start writing this
out now because we've outlined what we
want to do which obviously doesn't work
here the when the user joins they enter
their username and it sends this to
users dot PHP and puts into the database
every 500 milliseconds it retrieves a
list of these values in the database and
when we unload the window we remove the
user from the database so quite a simple
outline in jQuery there exactly what
we're doing let's just go ahead and
connect to our database and then we'll
go ahead and look at the database
structure it's extremely extremely
simple but we'll take a look at it
anyway
so we're connecting to a MySQL server
for me this is localhost root and I
don't have a password set we're also
then selecting a particular database and
this database is jQuery so let's go
ahead and take a look at the jQuery
database so over to PHP myadmin we have
let's just browse and let's just delete
that and look at the structure so we've
only got one field in here I haven't set
a primary key obviously you would always
set a primary key in a database usually
auto incrementing but we've got a field
called user name and that's link 455 so
essentially all I've done is created a
database called jQuery and I've got a
table called users there's another table
in here called places but you can just
ignore that for now we're gonna be
focusing on the user's table so now that
we've taken a look at the directory
structure we all know how to write our
queries so we can go ahead and start to
write users dot PHP out I'll go ahead
and close DB dot PHP because we no
longer need it let me just check that
yeah that's fine okay so inside users
dot PHP the first thing we want to do is
require in DB PHP so we have database
access we then want to go ahead and
outline the functions that we're going
to be using so the first function is
user underscore join then we've got user
underscore left I think yeah or joined
and then lastly we have user underscore
list which will list users now user join
takes a user name so that's user
underscore name user left-left takes a
one-parameter again user name and user
list doesn't take any parameters because
obviously we're just returning a list of
the values</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>