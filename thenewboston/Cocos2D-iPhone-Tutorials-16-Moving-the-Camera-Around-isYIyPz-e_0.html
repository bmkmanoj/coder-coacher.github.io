<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cocos2D iPhone Tutorials - 16 - Moving the Camera Around | Coder Coacher - Coaching Coders</title><meta content="Cocos2D iPhone Tutorials - 16 - Moving the Camera Around - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cocos2D iPhone Tutorials - 16 - Moving the Camera Around</b></h2><h5 class="post__date">2010-09-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/isYIyPz-e_0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what is going on guys welcome back to
another incredible tutorial and in the
story where we're going to be doing is
we're gonna be making a method to move
the camera around to follow the guy
around as he moves around our map so
check this out see how this guy's his
chillin here in the bottom left corner
well once he starts moving he's going to
go off the map and if we don't make a
method to have the camera follow him
we're not going to be able to see what's
going on he's going to be wandering
around his own little world and we're
going to be stuck looking at this bottom
left corner so we don't want that so we
better code a method fix it so let's go
ahead and make a method not slow so
that's two bit better set center of
screen and just go ahead and pass in
dude the position because his position
because the center of the camera is
going to be based on where he is pretty
much all right so now that we have that
we actually better go ahead and actually
make this method so it's just going to
go ahead and return void and just go
ahead and copy this copy and paste that
and set center of screen looks good in
parameters for this the Duke position is
actually a CG point and just go ahead
and name it position let's say good
header and now what we want to do the
first thing we want to do is determine
the size of our camera and in this case
it's pretty much a size of our iPhone
screen so in order to return the size of
your iPhone screen here's what you need
to do cg size screen size and set this
equal to this CC director shared
director just like that and win sighs
and this is going to return the size of
your iphone screen so typically 480 x
320 but if you have a status bar i think
is going to be like for 60 x 320 but
anyways here's what we want to do now
the size is stored in the variable
screen size so what we basically want to
do is we want to set the center of the
camera equal to wherever the dude is
standing so our dude always appears in
the center of the screen however we are
going to have some exceptions to this
rule for example right now you see how
he's on the edge of map right here well
if we have the center of the camera on
him then part of the map or excuse me
part of the camera is going to be
showing black because this off the map
let me show you guys example if we send
their the camera right here see how he's
pretty much in the center of the screen
right here well over here and over here
will show black because there is no map
so what we need to do is we say alright
typically we want to set the center of
the camera over where he is but in some
cases we don't so that's what we're
going to be coding and that's why we
just can't you know right method says
put center of the camera equals dude
position because when he's along the
edge of the map we can't have that so in
order to do this here's what we need to
do let me get myself some space the
first thing we want to figure out is
which is greater the dudes position or
the center of the screen so let's go
ahead and make it x and y and how if you
want to get the maximum of two things
there is function called max and put
position X or screen size dot with
because you know X is left and right / 2
simple enough so now we can do same
thing for y into y and set this equal to
the maximum
position dot why screen size the height
in this case over to so what this is
going to do is say all right what is
greater either where he is standing or
and this is pretty much going to return
um the width half the width is going to
return 160 and half the height is going
to return to 40 in most cases so that
pretty much says all right if he's too
far off the left just use 160 if he's
too far down just use to 40 instead
simple enough so that makes sure that
the camera is it showing any it's make
sure it's showing all of the map and no
black thing to the side so now what we
want to do is this is pretty much for
one side but now we need to do the
opposite side of it so we need to find
this pretty much finds the maximum
location of where it can have a point
and now we need to find the minimum
because of course we need to find not
only the bottom left also top right
makes sense so now what we want to do is
set X equal to this minimum of X we can
use the position we already have or the
map and map size width and we need times
this by the map dot tile size dot with
and now what we need to do is subtract
screen size / to all right that looks
good so here is how you get the entire
width of the map your map is made up of
however many tiles you put it in this
case 50 and each tile size has a width
in this case 32 by 32 so this is good
and I don't want equals right there and
this is going to be how many tiles times
the size of each tile minus the screen
size so this is going to get the
opposite edge of the map
so now with that long thing y equals
minimum we can use the old why or what
we can do is the map map size so height
times the map tile size duh height spell
all right height come on off and then
minus screen size and height divided by
2 I know that looked weird because you
need to screen size the width / 2 before
it would have gave me an error message
so now that we have the proper x and y
coordinates let's just go ahead and set
that to a value name like a good point
or something like this so CG points and
name this good point and make this equal
to ccp x and y so now you're saying all
right now all we need to do is take the
camera and set it equal to this good
point because this is the ideal point
where we want the camera to go in you
are semi correct but check this out
moving the camera and cocos2d is
possible but it's a little sugar than
you might think and things kind of get
fuzzy whenever you try to move the
camera around so what it's going to be
easier to do is actually instead of
moving the camera where the layer needs
to go it's going to be easier to take
the entire background layer and move it
slide it where we want to show trust me
i mean the coding is going to look a
little funny but it's a lot easier than
moving the camera so the first thing
we're going to do is get the center of
our iphone screen so CG points and
center of screen looks like good
variable and set this equal to ccp and
of course we're just setting this equal
to the center of our screen so screen
size um dot width divided by two and
screen size dot height divided by two
simple enough so now what we want to do
is say this we want to find the
difference of the center of our screen
to the ideal point and that is you know
the difference in how far we have to
move the camera so there's a really easy
method from for subtracting one point
from another point so CG point and name
this difference not DIF difference and
set this equal to this CC p sub what
this does is it takes two points that
we're about to pass it in and it
subtracts the value from it so let's go
ahead for the first one put center of
screen which is our iphone screen and
for the second one go ahead and put good
point which is the ideal point of where
we want the camera to be so now all we
have to do is move the layer that much
so our layers name is self de position
and what we want to set equal to is
difference so now it's going to move our
entire layer however much that however
much it needs to be moved and studying
instead of moving the camera itself it
slides the layer into the cameras view
that's what i want to say that oh that
was trying to get out so now if we go
ahead and build this it's going to look
the same but we can go ahead and build
and check for errors anyways oh yeah I
already forgot I had it running and we
get one error message and I'll show you
guys what that is and of course our do
doesn't move yet but we have no errors
which means this is good to go so now in
the next store i'm gonna be showing you
how to move them around and
you'll see that the camera moves with
them so now when we move them around
again there's no method to do this yet
I'm going to be teaching you that next
but when we do the camera is going to
move with them pretty cool huh so I
think you guys watching don't forget to
check out my next story where everything
is going to come together I promise so
anyways thank you I don't forget to
subscribe and I'll see you guys later</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>