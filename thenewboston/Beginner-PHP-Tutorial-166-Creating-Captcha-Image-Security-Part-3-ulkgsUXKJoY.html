<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Beginner PHP Tutorial - 166 - Creating Captcha Image Security Part 3 | Coder Coacher - Coaching Coders</title><meta content="Beginner PHP Tutorial - 166 - Creating Captcha Image Security Part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Beginner PHP Tutorial - 166 - Creating Captcha Image Security Part 3</b></h2><h5 class="post__date">2011-04-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ulkgsUXKJoY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so you can see that we are
generating at generating out some data
and displaying these numbers that have
been generated so let's refresh a couple
of times and see if these change yet
they are in fact changing now let's have
a look at the width of the image so the
width of the image is a bit off it's way
too big so we need to decrease it by
about half so let's go ahead and do that
this is not really going to be much
changes to be made so let's change that
to 100 and come into refresh okay so
that looks about right actually our
image size our that's the problem
because we might have a slightly longer
characters so let's change this to 120
just to be safe
maybe 110 so it's just a matter of
fiddling around with things until you're
happy so I'm quite happy with this now
the only thing the only problem with
this is that we need to generate some
kind of noise and we need to generate
something that masks these letters and
is still readable by humans but might
not be readable by a computer
so let's come down to just after we set
our text color because the function that
we're going to be using is going to
require a text color in there and the
function that we're going to be using is
image line and this image line function
takes a few parameters I'll just explain
the function before we continue the
first one is the image that we're
working with the second one is we need
we need to specify x1 and y1 and x2 and
y2 and then the text color so we've
already got this variable defined here
so this is even though it says text
color where we're creating the lines to
be black as well this is the exactly the
same so these are just the coordinates
that we're creating that so we want to
do something we want to create
coordinates that are completely random
that so they're going to be splashed
across our image so how can we do this
well I'm going to create a for loop for
this and we're going to loop a specific
amount of times and we're going to
generate for variables which is x1 x2 y1
and y2 and then what we're going to do
is we're going to put these into the
image line function in order to generate
random lines with different coordinates
that are going to be you know changing
chopping and changing each time so we've
created a for loop the skeleton for our
for loop we're going to set the variable
first of all which is X equal to 1 and
then I'm going to say while X is smaller
than or equal to let's give it a value
about 34 now what this means is 30 lines
are going to be generated because we're
going to run this image line function
inside our for loop so 30 lines are
going to be generated remember we need
to increment our x value each time so
essentially what this does is it's going
to loop 30 times this is this loops
going to loop 30 times
so for each 30 times that we loop we
want to create a variable x1 y1 x2
oh and y2 and these are going to be
equal to a random value okay so we need
a random value for each one of these so
again we can use make use of our round
function as we did in here but this time
we're going to be generating a number
with a lower limit of a hump lower limit
of one and an upper limit of a hundred
so we can do that for each one I mean
again you feel free to chop and change
with these you can mess around with
values depending on what kind of output
you're looking for but for now this is
going to generate a number between 1 and
100 and now down here we can apply that
to our image line function so remember I
said the first parameter is image width
which is the image we're working with at
the moment and then we're taking in x1
and then we need to take in x2 or y1
sorry and then I mean it doesn't really
matter in the order that you put them in
but I'm just adhering to the order in
which this function takes parameters so
the last one we need to put in is y2 and
then obviously like I said before we
need to define a color for these lines
so you can feel free to choose your own
colors but I'm just going to be creating
this black because I feel it merges with
the fun a lot better and this means that
it's going to be a bit harder to read so
we're inside our image we're creating a
line so using the image line function in
these coordinates which would tightly
round them so it's going to splash them
across our image and we create new in
black so now let's go back and preview
our image and see what it looks like
okay so great what we're doing now is
we're generating our random lines
they're all across our image and it's
quite hard to see the numbers but if you
do look carefully you can still make
them out I think this one is 3 9 it's
either a 7 or 1 and 3 and some are going
to be harder to read than others I think
this is 6 4 double 1
so the point across it at the point of
this is it's still human readable but by
a computer standards it might be quite
hard to read this because we've got
these lines going across okay so what
are we going to do next well we've
generated everything here now what I
want to do is just echo out on this page
and we're going to come down here under
our image and that's put a line break on
the end of our image so we keep
everything neat and tidy I'm going to
echo out the secure session just to make
sure that each time it matches what we
have in our image so let's refresh now
we've got eight seven five six here this
looks like eight seven five and a six to
me we've got nine one two five here so
we've got gnome one to five that looks
about right and two three seven nine so
you understand the point of this is that
we're just making sure that they match
every time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>