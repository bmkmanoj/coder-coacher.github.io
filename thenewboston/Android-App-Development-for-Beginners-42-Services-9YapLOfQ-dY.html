<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android App Development for Beginners - 42 - Services | Coder Coacher - Coaching Coders</title><meta content="Android App Development for Beginners - 42 - Services - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android App Development for Beginners - 42 - Services</b></h2><h5 class="post__date">2014-12-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9YapLOfQ-dY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys so another way to make a
service is just inherit directly from
the service class and it's a little bit
different than an intent service and by
the time you understand everything about
services you're going to learn when to
use each one and the benefits of each
but for right now let me show you guys
how to do this so if you right-click
your package and select new service and
then just choose a regular service not
intent service then what this is going
to do will just keep the default name
for now is it's going to give you a file
that again inherits directly from the
service class now before I show you guys
how to make this let me just go ahead
and enjoy you till dots log just set up
on my log messages stuff so I'm going to
put it right above the constructor that
variable private static I know probably
should just copy this string tag and set
it equal to this
all right and we probably should go to
our filter and make sure that everything
is set up properly so now we can
essentially print out log messages so
the first thing I want to show you guys
is this by default it gives you two
methods and this is you always need
these methods whenever you're using this
type of service the constructor and we
really don't need to do anything in the
constructor right now so we can just
leave it like there no code necessary
another thing is it gives you this
method right here now there's actually
another type of service called a bound
service and I'll probably teach that in
the next tutorial but for right now all
we can do is we can actually just return
no right here because this tutorial is
not going to be a bound service and what
those are and how to use them not really
important right now because right now
I'm just going to show you guys how to
create a generic service all right let
me just write here and after this
constructor what I want to do is I want
to override a few methods so go to alt
insert override methods and the first
thing I want is on start command now
essentially whenever we start our
service we're going to put the code of
what we want a service to do in here so
this is pretty much the meat of it
inside here is whatever you want your
service to do now another thing I want
to do is I want to inherit on destroyed
and this is going to be called whenever
your service of course is destroyed easy
stuff right there
so I'm just going to print out a log
message on destroy so you guys can see
when it's getting called so log dot I
tagged and I'll just write something
like on destroy um
is method called something like that all
right looking good so now let's go to
OnStar command and we can actually just
delete all of that so again this is when
your service starts so whenever it
starts of course you want it to do
something now just to demonstrate a few
things the first thing I'm going to do
is just print out when this command is
being called so then in the little lock
section we can see when it's happening
and another thing that I want to do is
this so again remember a surface is just
a process that runs in the background
and the user doesn't interact with it at
all it doesn't have an interface or
anything like that now the proper usage
of service allows for the user to
continue using their phone while
whatever happens in the background just
happens
unknown to the user so what we need to
do to make that happen is we need to
take whatever code is in our service and
stick inside a new thread now the reason
that we didn't do that in the last
tutorial with the buckey's intent
service is because an intent service it
makes its own thread automatically
that's how Android is set up however it
doesn't on this type of service
inheriting directly from the service
class but we get some other benefits as
well as we'll see you later so of course
we already know how to make threads
runnable r equals new runnable and sweet
so make sure to throw that in there now
of course in run is what you want to do
so all I'm going to do for this little
example is I'm going to make a loop and
this is going to be real stupid by the
way just say I equal to zero and we'll
say like eyes less than five and I plus
plus so again this loop is just gonna um
loop five actually let's go ahead well
it's good enough for right now
so right now I'm just gonna pretty much
just wait just like we did before and I
probably should just go get the code for
my other tutorial but too lazy to do
that so we can recap so system that's
current time melis and we'll just add
five seconds to it so that's five
thousand milliseconds equals five
seconds and now we can just make a
little while loop so while the current
time is less than the future time then
what do we want to do synchronize this
re so we finally get to the bits up so
all we're going to do is we're going to
try to um alright let's just wait so
we're just going to wait like before
we're going to take that future time and
subtract the current time and why is it
giving me an error and it is because I
do then catch my exceptions exception II
all right so after this Waits I should
probably print out a little log message
too so you guys can see what's going on
so all this log message is going to say
is I don't know service is doing
something all right so this service is
pretty dumb the only thing it's doing is
it's waiting for five seconds five
different times in a row and it's just
going to print out service is doing
something but of course you would want
to put some code in here like
downloading images or checking a
database for whatever you want to happen
but now that it's stuck on a new thread
it's not going to interfere with
whatever else the user wants to do on
your app like changing screens clicking
buttons playing the game whatever so now
that we have this background process set
up the only other thing we need to do is
kick off this thread so I'm just going
to name my buggies
thread and of course you set it equal to
new thread holy moley thread and what
was our object R so this R is the code
that we want inside want to run inside
the thread so now we just need to start
it so start and of course since all of
this code is going on the on start
command we need or excuse me the on
start method we need to return something
now just return this if you call service
dot start sticky as you can see it was
the first thing that popped up there is
I believe it starts ticking che start
sticky and start not sticky so what
starts ticking means is you don't really
need to worry about it that meant much
but if your service ever gets destroyed
by the Android operating system for any
reason then start sticky just means
restart the service and if you call
start nun not sticky then the service is
not going to be restarted if it ever
gets destroyed so again not really
important right now just remember to
return service start sticky now the last
thing we actually need to do one little
itty-bitty line of code is on your
apples we need to say ok you created a
service but when you want to start
running the service well I'm just going
to put it right here on on create
because I don't know I don't want to do
anything too fancy and just like
anything else make a new intent new
intent with this and what was it pass in
the name
of that class where your services and as
you know to start a service you just
start service I so whenever this apples
activity is going to get created which
we are going to do right now it's going
to start that service and all the
service is going to do actually what I
would like to do is go to my log cat
make sure we're on Bucky's filter and
again like I was saying all the service
is going to do is wait and print out
something however it's going to be
running in the background which is
really cool so there you have it check
it out their service is working service
is doing something I can click continue
to interact with my app and it doesn't
interfere with the user experience at
all pretty stinking awesome
so that ladies and gentlemen is how you
create a service manually from
inheriting from the service class and
remember whenever you do so you should
really stick your code inside a thread
and it's going to create an awesome user
experience for your customer so thanks
for watching and I will see you guys
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>