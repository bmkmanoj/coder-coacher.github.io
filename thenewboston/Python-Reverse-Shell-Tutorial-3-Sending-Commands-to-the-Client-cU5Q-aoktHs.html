<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Reverse Shell Tutorial - 3 - Sending Commands to the Client | Coder Coacher - Coaching Coders</title><meta content="Python Reverse Shell Tutorial - 3 - Sending Commands to the Client - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Reverse Shell Tutorial - 3 - Sending Commands to the Client</b></h2><h5 class="post__date">2015-12-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cU5Q-aoktHs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so deaf too lazy to type this out and
got time for that alright and I'll just
sort of send commands so this of course
like I said is sending commands to the
target machine so while true because
this is just going to loop over and over
again because we don't want to just send
one command and then the connections
over we just want to keep looping this
as a constant loop and that way we have
a constant connection and not just a
one-time shebang
so the command is equal to input all
right so what this right here does is it
actually takes input from the terminal
so this is going to be our input so
whatever we type in not the client at
all so whatever we type into a terminal
let me see let me pull up this as an
example so if we type in like echo hey
that's what CMD is going to be equal to
so what I want to do now is just write
if CMD is equal equal to quit then I'll
just write this so we know to end the
connection so co NN and remember this
got passed in from the other function
closed and then we can close the socket
in closing the socket just closes the
again the conference or the connection
between the two computers and then sis
thoughts exit and again this is a system
command so basically just like typing it
into the command line so that's what
happens if we ever type quit and now we
just type it blank in code CMD
is greater than zero then what do we
want to do now the reason here let me
explain this right here so you see
whenever I open the command line and I'm
just typing in let's see is there CLS
I'm just typing in like echo hey you're
looking at this in your like alright
these are just plain old characters so
you must think that this right here is
of type string but whenever you run a
system command these characters are
actually stored as type bytes so that's
why you're going to see me on encoding
and decoding these back and forth and
what I'm doing is either converting it
to a string or 2 bytes so basically
whenever we just want to print it out
for the user it needs to be a string and
whenever we want to send it across the
network it needs to be bytes and also
coming from the command line or the
process it's going to be bytes so now
you know there you go so connections
send and by the way what I'm going to do
right here is what I'm checking for is
just make sure that um the command is
actually greater than 0 characters and I
do this because if they just didn't type
anything and hit enter then we don't
even need to bother sending it across
the network only send it if there's some
actual data there so we'll say
connection send and what we need to do
here is string encode CMD so from here
what we do is we just sent this command
whatever we typed in and again this is
going to be something like CD order or
whatever we want to do to the computer
and once we send it we're going to get
back a response from the client so the
response we're going to store in this
variable right here and we're actually
going to convert it to a string so it's
actually readable because remember when
it comes to loss is going to be in bytes
so we're just going to convert to a
string so connection receive I'll just
write 102 4 and this is just the buffer
size of the data
and now utf-8 so again this is the
response that we get in bytes and I'm
just going to convert it to UT f3 which
is a basic character encoding for string
just a normal string that's what I'm
turning it into and now we can just
print it out so client responds and boom
now the reason that here this is a kind
of random but why didn't I just print it
out like this right there well whenever
we just print out the response what it's
going to do is is going to print it and
then move your cursor to a new line
however if we use n right here this says
don't give us a newline character at the
end why do I do that well check this out
whenever I write like echo tuna what
happens is this is going to be the
response right here this is going to be
part of it and my cursor occurs right
after it so my cursor doesn't get bumped
down to a new line in that way I can
keep typing and it's pretty much going
to resemble a command prompt and well
there you go so you guys are going to
see the use of that later on but yeah we
are rockin we're rolling and that is is
actually it for send commands so all
might as well just finish show this up
now so def main and now all I have to do
is actually just make a function to just
call this and this and this so basically
everything we just did so death main and
this is just the first one that's going
to run whenever we first start this
program and we're going to create the
socket and then we're going to bind the
port and then we're going to accept the
connection and we don't have to call
this last one because whenever
connection is accepted it automatically
calls send commands so we can control
that machine so now if we just call main
then whenever you run this program that
is what's going to start let me get rid
of these lines and boom there you go so
now we can actually run this right here
and what it's going to do is is going to
say okay your server is now running
binding socket support tomato tomahto
and it's listening waiting for
connections however we don't have a
client setup yet so it's pretty useless
right now so in the next tutorial that's
what we're going to do create the
program that's going to go on the
clients computer it's going to be
awesome see you then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>