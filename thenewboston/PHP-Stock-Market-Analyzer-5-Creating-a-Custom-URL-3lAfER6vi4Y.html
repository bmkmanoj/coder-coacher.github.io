<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Stock Market Analyzer - 5 - Creating a Custom URL | Coder Coacher - Coaching Coders</title><meta content="PHP Stock Market Analyzer - 5 - Creating a Custom URL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Stock Market Analyzer - 5 - Creating a Custom URL</b></h2><h5 class="post__date">2012-01-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3lAfER6vi4Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys now that we understand how
to get free stock data we can begin
building some functions so the very
first function I need to build is I need
to build a function that can create URLs
based on what information we need so
what I'm gonna be doing is I'm gonna be
having a huge list of companies Yahoo
Google Netflix
so on and so forth say this list is 500
companies long what I'm gonna be doing
is I'm gonna be creating a function that
replaces the company name with all of
the companies in my text file therefore
it creates separate URLs and then you
can go to this URL it could download
Google's information go to the next URL
it can download Yahoo's information go
the next URL can download netflix so
therefore we can use this to basically
loop through our text file and download
all of that stock information without
having to do anything so that's what
we're gonna be doing basically replacing
this ticker with whatever is in our text
file so let me go ahead and delete this
actually you want to go ahead and make
sure you copy that because we're gonna
be using it later and we can go ahead
and start coding this bad boy so the
very first thing I want to do is you
know put my PHP tags in and I also want
to include the connection for my
database we're not gonna be working
directly with a database in this story
but I don't want to forget it so in
order to include your database just go
ahead and write the path to your dad
base woman I think my folder was called
includes and my connection file was
called connect dot PHP so now we're
connected to our database even though we
really don't need it for this tutorial
let's go ahead and get to the good stuff
creating the function that's gonna allow
us to download a bunch of mass stock
data so function and the very first
thing we want to do is this function is
going to create a bunch of different
URLs based on what ticker we pass it in
so it's gonna take one parameter and I'm
just going to name this great URL and
the parameter is again it's going to
take is the ticker now the ticker is
basically the symbol of the company like
I said
and the very first thing I want to do is
oh I want to mention this I want to
build a program that's gonna run through
all the stock data daily once a day so
this little URL right here it takes two
dates
it takes where do you want the stock
data to begin and where do you want the
stock data to end well we want it to end
on the current date however we can't put
in a certain date like 0-3 2012 because
even though today is January 3rd 2012
tomorrow it's not going to be tomorrow
it's going to be the fourth and then the
fifth so we can't put in numbers like
that or else it's always going to use
that range so we want to say okay we
want whatever the day is the current
date so how do we build a program that
does that well let's go ahead and we
need to store the month did they in the
year all current in a separate variable
and PHP comes with built in date
functions that return the current date
month in year so that's what we're gonna
be doing so let me just go ahead and
there we go
current month let's go ahead and work
with that first because the very first
symbol after ticker and I don't know why
they don't do day month year because
we're America and we have things set up
differently but the month comes first so
that's where I'm cutting month instead
of a day so just to make a variable
called current month and set it equal to
date with a parameter of n nursing okay
what the heck is this crap right here
the date function and PHP is built and
function that returns a value now based
on whatever letter you pass it in is
whatever value it returns whenever you
pass in n it's gonna return to you the
current month as a number so for example
it's going to return one since this is
January in February it's going to return
two so it's going to return you a value
1 through tell 12 excuse me however if
you remember from the last tutorial I
said that when
we're working with that string you
needed the month minus one so you're
remembering that string it said zero
that is because the first month is
January so it's going to return one for
current month but we need it to be zero
so just go ahead and set current month
equals current month minus one now you
can do your little shortcut for your
assignment operator but I like to do
with longhand because I like to visually
see so now in January it's gonna store
it as one and then we're eventually
gonna turn it into zero if it was if it
was December then the current month
would be 12 and then we would subtract
one from it and then we would have 11
and we need that number to plug into the
URL so now we do the same thing for
current current day and the symbol for
day is date and as a parameter its J how
they came up with that don't ask me but
anyways what this is going to do is it's
going to return to you a number 1 to 31
and since today is January 3rd
it's gonna return the value 3 which is
what we want and the last one is the
current year so current year and just go
ahead and let me just copy this crap
right there now the symbol for a year is
a capital y now what this is gonna do is
it's gonna return a four-digit year like
1999 2003 it's gonna return a string
that's for numerical digits long so now
we can use this n J and Y to basically
grab the current date and why am i again
one more time why am I just not using 1
3 2012 because tomorrow this is gonna be
one for 2012 and instead of having to
jump back in here and rewrite really
write our script every time it does it
automatically it grabs the date from the
server so now what we need to do is we
need to return a string and what this
string is it's going to be the string in
other words the URL that we can use to
download that information
so just go ahead and hit return and put
two little make sure they're double
quotation marks because we're gonna be
throwing variables in here and you want
to interpret those variables before now
wow I messed that up oh that's gonna
annoy me ah man
so hold on one sec I gotta grab that big
URL all right guys I got the URL that
right there so now I went ahead and I
pasted that in and so now we can go
ahead and start replacing all of the
stuff so the first thing we need to do
is instead of the company name we're
gonna go ahead and just pass in our
ticker signal so instead of Google let's
just go ahead and pass it in our tickle
tickle
they say tickle nothing tickles so now
it's either gonna pass it in this or
this or this and that gets passed
indirectly whenever we're calling our
function so after that remember D equals
current month and this is zero right now
but we want to set this equal to the
variable current month so D equals
current month and II remember equals the
date today's January 3rd but we want to
change it to the current day right like
that so instead of 3 right around day
and let's go ahead and grab this current
year so look for 2012 and it's right
after F so you see instead of having set
dates what we want to do is we want to
give a variable dates now these are all
going to change so basically what we're
doing is we're gonna be passing it in a
ticker or a company it's gonna download
the that company's information from
let's see what the thing is let's go
ahead and just do 2011 so it's gonna be
August 19th 2011 until today and that
way we can run this script or function
every single day and it downloads all
the most recent information and we don't
have to mess with it or anything so
there you go there's your final function
in another thing I'm going to be doing a
lot of coding and I don't expect you
guys to you know follow this without
any mistakes so what I'm gonna do is I'm
gonna post all of this on my forum than
what's called tnb forum calm under the
PHP section so if you want to grab it
and test your code against mine maybe
you know just alter my code then there
you know I'm gonna give it to you guys
all for free don't worry about it go get
it so thank you guys for watching don't
forget subscribe and in the next
tutorial I'm gonna show you guys well
I'm not even gonna tell you this is
gonna be surprised so thanks cap yeah
I'll see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>