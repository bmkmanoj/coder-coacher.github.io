<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node.js Tutorial for Beginners - 14 - Simple Web File Server | Coder Coacher - Coaching Coders</title><meta content="Node.js Tutorial for Beginners - 14 - Simple Web File Server - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node.js Tutorial for Beginners - 14 - Simple Web File Server</b></h2><h5 class="post__date">2015-04-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_D2w0voFlEk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys in the last video what we
did is we learn how to set up a really
basic server in other words we typed a
little bit of code and what we can do is
we can pretty much sit listen for user
requests and whenever a user wants to
connect to our website we send them back
a really simple little string of text
pretty amazing so my guess is that if
you're learning nodejs
you probably want to build programs that
are you know a little more interesting
than this one of the main things people
want to do is they want to learn how to
host a website so of course instead of
sending back a little chunk of text we
need to send back files HTML files
JavaScript files CSS and then the
browser can of course interpret them
just like you know a website like this
so let's go ahead and learn how to send
back actual files instead of just plain
stupid text so what I'm going to do is
just delete everything right here and in
this tutorial I'm just going to make
like a really simple HTML file and show
you guys how to send that but the
concept is pretty similar for any type
of file with some little differences and
we'll talk about those later on but for
right now create a new HTML file by
clicking show you guys right click
public new HTML file and I'm just going
to name this like index.html so this
would be like the home page of our
website and hit OK now the cool thing
about IntelliJ is it pretty much gives
you a template by default so let's just
create something real stupid I'll give
it a title of the New Boston and in the
body I'll just say like wow this site is
awesome
alright so that's probably going to be
pretty boring but whatever and actually
let me go ahead for some reason I like
to have my HTML files on left and my
JavaScript files on the right so now
what we want to do is whenever they
connect to the server we pretty much
want to send them back this HTML file so
how do we accomplish that well the first
thing that we need whenever we're
working with files is the FS module
remember this
is the filesystem module and we saw a
quick example that in I don't even know
what tutorial was but before and if we
just require that then there you go so
now we can work with the file is on our
computer and whenever you're hosting a
website one of the first things you want
to do is you want to build a 404
response so for example whenever they
try to connect our website we have one
HTML file our home page our index.html
however what if they try to connect to
like um about HTML or arm you know like
movies that HTML well we don't have
those files so what we're going to need
to do is we're going to need to send
them back a 404 response in other words
a response if things go bad so I'm just
going to blake for a for response and
let's set this up quick so function i
just name it like send 404 response and
the only thing we need pass in here is
our response object or what we're
sending back so this is actually going
to be pretty similar to what we learned
before response we get this out of the
way so response right head and the
status code for this is of course 404
and the object of course is going to be
content type text plane so we're just
going to print out a really simple
message why is that underlined cuz I
spelled a response wrong all right there
we go
all right so if they try to request a
file that we don't have I'm just going
to print out like a error 404 page not
found whatever so response what data
every freaking time all right
error 404
Paige not found and then take your
response and end it so it knows that
we're done writing the data and it can
send it off all right so hopefully we
never have to call this function but if
they request the file that we don't have
then this is where we're going to send
them now on a request what we're going
to do is we'll say handle their request
or handle a user request all right so
essentially what this function is going
to be responsible for is listening for a
request and sending them whatever file
that they're requesting so the first
thing we need is just an if statement
now inside this if statement we're going
to inspect the request so if you call a
request you know how I told you guys in
the last tutorial the request object has
information about what exactly they want
do they want a file what are they
looking for so first let's make sure
that the method is equal to get and if
you guys don't know about getting post
there are pretty much different ways
that you can connect to a server arm
well this isn't really a tutorial about
that so I don't want to waste your time
you guys probably already know I'm
guessing so git is pretty much the
standard way that you connect to a
website post you use whenever you're
submitting forms there are other ones
like put and delete that are really that
common but whatever so we'll make sure
that they're just using git nothing
fancy here and we're also going to want
to look at the request URL so remember
we actually printed this out in the last
tutorial and of course the first thing
that they request is what web page
you're looking for that was the obvious
one now we also saw that there is a
request behind the scenes for the
favicon that's one that we don't really
want to worry about so we're first going
to check the request URL and if it's
equal to forward slash that means that
they're just trying to connect to the
home page /so going off so if they're
trying to connect to the home page let's
just send them back that file so
response
right Ted lies and I'll popping up right
head 200 and let me do this too lazy to
type all that all right
so unlike before when we just sent out a
plain string of text what we want to do
now is he actually want to send back a
file so instead of text plain what we're
going to send back is text HTML which
pretty much means an HTML document just
like that now in order to send back HTML
file what we want to do is we actually
want to send back something called a
readable stream and that's just because
a basic response is just sent back in
one chunk of text however this file we
don't know how big it is our programmers
our developers are usually going to
change the size of this whatever so we
want to send it back in a stream and
that's just for better performance and
to ensure that we don't have any errors
so for our file system object which is
FS the first thing we want to do is
create a readable stream so we're
essentially going to read this file
which is index dot HTML so now we're
reading that file and then we want to
call function called pipe and this just
means pipe it out or write it out or
feed it out whatever you want to call it
the stream to the response object which
is pretty much the response that we're
sending back so what do we want to pipe
out this bit of information we're going
to send it out through the response
object so I'm going to add one more
condition right here and check it out of
course we know whenever they make a
request we call this function and then
we check are they trying to knit to
connect to the home page if so send them
back in XHTML else that must mean that
they were trying to connect to a web
page that we don't have maybe like um
bacon HTML we don't have one of those so
in that case we're just going to send a
404 response and of course we need to
pass along a response object so that's
actually it let me go ahead and run this
a bit of code and check it out our
server is now running
alright we're browsing the web pretty
cool the new boss in that's pretty cool
site however let's go to this hot new
site I learned about called localhost
aaaa supposed to be the hottest thing to
hit the web go back and look at this the
greatest site ever so again what we did
here is whenever we connect it to the
home page the server which is running
you don't really need that it looked at
our request says yep you're using git
and your requested just the default home
page so I'm going to serve you or I'm
going to respond with this file right
here index that HTML so that's our
response and also say that we wanted to
UM I know say that some user was goofing
around and they try to go to like corn
bacon dot HTML well obviously that web
page does not exist we didn't made it we
didn't make it so check it out that's
when we get our error 404 page not found
and you can probably figure out they did
make a request successfully so they did
connect to the server know prom however
we check the request we didn't have
anything for them so we just redirected
them to this function and sent back a
404 response so there you go pretty
simple that's the core basics of
creating a really simple web server or
file server so uh yeah if you have any
questions ask me I'm gonna forum if not
thank guys for watching and I'll see you
guys in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>