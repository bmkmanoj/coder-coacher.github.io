<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Programming Tutorial - 24 - Downloading Files from the Web | Coder Coacher - Coaching Coders</title><meta content="Python Programming Tutorial - 24 - Downloading Files from the Web - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Programming Tutorial - 24 - Downloading Files from the Web</b></h2><h5 class="post__date">2014-09-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MjwWzBiAMck" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys in this video I'm going
to show you how to download a regular
file from the web and it's a little bit
different than just an image file to be
honest it's a little bit more complex
but definitely useful so before we get
started I want to show you guys one
other thing you know how whenever we
were importing modules before I just put
import and then the name of the module
well I'll show you guys on something
else that you might see if you ever see
from in something like this
oh-ho take it easy that caps-lock import
this is a different way that you can
import and I'll explain in detail what
exactly that means whenever I talk about
classes and more about modules later on
but I just want to get you guys familiar
with the syntax right now so you guys
aren't confused if you ever see this
it's just some different way that you
can import modules so what I'm going to
do is I'm going to show you guys how to
download a CSV file and you can actually
use this same technique whenever you're
downloading text file but there aren't
that many text files just flowing around
the internet so a CSV file is of course
just a comma separated value file just
like a text file but things are
separated with commas so if you go to
finance yahoo.com
type in the ticker of any company if you
don't know one goog will give you a
stock information about Google and
whenever you go to a company's um little
financial page on the left hand side
they have hold on a second
got a itch in my hair all right on the
left hand side they have historical
prices so if you click that it's going
to give you just a bunch of their prices
in history and again you can find any
CSV file this is just a one that I
remember is free so at the bottom of the
page you're going to see this link that
says download the spreadsheet and don't
click it or else it's going to download
the CSV file right to your computer I'm
right click it and hit copy link address
and if I paste it in there you can see
that this is indeed a link to a CSV file
so make sure that you have that copies
in your clipboard and that's the file
that we're going to download again if
you know of any other CSV file um feel
free to use that but I know that yahoo
has a bunch for free so you can use that
so of course instead of having to work
with that long honky-tonkin thing every
time
what I want to do is I'm going to save
all that in a variable called goog URL
so right now we can just use this
variable a lot cleaner if you ask me so
now that we have a URL of a file that we
don't want to download we need to make a
function to of course download
crap from that URL so I'm just going to
name my function download stock data and
the parameter we pass it in is your CSV
URL so the URL of some CSV file on the
Internet
alright simple enough so far so now what
we need to do is we need to tell our
Python program to connect to the
internet first so what we're going to be
doing is calling a function but it's
easier if you store it in a variable
called response so this is pretty much
think of it as your connection to a
webpage so we already know how to do
this request dot URL see if it's there
well I guess I might as well tell you
bit there it is URL open and what this
function does is the only parameter that
it takes or that we're going to be
passing in is the URL of a CSV file on
the internet again it's the URL of any
web page but it goes that URL and then
it's going to store the connection to
that web page in this variable right
here response so now that we have that
response we can do something cool with
it and I'll show you guys this make
another variable call it CSV or whatever
you want and take that response and call
a function on it called read now this is
going to do is it's going to read the
data from whatever URL you're pointing
to so right now we're reading in all the
data which is that huge which
pretty much the entire text that's in
that file and now we have that text
stored in a variable called CSV so what
I want to do now is since we have all
that data stored in a variable called
CSV I don't know if that's string data
or maybe it's numerical data
maybe it's date data I want to guarantee
that that data that we just read in is a
string so then we won't have any
problems later on so what I can do in
that case is put CSV underscore STR and
remember that function STR right there
well this takes anything inside here
converts it to a string I think we did
it with numbers whenever we're trying to
print out numbers and strings together
so anyways whatever data you read from
this file it's going to convert it to a
string and then it's going to store that
in the variable CSV underscore string so
now we can use this wherever you would
use a string to print it out whatever we
want to do with it however I'm going to
show you guys how to take it and save it
to an appropriate file on your computer
so right now we took all that data and
it's in one long string like this but
one big line however if we ever read
that in a file of course it's going to
be kind of confusing so what we want to
do is we want to take it and break it up
in lines since if we look to this we
don't want all of these numbers and
dates on the same line we want each of
these on a new line whenever we make the
file so to do that the first thing you
need is variable called lines and set it
equal to this CSV actually you can just
copy this set it equal to your string
and call a function called split and in
between quotes put this symbol right
here now what split does is it basically
takes a string a huge long string and it
breaks it up now how does it know where
to break it up just break it up every 10
characters
what on sound like someone is on my
freaking door which is weird because it
is almost 1 a.m. so my doors locked but
anyways it takes a long string and it
breaks it up whenever it comes across
this new character so instead of having
everything on the same line we're going
to go line by line in it's a lot easier
to work with it whenever we're making
our file so of course what we need to do
now is just a stuff we learn before we
need to save it somewhere on our
computer well we're not going to be like
hey we downloaded crap just spin a big
roulette wheel on my hard drive and save
it somewhere randomly now so let's go
ahead and tell our computer where um we
actually want to save it so I'll save
this to a file named um gube csv now
again remember I think I talked to you
guys about this in like the first or
knows must've been like the third
tutorial whenever you're working with
file paths it's always good to have our
before it that means raw and that means
that you can type a file like this like
something like this see um like oh bulky
whatever and you don't have to escape
every character so even though I'm just
using the file name with a simple
extension I always like to put
everything inside our Raj string just
makes good practice I guess so now we
said where we want to save it now we can
use our file objects to read and write
from it so the first thing we need to do
is we need to open up this file so we
can actually write to it so the first
thing it needs it says okay what file do
you want to open
well that one and what do you want to do
to it well since we're taking that data
and writing to it or creating it of
course W that's what we learn the last
oreal so now that we have a file open
and we can write to it what we want to
do is we pretty much want to loop
through what we just downloaded and
print it on the file so
the first thing we need is a for loop
and what you do is put four line and
lines and basically what this is going
to do is it's going to loop through the
string and for each individual line I'll
show you guys what we're going to do
that right now what we're going to do is
take the file that we just open and
we're going to write to it so remember
each line which is each chunk it broke
up yesterday's line that's what we told
it to do right there
so we're going to print the line to the
file and then after each one we just
print a new line and that will kick it
down to a new line make it real nice and
beautiful looking so again we said this
is what we want to download connect save
it as a string make a file on our
computer right to the file the only
other thing that we have to do is close
this our file object just so we don't
waste any memory on our computer and
then we need to call this function right
here so to call it download stock data
in the URL they're passing in is of
course goog URL so again take note that
on the left hand side I deleted all the
other files that we didn't need from the
last tutorials so right now I only have
main and tuna now whenever I run this I
now got this new file goog CSV and if I
double click this to open it
oh-ho-ho-ho-ho look at that in formation
so now we can take this information and
you know pretty much make the perfect
algorithm to make us a perfect stock
market trader so again if you just you
know try to copy all of this and use
your little crappy calculator to try to
figure out you know the best time to
sell stocks it's going to be confusing
but now in a few lines of code we can
download the historical data for any
company in history and we can analyze it
and make the perfect program to
over the world so we're going to be
taken over the world in a couple
tutorials not right away so that's what
you have to look forward to but for now
then guys for watching don't forget
subscribe and well smell you guys later</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>