<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Trading Website Community Project - 28 - Checking if email and username are available | Coder Coacher - Coaching Coders</title><meta content="Trading Website Community Project - 28 - Checking if email and username are available - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Trading Website Community Project - 28 - Checking if email and username are available</b></h2><h5 class="post__date">2012-04-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ndo5FZ5p9nI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys welcome to your I don't
even know a number tutorial this is I
think it's like 28th or something I
actually just got done making this video
and the next video and then I looked
down and my mic is on mute and I'm like
are you freaking kidding me so this is
actually my 30th video but I just
deleted everything and now I have to do
it all again son of a bee ok so what
we're going to be doing is taking the
users information entering them into a
temporary database in sending them a
confirmation email now once they click
that email eventually it's going to go
from the temporary database to the
permanent database but that is not the
aspect of this tutorial we don't have to
worry about that for now so the first
thing that we want to do is we want to
check if the email and the user name is
already taken so how do we do this well
we need to query the database and check
if well you'll see so let's go ahead and
make a variable and i'm just going to
name it result and we set this equal to
a my SQL underscore query now the query
for this is actually before I even type
the query which is going to go right
here I'm just going to go ahead and add
or die and is the die mysql underscore
error just for housekeeping stuff so if
for some reason maybe we type something
wrong in the query that is just going to
output the air but hopefully we won't
even have to worry about that so here's
the query what we're going to do is
we're going to query the users table now
remember the users table is all the
users information for the website and
we're going to check does anyone have
the email or username that this user
wants already registered if so of course
you can't steal it from them if someone
if you know I wanted to register the New
Boston and someone has the username I
can't steal it from them so in order to
do that let's just go ahead and write
select all from users where email is
equal to eat the email that they entered
in the form or username is
equal to the username that they wanted
so if this query returns any results
then that means hey someone already is
registered with that information so what
we want to do is we want to see how many
rows this returns and hopefully it's
zero so in order to count the number of
rows through PHP this is how you do it
I'm just going to go ahead and make a
simple if statement you use a function
called my SQL underscore num underscore
rose now what this function does is it
takes a result set like this which is
pretty much a MySQL query and it returns
the number of rows so if no one else had
this username or this email then this is
going to go ahead and return 0 so that's
what we want to test we want to make
sure it returns 0 now if it does then
that's good because then it's available
we can continue with the registration
process but if not then that means that
someone else must already have that
username or email registered so in that
case what I want to do is I want to
redirect the user to a different page
now this page is just going to say hey
listen dude someone has the information
already you can't steal it from them so
in order to do that header and as the
header header basically redirects you
location and the location of this is
prompt PHP and we'll make this page
later on it's the easiest page ever and
set X equal to what prompt us just real
quick is it basically grabs a number and
depending on what number it gives you a
message so this one would say something
like hey that email or username has
already been registered for the site
please start the register again however
if the username or email is not
available then what do we want to do
well the very first thing I want to do
is I want to make an activation code now
what this is is just a random code that
gets thrown in the database because
whenever we verify and you'll see later
on on activation up PHP we need to make
sure the code
matches up with the users information so
activation and set this equal to the
code is basically going to look
something like that but instead of just
typing random crap every time we're
going to use methods or functions from
PHP to generate random strings so the
first thing is md5 and what this does is
it generates a 32 digit random string
however I want to go ahead and add some
values in here to make it even more to
randomize the even more the first thing
I want to do is put you and I queue ID
unique ID and what this does is it seeds
it through time and if you guys don't
know about seeding then don't even worry
about it this pretty much just makes it
more random it takes two parameters
random number and true so this is a very
complex way of generating a 32 digit
random string of random letters in
numbers so now what I want to do now
that i have that activation code i'm
actually going to go ahead and copy this
but i'm actually going to name it result
two and of course we want a different
query so now that we verified that that
information is not yet taken what we
need to do is we need to enter their
information into a temporary database
because they haven't confirmed through
email yet so we can't put them in their
users one so they need to go into a
temporary table so how do we take this
information and they enter it in form
and stick it into a temporary table well
just write insert into and then write
the table name which is temp users got
pretty creative with that one and now
you write the name of the columns that
you want to enter so user ID and I so
you'll need space username email
password
make sure you don't spell that wrong
activation so we're basically entering
five different pieces of information
into this temporary table user ID user
name email password in activation so it
says okay these are the pieces of
information you want to enter where's
the information well in order to the
hold on accident hit caps lock right
values and now give the values that you
want to enter so the first one is
actually blank because if you look at
the database that you guys downloaded
user ID gets auto incremented so
whenever you have something that gets
auto incremented and you want to fill it
in through PHP just add empty nothing at
all and mysql is going to take care of
it the next thing is let me just go
ahead and cheat real quick one two three
four okay the next piece of information
is user name and that is just whatever
user name they entered into that form
remember we store it in a variable up
top and the next one is the email that
they entered and password and activation
very</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>