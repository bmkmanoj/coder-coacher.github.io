<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AJAX Chat Tutorial - 12 - Where to Download Source Code | Coder Coacher - Coaching Coders</title><meta content="AJAX Chat Tutorial - 12 - Where to Download Source Code - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AJAX Chat Tutorial - 12 - Where to Download Source Code</b></h2><h5 class="post__date">2013-05-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lUCq2cmCQCI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's going on guys welcome back I know
it's been a couple weeks since I made my
last video but my stupid freakin video
card keeps going out but anyways I'm
back now and before you started I want
to tell you guys that all of the source
code I already posted on my forum so if
you go to Bucky's room comm and you go
to the forum you can see that all of the
source code for this entire little
series on every single file even the
tutorials I didn't make it I posted it
all up there so if you want to you know
just copy that or follow along whatever
again go to Bucky's room comm and click
on the forum and it's under the
JavaScript section so anyways this
tutorial what we're gonna do is we need
to build one last function in this chat
class PHP file so what this is going to
do is it's going to be private function
and it's going to be called is database
cleared now we're gonna pass it in one
parameter and I think way I got like
whooping-cough black lung whatever you
want to call it so it's probably gonna
be really annoying melissamia cough and
my voice also probably sounds a little
bit weird but hey we gotta fight through
it together let's go ahead and knock out
these tutorials so anyways well this
function is gonna do is it's gonna check
to see if the database has been cleared
since the last call to the server so why
do we care if the database is cleared
all well because if the database is
cleared and what this means is the table
that's storing all the messages has been
emptied or all the rows have been
deleted then we know to delete the chat
window that the user sees because you
know we don't want to store all those
messages when we have nothing in the
database and you'll see as we build this
program so anyways this ID right here is
actually the ID of the last message
received by the client so the client is
gonna say ok this is the last message
that I received now use this information
to determine whether or not on the
database you know whether or not
what I have to do with the interface
that's basically all I'm saying so
you'll see in the second so the first
thing we want to do is we want to test
if the ID is greater than 0 greater than
0 now this is where we're going to be
writing most of our code but let's go
ahead and pass one more condition so if
it's not greater than 0 then let's just
go ahead and return and remember the
point of this is to return a clear flag
or a clear tag I guess you should
probably call it for your XML file false
now this is just you know a check if the
ID is not greater than 0 so we can go
ahead and return false however what we
really want to do is we want to perform
a couple checks right now so what we're
going to do is we're gonna check the
number of rows which basically mean
number of messages with the ID that's
smaller than the clients last ID that
they gave it and you guys are gonna see
what I'm talking about in a second so
let's go ahead and make a variable right
now call it check clear check underscore
clear and go ahead and set this equal to
MySQL say statement select and all we
want to do now is we just want to count
the number of messages from the table
where the ID is less than this ID so we
pretty much want to count the number of
old messages so how do we do that well
select count all and this is you know my
SQL language old from chat where message
make sure you guys can see this message
underscore ID is less than or equal to
now we have to end our MySQL statement
and we have to append the ID that we
passed in so if you guys don't know wTF
is going on
and I'll show you guys as soon as this
is good so we're pretty much saying okay
count all the messages that are less
than or equal to the ID that we passed
in in other words very basic terms count
all the old messages boom
simple enough so now with that
information of course we need to go
ahead and result equals actually run
this query so this my squealy query and
of course the queries name which was
check clear and this is gonna go ahead
and run that query and store the result
in the variable result simple enough so
now what we want to do is we want to set
a new variable row instead of equal to
the result which was the query we just
ran of course
this basically is a result right here
result fetch array and we want to fetch
it as a my squealy associative array now
let me go ahead and do one more check
and then probably everything is gonna
make sense so we want to run one more if
statement and you don't really need
those curly braces but we're gonna check
if row which is basically the result and
it's basically the array of messages of
old messages so if row old and remember
old is basically the number of old
messages simple enough very easy to
understand if that is equal to zero well
then that means that we can go ahead and
I'm gonna cheat a little bit right here
return true because if you don't have
any old messages then it means your
database is cleared so this entire
function is basically a question is your
database cleared well in order to check
if your database is cleared
we need this piece of information what
message is the last message you received
and you pass it in and it pretty much
counts all the messages that will order
that were older than that and pretty
much if it's cleared and you have no old
messages then you say true this database
is cleared there are no messages in the
table and if not then it's going to
return false
and that's default so that means that
the database was not cleared yes so boom
roasted pretty cool that is the actually
last function or method whatever you
want to call it
I think it's technically called a method
since it's in class but that's the last
part of this file so you can go ahead
and save this in the next tutorial we're
gonna be working on a new file and now
that we have you know all the you know
kind of hankering tinkering nitty gritty
boring parts we can start actually
building this thing we made all the
pieces now we can start putting it
together and again don't forget if you
want all of the source code then go to
the website Bucky's room comm which by
the way is probably going to be the
coolest open-source social network on
the internet very soon and go to the
forum and in the JavaScript section I
posted all of the source code so think
guys for watching don't forget to
subscribe and I will see you then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>