<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node.js Tutorial for Beginners - 10 - Shared State of Modules | Coder Coacher - Coaching Coders</title><meta content="Node.js Tutorial for Beginners - 10 - Shared State of Modules - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node.js Tutorial for Beginners - 10 - Shared State of Modules</b></h2><h5 class="post__date">2015-03-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Fo7IRCjrxMk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys so in this video what I'm
going to do is I'm going to explain what
exactly a shared module or a shared
object is it's something that confuses a
lot of people whenever they start using
modules so uh yeah let's go ahead and
get to it and actually what I did is I
clean out everything from the previous
tutorial so right now we just have a
blank fjs in a blank movies j/s file and
I'm going to say this so I'm going to
make a new JavaScript file or module
called Emily J s I'm going to make
another one called Bucky j s now say
that we're making some kind of weird
movie app we clean all these comments up
so say that we were making some kind of
weird movie app maybe like a movie
website and we have two users Emily and
Bucky and they can like set their
favorite movies so maybe Emily's
favorite movie is the notebook and
Bucky's is what's my favorite movie Good
Will Hunting
alright so in movies the first thing
we're going to do is we're just going to
use module exports like we learned
before and we're just going to make one
variable called fav movie and by default
we'll just set it to a blank value so
fav movie is blank by default but of
course Emily and Bucky can change this
to their favorite movies so how do we do
that well let's hop over in Emily and
we're just going to make them variable
gum movies and set this equal to require
movies
all right so now we imported everything
that we wanted to so now what we can do
is we can take movies and we can set fav
movie equal to anything that Emily wants
like the notebook alright everything is
running good so far and now let me just
log it out to verify so say something
like Emily's favorite movie is movies
holy crap sausage for your movies fave
movie alright so nothing revolutionary
here what we did is we made a really
simple movies module and then what
Emily's is going to do is she's going to
import that module set her favorite
movie to the notebook and then it's just
going to print it out so now let's do
the same thing for Bucky so you can just
copy that and actually I'm going to
delete this middle line of code because
that's what I want to demonstrate so
Bucky's going to import this module as
well however I'm not going to set my
favorite movie I'm just gonna leave a
blank so you may be like our a Emily's
is going to be in the notebook as we can
clearly see Bucky's is going to be blank
so it's going to print out Bucky's
favorite movie is nothing and that's
that so now in our app J's remember this
is our starting point and all we have to
do here is this um we can actually just
require
Emily and Bucky as well so again what
this is going to do is just going to
require these actually they were lower
case those two modules so check this out
alright so says Emily's favorite movie
is the notebook as we can see obviously
nothing revolutionary or new there
Bucky's favorite movie is the notebook
what the heck wait a minute I'm looking
at this code and yeah I clearly did not
set my favorite movie to the notebook
what the heck is going on there must be
a bug with node J s well this is what I
want to explain in this tutorial
whenever you use modules in nodejs the
default behavior is to share this module
among every other file that imports it
now what that means is that Emily she is
actually changing this object directly
and then Bucky gets the same changes as
well so they don't each get a copy of
this you're actually all referencing
this exact same module now believe it or
not this may be the functionality that
you want for example say that all of
these users are in a chat room and um
instead of movies this was like the chat
log obviously they would all be looking
at the same chat log and this is
actually much better for performance in
memory because instead of every single
different module making a copy they all
just reference the same one so again for
a performance memory it's a lot faster a
lot more efficient but obviously as you
can tell in some applications this isn't
the behavior that you want so if you do
then go ahead and use this style but in
the next tutorial what I'm going to show
you guys how to do is make something
called object factories and essentially
what that does is it gives Emily and
Bucky their own copy of this module so
yeah for now thanks for watching see you
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>