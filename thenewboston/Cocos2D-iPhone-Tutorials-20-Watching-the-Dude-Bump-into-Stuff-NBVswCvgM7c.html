<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cocos2D iPhone Tutorials - 20 - Watching the Dude Bump into Stuff! | Coder Coacher - Coaching Coders</title><meta content="Cocos2D iPhone Tutorials - 20 - Watching the Dude Bump into Stuff! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cocos2D iPhone Tutorials - 20 - Watching the Dude Bump into Stuff!</b></h2><h5 class="post__date">2010-09-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NBVswCvgM7c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right guys let's finally finish up
coding this dude making a move around
bumping his stuff and then at the end of
this tutorial we're gonna run it and see
how it works so let's go ahead and
delete everything in set player position
because instead of just setting his
position where he wanted me to go we're
gonna add some code to make sure he
doesn't bump into something first and
then if nothing's there that he can bump
into then we're gonna be setting his
position so that's why we need to change
this method up a bit so this is the only
method we needed to change so don't
worry that's the only thing we're gonna
be covering in this tutorial so the
first thing we need to do is this CG
point just like that filling it in for
me Taiyo see Oh arty why do I always put
cor Eady I don't know but I do it and
set this equal to St layer and tile for
position just like that in position so
this is actually the method we built in
the last tutorial so if you have a
different name then of course put
whatever you named it in there but what
we're going to be doing is pretty much
getting passing it in a position and it
converts it to the tile coordinates the
thing that I was talking to you guys
about last oriole so now that we have
the tile coordinates here's what we do
go ahead and make another int variable
and name it tile GID and set this equal
to St layer why is that a non turning
blue art tile G I D at tile chord never
saying all right I have no idea what
this is
we'll check this out each tile has not
explained this whenever we get the
coordinates for a tile we then use those
coordinates to get something called
an ID for that tile each tile on your
map has a unique ID number and that's
what this GID is I know it's weird but
it stands for a global ID number or
something like this and this is how we
identify tiles so what we can do once we
have those tile coordinates is we need
to get that unique ID number for the
tile so now each unique ID number is
stored in a variable called tile ug ID
and this is the tile that we want to
move to again ever saying all right ID
numbers are confusing then don't take it
up with me take it up with whoever may
tile and cocos2d that's how they made it
so you know that's what we got to deal
with so now we were saying ira why do we
even need to get the tiles ID number
once we have the tiles ID number we can
access their properties aka that
collidable property that we made no
collidable equals true yes so you'll see
all right so let's go ahead and do this
if tile GID which pretty much means if
the tile has an ID number what we wanted
to do we wanna NS dictionary properties
looks good all right by the way each of
those properties that we made in the
last tutorial are stored in an NS
dictionary so that's why we need a you
know make it NS dictionary variable so
let's just go ahead and set this
properties of you um I mean variable
equal to the map properties for GID and
tile GID so ever seena is alright we
want to get all of the properties for a
certain tile what tile the tile that we
want to move to so now all of the
properties are stored in a variable car
properties so now let's just go ahead
and make another check if properties so
if properties exist what do we want to
do well the first thing we want to do is
get this probably easier if I just type
it ns
string and just go ahead and make a
variable called collision and set this
equal to properties which is your
dictionary
values for ki collidable so remember we
wrote a property called collide Bowl and
we set it equal to the value true if it
was read
so this collidable is either going to be
equal to true or it's not going to exist
at all so when this is equal to true we
know that this means this dude should
not be walking in this area so how do we
go about doing this it's very easy the
first thing we need to do is compare our
results to whatever this collision threw
back and see if it actually is equal to
true so here's how we do this
if collision is exactly equal to
collision compare true and you need to
throw that in since there's a string
all right and set this go to NS ordered
same that's how you compare strings
alright return so alright now I can
finally talk about what I want to talk
about so this pretty much is going to
get the property of the tile
wherever the tile is collidable and if
that property returns true then we know
that that tile is a tile that we should
not be able to move to so what this is
going to do is just return our dude they
were saying all right what's going on
here let me do this this is gonna clear
everything up I promise position equals
position all right forget anything I
said in like the last 10 minutes and
listen here because now everything is
tied together now I can begin explaining
what this means this set player position
method all it does is it takes your dude
and it moves him to a new position
however whenever we were making our map
we listed certain tiles that that dude
was not able to move to as in the trees
the mountain the fence he should not be
able to move there so what we did is we
added a property to those tiles named
collidable and we put a key equal to be
true if he was not able to move there so
what this method does is pretty much
this it gets whatever position that
we're moving to and it checks if that
collidable property is true and if it's
true then it's gonna return our method
without doing anything at all and then
this pretty much runs this bit of code
and does nothing but if this method
doesn't return then what it's going to
do is take the dudes position and move
him to his destination so if we try to
move him somewhere and he's not supposed
to be there and it's going to run this
bit of code return this method without
doing anything without moving anybody
but if this doesn't return then
but if code is going to successfully run
and he's going to be able to move to his
new position so the last thing that
we're going to need to do is just go
ahead and copy this and go ahead and
just paste it right here so I don't get
a little issue warning and now let's go
ahead and build and run this and so we
got I probably typed something wrong
here along yeah I know it's like
something wrong I feel it in my blood
come on where are you where area there
we go so let me pause this I'll see what
I took your own well that was
embarrassing guys
I accidentally typed um st lair right
here let me see if I can undo this see I
accidentally typed st lair down there
instead of self and of course this
method is in this class so that's why I
need it self and I also accidentally
just recopy this header instead of
putting our new method header in here so
now let me go ahead and build and run
this and hopefully it runs if it messes
up this time this is going to be pretty
embarrassing but all right let's see if
this finally works so let me move this
guy up up up and let's see if he stops
when he gets to the fence there we go so
as you can see when I try to move him up
he won't go through the fence just like
we want them to you can move around down
go through the flowers and let's see try
to move them and some trees can't do
that either
so now as you can see this game is
working properly like it should
colliding into the areas that we painted
and marked as collidable server-sent
alright what is happening whenever we
try to move him to a place that's
collidable we say alright move here so
then when we call the method to move
them there it returns a blank method and
it doesn't do anything but when we try
to move them to a space that isn't
collidable it takes his position and
sets it equal to that new position so
that's all this code does so now I can
minimize this and forget about it move
on to the next part of this program but
for now that's all I got for you guys
this tutorial so thank you guys for
watching don't forget to subscribe and
don't forget to check out my form so
again like I said thank you don't forget
to buy my iPhone apps and I'll see you
guys later</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>