<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Stock Market Analyzer - 6 - Downloading and Saving Data | Coder Coacher - Coaching Coders</title><meta content="PHP Stock Market Analyzer - 6 - Downloading and Saving Data - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Stock Market Analyzer - 6 - Downloading and Saving Data</b></h2><h5 class="post__date">2012-01-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WgE-PdJUVsg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys welcome to your sixth PHP
announces tutorial of stock analysis
whatever the heck you wanna call it
and now that we created that custom URL
what we can do with this URL is use it
to download this CSV file or come
separated file and whenever we have that
comma separated file we want to save it
on our server
so let's go ahead and create a function
that does that so let me just go ahead
and sorry whooping cough okay I'm just
going to name this get csv file and this
custom function is going to take two
parameters the first parameter it's
going to take is the URL so basically
whatever we return in this function
right here whenever we have the URL
created we're gonna pass it in so it
knows where to download that data from
the next parameter I'm gonna pass it in
is I'm just gonna name this out puts
file might as well just name with that
so what this is going to do is it's
going to take two parameters where do
you want to download the information
from and where do you want to save it so
we're gonna be passing it in a file path
but I just don't want to give it one
file path or else you know it's gonna
really what really write it every time
little tongue twister so that's what
it's gonna be doing downloading
information and saving it on our server
so in order to do that you're saying how
the heck do you download stuff from PHP
I mean I know how to download it on the
internet just click the button download
now how do you do on PHP well let me go
ahead and show you that so I'm gonna go
ahead and mayor make a variable called
content and what the content is gonna be
is basically the entire all the crap
from the CSV file so I'm gonna be using
a built-in function that's built into
PHP called file get contents now what
you do is it takes one parameter which
is a string so go ahead and copy this
and paste it right in there and let me
explain you guys what this function does
it goes to the file that is located here
it
could be either a local file on your
computer a text file that's in the same
directory or what we could do is we
could pass in a path to a website or a
CSV file and what its gonna do is it's
gonna take that file path and it's gonna
download that file not only that but
it's gonna return it it's gonna return
the entire file as a string of data so
it isn't like returning a CSV file or a
text file it's not returning a file at
all it's returning a string a really
really really long string and why do we
want that because we know how to work
with strings we can do a bunch of things
to them we can you know replace some
trim um we can twist them around put
them in a race we can work with strings
really good well we want to do
ultimately is stick it in the database
so let me go ahead and open up oh let me
see
downloads and here's something on
download so basically we have all of
this data in a string from each company
so basically all of this is stored in a
variable called content however if we
look at this we notice a couple things
first of all all of this data is looking
pretty nice except this first line right
here whenever we try to analyze this
it's going to say okay check the high
from this the high from this the high
from this too high from this too high
from this it's gonna say whoa this is
gonna throw us off so what we need to do
is we need to get rid of this line and
there's a really easy way that we can do
that since this is a string we can use a
function called string replace it's
actually called STR replace so STR
underscore replace and this takes let's
see it takes three parameters the first
parameter it takes is what content do
you want to replace in your string so
let's go ahead and copy this first line
and it's gonna go ahead and replace any
time it sees this crap in your string
it's gonna go ahead and replace it well
Bucky what it's what's it going to
replace it with well it's going to
replace it with
whatever you type in your second
parameter so if you write tuna in here
any time it sees this string it's gonna
replace it with a word tuna however what
we want to do is we want to replace it
we want to kind of take it out
completely so instead of replacing it
with anything replace it with nothing at
all not a space just nothing at all and
this is essentially gonna delete it
anytime we see this in a string it's
gonna delete it now the third parameter
is what string do you want to do this -
well the string we want to do - is just
content and we're gonna be you know
restoring it in the same variable
content so basically whenever you string
replace it takes three parameters first
what string do you want to get rid of
what do you want to replace it with and
what do you want to do this - and that's
that so now what we did is we're
basically taking all of this out so it's
gonna basically look like that however
we're not done yet
and let me just there we go I almost
messed that up so right now we're
basically replace that however whenever
we do that it's basically gonna look
like this and that's not good either
what we want to do is we want to trim
all of the white space and that means
just the spaces and you know empty
characters from the beginning and the
end of the string so right now the
content variable is basically a string
without this first line in it however
maybe spaces the beginning or end that
can throw us off so what we want to do
is we want to use a function called trim
and it's just going to go ahead and trim
the previous content so now content
always starts at the very beginning and
always ends at the very end with no
white space so just remember that what
string replace does is get rid of the
first line and what trim does is it
removes all of the white space so now we
have a perfect string it's only data no
whitespace no other extra characters
it's exactly what we want so now we need
to put this in a file because right now
remember it's not a file it's just a
string and we can't just save strings on
our server we need to save them as
permanent files so how do we turn a
string into a file that we can save on
our server in order to do that we need a
function called file put contents I make
sure I spelled that right now this file
put contents is it's a function that was
built-in I'm not going to be building
this this is already built into PHP it
takes two parameters your destination
file in other words what file do you
want to save it in and a string of what
you want to write in that file so the
file we want to save it in is output
file and this is basically gonna be
something like Yahoo text or Google text
we didn't I didn't give it the name yet
but whenever we call this function I'm
gonna be passing it in that parameter
and the second one is what string do you
want to write into this file so now
we're basically taking this content and
we're gonna be writing it into a file
called like Google dot txt or something
so all of this file does or excuse me
all this function does is basically it
takes and downloads the CSV file which
is a comma separated file it rips out
the first line of text because we don't
need it it removes all the white space
and then it takes this and it saves it
as a txt file in our on our server so we
can work with text files and we're
actually going to be taking that text
file and throwing it into a database so
there you go there you have it that is
how you download the CSV file and pretty
much convert it into a text file so
there you go I'm out of breath in the
next order what I'm going to be doing is
now that we had that text file we need
to move it into a database and this
actually takes quite a bit of work so
it's probably gonna be you know maybe a
couple videos long but that's what you
have to look forward to so thank you
guys for watching don't forget to
subscribe and I will see you guys in the
next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>