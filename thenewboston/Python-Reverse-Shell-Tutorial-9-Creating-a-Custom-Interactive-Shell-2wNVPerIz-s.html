<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python Reverse Shell Tutorial - 9 - Creating a Custom Interactive Shell | Coder Coacher - Coaching Coders</title><meta content="Python Reverse Shell Tutorial - 9 - Creating a Custom Interactive Shell - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python Reverse Shell Tutorial - 9 - Creating a Custom Interactive Shell</b></h2><h5 class="post__date">2015-12-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2wNVPerIz-s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys welcome back and so far up
to this point what we did is we pretty
much took care of thread number one so
already what we have going on in the
background whenever we start this
program is we have a thread that's going
to be listening for new computers to
connect now as that's happening what
we're gonna do is we need a way to say
ok keep doing that thing in the
background but I want to be able to
review all the computers that are
connected and choose a specific one and
then say ok I select that one that's the
one that I'm gonna you know give
commands and then whenever we're done
with it we're gonna back out and then
maybe choose another one so sounds
pretty confusing alright well it's not
I'm gonna show you guys probably the
coolest and easiest way to do this
so what we're gonna be doing is we're
gonna be creating an interactive prompt
for pretty much writing our own own
custom commands so you know whenever you
open up a terminal or command line
window whatever you want to call it you
pretty much can type commands sending
directly to your operating system well
if you ever use a program like
Metasploit or MySQL from the command
line
you know that sometimes you can type in
like Metasploit and it pretty much gives
you its own custom interactive shell or
interactive prompt just specific to
Metasploit you're like how did they do
this how did they make a command line
within a command line and I'll show you
guys that right now so generic prompt
for remotely remote early remotely all
right now I just didn't want to name
this like prompt or whatever so I just
named this turtle and I named it this
because it was the only animal I could
think of with a shell I mean I can think
of other ones of course hermit crab
whatever but you know this is the first
one that popped in my mind so remember
this is in threat too so we want to keep
this running the entire time as well so
you can either write well one or while
true whatever and now in order to have
your own custom command prompt what you
do
this you take variable and you set it
equal to input now if you want to add a
custom little prompt then what you can
do is this turtle with some kind of
forward slash or whatever so you know
just in like the command line let me
show you whenever you open up a command
line what it does is it shows you a path
to your working directory wherever you
are and of course you can change that
whatever well whenever we run this
program is just gonna say turtle so it's
not gonna say see user is just gonna say
turtle and that's how we know that the
commands that we type in they're not
going to be handled by our operating
system they're gonna be handled however
we tell it to so now this CMD is equal
to a custom command so how do we handle
that well with a simple if statement so
if we'll say if they typed in list what
do we want to do in all this little mini
programs gonna do is it's gonna list all
the connections and then we'll add
another custom command that allows us to
select one of them so if lists then
we're gonna make a function later on to
just list all the connections all the
computers that are connected and then
we're gonna write continue or you can
actually just straight in else if so if
you guys don't know whenever you have a
loop what you can do is you can add the
keyword continue and what that allows
you to do is pretty much not break out
of the loop so this keeps looping but it
just goes back up to the top so break
that keyword just stops the loop
completely continue says actually just
hop right back to the top and continue
with the next iteration so this will be
fine but we can actually just add it an
else if so else or Elif forgot Python
language select in command alright so
why do I write select in command instead
of just select because let me bring up
this again because what we're going to
do is whenever we list all the
connections it's going to have their IP
address and then just and
zero one two three or whatever so
whenever we select a connection we're
just gonna race select three or select
two or select 65 if you know maybe a
bunch of computers are connected so the
command isn't just select itself so we
just can't test if it's directly equal
to a word like that however we're gonna
say if the word select is in the command
that must mean they're trying to select
one of the clients so what I want to do
is this
so connection equals kids targets and
I'll just say alright so later on as
well we have to actually build these
functions to list all the connections
and actually get the connection object
so we're gonna be doing that in probably
the next tutorial and so that's why I'm
not gonna explain that right now it
pretty much you pass it in this command
and it's gonna extract the ID number and
get the connection from that it's
actually really easy but that's what
we're gonna be doing and now I just want
to say none so whenever we get a
connection back that we chose we just
want to test to make sure it's not equal
to none because maybe from the time you
started this till the time you know
right after you listed everything they
disconnected or maybe it's just this old
connection that got on a steel sword in
your list for some reason well it's
always a good idea to make sure your
connection is not equal to none and then
we're just going to say commands all
right so at this point we have a
connection and we saw this in the less
toriel we can start sending them
commands simple enough
now else I'm just gonna add one more
line of code here and we're gonna say
else if they type something in to our
little mini program and it wasn't the
word list and they didn't select
anything maybe they just typed the typo
then I'm just gonna print out uh
something like command not
recognize so I just like to have a
little indicator there because you know
if they start typing in a list and they
accidentally write fists then you know
they they're not like oh why isn't this
working well because you typed the fist
you moron so I should probably write
that is my little indicator but I'll be
nice about it all right so now that we
have our interactive prompt pretty much
up and running what's going to happen is
we need to code these functions right
here so to list all of your current
connections once you select one to
actually get that connection object and
of course this right here to actually
control that computer remotely it's
going to be awesome we'll see you guys
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>