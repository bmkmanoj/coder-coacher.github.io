<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Stock Market Analyzer - 15 - Getting Tomorrows Date | Coder Coacher - Coaching Coders</title><meta content="PHP Stock Market Analyzer - 15 - Getting Tomorrows Date - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Stock Market Analyzer - 15 - Getting Tomorrows Date</b></h2><h5 class="post__date">2012-01-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dEWNTqEr0lQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys in the last tutorial what
we did was we pretty much query the
database and we asked it to return a
result set of all the days where the
stock price went down and I'm losing my
voice great timing for that so let me go
ahead and now the first thing we want to
do is loop through each of these results
row by row so the easiest way in my mind
to do that is just make a variable
called a row and set this equal to my
SQL underscore fetch forgot how to type
array now as their excuse me has a
parameter for this you just pass it in
the result set and what this is going to
do is it's going to return an
associative array now remember
associative array is basically an array
that uses words instead of numbers to
represent the data in it so this is
basically going to loop through your
result set and it's going to give you an
associative array on each different loop
so the first time it's going to give you
an array based on the first row the
second time the second row third time
third row so on and so forth so
basically the row is the associative
array so let's go ahead and start
pulling data from each row now remember
what we did is we selected the date in
the percent change basically from the
result set so that's what we have to
work with right now so let's go ahead
and make a variable called date and in
order like I said to grab information
from an associative array you type in
the name of the array which is in this
case row and you type in the piece of
data now it returns to you an array and
it's a key is the name of the column so
the name of my column in the table is
date so there you go now we have that
rose date stored in the variable date so
whatever day it went down it's now
stored in the variable date easy enough
and let's do the same thing with percent
change because remember those were the
two pieces of data that we queried from
the database and I'm actually just going
to go ahead and cheat a lot here %
change % change so now the day
in the percent change we have stored in
variables that we can more easily work
with now remember i said this i think in
the last tutorial these are the dates
that the stock price went down but well
we are more interested in is the
following day so we are interested in
this state we are interested in the day
after so what we want to do is we want
to make another query to basically
select the information for the next day
so in order to do that let's go ahead
and use our old friend sqo to remember I
don't like tending my variables the same
thing so I'm just going to go ahead and
name this SQL too and it's pretty much
going to be a query just like before
just a simple string so what this is
going to do is it's going to select this
is going to look very familiar select
dates and percent change from probably
just going to copy that whole thing from
a company ticker because remember we're
in the same loop we're not the company
ticker is going to remain the same one
so if this was yahoo up here then this
is still going to be yahoo down there so
what we're doing is we're selecting the
date and the percent change from the
company we're working with we're date is
greater than date and I actually want to
move this so it's a little bit clearer
and I'll show you guys what I'm doing in
just a second and I want to order by
date a SC in a limit of one now saying
okay what the heck is this query and why
the heck are you doing aware in order by
clause well first of all I want to say
this remember we have a date now these
are the dates where the stock dropped in
price in our goal is to get the next or
excuse me the following days data so we
want to get the date and percentage
change
from the following day so why did i do
where great is greater than date well
the date right here is the current day
so if the date is greater than this then
it would mean where date is after so
basically if today if I did this today
or in other words if this variable meant
today if date was greater than today
then that would be basically all the
future so if I order by date then it's
going to set it up and the order that we
want in the limit one is only going to
give me one day so basically the next
day that's what we do whenever we say
limit one after this state right here
makes sense easy now if that's as best I
can explain anyways so now what we
wanted to do after that is just go ahead
and run this query and we do that by
just hitting this and I'm just going to
go ahead and move things around so you
guys can see a little bit better results
equals and actually you want to change
that to to result to it cools mysql too
and what could i do after this okay i
might as well do this so basically what
we did is we basically limited this to
one and this would mean I don't want all
the dates after the day I only want the
next day I only want the following day
so we what we want to do was we want to
ensure that it only returned one result
now they're going to be instances where
it returns 0 for example remember if we
look at the last a month of data then
all of those days are going to have
following days but what if the stock
price went down today well tomorrow we
don't know what it's going to be it so
we don't have that information so even
though this query in this program might
be running properly it may return to you
um no result set because tomorrow
doesn't exist yet so what we want to do
is we want to check how many rows that
it returned so hopefully we get one but
we may get 0 if tomorrow did exist the
ax so the first thing we need to do is
we need to make a variable called number
of rows
in in order to count the number of rows
in your results that you use a function
called MySQL num rows and as parameter
you just pass in your results it which
is a result too and this is either going
to return 1 or 0 and we'll go ahead and
we'll make another clause like if it
returns five or something we'll just say
we have an error so let me just go ahead
and make sure you're okay I'm probably
not going to have time to do this in
this story but in the next store what
we're going to be doing is we're going
to be working inside this and we're
check okay if you return one row that
means that we do have data that we can
work with if you return 0 rows then
don't do anything because that means
you're on the current day and there's no
data for tomorrow yet and we'll make
another else clause that say okay if you
return anything else but one and zero
then something went wrong and you know
we'll just put an heir to the user or
something so that's why we have to look
for a two things yes we're watching and
I'll see you guys in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>