<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AJAX Chat Tutorial - 11 - Hippo In My Kitchen | Coder Coacher - Coaching Coders</title><meta content="AJAX Chat Tutorial - 11 - Hippo In My Kitchen - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AJAX Chat Tutorial - 11 - Hippo In My Kitchen</b></h2><h5 class="post__date">2013-05-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/P-AJzRlnv7g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">result fetch array now this function is
another built-in one and it has a couple
different parameters that we can pass in
and if we pass in my squealy I don't
even know if that's I say it
so what this means as is we basically
want to take the result set which is
hopefully a list of messages and we want
to get it as an associative array now
the difference between an associative
array rather than a regular array in why
I prefer this is because you can see in
text what it's returning rather than
zero one two you're gonna see the words
color username post it on so on and so
forth and it makes it a lot easier
whenever you're coding so the first
thing we want to do is now that we have
an array that we can work with we on we
want to take it and store it and easy to
work with variables so remember the row
is basically the array that's the name
of the array you said this variable row
is equal to the array that it returned
so in order to get any single element
from an associative array you first put
the name of the array and then you put
the name or excuse me
this is yeah the message ID and you need
to put it in between single quotation
marks like that and now we can just go
ahead and say ID instead of this
variable whenever working with it it
makes it a whole lot easier and guys
this is why I prefer an associative
array because it's a lot easier to see
these rather than Rho 0 Rho 1 Rho 2 so
on and so forth so now that we got the
ID let's go ahead and return a couple
more things basically everything that we
need the color and this is the color of
the text and remember the ID was
basically the primary key in your
database the ID number of the message
the color like I said is the color after
this you have the user's username
and let's just go ahead and store this
is username and in the database we wrote
user underscore name now the last couple
of things were time and remember the
column in the database was posted on and
let me copy this biatch real quick
I'm very vulgar today was wrong that
usually don't even cost at all so the
message is the Big Daddy that we want
and we just sort of this is message in
the database and now we basically have
all the information that we need from
the database we ask the database if
there are any new messages for each
message give us the ID number the color
of the font the username the time that
they posted it in the message itself so
you're like alright we're good to go
right well now we have to do one more
little thing and that is format each
message properly in your XML file so
this is how you do that remember
everything we're storing in this
response variable which is basically the
XML file itself so the first thing we
need to add to it is the ID tags and
this is how we're going to do it and
actually if you set it up like this it's
probably the easiest way but everything
in between single quotation marks all of
your XML tags and the first one is ID
and also you end it with
Eydie now in between those ID tags the
value that we have to pass in is the ID
variable but you can't just do this you
have to actually make your concatenate
or whatever heck they're called so
basically what we're saying is the first
tag that we want in each little element
in our XML file is the ID number of the
message so we start the tag because
that's just how XML file works we end
the tag and in between as the value is
whatever we returned from the database
whatever we got from the database now
the cool thing is if you formatted it
like I just did we can just go ahead and
copy this and change all this crap so
actually I may put let me think
color time use your name message so
color time use your name message and
I'll show you guys what the heck I was
just talking about wow that's kind of
embarrassing color color color
time time time che can just go ahead and
put a name name use your name and just
copy this little mouthful right here
message message message boom
roasted now one last line that we need
to do and this is just for good
housekeeping practices is that whenever
we are done with this what we would like
to do is we need to close the result and
this is just for you know like I said
just had housekeeping in order to do
that just put closed parenthesis and
what this does is it basically closes
the database connection so now we can
actually clean all this up just because
I hate when things are loose and let me
go ahead and explain you guys one last
time when we did if I was blabbering and
cussing too much then this will make
sense in the last video we queried all
the messages we got all the new messages
that we wanted to display to the user
now what we need to
before we send them you know a big long
query result because that wouldn't look
good on their browser we wanted to
format it as a proper XML response so
what we did is we basically stored in an
XML file in variable we added all the
tags and then we returned the variable
right here which basically returned an
XML file so later on you can sift
through and read all your messages and
they look real nice now in this if
statement we're basically saying in
everyday terms if we have results or any
new messages then go ahead and loop
through all those messages now get every
single piece of information that you
need and then add it properly properly
formatted to an XML file and once you're
done with that close your database
connection because that's the proper
thing you have to do and then return the
XML file basically send it off that's
what we're going to be doing so the
browser can take care of it so how easy
is that
how freaking awesome congratulations I'm
gonna say frickin a couple more couple
more times and by the way this has
nothing to do with the video I just made
but I'm going to be releasing all of the
source code for the social network
probably one week from today on you know
hopefully May 17th so if you guys click
on the link below Bucky's room social
network go to that check it out it's
going to be open source one week from
today
pretty cool so anyways thank you guys
and I in the next tutorial we're gonna
be finishing up this file I'll see you
then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>