<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB Tutorial for Beginners - 6 - Indexing | Coder Coacher - Coaching Coders</title><meta content="MongoDB Tutorial for Beginners - 6 - Indexing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB Tutorial for Beginners - 6 - Indexing</b></h2><h5 class="post__date">2015-04-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Gazp4GpbcAM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys in this video I'm gonna
talk to you about indexing and just so
we can change things up what I'm gonna
do is my github I'm gonna grab this fake
bank data and if I scroll all the way
down I figure instead of just looking at
the same hockey dad all the time might
as well just switch things up to keep
everything interesting alright so this
is pretty much well it's not really a
bunch of users but it would be like a
bunch of users from a bank so here's a
user right now in what information do we
have about their name of course gender
what company they work for a fake email
of course their balance and all of these
are already inside an array so what we
can do now is create the database so use
bank and of course we can verify that by
just writing DB and it'll display the
name of the database bank so now we have
to insert all of that data that we got
from github so DB and I'm just going to
name my collection users and we'll just
say insert an inside here we can just
paste that array looks good and run this
alright so inserted 35 users or people
and if we clear it now indexing is one
of the best ways to speed up their
performance and efficiency of your
database and right now when I'm just
showing you guys these real quick
examples and our database only has like
um like 35 users or how many players
around the hockey team like 20 whatever
all of these examples whenever I run the
queries they're going to go really fast
because we don't have that much data but
let's say on my website I have 40,000
users signed up so whenever we search
for someone it's obviously going to take
a real long time unless we learn about
how to you know enhance the performance
of our database and that's where
indexing comes into play so first let me
show you
little quick example of the wrong way to
do things so if we just go to DB users
and this isn't really a wrong way um but
I'll show you guys how to pretty much do
it this way and then how to make it
better all right so say that we wanted
to find all the users in our bank who
were 23 or younger I don't know maybe um
we're having a new like college credit
plan I don't know what banks do whatever
so we're just going to hit find and as
you guys know inside here we can just
have any object and I'll just write like
H we'll say uh just less than less than
or equal to actually just less than keep
things really simple less than 23 so I'm
going to run this right now and it's
going to return to users so this guy's
20 or this girl whatever she is or
she'll in Doulton those are the two
users interbank less than 23 all right
that was pretty quick but check out
what's happening if I do this I'm going
to run this it on command again and I'm
going to tack on a new method called
explain and what this is going to do is
it's going to give you information about
your query about this command right here
so if I type execution stats this is
pretty much it's going to filter the
results you really don't need to worry
about this right now I just want to show
you guys something real quick so again
like I said what this is going to do is
it's not going to give you the results
of the query it's going to give us
information um like how it found the
query and stuff like that look man I got
like a turd in my throat I just ate a
peanut butter and jelly sandwich and by
the way I was a grocery shop in the
other day and I saw this jelly that you
can apparently squeeze from a tube so
you know instead of like the jar where
you had to stick a knife and then spread
on your sandwich and just like squeeze
this one from a tube I understand so I
bought it it really doesn't make sense
because I already had to get a knife out
for the peanut butter to put it on but I
know it's just fun to squeeze jelly from
- for some reason whatever but anyways I
just ate one of those sandwiches and now
I got like crap in my throat alright
we're worried right here
so says execute execution status don't
even worry about all this but check this
out it had to examine 35 results and
that's kind of expected because let me
clear this out because remember we have
35 users in our bank it's pretty small
Bank or whatever so whenever we have to
make a query such as search for people
younger than this age what it does is it
scans through every single document
every single user and it says are you
younger than 23 are you go younger than
2023 and I ask that question
35 times alright well that seems alright
and it sounds like the proper way to do
things but obviously once you start
getting you know hundreds and thousands
of customers like these big businesses
it's going to take a real long time so
that's where indexing comes into play
I heard of this analogy before and it's
actually really good indexing in
database it's pretty much the same way
that you index in books so you know
whenever you're looking for a word in a
book you don't just go through page by
page sentence by sentence and look for
it what you do is you hop back to the
index and I don't know say you're
reading in the book about Mongo and you
wanted to look up this explain you would
go to the index every word is in
alphabetical order you'll go to E's look
for explain and it would say explained
on page like 100 140 and 143 so it's a
really easy way of looking for a data
that you want to find a lot more
efficient than going through page by
page and that's the same as it works in
a database pretty much what you're going
to do is you're going to index a piece
of information in this example we're
about to index age and instead of having
to go through every single document
every single piece of information this
age behind the scenes is going to be
ordered and then the computer can find
it really easily so how do we do this
well we can get rid of this because we
just ran it we're going to say DB dot
users dot ensure index this pretty much
just means we're going to give you
something turn it in to an index so what
do we want to give it well we'll just
give it the age and one just means true
so if we run this then it says it pretty
much says okay created indexes and I'll
show you guys why this says number of
index is two instead of one it's because
if you go DB users indexes if you just
get the indexes all this is going to do
is going to show you what indexes you
have it says all right here's the one
that we just created age is now indexed
and by default you know that object ID
that it creates for us you know behind
the scenes that's automatically an index
as well so let me clear this out I'll
show you guys something new
all right so now what we're going to do
is we're going to run this command again
find all of the users who are younger
than 23 and whenever we do if I can find
it in my data all right total Doc's
examined too so I know you guys can't
tell because both of those queries since
you only have you know 35 customers or
whatever they're taking like
milliseconds but if this was you know a
huge database then you guys are
definitely going to notice a big
performance improvement now if I clear
this anytime you want to get rid or drop
an index it's really easy you pretty
much just all right instead of ensure
index you call drop index and that's
going to delete it so we're going to say
drop the index of age run this and now I
get my indexes you're going to see that
we only have that one
index that was given to us by default so
now you're like alright obviously
whenever I'm making database indexing is
a lot faster so why not just index
everything well here's a thing remember
an index is kind of like having an
ordered set of information at the end of
your book and say that your book is 500
pages long and the index is 20 pages
obviously you can find words a lot
easier that way however if you index
everything what information do we have
right here so we indexed age why don't
we just index eye color name gender
company email all of this stuff well
that's like adding you know a hundred
and twenty more pages at the end of your
book so whenever you index something
it's able to search for that piece of
information a lot faster however if you
think about it whenever you add a new
piece of information you have to update
the indexes as well so if you just
indexed every single piece of
information every single key whenever
you added an easier not only would you
add it to database but you'd have to
update that is active index balance age
eye color name all of those so it would
actually slow down your dad base because
even though you might be able to
retrieve the information faster whenever
you know a new customer signs up and
presses the submit button it's going to
take like half an hour just the you know
create a new account because you're
inserting everything and then updating
all the indexes so I guess now the only
question that you might have is all
right well then what do I know what to
index well generally again this is
really specific to your application but
generally what you want to do is you
want to index only the columns that you
search for a lot for example if each of
these users had a unique ID number and I
would just index that and then once I
found them I could of course just say
all right get their other information
quick so you might just want to index
their ID number or maybe their name but
definitely not the rest of this
information pretty much whenever
you're searching for users or you know
whatever piece of information they're
posts comments whatever you want to
index the thing that you can uniquely
identify it by and then once you have it
you get the rest of the information
lightning fast so that's one of the cool
things that you can do to speed up the
performance of your database if you
don't quite get it then don't worry
whenever you're just making a regular
website you really don't even need to
worry about indexing just when you have
you know armed like a huge social
network or something that's when users
are going to start noticing the
performance but now I'm rambling I'm
probably going to go eat another
sandwich
in the meantime then guys for watching
see you next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>