<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Trading Website Community Project - 42 - Cleaning Up the Messy Stats | Coder Coacher - Coaching Coders</title><meta content="Trading Website Community Project - 42 - Cleaning Up the Messy Stats - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Trading Website Community Project - 42 - Cleaning Up the Messy Stats</b></h2><h5 class="post__date">2012-04-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6gL3AvE47KE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alrighty guys welcome back to your 40
second video in in between the last
video in this video look at all of the
work I have done I created all of these
functions to calculate all the
statistics that we need now you guys are
probably like omgwtfbbq why I don't know
you might like barbecue I'm not going to
go ahead and talk you guys through all
of these functions because like I said
in the last video it's pretty obvious
what they all do and if you don't know
what they do there's a little comment
above now in order for you guys to get
this file just go ahead and download it
for my forum and you guys will be good
to go so now that we calculated all of
the necessary statistics for the user's
account links on the left hand side of
course now what we have to do is build
these links right here now like I said
what I'm going to do is I'm going to
build them one time and then use them
whenever we need them instead of coding
them on every single page so what did we
name that function account links so hop
over to your file HTML codes which is
obviously where we write functions to
produce HTML codes and add a little
comment that says code for account pages
links now the very first thing that we
need to do is we need to include the
file that calculates all the statistics
so in order to do that just write
include and of course the function
include you need to write what file do
you want to include functions and if you
can't remember we named it fun
underscore user stats PHP let make sure
I spent their user stats that PHP good
so basically now everything from this
user stats file is now in here so we can
use any of those functions to calculate
user statistics awesome so now what we
need to do is we actually need to build
a function that creates the HTML code
for the links on the left hand side so
of course function and we named it but
I'm a man keep forgetting
account links and it gets passed in a
number account links and will call the
parameter get that gets passed in X now
you guys will understand why we're
passing in that number in a second but
for now just hold your horses we'll get
to it so the very first thing that we
want to do is sex identity hit caps lock
on my computer is we want to store their
session ID in a simple variable because
that session variable looks really ugly
unless you want to type this all the
time dollar sign underscore session user
underscore ID I really don't want to
type that every single time I'm working
with your session ID so that's why I
changed it to a nice shorter variable my
ID I'm just going to treat these like
these are my links they belong to me so
anyways guys if you heard that that was
my vinyl chair I swear I didn't just do
right now so now check this out in order
to make these functions incredibly easy
to work with let's think about this each
of these functions calculate an
important statistic for the user and
returns either a blank or a number in
between parentheses it basically returns
a string of how many items that figure
it out so instead of calling the
function and throwing it in other weird
functions what I decided to do is I want
to store each of these strings and a
nice easy to understand variable such as
this all pending is the number that it
returns it pretty much counts up all of
the items that you have pending in it's
going to be stored in this variable
simple enough so all pending equals
calculate all pending items so of course
this function is going to return a
string and it's going to return it in
this variable right here so of course
this is a lot more easy to work with
than this so that is why I'm storing
them in variables simple enough now I
guess I might as well take you guys
through all of the functions do right
now so
really easy to understand all reported
equals calculate all reported items now
what reported items are is whenever you
are browsing the web site and you see
that someone uploaded pictures of spam
or maybe they say something maybe they
were like posting links to pornography
websites in their description then you
can go ahead and report that item if
someone reported your item then it's
going to it's going to go to a certain
reported section so that's what that is
now the next variable is users active
and of course this is the users active
items now active items are basically
whenever you list the item or add an
item to the website and it gets approved
which means okay you met all the
criteria you didn't have porn images or
you then have spam it's good to go it's
going to be active and it's going to be
eligible to trade now instead of the
user ID we actually want to throw in my
ID and that's going to calculate all the
active items for whatever user is
viewing these links now after this is
users pending and I think that this was
the function that we made in the less
its Oriole if I'm correct what this does
is it calculates all the pending items
from the user before the user and you
guys already know what pending items are
and after this let's see okay calculate
users offers received of course whenever
you add an item to the website I just
want to separate this so they don't get
all jump together let me take this first
users offers
eii ve be there make sure I spell it
right okay whenever you add an item to
the website people can make an offer on
your item for example if I listed my
xbox games and someone offered me a frog
then that would be one offer that I
receive so then this number would be one
and hopefully someone offers me frogs
because i really like frogs now after
this is offers made so I was going to
copy that but not that lazy users offers
made and this number is basically
whenever you make an offer for example
if someone had I don't know a chupacabra
to trade and I wanted them I wanted to
offer them of the New Boston t-shirt
then if I made one offer then this
number would be equal to one now offers
made and users completed trades i think
is next users now completed trades i
know this is you know kind of
self-explanatory but i wanted to talk
you guys through this anyways completely
trades is whenever two people complete a
trade whenever i trade my t-shirt for
that Chupacabra and I say okay that's a
good deal he says it's good deal we
shake hands that's going to go in a new
section called completed trades both of
those items are no longer going to be
active or eligible for trading since
they were already traded so then if you
traded one item this number would of
course be equal to one so on and so
forth now the last statistic that I'm
going to store in variable is users
unread messages now the reason that I
don't want to store the total number of
messages and only the unread messages is
because we only want to alert the user
whenever they have new messages we don't
want to bore them with they don't care
how many messages they got overall as
soon as they log in they want to say see
oh how many new messages do I have so
calculate users unread messages
basically calculates how many messages
that they have
how many new messages that they have
basically is what I'm trying to say so
now let me just go ahead and check over
this one more time pending reported
active pending receive made completed
trades and unread messages okay so now
we have all of these very complicated
statistics stored in nice easy to work
with variables so now what we can do is
we can move on to the next tutorial and
in the next lesson what I'm going to be
doing is I'm finally going to be showing
you guys why you pass in that number 0
for here and it's actually a really cool
feature that I built in and it's
actually really easy to code in your
website so anyways that's where we're
going to be doing in the next tutorial
so yeah I'll see you then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>