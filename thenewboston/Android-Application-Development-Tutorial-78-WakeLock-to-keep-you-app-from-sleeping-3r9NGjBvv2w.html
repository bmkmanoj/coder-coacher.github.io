<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Application Development Tutorial - 78 - WakeLock to keep you app from sleeping | Coder Coacher - Coaching Coders</title><meta content="Android Application Development Tutorial - 78 - WakeLock to keep you app from sleeping - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Application Development Tutorial - 78 - WakeLock to keep you app from sleeping</b></h2><h5 class="post__date">2011-08-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3r9NGjBvv2w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what's up guys welcome your 78 Android
tutorial for the new boss in again with
me Travis and what we're going to do in
this tutorials we're basically going to
set up a wakelock
now what is a wakelock well let's say we
have our activity open as running and
the person just staring at this activity
on their phone for like five seconds
basically it's going to make our
activity back screen dim and then if
still no activity is happening it's
going to actually lock her phone to save
some of the battery power but for
example if we want an activity like this
where there's no user interface and we
just want them to stare at this for
three hours and or until their battery
dies
you know hypnotized them with something
like this we want to make sure that our
phones background won't dim and actually
shut off to save that battery power so
we're gonna basically set up a wakelock
so it won't won't do that it's pretty
simple I know I promised yet I told you
guys we're going to do something awesome
in this tutorial well I thought we
should save the awesomeness for you know
later down the road because I'm supposed
to be teaching as kind of a basic so I
thought I should just stick to that
what's up we're going to add our way
clock to this activity so that was
called our graphics class so just open
that up and here's a graphics class all
we're going to do is before or on create
or before on super our super method is
called right here on create this is
where we're gonna set up our way clock
so I don't know if you guys want to
leave a comment just wakelock something
like that you're not who knows but
that's that's where we're gonna set this
up now we do this through the power
manager because again the wait clock
kind of saves battery power so that's
held within the back the power manager
class where we can you know get get the
context from that class so we're going
to say power manager we're just going to
call this p.m. for a power manager or
something and then we have to import
power manager and what we're going to do
is we're going to cast
our power manager here and then we're
going to say get system service and then
within this parameter we're going to get
the context called power service so I'm
going to say contacts dot power service
now that's basically just getting the
power manager set up for us and the only
other thing we have to do is set up our
way clock now so let's just say way
clock we can established you know oh we
can just say way clock here and then
we're going to call this WL for way
clock and then again we just have to
import this it's pretty simple tutorial
it's not really you know it's just
something else you guys can use as a
resource as well so now what we're going
to do is we're going to refer to our
power manager that we just set up which
was p.m. and then we're going to say dot
new way clock as you can see it takes
flags and a tag within the parameters as
you can see over here it kind of shows
us how to set up the way clock this is
basically all we're going to do right
here is this example the most part and
then also we can acquire and release our
way clock because we want to release it
when we aren't when we don't need the
way clock anymore
so let's set that up and then for flags
what we're going to say is we're going
to refer to again the power manager
class and we're going to say full fake
full way clock so that's just going to
leave our screen completely fully awake
the whole time for the most part and
then for a tag we can just you know set
this up as whatever so
there we go I mean the tag can be
anything you guys want to subscribe that
way clock as there we go now we have a
way clock set up again we need to kind
of basically start our way clock when
our activity starts so what we can do
again is just something like WL dot
acquire to start it that's what's
actually going to start our our way
clock here and also we can release it so
we're just going to set up our release
as well so we're just going to hit right
click and then we're going to add the on
pause method and that's where we're
going to you know release our way clock
so again just go to override methods and
on pause right there and then we're just
going to say WL dot release and as of
now again it's not referred it doesn't
know what this WL is because we
establish it in this class so we're just
going to copy this here and then set it
up above our class so it's kind of
referring to the same WL and there we go
I mean we're pretty much done the only
other thing you guys might want to do as
setup on resume method and put this
acquire within the on resume method
that's just the option you guys can use
this will work as well at the moment but
if we ever come back to the activity
where it resumes you probably want to
acquire the wakelock within that on
resume method so there we go we're
pretty much done with this the only
other thing we need to do is we need to
add a permission and again we're just
going to do it the simple way with this
permission tab here in the Android
manifest so just click that and then
we're going to say add permission you
I'm sorry uses permission one of that
seam right there we're just going to say
use this permission and we're going to
search for wakelock
if I can there we go
search for wakelock right here and then
we can use we can access the power
manager and set our wake lock otherwise
it won't work if we don't use that
permission so just save that and we're
good to go
we'll we'll have a wake lock now so hope
you guys enjoyed the tutorial wasn't
super awesome but it could become
beneficial for your application so peace
guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>