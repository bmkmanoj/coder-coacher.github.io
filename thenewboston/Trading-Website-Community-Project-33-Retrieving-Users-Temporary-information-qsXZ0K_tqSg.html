<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Trading Website Community Project - 33 - Retrieving Users Temporary information | Coder Coacher - Coaching Coders</title><meta content="Trading Website Community Project - 33 - Retrieving Users Temporary information - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Trading Website Community Project - 33 - Retrieving Users Temporary information</b></h2><h5 class="post__date">2012-04-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qsXZ0K_tqSg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright guys welcome to your 33rd
project video and in this video we're
going to be doing a bunch of stuff you
guys are going to see I don't need to
give you a little preview but before I
begin I actually do need to mention this
in the last video I made a little
mistake i put the equals equals 32
before pretty much inside the
parentheses and of course you need to
put it outside the function because the
string length function tests the
variable counts the number of characters
in it and then once you had that number
you can test whether it's equal to 32 so
again make sure your code looks like
this and that's the proper coding so the
next thing I want to do is I want to
test if the key and the email variable
are set since check this out they're
only going to be set if they passed this
test and this test this little if
statement so now if they're set then
they must be good variables so let's go
ahead and do that right now if it's set
and again I'm going to be doing this
twice once for email and just put and
and an another time for a key just cheat
a little here key if both of these
variables are set then they must be good
variables we can continue by querying
the table and we want to look for the
row and we want to grab the user
information where the email equals this
email and the key equals this key now
we're going to only get one row back
because obviously you can't use the same
email to register multiple accounts and
that unique key is only going to be
unique on one row not through like many
users so let's go ahead and do that
right now I'm going to take their
information and store it in a result set
now set this equal to my SQL underscore
query and actually I need to do a little
bit of housekeeping first our queries
going to go in there but or die mysql
underscore air just in case we
accidentally type a query wrong or
anything else but now we get to the good
stuff so again like I said what we're
going to be doing is we're going to be
querying
or selecting all of the information from
the table temp users but we're not just
going to be selecting every row we only
want to select the row where the email
is equal to whatever email we grab from
the URL and the activation code is equal
to the key that we grab from the URL now
what I want to do is just right at the
end of this is I want to limit it to one
because we should only get one result
back because like i said before you
can't have multiple users with a single
email it doesn't make sense now I want
to mention this before I go on there are
several different ways that we can
actually get the columns or the
information from this result set and
store it in variables that we can work
with in PHP you can use it you can store
the information and a bunch of different
types of arrays or you can store it
straight in variables what I like to do
is I like a store it in an array that
uses keywords instead of numbers because
whenever you query your information you
can't be like okay is um you know index
0 username or is index for username it's
very confusing so let me go ahead and
explain this well you know i'm just
going to show you guys i like to make a
while loop and whenever you are this is
just the easiest way so go ahead and set
a variable called a row and set it equal
to my SQL underscore fetch wow that's
not our underscore underscore fetch
underscore array now what this function
is going to do is it's going to take a
result set or a query as a parameter now
it's going to store all of the
information that it queried in the
variable row now of course what if there
are multiple rows then what are you
going to do well obviously what this
while loop does is it loops through the
information row by row and the reason
that I'm using a while loop even
we only query to one a row is because
there are going to be certain instances
where you only get one row back when
every query the database or let's say
that a user is searching for items well
maybe they have a thousand results well
this while loop is going to work with
one result a thousand results 100 it's
the same code that we can use over and
over and over again how awesome is that
so that's why I like to use a while loop
no matter if we get one result nun or a
thousand so each row that it loops
through it's going to give you a set of
variables for that row so let me go
ahead and the set we got back is a user
ID used your name email and password so
for the first user ID I'm going to store
it in a variable called user ID now in
order to grab a specific column from a
row or a specific piece of data use the
road name which is row and in between
brackets you right what is the name of
the column so the name of the first one
is user underscore ID so what it's going
to do is it's going to return the user
ID for that user and store in a PHP
variable that we could use called user
ID however just to make this a tid bit
safer what I like to do is I am going to
how am I going to do this I probably
should have type this out before but I
want to explain it I'm going to put
everything in a my SQL underscore real
underscore escape underscore string
whoever made that function needs to you
know learn how to make shorter naming
functions because that is a pain to type
and now what I'm going to do is I'm
going to take this variable and throw it
right in here and what my SQL real
escape string does is I want to say it
just cleans it up whenever I talk about
security I'm going to be going over
everything and I can't even remember if
I talked about this in the last video or
not but I don't want to cover security
the goal of these tutorials right now is
just to get the website to work once the
website is working then
everything is going to be complete and
then I'm going to be going over all of
the security topics because i know that
i didn't hash my passwords or I didn't
you know cover cross-site scripting or
SQL injection I'm going to save that for
the end because it's so much easier if I
can explain all at once so guys for
everyone complaining that my website is
not secure right now I know it's not
secure I just want to save security for
the very end and it's going to make it a
whole lot easier on me whenever I'm
explaining to you guys so basically this
is how we grab a piece of data from the
database so now that we did it for user
ID we need to do it for the other data
fields too so the first one is username
or the second one rather use your name
and username the third one is grab the
email from the database and store it in
a variable called email and the last
thing I want to grab the password from
the database or the table and store it
in a variable called password so now
what we have is four pieces of
information from the temporary users
table the user ID their username that
they chose their email and the password
which whatever password they chose so
now that we have this information what
we can do is we can say okay wherever
you see this information in the
temporary users database delete it and
insert it into the permanent users
database so that's what we're going to
be doing in the next video that's what
you have to look forward to so thank you
guys for watching and don't forget to
subscribe and I'll see you guys in the
next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>