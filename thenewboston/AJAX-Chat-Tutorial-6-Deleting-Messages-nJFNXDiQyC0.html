<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AJAX Chat Tutorial - 6 - Deleting Messages | Coder Coacher - Coaching Coders</title><meta content="AJAX Chat Tutorial - 6 - Deleting Messages - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AJAX Chat Tutorial - 6 - Deleting Messages</b></h2><h5 class="post__date">2013-05-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nJFNXDiQyC0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I don't I take guys welcome back to your
sixth video and in this video we're
gonna be doing is actually building some
cool functions the first function that
we're going to make is the function that
the user uses to delete all of their
messages so whenever they press the
delete button it's pretty much gonna
clear the entire chat log and delete all
of the messages in the database so you
know how you don't want to store all the
messages from your chat room forever or
else your database is gonna you know be
huge and it's going to eat all the
memory on your server so we gave the
user the ability to pretty much clear
the chat room so this is how you do that
now truncates
and whenever you're working with MySQL
whenever you truncate a table it pretty
much means empty empties the table or
delete every single row so this function
is gonna do is it's gonna go in your
database and delete every single message
or every single row and what the leet
user is gonna see is they're pretty much
their chat room or their log is gonna be
emptied or their history is gonna be
cleared you know however you want to say
it so empties um the table containing
all messages so let's go ahead and build
this public function and I'll just go
ahead and call this delete all messages
and it doesn't take any parameters
because we don't need to give any
additional information now the query for
this and let's go ahead and build the
query first it's just truncate table and
the table name was chat so whenever we
run this query it's gonna delete every
single row in the table chat so that's
what truncate means to leave every
single row now we actually need to run
this query supposed to be a variable so
the result so what we did right here is
we basically just built the query
this isn't the same as running the query
if we just ran our code right now
nothing would happen in order to run
this query or execute it this is how you
do that this you have to use your object
that you created and this is pretty much
saying okay we're using this object
which is basically a connection to the
database that we created so this my SQL
I query and now this takes a parameter
of what query do you want to execute so
this is actually a function is and as a
parameter you pass it the variable of
the query or basically the query that
you want to execute so this builds the
query that says basically delete every
single row in the database or excuse me
in the table and this execute the query
so eventually we're gonna link this
function to the button that says delete
messages and whenever the user clicks it
it's going to call this function and lay
all of the messages in the chatroom so
that's pretty cool let's go ahead and
build another function so a next logical
function that we can build is how to
make the user post a new message to the
chatroom because right now all the user
can do is delete messages not a very
cool chatroom so you want to give them
the ability to post a new message so you
know they can actually communicate with
each other like an that would be very
useful so public function post new
message so whenever this function is
called they're gonna post a new message
or in other words insert a message into
the database now for this we actually do
need some pieces of information the
first thing is which user is posting the
message so we'll go ahead and pass that
in the user name the next thing is what
is the message or what are they typing
and we'll store that in message and the
last thing we're gonna store is color
which is basically the color of their
text now what we need to do now is
we need to set all of these armed
variables and we kind of need to clean
them up so let me go ahead and show you
guys what I'm talking about
so the username is going to be equal to
this my SQL I real escape
String username and what this does right
here is real escape string is basically
the mysql improved way that you fix my
SQL injection and this if you guys don't
know about my SQL injection or about
like PHP security or MySQL security
there is a way that the user can
actually hack your database by typing a
message into any input box and what I
just want to talk to you guys about this
for 20 seconds what they can do is they
can actually type in a bit of SQL code
and it'll execute whenever it goes to
your database but this is how you
prevent against that if you guys don't
know about that just remember real
escape string means don't let the user
hack my database boom very simple so
what we need to do is we actually need
to do this not only for the user name
but their message as well</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>