<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Trading Website Community Project - 37 - Setting Users Session Variables | Coder Coacher - Coaching Coders</title><meta content="Trading Website Community Project - 37 - Setting Users Session Variables - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Trading Website Community Project - 37 - Setting Users Session Variables</b></h2><h5 class="post__date">2012-04-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ipeTUOyN-0w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">row of data back from the database from
that one single user so in order to
ensure that what we want to do is we
want to test the number of rows so of
course if my sqo underscore num
underscore rose and of course this takes
a result set and what this function does
is it counts the number of rows in this
result set is exactly equal to 1 which
it should be then we can go ahead and
proceed now we really don't me need a
else statement but if we did then this
is where this thing came in right here
so the other one I should probably
invent this I probably just confused the
guys I'm sorry if I did that but I know
I stole the else statement from you know
the last register one that's what that
elf statement was forward because well
you guys obviously see what's going on
whenever you query the database and you
select that one user that user shouldn't
have multiple accounts so if it is
indeed one then it says okay you can go
ahead and login but if it isn't one and
this isn't going to be the case it's
going to be two or three the only reason
isn't going to be one is say that I
registered with the name Bucky in the
password password well say I
accidentally typed um lucky by mistake
and password well whenever we go ahead
and login it's going to say username or
password is incorrect because there is
no user with the name Bucky so again
we're setting it equal to one just to
make sure that there is a user that
exists so whenever we get that data what
exactly do we want to do well like I
said in the last tutorial our goal is to
set a session variable for that user so
this is how you do that go ahead and
make a while loop because I like to
throw everything inside a while loop and
what I want to do is remember this from
the last tutorial I'm going to use my
SQL underscore fetch underscore array
now the parameter that this takes is
that same result set which is that one
row of data so
this loop is actually only going to loop
through that one row it's only going to
loop one time and with that information
what I want to do is I want to create a
session variable now laziness prevails
once again we already typed this out so
session user ID is equal to okay guys
I'm going to be super lazy here row user
ID so basically whatever user ID you got
from that table is what I want you set
the session user ID for for that user so
if bucky's user ID was 20 then that is
my user ID for my session and that is a
cool way that you can only have one
piece of data and you don't need to set
a session variable for the username the
password their email number of trades
once we have the user ID we can
reference everything else in the entire
database for that one user so of course
after we gave them a user ID they can
now use this user ID no matter what web
pages they go to on our website so what
we want to do next is just redirect them
to their account page which is this
little page right here so basically what
we're saying is this once you go ahead
and you submit the form to login I'm
going to validate your username in your
password just make sure you didn't enter
any weird symbols or do anything stupid
by accident if indeed you entered valid
data then I'm going to query the
database and pull out the information
where it's basically that users
information for the username and
password pretty much bucky's information
if Bucky does exist then go ahead and
give him a session variable that he can
use and redirect them to his main
account page and if that user doesn't
exist maybe they typed the Bucky or type
the wrong password then just give them
this error message instead so that is
all we have to do for the login dot PHP
script in the next tutorial what I'm
going to do is oh I got freaking
strawberry stuck in my freaking throat
anyways in the next story I'm going to
teach you guys how to make the log out
script for whenever the user maybe
they're using a shared computer and they
want to log out and guys this is going
to be the easiest tutorial on the entire
series this next log out script a
thousand times easier than this so thank
you guys for watching don't forget
subscribe and I'll see you guys in the
next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>