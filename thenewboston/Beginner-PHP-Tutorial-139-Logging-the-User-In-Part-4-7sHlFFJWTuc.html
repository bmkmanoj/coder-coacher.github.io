<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Beginner PHP Tutorial - 139 - Logging the User In Part 4 | Coder Coacher - Coaching Coders</title><meta content="Beginner PHP Tutorial - 139 - Logging the User In Part 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Beginner PHP Tutorial - 139 - Logging the User In Part 4</b></h2><h5 class="post__date">2011-04-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7sHlFFJWTuc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's insert some data so we'll say
Billy password we'll just use as the
same thing so past 1 2 3 first name
Billy last name Garrett let's click go
and insert that data now you can see
that everything's done everything's
worked we've got idea of one for Alex
and two for Billy so let's try logging
each user in and we should return now we
should return this user ID so Alex Pass
one two three click login and it's
returned a value of 1 now let's try
Billy Pass one two three click login
let's return the value of two so now
we're logging the user in and we're also
returning the user ID now why do we need
this user ID the reason we need it is
because we need to store it in a session
in some session data so we can now then
what we can then tell that the user has
logged in and we can also use this ID to
get any information we need from this
table for example we can set the first
name or the surname or both from say if
we've stored one inside a session that
would mean that Alex is logged in then
we can get any data we need so these are
the fundamentals of a user login system
storing something that allows us to
access data about our user which can
change so one day I could log in as Alex
on one day I could log in as Billy or
another user could log in as billing
okay so let's let's put this into a
session now performing before we do that
we need to define something in our chord
in PHP release has included at the very
top of our index page called Oh Inc dot
PHP we need to say session underscore
start remember we need to do that for
all sessions to be able to use them on
pages so as long as we include this
chord or Inc dot PHP on every file which
we will be doing at the very top then
we're going to be able to log users in
we also want OB start before that
because what we're going to be doing is
using header headers the header function
to re redirect our user back to the
index page when they've logged in
correctly so we need OB start session
start
and now in here what we can do is we can
say dollar underscore session user
underscore ID equals user underscore ID
so we've grabbed the user ID from the
user that has correctly entered their
username and password now we're storing
it inside a session called session ID
called user ID okay now what we want to
do is say header location and we want to
go back to the index.php page we're
already on that but this will just
refresh it it will perform the checks to
say is this user logged in and it will
give us some data round so okay so we're
pretty much done there let's just go
back to our index dot PHP page and we
will create an if statement now let's
assume and if something else and then
down here let's assume we'll ignore this
for now let's assume that a session
called user ID has been set and isn't
empty now this means that the user has
logged in because it means that we've
gone through the process of setting this
to the user ID of the correct user
that's logged in or the users correctly
enter their details so all we need to do
is say if is set dollar underscore
session user underscore ID and not empty
dollar underscore session use our ID so
for any reason that a session called
user ID has been set and it's not empty
then we still run this code well we say
is it not empty because we need it to be
we need to contain a value in that case
we can say echo
you you're logged in let's just escape
that single quotation mark otherwise we
want to present the user with the login
form so let's just go through before I
test this whole login process because
we've pretty much logged a user in now
so let's let me just test this we'll go
through this in my head or not in my
head but with you guys so we'll start
from this bit here we grab the user ID
from the result of where we've already
echoed this out so you know what it does
we we've got one for Alex and to
verbally we set the session here so this
session will now equal one if I log in
as Alex then we relocate to index dot
PHP so we're already on index dot PHP
because we've included this we can even
refresh now just to just to show you
that we're still logged in so we're
still not logged in now as soon as I
type in Alex here and I type in pass one
two three here and I click login we're
going to process everything that we've
already talked about then we're going to
locate back to index dot PHP so I'm
going to refresh the page essentially
then this chip then this check is going
to happen again but this time we have
set session with the user ID key and
it's not empty so we're going to say
you're logged in so let's test that
clicking login and now it says you're
logged in no matter how many times we
refresh this page the session is still
set therefore we're still logged in so
now you've essentially learned how to
log a user in and that's basically it
for logging you use it in what you can
now do is on any other page that you
work with say you had a page called I
don't know tutorials dot PHP and you
need to the loser to be logged in you
could use this line what you could do to
make things easier and quicker is get
rid of this inside here and create a
function that allows you to quickly
check if the users logged in so let's go
back to cording dot PHP and we're going
to create a function called logged in
what we're going to do inside this
function is we're going to say if we're
going to do exactly the same as what
we've done what we've just removed from
index dot PHP here but we're going to
put it in a function so all we need to
do is call this so if if it's set
everything set and it's not empty return
true and otherwise up here we can say
return and I'm probably not going to way
to do it and we could say here else
return false so if we are logged in
we're going to return true otherwise
we're going to tell false so if you know
about functions and if you've correctly
learned about functions you'll know I
can just put if logged in then it will
say we're logged in because this will
return true so this block will run if we
return false we're going to include the
login form so let's go back to the page
and see if that works
yep it still tells us that we are logged
in</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>