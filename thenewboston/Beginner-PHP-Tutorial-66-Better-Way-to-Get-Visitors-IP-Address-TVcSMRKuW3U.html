<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Beginner PHP Tutorial - 66 - Better Way to Get Visitors IP Address | Coder Coacher - Coaching Coders</title><meta content="Beginner PHP Tutorial - 66 - Better Way to Get Visitors IP Address - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/thenewboston/">thenewboston</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Beginner PHP Tutorial - 66 - Better Way to Get Visitors IP Address</b></h2><h5 class="post__date">2011-04-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TVcSMRKuW3U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi this is Alex from PHP academy' back
with another video for the new Boston
now in this video we're going to look at
a more reliable way at getting a user's
IP address now in previous examples
we've used dollar underscore server and
then we've used remote address now this
isn't always an accurate depiction of
the users our IP address for example
they might be on a shared network so
there might be let's say a root two may
exist with a few computers or you may
have someone using a proxy so what we're
going to do in here is we're going to be
creating a way to grab the user's IP
address based on checking each three
elements the first element going to
check is the actual IP address say let's
say I was on a shared network I don't
the IP address to start with 192 I want
it to be the actual IP address what
we're then going to do is check if the
user is using a proxy and then what
we're going to do is check if the user
and what we're going to do a final
result and say well if not we'll use
this remote address here so let's have a
look at what we need to set to variable
wise in order to perform our checks we
need some kind of values and we're
always going to be using this server
preset set of environmental variables
but we're going to be doing things
slightly differently so the first one is
going to be the HTTP client IP and what
this is is this is the this is checking
the actual internet IP address rather
than the individual computer like I said
if you're sat at a group of computers
all connected to the same like route or
hub you'd be getting a like a 192 dot
something address perhaps so HTTP client
IP we need the dollar underscore server
and in here we just do HTTP client IP so
that's the first one ticked off the list
the second one is HTTP x-forwarded-for
so that's 8
tt HTTP x-forwarded-for and this is when
we are checking if the user is using a
proxy so let's put HTTP x-forwarded-for
okay so the last one is the final the
final decision if you like you mean this
this is going to be this is going to be
the last option so that we've already
looked at this so its dollar I'm not
going really going to talk about it it's
just remote address there so we need to
come up with an if statement to check
each one and we're going to use the
dollar and the exclamation mark and then
we're going to be using empty so we're
going to be saying not empty so the
first thing thing we're going to do is
we're going to say if not empty HTTP
client IP then IP address equals HTTP
client IP else here so we're create an
else and if-else statement here or if
else if else statement I'm going to say
else if HTTP x-forwarded-for and we can
say not look not empty and we're going
to enclose that in brackets as well then
the IP address equals HTTP
x-forwarded-for okay then last we're
just going to say if none of these have
been detected and they're all empty
then the IP address is going to be equal
to remote address okay so that's a lot
better way of looking at it so because
I'm running on a local local my just my
computer with my local server I'm not
gonna be able to test this very well
because these two are definitely going
to be empty I already know that they're
going to be able to so at the end of
this we can echo out the IP address you
can even put this into a function if
you've already looked at functions and
you could supply this data
through the function and then return a
value at the end of it but for now I'm
just demonstrating with an if-else
if-else statement so we're going to echo
the IP address at the end of that up
here we haven't defined IP address
because I'm just going to leave it until
it is set so we're going to echo IP
address let's just refresh the page and
you can see oh nope nothing's happened
so have a look okay yes oh I've missed
off addy on there okay so now let's
refresh we can see that we'll be given
the value one two seven zero zero one
however you are feel free to test this
on your own thing upload it to a web
server connect to the internet test it
wherever you can just to check that
everything is working so this is a lot
better way to grab a user's IP address
just by checking three different
possibilities before we come to the
conclusion that this is the address this
isn't entirely foolproof but it is a lot
better way so if you are thinking about
storing your users IP address try to use
this and like I said before if you put
it in a function it's going to be a lot
better and easier to use and you can
reuse that code over and over again</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>