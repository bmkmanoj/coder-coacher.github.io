<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mr. Robot CTF Hacking Walkthrough - Part 2 | Coder Coacher - Coaching Coders</title><meta content="Mr. Robot CTF Hacking Walkthrough - Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/HackerSploit/">HackerSploit</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mr. Robot CTF Hacking Walkthrough - Part 2</b></h2><h5 class="post__date">2018-04-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nuF5_vpKiuY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome back to the second
episode of the mr. robot CTF lon oh I'm
actually recording this directly after
that video you can actually see within
the time stamp so I'm just continuing
and we were actually working with
Metasploit ball with Metasploit sorry
and for some reason I couldn't get the
reverse handler to open and you know to
give me a reverse show so as I said
we're going to be using a PHP reversal
that I downloaded off a pen test monkey
and that's because I don't want to code
mine right now and that's well it's
mostly a waste of time so I edited the
reversed the reverse shell in the
previous video and I just added my IP
which is you can just launch you can
just check it out by typing in ifconfig
let me just confirm that before we get
started
as you can see 192.168.1.1 o.9 so make
sure to save this and now my thing is
how are we going to upload this because
what I'm thinking of is we don't need to
upload it what I'm thinking is we can
just let me can copy the entire piece of
code and we included in a PHP file that
already exists so then we can easily
open the reverse Handler with at a with
a tool like curl or netcat so we'll
start listening on the port 1 1 2 3 4
you can change that whatever you like um
so I know that the WordPress logged in
and we can access it now as you can see
I just refreshed and again I hope it
doesn't give me that problem this is the
open test monkey site as you can see
that's where I got the reversal from and
yeah it's working so let's look at some
of the PHP files that I can edit here
now I was thinking that one of the best
ones ways of going is well we'll have to
edit one of the PHP file then as you can
see we have the archive dot PHP file and
that means we have to actually access
the PHP file so we'll probably I'm going
to go for the 4/4 dot PHP file over here
ok now again you might be a little bit
confused would the PA the 4/4 means is
the page that would be displayed when
there is no mini
does not have any content so we can
replace our PHP code so when that
someone goes to that URL it is processed
so let's actually do that so I'm going
to paste the code I copied there
remember it's PHP code which is very
important because it must be processed
by a server so I'm going to update the
file now and remember it's going to be
as the 44.4
dot PHP file okay so I've updated it now
we need to use netcat to start listening
on the pot one two three four and I'm
starting is it netcat Elsie listen
listen port or it's LCP or let me
actually just check netcat let's
actually type in networks sorry about
that
and netcat yeah it's prompting me to use
inclusion I know that I don't need this
right now I'm trying to remember so
let's try and use netcat netcat listen
let's just try LVP one two three four if
I remember I also cover the video on net
cat I'm gonna it's gonna listen oh yes
it's listening on port one two three
four excellent
now we need to use curl to actually
start the reverse shell meaning to
process the page so we can actually open
up a new terminal here let's launch that
and we can say curl let me open that let
me spread that up so you guys understand
what's going on here so curl I'm also
going to make a video on all of these
tools that occur of cover this is a
great way of understanding the some of
the most important tools so the URL is
HTTP remember there's no there's no
secure there's no SSL so HTTP
192.168.1.1 oh eight that's the IP and
then remember 8404 dot PHP file
hopefully if that PHP was successfully
saved and updated to the server that
should start the reversal and wish to we
should get a connection right here
giving us the reversal connection so I'm
gonna enter here and let's hopefully yes
yes oh my god thank God that worked man
this was getting so annoying man oh yes
so it looked like the reverse
like it worked but this is not a
terminal if I just check how we are
logged in here sorry ID you can see that
yeah we're using daemon so I think we
should spawn a terminal or TT TT why how
do we do that
I know there's the Python method of
importing ah man how's this done I'm
sorry I'm getting a little bit irritated
was it Ben Ben shall I
is it B invention I can't access tty job
control turned off hmm
now that's getting really annoying all
right so I'm supposed to say whose name
we know who I am
we are I am the demon right now so that
means I've not logged in 20 use end user
and that's probably why I'm not going to
be able to read any of the files and
even find the third key so I was it
Python Python C to import then we use
the single quotation import PTY PTY then
we use PTY again because we're importing
the spawn where then is going to spawn
yes we need to use Python to spawn this
as I suspected and as I feared what
spawn this is actually a very common
thing if you're a systems administrator
spawn and then we use the bin dot s
binge dot shell not touch shell body
shell bin shell and then close that and
then we close that quotation mark and
whoops sorry oh yeah my bad that we have
to actually do that again Python C and
then import again single quotation input
and then PTY PTY permission
there we are PTY permission and then p
dy dot spawn pto a dot spawn and then
bin shell and then we close that up like
show like so sorry about that and then
we close and then we close that and
please give me s all right so now if we
list the files and we see our ID we're
still using demon that's really
oh my god all right so what I pretty
sure knows we just look at the users we
can access here because we can access
the entire server so we have actually
exploited the server which is great but
we are still not found the second key
they are still two more left which is
really bothering me let's look inside
the home folder let's see which users we
have inside yeah we have robot so let's
go into that robot list files in they
are we got the we got the key all right
so let me just print that out key - oh
my oh my oh my do I even have
permissions to access this file because
there is a password dot row here oh man
oh man oh man txt oh yeah we need to
perform privilege escalation we are
still in we need to actually log into
root to view this but there's a password
here there's a password not md5 oh my
god I think we have to crack that hash
then md5 hash so lets cat password
password or throw dot rho md5 md5 md5
md5 yes yes we got we got the hash do we
need to use hash cat now oh my god man I
think we have to use hash cat oh oh I
haven't have an excellent idea I have an
excellent idea we can use we can use
crack station or net man this is a video
I should have also covered crack station
the net use the old school days crack
station allows you to crack um if I've
ashes as long as they don't pass a
certain threshold let me just go back to
the dashboard so we know that the the
PHP file is working let me just copy
this copy the mm the 5 hash I hope it
cracks it others we love to use hash gap
so yes as you can see none salted hash
just for one-line paste that I don't
know whether you can actually see the
hash I'm gonna enter the CAPTCHA here
I'm not a robot and I'm gonna hit crack
hashes please give me the hash please
give me - man all right yes we got the
hash the ash is ABCD oh my god or it's
less that's actually kind of funny ABCD
is actually essentially the alphabet
from A to Z which is
it's a burger I am actually happy about
that because they've actually good
they've got us through this so let's see
if we can log in now so I'm going to try
and log in to robot do the robot account
because we need to go and robot then
into route goes to access this to access
that the second key we need permissions
or super user robot to change user and
is it gonna prompt us for password
please do yes
so now let's paste in the password that
we got or the cracked password md5 hash
ABCD tell me we have got it let's check
our ID yes we are finally logged into
root all right all right right this is
getting fun not now stuff is getting
exciting I should have actually just
skipped the Metasploit method because I
would have accessed this really really
quickly okay so now we need to actually
get into route using privilege
escalation and before we do that let me
just list the files in here and let me
print out the second key so that you
guys actually know that I accessed it
key two of three and you can pause the
video here just to make sure that I got
it or txt and I'm gonna hit enter and
there's the second key so I'm also going
to copy it here just to make sure that
I'm not caught not caught offside really
that's so this is the second key we
already have the first key saved on the
desktop so that's no worry now we need
to perform privilege escalation to get
the third key because I don't know where
the third key is and it's probably in
the root because if I go back here oops
if I go back here you can see that we
don't have let me just go back and see
whoops let me see what's in the root for
the CD whoo oh yeah I do not have
permission yes we need to perform
permission privilege escalation sorry
about that guys I'm really sleepy
haven't slept in probably about 20 hours
now so how do we get into this now we
probably have to search for a files that
can be accessed files that can be
accessed or a program or a script they
must have put a script here something
that can be accessed
that we can then use we can then use
interactive mode so a program like for
example the way we had Metasploit
mattersburg can be launched in
Metasploit or Hydra or WordPress can one
of these one should be the one that they
have accessed but that means we have to
find we have to find a file that has the
super user the super user IDs how do you
do that no find was it find and then we
have to find the fine permanent was it
mm yeah it was mm probably mm and we
then used the dev dev and null yeah that
should be the wait it's it we should be
actually get null is the directory yes
so we could not find anything in there
was is that supposed to be a space sorry
for that guess I'm actually just used to
be used using the terminal let me just
copy that again and let me see if I made
any syntax error I should be able to get
it man or is it 4000 let me let me try
that again because the user ID the super
user IDs remember they were looking for
interactive know what press scan should
exist here but again it's running Ubuntu
so that means they'll not have WordPress
scan all right so there is something
going on here no it's probably 3000 or
4000 because I'm actually have actually
forgotten this stuff that's quite
embarrassing man so bummed
let's try 4000 first-rate 4000 and - all
right just to make sure that it goes to
the user the user permissions and we
select death which is the folder and now
okay and we can hit enter all right yes
yes so that worked so these are the
files that are currently accessible in
interactive mode and some of you are
looking for a script that we can run
because that's the only way we can get
in so the use of being password
let's actually explore that that's
interesting that is very interesting so
let's actually try and explore that that
looks quite interesting to be honest I'm
not gonna lie so it's still going
through the files and it should actually
give us the response here because now
it's not given us the active response so
now how to go back so it's still finding
files so let that continue finding files
we now need to to use one of these
programs I'm going to try the password
fold-up cause they probably the
passwords and then then we can log in
directly into root or or it's going to
be either sudo or nmap how about we try
and map but then end up I think we can
use interactive mode but then can we
launch can we launch the shell from
there and for some reason this is died
down limit how come we cannot exit
cannot choose Phi X oh boy looks like
we're gonna have to do that again so I'm
gonna listen back again here and curl
back again there hopefully we can get
the connection have we got the reverse
connection yes all right so am I still
using daemon here
sorry about that guys so now we know if
the files are ID so CD we can just
change because I have the password so we
have the cracked md5 or actually did I
have that open yes so it's
ABCD let me just copy that again sorry
about that guys for some reason it
failed on me this is part of penetration
testing you know it's just always going
to be filled with errors so what we want
to do now is we want to use these sousou
superuser whoops sorry about that Super
User and we want to log into mr. robot
or robot sorry what am I talking here
super user so super is a robot and super
user must be run from terminal oh yes we
need to import the Python here so we
need to import Python let me remember
come on come on import Python C input
permission speed PTY so python sorry
about this guys Python C import PTY and
then
we importing BTY again video why not
I believe there's a space there TTY PT y
dot spawn responding PT y dot spawn the
shell so a spawning the shell
all right so bin bin and the shell so we
close that up again and we close that
and we close that oops my bad and we
close that and we should get the shell
now now we can actually log in super
easy
robot robot quickly go through that and
I'm going to paste in the hash here that
we have unhatched then we now have we
can check our ID and we are back to
where we left off we're trying to gain
access to super user so I saw n map
there now
nmap is essentially lies in the folder
well we can actually launch n map and
see what we have here
so can I try and launch n map here yes
it does work excellent so now let's try
and launch n map does it how do you
launch our date is n map interactive
just what we wanted
all right so nmap interactive map
interactive hopefully this allows us to
launch the shell all right yes yes we
can use an excellent excelente now we
need to launch the shell
can we just launch it using the bin
shell or and we do sudo passion why not
you are not using TTY so we'll have to
use the old-school style shell yes yes
yes I mean super user no no a still oh
yeah we are we actually have the user ID
so I'm actually in robot so we have to
actually change but that means we have
permissions no so what we need to do now
is we have permission so I'm just gonna
just gonna list the files here so we
have to actually go back list the files
there and we have to go to root nor can
I actually access route yes I can access
route all right what files are there
first book and we have finally found it
the final key key three of three dot X
there hope there is and
encryption cat key three key three of
three dot txt and please be the key yes
yes we have finally got it oh my god
that took a lot of time as well I'm not
gonna say that was too bad but I have to
actually start practicing man because
that took a lot of time and we got all
the keys all the flags really in the
previous video we actually made some
fundamental mistakes with Metasploit but
I didn't know that the exploit was
deprecated and there was something wrong
with the meta Prater so let me just copy
the first key here so I do challenge you
guys I've shown you how to do it and you
can try it out for yourself you can you
know do it the same way I know I may
have done mine a bit different but
that's how I think in terms of
penetration testing you know privilege
escalation all that good stuff I was
actually really keen on using the
Metasploit because that would have saved
a lot of time and you know you don't
have to use many tools but as I said
this is a great place to learn your
skills and as you can see we have gained
access to the to these to the virtual
machine or the server depending on what
you want to call it and there you are
you know I've captured all the three
keys and I hope you enjoyed it I hope
you've all value in this video so that's
going to be it for this a VM this
capture-the-flag of VM series in the
next cctf series we're going to be
looking at another one so leave your
suggestions in the comment section and
I'll be sure to check it out and you
know we can go ahead and learn like this
so that's gonna be it for this video
guys if you have any questions or
suggestions let me know in the comments
section or on my social networks or you
can post them on my website and I'll be
seeing you in the next video peace</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>