<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Live Coding an Expandable Component in Ionic | Coder Coacher - Coaching Coders</title><meta content="Live Coding an Expandable Component in Ionic - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Joshua-Morony/">Joshua Morony</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Live Coding an Expandable Component in Ionic</b></h2><h5 class="post__date">2017-06-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0-goeHxBc8c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video I'm going to be doing
another live coding style video I'm
going to try and build out a Nayana
component and if you haven't seen one of
these style of videos before basically
what I do is I just have this vague idea
of what I want to build and then I walk
through building it on screen and so the
idea is that since I don't really know
how I'm going to do it I can kind of
walk through how I'd go about building
playing in a more realistic way rather
than knowing up front that everything is
going to work and so what I'd like to
build is I want to create a little sort
of expandable component so I've got this
list here from the ionic documentation
and what I want to do is just have sort
of section in here that I want to click
on this list is going to expand the
particular item that I clicked on and
then if I were to click that again then
that would that expandable section would
shrink away and I expose potentially the
use case so that here would be it a
little bit more information about a
particular list item you could click
that and then if you wanted to see a
full view of that item perhaps then you
would click on the View button and it
would take you to the actual detail page
for that item and so what I'm going to
do is create a an expandable component
so nothing specific to this list but
just a little component that can be
expanded and shrunk so before I get
started though I'm going to set this
list up in the application that I just
generated so I'm just going to copy this
and we're just going to put that onto
the home page and since this is
referencing an image that we don't have
I'm just going to change this to a
placeholder link if you do use
placeholder basically it's just a
placeholder image service so we have to
do is just link to placeholder and then
just give the dimensions that you want
so if I do 100 it's going to give me a
100 by 100 picture but you can also do
different dimensions like 100 by 200 if
you wanted to do that so I'll save that
and we're going to serve
I'm already happy serving actually let
me just reserve it and we'll just wait
for that to pop up here okay cool so
we've got our one list item there now
what I want to do is obviously have a
few more to play around with and so what
I do when I just when I want some just
test items to play around with what I do
is is go into the tub script file and
just create a class member I will call
it say items and I just generate a new
array and pass in say 10 here so that's
going to create empty array we can add
10 elements in it for us so if I then
just loop over that with an NG for
directive that's going to give us it's
going to give us 10 I was going to
repeat this item 10 times so it's just
going to be the same data for each item
but it's just a quick way to get some
test starter in there so let's check
that that worked cool so it looks like
that is working fine so as I mention
what I want to do is have some kind of
expandable component so I'm going to
drop that component inside of here
somewhere and then I want to have that
be triggered somehow so that when I say
click this item here and that event
would trigger some function and then
that would cause that component to
expand so to get started I'm going to
create that component using the command
line interface here
so I'm just going to an ionic G
component and we'll call this life
terrible at naming things let's just go
with expandable so once I finish is
generating you would see that pop in
here and the components if I open it up
which we have a expandable component
here now and if we look in the app
module dock PS file you can also see
that this is automatically inserted into
the declarations for us and imported as
well so we don't actually have to do
that manually anymore which is very cool
but it does also generate this module
file which was used was used for
lazy loading which we're not doing so
we're just going to delete that file
because we don't need it and I'm also
just going to clean up this component a
bit I don't need this boilerplate code
decided by default so I'm just going to
delete some of that and this text
variable as well and it might just keep
the console that logs down so what I
might do actually is jump back into this
template here I'm just going to load so
we can verify that the component is
working and then if I jump that in here
now we'll put it under the main content
here so I'll just use our the selector
for that which is expandable so if I
just write expandable that is my element
here if we take a look through the
browser now we should see we should just
see hello injected where this is okay so
you can see that hello is being injected
there fine so that's good so now we just
need to actually make that component do
something and so what I think I want to
be able to do is I want to have two
inputs on this I think so this is
usually what I do when I'm creating a
component I just use it and in a way
that in the template here that it's the
way that I want it to work and then I
sort of build from that and actually
make it do those things and support the
inputs I'm trying to give it so I want
to be able to give it a I want to give
it a height that we're going to set
initially so I'm going to call this
option input rather I'll click expand
Phi so it's the height that it's going
to expand to and so I'd set that to say
200 and then I also want to give it a
sort of a boolean value that's going to
say whether or not it should be expanded
as I was called that important expanded
and we'd be able to say that to say true
and now eventually what I am going to do
is toggle this value so I might just set
that up now so if we set a Pahlavi here
called item expanded perhaps
and we set up to a boolean value that
was set to all set to false by default
so making sense and then I can supply
that belly through here for use of
square brackets that's going to bind to
that value and we called that item
expanded so now we'd be able to toggle
whether or not this is expanded just by
changing this value here and so long as
I spelled it correctly and we could do
the same with the expand height too if
we wanted to be able to modify that but
I don't I'm going to worry about that
I'll probably just keep that static and
I also don't want to have just hello
injected what I want to be able to do is
supply my own content in here so I'll
just write hello again for now
hello people and then in order to get
that into our component we need to
protect it so this is currently as a
template for that component but what I
want to do is take this content here and
make that the template and so in order
to do that you need to use something
called content projection so I can just
write ng content and ng content and
that's going to take everything that is
inside of this component here and it's
going to protect it project it into the
template so if we load this up again now
hopefully we should see hello people
there instead of hello like it was
before and I've got some console area
here what did we do wrong we had card
line to expand it's not known properly
of expandable so that's because we're
using these inputs that don't exist yet
so now it's really good time to actually
define those so if we come into the
actual the class for our expandable
component here we need to define those
inputs and as the first we're going to
have to import input from the angular
library and then we can just set them up
above the constructor so we have an
input called eggs the ended is I correct
yes
and we'll call that line expanded so
that means they're going to be able to
access that input through referencing
this expanded throughout this class now
you can call that whatever you want and
we'll do the same for the expanded
height so now if I add an NG after view
in it hook here which runs after the
viewers initialize and so that point we
should be ready to be grabbed if I try
to log these out we should be able to
see those values so I'll look at this
dive expanded and this dot expanded
height okay so in the browser here we
have things being logged out so one is
working so on line 17 the expanded belly
is getting a little doubts line we're
getting undefined for the expanded
height so let's try and figure out why
that's happening because I call it
expand height not expanded height so
I'll just change that in here and then
that should start working so now we can
see that both of those values are being
logged out now such a string value there
what I might do just to make things a
bit easier as I am going to define this
expand height in our home over here just
like we did with the item expanded value
so I'll just change this to equal this
item item expand height and then we'll
set that in here as well now we've set
it to 200 and we should still be able to
see that in here once it refreshes
hopefully thank you so we have a false
value for the expand which determines
whether or not that the component should
be expanded and then we have 200 which
is the height that it will expand to so
right now that is it set to false so
that means that we should be able to see
hello people now should not be expanded
we should not be able to see it so let's
work on that first we'll try and get it
so that by default if we supply false
there it's not going to show up
this and so what I'm going to do to
achieve that is I'm just going to define
a variable here called a current height
it's going to be a number and by default
that's going to just be zero and what I
want to do is in this ng after view in
this ng after view init function is
basically if I want if it's expanded I
want the height to be whatever the
expand height is if it's not then I want
it to be now I want it to be zero so
what I'm going to do here is I want it
to be I want to be not visible that by
default so I'm going to come into this
CSS file here and I'm going to set the
fight of this to zero but I also want to
be able to change that to say I'll just
do this kind of manually for now so
we'll say I want it to be 200 so we're
going to create a an expanded class in
here and we're going to set that height
to 200 and so what we want to do now is
want to optionally or conditionally
apply this expanded class only when it
should be expanded and so what we can do
to achieve that is I might just actually
add a wrapper sort of around this we'll
call it school eggs and wrapper
and then we'll target that in here
instead as I expand wrapper so they can
have a height of zero and then if we
have the expand class and then we want
it to have a height of 200 so I'm just
going to have the important attribute to
that and so now we just want to
conditionally apply that expanded class
then and so in order to do that what I'm
going to do is use this syntax where the
square brackets here so what I can do is
class dot is it expanded so we can
conditionally apply that by signing this
too if we bind that to a boolean value
again that's going to toggle this class
on an off based on whatever this value
is and so if we hook into the expanded
value that we already have that's
already a boolean that we're going to
toggle off and on we should be able to
use that to also toggle this class on
and off so if we do class expanded
equals expanded which we'll link it to
this input here that should apply this
class only when this value is set to
true as in the value that we're passing
in here so we'll see if that works so by
default we shouldn't be able to see
anything and then if we flip that value
to true we should be able to okay so we
don't see anything by default there
which is good so just a check that that
actually does work which manually switch
this to true okay so we're still not
seeing anything there so let's we'll
inspect that and we'll see why we can't
see it so just search for that
expandable looks like that height is
being invalid property value what about
general I forgot to do pixels 300 px
let's try that again okay so that is
expanded s we have that 200 high area
that's being expanded we set that to
true obviously it's kind of destroyed
this um
a list here we'd need to style this
appropriately so it could accommodate
this big area as well but the main point
is that that is working now so now we
need to just be able to toggle that
ourselves rather than having to rely on
magic changing that value manually and
I'm going to try and quickly do that I'm
actually running low on battery here so
I might not be able to take this video
as far as I wanted but I probably
wherever I don't get to I'll follow up
in a blog post or something like that so
probably this end up sticking with a
simple example for now so what I'm going
to do is I already have that I created
this array just a simple array just so
we could have 10 items but now I'm
actually going to modify this to be a
little bit more complex so what I'm
going to do is it's going to change that
in just do a blank array here and I'm
going to assign it my own values
manually here so I'm going to say this
dot items equals and I'm going to add a
few items here I'm not going to worry
about adding data here mainly I'm just
interested in having some kind of
expanded value so all these are going to
be folks so obviously I could also have
a title in there if we wanted to display
that in the list but I'm not going to
worry about that because it's not really
relevant so I'm going to just paste out
a few of these so we should still err we
if we refresh this now we should still
see some list items in here we should
only have what is that's seven six nine
something like that so we still have
nine items here now which is good I'm
actually going to get rid of this value
if we don't need that anymore and in
here instead of using the item expand a
variable that we were just using we're
actually going to use value from the
item itself so we have a property there
called expanded on the item so just
going to reference item die expanded
instead and then that should be based on
this rather than that variable we had
before
so right now in here it's they're all
set to false so we can't see any of them
let's just check that that actually does
work so if I change one of these to true
we should see the hello people seeing
pop up there and it does so now we just
need to programmatically change those so
what I'm going to do is a function here
called expand item it's going to take in
the item and then that's going to set at
the body expanded property on that so
the opposite of whatever it currently is
so with that item drive expanded equals
not item don't expanded so if it's false
it will become true if it's true it will
become false and then we just need to
trigger that function from I on item
here so we should probably change it to
a button on item because we're clicking
on it now and we'll call that expand
item function and we'll pass in the item
to that and sorry if I am rushing a
little bit now I didn't realize how low
the battery was so I was trying to get
through this okay so I'll just refresh
up and I click on this now cool that
pops up and if I click it again it goes
away and so that's quite an abrupt
transition obviously and so what we can
also do to make this look a little bit
nicer is to add a transition property on
that and so if I said a transition of
say one maybe 0.5 seconds do a linear
transformation a transition rather and
so rather than just instantly setting
changing the height from 0 to 200 it's
going to do that more slowly so smoothly
and slowly so again over I'll just
refresh this and if I click on something
now you see how it just kind of nicely
expands and collapses now rather than
just flicking on and off
and maybe we even said that like a
little bit fast I said it at 0.2 seconds
speed things up a little bit yeah that's
kind of feels nice and snappy now doing
that so I did want to make this a little
bit more I'll take this a little bit
further I guess obviously this is still
pretty bare-bones of functionality
itself works but in this context it
doesn't look great because you know
obviously it doesn't really work well
with our list as it is currently but I
am running low on battery as I will
probably just cut it here and oh yeah
perhaps put up a blog post with a little
bit more of a polished version I also
did want to make the height configurable
as well but again yeah perhaps I'll get
it
get to that in a blog post or something
like that so yeah I hope you enjoyed
this video I hope you learned something
and I'll see you in the next one
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>